<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › isdn › hysdn › hysdn_defs.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>hysdn_defs.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* $Id: hysdn_defs.h,v 1.5.6.3 2001/09/23 22:24:54 kai Exp $</span>
<span class="cm"> *</span>
<span class="cm"> * Linux driver for HYSDN cards</span>
<span class="cm"> * global definitions and exported vars and functions.</span>
<span class="cm"> *</span>
<span class="cm"> * Author    Werner Cornelius (werner@titro.de) for Hypercope GmbH</span>
<span class="cm"> * Copyright 1999 by Werner Cornelius (werner@titro.de)</span>
<span class="cm"> *</span>
<span class="cm"> * This software may be used and distributed according to the terms</span>
<span class="cm"> * of the GNU General Public License, incorporated herein by reference.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef HYSDN_DEFS_H</span>
<span class="cp">#define HYSDN_DEFS_H</span>

<span class="cp">#include &lt;linux/hysdn_if.h&gt;</span>
<span class="cp">#include &lt;linux/interrupt.h&gt;</span>
<span class="cp">#include &lt;linux/workqueue.h&gt;</span>
<span class="cp">#include &lt;linux/skbuff.h&gt;</span>

<span class="cp">#include &quot;ince1pc.h&quot;</span>

<span class="cp">#ifdef CONFIG_HYSDN_CAPI</span>
<span class="cp">#include &lt;linux/capi.h&gt;</span>
<span class="cp">#include &lt;linux/isdn/capicmd.h&gt;</span>
<span class="cp">#include &lt;linux/isdn/capiutil.h&gt;</span>
<span class="cp">#include &lt;linux/isdn/capilli.h&gt;</span>

<span class="cm">/***************************/</span>
<span class="cm">/*   CAPI-Profile values.  */</span>
<span class="cm">/***************************/</span>

<span class="cp">#define GLOBAL_OPTION_INTERNAL_CONTROLLER 0x0001</span>
<span class="cp">#define GLOBAL_OPTION_EXTERNAL_CONTROLLER 0x0002</span>
<span class="cp">#define GLOBAL_OPTION_HANDSET             0x0004</span>
<span class="cp">#define GLOBAL_OPTION_DTMF                0x0008</span>
<span class="cp">#define GLOBAL_OPTION_SUPPL_SERVICES      0x0010</span>
<span class="cp">#define GLOBAL_OPTION_CHANNEL_ALLOCATION  0x0020</span>
<span class="cp">#define GLOBAL_OPTION_B_CHANNEL_OPERATION 0x0040</span>

<span class="cp">#define B1_PROT_64KBIT_HDLC        0x0001</span>
<span class="cp">#define B1_PROT_64KBIT_TRANSPARENT 0x0002</span>
<span class="cp">#define B1_PROT_V110_ASYNCH        0x0004</span>
<span class="cp">#define B1_PROT_V110_SYNCH         0x0008</span>
<span class="cp">#define B1_PROT_T30                0x0010</span>
<span class="cp">#define B1_PROT_64KBIT_INV_HDLC    0x0020</span>
<span class="cp">#define B1_PROT_56KBIT_TRANSPARENT 0x0040</span>

<span class="cp">#define B2_PROT_ISO7776            0x0001</span>
<span class="cp">#define B2_PROT_TRANSPARENT        0x0002</span>
<span class="cp">#define B2_PROT_SDLC               0x0004</span>
<span class="cp">#define B2_PROT_LAPD               0x0008</span>
<span class="cp">#define B2_PROT_T30                0x0010</span>
<span class="cp">#define B2_PROT_PPP                0x0020</span>
<span class="cp">#define B2_PROT_TRANSPARENT_IGNORE_B1_FRAMING_ERRORS 0x0040</span>

<span class="cp">#define B3_PROT_TRANSPARENT        0x0001</span>
<span class="cp">#define B3_PROT_T90NL              0x0002</span>
<span class="cp">#define B3_PROT_ISO8208            0x0004</span>
<span class="cp">#define B3_PROT_X25_DCE            0x0008</span>
<span class="cp">#define B3_PROT_T30                0x0010</span>
<span class="cp">#define B3_PROT_T30EXT             0x0020</span>

<span class="cp">#define HYSDN_MAXVERSION		8</span>

<span class="cm">/* Number of sendbuffers in CAPI-queue */</span>
<span class="cp">#define HYSDN_MAX_CAPI_SKB             20</span>

<span class="cp">#endif </span><span class="cm">/* CONFIG_HYSDN_CAPI*/</span><span class="cp"></span>

<span class="cm">/************************************************/</span>
<span class="cm">/* constants and bits for debugging/log outputs */</span>
<span class="cm">/************************************************/</span>
<span class="cp">#define LOG_MAX_LINELEN 120</span>
<span class="cp">#define DEB_OUT_SYSLOG  0x80000000	</span><span class="cm">/* output to syslog instead of proc fs */</span><span class="cp"></span>
<span class="cp">#define LOG_MEM_ERR     0x00000001	</span><span class="cm">/* log memory errors like kmalloc failure */</span><span class="cp"></span>
<span class="cp">#define LOG_POF_OPEN    0x00000010	</span><span class="cm">/* log pof open and close activities */</span><span class="cp"></span>
<span class="cp">#define LOG_POF_RECORD  0x00000020	</span><span class="cm">/* log pof record parser */</span><span class="cp"></span>
<span class="cp">#define LOG_POF_WRITE   0x00000040	</span><span class="cm">/* log detailed pof write operation */</span><span class="cp"></span>
<span class="cp">#define LOG_POF_CARD    0x00000080	</span><span class="cm">/* log pof related card functions */</span><span class="cp"></span>
<span class="cp">#define LOG_CNF_LINE    0x00000100	</span><span class="cm">/* all conf lines are put to procfs */</span><span class="cp"></span>
<span class="cp">#define LOG_CNF_DATA    0x00000200	</span><span class="cm">/* non comment conf lines are shown with channel */</span><span class="cp"></span>
<span class="cp">#define LOG_CNF_MISC    0x00000400	</span><span class="cm">/* additional conf line debug outputs */</span><span class="cp"></span>
<span class="cp">#define LOG_SCHED_ASYN  0x00001000	</span><span class="cm">/* debug schedulers async tx routines */</span><span class="cp"></span>
<span class="cp">#define LOG_PROC_OPEN   0x00100000	</span><span class="cm">/* open and close from procfs are logged */</span><span class="cp"></span>
<span class="cp">#define LOG_PROC_ALL    0x00200000	</span><span class="cm">/* all actions from procfs are logged */</span><span class="cp"></span>
<span class="cp">#define LOG_NET_INIT    0x00010000	</span><span class="cm">/* network init and deinit logging */</span><span class="cp"></span>

<span class="cp">#define DEF_DEB_FLAGS   0x7fff000f	</span><span class="cm">/* everything is logged to procfs */</span><span class="cp"></span>

<span class="cm">/**********************************/</span>
<span class="cm">/* proc filesystem name constants */</span>
<span class="cm">/**********************************/</span>
<span class="cp">#define PROC_SUBDIR_NAME &quot;hysdn&quot;</span>
<span class="cp">#define PROC_CONF_BASENAME &quot;cardconf&quot;</span>
<span class="cp">#define PROC_LOG_BASENAME &quot;cardlog&quot;</span>

<span class="cm">/***********************************/</span>
<span class="cm">/* PCI 32 bit parms for IO and MEM */</span>
<span class="cm">/***********************************/</span>
<span class="cp">#define PCI_REG_PLX_MEM_BASE    0</span>
<span class="cp">#define PCI_REG_PLX_IO_BASE     1</span>
<span class="cp">#define PCI_REG_MEMORY_BASE     3</span>

<span class="cm">/**************/</span>
<span class="cm">/* card types */</span>
<span class="cm">/**************/</span>
<span class="cp">#define BD_NONE         0U</span>
<span class="cp">#define BD_PERFORMANCE  1U</span>
<span class="cp">#define BD_VALUE        2U</span>
<span class="cp">#define BD_PCCARD       3U</span>
<span class="cp">#define BD_ERGO         4U</span>
<span class="cp">#define BD_METRO        5U</span>
<span class="cp">#define BD_CHAMP2       6U</span>
<span class="cp">#define BD_PLEXUS       7U</span>

<span class="cm">/******************************************************/</span>
<span class="cm">/* defined states for cards shown by reading cardconf */</span>
<span class="cm">/******************************************************/</span>
<span class="cp">#define CARD_STATE_UNUSED   0	</span><span class="cm">/* never been used or booted */</span><span class="cp"></span>
<span class="cp">#define CARD_STATE_BOOTING  1	</span><span class="cm">/* booting is in progress */</span><span class="cp"></span>
<span class="cp">#define CARD_STATE_BOOTERR  2	</span><span class="cm">/* a previous boot was aborted */</span><span class="cp"></span>
<span class="cp">#define CARD_STATE_RUN      3	</span><span class="cm">/* card is active */</span><span class="cp"></span>

<span class="cm">/*******************************/</span>
<span class="cm">/* defines for error_log_state */</span>
<span class="cm">/*******************************/</span>
<span class="cp">#define ERRLOG_STATE_OFF   0	</span><span class="cm">/* error log is switched off, nothing to do */</span><span class="cp"></span>
<span class="cp">#define ERRLOG_STATE_ON    1	</span><span class="cm">/* error log is switched on, wait for data */</span><span class="cp"></span>
<span class="cp">#define ERRLOG_STATE_START 2	</span><span class="cm">/* start error logging */</span><span class="cp"></span>
<span class="cp">#define ERRLOG_STATE_STOP  3	</span><span class="cm">/* stop error logging */</span><span class="cp"></span>

<span class="cm">/*******************************/</span>
<span class="cm">/* data structure for one card */</span>
<span class="cm">/*******************************/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">HYSDN_CARD</span> <span class="p">{</span>

	<span class="cm">/* general variables for the cards */</span>
	<span class="kt">int</span> <span class="n">myid</span><span class="p">;</span>		<span class="cm">/* own driver card id */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">bus</span><span class="p">;</span>	<span class="cm">/* pci bus the card is connected to */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">devfn</span><span class="p">;</span>	<span class="cm">/* slot+function bit encoded */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">subsysid</span><span class="p">;</span><span class="cm">/* PCI subsystem id */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">brdtype</span><span class="p">;</span>	<span class="cm">/* type of card */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bchans</span><span class="p">;</span>	<span class="cm">/* number of available B-channels */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">faxchans</span><span class="p">;</span>	<span class="cm">/* number of available fax-channels */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">mac_addr</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span><span class="cm">/* MAC Address read from card */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">irq</span><span class="p">;</span>	<span class="cm">/* interrupt number */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">iobase</span><span class="p">;</span>	<span class="cm">/* IO-port base address */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">plxbase</span><span class="p">;</span>	<span class="cm">/* PLX memory base */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">membase</span><span class="p">;</span>	<span class="cm">/* DPRAM memory base */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">memend</span><span class="p">;</span>	<span class="cm">/* DPRAM memory end */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">dpram</span><span class="p">;</span>		<span class="cm">/* mapped dpram */</span>
	<span class="kt">int</span> <span class="n">state</span><span class="p">;</span>		<span class="cm">/* actual state of card -&gt; CARD_STATE_** */</span>
	<span class="k">struct</span> <span class="n">HYSDN_CARD</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>	<span class="cm">/* pointer to next card */</span>

	<span class="cm">/* data areas for the /proc file system */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">proclog</span><span class="p">;</span>		<span class="cm">/* pointer to proclog filesystem specific data */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">procconf</span><span class="p">;</span>		<span class="cm">/* pointer to procconf filesystem specific data */</span>

	<span class="cm">/* debugging and logging */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">err_log_state</span><span class="p">;</span><span class="cm">/* actual error log state of the card */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">debug_flags</span><span class="p">;</span><span class="cm">/* tells what should be debugged and where */</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">set_errlog_state</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">HYSDN_CARD</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>

	<span class="cm">/* interrupt handler + interrupt synchronisation */</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">irq_queue</span><span class="p">;</span>	<span class="cm">/* interrupt task queue */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="k">volatile</span> <span class="n">irq_enabled</span><span class="p">;</span><span class="cm">/* interrupt enabled if != 0 */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="k">volatile</span> <span class="n">hw_lock</span><span class="p">;</span><span class="cm">/* hardware is currently locked -&gt; no access */</span>

	<span class="cm">/* boot process */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">boot</span><span class="p">;</span>		<span class="cm">/* pointer to boot private data */</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">writebootimg</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">HYSDN_CARD</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">writebootseq</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">HYSDN_CARD</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">waitpofready</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">HYSDN_CARD</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">testram</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">HYSDN_CARD</span> <span class="o">*</span><span class="p">);</span>

	<span class="cm">/* scheduler for data transfer (only async parts) */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">async_data</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span><span class="cm">/* async data to be sent (normally for config) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="k">volatile</span> <span class="n">async_len</span><span class="p">;</span><span class="cm">/* length of data to sent */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="k">volatile</span> <span class="n">async_channel</span><span class="p">;</span><span class="cm">/* channel number for async transfer */</span>
	<span class="kt">int</span> <span class="k">volatile</span> <span class="n">async_busy</span><span class="p">;</span>	<span class="cm">/* flag != 0 sending in progress */</span>
	<span class="kt">int</span> <span class="k">volatile</span> <span class="n">net_tx_busy</span><span class="p">;</span>	<span class="cm">/* a network packet tx is in progress */</span>

	<span class="cm">/* network interface */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">netif</span><span class="p">;</span>		<span class="cm">/* pointer to network structure */</span>

	<span class="cm">/* init and deinit stopcard for booting, too */</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">stopcard</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">HYSDN_CARD</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">releasehardware</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">HYSDN_CARD</span> <span class="o">*</span><span class="p">);</span>

	<span class="n">spinlock_t</span> <span class="n">hysdn_lock</span><span class="p">;</span>
<span class="cp">#ifdef CONFIG_HYSDN_CAPI</span>
	<span class="k">struct</span> <span class="n">hycapictrl_info</span> <span class="p">{</span>
		<span class="kt">char</span> <span class="n">cardname</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
		<span class="n">spinlock_t</span> <span class="n">lock</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">versionlen</span><span class="p">;</span>
		<span class="kt">char</span> <span class="n">versionbuf</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
		<span class="kt">char</span> <span class="o">*</span><span class="n">version</span><span class="p">[</span><span class="n">HYSDN_MAXVERSION</span><span class="p">];</span>

		<span class="kt">char</span> <span class="n">infobuf</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>	<span class="cm">/* for function procinfo */</span>

		<span class="k">struct</span> <span class="n">HYSDN_CARD</span>  <span class="o">*</span><span class="n">card</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">capi_ctr</span> <span class="n">capi_ctrl</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skbs</span><span class="p">[</span><span class="n">HYSDN_MAX_CAPI_SKB</span><span class="p">];</span>
		<span class="kt">int</span> <span class="n">in_idx</span><span class="p">,</span> <span class="n">out_idx</span><span class="p">;</span>	<span class="cm">/* indexes to buffer ring */</span>
		<span class="kt">int</span> <span class="n">sk_count</span><span class="p">;</span>		<span class="cm">/* number of buffers currently in ring */</span>
		<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">tx_skb</span><span class="p">;</span>	<span class="cm">/* buffer for tx operation */</span>

		<span class="k">struct</span> <span class="n">list_head</span> <span class="n">ncci_head</span><span class="p">;</span>
	<span class="p">}</span> <span class="o">*</span><span class="n">hyctrlinfo</span><span class="p">;</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_HYSDN_CAPI */</span><span class="cp"></span>
<span class="p">}</span> <span class="n">hysdn_card</span><span class="p">;</span>

<span class="cp">#ifdef CONFIG_HYSDN_CAPI</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hycapictrl_info</span> <span class="n">hycapictrl_info</span><span class="p">;</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_HYSDN_CAPI */</span><span class="cp"></span>


<span class="cm">/*****************/</span>
<span class="cm">/* exported vars */</span>
<span class="cm">/*****************/</span>
<span class="k">extern</span> <span class="n">hysdn_card</span> <span class="o">*</span><span class="n">card_root</span><span class="p">;</span>	<span class="cm">/* pointer to first card */</span>



<span class="cm">/*************************/</span>
<span class="cm">/* im/exported functions */</span>
<span class="cm">/*************************/</span>

<span class="cm">/* hysdn_procconf.c */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">hysdn_procconf_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>	<span class="cm">/* init proc config filesys */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">hysdn_procconf_release</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>	<span class="cm">/* deinit proc config filesys */</span>

<span class="cm">/* hysdn_proclog.c */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">hysdn_proclog_init</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">);</span>	<span class="cm">/* init proc log entry */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">hysdn_proclog_release</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">);</span>	<span class="cm">/* deinit proc log entry */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">hysdn_addlog</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="p">...);</span>	<span class="cm">/* output data to log */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">hysdn_card_errlog</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">,</span> <span class="n">tErrLogEntry</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>	<span class="cm">/* output card log */</span>

<span class="cm">/* boardergo.c */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ergo_inithardware</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="n">card</span><span class="p">);</span>	<span class="cm">/* get hardware -&gt; module init */</span>

<span class="cm">/* hysdn_boot.c */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pof_write_close</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">);</span>	<span class="cm">/* close proc file after writing pof */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pof_write_open</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">**</span><span class="p">);</span>	<span class="cm">/* open proc file for writing pof */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pof_write_buffer</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>		<span class="cm">/* write boot data to card */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">EvalSysrTokData</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>		<span class="cm">/* Check Sysready Token Data */</span>

<span class="cm">/* hysdn_sched.c */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">hysdn_sched_tx</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span>
			  <span class="kt">unsigned</span> <span class="kt">short</span> <span class="k">volatile</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="k">volatile</span> <span class="o">*</span><span class="p">,</span>
			  <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">hysdn_sched_rx</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">,</span>
			  <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">hysdn_tx_cfgline</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span>
			    <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>	<span class="cm">/* send one cfg line */</span>

<span class="cm">/* hysdn_net.c */</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hynet_enable</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">hysdn_net_create</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">);</span>	<span class="cm">/* create a new net device */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">hysdn_net_release</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">);</span>	<span class="cm">/* delete the device */</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span><span class="n">hysdn_net_getname</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">);</span>	<span class="cm">/* get name of net interface */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">hysdn_tx_netack</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">);</span>	<span class="cm">/* acknowledge a packet tx */</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">hysdn_tx_netget</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">);</span>	<span class="cm">/* get next network packet */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">hysdn_rx_netpkt</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span>
			    <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>	<span class="cm">/* rxed packet from network */</span>

<span class="cp">#ifdef CONFIG_HYSDN_CAPI</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hycapi_enable</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">hycapi_capi_create</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">);</span>	<span class="cm">/* create a new capi device */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">hycapi_capi_release</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="p">);</span>	<span class="cm">/* delete the device */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">hycapi_capi_stop</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="n">card</span><span class="p">);</span>   <span class="cm">/* suspend */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">hycapi_rx_capipkt</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="n">card</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span>
			      <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">len</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">hycapi_tx_capiack</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="n">card</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">hycapi_tx_capiget</span><span class="p">(</span><span class="n">hysdn_card</span> <span class="o">*</span><span class="n">card</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">hycapi_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">hycapi_cleanup</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_HYSDN_CAPI */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* HYSDN_DEFS_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
