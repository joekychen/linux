<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › isdn › hysdn › hysdn_pof.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>hysdn_pof.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* $Id: hysdn_pof.h,v 1.2.6.1 2001/09/23 22:24:54 kai Exp $</span>
<span class="cm"> *</span>
<span class="cm"> * Linux driver for HYSDN cards, definitions used for handling pof-files.</span>
<span class="cm"> *</span>
<span class="cm"> * Author    Werner Cornelius (werner@titro.de) for Hypercope GmbH</span>
<span class="cm"> * Copyright 1999 by Werner Cornelius (werner@titro.de)</span>
<span class="cm"> *</span>
<span class="cm"> * This software may be used and distributed according to the terms</span>
<span class="cm"> * of the GNU General Public License, incorporated herein by reference.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cm">/************************/</span>
<span class="cm">/* POF specific defines */</span>
<span class="cm">/************************/</span>
<span class="cp">#define BOOT_BUF_SIZE   0x1000	</span><span class="cm">/* =4096, maybe moved to other h file */</span><span class="cp"></span>
<span class="cp">#define CRYPT_FEEDTERM  0x8142</span>
<span class="cp">#define CRYPT_STARTTERM 0x81a5</span>
<span class="cm">/*  max. timeout time in seconds</span>
<span class="cm"> *  from end of booting to POF is ready</span>
<span class="cm"> */</span>
<span class="cp">#define POF_READY_TIME_OUT_SEC  10</span>

<span class="cm">/**********************************/</span>
<span class="cm">/* defines for 1.stage boot image */</span>
<span class="cm">/**********************************/</span>

<span class="cm">/*  the POF file record containing the boot loader image</span>
<span class="cm"> *  has 2 pages a 16KB:</span>
<span class="cm"> *  1. page contains the high 16-bit part of the 32-bit E1 words</span>
<span class="cm"> *  2. page contains the low  16-bit part of the 32-bit E1 words</span>
<span class="cm"> *</span>
<span class="cm"> *  In each 16KB page we assume the start of the boot loader code</span>
<span class="cm"> *  in the highest 2KB part (at offset 0x3800);</span>
<span class="cm"> *  the rest (0x0000..0x37FF) is assumed to contain 0 bytes.</span>
<span class="cm"> */</span>

<span class="cp">#define POF_BOOT_LOADER_PAGE_SIZE   0x4000	</span><span class="cm">/* =16384U */</span><span class="cp"></span>
<span class="cp">#define POF_BOOT_LOADER_TOTAL_SIZE  (2U * POF_BOOT_LOADER_PAGE_SIZE)</span>

<span class="cp">#define POF_BOOT_LOADER_CODE_SIZE   0x0800	</span><span class="cm">/* =2KB =2048U */</span><span class="cp"></span>

<span class="cm">/* offset in boot page, where loader code may start */</span>
<span class="cm">/* =0x3800= 14336U */</span>
<span class="cp">#define POF_BOOT_LOADER_OFF_IN_PAGE (POF_BOOT_LOADER_PAGE_SIZE-POF_BOOT_LOADER_CODE_SIZE)</span>


<span class="cm">/*--------------------------------------POF file record structs------------*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">PofFileHdr_tag</span> <span class="p">{</span>	<span class="cm">/* Pof file header */</span>
	<span class="cm">/*00 */</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">Magic</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>
	<span class="cm">/*04 */</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">N_PofRecs</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>
<span class="cm">/*08 */</span>
<span class="p">}</span> <span class="n">tPofFileHdr</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">PofRecHdr_tag</span> <span class="p">{</span>	<span class="cm">/* Pof record header */</span>
	<span class="cm">/*00 */</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">PofRecId</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>
	<span class="cm">/*02 */</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">PofRecDataLen</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>
<span class="cm">/*06 */</span>
<span class="p">}</span> <span class="n">tPofRecHdr</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">PofTimeStamp_tag</span> <span class="p">{</span>
	<span class="cm">/*00 */</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">UnixTime</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>
	<span class="cm">/*04 */</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">DateTimeText</span><span class="p">[</span><span class="mh">0x28</span><span class="p">];</span>
	<span class="cm">/* =40 */</span>
<span class="cm">/*2C */</span>
<span class="p">}</span> <span class="n">tPofTimeStamp</span><span class="p">;</span>

<span class="cm">/* tPofFileHdr.Magic value: */</span>
<span class="cp">#define TAGFILEMAGIC 0x464F501AUL</span>
<span class="cm">/* tPofRecHdr.PofRecId values: */</span>
<span class="cp">#define TAG_ABSDATA  0x1000	</span><span class="cm">/* abs. data */</span><span class="cp"></span>
<span class="cp">#define TAG_BOOTDTA  0x1001	</span><span class="cm">/* boot data */</span><span class="cp"></span>
<span class="cp">#define TAG_COMMENT  0x0020</span>
<span class="cp">#define TAG_SYSCALL  0x0021</span>
<span class="cp">#define TAG_FLOWCTRL 0x0022</span>
<span class="cp">#define TAG_TIMESTMP 0x0010	</span><span class="cm">/* date/time stamp of version */</span><span class="cp"></span>
<span class="cp">#define TAG_CABSDATA 0x1100	</span><span class="cm">/* crypted abs. data */</span><span class="cp"></span>
<span class="cp">#define TAG_CBOOTDTA 0x1101	</span><span class="cm">/* crypted boot data */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
