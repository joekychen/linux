<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › isdn › hisax › hisax.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>hisax.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* $Id: hisax.h,v 2.64.2.4 2004/02/11 13:21:33 keil Exp $</span>
<span class="cm"> *</span>
<span class="cm"> * Basic declarations, defines and prototypes</span>
<span class="cm"> *</span>
<span class="cm"> * This software may be used and distributed according to the terms</span>
<span class="cm"> * of the GNU General Public License, incorporated herein by reference.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="cp">#include &lt;linux/errno.h&gt;</span>
<span class="cp">#include &lt;linux/fs.h&gt;</span>
<span class="cp">#include &lt;linux/major.h&gt;</span>
<span class="cp">#include &lt;asm/io.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/signal.h&gt;</span>
<span class="cp">#include &lt;linux/slab.h&gt;</span>
<span class="cp">#include &lt;linux/mm.h&gt;</span>
<span class="cp">#include &lt;linux/mman.h&gt;</span>
<span class="cp">#include &lt;linux/interrupt.h&gt;</span>
<span class="cp">#include &lt;linux/ioport.h&gt;</span>
<span class="cp">#include &lt;linux/timer.h&gt;</span>
<span class="cp">#include &lt;linux/wait.h&gt;</span>
<span class="cp">#include &lt;linux/isdnif.h&gt;</span>
<span class="cp">#include &lt;linux/tty.h&gt;</span>
<span class="cp">#include &lt;linux/serial_reg.h&gt;</span>
<span class="cp">#include &lt;linux/netdevice.h&gt;</span>

<span class="cp">#define ERROR_STATISTIC</span>

<span class="cp">#define REQUEST		0</span>
<span class="cp">#define CONFIRM		1</span>
<span class="cp">#define INDICATION	2</span>
<span class="cp">#define RESPONSE	3</span>

<span class="cp">#define HW_ENABLE	0x0000</span>
<span class="cp">#define HW_RESET	0x0004</span>
<span class="cp">#define HW_POWERUP	0x0008</span>
<span class="cp">#define HW_ACTIVATE	0x0010</span>
<span class="cp">#define HW_DEACTIVATE	0x0018</span>

<span class="cp">#define HW_INFO1	0x0010</span>
<span class="cp">#define HW_INFO2	0x0020</span>
<span class="cp">#define HW_INFO3	0x0030</span>
<span class="cp">#define HW_INFO4	0x0040</span>
<span class="cp">#define HW_INFO4_P8	0x0040</span>
<span class="cp">#define HW_INFO4_P10	0x0048</span>
<span class="cp">#define HW_RSYNC	0x0060</span>
<span class="cp">#define HW_TESTLOOP	0x0070</span>
<span class="cp">#define CARD_RESET	0x00F0</span>
<span class="cp">#define CARD_INIT	0x00F2</span>
<span class="cp">#define CARD_RELEASE	0x00F3</span>
<span class="cp">#define CARD_TEST	0x00F4</span>
<span class="cp">#define CARD_AUX_IND	0x00F5</span>

<span class="cp">#define PH_ACTIVATE	0x0100</span>
<span class="cp">#define PH_DEACTIVATE	0x0110</span>
<span class="cp">#define PH_DATA		0x0120</span>
<span class="cp">#define PH_PULL		0x0130</span>
<span class="cp">#define PH_TESTLOOP	0x0140</span>
<span class="cp">#define PH_PAUSE	0x0150</span>
<span class="cp">#define MPH_ACTIVATE	0x0180</span>
<span class="cp">#define MPH_DEACTIVATE	0x0190</span>
<span class="cp">#define MPH_INFORMATION	0x01A0</span>

<span class="cp">#define DL_ESTABLISH	0x0200</span>
<span class="cp">#define DL_RELEASE	0x0210</span>
<span class="cp">#define DL_DATA		0x0220</span>
<span class="cp">#define DL_FLUSH	0x0224</span>
<span class="cp">#define DL_UNIT_DATA	0x0230</span>

<span class="cp">#define MDL_BC_RELEASE  0x0278  </span><span class="c1">// Formula-n enter:now</span>
<span class="cp">#define MDL_BC_ASSIGN   0x027C  </span><span class="c1">// Formula-n enter:now</span>
<span class="cp">#define MDL_ASSIGN	0x0280</span>
<span class="cp">#define MDL_REMOVE	0x0284</span>
<span class="cp">#define MDL_ERROR	0x0288</span>
<span class="cp">#define MDL_INFO_SETUP	0x02E0</span>
<span class="cp">#define MDL_INFO_CONN	0x02E4</span>
<span class="cp">#define MDL_INFO_REL	0x02E8</span>

<span class="cp">#define CC_SETUP	0x0300</span>
<span class="cp">#define CC_RESUME	0x0304</span>
<span class="cp">#define CC_MORE_INFO	0x0310</span>
<span class="cp">#define CC_IGNORE	0x0320</span>
<span class="cp">#define CC_REJECT	0x0324</span>
<span class="cp">#define CC_SETUP_COMPL	0x0330</span>
<span class="cp">#define CC_PROCEEDING	0x0340</span>
<span class="cp">#define CC_ALERTING	0x0344</span>
<span class="cp">#define CC_PROGRESS	0x0348</span>
<span class="cp">#define CC_CONNECT	0x0350</span>
<span class="cp">#define CC_CHARGE	0x0354</span>
<span class="cp">#define CC_NOTIFY	0x0358</span>
<span class="cp">#define CC_DISCONNECT	0x0360</span>
<span class="cp">#define CC_RELEASE	0x0368</span>
<span class="cp">#define CC_SUSPEND	0x0370</span>
<span class="cp">#define CC_PROCEED_SEND 0x0374</span>
<span class="cp">#define CC_REDIR        0x0378</span>
<span class="cp">#define CC_T302		0x0382</span>
<span class="cp">#define CC_T303		0x0383</span>
<span class="cp">#define CC_T304		0x0384</span>
<span class="cp">#define CC_T305		0x0385</span>
<span class="cp">#define CC_T308_1	0x0388</span>
<span class="cp">#define CC_T308_2	0x038A</span>
<span class="cp">#define CC_T309         0x0309</span>
<span class="cp">#define CC_T310		0x0390</span>
<span class="cp">#define CC_T313		0x0393</span>
<span class="cp">#define CC_T318		0x0398</span>
<span class="cp">#define CC_T319		0x0399</span>
<span class="cp">#define CC_TSPID	0x03A0</span>
<span class="cp">#define CC_NOSETUP_RSP	0x03E0</span>
<span class="cp">#define CC_SETUP_ERR	0x03E1</span>
<span class="cp">#define CC_SUSPEND_ERR	0x03E2</span>
<span class="cp">#define CC_RESUME_ERR	0x03E3</span>
<span class="cp">#define CC_CONNECT_ERR	0x03E4</span>
<span class="cp">#define CC_RELEASE_ERR	0x03E5</span>
<span class="cp">#define CC_RESTART	0x03F4</span>
<span class="cp">#define CC_TDSS1_IO     0x13F4    </span><span class="cm">/* DSS1 IO user timer */</span><span class="cp"></span>
<span class="cp">#define CC_TNI1_IO      0x13F5    </span><span class="cm">/* NI1 IO user timer */</span><span class="cp"></span>

<span class="cm">/* define maximum number of possible waiting incoming calls */</span>
<span class="cp">#define MAX_WAITING_CALLS 2</span>


<span class="cp">#ifdef __KERNEL__</span>

<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">CardType</span><span class="p">[];</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nrcards</span><span class="p">;</span>

<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">l1_revision</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">l2_revision</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">l3_revision</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">lli_revision</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">tei_revision</span><span class="p">;</span>

<span class="cm">/* include l3dss1 &amp; ni1 specific process structures, but no other defines */</span>
<span class="cp">#ifdef CONFIG_HISAX_EURO</span>
<span class="cp">#define l3dss1_process</span>
<span class="cp">#include &quot;l3dss1.h&quot;</span>
<span class="cp">#undef  l3dss1_process</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_HISAX_EURO */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_HISAX_NI1</span>
<span class="cp">#define l3ni1_process</span>
<span class="cp">#include &quot;l3ni1.h&quot;</span>
<span class="cp">#undef  l3ni1_process</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_HISAX_NI1 */</span><span class="cp"></span>

<span class="cp">#define MAX_DFRAME_LEN	260</span>
<span class="cp">#define MAX_DFRAME_LEN_L1	300</span>
<span class="cp">#define HSCX_BUFMAX	4096</span>
<span class="cp">#define MAX_DATA_SIZE	(HSCX_BUFMAX - 4)</span>
<span class="cp">#define MAX_DATA_MEM	(HSCX_BUFMAX + 64)</span>
<span class="cp">#define RAW_BUFMAX	(((HSCX_BUFMAX * 6) / 5) + 5)</span>
<span class="cp">#define MAX_HEADER_LEN	4</span>
<span class="cp">#define MAX_WINDOW	8</span>
<span class="cp">#define MAX_MON_FRAME	32</span>
<span class="cp">#define MAX_DLOG_SPACE	2048</span>
<span class="cp">#define MAX_BLOG_SPACE	256</span>

<span class="cm">/* #define I4L_IRQ_FLAG SA_INTERRUPT */</span>
<span class="cp">#define I4L_IRQ_FLAG    0</span>

<span class="cm">/*</span>
<span class="cm"> * Statemachine</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">FsmInst</span><span class="p">;</span>

<span class="k">typedef</span> <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">FSMFNPTR</span><span class="p">)(</span><span class="k">struct</span> <span class="n">FsmInst</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">Fsm</span> <span class="p">{</span>
	<span class="n">FSMFNPTR</span> <span class="o">*</span><span class="n">jumpmatrix</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">state_count</span><span class="p">,</span> <span class="n">event_count</span><span class="p">;</span>
	<span class="kt">char</span> <span class="o">**</span><span class="n">strEvent</span><span class="p">,</span> <span class="o">**</span><span class="n">strState</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">FsmInst</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">Fsm</span> <span class="o">*</span><span class="n">fsm</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">state</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">debug</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">userdata</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">userint</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">printdebug</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">FsmInst</span> <span class="o">*</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="p">...);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">FsmNode</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">state</span><span class="p">,</span> <span class="n">event</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">routine</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">FsmInst</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">FsmTimer</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">FsmInst</span> <span class="o">*</span><span class="n">fi</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">tl</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">event</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">L3Timer</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">l3_process</span> <span class="o">*</span><span class="n">pc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">tl</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">event</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define FLG_L1_ACTIVATING	1</span>
<span class="cp">#define FLG_L1_ACTIVATED	2</span>
<span class="cp">#define FLG_L1_DEACTTIMER	3</span>
<span class="cp">#define FLG_L1_ACTTIMER		4</span>
<span class="cp">#define FLG_L1_T3RUN		5</span>
<span class="cp">#define FLG_L1_PULL_REQ		6</span>
<span class="cp">#define FLG_L1_UINT		7</span>

<span class="k">struct</span> <span class="n">Layer1</span> <span class="p">{</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">hardware</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">BCState</span> <span class="o">*</span><span class="n">bcs</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">PStack</span> <span class="o">**</span><span class="n">stlistp</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">Flags</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">FsmInst</span> <span class="n">l1m</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">FsmTimer</span>	<span class="n">timer</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">l1l2</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">l1hw</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">l1tei</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">mode</span><span class="p">,</span> <span class="n">bc</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">delay</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define GROUP_TEI	127</span>
<span class="cp">#define TEI_SAPI	63</span>
<span class="cp">#define CTRL_SAPI	0</span>
<span class="cp">#define PACKET_NOACK	7</span>

<span class="cm">/* Layer2 Flags */</span>

<span class="cp">#define FLG_LAPB	0</span>
<span class="cp">#define FLG_LAPD	1</span>
<span class="cp">#define FLG_ORIG	2</span>
<span class="cp">#define FLG_MOD128	3</span>
<span class="cp">#define FLG_PEND_REL	4</span>
<span class="cp">#define FLG_L3_INIT	5</span>
<span class="cp">#define FLG_T200_RUN	6</span>
<span class="cp">#define FLG_ACK_PEND	7</span>
<span class="cp">#define FLG_REJEXC	8</span>
<span class="cp">#define FLG_OWN_BUSY	9</span>
<span class="cp">#define FLG_PEER_BUSY	10</span>
<span class="cp">#define FLG_DCHAN_BUSY	11</span>
<span class="cp">#define FLG_L1_ACTIV	12</span>
<span class="cp">#define FLG_ESTAB_PEND	13</span>
<span class="cp">#define FLG_PTP		14</span>
<span class="cp">#define FLG_FIXED_TEI	15</span>
<span class="cp">#define FLG_L2BLOCK	16</span>

<span class="k">struct</span> <span class="n">Layer2</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">tei</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">sap</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">maxlen</span><span class="p">;</span>
	<span class="n">u_long</span> <span class="n">flag</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">lock</span><span class="p">;</span>
	<span class="n">u_int</span> <span class="n">vs</span><span class="p">,</span> <span class="n">va</span><span class="p">,</span> <span class="n">vr</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rc</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">window</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sow</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">windowar</span><span class="p">[</span><span class="n">MAX_WINDOW</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="n">i_queue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="n">ui_queue</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">l2l1</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">l2l3</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">l2tei</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">FsmInst</span> <span class="n">l2m</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">FsmTimer</span> <span class="n">t200</span><span class="p">,</span> <span class="n">t203</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">T200</span><span class="p">,</span> <span class="n">N200</span><span class="p">,</span> <span class="n">T203</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">debug</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">debug_id</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">Layer3</span> <span class="p">{</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">l3l4</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">l3ml3</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">l3l2</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">FsmInst</span> <span class="n">l3m</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">FsmTimer</span> <span class="n">l3m_timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="n">squeue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">l3_process</span> <span class="o">*</span><span class="n">proc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">l3_process</span> <span class="o">*</span><span class="n">global</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">N303</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">debug</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">debug_id</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">LLInterface</span> <span class="p">{</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">l4l3</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span>  <span class="p">(</span><span class="o">*</span><span class="n">l4l3_proto</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="p">,</span> <span class="n">isdn_ctrl</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">userdata</span><span class="p">;</span>
	<span class="n">u_long</span> <span class="n">flag</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define	FLG_LLI_L1WAKEUP	1</span>
<span class="cp">#define	FLG_LLI_L2WAKEUP	2</span>

<span class="k">struct</span> <span class="n">Management</span> <span class="p">{</span>
	<span class="kt">int</span>	<span class="n">ri</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">FsmInst</span> <span class="n">tei_m</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">FsmTimer</span> <span class="n">t202</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">T202</span><span class="p">,</span> <span class="n">N202</span><span class="p">,</span> <span class="n">debug</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">layer</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#define NO_CAUSE 254</span>

<span class="k">struct</span> <span class="n">Param</span> <span class="p">{</span>
	<span class="n">u_char</span> <span class="n">cause</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">loc</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">diag</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">bchannel</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">chargeinfo</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">spv</span><span class="p">;</span>		<span class="cm">/* SPV Flag */</span>
	<span class="n">setup_parm</span> <span class="n">setup</span><span class="p">;</span>	<span class="cm">/* from isdnif.h numbers and Serviceindicator */</span>
	<span class="n">u_char</span> <span class="n">moderate</span><span class="p">;</span>	<span class="cm">/* transfer mode and rate (bearer octet 4) */</span>
<span class="p">};</span>


<span class="k">struct</span> <span class="n">PStack</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">Layer1</span> <span class="n">l1</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">Layer2</span> <span class="n">l2</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">Layer3</span> <span class="n">l3</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">LLInterface</span> <span class="n">lli</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">Management</span> <span class="n">ma</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">protocol</span><span class="p">;</span>		<span class="cm">/* EDSS1, 1TR6 or NI1 */</span>

	<span class="cm">/* protocol specific data fields */</span>
	<span class="k">union</span>
	<span class="p">{</span> <span class="n">u_char</span> <span class="n">uuuu</span><span class="p">;</span> <span class="cm">/* only as dummy */</span>
<span class="cp">#ifdef CONFIG_HISAX_EURO</span>
		<span class="n">dss1_stk_priv</span> <span class="n">dss1</span><span class="p">;</span> <span class="cm">/* private dss1 data */</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_HISAX_EURO */</span><span class="cp"></span>
<span class="cp">#ifdef CONFIG_HISAX_NI1</span>
		<span class="n">ni1_stk_priv</span> <span class="n">ni1</span><span class="p">;</span> <span class="cm">/* private ni1 data */</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_HISAX_NI1 */</span><span class="cp"></span>
	<span class="p">}</span> <span class="n">prot</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">l3_process</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">callref</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">state</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">L3Timer</span> <span class="n">timer</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">N303</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">debug</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">Param</span> <span class="n">para</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">Channel</span> <span class="o">*</span><span class="n">chan</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">l3_process</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
	<span class="n">ulong</span> <span class="n">redir_result</span><span class="p">;</span>

	<span class="cm">/* protocol specific data fields */</span>
	<span class="k">union</span>
	<span class="p">{</span> <span class="n">u_char</span> <span class="n">uuuu</span><span class="p">;</span> <span class="cm">/* only when euro not defined, avoiding empty union */</span>
<span class="cp">#ifdef CONFIG_HISAX_EURO</span>
		<span class="n">dss1_proc_priv</span> <span class="n">dss1</span><span class="p">;</span> <span class="cm">/* private dss1 data */</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_HISAX_EURO */</span><span class="cp"></span>
<span class="cp">#ifdef CONFIG_HISAX_NI1</span>
		<span class="n">ni1_proc_priv</span> <span class="n">ni1</span><span class="p">;</span> <span class="cm">/* private ni1 data */</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_HISAX_NI1 */</span><span class="cp"></span>
	<span class="p">}</span> <span class="n">prot</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">hscx_hw</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">hscx</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rcvidx</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">count</span><span class="p">;</span>              <span class="cm">/* Current skb sent count */</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">rcvbuf</span><span class="p">;</span>         <span class="cm">/* B-Channel receive Buffer */</span>
	<span class="n">u_char</span> <span class="n">tsaxr0</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">tsaxr1</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">w6692B_hw</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">bchan</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rcvidx</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">count</span><span class="p">;</span>              <span class="cm">/* Current skb sent count */</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">rcvbuf</span><span class="p">;</span>         <span class="cm">/* B-Channel receive Buffer */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isar_reg</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">Flags</span><span class="p">;</span>
	<span class="k">volatile</span> <span class="n">u_char</span> <span class="n">bstat</span><span class="p">;</span>
	<span class="k">volatile</span> <span class="n">u_char</span> <span class="n">iis</span><span class="p">;</span>
	<span class="k">volatile</span> <span class="n">u_char</span> <span class="n">cmsb</span><span class="p">;</span>
	<span class="k">volatile</span> <span class="n">u_char</span> <span class="n">clsb</span><span class="p">;</span>
	<span class="k">volatile</span> <span class="n">u_char</span> <span class="n">par</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isar_hw</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">dpath</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rcvidx</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">txcnt</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mml</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">state</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">cmd</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">mod</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">newcmd</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">newmod</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">try_mod</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">ftimer</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">rcvbuf</span><span class="p">;</span>         <span class="cm">/* B-Channel receive Buffer */</span>
	<span class="n">u_char</span> <span class="n">conmsg</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">isar_reg</span> <span class="o">*</span><span class="n">reg</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">hdlc_stat_reg</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN</span>
	<span class="n">u_char</span> <span class="n">fill</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">mode</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">xml</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">cmd</span><span class="p">;</span>
<span class="cp">#else</span>
	<span class="n">u_char</span> <span class="n">cmd</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">xml</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">mode</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">fill</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">hdlc_hw</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="n">u_int</span> <span class="n">ctrl</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">hdlc_stat_reg</span> <span class="n">sr</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">ctrl</span><span class="p">;</span>
	<span class="n">u_int</span> <span class="n">stat</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rcvidx</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">count</span><span class="p">;</span>              <span class="cm">/* Current skb sent count */</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">rcvbuf</span><span class="p">;</span>         <span class="cm">/* B-Channel receive Buffer */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">hfcB_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">send</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">f1</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">f2</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">tiger_hw</span> <span class="p">{</span>
	<span class="n">u_int</span> <span class="o">*</span><span class="n">send</span><span class="p">;</span>
	<span class="n">u_int</span> <span class="o">*</span><span class="n">s_irq</span><span class="p">;</span>
	<span class="n">u_int</span> <span class="o">*</span><span class="n">s_end</span><span class="p">;</span>
	<span class="n">u_int</span> <span class="o">*</span><span class="n">sendp</span><span class="p">;</span>
	<span class="n">u_int</span> <span class="o">*</span><span class="n">rec</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">free</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">rcvbuf</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">sendbuf</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">sp</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">sendcnt</span><span class="p">;</span>
	<span class="n">u_int</span> <span class="n">s_tot</span><span class="p">;</span>
	<span class="n">u_int</span> <span class="n">r_bitcnt</span><span class="p">;</span>
	<span class="n">u_int</span> <span class="n">r_tot</span><span class="p">;</span>
	<span class="n">u_int</span> <span class="n">r_err</span><span class="p">;</span>
	<span class="n">u_int</span> <span class="n">r_fcs</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">r_state</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">r_one</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">r_val</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">s_state</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">amd7930_hw</span> <span class="p">{</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">tx_buff</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">rv_buff</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rv_buff_in</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rv_buff_out</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">rv_skb</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">hdlc_state</span> <span class="o">*</span><span class="n">hdlc_state</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">tq_rcv</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">tq_xmt</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define BC_FLG_INIT	1</span>
<span class="cp">#define BC_FLG_ACTIV	2</span>
<span class="cp">#define BC_FLG_BUSY	3</span>
<span class="cp">#define BC_FLG_NOFRAME	4</span>
<span class="cp">#define BC_FLG_HALF	5</span>
<span class="cp">#define BC_FLG_EMPTY	6</span>
<span class="cp">#define BC_FLG_ORIG	7</span>
<span class="cp">#define BC_FLG_DLEETX	8</span>
<span class="cp">#define BC_FLG_LASTDLE	9</span>
<span class="cp">#define BC_FLG_FIRST	10</span>
<span class="cp">#define BC_FLG_LASTDATA	11</span>
<span class="cp">#define BC_FLG_NMD_DATA	12</span>
<span class="cp">#define BC_FLG_FTI_RUN	13</span>
<span class="cp">#define BC_FLG_LL_OK	14</span>
<span class="cp">#define BC_FLG_LL_CONN	15</span>
<span class="cp">#define BC_FLG_FTI_FTS	16</span>
<span class="cp">#define BC_FLG_FRH_WAIT	17</span>

<span class="cp">#define L1_MODE_NULL	0</span>
<span class="cp">#define L1_MODE_TRANS	1</span>
<span class="cp">#define L1_MODE_HDLC	2</span>
<span class="cp">#define L1_MODE_EXTRN	3</span>
<span class="cp">#define L1_MODE_HDLC_56K 4</span>
<span class="cp">#define L1_MODE_MODEM	7</span>
<span class="cp">#define L1_MODE_V32	8</span>
<span class="cp">#define L1_MODE_FAX	9</span>

<span class="k">struct</span> <span class="n">BCState</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">channel</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mode</span><span class="p">;</span>
	<span class="n">u_long</span> <span class="n">Flag</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">cs</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">tx_cnt</span><span class="p">;</span>		<span class="cm">/* B-Channel transmit counter */</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">tx_skb</span><span class="p">;</span> <span class="cm">/* B-Channel transmit Buffer */</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="n">rqueue</span><span class="p">;</span>	<span class="cm">/* B-Channel receive Queue */</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="n">squeue</span><span class="p">;</span>	<span class="cm">/* B-Channel send Queue */</span>
	<span class="kt">int</span> <span class="n">ackcnt</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">aclock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">blog</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">conmsg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">transbusy</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">tqueue</span><span class="p">;</span>
	<span class="n">u_long</span> <span class="n">event</span><span class="p">;</span>
	<span class="kt">int</span>  <span class="p">(</span><span class="o">*</span><span class="n">BC_SetStack</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">BCState</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">BC_Close</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">BCState</span> <span class="o">*</span><span class="p">);</span>
<span class="cp">#ifdef ERROR_STATISTIC</span>
	<span class="kt">int</span> <span class="n">err_crc</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">err_tx</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">err_rdo</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">err_inv</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">hscx_hw</span> <span class="n">hscx</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">hdlc_hw</span> <span class="n">hdlc</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">isar_hw</span> <span class="n">isar</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">hfcB_hw</span> <span class="n">hfc</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">tiger_hw</span> <span class="n">tiger</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">amd7930_hw</span>  <span class="n">amd7930</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">w6692B_hw</span> <span class="n">w6692</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">hisax_b_if</span> <span class="o">*</span><span class="n">b_if</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">hw</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">Channel</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">b_st</span><span class="p">,</span> <span class="o">*</span><span class="n">d_st</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">cs</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">BCState</span> <span class="o">*</span><span class="n">bcs</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">chan</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">incoming</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">FsmInst</span> <span class="n">fi</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">FsmTimer</span> <span class="n">drel_timer</span><span class="p">,</span> <span class="n">dial_timer</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">debug</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">l2_protocol</span><span class="p">,</span> <span class="n">l2_active_protocol</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">l3_protocol</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">data_open</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">l3_process</span> <span class="o">*</span><span class="n">proc</span><span class="p">;</span>
	<span class="n">setup_parm</span> <span class="n">setup</span><span class="p">;</span>	<span class="cm">/* from isdnif.h numbers and Serviceindicator */</span>
	<span class="n">u_long</span> <span class="n">Flags</span><span class="p">;</span>		<span class="cm">/* for remembering action done in l4 */</span>
	<span class="kt">int</span> <span class="n">leased</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">elsa_hw</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ctrl</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ale</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isac</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">itac</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hscx</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">trig</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">timer</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">counter</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">status</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">tl</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">MFlag</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">BCState</span> <span class="o">*</span><span class="n">bcs</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">transbuf</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">rcvbuf</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">transp</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rcvp</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">transcnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rcvcnt</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">IER</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">FCR</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">LCR</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">MCR</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">ctrl_reg</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">teles3_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg_reg</span><span class="p">;</span>
	<span class="kt">signed</span>   <span class="kt">int</span> <span class="n">isac</span><span class="p">;</span>
	<span class="kt">signed</span>   <span class="kt">int</span> <span class="n">hscx</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">signed</span>   <span class="kt">int</span> <span class="n">isacfifo</span><span class="p">;</span>
	<span class="kt">signed</span>   <span class="kt">int</span> <span class="n">hscxfifo</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">teles0_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg_reg</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">membase</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">phymem</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">avm_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg_reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isac</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hscx</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isacfifo</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hscxfifo</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">counter</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ix1_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg_reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isac_ale</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isac</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hscx_ale</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hscx</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">diva_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cfg_reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">pci_cfg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ctrl</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">isac_adr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isac</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">hscx_adr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hscx</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">status</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">tl</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">ctrl_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">asus_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg_reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">adr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isac</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hscx</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">u7</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pots</span><span class="p">;</span>
<span class="p">};</span>


<span class="k">struct</span> <span class="n">hfc_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">addr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fifosize</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">cirm</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ctmt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">cip</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">isac_spcr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">timer</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">sedl_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg_reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">adr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isac</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hscx</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reset_on</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reset_off</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">isar_reg</span> <span class="n">isar</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">chip</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bus</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">spt_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg_reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isac</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hscx</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">res_irq</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mic_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg_reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">adr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isac</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hscx</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">njet_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isac</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">auxa</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">auxd</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">dmactrl</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ctrl_reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">irqmask0</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">irqstat0</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">last_is0</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">hfcPCI_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">cirm</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ctmt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">conn</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">mst_m</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">int_m1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">int_m2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">int_s1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">sctrl</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">sctrl_r</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">sctrl_e</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">trm</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">stat</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">fifo</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">fifo_en</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">bswapped</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">nt_mode</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">nt_timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pci_io</span><span class="p">;</span> <span class="cm">/* start of PCI IO memory */</span>
	<span class="n">dma_addr_t</span> <span class="n">dma</span><span class="p">;</span> <span class="cm">/* dma handle for Fifos */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">fifos</span><span class="p">;</span> <span class="cm">/* FIFO memory */</span>
	<span class="kt">int</span> <span class="n">last_bfifo_cnt</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span> <span class="cm">/* marker saving last b-fifo frame count */</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">timer</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">hfcSX_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">cirm</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ctmt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">conn</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">mst_m</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">int_m1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">int_m2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">int_s1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">sctrl</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">sctrl_r</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">sctrl_e</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">trm</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">stat</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">fifo</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">bswapped</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">nt_mode</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">chip</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">b_fifo_size</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">last_fifo</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">extra</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">nt_timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">timer</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">hfcD_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">addr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bfifosize</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dfifosize</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">cirm</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ctmt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">cip</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">conn</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">mst_m</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">int_m1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">int_m2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">int_s1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">sctrl</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">stat</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">fifo</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">f1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">f2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">send</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">timer</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isurf_hw</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">phymem</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">isac</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">isar</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">isar_reg</span> <span class="n">isar_r</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">saphir_hw</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg_reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ale</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isac</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hscx</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">timer</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bkm_hw</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">base</span><span class="p">;</span>
	<span class="cm">/* A4T stuff */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">isac_adr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">isac_ale</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">jade_adr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">jade_ale</span><span class="p">;</span>
	<span class="cm">/* Scitel Quadro stuff */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">plx_adr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">data_adr</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">gazel_hw</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg_reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pciaddr</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">signed</span>   <span class="kt">int</span> <span class="n">ipac</span><span class="p">;</span>
	<span class="kt">signed</span>   <span class="kt">int</span> <span class="n">isac</span><span class="p">;</span>
	<span class="kt">signed</span>   <span class="kt">int</span> <span class="n">hscx</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">signed</span>   <span class="kt">int</span> <span class="n">isacfifo</span><span class="p">;</span>
	<span class="kt">signed</span>   <span class="kt">int</span> <span class="n">hscxfifo</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">timeslot</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">iom2</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">w6692_hw</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">iobase</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">timer</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">arcofi_msg</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">arcofi_msg</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">receive</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">len</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">msg</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isac_chip</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">ph_state</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">mon_tx</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">mon_rx</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mon_txp</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mon_txc</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mon_rxp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">arcofi_msg</span> <span class="o">*</span><span class="n">arcofi_list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">arcofitimer</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">arcofi_wait</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">arcofi_bc</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">arcofi_state</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">mocr</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">adf2</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">hfcd_chip</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">ph_state</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">hfcpci_chip</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">ph_state</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">hfcsx_chip</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">ph_state</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">w6692_chip</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">ph_state</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">amd7930_chip</span> <span class="p">{</span>
	<span class="n">u_char</span> <span class="n">lmr1</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">ph_state</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">old_state</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">flg_t3</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tx_xmtlen</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">timer3</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">ph_command</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="p">,</span> <span class="n">u_char</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">setIrqMask</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="p">,</span> <span class="n">u_char</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">icc_chip</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">ph_state</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">mon_tx</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="o">*</span><span class="n">mon_rx</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mon_txp</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mon_txc</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mon_rxp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">arcofi_msg</span> <span class="o">*</span><span class="n">arcofi_list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">arcofitimer</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">arcofi_wait</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">arcofi_bc</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">arcofi_state</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">mocr</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">adf2</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define HW_IOM1			0</span>
<span class="cp">#define HW_IPAC			1</span>
<span class="cp">#define HW_ISAR			2</span>
<span class="cp">#define HW_ARCOFI		3</span>
<span class="cp">#define FLG_TWO_DCHAN		4</span>
<span class="cp">#define FLG_L1_DBUSY		5</span>
<span class="cp">#define FLG_DBUSY_TIMER		6</span>
<span class="cp">#define FLG_LOCK_ATOMIC		7</span>
<span class="cp">#define FLG_ARCOFI_TIMER	8</span>
<span class="cp">#define FLG_ARCOFI_ERROR	9</span>
<span class="cp">#define FLG_HW_L1_UINT		10</span>

<span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="p">{</span>
	<span class="n">spinlock_t</span>	<span class="n">lock</span><span class="p">;</span>
	<span class="n">u_char</span>		<span class="n">typ</span><span class="p">;</span>
	<span class="n">u_char</span>		<span class="n">subtyp</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">protocol</span><span class="p">;</span>
	<span class="n">u_int</span>		<span class="n">irq</span><span class="p">;</span>
	<span class="n">u_long</span>		<span class="n">irq_flags</span><span class="p">;</span>
	<span class="n">u_long</span>		<span class="n">HW_Flags</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="o">*</span><span class="n">busy_flag</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">chanlimit</span><span class="p">;</span> <span class="cm">/* limited number of B-chans to use */</span>
	<span class="kt">int</span>		<span class="n">logecho</span><span class="p">;</span> <span class="cm">/* log echo if supported by card */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">elsa_hw</span> <span class="n">elsa</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">teles0_hw</span> <span class="n">teles0</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">teles3_hw</span> <span class="n">teles3</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">avm_hw</span> <span class="n">avm</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">ix1_hw</span> <span class="n">ix1</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">diva_hw</span> <span class="n">diva</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">asus_hw</span> <span class="n">asus</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">hfc_hw</span> <span class="n">hfc</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">sedl_hw</span> <span class="n">sedl</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">spt_hw</span> <span class="n">spt</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">mic_hw</span> <span class="n">mic</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">njet_hw</span> <span class="n">njet</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">hfcD_hw</span> <span class="n">hfcD</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">hfcPCI_hw</span> <span class="n">hfcpci</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">hfcSX_hw</span> <span class="n">hfcsx</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">ix1_hw</span> <span class="n">niccy</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">isurf_hw</span> <span class="n">isurf</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">saphir_hw</span> <span class="n">saphir</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">bkm_hw</span> <span class="n">ax</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">gazel_hw</span> <span class="n">gazel</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">w6692_hw</span> <span class="n">w6692</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">hisax_d_if</span> <span class="o">*</span><span class="n">hisax_d_if</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">hw</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">myid</span><span class="p">;</span>
	<span class="n">isdn_if</span>		<span class="n">iif</span><span class="p">;</span>
	<span class="n">spinlock_t</span>	<span class="n">statlock</span><span class="p">;</span>
	<span class="n">u_char</span>		<span class="o">*</span><span class="n">status_buf</span><span class="p">;</span>
	<span class="n">u_char</span>		<span class="o">*</span><span class="n">status_read</span><span class="p">;</span>
	<span class="n">u_char</span>		<span class="o">*</span><span class="n">status_write</span><span class="p">;</span>
	<span class="n">u_char</span>		<span class="o">*</span><span class="n">status_end</span><span class="p">;</span>
	<span class="n">u_char</span>		<span class="p">(</span><span class="o">*</span><span class="n">readisac</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="p">,</span> <span class="n">u_char</span><span class="p">);</span>
	<span class="kt">void</span>		<span class="p">(</span><span class="o">*</span><span class="n">writeisac</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="p">,</span> <span class="n">u_char</span><span class="p">,</span> <span class="n">u_char</span><span class="p">);</span>
	<span class="kt">void</span>		<span class="p">(</span><span class="o">*</span><span class="n">readisacfifo</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="p">,</span> <span class="n">u_char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
	<span class="kt">void</span>		<span class="p">(</span><span class="o">*</span><span class="n">writeisacfifo</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="p">,</span> <span class="n">u_char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
	<span class="n">u_char</span>		<span class="p">(</span><span class="o">*</span><span class="n">BC_Read_Reg</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">u_char</span><span class="p">);</span>
	<span class="kt">void</span>		<span class="p">(</span><span class="o">*</span><span class="n">BC_Write_Reg</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">u_char</span><span class="p">,</span> <span class="n">u_char</span><span class="p">);</span>
	<span class="kt">void</span>		<span class="p">(</span><span class="o">*</span><span class="n">BC_Send_Data</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">BCState</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span>		<span class="p">(</span><span class="o">*</span><span class="n">cardmsg</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span>		<span class="p">(</span><span class="o">*</span><span class="n">setstack_d</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span>		<span class="p">(</span><span class="o">*</span><span class="n">DC_Close</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="p">);</span>
	<span class="n">irq_handler_t</span>	<span class="n">irq_func</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="p">(</span><span class="o">*</span><span class="n">auxcmd</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="p">,</span> <span class="n">isdn_ctrl</span> <span class="o">*</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">Channel</span>	<span class="n">channel</span><span class="p">[</span><span class="mi">2</span> <span class="o">+</span> <span class="n">MAX_WAITING_CALLS</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">BCState</span>	<span class="n">bcs</span><span class="p">[</span><span class="mi">2</span> <span class="o">+</span> <span class="n">MAX_WAITING_CALLS</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">PStack</span>	<span class="o">*</span><span class="n">stlist</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="n">rq</span><span class="p">,</span> <span class="n">sq</span><span class="p">;</span> <span class="cm">/* D-channel queues */</span>
	<span class="kt">int</span>		<span class="n">cardnr</span><span class="p">;</span>
	<span class="kt">char</span>		<span class="o">*</span><span class="n">dlog</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">debug</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">isac_chip</span> <span class="n">isac</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">hfcd_chip</span> <span class="n">hfcd</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">hfcpci_chip</span> <span class="n">hfcpci</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">hfcsx_chip</span> <span class="n">hfcsx</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">w6692_chip</span> <span class="n">w6692</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">amd7930_chip</span> <span class="n">amd7930</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">icc_chip</span> <span class="n">icc</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">dc</span><span class="p">;</span>
	<span class="n">u_char</span>		<span class="o">*</span><span class="n">rcvbuf</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">rcvidx</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span>	<span class="o">*</span><span class="n">tx_skb</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">tx_cnt</span><span class="p">;</span>
	<span class="n">u_long</span>		<span class="n">event</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">tqueue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">dbusytimer</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">irq_cnt</span><span class="p">;</span>
<span class="cp">#ifdef ERROR_STATISTIC</span>
	<span class="kt">int</span>		<span class="n">err_crc</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">err_tx</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">err_rx</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">};</span>


<span class="cp">#define schedule_event(s, ev)	do { test_and_set_bit(ev, &amp;s-&gt;event); schedule_work(&amp;s-&gt;tqueue); } while (0)</span>

<span class="cp">#define  MON0_RX	1</span>
<span class="cp">#define  MON1_RX	2</span>
<span class="cp">#define  MON0_TX	4</span>
<span class="cp">#define  MON1_TX	8</span>


<span class="cp">#ifdef ISDN_CHIP_ISAC</span>
<span class="cp">#undef ISDN_CHIP_ISAC</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_16_0</span>
<span class="cp">#define  CARD_TELES0 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define  CARD_TELES0  0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_16_3</span>
<span class="cp">#define  CARD_TELES3 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define  CARD_TELES3  0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_TELESPCI</span>
<span class="cp">#define  CARD_TELESPCI 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define  CARD_TELESPCI  0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_AVM_A1</span>
<span class="cp">#define  CARD_AVM_A1 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define  CARD_AVM_A1  0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_AVM_A1_PCMCIA</span>
<span class="cp">#define  CARD_AVM_A1_PCMCIA 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define  CARD_AVM_A1_PCMCIA  0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_FRITZPCI</span>
<span class="cp">#define  CARD_FRITZPCI 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define  CARD_FRITZPCI  0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_ELSA</span>
<span class="cp">#define  CARD_ELSA 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define  CARD_ELSA  0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_IX1MICROR2</span>
<span class="cp">#define	CARD_IX1MICROR2 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_IX1MICROR2 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_HISAX_DIEHLDIVA</span>
<span class="cp">#define CARD_DIEHLDIVA 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_DIEHLDIVA 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_HISAX_ASUSCOM</span>
<span class="cp">#define CARD_ASUSCOM 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_ASUSCOM 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_HISAX_TELEINT</span>
<span class="cp">#define CARD_TELEINT 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_TELEINT 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_HISAX_SEDLBAUER</span>
<span class="cp">#define CARD_SEDLBAUER 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_SEDLBAUER 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_HISAX_SPORTSTER</span>
<span class="cp">#define CARD_SPORTSTER 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_SPORTSTER 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_HISAX_MIC</span>
<span class="cp">#define CARD_MIC 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_MIC 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_HISAX_NETJET</span>
<span class="cp">#define CARD_NETJET_S 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_NETJET_S 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_HFCS</span>
<span class="cp">#define  CARD_HFCS 1</span>
<span class="cp">#else</span>
<span class="cp">#define  CARD_HFCS 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_HFC_PCI</span>
<span class="cp">#define  CARD_HFC_PCI 1</span>
<span class="cp">#else</span>
<span class="cp">#define  CARD_HFC_PCI 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_HFC_SX</span>
<span class="cp">#define  CARD_HFC_SX 1</span>
<span class="cp">#else</span>
<span class="cp">#define  CARD_HFC_SX 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_NICCY</span>
<span class="cp">#define	CARD_NICCY 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_NICCY 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_ISURF</span>
<span class="cp">#define	CARD_ISURF 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_ISURF 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_S0BOX</span>
<span class="cp">#define	CARD_S0BOX 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_S0BOX 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_HSTSAPHIR</span>
<span class="cp">#define	CARD_HSTSAPHIR 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_HSTSAPHIR 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_BKM_A4T</span>
<span class="cp">#define	CARD_BKM_A4T 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_BKM_A4T 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_SCT_QUADRO</span>
<span class="cp">#define	CARD_SCT_QUADRO 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_SCT_QUADRO 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_GAZEL</span>
<span class="cp">#define  CARD_GAZEL 1</span>
<span class="cp">#ifndef ISDN_CHIP_ISAC</span>
<span class="cp">#define ISDN_CHIP_ISAC 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define  CARD_GAZEL  0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	CONFIG_HISAX_W6692</span>
<span class="cp">#define	CARD_W6692	1</span>
<span class="cp">#ifndef	ISDN_CHIP_W6692</span>
<span class="cp">#define	ISDN_CHIP_W6692	1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define	CARD_W6692	0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_HISAX_NETJET_U</span>
<span class="cp">#define CARD_NETJET_U 1</span>
<span class="cp">#ifndef ISDN_CHIP_ICC</span>
<span class="cp">#define ISDN_CHIP_ICC 1</span>
<span class="cp">#endif</span>
<span class="cp">#ifndef HISAX_UINTERFACE</span>
<span class="cp">#define HISAX_UINTERFACE 1</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_NETJET_U 0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_HISAX_ENTERNOW_PCI</span>
<span class="cp">#define CARD_FN_ENTERNOW_PCI 1</span>
<span class="cp">#else</span>
<span class="cp">#define CARD_FN_ENTERNOW_PCI 0</span>
<span class="cp">#endif</span>

<span class="cp">#define TEI_PER_CARD 1</span>

<span class="cm">/* L1 Debug */</span>
<span class="cp">#define	L1_DEB_WARN		0x01</span>
<span class="cp">#define	L1_DEB_INTSTAT		0x02</span>
<span class="cp">#define	L1_DEB_ISAC		0x04</span>
<span class="cp">#define	L1_DEB_ISAC_FIFO	0x08</span>
<span class="cp">#define	L1_DEB_HSCX		0x10</span>
<span class="cp">#define	L1_DEB_HSCX_FIFO	0x20</span>
<span class="cp">#define	L1_DEB_LAPD	        0x40</span>
<span class="cp">#define	L1_DEB_IPAC	        0x80</span>
<span class="cp">#define	L1_DEB_RECEIVE_FRAME    0x100</span>
<span class="cp">#define L1_DEB_MONITOR		0x200</span>
<span class="cp">#define DEB_DLOG_HEX		0x400</span>
<span class="cp">#define DEB_DLOG_VERBOSE	0x800</span>

<span class="cp">#define L2FRAME_DEBUG</span>

<span class="cp">#ifdef L2FRAME_DEBUG</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">Logl2Frame</span><span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">cs</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dir</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="cp">#include &quot;hisax_cfg.h&quot;</span>

<span class="kt">void</span> <span class="n">init_bcstate</span><span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">cs</span><span class="p">,</span> <span class="kt">int</span> <span class="n">bc</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">setstack_HiSax</span><span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">,</span> <span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">cs</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">HiSax_addlist</span><span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">sp</span><span class="p">,</span> <span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">HiSax_rmlist</span><span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">sp</span><span class="p">,</span> <span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">setstack_l1_B</span><span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">setstack_tei</span><span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">setstack_manager</span><span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">setstack_isdnl2</span><span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">debug_id</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">releasestack_isdnl2</span><span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">setstack_transl2</span><span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">releasestack_transl2</span><span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">lli_writewakeup</span><span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">setstack_l3dc</span><span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">,</span> <span class="k">struct</span> <span class="n">Channel</span> <span class="o">*</span><span class="n">chanp</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">setstack_l3bc</span><span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">,</span> <span class="k">struct</span> <span class="n">Channel</span> <span class="o">*</span><span class="n">chanp</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">releasestack_isdnl3</span><span class="p">(</span><span class="k">struct</span> <span class="n">PStack</span> <span class="o">*</span><span class="n">st</span><span class="p">);</span>

<span class="n">u_char</span> <span class="o">*</span><span class="n">findie</span><span class="p">(</span><span class="n">u_char</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">,</span> <span class="n">u_char</span> <span class="n">ie</span><span class="p">,</span> <span class="kt">int</span> <span class="n">wanted_set</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">getcallref</span><span class="p">(</span><span class="n">u_char</span> <span class="o">*</span><span class="n">p</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">newcallref</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">FsmNew</span><span class="p">(</span><span class="k">struct</span> <span class="n">Fsm</span> <span class="o">*</span><span class="n">fsm</span><span class="p">,</span> <span class="k">struct</span> <span class="n">FsmNode</span> <span class="o">*</span><span class="n">fnlist</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fncount</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">FsmFree</span><span class="p">(</span><span class="k">struct</span> <span class="n">Fsm</span> <span class="o">*</span><span class="n">fsm</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">FsmEvent</span><span class="p">(</span><span class="k">struct</span> <span class="n">FsmInst</span> <span class="o">*</span><span class="n">fi</span><span class="p">,</span> <span class="kt">int</span> <span class="n">event</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">FsmChangeState</span><span class="p">(</span><span class="k">struct</span> <span class="n">FsmInst</span> <span class="o">*</span><span class="n">fi</span><span class="p">,</span> <span class="kt">int</span> <span class="n">newstate</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">FsmInitTimer</span><span class="p">(</span><span class="k">struct</span> <span class="n">FsmInst</span> <span class="o">*</span><span class="n">fi</span><span class="p">,</span> <span class="k">struct</span> <span class="n">FsmTimer</span> <span class="o">*</span><span class="n">ft</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">FsmAddTimer</span><span class="p">(</span><span class="k">struct</span> <span class="n">FsmTimer</span> <span class="o">*</span><span class="n">ft</span><span class="p">,</span> <span class="kt">int</span> <span class="n">millisec</span><span class="p">,</span> <span class="kt">int</span> <span class="n">event</span><span class="p">,</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="kt">int</span> <span class="n">where</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">FsmRestartTimer</span><span class="p">(</span><span class="k">struct</span> <span class="n">FsmTimer</span> <span class="o">*</span><span class="n">ft</span><span class="p">,</span> <span class="kt">int</span> <span class="n">millisec</span><span class="p">,</span> <span class="kt">int</span> <span class="n">event</span><span class="p">,</span>
		     <span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="kt">int</span> <span class="n">where</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">FsmDelTimer</span><span class="p">(</span><span class="k">struct</span> <span class="n">FsmTimer</span> <span class="o">*</span><span class="n">ft</span><span class="p">,</span> <span class="kt">int</span> <span class="n">where</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">jiftime</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="kt">long</span> <span class="n">mark</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">HiSax_command</span><span class="p">(</span><span class="n">isdn_ctrl</span> <span class="o">*</span><span class="n">ic</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">HiSax_writebuf_skb</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">chan</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ack</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">);</span>
<span class="n">__printf</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="kt">void</span> <span class="n">HiSax_putstatus</span><span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">cs</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">head</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fmt</span><span class="p">,</span> <span class="p">...);</span>
<span class="n">__printf</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kt">void</span> <span class="n">VHiSax_putstatus</span><span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">cs</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">head</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fmt</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">args</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">HiSax_reportcard</span><span class="p">(</span><span class="kt">int</span> <span class="n">cardnr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sel</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">QuickHex</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">txt</span><span class="p">,</span> <span class="n">u_char</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cnt</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">LogFrame</span><span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">cs</span><span class="p">,</span> <span class="n">u_char</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">dlogframe</span><span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">cs</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dir</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">iecpy</span><span class="p">(</span><span class="n">u_char</span> <span class="o">*</span><span class="n">dest</span><span class="p">,</span> <span class="n">u_char</span> <span class="o">*</span><span class="n">iestart</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ieoffset</span><span class="p">);</span>
<span class="cp">#endif	</span><span class="cm">/* __KERNEL__ */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Busywait delay for `jiffs&#39; jiffies</span>
<span class="cm"> */</span>
<span class="cp">#define HZDELAY(jiffs) do {				\</span>
<span class="cp">		int tout = jiffs;			\</span>
<span class="cp">							\</span>
<span class="cp">		while (tout--) {			\</span>
<span class="cp">			int loops = USEC_PER_SEC / HZ;	\</span>
<span class="cp">			while (loops--)			\</span>
<span class="cp">				udelay(1);		\</span>
<span class="cp">		}					\</span>
<span class="cp">	} while (0)</span>

<span class="kt">int</span> <span class="n">ll_run</span><span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">cs</span><span class="p">,</span> <span class="kt">int</span> <span class="n">addfeatures</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">CallcNew</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">CallcFree</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">CallcNewChan</span><span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">cs</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">CallcFreeChan</span><span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">cs</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">Isdnl1New</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">Isdnl1Free</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">Isdnl2New</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">Isdnl2Free</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">Isdnl3New</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">Isdnl3Free</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">init_tei</span><span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">cs</span><span class="p">,</span> <span class="kt">int</span> <span class="n">protocol</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">release_tei</span><span class="p">(</span><span class="k">struct</span> <span class="n">IsdnCardState</span> <span class="o">*</span><span class="n">cs</span><span class="p">);</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">HiSax_getrev</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">revision</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">TeiNew</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">TeiFree</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_PCI</span>

<span class="cp">#include &lt;linux/pci.h&gt;</span>

<span class="cm">/* adaptation wrapper for old usage</span>
<span class="cm"> * WARNING! This is unfit for use in a PCI hotplug environment,</span>
<span class="cm"> * as the returned PCI device can disappear at any moment in time.</span>
<span class="cm"> * Callers should be converted to use pci_get_device() instead.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="nf">hisax_find_pci_device</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vendor</span><span class="p">,</span>
						    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">device</span><span class="p">,</span>
						    <span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">from</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pdev</span><span class="p">;</span>

	<span class="n">pci_dev_get</span><span class="p">(</span><span class="n">from</span><span class="p">);</span>
	<span class="n">pdev</span> <span class="o">=</span> <span class="n">pci_get_subsys</span><span class="p">(</span><span class="n">vendor</span><span class="p">,</span> <span class="n">device</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">from</span><span class="p">);</span>
	<span class="n">pci_dev_put</span><span class="p">(</span><span class="n">pdev</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">pdev</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
