f | adma.c | s | 133K | 4420 | Russell King - ARM Linux | linux@arm.linux.org.uk | 1331618862 |  | dmaengine: ensure all DMA engine drivers initialize their cookies  Ensure all DMA engine drivers initialize their cookies in the same way, so that they all behave in a similar fashion.  This means their first issued cookie will be 2 rather than 1, and will increment to INT_MAX before returning 1 and starting over.  In connection with this, Dan Williams said: > Russell King wrote: > > Secondly, some DMA engine drivers initialize the dma_chan cookie to 0, > > others to 1. Â Is there a reason for this, or are these all buggy? > > I know that ioat and iop-adma expect 0 to mean "I have cleaned up this > descriptor and it is idle", and would break if zero was an in-flight > cookie value.  The reserved usage of zero is an driver internal > concern, but I have no problem formalizing it as a reserved value.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> Tested-by: Linus Walleij <linus.walleij@linaro.org> Reviewed-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Jassi Brar <jassisinghbrar@gmail.com> [imx-sdma.c & mxs-dma.c] Tested-by: Shawn Guo <shawn.guo@linaro.org> Signed-off-by: Vinod Koul <vinod.koul@linux.intel.com>
f | adma.h | s | 6.1K | 170 | Russell King - ARM Linux | linux@arm.linux.org.uk | 1331618766 |  | dmaengine: move last completed cookie into generic dma_chan structure  Every DMA engine implementation declares a last completed dma cookie in their private dma channel structures.  This is pointless, and forces driver specific code.  Move this out into the common dma_chan structure.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> Tested-by: Linus Walleij <linus.walleij@linaro.org> Reviewed-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Jassi Brar <jassisinghbrar@gmail.com> [imx-sdma.c & mxs-dma.c] Tested-by: Shawn Guo <shawn.guo@linaro.org> Signed-off-by: Vinod Koul <vinod.koul@linux.intel.com>
f | Makefile | g | 44B |  | Anatolij Gustschin | agust@denx.de | 1260591884 |  | ppc440spe-adma: adds updated ppc440spe adma driver  This patch adds new version of the PPC440SPe ADMA driver.  Signed-off-by: Yuri Tikhonov <yur@emcraft.com> Signed-off-by: Anatolij Gustschin <agust@denx.de> Signed-off-by: Dan Williams <dan.j.williams@intel.com>
f | dma.h | s | 4.3K | 203 | Anatolij Gustschin | agust@denx.de | 1260591884 |  | ppc440spe-adma: adds updated ppc440spe adma driver  This patch adds new version of the PPC440SPe ADMA driver.  Signed-off-by: Yuri Tikhonov <yur@emcraft.com> Signed-off-by: Anatolij Gustschin <agust@denx.de> Signed-off-by: Dan Williams <dan.j.williams@intel.com>
f | xor.h | s | 3.5K | 99 | Anatolij Gustschin | agust@denx.de | 1260591884 |  | ppc440spe-adma: adds updated ppc440spe adma driver  This patch adds new version of the PPC440SPe ADMA driver.  Signed-off-by: Yuri Tikhonov <yur@emcraft.com> Signed-off-by: Anatolij Gustschin <agust@denx.de> Signed-off-by: Dan Williams <dan.j.williams@intel.com>
