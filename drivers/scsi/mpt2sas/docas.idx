f | mpt2sas_transport.c | s | 64K | 1938 | nagalakshmi.nandigama@lsi.com | nagalakshmi.nandigama@lsi.com | 1335205658 |  | [SCSI] mpt2sas: Set the phy identifier of the end device to the phy number of the parent device it is linked to  The phy_identifier inside the routine _transport_set_identify() is set to sas_device_page_zero->PhyNum. This returns the phy number of the parent device this device is linked to.  Signed-off-by: Nagalakshmi Nandigama <nagalakshmi.nandigama@lsi.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | mpt2sas_base.h | s | 38K | 1059 | nagalakshmi.nandigama@lsi.com | nagalakshmi.nandigama@lsi.com | 1335205676 |  | [SCSI] mpt2sas: Bump driver vesion to 13.100.00.00  Signed-off-by: Nagalakshmi Nandigama <nagalakshmi.nandigama@lsi.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | mpt2sas_ctl.c | s | 84K | 2688 | nagalakshmi.nandigama@lsi.com | nagalakshmi.nandigama@lsi.com | 1335205641 |  | [SCSI] mpt2sas: Fix security scan issues reported by source code analysis tool  Modified the source code as per the findings reported by the source code analysis tool. Source code for the following functionalities has been touched. None of the driver functionalities has changed.  - SMP Passthrough IOCTL - Debug messages for MPT Replies (i.e. bit 9 of Logging Level) - Task Management using sysfs - Device removal, i.e. when a target device (including any PD within a volume)   is removed, and Volume Deletion. - Trace Buffer  Signed-off-by: Nagalakshmi Nandigama <nagalakshmi.nandigama@lsi.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | Makefile | g | 185B |  | Eric Moore | eric.moore@lsi.com | 1236978529 |  | [SCSI] mpt2sas v00.100.11.15  * This is new scsi lld device driver from LSI supporting the SAS 2.0   standard. I have split patchs by filename.  * Here is list of new 6gb host controllers:    LSI SAS2004   LSI SAS2008   LSI SAS2108   LSI SAS2116  * Here are the changes in the 4th posting of this patch set:  (1) fix compile errors when SCSI_MPT2SAS_LOGGING is not enabled (2) add mpt2sas to the SCSI Mid Layer Makefile (3) append mpt2sas_ to the naming of all non-static functions (4) fix oops for SMP_PASSTHRU (5) doorbell algorithm imported changes from windows driver  * Here are the changes in the 3rd posting of this patch set:  (1) add readl following writel from the function that disables interrupts (2) replace 0xFFFFFFFFFFFFFFFFULL with ~0ULL (3) when calling pci_enable_msix, only pass one msix entry (instead of 15). (4) remove the "current HW implementation uses..... " comment in the sources (5) merged bug fix for SIGIO/POLLIN notifcation; reported by the storlib team.  * Here are the changes in the 2nd posting of this patch set:  (1) use little endian types in the mpi headers (2) merged in bug fix's from inhouse drivers.  Signed-off-by: Eric Moore <eric.moore@lsi.com> Tested-by: peter Bogdanovic <pbog@us.ibm.com> Signed-off-by: James Bottomley <James.Bottomley@HansenPartnership.com>
f | mpt2sas_base.c | s | 130K | 4117 | nagalakshmi.nandigama@lsi.com | nagalakshmi.nandigama@lsi.com | 1338953936 |  | [SCSI] mpt2sas: Fix unsafe using smp_processor_id() in preemptible  When CONFIG_DEBUG_PREEMPT is enabled, bug is observed in the smp_processor_id(). This is because smp_processor_id() is not called in preempt safe condition.  To fix this issue, use raw_smp_processor_id instead of smp_processor_id.  Signed-off-by: Nagalakshmi Nandigama <nagalakshmi.nandigama@lsi.com> CC: stable@vger.kernel.org Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | mpt2sas_scsih.c | s | 240K | 7615 | Tomas Henzl | thenzl@redhat.com | 1336636763 |  | [SCSI] mpt2sas: move the scsi_host_put to the right place  When scsi_add_host fails the scsi_host_put should be called.  Signed-off-by: Tomas Henzl <thenzl@redhat.com> Acked-by: "Nandigama, Nagalakshmi" <Nagalakshmi.Nandigama@lsi.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | mpt2sas_ctl.h | s | 12K | 384 | Kashyap, Desai | kashyap.desai@lsi.com | 1304264214 |  | [SCSI] mpt2sas : WarpDrive New product SSS6200 support added  This patch has Support for the new solid state device product SSS6200 from LSI and relavent features w.r.t SSS6200.  The major feature added in this driver is supporting Direct-I/O to the SSS6200 storage.There are some additional changes done to avoid exposing the RAID member disks to the OS and hiding/exposing drives based on the OEM Specific Flag in Manufacturing Page10 (this is required to handle specific changes in the SSS6200 firmware).  Each and every changes are listed below. 1. Hiding IR related messages. For SSS6200, the driver is modified not to print IR related events. Even if the debugging is enabled the IR related messages will not be displayed. In some places if there is a need to display a message related to IR the string "IR" is replaced with string "DD" and the string "volume" is replaced with "direct drive". But the function names are not changed hence there are some places where the reference to volume can be seen if debug level is set.  2. Removed RAID transport support In Linux the user can retrieve RAID volume information from the sysfs directory. This support is removed for SSS6200.  3. Direct I/O support. The driver tries to enable direct I/O when a volume is reported to the driver by the firmware through IRCC events and the driver does this just before reporting to the OS, hence all the OS issued I/O can go through direct path if they can, The first validation is to see whether the manufacturing page10 flag is set to expose all drives always. If that is set, the driver will not enable direct I/O and displays the message "DDIO" is disabled globally as drives are exposed. The driver checks whether there is more than one volume in the controller, if so the direct I/O will be disabled globally for all volumes in the controller and the message displayed will be "DDIO is disabled globally as number of drives > 1. If retrieving number of PD is failed the driver will not enable direct I/O and displays the message Failure in computing number of drives DDIO disabled. If memory allocation for RAIDVolumePage0 is failed, the driver will not enable direct I/O and displays the message Memory allocation failure for RVPG0 DDIO disabled.  If retrieving RAIDVolumePage0 is failed the driver will not enable direct I/O and displays the message Failure in retrieving RVPG0 DDIO disabled  If the number of PD in a volume is greater than 8, then the direct I/O will be disabled. If any of individual drives handle retrieval is failed then the DD-IO will be disabled. If the volume is not RAID0 or if the block size is not 512 then the DD-IO will be disabled. If the volume size is greater than 2TB then the DD-IO will be disabled. If the driver is not able to find a valid stripe exponent using the configured stripe size then the DD-IO will be disabled  When the DD-IO is enabled the driver will check every I/O request issued to the storage and checks whether the request is either READ6/WRITE6/READ10/WRITE10, if it is and if the complete I/O transfer is within a stripe size then the I/O is redirected to the drive directly instead of the volume.  On completion of every I/O, if the completion is failure means if the reply is address reply with a reply frame associated with it, then the type of I/O will be checked, if the I/O is direct then the I/O will be retried to the volume once.  Signed-off-by: Kashyap Desai <kashyap.desai@lsi.com> Reviewed-by: Eric Moore <eric.moore@lsi.com> Reviewed-by: Sathya Prakash <sathya.prakash@lsi.com> Signed-off-by: James Bottomley <James.Bottomley@suse.de>
f | mpt2sas_debug.h | s | 5.6K | 146 | Kashyap, Desai | kashyap.desai@lsi.com | 1309381620 |  | [SCSI] mpt2sas: Fixed Big Indian Issues on 32 bit PPC  This patch addresses many endian issues solved by runing sparse with the option __CHECK_ENDIAN__ turned on.  Signed-off-by: Kashyap Desai <kashyap.desai@lsi.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | mpt2sas_config.c | s | 45K | 1348 | Masanari Iida | standby24x7@gmail.com | 1328305535 |  | mpt2sas: Fix typo in mpt2sas_config.c  Correct spelling "mappping" to "mapping" in drivers/scsi/mpt2sas/mpt2sas_config.c  Signed-off-by: Masanari Iida <standby24x7@gmail.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
d | mpi |  | 8 items |  | nagalakshmi.nandigama@lsi.com | nagalakshmi.nandigama@lsi.com | 1335205609 |  | [SCSI] mpt2sas: MPI next revision header update  Changeset in MPI headers: 1) Bumped MPI2_HEADER_VERSION_UNIT 2) Added 4K sectors supported bit to CapabilitiesFlags field of IOC Page 6. 3) Added UEFIVersion field to BIOS Page 1 and defined additional     BiosOptions bits to control UEFI behavior.  Signed-off-by: Nagalakshmi Nandigama <nagalakshmi.nandigama@lsi.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | Kconfig | g | 2.8K |  | Kashyap, Desai | kashyap.desai@lsi.com | 1270995842 |  | [SCSI] mpt2sas: Copyright 2010.  Copyright changes for year 2010.  Signed-off-by: Kashyap Desai <kashyap.desai@lsi.com> Signed-off-by: James Bottomley <James.Bottomley@suse.de>
