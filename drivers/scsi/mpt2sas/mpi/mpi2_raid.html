<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › scsi › mpt2sas › mpi › mpi2_raid.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>mpi2_raid.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  Copyright (c) 2000-2010 LSI Corporation.</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> *           Name:  mpi2_raid.h</span>
<span class="cm"> *          Title:  MPI Integrated RAID messages and structures</span>
<span class="cm"> *  Creation Date:  April 26, 2007</span>
<span class="cm"> *</span>
<span class="cm"> *    mpi2_raid.h Version:  02.00.06</span>
<span class="cm"> *</span>
<span class="cm"> *  Version History</span>
<span class="cm"> *  ---------------</span>
<span class="cm"> *</span>
<span class="cm"> *  Date      Version   Description</span>
<span class="cm"> *  --------  --------  ------------------------------------------------------</span>
<span class="cm"> *  04-30-07  02.00.00  Corresponds to Fusion-MPT MPI Specification Rev A.</span>
<span class="cm"> *  08-31-07  02.00.01  Modifications to RAID Action request and reply,</span>
<span class="cm"> *                      including the Actions and ActionData.</span>
<span class="cm"> *  02-29-08  02.00.02  Added MPI2_RAID_ACTION_ADATA_DISABL_FULL_REBUILD.</span>
<span class="cm"> *  05-21-08  02.00.03  Added MPI2_RAID_VOL_CREATION_NUM_PHYSDISKS so that</span>
<span class="cm"> *                      the PhysDisk array in MPI2_RAID_VOLUME_CREATION_STRUCT</span>
<span class="cm"> *                      can be sized by the build environment.</span>
<span class="cm"> *  07-30-09  02.00.04  Added proper define for the Use Default Settings bit of</span>
<span class="cm"> *                      VolumeCreationFlags and marked the old one as obsolete.</span>
<span class="cm"> *  05-12-10  02.00.05  Added MPI2_RAID_VOL_FLAGS_OP_MDC define.</span>
<span class="cm"> *  08-24-10  02.00.06  Added MPI2_RAID_ACTION_COMPATIBILITY_CHECK along with</span>
<span class="cm"> *                      related structures and defines.</span>
<span class="cm"> *                      Added product-specific range to RAID Action values.</span>

<span class="cm"> *  --------------------------------------------------------------------------</span>
<span class="cm"> */</span>

<span class="cp">#ifndef MPI2_RAID_H</span>
<span class="cp">#define MPI2_RAID_H</span>

<span class="cm">/*****************************************************************************</span>
<span class="cm">*</span>
<span class="cm">*               Integrated RAID Messages</span>
<span class="cm">*</span>
<span class="cm">*****************************************************************************/</span>

<span class="cm">/****************************************************************************</span>
<span class="cm">*  RAID Action messages</span>
<span class="cm">****************************************************************************/</span>

<span class="cm">/* ActionDataWord defines for use with MPI2_RAID_ACTION_DELETE_VOLUME action */</span>
<span class="cp">#define MPI2_RAID_ACTION_ADATA_KEEP_LBA0            (0x00000000)</span>
<span class="cp">#define MPI2_RAID_ACTION_ADATA_ZERO_LBA0            (0x00000001)</span>

<span class="cm">/* use MPI2_RAIDVOL0_SETTING_ defines from mpi2_cnfg.h for MPI2_RAID_ACTION_CHANGE_VOL_WRITE_CACHE action */</span>

<span class="cm">/* ActionDataWord defines for use with MPI2_RAID_ACTION_DISABLE_ALL_VOLUMES action */</span>
<span class="cp">#define MPI2_RAID_ACTION_ADATA_DISABL_FULL_REBUILD  (0x00000001)</span>

<span class="cm">/* ActionDataWord for MPI2_RAID_ACTION_SET_RAID_FUNCTION_RATE Action */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_RAID_ACTION_RATE_DATA</span>
<span class="p">{</span>
    <span class="n">U8</span>              <span class="n">RateToChange</span><span class="p">;</span>               <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>              <span class="n">RateOrMode</span><span class="p">;</span>                 <span class="cm">/* 0x01 */</span>
    <span class="n">U16</span>             <span class="n">DataScrubDuration</span><span class="p">;</span>          <span class="cm">/* 0x02 */</span>
<span class="p">}</span> <span class="n">MPI2_RAID_ACTION_RATE_DATA</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_ACTION_RATE_DATA</span><span class="p">,</span>
  <span class="n">Mpi2RaidActionRateData_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidActionRateData_t</span><span class="p">;</span>

<span class="cp">#define MPI2_RAID_ACTION_SET_RATE_RESYNC            (0x00)</span>
<span class="cp">#define MPI2_RAID_ACTION_SET_RATE_DATA_SCRUB        (0x01)</span>
<span class="cp">#define MPI2_RAID_ACTION_SET_RATE_POWERSAVE_MODE    (0x02)</span>

<span class="cm">/* ActionDataWord for MPI2_RAID_ACTION_START_RAID_FUNCTION Action */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_RAID_ACTION_START_RAID_FUNCTION</span>
<span class="p">{</span>
    <span class="n">U8</span>              <span class="n">RAIDFunction</span><span class="p">;</span>                       <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>              <span class="n">Flags</span><span class="p">;</span>                              <span class="cm">/* 0x01 */</span>
    <span class="n">U16</span>             <span class="n">Reserved1</span><span class="p">;</span>                          <span class="cm">/* 0x02 */</span>
<span class="p">}</span> <span class="n">MPI2_RAID_ACTION_START_RAID_FUNCTION</span><span class="p">,</span>
  <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_ACTION_START_RAID_FUNCTION</span><span class="p">,</span>
  <span class="n">Mpi2RaidActionStartRaidFunction_t</span><span class="p">,</span>
  <span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidActionStartRaidFunction_t</span><span class="p">;</span>

<span class="cm">/* defines for the RAIDFunction field */</span>
<span class="cp">#define MPI2_RAID_ACTION_START_BACKGROUND_INIT      (0x00)</span>
<span class="cp">#define MPI2_RAID_ACTION_START_ONLINE_CAP_EXPANSION (0x01)</span>
<span class="cp">#define MPI2_RAID_ACTION_START_CONSISTENCY_CHECK    (0x02)</span>

<span class="cm">/* defines for the Flags field */</span>
<span class="cp">#define MPI2_RAID_ACTION_START_NEW                  (0x00)</span>
<span class="cp">#define MPI2_RAID_ACTION_START_RESUME               (0x01)</span>

<span class="cm">/* ActionDataWord for MPI2_RAID_ACTION_STOP_RAID_FUNCTION Action */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_RAID_ACTION_STOP_RAID_FUNCTION</span>
<span class="p">{</span>
    <span class="n">U8</span>              <span class="n">RAIDFunction</span><span class="p">;</span>                       <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>              <span class="n">Flags</span><span class="p">;</span>                              <span class="cm">/* 0x01 */</span>
    <span class="n">U16</span>             <span class="n">Reserved1</span><span class="p">;</span>                          <span class="cm">/* 0x02 */</span>
<span class="p">}</span> <span class="n">MPI2_RAID_ACTION_STOP_RAID_FUNCTION</span><span class="p">,</span>
  <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_ACTION_STOP_RAID_FUNCTION</span><span class="p">,</span>
  <span class="n">Mpi2RaidActionStopRaidFunction_t</span><span class="p">,</span>
  <span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidActionStopRaidFunction_t</span><span class="p">;</span>

<span class="cm">/* defines for the RAIDFunction field */</span>
<span class="cp">#define MPI2_RAID_ACTION_STOP_BACKGROUND_INIT       (0x00)</span>
<span class="cp">#define MPI2_RAID_ACTION_STOP_ONLINE_CAP_EXPANSION  (0x01)</span>
<span class="cp">#define MPI2_RAID_ACTION_STOP_CONSISTENCY_CHECK     (0x02)</span>

<span class="cm">/* defines for the Flags field */</span>
<span class="cp">#define MPI2_RAID_ACTION_STOP_ABORT                 (0x00)</span>
<span class="cp">#define MPI2_RAID_ACTION_STOP_PAUSE                 (0x01)</span>

<span class="cm">/* ActionDataWord for MPI2_RAID_ACTION_CREATE_HOT_SPARE Action */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_RAID_ACTION_HOT_SPARE</span>
<span class="p">{</span>
    <span class="n">U8</span>              <span class="n">HotSparePool</span><span class="p">;</span>               <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>              <span class="n">Reserved1</span><span class="p">;</span>                  <span class="cm">/* 0x01 */</span>
    <span class="n">U16</span>             <span class="n">DevHandle</span><span class="p">;</span>                  <span class="cm">/* 0x02 */</span>
<span class="p">}</span> <span class="n">MPI2_RAID_ACTION_HOT_SPARE</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_ACTION_HOT_SPARE</span><span class="p">,</span>
  <span class="n">Mpi2RaidActionHotSpare_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidActionHotSpare_t</span><span class="p">;</span>

<span class="cm">/* ActionDataWord for MPI2_RAID_ACTION_DEVICE_FW_UPDATE_MODE Action */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_RAID_ACTION_FW_UPDATE_MODE</span>
<span class="p">{</span>
    <span class="n">U8</span>              <span class="n">Flags</span><span class="p">;</span>                              <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>              <span class="n">DeviceFirmwareUpdateModeTimeout</span><span class="p">;</span>    <span class="cm">/* 0x01 */</span>
    <span class="n">U16</span>             <span class="n">Reserved1</span><span class="p">;</span>                          <span class="cm">/* 0x02 */</span>
<span class="p">}</span> <span class="n">MPI2_RAID_ACTION_FW_UPDATE_MODE</span><span class="p">,</span>
  <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_ACTION_FW_UPDATE_MODE</span><span class="p">,</span>
  <span class="n">Mpi2RaidActionFwUpdateMode_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidActionFwUpdateMode_t</span><span class="p">;</span>

<span class="cm">/* ActionDataWord defines for use with MPI2_RAID_ACTION_DEVICE_FW_UPDATE_MODE action */</span>
<span class="cp">#define MPI2_RAID_ACTION_ADATA_DISABLE_FW_UPDATE        (0x00)</span>
<span class="cp">#define MPI2_RAID_ACTION_ADATA_ENABLE_FW_UPDATE         (0x01)</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="n">_MPI2_RAID_ACTION_DATA</span>
<span class="p">{</span>
    <span class="n">U32</span>                                     <span class="n">Word</span><span class="p">;</span>
    <span class="n">MPI2_RAID_ACTION_RATE_DATA</span>              <span class="n">Rates</span><span class="p">;</span>
    <span class="n">MPI2_RAID_ACTION_START_RAID_FUNCTION</span>    <span class="n">StartRaidFunction</span><span class="p">;</span>
    <span class="n">MPI2_RAID_ACTION_STOP_RAID_FUNCTION</span>     <span class="n">StopRaidFunction</span><span class="p">;</span>
    <span class="n">MPI2_RAID_ACTION_HOT_SPARE</span>              <span class="n">HotSpare</span><span class="p">;</span>
    <span class="n">MPI2_RAID_ACTION_FW_UPDATE_MODE</span>         <span class="n">FwUpdateMode</span><span class="p">;</span>
<span class="p">}</span> <span class="n">MPI2_RAID_ACTION_DATA</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_ACTION_DATA</span><span class="p">,</span>
  <span class="n">Mpi2RaidActionData_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidActionData_t</span><span class="p">;</span>


<span class="cm">/* RAID Action Request Message */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_RAID_ACTION_REQUEST</span>
<span class="p">{</span>
    <span class="n">U8</span>                      <span class="n">Action</span><span class="p">;</span>                         <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>                      <span class="n">Reserved1</span><span class="p">;</span>                      <span class="cm">/* 0x01 */</span>
    <span class="n">U8</span>                      <span class="n">ChainOffset</span><span class="p">;</span>                    <span class="cm">/* 0x02 */</span>
    <span class="n">U8</span>                      <span class="n">Function</span><span class="p">;</span>                       <span class="cm">/* 0x03 */</span>
    <span class="n">U16</span>                     <span class="n">VolDevHandle</span><span class="p">;</span>                   <span class="cm">/* 0x04 */</span>
    <span class="n">U8</span>                      <span class="n">PhysDiskNum</span><span class="p">;</span>                    <span class="cm">/* 0x06 */</span>
    <span class="n">U8</span>                      <span class="n">MsgFlags</span><span class="p">;</span>                       <span class="cm">/* 0x07 */</span>
    <span class="n">U8</span>                      <span class="n">VP_ID</span><span class="p">;</span>                          <span class="cm">/* 0x08 */</span>
    <span class="n">U8</span>                      <span class="n">VF_ID</span><span class="p">;</span>                          <span class="cm">/* 0x09 */</span>
    <span class="n">U16</span>                     <span class="n">Reserved2</span><span class="p">;</span>                      <span class="cm">/* 0x0A */</span>
    <span class="n">U32</span>                     <span class="n">Reserved3</span><span class="p">;</span>                      <span class="cm">/* 0x0C */</span>
    <span class="n">MPI2_RAID_ACTION_DATA</span>   <span class="n">ActionDataWord</span><span class="p">;</span>                 <span class="cm">/* 0x10 */</span>
    <span class="n">MPI2_SGE_SIMPLE_UNION</span>   <span class="n">ActionDataSGE</span><span class="p">;</span>                  <span class="cm">/* 0x14 */</span>
<span class="p">}</span> <span class="n">MPI2_RAID_ACTION_REQUEST</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_ACTION_REQUEST</span><span class="p">,</span>
  <span class="n">Mpi2RaidActionRequest_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidActionRequest_t</span><span class="p">;</span>

<span class="cm">/* RAID Action request Action values */</span>

<span class="cp">#define MPI2_RAID_ACTION_INDICATOR_STRUCT           (0x01)</span>
<span class="cp">#define MPI2_RAID_ACTION_CREATE_VOLUME              (0x02)</span>
<span class="cp">#define MPI2_RAID_ACTION_DELETE_VOLUME              (0x03)</span>
<span class="cp">#define MPI2_RAID_ACTION_DISABLE_ALL_VOLUMES        (0x04)</span>
<span class="cp">#define MPI2_RAID_ACTION_ENABLE_ALL_VOLUMES         (0x05)</span>
<span class="cp">#define MPI2_RAID_ACTION_PHYSDISK_OFFLINE           (0x0A)</span>
<span class="cp">#define MPI2_RAID_ACTION_PHYSDISK_ONLINE            (0x0B)</span>
<span class="cp">#define MPI2_RAID_ACTION_FAIL_PHYSDISK              (0x0F)</span>
<span class="cp">#define MPI2_RAID_ACTION_ACTIVATE_VOLUME            (0x11)</span>
<span class="cp">#define MPI2_RAID_ACTION_DEVICE_FW_UPDATE_MODE      (0x15)</span>
<span class="cp">#define MPI2_RAID_ACTION_CHANGE_VOL_WRITE_CACHE     (0x17)</span>
<span class="cp">#define MPI2_RAID_ACTION_SET_VOLUME_NAME            (0x18)</span>
<span class="cp">#define MPI2_RAID_ACTION_SET_RAID_FUNCTION_RATE     (0x19)</span>
<span class="cp">#define MPI2_RAID_ACTION_ENABLE_FAILED_VOLUME       (0x1C)</span>
<span class="cp">#define MPI2_RAID_ACTION_CREATE_HOT_SPARE           (0x1D)</span>
<span class="cp">#define MPI2_RAID_ACTION_DELETE_HOT_SPARE           (0x1E)</span>
<span class="cp">#define MPI2_RAID_ACTION_SYSTEM_SHUTDOWN_INITIATED  (0x20)</span>
<span class="cp">#define MPI2_RAID_ACTION_START_RAID_FUNCTION        (0x21)</span>
<span class="cp">#define MPI2_RAID_ACTION_STOP_RAID_FUNCTION         (0x22)</span>
<span class="cp">#define MPI2_RAID_ACTION_COMPATIBILITY_CHECK        (0x23)</span>
<span class="cp">#define MPI2_RAID_ACTION_MIN_PRODUCT_SPECIFIC       (0x80)</span>
<span class="cp">#define MPI2_RAID_ACTION_MAX_PRODUCT_SPECIFIC       (0xFF)</span>

<span class="cm">/* RAID Volume Creation Structure */</span>

<span class="cm">/*</span>
<span class="cm"> * The following define can be customized for the targeted product.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef MPI2_RAID_VOL_CREATION_NUM_PHYSDISKS</span>
<span class="cp">#define MPI2_RAID_VOL_CREATION_NUM_PHYSDISKS        (1)</span>
<span class="cp">#endif</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_RAID_VOLUME_PHYSDISK</span>
<span class="p">{</span>
    <span class="n">U8</span>                      <span class="n">RAIDSetNum</span><span class="p">;</span>                     <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>                      <span class="n">PhysDiskMap</span><span class="p">;</span>                    <span class="cm">/* 0x01 */</span>
    <span class="n">U16</span>                     <span class="n">PhysDiskDevHandle</span><span class="p">;</span>              <span class="cm">/* 0x02 */</span>
<span class="p">}</span> <span class="n">MPI2_RAID_VOLUME_PHYSDISK</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_VOLUME_PHYSDISK</span><span class="p">,</span>
  <span class="n">Mpi2RaidVolumePhysDisk_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidVolumePhysDisk_t</span><span class="p">;</span>

<span class="cm">/* defines for the PhysDiskMap field */</span>
<span class="cp">#define MPI2_RAIDACTION_PHYSDISK_PRIMARY            (0x01)</span>
<span class="cp">#define MPI2_RAIDACTION_PHYSDISK_SECONDARY          (0x02)</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_RAID_VOLUME_CREATION_STRUCT</span>
<span class="p">{</span>
    <span class="n">U8</span>                          <span class="n">NumPhysDisks</span><span class="p">;</span>               <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>                          <span class="n">VolumeType</span><span class="p">;</span>                 <span class="cm">/* 0x01 */</span>
    <span class="n">U16</span>                         <span class="n">Reserved1</span><span class="p">;</span>                  <span class="cm">/* 0x02 */</span>
    <span class="n">U32</span>                         <span class="n">VolumeCreationFlags</span><span class="p">;</span>        <span class="cm">/* 0x04 */</span>
    <span class="n">U32</span>                         <span class="n">VolumeSettings</span><span class="p">;</span>             <span class="cm">/* 0x08 */</span>
    <span class="n">U8</span>                          <span class="n">Reserved2</span><span class="p">;</span>                  <span class="cm">/* 0x0C */</span>
    <span class="n">U8</span>                          <span class="n">ResyncRate</span><span class="p">;</span>                 <span class="cm">/* 0x0D */</span>
    <span class="n">U16</span>                         <span class="n">DataScrubDuration</span><span class="p">;</span>          <span class="cm">/* 0x0E */</span>
    <span class="n">U64</span>                         <span class="n">VolumeMaxLBA</span><span class="p">;</span>               <span class="cm">/* 0x10 */</span>
    <span class="n">U32</span>                         <span class="n">StripeSize</span><span class="p">;</span>                 <span class="cm">/* 0x18 */</span>
    <span class="n">U8</span>                          <span class="n">Name</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>                   <span class="cm">/* 0x1C */</span>
    <span class="n">MPI2_RAID_VOLUME_PHYSDISK</span>   <span class="n">PhysDisk</span><span class="p">[</span><span class="n">MPI2_RAID_VOL_CREATION_NUM_PHYSDISKS</span><span class="p">];</span><span class="cm">/* 0x2C */</span>
<span class="p">}</span> <span class="n">MPI2_RAID_VOLUME_CREATION_STRUCT</span><span class="p">,</span>
  <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_VOLUME_CREATION_STRUCT</span><span class="p">,</span>
  <span class="n">Mpi2RaidVolumeCreationStruct_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidVolumeCreationStruct_t</span><span class="p">;</span>

<span class="cm">/* use MPI2_RAID_VOL_TYPE_ defines from mpi2_cnfg.h for VolumeType */</span>

<span class="cm">/* defines for the VolumeCreationFlags field */</span>
<span class="cp">#define MPI2_RAID_VOL_CREATION_DEFAULT_SETTINGS     (0x80000000)</span>
<span class="cp">#define MPI2_RAID_VOL_CREATION_BACKGROUND_INIT      (0x00000004)</span>
<span class="cp">#define MPI2_RAID_VOL_CREATION_LOW_LEVEL_INIT       (0x00000002)</span>
<span class="cp">#define MPI2_RAID_VOL_CREATION_MIGRATE_DATA         (0x00000001)</span>
<span class="cm">/* The following is an obsolete define.</span>
<span class="cm"> * It must be shifted left 24 bits in order to set the proper bit.</span>
<span class="cm"> */</span>
<span class="cp">#define MPI2_RAID_VOL_CREATION_USE_DEFAULT_SETTINGS (0x80)</span>


<span class="cm">/* RAID Online Capacity Expansion Structure */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_RAID_ONLINE_CAPACITY_EXPANSION</span>
<span class="p">{</span>
    <span class="n">U32</span>                     <span class="n">Flags</span><span class="p">;</span>                          <span class="cm">/* 0x00 */</span>
    <span class="n">U16</span>                     <span class="n">DevHandle0</span><span class="p">;</span>                     <span class="cm">/* 0x04 */</span>
    <span class="n">U16</span>                     <span class="n">Reserved1</span><span class="p">;</span>                      <span class="cm">/* 0x06 */</span>
    <span class="n">U16</span>                     <span class="n">DevHandle1</span><span class="p">;</span>                     <span class="cm">/* 0x08 */</span>
    <span class="n">U16</span>                     <span class="n">Reserved2</span><span class="p">;</span>                      <span class="cm">/* 0x0A */</span>
<span class="p">}</span> <span class="n">MPI2_RAID_ONLINE_CAPACITY_EXPANSION</span><span class="p">,</span>
  <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_ONLINE_CAPACITY_EXPANSION</span><span class="p">,</span>
  <span class="n">Mpi2RaidOnlineCapacityExpansion_t</span><span class="p">,</span>
  <span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidOnlineCapacityExpansion_t</span><span class="p">;</span>

<span class="cm">/* RAID Compatibility Input Structure */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_RAID_COMPATIBILITY_INPUT_STRUCT</span> <span class="p">{</span>
	<span class="n">U16</span>                     <span class="n">SourceDevHandle</span><span class="p">;</span>               <span class="cm">/* 0x00 */</span>
	<span class="n">U16</span>                     <span class="n">CandidateDevHandle</span><span class="p">;</span>             <span class="cm">/* 0x02 */</span>
	<span class="n">U32</span>                     <span class="n">Flags</span><span class="p">;</span>                          <span class="cm">/* 0x04 */</span>
	<span class="n">U32</span>                     <span class="n">Reserved1</span><span class="p">;</span>                      <span class="cm">/* 0x08 */</span>
	<span class="n">U32</span>                     <span class="n">Reserved2</span><span class="p">;</span>                      <span class="cm">/* 0x0C */</span>
<span class="p">}</span> <span class="n">MPI2_RAID_COMPATIBILITY_INPUT_STRUCT</span><span class="p">,</span>
<span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_COMPATIBILITY_INPUT_STRUCT</span><span class="p">,</span>
<span class="n">Mpi2RaidCompatibilityInputStruct_t</span><span class="p">,</span>
<span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidCompatibilityInputStruct_t</span><span class="p">;</span>

<span class="cm">/* defines for RAID Compatibility Structure Flags field */</span>
<span class="cp">#define MPI2_RAID_COMPAT_SOURCE_IS_VOLUME_FLAG      (0x00000002)</span>
<span class="cp">#define MPI2_RAID_COMPAT_REPORT_SOURCE_INFO_FLAG    (0x00000001)</span>


<span class="cm">/* RAID Volume Indicator Structure */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_RAID_VOL_INDICATOR</span>
<span class="p">{</span>
    <span class="n">U64</span>                     <span class="n">TotalBlocks</span><span class="p">;</span>                    <span class="cm">/* 0x00 */</span>
    <span class="n">U64</span>                     <span class="n">BlocksRemaining</span><span class="p">;</span>                <span class="cm">/* 0x08 */</span>
    <span class="n">U32</span>                     <span class="n">Flags</span><span class="p">;</span>                          <span class="cm">/* 0x10 */</span>
<span class="p">}</span> <span class="n">MPI2_RAID_VOL_INDICATOR</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_VOL_INDICATOR</span><span class="p">,</span>
  <span class="n">Mpi2RaidVolIndicator_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidVolIndicator_t</span><span class="p">;</span>

<span class="cm">/* defines for RAID Volume Indicator Flags field */</span>
<span class="cp">#define MPI2_RAID_VOL_FLAGS_OP_MASK                 (0x0000000F)</span>
<span class="cp">#define MPI2_RAID_VOL_FLAGS_OP_BACKGROUND_INIT      (0x00000000)</span>
<span class="cp">#define MPI2_RAID_VOL_FLAGS_OP_ONLINE_CAP_EXPANSION (0x00000001)</span>
<span class="cp">#define MPI2_RAID_VOL_FLAGS_OP_CONSISTENCY_CHECK    (0x00000002)</span>
<span class="cp">#define MPI2_RAID_VOL_FLAGS_OP_RESYNC               (0x00000003)</span>
<span class="cp">#define MPI2_RAID_VOL_FLAGS_OP_MDC                  (0x00000004)</span>

<span class="cm">/* RAID Compatibility Result Structure */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_RAID_COMPATIBILITY_RESULT_STRUCT</span> <span class="p">{</span>
	<span class="n">U8</span>                      <span class="n">State</span><span class="p">;</span>                          <span class="cm">/* 0x00 */</span>
	<span class="n">U8</span>                      <span class="n">Reserved1</span><span class="p">;</span>                      <span class="cm">/* 0x01 */</span>
	<span class="n">U16</span>                     <span class="n">Reserved2</span><span class="p">;</span>                      <span class="cm">/* 0x02 */</span>
	<span class="n">U32</span>                     <span class="n">GenericAttributes</span><span class="p">;</span>              <span class="cm">/* 0x04 */</span>
	<span class="n">U32</span>                     <span class="n">OEMSpecificAttributes</span><span class="p">;</span>          <span class="cm">/* 0x08 */</span>
	<span class="n">U32</span>                     <span class="n">Reserved3</span><span class="p">;</span>                      <span class="cm">/* 0x0C */</span>
	<span class="n">U32</span>                     <span class="n">Reserved4</span><span class="p">;</span>                      <span class="cm">/* 0x10 */</span>
<span class="p">}</span> <span class="n">MPI2_RAID_COMPATIBILITY_RESULT_STRUCT</span><span class="p">,</span>
<span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_COMPATIBILITY_RESULT_STRUCT</span><span class="p">,</span>
<span class="n">Mpi2RaidCompatibilityResultStruct_t</span><span class="p">,</span>
<span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidCompatibilityResultStruct_t</span><span class="p">;</span>

<span class="cm">/* defines for RAID Compatibility Result Structure State field */</span>
<span class="cp">#define MPI2_RAID_COMPAT_STATE_COMPATIBLE           (0x00)</span>
<span class="cp">#define MPI2_RAID_COMPAT_STATE_NOT_COMPATIBLE       (0x01)</span>

<span class="cm">/* defines for RAID Compatibility Result Structure GenericAttributes field */</span>
<span class="cp">#define MPI2_RAID_COMPAT_GENATTRIB_4K_SECTOR            (0x00000010)</span>

<span class="cp">#define MPI2_RAID_COMPAT_GENATTRIB_MEDIA_MASK           (0x0000000C)</span>
<span class="cp">#define MPI2_RAID_COMPAT_GENATTRIB_SOLID_STATE_DRIVE    (0x00000008)</span>
<span class="cp">#define MPI2_RAID_COMPAT_GENATTRIB_HARD_DISK_DRIVE      (0x00000004)</span>

<span class="cp">#define MPI2_RAID_COMPAT_GENATTRIB_PROTOCOL_MASK        (0x00000003)</span>
<span class="cp">#define MPI2_RAID_COMPAT_GENATTRIB_SAS_PROTOCOL         (0x00000002)</span>
<span class="cp">#define MPI2_RAID_COMPAT_GENATTRIB_SATA_PROTOCOL        (0x00000001)</span>

<span class="cm">/* RAID Action Reply ActionData union */</span>
<span class="k">typedef</span> <span class="k">union</span> <span class="n">_MPI2_RAID_ACTION_REPLY_DATA</span>
<span class="p">{</span>
	<span class="n">U32</span>                                     <span class="n">Word</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
	<span class="n">MPI2_RAID_VOL_INDICATOR</span>                 <span class="n">RaidVolumeIndicator</span><span class="p">;</span>
	<span class="n">U16</span>                                     <span class="n">VolDevHandle</span><span class="p">;</span>
	<span class="n">U8</span>                                      <span class="n">VolumeState</span><span class="p">;</span>
	<span class="n">U8</span>                                      <span class="n">PhysDiskNum</span><span class="p">;</span>
	<span class="n">MPI2_RAID_COMPATIBILITY_RESULT_STRUCT</span>   <span class="n">RaidCompatibilityResult</span><span class="p">;</span>
<span class="p">}</span> <span class="n">MPI2_RAID_ACTION_REPLY_DATA</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_ACTION_REPLY_DATA</span><span class="p">,</span>
  <span class="n">Mpi2RaidActionReplyData_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidActionReplyData_t</span><span class="p">;</span>

<span class="cm">/* use MPI2_RAIDVOL0_SETTING_ defines from mpi2_cnfg.h for MPI2_RAID_ACTION_CHANGE_VOL_WRITE_CACHE action */</span>


<span class="cm">/* RAID Action Reply Message */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_RAID_ACTION_REPLY</span>
<span class="p">{</span>
    <span class="n">U8</span>                          <span class="n">Action</span><span class="p">;</span>                     <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>                          <span class="n">Reserved1</span><span class="p">;</span>                  <span class="cm">/* 0x01 */</span>
    <span class="n">U8</span>                          <span class="n">MsgLength</span><span class="p">;</span>                  <span class="cm">/* 0x02 */</span>
    <span class="n">U8</span>                          <span class="n">Function</span><span class="p">;</span>                   <span class="cm">/* 0x03 */</span>
    <span class="n">U16</span>                         <span class="n">VolDevHandle</span><span class="p">;</span>               <span class="cm">/* 0x04 */</span>
    <span class="n">U8</span>                          <span class="n">PhysDiskNum</span><span class="p">;</span>                <span class="cm">/* 0x06 */</span>
    <span class="n">U8</span>                          <span class="n">MsgFlags</span><span class="p">;</span>                   <span class="cm">/* 0x07 */</span>
    <span class="n">U8</span>                          <span class="n">VP_ID</span><span class="p">;</span>                      <span class="cm">/* 0x08 */</span>
    <span class="n">U8</span>                          <span class="n">VF_ID</span><span class="p">;</span>                      <span class="cm">/* 0x09 */</span>
    <span class="n">U16</span>                         <span class="n">Reserved2</span><span class="p">;</span>                  <span class="cm">/* 0x0A */</span>
    <span class="n">U16</span>                         <span class="n">Reserved3</span><span class="p">;</span>                  <span class="cm">/* 0x0C */</span>
    <span class="n">U16</span>                         <span class="n">IOCStatus</span><span class="p">;</span>                  <span class="cm">/* 0x0E */</span>
    <span class="n">U32</span>                         <span class="n">IOCLogInfo</span><span class="p">;</span>                 <span class="cm">/* 0x10 */</span>
    <span class="n">MPI2_RAID_ACTION_REPLY_DATA</span> <span class="n">ActionData</span><span class="p">;</span>                 <span class="cm">/* 0x14 */</span>
<span class="p">}</span> <span class="n">MPI2_RAID_ACTION_REPLY</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_RAID_ACTION_REPLY</span><span class="p">,</span>
  <span class="n">Mpi2RaidActionReply_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2RaidActionReply_t</span><span class="p">;</span>


<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
