<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › scsi › mpt2sas › mpi › mpi2_init.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>mpi2_init.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  Copyright (c) 2000-2010 LSI Corporation.</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> *           Name:  mpi2_init.h</span>
<span class="cm"> *          Title:  MPI SCSI initiator mode messages and structures</span>
<span class="cm"> *  Creation Date:  June 23, 2006</span>
<span class="cm"> *</span>
<span class="cm"> *    mpi2_init.h Version:  02.00.11</span>
<span class="cm"> *</span>
<span class="cm"> *  Version History</span>
<span class="cm"> *  ---------------</span>
<span class="cm"> *</span>
<span class="cm"> *  Date      Version   Description</span>
<span class="cm"> *  --------  --------  ------------------------------------------------------</span>
<span class="cm"> *  04-30-07  02.00.00  Corresponds to Fusion-MPT MPI Specification Rev A.</span>
<span class="cm"> *  10-31-07  02.00.01  Fixed name for pMpi2SCSITaskManagementRequest_t.</span>
<span class="cm"> *  12-18-07  02.00.02  Modified Task Management Target Reset Method defines.</span>
<span class="cm"> *  02-29-08  02.00.03  Added Query Task Set and Query Unit Attention.</span>
<span class="cm"> *  03-03-08  02.00.04  Fixed name of struct _MPI2_SCSI_TASK_MANAGE_REPLY.</span>
<span class="cm"> *  05-21-08  02.00.05  Fixed typo in name of Mpi2SepRequest_t.</span>
<span class="cm"> *  10-02-08  02.00.06  Removed Untagged and No Disconnect values from SCSI IO</span>
<span class="cm"> *                      Control field Task Attribute flags.</span>
<span class="cm"> *                      Moved LUN field defines to mpi2.h because they are</span>
<span class="cm"> *                      common to many structures.</span>
<span class="cm"> *  05-06-09  02.00.07  Changed task management type of Query Unit Attention to</span>
<span class="cm"> *                      Query Asynchronous Event.</span>
<span class="cm"> *                      Defined two new bits in the SlotStatus field of the SCSI</span>
<span class="cm"> *                      Enclosure Processor Request and Reply.</span>
<span class="cm"> *  10-28-09  02.00.08  Added defines for decoding the ResponseInfo bytes for</span>
<span class="cm"> *                      both SCSI IO Error Reply and SCSI Task Management Reply.</span>
<span class="cm"> *                      Added ResponseInfo field to MPI2_SCSI_TASK_MANAGE_REPLY.</span>
<span class="cm"> *                      Added MPI2_SCSITASKMGMT_RSP_TM_OVERLAPPED_TAG define.</span>
<span class="cm"> *  02-10-10  02.00.09  Removed unused structure that had &quot;#if 0&quot; around it.</span>
<span class="cm"> *  05-12-10  02.00.10  Added optional vendor-unique region to SCSI IO Request.</span>
<span class="cm"> *  11-10-10  02.00.11  Added MPI2_SCSIIO_NUM_SGLOFFSETS define.</span>
<span class="cm"> *  --------------------------------------------------------------------------</span>
<span class="cm"> */</span>

<span class="cp">#ifndef MPI2_INIT_H</span>
<span class="cp">#define MPI2_INIT_H</span>

<span class="cm">/*****************************************************************************</span>
<span class="cm">*</span>
<span class="cm">*               SCSI Initiator Messages</span>
<span class="cm">*</span>
<span class="cm">*****************************************************************************/</span>

<span class="cm">/****************************************************************************</span>
<span class="cm">*  SCSI IO messages and associated structures</span>
<span class="cm">****************************************************************************/</span>

<span class="k">typedef</span> <span class="k">struct</span>
<span class="p">{</span>
    <span class="n">U8</span>                      <span class="n">CDB</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>                    <span class="cm">/* 0x00 */</span>
    <span class="n">U32</span>                     <span class="n">PrimaryReferenceTag</span><span class="p">;</span>        <span class="cm">/* 0x14 */</span>
    <span class="n">U16</span>                     <span class="n">PrimaryApplicationTag</span><span class="p">;</span>      <span class="cm">/* 0x18 */</span>
    <span class="n">U16</span>                     <span class="n">PrimaryApplicationTagMask</span><span class="p">;</span>  <span class="cm">/* 0x1A */</span>
    <span class="n">U32</span>                     <span class="n">TransferLength</span><span class="p">;</span>             <span class="cm">/* 0x1C */</span>
<span class="p">}</span> <span class="n">MPI2_SCSI_IO_CDB_EEDP32</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_SCSI_IO_CDB_EEDP32</span><span class="p">,</span>
  <span class="n">Mpi2ScsiIoCdbEedp32_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2ScsiIoCdbEedp32_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">union</span>
<span class="p">{</span>
    <span class="n">U8</span>                      <span class="n">CDB32</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
    <span class="n">MPI2_SCSI_IO_CDB_EEDP32</span> <span class="n">EEDP32</span><span class="p">;</span>
    <span class="n">MPI2_SGE_SIMPLE_UNION</span>   <span class="n">SGE</span><span class="p">;</span>
<span class="p">}</span> <span class="n">MPI2_SCSI_IO_CDB_UNION</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_SCSI_IO_CDB_UNION</span><span class="p">,</span>
  <span class="n">Mpi2ScsiIoCdb_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2ScsiIoCdb_t</span><span class="p">;</span>

<span class="cm">/* SCSI IO Request Message */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_SCSI_IO_REQUEST</span>
<span class="p">{</span>
    <span class="n">U16</span>                     <span class="n">DevHandle</span><span class="p">;</span>                      <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>                      <span class="n">ChainOffset</span><span class="p">;</span>                    <span class="cm">/* 0x02 */</span>
    <span class="n">U8</span>                      <span class="n">Function</span><span class="p">;</span>                       <span class="cm">/* 0x03 */</span>
    <span class="n">U16</span>                     <span class="n">Reserved1</span><span class="p">;</span>                      <span class="cm">/* 0x04 */</span>
    <span class="n">U8</span>                      <span class="n">Reserved2</span><span class="p">;</span>                      <span class="cm">/* 0x06 */</span>
    <span class="n">U8</span>                      <span class="n">MsgFlags</span><span class="p">;</span>                       <span class="cm">/* 0x07 */</span>
    <span class="n">U8</span>                      <span class="n">VP_ID</span><span class="p">;</span>                          <span class="cm">/* 0x08 */</span>
    <span class="n">U8</span>                      <span class="n">VF_ID</span><span class="p">;</span>                          <span class="cm">/* 0x09 */</span>
    <span class="n">U16</span>                     <span class="n">Reserved3</span><span class="p">;</span>                      <span class="cm">/* 0x0A */</span>
    <span class="n">U32</span>                     <span class="n">SenseBufferLowAddress</span><span class="p">;</span>          <span class="cm">/* 0x0C */</span>
    <span class="n">U16</span>                     <span class="n">SGLFlags</span><span class="p">;</span>                       <span class="cm">/* 0x10 */</span>
    <span class="n">U8</span>                      <span class="n">SenseBufferLength</span><span class="p">;</span>              <span class="cm">/* 0x12 */</span>
    <span class="n">U8</span>                      <span class="n">Reserved4</span><span class="p">;</span>                      <span class="cm">/* 0x13 */</span>
    <span class="n">U8</span>                      <span class="n">SGLOffset0</span><span class="p">;</span>                     <span class="cm">/* 0x14 */</span>
    <span class="n">U8</span>                      <span class="n">SGLOffset1</span><span class="p">;</span>                     <span class="cm">/* 0x15 */</span>
    <span class="n">U8</span>                      <span class="n">SGLOffset2</span><span class="p">;</span>                     <span class="cm">/* 0x16 */</span>
    <span class="n">U8</span>                      <span class="n">SGLOffset3</span><span class="p">;</span>                     <span class="cm">/* 0x17 */</span>
    <span class="n">U32</span>                     <span class="n">SkipCount</span><span class="p">;</span>                      <span class="cm">/* 0x18 */</span>
    <span class="n">U32</span>                     <span class="n">DataLength</span><span class="p">;</span>                     <span class="cm">/* 0x1C */</span>
    <span class="n">U32</span>                     <span class="n">BidirectionalDataLength</span><span class="p">;</span>        <span class="cm">/* 0x20 */</span>
    <span class="n">U16</span>                     <span class="n">IoFlags</span><span class="p">;</span>                        <span class="cm">/* 0x24 */</span>
    <span class="n">U16</span>                     <span class="n">EEDPFlags</span><span class="p">;</span>                      <span class="cm">/* 0x26 */</span>
    <span class="n">U32</span>                     <span class="n">EEDPBlockSize</span><span class="p">;</span>                  <span class="cm">/* 0x28 */</span>
    <span class="n">U32</span>                     <span class="n">SecondaryReferenceTag</span><span class="p">;</span>          <span class="cm">/* 0x2C */</span>
    <span class="n">U16</span>                     <span class="n">SecondaryApplicationTag</span><span class="p">;</span>        <span class="cm">/* 0x30 */</span>
    <span class="n">U16</span>                     <span class="n">ApplicationTagTranslationMask</span><span class="p">;</span>  <span class="cm">/* 0x32 */</span>
    <span class="n">U8</span>                      <span class="n">LUN</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>                         <span class="cm">/* 0x34 */</span>
    <span class="n">U32</span>                     <span class="n">Control</span><span class="p">;</span>                        <span class="cm">/* 0x3C */</span>
    <span class="n">MPI2_SCSI_IO_CDB_UNION</span>  <span class="n">CDB</span><span class="p">;</span>                            <span class="cm">/* 0x40 */</span>

<span class="cp">#ifdef MPI2_SCSI_IO_VENDOR_UNIQUE_REGION </span><span class="cm">/* typically this is left undefined */</span><span class="cp"></span>
	<span class="n">MPI2_SCSI_IO_VENDOR_UNIQUE</span> <span class="n">VendorRegion</span><span class="p">;</span>
<span class="cp">#endif</span>

    <span class="n">MPI2_SGE_IO_UNION</span>       <span class="n">SGL</span><span class="p">;</span>                            <span class="cm">/* 0x60 */</span>

<span class="p">}</span> <span class="n">MPI2_SCSI_IO_REQUEST</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_SCSI_IO_REQUEST</span><span class="p">,</span>
  <span class="n">Mpi2SCSIIORequest_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2SCSIIORequest_t</span><span class="p">;</span>

<span class="cm">/* SCSI IO MsgFlags bits */</span>

<span class="cm">/* MsgFlags for SenseBufferAddressSpace */</span>
<span class="cp">#define MPI2_SCSIIO_MSGFLAGS_MASK_SENSE_ADDR        (0x0C)</span>
<span class="cp">#define MPI2_SCSIIO_MSGFLAGS_SYSTEM_SENSE_ADDR      (0x00)</span>
<span class="cp">#define MPI2_SCSIIO_MSGFLAGS_IOCDDR_SENSE_ADDR      (0x04)</span>
<span class="cp">#define MPI2_SCSIIO_MSGFLAGS_IOCPLB_SENSE_ADDR      (0x08)</span>
<span class="cp">#define MPI2_SCSIIO_MSGFLAGS_IOCPLBNTA_SENSE_ADDR   (0x0C)</span>

<span class="cm">/* SCSI IO SGLFlags bits */</span>

<span class="cm">/* base values for Data Location Address Space */</span>
<span class="cp">#define MPI2_SCSIIO_SGLFLAGS_ADDR_MASK              (0x0C)</span>
<span class="cp">#define MPI2_SCSIIO_SGLFLAGS_SYSTEM_ADDR            (0x00)</span>
<span class="cp">#define MPI2_SCSIIO_SGLFLAGS_IOCDDR_ADDR            (0x04)</span>
<span class="cp">#define MPI2_SCSIIO_SGLFLAGS_IOCPLB_ADDR            (0x08)</span>
<span class="cp">#define MPI2_SCSIIO_SGLFLAGS_IOCPLBNTA_ADDR         (0x0C)</span>

<span class="cm">/* base values for Type */</span>
<span class="cp">#define MPI2_SCSIIO_SGLFLAGS_TYPE_MASK              (0x03)</span>
<span class="cp">#define MPI2_SCSIIO_SGLFLAGS_TYPE_MPI               (0x00)</span>
<span class="cp">#define MPI2_SCSIIO_SGLFLAGS_TYPE_IEEE32            (0x01)</span>
<span class="cp">#define MPI2_SCSIIO_SGLFLAGS_TYPE_IEEE64            (0x02)</span>

<span class="cm">/* shift values for each sub-field */</span>
<span class="cp">#define MPI2_SCSIIO_SGLFLAGS_SGL3_SHIFT             (12)</span>
<span class="cp">#define MPI2_SCSIIO_SGLFLAGS_SGL2_SHIFT             (8)</span>
<span class="cp">#define MPI2_SCSIIO_SGLFLAGS_SGL1_SHIFT             (4)</span>
<span class="cp">#define MPI2_SCSIIO_SGLFLAGS_SGL0_SHIFT             (0)</span>

<span class="cm">/* number of SGLOffset fields */</span>
<span class="cp">#define MPI2_SCSIIO_NUM_SGLOFFSETS                  (4)</span>

<span class="cm">/* SCSI IO IoFlags bits */</span>

<span class="cm">/* Large CDB Address Space */</span>
<span class="cp">#define MPI2_SCSIIO_CDB_ADDR_MASK                   (0x6000)</span>
<span class="cp">#define MPI2_SCSIIO_CDB_ADDR_SYSTEM                 (0x0000)</span>
<span class="cp">#define MPI2_SCSIIO_CDB_ADDR_IOCDDR                 (0x2000)</span>
<span class="cp">#define MPI2_SCSIIO_CDB_ADDR_IOCPLB                 (0x4000)</span>
<span class="cp">#define MPI2_SCSIIO_CDB_ADDR_IOCPLBNTA              (0x6000)</span>

<span class="cp">#define MPI2_SCSIIO_IOFLAGS_LARGE_CDB               (0x1000)</span>
<span class="cp">#define MPI2_SCSIIO_IOFLAGS_BIDIRECTIONAL           (0x0800)</span>
<span class="cp">#define MPI2_SCSIIO_IOFLAGS_MULTICAST               (0x0400)</span>
<span class="cp">#define MPI2_SCSIIO_IOFLAGS_CMD_DETERMINES_DATA_DIR (0x0200)</span>
<span class="cp">#define MPI2_SCSIIO_IOFLAGS_CDBLENGTH_MASK          (0x01FF)</span>

<span class="cm">/* SCSI IO EEDPFlags bits */</span>

<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_INC_PRI_REFTAG        (0x8000)</span>
<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_INC_SEC_REFTAG        (0x4000)</span>
<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_INC_PRI_APPTAG        (0x2000)</span>
<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_INC_SEC_APPTAG        (0x1000)</span>

<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_CHECK_REFTAG          (0x0400)</span>
<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_CHECK_APPTAG          (0x0200)</span>
<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_CHECK_GUARD           (0x0100)</span>

<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_PASSTHRU_REFTAG       (0x0008)</span>

<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_MASK_OP               (0x0007)</span>
<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_NOOP_OP               (0x0000)</span>
<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_CHECK_OP              (0x0001)</span>
<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_STRIP_OP              (0x0002)</span>
<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_CHECK_REMOVE_OP       (0x0003)</span>
<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_INSERT_OP             (0x0004)</span>
<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_REPLACE_OP            (0x0006)</span>
<span class="cp">#define MPI2_SCSIIO_EEDPFLAGS_CHECK_REGEN_OP        (0x0007)</span>

<span class="cm">/* SCSI IO LUN fields: use MPI2_LUN_ from mpi2.h */</span>

<span class="cm">/* SCSI IO Control bits */</span>
<span class="cp">#define MPI2_SCSIIO_CONTROL_ADDCDBLEN_MASK      (0xFC000000)</span>
<span class="cp">#define MPI2_SCSIIO_CONTROL_ADDCDBLEN_SHIFT     (26)</span>

<span class="cp">#define MPI2_SCSIIO_CONTROL_DATADIRECTION_MASK  (0x03000000)</span>
<span class="cp">#define MPI2_SCSIIO_CONTROL_NODATATRANSFER      (0x00000000)</span>
<span class="cp">#define MPI2_SCSIIO_CONTROL_WRITE               (0x01000000)</span>
<span class="cp">#define MPI2_SCSIIO_CONTROL_READ                (0x02000000)</span>
<span class="cp">#define MPI2_SCSIIO_CONTROL_BIDIRECTIONAL       (0x03000000)</span>

<span class="cp">#define MPI2_SCSIIO_CONTROL_TASKPRI_MASK        (0x00007800)</span>
<span class="cp">#define MPI2_SCSIIO_CONTROL_TASKPRI_SHIFT       (11)</span>

<span class="cp">#define MPI2_SCSIIO_CONTROL_TASKATTRIBUTE_MASK  (0x00000700)</span>
<span class="cp">#define MPI2_SCSIIO_CONTROL_SIMPLEQ             (0x00000000)</span>
<span class="cp">#define MPI2_SCSIIO_CONTROL_HEADOFQ             (0x00000100)</span>
<span class="cp">#define MPI2_SCSIIO_CONTROL_ORDEREDQ            (0x00000200)</span>
<span class="cp">#define MPI2_SCSIIO_CONTROL_ACAQ                (0x00000400)</span>

<span class="cp">#define MPI2_SCSIIO_CONTROL_TLR_MASK            (0x000000C0)</span>
<span class="cp">#define MPI2_SCSIIO_CONTROL_NO_TLR              (0x00000000)</span>
<span class="cp">#define MPI2_SCSIIO_CONTROL_TLR_ON              (0x00000040)</span>
<span class="cp">#define MPI2_SCSIIO_CONTROL_TLR_OFF             (0x00000080)</span>


<span class="cm">/* SCSI IO Error Reply Message */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_SCSI_IO_REPLY</span>
<span class="p">{</span>
    <span class="n">U16</span>                     <span class="n">DevHandle</span><span class="p">;</span>                      <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>                      <span class="n">MsgLength</span><span class="p">;</span>                      <span class="cm">/* 0x02 */</span>
    <span class="n">U8</span>                      <span class="n">Function</span><span class="p">;</span>                       <span class="cm">/* 0x03 */</span>
    <span class="n">U16</span>                     <span class="n">Reserved1</span><span class="p">;</span>                      <span class="cm">/* 0x04 */</span>
    <span class="n">U8</span>                      <span class="n">Reserved2</span><span class="p">;</span>                      <span class="cm">/* 0x06 */</span>
    <span class="n">U8</span>                      <span class="n">MsgFlags</span><span class="p">;</span>                       <span class="cm">/* 0x07 */</span>
    <span class="n">U8</span>                      <span class="n">VP_ID</span><span class="p">;</span>                          <span class="cm">/* 0x08 */</span>
    <span class="n">U8</span>                      <span class="n">VF_ID</span><span class="p">;</span>                          <span class="cm">/* 0x09 */</span>
    <span class="n">U16</span>                     <span class="n">Reserved3</span><span class="p">;</span>                      <span class="cm">/* 0x0A */</span>
    <span class="n">U8</span>                      <span class="n">SCSIStatus</span><span class="p">;</span>                     <span class="cm">/* 0x0C */</span>
    <span class="n">U8</span>                      <span class="n">SCSIState</span><span class="p">;</span>                      <span class="cm">/* 0x0D */</span>
    <span class="n">U16</span>                     <span class="n">IOCStatus</span><span class="p">;</span>                      <span class="cm">/* 0x0E */</span>
    <span class="n">U32</span>                     <span class="n">IOCLogInfo</span><span class="p">;</span>                     <span class="cm">/* 0x10 */</span>
    <span class="n">U32</span>                     <span class="n">TransferCount</span><span class="p">;</span>                  <span class="cm">/* 0x14 */</span>
    <span class="n">U32</span>                     <span class="n">SenseCount</span><span class="p">;</span>                     <span class="cm">/* 0x18 */</span>
    <span class="n">U32</span>                     <span class="n">ResponseInfo</span><span class="p">;</span>                   <span class="cm">/* 0x1C */</span>
    <span class="n">U16</span>                     <span class="n">TaskTag</span><span class="p">;</span>                        <span class="cm">/* 0x20 */</span>
    <span class="n">U16</span>                     <span class="n">Reserved4</span><span class="p">;</span>                      <span class="cm">/* 0x22 */</span>
    <span class="n">U32</span>                     <span class="n">BidirectionalTransferCount</span><span class="p">;</span>     <span class="cm">/* 0x24 */</span>
    <span class="n">U32</span>                     <span class="n">Reserved5</span><span class="p">;</span>                      <span class="cm">/* 0x28 */</span>
    <span class="n">U32</span>                     <span class="n">Reserved6</span><span class="p">;</span>                      <span class="cm">/* 0x2C */</span>
<span class="p">}</span> <span class="n">MPI2_SCSI_IO_REPLY</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_SCSI_IO_REPLY</span><span class="p">,</span>
  <span class="n">Mpi2SCSIIOReply_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2SCSIIOReply_t</span><span class="p">;</span>

<span class="cm">/* SCSI IO Reply SCSIStatus values (SAM-4 status codes) */</span>

<span class="cp">#define MPI2_SCSI_STATUS_GOOD                   (0x00)</span>
<span class="cp">#define MPI2_SCSI_STATUS_CHECK_CONDITION        (0x02)</span>
<span class="cp">#define MPI2_SCSI_STATUS_CONDITION_MET          (0x04)</span>
<span class="cp">#define MPI2_SCSI_STATUS_BUSY                   (0x08)</span>
<span class="cp">#define MPI2_SCSI_STATUS_INTERMEDIATE           (0x10)</span>
<span class="cp">#define MPI2_SCSI_STATUS_INTERMEDIATE_CONDMET   (0x14)</span>
<span class="cp">#define MPI2_SCSI_STATUS_RESERVATION_CONFLICT   (0x18)</span>
<span class="cp">#define MPI2_SCSI_STATUS_COMMAND_TERMINATED     (0x22) </span><span class="cm">/* obsolete */</span><span class="cp"></span>
<span class="cp">#define MPI2_SCSI_STATUS_TASK_SET_FULL          (0x28)</span>
<span class="cp">#define MPI2_SCSI_STATUS_ACA_ACTIVE             (0x30)</span>
<span class="cp">#define MPI2_SCSI_STATUS_TASK_ABORTED           (0x40)</span>

<span class="cm">/* SCSI IO Reply SCSIState flags */</span>

<span class="cp">#define MPI2_SCSI_STATE_RESPONSE_INFO_VALID     (0x10)</span>
<span class="cp">#define MPI2_SCSI_STATE_TERMINATED              (0x08)</span>
<span class="cp">#define MPI2_SCSI_STATE_NO_SCSI_STATUS          (0x04)</span>
<span class="cp">#define MPI2_SCSI_STATE_AUTOSENSE_FAILED        (0x02)</span>
<span class="cp">#define MPI2_SCSI_STATE_AUTOSENSE_VALID         (0x01)</span>

<span class="cm">/* masks and shifts for the ResponseInfo field */</span>

<span class="cp">#define MPI2_SCSI_RI_MASK_REASONCODE            (0x000000FF)</span>
<span class="cp">#define MPI2_SCSI_RI_SHIFT_REASONCODE           (0)</span>

<span class="cp">#define MPI2_SCSI_TASKTAG_UNKNOWN               (0xFFFF)</span>


<span class="cm">/****************************************************************************</span>
<span class="cm">*  SCSI Task Management messages</span>
<span class="cm">****************************************************************************/</span>

<span class="cm">/* SCSI Task Management Request Message */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_SCSI_TASK_MANAGE_REQUEST</span>
<span class="p">{</span>
    <span class="n">U16</span>                     <span class="n">DevHandle</span><span class="p">;</span>                      <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>                      <span class="n">ChainOffset</span><span class="p">;</span>                    <span class="cm">/* 0x02 */</span>
    <span class="n">U8</span>                      <span class="n">Function</span><span class="p">;</span>                       <span class="cm">/* 0x03 */</span>
    <span class="n">U8</span>                      <span class="n">Reserved1</span><span class="p">;</span>                      <span class="cm">/* 0x04 */</span>
    <span class="n">U8</span>                      <span class="n">TaskType</span><span class="p">;</span>                       <span class="cm">/* 0x05 */</span>
    <span class="n">U8</span>                      <span class="n">Reserved2</span><span class="p">;</span>                      <span class="cm">/* 0x06 */</span>
    <span class="n">U8</span>                      <span class="n">MsgFlags</span><span class="p">;</span>                       <span class="cm">/* 0x07 */</span>
    <span class="n">U8</span>                      <span class="n">VP_ID</span><span class="p">;</span>                          <span class="cm">/* 0x08 */</span>
    <span class="n">U8</span>                      <span class="n">VF_ID</span><span class="p">;</span>                          <span class="cm">/* 0x09 */</span>
    <span class="n">U16</span>                     <span class="n">Reserved3</span><span class="p">;</span>                      <span class="cm">/* 0x0A */</span>
    <span class="n">U8</span>                      <span class="n">LUN</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>                         <span class="cm">/* 0x0C */</span>
    <span class="n">U32</span>                     <span class="n">Reserved4</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>                   <span class="cm">/* 0x14 */</span>
    <span class="n">U16</span>                     <span class="n">TaskMID</span><span class="p">;</span>                        <span class="cm">/* 0x30 */</span>
    <span class="n">U16</span>                     <span class="n">Reserved5</span><span class="p">;</span>                      <span class="cm">/* 0x32 */</span>
<span class="p">}</span> <span class="n">MPI2_SCSI_TASK_MANAGE_REQUEST</span><span class="p">,</span>
  <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_SCSI_TASK_MANAGE_REQUEST</span><span class="p">,</span>
  <span class="n">Mpi2SCSITaskManagementRequest_t</span><span class="p">,</span>
  <span class="n">MPI2_POINTER</span> <span class="n">pMpi2SCSITaskManagementRequest_t</span><span class="p">;</span>

<span class="cm">/* TaskType values */</span>

<span class="cp">#define MPI2_SCSITASKMGMT_TASKTYPE_ABORT_TASK           (0x01)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_TASKTYPE_ABRT_TASK_SET        (0x02)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_TASKTYPE_TARGET_RESET         (0x03)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_TASKTYPE_LOGICAL_UNIT_RESET   (0x05)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_TASKTYPE_CLEAR_TASK_SET       (0x06)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_TASKTYPE_QUERY_TASK           (0x07)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_TASKTYPE_CLR_ACA              (0x08)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_TASKTYPE_QRY_TASK_SET         (0x09)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_TASKTYPE_QRY_ASYNC_EVENT      (0x0A)</span>

<span class="cm">/* obsolete TaskType name */</span>
<span class="cp">#define MPI2_SCSITASKMGMT_TASKTYPE_QRY_UNIT_ATTENTION	\</span>
<span class="cp">	(MPI2_SCSITASKMGMT_TASKTYPE_QRY_ASYNC_EVENT)</span>

<span class="cm">/* MsgFlags bits */</span>

<span class="cp">#define MPI2_SCSITASKMGMT_MSGFLAGS_MASK_TARGET_RESET    (0x18)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_MSGFLAGS_LINK_RESET           (0x00)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_MSGFLAGS_NEXUS_RESET_SRST     (0x08)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_MSGFLAGS_SAS_HARD_LINK_RESET  (0x10)</span>

<span class="cp">#define MPI2_SCSITASKMGMT_MSGFLAGS_DO_NOT_SEND_TASK_IU  (0x01)</span>



<span class="cm">/* SCSI Task Management Reply Message */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_SCSI_TASK_MANAGE_REPLY</span>
<span class="p">{</span>
    <span class="n">U16</span>                     <span class="n">DevHandle</span><span class="p">;</span>                      <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>                      <span class="n">MsgLength</span><span class="p">;</span>                      <span class="cm">/* 0x02 */</span>
    <span class="n">U8</span>                      <span class="n">Function</span><span class="p">;</span>                       <span class="cm">/* 0x03 */</span>
    <span class="n">U8</span>                      <span class="n">ResponseCode</span><span class="p">;</span>                   <span class="cm">/* 0x04 */</span>
    <span class="n">U8</span>                      <span class="n">TaskType</span><span class="p">;</span>                       <span class="cm">/* 0x05 */</span>
    <span class="n">U8</span>                      <span class="n">Reserved1</span><span class="p">;</span>                      <span class="cm">/* 0x06 */</span>
    <span class="n">U8</span>                      <span class="n">MsgFlags</span><span class="p">;</span>                       <span class="cm">/* 0x07 */</span>
    <span class="n">U8</span>                      <span class="n">VP_ID</span><span class="p">;</span>                          <span class="cm">/* 0x08 */</span>
    <span class="n">U8</span>                      <span class="n">VF_ID</span><span class="p">;</span>                          <span class="cm">/* 0x09 */</span>
    <span class="n">U16</span>                     <span class="n">Reserved2</span><span class="p">;</span>                      <span class="cm">/* 0x0A */</span>
    <span class="n">U16</span>                     <span class="n">Reserved3</span><span class="p">;</span>                      <span class="cm">/* 0x0C */</span>
    <span class="n">U16</span>                     <span class="n">IOCStatus</span><span class="p">;</span>                      <span class="cm">/* 0x0E */</span>
    <span class="n">U32</span>                     <span class="n">IOCLogInfo</span><span class="p">;</span>                     <span class="cm">/* 0x10 */</span>
    <span class="n">U32</span>                     <span class="n">TerminationCount</span><span class="p">;</span>               <span class="cm">/* 0x14 */</span>
    <span class="n">U32</span>                     <span class="n">ResponseInfo</span><span class="p">;</span>                   <span class="cm">/* 0x18 */</span>
<span class="p">}</span> <span class="n">MPI2_SCSI_TASK_MANAGE_REPLY</span><span class="p">,</span>
  <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_SCSI_TASK_MANAGE_REPLY</span><span class="p">,</span>
  <span class="n">Mpi2SCSITaskManagementReply_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2SCSIManagementReply_t</span><span class="p">;</span>

<span class="cm">/* ResponseCode values */</span>

<span class="cp">#define MPI2_SCSITASKMGMT_RSP_TM_COMPLETE               (0x00)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_RSP_INVALID_FRAME             (0x02)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_RSP_TM_NOT_SUPPORTED          (0x04)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_RSP_TM_FAILED                 (0x05)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_RSP_TM_SUCCEEDED              (0x08)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_RSP_TM_INVALID_LUN            (0x09)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_RSP_TM_OVERLAPPED_TAG         (0x0A)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_RSP_IO_QUEUED_ON_IOC          (0x80)</span>

<span class="cm">/* masks and shifts for the ResponseInfo field */</span>

<span class="cp">#define MPI2_SCSITASKMGMT_RI_MASK_REASONCODE            (0x000000FF)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_RI_SHIFT_REASONCODE           (0)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_RI_MASK_ARI2                  (0x0000FF00)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_RI_SHIFT_ARI2                 (8)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_RI_MASK_ARI1                  (0x00FF0000)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_RI_SHIFT_ARI1                 (16)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_RI_MASK_ARI0                  (0xFF000000)</span>
<span class="cp">#define MPI2_SCSITASKMGMT_RI_SHIFT_ARI0                 (24)</span>


<span class="cm">/****************************************************************************</span>
<span class="cm">*  SCSI Enclosure Processor messages</span>
<span class="cm">****************************************************************************/</span>

<span class="cm">/* SCSI Enclosure Processor Request Message */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_SEP_REQUEST</span>
<span class="p">{</span>
    <span class="n">U16</span>                     <span class="n">DevHandle</span><span class="p">;</span>          <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>                      <span class="n">ChainOffset</span><span class="p">;</span>        <span class="cm">/* 0x02 */</span>
    <span class="n">U8</span>                      <span class="n">Function</span><span class="p">;</span>           <span class="cm">/* 0x03 */</span>
    <span class="n">U8</span>                      <span class="n">Action</span><span class="p">;</span>             <span class="cm">/* 0x04 */</span>
    <span class="n">U8</span>                      <span class="n">Flags</span><span class="p">;</span>              <span class="cm">/* 0x05 */</span>
    <span class="n">U8</span>                      <span class="n">Reserved1</span><span class="p">;</span>          <span class="cm">/* 0x06 */</span>
    <span class="n">U8</span>                      <span class="n">MsgFlags</span><span class="p">;</span>           <span class="cm">/* 0x07 */</span>
    <span class="n">U8</span>                      <span class="n">VP_ID</span><span class="p">;</span>              <span class="cm">/* 0x08 */</span>
    <span class="n">U8</span>                      <span class="n">VF_ID</span><span class="p">;</span>              <span class="cm">/* 0x09 */</span>
    <span class="n">U16</span>                     <span class="n">Reserved2</span><span class="p">;</span>          <span class="cm">/* 0x0A */</span>
    <span class="n">U32</span>                     <span class="n">SlotStatus</span><span class="p">;</span>         <span class="cm">/* 0x0C */</span>
    <span class="n">U32</span>                     <span class="n">Reserved3</span><span class="p">;</span>          <span class="cm">/* 0x10 */</span>
    <span class="n">U32</span>                     <span class="n">Reserved4</span><span class="p">;</span>          <span class="cm">/* 0x14 */</span>
    <span class="n">U32</span>                     <span class="n">Reserved5</span><span class="p">;</span>          <span class="cm">/* 0x18 */</span>
    <span class="n">U16</span>                     <span class="n">Slot</span><span class="p">;</span>               <span class="cm">/* 0x1C */</span>
    <span class="n">U16</span>                     <span class="n">EnclosureHandle</span><span class="p">;</span>    <span class="cm">/* 0x1E */</span>
<span class="p">}</span> <span class="n">MPI2_SEP_REQUEST</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_SEP_REQUEST</span><span class="p">,</span>
  <span class="n">Mpi2SepRequest_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2SepRequest_t</span><span class="p">;</span>

<span class="cm">/* Action defines */</span>
<span class="cp">#define MPI2_SEP_REQ_ACTION_WRITE_STATUS                (0x00)</span>
<span class="cp">#define MPI2_SEP_REQ_ACTION_READ_STATUS                 (0x01)</span>

<span class="cm">/* Flags defines */</span>
<span class="cp">#define MPI2_SEP_REQ_FLAGS_DEVHANDLE_ADDRESS            (0x00)</span>
<span class="cp">#define MPI2_SEP_REQ_FLAGS_ENCLOSURE_SLOT_ADDRESS       (0x01)</span>

<span class="cm">/* SlotStatus defines */</span>
<span class="cp">#define MPI2_SEP_REQ_SLOTSTATUS_REQUEST_REMOVE          (0x00040000)</span>
<span class="cp">#define MPI2_SEP_REQ_SLOTSTATUS_IDENTIFY_REQUEST        (0x00020000)</span>
<span class="cp">#define MPI2_SEP_REQ_SLOTSTATUS_REBUILD_STOPPED         (0x00000200)</span>
<span class="cp">#define MPI2_SEP_REQ_SLOTSTATUS_HOT_SPARE               (0x00000100)</span>
<span class="cp">#define MPI2_SEP_REQ_SLOTSTATUS_UNCONFIGURED            (0x00000080)</span>
<span class="cp">#define MPI2_SEP_REQ_SLOTSTATUS_PREDICTED_FAULT         (0x00000040)</span>
<span class="cp">#define MPI2_SEP_REQ_SLOTSTATUS_IN_CRITICAL_ARRAY       (0x00000010)</span>
<span class="cp">#define MPI2_SEP_REQ_SLOTSTATUS_IN_FAILED_ARRAY         (0x00000008)</span>
<span class="cp">#define MPI2_SEP_REQ_SLOTSTATUS_DEV_REBUILDING          (0x00000004)</span>
<span class="cp">#define MPI2_SEP_REQ_SLOTSTATUS_DEV_FAULTY              (0x00000002)</span>
<span class="cp">#define MPI2_SEP_REQ_SLOTSTATUS_NO_ERROR                (0x00000001)</span>


<span class="cm">/* SCSI Enclosure Processor Reply Message */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MPI2_SEP_REPLY</span>
<span class="p">{</span>
    <span class="n">U16</span>                     <span class="n">DevHandle</span><span class="p">;</span>          <span class="cm">/* 0x00 */</span>
    <span class="n">U8</span>                      <span class="n">MsgLength</span><span class="p">;</span>          <span class="cm">/* 0x02 */</span>
    <span class="n">U8</span>                      <span class="n">Function</span><span class="p">;</span>           <span class="cm">/* 0x03 */</span>
    <span class="n">U8</span>                      <span class="n">Action</span><span class="p">;</span>             <span class="cm">/* 0x04 */</span>
    <span class="n">U8</span>                      <span class="n">Flags</span><span class="p">;</span>              <span class="cm">/* 0x05 */</span>
    <span class="n">U8</span>                      <span class="n">Reserved1</span><span class="p">;</span>          <span class="cm">/* 0x06 */</span>
    <span class="n">U8</span>                      <span class="n">MsgFlags</span><span class="p">;</span>           <span class="cm">/* 0x07 */</span>
    <span class="n">U8</span>                      <span class="n">VP_ID</span><span class="p">;</span>              <span class="cm">/* 0x08 */</span>
    <span class="n">U8</span>                      <span class="n">VF_ID</span><span class="p">;</span>              <span class="cm">/* 0x09 */</span>
    <span class="n">U16</span>                     <span class="n">Reserved2</span><span class="p">;</span>          <span class="cm">/* 0x0A */</span>
    <span class="n">U16</span>                     <span class="n">Reserved3</span><span class="p">;</span>          <span class="cm">/* 0x0C */</span>
    <span class="n">U16</span>                     <span class="n">IOCStatus</span><span class="p">;</span>          <span class="cm">/* 0x0E */</span>
    <span class="n">U32</span>                     <span class="n">IOCLogInfo</span><span class="p">;</span>         <span class="cm">/* 0x10 */</span>
    <span class="n">U32</span>                     <span class="n">SlotStatus</span><span class="p">;</span>         <span class="cm">/* 0x14 */</span>
    <span class="n">U32</span>                     <span class="n">Reserved4</span><span class="p">;</span>          <span class="cm">/* 0x18 */</span>
    <span class="n">U16</span>                     <span class="n">Slot</span><span class="p">;</span>               <span class="cm">/* 0x1C */</span>
    <span class="n">U16</span>                     <span class="n">EnclosureHandle</span><span class="p">;</span>    <span class="cm">/* 0x1E */</span>
<span class="p">}</span> <span class="n">MPI2_SEP_REPLY</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">PTR_MPI2_SEP_REPLY</span><span class="p">,</span>
  <span class="n">Mpi2SepReply_t</span><span class="p">,</span> <span class="n">MPI2_POINTER</span> <span class="n">pMpi2SepReply_t</span><span class="p">;</span>

<span class="cm">/* SlotStatus defines */</span>
<span class="cp">#define MPI2_SEP_REPLY_SLOTSTATUS_REMOVE_READY          (0x00040000)</span>
<span class="cp">#define MPI2_SEP_REPLY_SLOTSTATUS_IDENTIFY_REQUEST      (0x00020000)</span>
<span class="cp">#define MPI2_SEP_REPLY_SLOTSTATUS_REBUILD_STOPPED       (0x00000200)</span>
<span class="cp">#define MPI2_SEP_REPLY_SLOTSTATUS_HOT_SPARE             (0x00000100)</span>
<span class="cp">#define MPI2_SEP_REPLY_SLOTSTATUS_UNCONFIGURED          (0x00000080)</span>
<span class="cp">#define MPI2_SEP_REPLY_SLOTSTATUS_PREDICTED_FAULT       (0x00000040)</span>
<span class="cp">#define MPI2_SEP_REPLY_SLOTSTATUS_IN_CRITICAL_ARRAY     (0x00000010)</span>
<span class="cp">#define MPI2_SEP_REPLY_SLOTSTATUS_IN_FAILED_ARRAY       (0x00000008)</span>
<span class="cp">#define MPI2_SEP_REPLY_SLOTSTATUS_DEV_REBUILDING        (0x00000004)</span>
<span class="cp">#define MPI2_SEP_REPLY_SLOTSTATUS_DEV_FAULTY            (0x00000002)</span>
<span class="cp">#define MPI2_SEP_REPLY_SLOTSTATUS_NO_ERROR              (0x00000001)</span>


<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
