<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › scsi › qla2xxx › qla_fw.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>qla_fw.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * QLogic Fibre Channel HBA Driver</span>
<span class="cm"> * Copyright (c)  2003-2011 QLogic Corporation</span>
<span class="cm"> *</span>
<span class="cm"> * See LICENSE.qla2xxx for copyright and licensing details.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __QLA_FW_H</span>
<span class="cp">#define __QLA_FW_H</span>

<span class="cp">#define MBS_CHECKSUM_ERROR	0x4010</span>
<span class="cp">#define MBS_INVALID_PRODUCT_KEY	0x4020</span>

<span class="cm">/*</span>
<span class="cm"> * Firmware Options.</span>
<span class="cm"> */</span>
<span class="cp">#define FO1_ENABLE_PUREX	BIT_10</span>
<span class="cp">#define FO1_DISABLE_LED_CTRL	BIT_6</span>
<span class="cp">#define FO1_ENABLE_8016		BIT_0</span>
<span class="cp">#define FO2_ENABLE_SEL_CLASS2	BIT_5</span>
<span class="cp">#define FO3_NO_ABTS_ON_LINKDOWN	BIT_14</span>
<span class="cp">#define FO3_HOLD_STS_IOCB	BIT_12</span>

<span class="cm">/*</span>
<span class="cm"> * Port Database structure definition for ISP 24xx.</span>
<span class="cm"> */</span>
<span class="cp">#define PDO_FORCE_ADISC		BIT_1</span>
<span class="cp">#define PDO_FORCE_PLOGI		BIT_0</span>


<span class="cp">#define	PORT_DATABASE_24XX_SIZE		64</span>
<span class="k">struct</span> <span class="n">port_database_24xx</span> <span class="p">{</span>
	<span class="kt">uint16_t</span> <span class="n">flags</span><span class="p">;</span>
<span class="cp">#define PDF_TASK_RETRY_ID	BIT_14</span>
<span class="cp">#define PDF_FC_TAPE		BIT_7</span>
<span class="cp">#define PDF_ACK0_CAPABLE	BIT_6</span>
<span class="cp">#define PDF_FCP2_CONF		BIT_5</span>
<span class="cp">#define PDF_CLASS_2		BIT_4</span>
<span class="cp">#define PDF_HARD_ADDR		BIT_1</span>

	<span class="kt">uint8_t</span> <span class="n">current_login_state</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">last_login_state</span><span class="p">;</span>
<span class="cp">#define PDS_PLOGI_PENDING	0x03</span>
<span class="cp">#define PDS_PLOGI_COMPLETE	0x04</span>
<span class="cp">#define PDS_PRLI_PENDING	0x05</span>
<span class="cp">#define PDS_PRLI_COMPLETE	0x06</span>
<span class="cp">#define PDS_PORT_UNAVAILABLE	0x07</span>
<span class="cp">#define PDS_PRLO_PENDING	0x09</span>
<span class="cp">#define PDS_LOGO_PENDING	0x11</span>
<span class="cp">#define PDS_PRLI2_PENDING	0x12</span>

	<span class="kt">uint8_t</span> <span class="n">hard_address</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_1</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">sequence_id</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">port_timer</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">nport_handle</span><span class="p">;</span>			<span class="cm">/* N_PORT handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">receive_data_size</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_2</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">prli_svc_param_word_0</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* Big endian */</span>
						<span class="cm">/* Bits 15-0 of word 0 */</span>
	<span class="kt">uint8_t</span> <span class="n">prli_svc_param_word_3</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* Big endian */</span>
						<span class="cm">/* Bits 15-0 of word 3 */</span>

	<span class="kt">uint8_t</span> <span class="n">port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">node_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>

	<span class="kt">uint8_t</span> <span class="n">reserved_3</span><span class="p">[</span><span class="mi">24</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">vp_database_24xx</span> <span class="p">{</span>
	<span class="kt">uint16_t</span> <span class="n">vp_status</span><span class="p">;</span>
	<span class="kt">uint8_t</span>  <span class="n">options</span><span class="p">;</span>
	<span class="kt">uint8_t</span>  <span class="n">id</span><span class="p">;</span>
	<span class="kt">uint8_t</span>  <span class="n">port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint8_t</span>  <span class="n">node_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">port_id_low</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">port_id_high</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">nvram_24xx</span> <span class="p">{</span>
	<span class="cm">/* NVRAM header. */</span>
	<span class="kt">uint8_t</span> <span class="n">id</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">nvram_version</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_0</span><span class="p">;</span>

	<span class="cm">/* Firmware Initialization Control Block. */</span>
	<span class="kt">uint16_t</span> <span class="n">version</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_1</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">frame_payload_size</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">execution_throttle</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">exchange_count</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">hard_address</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">node_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>

	<span class="kt">uint16_t</span> <span class="n">login_retry_count</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">link_down_on_nos</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">interrupt_delay_timer</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">login_timeout</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">firmware_options_1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">firmware_options_2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">firmware_options_3</span><span class="p">;</span>

	<span class="cm">/* Offset 56. */</span>

	<span class="cm">/*</span>
<span class="cm">	 * BIT 0     = Control Enable</span>
<span class="cm">	 * BIT 1-15  =</span>
<span class="cm">	 *</span>
<span class="cm">	 * BIT 0-7   = Reserved</span>
<span class="cm">	 * BIT 8-10  = Output Swing 1G</span>
<span class="cm">	 * BIT 11-13 = Output Emphasis 1G</span>
<span class="cm">	 * BIT 14-15 = Reserved</span>
<span class="cm">	 *</span>
<span class="cm">	 * BIT 0-7   = Reserved</span>
<span class="cm">	 * BIT 8-10  = Output Swing 2G</span>
<span class="cm">	 * BIT 11-13 = Output Emphasis 2G</span>
<span class="cm">	 * BIT 14-15 = Reserved</span>
<span class="cm">	 *</span>
<span class="cm">	 * BIT 0-7   = Reserved</span>
<span class="cm">	 * BIT 8-10  = Output Swing 4G</span>
<span class="cm">	 * BIT 11-13 = Output Emphasis 4G</span>
<span class="cm">	 * BIT 14-15 = Reserved</span>
<span class="cm">	 */</span>
	<span class="kt">uint16_t</span> <span class="n">seriallink_options</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_2</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="cm">/* Offset 96. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_3</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="cm">/* PCIe table entries. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_4</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="cm">/* Offset 160. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_5</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="cm">/* Offset 192. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_6</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="cm">/* Offset 224. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_7</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="cm">/*</span>
<span class="cm">	 * BIT 0  = Enable spinup delay</span>
<span class="cm">	 * BIT 1  = Disable BIOS</span>
<span class="cm">	 * BIT 2  = Enable Memory Map BIOS</span>
<span class="cm">	 * BIT 3  = Enable Selectable Boot</span>
<span class="cm">	 * BIT 4  = Disable RISC code load</span>
<span class="cm">	 * BIT 5  = Disable Serdes</span>
<span class="cm">	 * BIT 6  =</span>
<span class="cm">	 * BIT 7  =</span>
<span class="cm">	 *</span>
<span class="cm">	 * BIT 8  =</span>
<span class="cm">	 * BIT 9  =</span>
<span class="cm">	 * BIT 10 = Enable lip full login</span>
<span class="cm">	 * BIT 11 = Enable target reset</span>
<span class="cm">	 * BIT 12 =</span>
<span class="cm">	 * BIT 13 =</span>
<span class="cm">	 * BIT 14 =</span>
<span class="cm">	 * BIT 15 = Enable alternate WWN</span>
<span class="cm">	 *</span>
<span class="cm">	 * BIT 16-31 =</span>
<span class="cm">	 */</span>
	<span class="kt">uint32_t</span> <span class="n">host_p</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">alternate_port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">alternate_node_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>

	<span class="kt">uint8_t</span> <span class="n">boot_port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">boot_lun_number</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_8</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">alt1_boot_port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">alt1_boot_lun_number</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_9</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">alt2_boot_port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">alt2_boot_lun_number</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_10</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">alt3_boot_port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">alt3_boot_lun_number</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_11</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * BIT 0 = Selective Login</span>
<span class="cm">	 * BIT 1 = Alt-Boot Enable</span>
<span class="cm">	 * BIT 2 = Reserved</span>
<span class="cm">	 * BIT 3 = Boot Order List</span>
<span class="cm">	 * BIT 4 = Reserved</span>
<span class="cm">	 * BIT 5 = Selective LUN</span>
<span class="cm">	 * BIT 6 = Reserved</span>
<span class="cm">	 * BIT 7-31 =</span>
<span class="cm">	 */</span>
	<span class="kt">uint32_t</span> <span class="n">efi_parameters</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">reset_delay</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_12</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_13</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">boot_id_number</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_14</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">max_luns_per_target</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_15</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">port_down_retry_count</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">link_down_timeout</span><span class="p">;</span>

	<span class="cm">/* FCode parameters. */</span>
	<span class="kt">uint16_t</span> <span class="n">fcode_parameter</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_16</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

	<span class="cm">/* Offset 352. */</span>
	<span class="kt">uint8_t</span> <span class="n">prev_drv_ver_major</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">prev_drv_ver_submajob</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">prev_drv_ver_minor</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">prev_drv_ver_subminor</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">prev_bios_ver_major</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">prev_bios_ver_minor</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">prev_efi_ver_major</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">prev_efi_ver_minor</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">prev_fw_ver_major</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">prev_fw_ver_minor</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">prev_fw_ver_subminor</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_17</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

	<span class="cm">/* Offset 384. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_18</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="cm">/* Offset 416. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_19</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="cm">/* Offset 448. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_20</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="cm">/* Offset 480. */</span>
	<span class="kt">uint8_t</span> <span class="n">model_name</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_21</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

	<span class="cm">/* Offset 500. */</span>
	<span class="cm">/* HW Parameter Block. */</span>
	<span class="kt">uint16_t</span> <span class="n">pcie_table_sig</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">pcie_table_offset</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">subsystem_vendor_id</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">subsystem_device_id</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">checksum</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ISP Initialization Control Block.</span>
<span class="cm"> * Little endian except where noted.</span>
<span class="cm"> */</span>
<span class="cp">#define	ICB_VERSION 1</span>
<span class="k">struct</span> <span class="n">init_cb_24xx</span> <span class="p">{</span>
	<span class="kt">uint16_t</span> <span class="n">version</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_1</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">frame_payload_size</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">execution_throttle</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">exchange_count</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">hard_address</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>		<span class="cm">/* Big endian. */</span>
	<span class="kt">uint8_t</span> <span class="n">node_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>		<span class="cm">/* Big endian. */</span>

	<span class="kt">uint16_t</span> <span class="n">response_q_inpointer</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">request_q_outpointer</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">login_retry_count</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">prio_request_q_outpointer</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">response_q_length</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">request_q_length</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">link_down_on_nos</span><span class="p">;</span>		<span class="cm">/* Milliseconds. */</span>

	<span class="kt">uint16_t</span> <span class="n">prio_request_q_length</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">request_q_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">response_q_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">prio_request_q_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

	<span class="kt">uint16_t</span> <span class="n">msix</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_2</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>

	<span class="kt">uint16_t</span> <span class="n">atio_q_inpointer</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">atio_q_length</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">atio_q_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

	<span class="kt">uint16_t</span> <span class="n">interrupt_delay_timer</span><span class="p">;</span>		<span class="cm">/* 100us increments. */</span>
	<span class="kt">uint16_t</span> <span class="n">login_timeout</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * BIT 0  = Enable Hard Loop Id</span>
<span class="cm">	 * BIT 1  = Enable Fairness</span>
<span class="cm">	 * BIT 2  = Enable Full-Duplex</span>
<span class="cm">	 * BIT 3  = Reserved</span>
<span class="cm">	 * BIT 4  = Enable Target Mode</span>
<span class="cm">	 * BIT 5  = Disable Initiator Mode</span>
<span class="cm">	 * BIT 6  = Reserved</span>
<span class="cm">	 * BIT 7  = Reserved</span>
<span class="cm">	 *</span>
<span class="cm">	 * BIT 8  = Reserved</span>
<span class="cm">	 * BIT 9  = Non Participating LIP</span>
<span class="cm">	 * BIT 10 = Descending Loop ID Search</span>
<span class="cm">	 * BIT 11 = Acquire Loop ID in LIPA</span>
<span class="cm">	 * BIT 12 = Reserved</span>
<span class="cm">	 * BIT 13 = Full Login after LIP</span>
<span class="cm">	 * BIT 14 = Node Name Option</span>
<span class="cm">	 * BIT 15-31 = Reserved</span>
<span class="cm">	 */</span>
	<span class="kt">uint32_t</span> <span class="n">firmware_options_1</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * BIT 0  = Operation Mode bit 0</span>
<span class="cm">	 * BIT 1  = Operation Mode bit 1</span>
<span class="cm">	 * BIT 2  = Operation Mode bit 2</span>
<span class="cm">	 * BIT 3  = Operation Mode bit 3</span>
<span class="cm">	 * BIT 4  = Connection Options bit 0</span>
<span class="cm">	 * BIT 5  = Connection Options bit 1</span>
<span class="cm">	 * BIT 6  = Connection Options bit 2</span>
<span class="cm">	 * BIT 7  = Enable Non part on LIHA failure</span>
<span class="cm">	 *</span>
<span class="cm">	 * BIT 8  = Enable Class 2</span>
<span class="cm">	 * BIT 9  = Enable ACK0</span>
<span class="cm">	 * BIT 10 = Reserved</span>
<span class="cm">	 * BIT 11 = Enable FC-SP Security</span>
<span class="cm">	 * BIT 12 = FC Tape Enable</span>
<span class="cm">	 * BIT 13 = Reserved</span>
<span class="cm">	 * BIT 14 = Enable Target PRLI Control</span>
<span class="cm">	 * BIT 15-31 = Reserved</span>
<span class="cm">	 */</span>
	<span class="kt">uint32_t</span> <span class="n">firmware_options_2</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * BIT 0  = Reserved</span>
<span class="cm">	 * BIT 1  = Soft ID only</span>
<span class="cm">	 * BIT 2  = Reserved</span>
<span class="cm">	 * BIT 3  = Reserved</span>
<span class="cm">	 * BIT 4  = FCP RSP Payload bit 0</span>
<span class="cm">	 * BIT 5  = FCP RSP Payload bit 1</span>
<span class="cm">	 * BIT 6  = Enable Receive Out-of-Order data frame handling</span>
<span class="cm">	 * BIT 7  = Disable Automatic PLOGI on Local Loop</span>
<span class="cm">	 *</span>
<span class="cm">	 * BIT 8  = Reserved</span>
<span class="cm">	 * BIT 9  = Enable Out-of-Order FCP_XFER_RDY relative offset handling</span>
<span class="cm">	 * BIT 10 = Reserved</span>
<span class="cm">	 * BIT 11 = Reserved</span>
<span class="cm">	 * BIT 12 = Reserved</span>
<span class="cm">	 * BIT 13 = Data Rate bit 0</span>
<span class="cm">	 * BIT 14 = Data Rate bit 1</span>
<span class="cm">	 * BIT 15 = Data Rate bit 2</span>
<span class="cm">	 * BIT 16 = Enable 75 ohm Termination Select</span>
<span class="cm">	 * BIT 17-31 = Reserved</span>
<span class="cm">	 */</span>
	<span class="kt">uint32_t</span> <span class="n">firmware_options_3</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">qos</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rid</span><span class="p">;</span>
	<span class="kt">uint8_t</span>  <span class="n">reserved_3</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ISP queue - command entry structure definition.</span>
<span class="cm"> */</span>
<span class="cp">#define COMMAND_TYPE_6	0x48		</span><span class="cm">/* Command Type 6 entry */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">cmd_type_6</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">sys_define</span><span class="p">;</span>		<span class="cm">/* System defined. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">nport_handle</span><span class="p">;</span>		<span class="cm">/* N_PORT handle. */</span>
	<span class="kt">uint16_t</span> <span class="n">timeout</span><span class="p">;</span>		<span class="cm">/* Command timeout. */</span>

	<span class="kt">uint16_t</span> <span class="n">dseg_count</span><span class="p">;</span>		<span class="cm">/* Data segment count. */</span>

	<span class="kt">uint16_t</span> <span class="n">fcp_rsp_dsd_len</span><span class="p">;</span>	<span class="cm">/* FCP_RSP DSD length. */</span>

	<span class="k">struct</span> <span class="n">scsi_lun</span> <span class="n">lun</span><span class="p">;</span>		<span class="cm">/* FCP LUN (BE). */</span>

	<span class="kt">uint16_t</span> <span class="n">control_flags</span><span class="p">;</span>		<span class="cm">/* Control flags. */</span>
<span class="cp">#define CF_DIF_SEG_DESCR_ENABLE		BIT_3</span>
<span class="cp">#define CF_DATA_SEG_DESCR_ENABLE	BIT_2</span>
<span class="cp">#define CF_READ_DATA			BIT_1</span>
<span class="cp">#define CF_WRITE_DATA			BIT_0</span>

	<span class="kt">uint16_t</span> <span class="n">fcp_cmnd_dseg_len</span><span class="p">;</span>		<span class="cm">/* Data segment length. */</span>
	<span class="kt">uint32_t</span> <span class="n">fcp_cmnd_dseg_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* Data segment address. */</span>

	<span class="kt">uint32_t</span> <span class="n">fcp_rsp_dseg_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* Data segment address. */</span>

	<span class="kt">uint32_t</span> <span class="n">byte_count</span><span class="p">;</span>		<span class="cm">/* Total byte count. */</span>

	<span class="kt">uint8_t</span> <span class="n">port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>		<span class="cm">/* PortID of destination port. */</span>
	<span class="kt">uint8_t</span> <span class="n">vp_index</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">fcp_data_dseg_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* Data segment address. */</span>
	<span class="kt">uint32_t</span> <span class="n">fcp_data_dseg_len</span><span class="p">;</span>		<span class="cm">/* Data segment length. */</span>
<span class="p">};</span>

<span class="cp">#define COMMAND_TYPE_7	0x18		</span><span class="cm">/* Command Type 7 entry */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">cmd_type_7</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">sys_define</span><span class="p">;</span>		<span class="cm">/* System defined. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">nport_handle</span><span class="p">;</span>		<span class="cm">/* N_PORT handle. */</span>
	<span class="kt">uint16_t</span> <span class="n">timeout</span><span class="p">;</span>		<span class="cm">/* Command timeout. */</span>
<span class="cp">#define FW_MAX_TIMEOUT		0x1999</span>

	<span class="kt">uint16_t</span> <span class="n">dseg_count</span><span class="p">;</span>		<span class="cm">/* Data segment count. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_1</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">scsi_lun</span> <span class="n">lun</span><span class="p">;</span>		<span class="cm">/* FCP LUN (BE). */</span>

	<span class="kt">uint16_t</span> <span class="n">task_mgmt_flags</span><span class="p">;</span>	<span class="cm">/* Task management flags. */</span>
<span class="cp">#define TMF_CLEAR_ACA		BIT_14</span>
<span class="cp">#define TMF_TARGET_RESET	BIT_13</span>
<span class="cp">#define TMF_LUN_RESET		BIT_12</span>
<span class="cp">#define TMF_CLEAR_TASK_SET	BIT_10</span>
<span class="cp">#define TMF_ABORT_TASK_SET	BIT_9</span>
<span class="cp">#define TMF_DSD_LIST_ENABLE	BIT_2</span>
<span class="cp">#define TMF_READ_DATA		BIT_1</span>
<span class="cp">#define TMF_WRITE_DATA		BIT_0</span>

	<span class="kt">uint8_t</span> <span class="n">task</span><span class="p">;</span>
<span class="cp">#define TSK_SIMPLE		0</span>
<span class="cp">#define TSK_HEAD_OF_QUEUE	1</span>
<span class="cp">#define TSK_ORDERED		2</span>
<span class="cp">#define TSK_ACA			4</span>
<span class="cp">#define TSK_UNTAGGED		5</span>

	<span class="kt">uint8_t</span> <span class="n">crn</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">fcp_cdb</span><span class="p">[</span><span class="n">MAX_CMDSZ</span><span class="p">];</span> 	<span class="cm">/* SCSI command words. */</span>
	<span class="kt">uint32_t</span> <span class="n">byte_count</span><span class="p">;</span>		<span class="cm">/* Total byte count. */</span>

	<span class="kt">uint8_t</span> <span class="n">port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>		<span class="cm">/* PortID of destination port. */</span>
	<span class="kt">uint8_t</span> <span class="n">vp_index</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">dseg_0_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* Data segment 0 address. */</span>
	<span class="kt">uint32_t</span> <span class="n">dseg_0_len</span><span class="p">;</span>		<span class="cm">/* Data segment 0 length. */</span>
<span class="p">};</span>

<span class="cp">#define COMMAND_TYPE_CRC_2	0x6A	</span><span class="cm">/* Command Type CRC_2 (Type 6)</span>
<span class="cm">					 * (T10-DIF) */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">cmd_type_crc_2</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">sys_define</span><span class="p">;</span>		<span class="cm">/* System defined. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">nport_handle</span><span class="p">;</span>		<span class="cm">/* N_PORT handle. */</span>
	<span class="kt">uint16_t</span> <span class="n">timeout</span><span class="p">;</span>		<span class="cm">/* Command timeout. */</span>

	<span class="kt">uint16_t</span> <span class="n">dseg_count</span><span class="p">;</span>		<span class="cm">/* Data segment count. */</span>

	<span class="kt">uint16_t</span> <span class="n">fcp_rsp_dseg_len</span><span class="p">;</span>	<span class="cm">/* FCP_RSP DSD length. */</span>

	<span class="k">struct</span> <span class="n">scsi_lun</span> <span class="n">lun</span><span class="p">;</span>		<span class="cm">/* FCP LUN (BE). */</span>

	<span class="kt">uint16_t</span> <span class="n">control_flags</span><span class="p">;</span>		<span class="cm">/* Control flags. */</span>

	<span class="kt">uint16_t</span> <span class="n">fcp_cmnd_dseg_len</span><span class="p">;</span>		<span class="cm">/* Data segment length. */</span>
	<span class="kt">uint32_t</span> <span class="n">fcp_cmnd_dseg_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* Data segment address. */</span>

	<span class="kt">uint32_t</span> <span class="n">fcp_rsp_dseg_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* Data segment address. */</span>

	<span class="kt">uint32_t</span> <span class="n">byte_count</span><span class="p">;</span>		<span class="cm">/* Total byte count. */</span>

	<span class="kt">uint8_t</span> <span class="n">port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>		<span class="cm">/* PortID of destination port. */</span>
	<span class="kt">uint8_t</span> <span class="n">vp_index</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">crc_context_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* Data segment address. */</span>
	<span class="kt">uint16_t</span> <span class="n">crc_context_len</span><span class="p">;</span>		<span class="cm">/* Data segment length. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_1</span><span class="p">;</span>			<span class="cm">/* MUST be set to 0. */</span>
<span class="p">};</span>


<span class="cm">/*</span>
<span class="cm"> * ISP queue - status entry structure definition.</span>
<span class="cm"> */</span>
<span class="cp">#define	STATUS_TYPE	0x03		</span><span class="cm">/* Status entry. */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">sts_entry_24xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">sys_define</span><span class="p">;</span>		<span class="cm">/* System defined. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">comp_status</span><span class="p">;</span>		<span class="cm">/* Completion status. */</span>
	<span class="kt">uint16_t</span> <span class="n">ox_id</span><span class="p">;</span>			<span class="cm">/* OX_ID used by the firmware. */</span>

	<span class="kt">uint32_t</span> <span class="n">residual_len</span><span class="p">;</span>		<span class="cm">/* FW calc residual transfer length. */</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_1</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">state_flags</span><span class="p">;</span>		<span class="cm">/* State flags. */</span>
<span class="cp">#define SF_TRANSFERRED_DATA	BIT_11</span>
<span class="cp">#define SF_FCP_RSP_DMA		BIT_0</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_2</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">scsi_status</span><span class="p">;</span>		<span class="cm">/* SCSI status. */</span>
<span class="cp">#define SS_CONFIRMATION_REQ		BIT_12</span>

	<span class="kt">uint32_t</span> <span class="n">rsp_residual_count</span><span class="p">;</span>	<span class="cm">/* FCP RSP residual count. */</span>

	<span class="kt">uint32_t</span> <span class="n">sense_len</span><span class="p">;</span>		<span class="cm">/* FCP SENSE length. */</span>
	<span class="kt">uint32_t</span> <span class="n">rsp_data_len</span><span class="p">;</span>		<span class="cm">/* FCP response data length. */</span>
	<span class="kt">uint8_t</span> <span class="n">data</span><span class="p">[</span><span class="mi">28</span><span class="p">];</span>		<span class="cm">/* FCP response/sense information. */</span>
	<span class="cm">/*</span>
<span class="cm">	 * If DIF Error is set in comp_status, these additional fields are</span>
<span class="cm">	 * defined:</span>
<span class="cm">	 *</span>
<span class="cm">	 * !!! NOTE: Firmware sends expected/actual DIF data in big endian</span>
<span class="cm">	 * format; but all of the &quot;data&quot; field gets swab32-d in the beginning</span>
<span class="cm">	 * of qla2x00_status_entry().</span>
<span class="cm">	 *</span>
<span class="cm">	 * &amp;data[10] : uint8_t report_runt_bg[2];	- computed guard</span>
<span class="cm">	 * &amp;data[12] : uint8_t actual_dif[8];		- DIF Data received</span>
<span class="cm">	 * &amp;data[20] : uint8_t expected_dif[8];		- DIF Data computed</span>
<span class="cm">	*/</span>
<span class="p">};</span>


<span class="cm">/*</span>
<span class="cm"> * Status entry completion status</span>
<span class="cm"> */</span>
<span class="cp">#define CS_DATA_REASSEMBLY_ERROR 0x11	</span><span class="cm">/* Data Reassembly Error.. */</span><span class="cp"></span>
<span class="cp">#define CS_ABTS_BY_TARGET	0x13	</span><span class="cm">/* Target send ABTS to abort IOCB. */</span><span class="cp"></span>
<span class="cp">#define CS_FW_RESOURCE		0x2C	</span><span class="cm">/* Firmware Resource Unavailable. */</span><span class="cp"></span>
<span class="cp">#define CS_TASK_MGMT_OVERRUN	0x30	</span><span class="cm">/* Task management overrun (8+). */</span><span class="cp"></span>
<span class="cp">#define CS_ABORT_BY_TARGET	0x47	</span><span class="cm">/* Abort By Target. */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * ISP queue - marker entry structure definition.</span>
<span class="cm"> */</span>
<span class="cp">#define MARKER_TYPE	0x04		</span><span class="cm">/* Marker entry. */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">mrk_entry_24xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">handle_count</span><span class="p">;</span>		<span class="cm">/* Handle count. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">nport_handle</span><span class="p">;</span>		<span class="cm">/* N_PORT handle. */</span>

	<span class="kt">uint8_t</span> <span class="n">modifier</span><span class="p">;</span>		<span class="cm">/* Modifier (7-0). */</span>
<span class="cp">#define MK_SYNC_ID_LUN	0		</span><span class="cm">/* Synchronize ID/LUN */</span><span class="cp"></span>
<span class="cp">#define MK_SYNC_ID	1		</span><span class="cm">/* Synchronize ID */</span><span class="cp"></span>
<span class="cp">#define MK_SYNC_ALL	2		</span><span class="cm">/* Synchronize all ID/LUN */</span><span class="cp"></span>
	<span class="kt">uint8_t</span> <span class="n">reserved_1</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">reserved_2</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">vp_index</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_3</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">lun</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>			<span class="cm">/* FCP LUN (BE). */</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_4</span><span class="p">[</span><span class="mi">40</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ISP queue - CT Pass-Through entry structure definition.</span>
<span class="cm"> */</span>
<span class="cp">#define CT_IOCB_TYPE		0x29	</span><span class="cm">/* CT Pass-Through IOCB entry */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">ct_entry_24xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">sys_define</span><span class="p">;</span>		<span class="cm">/* System Defined. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">comp_status</span><span class="p">;</span>		<span class="cm">/* Completion status. */</span>

	<span class="kt">uint16_t</span> <span class="n">nport_handle</span><span class="p">;</span>		<span class="cm">/* N_PORT handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">cmd_dsd_count</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">vp_index</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_1</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">timeout</span><span class="p">;</span>		<span class="cm">/* Command timeout. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_2</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">rsp_dsd_count</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">reserved_3</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>

	<span class="kt">uint32_t</span> <span class="n">rsp_byte_count</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cmd_byte_count</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">dseg_0_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* Data segment 0 address. */</span>
	<span class="kt">uint32_t</span> <span class="n">dseg_0_len</span><span class="p">;</span>		<span class="cm">/* Data segment 0 length. */</span>
	<span class="kt">uint32_t</span> <span class="n">dseg_1_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* Data segment 1 address. */</span>
	<span class="kt">uint32_t</span> <span class="n">dseg_1_len</span><span class="p">;</span>		<span class="cm">/* Data segment 1 length. */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ISP queue - ELS Pass-Through entry structure definition.</span>
<span class="cm"> */</span>
<span class="cp">#define ELS_IOCB_TYPE		0x53	</span><span class="cm">/* ELS Pass-Through IOCB entry */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">els_entry_24xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">sys_define</span><span class="p">;</span>		<span class="cm">/* System Defined. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_1</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">nport_handle</span><span class="p">;</span>		<span class="cm">/* N_PORT handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">tx_dsd_count</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">vp_index</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">sof_type</span><span class="p">;</span>
<span class="cp">#define EST_SOFI3		(1 &lt;&lt; 4)</span>
<span class="cp">#define EST_SOFI2		(3 &lt;&lt; 4)</span>

	<span class="kt">uint32_t</span> <span class="n">rx_xchg_address</span><span class="p">;</span>	<span class="cm">/* Receive exchange address. */</span>
	<span class="kt">uint16_t</span> <span class="n">rx_dsd_count</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_2</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_3</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_4</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">control_flags</span><span class="p">;</span>		<span class="cm">/* Control flags. */</span>
<span class="cp">#define ECF_PAYLOAD_DESCR_MASK	(BIT_15|BIT_14|BIT_13)</span>
<span class="cp">#define EPD_ELS_COMMAND		(0 &lt;&lt; 13)</span>
<span class="cp">#define EPD_ELS_ACC		(1 &lt;&lt; 13)</span>
<span class="cp">#define EPD_ELS_RJT		(2 &lt;&lt; 13)</span>
<span class="cp">#define EPD_RX_XCHG		(3 &lt;&lt; 13)</span>
<span class="cp">#define ECF_CLR_PASSTHRU_PEND	BIT_12</span>
<span class="cp">#define ECF_INCL_FRAME_HDR	BIT_11</span>

	<span class="kt">uint32_t</span> <span class="n">rx_byte_count</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">tx_byte_count</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">tx_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>		<span class="cm">/* Data segment 0 address. */</span>
	<span class="kt">uint32_t</span> <span class="n">tx_len</span><span class="p">;</span>		<span class="cm">/* Data segment 0 length. */</span>
	<span class="kt">uint32_t</span> <span class="n">rx_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>		<span class="cm">/* Data segment 1 address. */</span>
	<span class="kt">uint32_t</span> <span class="n">rx_len</span><span class="p">;</span>		<span class="cm">/* Data segment 1 length. */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">els_sts_entry_24xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">sys_define</span><span class="p">;</span>		<span class="cm">/* System Defined. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">comp_status</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">nport_handle</span><span class="p">;</span>		<span class="cm">/* N_PORT handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_1</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">vp_index</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">sof_type</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">rx_xchg_address</span><span class="p">;</span>	<span class="cm">/* Receive exchange address. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_2</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_3</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_4</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_5</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">control_flags</span><span class="p">;</span>		<span class="cm">/* Control flags. */</span>
	<span class="kt">uint32_t</span> <span class="n">total_byte_count</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">error_subcode_1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">error_subcode_2</span><span class="p">;</span>
<span class="p">};</span>
<span class="cm">/*</span>
<span class="cm"> * ISP queue - Mailbox Command entry structure definition.</span>
<span class="cm"> */</span>
<span class="cp">#define MBX_IOCB_TYPE	0x39</span>
<span class="k">struct</span> <span class="n">mbx_entry_24xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">handle_count</span><span class="p">;</span>		<span class="cm">/* Handle count. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">mbx</span><span class="p">[</span><span class="mi">28</span><span class="p">];</span>
<span class="p">};</span>


<span class="cp">#define LOGINOUT_PORT_IOCB_TYPE	0x52	</span><span class="cm">/* Login/Logout Port entry. */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">logio_entry_24xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">sys_define</span><span class="p">;</span>		<span class="cm">/* System defined. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">comp_status</span><span class="p">;</span>		<span class="cm">/* Completion status. */</span>
<span class="cp">#define CS_LOGIO_ERROR		0x31	</span><span class="cm">/* Login/Logout IOCB error. */</span><span class="cp"></span>

	<span class="kt">uint16_t</span> <span class="n">nport_handle</span><span class="p">;</span>		<span class="cm">/* N_PORT handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">control_flags</span><span class="p">;</span>		<span class="cm">/* Control flags. */</span>
					<span class="cm">/* Modifiers. */</span>
<span class="cp">#define LCF_INCLUDE_SNS		BIT_10	</span><span class="cm">/* Include SNS (FFFFFC) during LOGO. */</span><span class="cp"></span>
<span class="cp">#define LCF_FCP2_OVERRIDE	BIT_9	</span><span class="cm">/* Set/Reset word 3 of PRLI. */</span><span class="cp"></span>
<span class="cp">#define LCF_CLASS_2		BIT_8	</span><span class="cm">/* Enable class 2 during PLOGI. */</span><span class="cp"></span>
<span class="cp">#define LCF_FREE_NPORT		BIT_7	</span><span class="cm">/* Release NPORT handle after LOGO. */</span><span class="cp"></span>
<span class="cp">#define LCF_EXPL_LOGO		BIT_6	</span><span class="cm">/* Perform an explicit LOGO. */</span><span class="cp"></span>
<span class="cp">#define LCF_SKIP_PRLI		BIT_5	</span><span class="cm">/* Skip PRLI after PLOGI. */</span><span class="cp"></span>
<span class="cp">#define LCF_IMPL_LOGO_ALL	BIT_5	</span><span class="cm">/* Implicit LOGO to all ports. */</span><span class="cp"></span>
<span class="cp">#define LCF_COND_PLOGI		BIT_4	</span><span class="cm">/* PLOGI only if not logged-in. */</span><span class="cp"></span>
<span class="cp">#define LCF_IMPL_LOGO		BIT_4	</span><span class="cm">/* Perform an implicit LOGO. */</span><span class="cp"></span>
<span class="cp">#define LCF_IMPL_PRLO		BIT_4	</span><span class="cm">/* Perform an implicit PRLO. */</span><span class="cp"></span>
					<span class="cm">/* Commands. */</span>
<span class="cp">#define LCF_COMMAND_PLOGI	0x00	</span><span class="cm">/* PLOGI. */</span><span class="cp"></span>
<span class="cp">#define LCF_COMMAND_PRLI	0x01	</span><span class="cm">/* PRLI. */</span><span class="cp"></span>
<span class="cp">#define LCF_COMMAND_PDISC	0x02	</span><span class="cm">/* PDISC. */</span><span class="cp"></span>
<span class="cp">#define LCF_COMMAND_ADISC	0x03	</span><span class="cm">/* ADISC. */</span><span class="cp"></span>
<span class="cp">#define LCF_COMMAND_LOGO	0x08	</span><span class="cm">/* LOGO. */</span><span class="cp"></span>
<span class="cp">#define LCF_COMMAND_PRLO	0x09	</span><span class="cm">/* PRLO. */</span><span class="cp"></span>
<span class="cp">#define LCF_COMMAND_TPRLO	0x0A	</span><span class="cm">/* TPRLO. */</span><span class="cp"></span>

	<span class="kt">uint8_t</span> <span class="n">vp_index</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_1</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>		<span class="cm">/* PortID of destination port. */</span>

	<span class="kt">uint8_t</span> <span class="n">rsp_size</span><span class="p">;</span>		<span class="cm">/* Response size in 32bit words. */</span>

	<span class="kt">uint32_t</span> <span class="n">io_parameter</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>	<span class="cm">/* General I/O parameters. */</span>
<span class="cp">#define LSC_SCODE_NOLINK	0x01</span>
<span class="cp">#define LSC_SCODE_NOIOCB	0x02</span>
<span class="cp">#define LSC_SCODE_NOXCB		0x03</span>
<span class="cp">#define LSC_SCODE_CMD_FAILED	0x04</span>
<span class="cp">#define LSC_SCODE_NOFABRIC	0x05</span>
<span class="cp">#define LSC_SCODE_FW_NOT_READY	0x07</span>
<span class="cp">#define LSC_SCODE_NOT_LOGGED_IN	0x09</span>
<span class="cp">#define LSC_SCODE_NOPCB		0x0A</span>

<span class="cp">#define LSC_SCODE_ELS_REJECT	0x18</span>
<span class="cp">#define LSC_SCODE_CMD_PARAM_ERR	0x19</span>
<span class="cp">#define LSC_SCODE_PORTID_USED	0x1A</span>
<span class="cp">#define LSC_SCODE_NPORT_USED	0x1B</span>
<span class="cp">#define LSC_SCODE_NONPORT	0x1C</span>
<span class="cp">#define LSC_SCODE_LOGGED_IN	0x1D</span>
<span class="cp">#define LSC_SCODE_NOFLOGI_ACC	0x1F</span>
<span class="p">};</span>

<span class="cp">#define TSK_MGMT_IOCB_TYPE	0x14</span>
<span class="k">struct</span> <span class="n">tsk_mgmt_entry</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">handle_count</span><span class="p">;</span>		<span class="cm">/* Handle count. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">nport_handle</span><span class="p">;</span>		<span class="cm">/* N_PORT handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_1</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">delay</span><span class="p">;</span>			<span class="cm">/* Activity delay in seconds. */</span>

	<span class="kt">uint16_t</span> <span class="n">timeout</span><span class="p">;</span>		<span class="cm">/* Command timeout. */</span>

	<span class="k">struct</span> <span class="n">scsi_lun</span> <span class="n">lun</span><span class="p">;</span>		<span class="cm">/* FCP LUN (BE). */</span>

	<span class="kt">uint32_t</span> <span class="n">control_flags</span><span class="p">;</span>		<span class="cm">/* Control Flags. */</span>
<span class="cp">#define TCF_NOTMCMD_TO_TARGET	BIT_31</span>
<span class="cp">#define TCF_LUN_RESET		BIT_4</span>
<span class="cp">#define TCF_ABORT_TASK_SET	BIT_3</span>
<span class="cp">#define TCF_CLEAR_TASK_SET	BIT_2</span>
<span class="cp">#define TCF_TARGET_RESET	BIT_1</span>
<span class="cp">#define TCF_CLEAR_ACA		BIT_0</span>

	<span class="kt">uint8_t</span> <span class="n">reserved_2</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>

	<span class="kt">uint8_t</span> <span class="n">port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>		<span class="cm">/* PortID of destination port. */</span>
	<span class="kt">uint8_t</span> <span class="n">vp_index</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">reserved_3</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define ABORT_IOCB_TYPE	0x33</span>
<span class="k">struct</span> <span class="n">abort_entry_24xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">handle_count</span><span class="p">;</span>		<span class="cm">/* Handle count. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">nport_handle</span><span class="p">;</span>		<span class="cm">/* N_PORT handle. */</span>
					<span class="cm">/* or Completion status. */</span>

	<span class="kt">uint16_t</span> <span class="n">options</span><span class="p">;</span>		<span class="cm">/* Options. */</span>
<span class="cp">#define AOF_NO_ABTS		BIT_0	</span><span class="cm">/* Do not send any ABTS. */</span><span class="cp"></span>

	<span class="kt">uint32_t</span> <span class="n">handle_to_abort</span><span class="p">;</span>	<span class="cm">/* System handle to abort. */</span>

	<span class="kt">uint16_t</span> <span class="n">req_que_no</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_1</span><span class="p">[</span><span class="mi">30</span><span class="p">];</span>

	<span class="kt">uint8_t</span> <span class="n">port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>		<span class="cm">/* PortID of destination port. */</span>
	<span class="kt">uint8_t</span> <span class="n">vp_index</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">reserved_2</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ISP I/O Register Set structure definitions.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">device_reg_24xx</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">flash_addr</span><span class="p">;</span>		<span class="cm">/* Flash/NVRAM BIOS address. */</span>
<span class="cp">#define FARX_DATA_FLAG	BIT_31</span>
<span class="cp">#define FARX_ACCESS_FLASH_CONF	0x7FFD0000</span>
<span class="cp">#define FARX_ACCESS_FLASH_DATA	0x7FF00000</span>
<span class="cp">#define FARX_ACCESS_NVRAM_CONF	0x7FFF0000</span>
<span class="cp">#define FARX_ACCESS_NVRAM_DATA	0x7FFE0000</span>

<span class="cp">#define FA_NVRAM_FUNC0_ADDR	0x80</span>
<span class="cp">#define FA_NVRAM_FUNC1_ADDR	0x180</span>

<span class="cp">#define FA_NVRAM_VPD_SIZE	0x200</span>
<span class="cp">#define FA_NVRAM_VPD0_ADDR	0x00</span>
<span class="cp">#define FA_NVRAM_VPD1_ADDR	0x100</span>

<span class="cp">#define FA_BOOT_CODE_ADDR	0x00000</span>
					<span class="cm">/*</span>
<span class="cm">					 * RISC code begins at offset 512KB</span>
<span class="cm">					 * within flash. Consisting of two</span>
<span class="cm">					 * contiguous RISC code segments.</span>
<span class="cm">					 */</span>
<span class="cp">#define FA_RISC_CODE_ADDR	0x20000</span>
<span class="cp">#define FA_RISC_CODE_SEGMENTS	2</span>

<span class="cp">#define FA_FLASH_DESCR_ADDR_24	0x11000</span>
<span class="cp">#define FA_FLASH_LAYOUT_ADDR_24	0x11400</span>
<span class="cp">#define FA_NPIV_CONF0_ADDR_24	0x16000</span>
<span class="cp">#define FA_NPIV_CONF1_ADDR_24	0x17000</span>

<span class="cp">#define FA_FW_AREA_ADDR		0x40000</span>
<span class="cp">#define FA_VPD_NVRAM_ADDR	0x48000</span>
<span class="cp">#define FA_FEATURE_ADDR		0x4C000</span>
<span class="cp">#define FA_FLASH_DESCR_ADDR	0x50000</span>
<span class="cp">#define FA_FLASH_LAYOUT_ADDR	0x50400</span>
<span class="cp">#define FA_HW_EVENT0_ADDR	0x54000</span>
<span class="cp">#define FA_HW_EVENT1_ADDR	0x54400</span>
<span class="cp">#define FA_HW_EVENT_SIZE	0x200</span>
<span class="cp">#define FA_HW_EVENT_ENTRY_SIZE	4</span>
<span class="cp">#define FA_NPIV_CONF0_ADDR	0x5C000</span>
<span class="cp">#define FA_NPIV_CONF1_ADDR	0x5D000</span>
<span class="cp">#define FA_FCP_PRIO0_ADDR	0x10000</span>
<span class="cp">#define FA_FCP_PRIO1_ADDR	0x12000</span>

<span class="cm">/*</span>
<span class="cm"> * Flash Error Log Event Codes.</span>
<span class="cm"> */</span>
<span class="cp">#define HW_EVENT_RESET_ERR	0xF00B</span>
<span class="cp">#define HW_EVENT_ISP_ERR	0xF020</span>
<span class="cp">#define HW_EVENT_PARITY_ERR	0xF022</span>
<span class="cp">#define HW_EVENT_NVRAM_CHKSUM_ERR	0xF023</span>
<span class="cp">#define HW_EVENT_FLASH_FW_ERR	0xF024</span>

	<span class="kt">uint32_t</span> <span class="n">flash_data</span><span class="p">;</span>		<span class="cm">/* Flash/NVRAM BIOS data. */</span>

	<span class="kt">uint32_t</span> <span class="n">ctrl_status</span><span class="p">;</span>		<span class="cm">/* Control/Status. */</span>
<span class="cp">#define CSRX_FLASH_ACCESS_ERROR	BIT_18	</span><span class="cm">/* Flash/NVRAM Access Error. */</span><span class="cp"></span>
<span class="cp">#define CSRX_DMA_ACTIVE		BIT_17	</span><span class="cm">/* DMA Active status. */</span><span class="cp"></span>
<span class="cp">#define CSRX_DMA_SHUTDOWN	BIT_16	</span><span class="cm">/* DMA Shutdown control status. */</span><span class="cp"></span>
<span class="cp">#define CSRX_FUNCTION		BIT_15	</span><span class="cm">/* Function number. */</span><span class="cp"></span>
					<span class="cm">/* PCI-X Bus Mode. */</span>
<span class="cp">#define CSRX_PCIX_BUS_MODE_MASK	(BIT_11|BIT_10|BIT_9|BIT_8)</span>
<span class="cp">#define PBM_PCI_33MHZ		(0 &lt;&lt; 8)</span>
<span class="cp">#define PBM_PCIX_M1_66MHZ	(1 &lt;&lt; 8)</span>
<span class="cp">#define PBM_PCIX_M1_100MHZ	(2 &lt;&lt; 8)</span>
<span class="cp">#define PBM_PCIX_M1_133MHZ	(3 &lt;&lt; 8)</span>
<span class="cp">#define PBM_PCIX_M2_66MHZ	(5 &lt;&lt; 8)</span>
<span class="cp">#define PBM_PCIX_M2_100MHZ	(6 &lt;&lt; 8)</span>
<span class="cp">#define PBM_PCIX_M2_133MHZ	(7 &lt;&lt; 8)</span>
<span class="cp">#define PBM_PCI_66MHZ		(8 &lt;&lt; 8)</span>
					<span class="cm">/* Max Write Burst byte count. */</span>
<span class="cp">#define CSRX_MAX_WRT_BURST_MASK	(BIT_5|BIT_4)</span>
<span class="cp">#define MWB_512_BYTES		(0 &lt;&lt; 4)</span>
<span class="cp">#define MWB_1024_BYTES		(1 &lt;&lt; 4)</span>
<span class="cp">#define MWB_2048_BYTES		(2 &lt;&lt; 4)</span>
<span class="cp">#define MWB_4096_BYTES		(3 &lt;&lt; 4)</span>

<span class="cp">#define CSRX_64BIT_SLOT		BIT_2	</span><span class="cm">/* PCI 64-Bit Bus Slot. */</span><span class="cp"></span>
<span class="cp">#define CSRX_FLASH_ENABLE	BIT_1	</span><span class="cm">/* Flash BIOS Read/Write enable. */</span><span class="cp"></span>
<span class="cp">#define CSRX_ISP_SOFT_RESET	BIT_0	</span><span class="cm">/* ISP soft reset. */</span><span class="cp"></span>

	<span class="kt">uint32_t</span> <span class="n">ictrl</span><span class="p">;</span>			<span class="cm">/* Interrupt control. */</span>
<span class="cp">#define ICRX_EN_RISC_INT	BIT_3	</span><span class="cm">/* Enable RISC interrupts on PCI. */</span><span class="cp"></span>

	<span class="kt">uint32_t</span> <span class="n">istatus</span><span class="p">;</span>		<span class="cm">/* Interrupt status. */</span>
<span class="cp">#define ISRX_RISC_INT		BIT_3	</span><span class="cm">/* RISC interrupt. */</span><span class="cp"></span>

	<span class="kt">uint32_t</span> <span class="n">unused_1</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>		<span class="cm">/* Gap. */</span>

					<span class="cm">/* Request Queue. */</span>
	<span class="kt">uint32_t</span> <span class="n">req_q_in</span><span class="p">;</span>		<span class="cm">/*  In-Pointer. */</span>
	<span class="kt">uint32_t</span> <span class="n">req_q_out</span><span class="p">;</span>		<span class="cm">/*  Out-Pointer. */</span>
					<span class="cm">/* Response Queue. */</span>
	<span class="kt">uint32_t</span> <span class="n">rsp_q_in</span><span class="p">;</span>		<span class="cm">/*  In-Pointer. */</span>
	<span class="kt">uint32_t</span> <span class="n">rsp_q_out</span><span class="p">;</span>		<span class="cm">/*  Out-Pointer. */</span>
					<span class="cm">/* Priority Request Queue. */</span>
	<span class="kt">uint32_t</span> <span class="n">preq_q_in</span><span class="p">;</span>		<span class="cm">/*  In-Pointer. */</span>
	<span class="kt">uint32_t</span> <span class="n">preq_q_out</span><span class="p">;</span>		<span class="cm">/*  Out-Pointer. */</span>

	<span class="kt">uint32_t</span> <span class="n">unused_2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>		<span class="cm">/* Gap. */</span>

					<span class="cm">/* ATIO Queue. */</span>
	<span class="kt">uint32_t</span> <span class="n">atio_q_in</span><span class="p">;</span>		<span class="cm">/*  In-Pointer. */</span>
	<span class="kt">uint32_t</span> <span class="n">atio_q_out</span><span class="p">;</span>		<span class="cm">/*  Out-Pointer. */</span>

	<span class="kt">uint32_t</span> <span class="n">host_status</span><span class="p">;</span>
<span class="cp">#define HSRX_RISC_INT		BIT_15	</span><span class="cm">/* RISC to Host interrupt. */</span><span class="cp"></span>
<span class="cp">#define HSRX_RISC_PAUSED	BIT_8	</span><span class="cm">/* RISC Paused. */</span><span class="cp"></span>

	<span class="kt">uint32_t</span> <span class="n">hccr</span><span class="p">;</span>			<span class="cm">/* Host command &amp; control register. */</span>
					<span class="cm">/* HCCR statuses. */</span>
<span class="cp">#define HCCRX_HOST_INT		BIT_6	</span><span class="cm">/* Host to RISC interrupt bit. */</span><span class="cp"></span>
<span class="cp">#define HCCRX_RISC_RESET	BIT_5	</span><span class="cm">/* RISC Reset mode bit. */</span><span class="cp"></span>
					<span class="cm">/* HCCR commands. */</span>
					<span class="cm">/* NOOP. */</span>
<span class="cp">#define HCCRX_NOOP		0x00000000</span>
					<span class="cm">/* Set RISC Reset. */</span>
<span class="cp">#define HCCRX_SET_RISC_RESET	0x10000000</span>
					<span class="cm">/* Clear RISC Reset. */</span>
<span class="cp">#define HCCRX_CLR_RISC_RESET	0x20000000</span>
					<span class="cm">/* Set RISC Pause. */</span>
<span class="cp">#define HCCRX_SET_RISC_PAUSE	0x30000000</span>
					<span class="cm">/* Releases RISC Pause. */</span>
<span class="cp">#define HCCRX_REL_RISC_PAUSE	0x40000000</span>
					<span class="cm">/* Set HOST to RISC interrupt. */</span>
<span class="cp">#define HCCRX_SET_HOST_INT	0x50000000</span>
					<span class="cm">/* Clear HOST to RISC interrupt. */</span>
<span class="cp">#define HCCRX_CLR_HOST_INT	0x60000000</span>
					<span class="cm">/* Clear RISC to PCI interrupt. */</span>
<span class="cp">#define HCCRX_CLR_RISC_INT	0xA0000000</span>

	<span class="kt">uint32_t</span> <span class="n">gpiod</span><span class="p">;</span>			<span class="cm">/* GPIO Data register. */</span>

					<span class="cm">/* LED update mask. */</span>
<span class="cp">#define GPDX_LED_UPDATE_MASK	(BIT_20|BIT_19|BIT_18)</span>
					<span class="cm">/* Data update mask. */</span>
<span class="cp">#define GPDX_DATA_UPDATE_MASK	(BIT_17|BIT_16)</span>
					<span class="cm">/* Data update mask. */</span>
<span class="cp">#define GPDX_DATA_UPDATE_2_MASK	(BIT_28|BIT_27|BIT_26|BIT_17|BIT_16)</span>
					<span class="cm">/* LED control mask. */</span>
<span class="cp">#define GPDX_LED_COLOR_MASK	(BIT_4|BIT_3|BIT_2)</span>
					<span class="cm">/* LED bit values. Color names as</span>
<span class="cm">					 * referenced in fw spec.</span>
<span class="cm">					 */</span>
<span class="cp">#define GPDX_LED_YELLOW_ON	BIT_2</span>
<span class="cp">#define GPDX_LED_GREEN_ON	BIT_3</span>
<span class="cp">#define GPDX_LED_AMBER_ON	BIT_4</span>
					<span class="cm">/* Data in/out. */</span>
<span class="cp">#define GPDX_DATA_INOUT		(BIT_1|BIT_0)</span>

	<span class="kt">uint32_t</span> <span class="n">gpioe</span><span class="p">;</span>			<span class="cm">/* GPIO Enable register. */</span>
					<span class="cm">/* Enable update mask. */</span>
<span class="cp">#define GPEX_ENABLE_UPDATE_MASK	(BIT_17|BIT_16)</span>
					<span class="cm">/* Enable update mask. */</span>
<span class="cp">#define GPEX_ENABLE_UPDATE_2_MASK (BIT_28|BIT_27|BIT_26|BIT_17|BIT_16)</span>
					<span class="cm">/* Enable. */</span>
<span class="cp">#define GPEX_ENABLE		(BIT_1|BIT_0)</span>

	<span class="kt">uint32_t</span> <span class="n">iobase_addr</span><span class="p">;</span>		<span class="cm">/* I/O Bus Base Address register. */</span>

	<span class="kt">uint32_t</span> <span class="n">unused_3</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>		<span class="cm">/* Gap. */</span>

	<span class="kt">uint16_t</span> <span class="n">mailbox0</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox1</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox2</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox3</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox4</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox5</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox6</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox7</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox8</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox9</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox10</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox11</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox12</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox13</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox14</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox15</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox16</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox17</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox18</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox19</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox20</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox21</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox22</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox23</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox24</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox25</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox26</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox27</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox28</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox29</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox30</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mailbox31</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">iobase_window</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">iobase_c4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">iobase_c8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">unused_4_1</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>		<span class="cm">/* Gap. */</span>
	<span class="kt">uint32_t</span> <span class="n">iobase_q</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">unused_5</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>		<span class="cm">/* Gap. */</span>
	<span class="kt">uint32_t</span> <span class="n">iobase_select</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">unused_6</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>		<span class="cm">/* Gap. */</span>
	<span class="kt">uint32_t</span> <span class="n">iobase_sdata</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Trace Control *************************************************************/</span>

<span class="cp">#define TC_AEN_DISABLE		0</span>

<span class="cp">#define TC_EFT_ENABLE		4</span>
<span class="cp">#define TC_EFT_DISABLE		5</span>

<span class="cp">#define TC_FCE_ENABLE		8</span>
<span class="cp">#define TC_FCE_OPTIONS		0</span>
<span class="cp">#define TC_FCE_DEFAULT_RX_SIZE	2112</span>
<span class="cp">#define TC_FCE_DEFAULT_TX_SIZE	2112</span>
<span class="cp">#define TC_FCE_DISABLE		9</span>
<span class="cp">#define TC_FCE_DISABLE_TRACE	BIT_0</span>

<span class="cm">/* MID Support ***************************************************************/</span>

<span class="cp">#define MIN_MULTI_ID_FABRIC	64	</span><span class="cm">/* Must be power-of-2. */</span><span class="cp"></span>
<span class="cp">#define MAX_MULTI_ID_FABRIC	256	</span><span class="cm">/* ... */</span><span class="cp"></span>

<span class="cp">#define for_each_mapped_vp_idx(_ha, _idx)		\</span>
<span class="cp">	for (_idx = find_next_bit((_ha)-&gt;vp_idx_map,	\</span>
<span class="cp">		(_ha)-&gt;max_npiv_vports + 1, 1);		\</span>
<span class="cp">	    _idx &lt;= (_ha)-&gt;max_npiv_vports;		\</span>
<span class="cp">	    _idx = find_next_bit((_ha)-&gt;vp_idx_map,	\</span>
<span class="cp">		(_ha)-&gt;max_npiv_vports + 1, _idx + 1))	\</span>

<span class="k">struct</span> <span class="n">mid_conf_entry_24xx</span> <span class="p">{</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_1</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * BIT 0  = Enable Hard Loop Id</span>
<span class="cm">	 * BIT 1  = Acquire Loop ID in LIPA</span>
<span class="cm">	 * BIT 2  = ID not Acquired</span>
<span class="cm">	 * BIT 3  = Enable VP</span>
<span class="cm">	 * BIT 4  = Enable Initiator Mode</span>
<span class="cm">	 * BIT 5  = Disable Target Mode</span>
<span class="cm">	 * BIT 6-7 = Reserved</span>
<span class="cm">	 */</span>
	<span class="kt">uint8_t</span> <span class="n">options</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">hard_address</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">node_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mid_init_cb_24xx</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">init_cb_24xx</span> <span class="n">init_cb</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">count</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">options</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">mid_conf_entry_24xx</span> <span class="n">entries</span><span class="p">[</span><span class="n">MAX_MULTI_ID_FABRIC</span><span class="p">];</span>
<span class="p">};</span>


<span class="k">struct</span> <span class="n">mid_db_entry_24xx</span> <span class="p">{</span>
	<span class="kt">uint16_t</span> <span class="n">status</span><span class="p">;</span>
<span class="cp">#define MDBS_NON_PARTIC		BIT_3</span>
<span class="cp">#define MDBS_ID_ACQUIRED	BIT_1</span>
<span class="cp">#define MDBS_ENABLED		BIT_0</span>

	<span class="kt">uint8_t</span> <span class="n">options</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">hard_address</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">node_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>

	<span class="kt">uint8_t</span> <span class="n">port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_1</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Virtual Port Control IOCB</span>
<span class="cm"> */</span>
<span class="cp">#define VP_CTRL_IOCB_TYPE	0x30	</span><span class="cm">/* Vitual Port Control entry. */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">vp_ctrl_entry_24xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">sys_define</span><span class="p">;</span>		<span class="cm">/* System defined. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">vp_idx_failed</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">comp_status</span><span class="p">;</span>		<span class="cm">/* Completion status. */</span>
<span class="cp">#define CS_VCE_IOCB_ERROR       0x01    </span><span class="cm">/* Error processing IOCB */</span><span class="cp"></span>
<span class="cp">#define CS_VCE_ACQ_ID_ERROR	0x02	</span><span class="cm">/* Error while acquireing ID. */</span><span class="cp"></span>
<span class="cp">#define CS_VCE_BUSY		0x05	</span><span class="cm">/* Firmware not ready to accept cmd. */</span><span class="cp"></span>

	<span class="kt">uint16_t</span> <span class="n">command</span><span class="p">;</span>
<span class="cp">#define VCE_COMMAND_ENABLE_VPS	0x00	</span><span class="cm">/* Enable VPs. */</span><span class="cp"></span>
<span class="cp">#define VCE_COMMAND_DISABLE_VPS	0x08	</span><span class="cm">/* Disable VPs. */</span><span class="cp"></span>
<span class="cp">#define VCE_COMMAND_DISABLE_VPS_REINIT	0x09 </span><span class="cm">/* Disable VPs and reinit link. */</span><span class="cp"></span>
<span class="cp">#define VCE_COMMAND_DISABLE_VPS_LOGO	0x0a </span><span class="cm">/* Disable VPs and LOGO ports. */</span><span class="cp"></span>
<span class="cp">#define VCE_COMMAND_DISABLE_VPS_LOGO_ALL        0x0b </span><span class="cm">/* Disable VPs and LOGO ports. */</span><span class="cp"></span>

	<span class="kt">uint16_t</span> <span class="n">vp_count</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">vp_idx_map</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">id</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_4</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">hopct</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_5</span><span class="p">[</span><span class="mi">24</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Modify Virtual Port Configuration IOCB</span>
<span class="cm"> */</span>
<span class="cp">#define VP_CONFIG_IOCB_TYPE	0x31	</span><span class="cm">/* Vitual Port Config entry. */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">vp_config_entry_24xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">handle_count</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">flags</span><span class="p">;</span>
<span class="cp">#define CS_VF_BIND_VPORTS_TO_VF         BIT_0</span>
<span class="cp">#define CS_VF_SET_QOS_OF_VPORTS         BIT_1</span>
<span class="cp">#define CS_VF_SET_HOPS_OF_VPORTS        BIT_2</span>

	<span class="kt">uint16_t</span> <span class="n">comp_status</span><span class="p">;</span>		<span class="cm">/* Completion status. */</span>
<span class="cp">#define CS_VCT_STS_ERROR	0x01	</span><span class="cm">/* Specified VPs were not disabled. */</span><span class="cp"></span>
<span class="cp">#define CS_VCT_CNT_ERROR	0x02	</span><span class="cm">/* Invalid VP count. */</span><span class="cp"></span>
<span class="cp">#define CS_VCT_ERROR		0x03	</span><span class="cm">/* Unknown error. */</span><span class="cp"></span>
<span class="cp">#define CS_VCT_IDX_ERROR	0x02	</span><span class="cm">/* Invalid VP index. */</span><span class="cp"></span>
<span class="cp">#define CS_VCT_BUSY		0x05	</span><span class="cm">/* Firmware not ready to accept cmd. */</span><span class="cp"></span>

	<span class="kt">uint8_t</span> <span class="n">command</span><span class="p">;</span>
<span class="cp">#define VCT_COMMAND_MOD_VPS     0x00    </span><span class="cm">/* Modify VP configurations. */</span><span class="cp"></span>
<span class="cp">#define VCT_COMMAND_MOD_ENABLE_VPS 0x01 </span><span class="cm">/* Modify configuration &amp; enable VPs. */</span><span class="cp"></span>

	<span class="kt">uint8_t</span> <span class="n">vp_count</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">vp_index1</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">vp_index2</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">options_idx1</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">hard_address_idx1</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_vp1</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">port_name_idx1</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">node_name_idx1</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>

	<span class="kt">uint8_t</span> <span class="n">options_idx2</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">hard_address_idx2</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_vp2</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">port_name_idx2</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">node_name_idx2</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">id</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_4</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">hopct</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_5</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define VP_RPT_ID_IOCB_TYPE	0x32	</span><span class="cm">/* Report ID Acquisition entry. */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">vp_rpt_id_entry_24xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>		<span class="cm">/* Entry type. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>		<span class="cm">/* Entry count. */</span>
	<span class="kt">uint8_t</span> <span class="n">sys_define</span><span class="p">;</span>		<span class="cm">/* System defined. */</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>		<span class="cm">/* Entry Status. */</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* System handle. */</span>

	<span class="kt">uint16_t</span> <span class="n">vp_count</span><span class="p">;</span>		<span class="cm">/* Format 0 -- | VP setup | VP acq |. */</span>
					<span class="cm">/* Format 1 -- | VP count |. */</span>
	<span class="kt">uint16_t</span> <span class="n">vp_idx</span><span class="p">;</span>		<span class="cm">/* Format 0 -- Reserved. */</span>
					<span class="cm">/* Format 1 -- VP status and index. */</span>

	<span class="kt">uint8_t</span> <span class="n">port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">format</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">vp_idx_map</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="kt">uint8_t</span> <span class="n">reserved_4</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define VF_EVFP_IOCB_TYPE       0x26    </span><span class="cm">/* Exchange Virtual Fabric Parameters entry. */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">vf_evfp_entry_24xx</span> <span class="p">{</span>
        <span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>             <span class="cm">/* Entry type. */</span>
        <span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>            <span class="cm">/* Entry count. */</span>
        <span class="kt">uint8_t</span> <span class="n">sys_define</span><span class="p">;</span>             <span class="cm">/* System defined. */</span>
        <span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>           <span class="cm">/* Entry Status. */</span>

        <span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>                <span class="cm">/* System handle. */</span>
        <span class="kt">uint16_t</span> <span class="n">comp_status</span><span class="p">;</span>           <span class="cm">/* Completion status. */</span>
        <span class="kt">uint16_t</span> <span class="n">timeout</span><span class="p">;</span>               <span class="cm">/* timeout */</span>
        <span class="kt">uint16_t</span> <span class="n">adim_tagging_mode</span><span class="p">;</span>

        <span class="kt">uint16_t</span> <span class="n">vfport_id</span><span class="p">;</span>
        <span class="kt">uint32_t</span> <span class="n">exch_addr</span><span class="p">;</span>

        <span class="kt">uint16_t</span> <span class="n">nport_handle</span><span class="p">;</span>          <span class="cm">/* N_PORT handle. */</span>
        <span class="kt">uint16_t</span> <span class="n">control_flags</span><span class="p">;</span>
        <span class="kt">uint32_t</span> <span class="n">io_parameter_0</span><span class="p">;</span>
        <span class="kt">uint32_t</span> <span class="n">io_parameter_1</span><span class="p">;</span>
        <span class="kt">uint32_t</span> <span class="n">tx_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>         <span class="cm">/* Data segment 0 address. */</span>
        <span class="kt">uint32_t</span> <span class="n">tx_len</span><span class="p">;</span>                <span class="cm">/* Data segment 0 length. */</span>
        <span class="kt">uint32_t</span> <span class="n">rx_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>         <span class="cm">/* Data segment 1 address. */</span>
        <span class="kt">uint32_t</span> <span class="n">rx_len</span><span class="p">;</span>                <span class="cm">/* Data segment 1 length. */</span>
<span class="p">};</span>

<span class="cm">/* END MID Support ***********************************************************/</span>

<span class="cm">/* Flash Description Table ***************************************************/</span>

<span class="k">struct</span> <span class="n">qla_fdt_layout</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">sig</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">version</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">len</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">checksum</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">unused1</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">model</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">man_id</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">id</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">erase_cmd</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">alt_erase_cmd</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">wrt_enable_cmd</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">wrt_enable_bits</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">wrt_sts_reg_cmd</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">unprotect_sec_cmd</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">read_man_id_cmd</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">block_size</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">alt_block_size</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">flash_size</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">wrt_enable_data</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">read_id_addr_len</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">wrt_disable_bits</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">read_dev_id_len</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">chip_erase_cmd</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">read_timeout</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">protect_sec_cmd</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">unused2</span><span class="p">[</span><span class="mi">65</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* Flash Layout Table ********************************************************/</span>

<span class="k">struct</span> <span class="n">qla_flt_location</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">sig</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">start_lo</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">start_hi</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">version</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">unused</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">checksum</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qla_flt_header</span> <span class="p">{</span>
	<span class="kt">uint16_t</span> <span class="n">version</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">length</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">checksum</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">unused</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define FLT_REG_FW		0x01</span>
<span class="cp">#define FLT_REG_BOOT_CODE	0x07</span>
<span class="cp">#define FLT_REG_VPD_0		0x14</span>
<span class="cp">#define FLT_REG_NVRAM_0		0x15</span>
<span class="cp">#define FLT_REG_VPD_1		0x16</span>
<span class="cp">#define FLT_REG_NVRAM_1		0x17</span>
<span class="cp">#define FLT_REG_FDT		0x1a</span>
<span class="cp">#define FLT_REG_FLT		0x1c</span>
<span class="cp">#define FLT_REG_HW_EVENT_0	0x1d</span>
<span class="cp">#define FLT_REG_HW_EVENT_1	0x1f</span>
<span class="cp">#define FLT_REG_NPIV_CONF_0	0x29</span>
<span class="cp">#define FLT_REG_NPIV_CONF_1	0x2a</span>
<span class="cp">#define FLT_REG_GOLD_FW		0x2f</span>
<span class="cp">#define FLT_REG_FCP_PRIO_0	0x87</span>
<span class="cp">#define FLT_REG_FCP_PRIO_1	0x88</span>
<span class="cp">#define FLT_REG_FCOE_FW		0xA4</span>
<span class="cp">#define FLT_REG_FCOE_VPD_0	0xA9</span>
<span class="cp">#define FLT_REG_FCOE_NVRAM_0	0xAA</span>
<span class="cp">#define FLT_REG_FCOE_VPD_1	0xAB</span>
<span class="cp">#define FLT_REG_FCOE_NVRAM_1	0xAC</span>

<span class="k">struct</span> <span class="n">qla_flt_region</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">code</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">size</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">start</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">end</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Flash NPIV Configuration Table ********************************************/</span>

<span class="k">struct</span> <span class="n">qla_npiv_header</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">sig</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">version</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">entries</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">unused</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">checksum</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qla_npiv_entry</span> <span class="p">{</span>
	<span class="kt">uint16_t</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">vf_id</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">q_qos</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">f_qos</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">unused1</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">node_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* 84XX Support **************************************************************/</span>

<span class="cp">#define MBA_ISP84XX_ALERT	0x800f  </span><span class="cm">/* Alert Notification. */</span><span class="cp"></span>
<span class="cp">#define A84_PANIC_RECOVERY	0x1</span>
<span class="cp">#define A84_OP_LOGIN_COMPLETE	0x2</span>
<span class="cp">#define A84_DIAG_LOGIN_COMPLETE	0x3</span>
<span class="cp">#define A84_GOLD_LOGIN_COMPLETE	0x4</span>

<span class="cp">#define MBC_ISP84XX_RESET	0x3a    </span><span class="cm">/* Reset. */</span><span class="cp"></span>

<span class="cp">#define FSTATE_REMOTE_FC_DOWN	BIT_0</span>
<span class="cp">#define FSTATE_NSL_LINK_DOWN	BIT_1</span>
<span class="cp">#define FSTATE_IS_DIAG_FW	BIT_2</span>
<span class="cp">#define FSTATE_LOGGED_IN	BIT_3</span>
<span class="cp">#define FSTATE_WAITING_FOR_VERIFY	BIT_4</span>

<span class="cp">#define VERIFY_CHIP_IOCB_TYPE	0x1B</span>
<span class="k">struct</span> <span class="n">verify_chip_entry_84xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">sys_defined</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">options</span><span class="p">;</span>
<span class="cp">#define VCO_DONT_UPDATE_FW	BIT_0</span>
<span class="cp">#define VCO_FORCE_UPDATE	BIT_1</span>
<span class="cp">#define VCO_DONT_RESET_UPDATE	BIT_2</span>
<span class="cp">#define VCO_DIAG_FW		BIT_3</span>
<span class="cp">#define VCO_END_OF_DATA		BIT_14</span>
<span class="cp">#define VCO_ENABLE_DSD		BIT_15</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_1</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">data_seg_cnt</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

	<span class="kt">uint32_t</span> <span class="n">fw_ver</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">exchange_address</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">reserved_3</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">fw_size</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">fw_seq_size</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">relative_offset</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">dseg_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">dseg_length</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">verify_chip_rsp_84xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">sys_defined</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">comp_status</span><span class="p">;</span>
<span class="cp">#define CS_VCS_CHIP_FAILURE	0x3</span>
<span class="cp">#define CS_VCS_BAD_EXCHANGE	0x8</span>
<span class="cp">#define CS_VCS_SEQ_COMPLETEi	0x40</span>

	<span class="kt">uint16_t</span> <span class="n">failure_code</span><span class="p">;</span>
<span class="cp">#define VFC_CHECKSUM_ERROR	0x1</span>
<span class="cp">#define VFC_INVALID_LEN		0x2</span>
<span class="cp">#define VFC_ALREADY_IN_PROGRESS	0x8</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_1</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>

	<span class="kt">uint32_t</span> <span class="n">fw_ver</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">exchange_address</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">reserved_2</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define ACCESS_CHIP_IOCB_TYPE	0x2B</span>
<span class="k">struct</span> <span class="n">access_chip_84xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">sys_defined</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">options</span><span class="p">;</span>
<span class="cp">#define ACO_DUMP_MEMORY		0x0</span>
<span class="cp">#define ACO_LOAD_MEMORY		0x1</span>
<span class="cp">#define ACO_CHANGE_CONFIG_PARAM	0x2</span>
<span class="cp">#define ACO_REQUEST_INFO	0x3</span>

	<span class="kt">uint16_t</span> <span class="n">reserved1</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">dseg_count</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

	<span class="kt">uint32_t</span> <span class="n">parameter1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">parameter2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">parameter3</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">reserved3</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">total_byte_cnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">reserved4</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">dseg_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">dseg_length</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">access_chip_rsp_84xx</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">entry_type</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">entry_count</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">sys_defined</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">entry_status</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">handle</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">comp_status</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">failure_code</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">residual_count</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* 81XX Support **************************************************************/</span>

<span class="cp">#define MBA_DCBX_START		0x8016</span>
<span class="cp">#define MBA_DCBX_COMPLETE	0x8030</span>
<span class="cp">#define MBA_FCF_CONF_ERR	0x8031</span>
<span class="cp">#define MBA_DCBX_PARAM_UPDATE	0x8032</span>
<span class="cp">#define MBA_IDC_COMPLETE	0x8100</span>
<span class="cp">#define MBA_IDC_NOTIFY		0x8101</span>
<span class="cp">#define MBA_IDC_TIME_EXT	0x8102</span>

<span class="cp">#define MBC_IDC_ACK		0x101</span>
<span class="cp">#define MBC_RESTART_MPI_FW	0x3d</span>
<span class="cp">#define MBC_FLASH_ACCESS_CTRL	0x3e	</span><span class="cm">/* Control flash access. */</span><span class="cp"></span>
<span class="cp">#define MBC_GET_XGMAC_STATS	0x7a</span>
<span class="cp">#define MBC_GET_DCBX_PARAMS	0x51</span>

<span class="cm">/*</span>
<span class="cm"> * ISP83xx mailbox commands</span>
<span class="cm"> */</span>
<span class="cp">#define MBC_WRITE_REMOTE_REG 0x0001 </span><span class="cm">/* Write remote register */</span><span class="cp"></span>

<span class="cm">/* Flash access control option field bit definitions */</span>
<span class="cp">#define FAC_OPT_FORCE_SEMAPHORE		BIT_15</span>
<span class="cp">#define FAC_OPT_REQUESTOR_ID		BIT_14</span>
<span class="cp">#define FAC_OPT_CMD_SUBCODE		0xff</span>

<span class="cm">/* Flash access control command subcodes */</span>
<span class="cp">#define FAC_OPT_CMD_WRITE_PROTECT	0x00</span>
<span class="cp">#define FAC_OPT_CMD_WRITE_ENABLE	0x01</span>
<span class="cp">#define FAC_OPT_CMD_ERASE_SECTOR	0x02</span>
<span class="cp">#define FAC_OPT_CMD_LOCK_SEMAPHORE	0x03</span>
<span class="cp">#define FAC_OPT_CMD_UNLOCK_SEMAPHORE	0x04</span>
<span class="cp">#define FAC_OPT_CMD_GET_SECTOR_SIZE	0x05</span>

<span class="k">struct</span> <span class="n">nvram_81xx</span> <span class="p">{</span>
	<span class="cm">/* NVRAM header. */</span>
	<span class="kt">uint8_t</span> <span class="n">id</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">nvram_version</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_0</span><span class="p">;</span>

	<span class="cm">/* Firmware Initialization Control Block. */</span>
	<span class="kt">uint16_t</span> <span class="n">version</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_1</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">frame_payload_size</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">execution_throttle</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">exchange_count</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_2</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">node_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>

	<span class="kt">uint16_t</span> <span class="n">login_retry_count</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_3</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">interrupt_delay_timer</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">login_timeout</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">firmware_options_1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">firmware_options_2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">firmware_options_3</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_4</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>

	<span class="cm">/* Offset 64. */</span>
	<span class="kt">uint8_t</span> <span class="n">enode_mac</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_5</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>

	<span class="cm">/* Offset 80. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_6</span><span class="p">[</span><span class="mi">24</span><span class="p">];</span>

	<span class="cm">/* Offset 128. */</span>
	<span class="kt">uint16_t</span> <span class="n">ex_version</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">prio_fcf_matching_flags</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_6_1</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">pri_fcf_vlan_id</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">pri_fcf_fabric_name</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_6_2</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">spma_mac_addr</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_6_3</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>

	<span class="cm">/* Offset 192. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_7</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>

	<span class="cm">/*</span>
<span class="cm">	 * BIT 0  = Enable spinup delay</span>
<span class="cm">	 * BIT 1  = Disable BIOS</span>
<span class="cm">	 * BIT 2  = Enable Memory Map BIOS</span>
<span class="cm">	 * BIT 3  = Enable Selectable Boot</span>
<span class="cm">	 * BIT 4  = Disable RISC code load</span>
<span class="cm">	 * BIT 5  = Disable Serdes</span>
<span class="cm">	 * BIT 6  = Opt boot mode</span>
<span class="cm">	 * BIT 7  = Interrupt enable</span>
<span class="cm">	 *</span>
<span class="cm">	 * BIT 8  = EV Control enable</span>
<span class="cm">	 * BIT 9  = Enable lip reset</span>
<span class="cm">	 * BIT 10 = Enable lip full login</span>
<span class="cm">	 * BIT 11 = Enable target reset</span>
<span class="cm">	 * BIT 12 = Stop firmware</span>
<span class="cm">	 * BIT 13 = Enable nodename option</span>
<span class="cm">	 * BIT 14 = Default WWPN valid</span>
<span class="cm">	 * BIT 15 = Enable alternate WWN</span>
<span class="cm">	 *</span>
<span class="cm">	 * BIT 16 = CLP LUN string</span>
<span class="cm">	 * BIT 17 = CLP Target string</span>
<span class="cm">	 * BIT 18 = CLP BIOS enable string</span>
<span class="cm">	 * BIT 19 = CLP Serdes string</span>
<span class="cm">	 * BIT 20 = CLP WWPN string</span>
<span class="cm">	 * BIT 21 = CLP WWNN string</span>
<span class="cm">	 * BIT 22 =</span>
<span class="cm">	 * BIT 23 =</span>
<span class="cm">	 * BIT 24 = Keep WWPN</span>
<span class="cm">	 * BIT 25 = Temp WWPN</span>
<span class="cm">	 * BIT 26-31 =</span>
<span class="cm">	 */</span>
	<span class="kt">uint32_t</span> <span class="n">host_p</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">alternate_port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">alternate_node_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>

	<span class="kt">uint8_t</span> <span class="n">boot_port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">boot_lun_number</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_8</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">alt1_boot_port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">alt1_boot_lun_number</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_9</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">alt2_boot_port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">alt2_boot_lun_number</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_10</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">alt3_boot_port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">alt3_boot_lun_number</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_11</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * BIT 0 = Selective Login</span>
<span class="cm">	 * BIT 1 = Alt-Boot Enable</span>
<span class="cm">	 * BIT 2 = Reserved</span>
<span class="cm">	 * BIT 3 = Boot Order List</span>
<span class="cm">	 * BIT 4 = Reserved</span>
<span class="cm">	 * BIT 5 = Selective LUN</span>
<span class="cm">	 * BIT 6 = Reserved</span>
<span class="cm">	 * BIT 7-31 =</span>
<span class="cm">	 */</span>
	<span class="kt">uint32_t</span> <span class="n">efi_parameters</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">reset_delay</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_12</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_13</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">boot_id_number</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_14</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">max_luns_per_target</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_15</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">port_down_retry_count</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">link_down_timeout</span><span class="p">;</span>

	<span class="cm">/* FCode parameters. */</span>
	<span class="kt">uint16_t</span> <span class="n">fcode_parameter</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_16</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

	<span class="cm">/* Offset 352. */</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_17</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_18</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_19</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_20</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

	<span class="cm">/* Offset 384. */</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_21</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_22</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

	<span class="cm">/*</span>
<span class="cm">	 * BIT 0 = Extended BB credits for LR</span>
<span class="cm">	 * BIT 1 = Virtual Fabric Enable</span>
<span class="cm">	 * BIT 2 = Enhanced Features Unused</span>
<span class="cm">	 * BIT 3-7 = Enhanced Features Reserved</span>
<span class="cm">	 */</span>
	<span class="cm">/* Enhanced Features */</span>
	<span class="kt">uint8_t</span> <span class="n">enhanced_features</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">reserved_23</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_24</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>

	<span class="cm">/* Offset 416. */</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_25</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>

	<span class="cm">/* Offset 480. */</span>
	<span class="kt">uint8_t</span> <span class="n">model_name</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="cm">/* Offset 496. */</span>
	<span class="kt">uint16_t</span> <span class="n">feature_mask_l</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">feature_mask_h</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_26</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

	<span class="kt">uint16_t</span> <span class="n">subsystem_vendor_id</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">subsystem_device_id</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">checksum</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ISP Initialization Control Block.</span>
<span class="cm"> * Little endian except where noted.</span>
<span class="cm"> */</span>
<span class="cp">#define	ICB_VERSION 1</span>
<span class="k">struct</span> <span class="n">init_cb_81xx</span> <span class="p">{</span>
	<span class="kt">uint16_t</span> <span class="n">version</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_1</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">frame_payload_size</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">execution_throttle</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">exchange_count</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_2</span><span class="p">;</span>

	<span class="kt">uint8_t</span> <span class="n">port_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>		<span class="cm">/* Big endian. */</span>
	<span class="kt">uint8_t</span> <span class="n">node_name</span><span class="p">[</span><span class="n">WWN_SIZE</span><span class="p">];</span>		<span class="cm">/* Big endian. */</span>

	<span class="kt">uint16_t</span> <span class="n">response_q_inpointer</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">request_q_outpointer</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">login_retry_count</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">prio_request_q_outpointer</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">response_q_length</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">request_q_length</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">reserved_3</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">prio_request_q_length</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">request_q_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">response_q_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">prio_request_q_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

	<span class="kt">uint8_t</span> <span class="n">reserved_4</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

	<span class="kt">uint16_t</span> <span class="n">atio_q_inpointer</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">atio_q_length</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">atio_q_address</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

	<span class="kt">uint16_t</span> <span class="n">interrupt_delay_timer</span><span class="p">;</span>		<span class="cm">/* 100us increments. */</span>
	<span class="kt">uint16_t</span> <span class="n">login_timeout</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * BIT 0-3 = Reserved</span>
<span class="cm">	 * BIT 4  = Enable Target Mode</span>
<span class="cm">	 * BIT 5  = Disable Initiator Mode</span>
<span class="cm">	 * BIT 6  = Reserved</span>
<span class="cm">	 * BIT 7  = Reserved</span>
<span class="cm">	 *</span>
<span class="cm">	 * BIT 8-13 = Reserved</span>
<span class="cm">	 * BIT 14 = Node Name Option</span>
<span class="cm">	 * BIT 15-31 = Reserved</span>
<span class="cm">	 */</span>
	<span class="kt">uint32_t</span> <span class="n">firmware_options_1</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * BIT 0  = Operation Mode bit 0</span>
<span class="cm">	 * BIT 1  = Operation Mode bit 1</span>
<span class="cm">	 * BIT 2  = Operation Mode bit 2</span>
<span class="cm">	 * BIT 3  = Operation Mode bit 3</span>
<span class="cm">	 * BIT 4-7 = Reserved</span>
<span class="cm">	 *</span>
<span class="cm">	 * BIT 8  = Enable Class 2</span>
<span class="cm">	 * BIT 9  = Enable ACK0</span>
<span class="cm">	 * BIT 10 = Reserved</span>
<span class="cm">	 * BIT 11 = Enable FC-SP Security</span>
<span class="cm">	 * BIT 12 = FC Tape Enable</span>
<span class="cm">	 * BIT 13 = Reserved</span>
<span class="cm">	 * BIT 14 = Enable Target PRLI Control</span>
<span class="cm">	 * BIT 15-31 = Reserved</span>
<span class="cm">	 */</span>
	<span class="kt">uint32_t</span> <span class="n">firmware_options_2</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * BIT 0-3 = Reserved</span>
<span class="cm">	 * BIT 4  = FCP RSP Payload bit 0</span>
<span class="cm">	 * BIT 5  = FCP RSP Payload bit 1</span>
<span class="cm">	 * BIT 6  = Enable Receive Out-of-Order data frame handling</span>
<span class="cm">	 * BIT 7  = Reserved</span>
<span class="cm">	 *</span>
<span class="cm">	 * BIT 8  = Reserved</span>
<span class="cm">	 * BIT 9  = Enable Out-of-Order FCP_XFER_RDY relative offset handling</span>
<span class="cm">	 * BIT 10-16 = Reserved</span>
<span class="cm">	 * BIT 17 = Enable multiple FCFs</span>
<span class="cm">	 * BIT 18-20 = MAC addressing mode</span>
<span class="cm">	 * BIT 21-25 = Ethernet data rate</span>
<span class="cm">	 * BIT 26 = Enable ethernet header rx IOCB for ATIO q</span>
<span class="cm">	 * BIT 27 = Enable ethernet header rx IOCB for response q</span>
<span class="cm">	 * BIT 28 = SPMA selection bit 0</span>
<span class="cm">	 * BIT 28 = SPMA selection bit 1</span>
<span class="cm">	 * BIT 30-31 = Reserved</span>
<span class="cm">	 */</span>
	<span class="kt">uint32_t</span> <span class="n">firmware_options_3</span><span class="p">;</span>

	<span class="kt">uint8_t</span>  <span class="n">reserved_5</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

	<span class="kt">uint8_t</span> <span class="n">enode_mac</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>

	<span class="kt">uint8_t</span> <span class="n">reserved_6</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mid_init_cb_81xx</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">init_cb_81xx</span> <span class="n">init_cb</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">count</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">options</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">mid_conf_entry_24xx</span> <span class="n">entries</span><span class="p">[</span><span class="n">MAX_MULTI_ID_FABRIC</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ex_init_cb_81xx</span> <span class="p">{</span>
	<span class="kt">uint16_t</span> <span class="n">ex_version</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">prio_fcf_matching_flags</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">reserved_1</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">pri_fcf_vlan_id</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">pri_fcf_fabric_name</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_2</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">spma_mac_addr</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">reserved_3</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define FARX_ACCESS_FLASH_CONF_81XX	0x7FFD0000</span>
<span class="cp">#define FARX_ACCESS_FLASH_DATA_81XX	0x7F800000</span>

<span class="cm">/* FCP priority config defines *************************************/</span>
<span class="cm">/* operations */</span>
<span class="cp">#define QLFC_FCP_PRIO_DISABLE           0x0</span>
<span class="cp">#define QLFC_FCP_PRIO_ENABLE            0x1</span>
<span class="cp">#define QLFC_FCP_PRIO_GET_CONFIG        0x2</span>
<span class="cp">#define QLFC_FCP_PRIO_SET_CONFIG        0x3</span>

<span class="k">struct</span> <span class="n">qla_fcp_prio_entry</span> <span class="p">{</span>
	<span class="kt">uint16_t</span> <span class="n">flags</span><span class="p">;</span>         <span class="cm">/* Describes parameter(s) in FCP        */</span>
	<span class="cm">/* priority entry that are valid        */</span>
<span class="cp">#define FCP_PRIO_ENTRY_VALID            0x1</span>
<span class="cp">#define FCP_PRIO_ENTRY_TAG_VALID        0x2</span>
<span class="cp">#define FCP_PRIO_ENTRY_SPID_VALID       0x4</span>
<span class="cp">#define FCP_PRIO_ENTRY_DPID_VALID       0x8</span>
<span class="cp">#define FCP_PRIO_ENTRY_LUNB_VALID       0x10</span>
<span class="cp">#define FCP_PRIO_ENTRY_LUNE_VALID       0x20</span>
<span class="cp">#define FCP_PRIO_ENTRY_SWWN_VALID       0x40</span>
<span class="cp">#define FCP_PRIO_ENTRY_DWWN_VALID       0x80</span>
	<span class="kt">uint8_t</span>  <span class="n">tag</span><span class="p">;</span>           <span class="cm">/* Priority value                   */</span>
	<span class="kt">uint8_t</span>  <span class="n">reserved</span><span class="p">;</span>      <span class="cm">/* Reserved for future use          */</span>
	<span class="kt">uint32_t</span> <span class="n">src_pid</span><span class="p">;</span>       <span class="cm">/* Src port id. high order byte     */</span>
				<span class="cm">/* unused; -1 (wild card)           */</span>
	<span class="kt">uint32_t</span> <span class="n">dst_pid</span><span class="p">;</span>       <span class="cm">/* Src port id. high order byte     */</span>
	<span class="cm">/* unused; -1 (wild card)           */</span>
	<span class="kt">uint16_t</span> <span class="n">lun_beg</span><span class="p">;</span>       <span class="cm">/* 1st lun num of lun range.        */</span>
				<span class="cm">/* -1 (wild card)                   */</span>
	<span class="kt">uint16_t</span> <span class="n">lun_end</span><span class="p">;</span>       <span class="cm">/* 2nd lun num of lun range.        */</span>
				<span class="cm">/* -1 (wild card)                   */</span>
	<span class="kt">uint8_t</span>  <span class="n">src_wwpn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>   <span class="cm">/* Source WWPN: -1 (wild card)      */</span>
	<span class="kt">uint8_t</span>  <span class="n">dst_wwpn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>   <span class="cm">/* Destination WWPN: -1 (wild card) */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qla_fcp_prio_cfg</span> <span class="p">{</span>
	<span class="kt">uint8_t</span>  <span class="n">signature</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>  <span class="cm">/* &quot;HQOS&quot; signature of config data  */</span>
	<span class="kt">uint16_t</span> <span class="n">version</span><span class="p">;</span>       <span class="cm">/* 1: Initial version               */</span>
	<span class="kt">uint16_t</span> <span class="n">length</span><span class="p">;</span>        <span class="cm">/* config data size in num bytes    */</span>
	<span class="kt">uint16_t</span> <span class="n">checksum</span><span class="p">;</span>      <span class="cm">/* config data bytes checksum       */</span>
	<span class="kt">uint16_t</span> <span class="n">num_entries</span><span class="p">;</span>   <span class="cm">/* Number of entries                */</span>
	<span class="kt">uint16_t</span> <span class="n">size_of_entry</span><span class="p">;</span> <span class="cm">/* Size of each entry in num bytes  */</span>
	<span class="kt">uint8_t</span>  <span class="n">attributes</span><span class="p">;</span>    <span class="cm">/* enable/disable, persistence      */</span>
<span class="cp">#define FCP_PRIO_ATTR_DISABLE   0x0</span>
<span class="cp">#define FCP_PRIO_ATTR_ENABLE    0x1</span>
<span class="cp">#define FCP_PRIO_ATTR_PERSIST   0x2</span>
	<span class="kt">uint8_t</span>  <span class="n">reserved</span><span class="p">;</span>      <span class="cm">/* Reserved for future use          */</span>
<span class="cp">#define FCP_PRIO_CFG_HDR_SIZE   0x10</span>
	<span class="k">struct</span> <span class="n">qla_fcp_prio_entry</span> <span class="n">entry</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>     <span class="cm">/* fcp priority entries  */</span>
<span class="cp">#define FCP_PRIO_CFG_ENTRY_SIZE 0x20</span>
<span class="p">};</span>

<span class="cp">#define FCP_PRIO_CFG_SIZE       (32*1024) </span><span class="cm">/* fcp prio data per port*/</span><span class="cp"></span>

<span class="cm">/* 25XX Support ****************************************************/</span>
<span class="cp">#define FA_FCP_PRIO0_ADDR_25	0x3C000</span>
<span class="cp">#define FA_FCP_PRIO1_ADDR_25	0x3E000</span>

<span class="cm">/* 81XX Flash locations -- occupies second 2MB region. */</span>
<span class="cp">#define FA_BOOT_CODE_ADDR_81	0x80000</span>
<span class="cp">#define FA_RISC_CODE_ADDR_81	0xA0000</span>
<span class="cp">#define FA_FW_AREA_ADDR_81	0xC0000</span>
<span class="cp">#define FA_VPD_NVRAM_ADDR_81	0xD0000</span>
<span class="cp">#define FA_VPD0_ADDR_81		0xD0000</span>
<span class="cp">#define FA_VPD1_ADDR_81		0xD0400</span>
<span class="cp">#define FA_NVRAM0_ADDR_81	0xD0080</span>
<span class="cp">#define FA_NVRAM1_ADDR_81	0xD0180</span>
<span class="cp">#define FA_FEATURE_ADDR_81	0xD4000</span>
<span class="cp">#define FA_FLASH_DESCR_ADDR_81	0xD8000</span>
<span class="cp">#define FA_FLASH_LAYOUT_ADDR_81	0xD8400</span>
<span class="cp">#define FA_HW_EVENT0_ADDR_81	0xDC000</span>
<span class="cp">#define FA_HW_EVENT1_ADDR_81	0xDC400</span>
<span class="cp">#define FA_NPIV_CONF0_ADDR_81	0xD1000</span>
<span class="cp">#define FA_NPIV_CONF1_ADDR_81	0xD2000</span>

<span class="cm">/* 83XX Flash locations -- occupies second 8MB region. */</span>
<span class="cp">#define FA_FLASH_LAYOUT_ADDR_83	0xFC400</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
