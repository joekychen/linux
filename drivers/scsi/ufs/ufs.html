<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › scsi › ufs › ufs.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>ufs.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Universal Flash Storage Host controller driver</span>
<span class="cm"> *</span>
<span class="cm"> * This code is based on drivers/scsi/ufs/ufs.h</span>
<span class="cm"> * Copyright (C) 2011-2012 Samsung India Software Operations</span>
<span class="cm"> *</span>
<span class="cm"> * Santosh Yaraganavi &lt;santosh.sy@samsung.com&gt;</span>
<span class="cm"> * Vinayak Holikatti &lt;h.vinayak@samsung.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Public License</span>
<span class="cm"> * as published by the Free Software Foundation; either version 2</span>
<span class="cm"> * of the License, or (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * NO WARRANTY</span>
<span class="cm"> * THE PROGRAM IS PROVIDED ON AN &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR</span>
<span class="cm"> * CONDITIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED INCLUDING, WITHOUT</span>
<span class="cm"> * LIMITATION, ANY WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT,</span>
<span class="cm"> * MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. Each Recipient is</span>
<span class="cm"> * solely responsible for determining the appropriateness of using and</span>
<span class="cm"> * distributing the Program and assumes all risks associated with its</span>
<span class="cm"> * exercise of rights under this Agreement, including but not limited to</span>
<span class="cm"> * the risks and costs of program errors, damage to or loss of data,</span>
<span class="cm"> * programs or equipment, and unavailability or interruption of operations.</span>

<span class="cm"> * DISCLAIMER OF LIABILITY</span>
<span class="cm"> * NEITHER RECIPIENT NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR ANY</span>
<span class="cm"> * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span>
<span class="cm"> * DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED AND</span>
<span class="cm"> * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR</span>
<span class="cm"> * TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE</span>
<span class="cm"> * USE OR DISTRIBUTION OF THE PROGRAM OR THE EXERCISE OF ANY RIGHTS GRANTED</span>
<span class="cm"> * HEREUNDER, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES</span>

<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301,</span>
<span class="cm"> * USA.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _UFS_H</span>
<span class="cp">#define _UFS_H</span>

<span class="cp">#define MAX_CDB_SIZE	16</span>

<span class="cp">#define UPIU_HEADER_DWORD(byte3, byte2, byte1, byte0)\</span>
<span class="cp">			((byte3 &lt;&lt; 24) | (byte2 &lt;&lt; 16) |\</span>
<span class="cp">			 (byte1 &lt;&lt; 8) | (byte0))</span>

<span class="cm">/*</span>
<span class="cm"> * UFS Protocol Information Unit related definitions</span>
<span class="cm"> */</span>

<span class="cm">/* Task management functions */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">UFS_ABORT_TASK</span>		<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">UFS_ABORT_TASK_SET</span>	<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">UFS_CLEAR_TASK_SET</span>	<span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">UFS_LOGICAL_RESET</span>	<span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">UFS_QUERY_TASK</span>		<span class="o">=</span> <span class="mh">0x80</span><span class="p">,</span>
	<span class="n">UFS_QUERY_TASK_SET</span>	<span class="o">=</span> <span class="mh">0x81</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* UTP UPIU Transaction Codes Initiator to Target */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">UPIU_TRANSACTION_NOP_OUT</span>	<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">UPIU_TRANSACTION_COMMAND</span>	<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">UPIU_TRANSACTION_DATA_OUT</span>	<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">UPIU_TRANSACTION_TASK_REQ</span>	<span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">UPIU_TRANSACTION_QUERY_REQ</span>	<span class="o">=</span> <span class="mh">0x26</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* UTP UPIU Transaction Codes Target to Initiator */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">UPIU_TRANSACTION_NOP_IN</span>		<span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span>
	<span class="n">UPIU_TRANSACTION_RESPONSE</span>	<span class="o">=</span> <span class="mh">0x21</span><span class="p">,</span>
	<span class="n">UPIU_TRANSACTION_DATA_IN</span>	<span class="o">=</span> <span class="mh">0x22</span><span class="p">,</span>
	<span class="n">UPIU_TRANSACTION_TASK_RSP</span>	<span class="o">=</span> <span class="mh">0x24</span><span class="p">,</span>
	<span class="n">UPIU_TRANSACTION_READY_XFER</span>	<span class="o">=</span> <span class="mh">0x31</span><span class="p">,</span>
	<span class="n">UPIU_TRANSACTION_QUERY_RSP</span>	<span class="o">=</span> <span class="mh">0x36</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* UPIU Read/Write flags */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">UPIU_CMD_FLAGS_NONE</span>	<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">UPIU_CMD_FLAGS_WRITE</span>	<span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span>
	<span class="n">UPIU_CMD_FLAGS_READ</span>	<span class="o">=</span> <span class="mh">0x40</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* UPIU Task Attributes */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">UPIU_TASK_ATTR_SIMPLE</span>	<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">UPIU_TASK_ATTR_ORDERED</span>	<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">UPIU_TASK_ATTR_HEADQ</span>	<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">UPIU_TASK_ATTR_ACA</span>	<span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* UTP QUERY Transaction Specific Fields OpCode */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">UPIU_QUERY_OPCODE_NOP</span>		<span class="o">=</span> <span class="mh">0x0</span><span class="p">,</span>
	<span class="n">UPIU_QUERY_OPCODE_READ_DESC</span>	<span class="o">=</span> <span class="mh">0x1</span><span class="p">,</span>
	<span class="n">UPIU_QUERY_OPCODE_WRITE_DESC</span>	<span class="o">=</span> <span class="mh">0x2</span><span class="p">,</span>
	<span class="n">UPIU_QUERY_OPCODE_READ_ATTR</span>	<span class="o">=</span> <span class="mh">0x3</span><span class="p">,</span>
	<span class="n">UPIU_QUERY_OPCODE_WRITE_ATTR</span>	<span class="o">=</span> <span class="mh">0x4</span><span class="p">,</span>
	<span class="n">UPIU_QUERY_OPCODE_READ_FLAG</span>	<span class="o">=</span> <span class="mh">0x5</span><span class="p">,</span>
	<span class="n">UPIU_QUERY_OPCODE_SET_FLAG</span>	<span class="o">=</span> <span class="mh">0x6</span><span class="p">,</span>
	<span class="n">UPIU_QUERY_OPCODE_CLEAR_FLAG</span>	<span class="o">=</span> <span class="mh">0x7</span><span class="p">,</span>
	<span class="n">UPIU_QUERY_OPCODE_TOGGLE_FLAG</span>	<span class="o">=</span> <span class="mh">0x8</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* UTP Transfer Request Command Type (CT) */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">UPIU_COMMAND_SET_TYPE_SCSI</span>	<span class="o">=</span> <span class="mh">0x0</span><span class="p">,</span>
	<span class="n">UPIU_COMMAND_SET_TYPE_UFS</span>	<span class="o">=</span> <span class="mh">0x1</span><span class="p">,</span>
	<span class="n">UPIU_COMMAND_SET_TYPE_QUERY</span>	<span class="o">=</span> <span class="mh">0x2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">MASK_SCSI_STATUS</span>	<span class="o">=</span> <span class="mh">0xFF</span><span class="p">,</span>
	<span class="n">MASK_TASK_RESPONSE</span>	<span class="o">=</span> <span class="mh">0xFF00</span><span class="p">,</span>
	<span class="n">MASK_RSP_UPIU_RESULT</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* Task management service response */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">UPIU_TASK_MANAGEMENT_FUNC_COMPL</span>		<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">UPIU_TASK_MANAGEMENT_FUNC_NOT_SUPPORTED</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">UPIU_TASK_MANAGEMENT_FUNC_SUCCEEDED</span>	<span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">UPIU_TASK_MANAGEMENT_FUNC_FAILED</span>	<span class="o">=</span> <span class="mh">0x05</span><span class="p">,</span>
	<span class="n">UPIU_INCORRECT_LOGICAL_UNIT_NO</span>		<span class="o">=</span> <span class="mh">0x09</span><span class="p">,</span>
<span class="p">};</span>
<span class="cm">/**</span>
<span class="cm"> * struct utp_upiu_header - UPIU header structure</span>
<span class="cm"> * @dword_0: UPIU header DW-0</span>
<span class="cm"> * @dword_1: UPIU header DW-1</span>
<span class="cm"> * @dword_2: UPIU header DW-2</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">utp_upiu_header</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">dword_0</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dword_1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dword_2</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct utp_upiu_cmd - Command UPIU structure</span>
<span class="cm"> * @header: UPIU header structure DW-0 to DW-2</span>
<span class="cm"> * @data_transfer_len: Data Transfer Length DW-3</span>
<span class="cm"> * @cdb: Command Descriptor Block CDB DW-4 to DW-7</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">utp_upiu_cmd</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">utp_upiu_header</span> <span class="n">header</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">exp_data_transfer_len</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cdb</span><span class="p">[</span><span class="n">MAX_CDB_SIZE</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct utp_upiu_rsp - Response UPIU structure</span>
<span class="cm"> * @header: UPIU header DW-0 to DW-2</span>
<span class="cm"> * @residual_transfer_count: Residual transfer count DW-3</span>
<span class="cm"> * @reserved: Reserved double words DW-4 to DW-7</span>
<span class="cm"> * @sense_data_len: Sense data length DW-8 U16</span>
<span class="cm"> * @sense_data: Sense data field DW-8 to DW-12</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">utp_upiu_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">utp_upiu_header</span> <span class="n">header</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">residual_transfer_count</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">sense_data_len</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">sense_data</span><span class="p">[</span><span class="mi">18</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct utp_upiu_task_req - Task request UPIU structure</span>
<span class="cm"> * @header - UPIU header structure DW0 to DW-2</span>
<span class="cm"> * @input_param1: Input parameter 1 DW-3</span>
<span class="cm"> * @input_param2: Input parameter 2 DW-4</span>
<span class="cm"> * @input_param3: Input parameter 3 DW-5</span>
<span class="cm"> * @reserved: Reserved double words DW-6 to DW-7</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">utp_upiu_task_req</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">utp_upiu_header</span> <span class="n">header</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">input_param1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">input_param2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">input_param3</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct utp_upiu_task_rsp - Task Management Response UPIU structure</span>
<span class="cm"> * @header: UPIU header structure DW0-DW-2</span>
<span class="cm"> * @output_param1: Ouput parameter 1 DW3</span>
<span class="cm"> * @output_param2: Output parameter 2 DW4</span>
<span class="cm"> * @reserved: Reserved double words DW-5 to DW-7</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">utp_upiu_task_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">utp_upiu_header</span> <span class="n">header</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">output_param1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">output_param2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* End of Header */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
