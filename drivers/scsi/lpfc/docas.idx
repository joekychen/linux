f | Makefile | g | 1.7K |  | James Smart | james.smart@emulex.com | 1332833192 |  | [SCSI] lpfc 8.3.30: Update copyright date for files modified in 2012  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_attr.c | s | 147K | 4449 | James Smart | james.smart@emulex.com | 1332833193 |  | [SCSI] lpfc 8.3.30: Update copyright date for files modified in 2012  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_hw.h | s | 110K | 3438 | James Smart | james.smart@emulex.com | 1337249395 |  | [SCSI] lpfc 8.3.31: Correct point-to-point mode discovery errors on LPe16xxx  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_disc.h | s | 12K | 246 | James Smart | james.smart@emulex.com | 1292956644 |  | [SCSI] lpfc 8.3.20: Updates to FC discovery commands  Updated commands used for ELS to utilize VPI Allocate RPI at node creation time and pass in ELS commnads.  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <James.Bottomley@suse.de>
f | lpfc_debugfs.c | s | 131K | 4103 | James Smart | james.smart@emulex.com | 1337249512 |  | [SCSI] lpfc 8.3.31: Debug helper utility routines for dumping various SLI4 queues  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_debugfs.h | s | 19K | 592 | James Smart | james.smart@emulex.com | 1337249512 |  | [SCSI] lpfc 8.3.31: Debug helper utility routines for dumping various SLI4 queues  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_nl.h | s | 5.4K | 156 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | lpfc_vport.h | s | 3.8K | 98 | James Smart | James.Smart@Emulex.Com | 1223904537 |  | [SCSI] lpfc 8.2.8 v2 : Add statistical reporting control and additional fc vendor events  Added support for new sysfs attributes: lpfc_stat_data_ctrl and lpfc_max_scsicmpl_time. The attributes control statistical reporting of io load.  Added support for new fc vendor events for error reporting.  Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <James.Bottomley@HansenPartnership.com>
f | lpfc_bsg.c | s | 146K | 4645 | James Smart | james.smart@emulex.com | 1337249783 |  | [SCSI] lpfc 8.3.31: Fix bug with driver using the wrong xritag when sending an els echo  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_hbadisc.c | s | 178K | 5541 | James Smart | james.smart@emulex.com | 1337249395 |  | [SCSI] lpfc 8.3.31: Correct point-to-point mode discovery errors on LPe16xxx  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_vport.c | s | 24K | 792 | James Smart | james.smart@emulex.com | 1323932264 |  | [SCSI] Lpfc 8.3.28: FC and SCSI Discovery Fixes  FC and SCSI Discovery Fixes:  - Clear the virtual fabrics bit (word 1 bit 30) when sending the FLOGI   and FDISC. (CR 124339) - Return a MLQUEUE_DEVICE_BUSY if the driver detects that an I/O is being   retried too quickly (CR 124668) - Remove NDLP reference put in lpfc_cmpl_els_logo_acc for all but fabric   nodes (CR 123924) - Only retry FDISCs every second and stop retrying after devloss number   of retries (CR 13939) - Check to see if vports are unloading before adding them to the vport   work array. (CR 124996) - Fixed illegal state transition during driver unload (CR 124191) - Added missing protection on setting/clearing of vport->fc_flag bit (CR 126002) - Set NPIV flag in lpfc_mbx_process_link_up for all ports sli3 and   above. (CR 126094) - Clear FCP command bytes that are not used. (CR 126209)  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_mem.c | s | 15K | 481 | James Smart | james.smart@emulex.com | 1323932265 |  | [SCSI] lpfc 8.3.28: Critical Miscellaneous fixes  - Make lpfc_sli4_pci_mem_unset interface type aware (CR 124390) - Convert byte count to word count when calling __iowrite32_copy (CR 122550) - Checked the ERR1 and ERR2 registers for error attention due to SLI   Port state affected by forced debug dump. (CR 122986, 122426, 124859) - Use the lpfc_readl routine instead of the readl for the port status   register read in lpfc_handle_eratt_s4 (CR 125403) - Call lpfc_sli4_queue_destroy inside of lpfc_sli4_brdreset before doing   a pci function reset (CR 125124, 125168, 125572, 125622) - Zero out the HBQ when it is allocated (CR 125663) - Alter port reset log messages to indicate error type (CR 125989) - Added proper NULL pointer checking to all the places that accessing   the queue memory (CR 125832)  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc.h | s | 33K | 889 | James Smart | james.smart@emulex.com | 1337249512 |  | [SCSI] lpfc 8.3.31: Debug helper utility routines for dumping various SLI4 queues  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_scsi.c | s | 153K | 4684 | James Smart | james.smart@emulex.com | 1337249838 |  | [SCSI] lpfc 8.3.31: Fixed system crash due to not providing SCSI error-handling host reset handler  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_sli.h | s | 11K | 266 | James Smart | james.smart@emulex.com | 1337248649 |  | [SCSI] lpfc 8.3.31: Fixed system panic due to midlayer abort and driver complete race on SCSI cmd  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_ct.c | s | 53K | 1690 | James Smart | james.smart@emulex.com | 1329660532 |  | [SCSI] lpfc 8.3.29: SLI related fixes  SLI related fixes:  - Fix REG_RPI fails on SLI4 HBA putting NPort into NPR state (126230) - Fix ELS FDISC failing with local reject / invalid RPI. (126350) - Fix reset port when reset is needed during fw_dump (125807) - Fix unbounded firmware revision string from port cause panic (126560) - Fix driver behavior when receiving an ADISC (126654) - Fix driver not returning when bad ndlp found in abts error event   handling (126209) - Add more driver logs in area of SLI4 port error attention and reset   recovery (126813, 124466) - Fix failure in handling large CQ/EQ identifiers in an IOV   environment (126856) - Fix for driver using duplicate RPIs after lancer port reset (126723) - Clear vport->fc_myDID in lpfc_els_issue_fdisc to guarentee a   zero SID (126779, 126897) - Fix for SLI4 Port delivery for BLS ABORT ACC (126289)  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_els.c | s | 252K | 7255 | James Smart | james.smart@emulex.com | 1337249425 |  | [SCSI] lpfc 8.3.31: Fix unsol abts xri lookup  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_init.c | s | 309K | 9456 | James Smart | james.smart@emulex.com | 1337246962 |  | [SCSI] lpfc 8.3.31: Correct handling of SLI4-port XRI resource-provisioning profile change  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_scsi.h | s | 5.8K | 139 | James Smart | james.smart@emulex.com | 1332833194 |  | [SCSI] lpfc 8.3.30: Revert fix for Link Pull Causes I/O Failures  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_version.h | s | 1.6K | 26 | James Smart | james.smart@emulex.com | 1337249910 |  | [SCSI] lpfc 8.3.31: Update lpfc to version 8.3.31  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_sli4.h | s | 21K | 605 | James Smart | james.smart@emulex.com | 1337249395 |  | [SCSI] lpfc 8.3.31: Correct point-to-point mode discovery errors on LPe16xxx  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_hw4.h | s | 117K | 3341 | James Smart | james.smart@emulex.com | 1337249395 |  | [SCSI] lpfc 8.3.31: Correct point-to-point mode discovery errors on LPe16xxx  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_nportdisc.c | s | 70K | 2100 | James Smart | james.smart@emulex.com | 1337249395 |  | [SCSI] lpfc 8.3.31: Correct point-to-point mode discovery errors on LPe16xxx  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_compat.h | s | 3.0K | 79 | James Smart | james.smart@emulex.com | 1323932265 |  | [SCSI] lpfc 8.3.28: Critical Miscellaneous fixes  - Make lpfc_sli4_pci_mem_unset interface type aware (CR 124390) - Convert byte count to word count when calling __iowrite32_copy (CR 122550) - Checked the ERR1 and ERR2 registers for error attention due to SLI   Port state affected by forced debug dump. (CR 122986, 122426, 124859) - Use the lpfc_readl routine instead of the readl for the port status   register read in lpfc_handle_eratt_s4 (CR 125403) - Call lpfc_sli4_queue_destroy inside of lpfc_sli4_brdreset before doing   a pci function reset (CR 125124, 125168, 125572, 125622) - Zero out the HBQ when it is allocated (CR 125663) - Alter port reset log messages to indicate error type (CR 125989) - Added proper NULL pointer checking to all the places that accessing   the queue memory (CR 125832)  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_crtn.h | s | 22K | 431 | James Smart | james.smart@emulex.com | 1337248649 |  | [SCSI] lpfc 8.3.31: Fixed system panic due to midlayer abort and driver complete race on SCSI cmd  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_mbox.c | s | 76K | 2118 | James Smart | james.smart@emulex.com | 1323932265 |  | [SCSI] lpfc 8.3.28: Add Loopback support for SLI4 adapters  - Add Basic support for SLI4 Loopback.   (CR 124951, 125766, 124951, 125843, 125832, 125843) - Added missing protection in setting/clearing of phba->link_flag bit   field (CR 125994) - Use link type and link number obtained from READ_CONFIG mailbox   command. (CR 126264)  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_bsg.h | s | 8.8K | 257 | James Smart | james.smart@emulex.com | 1337247057 |  | [SCSI] lpfc 8.3.31: Fix bug with driver not supporting the get controller attributes command  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_logmsg.h | s | 2.9K | 55 | James Smart | james.smart@emulex.com | 1318782528 |  | [SCSI] lpfc 8.3.27: Miscellanous logic and interface fixes  Miscellanous logic and interface fixes  - Fix lpfc_init_vfi_cmpl to check the interface type for interface type 0   before parsing the results. - Cast uint32_t values that are multiplied to uint64_t before the   multiplication. - Instead of "break" statement when PCI read returned error, use the goto   statement to the end of the routine after setting return value - moved the msleep(10) to the beginning of the wait loop for checking the   SLIPort_Status register - Added the code to follow the existing wait for SLIPort_Status register RDY,   ERR, and RN bits to be set by the port before proceeding to perform PCI   function reset. - Do not override ulpCt_h and ulpCt_l for SLI 4 ports. - For vport delete, call lpfc_nlp_put when the vport's vpi state is not   marked with VPI_REGISTERED. - Added missed fields into the driver's Controller Attributes Structure - Changed ringing EQ/CQ/RQ doorbell register to be dependent on the size   of the queue. - Return -EACCES in issue_reset if cfg_enable_hba_reset is zero. - Added new logging flag LOG_FCP_UNDER 0x00040000 to qualify underrun logging. - Add a check in the fabric name display routine to display 0 if the port   state is <= FLOGI. - Add a check to the switch statement in lpfc_decode_firmware_rev to check   for an 'X'.  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | lpfc_sli.c | s | 486K | 14584 | James Smart | james.smart@emulex.com | 1337249838 |  | [SCSI] lpfc 8.3.31: Fixed system crash due to not providing SCSI error-handling host reset handler  Signed-off-by: Alex Iannicelli <alex.iannicelli@emulex.com> Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
