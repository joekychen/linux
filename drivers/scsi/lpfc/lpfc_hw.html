<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › scsi › lpfc › lpfc_hw.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>lpfc_hw.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*******************************************************************</span>
<span class="cm"> * This file is part of the Emulex Linux Device Driver for         *</span>
<span class="cm"> * Fibre Channel Host Bus Adapters.                                *</span>
<span class="cm"> * Copyright (C) 2004-2011 Emulex.  All rights reserved.           *</span>
<span class="cm"> * EMULEX and SLI are trademarks of Emulex.                        *</span>
<span class="cm"> * www.emulex.com                                                  *</span>
<span class="cm"> *                                                                 *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or   *</span>
<span class="cm"> * modify it under the terms of version 2 of the GNU General       *</span>
<span class="cm"> * Public License as published by the Free Software Foundation.    *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful. *</span>
<span class="cm"> * ALL EXPRESS OR IMPLIED CONDITIONS, REPRESENTATIONS AND          *</span>
<span class="cm"> * WARRANTIES, INCLUDING ANY IMPLIED WARRANTY OF MERCHANTABILITY,  *</span>
<span class="cm"> * FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT, ARE      *</span>
<span class="cm"> * DISCLAIMED, EXCEPT TO THE EXTENT THAT SUCH DISCLAIMERS ARE HELD *</span>
<span class="cm"> * TO BE LEGALLY INVALID.  See the GNU General Public License for  *</span>
<span class="cm"> * more details, a copy of which can be found in the file COPYING  *</span>
<span class="cm"> * included with this package.                                     *</span>
<span class="cm"> *******************************************************************/</span>

<span class="cp">#define FDMI_DID        0xfffffaU</span>
<span class="cp">#define NameServer_DID  0xfffffcU</span>
<span class="cp">#define SCR_DID         0xfffffdU</span>
<span class="cp">#define Fabric_DID      0xfffffeU</span>
<span class="cp">#define Bcast_DID       0xffffffU</span>
<span class="cp">#define Mask_DID        0xffffffU</span>
<span class="cp">#define CT_DID_MASK     0xffff00U</span>
<span class="cp">#define Fabric_DID_MASK 0xfff000U</span>
<span class="cp">#define WELL_KNOWN_DID_MASK 0xfffff0U</span>

<span class="cp">#define PT2PT_LocalID	1</span>
<span class="cp">#define PT2PT_RemoteID	2</span>

<span class="cp">#define FF_DEF_EDTOV          2000	</span><span class="cm">/* Default E_D_TOV (2000ms) */</span><span class="cp"></span>
<span class="cp">#define FF_DEF_ALTOV            15	</span><span class="cm">/* Default AL_TIME (15ms) */</span><span class="cp"></span>
<span class="cp">#define FF_DEF_RATOV             2	</span><span class="cm">/* Default RA_TOV (2s) */</span><span class="cp"></span>
<span class="cp">#define FF_DEF_ARBTOV         1900	</span><span class="cm">/* Default ARB_TOV (1900ms) */</span><span class="cp"></span>

<span class="cp">#define LPFC_BUF_RING0        64	</span><span class="cm">/* Number of buffers to post to RING</span>
<span class="cm">					   0 */</span><span class="cp"></span>

<span class="cp">#define FCELSSIZE             1024	</span><span class="cm">/* maximum ELS transfer size */</span><span class="cp"></span>

<span class="cp">#define LPFC_FCP_RING            0	</span><span class="cm">/* ring 0 for FCP initiator commands */</span><span class="cp"></span>
<span class="cp">#define LPFC_EXTRA_RING          1	</span><span class="cm">/* ring 1 for other protocols */</span><span class="cp"></span>
<span class="cp">#define LPFC_ELS_RING            2	</span><span class="cm">/* ring 2 for ELS commands */</span><span class="cp"></span>
<span class="cp">#define LPFC_FCP_NEXT_RING       3</span>

<span class="cp">#define SLI2_IOCB_CMD_R0_ENTRIES    172	</span><span class="cm">/* SLI-2 FCP command ring entries */</span><span class="cp"></span>
<span class="cp">#define SLI2_IOCB_RSP_R0_ENTRIES    134	</span><span class="cm">/* SLI-2 FCP response ring entries */</span><span class="cp"></span>
<span class="cp">#define SLI2_IOCB_CMD_R1_ENTRIES      4	</span><span class="cm">/* SLI-2 extra command ring entries */</span><span class="cp"></span>
<span class="cp">#define SLI2_IOCB_RSP_R1_ENTRIES      4	</span><span class="cm">/* SLI-2 extra response ring entries */</span><span class="cp"></span>
<span class="cp">#define SLI2_IOCB_CMD_R1XTRA_ENTRIES 36	</span><span class="cm">/* SLI-2 extra FCP cmd ring entries */</span><span class="cp"></span>
<span class="cp">#define SLI2_IOCB_RSP_R1XTRA_ENTRIES 52	</span><span class="cm">/* SLI-2 extra FCP rsp ring entries */</span><span class="cp"></span>
<span class="cp">#define SLI2_IOCB_CMD_R2_ENTRIES     20	</span><span class="cm">/* SLI-2 ELS command ring entries */</span><span class="cp"></span>
<span class="cp">#define SLI2_IOCB_RSP_R2_ENTRIES     20	</span><span class="cm">/* SLI-2 ELS response ring entries */</span><span class="cp"></span>
<span class="cp">#define SLI2_IOCB_CMD_R3_ENTRIES      0</span>
<span class="cp">#define SLI2_IOCB_RSP_R3_ENTRIES      0</span>
<span class="cp">#define SLI2_IOCB_CMD_R3XTRA_ENTRIES 24</span>
<span class="cp">#define SLI2_IOCB_RSP_R3XTRA_ENTRIES 32</span>

<span class="cp">#define SLI2_IOCB_CMD_SIZE	32</span>
<span class="cp">#define SLI2_IOCB_RSP_SIZE	32</span>
<span class="cp">#define SLI3_IOCB_CMD_SIZE	128</span>
<span class="cp">#define SLI3_IOCB_RSP_SIZE	64</span>

<span class="cp">#define LPFC_UNREG_ALL_RPIS_VPORT	0xffff</span>
<span class="cp">#define LPFC_UNREG_ALL_DFLT_RPIS	0xffffffff</span>

<span class="cm">/* vendor ID used in SCSI netlink calls */</span>
<span class="cp">#define LPFC_NL_VENDOR_ID (SCSI_NL_VID_TYPE_PCI | PCI_VENDOR_ID_EMULEX)</span>

<span class="cp">#define FW_REV_STR_SIZE	32</span>
<span class="cm">/* Common Transport structures and definitions */</span>

<span class="k">union</span> <span class="n">CtRevisionId</span> <span class="p">{</span>
	<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">Revision</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
		<span class="kt">uint32_t</span> <span class="n">InId</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">bits</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">word</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">CtCommandResponse</span> <span class="p">{</span>
	<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">CmdRsp</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
		<span class="kt">uint32_t</span> <span class="n">Size</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">bits</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">word</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define FC4_FEATURE_INIT 0x2</span>
<span class="cp">#define FC4_FEATURE_TARGET 0x1</span>

<span class="k">struct</span> <span class="n">lpfc_sli_ct_request</span> <span class="p">{</span>
	<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="k">union</span> <span class="n">CtRevisionId</span> <span class="n">RevisionId</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">FsType</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">FsSubType</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">Options</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">Rsrvd1</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">CtCommandResponse</span> <span class="n">CommandResponse</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">Rsrvd2</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">ReasonCode</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">Explanation</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">VendorUnique</span><span class="p">;</span>

	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">PortID</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">gid</span> <span class="p">{</span>
			<span class="kt">uint8_t</span> <span class="n">PortType</span><span class="p">;</span>	<span class="cm">/* for GID_PT requests */</span>
			<span class="kt">uint8_t</span> <span class="n">DomainScope</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">AreaScope</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">Fc4Type</span><span class="p">;</span>	<span class="cm">/* for GID_FT requests */</span>
		<span class="p">}</span> <span class="n">gid</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">rft</span> <span class="p">{</span>
			<span class="kt">uint32_t</span> <span class="n">PortId</span><span class="p">;</span>	<span class="cm">/* For RFT_ID requests */</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
			<span class="kt">uint32_t</span> <span class="n">rsvd0</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">fcpReg</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Type 8 */</span>
			<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">ipReg</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Type 5 */</span>
			<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
			<span class="kt">uint32_t</span> <span class="n">rsvd0</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">fcpReg</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Type 8 */</span>
			<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">ipReg</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Type 5 */</span>
			<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
<span class="cp">#endif</span>

			<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">rft</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">rnn</span> <span class="p">{</span>
			<span class="kt">uint32_t</span> <span class="n">PortId</span><span class="p">;</span>	<span class="cm">/* For RNN_ID requests */</span>
			<span class="kt">uint8_t</span> <span class="n">wwnn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">rnn</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">rsnn</span> <span class="p">{</span>	<span class="cm">/* For RSNN_ID requests */</span>
			<span class="kt">uint8_t</span> <span class="n">wwnn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
			<span class="kt">uint8_t</span> <span class="n">len</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">symbname</span><span class="p">[</span><span class="mi">255</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">rsnn</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">da_id</span> <span class="p">{</span> <span class="cm">/* For DA_ID requests */</span>
			<span class="kt">uint32_t</span> <span class="n">port_id</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">da_id</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">rspn</span> <span class="p">{</span>	<span class="cm">/* For RSPN_ID requests */</span>
			<span class="kt">uint32_t</span> <span class="n">PortId</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">len</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">symbname</span><span class="p">[</span><span class="mi">255</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">rspn</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">gff</span> <span class="p">{</span>
			<span class="kt">uint32_t</span> <span class="n">PortId</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">gff</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">gff_acc</span> <span class="p">{</span>
			<span class="kt">uint8_t</span> <span class="n">fbits</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">gff_acc</span><span class="p">;</span>
<span class="cp">#define FCP_TYPE_FEATURE_OFFSET 7</span>
		<span class="k">struct</span> <span class="n">rff</span> <span class="p">{</span>
			<span class="kt">uint32_t</span> <span class="n">PortId</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
			<span class="kt">uint8_t</span> <span class="n">fbits</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">type_code</span><span class="p">;</span>     <span class="cm">/* type=8 for FCP */</span>
		<span class="p">}</span> <span class="n">rff</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define  SLI_CT_REVISION        1</span>
<span class="cp">#define  GID_REQUEST_SZ   (offsetof(struct lpfc_sli_ct_request, un) + \</span>
<span class="cp">			   sizeof(struct gid))</span>
<span class="cp">#define  GFF_REQUEST_SZ   (offsetof(struct lpfc_sli_ct_request, un) + \</span>
<span class="cp">			   sizeof(struct gff))</span>
<span class="cp">#define  RFT_REQUEST_SZ   (offsetof(struct lpfc_sli_ct_request, un) + \</span>
<span class="cp">			   sizeof(struct rft))</span>
<span class="cp">#define  RFF_REQUEST_SZ   (offsetof(struct lpfc_sli_ct_request, un) + \</span>
<span class="cp">			   sizeof(struct rff))</span>
<span class="cp">#define  RNN_REQUEST_SZ   (offsetof(struct lpfc_sli_ct_request, un) + \</span>
<span class="cp">			   sizeof(struct rnn))</span>
<span class="cp">#define  RSNN_REQUEST_SZ  (offsetof(struct lpfc_sli_ct_request, un) + \</span>
<span class="cp">			   sizeof(struct rsnn))</span>
<span class="cp">#define DA_ID_REQUEST_SZ (offsetof(struct lpfc_sli_ct_request, un) + \</span>
<span class="cp">			  sizeof(struct da_id))</span>
<span class="cp">#define  RSPN_REQUEST_SZ  (offsetof(struct lpfc_sli_ct_request, un) + \</span>
<span class="cp">			   sizeof(struct rspn))</span>

<span class="cm">/*</span>
<span class="cm"> * FsType Definitions</span>
<span class="cm"> */</span>

<span class="cp">#define  SLI_CT_MANAGEMENT_SERVICE        0xFA</span>
<span class="cp">#define  SLI_CT_TIME_SERVICE              0xFB</span>
<span class="cp">#define  SLI_CT_DIRECTORY_SERVICE         0xFC</span>
<span class="cp">#define  SLI_CT_FABRIC_CONTROLLER_SERVICE 0xFD</span>

<span class="cm">/*</span>
<span class="cm"> * Directory Service Subtypes</span>
<span class="cm"> */</span>

<span class="cp">#define  SLI_CT_DIRECTORY_NAME_SERVER     0x02</span>

<span class="cm">/*</span>
<span class="cm"> * Response Codes</span>
<span class="cm"> */</span>

<span class="cp">#define  SLI_CT_RESPONSE_FS_RJT           0x8001</span>
<span class="cp">#define  SLI_CT_RESPONSE_FS_ACC           0x8002</span>

<span class="cm">/*</span>
<span class="cm"> * Reason Codes</span>
<span class="cm"> */</span>

<span class="cp">#define  SLI_CT_NO_ADDITIONAL_EXPL	  0x0</span>
<span class="cp">#define  SLI_CT_INVALID_COMMAND           0x01</span>
<span class="cp">#define  SLI_CT_INVALID_VERSION           0x02</span>
<span class="cp">#define  SLI_CT_LOGICAL_ERROR             0x03</span>
<span class="cp">#define  SLI_CT_INVALID_IU_SIZE           0x04</span>
<span class="cp">#define  SLI_CT_LOGICAL_BUSY              0x05</span>
<span class="cp">#define  SLI_CT_PROTOCOL_ERROR            0x07</span>
<span class="cp">#define  SLI_CT_UNABLE_TO_PERFORM_REQ     0x09</span>
<span class="cp">#define  SLI_CT_REQ_NOT_SUPPORTED         0x0b</span>
<span class="cp">#define  SLI_CT_HBA_INFO_NOT_REGISTERED	  0x10</span>
<span class="cp">#define  SLI_CT_MULTIPLE_HBA_ATTR_OF_SAME_TYPE  0x11</span>
<span class="cp">#define  SLI_CT_INVALID_HBA_ATTR_BLOCK_LEN      0x12</span>
<span class="cp">#define  SLI_CT_HBA_ATTR_NOT_PRESENT	  0x13</span>
<span class="cp">#define  SLI_CT_PORT_INFO_NOT_REGISTERED  0x20</span>
<span class="cp">#define  SLI_CT_MULTIPLE_PORT_ATTR_OF_SAME_TYPE 0x21</span>
<span class="cp">#define  SLI_CT_INVALID_PORT_ATTR_BLOCK_LEN     0x22</span>
<span class="cp">#define  SLI_CT_VENDOR_UNIQUE             0xff</span>

<span class="cm">/*</span>
<span class="cm"> * Name Server SLI_CT_UNABLE_TO_PERFORM_REQ Explanations</span>
<span class="cm"> */</span>

<span class="cp">#define  SLI_CT_NO_PORT_ID                0x01</span>
<span class="cp">#define  SLI_CT_NO_PORT_NAME              0x02</span>
<span class="cp">#define  SLI_CT_NO_NODE_NAME              0x03</span>
<span class="cp">#define  SLI_CT_NO_CLASS_OF_SERVICE       0x04</span>
<span class="cp">#define  SLI_CT_NO_IP_ADDRESS             0x05</span>
<span class="cp">#define  SLI_CT_NO_IPA                    0x06</span>
<span class="cp">#define  SLI_CT_NO_FC4_TYPES              0x07</span>
<span class="cp">#define  SLI_CT_NO_SYMBOLIC_PORT_NAME     0x08</span>
<span class="cp">#define  SLI_CT_NO_SYMBOLIC_NODE_NAME     0x09</span>
<span class="cp">#define  SLI_CT_NO_PORT_TYPE              0x0A</span>
<span class="cp">#define  SLI_CT_ACCESS_DENIED             0x10</span>
<span class="cp">#define  SLI_CT_INVALID_PORT_ID           0x11</span>
<span class="cp">#define  SLI_CT_DATABASE_EMPTY            0x12</span>

<span class="cm">/*</span>
<span class="cm"> * Name Server Command Codes</span>
<span class="cm"> */</span>

<span class="cp">#define  SLI_CTNS_GA_NXT      0x0100</span>
<span class="cp">#define  SLI_CTNS_GPN_ID      0x0112</span>
<span class="cp">#define  SLI_CTNS_GNN_ID      0x0113</span>
<span class="cp">#define  SLI_CTNS_GCS_ID      0x0114</span>
<span class="cp">#define  SLI_CTNS_GFT_ID      0x0117</span>
<span class="cp">#define  SLI_CTNS_GSPN_ID     0x0118</span>
<span class="cp">#define  SLI_CTNS_GPT_ID      0x011A</span>
<span class="cp">#define  SLI_CTNS_GFF_ID      0x011F</span>
<span class="cp">#define  SLI_CTNS_GID_PN      0x0121</span>
<span class="cp">#define  SLI_CTNS_GID_NN      0x0131</span>
<span class="cp">#define  SLI_CTNS_GIP_NN      0x0135</span>
<span class="cp">#define  SLI_CTNS_GIPA_NN     0x0136</span>
<span class="cp">#define  SLI_CTNS_GSNN_NN     0x0139</span>
<span class="cp">#define  SLI_CTNS_GNN_IP      0x0153</span>
<span class="cp">#define  SLI_CTNS_GIPA_IP     0x0156</span>
<span class="cp">#define  SLI_CTNS_GID_FT      0x0171</span>
<span class="cp">#define  SLI_CTNS_GID_PT      0x01A1</span>
<span class="cp">#define  SLI_CTNS_RPN_ID      0x0212</span>
<span class="cp">#define  SLI_CTNS_RNN_ID      0x0213</span>
<span class="cp">#define  SLI_CTNS_RCS_ID      0x0214</span>
<span class="cp">#define  SLI_CTNS_RFT_ID      0x0217</span>
<span class="cp">#define  SLI_CTNS_RSPN_ID     0x0218</span>
<span class="cp">#define  SLI_CTNS_RPT_ID      0x021A</span>
<span class="cp">#define  SLI_CTNS_RFF_ID      0x021F</span>
<span class="cp">#define  SLI_CTNS_RIP_NN      0x0235</span>
<span class="cp">#define  SLI_CTNS_RIPA_NN     0x0236</span>
<span class="cp">#define  SLI_CTNS_RSNN_NN     0x0239</span>
<span class="cp">#define  SLI_CTNS_DA_ID       0x0300</span>

<span class="cm">/*</span>
<span class="cm"> * Port Types</span>
<span class="cm"> */</span>

<span class="cp">#define  SLI_CTPT_N_PORT      0x01</span>
<span class="cp">#define  SLI_CTPT_NL_PORT     0x02</span>
<span class="cp">#define  SLI_CTPT_FNL_PORT    0x03</span>
<span class="cp">#define  SLI_CTPT_IP          0x04</span>
<span class="cp">#define  SLI_CTPT_FCP         0x08</span>
<span class="cp">#define  SLI_CTPT_NX_PORT     0x7F</span>
<span class="cp">#define  SLI_CTPT_F_PORT      0x81</span>
<span class="cp">#define  SLI_CTPT_FL_PORT     0x82</span>
<span class="cp">#define  SLI_CTPT_E_PORT      0x84</span>

<span class="cp">#define SLI_CT_LAST_ENTRY     0x80000000</span>

<span class="cm">/* Fibre Channel Service Parameter definitions */</span>

<span class="cp">#define FC_PH_4_0   6		</span><span class="cm">/* FC-PH version 4.0 */</span><span class="cp"></span>
<span class="cp">#define FC_PH_4_1   7		</span><span class="cm">/* FC-PH version 4.1 */</span><span class="cp"></span>
<span class="cp">#define FC_PH_4_2   8		</span><span class="cm">/* FC-PH version 4.2 */</span><span class="cp"></span>
<span class="cp">#define FC_PH_4_3   9		</span><span class="cm">/* FC-PH version 4.3 */</span><span class="cp"></span>

<span class="cp">#define FC_PH_LOW   8		</span><span class="cm">/* Lowest supported FC-PH version */</span><span class="cp"></span>
<span class="cp">#define FC_PH_HIGH  9		</span><span class="cm">/* Highest supported FC-PH version */</span><span class="cp"></span>
<span class="cp">#define FC_PH3   0x20		</span><span class="cm">/* FC-PH-3 version */</span><span class="cp"></span>

<span class="cp">#define FF_FRAME_SIZE     2048</span>

<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
			<span class="kt">uint8_t</span> <span class="n">nameType</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 28:31 */</span>
			<span class="kt">uint8_t</span> <span class="n">IEEEextMsn</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 24:27, bit</span>
<span class="cm">						   8:11 of IEEE ext */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
			<span class="kt">uint8_t</span> <span class="n">IEEEextMsn</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 24:27, bit</span>
<span class="cm">						   8:11 of IEEE ext */</span>
			<span class="kt">uint8_t</span> <span class="n">nameType</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 28:31 */</span>
<span class="cp">#endif</span>

<span class="cp">#define NAME_IEEE           0x1	</span><span class="cm">/* IEEE name - nameType */</span><span class="cp"></span>
<span class="cp">#define NAME_IEEE_EXT       0x2	</span><span class="cm">/* IEEE extended name */</span><span class="cp"></span>
<span class="cp">#define NAME_FC_TYPE        0x3	</span><span class="cm">/* FC native name type */</span><span class="cp"></span>
<span class="cp">#define NAME_IP_TYPE        0x4	</span><span class="cm">/* IP address */</span><span class="cp"></span>
<span class="cp">#define NAME_CCITT_TYPE     0xC</span>
<span class="cp">#define NAME_CCITT_GR_TYPE  0xE</span>
			<span class="kt">uint8_t</span> <span class="n">IEEEextLsb</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 16:23, IEEE</span>
<span class="cm">						   extended Lsb */</span>
			<span class="kt">uint8_t</span> <span class="n">IEEE</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>	<span class="cm">/* FC IEEE address */</span>
		<span class="p">}</span> <span class="n">s</span><span class="p">;</span>
		<span class="kt">uint8_t</span> <span class="n">wwn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">u</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">csp</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">fcphHigh</span><span class="p">;</span>	<span class="cm">/* FC Word 0, byte 0 */</span>
	<span class="kt">uint8_t</span> <span class="n">fcphLow</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">bbCreditMsb</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">bbCreditlsb</span><span class="p">;</span>	<span class="cm">/* FC Word 0, byte 3 */</span>

<span class="cm">/*</span>
<span class="cm"> * Word 1 Bit 31 in common service parameter is overloaded.</span>
<span class="cm"> * Word 1 Bit 31 in FLOGI request is multiple NPort request</span>
<span class="cm"> * Word 1 Bit 31 in FLOGI response is clean address bit</span>
<span class="cm"> */</span>
<span class="cp">#define clean_address_bit request_multiple_Nport </span><span class="cm">/* Word 1, bit 31 */</span><span class="cp"></span>
<span class="cm">/*</span>
<span class="cm"> * Word 1 Bit 30 in common service parameter is overloaded.</span>
<span class="cm"> * Word 1 Bit 30 in FLOGI request is Virtual Fabrics</span>
<span class="cm"> * Word 1 Bit 30 in PLOGI request is random offset</span>
<span class="cm"> */</span>
<span class="cp">#define virtual_fabric_support randomOffset </span><span class="cm">/* Word 1, bit 30 */</span><span class="cp"></span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">request_multiple_Nport</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 31 */</span>
	<span class="kt">uint16_t</span> <span class="n">randomOffset</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 30 */</span>
	<span class="kt">uint16_t</span> <span class="n">response_multiple_NPort</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 29 */</span>
	<span class="kt">uint16_t</span> <span class="n">fPort</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 28 */</span>
	<span class="kt">uint16_t</span> <span class="n">altBbCredit</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 27 */</span>
	<span class="kt">uint16_t</span> <span class="n">edtovResolution</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 26 */</span>
	<span class="kt">uint16_t</span> <span class="n">multicast</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 25 */</span>
	<span class="kt">uint16_t</span> <span class="n">broadcast</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 24 */</span>

	<span class="kt">uint16_t</span> <span class="n">huntgroup</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 23 */</span>
	<span class="kt">uint16_t</span> <span class="n">simplex</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 22 */</span>
	<span class="kt">uint16_t</span> <span class="n">word1Reserved1</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 21:19 */</span>
	<span class="kt">uint16_t</span> <span class="n">dhd</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>		<span class="cm">/* FC Word 1, bit 18 */</span>
	<span class="kt">uint16_t</span> <span class="n">contIncSeqCnt</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 17 */</span>
	<span class="kt">uint16_t</span> <span class="n">payloadlength</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 16 */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">broadcast</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 24 */</span>
	<span class="kt">uint16_t</span> <span class="n">multicast</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 25 */</span>
	<span class="kt">uint16_t</span> <span class="n">edtovResolution</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 26 */</span>
	<span class="kt">uint16_t</span> <span class="n">altBbCredit</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 27 */</span>
	<span class="kt">uint16_t</span> <span class="n">fPort</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 28 */</span>
	<span class="kt">uint16_t</span> <span class="n">response_multiple_NPort</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 29 */</span>
	<span class="kt">uint16_t</span> <span class="n">randomOffset</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 30 */</span>
	<span class="kt">uint16_t</span> <span class="n">request_multiple_Nport</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 31 */</span>

	<span class="kt">uint16_t</span> <span class="n">payloadlength</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 16 */</span>
	<span class="kt">uint16_t</span> <span class="n">contIncSeqCnt</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 17 */</span>
	<span class="kt">uint16_t</span> <span class="n">dhd</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>		<span class="cm">/* FC Word 1, bit 18 */</span>
	<span class="kt">uint16_t</span> <span class="n">word1Reserved1</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 21:19 */</span>
	<span class="kt">uint16_t</span> <span class="n">simplex</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 22 */</span>
	<span class="kt">uint16_t</span> <span class="n">huntgroup</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 23 */</span>
<span class="cp">#endif</span>

	<span class="kt">uint8_t</span> <span class="n">bbRcvSizeMsb</span><span class="p">;</span>	<span class="cm">/* Upper nibble is reserved */</span>
	<span class="kt">uint8_t</span> <span class="n">bbRcvSizeLsb</span><span class="p">;</span>	<span class="cm">/* FC Word 1, byte 3 */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="kt">uint8_t</span> <span class="n">word2Reserved1</span><span class="p">;</span>	<span class="cm">/* FC Word 2 byte 0 */</span>

			<span class="kt">uint8_t</span> <span class="n">totalConcurrSeq</span><span class="p">;</span>	<span class="cm">/* FC Word 2 byte 1 */</span>
			<span class="kt">uint8_t</span> <span class="n">roByCategoryMsb</span><span class="p">;</span>	<span class="cm">/* FC Word 2 byte 2 */</span>

			<span class="kt">uint8_t</span> <span class="n">roByCategoryLsb</span><span class="p">;</span>	<span class="cm">/* FC Word 2 byte 3 */</span>
		<span class="p">}</span> <span class="n">nPort</span><span class="p">;</span>
		<span class="kt">uint32_t</span> <span class="n">r_a_tov</span><span class="p">;</span>	<span class="cm">/* R_A_TOV must be in B.E. format */</span>
	<span class="p">}</span> <span class="n">w2</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">e_d_tov</span><span class="p">;</span>	<span class="cm">/* E_D_TOV must be in B.E. format */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">class_parms</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint8_t</span> <span class="n">classValid</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 31 */</span>
	<span class="kt">uint8_t</span> <span class="n">intermix</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 30 */</span>
	<span class="kt">uint8_t</span> <span class="n">stackedXparent</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 29 */</span>
	<span class="kt">uint8_t</span> <span class="n">stackedLockDown</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 28 */</span>
	<span class="kt">uint8_t</span> <span class="n">seqDelivery</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 27 */</span>
	<span class="kt">uint8_t</span> <span class="n">word0Reserved1</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 24:26 */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint8_t</span> <span class="n">word0Reserved1</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 24:26 */</span>
	<span class="kt">uint8_t</span> <span class="n">seqDelivery</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 27 */</span>
	<span class="kt">uint8_t</span> <span class="n">stackedLockDown</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 28 */</span>
	<span class="kt">uint8_t</span> <span class="n">stackedXparent</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 29 */</span>
	<span class="kt">uint8_t</span> <span class="n">intermix</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 30 */</span>
	<span class="kt">uint8_t</span> <span class="n">classValid</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 31 */</span>

<span class="cp">#endif</span>

	<span class="kt">uint8_t</span> <span class="n">word0Reserved2</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 16:23 */</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint8_t</span> <span class="n">iCtlXidReAssgn</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* FC Word 0, Bit 14:15 */</span>
	<span class="kt">uint8_t</span> <span class="n">iCtlInitialPa</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 12:13 */</span>
	<span class="kt">uint8_t</span> <span class="n">iCtlAck0capable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 11 */</span>
	<span class="kt">uint8_t</span> <span class="n">iCtlAckNcapable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 10 */</span>
	<span class="kt">uint8_t</span> <span class="n">word0Reserved3</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit  8: 9 */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint8_t</span> <span class="n">word0Reserved3</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit  8: 9 */</span>
	<span class="kt">uint8_t</span> <span class="n">iCtlAckNcapable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 10 */</span>
	<span class="kt">uint8_t</span> <span class="n">iCtlAck0capable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 11 */</span>
	<span class="kt">uint8_t</span> <span class="n">iCtlInitialPa</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 12:13 */</span>
	<span class="kt">uint8_t</span> <span class="n">iCtlXidReAssgn</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* FC Word 0, Bit 14:15 */</span>
<span class="cp">#endif</span>

	<span class="kt">uint8_t</span> <span class="n">word0Reserved4</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit  0: 7 */</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint8_t</span> <span class="n">rCtlAck0capable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 31 */</span>
	<span class="kt">uint8_t</span> <span class="n">rCtlAckNcapable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 30 */</span>
	<span class="kt">uint8_t</span> <span class="n">rCtlXidInterlck</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 29 */</span>
	<span class="kt">uint8_t</span> <span class="n">rCtlErrorPolicy</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 27:28 */</span>
	<span class="kt">uint8_t</span> <span class="n">word1Reserved1</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 26 */</span>
	<span class="kt">uint8_t</span> <span class="n">rCtlCatPerSeq</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 24:25 */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint8_t</span> <span class="n">rCtlCatPerSeq</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 24:25 */</span>
	<span class="kt">uint8_t</span> <span class="n">word1Reserved1</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 26 */</span>
	<span class="kt">uint8_t</span> <span class="n">rCtlErrorPolicy</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 27:28 */</span>
	<span class="kt">uint8_t</span> <span class="n">rCtlXidInterlck</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 29 */</span>
	<span class="kt">uint8_t</span> <span class="n">rCtlAckNcapable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 30 */</span>
	<span class="kt">uint8_t</span> <span class="n">rCtlAck0capable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 31 */</span>
<span class="cp">#endif</span>

	<span class="kt">uint8_t</span> <span class="n">word1Reserved2</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 16:23 */</span>
	<span class="kt">uint8_t</span> <span class="n">rcvDataSizeMsb</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit  8:15 */</span>
	<span class="kt">uint8_t</span> <span class="n">rcvDataSizeLsb</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit  0: 7 */</span>

	<span class="kt">uint8_t</span> <span class="n">concurrentSeqMsb</span><span class="p">;</span>	<span class="cm">/* FC Word 2, bit 24:31 */</span>
	<span class="kt">uint8_t</span> <span class="n">concurrentSeqLsb</span><span class="p">;</span>	<span class="cm">/* FC Word 2, bit 16:23 */</span>
	<span class="kt">uint8_t</span> <span class="n">EeCreditSeqMsb</span><span class="p">;</span>	<span class="cm">/* FC Word 2, bit  8:15 */</span>
	<span class="kt">uint8_t</span> <span class="n">EeCreditSeqLsb</span><span class="p">;</span>	<span class="cm">/* FC Word 2, bit  0: 7 */</span>

	<span class="kt">uint8_t</span> <span class="n">openSeqPerXchgMsb</span><span class="p">;</span>	<span class="cm">/* FC Word 3, bit 24:31 */</span>
	<span class="kt">uint8_t</span> <span class="n">openSeqPerXchgLsb</span><span class="p">;</span>	<span class="cm">/* FC Word 3, bit 16:23 */</span>
	<span class="kt">uint8_t</span> <span class="n">word3Reserved1</span><span class="p">;</span>	<span class="cm">/* Fc Word 3, bit  8:15 */</span>
	<span class="kt">uint8_t</span> <span class="n">word3Reserved2</span><span class="p">;</span>	<span class="cm">/* Fc Word 3, bit  0: 7 */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">serv_parm</span> <span class="p">{</span>	<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="k">struct</span> <span class="n">csp</span> <span class="n">cmn</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">portName</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">nodeName</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">class_parms</span> <span class="n">cls1</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">class_parms</span> <span class="n">cls2</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">class_parms</span> <span class="n">cls3</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">class_parms</span> <span class="n">cls4</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">vendorVersion</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Virtual Fabric Tagging Header</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_vft_header</span> <span class="p">{</span>
	 <span class="kt">uint32_t</span> <span class="n">word0</span><span class="p">;</span>
<span class="cp">#define fc_vft_hdr_r_ctl_SHIFT		24</span>
<span class="cp">#define fc_vft_hdr_r_ctl_MASK		0xFF</span>
<span class="cp">#define fc_vft_hdr_r_ctl_WORD		word0</span>
<span class="cp">#define fc_vft_hdr_ver_SHIFT		22</span>
<span class="cp">#define fc_vft_hdr_ver_MASK		0x3</span>
<span class="cp">#define fc_vft_hdr_ver_WORD		word0</span>
<span class="cp">#define fc_vft_hdr_type_SHIFT		18</span>
<span class="cp">#define fc_vft_hdr_type_MASK		0xF</span>
<span class="cp">#define fc_vft_hdr_type_WORD		word0</span>
<span class="cp">#define fc_vft_hdr_e_SHIFT		16</span>
<span class="cp">#define fc_vft_hdr_e_MASK		0x1</span>
<span class="cp">#define fc_vft_hdr_e_WORD		word0</span>
<span class="cp">#define fc_vft_hdr_priority_SHIFT	13</span>
<span class="cp">#define fc_vft_hdr_priority_MASK	0x7</span>
<span class="cp">#define fc_vft_hdr_priority_WORD	word0</span>
<span class="cp">#define fc_vft_hdr_vf_id_SHIFT		1</span>
<span class="cp">#define fc_vft_hdr_vf_id_MASK		0xFFF</span>
<span class="cp">#define fc_vft_hdr_vf_id_WORD		word0</span>
	<span class="kt">uint32_t</span> <span class="n">word1</span><span class="p">;</span>
<span class="cp">#define fc_vft_hdr_hopct_SHIFT		24</span>
<span class="cp">#define fc_vft_hdr_hopct_MASK		0xFF</span>
<span class="cp">#define fc_vft_hdr_hopct_WORD		word1</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Extended Link Service LS_COMMAND codes (Payload Word 0)</span>
<span class="cm"> */</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
<span class="cp">#define ELS_CMD_MASK      0xffff0000</span>
<span class="cp">#define ELS_RSP_MASK      0xff000000</span>
<span class="cp">#define ELS_CMD_LS_RJT    0x01000000</span>
<span class="cp">#define ELS_CMD_ACC       0x02000000</span>
<span class="cp">#define ELS_CMD_PLOGI     0x03000000</span>
<span class="cp">#define ELS_CMD_FLOGI     0x04000000</span>
<span class="cp">#define ELS_CMD_LOGO      0x05000000</span>
<span class="cp">#define ELS_CMD_ABTX      0x06000000</span>
<span class="cp">#define ELS_CMD_RCS       0x07000000</span>
<span class="cp">#define ELS_CMD_RES       0x08000000</span>
<span class="cp">#define ELS_CMD_RSS       0x09000000</span>
<span class="cp">#define ELS_CMD_RSI       0x0A000000</span>
<span class="cp">#define ELS_CMD_ESTS      0x0B000000</span>
<span class="cp">#define ELS_CMD_ESTC      0x0C000000</span>
<span class="cp">#define ELS_CMD_ADVC      0x0D000000</span>
<span class="cp">#define ELS_CMD_RTV       0x0E000000</span>
<span class="cp">#define ELS_CMD_RLS       0x0F000000</span>
<span class="cp">#define ELS_CMD_ECHO      0x10000000</span>
<span class="cp">#define ELS_CMD_TEST      0x11000000</span>
<span class="cp">#define ELS_CMD_RRQ       0x12000000</span>
<span class="cp">#define ELS_CMD_PRLI      0x20100014</span>
<span class="cp">#define ELS_CMD_PRLO      0x21100014</span>
<span class="cp">#define ELS_CMD_PRLO_ACC  0x02100014</span>
<span class="cp">#define ELS_CMD_PDISC     0x50000000</span>
<span class="cp">#define ELS_CMD_FDISC     0x51000000</span>
<span class="cp">#define ELS_CMD_ADISC     0x52000000</span>
<span class="cp">#define ELS_CMD_FARP      0x54000000</span>
<span class="cp">#define ELS_CMD_FARPR     0x55000000</span>
<span class="cp">#define ELS_CMD_RPS       0x56000000</span>
<span class="cp">#define ELS_CMD_RPL       0x57000000</span>
<span class="cp">#define ELS_CMD_FAN       0x60000000</span>
<span class="cp">#define ELS_CMD_RSCN      0x61040000</span>
<span class="cp">#define ELS_CMD_SCR       0x62000000</span>
<span class="cp">#define ELS_CMD_RNID      0x78000000</span>
<span class="cp">#define ELS_CMD_LIRR      0x7A000000</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
<span class="cp">#define ELS_CMD_MASK      0xffff</span>
<span class="cp">#define ELS_RSP_MASK      0xff</span>
<span class="cp">#define ELS_CMD_LS_RJT    0x01</span>
<span class="cp">#define ELS_CMD_ACC       0x02</span>
<span class="cp">#define ELS_CMD_PLOGI     0x03</span>
<span class="cp">#define ELS_CMD_FLOGI     0x04</span>
<span class="cp">#define ELS_CMD_LOGO      0x05</span>
<span class="cp">#define ELS_CMD_ABTX      0x06</span>
<span class="cp">#define ELS_CMD_RCS       0x07</span>
<span class="cp">#define ELS_CMD_RES       0x08</span>
<span class="cp">#define ELS_CMD_RSS       0x09</span>
<span class="cp">#define ELS_CMD_RSI       0x0A</span>
<span class="cp">#define ELS_CMD_ESTS      0x0B</span>
<span class="cp">#define ELS_CMD_ESTC      0x0C</span>
<span class="cp">#define ELS_CMD_ADVC      0x0D</span>
<span class="cp">#define ELS_CMD_RTV       0x0E</span>
<span class="cp">#define ELS_CMD_RLS       0x0F</span>
<span class="cp">#define ELS_CMD_ECHO      0x10</span>
<span class="cp">#define ELS_CMD_TEST      0x11</span>
<span class="cp">#define ELS_CMD_RRQ       0x12</span>
<span class="cp">#define ELS_CMD_PRLI      0x14001020</span>
<span class="cp">#define ELS_CMD_PRLO      0x14001021</span>
<span class="cp">#define ELS_CMD_PRLO_ACC  0x14001002</span>
<span class="cp">#define ELS_CMD_PDISC     0x50</span>
<span class="cp">#define ELS_CMD_FDISC     0x51</span>
<span class="cp">#define ELS_CMD_ADISC     0x52</span>
<span class="cp">#define ELS_CMD_FARP      0x54</span>
<span class="cp">#define ELS_CMD_FARPR     0x55</span>
<span class="cp">#define ELS_CMD_RPS       0x56</span>
<span class="cp">#define ELS_CMD_RPL       0x57</span>
<span class="cp">#define ELS_CMD_FAN       0x60</span>
<span class="cp">#define ELS_CMD_RSCN      0x0461</span>
<span class="cp">#define ELS_CMD_SCR       0x62</span>
<span class="cp">#define ELS_CMD_RNID      0x78</span>
<span class="cp">#define ELS_CMD_LIRR      0x7A</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> *  LS_RJT Payload Definition</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">ls_rjt</span> <span class="p">{</span>	<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">lsRjtError</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="kt">uint8_t</span> <span class="n">lsRjtRsvd0</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 24:31 */</span>

			<span class="kt">uint8_t</span> <span class="n">lsRjtRsnCode</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 16:23 */</span>
			<span class="cm">/* LS_RJT reason codes */</span>
<span class="cp">#define LSRJT_INVALID_CMD     0x01</span>
<span class="cp">#define LSRJT_LOGICAL_ERR     0x03</span>
<span class="cp">#define LSRJT_LOGICAL_BSY     0x05</span>
<span class="cp">#define LSRJT_PROTOCOL_ERR    0x07</span>
<span class="cp">#define LSRJT_UNABLE_TPC      0x09	</span><span class="cm">/* Unable to perform command */</span><span class="cp"></span>
<span class="cp">#define LSRJT_CMD_UNSUPPORTED 0x0B</span>
<span class="cp">#define LSRJT_VENDOR_UNIQUE   0xFF	</span><span class="cm">/* See Byte 3 */</span><span class="cp"></span>

			<span class="kt">uint8_t</span> <span class="n">lsRjtRsnCodeExp</span><span class="p">;</span> <span class="cm">/* FC Word 0, bit 8:15 */</span>
			<span class="cm">/* LS_RJT reason explanation */</span>
<span class="cp">#define LSEXP_NOTHING_MORE      0x00</span>
<span class="cp">#define LSEXP_SPARM_OPTIONS     0x01</span>
<span class="cp">#define LSEXP_SPARM_ICTL        0x03</span>
<span class="cp">#define LSEXP_SPARM_RCTL        0x05</span>
<span class="cp">#define LSEXP_SPARM_RCV_SIZE    0x07</span>
<span class="cp">#define LSEXP_SPARM_CONCUR_SEQ  0x09</span>
<span class="cp">#define LSEXP_SPARM_CREDIT      0x0B</span>
<span class="cp">#define LSEXP_INVALID_PNAME     0x0D</span>
<span class="cp">#define LSEXP_INVALID_NNAME     0x0E</span>
<span class="cp">#define LSEXP_INVALID_CSP       0x0F</span>
<span class="cp">#define LSEXP_INVALID_ASSOC_HDR 0x11</span>
<span class="cp">#define LSEXP_ASSOC_HDR_REQ     0x13</span>
<span class="cp">#define LSEXP_INVALID_O_SID     0x15</span>
<span class="cp">#define LSEXP_INVALID_OX_RX     0x17</span>
<span class="cp">#define LSEXP_CMD_IN_PROGRESS   0x19</span>
<span class="cp">#define LSEXP_PORT_LOGIN_REQ    0x1E</span>
<span class="cp">#define LSEXP_INVALID_NPORT_ID  0x1F</span>
<span class="cp">#define LSEXP_INVALID_SEQ_ID    0x21</span>
<span class="cp">#define LSEXP_INVALID_XCHG      0x23</span>
<span class="cp">#define LSEXP_INACTIVE_XCHG     0x25</span>
<span class="cp">#define LSEXP_RQ_REQUIRED       0x27</span>
<span class="cp">#define LSEXP_OUT_OF_RESOURCE   0x29</span>
<span class="cp">#define LSEXP_CANT_GIVE_DATA    0x2A</span>
<span class="cp">#define LSEXP_REQ_UNSUPPORTED   0x2C</span>
			<span class="kt">uint8_t</span> <span class="n">vendorUnique</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit  0: 7 */</span>
		<span class="p">}</span> <span class="n">b</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  N_Port Login (FLOGO/PLOGO Request) Payload Definition</span>
<span class="cm"> */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_LOGO</span> <span class="p">{</span>		<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">nPortId32</span><span class="p">;</span>	<span class="cm">/* Access nPortId as a word */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="kt">uint8_t</span> <span class="n">word1Reserved1</span><span class="p">;</span>	<span class="cm">/* FC Word 1, bit 31:24 */</span>
			<span class="kt">uint8_t</span> <span class="n">nPortIdByte0</span><span class="p">;</span>	<span class="cm">/* N_port  ID bit 16:23 */</span>
			<span class="kt">uint8_t</span> <span class="n">nPortIdByte1</span><span class="p">;</span>	<span class="cm">/* N_port  ID bit  8:15 */</span>
			<span class="kt">uint8_t</span> <span class="n">nPortIdByte2</span><span class="p">;</span>	<span class="cm">/* N_port  ID bit  0: 7 */</span>
		<span class="p">}</span> <span class="n">b</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">portName</span><span class="p">;</span>	<span class="cm">/* N_port name field */</span>
<span class="p">}</span> <span class="n">LOGO</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> *  FCP Login (PRLI Request / ACC) Payload Definition</span>
<span class="cm"> */</span>

<span class="cp">#define PRLX_PAGE_LEN   0x10</span>
<span class="cp">#define TPRLO_PAGE_LEN  0x14</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_PRLI</span> <span class="p">{</span>		<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint8_t</span> <span class="n">prliType</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 24:31 */</span>

<span class="cp">#define PRLI_FCP_TYPE 0x08</span>
	<span class="kt">uint8_t</span> <span class="n">word0Reserved1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 16:23 */</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint8_t</span> <span class="n">origProcAssocV</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 15 */</span>
	<span class="kt">uint8_t</span> <span class="n">respProcAssocV</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 14 */</span>
	<span class="kt">uint8_t</span> <span class="n">estabImagePair</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 13 */</span>

	<span class="cm">/*    ACC = imagePairEstablished */</span>
	<span class="kt">uint8_t</span> <span class="n">word0Reserved2</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 12 */</span>
	<span class="kt">uint8_t</span> <span class="n">acceptRspCode</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 8:11, ACC ONLY */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint8_t</span> <span class="n">acceptRspCode</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 8:11, ACC ONLY */</span>
	<span class="kt">uint8_t</span> <span class="n">word0Reserved2</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 12 */</span>
	<span class="kt">uint8_t</span> <span class="n">estabImagePair</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 13 */</span>
	<span class="kt">uint8_t</span> <span class="n">respProcAssocV</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 14 */</span>
	<span class="kt">uint8_t</span> <span class="n">origProcAssocV</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 15 */</span>
	<span class="cm">/*    ACC = imagePairEstablished */</span>
<span class="cp">#endif</span>

<span class="cp">#define PRLI_REQ_EXECUTED     0x1	</span><span class="cm">/* acceptRspCode */</span><span class="cp"></span>
<span class="cp">#define PRLI_NO_RESOURCES     0x2</span>
<span class="cp">#define PRLI_INIT_INCOMPLETE  0x3</span>
<span class="cp">#define PRLI_NO_SUCH_PA       0x4</span>
<span class="cp">#define PRLI_PREDEF_CONFIG    0x5</span>
<span class="cp">#define PRLI_PARTIAL_SUCCESS  0x6</span>
<span class="cp">#define PRLI_INVALID_PAGE_CNT 0x7</span>
	<span class="kt">uint8_t</span> <span class="n">word0Reserved3</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 0:7 */</span>

	<span class="kt">uint32_t</span> <span class="n">origProcAssoc</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 1, bit 0:31 */</span>

	<span class="kt">uint32_t</span> <span class="n">respProcAssoc</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 2, bit 0:31 */</span>

	<span class="kt">uint8_t</span> <span class="n">word3Reserved1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 24:31 */</span>
	<span class="kt">uint8_t</span> <span class="n">word3Reserved2</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 16:23 */</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">Word3bit15Resved</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 15 */</span>
	<span class="kt">uint16_t</span> <span class="n">Word3bit14Resved</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 14 */</span>
	<span class="kt">uint16_t</span> <span class="n">Word3bit13Resved</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 13 */</span>
	<span class="kt">uint16_t</span> <span class="n">Word3bit12Resved</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 12 */</span>
	<span class="kt">uint16_t</span> <span class="n">Word3bit11Resved</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 11 */</span>
	<span class="kt">uint16_t</span> <span class="n">Word3bit10Resved</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 10 */</span>
	<span class="kt">uint16_t</span> <span class="n">TaskRetryIdReq</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  9 */</span>
	<span class="kt">uint16_t</span> <span class="n">Retry</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  8 */</span>
	<span class="kt">uint16_t</span> <span class="n">ConfmComplAllowed</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  7 */</span>
	<span class="kt">uint16_t</span> <span class="n">dataOverLay</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  6 */</span>
	<span class="kt">uint16_t</span> <span class="n">initiatorFunc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  5 */</span>
	<span class="kt">uint16_t</span> <span class="n">targetFunc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  4 */</span>
	<span class="kt">uint16_t</span> <span class="n">cmdDataMixEna</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  3 */</span>
	<span class="kt">uint16_t</span> <span class="n">dataRspMixEna</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  2 */</span>
	<span class="kt">uint16_t</span> <span class="n">readXferRdyDis</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  1 */</span>
	<span class="kt">uint16_t</span> <span class="n">writeXferRdyDis</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  0 */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">Retry</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  8 */</span>
	<span class="kt">uint16_t</span> <span class="n">TaskRetryIdReq</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  9 */</span>
	<span class="kt">uint16_t</span> <span class="n">Word3bit10Resved</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 10 */</span>
	<span class="kt">uint16_t</span> <span class="n">Word3bit11Resved</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 11 */</span>
	<span class="kt">uint16_t</span> <span class="n">Word3bit12Resved</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 12 */</span>
	<span class="kt">uint16_t</span> <span class="n">Word3bit13Resved</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 13 */</span>
	<span class="kt">uint16_t</span> <span class="n">Word3bit14Resved</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 14 */</span>
	<span class="kt">uint16_t</span> <span class="n">Word3bit15Resved</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 15 */</span>
	<span class="kt">uint16_t</span> <span class="n">writeXferRdyDis</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  0 */</span>
	<span class="kt">uint16_t</span> <span class="n">readXferRdyDis</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  1 */</span>
	<span class="kt">uint16_t</span> <span class="n">dataRspMixEna</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  2 */</span>
	<span class="kt">uint16_t</span> <span class="n">cmdDataMixEna</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  3 */</span>
	<span class="kt">uint16_t</span> <span class="n">targetFunc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  4 */</span>
	<span class="kt">uint16_t</span> <span class="n">initiatorFunc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  5 */</span>
	<span class="kt">uint16_t</span> <span class="n">dataOverLay</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  6 */</span>
	<span class="kt">uint16_t</span> <span class="n">ConfmComplAllowed</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit  7 */</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">PRLI</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> *  FCP Logout (PRLO Request / ACC) Payload Definition</span>
<span class="cm"> */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_PRLO</span> <span class="p">{</span>		<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint8_t</span> <span class="n">prloType</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 24:31 */</span>

<span class="cp">#define PRLO_FCP_TYPE  0x08</span>
	<span class="kt">uint8_t</span> <span class="n">word0Reserved1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 16:23 */</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint8_t</span> <span class="n">origProcAssocV</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 15 */</span>
	<span class="kt">uint8_t</span> <span class="n">respProcAssocV</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 14 */</span>
	<span class="kt">uint8_t</span> <span class="n">word0Reserved2</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 12:13 */</span>
	<span class="kt">uint8_t</span> <span class="n">acceptRspCode</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 8:11, ACC ONLY */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint8_t</span> <span class="n">acceptRspCode</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 8:11, ACC ONLY */</span>
	<span class="kt">uint8_t</span> <span class="n">word0Reserved2</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 12:13 */</span>
	<span class="kt">uint8_t</span> <span class="n">respProcAssocV</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 14 */</span>
	<span class="kt">uint8_t</span> <span class="n">origProcAssocV</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 15 */</span>
<span class="cp">#endif</span>

<span class="cp">#define PRLO_REQ_EXECUTED     0x1	</span><span class="cm">/* acceptRspCode */</span><span class="cp"></span>
<span class="cp">#define PRLO_NO_SUCH_IMAGE    0x4</span>
<span class="cp">#define PRLO_INVALID_PAGE_CNT 0x7</span>

	<span class="kt">uint8_t</span> <span class="n">word0Reserved3</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 0, bit 0:7 */</span>

	<span class="kt">uint32_t</span> <span class="n">origProcAssoc</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 1, bit 0:31 */</span>

	<span class="kt">uint32_t</span> <span class="n">respProcAssoc</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 2, bit 0:31 */</span>

	<span class="kt">uint32_t</span> <span class="n">word3Reserved1</span><span class="p">;</span>	<span class="cm">/* FC Parm Word 3, bit 0:31 */</span>
<span class="p">}</span> <span class="n">PRLO</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_ADISC</span> <span class="p">{</span>		<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint32_t</span> <span class="n">hardAL_PA</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">portName</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">nodeName</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">DID</span><span class="p">;</span>
<span class="p">}</span> <span class="n">ADISC</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_FARP</span> <span class="p">{</span>		<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint32_t</span> <span class="n">Mflags</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">Odid</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#define FARP_NO_ACTION          0	</span><span class="cm">/* FARP information enclosed, no</span>
<span class="cm">					   action */</span><span class="cp"></span>
<span class="cp">#define FARP_MATCH_PORT         0x1	</span><span class="cm">/* Match on Responder Port Name */</span><span class="cp"></span>
<span class="cp">#define FARP_MATCH_NODE         0x2	</span><span class="cm">/* Match on Responder Node Name */</span><span class="cp"></span>
<span class="cp">#define FARP_MATCH_IP           0x4	</span><span class="cm">/* Match on IP address, not supported */</span><span class="cp"></span>
<span class="cp">#define FARP_MATCH_IPV4         0x5	</span><span class="cm">/* Match on IPV4 address, not</span>
<span class="cm">					   supported */</span><span class="cp"></span>
<span class="cp">#define FARP_MATCH_IPV6         0x6	</span><span class="cm">/* Match on IPV6 address, not</span>
<span class="cm">					   supported */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">Rflags</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">Rdid</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#define FARP_REQUEST_PLOGI      0x1	</span><span class="cm">/* Request for PLOGI */</span><span class="cp"></span>
<span class="cp">#define FARP_REQUEST_FARPR      0x2	</span><span class="cm">/* Request for FARP Response */</span><span class="cp"></span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">OportName</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">OnodeName</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">RportName</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">RnodeName</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">Oipaddr</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">Ripaddr</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">}</span> <span class="n">FARP</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_FAN</span> <span class="p">{</span>		<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint32_t</span> <span class="n">Fdid</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">FportName</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">FnodeName</span><span class="p">;</span>
<span class="p">}</span> <span class="n">FAN</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_SCR</span> <span class="p">{</span>		<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint8_t</span> <span class="n">resvd1</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">resvd2</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">resvd3</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">Function</span><span class="p">;</span>
<span class="cp">#define  SCR_FUNC_FABRIC     0x01</span>
<span class="cp">#define  SCR_FUNC_NPORT      0x02</span>
<span class="cp">#define  SCR_FUNC_FULL       0x03</span>
<span class="cp">#define  SCR_CLEAR           0xff</span>
<span class="p">}</span> <span class="n">SCR</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_RNID_TOP_DISC</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">portName</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">resvd</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">unitType</span><span class="p">;</span>
<span class="cp">#define RNID_HBA            0x7</span>
<span class="cp">#define RNID_HOST           0xa</span>
<span class="cp">#define RNID_DRIVER         0xd</span>
	<span class="kt">uint32_t</span> <span class="n">physPort</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">attachedNodes</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">ipVersion</span><span class="p">;</span>
<span class="cp">#define RNID_IPV4           0x1</span>
<span class="cp">#define RNID_IPV6           0x2</span>
	<span class="kt">uint16_t</span> <span class="n">UDPport</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">ipAddr</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="kt">uint16_t</span> <span class="n">resvd1</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">flags</span><span class="p">;</span>
<span class="cp">#define RNID_TD_SUPPORT     0x1</span>
<span class="cp">#define RNID_LP_VALID       0x2</span>
<span class="p">}</span> <span class="n">RNID_TOP_DISC</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_RNID</span> <span class="p">{</span>		<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint8_t</span> <span class="n">Format</span><span class="p">;</span>
<span class="cp">#define RNID_TOPOLOGY_DISC  0xdf</span>
	<span class="kt">uint8_t</span> <span class="n">CommonLen</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">resvd1</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">SpecificLen</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">portName</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">nodeName</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="n">RNID_TOP_DISC</span> <span class="n">topologyDisc</span><span class="p">;</span>	<span class="cm">/* topology disc (0xdf) */</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>
<span class="p">}</span> <span class="n">RNID</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span>  <span class="n">_RPS</span> <span class="p">{</span>		<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">portNum</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">portName</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>
<span class="p">}</span> <span class="n">RPS</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span>  <span class="n">_RPS_RSP</span> <span class="p">{</span>	<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">portStatus</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">linkFailureCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">lossSyncCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">lossSignalCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">primSeqErrCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">invalidXmitWord</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">crcCnt</span><span class="p">;</span>
<span class="p">}</span> <span class="n">RPS_RSP</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">RLS</span> <span class="p">{</span>			<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint32_t</span> <span class="n">rls</span><span class="p">;</span>
<span class="cp">#define rls_rsvd_SHIFT		24</span>
<span class="cp">#define rls_rsvd_MASK		0x000000ff</span>
<span class="cp">#define rls_rsvd_WORD		rls</span>
<span class="cp">#define rls_did_SHIFT		0</span>
<span class="cp">#define rls_did_MASK		0x00ffffff</span>
<span class="cp">#define rls_did_WORD		rls</span>
<span class="p">};</span>

<span class="k">struct</span>  <span class="n">RLS_RSP</span> <span class="p">{</span>		<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint32_t</span> <span class="n">linkFailureCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">lossSyncCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">lossSignalCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">primSeqErrCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">invalidXmitWord</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">crcCnt</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">RRQ</span> <span class="p">{</span>			<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint32_t</span> <span class="n">rrq</span><span class="p">;</span>
<span class="cp">#define rrq_rsvd_SHIFT		24</span>
<span class="cp">#define rrq_rsvd_MASK		0x000000ff</span>
<span class="cp">#define rrq_rsvd_WORD		rrq</span>
<span class="cp">#define rrq_did_SHIFT		0</span>
<span class="cp">#define rrq_did_MASK		0x00ffffff</span>
<span class="cp">#define rrq_did_WORD		rrq</span>
	<span class="kt">uint32_t</span> <span class="n">rrq_exchg</span><span class="p">;</span>
<span class="cp">#define rrq_oxid_SHIFT		16</span>
<span class="cp">#define rrq_oxid_MASK		0xffff</span>
<span class="cp">#define rrq_oxid_WORD		rrq_exchg</span>
<span class="cp">#define rrq_rxid_SHIFT		0</span>
<span class="cp">#define rrq_rxid_MASK		0xffff</span>
<span class="cp">#define rrq_rxid_WORD		rrq_exchg</span>
<span class="p">};</span>

<span class="cp">#define LPFC_MAX_VFN_PER_PFN	255 </span><span class="cm">/* Maximum VFs allowed per ARI */</span><span class="cp"></span>
<span class="cp">#define LPFC_DEF_VFN_PER_PFN	0   </span><span class="cm">/* Default VFs due to platform limitation*/</span><span class="cp"></span>

<span class="k">struct</span> <span class="n">RTV_RSP</span> <span class="p">{</span>		<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint32_t</span> <span class="n">ratov</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">edtov</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">qtov</span><span class="p">;</span>
<span class="cp">#define qtov_rsvd0_SHIFT	28</span>
<span class="cp">#define qtov_rsvd0_MASK		0x0000000f</span>
<span class="cp">#define qtov_rsvd0_WORD		qtov		</span><span class="cm">/* reserved */</span><span class="cp"></span>
<span class="cp">#define qtov_edtovres_SHIFT	27</span>
<span class="cp">#define qtov_edtovres_MASK	0x00000001</span>
<span class="cp">#define qtov_edtovres_WORD	qtov		</span><span class="cm">/* E_D_TOV Resolution */</span><span class="cp"></span>
<span class="cp">#define qtov__rsvd1_SHIFT	19</span>
<span class="cp">#define qtov_rsvd1_MASK		0x0000003f</span>
<span class="cp">#define qtov_rsvd1_WORD		qtov		</span><span class="cm">/* reserved */</span><span class="cp"></span>
<span class="cp">#define qtov_rttov_SHIFT	18</span>
<span class="cp">#define qtov_rttov_MASK		0x00000001</span>
<span class="cp">#define qtov_rttov_WORD		qtov		</span><span class="cm">/* R_T_TOV value */</span><span class="cp"></span>
<span class="cp">#define qtov_rsvd2_SHIFT	0</span>
<span class="cp">#define qtov_rsvd2_MASK		0x0003ffff</span>
<span class="cp">#define qtov_rsvd2_WORD		qtov		</span><span class="cm">/* reserved */</span><span class="cp"></span>
<span class="p">};</span>


<span class="k">typedef</span> <span class="k">struct</span>  <span class="n">_RPL</span> <span class="p">{</span>		<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint32_t</span> <span class="n">maxsize</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">index</span><span class="p">;</span>
<span class="p">}</span> <span class="n">RPL</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span>  <span class="n">_PORT_NUM_BLK</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">portNum</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">portID</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">portName</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PORT_NUM_BLK</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span>  <span class="n">_RPL_RSP</span> <span class="p">{</span>	<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint32_t</span> <span class="n">listLen</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">index</span><span class="p">;</span>
	<span class="n">PORT_NUM_BLK</span> <span class="n">port_num_blk</span><span class="p">;</span>
<span class="p">}</span> <span class="n">RPL_RSP</span><span class="p">;</span>

<span class="cm">/* This is used for RSCN command */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_D_ID</span> <span class="p">{</span>		<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">word</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
			<span class="kt">uint8_t</span> <span class="n">resv</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">domain</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">area</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">id</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
			<span class="kt">uint8_t</span> <span class="n">id</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">area</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">domain</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">resv</span><span class="p">;</span>
<span class="cp">#endif</span>
		<span class="p">}</span> <span class="n">b</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>
<span class="p">}</span> <span class="n">D_ID</span><span class="p">;</span>

<span class="cp">#define RSCN_ADDRESS_FORMAT_PORT	0x0</span>
<span class="cp">#define RSCN_ADDRESS_FORMAT_AREA	0x1</span>
<span class="cp">#define RSCN_ADDRESS_FORMAT_DOMAIN	0x2</span>
<span class="cp">#define RSCN_ADDRESS_FORMAT_FABRIC	0x3</span>
<span class="cp">#define RSCN_ADDRESS_FORMAT_MASK	0x3</span>

<span class="cm">/*</span>
<span class="cm"> *  Structure to define all ELS Payload types</span>
<span class="cm"> */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_ELS_PKT</span> <span class="p">{</span>	<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="kt">uint8_t</span> <span class="n">elsCode</span><span class="p">;</span>	<span class="cm">/* FC Word 0, bit 24:31 */</span>
	<span class="kt">uint8_t</span> <span class="n">elsByte1</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">elsByte2</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">elsByte3</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">ls_rjt</span> <span class="n">lsRjt</span><span class="p">;</span>	<span class="cm">/* Payload for LS_RJT ELS response */</span>
		<span class="k">struct</span> <span class="n">serv_parm</span> <span class="n">logi</span><span class="p">;</span>	<span class="cm">/* Payload for PLOGI/FLOGI/PDISC/ACC */</span>
		<span class="n">LOGO</span> <span class="n">logo</span><span class="p">;</span>	<span class="cm">/* Payload for PLOGO/FLOGO/ACC */</span>
		<span class="n">PRLI</span> <span class="n">prli</span><span class="p">;</span>	<span class="cm">/* Payload for PRLI/ACC */</span>
		<span class="n">PRLO</span> <span class="n">prlo</span><span class="p">;</span>	<span class="cm">/* Payload for PRLO/ACC */</span>
		<span class="n">ADISC</span> <span class="n">adisc</span><span class="p">;</span>	<span class="cm">/* Payload for ADISC/ACC */</span>
		<span class="n">FARP</span> <span class="n">farp</span><span class="p">;</span>	<span class="cm">/* Payload for FARP/ACC */</span>
		<span class="n">FAN</span> <span class="n">fan</span><span class="p">;</span>	<span class="cm">/* Payload for FAN */</span>
		<span class="n">SCR</span> <span class="n">scr</span><span class="p">;</span>	<span class="cm">/* Payload for SCR/ACC */</span>
		<span class="n">RNID</span> <span class="n">rnid</span><span class="p">;</span>	<span class="cm">/* Payload for RNID */</span>
		<span class="kt">uint8_t</span> <span class="n">pad</span><span class="p">[</span><span class="mi">128</span> <span class="o">-</span> <span class="mi">4</span><span class="p">];</span>	<span class="cm">/* Pad out to payload of 128 bytes */</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>
<span class="p">}</span> <span class="n">ELS_PKT</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * FDMI</span>
<span class="cm"> * HBA MAnagement Operations Command Codes</span>
<span class="cm"> */</span>
<span class="cp">#define  SLI_MGMT_GRHL     0x100	</span><span class="cm">/* Get registered HBA list */</span><span class="cp"></span>
<span class="cp">#define  SLI_MGMT_GHAT     0x101	</span><span class="cm">/* Get HBA attributes */</span><span class="cp"></span>
<span class="cp">#define  SLI_MGMT_GRPL     0x102	</span><span class="cm">/* Get registered Port list */</span><span class="cp"></span>
<span class="cp">#define  SLI_MGMT_GPAT     0x110	</span><span class="cm">/* Get Port attributes */</span><span class="cp"></span>
<span class="cp">#define  SLI_MGMT_RHBA     0x200	</span><span class="cm">/* Register HBA */</span><span class="cp"></span>
<span class="cp">#define  SLI_MGMT_RHAT     0x201	</span><span class="cm">/* Register HBA attributes */</span><span class="cp"></span>
<span class="cp">#define  SLI_MGMT_RPRT     0x210	</span><span class="cm">/* Register Port */</span><span class="cp"></span>
<span class="cp">#define  SLI_MGMT_RPA      0x211	</span><span class="cm">/* Register Port attributes */</span><span class="cp"></span>
<span class="cp">#define  SLI_MGMT_DHBA     0x300	</span><span class="cm">/* De-register HBA */</span><span class="cp"></span>
<span class="cp">#define  SLI_MGMT_DPRT     0x310	</span><span class="cm">/* De-register Port */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Management Service Subtypes</span>
<span class="cm"> */</span>
<span class="cp">#define  SLI_CT_FDMI_Subtypes     0x10</span>

<span class="cm">/*</span>
<span class="cm"> * HBA Management Service Reject Code</span>
<span class="cm"> */</span>
<span class="cp">#define  REJECT_CODE             0x9	</span><span class="cm">/* Unable to perform command request */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * HBA Management Service Reject Reason Code</span>
<span class="cm"> * Please refer to the Reason Codes above</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * HBA Attribute Types</span>
<span class="cm"> */</span>
<span class="cp">#define  NODE_NAME               0x1</span>
<span class="cp">#define  MANUFACTURER            0x2</span>
<span class="cp">#define  SERIAL_NUMBER           0x3</span>
<span class="cp">#define  MODEL                   0x4</span>
<span class="cp">#define  MODEL_DESCRIPTION       0x5</span>
<span class="cp">#define  HARDWARE_VERSION        0x6</span>
<span class="cp">#define  DRIVER_VERSION          0x7</span>
<span class="cp">#define  OPTION_ROM_VERSION      0x8</span>
<span class="cp">#define  FIRMWARE_VERSION        0x9</span>
<span class="cp">#define  OS_NAME_VERSION	 0xa</span>
<span class="cp">#define  MAX_CT_PAYLOAD_LEN	 0xb</span>

<span class="cm">/*</span>
<span class="cm"> * Port Attrubute Types</span>
<span class="cm"> */</span>
<span class="cp">#define  SUPPORTED_FC4_TYPES     0x1</span>
<span class="cp">#define  SUPPORTED_SPEED         0x2</span>
<span class="cp">#define  PORT_SPEED              0x3</span>
<span class="cp">#define  MAX_FRAME_SIZE          0x4</span>
<span class="cp">#define  OS_DEVICE_NAME          0x5</span>
<span class="cp">#define  HOST_NAME               0x6</span>

<span class="k">union</span> <span class="n">AttributesDef</span> <span class="p">{</span>
	<span class="cm">/* Structure is in Big Endian format */</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">AttrType</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
		<span class="kt">uint32_t</span> <span class="n">AttrLen</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">bits</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">word</span><span class="p">;</span>
<span class="p">};</span>


<span class="cm">/*</span>
<span class="cm"> * HBA Attribute Entry (8 - 260 bytes)</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">AttributesDef</span> <span class="n">ad</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">VendorSpecific</span><span class="p">;</span>
		<span class="kt">uint8_t</span> <span class="n">Manufacturer</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
		<span class="kt">uint8_t</span> <span class="n">SerialNumber</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
		<span class="kt">uint8_t</span> <span class="n">Model</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
		<span class="kt">uint8_t</span> <span class="n">ModelDescription</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
		<span class="kt">uint8_t</span> <span class="n">HardwareVersion</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
		<span class="kt">uint8_t</span> <span class="n">DriverVersion</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
		<span class="kt">uint8_t</span> <span class="n">OptionROMVersion</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
		<span class="kt">uint8_t</span> <span class="n">FirmwareVersion</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
		<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">NodeName</span><span class="p">;</span>
		<span class="kt">uint8_t</span> <span class="n">SupportFC4Types</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
		<span class="kt">uint32_t</span> <span class="n">SupportSpeed</span><span class="p">;</span>
		<span class="kt">uint32_t</span> <span class="n">PortSpeed</span><span class="p">;</span>
		<span class="kt">uint32_t</span> <span class="n">MaxFrameSize</span><span class="p">;</span>
		<span class="kt">uint8_t</span> <span class="n">OsDeviceName</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
		<span class="kt">uint8_t</span> <span class="n">OsNameVersion</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
		<span class="kt">uint32_t</span> <span class="n">MaxCTPayloadLen</span><span class="p">;</span>
		<span class="kt">uint8_t</span> <span class="n">HostName</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>
<span class="p">}</span> <span class="n">ATTRIBUTE_ENTRY</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * HBA Attribute Block</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">EntryCnt</span><span class="p">;</span>	<span class="cm">/* Number of HBA attribute entries */</span>
	<span class="n">ATTRIBUTE_ENTRY</span> <span class="n">Entry</span><span class="p">;</span>	<span class="cm">/* Variable-length array */</span>
<span class="p">}</span> <span class="n">ATTRIBUTE_BLOCK</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Port Entry</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">PortName</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PORT_ENTRY</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * HBA Identifier</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">PortName</span><span class="p">;</span>
<span class="p">}</span> <span class="n">HBA_IDENTIFIER</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Registered Port List Format</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">EntryCnt</span><span class="p">;</span>
	<span class="n">PORT_ENTRY</span> <span class="n">pe</span><span class="p">;</span>		<span class="cm">/* Variable-length array */</span>
<span class="p">}</span> <span class="n">REG_PORT_LIST</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Register HBA(RHBA)</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">HBA_IDENTIFIER</span> <span class="n">hi</span><span class="p">;</span>
	<span class="n">REG_PORT_LIST</span> <span class="n">rpl</span><span class="p">;</span>	<span class="cm">/* variable-length array */</span>
<span class="cm">/* ATTRIBUTE_BLOCK   ab; */</span>
<span class="p">}</span> <span class="n">REG_HBA</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Register HBA Attributes (RHAT)</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">HBA_PortName</span><span class="p">;</span>
	<span class="n">ATTRIBUTE_BLOCK</span> <span class="n">ab</span><span class="p">;</span>
<span class="p">}</span> <span class="n">REG_HBA_ATTRIBUTE</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Register Port Attributes (RPA)</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">PortName</span><span class="p">;</span>
	<span class="n">ATTRIBUTE_BLOCK</span> <span class="n">ab</span><span class="p">;</span>
<span class="p">}</span> <span class="n">REG_PORT_ATTRIBUTE</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Get Registered HBA List (GRHL) Accept Payload Format</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">HBA__Entry_Cnt</span><span class="p">;</span> <span class="cm">/* Number of Registered HBA Identifiers */</span>
	<span class="k">struct</span> <span class="n">lpfc_name</span> <span class="n">HBA_PortName</span><span class="p">;</span>	<span class="cm">/* Variable-length array */</span>
<span class="p">}</span> <span class="n">GRHL_ACC_PAYLOAD</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Get Registered Port List (GRPL) Accept Payload Format</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">RPL_Entry_Cnt</span><span class="p">;</span>	<span class="cm">/* Number of Registered Port Entries */</span>
	<span class="n">PORT_ENTRY</span> <span class="n">Reg_Port_Entry</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>	<span class="cm">/* Variable-length array */</span>
<span class="p">}</span> <span class="n">GRPL_ACC_PAYLOAD</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Get Port Attributes (GPAT) Accept Payload Format</span>
<span class="cm"> */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">ATTRIBUTE_BLOCK</span> <span class="n">pab</span><span class="p">;</span>
<span class="p">}</span> <span class="n">GPAT_ACC_PAYLOAD</span><span class="p">;</span>


<span class="cm">/*</span>
<span class="cm"> *  Begin HBA configuration parameters.</span>
<span class="cm"> *  The PCI configuration register BAR assignments are:</span>
<span class="cm"> *  BAR0, offset 0x10 - SLIM base memory address</span>
<span class="cm"> *  BAR1, offset 0x14 - SLIM base memory high address</span>
<span class="cm"> *  BAR2, offset 0x18 - REGISTER base memory address</span>
<span class="cm"> *  BAR3, offset 0x1c - REGISTER base memory high address</span>
<span class="cm"> *  BAR4, offset 0x20 - BIU I/O registers</span>
<span class="cm"> *  BAR5, offset 0x24 - REGISTER base io high address</span>
<span class="cm"> */</span>

<span class="cm">/* Number of rings currently used and available. */</span>
<span class="cp">#define MAX_CONFIGURED_RINGS     3</span>
<span class="cp">#define MAX_RINGS                4</span>

<span class="cm">/* IOCB / Mailbox is owned by FireFly */</span>
<span class="cp">#define OWN_CHIP        1</span>

<span class="cm">/* IOCB / Mailbox is owned by Host */</span>
<span class="cp">#define OWN_HOST        0</span>

<span class="cm">/* Number of 4-byte words in an IOCB. */</span>
<span class="cp">#define IOCB_WORD_SZ    8</span>

<span class="cm">/* network headers for Dfctl field */</span>
<span class="cp">#define FC_NET_HDR      0x20</span>

<span class="cm">/* Start FireFly Register definitions */</span>
<span class="cp">#define PCI_VENDOR_ID_EMULEX        0x10df</span>
<span class="cp">#define PCI_DEVICE_ID_FIREFLY       0x1ae5</span>
<span class="cp">#define PCI_DEVICE_ID_PROTEUS_VF    0xe100</span>
<span class="cp">#define PCI_DEVICE_ID_BALIUS        0xe131</span>
<span class="cp">#define PCI_DEVICE_ID_PROTEUS_PF    0xe180</span>
<span class="cp">#define PCI_DEVICE_ID_LANCER_FC     0xe200</span>
<span class="cp">#define PCI_DEVICE_ID_LANCER_FC_VF  0xe208</span>
<span class="cp">#define PCI_DEVICE_ID_LANCER_FCOE   0xe260</span>
<span class="cp">#define PCI_DEVICE_ID_LANCER_FCOE_VF 0xe268</span>
<span class="cp">#define PCI_DEVICE_ID_SAT_SMB       0xf011</span>
<span class="cp">#define PCI_DEVICE_ID_SAT_MID       0xf015</span>
<span class="cp">#define PCI_DEVICE_ID_RFLY          0xf095</span>
<span class="cp">#define PCI_DEVICE_ID_PFLY          0xf098</span>
<span class="cp">#define PCI_DEVICE_ID_LP101         0xf0a1</span>
<span class="cp">#define PCI_DEVICE_ID_TFLY          0xf0a5</span>
<span class="cp">#define PCI_DEVICE_ID_BSMB          0xf0d1</span>
<span class="cp">#define PCI_DEVICE_ID_BMID          0xf0d5</span>
<span class="cp">#define PCI_DEVICE_ID_ZSMB          0xf0e1</span>
<span class="cp">#define PCI_DEVICE_ID_ZMID          0xf0e5</span>
<span class="cp">#define PCI_DEVICE_ID_NEPTUNE       0xf0f5</span>
<span class="cp">#define PCI_DEVICE_ID_NEPTUNE_SCSP  0xf0f6</span>
<span class="cp">#define PCI_DEVICE_ID_NEPTUNE_DCSP  0xf0f7</span>
<span class="cp">#define PCI_DEVICE_ID_SAT           0xf100</span>
<span class="cp">#define PCI_DEVICE_ID_SAT_SCSP      0xf111</span>
<span class="cp">#define PCI_DEVICE_ID_SAT_DCSP      0xf112</span>
<span class="cp">#define PCI_DEVICE_ID_FALCON        0xf180</span>
<span class="cp">#define PCI_DEVICE_ID_SUPERFLY      0xf700</span>
<span class="cp">#define PCI_DEVICE_ID_DRAGONFLY     0xf800</span>
<span class="cp">#define PCI_DEVICE_ID_CENTAUR       0xf900</span>
<span class="cp">#define PCI_DEVICE_ID_PEGASUS       0xf980</span>
<span class="cp">#define PCI_DEVICE_ID_THOR          0xfa00</span>
<span class="cp">#define PCI_DEVICE_ID_VIPER         0xfb00</span>
<span class="cp">#define PCI_DEVICE_ID_LP10000S      0xfc00</span>
<span class="cp">#define PCI_DEVICE_ID_LP11000S      0xfc10</span>
<span class="cp">#define PCI_DEVICE_ID_LPE11000S     0xfc20</span>
<span class="cp">#define PCI_DEVICE_ID_SAT_S         0xfc40</span>
<span class="cp">#define PCI_DEVICE_ID_PROTEUS_S     0xfc50</span>
<span class="cp">#define PCI_DEVICE_ID_HELIOS        0xfd00</span>
<span class="cp">#define PCI_DEVICE_ID_HELIOS_SCSP   0xfd11</span>
<span class="cp">#define PCI_DEVICE_ID_HELIOS_DCSP   0xfd12</span>
<span class="cp">#define PCI_DEVICE_ID_ZEPHYR        0xfe00</span>
<span class="cp">#define PCI_DEVICE_ID_HORNET        0xfe05</span>
<span class="cp">#define PCI_DEVICE_ID_ZEPHYR_SCSP   0xfe11</span>
<span class="cp">#define PCI_DEVICE_ID_ZEPHYR_DCSP   0xfe12</span>
<span class="cp">#define PCI_VENDOR_ID_SERVERENGINE  0x19a2</span>
<span class="cp">#define PCI_DEVICE_ID_TIGERSHARK    0x0704</span>
<span class="cp">#define PCI_DEVICE_ID_TOMCAT        0x0714</span>

<span class="cp">#define JEDEC_ID_ADDRESS            0x0080001c</span>
<span class="cp">#define FIREFLY_JEDEC_ID            0x1ACC</span>
<span class="cp">#define SUPERFLY_JEDEC_ID           0x0020</span>
<span class="cp">#define DRAGONFLY_JEDEC_ID          0x0021</span>
<span class="cp">#define DRAGONFLY_V2_JEDEC_ID       0x0025</span>
<span class="cp">#define CENTAUR_2G_JEDEC_ID         0x0026</span>
<span class="cp">#define CENTAUR_1G_JEDEC_ID         0x0028</span>
<span class="cp">#define PEGASUS_ORION_JEDEC_ID      0x0036</span>
<span class="cp">#define PEGASUS_JEDEC_ID            0x0038</span>
<span class="cp">#define THOR_JEDEC_ID               0x0012</span>
<span class="cp">#define HELIOS_JEDEC_ID             0x0364</span>
<span class="cp">#define ZEPHYR_JEDEC_ID             0x0577</span>
<span class="cp">#define VIPER_JEDEC_ID              0x4838</span>
<span class="cp">#define SATURN_JEDEC_ID             0x1004</span>
<span class="cp">#define HORNET_JDEC_ID              0x2057706D</span>

<span class="cp">#define JEDEC_ID_MASK               0x0FFFF000</span>
<span class="cp">#define JEDEC_ID_SHIFT              12</span>
<span class="cp">#define FC_JEDEC_ID(id)             ((id &amp; JEDEC_ID_MASK) &gt;&gt; JEDEC_ID_SHIFT)</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>		<span class="cm">/* FireFly BIU registers */</span>
	<span class="kt">uint32_t</span> <span class="n">hostAtt</span><span class="p">;</span>	<span class="cm">/* See definitions for Host Attention</span>
<span class="cm">				   register */</span>
	<span class="kt">uint32_t</span> <span class="n">chipAtt</span><span class="p">;</span>	<span class="cm">/* See definitions for Chip Attention</span>
<span class="cm">				   register */</span>
	<span class="kt">uint32_t</span> <span class="n">hostStatus</span><span class="p">;</span>	<span class="cm">/* See definitions for Host Status register */</span>
	<span class="kt">uint32_t</span> <span class="n">hostControl</span><span class="p">;</span>	<span class="cm">/* See definitions for Host Control register */</span>
	<span class="kt">uint32_t</span> <span class="n">buiConfig</span><span class="p">;</span>	<span class="cm">/* See definitions for BIU configuration</span>
<span class="cm">				   register */</span>
<span class="p">}</span> <span class="n">FF_REGS</span><span class="p">;</span>

<span class="cm">/* IO Register size in bytes */</span>
<span class="cp">#define FF_REG_AREA_SIZE       256</span>

<span class="cm">/* Host Attention Register */</span>

<span class="cp">#define HA_REG_OFFSET  0	</span><span class="cm">/* Byte offset from register base address */</span><span class="cp"></span>

<span class="cp">#define HA_R0RE_REQ    0x00000001	</span><span class="cm">/* Bit  0 */</span><span class="cp"></span>
<span class="cp">#define HA_R0CE_RSP    0x00000002	</span><span class="cm">/* Bit  1 */</span><span class="cp"></span>
<span class="cp">#define HA_R0ATT       0x00000008	</span><span class="cm">/* Bit  3 */</span><span class="cp"></span>
<span class="cp">#define HA_R1RE_REQ    0x00000010	</span><span class="cm">/* Bit  4 */</span><span class="cp"></span>
<span class="cp">#define HA_R1CE_RSP    0x00000020	</span><span class="cm">/* Bit  5 */</span><span class="cp"></span>
<span class="cp">#define HA_R1ATT       0x00000080	</span><span class="cm">/* Bit  7 */</span><span class="cp"></span>
<span class="cp">#define HA_R2RE_REQ    0x00000100	</span><span class="cm">/* Bit  8 */</span><span class="cp"></span>
<span class="cp">#define HA_R2CE_RSP    0x00000200	</span><span class="cm">/* Bit  9 */</span><span class="cp"></span>
<span class="cp">#define HA_R2ATT       0x00000800	</span><span class="cm">/* Bit 11 */</span><span class="cp"></span>
<span class="cp">#define HA_R3RE_REQ    0x00001000	</span><span class="cm">/* Bit 12 */</span><span class="cp"></span>
<span class="cp">#define HA_R3CE_RSP    0x00002000	</span><span class="cm">/* Bit 13 */</span><span class="cp"></span>
<span class="cp">#define HA_R3ATT       0x00008000	</span><span class="cm">/* Bit 15 */</span><span class="cp"></span>
<span class="cp">#define HA_LATT        0x20000000	</span><span class="cm">/* Bit 29 */</span><span class="cp"></span>
<span class="cp">#define HA_MBATT       0x40000000	</span><span class="cm">/* Bit 30 */</span><span class="cp"></span>
<span class="cp">#define HA_ERATT       0x80000000	</span><span class="cm">/* Bit 31 */</span><span class="cp"></span>

<span class="cp">#define HA_RXRE_REQ    0x00000001	</span><span class="cm">/* Bit  0 */</span><span class="cp"></span>
<span class="cp">#define HA_RXCE_RSP    0x00000002	</span><span class="cm">/* Bit  1 */</span><span class="cp"></span>
<span class="cp">#define HA_RXATT       0x00000008	</span><span class="cm">/* Bit  3 */</span><span class="cp"></span>
<span class="cp">#define HA_RXMASK      0x0000000f</span>

<span class="cp">#define HA_R0_CLR_MSK	(HA_R0RE_REQ | HA_R0CE_RSP | HA_R0ATT)</span>
<span class="cp">#define HA_R1_CLR_MSK	(HA_R1RE_REQ | HA_R1CE_RSP | HA_R1ATT)</span>
<span class="cp">#define HA_R2_CLR_MSK	(HA_R2RE_REQ | HA_R2CE_RSP | HA_R2ATT)</span>
<span class="cp">#define HA_R3_CLR_MSK	(HA_R3RE_REQ | HA_R3CE_RSP | HA_R3ATT)</span>

<span class="cp">#define HA_R0_POS	3</span>
<span class="cp">#define HA_R1_POS	7</span>
<span class="cp">#define HA_R2_POS	11</span>
<span class="cp">#define HA_R3_POS	15</span>
<span class="cp">#define HA_LE_POS	29</span>
<span class="cp">#define HA_MB_POS	30</span>
<span class="cp">#define HA_ER_POS	31</span>
<span class="cm">/* Chip Attention Register */</span>

<span class="cp">#define CA_REG_OFFSET  4	</span><span class="cm">/* Byte offset from register base address */</span><span class="cp"></span>

<span class="cp">#define CA_R0CE_REQ    0x00000001	</span><span class="cm">/* Bit  0 */</span><span class="cp"></span>
<span class="cp">#define CA_R0RE_RSP    0x00000002	</span><span class="cm">/* Bit  1 */</span><span class="cp"></span>
<span class="cp">#define CA_R0ATT       0x00000008	</span><span class="cm">/* Bit  3 */</span><span class="cp"></span>
<span class="cp">#define CA_R1CE_REQ    0x00000010	</span><span class="cm">/* Bit  4 */</span><span class="cp"></span>
<span class="cp">#define CA_R1RE_RSP    0x00000020	</span><span class="cm">/* Bit  5 */</span><span class="cp"></span>
<span class="cp">#define CA_R1ATT       0x00000080	</span><span class="cm">/* Bit  7 */</span><span class="cp"></span>
<span class="cp">#define CA_R2CE_REQ    0x00000100	</span><span class="cm">/* Bit  8 */</span><span class="cp"></span>
<span class="cp">#define CA_R2RE_RSP    0x00000200	</span><span class="cm">/* Bit  9 */</span><span class="cp"></span>
<span class="cp">#define CA_R2ATT       0x00000800	</span><span class="cm">/* Bit 11 */</span><span class="cp"></span>
<span class="cp">#define CA_R3CE_REQ    0x00001000	</span><span class="cm">/* Bit 12 */</span><span class="cp"></span>
<span class="cp">#define CA_R3RE_RSP    0x00002000	</span><span class="cm">/* Bit 13 */</span><span class="cp"></span>
<span class="cp">#define CA_R3ATT       0x00008000	</span><span class="cm">/* Bit 15 */</span><span class="cp"></span>
<span class="cp">#define CA_MBATT       0x40000000	</span><span class="cm">/* Bit 30 */</span><span class="cp"></span>

<span class="cm">/* Host Status Register */</span>

<span class="cp">#define HS_REG_OFFSET  8	</span><span class="cm">/* Byte offset from register base address */</span><span class="cp"></span>

<span class="cp">#define HS_MBRDY       0x00400000	</span><span class="cm">/* Bit 22 */</span><span class="cp"></span>
<span class="cp">#define HS_FFRDY       0x00800000	</span><span class="cm">/* Bit 23 */</span><span class="cp"></span>
<span class="cp">#define HS_FFER8       0x01000000	</span><span class="cm">/* Bit 24 */</span><span class="cp"></span>
<span class="cp">#define HS_FFER7       0x02000000	</span><span class="cm">/* Bit 25 */</span><span class="cp"></span>
<span class="cp">#define HS_FFER6       0x04000000	</span><span class="cm">/* Bit 26 */</span><span class="cp"></span>
<span class="cp">#define HS_FFER5       0x08000000	</span><span class="cm">/* Bit 27 */</span><span class="cp"></span>
<span class="cp">#define HS_FFER4       0x10000000	</span><span class="cm">/* Bit 28 */</span><span class="cp"></span>
<span class="cp">#define HS_FFER3       0x20000000	</span><span class="cm">/* Bit 29 */</span><span class="cp"></span>
<span class="cp">#define HS_FFER2       0x40000000	</span><span class="cm">/* Bit 30 */</span><span class="cp"></span>
<span class="cp">#define HS_FFER1       0x80000000	</span><span class="cm">/* Bit 31 */</span><span class="cp"></span>
<span class="cp">#define HS_CRIT_TEMP   0x00000100	</span><span class="cm">/* Bit 8  */</span><span class="cp"></span>
<span class="cp">#define HS_FFERM       0xFF000100	</span><span class="cm">/* Mask for error bits 31:24 and 8 */</span><span class="cp"></span>
<span class="cp">#define UNPLUG_ERR     0x00000001	</span><span class="cm">/* Indicate pci hot unplug */</span><span class="cp"></span>
<span class="cm">/* Host Control Register */</span>

<span class="cp">#define HC_REG_OFFSET  12	</span><span class="cm">/* Byte offset from register base address */</span><span class="cp"></span>

<span class="cp">#define HC_MBINT_ENA   0x00000001	</span><span class="cm">/* Bit  0 */</span><span class="cp"></span>
<span class="cp">#define HC_R0INT_ENA   0x00000002	</span><span class="cm">/* Bit  1 */</span><span class="cp"></span>
<span class="cp">#define HC_R1INT_ENA   0x00000004	</span><span class="cm">/* Bit  2 */</span><span class="cp"></span>
<span class="cp">#define HC_R2INT_ENA   0x00000008	</span><span class="cm">/* Bit  3 */</span><span class="cp"></span>
<span class="cp">#define HC_R3INT_ENA   0x00000010	</span><span class="cm">/* Bit  4 */</span><span class="cp"></span>
<span class="cp">#define HC_INITHBI     0x02000000	</span><span class="cm">/* Bit 25 */</span><span class="cp"></span>
<span class="cp">#define HC_INITMB      0x04000000	</span><span class="cm">/* Bit 26 */</span><span class="cp"></span>
<span class="cp">#define HC_INITFF      0x08000000	</span><span class="cm">/* Bit 27 */</span><span class="cp"></span>
<span class="cp">#define HC_LAINT_ENA   0x20000000	</span><span class="cm">/* Bit 29 */</span><span class="cp"></span>
<span class="cp">#define HC_ERINT_ENA   0x80000000	</span><span class="cm">/* Bit 31 */</span><span class="cp"></span>

<span class="cm">/* Message Signaled Interrupt eXtension (MSI-X) message identifiers */</span>
<span class="cp">#define MSIX_DFLT_ID	0</span>
<span class="cp">#define MSIX_RNG0_ID	0</span>
<span class="cp">#define MSIX_RNG1_ID	1</span>
<span class="cp">#define MSIX_RNG2_ID	2</span>
<span class="cp">#define MSIX_RNG3_ID	3</span>

<span class="cp">#define MSIX_LINK_ID	4</span>
<span class="cp">#define MSIX_MBOX_ID	5</span>

<span class="cp">#define MSIX_SPARE0_ID	6</span>
<span class="cp">#define MSIX_SPARE1_ID	7</span>

<span class="cm">/* Mailbox Commands */</span>
<span class="cp">#define MBX_SHUTDOWN        0x00	</span><span class="cm">/* terminate testing */</span><span class="cp"></span>
<span class="cp">#define MBX_LOAD_SM         0x01</span>
<span class="cp">#define MBX_READ_NV         0x02</span>
<span class="cp">#define MBX_WRITE_NV        0x03</span>
<span class="cp">#define MBX_RUN_BIU_DIAG    0x04</span>
<span class="cp">#define MBX_INIT_LINK       0x05</span>
<span class="cp">#define MBX_DOWN_LINK       0x06</span>
<span class="cp">#define MBX_CONFIG_LINK     0x07</span>
<span class="cp">#define MBX_CONFIG_RING     0x09</span>
<span class="cp">#define MBX_RESET_RING      0x0A</span>
<span class="cp">#define MBX_READ_CONFIG     0x0B</span>
<span class="cp">#define MBX_READ_RCONFIG    0x0C</span>
<span class="cp">#define MBX_READ_SPARM      0x0D</span>
<span class="cp">#define MBX_READ_STATUS     0x0E</span>
<span class="cp">#define MBX_READ_RPI        0x0F</span>
<span class="cp">#define MBX_READ_XRI        0x10</span>
<span class="cp">#define MBX_READ_REV        0x11</span>
<span class="cp">#define MBX_READ_LNK_STAT   0x12</span>
<span class="cp">#define MBX_REG_LOGIN       0x13</span>
<span class="cp">#define MBX_UNREG_LOGIN     0x14</span>
<span class="cp">#define MBX_CLEAR_LA        0x16</span>
<span class="cp">#define MBX_DUMP_MEMORY     0x17</span>
<span class="cp">#define MBX_DUMP_CONTEXT    0x18</span>
<span class="cp">#define MBX_RUN_DIAGS       0x19</span>
<span class="cp">#define MBX_RESTART         0x1A</span>
<span class="cp">#define MBX_UPDATE_CFG      0x1B</span>
<span class="cp">#define MBX_DOWN_LOAD       0x1C</span>
<span class="cp">#define MBX_DEL_LD_ENTRY    0x1D</span>
<span class="cp">#define MBX_RUN_PROGRAM     0x1E</span>
<span class="cp">#define MBX_SET_MASK        0x20</span>
<span class="cp">#define MBX_SET_VARIABLE    0x21</span>
<span class="cp">#define MBX_UNREG_D_ID      0x23</span>
<span class="cp">#define MBX_KILL_BOARD      0x24</span>
<span class="cp">#define MBX_CONFIG_FARP     0x25</span>
<span class="cp">#define MBX_BEACON          0x2A</span>
<span class="cp">#define MBX_CONFIG_MSI      0x30</span>
<span class="cp">#define MBX_HEARTBEAT       0x31</span>
<span class="cp">#define MBX_WRITE_VPARMS    0x32</span>
<span class="cp">#define MBX_ASYNCEVT_ENABLE 0x33</span>
<span class="cp">#define MBX_READ_EVENT_LOG_STATUS 0x37</span>
<span class="cp">#define MBX_READ_EVENT_LOG  0x38</span>
<span class="cp">#define MBX_WRITE_EVENT_LOG 0x39</span>

<span class="cp">#define MBX_PORT_CAPABILITIES 0x3B</span>
<span class="cp">#define MBX_PORT_IOV_CONTROL 0x3C</span>

<span class="cp">#define MBX_CONFIG_HBQ	    0x7C</span>
<span class="cp">#define MBX_LOAD_AREA       0x81</span>
<span class="cp">#define MBX_RUN_BIU_DIAG64  0x84</span>
<span class="cp">#define MBX_CONFIG_PORT     0x88</span>
<span class="cp">#define MBX_READ_SPARM64    0x8D</span>
<span class="cp">#define MBX_READ_RPI64      0x8F</span>
<span class="cp">#define MBX_REG_LOGIN64     0x93</span>
<span class="cp">#define MBX_READ_TOPOLOGY   0x95</span>
<span class="cp">#define MBX_REG_VPI	    0x96</span>
<span class="cp">#define MBX_UNREG_VPI	    0x97</span>

<span class="cp">#define MBX_WRITE_WWN       0x98</span>
<span class="cp">#define MBX_SET_DEBUG       0x99</span>
<span class="cp">#define MBX_LOAD_EXP_ROM    0x9C</span>
<span class="cp">#define MBX_SLI4_CONFIG	    0x9B</span>
<span class="cp">#define MBX_SLI4_REQ_FTRS   0x9D</span>
<span class="cp">#define MBX_MAX_CMDS        0x9E</span>
<span class="cp">#define MBX_RESUME_RPI      0x9E</span>
<span class="cp">#define MBX_SLI2_CMD_MASK   0x80</span>
<span class="cp">#define MBX_REG_VFI         0x9F</span>
<span class="cp">#define MBX_REG_FCFI        0xA0</span>
<span class="cp">#define MBX_UNREG_VFI       0xA1</span>
<span class="cp">#define MBX_UNREG_FCFI	    0xA2</span>
<span class="cp">#define MBX_INIT_VFI        0xA3</span>
<span class="cp">#define MBX_INIT_VPI        0xA4</span>

<span class="cp">#define MBX_AUTH_PORT       0xF8</span>
<span class="cp">#define MBX_SECURITY_MGMT   0xF9</span>

<span class="cm">/* IOCB Commands */</span>

<span class="cp">#define CMD_RCV_SEQUENCE_CX     0x01</span>
<span class="cp">#define CMD_XMIT_SEQUENCE_CR    0x02</span>
<span class="cp">#define CMD_XMIT_SEQUENCE_CX    0x03</span>
<span class="cp">#define CMD_XMIT_BCAST_CN       0x04</span>
<span class="cp">#define CMD_XMIT_BCAST_CX       0x05</span>
<span class="cp">#define CMD_QUE_RING_BUF_CN     0x06</span>
<span class="cp">#define CMD_QUE_XRI_BUF_CX      0x07</span>
<span class="cp">#define CMD_IOCB_CONTINUE_CN    0x08</span>
<span class="cp">#define CMD_RET_XRI_BUF_CX      0x09</span>
<span class="cp">#define CMD_ELS_REQUEST_CR      0x0A</span>
<span class="cp">#define CMD_ELS_REQUEST_CX      0x0B</span>
<span class="cp">#define CMD_RCV_ELS_REQ_CX      0x0D</span>
<span class="cp">#define CMD_ABORT_XRI_CN        0x0E</span>
<span class="cp">#define CMD_ABORT_XRI_CX        0x0F</span>
<span class="cp">#define CMD_CLOSE_XRI_CN        0x10</span>
<span class="cp">#define CMD_CLOSE_XRI_CX        0x11</span>
<span class="cp">#define CMD_CREATE_XRI_CR       0x12</span>
<span class="cp">#define CMD_CREATE_XRI_CX       0x13</span>
<span class="cp">#define CMD_GET_RPI_CN          0x14</span>
<span class="cp">#define CMD_XMIT_ELS_RSP_CX     0x15</span>
<span class="cp">#define CMD_GET_RPI_CR          0x16</span>
<span class="cp">#define CMD_XRI_ABORTED_CX      0x17</span>
<span class="cp">#define CMD_FCP_IWRITE_CR       0x18</span>
<span class="cp">#define CMD_FCP_IWRITE_CX       0x19</span>
<span class="cp">#define CMD_FCP_IREAD_CR        0x1A</span>
<span class="cp">#define CMD_FCP_IREAD_CX        0x1B</span>
<span class="cp">#define CMD_FCP_ICMND_CR        0x1C</span>
<span class="cp">#define CMD_FCP_ICMND_CX        0x1D</span>
<span class="cp">#define CMD_FCP_TSEND_CX        0x1F</span>
<span class="cp">#define CMD_FCP_TRECEIVE_CX     0x21</span>
<span class="cp">#define CMD_FCP_TRSP_CX	        0x23</span>
<span class="cp">#define CMD_FCP_AUTO_TRSP_CX    0x29</span>

<span class="cp">#define CMD_ADAPTER_MSG         0x20</span>
<span class="cp">#define CMD_ADAPTER_DUMP        0x22</span>

<span class="cm">/*  SLI_2 IOCB Command Set */</span>

<span class="cp">#define CMD_ASYNC_STATUS        0x7C</span>
<span class="cp">#define CMD_RCV_SEQUENCE64_CX   0x81</span>
<span class="cp">#define CMD_XMIT_SEQUENCE64_CR  0x82</span>
<span class="cp">#define CMD_XMIT_SEQUENCE64_CX  0x83</span>
<span class="cp">#define CMD_XMIT_BCAST64_CN     0x84</span>
<span class="cp">#define CMD_XMIT_BCAST64_CX     0x85</span>
<span class="cp">#define CMD_QUE_RING_BUF64_CN   0x86</span>
<span class="cp">#define CMD_QUE_XRI_BUF64_CX    0x87</span>
<span class="cp">#define CMD_IOCB_CONTINUE64_CN  0x88</span>
<span class="cp">#define CMD_RET_XRI_BUF64_CX    0x89</span>
<span class="cp">#define CMD_ELS_REQUEST64_CR    0x8A</span>
<span class="cp">#define CMD_ELS_REQUEST64_CX    0x8B</span>
<span class="cp">#define CMD_ABORT_MXRI64_CN     0x8C</span>
<span class="cp">#define CMD_RCV_ELS_REQ64_CX    0x8D</span>
<span class="cp">#define CMD_XMIT_ELS_RSP64_CX   0x95</span>
<span class="cp">#define CMD_XMIT_BLS_RSP64_CX   0x97</span>
<span class="cp">#define CMD_FCP_IWRITE64_CR     0x98</span>
<span class="cp">#define CMD_FCP_IWRITE64_CX     0x99</span>
<span class="cp">#define CMD_FCP_IREAD64_CR      0x9A</span>
<span class="cp">#define CMD_FCP_IREAD64_CX      0x9B</span>
<span class="cp">#define CMD_FCP_ICMND64_CR      0x9C</span>
<span class="cp">#define CMD_FCP_ICMND64_CX      0x9D</span>
<span class="cp">#define CMD_FCP_TSEND64_CX      0x9F</span>
<span class="cp">#define CMD_FCP_TRECEIVE64_CX   0xA1</span>
<span class="cp">#define CMD_FCP_TRSP64_CX       0xA3</span>

<span class="cp">#define CMD_QUE_XRI64_CX	0xB3</span>
<span class="cp">#define CMD_IOCB_RCV_SEQ64_CX	0xB5</span>
<span class="cp">#define CMD_IOCB_RCV_ELS64_CX	0xB7</span>
<span class="cp">#define CMD_IOCB_RET_XRI64_CX	0xB9</span>
<span class="cp">#define CMD_IOCB_RCV_CONT64_CX	0xBB</span>

<span class="cp">#define CMD_GEN_REQUEST64_CR    0xC2</span>
<span class="cp">#define CMD_GEN_REQUEST64_CX    0xC3</span>

<span class="cm">/* Unhandled SLI-3 Commands */</span>
<span class="cp">#define CMD_IOCB_XMIT_MSEQ64_CR		0xB0</span>
<span class="cp">#define CMD_IOCB_XMIT_MSEQ64_CX		0xB1</span>
<span class="cp">#define CMD_IOCB_RCV_SEQ_LIST64_CX	0xC1</span>
<span class="cp">#define CMD_IOCB_RCV_ELS_LIST64_CX	0xCD</span>
<span class="cp">#define CMD_IOCB_CLOSE_EXTENDED_CN	0xB6</span>
<span class="cp">#define CMD_IOCB_ABORT_EXTENDED_CN	0xBA</span>
<span class="cp">#define CMD_IOCB_RET_HBQE64_CN		0xCA</span>
<span class="cp">#define CMD_IOCB_FCP_IBIDIR64_CR	0xAC</span>
<span class="cp">#define CMD_IOCB_FCP_IBIDIR64_CX	0xAD</span>
<span class="cp">#define CMD_IOCB_FCP_ITASKMGT64_CX	0xAF</span>
<span class="cp">#define CMD_IOCB_LOGENTRY_CN		0x94</span>
<span class="cp">#define CMD_IOCB_LOGENTRY_ASYNC_CN	0x96</span>

<span class="cm">/* Data Security SLI Commands */</span>
<span class="cp">#define DSSCMD_IWRITE64_CR		0xF8</span>
<span class="cp">#define DSSCMD_IWRITE64_CX		0xF9</span>
<span class="cp">#define DSSCMD_IREAD64_CR		0xFA</span>
<span class="cp">#define DSSCMD_IREAD64_CX		0xFB</span>

<span class="cp">#define CMD_MAX_IOCB_CMD        0xFB</span>
<span class="cp">#define CMD_IOCB_MASK           0xff</span>

<span class="cp">#define MAX_MSG_DATA            28	</span><span class="cm">/* max msg data in CMD_ADAPTER_MSG</span>
<span class="cm">					   iocb */</span><span class="cp"></span>
<span class="cp">#define LPFC_MAX_ADPTMSG         32	</span><span class="cm">/* max msg data */</span><span class="cp"></span>
<span class="cm">/*</span>
<span class="cm"> *  Define Status</span>
<span class="cm"> */</span>
<span class="cp">#define MBX_SUCCESS                 0</span>
<span class="cp">#define MBXERR_NUM_RINGS            1</span>
<span class="cp">#define MBXERR_NUM_IOCBS            2</span>
<span class="cp">#define MBXERR_IOCBS_EXCEEDED       3</span>
<span class="cp">#define MBXERR_BAD_RING_NUMBER      4</span>
<span class="cp">#define MBXERR_MASK_ENTRIES_RANGE   5</span>
<span class="cp">#define MBXERR_MASKS_EXCEEDED       6</span>
<span class="cp">#define MBXERR_BAD_PROFILE          7</span>
<span class="cp">#define MBXERR_BAD_DEF_CLASS        8</span>
<span class="cp">#define MBXERR_BAD_MAX_RESPONDER    9</span>
<span class="cp">#define MBXERR_BAD_MAX_ORIGINATOR   10</span>
<span class="cp">#define MBXERR_RPI_REGISTERED       11</span>
<span class="cp">#define MBXERR_RPI_FULL             12</span>
<span class="cp">#define MBXERR_NO_RESOURCES         13</span>
<span class="cp">#define MBXERR_BAD_RCV_LENGTH       14</span>
<span class="cp">#define MBXERR_DMA_ERROR            15</span>
<span class="cp">#define MBXERR_ERROR                16</span>
<span class="cp">#define MBXERR_LINK_DOWN            0x33</span>
<span class="cp">#define MBXERR_SEC_NO_PERMISSION    0xF02</span>
<span class="cp">#define MBX_NOT_FINISHED            255</span>

<span class="cp">#define MBX_BUSY                   0xffffff </span><span class="cm">/* Attempted cmd to busy Mailbox */</span><span class="cp"></span>
<span class="cp">#define MBX_TIMEOUT                0xfffffe </span><span class="cm">/* time-out expired waiting for */</span><span class="cp"></span>

<span class="cp">#define TEMPERATURE_OFFSET 0xB0	</span><span class="cm">/* Slim offset for critical temperature event */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> *    Begin Structure Definitions for Mailbox Commands</span>
<span class="cm"> */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint8_t</span> <span class="n">tval</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">tmask</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">rval</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">rmask</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint8_t</span> <span class="n">rmask</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">rval</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">tmask</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">tval</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">RR_REG</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">bdeAddress</span><span class="p">;</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">bdeReserved</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">bdeAddrHigh</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">bdeSize</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">bdeSize</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">bdeAddrHigh</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">bdeReserved</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">ULP_BDL</span> <span class="p">{</span>	<span class="cm">/* SLI-2 */</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">bdeFlags</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>	<span class="cm">/* BDL Flags */</span>
	<span class="kt">uint32_t</span> <span class="n">bdeSize</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>	<span class="cm">/* Size of BDL array in host memory (bytes) */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">bdeSize</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>	<span class="cm">/* Size of BDL array in host memory (bytes) */</span>
	<span class="kt">uint32_t</span> <span class="n">bdeFlags</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>	<span class="cm">/* BDL Flags */</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">addrLow</span><span class="p">;</span>	<span class="cm">/* Address 0:31 */</span>
	<span class="kt">uint32_t</span> <span class="n">addrHigh</span><span class="p">;</span>	<span class="cm">/* Address 32:63 */</span>
	<span class="kt">uint32_t</span> <span class="n">ulpIoTag32</span><span class="p">;</span>	<span class="cm">/* Can be used for 32 bit I/O Tag */</span>
<span class="p">}</span> <span class="n">ULP_BDL</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * BlockGuard Definitions</span>
<span class="cm"> */</span>

<span class="k">enum</span> <span class="n">lpfc_protgrp_type</span> <span class="p">{</span>
	<span class="n">LPFC_PG_TYPE_INVALID</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="cm">/* used to indicate errors                  */</span>
	<span class="n">LPFC_PG_TYPE_NO_DIF</span><span class="p">,</span>	  <span class="cm">/* no DIF data pointed to by prot grp       */</span>
	<span class="n">LPFC_PG_TYPE_EMBD_DIF</span><span class="p">,</span>	  <span class="cm">/* DIF is embedded (inline) with data       */</span>
	<span class="n">LPFC_PG_TYPE_DIF_BUF</span>	  <span class="cm">/* DIF has its own scatter/gather list      */</span>
<span class="p">};</span>

<span class="cm">/* PDE Descriptors */</span>
<span class="cp">#define LPFC_PDE5_DESCRIPTOR		0x85</span>
<span class="cp">#define LPFC_PDE6_DESCRIPTOR		0x86</span>
<span class="cp">#define LPFC_PDE7_DESCRIPTOR		0x87</span>

<span class="cm">/* BlockGuard Opcodes */</span>
<span class="cp">#define BG_OP_IN_NODIF_OUT_CRC		0x0</span>
<span class="cp">#define	BG_OP_IN_CRC_OUT_NODIF		0x1</span>
<span class="cp">#define	BG_OP_IN_NODIF_OUT_CSUM		0x2</span>
<span class="cp">#define	BG_OP_IN_CSUM_OUT_NODIF		0x3</span>
<span class="cp">#define	BG_OP_IN_CRC_OUT_CRC		0x4</span>
<span class="cp">#define	BG_OP_IN_CSUM_OUT_CSUM		0x5</span>
<span class="cp">#define	BG_OP_IN_CRC_OUT_CSUM		0x6</span>
<span class="cp">#define	BG_OP_IN_CSUM_OUT_CRC		0x7</span>

<span class="k">struct</span> <span class="n">lpfc_pde5</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">word0</span><span class="p">;</span>
<span class="cp">#define pde5_type_SHIFT		24</span>
<span class="cp">#define pde5_type_MASK		0x000000ff</span>
<span class="cp">#define pde5_type_WORD		word0</span>
<span class="cp">#define pde5_rsvd0_SHIFT	0</span>
<span class="cp">#define pde5_rsvd0_MASK		0x00ffffff</span>
<span class="cp">#define pde5_rsvd0_WORD		word0</span>
	<span class="kt">uint32_t</span> <span class="n">reftag</span><span class="p">;</span>	<span class="cm">/* Reference Tag Value			*/</span>
	<span class="kt">uint32_t</span> <span class="n">reftagtr</span><span class="p">;</span>	<span class="cm">/* Reference Tag Translation Value 	*/</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">lpfc_pde6</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">word0</span><span class="p">;</span>
<span class="cp">#define pde6_type_SHIFT		24</span>
<span class="cp">#define pde6_type_MASK		0x000000ff</span>
<span class="cp">#define pde6_type_WORD		word0</span>
<span class="cp">#define pde6_rsvd0_SHIFT	0</span>
<span class="cp">#define pde6_rsvd0_MASK		0x00ffffff</span>
<span class="cp">#define pde6_rsvd0_WORD		word0</span>
	<span class="kt">uint32_t</span> <span class="n">word1</span><span class="p">;</span>
<span class="cp">#define pde6_rsvd1_SHIFT	26</span>
<span class="cp">#define pde6_rsvd1_MASK		0x0000003f</span>
<span class="cp">#define pde6_rsvd1_WORD		word1</span>
<span class="cp">#define pde6_na_SHIFT		25</span>
<span class="cp">#define pde6_na_MASK		0x00000001</span>
<span class="cp">#define pde6_na_WORD		word1</span>
<span class="cp">#define pde6_rsvd2_SHIFT	16</span>
<span class="cp">#define pde6_rsvd2_MASK		0x000001FF</span>
<span class="cp">#define pde6_rsvd2_WORD		word1</span>
<span class="cp">#define pde6_apptagtr_SHIFT	0</span>
<span class="cp">#define pde6_apptagtr_MASK	0x0000ffff</span>
<span class="cp">#define pde6_apptagtr_WORD	word1</span>
	<span class="kt">uint32_t</span> <span class="n">word2</span><span class="p">;</span>
<span class="cp">#define pde6_optx_SHIFT		28</span>
<span class="cp">#define pde6_optx_MASK		0x0000000f</span>
<span class="cp">#define pde6_optx_WORD		word2</span>
<span class="cp">#define pde6_oprx_SHIFT		24</span>
<span class="cp">#define pde6_oprx_MASK		0x0000000f</span>
<span class="cp">#define pde6_oprx_WORD		word2</span>
<span class="cp">#define pde6_nr_SHIFT		23</span>
<span class="cp">#define pde6_nr_MASK		0x00000001</span>
<span class="cp">#define pde6_nr_WORD		word2</span>
<span class="cp">#define pde6_ce_SHIFT		22</span>
<span class="cp">#define pde6_ce_MASK		0x00000001</span>
<span class="cp">#define pde6_ce_WORD		word2</span>
<span class="cp">#define pde6_re_SHIFT		21</span>
<span class="cp">#define pde6_re_MASK		0x00000001</span>
<span class="cp">#define pde6_re_WORD		word2</span>
<span class="cp">#define pde6_ae_SHIFT		20</span>
<span class="cp">#define pde6_ae_MASK		0x00000001</span>
<span class="cp">#define pde6_ae_WORD		word2</span>
<span class="cp">#define pde6_ai_SHIFT		19</span>
<span class="cp">#define pde6_ai_MASK		0x00000001</span>
<span class="cp">#define pde6_ai_WORD		word2</span>
<span class="cp">#define pde6_bs_SHIFT		16</span>
<span class="cp">#define pde6_bs_MASK		0x00000007</span>
<span class="cp">#define pde6_bs_WORD		word2</span>
<span class="cp">#define pde6_apptagval_SHIFT	0</span>
<span class="cp">#define pde6_apptagval_MASK	0x0000ffff</span>
<span class="cp">#define pde6_apptagval_WORD	word2</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">lpfc_pde7</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">word0</span><span class="p">;</span>
<span class="cp">#define pde7_type_SHIFT		24</span>
<span class="cp">#define pde7_type_MASK		0x000000ff</span>
<span class="cp">#define pde7_type_WORD		word0</span>
<span class="cp">#define pde7_rsvd0_SHIFT	0</span>
<span class="cp">#define pde7_rsvd0_MASK		0x00ffffff</span>
<span class="cp">#define pde7_rsvd0_WORD		word0</span>
	<span class="kt">uint32_t</span> <span class="n">addrHigh</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">addrLow</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Structure for MB Command LOAD_SM and DOWN_LOAD */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">25</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">acknowledgment</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">version</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">erase_or_prog</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">update_flash</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">update_ram</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">method</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">load_cmplt</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">load_cmplt</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">method</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">update_ram</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">update_flash</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">erase_or_prog</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">version</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">acknowledgment</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">25</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">dl_to_adr_low</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">dl_to_adr_high</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">dl_len</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">dl_from_mbx_offset</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="n">dl_from_bde</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">dl_from_bde64</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>

<span class="p">}</span> <span class="n">LOAD_SM_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command READ_NVPARM (02) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* Read as all one&#39;s */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="p">;</span>		<span class="cm">/* Read as all zero&#39;s */</span>
	<span class="kt">uint32_t</span> <span class="n">portname</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* N_PORT name */</span>
	<span class="kt">uint32_t</span> <span class="n">nodename</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* NODE name */</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">pref_DID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">hardAL_PA</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">hardAL_PA</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">pref_DID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="p">[</span><span class="mi">21</span><span class="p">];</span>	<span class="cm">/* Read as all one&#39;s */</span>
<span class="p">}</span> <span class="n">READ_NV_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command WRITE_NVPARMS (03) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* Must be all one&#39;s */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="p">;</span>		<span class="cm">/* Must be all zero&#39;s */</span>
	<span class="kt">uint32_t</span> <span class="n">portname</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* N_PORT name */</span>
	<span class="kt">uint32_t</span> <span class="n">nodename</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* NODE name */</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">pref_DID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">hardAL_PA</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">hardAL_PA</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">pref_DID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="p">[</span><span class="mi">21</span><span class="p">];</span>	<span class="cm">/* Must be all one&#39;s */</span>
<span class="p">}</span> <span class="n">WRITE_NV_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command RUN_BIU_DIAG (04) */</span>
<span class="cm">/* Structure for MB Command RUN_BIU_DIAG64 (0x84) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="n">xmit_bde</span><span class="p">;</span>
			<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="n">rcv_bde</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">s1</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">xmit_bde64</span><span class="p">;</span>
			<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">rcv_bde64</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">s2</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>
<span class="p">}</span> <span class="n">BIU_DIAG_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB command READ_EVENT_LOG (0x38) */</span>
<span class="k">struct</span> <span class="n">READ_EVENT_LOG_VAR</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">word1</span><span class="p">;</span>
<span class="cp">#define lpfc_event_log_SHIFT	29</span>
<span class="cp">#define lpfc_event_log_MASK	0x00000001</span>
<span class="cp">#define lpfc_event_log_WORD	word1</span>
<span class="cp">#define USE_MAILBOX_RESPONSE	1</span>
	<span class="kt">uint32_t</span> <span class="n">offset</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">rcv_bde64</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Structure for MB Command INIT_LINK (05) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">lipsr_AL_PA</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>	<span class="cm">/* AL_PA to issue Lip Selective Reset to */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">lipsr_AL_PA</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>	<span class="cm">/* AL_PA to issue Lip Selective Reset to */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint8_t</span> <span class="n">fabric_AL_PA</span><span class="p">;</span>	<span class="cm">/* If using a Fabric Assigned AL_PA */</span>
	<span class="kt">uint8_t</span> <span class="n">rsvd2</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">link_flags</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">link_flags</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">rsvd2</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">fabric_AL_PA</span><span class="p">;</span>	<span class="cm">/* If using a Fabric Assigned AL_PA */</span>
<span class="cp">#endif</span>

<span class="cp">#define FLAGS_TOPOLOGY_MODE_LOOP_PT  0x00 </span><span class="cm">/* Attempt loop then pt-pt */</span><span class="cp"></span>
<span class="cp">#define FLAGS_LOCAL_LB               0x01 </span><span class="cm">/* link_flags (=1) ENDEC loopback */</span><span class="cp"></span>
<span class="cp">#define FLAGS_TOPOLOGY_MODE_PT_PT    0x02 </span><span class="cm">/* Attempt pt-pt only */</span><span class="cp"></span>
<span class="cp">#define FLAGS_TOPOLOGY_MODE_LOOP     0x04 </span><span class="cm">/* Attempt loop only */</span><span class="cp"></span>
<span class="cp">#define FLAGS_TOPOLOGY_MODE_PT_LOOP  0x06 </span><span class="cm">/* Attempt pt-pt then loop */</span><span class="cp"></span>
<span class="cp">#define	FLAGS_UNREG_LOGIN_ALL	     0x08 </span><span class="cm">/* UNREG_LOGIN all on link down */</span><span class="cp"></span>
<span class="cp">#define FLAGS_LIRP_LILP              0x80 </span><span class="cm">/* LIRP / LILP is disabled */</span><span class="cp"></span>

<span class="cp">#define FLAGS_TOPOLOGY_FAILOVER      0x0400	</span><span class="cm">/* Bit 10 */</span><span class="cp"></span>
<span class="cp">#define FLAGS_LINK_SPEED             0x0800	</span><span class="cm">/* Bit 11 */</span><span class="cp"></span>
<span class="cp">#define FLAGS_IMED_ABORT             0x04000	</span><span class="cm">/* Bit 14 */</span><span class="cp"></span>

	<span class="kt">uint32_t</span> <span class="n">link_speed</span><span class="p">;</span>
<span class="cp">#define LINK_SPEED_AUTO 0x0     </span><span class="cm">/* Auto selection */</span><span class="cp"></span>
<span class="cp">#define LINK_SPEED_1G   0x1     </span><span class="cm">/* 1 Gigabaud */</span><span class="cp"></span>
<span class="cp">#define LINK_SPEED_2G   0x2     </span><span class="cm">/* 2 Gigabaud */</span><span class="cp"></span>
<span class="cp">#define LINK_SPEED_4G   0x4     </span><span class="cm">/* 4 Gigabaud */</span><span class="cp"></span>
<span class="cp">#define LINK_SPEED_8G   0x8     </span><span class="cm">/* 8 Gigabaud */</span><span class="cp"></span>
<span class="cp">#define LINK_SPEED_10G  0x10    </span><span class="cm">/* 10 Gigabaud */</span><span class="cp"></span>
<span class="cp">#define LINK_SPEED_16G  0x11    </span><span class="cm">/* 16 Gigabaud */</span><span class="cp"></span>

<span class="p">}</span> <span class="n">INIT_LINK_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command DOWN_LINK (06) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">DOWN_LINK_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command CONFIG_LINK (07) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">cr</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ci</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cr_delay</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cr_count</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">MaxBBC</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">MaxBBC</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cr_count</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cr_delay</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ci</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cr</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">myId</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">edtov</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">arbtov</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ratov</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rttov</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">altov</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">crtov</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">citov</span><span class="p">;</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rrq_enable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rrq_immed</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd4</span><span class="o">:</span><span class="mi">29</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ack0_enable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">ack0_enable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd4</span><span class="o">:</span><span class="mi">29</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rrq_immed</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rrq_enable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">CONFIG_LINK</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command PART_SLIM (08)</span>
<span class="cm"> * will be removed since SLI1 is no longer supported!</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">offCiocb</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">numCiocb</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">offRiocb</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">numRiocb</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">numCiocb</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">offCiocb</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">numRiocb</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">offRiocb</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">RING_DEF</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">unused1</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">numRing</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">numRing</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">unused1</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="n">RING_DEF</span> <span class="n">ringdef</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">hbainit</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PART_SLIM_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command CONFIG_RING (09) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">unused2</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">recvSeq</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">recvNotify</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">numMask</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">profile</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">unused1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ring</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">ring</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">unused1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">profile</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">numMask</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">recvNotify</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">recvSeq</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">unused2</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">maxRespXchg</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">maxOrigXchg</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">maxOrigXchg</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">maxRespXchg</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="n">RR_REG</span> <span class="n">rrRegs</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="p">}</span> <span class="n">CONFIG_RING_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command RESET_RING (10) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">ring_no</span><span class="p">;</span>
<span class="p">}</span> <span class="n">RESET_RING_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command READ_CONFIG (11) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">cr</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ci</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cr_delay</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cr_count</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">InitBBC</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">MaxBBC</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">MaxBBC</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">InitBBC</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cr_count</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cr_delay</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ci</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cr</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">topology</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">myDid</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">myDid</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">topology</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="cm">/* Defines for topology (defined previously) */</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">AR</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">IR</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">29</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ack0</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">ack0</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">29</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">IR</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">AR</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">edtov</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">arbtov</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ratov</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rttov</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">altov</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">lmt</span><span class="p">;</span>
<span class="cp">#define LMT_RESERVED  0x000    </span><span class="cm">/* Not used */</span><span class="cp"></span>
<span class="cp">#define LMT_1Gb       0x004</span>
<span class="cp">#define LMT_2Gb       0x008</span>
<span class="cp">#define LMT_4Gb       0x040</span>
<span class="cp">#define LMT_8Gb       0x080</span>
<span class="cp">#define LMT_10Gb      0x100</span>
<span class="cp">#define LMT_16Gb      0x200</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">max_xri</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">max_iocb</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">max_rpi</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">avail_xri</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">avail_iocb</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">avail_rpi</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">max_vpi</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd5</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">avail_vpi</span><span class="p">;</span>
<span class="p">}</span> <span class="n">READ_CONFIG_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command READ_RCONFIG (12) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">recvNotify</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">numMask</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">profile</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ring</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">ring</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">profile</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">numMask</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">recvNotify</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">maxResp</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">maxOrig</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">maxOrig</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">maxResp</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="n">RR_REG</span> <span class="n">rrRegs</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">cmdRingOffset</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">cmdEntryCnt</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rspRingOffset</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rspEntryCnt</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">nextCmdOffset</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd3</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">nextRspOffset</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd4</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">cmdEntryCnt</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">cmdRingOffset</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rspEntryCnt</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rspRingOffset</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd3</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">nextCmdOffset</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd4</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">nextRspOffset</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">READ_RCONF_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command READ_SPARM (13) */</span>
<span class="cm">/* Structure for MB Command READ_SPARM64 (0x8D) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="n">sp</span><span class="p">;</span> <span class="cm">/* This BDE points to struct serv_parm</span>
<span class="cm">				      structure */</span>
		<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">sp64</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd3</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">vpi</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">vpi</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd3</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">READ_SPARM_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command READ_STATUS (14) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">31</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">clrCounters</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">activeXriCnt</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">activeRpiCnt</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">clrCounters</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">31</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">activeRpiCnt</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">activeXriCnt</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">xmitByteCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rcvByteCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">xmitFrameCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rcvFrameCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">xmitSeqCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rcvSeqCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">totalOrigExchanges</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">totalRespExchanges</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rcvPbsyCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rcvFbsyCnt</span><span class="p">;</span>
<span class="p">}</span> <span class="n">READ_STATUS_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command READ_RPI (15) */</span>
<span class="cm">/* Structure for MB Command READ_RPI64 (0x8F) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">nextRpi</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reqRpi</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">DID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">reqRpi</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">nextRpi</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">DID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="n">sp</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">sp64</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>

<span class="p">}</span> <span class="n">READ_RPI_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command READ_XRI (16) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">nextXri</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">reqXri</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rpi</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">DID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">SID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd4</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">seqId</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">rsvd5</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">seqCount</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">oxId</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rxId</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd6</span><span class="o">:</span><span class="mi">30</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">si</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">exchOrig</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">reqXri</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">nextXri</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rpi</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">DID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">SID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd4</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">seqCount</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">rsvd5</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">seqId</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rxId</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">oxId</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">exchOrig</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">si</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd6</span><span class="o">:</span><span class="mi">30</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">READ_XRI_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command READ_REV (17) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">cv</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rr</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">v3req</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">v3rsp</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">25</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rv</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">rv</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">25</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">v3rsp</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">v3req</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rr</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cv</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">biuRev</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">smRev</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">smFwRev</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
			<span class="kt">uint8_t</span> <span class="n">ProgType</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">ProgId</span><span class="p">;</span>
			<span class="kt">uint16_t</span> <span class="n">ProgVer</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
			<span class="kt">uint16_t</span> <span class="n">ProgRev</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
			<span class="kt">uint16_t</span> <span class="n">ProgFixLvl</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
			<span class="kt">uint16_t</span> <span class="n">ProgDistType</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
			<span class="kt">uint16_t</span> <span class="n">DistCnt</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
			<span class="kt">uint16_t</span> <span class="n">DistCnt</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
			<span class="kt">uint16_t</span> <span class="n">ProgDistType</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
			<span class="kt">uint16_t</span> <span class="n">ProgFixLvl</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
			<span class="kt">uint16_t</span> <span class="n">ProgRev</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
			<span class="kt">uint16_t</span> <span class="n">ProgVer</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">ProgId</span><span class="p">;</span>
			<span class="kt">uint8_t</span> <span class="n">ProgType</span><span class="p">;</span>
<span class="cp">#endif</span>

		<span class="p">}</span> <span class="n">b</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">endecRev</span><span class="p">;</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint8_t</span> <span class="n">feaLevelHigh</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">feaLevelLow</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">fcphHigh</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">fcphLow</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint8_t</span> <span class="n">fcphLow</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">fcphHigh</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">feaLevelLow</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">feaLevelHigh</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">postKernRev</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">opFwRev</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">opFwName</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">sli1FwRev</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">sli1FwName</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">sli2FwRev</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">sli2FwName</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">sli3Feat</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">RandomData</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="p">}</span> <span class="n">READ_REV_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command READ_LINK_STAT (18) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">linkFailureCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">lossSyncCnt</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">lossSignalCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">primSeqErrCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">invalidXmitWord</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">crcCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">primSeqTimeout</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">elasticOverrun</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">arbTimeout</span><span class="p">;</span>
<span class="p">}</span> <span class="n">READ_LNK_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command REG_LOGIN (19) */</span>
<span class="cm">/* Structure for MB Command REG_LOGIN64 (0x93) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rpi</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">did</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">rpi</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">did</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="n">sp</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">sp64</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd6</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">vpi</span><span class="p">;</span>
<span class="cp">#else </span><span class="cm">/* __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">vpi</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd6</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="p">}</span> <span class="n">REG_LOGIN_VAR</span><span class="p">;</span>

<span class="cm">/* Word 30 contents for REG_LOGIN */</span>
<span class="k">typedef</span> <span class="k">union</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
		<span class="kt">uint16_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">12</span><span class="p">;</span>
		<span class="kt">uint16_t</span> <span class="n">wd30_class</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
		<span class="kt">uint16_t</span> <span class="n">xri</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
		<span class="kt">uint16_t</span> <span class="n">xri</span><span class="p">;</span>
		<span class="kt">uint16_t</span> <span class="n">wd30_class</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
		<span class="kt">uint16_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">12</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="p">}</span> <span class="n">f</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">word</span><span class="p">;</span>
<span class="p">}</span> <span class="n">REG_WD30</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command UNREG_LOGIN (20) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rpi</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd5</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd6</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">vpi</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">rpi</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd5</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">vpi</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd6</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">UNREG_LOGIN_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command REG_VPI (0x96) */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">upd</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">sid</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">wwn</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd5</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">vfi</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">vpi</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">sid</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">upd</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">wwn</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd5</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">vpi</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">vfi</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">REG_VPI_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command UNREG_VPI (0x97) */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="p">;</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd2</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">sli4_vpi</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">sli4_vpi</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd2</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd5</span><span class="p">;</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd6</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">vpi</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">vpi</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd6</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">UNREG_VPI_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command UNREG_D_ID (0x23) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">did</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd5</span><span class="p">;</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd6</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">vpi</span><span class="p">;</span>
<span class="cp">#else</span>
	<span class="kt">uint16_t</span> <span class="n">vpi</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">rsvd6</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">UNREG_D_ID_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command READ_TOPOLOGY (0x95) */</span>
<span class="k">struct</span> <span class="n">lpfc_mbx_read_top</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">eventTag</span><span class="p">;</span>	<span class="cm">/* Event tag */</span>
	<span class="kt">uint32_t</span> <span class="n">word2</span><span class="p">;</span>
<span class="cp">#define lpfc_mbx_read_top_fa_SHIFT		12</span>
<span class="cp">#define lpfc_mbx_read_top_fa_MASK		0x00000001</span>
<span class="cp">#define lpfc_mbx_read_top_fa_WORD		word2</span>
<span class="cp">#define lpfc_mbx_read_top_mm_SHIFT		11</span>
<span class="cp">#define lpfc_mbx_read_top_mm_MASK		0x00000001</span>
<span class="cp">#define lpfc_mbx_read_top_mm_WORD		word2</span>
<span class="cp">#define lpfc_mbx_read_top_pb_SHIFT		9</span>
<span class="cp">#define lpfc_mbx_read_top_pb_MASK		0X00000001</span>
<span class="cp">#define lpfc_mbx_read_top_pb_WORD		word2</span>
<span class="cp">#define lpfc_mbx_read_top_il_SHIFT		8</span>
<span class="cp">#define lpfc_mbx_read_top_il_MASK		0x00000001</span>
<span class="cp">#define lpfc_mbx_read_top_il_WORD		word2</span>
<span class="cp">#define lpfc_mbx_read_top_att_type_SHIFT	0</span>
<span class="cp">#define lpfc_mbx_read_top_att_type_MASK		0x000000FF</span>
<span class="cp">#define lpfc_mbx_read_top_att_type_WORD		word2</span>
<span class="cp">#define LPFC_ATT_RESERVED    0x00	</span><span class="cm">/* Reserved - attType */</span><span class="cp"></span>
<span class="cp">#define LPFC_ATT_LINK_UP     0x01	</span><span class="cm">/* Link is up */</span><span class="cp"></span>
<span class="cp">#define LPFC_ATT_LINK_DOWN   0x02	</span><span class="cm">/* Link is down */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">word3</span><span class="p">;</span>
<span class="cp">#define lpfc_mbx_read_top_alpa_granted_SHIFT	24</span>
<span class="cp">#define lpfc_mbx_read_top_alpa_granted_MASK	0x000000FF</span>
<span class="cp">#define lpfc_mbx_read_top_alpa_granted_WORD	word3</span>
<span class="cp">#define lpfc_mbx_read_top_lip_alps_SHIFT	16</span>
<span class="cp">#define lpfc_mbx_read_top_lip_alps_MASK		0x000000FF</span>
<span class="cp">#define lpfc_mbx_read_top_lip_alps_WORD		word3</span>
<span class="cp">#define lpfc_mbx_read_top_lip_type_SHIFT	8</span>
<span class="cp">#define lpfc_mbx_read_top_lip_type_MASK		0x000000FF</span>
<span class="cp">#define lpfc_mbx_read_top_lip_type_WORD		word3</span>
<span class="cp">#define lpfc_mbx_read_top_topology_SHIFT	0</span>
<span class="cp">#define lpfc_mbx_read_top_topology_MASK		0x000000FF</span>
<span class="cp">#define lpfc_mbx_read_top_topology_WORD		word3</span>
<span class="cp">#define LPFC_TOPOLOGY_PT_PT 0x01	</span><span class="cm">/* Topology is pt-pt / pt-fabric */</span><span class="cp"></span>
<span class="cp">#define LPFC_TOPOLOGY_LOOP  0x02	</span><span class="cm">/* Topology is FC-AL */</span><span class="cp"></span>
<span class="cp">#define LPFC_TOPOLOGY_MM    0x05	</span><span class="cm">/* maint mode zephtr to menlo */</span><span class="cp"></span>
	<span class="cm">/* store the LILP AL_PA position map into */</span>
	<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">lilpBde64</span><span class="p">;</span>
<span class="cp">#define LPFC_ALPA_MAP_SIZE	128</span>
	<span class="kt">uint32_t</span> <span class="n">word7</span><span class="p">;</span>
<span class="cp">#define lpfc_mbx_read_top_ld_lu_SHIFT		31</span>
<span class="cp">#define lpfc_mbx_read_top_ld_lu_MASK		0x00000001</span>
<span class="cp">#define lpfc_mbx_read_top_ld_lu_WORD		word7</span>
<span class="cp">#define lpfc_mbx_read_top_ld_tf_SHIFT		30</span>
<span class="cp">#define lpfc_mbx_read_top_ld_tf_MASK		0x00000001</span>
<span class="cp">#define lpfc_mbx_read_top_ld_tf_WORD		word7</span>
<span class="cp">#define lpfc_mbx_read_top_ld_link_spd_SHIFT	8</span>
<span class="cp">#define lpfc_mbx_read_top_ld_link_spd_MASK	0x000000FF</span>
<span class="cp">#define lpfc_mbx_read_top_ld_link_spd_WORD	word7</span>
<span class="cp">#define lpfc_mbx_read_top_ld_nl_port_SHIFT	4</span>
<span class="cp">#define lpfc_mbx_read_top_ld_nl_port_MASK	0x0000000F</span>
<span class="cp">#define lpfc_mbx_read_top_ld_nl_port_WORD	word7</span>
<span class="cp">#define lpfc_mbx_read_top_ld_tx_SHIFT		2</span>
<span class="cp">#define lpfc_mbx_read_top_ld_tx_MASK		0x00000003</span>
<span class="cp">#define lpfc_mbx_read_top_ld_tx_WORD		word7</span>
<span class="cp">#define lpfc_mbx_read_top_ld_rx_SHIFT		0</span>
<span class="cp">#define lpfc_mbx_read_top_ld_rx_MASK		0x00000003</span>
<span class="cp">#define lpfc_mbx_read_top_ld_rx_WORD		word7</span>
	<span class="kt">uint32_t</span> <span class="n">word8</span><span class="p">;</span>
<span class="cp">#define lpfc_mbx_read_top_lu_SHIFT		31</span>
<span class="cp">#define lpfc_mbx_read_top_lu_MASK		0x00000001</span>
<span class="cp">#define lpfc_mbx_read_top_lu_WORD		word8</span>
<span class="cp">#define lpfc_mbx_read_top_tf_SHIFT		30</span>
<span class="cp">#define lpfc_mbx_read_top_tf_MASK		0x00000001</span>
<span class="cp">#define lpfc_mbx_read_top_tf_WORD		word8</span>
<span class="cp">#define lpfc_mbx_read_top_link_spd_SHIFT	8</span>
<span class="cp">#define lpfc_mbx_read_top_link_spd_MASK		0x000000FF</span>
<span class="cp">#define lpfc_mbx_read_top_link_spd_WORD		word8</span>
<span class="cp">#define lpfc_mbx_read_top_nl_port_SHIFT		4</span>
<span class="cp">#define lpfc_mbx_read_top_nl_port_MASK		0x0000000F</span>
<span class="cp">#define lpfc_mbx_read_top_nl_port_WORD		word8</span>
<span class="cp">#define lpfc_mbx_read_top_tx_SHIFT		2</span>
<span class="cp">#define lpfc_mbx_read_top_tx_MASK		0x00000003</span>
<span class="cp">#define lpfc_mbx_read_top_tx_WORD		word8</span>
<span class="cp">#define lpfc_mbx_read_top_rx_SHIFT		0</span>
<span class="cp">#define lpfc_mbx_read_top_rx_MASK		0x00000003</span>
<span class="cp">#define lpfc_mbx_read_top_rx_WORD		word8</span>
<span class="cp">#define LPFC_LINK_SPEED_UNKNOWN	0x0</span>
<span class="cp">#define LPFC_LINK_SPEED_1GHZ	0x04</span>
<span class="cp">#define LPFC_LINK_SPEED_2GHZ	0x08</span>
<span class="cp">#define LPFC_LINK_SPEED_4GHZ	0x10</span>
<span class="cp">#define LPFC_LINK_SPEED_8GHZ	0x20</span>
<span class="cp">#define LPFC_LINK_SPEED_10GHZ	0x40</span>
<span class="cp">#define LPFC_LINK_SPEED_16GHZ	0x80</span>
<span class="p">};</span>

<span class="cm">/* Structure for MB Command CLEAR_LA (22) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">eventTag</span><span class="p">;</span>	<span class="cm">/* Event tag */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">CLEAR_LA_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command DUMP */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="o">:</span><span class="mi">25</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ra</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">co</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cv</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">type</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">entry_index</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">region_id</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">type</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cv</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">co</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ra</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="o">:</span><span class="mi">25</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">region_id</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">entry_index</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">sli4_length</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">word_cnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">resp_offset</span><span class="p">;</span>
<span class="p">}</span> <span class="n">DUMP_VAR</span><span class="p">;</span>

<span class="cp">#define  DMP_MEM_REG             0x1</span>
<span class="cp">#define  DMP_NV_PARAMS           0x2</span>
<span class="cp">#define  DMP_LMSD                0x3 </span><span class="cm">/* Link Module Serial Data */</span><span class="cp"></span>
<span class="cp">#define  DMP_WELL_KNOWN          0x4</span>

<span class="cp">#define  DMP_REGION_VPD          0xe</span>
<span class="cp">#define  DMP_VPD_SIZE            0x400  </span><span class="cm">/* maximum amount of VPD */</span><span class="cp"></span>
<span class="cp">#define  DMP_RSP_OFFSET          0x14   </span><span class="cm">/* word 5 contains first word of rsp */</span><span class="cp"></span>
<span class="cp">#define  DMP_RSP_SIZE            0x6C   </span><span class="cm">/* maximum of 27 words of rsp data */</span><span class="cp"></span>

<span class="cp">#define  DMP_REGION_VPORT	 0x16   </span><span class="cm">/* VPort info region */</span><span class="cp"></span>
<span class="cp">#define  DMP_VPORT_REGION_SIZE	 0x200</span>
<span class="cp">#define  DMP_MBOX_OFFSET_WORD	 0x5</span>

<span class="cp">#define  DMP_REGION_23		 0x17   </span><span class="cm">/* fcoe param  and port state region */</span><span class="cp"></span>
<span class="cp">#define  DMP_RGN23_SIZE		 0x400</span>

<span class="cp">#define  WAKE_UP_PARMS_REGION_ID    4</span>
<span class="cp">#define  WAKE_UP_PARMS_WORD_SIZE   15</span>

<span class="k">struct</span> <span class="n">vport_rec</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">wwpn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">wwnn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define VPORT_INFO_SIG 0x32324752</span>
<span class="cp">#define VPORT_INFO_REV_MASK 0xff</span>
<span class="cp">#define VPORT_INFO_REV 0x1</span>
<span class="cp">#define MAX_STATIC_VPORT_COUNT 16</span>
<span class="k">struct</span> <span class="n">static_vport_info</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>		<span class="n">signature</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">rev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">vport_rec</span>	<span class="n">vport_list</span><span class="p">[</span><span class="n">MAX_STATIC_VPORT_COUNT</span><span class="p">];</span>
	<span class="kt">uint32_t</span>		<span class="n">resvd</span><span class="p">[</span><span class="mi">66</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* Option rom version structure */</span>
<span class="k">struct</span> <span class="n">prog_id</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint8_t</span>  <span class="n">type</span><span class="p">;</span>
	<span class="kt">uint8_t</span>  <span class="n">id</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ver</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>  <span class="cm">/* Major Version */</span>
	<span class="kt">uint32_t</span> <span class="n">rev</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>  <span class="cm">/* Revision */</span>
	<span class="kt">uint32_t</span> <span class="n">lev</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>  <span class="cm">/* Level */</span>
	<span class="kt">uint32_t</span> <span class="n">dist</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span> <span class="cm">/* Dist Type */</span>
	<span class="kt">uint32_t</span> <span class="n">num</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>  <span class="cm">/* number after dist type */</span>
<span class="cp">#else </span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">num</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>  <span class="cm">/* number after dist type */</span>
	<span class="kt">uint32_t</span> <span class="n">dist</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span> <span class="cm">/* Dist Type */</span>
	<span class="kt">uint32_t</span> <span class="n">lev</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>  <span class="cm">/* Level */</span>
	<span class="kt">uint32_t</span> <span class="n">rev</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>  <span class="cm">/* Revision */</span>
	<span class="kt">uint32_t</span> <span class="n">ver</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>  <span class="cm">/* Major Version */</span>
	<span class="kt">uint8_t</span>  <span class="n">id</span><span class="p">;</span>
	<span class="kt">uint8_t</span>  <span class="n">type</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="cm">/* Structure for MB Command UPDATE_CFG (0x1B) */</span>

<span class="k">struct</span> <span class="n">update_cfg_var</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">type</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ra</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">co</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cv</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">req</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">entry_length</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">region_id</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
<span class="cp">#else  </span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">req</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cv</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">co</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ra</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">type</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">region_id</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">entry_length</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">resp_info</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">byte_cnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">data_offset</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">hbq_mask</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint8_t</span> <span class="n">tmatch</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">tmask</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">rctlmatch</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">rctlmask</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint8_t</span> <span class="n">rctlmask</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">rctlmatch</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">tmask</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">tmatch</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">};</span>


<span class="cm">/* Structure for MB Command CONFIG_HBQ (7c) */</span>

<span class="k">struct</span> <span class="n">config_hbq_var</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span>      <span class="o">:</span><span class="mi">7</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">recvNotify</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>     <span class="cm">/* Receive Notification */</span>
	<span class="kt">uint32_t</span> <span class="n">numMask</span>    <span class="o">:</span><span class="mi">8</span><span class="p">;</span>     <span class="cm">/* # Mask Entries       */</span>
	<span class="kt">uint32_t</span> <span class="n">profile</span>    <span class="o">:</span><span class="mi">8</span><span class="p">;</span>     <span class="cm">/* Selection Profile    */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span>      <span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span>      <span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">profile</span>    <span class="o">:</span><span class="mi">8</span><span class="p">;</span>     <span class="cm">/* Selection Profile    */</span>
	<span class="kt">uint32_t</span> <span class="n">numMask</span>    <span class="o">:</span><span class="mi">8</span><span class="p">;</span>     <span class="cm">/* # Mask Entries       */</span>
	<span class="kt">uint32_t</span> <span class="n">recvNotify</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>     <span class="cm">/* Receive Notification */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span>      <span class="o">:</span><span class="mi">7</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">hbqId</span>      <span class="o">:</span><span class="mi">16</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span>      <span class="o">:</span><span class="mi">12</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ringMask</span>   <span class="o">:</span><span class="mi">4</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">ringMask</span>   <span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span>      <span class="o">:</span><span class="mi">12</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">hbqId</span>      <span class="o">:</span><span class="mi">16</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">entry_count</span> <span class="o">:</span><span class="mi">16</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd4</span>        <span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">headerLen</span>    <span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">headerLen</span>    <span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd4</span>        <span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">entry_count</span> <span class="o">:</span><span class="mi">16</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">hbqaddrLow</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">hbqaddrHigh</span><span class="p">;</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd5</span>      <span class="o">:</span><span class="mi">31</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">logEntry</span>   <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">logEntry</span>   <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd5</span>      <span class="o">:</span><span class="mi">31</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">rsvd6</span><span class="p">;</span>    <span class="cm">/* w7 */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd7</span><span class="p">;</span>    <span class="cm">/* w8 */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd8</span><span class="p">;</span>    <span class="cm">/* w9 */</span>

	<span class="k">struct</span> <span class="n">hbq_mask</span> <span class="n">hbqMasks</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>


	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">allprofiles</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>

		<span class="k">struct</span> <span class="p">{</span>
			<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
				<span class="kt">uint32_t</span>	<span class="n">seqlenoff</span>	<span class="o">:</span><span class="mi">16</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">maxlen</span>		<span class="o">:</span><span class="mi">16</span><span class="p">;</span>
			<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
				<span class="kt">uint32_t</span>	<span class="n">maxlen</span>		<span class="o">:</span><span class="mi">16</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">seqlenoff</span>	<span class="o">:</span><span class="mi">16</span><span class="p">;</span>
			<span class="cp">#endif</span>
			<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
				<span class="kt">uint32_t</span>	<span class="n">rsvd1</span>		<span class="o">:</span><span class="mi">28</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">seqlenbcnt</span>	<span class="o">:</span><span class="mi">4</span><span class="p">;</span>
			<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
				<span class="kt">uint32_t</span>	<span class="n">seqlenbcnt</span>	<span class="o">:</span><span class="mi">4</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">rsvd1</span>		<span class="o">:</span><span class="mi">28</span><span class="p">;</span>
			<span class="cp">#endif</span>
			<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">profile2</span><span class="p">;</span>

		<span class="k">struct</span> <span class="p">{</span>
			<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
				<span class="kt">uint32_t</span>	<span class="n">seqlenoff</span>	<span class="o">:</span><span class="mi">16</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">maxlen</span>		<span class="o">:</span><span class="mi">16</span><span class="p">;</span>
			<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
				<span class="kt">uint32_t</span>	<span class="n">maxlen</span>		<span class="o">:</span><span class="mi">16</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">seqlenoff</span>	<span class="o">:</span><span class="mi">16</span><span class="p">;</span>
			<span class="cp">#endif</span>
			<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
				<span class="kt">uint32_t</span>	<span class="n">cmdcodeoff</span>	<span class="o">:</span><span class="mi">28</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">rsvd1</span>		<span class="o">:</span><span class="mi">12</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">seqlenbcnt</span>	<span class="o">:</span><span class="mi">4</span><span class="p">;</span>
			<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
				<span class="kt">uint32_t</span>	<span class="n">seqlenbcnt</span>	<span class="o">:</span><span class="mi">4</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">rsvd1</span>		<span class="o">:</span><span class="mi">12</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">cmdcodeoff</span>	<span class="o">:</span><span class="mi">28</span><span class="p">;</span>
			<span class="cp">#endif</span>
			<span class="kt">uint32_t</span> <span class="n">cmdmatch</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

			<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">profile3</span><span class="p">;</span>

		<span class="k">struct</span> <span class="p">{</span>
			<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
				<span class="kt">uint32_t</span>	<span class="n">seqlenoff</span>	<span class="o">:</span><span class="mi">16</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">maxlen</span>		<span class="o">:</span><span class="mi">16</span><span class="p">;</span>
			<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
				<span class="kt">uint32_t</span>	<span class="n">maxlen</span>		<span class="o">:</span><span class="mi">16</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">seqlenoff</span>	<span class="o">:</span><span class="mi">16</span><span class="p">;</span>
			<span class="cp">#endif</span>
			<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
				<span class="kt">uint32_t</span>	<span class="n">cmdcodeoff</span>	<span class="o">:</span><span class="mi">28</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">rsvd1</span>		<span class="o">:</span><span class="mi">12</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">seqlenbcnt</span>	<span class="o">:</span><span class="mi">4</span><span class="p">;</span>
			<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
				<span class="kt">uint32_t</span>	<span class="n">seqlenbcnt</span>	<span class="o">:</span><span class="mi">4</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">rsvd1</span>		<span class="o">:</span><span class="mi">12</span><span class="p">;</span>
				<span class="kt">uint32_t</span>	<span class="n">cmdcodeoff</span>	<span class="o">:</span><span class="mi">28</span><span class="p">;</span>
			<span class="cp">#endif</span>
			<span class="kt">uint32_t</span> <span class="n">cmdmatch</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

			<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">profile5</span><span class="p">;</span>

	<span class="p">}</span> <span class="n">profiles</span><span class="p">;</span>

<span class="p">};</span>



<span class="cm">/* Structure for MB Command CONFIG_PORT (0x88) */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">cBE</span>       <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cET</span>       <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cHpcb</span>     <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cMA</span>       <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">sli_mode</span>  <span class="o">:</span>  <span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">pcbLen</span>    <span class="o">:</span> <span class="mi">24</span><span class="p">;</span>       <span class="cm">/* bit 23:0  of memory based port</span>
<span class="cm">					* config block */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">pcbLen</span>    <span class="o">:</span> <span class="mi">24</span><span class="p">;</span>       <span class="cm">/* bit 23:0  of memory based port</span>
<span class="cm">					* config block */</span>
	<span class="kt">uint32_t</span> <span class="n">sli_mode</span>  <span class="o">:</span>  <span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cMA</span>       <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cHpcb</span>     <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cET</span>       <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cBE</span>       <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">pcbLow</span><span class="p">;</span>       <span class="cm">/* bit 31:0  of memory based port config block */</span>
	<span class="kt">uint32_t</span> <span class="n">pcbHigh</span><span class="p">;</span>      <span class="cm">/* bit 63:32 of memory based port config block */</span>
	<span class="kt">uint32_t</span> <span class="n">hbainit</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">hps</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span> <span class="cm">/* bit 31 word9 Host Pointer in slim */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span>	   <span class="o">:</span> <span class="mi">31</span><span class="p">;</span> <span class="cm">/* least significant 31 bits of word 9 */</span>
<span class="cp">#else   </span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span>      <span class="o">:</span> <span class="mi">31</span><span class="p">;</span> <span class="cm">/* least significant 31 bits of word 9 */</span>
	<span class="kt">uint32_t</span> <span class="n">hps</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span> <span class="cm">/* bit 31 word9 Host Pointer in slim */</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span>     <span class="o">:</span> <span class="mi">19</span><span class="p">;</span>  <span class="cm">/* Reserved                             */</span>
	<span class="kt">uint32_t</span> <span class="n">cdss</span>      <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure Data Security SLI          */</span>
	<span class="kt">uint32_t</span> <span class="n">casabt</span>    <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure async abts status notice   */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span>     <span class="o">:</span>  <span class="mi">2</span><span class="p">;</span>  <span class="cm">/* Reserved                             */</span>
	<span class="kt">uint32_t</span> <span class="n">cbg</span>       <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure BlockGuard                 */</span>
	<span class="kt">uint32_t</span> <span class="n">cmv</span>       <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure Max VPIs                   */</span>
	<span class="kt">uint32_t</span> <span class="n">ccrp</span>      <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Config Command Ring Polling          */</span>
	<span class="kt">uint32_t</span> <span class="n">csah</span>      <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure Synchronous Abort Handling */</span>
	<span class="kt">uint32_t</span> <span class="n">chbs</span>      <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Cofigure Host Backing store          */</span>
	<span class="kt">uint32_t</span> <span class="n">cinb</span>      <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Enable Interrupt Notification Block  */</span>
	<span class="kt">uint32_t</span> <span class="n">cerbm</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure Enhanced Receive Buf Mgmt  */</span>
	<span class="kt">uint32_t</span> <span class="n">cmx</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure Max XRIs                   */</span>
	<span class="kt">uint32_t</span> <span class="n">cmr</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure Max RPIs                   */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">cmr</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure Max RPIs                   */</span>
	<span class="kt">uint32_t</span> <span class="n">cmx</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure Max XRIs                   */</span>
	<span class="kt">uint32_t</span> <span class="n">cerbm</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure Enhanced Receive Buf Mgmt  */</span>
	<span class="kt">uint32_t</span> <span class="n">cinb</span>      <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Enable Interrupt Notification Block  */</span>
	<span class="kt">uint32_t</span> <span class="n">chbs</span>      <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Cofigure Host Backing store          */</span>
	<span class="kt">uint32_t</span> <span class="n">csah</span>      <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure Synchronous Abort Handling */</span>
	<span class="kt">uint32_t</span> <span class="n">ccrp</span>      <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Config Command Ring Polling          */</span>
	<span class="kt">uint32_t</span> <span class="n">cmv</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure Max VPIs                   */</span>
	<span class="kt">uint32_t</span> <span class="n">cbg</span>       <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure BlockGuard                 */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span>     <span class="o">:</span>  <span class="mi">2</span><span class="p">;</span>  <span class="cm">/* Reserved                             */</span>
	<span class="kt">uint32_t</span> <span class="n">casabt</span>    <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure async abts status notice   */</span>
	<span class="kt">uint32_t</span> <span class="n">cdss</span>      <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure Data Security SLI          */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span>     <span class="o">:</span> <span class="mi">19</span><span class="p">;</span>  <span class="cm">/* Reserved                             */</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span>     <span class="o">:</span> <span class="mi">19</span><span class="p">;</span>  <span class="cm">/* Reserved                             */</span>
	<span class="kt">uint32_t</span> <span class="n">gdss</span>      <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure Data Security SLI          */</span>
	<span class="kt">uint32_t</span> <span class="n">gasabt</span>    <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant async abts status notice       */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd4</span>     <span class="o">:</span>  <span class="mi">2</span><span class="p">;</span>  <span class="cm">/* Reserved                             */</span>
	<span class="kt">uint32_t</span> <span class="n">gbg</span>       <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant BlockGuard                     */</span>
	<span class="kt">uint32_t</span> <span class="n">gmv</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant Max VPIs                       */</span>
	<span class="kt">uint32_t</span> <span class="n">gcrp</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant Command Ring Polling           */</span>
	<span class="kt">uint32_t</span> <span class="n">gsah</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant Synchronous Abort Handling     */</span>
	<span class="kt">uint32_t</span> <span class="n">ghbs</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant Host Backing Store             */</span>
	<span class="kt">uint32_t</span> <span class="n">ginb</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant Interrupt Notification Block   */</span>
	<span class="kt">uint32_t</span> <span class="n">gerbm</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant ERBM Request                   */</span>
	<span class="kt">uint32_t</span> <span class="n">gmx</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant Max XRIs                       */</span>
	<span class="kt">uint32_t</span> <span class="n">gmr</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant Max RPIs                       */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">gmr</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant Max RPIs                       */</span>
	<span class="kt">uint32_t</span> <span class="n">gmx</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant Max XRIs                       */</span>
	<span class="kt">uint32_t</span> <span class="n">gerbm</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant ERBM Request                   */</span>
	<span class="kt">uint32_t</span> <span class="n">ginb</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant Interrupt Notification Block   */</span>
	<span class="kt">uint32_t</span> <span class="n">ghbs</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant Host Backing Store             */</span>
	<span class="kt">uint32_t</span> <span class="n">gsah</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant Synchronous Abort Handling     */</span>
	<span class="kt">uint32_t</span> <span class="n">gcrp</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant Command Ring Polling           */</span>
	<span class="kt">uint32_t</span> <span class="n">gmv</span>	   <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant Max VPIs                       */</span>
	<span class="kt">uint32_t</span> <span class="n">gbg</span>       <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant BlockGuard                     */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd4</span>     <span class="o">:</span>  <span class="mi">2</span><span class="p">;</span>  <span class="cm">/* Reserved                             */</span>
	<span class="kt">uint32_t</span> <span class="n">gasabt</span>    <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Grant async abts status notice       */</span>
	<span class="kt">uint32_t</span> <span class="n">gdss</span>      <span class="o">:</span>  <span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Configure Data Security SLI          */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span>     <span class="o">:</span> <span class="mi">19</span><span class="p">;</span>  <span class="cm">/* Reserved                             */</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">max_rpi</span>   <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>  <span class="cm">/* Max RPIs Port should configure       */</span>
	<span class="kt">uint32_t</span> <span class="n">max_xri</span>   <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>  <span class="cm">/* Max XRIs Port should configure       */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">max_xri</span>   <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>  <span class="cm">/* Max XRIs Port should configure       */</span>
	<span class="kt">uint32_t</span> <span class="n">max_rpi</span>   <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>  <span class="cm">/* Max RPIs Port should configure       */</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">max_hbq</span>   <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>  <span class="cm">/* Max HBQs Host expect to configure    */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd5</span>     <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>  <span class="cm">/* Max HBQs Host expect to configure    */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">rsvd5</span>     <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>  <span class="cm">/* Max HBQs Host expect to configure    */</span>
	<span class="kt">uint32_t</span> <span class="n">max_hbq</span>   <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>  <span class="cm">/* Max HBQs Host expect to configure    */</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">rsvd6</span><span class="p">;</span>           <span class="cm">/* Reserved                             */</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">fips_rev</span>   <span class="o">:</span> <span class="mi">3</span><span class="p">;</span>   <span class="cm">/* FIPS Spec Revision                   */</span>
	<span class="kt">uint32_t</span> <span class="n">fips_level</span> <span class="o">:</span> <span class="mi">4</span><span class="p">;</span>   <span class="cm">/* FIPS Level                           */</span>
	<span class="kt">uint32_t</span> <span class="n">sec_err</span>    <span class="o">:</span> <span class="mi">9</span><span class="p">;</span>   <span class="cm">/* security crypto error                */</span>
	<span class="kt">uint32_t</span> <span class="n">max_vpi</span>    <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>  <span class="cm">/* Max number of virt N-Ports           */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">max_vpi</span>    <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>  <span class="cm">/* Max number of virt N-Ports           */</span>
	<span class="kt">uint32_t</span> <span class="n">sec_err</span>    <span class="o">:</span> <span class="mi">9</span><span class="p">;</span>   <span class="cm">/* security crypto error                */</span>
	<span class="kt">uint32_t</span> <span class="n">fips_level</span> <span class="o">:</span> <span class="mi">4</span><span class="p">;</span>   <span class="cm">/* FIPS Level                           */</span>
	<span class="kt">uint32_t</span> <span class="n">fips_rev</span>   <span class="o">:</span> <span class="mi">3</span><span class="p">;</span>   <span class="cm">/* FIPS Spec Revision                   */</span>
<span class="cp">#endif</span>

<span class="p">}</span> <span class="n">CONFIG_PORT_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command CONFIG_MSI (0x30) */</span>
<span class="k">struct</span> <span class="n">config_msi_var</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">dfltMsgNum</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>	<span class="cm">/* Default message number            */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">11</span><span class="p">;</span>	<span class="cm">/* Reserved                          */</span>
	<span class="kt">uint32_t</span> <span class="n">NID</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>		<span class="cm">/* Number of secondary attention IDs */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>	<span class="cm">/* Reserved                          */</span>
	<span class="kt">uint32_t</span> <span class="n">dfltPresent</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Default message number present    */</span>
	<span class="kt">uint32_t</span> <span class="n">addFlag</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Add association flag              */</span>
	<span class="kt">uint32_t</span> <span class="n">reportFlag</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Report association flag           */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">reportFlag</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Report association flag           */</span>
	<span class="kt">uint32_t</span> <span class="n">addFlag</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Add association flag              */</span>
	<span class="kt">uint32_t</span> <span class="n">dfltPresent</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Default message number present    */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>	<span class="cm">/* Reserved                          */</span>
	<span class="kt">uint32_t</span> <span class="n">NID</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>		<span class="cm">/* Number of secondary attention IDs */</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="o">:</span><span class="mi">11</span><span class="p">;</span>	<span class="cm">/* Reserved                          */</span>
	<span class="kt">uint32_t</span> <span class="n">dfltMsgNum</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>	<span class="cm">/* Default message number            */</span>
<span class="cp">#endif</span>
	<span class="kt">uint32_t</span> <span class="n">attentionConditions</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint8_t</span>  <span class="n">attentionId</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="kt">uint8_t</span>  <span class="n">messageNumberByHA</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
	<span class="kt">uint8_t</span>  <span class="n">messageNumberByID</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">autoClearHA</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">autoClearID</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">autoClearID</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd4</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* SLI-2 Port Control Block */</span>

<span class="cm">/* SLIM POINTER */</span>
<span class="cp">#define SLIMOFF 0x30		</span><span class="cm">/* WORD */</span><span class="cp"></span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_SLI2_RDSC</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">cmdEntries</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cmdAddrLow</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cmdAddrHigh</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">rspEntries</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rspAddrLow</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rspAddrHigh</span><span class="p">;</span>
<span class="p">}</span> <span class="n">SLI2_RDSC</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_PCB</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">type</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#define TYPE_NATIVE_SLI2       0x01</span>
	<span class="kt">uint32_t</span> <span class="n">feature</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#define FEATURE_INITIAL_SLI2   0x01</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="o">:</span><span class="mi">12</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">maxRing</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">maxRing</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="o">:</span><span class="mi">12</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">feature</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#define FEATURE_INITIAL_SLI2   0x01</span>
	<span class="kt">uint32_t</span> <span class="n">type</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#define TYPE_NATIVE_SLI2       0x01</span>
<span class="cp">#endif</span>

	<span class="kt">uint32_t</span> <span class="n">mailBoxSize</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">mbAddrLow</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">mbAddrHigh</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">hgpAddrLow</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">hgpAddrHigh</span><span class="p">;</span>

	<span class="kt">uint32_t</span> <span class="n">pgpAddrLow</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">pgpAddrHigh</span><span class="p">;</span>
	<span class="n">SLI2_RDSC</span> <span class="n">rdsc</span><span class="p">[</span><span class="n">MAX_RINGS</span><span class="p">];</span>
<span class="p">}</span> <span class="n">PCB_t</span><span class="p">;</span>

<span class="cm">/* NEW_FEATURE */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd0</span><span class="o">:</span><span class="mi">27</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">discardFarp</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">IPEnable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">nodeName</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">portName</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">filterEnable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">filterEnable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">portName</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">nodeName</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">IPEnable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">discardFarp</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="o">:</span><span class="mi">27</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="kt">uint8_t</span> <span class="n">portname</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>	<span class="cm">/* Used to be struct lpfc_name */</span>
	<span class="kt">uint8_t</span> <span class="n">nodename</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">IPAddress</span><span class="p">;</span>
<span class="p">}</span> <span class="n">CONFIG_FARP_VAR</span><span class="p">;</span>

<span class="cm">/* Structure for MB Command MBX_ASYNCEVT_ENABLE (0x33) */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="o">:</span><span class="mi">30</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ring</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* Ring for ASYNC_EVENT iocb Bits 0-1*/</span>
<span class="cp">#else </span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">ring</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* Ring for ASYNC_EVENT iocb Bits 0-1*/</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="o">:</span><span class="mi">30</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">ASYNCEVT_ENABLE_VAR</span><span class="p">;</span>

<span class="cm">/* Union of all Mailbox Command types */</span>
<span class="cp">#define MAILBOX_CMD_WSIZE	32</span>
<span class="cp">#define MAILBOX_CMD_SIZE	(MAILBOX_CMD_WSIZE * sizeof(uint32_t))</span>
<span class="cm">/* ext_wsize times 4 bytes should not be greater than max xmit size */</span>
<span class="cp">#define MAILBOX_EXT_WSIZE	512</span>
<span class="cp">#define MAILBOX_EXT_SIZE	(MAILBOX_EXT_WSIZE * sizeof(uint32_t))</span>
<span class="cp">#define MAILBOX_HBA_EXT_OFFSET  0x100</span>
<span class="cm">/* max mbox xmit size is a page size for sysfs IO operations */</span>
<span class="cp">#define MAILBOX_SYSFS_MAX	4096</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">varWords</span><span class="p">[</span><span class="n">MAILBOX_CMD_WSIZE</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span> <span class="cm">/* first word is type/</span>
<span class="cm">						    * feature/max ring number</span>
<span class="cm">						    */</span>
	<span class="n">LOAD_SM_VAR</span> <span class="n">varLdSM</span><span class="p">;</span>		<span class="cm">/* cmd =  1 (LOAD_SM)        */</span>
	<span class="n">READ_NV_VAR</span> <span class="n">varRDnvp</span><span class="p">;</span>		<span class="cm">/* cmd =  2 (READ_NVPARMS)   */</span>
	<span class="n">WRITE_NV_VAR</span> <span class="n">varWTnvp</span><span class="p">;</span>		<span class="cm">/* cmd =  3 (WRITE_NVPARMS)  */</span>
	<span class="n">BIU_DIAG_VAR</span> <span class="n">varBIUdiag</span><span class="p">;</span>	<span class="cm">/* cmd =  4 (RUN_BIU_DIAG)   */</span>
	<span class="n">INIT_LINK_VAR</span> <span class="n">varInitLnk</span><span class="p">;</span>	<span class="cm">/* cmd =  5 (INIT_LINK)      */</span>
	<span class="n">DOWN_LINK_VAR</span> <span class="n">varDwnLnk</span><span class="p">;</span>	<span class="cm">/* cmd =  6 (DOWN_LINK)      */</span>
	<span class="n">CONFIG_LINK</span> <span class="n">varCfgLnk</span><span class="p">;</span>		<span class="cm">/* cmd =  7 (CONFIG_LINK)    */</span>
	<span class="n">PART_SLIM_VAR</span> <span class="n">varSlim</span><span class="p">;</span>		<span class="cm">/* cmd =  8 (PART_SLIM)      */</span>
	<span class="n">CONFIG_RING_VAR</span> <span class="n">varCfgRing</span><span class="p">;</span>	<span class="cm">/* cmd =  9 (CONFIG_RING)    */</span>
	<span class="n">RESET_RING_VAR</span> <span class="n">varRstRing</span><span class="p">;</span>	<span class="cm">/* cmd = 10 (RESET_RING)     */</span>
	<span class="n">READ_CONFIG_VAR</span> <span class="n">varRdConfig</span><span class="p">;</span>	<span class="cm">/* cmd = 11 (READ_CONFIG)    */</span>
	<span class="n">READ_RCONF_VAR</span> <span class="n">varRdRConfig</span><span class="p">;</span>	<span class="cm">/* cmd = 12 (READ_RCONFIG)   */</span>
	<span class="n">READ_SPARM_VAR</span> <span class="n">varRdSparm</span><span class="p">;</span>	<span class="cm">/* cmd = 13 (READ_SPARM(64)) */</span>
	<span class="n">READ_STATUS_VAR</span> <span class="n">varRdStatus</span><span class="p">;</span>	<span class="cm">/* cmd = 14 (READ_STATUS)    */</span>
	<span class="n">READ_RPI_VAR</span> <span class="n">varRdRPI</span><span class="p">;</span>		<span class="cm">/* cmd = 15 (READ_RPI(64))   */</span>
	<span class="n">READ_XRI_VAR</span> <span class="n">varRdXRI</span><span class="p">;</span>		<span class="cm">/* cmd = 16 (READ_XRI)       */</span>
	<span class="n">READ_REV_VAR</span> <span class="n">varRdRev</span><span class="p">;</span>		<span class="cm">/* cmd = 17 (READ_REV)       */</span>
	<span class="n">READ_LNK_VAR</span> <span class="n">varRdLnk</span><span class="p">;</span>		<span class="cm">/* cmd = 18 (READ_LNK_STAT)  */</span>
	<span class="n">REG_LOGIN_VAR</span> <span class="n">varRegLogin</span><span class="p">;</span>	<span class="cm">/* cmd = 19 (REG_LOGIN(64))  */</span>
	<span class="n">UNREG_LOGIN_VAR</span> <span class="n">varUnregLogin</span><span class="p">;</span>	<span class="cm">/* cmd = 20 (UNREG_LOGIN)    */</span>
	<span class="n">CLEAR_LA_VAR</span> <span class="n">varClearLA</span><span class="p">;</span>	<span class="cm">/* cmd = 22 (CLEAR_LA)       */</span>
	<span class="n">DUMP_VAR</span> <span class="n">varDmp</span><span class="p">;</span>		<span class="cm">/* Warm Start DUMP mbx cmd   */</span>
	<span class="n">UNREG_D_ID_VAR</span> <span class="n">varUnregDID</span><span class="p">;</span>	<span class="cm">/* cmd = 0x23 (UNREG_D_ID)   */</span>
	<span class="n">CONFIG_FARP_VAR</span> <span class="n">varCfgFarp</span><span class="p">;</span>	<span class="cm">/* cmd = 0x25 (CONFIG_FARP)</span>
<span class="cm">					 * NEW_FEATURE</span>
<span class="cm">					 */</span>
	<span class="k">struct</span> <span class="n">config_hbq_var</span> <span class="n">varCfgHbq</span><span class="p">;</span><span class="cm">/* cmd = 0x7c (CONFIG_HBQ)  */</span>
	<span class="k">struct</span> <span class="n">update_cfg_var</span> <span class="n">varUpdateCfg</span><span class="p">;</span> <span class="cm">/* cmd = 0x1B (UPDATE_CFG)*/</span>
	<span class="n">CONFIG_PORT_VAR</span> <span class="n">varCfgPort</span><span class="p">;</span>	<span class="cm">/* cmd = 0x88 (CONFIG_PORT)  */</span>
	<span class="k">struct</span> <span class="n">lpfc_mbx_read_top</span> <span class="n">varReadTop</span><span class="p">;</span> <span class="cm">/* cmd = 0x95 (READ_TOPOLOGY) */</span>
	<span class="n">REG_VPI_VAR</span> <span class="n">varRegVpi</span><span class="p">;</span>		<span class="cm">/* cmd = 0x96 (REG_VPI) */</span>
	<span class="n">UNREG_VPI_VAR</span> <span class="n">varUnregVpi</span><span class="p">;</span>	<span class="cm">/* cmd = 0x97 (UNREG_VPI) */</span>
	<span class="n">ASYNCEVT_ENABLE_VAR</span> <span class="n">varCfgAsyncEvent</span><span class="p">;</span> <span class="cm">/*cmd = x33 (CONFIG_ASYNC) */</span>
	<span class="k">struct</span> <span class="n">READ_EVENT_LOG_VAR</span> <span class="n">varRdEventLog</span><span class="p">;</span>	<span class="cm">/* cmd = 0x38</span>
<span class="cm">							 * (READ_EVENT_LOG)</span>
<span class="cm">							 */</span>
	<span class="k">struct</span> <span class="n">config_msi_var</span> <span class="n">varCfgMSI</span><span class="p">;</span><span class="cm">/* cmd = x30 (CONFIG_MSI)     */</span>
<span class="p">}</span> <span class="n">MAILVARIANTS</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * SLI-2 specific structures</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">lpfc_hgp</span> <span class="p">{</span>
	<span class="n">__le32</span> <span class="n">cmdPutInx</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">rspGetInx</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">lpfc_pgp</span> <span class="p">{</span>
	<span class="n">__le32</span> <span class="n">cmdGetInx</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">rspPutInx</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">sli2_desc</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">unused1</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">lpfc_hgp</span> <span class="n">host</span><span class="p">[</span><span class="n">MAX_RINGS</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">lpfc_pgp</span> <span class="n">port</span><span class="p">[</span><span class="n">MAX_RINGS</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">sli3_desc</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">lpfc_hgp</span> <span class="n">host</span><span class="p">[</span><span class="n">MAX_RINGS</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">hbq_put</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">sli3_pgp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">lpfc_pgp</span> <span class="n">port</span><span class="p">[</span><span class="n">MAX_RINGS</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">hbq_get</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">sli_var</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">sli2_desc</span>	<span class="n">s2</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sli3_desc</span>	<span class="n">s3</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sli3_pgp</span>		<span class="n">s3_pgp</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">mbxStatus</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">mbxCommand</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">mbxReserved</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">mbxHc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">mbxOwner</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Low order bit first word */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint8_t</span> <span class="n">mbxOwner</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Low order bit first word */</span>
	<span class="kt">uint8_t</span> <span class="n">mbxHc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">mbxReserved</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">mbxCommand</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">mbxStatus</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="n">MAILVARIANTS</span> <span class="n">un</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">sli_var</span> <span class="n">us</span><span class="p">;</span>
<span class="p">}</span> <span class="n">MAILBOX_t</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> *    Begin Structure Definitions for IOCB Commands</span>
<span class="cm"> */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint8_t</span> <span class="n">statAction</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">statRsn</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">statBaExp</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">statLocalError</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint8_t</span> <span class="n">statLocalError</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">statBaExp</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">statRsn</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">statAction</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="cm">/* statRsn  P/F_RJT reason codes */</span>
<span class="cp">#define RJT_BAD_D_ID       0x01	</span><span class="cm">/* Invalid D_ID field */</span><span class="cp"></span>
<span class="cp">#define RJT_BAD_S_ID       0x02	</span><span class="cm">/* Invalid S_ID field */</span><span class="cp"></span>
<span class="cp">#define RJT_UNAVAIL_TEMP   0x03	</span><span class="cm">/* N_Port unavailable temp. */</span><span class="cp"></span>
<span class="cp">#define RJT_UNAVAIL_PERM   0x04	</span><span class="cm">/* N_Port unavailable perm. */</span><span class="cp"></span>
<span class="cp">#define RJT_UNSUP_CLASS    0x05	</span><span class="cm">/* Class not supported */</span><span class="cp"></span>
<span class="cp">#define RJT_DELIM_ERR      0x06	</span><span class="cm">/* Delimiter usage error */</span><span class="cp"></span>
<span class="cp">#define RJT_UNSUP_TYPE     0x07	</span><span class="cm">/* Type not supported */</span><span class="cp"></span>
<span class="cp">#define RJT_BAD_CONTROL    0x08	</span><span class="cm">/* Invalid link conrtol */</span><span class="cp"></span>
<span class="cp">#define RJT_BAD_RCTL       0x09	</span><span class="cm">/* R_CTL invalid */</span><span class="cp"></span>
<span class="cp">#define RJT_BAD_FCTL       0x0A	</span><span class="cm">/* F_CTL invalid */</span><span class="cp"></span>
<span class="cp">#define RJT_BAD_OXID       0x0B	</span><span class="cm">/* OX_ID invalid */</span><span class="cp"></span>
<span class="cp">#define RJT_BAD_RXID       0x0C	</span><span class="cm">/* RX_ID invalid */</span><span class="cp"></span>
<span class="cp">#define RJT_BAD_SEQID      0x0D	</span><span class="cm">/* SEQ_ID invalid */</span><span class="cp"></span>
<span class="cp">#define RJT_BAD_DFCTL      0x0E	</span><span class="cm">/* DF_CTL invalid */</span><span class="cp"></span>
<span class="cp">#define RJT_BAD_SEQCNT     0x0F	</span><span class="cm">/* SEQ_CNT invalid */</span><span class="cp"></span>
<span class="cp">#define RJT_BAD_PARM       0x10	</span><span class="cm">/* Param. field invalid */</span><span class="cp"></span>
<span class="cp">#define RJT_XCHG_ERR       0x11	</span><span class="cm">/* Exchange error */</span><span class="cp"></span>
<span class="cp">#define RJT_PROT_ERR       0x12	</span><span class="cm">/* Protocol error */</span><span class="cp"></span>
<span class="cp">#define RJT_BAD_LENGTH     0x13	</span><span class="cm">/* Invalid Length */</span><span class="cp"></span>
<span class="cp">#define RJT_UNEXPECTED_ACK 0x14	</span><span class="cm">/* Unexpected ACK */</span><span class="cp"></span>
<span class="cp">#define RJT_LOGIN_REQUIRED 0x16	</span><span class="cm">/* Login required */</span><span class="cp"></span>
<span class="cp">#define RJT_TOO_MANY_SEQ   0x17	</span><span class="cm">/* Excessive sequences */</span><span class="cp"></span>
<span class="cp">#define RJT_XCHG_NOT_STRT  0x18	</span><span class="cm">/* Exchange not started */</span><span class="cp"></span>
<span class="cp">#define RJT_UNSUP_SEC_HDR  0x19	</span><span class="cm">/* Security hdr not supported */</span><span class="cp"></span>
<span class="cp">#define RJT_UNAVAIL_PATH   0x1A	</span><span class="cm">/* Fabric Path not available */</span><span class="cp"></span>
<span class="cp">#define RJT_VENDOR_UNIQUE  0xFF	</span><span class="cm">/* Vendor unique error */</span><span class="cp"></span>

<span class="cp">#define IOERR_SUCCESS                 0x00	</span><span class="cm">/* statLocalError */</span><span class="cp"></span>
<span class="cp">#define IOERR_MISSING_CONTINUE        0x01</span>
<span class="cp">#define IOERR_SEQUENCE_TIMEOUT        0x02</span>
<span class="cp">#define IOERR_INTERNAL_ERROR          0x03</span>
<span class="cp">#define IOERR_INVALID_RPI             0x04</span>
<span class="cp">#define IOERR_NO_XRI                  0x05</span>
<span class="cp">#define IOERR_ILLEGAL_COMMAND         0x06</span>
<span class="cp">#define IOERR_XCHG_DROPPED            0x07</span>
<span class="cp">#define IOERR_ILLEGAL_FIELD           0x08</span>
<span class="cp">#define IOERR_BAD_CONTINUE            0x09</span>
<span class="cp">#define IOERR_TOO_MANY_BUFFERS        0x0A</span>
<span class="cp">#define IOERR_RCV_BUFFER_WAITING      0x0B</span>
<span class="cp">#define IOERR_NO_CONNECTION           0x0C</span>
<span class="cp">#define IOERR_TX_DMA_FAILED           0x0D</span>
<span class="cp">#define IOERR_RX_DMA_FAILED           0x0E</span>
<span class="cp">#define IOERR_ILLEGAL_FRAME           0x0F</span>
<span class="cp">#define IOERR_EXTRA_DATA              0x10</span>
<span class="cp">#define IOERR_NO_RESOURCES            0x11</span>
<span class="cp">#define IOERR_RESERVED                0x12</span>
<span class="cp">#define IOERR_ILLEGAL_LENGTH          0x13</span>
<span class="cp">#define IOERR_UNSUPPORTED_FEATURE     0x14</span>
<span class="cp">#define IOERR_ABORT_IN_PROGRESS       0x15</span>
<span class="cp">#define IOERR_ABORT_REQUESTED         0x16</span>
<span class="cp">#define IOERR_RECEIVE_BUFFER_TIMEOUT  0x17</span>
<span class="cp">#define IOERR_LOOP_OPEN_FAILURE       0x18</span>
<span class="cp">#define IOERR_RING_RESET              0x19</span>
<span class="cp">#define IOERR_LINK_DOWN               0x1A</span>
<span class="cp">#define IOERR_CORRUPTED_DATA          0x1B</span>
<span class="cp">#define IOERR_CORRUPTED_RPI           0x1C</span>
<span class="cp">#define IOERR_OUT_OF_ORDER_DATA       0x1D</span>
<span class="cp">#define IOERR_OUT_OF_ORDER_ACK        0x1E</span>
<span class="cp">#define IOERR_DUP_FRAME               0x1F</span>
<span class="cp">#define IOERR_LINK_CONTROL_FRAME      0x20	</span><span class="cm">/* ACK_N received */</span><span class="cp"></span>
<span class="cp">#define IOERR_BAD_HOST_ADDRESS        0x21</span>
<span class="cp">#define IOERR_RCV_HDRBUF_WAITING      0x22</span>
<span class="cp">#define IOERR_MISSING_HDR_BUFFER      0x23</span>
<span class="cp">#define IOERR_MSEQ_CHAIN_CORRUPTED    0x24</span>
<span class="cp">#define IOERR_ABORTMULT_REQUESTED     0x25</span>
<span class="cp">#define IOERR_BUFFER_SHORTAGE         0x28</span>
<span class="cp">#define IOERR_DEFAULT                 0x29</span>
<span class="cp">#define IOERR_CNT                     0x2A</span>
<span class="cp">#define IOERR_SLER_FAILURE            0x46</span>
<span class="cp">#define IOERR_SLER_CMD_RCV_FAILURE    0x47</span>
<span class="cp">#define IOERR_SLER_REC_RJT_ERR        0x48</span>
<span class="cp">#define IOERR_SLER_REC_SRR_RETRY_ERR  0x49</span>
<span class="cp">#define IOERR_SLER_SRR_RJT_ERR        0x4A</span>
<span class="cp">#define IOERR_SLER_RRQ_RJT_ERR        0x4C</span>
<span class="cp">#define IOERR_SLER_RRQ_RETRY_ERR      0x4D</span>
<span class="cp">#define IOERR_SLER_ABTS_ERR           0x4E</span>
<span class="cp">#define IOERR_ELXSEC_KEY_UNWRAP_ERROR		0xF0</span>
<span class="cp">#define IOERR_ELXSEC_KEY_UNWRAP_COMPARE_ERROR	0xF1</span>
<span class="cp">#define IOERR_ELXSEC_CRYPTO_ERROR		0xF2</span>
<span class="cp">#define IOERR_ELXSEC_CRYPTO_COMPARE_ERROR	0xF3</span>
<span class="cp">#define IOERR_DRVR_MASK               0x100</span>
<span class="cp">#define IOERR_SLI_DOWN                0x101  </span><span class="cm">/* ulpStatus  - Driver defined */</span><span class="cp"></span>
<span class="cp">#define IOERR_SLI_BRESET              0x102</span>
<span class="cp">#define IOERR_SLI_ABORTED             0x103</span>
<span class="p">}</span> <span class="n">PARM_ERR</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
		<span class="kt">uint8_t</span> <span class="n">Rctl</span><span class="p">;</span>	<span class="cm">/* R_CTL field */</span>
		<span class="kt">uint8_t</span> <span class="n">Type</span><span class="p">;</span>	<span class="cm">/* TYPE field */</span>
		<span class="kt">uint8_t</span> <span class="n">Dfctl</span><span class="p">;</span>	<span class="cm">/* DF_CTL field */</span>
		<span class="kt">uint8_t</span> <span class="n">Fctl</span><span class="p">;</span>	<span class="cm">/* Bits 0-7 of IOCB word 5 */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
		<span class="kt">uint8_t</span> <span class="n">Fctl</span><span class="p">;</span>	<span class="cm">/* Bits 0-7 of IOCB word 5 */</span>
		<span class="kt">uint8_t</span> <span class="n">Dfctl</span><span class="p">;</span>	<span class="cm">/* DF_CTL field */</span>
		<span class="kt">uint8_t</span> <span class="n">Type</span><span class="p">;</span>	<span class="cm">/* TYPE field */</span>
		<span class="kt">uint8_t</span> <span class="n">Rctl</span><span class="p">;</span>	<span class="cm">/* R_CTL field */</span>
<span class="cp">#endif</span>

<span class="cp">#define BC      0x02		</span><span class="cm">/* Broadcast Received  - Fctl */</span><span class="cp"></span>
<span class="cp">#define SI      0x04		</span><span class="cm">/* Sequence Initiative */</span><span class="cp"></span>
<span class="cp">#define LA      0x08		</span><span class="cm">/* Ignore Link Attention state */</span><span class="cp"></span>
<span class="cp">#define LS      0x80		</span><span class="cm">/* Last Sequence */</span><span class="cp"></span>
	<span class="p">}</span> <span class="n">hcsw</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">reserved</span><span class="p">;</span>
<span class="p">}</span> <span class="n">WORD5</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for a generic response */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">PARM_ERR</span> <span class="n">perr</span><span class="p">;</span>
<span class="p">}</span> <span class="n">GENERIC_RSP</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for XMIT / XMIT_BCAST / RCV_SEQUENCE / XMIT_ELS */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="n">xrsqbde</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">xrsqRo</span><span class="p">;</span>	<span class="cm">/* Starting Relative Offset */</span>
	<span class="n">WORD5</span> <span class="n">w5</span><span class="p">;</span>		<span class="cm">/* Header control/status word */</span>
<span class="p">}</span> <span class="n">XR_SEQ_FIELDS</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for ELS_REQUEST */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="n">elsReq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="n">elsRsp</span><span class="p">;</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">word4Rsvd</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">fl</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">myID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">word5Rsvd</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">remoteID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">myID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">fl</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">word4Rsvd</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">remoteID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">word5Rsvd</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">ELS_REQUEST</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for RCV_ELS_REQ */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="n">elsReq</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">parmRo</span><span class="p">;</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">word5Rsvd</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">remoteID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">remoteID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">word5Rsvd</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">RCV_ELS_REQ</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for ABORT / CLOSE_XRI */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">abortType</span><span class="p">;</span>
<span class="cp">#define ABORT_TYPE_ABTX  0x00000000</span>
<span class="cp">#define ABORT_TYPE_ABTS  0x00000001</span>
	<span class="kt">uint32_t</span> <span class="n">parm</span><span class="p">;</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">abortContextTag</span><span class="p">;</span> <span class="cm">/* ulpContext from command to abort/close */</span>
	<span class="kt">uint16_t</span> <span class="n">abortIoTag</span><span class="p">;</span>	<span class="cm">/* ulpIoTag from command to abort/close */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">abortIoTag</span><span class="p">;</span>	<span class="cm">/* ulpIoTag from command to abort/close */</span>
	<span class="kt">uint16_t</span> <span class="n">abortContextTag</span><span class="p">;</span> <span class="cm">/* ulpContext from command to abort/close */</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">AC_XRI</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for ABORT_MXRI64 */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">abortType</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">parm</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">iotag32</span><span class="p">;</span>
<span class="p">}</span> <span class="n">A_MXRI64</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for GET_RPI */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">parmRo</span><span class="p">;</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">word5Rsvd</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">remoteID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">remoteID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">word5Rsvd</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">GET_RPI</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for all FCP Initiator commands */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="n">fcpi_cmnd</span><span class="p">;</span>	<span class="cm">/* FCP_CMND payload descriptor */</span>
	<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="n">fcpi_rsp</span><span class="p">;</span>	<span class="cm">/* Rcv buffer */</span>
	<span class="kt">uint32_t</span> <span class="n">fcpi_parm</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">fcpi_XRdy</span><span class="p">;</span>	<span class="cm">/* transfer ready for IWRITE */</span>
<span class="p">}</span> <span class="n">FCPI_FIELDS</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for all FCP Target commands */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="n">fcpt_Buffer</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* FCP_CMND payload descriptor */</span>
	<span class="kt">uint32_t</span> <span class="n">fcpt_Offset</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">fcpt_Length</span><span class="p">;</span>	<span class="cm">/* transfer ready for IWRITE */</span>
<span class="p">}</span> <span class="n">FCPT_FIELDS</span><span class="p">;</span>

<span class="cm">/* SLI-2 IOCB structure definitions */</span>

<span class="cm">/* IOCB Command template for 64 bit XMIT / XMIT_BCAST / XMIT_ELS */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">ULP_BDL</span> <span class="n">bdl</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">xrsqRo</span><span class="p">;</span>	<span class="cm">/* Starting Relative Offset */</span>
	<span class="n">WORD5</span> <span class="n">w5</span><span class="p">;</span>		<span class="cm">/* Header control/status word */</span>
<span class="p">}</span> <span class="n">XMT_SEQ_FIELDS64</span><span class="p">;</span>

<span class="cm">/* This word is remote ports D_ID for XMIT_ELS_RSP64 */</span>
<span class="cp">#define xmit_els_remoteID xrsqRo</span>

<span class="cm">/* IOCB Command template for 64 bit RCV_SEQUENCE64 */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">rcvBde</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">xrsqRo</span><span class="p">;</span>	<span class="cm">/* Starting Relative Offset */</span>
	<span class="n">WORD5</span> <span class="n">w5</span><span class="p">;</span>		<span class="cm">/* Header control/status word */</span>
<span class="p">}</span> <span class="n">RCV_SEQ_FIELDS64</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for ELS_REQUEST64 */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">ULP_BDL</span> <span class="n">bdl</span><span class="p">;</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">word4Rsvd</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">fl</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">myID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">word5Rsvd</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">remoteID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">myID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">fl</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">word4Rsvd</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">remoteID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">word5Rsvd</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">ELS_REQUEST64</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for GEN_REQUEST64 */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">ULP_BDL</span> <span class="n">bdl</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">xrsqRo</span><span class="p">;</span>	<span class="cm">/* Starting Relative Offset */</span>
	<span class="n">WORD5</span> <span class="n">w5</span><span class="p">;</span>		<span class="cm">/* Header control/status word */</span>
<span class="p">}</span> <span class="n">GEN_REQUEST64</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for RCV_ELS_REQ64 */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">elsReq</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rcvd1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">parmRo</span><span class="p">;</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">word5Rsvd</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">remoteID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">remoteID</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">word5Rsvd</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">RCV_ELS_REQ64</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for RCV_SEQ64 */</span>
<span class="k">struct</span> <span class="n">rcv_seq64</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">elsReq</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">hbq_1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">parmRo</span><span class="p">;</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">rctl</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">type</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">dfctl</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ls</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">fs</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">si</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">bc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">rsvd3</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">bc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">si</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd2</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">fs</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ls</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">dfctl</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">type</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">rctl</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="cm">/* IOCB Command template for all 64 bit FCP Initiator commands */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">ULP_BDL</span> <span class="n">bdl</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">fcpi_parm</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">fcpi_XRdy</span><span class="p">;</span>	<span class="cm">/* transfer ready for IWRITE */</span>
<span class="p">}</span> <span class="n">FCPI_FIELDS64</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for all 64 bit FCP Target commands */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">ULP_BDL</span> <span class="n">bdl</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">fcpt_Offset</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">fcpt_Length</span><span class="p">;</span>	<span class="cm">/* transfer ready for IWRITE */</span>
<span class="p">}</span> <span class="n">FCPT_FIELDS64</span><span class="p">;</span>

<span class="cm">/* IOCB Command template for Async Status iocb commands */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">uint32_t</span> <span class="n">param</span><span class="p">;</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">evt_code</span><span class="p">;</span>		<span class="cm">/* High order bits word 5 */</span>
	<span class="kt">uint16_t</span> <span class="n">sub_ctxt_tag</span><span class="p">;</span>		<span class="cm">/* Low  order bits word 5 */</span>
<span class="cp">#else   </span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">sub_ctxt_tag</span><span class="p">;</span>		<span class="cm">/* High order bits word 5 */</span>
	<span class="kt">uint16_t</span> <span class="n">evt_code</span><span class="p">;</span>		<span class="cm">/* Low  order bits word 5 */</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">ASYNCSTAT_FIELDS</span><span class="p">;</span>
<span class="cp">#define ASYNC_TEMP_WARN		0x100</span>
<span class="cp">#define ASYNC_TEMP_SAFE		0x101</span>
<span class="cp">#define ASYNC_STATUS_CN		0x102</span>

<span class="cm">/* IOCB Command template for CMD_IOCB_RCV_ELS64_CX (0xB7)</span>
<span class="cm">   or CMD_IOCB_RCV_SEQ64_CX (0xB5) */</span>

<span class="k">struct</span> <span class="n">rcv_sli3</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint16_t</span> <span class="n">ox_id</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">seq_cnt</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">vpi</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">word9Rsvd</span><span class="p">;</span>
<span class="cp">#else  </span><span class="cm">/*  __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint16_t</span> <span class="n">seq_cnt</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">ox_id</span><span class="p">;</span>

	<span class="kt">uint16_t</span> <span class="n">word9Rsvd</span><span class="p">;</span>
	<span class="kt">uint16_t</span> <span class="n">vpi</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="kt">uint32_t</span> <span class="n">word10Rsvd</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">acc_len</span><span class="p">;</span>      <span class="cm">/* accumulated length */</span>
	<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">bde2</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Structure used for a single HBQ entry */</span>
<span class="k">struct</span> <span class="n">lpfc_hbq_entry</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">bde</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">buffer_tag</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* IOCB Command template for QUE_XRI64_CX (0xB3) command */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">lpfc_hbq_entry</span>   <span class="n">buff</span><span class="p">;</span>
	<span class="kt">uint32_t</span>                <span class="n">rsvd</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">rsvd1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">QUE_XRI64_CX_FIELDS</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">que_xri64cx_ext_fields</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>	<span class="n">iotag64_low</span><span class="p">;</span>
	<span class="kt">uint32_t</span>	<span class="n">iotag64_high</span><span class="p">;</span>
	<span class="kt">uint32_t</span>	<span class="n">ebde_count</span><span class="p">;</span>
	<span class="kt">uint32_t</span>	<span class="n">rsvd</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lpfc_hbq_entry</span>	<span class="n">buff</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">sli3_bg_fields</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">filler</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>	<span class="cm">/* word 8-13 in IOCB */</span>
	<span class="kt">uint32_t</span> <span class="n">bghm</span><span class="p">;</span>		<span class="cm">/* word 14 - BlockGuard High Water Mark */</span>
<span class="cm">/* Bitfields for bgstat (BlockGuard Status - word 15 of IOCB) */</span>
<span class="cp">#define BGS_BIDIR_BG_PROF_MASK		0xff000000</span>
<span class="cp">#define BGS_BIDIR_BG_PROF_SHIFT		24</span>
<span class="cp">#define BGS_BIDIR_ERR_COND_FLAGS_MASK	0x003f0000</span>
<span class="cp">#define BGS_BIDIR_ERR_COND_SHIFT	16</span>
<span class="cp">#define BGS_BG_PROFILE_MASK		0x0000ff00</span>
<span class="cp">#define BGS_BG_PROFILE_SHIFT		8</span>
<span class="cp">#define BGS_INVALID_PROF_MASK		0x00000020</span>
<span class="cp">#define BGS_INVALID_PROF_SHIFT		5</span>
<span class="cp">#define BGS_UNINIT_DIF_BLOCK_MASK	0x00000010</span>
<span class="cp">#define BGS_UNINIT_DIF_BLOCK_SHIFT	4</span>
<span class="cp">#define BGS_HI_WATER_MARK_PRESENT_MASK	0x00000008</span>
<span class="cp">#define BGS_HI_WATER_MARK_PRESENT_SHIFT	3</span>
<span class="cp">#define BGS_REFTAG_ERR_MASK		0x00000004</span>
<span class="cp">#define BGS_REFTAG_ERR_SHIFT		2</span>
<span class="cp">#define BGS_APPTAG_ERR_MASK		0x00000002</span>
<span class="cp">#define BGS_APPTAG_ERR_SHIFT		1</span>
<span class="cp">#define BGS_GUARD_ERR_MASK		0x00000001</span>
<span class="cp">#define BGS_GUARD_ERR_SHIFT		0</span>
	<span class="kt">uint32_t</span> <span class="n">bgstat</span><span class="p">;</span>	<span class="cm">/* word 15 - BlockGuard Status */</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span>
<span class="nf">lpfc_bgs_get_bidir_bg_prof</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">bgstat</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">bgstat</span> <span class="o">&amp;</span> <span class="n">BGS_BIDIR_BG_PROF_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
				<span class="n">BGS_BIDIR_BG_PROF_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span>
<span class="nf">lpfc_bgs_get_bidir_err_cond</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">bgstat</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">bgstat</span> <span class="o">&amp;</span> <span class="n">BGS_BIDIR_ERR_COND_FLAGS_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
				<span class="n">BGS_BIDIR_ERR_COND_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span>
<span class="nf">lpfc_bgs_get_bg_prof</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">bgstat</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">bgstat</span> <span class="o">&amp;</span> <span class="n">BGS_BG_PROFILE_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
				<span class="n">BGS_BG_PROFILE_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span>
<span class="nf">lpfc_bgs_get_invalid_prof</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">bgstat</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">bgstat</span> <span class="o">&amp;</span> <span class="n">BGS_INVALID_PROF_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
				<span class="n">BGS_INVALID_PROF_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span>
<span class="nf">lpfc_bgs_get_uninit_dif_block</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">bgstat</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">bgstat</span> <span class="o">&amp;</span> <span class="n">BGS_UNINIT_DIF_BLOCK_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
				<span class="n">BGS_UNINIT_DIF_BLOCK_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span>
<span class="nf">lpfc_bgs_get_hi_water_mark_present</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">bgstat</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">bgstat</span> <span class="o">&amp;</span> <span class="n">BGS_HI_WATER_MARK_PRESENT_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
				<span class="n">BGS_HI_WATER_MARK_PRESENT_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span>
<span class="nf">lpfc_bgs_get_reftag_err</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">bgstat</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">bgstat</span> <span class="o">&amp;</span> <span class="n">BGS_REFTAG_ERR_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
				<span class="n">BGS_REFTAG_ERR_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span>
<span class="nf">lpfc_bgs_get_apptag_err</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">bgstat</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">bgstat</span> <span class="o">&amp;</span> <span class="n">BGS_APPTAG_ERR_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
				<span class="n">BGS_APPTAG_ERR_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span>
<span class="nf">lpfc_bgs_get_guard_err</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">bgstat</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">bgstat</span> <span class="o">&amp;</span> <span class="n">BGS_GUARD_ERR_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
				<span class="n">BGS_GUARD_ERR_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#define LPFC_EXT_DATA_BDE_COUNT 3</span>
<span class="k">struct</span> <span class="n">fcp_irw_ext</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>	<span class="n">io_tag64_low</span><span class="p">;</span>
	<span class="kt">uint32_t</span>	<span class="n">io_tag64_high</span><span class="p">;</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint8_t</span>		<span class="n">reserved1</span><span class="p">;</span>
	<span class="kt">uint8_t</span>		<span class="n">reserved2</span><span class="p">;</span>
	<span class="kt">uint8_t</span>		<span class="n">reserved3</span><span class="p">;</span>
	<span class="kt">uint8_t</span>		<span class="n">ebde_count</span><span class="p">;</span>
<span class="cp">#else  </span><span class="cm">/* __LITTLE_ENDIAN */</span><span class="cp"></span>
	<span class="kt">uint8_t</span>		<span class="n">ebde_count</span><span class="p">;</span>
	<span class="kt">uint8_t</span>		<span class="n">reserved3</span><span class="p">;</span>
	<span class="kt">uint8_t</span>		<span class="n">reserved2</span><span class="p">;</span>
	<span class="kt">uint8_t</span>		<span class="n">reserved1</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="kt">uint32_t</span>	<span class="n">reserved4</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">rbde</span><span class="p">;</span>		<span class="cm">/* response bde */</span>
	<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">dbde</span><span class="p">[</span><span class="n">LPFC_EXT_DATA_BDE_COUNT</span><span class="p">];</span>	<span class="cm">/* data BDE or BPL */</span>
	<span class="kt">uint8_t</span> <span class="n">icd</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>		<span class="cm">/* immediate command data (32 bytes) */</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_IOCB</span> <span class="p">{</span>	<span class="cm">/* IOCB structure */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="n">GENERIC_RSP</span> <span class="n">grsp</span><span class="p">;</span>	<span class="cm">/* Generic response */</span>
		<span class="n">XR_SEQ_FIELDS</span> <span class="n">xrseq</span><span class="p">;</span>	<span class="cm">/* XMIT / BCAST / RCV_SEQUENCE cmd */</span>
		<span class="k">struct</span> <span class="n">ulp_bde</span> <span class="n">cont</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* up to 3 continuation bdes */</span>
		<span class="n">RCV_ELS_REQ</span> <span class="n">rcvels</span><span class="p">;</span>	<span class="cm">/* RCV_ELS_REQ template */</span>
		<span class="n">AC_XRI</span> <span class="n">acxri</span><span class="p">;</span>	<span class="cm">/* ABORT / CLOSE_XRI template */</span>
		<span class="n">A_MXRI64</span> <span class="n">amxri</span><span class="p">;</span>	<span class="cm">/* abort multiple xri command overlay */</span>
		<span class="n">GET_RPI</span> <span class="n">getrpi</span><span class="p">;</span>	<span class="cm">/* GET_RPI template */</span>
		<span class="n">FCPI_FIELDS</span> <span class="n">fcpi</span><span class="p">;</span>	<span class="cm">/* FCP Initiator template */</span>
		<span class="n">FCPT_FIELDS</span> <span class="n">fcpt</span><span class="p">;</span>	<span class="cm">/* FCP target template */</span>

		<span class="cm">/* SLI-2 structures */</span>

		<span class="k">struct</span> <span class="n">ulp_bde64</span> <span class="n">cont64</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>  <span class="cm">/* up to 2 64 bit continuation</span>
<span class="cm">					      * bde_64s */</span>
		<span class="n">ELS_REQUEST64</span> <span class="n">elsreq64</span><span class="p">;</span>	<span class="cm">/* ELS_REQUEST template */</span>
		<span class="n">GEN_REQUEST64</span> <span class="n">genreq64</span><span class="p">;</span>	<span class="cm">/* GEN_REQUEST template */</span>
		<span class="n">RCV_ELS_REQ64</span> <span class="n">rcvels64</span><span class="p">;</span>	<span class="cm">/* RCV_ELS_REQ template */</span>
		<span class="n">XMT_SEQ_FIELDS64</span> <span class="n">xseq64</span><span class="p">;</span>	<span class="cm">/* XMIT / BCAST cmd */</span>
		<span class="n">FCPI_FIELDS64</span> <span class="n">fcpi64</span><span class="p">;</span>	<span class="cm">/* FCP 64 bit Initiator template */</span>
		<span class="n">FCPT_FIELDS64</span> <span class="n">fcpt64</span><span class="p">;</span>	<span class="cm">/* FCP 64 bit target template */</span>
		<span class="n">ASYNCSTAT_FIELDS</span> <span class="n">asyncstat</span><span class="p">;</span> <span class="cm">/* async_status iocb */</span>
		<span class="n">QUE_XRI64_CX_FIELDS</span> <span class="n">quexri64cx</span><span class="p">;</span> <span class="cm">/* que_xri64_cx fields */</span>
		<span class="k">struct</span> <span class="n">rcv_seq64</span> <span class="n">rcvseq64</span><span class="p">;</span>	<span class="cm">/* RCV_SEQ64 and RCV_CONT64 */</span>
		<span class="k">struct</span> <span class="n">sli4_bls_rsp</span> <span class="n">bls_rsp</span><span class="p">;</span> <span class="cm">/* UNSOL ABTS BLS_RSP params */</span>
		<span class="kt">uint32_t</span> <span class="n">ulpWord</span><span class="p">[</span><span class="n">IOCB_WORD_SZ</span> <span class="o">-</span> <span class="mi">2</span><span class="p">];</span>	<span class="cm">/* generic 6 &#39;words&#39; */</span>
	<span class="p">}</span> <span class="n">un</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
			<span class="kt">uint16_t</span> <span class="n">ulpContext</span><span class="p">;</span>	<span class="cm">/* High order bits word 6 */</span>
			<span class="kt">uint16_t</span> <span class="n">ulpIoTag</span><span class="p">;</span>	<span class="cm">/* Low  order bits word 6 */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
			<span class="kt">uint16_t</span> <span class="n">ulpIoTag</span><span class="p">;</span>	<span class="cm">/* Low  order bits word 6 */</span>
			<span class="kt">uint16_t</span> <span class="n">ulpContext</span><span class="p">;</span>	<span class="cm">/* High order bits word 6 */</span>
<span class="cp">#endif</span>
		<span class="p">}</span> <span class="n">t1</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
			<span class="kt">uint16_t</span> <span class="n">ulpContext</span><span class="p">;</span>	<span class="cm">/* High order bits word 6 */</span>
			<span class="kt">uint16_t</span> <span class="n">ulpIoTag1</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* Low  order bits word 6 */</span>
			<span class="kt">uint16_t</span> <span class="n">ulpIoTag0</span><span class="o">:</span><span class="mi">14</span><span class="p">;</span>	<span class="cm">/* Low  order bits word 6 */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
			<span class="kt">uint16_t</span> <span class="n">ulpIoTag0</span><span class="o">:</span><span class="mi">14</span><span class="p">;</span>	<span class="cm">/* Low  order bits word 6 */</span>
			<span class="kt">uint16_t</span> <span class="n">ulpIoTag1</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* Low  order bits word 6 */</span>
			<span class="kt">uint16_t</span> <span class="n">ulpContext</span><span class="p">;</span>	<span class="cm">/* High order bits word 6 */</span>
<span class="cp">#endif</span>
		<span class="p">}</span> <span class="n">t2</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">un1</span><span class="p">;</span>
<span class="cp">#define ulpContext un1.t1.ulpContext</span>
<span class="cp">#define ulpIoTag   un1.t1.ulpIoTag</span>
<span class="cp">#define ulpIoTag0  un1.t2.ulpIoTag0</span>

<span class="cp">#ifdef __BIG_ENDIAN_BITFIELD</span>
	<span class="kt">uint32_t</span> <span class="n">ulpTimeout</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpXS</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpFCP2Rcvy</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpPU</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpIr</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpClass</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpCommand</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpStatus</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpBdeCount</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpLe</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpOwner</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Low order bit word 7 */</span>
<span class="cp">#else	</span><span class="cm">/*  __LITTLE_ENDIAN_BITFIELD */</span><span class="cp"></span>
	<span class="kt">uint32_t</span> <span class="n">ulpOwner</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Low order bit word 7 */</span>
	<span class="kt">uint32_t</span> <span class="n">ulpLe</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpBdeCount</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpStatus</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpCommand</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpClass</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpIr</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpPU</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpFCP2Rcvy</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpXS</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ulpTimeout</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">rcv_sli3</span> <span class="n">rcvsli3</span><span class="p">;</span> <span class="cm">/* words 8 - 15 */</span>

		<span class="cm">/* words 8-31 used for que_xri_cx iocb */</span>
		<span class="k">struct</span> <span class="n">que_xri64cx_ext_fields</span> <span class="n">que_xri64cx_ext_words</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">fcp_irw_ext</span> <span class="n">fcp_ext</span><span class="p">;</span>
		<span class="kt">uint32_t</span> <span class="n">sli3Words</span><span class="p">[</span><span class="mi">24</span><span class="p">];</span> <span class="cm">/* 96 extra bytes for SLI-3 */</span>

		<span class="cm">/* words 8-15 for BlockGuard */</span>
		<span class="k">struct</span> <span class="n">sli3_bg_fields</span> <span class="n">sli3_bg</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">unsli3</span><span class="p">;</span>

<span class="cp">#define ulpCt_h ulpXS</span>
<span class="cp">#define ulpCt_l ulpFCP2Rcvy</span>

<span class="cp">#define IOCB_FCP	   1	</span><span class="cm">/* IOCB is used for FCP ELS cmds-ulpRsvByte */</span><span class="cp"></span>
<span class="cp">#define IOCB_IP		   2	</span><span class="cm">/* IOCB is used for IP ELS cmds */</span><span class="cp"></span>
<span class="cp">#define PARM_UNUSED        0	</span><span class="cm">/* PU field (Word 4) not used */</span><span class="cp"></span>
<span class="cp">#define PARM_REL_OFF       1	</span><span class="cm">/* PU field (Word 4) = R. O. */</span><span class="cp"></span>
<span class="cp">#define PARM_READ_CHECK    2	</span><span class="cm">/* PU field (Word 4) = Data Transfer Length */</span><span class="cp"></span>
<span class="cp">#define PARM_NPIV_DID	   3</span>
<span class="cp">#define CLASS1             0	</span><span class="cm">/* Class 1 */</span><span class="cp"></span>
<span class="cp">#define CLASS2             1	</span><span class="cm">/* Class 2 */</span><span class="cp"></span>
<span class="cp">#define CLASS3             2	</span><span class="cm">/* Class 3 */</span><span class="cp"></span>
<span class="cp">#define CLASS_FCP_INTERMIX 7	</span><span class="cm">/* FCP Data-&gt;Cls 1, all else-&gt;Cls 2 */</span><span class="cp"></span>

<span class="cp">#define IOSTAT_SUCCESS         0x0	</span><span class="cm">/* ulpStatus  - HBA defined */</span><span class="cp"></span>
<span class="cp">#define IOSTAT_FCP_RSP_ERROR   0x1</span>
<span class="cp">#define IOSTAT_REMOTE_STOP     0x2</span>
<span class="cp">#define IOSTAT_LOCAL_REJECT    0x3</span>
<span class="cp">#define IOSTAT_NPORT_RJT       0x4</span>
<span class="cp">#define IOSTAT_FABRIC_RJT      0x5</span>
<span class="cp">#define IOSTAT_NPORT_BSY       0x6</span>
<span class="cp">#define IOSTAT_FABRIC_BSY      0x7</span>
<span class="cp">#define IOSTAT_INTERMED_RSP    0x8</span>
<span class="cp">#define IOSTAT_LS_RJT          0x9</span>
<span class="cp">#define IOSTAT_BA_RJT          0xA</span>
<span class="cp">#define IOSTAT_RSVD1           0xB</span>
<span class="cp">#define IOSTAT_RSVD2           0xC</span>
<span class="cp">#define IOSTAT_RSVD3           0xD</span>
<span class="cp">#define IOSTAT_RSVD4           0xE</span>
<span class="cp">#define IOSTAT_NEED_BUFFER     0xF</span>
<span class="cp">#define IOSTAT_DRIVER_REJECT   0x10   </span><span class="cm">/* ulpStatus  - Driver defined */</span><span class="cp"></span>
<span class="cp">#define IOSTAT_DEFAULT         0xF    </span><span class="cm">/* Same as rsvd5 for now */</span><span class="cp"></span>
<span class="cp">#define IOSTAT_CNT             0x11</span>

<span class="p">}</span> <span class="n">IOCB_t</span><span class="p">;</span>


<span class="cp">#define SLI1_SLIM_SIZE   (4 * 1024)</span>

<span class="cm">/* Up to 498 IOCBs will fit into 16k</span>
<span class="cm"> * 256 (MAILBOX_t) + 140 (PCB_t) + ( 32 (IOCB_t) * 498 ) = &lt; 16384</span>
<span class="cm"> */</span>
<span class="cp">#define SLI2_SLIM_SIZE   (64 * 1024)</span>

<span class="cm">/* Maximum IOCBs that will fit in SLI2 slim */</span>
<span class="cp">#define MAX_SLI2_IOCB    498</span>
<span class="cp">#define MAX_SLIM_IOCB_SIZE (SLI2_SLIM_SIZE - \</span>
<span class="cp">			    (sizeof(MAILBOX_t) + sizeof(PCB_t) + \</span>
<span class="cp">			    sizeof(uint32_t) * MAILBOX_EXT_WSIZE))</span>

<span class="cm">/* HBQ entries are 4 words each = 4k */</span>
<span class="cp">#define LPFC_TOTAL_HBQ_SIZE (sizeof(struct lpfc_hbq_entry) *  \</span>
<span class="cp">			     lpfc_sli_hbq_count())</span>

<span class="k">struct</span> <span class="n">lpfc_sli2_slim</span> <span class="p">{</span>
	<span class="n">MAILBOX_t</span> <span class="n">mbx</span><span class="p">;</span>
	<span class="kt">uint32_t</span>  <span class="n">mbx_ext_words</span><span class="p">[</span><span class="n">MAILBOX_EXT_WSIZE</span><span class="p">];</span>
	<span class="n">PCB_t</span> <span class="n">pcb</span><span class="p">;</span>
	<span class="n">IOCB_t</span> <span class="n">IOCBs</span><span class="p">[</span><span class="n">MAX_SLIM_IOCB_SIZE</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * This function checks PCI device to allow special handling for LC HBAs.</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> * device : struct pci_dev &#39;s device field</span>
<span class="cm"> *</span>
<span class="cm"> * return 1 =&gt; TRUE</span>
<span class="cm"> *        0 =&gt; FALSE</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span>
<span class="nf">lpfc_is_LC_HBA</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">device</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">device</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_TFLY</span><span class="p">)</span> <span class="o">||</span>
	    <span class="p">(</span><span class="n">device</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_PFLY</span><span class="p">)</span> <span class="o">||</span>
	    <span class="p">(</span><span class="n">device</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_LP101</span><span class="p">)</span> <span class="o">||</span>
	    <span class="p">(</span><span class="n">device</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_BMID</span><span class="p">)</span> <span class="o">||</span>
	    <span class="p">(</span><span class="n">device</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_BSMB</span><span class="p">)</span> <span class="o">||</span>
	    <span class="p">(</span><span class="n">device</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_ZMID</span><span class="p">)</span> <span class="o">||</span>
	    <span class="p">(</span><span class="n">device</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_ZSMB</span><span class="p">)</span> <span class="o">||</span>
	    <span class="p">(</span><span class="n">device</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_SAT_MID</span><span class="p">)</span> <span class="o">||</span>
	    <span class="p">(</span><span class="n">device</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_SAT_SMB</span><span class="p">)</span> <span class="o">||</span>
	    <span class="p">(</span><span class="n">device</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_RFLY</span><span class="p">))</span>
		<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Determine if an IOCB failed because of a link event or firmware reset.</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span>
<span class="nf">lpfc_error_lost_link</span><span class="p">(</span><span class="n">IOCB_t</span> <span class="o">*</span><span class="n">iocbp</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">iocbp</span><span class="o">-&gt;</span><span class="n">ulpStatus</span> <span class="o">==</span> <span class="n">IOSTAT_LOCAL_REJECT</span> <span class="o">&amp;&amp;</span>
		<span class="p">(</span><span class="n">iocbp</span><span class="o">-&gt;</span><span class="n">un</span><span class="p">.</span><span class="n">ulpWord</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="n">IOERR_SLI_ABORTED</span> <span class="o">||</span>
		 <span class="n">iocbp</span><span class="o">-&gt;</span><span class="n">un</span><span class="p">.</span><span class="n">ulpWord</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="n">IOERR_LINK_DOWN</span> <span class="o">||</span>
		 <span class="n">iocbp</span><span class="o">-&gt;</span><span class="n">un</span><span class="p">.</span><span class="n">ulpWord</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="n">IOERR_SLI_DOWN</span><span class="p">));</span>
<span class="p">}</span>

<span class="cp">#define MENLO_TRANSPORT_TYPE 0xfe</span>
<span class="cp">#define MENLO_CONTEXT 0</span>
<span class="cp">#define MENLO_PU 3</span>
<span class="cp">#define MENLO_TIMEOUT 30</span>
<span class="cp">#define SETVAR_MLOMNT 0x103107</span>
<span class="cp">#define SETVAR_MLORST 0x103007</span>

<span class="cp">#define BPL_ALIGN_SZ 8 </span><span class="cm">/* 8 byte alignment for bpl and mbufs */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
