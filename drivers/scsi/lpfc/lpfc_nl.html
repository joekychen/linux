<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › scsi › lpfc › lpfc_nl.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>lpfc_nl.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*******************************************************************</span>
<span class="cm"> * This file is part of the Emulex Linux Device Driver for         *</span>
<span class="cm"> * Fibre Channel Host Bus Adapters.                                *</span>
<span class="cm"> * Copyright (C) 2010 Emulex.  All rights reserved.                *</span>
<span class="cm"> * EMULEX and SLI are trademarks of Emulex.                        *</span>
<span class="cm"> * www.emulex.com                                                  *</span>
<span class="cm"> *                                                                 *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or   *</span>
<span class="cm"> * modify it under the terms of version 2 of the GNU General       *</span>
<span class="cm"> * Public License as published by the Free Software Foundation.    *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful. *</span>
<span class="cm"> * ALL EXPRESS OR IMPLIED CONDITIONS, REPRESENTATIONS AND          *</span>
<span class="cm"> * WARRANTIES, INCLUDING ANY IMPLIED WARRANTY OF MERCHANTABILITY,  *</span>
<span class="cm"> * FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT, ARE      *</span>
<span class="cm"> * DISCLAIMED, EXCEPT TO THE EXTENT THAT SUCH DISCLAIMERS ARE HELD *</span>
<span class="cm"> * TO BE LEGALLY INVALID.  See the GNU General Public License for  *</span>
<span class="cm"> * more details, a copy of which can be found in the file COPYING  *</span>
<span class="cm"> * included with this package.                                     *</span>
<span class="cm"> *******************************************************************/</span>

<span class="cm">/* Event definitions for RegisterForEvent */</span>
<span class="cp">#define FC_REG_LINK_EVENT		0x0001	</span><span class="cm">/* link up / down events */</span><span class="cp"></span>
<span class="cp">#define FC_REG_RSCN_EVENT		0x0002	</span><span class="cm">/* RSCN events */</span><span class="cp"></span>
<span class="cp">#define FC_REG_CT_EVENT			0x0004	</span><span class="cm">/* CT request events */</span><span class="cp"></span>
<span class="cp">#define FC_REG_DUMP_EVENT		0x0010	</span><span class="cm">/* Dump events */</span><span class="cp"></span>
<span class="cp">#define FC_REG_TEMPERATURE_EVENT	0x0020	</span><span class="cm">/* temperature events */</span><span class="cp"></span>
<span class="cp">#define FC_REG_VPORTRSCN_EVENT		0x0040	</span><span class="cm">/* Vport RSCN events */</span><span class="cp"></span>
<span class="cp">#define FC_REG_ELS_EVENT		0x0080	</span><span class="cm">/* lpfc els events */</span><span class="cp"></span>
<span class="cp">#define FC_REG_FABRIC_EVENT		0x0100	</span><span class="cm">/* lpfc fabric events */</span><span class="cp"></span>
<span class="cp">#define FC_REG_SCSI_EVENT		0x0200	</span><span class="cm">/* lpfc scsi events */</span><span class="cp"></span>
<span class="cp">#define FC_REG_BOARD_EVENT		0x0400	</span><span class="cm">/* lpfc board events */</span><span class="cp"></span>
<span class="cp">#define FC_REG_ADAPTER_EVENT		0x0800	</span><span class="cm">/* lpfc adapter events */</span><span class="cp"></span>
<span class="cp">#define FC_REG_EVENT_MASK		(FC_REG_LINK_EVENT | \</span>
<span class="cp">						FC_REG_RSCN_EVENT | \</span>
<span class="cp">						FC_REG_CT_EVENT | \</span>
<span class="cp">						FC_REG_DUMP_EVENT | \</span>
<span class="cp">						FC_REG_TEMPERATURE_EVENT | \</span>
<span class="cp">						FC_REG_VPORTRSCN_EVENT | \</span>
<span class="cp">						FC_REG_ELS_EVENT | \</span>
<span class="cp">						FC_REG_FABRIC_EVENT | \</span>
<span class="cp">						FC_REG_SCSI_EVENT | \</span>
<span class="cp">						FC_REG_BOARD_EVENT | \</span>
<span class="cp">						FC_REG_ADAPTER_EVENT)</span>
<span class="cm">/* Temperature events */</span>
<span class="cp">#define LPFC_CRIT_TEMP		0x1</span>
<span class="cp">#define LPFC_THRESHOLD_TEMP	0x2</span>
<span class="cp">#define LPFC_NORMAL_TEMP	0x3</span>
<span class="cm">/*</span>
<span class="cm"> * All net link event payloads will begin with and event type</span>
<span class="cm"> * and subcategory. The event type must come first.</span>
<span class="cm"> * The subcategory further defines the data that follows in the rest</span>
<span class="cm"> * of the payload. Each category will have its own unique header plus</span>
<span class="cm"> * any additional data unique to the subcategory.</span>
<span class="cm"> * The payload sent via the fc transport is one-way driver-&gt;application.</span>
<span class="cm"> */</span>

<span class="cm">/* RSCN event header */</span>
<span class="k">struct</span> <span class="n">lpfc_rscn_event_header</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">event_type</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">payload_length</span><span class="p">;</span> <span class="cm">/* RSCN data length in bytes */</span>
	<span class="kt">uint32_t</span> <span class="n">rscn_payload</span><span class="p">[];</span>
<span class="p">};</span>

<span class="cm">/* els event header */</span>
<span class="k">struct</span> <span class="n">lpfc_els_event_header</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">event_type</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">subcategory</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">wwpn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">wwnn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* subcategory codes for FC_REG_ELS_EVENT */</span>
<span class="cp">#define LPFC_EVENT_PLOGI_RCV		0x01</span>
<span class="cp">#define LPFC_EVENT_PRLO_RCV		0x02</span>
<span class="cp">#define LPFC_EVENT_ADISC_RCV		0x04</span>
<span class="cp">#define LPFC_EVENT_LSRJT_RCV		0x08</span>
<span class="cp">#define LPFC_EVENT_LOGO_RCV		0x10</span>

<span class="cm">/* special els lsrjt event */</span>
<span class="k">struct</span> <span class="n">lpfc_lsrjt_event</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">lpfc_els_event_header</span> <span class="n">header</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">command</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">reason_code</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">explanation</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* special els logo event */</span>
<span class="k">struct</span> <span class="n">lpfc_logo_event</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">lpfc_els_event_header</span> <span class="n">header</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">logo_wwpn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* fabric event header */</span>
<span class="k">struct</span> <span class="n">lpfc_fabric_event_header</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">event_type</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">subcategory</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">wwpn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">wwnn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* subcategory codes for FC_REG_FABRIC_EVENT */</span>
<span class="cp">#define LPFC_EVENT_FABRIC_BUSY		0x01</span>
<span class="cp">#define LPFC_EVENT_PORT_BUSY		0x02</span>
<span class="cp">#define LPFC_EVENT_FCPRDCHKERR		0x04</span>

<span class="cm">/* special case fabric fcprdchkerr event */</span>
<span class="k">struct</span> <span class="n">lpfc_fcprdchkerr_event</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">lpfc_fabric_event_header</span> <span class="n">header</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">lun</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">fcpiparam</span><span class="p">;</span>
<span class="p">};</span>


<span class="cm">/* scsi event header */</span>
<span class="k">struct</span> <span class="n">lpfc_scsi_event_header</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">event_type</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">subcategory</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">lun</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">wwpn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="kt">uint8_t</span> <span class="n">wwnn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* subcategory codes for FC_REG_SCSI_EVENT */</span>
<span class="cp">#define LPFC_EVENT_QFULL	0x0001</span>
<span class="cp">#define LPFC_EVENT_DEVBSY	0x0002</span>
<span class="cp">#define LPFC_EVENT_CHECK_COND	0x0004</span>
<span class="cp">#define LPFC_EVENT_LUNRESET	0x0008</span>
<span class="cp">#define LPFC_EVENT_TGTRESET	0x0010</span>
<span class="cp">#define LPFC_EVENT_BUSRESET	0x0020</span>
<span class="cp">#define LPFC_EVENT_VARQUEDEPTH	0x0040</span>

<span class="cm">/* special case scsi varqueuedepth event */</span>
<span class="k">struct</span> <span class="n">lpfc_scsi_varqueuedepth_event</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">lpfc_scsi_event_header</span> <span class="n">scsi_event</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">oldval</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">newval</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* special case scsi check condition event */</span>
<span class="k">struct</span> <span class="n">lpfc_scsi_check_condition_event</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">lpfc_scsi_event_header</span> <span class="n">scsi_event</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">sense_key</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">asc</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="n">ascq</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* event codes for FC_REG_BOARD_EVENT */</span>
<span class="cp">#define LPFC_EVENT_PORTINTERR		0x01</span>

<span class="cm">/* board event header */</span>
<span class="k">struct</span> <span class="n">lpfc_board_event_header</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">event_type</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">subcategory</span><span class="p">;</span>
<span class="p">};</span>


<span class="cm">/* event codes for FC_REG_ADAPTER_EVENT */</span>
<span class="cp">#define LPFC_EVENT_ARRIVAL	0x01</span>

<span class="cm">/* adapter event header */</span>
<span class="k">struct</span> <span class="n">lpfc_adapter_event_header</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">event_type</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">subcategory</span><span class="p">;</span>
<span class="p">};</span>


<span class="cm">/* event codes for temp_event */</span>
<span class="cp">#define LPFC_CRIT_TEMP		0x1</span>
<span class="cp">#define LPFC_THRESHOLD_TEMP	0x2</span>
<span class="cp">#define LPFC_NORMAL_TEMP	0x3</span>

<span class="k">struct</span> <span class="n">temp_event</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">event_type</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">event_code</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">data</span><span class="p">;</span>
<span class="p">};</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
