<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › scsi › isci › scu_completion_codes.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>scu_completion_codes.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This file is provided under a dual BSD/GPLv2 license.  When using or</span>
<span class="cm"> * redistributing this file, you may do so under either license.</span>
<span class="cm"> *</span>
<span class="cm"> * GPL LICENSE SUMMARY</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright(c) 2008 - 2011 Intel Corporation. All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of version 2 of the GNU General Public License as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful, but</span>
<span class="cm"> * WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="cm"> * General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 51 Franklin St - Fifth Floor, Boston, MA 02110-1301 USA.</span>
<span class="cm"> * The full GNU General Public License is included in this distribution</span>
<span class="cm"> * in the file called LICENSE.GPL.</span>
<span class="cm"> *</span>
<span class="cm"> * BSD LICENSE</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright(c) 2008 - 2011 Intel Corporation. All rights reserved.</span>
<span class="cm"> * All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * Redistribution and use in source and binary forms, with or without</span>
<span class="cm"> * modification, are permitted provided that the following conditions</span>
<span class="cm"> * are met:</span>
<span class="cm"> *</span>
<span class="cm"> *   * Redistributions of source code must retain the above copyright</span>
<span class="cm"> *     notice, this list of conditions and the following disclaimer.</span>
<span class="cm"> *   * Redistributions in binary form must reproduce the above copyright</span>
<span class="cm"> *     notice, this list of conditions and the following disclaimer in</span>
<span class="cm"> *     the documentation and/or other materials provided with the</span>
<span class="cm"> *     distribution.</span>
<span class="cm"> *   * Neither the name of Intel Corporation nor the names of its</span>
<span class="cm"> *     contributors may be used to endorse or promote products derived</span>
<span class="cm"> *     from this software without specific prior written permission.</span>
<span class="cm"> *</span>
<span class="cm"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<span class="cm"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<span class="cm"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<span class="cm"> * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<span class="cm"> * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<span class="cm"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<span class="cm"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<span class="cm"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<span class="cm"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<span class="cm"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<span class="cm"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _SCU_COMPLETION_CODES_HEADER_</span>
<span class="cp">#define _SCU_COMPLETION_CODES_HEADER_</span>

<span class="cm">/**</span>
<span class="cm"> * This file contains the constants and macros for the SCU hardware completion</span>
<span class="cm"> *    codes.</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#define SCU_COMPLETION_TYPE_SHIFT      28</span>
<span class="cp">#define SCU_COMPLETION_TYPE_MASK       0x70000000</span>

<span class="cm">/**</span>
<span class="cm"> * SCU_COMPLETION_TYPE() -</span>
<span class="cm"> *</span>
<span class="cm"> * This macro constructs an SCU completion type</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_COMPLETION_TYPE(type) \</span>
<span class="cp">	((u32)(type) &lt;&lt; SCU_COMPLETION_TYPE_SHIFT)</span>

<span class="cm">/**</span>
<span class="cm"> * SCU_COMPLETION_TYPE() -</span>
<span class="cm"> *</span>
<span class="cm"> * These macros contain the SCU completion types SCU_COMPLETION_TYPE</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_COMPLETION_TYPE_TASK       SCU_COMPLETION_TYPE(0)</span>
<span class="cp">#define SCU_COMPLETION_TYPE_SDMA       SCU_COMPLETION_TYPE(1)</span>
<span class="cp">#define SCU_COMPLETION_TYPE_UFI        SCU_COMPLETION_TYPE(2)</span>
<span class="cp">#define SCU_COMPLETION_TYPE_EVENT      SCU_COMPLETION_TYPE(3)</span>
<span class="cp">#define SCU_COMPLETION_TYPE_NOTIFY     SCU_COMPLETION_TYPE(4)</span>

<span class="cm">/**</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> * These constants provide the shift and mask values for the various parts of</span>
<span class="cm"> * an SCU completion code.</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_COMPLETION_STATUS_MASK       0x0FFC0000</span>
<span class="cp">#define SCU_COMPLETION_TL_STATUS_MASK    0x0FC00000</span>
<span class="cp">#define SCU_COMPLETION_TL_STATUS_SHIFT   22</span>
<span class="cp">#define SCU_COMPLETION_SDMA_STATUS_MASK  0x003C0000</span>
<span class="cp">#define SCU_COMPLETION_PEG_MASK          0x00010000</span>
<span class="cp">#define SCU_COMPLETION_PORT_MASK         0x00007000</span>
<span class="cp">#define SCU_COMPLETION_PE_MASK           SCU_COMPLETION_PORT_MASK</span>
<span class="cp">#define SCU_COMPLETION_PE_SHIFT          12</span>
<span class="cp">#define SCU_COMPLETION_INDEX_MASK        0x00000FFF</span>

<span class="cm">/**</span>
<span class="cm"> * SCU_GET_COMPLETION_TYPE() -</span>
<span class="cm"> *</span>
<span class="cm"> * This macro returns the SCU completion type.</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_GET_COMPLETION_TYPE(completion_code) \</span>
<span class="cp">	((completion_code) &amp; SCU_COMPLETION_TYPE_MASK)</span>

<span class="cm">/**</span>
<span class="cm"> * SCU_GET_COMPLETION_STATUS() -</span>
<span class="cm"> *</span>
<span class="cm"> * This macro returns the SCU completion status.</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_GET_COMPLETION_STATUS(completion_code) \</span>
<span class="cp">	((completion_code) &amp; SCU_COMPLETION_STATUS_MASK)</span>

<span class="cm">/**</span>
<span class="cm"> * SCU_GET_COMPLETION_TL_STATUS() -</span>
<span class="cm"> *</span>
<span class="cm"> * This macro returns the transport layer completion status.</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_GET_COMPLETION_TL_STATUS(completion_code) \</span>
<span class="cp">	((completion_code) &amp; SCU_COMPLETION_TL_STATUS_MASK)</span>

<span class="cm">/**</span>
<span class="cm"> * SCU_MAKE_COMPLETION_STATUS() -</span>
<span class="cm"> *</span>
<span class="cm"> * This macro takes a completion code and performs the shift and mask</span>
<span class="cm"> * operations to turn it into a completion code that can be compared to a</span>
<span class="cm"> * SCU_GET_COMPLETION_TL_STATUS.</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_MAKE_COMPLETION_STATUS(completion_code) \</span>
<span class="cp">	((u32)(completion_code) &lt;&lt; SCU_COMPLETION_TL_STATUS_SHIFT)</span>

<span class="cm">/**</span>
<span class="cm"> * SCU_NORMALIZE_COMPLETION_STATUS() -</span>
<span class="cm"> *</span>
<span class="cm"> * This macro takes a SCU_GET_COMPLETION_TL_STATUS and normalizes it for a</span>
<span class="cm"> * return code.</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_NORMALIZE_COMPLETION_STATUS(completion_code) \</span>
<span class="cp">	(\</span>
<span class="cp">		((completion_code) &amp; SCU_COMPLETION_TL_STATUS_MASK) \</span>
<span class="cp">		&gt;&gt; SCU_COMPLETION_TL_STATUS_SHIFT \</span>
<span class="cp">	)</span>

<span class="cm">/**</span>
<span class="cm"> * SCU_GET_COMPLETION_SDMA_STATUS() -</span>
<span class="cm"> *</span>
<span class="cm"> * This macro returns the SDMA completion status.</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_GET_COMPLETION_SDMA_STATUS(completion_code)	\</span>
<span class="cp">	((completion_code) &amp; SCU_COMPLETION_SDMA_STATUS_MASK)</span>

<span class="cm">/**</span>
<span class="cm"> * SCU_GET_COMPLETION_PEG() -</span>
<span class="cm"> *</span>
<span class="cm"> * This macro returns the Protocol Engine Group from the completion code.</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_GET_COMPLETION_PEG(completion_code)	\</span>
<span class="cp">	((completion_code) &amp; SCU_COMPLETION_PEG_MASK)</span>

<span class="cm">/**</span>
<span class="cm"> * SCU_GET_COMPLETION_PORT() -</span>
<span class="cm"> *</span>
<span class="cm"> * This macro reuturns the logical port index from the completion code.</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_GET_COMPLETION_PORT(completion_code) \</span>
<span class="cp">	((completion_code) &amp; SCU_COMPLETION_PORT_MASK)</span>

<span class="cm">/**</span>
<span class="cm"> * SCU_GET_PROTOCOL_ENGINE_INDEX() -</span>
<span class="cm"> *</span>
<span class="cm"> * This macro returns the PE index from the completion code.</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_GET_PROTOCOL_ENGINE_INDEX(completion_code) \</span>
<span class="cp">	(((completion_code) &amp; SCU_COMPLETION_PE_MASK) &gt;&gt; SCU_COMPLETION_PE_SHIFT)</span>

<span class="cm">/**</span>
<span class="cm"> * SCU_GET_COMPLETION_INDEX() -</span>
<span class="cm"> *</span>
<span class="cm"> * This macro returns the index of the completion which is either a TCi or an</span>
<span class="cm"> * RNi depending on the completion type.</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_GET_COMPLETION_INDEX(completion_code) \</span>
<span class="cp">	((completion_code) &amp; SCU_COMPLETION_INDEX_MASK)</span>

<span class="cp">#define SCU_UNSOLICITED_FRAME_MASK     0x0FFF0000</span>
<span class="cp">#define SCU_UNSOLICITED_FRAME_SHIFT    16</span>

<span class="cm">/**</span>
<span class="cm"> * SCU_GET_FRAME_INDEX() -</span>
<span class="cm"> *</span>
<span class="cm"> * This macro returns a normalized frame index from an unsolicited frame</span>
<span class="cm"> * completion.</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_GET_FRAME_INDEX(completion_code) \</span>
<span class="cp">	(\</span>
<span class="cp">		((completion_code) &amp; SCU_UNSOLICITED_FRAME_MASK) \</span>
<span class="cp">		&gt;&gt; SCU_UNSOLICITED_FRAME_SHIFT \</span>
<span class="cp">	)</span>

<span class="cp">#define SCU_UNSOLICITED_FRAME_ERROR_MASK  0x00008000</span>

<span class="cm">/**</span>
<span class="cm"> * SCU_GET_FRAME_ERROR() -</span>
<span class="cm"> *</span>
<span class="cm"> * This macro returns a zero (0) value if there is no frame error otherwise it</span>
<span class="cm"> * returns non-zero (!0).</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_GET_FRAME_ERROR(completion_code) \</span>
<span class="cp">	((completion_code) &amp; SCU_UNSOLICITED_FRAME_ERROR_MASK)</span>

<span class="cm">/**</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> * These constants represent normalized completion codes which must be shifted</span>
<span class="cm"> * 18 bits to match it with the hardware completion code. In a 16-bit compiler,</span>
<span class="cm"> * immediate constants are 16-bit values (the size of an int). If we shift</span>
<span class="cm"> * those by 18 bits, we completely lose the value. To ensure the value is a</span>
<span class="cm"> * 32-bit value like we want, each immediate value must be cast to a u32.</span>
<span class="cm"> */</span>
<span class="cp">#define SCU_TASK_DONE_GOOD                                  ((u32)0x00)</span>
<span class="cp">#define SCU_TASK_DONE_TX_RAW_CMD_ERR                        ((u32)0x08)</span>
<span class="cp">#define SCU_TASK_DONE_CRC_ERR                               ((u32)0x14)</span>
<span class="cp">#define SCU_TASK_DONE_CHECK_RESPONSE                        ((u32)0x14)</span>
<span class="cp">#define SCU_TASK_DONE_GEN_RESPONSE                          ((u32)0x15)</span>
<span class="cp">#define SCU_TASK_DONE_NAK_CMD_ERR                           ((u32)0x16)</span>
<span class="cp">#define SCU_TASK_DONE_CMD_LL_R_ERR                          ((u32)0x16)</span>
<span class="cp">#define SCU_TASK_DONE_LL_R_ERR                              ((u32)0x17)</span>
<span class="cp">#define SCU_TASK_DONE_ACK_NAK_TO                            ((u32)0x17)</span>
<span class="cp">#define SCU_TASK_DONE_LL_PERR                               ((u32)0x18)</span>
<span class="cp">#define SCU_TASK_DONE_LL_SY_TERM                            ((u32)0x19)</span>
<span class="cp">#define SCU_TASK_DONE_NAK_ERR                               ((u32)0x19)</span>
<span class="cp">#define SCU_TASK_DONE_LL_LF_TERM                            ((u32)0x1A)</span>
<span class="cp">#define SCU_TASK_DONE_DATA_LEN_ERR                          ((u32)0x1A)</span>
<span class="cp">#define SCU_TASK_DONE_LL_CL_TERM                            ((u32)0x1B)</span>
<span class="cp">#define SCU_TASK_DONE_BREAK_RCVD                            ((u32)0x1B)</span>
<span class="cp">#define SCU_TASK_DONE_LL_ABORT_ERR                          ((u32)0x1B)</span>
<span class="cp">#define SCU_TASK_DONE_SEQ_INV_TYPE                          ((u32)0x1C)</span>
<span class="cp">#define SCU_TASK_DONE_UNEXP_XR                              ((u32)0x1C)</span>
<span class="cp">#define SCU_TASK_DONE_INV_FIS_TYPE                          ((u32)0x1D)</span>
<span class="cp">#define SCU_TASK_DONE_XR_IU_LEN_ERR                         ((u32)0x1D)</span>
<span class="cp">#define SCU_TASK_DONE_INV_FIS_LEN                           ((u32)0x1E)</span>
<span class="cp">#define SCU_TASK_DONE_XR_WD_LEN                             ((u32)0x1E)</span>
<span class="cp">#define SCU_TASK_DONE_SDMA_ERR                              ((u32)0x1F)</span>
<span class="cp">#define SCU_TASK_DONE_OFFSET_ERR                            ((u32)0x20)</span>
<span class="cp">#define SCU_TASK_DONE_MAX_PLD_ERR                           ((u32)0x21)</span>
<span class="cp">#define SCU_TASK_DONE_EXCESS_DATA                           ((u32)0x22)</span>
<span class="cp">#define SCU_TASK_DONE_LF_ERR                                ((u32)0x23)</span>
<span class="cp">#define SCU_TASK_DONE_UNEXP_FIS                             ((u32)0x24)</span>
<span class="cp">#define SCU_TASK_DONE_UNEXP_RESP                            ((u32)0x24)</span>
<span class="cp">#define SCU_TASK_DONE_EARLY_RESP                            ((u32)0x25)</span>
<span class="cp">#define SCU_TASK_DONE_SMP_RESP_TO_ERR                       ((u32)0x26)</span>
<span class="cp">#define SCU_TASK_DONE_DMASETUP_DIRERR                       ((u32)0x27)</span>
<span class="cp">#define SCU_TASK_DONE_SMP_UFI_ERR                           ((u32)0x27)</span>
<span class="cp">#define SCU_TASK_DONE_XFERCNT_ERR                           ((u32)0x28)</span>
<span class="cp">#define SCU_TASK_DONE_SMP_FRM_TYPE_ERR                      ((u32)0x28)</span>
<span class="cp">#define SCU_TASK_DONE_SMP_LL_RX_ERR                         ((u32)0x29)</span>
<span class="cp">#define SCU_TASK_DONE_RESP_LEN_ERR                          ((u32)0x2A)</span>
<span class="cp">#define SCU_TASK_DONE_UNEXP_DATA                            ((u32)0x2B)</span>
<span class="cp">#define SCU_TASK_DONE_OPEN_FAIL                             ((u32)0x2C)</span>
<span class="cp">#define SCU_TASK_DONE_UNEXP_SDBFIS                          ((u32)0x2D)</span>
<span class="cp">#define SCU_TASK_DONE_REG_ERR                               ((u32)0x2E)</span>
<span class="cp">#define SCU_TASK_DONE_SDB_ERR                               ((u32)0x2F)</span>
<span class="cp">#define SCU_TASK_DONE_TASK_ABORT                            ((u32)0x30)</span>
<span class="cp">#define SCU_TASK_DONE_CMD_SDMA_ERR                          ((U32)0x32)</span>
<span class="cp">#define SCU_TASK_DONE_CMD_LL_ABORT_ERR                      ((U32)0x33)</span>
<span class="cp">#define SCU_TASK_OPEN_REJECT_WRONG_DESTINATION              ((u32)0x34)</span>
<span class="cp">#define SCU_TASK_OPEN_REJECT_RESERVED_ABANDON_1             ((u32)0x35)</span>
<span class="cp">#define SCU_TASK_OPEN_REJECT_RESERVED_ABANDON_2             ((u32)0x36)</span>
<span class="cp">#define SCU_TASK_OPEN_REJECT_RESERVED_ABANDON_3             ((u32)0x37)</span>
<span class="cp">#define SCU_TASK_OPEN_REJECT_BAD_DESTINATION                ((u32)0x38)</span>
<span class="cp">#define SCU_TASK_OPEN_REJECT_ZONE_VIOLATION                 ((u32)0x39)</span>
<span class="cp">#define SCU_TASK_DONE_VIIT_ENTRY_NV                         ((u32)0x3A)</span>
<span class="cp">#define SCU_TASK_DONE_IIT_ENTRY_NV                          ((u32)0x3B)</span>
<span class="cp">#define SCU_TASK_DONE_RNCNV_OUTBOUND                        ((u32)0x3C)</span>
<span class="cp">#define SCU_TASK_OPEN_REJECT_STP_RESOURCES_BUSY             ((u32)0x3D)</span>
<span class="cp">#define SCU_TASK_OPEN_REJECT_PROTOCOL_NOT_SUPPORTED         ((u32)0x3E)</span>
<span class="cp">#define SCU_TASK_OPEN_REJECT_CONNECTION_RATE_NOT_SUPPORTED  ((u32)0x3F)</span>

<span class="cp">#endif </span><span class="cm">/* _SCU_COMPLETION_CODES_HEADER_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
