f | osd_initiator.c | s | 56K | 1728 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103884 |  | scsi: Fix up files implicitly depending on module.h inclusion  The module.h header was implicitly present everywhere, so files with no explicit include of the module infrastructure would build anyway.  We are now removing the implicit include, and so we need to call out the module.h file that we need explicitly.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | osd_uld.c | s | 13K | 477 | Boaz Harrosh | bharrosh@panasas.com | 1330179909 |  | [SCSI] osd_uld: Bump MAX_OSD_DEVICES from 64 to 1,048,576  It used to be that minors where 8 bit. But now they are actually 20 bit. So the fix is simplicity itself.  I've tested with 300 devices and all user-mode utils work just fine. I have also mechanically added 10,000 to the ida (so devices are /dev/osd10000, /dev/osd10001 ...) and was able to mkfs an exofs filesystem and access osds from user-mode.  All the open-osd user-mode code uses the same library to access devices through their symbolic names in /dev/osdX so I'd say it's pretty safe. (Well tested)  This patch is very important because some of the systems that will be deploying the 3.2 pnfs-objects code are larger than 64 OSDs and will stop to work properly when reaching that number.  CC: Stable <stable@vger.kernel.org> Signed-off-by: Boaz Harrosh <bharrosh@panasas.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | Kbuild | g | 523B |  | Boaz Harrosh | bharrosh@panasas.com | 1244642441 |  | [SCSI] osd: Remove out-of-tree left overs  * Delete Makefile. It is only used for out-of-tree compilation   and was never needed. It slipped in by mistake. * Remove from Kbuild all the out of tree stuff as promised.  Signed-off-by: Boaz Harrosh <bharrosh@panasas.com> Signed-off-by: James Bottomley <James.Bottomley@HansenPartnership.com>
f | Kconfig | g | 1.7K |  | Boaz Harrosh | bharrosh@panasas.com | 1316690045 |  | osd: Kconfig remove wrong FIXME  The OSD protocol calls for all kind of security levels that use CRYPTO_HMAC and SH1, but the current code only supports NO_SEC, which does not use any of these.  Remove a wrong FIXME that calls for them. Thanks Maxin for reporting on this.  Reported-by: "Maxin B. John" <maxin.john@gmail.com> Signed-off-by: Boaz Harrosh <bharrosh@panasas.com>
f | osd_debug.h | s | 854B | 26 | Boaz Harrosh | bharrosh@panasas.com | 1236880686 |  | [SCSI] libosd: OSDv1 preliminary implementation  Implementation of the most basic OSD functionality and infrastructure. Mainly Format, Create/Remove Partition, Create/Remove Object, and read/write.  - Add Makefile and Kbuild to compile libosd.ko - osd_initiator.c Implementation file for osd_initiator.h   and osd_sec.h APIs - osd_debug.h - Some kprintf macro definitions  Signed-off-by: Boaz Harrosh <bharrosh@panasas.com> Reviewed-by: Benny Halevy <bhalevy@panasas.com> Signed-off-by: James Bottomley <James.Bottomley@HansenPartnership.com>
