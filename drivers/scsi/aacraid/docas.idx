f | src.c | s | 19K | 711 | Tomas Henzl | thenzl@redhat.com | 1335205704 |  | [SCSI] aacraid: add an iounmap call to aac_src_ioremap  The patch 116046127d1a3bad2853d02781ad9fee33f05e5a "[SCSI] aacraid: Added Sync.mode to support series 7/8/9 controllers" removed an iounmap call from aac_src_ioremap. Before that, the iounmap has been called twice with the same value (dev->base and dev->regs.src.bar0) and the iounmap complained about it (iounmap: bad address ...).  The proper solution is a change the paremeter from bar0 to bar1. Fix this by adding a an iounmap(dev->regs.src.bar1) call.  Signed-off-by: Tomas Henzl <thenzl@redhat.com> Acked-by: Achim Leubner <achim_leubner@pmc-sierra.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | Makefile | g | 199B |  | Mahesh Rajashekhara | Mahesh_Rajashekhara@pmc-sierra.com | 1300898218 |  | [SCSI] aacraid: Add new code for PMC-Sierra's SRC based controller family  Added new hardware device 0x28b interface for PMC-Sierra's SRC based controller family.  - new src.c file for 0x28b specific functions - new XPORT header required - sync. command interface: doorbell bits shifted (SRC_ODR_SHIFT, SRC_IDR_SHIFT) - async. Interface: different inbound queue handling, no outbound I2O   queue available, using doorbell ("PmDoorBellResponseSent") and   response buffer on the host ("host_rrq") for status - changed AIF (adapter initiated FIBs) interface: "DoorBellAifPending"   bit to inform about pending AIF, "AifRequest" command to read AIF,   "NoMoreAifDataAvailable" to mark the end of the AIFs  Signed-off-by: Mahesh Rajashekhara <aacraid@pmc-sierra.com> Signed-off-by: James Bottomley <James.Bottomley@suse.de>
f | sa.c | s | 10K | 373 | Mahesh Rajashekhara | Mahesh_Rajashekhara@pmc-sierra.com | 1329660541 |  | [SCSI] aacraid: Added Sync.mode to support series 7/8/9 controllers  Added Sync. mode to support Series 7/8/9 controller families: This is a compatibility mode for all these controller families. The Async. (Performance) mode can be changed in the future.  First Async. mode version added for Series 7; Controller parameter aac_sync_mode added  Signed-off-by: Mahesh Rajashekhara <aacraid@pmc-sierra.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | TODO | g | 45B |  | Mark Haverkamp | markh@osdl.org | 1130517713 |  | [SCSI] aacraid: Newer adapter communication iterface support  Received from Mark Salyzyn.  This patch adds the 'new comm' interface, which modern AAC based adapters that are less than a year old support in the name of much improved performance. These modern adapters support both the legacy and the 'new comm' interfaces.  Signed-off-by: Mark Haverkamp <markh@osdl.org> Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
f | aachba.c | s | 85K | 2669 | Mahesh Rajashekhara | Mahesh_Rajashekhara@pmc-sierra.com | 1329660541 |  | [SCSI] aacraid: Added Sync.mode to support series 7/8/9 controllers  Added Sync. mode to support Series 7/8/9 controller families: This is a compatibility mode for all these controller families. The Async. (Performance) mode can be changed in the future.  First Async. mode version added for Series 7; Controller parameter aac_sync_mode added  Signed-off-by: Mahesh Rajashekhara <aacraid@pmc-sierra.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | commctrl.c | s | 23K | 809 | Jesper Juhl | jj@chaosbits.net | 1326060921 |  | drivers/scsi/aacraid/commctrl.c: fix mem leak in aac_send_raw_srb()  We leak in drivers/scsi/aacraid/commctrl.c::aac_send_raw_srb() :  We allocate memory:  	... 	struct user_sgmap* usg; 	usg = kmalloc(actual_fibsize - sizeof(struct aac_srb) 	  + sizeof(struct sgmap), GFP_KERNEL);  and then neglect to free it:  	... 	for (i = 0; i < usg->count; i++) { 		u64 addr; 		void* p; 		if (usg->sg[i].count > 		    ((dev->adapter_info.options & 		     AAC_OPT_NEW_COMM) ? 		      (dev->scsi_host_ptr->max_sectors << 9) : 		      65536)) { 			rcode = -EINVAL; 			goto cleanup; 	... this 'goto' makes 'usg' go out of scope and leak the memory we 	    allocated.  Other exits properly kfree(usg), it's just here it is neglected.  Signed-off-by: Jesper Juhl <jj@chaosbits.net> Cc: James Bottomley <James.Bottomley@HansenPartnership.com> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | dpcsup.c | s | 11K | 372 | Mahesh Rajashekhara | Mahesh_Rajashekhara@pmc-sierra.com | 1300898218 |  | [SCSI] aacraid: Add new code for PMC-Sierra's SRC based controller family  Added new hardware device 0x28b interface for PMC-Sierra's SRC based controller family.  - new src.c file for 0x28b specific functions - new XPORT header required - sync. command interface: doorbell bits shifted (SRC_ODR_SHIFT, SRC_IDR_SHIFT) - async. Interface: different inbound queue handling, no outbound I2O   queue available, using doorbell ("PmDoorBellResponseSent") and   response buffer on the host ("host_rrq") for status - changed AIF (adapter initiated FIBs) interface: "DoorBellAifPending"   bit to inform about pending AIF, "AifRequest" command to read AIF,   "NoMoreAifDataAvailable" to mark the end of the AIFs  Signed-off-by: Mahesh Rajashekhara <aacraid@pmc-sierra.com> Signed-off-by: James Bottomley <James.Bottomley@suse.de>
f | nark.c | s | 2.2K | 77 | Mahesh Rajashekhara | Mahesh_Rajashekhara@pmc-sierra.com | 1300898218 |  | [SCSI] aacraid: Add new code for PMC-Sierra's SRC based controller family  Added new hardware device 0x28b interface for PMC-Sierra's SRC based controller family.  - new src.c file for 0x28b specific functions - new XPORT header required - sync. command interface: doorbell bits shifted (SRC_ODR_SHIFT, SRC_IDR_SHIFT) - async. Interface: different inbound queue handling, no outbound I2O   queue available, using doorbell ("PmDoorBellResponseSent") and   response buffer on the host ("host_rrq") for status - changed AIF (adapter initiated FIBs) interface: "DoorBellAifPending"   bit to inform about pending AIF, "AifRequest" command to read AIF,   "NoMoreAifDataAvailable" to mark the end of the AIFs  Signed-off-by: Mahesh Rajashekhara <aacraid@pmc-sierra.com> Signed-off-by: James Bottomley <James.Bottomley@suse.de>
f | commsup.c | s | 53K | 1767 | Mahesh Rajashekhara | Mahesh_Rajashekhara@pmc-sierra.com | 1329660541 |  | [SCSI] aacraid: Added Sync.mode to support series 7/8/9 controllers  Added Sync. mode to support Series 7/8/9 controller families: This is a compatibility mode for all these controller families. The Async. (Performance) mode can be changed in the future.  First Async. mode version added for Series 7; Controller parameter aac_sync_mode added  Signed-off-by: Mahesh Rajashekhara <aacraid@pmc-sierra.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | aacraid.h | s | 55K | 1785 | Mahesh Rajashekhara | Mahesh_Rajashekhara@pmc-sierra.com | 1329660541 |  | [SCSI] aacraid: Added Sync.mode to support series 7/8/9 controllers  Added Sync. mode to support Series 7/8/9 controller families: This is a compatibility mode for all these controller families. The Async. (Performance) mode can be changed in the future.  First Async. mode version added for Series 7; Controller parameter aac_sync_mode added  Signed-off-by: Mahesh Rajashekhara <aacraid@pmc-sierra.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | rx.c | s | 17K | 631 | Mahesh Rajashekhara | Mahesh_Rajashekhara@pmc-sierra.com | 1329660541 |  | [SCSI] aacraid: Added Sync.mode to support series 7/8/9 controllers  Added Sync. mode to support Series 7/8/9 controller families: This is a compatibility mode for all these controller families. The Async. (Performance) mode can be changed in the future.  First Async. mode version added for Series 7; Controller parameter aac_sync_mode added  Signed-off-by: Mahesh Rajashekhara <aacraid@pmc-sierra.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | rkt.c | s | 3.0K | 97 | Mahesh Rajashekhara | Mahesh_Rajashekhara@pmc-sierra.com | 1300898218 |  | [SCSI] aacraid: Add new code for PMC-Sierra's SRC based controller family  Added new hardware device 0x28b interface for PMC-Sierra's SRC based controller family.  - new src.c file for 0x28b specific functions - new XPORT header required - sync. command interface: doorbell bits shifted (SRC_ODR_SHIFT, SRC_IDR_SHIFT) - async. Interface: different inbound queue handling, no outbound I2O   queue available, using doorbell ("PmDoorBellResponseSent") and   response buffer on the host ("host_rrq") for status - changed AIF (adapter initiated FIBs) interface: "DoorBellAifPending"   bit to inform about pending AIF, "AifRequest" command to read AIF,   "NoMoreAifDataAvailable" to mark the end of the AIFs  Signed-off-by: Mahesh Rajashekhara <aacraid@pmc-sierra.com> Signed-off-by: James Bottomley <James.Bottomley@suse.de>
f | linit.c | s | 45K | 1231 | Mahesh Rajashekhara | Mahesh_Rajashekhara@pmc-sierra.com | 1329660541 |  | [SCSI] aacraid: Added Sync.mode to support series 7/8/9 controllers  Added Sync. mode to support Series 7/8/9 controller families: This is a compatibility mode for all these controller families. The Async. (Performance) mode can be changed in the future.  First Async. mode version added for Series 7; Controller parameter aac_sync_mode added  Signed-off-by: Mahesh Rajashekhara <aacraid@pmc-sierra.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | comminit.c | s | 14K | 415 | Mahesh Rajashekhara | Mahesh_Rajashekhara@pmc-sierra.com | 1329660541 |  | [SCSI] aacraid: Added Sync.mode to support series 7/8/9 controllers  Added Sync. mode to support Series 7/8/9 controller families: This is a compatibility mode for all these controller families. The Async. (Performance) mode can be changed in the future.  First Async. mode version added for Series 7; Controller parameter aac_sync_mode added  Signed-off-by: Mahesh Rajashekhara <aacraid@pmc-sierra.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
