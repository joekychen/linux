<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › scsi › bfa › bfa_fcs.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>bfa_fcs.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2005-2010 Brocade Communications Systems, Inc.</span>
<span class="cm"> * All rights reserved</span>
<span class="cm"> * www.brocade.com</span>
<span class="cm"> *</span>
<span class="cm"> * Linux driver for Brocade Fibre Channel Host Bus Adapter.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify it</span>
<span class="cm"> * under the terms of the GNU General Public License (GPL) Version 2 as</span>
<span class="cm"> * published by the Free Software Foundation</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful, but</span>
<span class="cm"> * WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="cm"> * General Public License for more details.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __BFA_FCS_H__</span>
<span class="cp">#define __BFA_FCS_H__</span>

<span class="cp">#include &quot;bfa_cs.h&quot;</span>
<span class="cp">#include &quot;bfa_defs.h&quot;</span>
<span class="cp">#include &quot;bfa_defs_fcs.h&quot;</span>
<span class="cp">#include &quot;bfa_modules.h&quot;</span>
<span class="cp">#include &quot;bfa_fc.h&quot;</span>

<span class="cp">#define BFA_FCS_OS_STR_LEN		64</span>

<span class="cm">/*</span>
<span class="cm"> *  lps_pvt BFA LPS private functions</span>
<span class="cm"> */</span>

<span class="k">enum</span> <span class="n">bfa_lps_event</span> <span class="p">{</span>
	<span class="n">BFA_LPS_SM_LOGIN</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/* login request from user      */</span>
	<span class="n">BFA_LPS_SM_LOGOUT</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/* logout request from user     */</span>
	<span class="n">BFA_LPS_SM_FWRSP</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/* f/w response to login/logout */</span>
	<span class="n">BFA_LPS_SM_RESUME</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>	<span class="cm">/* space present in reqq queue  */</span>
	<span class="n">BFA_LPS_SM_DELETE</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>	<span class="cm">/* lps delete from user         */</span>
	<span class="n">BFA_LPS_SM_OFFLINE</span>	<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>	<span class="cm">/* Link is offline              */</span>
	<span class="n">BFA_LPS_SM_RX_CVL</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>	<span class="cm">/* Rx clear virtual link        */</span>
	<span class="n">BFA_LPS_SM_SET_N2N_PID</span>  <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>	<span class="cm">/* Set assigned PID for n2n */</span>
<span class="p">};</span>


<span class="cm">/*</span>
<span class="cm"> * !!! Only append to the enums defined here to avoid any versioning</span>
<span class="cm"> * !!! needed between trace utility and driver version</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">BFA_TRC_FCS_FCS</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFA_TRC_FCS_PORT</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">BFA_TRC_FCS_RPORT</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">BFA_TRC_FCS_FCPIM</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<span class="p">};</span>


<span class="k">struct</span> <span class="n">bfa_fcs_s</span><span class="p">;</span>

<span class="cp">#define __fcs_min_cfg(__fcs)       ((__fcs)-&gt;min_cfg)</span>

<span class="cp">#define BFA_FCS_BRCD_SWITCH_OUI  0x051e</span>
<span class="cp">#define N2N_LOCAL_PID	    0x010000</span>
<span class="cp">#define N2N_REMOTE_PID		0x020000</span>
<span class="cp">#define	BFA_FCS_RETRY_TIMEOUT 2000</span>
<span class="cp">#define BFA_FCS_PID_IS_WKA(pid)  ((bfa_ntoh3b(pid) &gt; 0xFFF000) ?  1 : 0)</span>



<span class="k">struct</span> <span class="n">bfa_fcs_lport_ns_s</span> <span class="p">{</span>
	<span class="n">bfa_sm_t</span>        <span class="n">sm</span><span class="p">;</span>		<span class="cm">/*  state machine */</span>
	<span class="k">struct</span> <span class="n">bfa_timer_s</span> <span class="n">timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">;</span>	<span class="cm">/*  parent port */</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_s</span> <span class="o">*</span><span class="n">fcxp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_wqe_s</span> <span class="n">fcxp_wqe</span><span class="p">;</span>
<span class="p">};</span>


<span class="k">struct</span> <span class="n">bfa_fcs_lport_scn_s</span> <span class="p">{</span>
	<span class="n">bfa_sm_t</span>        <span class="n">sm</span><span class="p">;</span>		<span class="cm">/*  state machine */</span>
	<span class="k">struct</span> <span class="n">bfa_timer_s</span> <span class="n">timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">;</span>	<span class="cm">/*  parent port */</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_s</span> <span class="o">*</span><span class="n">fcxp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_wqe_s</span> <span class="n">fcxp_wqe</span><span class="p">;</span>
<span class="p">};</span>


<span class="k">struct</span> <span class="n">bfa_fcs_lport_fdmi_s</span> <span class="p">{</span>
	<span class="n">bfa_sm_t</span>        <span class="n">sm</span><span class="p">;</span>		<span class="cm">/*  state machine */</span>
	<span class="k">struct</span> <span class="n">bfa_timer_s</span> <span class="n">timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_ms_s</span> <span class="o">*</span><span class="n">ms</span><span class="p">;</span>	<span class="cm">/*  parent ms */</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_s</span> <span class="o">*</span><span class="n">fcxp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_wqe_s</span> <span class="n">fcxp_wqe</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">retry_cnt</span><span class="p">;</span>	<span class="cm">/*  retry count */</span>
	<span class="n">u8</span>	<span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>


<span class="k">struct</span> <span class="n">bfa_fcs_lport_ms_s</span> <span class="p">{</span>
	<span class="n">bfa_sm_t</span>        <span class="n">sm</span><span class="p">;</span>		<span class="cm">/*  state machine */</span>
	<span class="k">struct</span> <span class="n">bfa_timer_s</span> <span class="n">timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">;</span>	<span class="cm">/*  parent port */</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_s</span> <span class="o">*</span><span class="n">fcxp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_wqe_s</span> <span class="n">fcxp_wqe</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_fdmi_s</span> <span class="n">fdmi</span><span class="p">;</span>	<span class="cm">/*  FDMI component of MS */</span>
	<span class="n">u8</span>         <span class="n">retry_cnt</span><span class="p">;</span>	<span class="cm">/*  retry count */</span>
	<span class="n">u8</span>	<span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>


<span class="k">struct</span> <span class="n">bfa_fcs_lport_fab_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_ns_s</span> <span class="n">ns</span><span class="p">;</span>	<span class="cm">/*  NS component of port */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_scn_s</span> <span class="n">scn</span><span class="p">;</span>	<span class="cm">/*  scn component of port */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_ms_s</span> <span class="n">ms</span><span class="p">;</span>	<span class="cm">/*  MS component of port */</span>
<span class="p">};</span>

<span class="cp">#define	MAX_ALPA_COUNT	127</span>

<span class="k">struct</span> <span class="n">bfa_fcs_lport_loop_s</span> <span class="p">{</span>
	<span class="n">u8</span>         <span class="n">num_alpa</span><span class="p">;</span>	<span class="cm">/*  Num of ALPA entries in the map */</span>
	<span class="n">u8</span>         <span class="n">alpa_pos_map</span><span class="p">[</span><span class="n">MAX_ALPA_COUNT</span><span class="p">];</span>	<span class="cm">/*  ALPA Positional</span>
<span class="cm">							 *Map */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">;</span>	<span class="cm">/*  parent port */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_fcs_lport_n2n_s</span> <span class="p">{</span>
	<span class="n">u32</span>        <span class="n">rsvd</span><span class="p">;</span>
	<span class="n">__be16</span>     <span class="n">reply_oxid</span><span class="p">;</span>	<span class="cm">/*  ox_id from the req flogi to be</span>
<span class="cm">					 *used in flogi acc */</span>
	<span class="n">wwn_t</span>           <span class="n">rem_port_wwn</span><span class="p">;</span>	<span class="cm">/*  Attached port&#39;s wwn */</span>
<span class="p">};</span>


<span class="k">union</span> <span class="n">bfa_fcs_lport_topo_u</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_fab_s</span> <span class="n">pfab</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_loop_s</span> <span class="n">ploop</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_n2n_s</span> <span class="n">pn2n</span><span class="p">;</span>
<span class="p">};</span>


<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span>         <span class="n">qe</span><span class="p">;</span>	<span class="cm">/*  used by port/vport */</span>
	<span class="n">bfa_sm_t</span>               <span class="n">sm</span><span class="p">;</span>	<span class="cm">/*  state machine */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="o">*</span><span class="n">fabric</span><span class="p">;</span>	<span class="cm">/*  parent fabric */</span>
	<span class="k">struct</span> <span class="n">bfa_lport_cfg_s</span>  <span class="n">port_cfg</span><span class="p">;</span>	<span class="cm">/*  port configuration */</span>
	<span class="k">struct</span> <span class="n">bfa_timer_s</span> <span class="n">link_timer</span><span class="p">;</span>	<span class="cm">/*  timer for link offline */</span>
	<span class="n">u32</span>        <span class="n">pid</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>	<span class="cm">/*  FC address */</span>
	<span class="n">u8</span>         <span class="n">lp_tag</span><span class="p">;</span>		<span class="cm">/*  lport tag */</span>
	<span class="n">u16</span>        <span class="n">num_rports</span><span class="p">;</span>	<span class="cm">/*  Num of r-ports */</span>
	<span class="k">struct</span> <span class="n">list_head</span>         <span class="n">rport_q</span><span class="p">;</span> <span class="cm">/*  queue of discovered r-ports */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">;</span>	<span class="cm">/*  FCS instance */</span>
	<span class="k">union</span> <span class="n">bfa_fcs_lport_topo_u</span> <span class="n">port_topo</span><span class="p">;</span>	<span class="cm">/*  fabric/loop/n2n details */</span>
	<span class="k">struct</span> <span class="n">bfad_port_s</span> <span class="o">*</span><span class="n">bfad_port</span><span class="p">;</span>	<span class="cm">/*  driver peer instance */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">;</span>	<span class="cm">/*  NULL for base ports */</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_s</span> <span class="o">*</span><span class="n">fcxp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_wqe_s</span> <span class="n">fcxp_wqe</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_lport_stats_s</span> <span class="n">stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_wc_s</span>        <span class="n">wc</span><span class="p">;</span>	<span class="cm">/*  waiting counter for events */</span>
<span class="p">};</span>
<span class="cp">#define BFA_FCS_GET_HAL_FROM_PORT(port)  (port-&gt;fcs-&gt;bfa)</span>
<span class="cp">#define BFA_FCS_GET_NS_FROM_PORT(port)  (&amp;port-&gt;port_topo.pfab.ns)</span>
<span class="cp">#define BFA_FCS_GET_SCN_FROM_PORT(port)  (&amp;port-&gt;port_topo.pfab.scn)</span>
<span class="cp">#define BFA_FCS_GET_MS_FROM_PORT(port)  (&amp;port-&gt;port_topo.pfab.ms)</span>
<span class="cp">#define BFA_FCS_GET_FDMI_FROM_PORT(port)  (&amp;port-&gt;port_topo.pfab.ms.fdmi)</span>
<span class="cp">#define	BFA_FCS_VPORT_IS_INITIATOR_MODE(port) \</span>
<span class="cp">		(port-&gt;port_cfg.roles &amp; BFA_LPORT_ROLE_FCP_IM)</span>

<span class="cm">/*</span>
<span class="cm"> * forward declaration</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfad_vf_s</span><span class="p">;</span>

<span class="k">enum</span> <span class="n">bfa_fcs_fabric_type</span> <span class="p">{</span>
	<span class="n">BFA_FCS_FABRIC_UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">BFA_FCS_FABRIC_SWITCHED</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFA_FCS_FABRIC_N2N</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>


<span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span>   <span class="n">qe</span><span class="p">;</span>		<span class="cm">/*  queue element */</span>
	<span class="n">bfa_sm_t</span>	 <span class="n">sm</span><span class="p">;</span>		<span class="cm">/*  state machine */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">;</span>		<span class="cm">/*  FCS instance */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span>  <span class="n">bport</span><span class="p">;</span>	<span class="cm">/*  base logical port */</span>
	<span class="k">enum</span> <span class="n">bfa_fcs_fabric_type</span> <span class="n">fab_type</span><span class="p">;</span> <span class="cm">/*  fabric type */</span>
	<span class="k">enum</span> <span class="n">bfa_port_type</span> <span class="n">oper_type</span><span class="p">;</span>	<span class="cm">/*  current link topology */</span>
	<span class="n">u8</span>         <span class="n">is_vf</span><span class="p">;</span>		<span class="cm">/*  is virtual fabric? */</span>
	<span class="n">u8</span>         <span class="n">is_npiv</span><span class="p">;</span>	<span class="cm">/*  is NPIV supported ? */</span>
	<span class="n">u8</span>         <span class="n">is_auth</span><span class="p">;</span>	<span class="cm">/*  is Security/Auth supported ? */</span>
	<span class="n">u16</span>        <span class="n">bb_credit</span><span class="p">;</span>	<span class="cm">/*  BB credit from fabric */</span>
	<span class="n">u16</span>        <span class="n">vf_id</span><span class="p">;</span>		<span class="cm">/*  virtual fabric ID */</span>
	<span class="n">u16</span>        <span class="n">num_vports</span><span class="p">;</span>	<span class="cm">/*  num vports */</span>
	<span class="n">u16</span>        <span class="n">rsvd</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span>         <span class="n">vport_q</span><span class="p">;</span>	<span class="cm">/*  queue of virtual ports */</span>
	<span class="k">struct</span> <span class="n">list_head</span>         <span class="n">vf_q</span><span class="p">;</span>	<span class="cm">/*  queue of virtual fabrics */</span>
	<span class="k">struct</span> <span class="n">bfad_vf_s</span>      <span class="o">*</span><span class="n">vf_drv</span><span class="p">;</span>	<span class="cm">/*  driver vf structure */</span>
	<span class="k">struct</span> <span class="n">bfa_timer_s</span> <span class="n">link_timer</span><span class="p">;</span>	<span class="cm">/*  Link Failure timer. Vport */</span>
	<span class="n">wwn_t</span>           <span class="n">fabric_name</span><span class="p">;</span>	<span class="cm">/*  attached fabric name */</span>
	<span class="n">bfa_boolean_t</span>   <span class="n">auth_reqd</span><span class="p">;</span>	<span class="cm">/*  authentication required	*/</span>
	<span class="k">struct</span> <span class="n">bfa_timer_s</span> <span class="n">delay_timer</span><span class="p">;</span>	<span class="cm">/*  delay timer		*/</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="n">u16</span>        <span class="n">swp_vfid</span><span class="p">;</span><span class="cm">/*  switch port VF id		*/</span>
	<span class="p">}</span> <span class="n">event_arg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_wc_s</span>        <span class="n">wc</span><span class="p">;</span>	<span class="cm">/*  wait counter for delete	*/</span>
	<span class="k">struct</span> <span class="n">bfa_vf_stats_s</span>	<span class="n">stats</span><span class="p">;</span>	<span class="cm">/*  fabric/vf stats		*/</span>
	<span class="k">struct</span> <span class="n">bfa_lps_s</span>	<span class="o">*</span><span class="n">lps</span><span class="p">;</span>	<span class="cm">/*  lport login services	*/</span>
	<span class="n">u8</span>	<span class="n">fabric_ip_addr</span><span class="p">[</span><span class="n">BFA_FCS_FABRIC_IPADDR_SZ</span><span class="p">];</span>
					<span class="cm">/*  attached fabric&#39;s ip addr  */</span>
<span class="p">};</span>

<span class="cp">#define bfa_fcs_fabric_npiv_capable(__f)    ((__f)-&gt;is_npiv)</span>
<span class="cp">#define bfa_fcs_fabric_is_switched(__f)			\</span>
<span class="cp">	((__f)-&gt;fab_type == BFA_FCS_FABRIC_SWITCHED)</span>

<span class="cm">/*</span>
<span class="cm"> *   The design calls for a single implementation of base fabric and vf.</span>
<span class="cm"> */</span>
<span class="cp">#define bfa_fcs_vf_t struct bfa_fcs_fabric_s</span>

<span class="k">struct</span> <span class="n">bfa_vf_event_s</span> <span class="p">{</span>
	<span class="n">u32</span>        <span class="n">undefined</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_fcs_s</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * @todo : need to move to a global config file.</span>
<span class="cm"> * Maximum Rports supported per port (physical/logical).</span>
<span class="cm"> */</span>
<span class="cp">#define BFA_FCS_MAX_RPORTS_SUPP  256	</span><span class="cm">/* @todo : tentative value */</span><span class="cp"></span>

<span class="cp">#define bfa_fcs_lport_t struct bfa_fcs_lport_s</span>

<span class="cm">/*</span>
<span class="cm"> * Symbolic Name related defines</span>
<span class="cm"> *  Total bytes 255.</span>
<span class="cm"> *  Physical Port&#39;s symbolic name 128 bytes.</span>
<span class="cm"> *  For Vports, Vport&#39;s symbolic name is appended to the Physical port&#39;s</span>
<span class="cm"> *  Symbolic Name.</span>
<span class="cm"> *</span>
<span class="cm"> *  Physical Port&#39;s symbolic name Format : (Total 128 bytes)</span>
<span class="cm"> *  Adapter Model number/name : 12 bytes</span>
<span class="cm"> *  Driver Version     : 10 bytes</span>
<span class="cm"> *  Host Machine Name  : 30 bytes</span>
<span class="cm"> *  Host OS Info	   : 48 bytes</span>
<span class="cm"> *  Host OS PATCH Info : 16 bytes</span>
<span class="cm"> *  ( remaining 12 bytes reserved to be used for separator)</span>
<span class="cm"> */</span>
<span class="cp">#define BFA_FCS_PORT_SYMBNAME_SEPARATOR			&quot; | &quot;</span>

<span class="cp">#define BFA_FCS_PORT_SYMBNAME_MODEL_SZ			12</span>
<span class="cp">#define BFA_FCS_PORT_SYMBNAME_VERSION_SZ		10</span>
<span class="cp">#define BFA_FCS_PORT_SYMBNAME_MACHINENAME_SZ		30</span>
<span class="cp">#define BFA_FCS_PORT_SYMBNAME_OSINFO_SZ			48</span>
<span class="cp">#define BFA_FCS_PORT_SYMBNAME_OSPATCH_SZ		16</span>

<span class="cm">/* bb_scn value in 2^bb_scn */</span>
<span class="cp">#define BFA_FCS_PORT_DEF_BB_SCN				3</span>

<span class="cm">/*</span>
<span class="cm"> * Get FC port ID for a logical port.</span>
<span class="cm"> */</span>
<span class="cp">#define bfa_fcs_lport_get_fcid(_lport)	((_lport)-&gt;pid)</span>
<span class="cp">#define bfa_fcs_lport_get_pwwn(_lport)	((_lport)-&gt;port_cfg.pwwn)</span>
<span class="cp">#define bfa_fcs_lport_get_nwwn(_lport)	((_lport)-&gt;port_cfg.nwwn)</span>
<span class="cp">#define bfa_fcs_lport_get_psym_name(_lport)	((_lport)-&gt;port_cfg.sym_name)</span>
<span class="cp">#define bfa_fcs_lport_is_initiator(_lport)			\</span>
<span class="cp">	((_lport)-&gt;port_cfg.roles &amp; BFA_LPORT_ROLE_FCP_IM)</span>
<span class="cp">#define bfa_fcs_lport_get_nrports(_lport)	\</span>
<span class="cp">	((_lport) ? (_lport)-&gt;num_rports : 0)</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">bfad_port_s</span> <span class="o">*</span>
<span class="nf">bfa_fcs_lport_get_drvport</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">port</span><span class="o">-&gt;</span><span class="n">bfad_port</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#define bfa_fcs_lport_get_opertype(_lport)	((_lport)-&gt;fabric-&gt;oper_type)</span>
<span class="cp">#define bfa_fcs_lport_get_fabric_name(_lport)	((_lport)-&gt;fabric-&gt;fabric_name)</span>
<span class="cp">#define bfa_fcs_lport_get_fabric_ipaddr(_lport)		\</span>
<span class="cp">		((_lport)-&gt;fabric-&gt;fabric_ip_addr)</span>

<span class="cm">/*</span>
<span class="cm"> * bfa fcs port public functions</span>
<span class="cm"> */</span>

<span class="n">bfa_boolean_t</span>   <span class="n">bfa_fcs_lport_is_online</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">bfa_fcs_get_base_port</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_lport_get_rports</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span>
			      <span class="n">wwn_t</span> <span class="n">rport_wwns</span><span class="p">[],</span> <span class="kt">int</span> <span class="o">*</span><span class="n">nrports</span><span class="p">);</span>

<span class="n">wwn_t</span> <span class="n">bfa_fcs_lport_get_rport</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="n">wwn_t</span> <span class="n">wwn</span><span class="p">,</span>
			      <span class="kt">int</span> <span class="n">index</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nrports</span><span class="p">,</span> <span class="n">bfa_boolean_t</span> <span class="n">bwwn</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">bfa_fcs_lookup_port</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">,</span>
					    <span class="n">u16</span> <span class="n">vf_id</span><span class="p">,</span> <span class="n">wwn_t</span> <span class="n">lpwwn</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">bfa_fcs_lport_get_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">bfa_lport_info_s</span> <span class="o">*</span><span class="n">port_info</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_lport_get_attr</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">bfa_lport_attr_s</span> <span class="o">*</span><span class="n">port_attr</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_lport_get_stats</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">fcs_port</span><span class="p">,</span>
			     <span class="k">struct</span> <span class="n">bfa_lport_stats_s</span> <span class="o">*</span><span class="n">port_stats</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_lport_clear_stats</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">fcs_port</span><span class="p">);</span>
<span class="k">enum</span> <span class="n">bfa_port_speed</span> <span class="n">bfa_fcs_lport_get_rport_max_speed</span><span class="p">(</span>
			<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">);</span>

<span class="cm">/* MS FCS routines */</span>
<span class="kt">void</span> <span class="n">bfa_fcs_lport_ms_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_lport_ms_offline</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_lport_ms_online</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_lport_ms_fabric_rscn</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">);</span>

<span class="cm">/* FDMI FCS routines */</span>
<span class="kt">void</span> <span class="n">bfa_fcs_lport_fdmi_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_ms_s</span> <span class="o">*</span><span class="n">ms</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_lport_fdmi_offline</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_ms_s</span> <span class="o">*</span><span class="n">ms</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_lport_fdmi_online</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_ms_s</span> <span class="o">*</span><span class="n">ms</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_lport_uf_recv</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">lport</span><span class="p">,</span> <span class="k">struct</span> <span class="n">fchs_s</span> <span class="o">*</span><span class="n">fchs</span><span class="p">,</span>
				     <span class="n">u16</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_lport_attach</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">lport</span><span class="p">,</span> <span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">,</span>
			<span class="n">u16</span> <span class="n">vf_id</span><span class="p">,</span> <span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_lport_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">lport</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">bfa_lport_cfg_s</span> <span class="o">*</span><span class="n">port_cfg</span><span class="p">);</span>
<span class="kt">void</span>            <span class="n">bfa_fcs_lport_online</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">);</span>
<span class="kt">void</span>            <span class="n">bfa_fcs_lport_offline</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">);</span>
<span class="kt">void</span>            <span class="n">bfa_fcs_lport_delete</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">bfa_fcs_lport_get_rport_by_pid</span><span class="p">(</span>
		<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="n">u32</span> <span class="n">pid</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">bfa_fcs_lport_get_rport_by_pwwn</span><span class="p">(</span>
		<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="n">wwn_t</span> <span class="n">pwwn</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">bfa_fcs_lport_get_rport_by_nwwn</span><span class="p">(</span>
		<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="n">wwn_t</span> <span class="n">nwwn</span><span class="p">);</span>
<span class="kt">void</span>            <span class="n">bfa_fcs_lport_add_rport</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span>
				       <span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">);</span>
<span class="kt">void</span>            <span class="n">bfa_fcs_lport_del_rport</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span>
				       <span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">);</span>
<span class="kt">void</span>            <span class="n">bfa_fcs_lport_ns_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="kt">void</span>            <span class="n">bfa_fcs_lport_ns_offline</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="kt">void</span>            <span class="n">bfa_fcs_lport_ns_online</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="kt">void</span>            <span class="n">bfa_fcs_lport_ns_query</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">);</span>
<span class="kt">void</span>            <span class="n">bfa_fcs_lport_scn_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="kt">void</span>            <span class="n">bfa_fcs_lport_scn_offline</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="kt">void</span>            <span class="n">bfa_fcs_lport_scn_online</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="kt">void</span>            <span class="n">bfa_fcs_lport_scn_process_rscn</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span>
					      <span class="k">struct</span> <span class="n">fchs_s</span> <span class="o">*</span><span class="n">rx_frame</span><span class="p">,</span> <span class="n">u32</span> <span class="n">len</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span>		<span class="n">qe</span><span class="p">;</span>		<span class="cm">/*  queue elem	*/</span>
	<span class="n">bfa_sm_t</span>		<span class="n">sm</span><span class="p">;</span>		<span class="cm">/*  state machine	*/</span>
	<span class="n">bfa_fcs_lport_t</span>		<span class="n">lport</span><span class="p">;</span>		<span class="cm">/*  logical port	*/</span>
	<span class="k">struct</span> <span class="n">bfa_timer_s</span>	<span class="n">timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfad_vport_s</span>	<span class="o">*</span><span class="n">vport_drv</span><span class="p">;</span>	<span class="cm">/*  Driver private	*/</span>
	<span class="k">struct</span> <span class="n">bfa_vport_stats_s</span> <span class="n">vport_stats</span><span class="p">;</span>	<span class="cm">/*  vport statistics	*/</span>
	<span class="k">struct</span> <span class="n">bfa_lps_s</span>	<span class="o">*</span><span class="n">lps</span><span class="p">;</span>		<span class="cm">/*  Lport login service*/</span>
	<span class="kt">int</span>			<span class="n">fdisc_retries</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define bfa_fcs_vport_get_port(vport)			\</span>
<span class="cp">	((struct bfa_fcs_lport_s  *)(&amp;vport-&gt;port))</span>

<span class="cm">/*</span>
<span class="cm"> * bfa fcs vport public functions</span>
<span class="cm"> */</span>
<span class="n">bfa_status_t</span> <span class="n">bfa_fcs_vport_create</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">,</span> <span class="n">u16</span> <span class="n">vf_id</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">bfa_lport_cfg_s</span> <span class="o">*</span><span class="n">port_cfg</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">bfad_vport_s</span> <span class="o">*</span><span class="n">vport_drv</span><span class="p">);</span>
<span class="n">bfa_status_t</span> <span class="n">bfa_fcs_pbc_vport_create</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">,</span>
				      <span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">,</span> <span class="n">u16</span> <span class="n">vf_id</span><span class="p">,</span>
				      <span class="k">struct</span> <span class="n">bfa_lport_cfg_s</span> <span class="o">*</span><span class="n">port_cfg</span><span class="p">,</span>
				      <span class="k">struct</span> <span class="n">bfad_vport_s</span> <span class="o">*</span><span class="n">vport_drv</span><span class="p">);</span>
<span class="n">bfa_boolean_t</span> <span class="n">bfa_fcs_is_pbc_vport</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="n">bfa_status_t</span> <span class="n">bfa_fcs_vport_delete</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="n">bfa_status_t</span> <span class="n">bfa_fcs_vport_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="n">bfa_status_t</span> <span class="n">bfa_fcs_vport_stop</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_vport_get_attr</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">bfa_vport_attr_s</span> <span class="o">*</span><span class="n">vport_attr</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">bfa_fcs_vport_lookup</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">,</span>
					     <span class="n">u16</span> <span class="n">vf_id</span><span class="p">,</span> <span class="n">wwn_t</span> <span class="n">vpwwn</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_vport_cleanup</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_vport_online</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_vport_offline</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_vport_delete_comp</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_vport_fcs_delete</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_vport_stop_comp</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>

<span class="cp">#define BFA_FCS_RPORT_DEF_DEL_TIMEOUT	90	</span><span class="cm">/* in secs */</span><span class="cp"></span>
<span class="cp">#define BFA_FCS_RPORT_MAX_RETRIES	(5)</span>

<span class="cm">/*</span>
<span class="cm"> * forward declarations</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfad_rport_s</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">bfa_fcs_tin_s</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">bfa_fcs_iprp_s</span><span class="p">;</span>

<span class="cm">/* Rport Features (RPF) */</span>
<span class="k">struct</span> <span class="n">bfa_fcs_rpf_s</span> <span class="p">{</span>
	<span class="n">bfa_sm_t</span>	<span class="n">sm</span><span class="p">;</span>	<span class="cm">/*  state machine */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">;</span>	<span class="cm">/*  parent rport */</span>
	<span class="k">struct</span> <span class="n">bfa_timer_s</span>	<span class="n">timer</span><span class="p">;</span>	<span class="cm">/*  general purpose timer */</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_s</span>	<span class="o">*</span><span class="n">fcxp</span><span class="p">;</span>	<span class="cm">/*  FCXP needed for discarding */</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_wqe_s</span>	<span class="n">fcxp_wqe</span><span class="p">;</span> <span class="cm">/*  fcxp wait queue element */</span>
	<span class="kt">int</span>	<span class="n">rpsc_retries</span><span class="p">;</span>	<span class="cm">/*  max RPSC retry attempts */</span>
	<span class="k">enum</span> <span class="n">bfa_port_speed</span>	<span class="n">rpsc_speed</span><span class="p">;</span>
	<span class="cm">/*  Current Speed from RPSC. O if RPSC fails */</span>
	<span class="k">enum</span> <span class="n">bfa_port_speed</span>	<span class="n">assigned_speed</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * Speed assigned by the user.  will be used if RPSC is</span>
<span class="cm">	 * not supported by the rport.</span>
<span class="cm">	 */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">qe</span><span class="p">;</span>	<span class="cm">/*  used by port/vport */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">;</span>	<span class="cm">/*  parent FCS port */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_s</span>	<span class="o">*</span><span class="n">fcs</span><span class="p">;</span>	<span class="cm">/*  fcs instance */</span>
	<span class="k">struct</span> <span class="n">bfad_rport_s</span>	<span class="o">*</span><span class="n">rp_drv</span><span class="p">;</span>	<span class="cm">/*  driver peer instance */</span>
	<span class="n">u32</span>	<span class="n">pid</span><span class="p">;</span>	<span class="cm">/*  port ID of rport */</span>
	<span class="n">u16</span>	<span class="n">maxfrsize</span><span class="p">;</span>	<span class="cm">/*  maximum frame size */</span>
	<span class="n">__be16</span>	<span class="n">reply_oxid</span><span class="p">;</span>	<span class="cm">/*  OX_ID of inbound requests */</span>
	<span class="k">enum</span> <span class="n">fc_cos</span>	<span class="n">fc_cos</span><span class="p">;</span>	<span class="cm">/*  FC classes of service supp */</span>
	<span class="n">bfa_boolean_t</span>	<span class="n">cisc</span><span class="p">;</span>	<span class="cm">/*  CISC capable device */</span>
	<span class="n">bfa_boolean_t</span>	<span class="n">prlo</span><span class="p">;</span>	<span class="cm">/*  processing prlo or LOGO */</span>
	<span class="n">bfa_boolean_t</span>	<span class="n">plogi_pending</span><span class="p">;</span>	<span class="cm">/* Rx Plogi Pending */</span>
	<span class="n">wwn_t</span>	<span class="n">pwwn</span><span class="p">;</span>	<span class="cm">/*  port wwn of rport */</span>
	<span class="n">wwn_t</span>	<span class="n">nwwn</span><span class="p">;</span>	<span class="cm">/*  node wwn of rport */</span>
	<span class="k">struct</span> <span class="n">bfa_rport_symname_s</span> <span class="n">psym_name</span><span class="p">;</span> <span class="cm">/*  port symbolic name  */</span>
	<span class="n">bfa_sm_t</span>	<span class="n">sm</span><span class="p">;</span>		<span class="cm">/*  state machine */</span>
	<span class="k">struct</span> <span class="n">bfa_timer_s</span> <span class="n">timer</span><span class="p">;</span>	<span class="cm">/*  general purpose timer */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">;</span>	<span class="cm">/*  ITN initiator mode role */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_tin_s</span> <span class="o">*</span><span class="n">tin</span><span class="p">;</span>	<span class="cm">/*  ITN initiator mode role */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_iprp_s</span> <span class="o">*</span><span class="n">iprp</span><span class="p">;</span>	<span class="cm">/*  IP/FC role */</span>
	<span class="k">struct</span> <span class="n">bfa_rport_s</span> <span class="o">*</span><span class="n">bfa_rport</span><span class="p">;</span>	<span class="cm">/*  BFA Rport */</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_s</span> <span class="o">*</span><span class="n">fcxp</span><span class="p">;</span>	<span class="cm">/*  FCXP needed for discarding */</span>
	<span class="kt">int</span>	<span class="n">plogi_retries</span><span class="p">;</span>	<span class="cm">/*  max plogi retry attempts */</span>
	<span class="kt">int</span>	<span class="n">ns_retries</span><span class="p">;</span>	<span class="cm">/*  max NS query retry attempts */</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_wqe_s</span>	<span class="n">fcxp_wqe</span><span class="p">;</span> <span class="cm">/*  fcxp wait queue element */</span>
	<span class="k">struct</span> <span class="n">bfa_rport_stats_s</span> <span class="n">stats</span><span class="p">;</span>	<span class="cm">/*  rport stats */</span>
	<span class="k">enum</span> <span class="n">bfa_rport_function</span>	<span class="n">scsi_function</span><span class="p">;</span>  <span class="cm">/*  Initiator/Target */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_rpf_s</span> <span class="n">rpf</span><span class="p">;</span>	<span class="cm">/* Rport features module */</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">bfa_rport_s</span> <span class="o">*</span>
<span class="nf">bfa_fcs_rport_get_halrport</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">rport</span><span class="o">-&gt;</span><span class="n">bfa_rport</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * bfa fcs rport API functions</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">bfa_fcs_rport_get_attr</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">bfa_rport_attr_s</span> <span class="o">*</span><span class="n">attr</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">bfa_fcs_rport_lookup</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span>
					     <span class="n">wwn_t</span> <span class="n">rpwwn</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">bfa_fcs_rport_lookup_by_nwwn</span><span class="p">(</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="n">wwn_t</span> <span class="n">rnwwn</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_rport_set_del_timeout</span><span class="p">(</span><span class="n">u8</span> <span class="n">rport_tmo</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">bfa_fcs_rport_uf_recv</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">,</span>
	 <span class="k">struct</span> <span class="n">fchs_s</span> <span class="o">*</span><span class="n">fchs</span><span class="p">,</span> <span class="n">u16</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_rport_scn</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">bfa_fcs_rport_create</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span>
	 <span class="n">u32</span> <span class="n">pid</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_rport_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="k">struct</span> <span class="n">fchs_s</span> <span class="o">*</span><span class="n">rx_fchs</span><span class="p">,</span>
			 <span class="k">struct</span> <span class="n">fc_logi_s</span> <span class="o">*</span><span class="n">plogi_rsp</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_rport_plogi_create</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">fchs_s</span> <span class="o">*</span><span class="n">rx_fchs</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">fc_logi_s</span> <span class="o">*</span><span class="n">plogi</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_rport_plogi</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">,</span> <span class="k">struct</span> <span class="n">fchs_s</span> <span class="o">*</span><span class="n">fchs</span><span class="p">,</span>
			 <span class="k">struct</span> <span class="n">fc_logi_s</span> <span class="o">*</span><span class="n">plogi</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_rport_prlo</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">,</span> <span class="n">__be16</span> <span class="n">ox_id</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">bfa_fcs_rport_itntm_ack</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_rport_fcptm_offline_done</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">bfa_fcs_rport_get_state</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">bfa_fcs_rport_create_by_wwn</span><span class="p">(</span>
			<span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="n">wwn_t</span> <span class="n">wwn</span><span class="p">);</span>
<span class="kt">void</span>  <span class="n">bfa_fcs_rpf_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">);</span>
<span class="kt">void</span>  <span class="n">bfa_fcs_rpf_rport_online</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">);</span>
<span class="kt">void</span>  <span class="n">bfa_fcs_rpf_rport_offline</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * forward declarations</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfad_itnim_s</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="p">{</span>
	<span class="n">bfa_sm_t</span>		<span class="n">sm</span><span class="p">;</span>		<span class="cm">/*  state machine */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span>	<span class="o">*</span><span class="n">rport</span><span class="p">;</span>		<span class="cm">/*  parent remote rport  */</span>
	<span class="k">struct</span> <span class="n">bfad_itnim_s</span>	<span class="o">*</span><span class="n">itnim_drv</span><span class="p">;</span>	<span class="cm">/*  driver peer instance */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_s</span>	<span class="o">*</span><span class="n">fcs</span><span class="p">;</span>		<span class="cm">/*  fcs instance	*/</span>
	<span class="k">struct</span> <span class="n">bfa_timer_s</span>	<span class="n">timer</span><span class="p">;</span>		<span class="cm">/*  timer functions	*/</span>
	<span class="k">struct</span> <span class="n">bfa_itnim_s</span>	<span class="o">*</span><span class="n">bfa_itnim</span><span class="p">;</span>	<span class="cm">/*  BFA itnim struct	*/</span>
	<span class="n">u32</span>		<span class="n">prli_retries</span><span class="p">;</span>	<span class="cm">/*  max prli retry attempts */</span>
	<span class="n">bfa_boolean_t</span>		<span class="n">seq_rec</span><span class="p">;</span>	<span class="cm">/*  seq recovery support */</span>
	<span class="n">bfa_boolean_t</span>		<span class="n">rec_support</span><span class="p">;</span>	<span class="cm">/*  REC supported	*/</span>
	<span class="n">bfa_boolean_t</span>		<span class="n">conf_comp</span><span class="p">;</span>	<span class="cm">/*  FCP_CONF	support */</span>
	<span class="n">bfa_boolean_t</span>		<span class="n">task_retry_id</span><span class="p">;</span>	<span class="cm">/*  task retry id supp	*/</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_wqe_s</span>	<span class="n">fcxp_wqe</span><span class="p">;</span>	<span class="cm">/*  wait qelem for fcxp  */</span>
	<span class="k">struct</span> <span class="n">bfa_fcxp_s</span>	<span class="o">*</span><span class="n">fcxp</span><span class="p">;</span>		<span class="cm">/*  FCXP in use	*/</span>
	<span class="k">struct</span> <span class="n">bfa_itnim_stats_s</span>	<span class="n">stats</span><span class="p">;</span>	<span class="cm">/*  itn statistics	*/</span>
<span class="p">};</span>
<span class="cp">#define bfa_fcs_fcxp_alloc(__fcs)	\</span>
<span class="cp">	bfa_fcxp_alloc(NULL, (__fcs)-&gt;bfa, 0, 0, NULL, NULL, NULL, NULL)</span>

<span class="cp">#define bfa_fcs_fcxp_alloc_wait(__bfa, __wqe, __alloc_cbfn, __alloc_cbarg) \</span>
<span class="cp">	bfa_fcxp_alloc_wait(__bfa, __wqe, __alloc_cbfn, __alloc_cbarg, \</span>
<span class="cp">					NULL, 0, 0, NULL, NULL, NULL, NULL)</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">bfad_port_s</span> <span class="o">*</span>
<span class="nf">bfa_fcs_itnim_get_drvport</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">itnim</span><span class="o">-&gt;</span><span class="n">rport</span><span class="o">-&gt;</span><span class="n">port</span><span class="o">-&gt;</span><span class="n">bfad_port</span><span class="p">;</span>
<span class="p">}</span>


<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span>
<span class="nf">bfa_fcs_itnim_get_port</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">itnim</span><span class="o">-&gt;</span><span class="n">rport</span><span class="o">-&gt;</span><span class="n">port</span><span class="p">;</span>
<span class="p">}</span>


<span class="k">static</span> <span class="kr">inline</span> <span class="n">wwn_t</span>
<span class="nf">bfa_fcs_itnim_get_nwwn</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">itnim</span><span class="o">-&gt;</span><span class="n">rport</span><span class="o">-&gt;</span><span class="n">nwwn</span><span class="p">;</span>
<span class="p">}</span>


<span class="k">static</span> <span class="kr">inline</span> <span class="n">wwn_t</span>
<span class="nf">bfa_fcs_itnim_get_pwwn</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">itnim</span><span class="o">-&gt;</span><span class="n">rport</span><span class="o">-&gt;</span><span class="n">pwwn</span><span class="p">;</span>
<span class="p">}</span>


<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span>
<span class="nf">bfa_fcs_itnim_get_fcid</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">itnim</span><span class="o">-&gt;</span><span class="n">rport</span><span class="o">-&gt;</span><span class="n">pid</span><span class="p">;</span>
<span class="p">}</span>


<span class="k">static</span> <span class="kr">inline</span>	<span class="n">u32</span>
<span class="nf">bfa_fcs_itnim_get_maxfrsize</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">itnim</span><span class="o">-&gt;</span><span class="n">rport</span><span class="o">-&gt;</span><span class="n">maxfrsize</span><span class="p">;</span>
<span class="p">}</span>


<span class="k">static</span> <span class="kr">inline</span>	<span class="k">enum</span> <span class="n">fc_cos</span>
<span class="nf">bfa_fcs_itnim_get_cos</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">itnim</span><span class="o">-&gt;</span><span class="n">rport</span><span class="o">-&gt;</span><span class="n">fc_cos</span><span class="p">;</span>
<span class="p">}</span>


<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">bfad_itnim_s</span> <span class="o">*</span>
<span class="nf">bfa_fcs_itnim_get_drvitn</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">itnim</span><span class="o">-&gt;</span><span class="n">itnim_drv</span><span class="p">;</span>
<span class="p">}</span>


<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">bfa_itnim_s</span> <span class="o">*</span>
<span class="nf">bfa_fcs_itnim_get_halitn</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">itnim</span><span class="o">-&gt;</span><span class="n">bfa_itnim</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * bfa fcs FCP Initiator mode API functions</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">bfa_fcs_itnim_get_attr</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">bfa_itnim_attr_s</span> <span class="o">*</span><span class="n">attr</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_itnim_get_stats</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">,</span>
			     <span class="k">struct</span> <span class="n">bfa_itnim_stats_s</span> <span class="o">*</span><span class="n">stats</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">bfa_fcs_itnim_lookup</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span>
					     <span class="n">wwn_t</span> <span class="n">rpwwn</span><span class="p">);</span>
<span class="n">bfa_status_t</span> <span class="n">bfa_fcs_itnim_attr_get</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="n">wwn_t</span> <span class="n">rpwwn</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">bfa_itnim_attr_s</span> <span class="o">*</span><span class="n">attr</span><span class="p">);</span>
<span class="n">bfa_status_t</span> <span class="n">bfa_fcs_itnim_stats_get</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="n">wwn_t</span> <span class="n">rpwwn</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">bfa_itnim_stats_s</span> <span class="o">*</span><span class="n">stats</span><span class="p">);</span>
<span class="n">bfa_status_t</span> <span class="n">bfa_fcs_itnim_stats_clear</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span>
				       <span class="n">wwn_t</span> <span class="n">rpwwn</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">bfa_fcs_itnim_create</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">*</span><span class="n">rport</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_itnim_delete</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_itnim_rport_offline</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_itnim_rport_online</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">);</span>
<span class="n">bfa_status_t</span> <span class="n">bfa_fcs_itnim_get_online_state</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_itnim_is_initiator</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_fcpim_uf_recv</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">*</span><span class="n">itnim</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">fchs_s</span> <span class="o">*</span><span class="n">fchs</span><span class="p">,</span> <span class="n">u16</span> <span class="n">len</span><span class="p">);</span>

<span class="cp">#define BFA_FCS_FDMI_SUPP_SPEEDS_4G	(FDMI_TRANS_SPEED_1G  |	\</span>
<span class="cp">				FDMI_TRANS_SPEED_2G |		\</span>
<span class="cp">				FDMI_TRANS_SPEED_4G)</span>

<span class="cp">#define BFA_FCS_FDMI_SUPP_SPEEDS_8G	(FDMI_TRANS_SPEED_1G  |	\</span>
<span class="cp">				FDMI_TRANS_SPEED_2G |		\</span>
<span class="cp">				FDMI_TRANS_SPEED_4G |		\</span>
<span class="cp">				FDMI_TRANS_SPEED_8G)</span>

<span class="cp">#define BFA_FCS_FDMI_SUPP_SPEEDS_16G	(FDMI_TRANS_SPEED_2G  |	\</span>
<span class="cp">				FDMI_TRANS_SPEED_4G |		\</span>
<span class="cp">				FDMI_TRANS_SPEED_8G |		\</span>
<span class="cp">				FDMI_TRANS_SPEED_16G)</span>

<span class="cp">#define BFA_FCS_FDMI_SUPP_SPEEDS_10G	FDMI_TRANS_SPEED_10G</span>

<span class="cm">/*</span>
<span class="cm"> * HBA Attribute Block : BFA internal representation. Note : Some variable</span>
<span class="cm"> * sizes have been trimmed to suit BFA For Ex : Model will be &quot;Brocade&quot;. Based</span>
<span class="cm"> * on this the size has been reduced to 16 bytes from the standard&#39;s 64 bytes.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fcs_fdmi_hba_attr_s</span> <span class="p">{</span>
	<span class="n">wwn_t</span>           <span class="n">node_name</span><span class="p">;</span>
	<span class="n">u8</span>         <span class="n">manufacturer</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
	<span class="n">u8</span>         <span class="n">serial_num</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
	<span class="n">u8</span>         <span class="n">model</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">u8</span>         <span class="n">model_desc</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
	<span class="n">u8</span>         <span class="n">hw_version</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u8</span>         <span class="n">driver_version</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u8</span>         <span class="n">option_rom_ver</span><span class="p">[</span><span class="n">BFA_VERSION_LEN</span><span class="p">];</span>
	<span class="n">u8</span>         <span class="n">fw_version</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u8</span>         <span class="n">os_name</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
	<span class="n">__be32</span>        <span class="n">max_ct_pyld</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Port Attribute Block</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fcs_fdmi_port_attr_s</span> <span class="p">{</span>
	<span class="n">u8</span>         <span class="n">supp_fc4_types</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>	<span class="cm">/* supported FC4 types */</span>
	<span class="n">__be32</span>        <span class="n">supp_speed</span><span class="p">;</span>	<span class="cm">/* supported speed */</span>
	<span class="n">__be32</span>        <span class="n">curr_speed</span><span class="p">;</span>	<span class="cm">/* current Speed */</span>
	<span class="n">__be32</span>        <span class="n">max_frm_size</span><span class="p">;</span>	<span class="cm">/* max frame size */</span>
	<span class="n">u8</span>         <span class="n">os_device_name</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>	<span class="cm">/* OS device Name */</span>
	<span class="n">u8</span>         <span class="n">host_name</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>	<span class="cm">/* host name */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_fcs_stats_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u32</span>	<span class="n">untagged</span><span class="p">;</span> <span class="cm">/*  untagged receive frames */</span>
		<span class="n">u32</span>	<span class="n">tagged</span><span class="p">;</span>	<span class="cm">/*  tagged receive frames */</span>
		<span class="n">u32</span>	<span class="n">vfid_unknown</span><span class="p">;</span>	<span class="cm">/*  VF id is unknown */</span>
	<span class="p">}</span> <span class="n">uf</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_fcs_driver_info_s</span> <span class="p">{</span>
	<span class="n">u8</span>	 <span class="n">version</span><span class="p">[</span><span class="n">BFA_VERSION_LEN</span><span class="p">];</span>		<span class="cm">/* Driver Version */</span>
	<span class="n">u8</span>	 <span class="n">host_machine_name</span><span class="p">[</span><span class="n">BFA_FCS_OS_STR_LEN</span><span class="p">];</span>
	<span class="n">u8</span>	 <span class="n">host_os_name</span><span class="p">[</span><span class="n">BFA_FCS_OS_STR_LEN</span><span class="p">];</span> <span class="cm">/* OS name and version */</span>
	<span class="n">u8</span>	 <span class="n">host_os_patch</span><span class="p">[</span><span class="n">BFA_FCS_OS_STR_LEN</span><span class="p">];</span> <span class="cm">/* patch or service pack */</span>
	<span class="n">u8</span>	 <span class="n">os_device_name</span><span class="p">[</span><span class="n">BFA_FCS_OS_STR_LEN</span><span class="p">];</span> <span class="cm">/* Driver Device Name */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_s</span>	  <span class="o">*</span><span class="n">bfa</span><span class="p">;</span>	<span class="cm">/*  corresponding BFA bfa instance */</span>
	<span class="k">struct</span> <span class="n">bfad_s</span>	      <span class="o">*</span><span class="n">bfad</span><span class="p">;</span> <span class="cm">/*  corresponding BDA driver instance */</span>
	<span class="k">struct</span> <span class="n">bfa_trc_mod_s</span>  <span class="o">*</span><span class="n">trcmod</span><span class="p">;</span>	<span class="cm">/*  tracing module */</span>
	<span class="n">bfa_boolean_t</span>	<span class="n">vf_enabled</span><span class="p">;</span>	<span class="cm">/*  VF mode is enabled */</span>
	<span class="n">bfa_boolean_t</span>	<span class="n">fdmi_enabled</span><span class="p">;</span>	<span class="cm">/*  FDMI is enabled */</span>
	<span class="n">bfa_boolean_t</span>	<span class="n">bbscn_enabled</span><span class="p">;</span>	<span class="cm">/*  Driver Config Parameter */</span>
	<span class="n">bfa_boolean_t</span>	<span class="n">bbscn_flogi_rjt</span><span class="p">;</span><span class="cm">/*  FLOGI reject due to BB_SCN */</span>
	<span class="n">bfa_boolean_t</span> <span class="n">min_cfg</span><span class="p">;</span>		<span class="cm">/* min cfg enabled/disabled */</span>
	<span class="n">u16</span>	<span class="n">port_vfid</span><span class="p">;</span>	<span class="cm">/*  port default VF ID */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_driver_info_s</span> <span class="n">driver_info</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="n">fabric</span><span class="p">;</span> <span class="cm">/*  base fabric state machine */</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_stats_s</span>	<span class="n">stats</span><span class="p">;</span>	<span class="cm">/*  FCS statistics */</span>
	<span class="k">struct</span> <span class="n">bfa_wc_s</span>		<span class="n">wc</span><span class="p">;</span>	<span class="cm">/*  waiting counter */</span>
	<span class="kt">int</span>			<span class="n">fcs_aen_seq</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  fcs_fabric_sm fabric state machine functions</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * Fabric state machine events</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_fcs_fabric_event</span> <span class="p">{</span>
	<span class="n">BFA_FCS_FABRIC_SM_CREATE</span>        <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>    <span class="cm">/*  create from driver        */</span>
	<span class="n">BFA_FCS_FABRIC_SM_DELETE</span>        <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>    <span class="cm">/*  delete from driver        */</span>
	<span class="n">BFA_FCS_FABRIC_SM_LINK_DOWN</span>     <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>    <span class="cm">/*  link down from port      */</span>
	<span class="n">BFA_FCS_FABRIC_SM_LINK_UP</span>       <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>    <span class="cm">/*  link up from port         */</span>
	<span class="n">BFA_FCS_FABRIC_SM_CONT_OP</span>       <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>    <span class="cm">/*  flogi/auth continue op   */</span>
	<span class="n">BFA_FCS_FABRIC_SM_RETRY_OP</span>      <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>    <span class="cm">/*  flogi/auth retry op      */</span>
	<span class="n">BFA_FCS_FABRIC_SM_NO_FABRIC</span>     <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>    <span class="cm">/*  from flogi/auth           */</span>
	<span class="n">BFA_FCS_FABRIC_SM_PERF_EVFP</span>     <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>    <span class="cm">/*  from flogi/auth           */</span>
	<span class="n">BFA_FCS_FABRIC_SM_ISOLATE</span>       <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>    <span class="cm">/*  from EVFP processing     */</span>
	<span class="n">BFA_FCS_FABRIC_SM_NO_TAGGING</span>    <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>   <span class="cm">/*  no VFT tagging from EVFP */</span>
	<span class="n">BFA_FCS_FABRIC_SM_DELAYED</span>       <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>   <span class="cm">/*  timeout delay event      */</span>
	<span class="n">BFA_FCS_FABRIC_SM_AUTH_FAILED</span>   <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>   <span class="cm">/*  auth failed       */</span>
	<span class="n">BFA_FCS_FABRIC_SM_AUTH_SUCCESS</span>  <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>   <span class="cm">/*  auth successful           */</span>
	<span class="n">BFA_FCS_FABRIC_SM_DELCOMP</span>       <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>   <span class="cm">/*  all vports deleted event */</span>
	<span class="n">BFA_FCS_FABRIC_SM_LOOPBACK</span>      <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>   <span class="cm">/*  Received our own FLOGI   */</span>
	<span class="n">BFA_FCS_FABRIC_SM_START</span>         <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>   <span class="cm">/*  from driver       */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  fcs_rport_sm FCS rport state machine events</span>
<span class="cm"> */</span>

<span class="k">enum</span> <span class="n">rport_event</span> <span class="p">{</span>
	<span class="n">RPSM_EVENT_PLOGI_SEND</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>    <span class="cm">/*  new rport; start with PLOGI */</span>
	<span class="n">RPSM_EVENT_PLOGI_RCVD</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>    <span class="cm">/*  Inbound PLOGI from remote port */</span>
	<span class="n">RPSM_EVENT_PLOGI_COMP</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>    <span class="cm">/*  PLOGI completed to rport    */</span>
	<span class="n">RPSM_EVENT_LOGO_RCVD</span>    <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>    <span class="cm">/*  LOGO from remote device     */</span>
	<span class="n">RPSM_EVENT_LOGO_IMP</span>     <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>    <span class="cm">/*  implicit logo for SLER      */</span>
	<span class="n">RPSM_EVENT_FCXP_SENT</span>    <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>    <span class="cm">/*  Frame from has been sent    */</span>
	<span class="n">RPSM_EVENT_DELETE</span>       <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>    <span class="cm">/*  RPORT delete request        */</span>
	<span class="n">RPSM_EVENT_SCN</span>          <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>    <span class="cm">/*  state change notification   */</span>
	<span class="n">RPSM_EVENT_ACCEPTED</span>     <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>    <span class="cm">/*  Good response from remote device */</span>
	<span class="n">RPSM_EVENT_FAILED</span>       <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>   <span class="cm">/*  Request to rport failed.    */</span>
	<span class="n">RPSM_EVENT_TIMEOUT</span>      <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>   <span class="cm">/*  Rport SM timeout event      */</span>
	<span class="n">RPSM_EVENT_HCB_ONLINE</span>  <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>    <span class="cm">/*  BFA rport online callback   */</span>
	<span class="n">RPSM_EVENT_HCB_OFFLINE</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>    <span class="cm">/*  BFA rport offline callback  */</span>
	<span class="n">RPSM_EVENT_FC4_OFFLINE</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>    <span class="cm">/*  FC-4 offline complete       */</span>
	<span class="n">RPSM_EVENT_ADDRESS_CHANGE</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span> <span class="cm">/*  Rport&#39;s PID has changed     */</span>
	<span class="n">RPSM_EVENT_ADDRESS_DISC</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>   <span class="cm">/*  Need to Discover rport&#39;s PID */</span>
	<span class="n">RPSM_EVENT_PRLO_RCVD</span>   <span class="o">=</span> <span class="mi">17</span><span class="p">,</span>    <span class="cm">/*  PRLO from remote device     */</span>
	<span class="n">RPSM_EVENT_PLOGI_RETRY</span> <span class="o">=</span> <span class="mi">18</span><span class="p">,</span>    <span class="cm">/*  Retry PLOGI continuously */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * bfa fcs API functions</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">bfa_fcs_attach</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">,</span> <span class="k">struct</span> <span class="n">bfa_s</span> <span class="o">*</span><span class="n">bfa</span><span class="p">,</span>
		    <span class="k">struct</span> <span class="n">bfad_s</span> <span class="o">*</span><span class="n">bfad</span><span class="p">,</span>
		    <span class="n">bfa_boolean_t</span> <span class="n">min_cfg</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_pbc_vport_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_update_cfg</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_driver_info_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">bfa_fcs_driver_info_s</span> <span class="o">*</span><span class="n">driver_info</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_exit</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * bfa fcs vf public functions</span>
<span class="cm"> */</span>
<span class="n">bfa_fcs_vf_t</span> <span class="o">*</span><span class="n">bfa_fcs_vf_lookup</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">,</span> <span class="n">u16</span> <span class="n">vf_id</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_vf_get_ports</span><span class="p">(</span><span class="n">bfa_fcs_vf_t</span> <span class="o">*</span><span class="n">vf</span><span class="p">,</span> <span class="n">wwn_t</span> <span class="n">vpwwn</span><span class="p">[],</span> <span class="kt">int</span> <span class="o">*</span><span class="n">nports</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * fabric protected interface functions</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">bfa_fcs_fabric_attach</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_fabric_modinit</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_fabric_modexit</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_fabric_link_up</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="o">*</span><span class="n">fabric</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_fabric_link_down</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="o">*</span><span class="n">fabric</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_fabric_addvport</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="o">*</span><span class="n">fabric</span><span class="p">,</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_fabric_delvport</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="o">*</span><span class="n">fabric</span><span class="p">,</span>
	<span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">vport</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">bfa_fcs_vport_s</span> <span class="o">*</span><span class="n">bfa_fcs_fabric_vport_lookup</span><span class="p">(</span>
		<span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="o">*</span><span class="n">fabric</span><span class="p">,</span> <span class="n">wwn_t</span> <span class="n">pwwn</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_fabric_modstart</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_fabric_uf_recv</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="o">*</span><span class="n">fabric</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">fchs_s</span> <span class="o">*</span><span class="n">fchs</span><span class="p">,</span> <span class="n">u16</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">void</span>	<span class="n">bfa_fcs_fabric_psymb_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="o">*</span><span class="n">fabric</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_fabric_set_fabric_name</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="o">*</span><span class="n">fabric</span><span class="p">,</span>
	       <span class="n">wwn_t</span> <span class="n">fabric_name</span><span class="p">);</span>
<span class="n">u16</span> <span class="n">bfa_fcs_fabric_get_switch_oui</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="o">*</span><span class="n">fabric</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_uf_attach</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_port_attach</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_s</span> <span class="o">*</span><span class="n">fcs</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_fabric_sm_online</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="o">*</span><span class="n">fabric</span><span class="p">,</span>
			<span class="k">enum</span> <span class="n">bfa_fcs_fabric_event</span> <span class="n">event</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_fabric_sm_loopback</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="o">*</span><span class="n">fabric</span><span class="p">,</span>
			<span class="k">enum</span> <span class="n">bfa_fcs_fabric_event</span> <span class="n">event</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcs_fabric_sm_auth_failed</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfa_fcs_fabric_s</span> <span class="o">*</span><span class="n">fabric</span><span class="p">,</span>
			<span class="k">enum</span> <span class="n">bfa_fcs_fabric_event</span> <span class="n">event</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * BFA FCS callback interfaces</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * fcb Main fcs callbacks</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">bfad_port_s</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">bfad_vf_s</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">bfad_vport_s</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">bfad_rport_s</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * lport callbacks</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfad_port_s</span> <span class="o">*</span><span class="n">bfa_fcb_lport_new</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfad_s</span> <span class="o">*</span><span class="n">bfad</span><span class="p">,</span>
				      <span class="k">struct</span> <span class="n">bfa_fcs_lport_s</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span>
				      <span class="k">enum</span> <span class="n">bfa_lport_role</span> <span class="n">roles</span><span class="p">,</span>
				      <span class="k">struct</span> <span class="n">bfad_vf_s</span> <span class="o">*</span><span class="n">vf_drv</span><span class="p">,</span>
				      <span class="k">struct</span> <span class="n">bfad_vport_s</span> <span class="o">*</span><span class="n">vp_drv</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * vport callbacks</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">bfa_fcb_pbc_vport_create</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfad_s</span> <span class="o">*</span><span class="n">bfad</span><span class="p">,</span> <span class="k">struct</span> <span class="n">bfi_pbc_vport_s</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * rport callbacks</span>
<span class="cm"> */</span>
<span class="n">bfa_status_t</span> <span class="n">bfa_fcb_rport_alloc</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfad_s</span> <span class="o">*</span><span class="n">bfad</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">bfa_fcs_rport_s</span> <span class="o">**</span><span class="n">rport</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">bfad_rport_s</span> <span class="o">**</span><span class="n">rport_drv</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * itnim callbacks</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">bfa_fcb_itnim_alloc</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfad_s</span> <span class="o">*</span><span class="n">bfad</span><span class="p">,</span> <span class="k">struct</span> <span class="n">bfa_fcs_itnim_s</span> <span class="o">**</span><span class="n">itnim</span><span class="p">,</span>
			 <span class="k">struct</span> <span class="n">bfad_itnim_s</span> <span class="o">**</span><span class="n">itnim_drv</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcb_itnim_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfad_s</span> <span class="o">*</span><span class="n">bfad</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">bfad_itnim_s</span> <span class="o">*</span><span class="n">itnim_drv</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcb_itnim_online</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfad_itnim_s</span> <span class="o">*</span><span class="n">itnim_drv</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">bfa_fcb_itnim_offline</span><span class="p">(</span><span class="k">struct</span> <span class="n">bfad_itnim_s</span> <span class="o">*</span><span class="n">itnim_drv</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __BFA_FCS_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
