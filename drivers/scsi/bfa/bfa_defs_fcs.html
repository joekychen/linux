<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › scsi › bfa › bfa_defs_fcs.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>bfa_defs_fcs.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2005-2010 Brocade Communications Systems, Inc.</span>
<span class="cm"> * All rights reserved</span>
<span class="cm"> * www.brocade.com</span>
<span class="cm"> *</span>
<span class="cm"> * Linux driver for Brocade Fibre Channel Host Bus Adapter.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify it</span>
<span class="cm"> * under the terms of the GNU General Public License (GPL) Version 2 as</span>
<span class="cm"> * published by the Free Software Foundation</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful, but</span>
<span class="cm"> * WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="cm"> * General Public License for more details.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __BFA_DEFS_FCS_H__</span>
<span class="cp">#define __BFA_DEFS_FCS_H__</span>

<span class="cp">#include &quot;bfa_fc.h&quot;</span>
<span class="cp">#include &quot;bfa_defs_svc.h&quot;</span>

<span class="cm">/*</span>
<span class="cm"> * VF states</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_vf_state</span> <span class="p">{</span>
	<span class="n">BFA_VF_UNINIT</span>    <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/*  fabric is not yet initialized */</span>
	<span class="n">BFA_VF_LINK_DOWN</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/*  link is down */</span>
	<span class="n">BFA_VF_FLOGI</span>     <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/*  flogi is in progress */</span>
	<span class="n">BFA_VF_AUTH</span>      <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/*  authentication in progress */</span>
	<span class="n">BFA_VF_NOFABRIC</span>  <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>	<span class="cm">/*  fabric is not present */</span>
	<span class="n">BFA_VF_ONLINE</span>    <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>	<span class="cm">/*  login to fabric is complete */</span>
	<span class="n">BFA_VF_EVFP</span>      <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>	<span class="cm">/*  EVFP is in progress */</span>
	<span class="n">BFA_VF_ISOLATED</span>  <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>	<span class="cm">/*  port isolated due to vf_id mismatch */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * VF statistics</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_vf_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">flogi_sent</span><span class="p">;</span>	<span class="cm">/*  Num FLOGIs sent */</span>
	<span class="n">u32</span>	<span class="n">flogi_rsp_err</span><span class="p">;</span>	<span class="cm">/*  FLOGI response errors */</span>
	<span class="n">u32</span>	<span class="n">flogi_acc_err</span><span class="p">;</span>	<span class="cm">/*  FLOGI accept errors */</span>
	<span class="n">u32</span>	<span class="n">flogi_accepts</span><span class="p">;</span>	<span class="cm">/*  FLOGI accepts received */</span>
	<span class="n">u32</span>	<span class="n">flogi_rejects</span><span class="p">;</span>	<span class="cm">/*  FLOGI rejects received */</span>
	<span class="n">u32</span>	<span class="n">flogi_unknown_rsp</span><span class="p">;</span> <span class="cm">/*  Unknown responses for FLOGI */</span>
	<span class="n">u32</span>	<span class="n">flogi_alloc_wait</span><span class="p">;</span> <span class="cm">/*  Allocation waits prior to sending FLOGI */</span>
	<span class="n">u32</span>	<span class="n">flogi_rcvd</span><span class="p">;</span>	<span class="cm">/*  FLOGIs received */</span>
	<span class="n">u32</span>	<span class="n">flogi_rejected</span><span class="p">;</span>	<span class="cm">/*  Incoming FLOGIs rejected */</span>
	<span class="n">u32</span>	<span class="n">fabric_onlines</span><span class="p">;</span>	<span class="cm">/*  Internal fabric online notification sent</span>
<span class="cm">				 *  to other modules */</span>
	<span class="n">u32</span>	<span class="n">fabric_offlines</span><span class="p">;</span> <span class="cm">/* Internal fabric offline notification sent</span>
<span class="cm">				  * to other modules */</span>
	<span class="n">u32</span>	<span class="n">resvd</span><span class="p">;</span> <span class="cm">/*  padding for 64 bit alignment */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * VF attributes returned in queries</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_vf_attr_s</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">bfa_vf_state</span>  <span class="n">state</span><span class="p">;</span>		<span class="cm">/*  VF state */</span>
	<span class="n">u32</span>        <span class="n">rsvd</span><span class="p">;</span>
	<span class="n">wwn_t</span>           <span class="n">fabric_name</span><span class="p">;</span>	<span class="cm">/*  fabric name */</span>
<span class="p">};</span>

<span class="cp">#define BFA_FCS_MAX_LPORTS 256</span>
<span class="cp">#define BFA_FCS_FABRIC_IPADDR_SZ  16</span>

<span class="cm">/*</span>
<span class="cm"> * symbolic names for base port/virtual port</span>
<span class="cm"> */</span>
<span class="cp">#define BFA_SYMNAME_MAXLEN	128	</span><span class="cm">/* 128 bytes */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">bfa_lport_symname_s</span> <span class="p">{</span>
	<span class="kt">char</span>	    <span class="n">symname</span><span class="p">[</span><span class="n">BFA_SYMNAME_MAXLEN</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm">* Roles of FCS port:</span>
<span class="cm"> *     - FCP IM and FCP TM roles cannot be enabled together for a FCS port</span>
<span class="cm"> *     - Create multiple ports if both IM and TM functions required.</span>
<span class="cm"> *     - Atleast one role must be specified.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_lport_role</span> <span class="p">{</span>
	<span class="n">BFA_LPORT_ROLE_FCP_IM</span>	<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>	<span class="cm">/*  FCP initiator role */</span>
	<span class="n">BFA_LPORT_ROLE_FCP_MAX</span>	<span class="o">=</span> <span class="n">BFA_LPORT_ROLE_FCP_IM</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * FCS port configuration.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_lport_cfg_s</span> <span class="p">{</span>
	<span class="n">wwn_t</span>	       <span class="n">pwwn</span><span class="p">;</span>       <span class="cm">/*  port wwn */</span>
	<span class="n">wwn_t</span>	       <span class="n">nwwn</span><span class="p">;</span>       <span class="cm">/*  node wwn */</span>
	<span class="k">struct</span> <span class="n">bfa_lport_symname_s</span>  <span class="n">sym_name</span><span class="p">;</span>   <span class="cm">/*  vm port symbolic name */</span>
	<span class="k">enum</span> <span class="n">bfa_lport_role</span> <span class="n">roles</span><span class="p">;</span>      <span class="cm">/* FCS port roles */</span>
	<span class="n">u32</span>     <span class="n">rsvd</span><span class="p">;</span>
	<span class="n">bfa_boolean_t</span>   <span class="n">preboot_vp</span><span class="p">;</span>  <span class="cm">/*  vport created from PBC */</span>
	<span class="n">u8</span>	<span class="n">tag</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>        <span class="cm">/* opaque tag from application */</span>
	<span class="n">u8</span>	<span class="n">padding</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * FCS port states</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_lport_state</span> <span class="p">{</span>
	<span class="n">BFA_LPORT_UNINIT</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/*  PORT is not yet initialized */</span>
	<span class="n">BFA_LPORT_FDISC</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/*  FDISC is in progress */</span>
	<span class="n">BFA_LPORT_ONLINE</span>  <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/*  login to fabric is complete */</span>
	<span class="n">BFA_LPORT_OFFLINE</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/*  No login to fabric */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * FCS port type.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_lport_type</span> <span class="p">{</span>
	<span class="n">BFA_LPORT_TYPE_PHYSICAL</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">BFA_LPORT_TYPE_VIRTUAL</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * FCS port offline reason.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_lport_offline_reason</span> <span class="p">{</span>
	<span class="n">BFA_LPORT_OFFLINE_UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">BFA_LPORT_OFFLINE_LINKDOWN</span><span class="p">,</span>
	<span class="n">BFA_LPORT_OFFLINE_FAB_UNSUPPORTED</span><span class="p">,</span>	<span class="cm">/*  NPIV not supported by the</span>
<span class="cm">	 *    fabric */</span>
	<span class="n">BFA_LPORT_OFFLINE_FAB_NORESOURCES</span><span class="p">,</span>
	<span class="n">BFA_LPORT_OFFLINE_FAB_LOGOUT</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * FCS lport info.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_lport_info_s</span> <span class="p">{</span>
	<span class="n">u8</span>	 <span class="n">port_type</span><span class="p">;</span>	<span class="cm">/* bfa_lport_type_t : physical or</span>
<span class="cm">	 * virtual */</span>
	<span class="n">u8</span>	 <span class="n">port_state</span><span class="p">;</span>	<span class="cm">/* one of bfa_lport_state values */</span>
	<span class="n">u8</span>	 <span class="n">offline_reason</span><span class="p">;</span>	<span class="cm">/* one of bfa_lport_offline_reason_t</span>
<span class="cm">	 * values */</span>
	<span class="n">wwn_t</span>	   <span class="n">port_wwn</span><span class="p">;</span>
	<span class="n">wwn_t</span>	   <span class="n">node_wwn</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * following 4 feilds are valid for Physical Ports only</span>
<span class="cm">	 */</span>
	<span class="n">u32</span>	<span class="n">max_vports_supp</span><span class="p">;</span>	<span class="cm">/* Max supported vports */</span>
	<span class="n">u32</span>	<span class="n">num_vports_inuse</span><span class="p">;</span>	<span class="cm">/* Num of in use vports */</span>
	<span class="n">u32</span>	<span class="n">max_rports_supp</span><span class="p">;</span>	<span class="cm">/* Max supported rports */</span>
	<span class="n">u32</span>	<span class="n">num_rports_inuse</span><span class="p">;</span>	<span class="cm">/* Num of doscovered rports */</span>

<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * FCS port statistics</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_lport_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">ns_plogi_sent</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_plogi_rsp_err</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_plogi_acc_err</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_plogi_accepts</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_rejects</span><span class="p">;</span>	<span class="cm">/* NS command rejects */</span>
	<span class="n">u32</span>	<span class="n">ns_plogi_unknown_rsp</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_plogi_alloc_wait</span><span class="p">;</span>

	<span class="n">u32</span>	<span class="n">ns_retries</span><span class="p">;</span>	<span class="cm">/* NS command retries */</span>
	<span class="n">u32</span>	<span class="n">ns_timeouts</span><span class="p">;</span>	<span class="cm">/* NS command timeouts */</span>

	<span class="n">u32</span>	<span class="n">ns_rspnid_sent</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_rspnid_accepts</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_rspnid_rsp_err</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_rspnid_rejects</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_rspnid_alloc_wait</span><span class="p">;</span>

	<span class="n">u32</span>	<span class="n">ns_rftid_sent</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_rftid_accepts</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_rftid_rsp_err</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_rftid_rejects</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_rftid_alloc_wait</span><span class="p">;</span>

	<span class="n">u32</span>	<span class="n">ns_rffid_sent</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_rffid_accepts</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_rffid_rsp_err</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_rffid_rejects</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_rffid_alloc_wait</span><span class="p">;</span>

	<span class="n">u32</span>	<span class="n">ns_gidft_sent</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_gidft_accepts</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_gidft_rsp_err</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_gidft_rejects</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_gidft_unknown_rsp</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ns_gidft_alloc_wait</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * Mgmt Server stats</span>
<span class="cm">	 */</span>
	<span class="n">u32</span>	<span class="n">ms_retries</span><span class="p">;</span>	<span class="cm">/* MS command retries */</span>
	<span class="n">u32</span>	<span class="n">ms_timeouts</span><span class="p">;</span>	<span class="cm">/* MS command timeouts */</span>
	<span class="n">u32</span>	<span class="n">ms_plogi_sent</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ms_plogi_rsp_err</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ms_plogi_acc_err</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ms_plogi_accepts</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ms_rejects</span><span class="p">;</span>	<span class="cm">/* MS command rejects */</span>
	<span class="n">u32</span>	<span class="n">ms_plogi_unknown_rsp</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ms_plogi_alloc_wait</span><span class="p">;</span>

	<span class="n">u32</span>	<span class="n">num_rscn</span><span class="p">;</span>	<span class="cm">/* Num of RSCN received */</span>
	<span class="n">u32</span>	<span class="n">num_portid_rscn</span><span class="p">;</span><span class="cm">/* Num portid format RSCN</span>
<span class="cm">	* received */</span>

	<span class="n">u32</span>	<span class="n">uf_recvs</span><span class="p">;</span>	<span class="cm">/* Unsolicited recv frames	*/</span>
	<span class="n">u32</span>	<span class="n">uf_recv_drops</span><span class="p">;</span>	<span class="cm">/* Dropped received frames	*/</span>

	<span class="n">u32</span>	<span class="n">plogi_rcvd</span><span class="p">;</span>	<span class="cm">/* Received plogi	*/</span>
	<span class="n">u32</span>	<span class="n">prli_rcvd</span><span class="p">;</span>	<span class="cm">/* Received prli	*/</span>
	<span class="n">u32</span>	<span class="n">adisc_rcvd</span><span class="p">;</span>	<span class="cm">/* Received adisc	*/</span>
	<span class="n">u32</span>	<span class="n">prlo_rcvd</span><span class="p">;</span>	<span class="cm">/* Received prlo	*/</span>
	<span class="n">u32</span>	<span class="n">logo_rcvd</span><span class="p">;</span>	<span class="cm">/* Received logo	*/</span>
	<span class="n">u32</span>	<span class="n">rpsc_rcvd</span><span class="p">;</span>	<span class="cm">/* Received rpsc	*/</span>
	<span class="n">u32</span>	<span class="n">un_handled_els_rcvd</span><span class="p">;</span>	<span class="cm">/* Received unhandled ELS	*/</span>
	<span class="n">u32</span>	<span class="n">rport_plogi_timeouts</span><span class="p">;</span> <span class="cm">/* Rport plogi retry timeout count */</span>
	<span class="n">u32</span>	<span class="n">rport_del_max_plogi_retry</span><span class="p">;</span> <span class="cm">/* Deleted rport</span>
<span class="cm">					    * (max retry of plogi) */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * BFA port attribute returned in queries</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_lport_attr_s</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">bfa_lport_state</span> <span class="n">state</span><span class="p">;</span>	<span class="cm">/*  port state */</span>
	<span class="n">u32</span>	 <span class="n">pid</span><span class="p">;</span>	<span class="cm">/*  port ID */</span>
	<span class="k">struct</span> <span class="n">bfa_lport_cfg_s</span>   <span class="n">port_cfg</span><span class="p">;</span>	<span class="cm">/*  port configuration */</span>
	<span class="k">enum</span> <span class="n">bfa_port_type</span> <span class="n">port_type</span><span class="p">;</span>	<span class="cm">/*  current topology */</span>
	<span class="n">u32</span>	 <span class="n">loopback</span><span class="p">;</span>	<span class="cm">/*  cable is externally looped back */</span>
	<span class="n">wwn_t</span>	<span class="n">fabric_name</span><span class="p">;</span> <span class="cm">/*  attached switch&#39;s nwwn */</span>
	<span class="n">u8</span>	<span class="n">fabric_ip_addr</span><span class="p">[</span><span class="n">BFA_FCS_FABRIC_IPADDR_SZ</span><span class="p">];</span> <span class="cm">/*  attached</span>
<span class="cm">	* fabric&#39;s ip addr */</span>
	<span class="n">mac_t</span>	   <span class="n">fpma_mac</span><span class="p">;</span>	<span class="cm">/*  Lport&#39;s FPMA Mac address */</span>
	<span class="n">u16</span>	<span class="n">authfail</span><span class="p">;</span>	<span class="cm">/*  auth failed state */</span>
<span class="p">};</span>


<span class="cm">/*</span>
<span class="cm"> * VPORT states</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_vport_state</span> <span class="p">{</span>
	<span class="n">BFA_FCS_VPORT_UNINIT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">BFA_FCS_VPORT_CREATED</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFA_FCS_VPORT_OFFLINE</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFA_FCS_VPORT_FDISC_SEND</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">BFA_FCS_VPORT_FDISC</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">BFA_FCS_VPORT_FDISC_RETRY</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">BFA_FCS_VPORT_FDISC_RSP_WAIT</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">BFA_FCS_VPORT_ONLINE</span>		<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">BFA_FCS_VPORT_DELETING</span>		<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">BFA_FCS_VPORT_CLEANUP</span>		<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">BFA_FCS_VPORT_LOGO_SEND</span>		<span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">BFA_FCS_VPORT_LOGO</span>		<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">BFA_FCS_VPORT_ERROR</span>		<span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
	<span class="n">BFA_FCS_VPORT_MAX_STATE</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * vport statistics</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_vport_stats_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_lport_stats_s</span> <span class="n">port_stats</span><span class="p">;</span>	<span class="cm">/*  base class (port) stats */</span>
	<span class="cm">/*</span>
<span class="cm">	 * TODO - remove</span>
<span class="cm">	 */</span>

	<span class="n">u32</span>        <span class="n">fdisc_sent</span><span class="p">;</span>	<span class="cm">/*  num fdisc sent */</span>
	<span class="n">u32</span>        <span class="n">fdisc_accepts</span><span class="p">;</span>	<span class="cm">/*  fdisc accepts */</span>
	<span class="n">u32</span>        <span class="n">fdisc_retries</span><span class="p">;</span>	<span class="cm">/*  fdisc retries */</span>
	<span class="n">u32</span>        <span class="n">fdisc_timeouts</span><span class="p">;</span>	<span class="cm">/*  fdisc timeouts */</span>
	<span class="n">u32</span>        <span class="n">fdisc_rsp_err</span><span class="p">;</span>	<span class="cm">/*  fdisc response error */</span>
	<span class="n">u32</span>        <span class="n">fdisc_acc_bad</span><span class="p">;</span>	<span class="cm">/*  bad fdisc accepts */</span>
	<span class="n">u32</span>        <span class="n">fdisc_rejects</span><span class="p">;</span>	<span class="cm">/*  fdisc rejects */</span>
	<span class="n">u32</span>        <span class="n">fdisc_unknown_rsp</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 *!&lt; fdisc rsp unknown error</span>
<span class="cm">	 */</span>
	<span class="n">u32</span>        <span class="n">fdisc_alloc_wait</span><span class="p">;</span><span class="cm">/*  fdisc req (fcxp)alloc wait */</span>

	<span class="n">u32</span>        <span class="n">logo_alloc_wait</span><span class="p">;</span><span class="cm">/*  logo req (fcxp) alloc wait */</span>
	<span class="n">u32</span>        <span class="n">logo_sent</span><span class="p">;</span>	<span class="cm">/*  logo sent */</span>
	<span class="n">u32</span>        <span class="n">logo_accepts</span><span class="p">;</span>	<span class="cm">/*  logo accepts */</span>
	<span class="n">u32</span>        <span class="n">logo_rejects</span><span class="p">;</span>	<span class="cm">/*  logo rejects */</span>
	<span class="n">u32</span>        <span class="n">logo_rsp_err</span><span class="p">;</span>	<span class="cm">/*  logo rsp errors */</span>
	<span class="n">u32</span>        <span class="n">logo_unknown_rsp</span><span class="p">;</span>
			<span class="cm">/*  logo rsp unknown errors */</span>

	<span class="n">u32</span>        <span class="n">fab_no_npiv</span><span class="p">;</span>	<span class="cm">/*  fabric does not support npiv */</span>

	<span class="n">u32</span>        <span class="n">fab_offline</span><span class="p">;</span>	<span class="cm">/*  offline events from fab SM */</span>
	<span class="n">u32</span>        <span class="n">fab_online</span><span class="p">;</span>	<span class="cm">/*  online events from fab SM */</span>
	<span class="n">u32</span>        <span class="n">fab_cleanup</span><span class="p">;</span>	<span class="cm">/*  cleanup request from fab SM */</span>
	<span class="n">u32</span>        <span class="n">rsvd</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * BFA vport attribute returned in queries</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_vport_attr_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_lport_attr_s</span>   <span class="n">port_attr</span><span class="p">;</span> <span class="cm">/*  base class (port) attributes */</span>
	<span class="k">enum</span> <span class="n">bfa_vport_state</span> <span class="n">vport_state</span><span class="p">;</span> <span class="cm">/*  vport state */</span>
	<span class="n">u32</span>          <span class="n">rsvd</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * FCS remote port states</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_rport_state</span> <span class="p">{</span>
	<span class="n">BFA_RPORT_UNINIT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/*  PORT is not yet initialized */</span>
	<span class="n">BFA_RPORT_OFFLINE</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/*  rport is offline */</span>
	<span class="n">BFA_RPORT_PLOGI</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/*  PLOGI to rport is in progress */</span>
	<span class="n">BFA_RPORT_ONLINE</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/*  login to rport is complete */</span>
	<span class="n">BFA_RPORT_PLOGI_RETRY</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>	<span class="cm">/*  retrying login to rport */</span>
	<span class="n">BFA_RPORT_NSQUERY</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>	<span class="cm">/*  nameserver query */</span>
	<span class="n">BFA_RPORT_ADISC</span>		<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>	<span class="cm">/*  ADISC authentication */</span>
	<span class="n">BFA_RPORT_LOGO</span>		<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>	<span class="cm">/*  logging out with rport */</span>
	<span class="n">BFA_RPORT_LOGORCV</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>	<span class="cm">/*  handling LOGO from rport */</span>
	<span class="n">BFA_RPORT_NSDISC</span>	<span class="o">=</span> <span class="mi">9</span><span class="p">,</span>	<span class="cm">/*  re-discover rport */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Rport Scsi Function : Initiator/Target.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_rport_function</span> <span class="p">{</span>
	<span class="n">BFA_RPORT_INITIATOR</span>	<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>	<span class="cm">/*  SCSI Initiator	*/</span>
	<span class="n">BFA_RPORT_TARGET</span>	<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>	<span class="cm">/*  SCSI Target	*/</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * port/node symbolic names for rport</span>
<span class="cm"> */</span>
<span class="cp">#define BFA_RPORT_SYMNAME_MAXLEN	255</span>
<span class="k">struct</span> <span class="n">bfa_rport_symname_s</span> <span class="p">{</span>
	<span class="kt">char</span>            <span class="n">symname</span><span class="p">[</span><span class="n">BFA_RPORT_SYMNAME_MAXLEN</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * FCS remote port statistics</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_rport_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>        <span class="n">offlines</span><span class="p">;</span>           <span class="cm">/*  remote port offline count  */</span>
	<span class="n">u32</span>        <span class="n">onlines</span><span class="p">;</span>            <span class="cm">/*  remote port online count   */</span>
	<span class="n">u32</span>        <span class="n">rscns</span><span class="p">;</span>              <span class="cm">/*  RSCN affecting rport       */</span>
	<span class="n">u32</span>        <span class="n">plogis</span><span class="p">;</span>		    <span class="cm">/*  plogis sent                */</span>
	<span class="n">u32</span>        <span class="n">plogi_accs</span><span class="p">;</span>	    <span class="cm">/*  plogi accepts              */</span>
	<span class="n">u32</span>        <span class="n">plogi_timeouts</span><span class="p">;</span>	    <span class="cm">/*  plogi timeouts             */</span>
	<span class="n">u32</span>        <span class="n">plogi_rejects</span><span class="p">;</span>	    <span class="cm">/*  rcvd plogi rejects         */</span>
	<span class="n">u32</span>        <span class="n">plogi_failed</span><span class="p">;</span>	    <span class="cm">/*  local failure              */</span>
	<span class="n">u32</span>        <span class="n">plogi_rcvd</span><span class="p">;</span>	    <span class="cm">/*  plogis rcvd                */</span>
	<span class="n">u32</span>        <span class="n">prli_rcvd</span><span class="p">;</span>          <span class="cm">/*  inbound PRLIs              */</span>
	<span class="n">u32</span>        <span class="n">adisc_rcvd</span><span class="p">;</span>         <span class="cm">/*  ADISCs received            */</span>
	<span class="n">u32</span>        <span class="n">adisc_rejects</span><span class="p">;</span>      <span class="cm">/*  recvd  ADISC rejects       */</span>
	<span class="n">u32</span>        <span class="n">adisc_sent</span><span class="p">;</span>         <span class="cm">/*  ADISC requests sent        */</span>
	<span class="n">u32</span>        <span class="n">adisc_accs</span><span class="p">;</span>         <span class="cm">/*  ADISC accepted by rport    */</span>
	<span class="n">u32</span>        <span class="n">adisc_failed</span><span class="p">;</span>       <span class="cm">/*  ADISC failed (no response) */</span>
	<span class="n">u32</span>        <span class="n">adisc_rejected</span><span class="p">;</span>     <span class="cm">/*  ADISC rejected by us    */</span>
	<span class="n">u32</span>        <span class="n">logos</span><span class="p">;</span>              <span class="cm">/*  logos sent                 */</span>
	<span class="n">u32</span>        <span class="n">logo_accs</span><span class="p">;</span>          <span class="cm">/*  LOGO accepts from rport    */</span>
	<span class="n">u32</span>        <span class="n">logo_failed</span><span class="p">;</span>        <span class="cm">/*  LOGO failures              */</span>
	<span class="n">u32</span>        <span class="n">logo_rejected</span><span class="p">;</span>      <span class="cm">/*  LOGO rejects from rport    */</span>
	<span class="n">u32</span>        <span class="n">logo_rcvd</span><span class="p">;</span>          <span class="cm">/*  LOGO from remote port      */</span>

	<span class="n">u32</span>        <span class="n">rpsc_rcvd</span><span class="p">;</span>         <span class="cm">/*  RPSC received            */</span>
	<span class="n">u32</span>        <span class="n">rpsc_rejects</span><span class="p">;</span>      <span class="cm">/*  recvd  RPSC rejects       */</span>
	<span class="n">u32</span>        <span class="n">rpsc_sent</span><span class="p">;</span>         <span class="cm">/*  RPSC requests sent        */</span>
	<span class="n">u32</span>        <span class="n">rpsc_accs</span><span class="p">;</span>         <span class="cm">/*  RPSC accepted by rport    */</span>
	<span class="n">u32</span>        <span class="n">rpsc_failed</span><span class="p">;</span>       <span class="cm">/*  RPSC failed (no response) */</span>
	<span class="n">u32</span>        <span class="n">rpsc_rejected</span><span class="p">;</span>     <span class="cm">/*  RPSC rejected by us    */</span>

	<span class="n">u32</span>	<span class="n">rjt_insuff_res</span><span class="p">;</span>	<span class="cm">/*  LS RJT with insuff resources */</span>
	<span class="k">struct</span> <span class="n">bfa_rport_hal_stats_s</span>	<span class="n">hal_stats</span><span class="p">;</span>  <span class="cm">/*  BFA rport stats    */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * FCS remote port attributes returned in queries</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_rport_attr_s</span> <span class="p">{</span>
	<span class="n">wwn_t</span>		<span class="n">nwwn</span><span class="p">;</span>	<span class="cm">/*  node wwn */</span>
	<span class="n">wwn_t</span>		<span class="n">pwwn</span><span class="p">;</span>	<span class="cm">/*  port wwn */</span>
	<span class="k">enum</span> <span class="n">fc_cos</span> <span class="n">cos_supported</span><span class="p">;</span>	<span class="cm">/*  supported class of services */</span>
	<span class="n">u32</span>		<span class="n">pid</span><span class="p">;</span>	<span class="cm">/*  port ID */</span>
	<span class="n">u32</span>		<span class="n">df_sz</span><span class="p">;</span>	<span class="cm">/*  Max payload size */</span>
	<span class="k">enum</span> <span class="n">bfa_rport_state</span>	<span class="n">state</span><span class="p">;</span>	<span class="cm">/*  Rport State machine state */</span>
	<span class="k">enum</span> <span class="n">fc_cos</span>	<span class="n">fc_cos</span><span class="p">;</span>	<span class="cm">/*  FC classes of services */</span>
	<span class="n">bfa_boolean_t</span>	<span class="n">cisc</span><span class="p">;</span>	<span class="cm">/*  CISC capable device */</span>
	<span class="k">struct</span> <span class="n">bfa_rport_symname_s</span> <span class="n">symname</span><span class="p">;</span> <span class="cm">/*  Symbolic Name */</span>
	<span class="k">enum</span> <span class="n">bfa_rport_function</span>	<span class="n">scsi_function</span><span class="p">;</span> <span class="cm">/*  Initiator/Target */</span>
	<span class="k">struct</span> <span class="n">bfa_rport_qos_attr_s</span> <span class="n">qos_attr</span><span class="p">;</span> <span class="cm">/*  qos attributes  */</span>
	<span class="k">enum</span> <span class="n">bfa_port_speed</span> <span class="n">curr_speed</span><span class="p">;</span>   <span class="cm">/*  operating speed got from</span>
<span class="cm">					    * RPSC ELS. UNKNOWN, if RPSC</span>
<span class="cm">					    * is not supported */</span>
	<span class="n">bfa_boolean_t</span>	<span class="n">trl_enforced</span><span class="p">;</span>	<span class="cm">/*  TRL enforced ? TRUE/FALSE */</span>
	<span class="k">enum</span> <span class="n">bfa_port_speed</span>	<span class="n">assigned_speed</span><span class="p">;</span>	<span class="cm">/* Speed assigned by the user.</span>
<span class="cm">						 * will be used if RPSC is not</span>
<span class="cm">						 * supported by the rport */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_rport_remote_link_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">lfc</span><span class="p">;</span> <span class="cm">/*  Link Failure Count */</span>
	<span class="n">u32</span> <span class="n">lsyc</span><span class="p">;</span> <span class="cm">/*  Loss of Synchronization Count */</span>
	<span class="n">u32</span> <span class="n">lsic</span><span class="p">;</span> <span class="cm">/*  Loss of Signal Count */</span>
	<span class="n">u32</span> <span class="n">pspec</span><span class="p">;</span> <span class="cm">/*  Primitive Sequence Protocol Error Count */</span>
	<span class="n">u32</span> <span class="n">itwc</span><span class="p">;</span> <span class="cm">/*  Invalid Transmission Word Count */</span>
	<span class="n">u32</span> <span class="n">icc</span><span class="p">;</span> <span class="cm">/*  Invalid CRC Count */</span>
<span class="p">};</span>


<span class="cp">#define BFA_MAX_IO_INDEX 7</span>
<span class="cp">#define BFA_NO_IO_INDEX 9</span>

<span class="cm">/*</span>
<span class="cm"> * FCS itnim states</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_itnim_state</span> <span class="p">{</span>
	<span class="n">BFA_ITNIM_OFFLINE</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/*  offline */</span>
	<span class="n">BFA_ITNIM_PRLI_SEND</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/*  prli send */</span>
	<span class="n">BFA_ITNIM_PRLI_SENT</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/*  prli sent */</span>
	<span class="n">BFA_ITNIM_PRLI_RETRY</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/*  prli retry */</span>
	<span class="n">BFA_ITNIM_HCB_ONLINE</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>	<span class="cm">/*  online callback */</span>
	<span class="n">BFA_ITNIM_ONLINE</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>	<span class="cm">/*  online */</span>
	<span class="n">BFA_ITNIM_HCB_OFFLINE</span>	<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>	<span class="cm">/*  offline callback */</span>
	<span class="n">BFA_ITNIM_INITIATIOR</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>	<span class="cm">/*  initiator */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * FCS remote port statistics</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_itnim_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>        <span class="n">onlines</span><span class="p">;</span>	<span class="cm">/*  num rport online */</span>
	<span class="n">u32</span>        <span class="n">offlines</span><span class="p">;</span>	<span class="cm">/*  num rport offline */</span>
	<span class="n">u32</span>        <span class="n">prli_sent</span><span class="p">;</span>	<span class="cm">/*  num prli sent out */</span>
	<span class="n">u32</span>        <span class="n">fcxp_alloc_wait</span><span class="p">;</span><span class="cm">/*  num fcxp alloc waits */</span>
	<span class="n">u32</span>        <span class="n">prli_rsp_err</span><span class="p">;</span>	<span class="cm">/*  num prli rsp errors */</span>
	<span class="n">u32</span>        <span class="n">prli_rsp_acc</span><span class="p">;</span>	<span class="cm">/*  num prli rsp accepts */</span>
	<span class="n">u32</span>        <span class="n">initiator</span><span class="p">;</span>	<span class="cm">/*  rport is an initiator */</span>
	<span class="n">u32</span>        <span class="n">prli_rsp_parse_err</span><span class="p">;</span>	<span class="cm">/*  prli rsp parsing errors */</span>
	<span class="n">u32</span>        <span class="n">prli_rsp_rjt</span><span class="p">;</span>	<span class="cm">/*  num prli rsp rejects */</span>
	<span class="n">u32</span>        <span class="n">timeout</span><span class="p">;</span>	<span class="cm">/*  num timeouts detected */</span>
	<span class="n">u32</span>        <span class="n">sler</span><span class="p">;</span>		<span class="cm">/*  num sler notification from BFA */</span>
	<span class="n">u32</span>	<span class="n">rsvd</span><span class="p">;</span>		<span class="cm">/* padding for 64 bit alignment */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * FCS itnim attributes returned in queries</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_itnim_attr_s</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">bfa_itnim_state</span> <span class="n">state</span><span class="p">;</span> <span class="cm">/*  FCS itnim state        */</span>
	<span class="n">u8</span> <span class="n">retry</span><span class="p">;</span>		<span class="cm">/*  data retransmision support */</span>
	<span class="n">u8</span>	<span class="n">task_retry_id</span><span class="p">;</span>  <span class="cm">/*  task retry ident support   */</span>
	<span class="n">u8</span> <span class="n">rec_support</span><span class="p">;</span>    <span class="cm">/*  REC supported              */</span>
	<span class="n">u8</span> <span class="n">conf_comp</span><span class="p">;</span>      <span class="cm">/*  confirmed completion supp  */</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* __BFA_DEFS_FCS_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
