<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › scsi › bfa › bfi.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>bfi.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2005-2010 Brocade Communications Systems, Inc.</span>
<span class="cm"> * All rights reserved</span>
<span class="cm"> * www.brocade.com</span>
<span class="cm"> *</span>
<span class="cm"> * Linux driver for Brocade Fibre Channel Host Bus Adapter.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify it</span>
<span class="cm"> * under the terms of the GNU General Public License (GPL) Version 2 as</span>
<span class="cm"> * published by the Free Software Foundation</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful, but</span>
<span class="cm"> * WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="cm"> * General Public License for more details.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __BFI_H__</span>
<span class="cp">#define __BFI_H__</span>

<span class="cp">#include &quot;bfa_defs.h&quot;</span>
<span class="cp">#include &quot;bfa_defs_svc.h&quot;</span>

<span class="cp">#pragma pack(1)</span>

<span class="cm">/* Per dma segment max size */</span>
<span class="cp">#define BFI_MEM_DMA_SEG_SZ	(131072)</span>

<span class="cm">/* Get number of dma segments required */</span>
<span class="cp">#define BFI_MEM_DMA_NSEGS(_num_reqs, _req_sz)				\</span>
<span class="cp">	((u16)(((((_num_reqs) * (_req_sz)) + BFI_MEM_DMA_SEG_SZ - 1) &amp;	\</span>
<span class="cp">	 ~(BFI_MEM_DMA_SEG_SZ - 1)) / BFI_MEM_DMA_SEG_SZ))</span>

<span class="cm">/* Get num dma reqs - that fit in a segment */</span>
<span class="cp">#define BFI_MEM_NREQS_SEG(_rqsz) (BFI_MEM_DMA_SEG_SZ / (_rqsz))</span>

<span class="cm">/* Get segment num from tag */</span>
<span class="cp">#define BFI_MEM_SEG_FROM_TAG(_tag, _rqsz) ((_tag) / BFI_MEM_NREQS_SEG(_rqsz))</span>

<span class="cm">/* Get dma req offset in a segment */</span>
<span class="cp">#define BFI_MEM_SEG_REQ_OFFSET(_tag, _sz)	\</span>
<span class="cp">	((_tag) - (BFI_MEM_SEG_FROM_TAG(_tag, _sz) * BFI_MEM_NREQS_SEG(_sz)))</span>

<span class="cm">/*</span>
<span class="cm"> * BFI FW image type</span>
<span class="cm"> */</span>
<span class="cp">#define	BFI_FLASH_CHUNK_SZ			256	</span><span class="cm">/*  Flash chunk size */</span><span class="cp"></span>
<span class="cp">#define	BFI_FLASH_CHUNK_SZ_WORDS	(BFI_FLASH_CHUNK_SZ/sizeof(u32))</span>

<span class="cm">/*</span>
<span class="cm"> * Msg header common to all msgs</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="p">{</span>
	<span class="n">u8</span>		<span class="n">msg_class</span><span class="p">;</span>	<span class="cm">/*  @ref bfi_mclass_t		    */</span>
	<span class="n">u8</span>		<span class="n">msg_id</span><span class="p">;</span>		<span class="cm">/*  msg opcode with in the class   */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u8</span>	<span class="n">qid</span><span class="p">;</span>
			<span class="n">u8</span>	<span class="n">fn_lpu</span><span class="p">;</span>	<span class="cm">/*  msg destination		    */</span>
		<span class="p">}</span> <span class="n">h2i</span><span class="p">;</span>
		<span class="n">u16</span>	<span class="n">i2htok</span><span class="p">;</span>	<span class="cm">/*  token in msgs to host	    */</span>
	<span class="p">}</span> <span class="n">mtag</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define bfi_fn_lpu(__fn, __lpu)	((__fn) &lt;&lt; 1 | (__lpu))</span>
<span class="cp">#define bfi_mhdr_2_fn(_mh)	((_mh)-&gt;mtag.h2i.fn_lpu &gt;&gt; 1)</span>

<span class="cp">#define bfi_h2i_set(_mh, _mc, _op, _fn_lpu) do {		\</span>
<span class="cp">	(_mh).msg_class		= (_mc);      \</span>
<span class="cp">	(_mh).msg_id		= (_op);      \</span>
<span class="cp">	(_mh).mtag.h2i.fn_lpu	= (_fn_lpu);      \</span>
<span class="cp">} while (0)</span>

<span class="cp">#define bfi_i2h_set(_mh, _mc, _op, _i2htok) do {		\</span>
<span class="cp">	(_mh).msg_class		= (_mc);      \</span>
<span class="cp">	(_mh).msg_id		= (_op);      \</span>
<span class="cp">	(_mh).mtag.i2htok	= (_i2htok);      \</span>
<span class="cp">} while (0)</span>

<span class="cm">/*</span>
<span class="cm"> * Message opcodes: 0-127 to firmware, 128-255 to host</span>
<span class="cm"> */</span>
<span class="cp">#define BFI_I2H_OPCODE_BASE	128</span>
<span class="cp">#define BFA_I2HM(_x)		((_x) + BFI_I2H_OPCODE_BASE)</span>

<span class="cm">/*</span>
<span class="cm"> ****************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> * Scatter Gather Element and Page definition</span>
<span class="cm"> *</span>
<span class="cm"> ****************************************************************************</span>
<span class="cm"> */</span>

<span class="cp">#define BFI_SGE_INLINE	1</span>
<span class="cp">#define BFI_SGE_INLINE_MAX	(BFI_SGE_INLINE + 1)</span>

<span class="cm">/*</span>
<span class="cm"> * SG Flags</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">BFI_SGE_DATA</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/*  data address, not last	     */</span>
	<span class="n">BFI_SGE_DATA_CPL</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/*  data addr, last in current page */</span>
	<span class="n">BFI_SGE_DATA_LAST</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/*  data address, last		     */</span>
	<span class="n">BFI_SGE_LINK</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/*  link address		     */</span>
	<span class="n">BFI_SGE_PGDLEN</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/*  cumulative data length for page */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * DMA addresses</span>
<span class="cm"> */</span>
<span class="k">union</span> <span class="n">bfi_addr_u</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">__be32</span>	<span class="n">addr_lo</span><span class="p">;</span>
		<span class="n">__be32</span>	<span class="n">addr_hi</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">a32</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Scatter Gather Element used for fast-path IO requests</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_sge_s</span> <span class="p">{</span>
<span class="cp">#ifdef __BIG_ENDIAN</span>
	<span class="n">u32</span>	<span class="n">flags</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span>
			<span class="nl">rsvd:</span><span class="mi">2</span><span class="p">,</span>
			<span class="nl">sg_len:</span><span class="mi">28</span><span class="p">;</span>
<span class="cp">#else</span>
	<span class="n">u32</span>	<span class="n">sg_len</span><span class="o">:</span><span class="mi">28</span><span class="p">,</span>
			<span class="nl">rsvd:</span><span class="mi">2</span><span class="p">,</span>
			<span class="nl">flags:</span><span class="mi">2</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="k">union</span> <span class="n">bfi_addr_u</span> <span class="n">sga</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * Generic DMA addr-len pair.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_alen_s</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">bfi_addr_u</span>	<span class="n">al_addr</span><span class="p">;</span>	<span class="cm">/* DMA addr of buffer	*/</span>
	<span class="n">u32</span>			<span class="n">al_len</span><span class="p">;</span>		<span class="cm">/* length of buffer	*/</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Scatter Gather Page</span>
<span class="cm"> */</span>
<span class="cp">#define BFI_SGPG_DATA_SGES		7</span>
<span class="cp">#define BFI_SGPG_SGES_MAX		(BFI_SGPG_DATA_SGES + 1)</span>
<span class="cp">#define BFI_SGPG_RSVD_WD_LEN	8</span>
<span class="k">struct</span> <span class="n">bfi_sgpg_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_sge_s</span> <span class="n">sges</span><span class="p">[</span><span class="n">BFI_SGPG_SGES_MAX</span><span class="p">];</span>
	<span class="n">u32</span>	<span class="n">rsvd</span><span class="p">[</span><span class="n">BFI_SGPG_RSVD_WD_LEN</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* FCP module definitions */</span>
<span class="cp">#define BFI_IO_MAX	(2000)</span>
<span class="cp">#define BFI_IOIM_SNSLEN	(256)</span>
<span class="cp">#define BFI_IOIM_SNSBUF_SEGS	\</span>
<span class="cp">	BFI_MEM_DMA_NSEGS(BFI_IO_MAX, BFI_IOIM_SNSLEN)</span>

<span class="cm">/*</span>
<span class="cm"> * Large Message structure - 128 Bytes size Msgs</span>
<span class="cm"> */</span>
<span class="cp">#define BFI_LMSG_SZ		128</span>
<span class="cp">#define BFI_LMSG_PL_WSZ	\</span>
<span class="cp">			((BFI_LMSG_SZ - sizeof(struct bfi_mhdr_s)) / 4)</span>

<span class="k">struct</span> <span class="n">bfi_msg_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mhdr</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">pl</span><span class="p">[</span><span class="n">BFI_LMSG_PL_WSZ</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Mailbox message structure</span>
<span class="cm"> */</span>
<span class="cp">#define BFI_MBMSG_SZ		7</span>
<span class="k">struct</span> <span class="n">bfi_mbmsg_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>
	<span class="n">u32</span>		<span class="n">pl</span><span class="p">[</span><span class="n">BFI_MBMSG_SZ</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Supported PCI function class codes (personality)</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfi_pcifn_class</span> <span class="p">{</span>
	<span class="n">BFI_PCIFN_CLASS_FC</span>  <span class="o">=</span> <span class="mh">0x0c04</span><span class="p">,</span>
	<span class="n">BFI_PCIFN_CLASS_ETH</span> <span class="o">=</span> <span class="mh">0x0200</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Message Classes</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfi_mclass</span> <span class="p">{</span>
	<span class="n">BFI_MC_IOC</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/*  IO Controller (IOC)	    */</span>
	<span class="n">BFI_MC_DIAG</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>    <span class="cm">/*  Diagnostic Msgs            */</span>
	<span class="n">BFI_MC_FLASH</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/*  Flash message class	*/</span>
	<span class="n">BFI_MC_CEE</span>		<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>	<span class="cm">/*  CEE	*/</span>
	<span class="n">BFI_MC_FCPORT</span>		<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>	<span class="cm">/*  FC port			    */</span>
	<span class="n">BFI_MC_IOCFC</span>		<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>	<span class="cm">/*  FC - IO Controller (IOC)	    */</span>
	<span class="n">BFI_MC_ABLK</span>		<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>	<span class="cm">/*  ASIC block configuration	    */</span>
	<span class="n">BFI_MC_UF</span>		<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>	<span class="cm">/*  Unsolicited frame receive	    */</span>
	<span class="n">BFI_MC_FCXP</span>		<span class="o">=</span> <span class="mi">9</span><span class="p">,</span>	<span class="cm">/*  FC Transport		    */</span>
	<span class="n">BFI_MC_LPS</span>		<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>	<span class="cm">/*  lport fc login services	    */</span>
	<span class="n">BFI_MC_RPORT</span>		<span class="o">=</span> <span class="mi">11</span><span class="p">,</span>	<span class="cm">/*  Remote port		    */</span>
	<span class="n">BFI_MC_ITN</span>		<span class="o">=</span> <span class="mi">12</span><span class="p">,</span>	<span class="cm">/*  I-T nexus (Initiator mode)	    */</span>
	<span class="n">BFI_MC_IOIM_READ</span>	<span class="o">=</span> <span class="mi">13</span><span class="p">,</span>	<span class="cm">/*  read IO (Initiator mode)	    */</span>
	<span class="n">BFI_MC_IOIM_WRITE</span>	<span class="o">=</span> <span class="mi">14</span><span class="p">,</span>	<span class="cm">/*  write IO (Initiator mode)	    */</span>
	<span class="n">BFI_MC_IOIM_IO</span>		<span class="o">=</span> <span class="mi">15</span><span class="p">,</span>	<span class="cm">/*  IO (Initiator mode)	    */</span>
	<span class="n">BFI_MC_IOIM</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>	<span class="cm">/*  IO (Initiator mode)	    */</span>
	<span class="n">BFI_MC_IOIM_IOCOM</span>	<span class="o">=</span> <span class="mi">17</span><span class="p">,</span>	<span class="cm">/*  good IO completion		    */</span>
	<span class="n">BFI_MC_TSKIM</span>		<span class="o">=</span> <span class="mi">18</span><span class="p">,</span>	<span class="cm">/*  Initiator Task management	    */</span>
	<span class="n">BFI_MC_PORT</span>		<span class="o">=</span> <span class="mi">21</span><span class="p">,</span>	<span class="cm">/*  Physical port		    */</span>
	<span class="n">BFI_MC_SFP</span>		<span class="o">=</span> <span class="mi">22</span><span class="p">,</span>	<span class="cm">/*  SFP module	*/</span>
	<span class="n">BFI_MC_PHY</span>		<span class="o">=</span> <span class="mi">25</span><span class="p">,</span>   <span class="cm">/*  External PHY message class	*/</span>
	<span class="n">BFI_MC_MAX</span>		<span class="o">=</span> <span class="mi">32</span>
<span class="p">};</span>

<span class="cp">#define BFI_IOC_MAX_CQS		4</span>
<span class="cp">#define BFI_IOC_MAX_CQS_ASIC	8</span>
<span class="cp">#define BFI_IOC_MSGLEN_MAX	32	</span><span class="cm">/* 32 bytes */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> *----------------------------------------------------------------------</span>
<span class="cm"> *				IOC</span>
<span class="cm"> *----------------------------------------------------------------------</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * Different asic generations</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfi_asic_gen</span> <span class="p">{</span>
	<span class="n">BFI_ASIC_GEN_CB</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/* crossbow 8G FC		*/</span>
	<span class="n">BFI_ASIC_GEN_CT</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/* catapult 8G FC or 10G CNA	*/</span>
	<span class="n">BFI_ASIC_GEN_CT2</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/* catapult-2 16G FC or 10G CNA	*/</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfi_asic_mode</span> <span class="p">{</span>
	<span class="n">BFI_ASIC_MODE_FC</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/* FC upto 8G speed		*/</span>
	<span class="n">BFI_ASIC_MODE_FC16</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/* FC upto 16G speed		*/</span>
	<span class="n">BFI_ASIC_MODE_ETH</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/* Ethernet ports		*/</span>
	<span class="n">BFI_ASIC_MODE_COMBO</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>	<span class="cm">/* FC 16G and Ethernet 10G port	*/</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfi_ioc_h2i_msgs</span> <span class="p">{</span>
	<span class="n">BFI_IOC_H2I_ENABLE_REQ</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFI_IOC_H2I_DISABLE_REQ</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">BFI_IOC_H2I_GETATTR_REQ</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">BFI_IOC_H2I_DBG_SYNC</span>		<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">BFI_IOC_H2I_DBG_DUMP</span>		<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfi_ioc_i2h_msgs</span> <span class="p">{</span>
	<span class="n">BFI_IOC_I2H_ENABLE_REPLY</span>	<span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
	<span class="n">BFI_IOC_I2H_DISABLE_REPLY</span>	<span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="n">BFI_IOC_I2H_GETATTR_REPLY</span>	<span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
	<span class="n">BFI_IOC_I2H_HBEAT</span>		<span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
	<span class="n">BFI_IOC_I2H_ACQ_ADDR_REPLY</span>	<span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * BFI_IOC_H2I_GETATTR_REQ message</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_ioc_getattr_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">bfi_addr_u</span>	<span class="n">attr_addr</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfi_ioc_attr_s</span> <span class="p">{</span>
	<span class="n">wwn_t</span>		<span class="n">mfg_pwwn</span><span class="p">;</span>	<span class="cm">/*  Mfg port wwn	   */</span>
	<span class="n">wwn_t</span>		<span class="n">mfg_nwwn</span><span class="p">;</span>	<span class="cm">/*  Mfg node wwn	   */</span>
	<span class="n">mac_t</span>		<span class="n">mfg_mac</span><span class="p">;</span>	<span class="cm">/*  Mfg mac		   */</span>
	<span class="n">u8</span>		<span class="n">port_mode</span><span class="p">;</span>	<span class="cm">/* bfi_port_mode	   */</span>
	<span class="n">u8</span>		<span class="n">rsvd_a</span><span class="p">;</span>
	<span class="n">wwn_t</span>		<span class="n">pwwn</span><span class="p">;</span>
	<span class="n">wwn_t</span>		<span class="n">nwwn</span><span class="p">;</span>
	<span class="n">mac_t</span>		<span class="n">mac</span><span class="p">;</span>		<span class="cm">/*  PBC or Mfg mac	   */</span>
	<span class="n">u16</span>	<span class="n">rsvd_b</span><span class="p">;</span>
	<span class="n">mac_t</span>		<span class="n">fcoe_mac</span><span class="p">;</span>
	<span class="n">u16</span>	<span class="n">rsvd_c</span><span class="p">;</span>
	<span class="kt">char</span>		<span class="n">brcd_serialnum</span><span class="p">[</span><span class="n">STRSZ</span><span class="p">(</span><span class="n">BFA_MFG_SERIALNUM_SIZE</span><span class="p">)];</span>
	<span class="n">u8</span>		<span class="n">pcie_gen</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">pcie_lanes_orig</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">pcie_lanes</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">rx_bbcredit</span><span class="p">;</span>	<span class="cm">/*  receive buffer credits */</span>
	<span class="n">u32</span>	<span class="n">adapter_prop</span><span class="p">;</span>	<span class="cm">/*  adapter properties     */</span>
	<span class="n">u16</span>	<span class="n">maxfrsize</span><span class="p">;</span>	<span class="cm">/*  max receive frame size */</span>
	<span class="kt">char</span>		<span class="n">asic_rev</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">rsvd_d</span><span class="p">;</span>
	<span class="kt">char</span>		<span class="n">fw_version</span><span class="p">[</span><span class="n">BFA_VERSION_LEN</span><span class="p">];</span>
	<span class="kt">char</span>		<span class="n">optrom_version</span><span class="p">[</span><span class="n">BFA_VERSION_LEN</span><span class="p">];</span>
	<span class="k">struct</span>		<span class="n">bfa_mfg_vpd_s</span>	<span class="n">vpd</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">card_type</span><span class="p">;</span>	<span class="cm">/*  card type			*/</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * BFI_IOC_I2H_GETATTR_REPLY message</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_ioc_getattr_reply_s</span> <span class="p">{</span>
	<span class="k">struct</span>	<span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>	<span class="cm">/*  Common msg header		*/</span>
	<span class="n">u8</span>			<span class="n">status</span><span class="p">;</span>	<span class="cm">/*  cfg reply status		*/</span>
	<span class="n">u8</span>			<span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Firmware memory page offsets</span>
<span class="cm"> */</span>
<span class="cp">#define BFI_IOC_SMEM_PG0_CB	(0x40)</span>
<span class="cp">#define BFI_IOC_SMEM_PG0_CT	(0x180)</span>

<span class="cm">/*</span>
<span class="cm"> * Firmware statistic offset</span>
<span class="cm"> */</span>
<span class="cp">#define BFI_IOC_FWSTATS_OFF	(0x6B40)</span>
<span class="cp">#define BFI_IOC_FWSTATS_SZ	(4096)</span>

<span class="cm">/*</span>
<span class="cm"> * Firmware trace offset</span>
<span class="cm"> */</span>
<span class="cp">#define BFI_IOC_TRC_OFF		(0x4b00)</span>
<span class="cp">#define BFI_IOC_TRC_ENTS	256</span>

<span class="cp">#define BFI_IOC_FW_SIGNATURE	(0xbfadbfad)</span>
<span class="cp">#define BFI_IOC_MD5SUM_SZ	4</span>
<span class="k">struct</span> <span class="n">bfi_ioc_image_hdr_s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">signature</span><span class="p">;</span>	<span class="cm">/* constant signature		*/</span>
	<span class="n">u8</span>	<span class="n">asic_gen</span><span class="p">;</span>	<span class="cm">/* asic generation		*/</span>
	<span class="n">u8</span>	<span class="n">asic_mode</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">port0_mode</span><span class="p">;</span>	<span class="cm">/* device mode for port 0	*/</span>
	<span class="n">u8</span>	<span class="n">port1_mode</span><span class="p">;</span>	<span class="cm">/* device mode for port 1	*/</span>
	<span class="n">u32</span>	<span class="n">exec</span><span class="p">;</span>		<span class="cm">/* exec vector			*/</span>
	<span class="n">u32</span>	<span class="n">bootenv</span><span class="p">;</span>	<span class="cm">/* fimware boot env		*/</span>
	<span class="n">u32</span>	<span class="n">rsvd_b</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span>	<span class="n">md5sum</span><span class="p">[</span><span class="n">BFI_IOC_MD5SUM_SZ</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define BFI_FWBOOT_DEVMODE_OFF		4</span>
<span class="cp">#define BFI_FWBOOT_TYPE_OFF		8</span>
<span class="cp">#define BFI_FWBOOT_ENV_OFF		12</span>
<span class="cp">#define BFI_FWBOOT_DEVMODE(__asic_gen, __asic_mode, __p0_mode, __p1_mode) \</span>
<span class="cp">	(((u32)(__asic_gen)) &lt;&lt; 24 |		\</span>
<span class="cp">	 ((u32)(__asic_mode)) &lt;&lt; 16 |		\</span>
<span class="cp">	 ((u32)(__p0_mode)) &lt;&lt; 8 |		\</span>
<span class="cp">	 ((u32)(__p1_mode)))</span>

<span class="cp">#define BFI_FWBOOT_TYPE_NORMAL	0</span>
<span class="cp">#define BFI_FWBOOT_TYPE_MEMTEST	2</span>
<span class="cp">#define BFI_FWBOOT_ENV_OS       0</span>

<span class="k">enum</span> <span class="n">bfi_port_mode</span> <span class="p">{</span>
	<span class="n">BFI_PORT_MODE_FC</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFI_PORT_MODE_ETH</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfi_ioc_hbeat_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>  <span class="n">mh</span><span class="p">;</span>		<span class="cm">/*  common msg header		*/</span>
	<span class="n">u32</span>	   <span class="n">hb_count</span><span class="p">;</span>	<span class="cm">/*  current heart beat count	*/</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IOC hardware/firmware state</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfi_ioc_state</span> <span class="p">{</span>
	<span class="n">BFI_IOC_UNINIT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/*  not initialized		     */</span>
	<span class="n">BFI_IOC_INITING</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/*  h/w is being initialized	     */</span>
	<span class="n">BFI_IOC_HWINIT</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/*  h/w is initialized		     */</span>
	<span class="n">BFI_IOC_CFG</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/*  IOC configuration in progress   */</span>
	<span class="n">BFI_IOC_OP</span>		<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>	<span class="cm">/*  IOC is operational		     */</span>
	<span class="n">BFI_IOC_DISABLING</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>	<span class="cm">/*  IOC is being disabled	     */</span>
	<span class="n">BFI_IOC_DISABLED</span>	<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>	<span class="cm">/*  IOC is disabled		     */</span>
	<span class="n">BFI_IOC_CFG_DISABLED</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>	<span class="cm">/*  IOC is being disabled;transient */</span>
	<span class="n">BFI_IOC_FAIL</span>		<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>	<span class="cm">/*  IOC heart-beat failure	     */</span>
	<span class="n">BFI_IOC_MEMTEST</span>		<span class="o">=</span> <span class="mi">9</span><span class="p">,</span>	<span class="cm">/*  IOC is doing memtest	     */</span>
<span class="p">};</span>

<span class="cp">#define BFI_IOC_ENDIAN_SIG  0x12345678</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">BFI_ADAPTER_TYPE_FC</span>	<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>		<span class="cm">/*  FC adapters	   */</span>
	<span class="n">BFI_ADAPTER_TYPE_MK</span>	<span class="o">=</span> <span class="mh">0x0f0000</span><span class="p">,</span>	<span class="cm">/*  adapter type mask     */</span>
	<span class="n">BFI_ADAPTER_TYPE_SH</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>	        <span class="cm">/*  adapter type shift    */</span>
	<span class="n">BFI_ADAPTER_NPORTS_MK</span>	<span class="o">=</span> <span class="mh">0xff00</span><span class="p">,</span>	<span class="cm">/*  number of ports mask  */</span>
	<span class="n">BFI_ADAPTER_NPORTS_SH</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>	        <span class="cm">/*  number of ports shift */</span>
	<span class="n">BFI_ADAPTER_SPEED_MK</span>	<span class="o">=</span> <span class="mh">0xff</span><span class="p">,</span>		<span class="cm">/*  adapter speed mask    */</span>
	<span class="n">BFI_ADAPTER_SPEED_SH</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	        <span class="cm">/*  adapter speed shift   */</span>
	<span class="n">BFI_ADAPTER_PROTO</span>	<span class="o">=</span> <span class="mh">0x100000</span><span class="p">,</span>	<span class="cm">/*  prototype adapaters   */</span>
	<span class="n">BFI_ADAPTER_TTV</span>		<span class="o">=</span> <span class="mh">0x200000</span><span class="p">,</span>	<span class="cm">/*  TTV debug capable     */</span>
	<span class="n">BFI_ADAPTER_UNSUPP</span>	<span class="o">=</span> <span class="mh">0x400000</span><span class="p">,</span>	<span class="cm">/*  unknown adapter type  */</span>
<span class="p">};</span>

<span class="cp">#define BFI_ADAPTER_GETP(__prop, __adap_prop)			\</span>
<span class="cp">	(((__adap_prop) &amp; BFI_ADAPTER_ ## __prop ## _MK) &gt;&gt;	\</span>
<span class="cp">		BFI_ADAPTER_ ## __prop ## _SH)</span>
<span class="cp">#define BFI_ADAPTER_SETP(__prop, __val)				\</span>
<span class="cp">	((__val) &lt;&lt; BFI_ADAPTER_ ## __prop ## _SH)</span>
<span class="cp">#define BFI_ADAPTER_IS_PROTO(__adap_type)			\</span>
<span class="cp">	((__adap_type) &amp; BFI_ADAPTER_PROTO)</span>
<span class="cp">#define BFI_ADAPTER_IS_TTV(__adap_type)				\</span>
<span class="cp">	((__adap_type) &amp; BFI_ADAPTER_TTV)</span>
<span class="cp">#define BFI_ADAPTER_IS_UNSUPP(__adap_type)			\</span>
<span class="cp">	((__adap_type) &amp; BFI_ADAPTER_UNSUPP)</span>
<span class="cp">#define BFI_ADAPTER_IS_SPECIAL(__adap_type)			\</span>
<span class="cp">	((__adap_type) &amp; (BFI_ADAPTER_TTV | BFI_ADAPTER_PROTO |	\</span>
<span class="cp">			BFI_ADAPTER_UNSUPP))</span>

<span class="cm">/*</span>
<span class="cm"> * BFI_IOC_H2I_ENABLE_REQ &amp; BFI_IOC_H2I_DISABLE_REQ messages</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_ioc_ctrl_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>
	<span class="n">u16</span>			<span class="n">clscode</span><span class="p">;</span>
	<span class="n">u16</span>			<span class="n">rsvd</span><span class="p">;</span>
	<span class="n">u32</span>		<span class="n">tv_sec</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#define bfi_ioc_enable_req_t struct bfi_ioc_ctrl_req_s;</span>
<span class="cp">#define bfi_ioc_disable_req_t struct bfi_ioc_ctrl_req_s;</span>

<span class="cm">/*</span>
<span class="cm"> * BFI_IOC_I2H_ENABLE_REPLY &amp; BFI_IOC_I2H_DISABLE_REPLY messages</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_ioc_ctrl_reply_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>		<span class="cm">/*  Common msg header     */</span>
	<span class="n">u8</span>			<span class="n">status</span><span class="p">;</span>		<span class="cm">/*  enable/disable status */</span>
	<span class="n">u8</span>			<span class="n">port_mode</span><span class="p">;</span>	<span class="cm">/*  bfa_mode_s	*/</span>
	<span class="n">u8</span>			<span class="n">cap_bm</span><span class="p">;</span>		<span class="cm">/*  capability bit mask */</span>
	<span class="n">u8</span>			<span class="n">rsvd</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#define bfi_ioc_enable_reply_t struct bfi_ioc_ctrl_reply_s;</span>
<span class="cp">#define bfi_ioc_disable_reply_t struct bfi_ioc_ctrl_reply_s;</span>

<span class="cp">#define BFI_IOC_MSGSZ   8</span>
<span class="cm">/*</span>
<span class="cm"> * H2I Messages</span>
<span class="cm"> */</span>
<span class="k">union</span> <span class="n">bfi_ioc_h2i_msg_u</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>		<span class="n">mh</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_ioc_ctrl_req_s</span>	<span class="n">enable_req</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_ioc_ctrl_req_s</span>	<span class="n">disable_req</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_ioc_getattr_req_s</span>	<span class="n">getattr_req</span><span class="p">;</span>
	<span class="n">u32</span>			<span class="n">mboxmsg</span><span class="p">[</span><span class="n">BFI_IOC_MSGSZ</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * I2H Messages</span>
<span class="cm"> */</span>
<span class="k">union</span> <span class="n">bfi_ioc_i2h_msg_u</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>		<span class="n">mh</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_ioc_ctrl_reply_s</span>	<span class="n">fw_event</span><span class="p">;</span>
	<span class="n">u32</span>			<span class="n">mboxmsg</span><span class="p">[</span><span class="n">BFI_IOC_MSGSZ</span><span class="p">];</span>
<span class="p">};</span>


<span class="cm">/*</span>
<span class="cm"> *----------------------------------------------------------------------</span>
<span class="cm"> *				PBC</span>
<span class="cm"> *----------------------------------------------------------------------</span>
<span class="cm"> */</span>

<span class="cp">#define BFI_PBC_MAX_BLUNS	8</span>
<span class="cp">#define BFI_PBC_MAX_VPORTS	16</span>
<span class="cp">#define BFI_PBC_PORT_DISABLED	2</span>

<span class="cm">/*</span>
<span class="cm"> * PBC boot lun configuration</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_pbc_blun_s</span> <span class="p">{</span>
	<span class="n">wwn_t</span>		<span class="n">tgt_pwwn</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">scsi_lun</span>	<span class="n">tgt_lun</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * PBC virtual port configuration</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_pbc_vport_s</span> <span class="p">{</span>
	<span class="n">wwn_t</span>		<span class="n">vp_pwwn</span><span class="p">;</span>
	<span class="n">wwn_t</span>		<span class="n">vp_nwwn</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * BFI pre-boot configuration information</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_pbc_s</span> <span class="p">{</span>
	<span class="n">u8</span>		<span class="n">port_enabled</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">boot_enabled</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">nbluns</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">nvports</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">port_speed</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">rsvd_a</span><span class="p">;</span>
	<span class="n">u16</span>	<span class="n">hss</span><span class="p">;</span>
	<span class="n">wwn_t</span>		<span class="n">pbc_pwwn</span><span class="p">;</span>
	<span class="n">wwn_t</span>		<span class="n">pbc_nwwn</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_pbc_blun_s</span> <span class="n">blun</span><span class="p">[</span><span class="n">BFI_PBC_MAX_BLUNS</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">bfi_pbc_vport_s</span> <span class="n">vport</span><span class="p">[</span><span class="n">BFI_PBC_MAX_VPORTS</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *----------------------------------------------------------------------</span>
<span class="cm"> *				MSGQ</span>
<span class="cm"> *----------------------------------------------------------------------</span>
<span class="cm"> */</span>
<span class="cp">#define BFI_MSGQ_FULL(_q)	(((_q-&gt;pi + 1) % _q-&gt;q_depth) == _q-&gt;ci)</span>
<span class="cp">#define BFI_MSGQ_EMPTY(_q)	(_q-&gt;pi == _q-&gt;ci)</span>
<span class="cp">#define BFI_MSGQ_UPDATE_CI(_q)	(_q-&gt;ci = (_q-&gt;ci + 1) % _q-&gt;q_depth)</span>
<span class="cp">#define BFI_MSGQ_UPDATE_PI(_q)	(_q-&gt;pi = (_q-&gt;pi + 1) % _q-&gt;q_depth)</span>

<span class="cm">/* q_depth must be power of 2 */</span>
<span class="cp">#define BFI_MSGQ_FREE_CNT(_q)	((_q-&gt;ci - _q-&gt;pi - 1) &amp; (_q-&gt;q_depth - 1))</span>

<span class="k">enum</span> <span class="n">bfi_msgq_h2i_msgs_e</span> <span class="p">{</span>
	<span class="n">BFI_MSGQ_H2I_INIT_REQ</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFI_MSGQ_H2I_DOORBELL</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">BFI_MSGQ_H2I_SHUTDOWN</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfi_msgq_i2h_msgs_e</span> <span class="p">{</span>
	<span class="n">BFI_MSGQ_I2H_INIT_RSP</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFI_MSGQ_I2H_DOORBELL</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>


<span class="cm">/* Messages(commands/responsed/AENS will have the following header */</span>
<span class="k">struct</span> <span class="n">bfi_msgq_mhdr_s</span> <span class="p">{</span>
	<span class="n">u8</span>		<span class="n">msg_class</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">msg_id</span><span class="p">;</span>
	<span class="n">u16</span>	<span class="n">msg_token</span><span class="p">;</span>
	<span class="n">u16</span>	<span class="n">num_entries</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">enet_id</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">rsvd</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define bfi_msgq_mhdr_set(_mh, _mc, _mid, _tok, _enet_id) do {        \</span>
<span class="cp">	(_mh).msg_class		= (_mc);      \</span>
<span class="cp">	(_mh).msg_id		= (_mid);      \</span>
<span class="cp">	(_mh).msg_token		= (_tok);      \</span>
<span class="cp">	(_mh).enet_id		= (_enet_id);      \</span>
<span class="cp">} while (0)</span>

<span class="cm">/*</span>
<span class="cm"> * Mailbox  for messaging interface</span>
<span class="cm"> *</span>
<span class="cm">*/</span>
<span class="cp">#define BFI_MSGQ_CMD_ENTRY_SIZE		(64)    </span><span class="cm">/* TBD */</span><span class="cp"></span>
<span class="cp">#define BFI_MSGQ_RSP_ENTRY_SIZE		(64)    </span><span class="cm">/* TBD */</span><span class="cp"></span>
<span class="cp">#define BFI_MSGQ_MSG_SIZE_MAX		(2048)  </span><span class="cm">/* TBD */</span><span class="cp"></span>

<span class="k">struct</span> <span class="n">bfi_msgq_s</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">bfi_addr_u</span> <span class="n">addr</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">q_depth</span><span class="p">;</span>     <span class="cm">/* Total num of entries in the queue */</span>
	<span class="n">u8</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* BFI_ENET_MSGQ_CFG_REQ TBD init or cfg? */</span>
<span class="k">struct</span> <span class="n">bfi_msgq_cfg_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mh</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_msgq_s</span> <span class="n">cmdq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_msgq_s</span> <span class="n">rspq</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* BFI_ENET_MSGQ_CFG_RSP */</span>
<span class="k">struct</span> <span class="n">bfi_msgq_cfg_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mh</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cmd_status</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>


<span class="cm">/* BFI_MSGQ_H2I_DOORBELL */</span>
<span class="k">struct</span> <span class="n">bfi_msgq_h2i_db_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mh</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">cmdq_pi</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rspq_ci</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* BFI_MSGQ_I2H_DOORBELL */</span>
<span class="k">struct</span> <span class="n">bfi_msgq_i2h_db_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mh</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rspq_pi</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">cmdq_ci</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#pragma pack()</span>

<span class="cm">/* BFI port specific */</span>
<span class="cp">#pragma pack(1)</span>

<span class="k">enum</span> <span class="n">bfi_port_h2i</span> <span class="p">{</span>
	<span class="n">BFI_PORT_H2I_ENABLE_REQ</span>         <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">),</span>
	<span class="n">BFI_PORT_H2I_DISABLE_REQ</span>        <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="n">BFI_PORT_H2I_GET_STATS_REQ</span>      <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">),</span>
	<span class="n">BFI_PORT_H2I_CLEAR_STATS_REQ</span>    <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfi_port_i2h</span> <span class="p">{</span>
	<span class="n">BFI_PORT_I2H_ENABLE_RSP</span>         <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
	<span class="n">BFI_PORT_I2H_DISABLE_RSP</span>        <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="n">BFI_PORT_I2H_GET_STATS_RSP</span>      <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
	<span class="n">BFI_PORT_I2H_CLEAR_STATS_RSP</span>    <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Generic REQ type</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_port_generic_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>  <span class="n">mh</span><span class="p">;</span>          <span class="cm">/*  msg header		*/</span>
	<span class="n">u32</span>     <span class="n">msgtag</span><span class="p">;</span>         <span class="cm">/*  msgtag for reply                */</span>
	<span class="n">u32</span>     <span class="n">rsvd</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Generic RSP type</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_port_generic_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>  <span class="n">mh</span><span class="p">;</span>          <span class="cm">/*  common msg header               */</span>
	<span class="n">u8</span>              <span class="n">status</span><span class="p">;</span>         <span class="cm">/*  port enable status              */</span>
	<span class="n">u8</span>              <span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u32</span>     <span class="n">msgtag</span><span class="p">;</span>         <span class="cm">/*  msgtag for reply                */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * BFI_PORT_H2I_GET_STATS_REQ</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_port_get_stats_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>  <span class="n">mh</span><span class="p">;</span>          <span class="cm">/*  common msg header               */</span>
	<span class="k">union</span> <span class="n">bfi_addr_u</span>   <span class="n">dma_addr</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">bfi_port_h2i_msg_u</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>               <span class="n">mh</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_port_generic_req_s</span>   <span class="n">enable_req</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_port_generic_req_s</span>   <span class="n">disable_req</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_port_get_stats_req_s</span> <span class="n">getstats_req</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_port_generic_req_s</span>   <span class="n">clearstats_req</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">bfi_port_i2h_msg_u</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>               <span class="n">mh</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_port_generic_rsp_s</span>   <span class="n">enable_rsp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_port_generic_rsp_s</span>   <span class="n">disable_rsp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_port_generic_rsp_s</span>   <span class="n">getstats_rsp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_port_generic_rsp_s</span>   <span class="n">clearstats_rsp</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *----------------------------------------------------------------------</span>
<span class="cm"> *				ABLK</span>
<span class="cm"> *----------------------------------------------------------------------</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfi_ablk_h2i_msgs_e</span> <span class="p">{</span>
	<span class="n">BFI_ABLK_H2I_QUERY</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFI_ABLK_H2I_ADPT_CONFIG</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">BFI_ABLK_H2I_PORT_CONFIG</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">BFI_ABLK_H2I_PF_CREATE</span>		<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">BFI_ABLK_H2I_PF_DELETE</span>		<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">BFI_ABLK_H2I_PF_UPDATE</span>		<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">BFI_ABLK_H2I_OPTROM_ENABLE</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">BFI_ABLK_H2I_OPTROM_DISABLE</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfi_ablk_i2h_msgs_e</span> <span class="p">{</span>
	<span class="n">BFI_ABLK_I2H_QUERY</span>		<span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_ABLK_H2I_QUERY</span><span class="p">),</span>
	<span class="n">BFI_ABLK_I2H_ADPT_CONFIG</span>	<span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_ABLK_H2I_ADPT_CONFIG</span><span class="p">),</span>
	<span class="n">BFI_ABLK_I2H_PORT_CONFIG</span>	<span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_ABLK_H2I_PORT_CONFIG</span><span class="p">),</span>
	<span class="n">BFI_ABLK_I2H_PF_CREATE</span>		<span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_ABLK_H2I_PF_CREATE</span><span class="p">),</span>
	<span class="n">BFI_ABLK_I2H_PF_DELETE</span>		<span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_ABLK_H2I_PF_DELETE</span><span class="p">),</span>
	<span class="n">BFI_ABLK_I2H_PF_UPDATE</span>		<span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_ABLK_H2I_PF_UPDATE</span><span class="p">),</span>
	<span class="n">BFI_ABLK_I2H_OPTROM_ENABLE</span>	<span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_ABLK_H2I_OPTROM_ENABLE</span><span class="p">),</span>
	<span class="n">BFI_ABLK_I2H_OPTROM_DISABLE</span>	<span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_ABLK_H2I_OPTROM_DISABLE</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/* BFI_ABLK_H2I_QUERY */</span>
<span class="k">struct</span> <span class="n">bfi_ablk_h2i_query_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">bfi_addr_u</span>	<span class="n">addr</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* BFI_ABL_H2I_ADPT_CONFIG, BFI_ABLK_H2I_PORT_CONFIG */</span>
<span class="k">struct</span> <span class="n">bfi_ablk_h2i_cfg_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">mode</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">port</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">max_pf</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">max_vf</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * BFI_ABLK_H2I_PF_CREATE, BFI_ABLK_H2I_PF_DELETE,</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_ablk_h2i_pf_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">pcifn</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">port</span><span class="p">;</span>
	<span class="n">u16</span>			<span class="n">pers</span><span class="p">;</span>
	<span class="n">u32</span>			<span class="n">bw</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* BFI_ABLK_H2I_OPTROM_ENABLE, BFI_ABLK_H2I_OPTROM_DISABLE */</span>
<span class="k">struct</span> <span class="n">bfi_ablk_h2i_optrom_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * BFI_ABLK_I2H_QUERY</span>
<span class="cm"> * BFI_ABLK_I2H_PORT_CONFIG</span>
<span class="cm"> * BFI_ABLK_I2H_PF_CREATE</span>
<span class="cm"> * BFI_ABLK_I2H_PF_DELETE</span>
<span class="cm"> * BFI_ABLK_I2H_PF_UPDATE</span>
<span class="cm"> * BFI_ABLK_I2H_OPTROM_ENABLE</span>
<span class="cm"> * BFI_ABLK_I2H_OPTROM_DISABLE</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_ablk_i2h_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">status</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">pcifn</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">port_mode</span><span class="p">;</span>
<span class="p">};</span>


<span class="cm">/*</span>
<span class="cm"> *	CEE module specific messages</span>
<span class="cm"> */</span>

<span class="cm">/* Mailbox commands from host to firmware */</span>
<span class="k">enum</span> <span class="n">bfi_cee_h2i_msgs_e</span> <span class="p">{</span>
	<span class="n">BFI_CEE_H2I_GET_CFG_REQ</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFI_CEE_H2I_RESET_STATS</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">BFI_CEE_H2I_GET_STATS_REQ</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfi_cee_i2h_msgs_e</span> <span class="p">{</span>
	<span class="n">BFI_CEE_I2H_GET_CFG_RSP</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
	<span class="n">BFI_CEE_I2H_RESET_STATS_RSP</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="n">BFI_CEE_I2H_GET_STATS_RSP</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * H2I command structure for resetting the stats</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_cee_reset_stats_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>  <span class="n">mh</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Get configuration  command from host</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_cee_get_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">bfi_addr_u</span>	<span class="n">dma_addr</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Reply message from firmware</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_cee_get_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">cmd_status</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Reply message from firmware</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_cee_stats_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">cmd_status</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* Mailbox message structures from firmware to host	*/</span>
<span class="k">union</span> <span class="n">bfi_cee_i2h_msg_u</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>		<span class="n">mh</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_cee_get_rsp_s</span>	<span class="n">get_rsp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_cee_stats_rsp_s</span>	<span class="n">stats_rsp</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * SFP related</span>
<span class="cm"> */</span>

<span class="k">enum</span> <span class="n">bfi_sfp_h2i_e</span> <span class="p">{</span>
	<span class="n">BFI_SFP_H2I_SHOW</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFI_SFP_H2I_SCN</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfi_sfp_i2h_e</span> <span class="p">{</span>
	<span class="n">BFI_SFP_I2H_SHOW</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_SFP_H2I_SHOW</span><span class="p">),</span>
	<span class="n">BFI_SFP_I2H_SCN</span>	 <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_SFP_H2I_SCN</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	SFP state change notification</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_sfp_scn_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mhr</span><span class="p">;</span>	<span class="cm">/* host msg header        */</span>
	<span class="n">u8</span>	<span class="n">event</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">sfpid</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">pomlvl</span><span class="p">;</span>	<span class="cm">/* pom level: normal/warning/alarm */</span>
	<span class="n">u8</span>	<span class="n">is_elb</span><span class="p">;</span>	<span class="cm">/* e-loopback */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	SFP state</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_sfp_stat_e</span> <span class="p">{</span>
	<span class="n">BFA_SFP_STATE_INIT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/* SFP state is uninit	*/</span>
	<span class="n">BFA_SFP_STATE_REMOVED</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/* SFP is removed	*/</span>
	<span class="n">BFA_SFP_STATE_INSERTED</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/* SFP is inserted	*/</span>
	<span class="n">BFA_SFP_STATE_VALID</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/* SFP is valid		*/</span>
	<span class="n">BFA_SFP_STATE_UNSUPPORT</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>	<span class="cm">/* SFP is unsupport	*/</span>
	<span class="n">BFA_SFP_STATE_FAILED</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>	<span class="cm">/* SFP i2c read fail	*/</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  SFP memory access type</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfi_sfp_mem_e</span> <span class="p">{</span>
	<span class="n">BFI_SFP_MEM_ALL</span>		<span class="o">=</span> <span class="mh">0x1</span><span class="p">,</span>  <span class="cm">/* access all data field */</span>
	<span class="n">BFI_SFP_MEM_DIAGEXT</span>	<span class="o">=</span> <span class="mh">0x2</span><span class="p">,</span>  <span class="cm">/* access diag ext data field only */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfi_sfp_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">memtype</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">bfi_alen_s</span>	<span class="n">alen</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfi_sfp_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">status</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">state</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">rsvd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	FLASH module specific</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfi_flash_h2i_msgs</span> <span class="p">{</span>
	<span class="n">BFI_FLASH_H2I_QUERY_REQ</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFI_FLASH_H2I_ERASE_REQ</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">BFI_FLASH_H2I_WRITE_REQ</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">BFI_FLASH_H2I_READ_REQ</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">BFI_FLASH_H2I_BOOT_VER_REQ</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfi_flash_i2h_msgs</span> <span class="p">{</span>
	<span class="n">BFI_FLASH_I2H_QUERY_RSP</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
	<span class="n">BFI_FLASH_I2H_ERASE_RSP</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="n">BFI_FLASH_I2H_WRITE_RSP</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
	<span class="n">BFI_FLASH_I2H_READ_RSP</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
	<span class="n">BFI_FLASH_I2H_BOOT_VER_RSP</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
	<span class="n">BFI_FLASH_I2H_EVENT</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">127</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Flash query request</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_flash_query_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mh</span><span class="p">;</span>	<span class="cm">/* Common msg header */</span>
	<span class="k">struct</span> <span class="n">bfi_alen_s</span> <span class="n">alen</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Flash erase request</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_flash_erase_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>	<span class="cm">/* Common msg header */</span>
	<span class="n">u32</span>	<span class="n">type</span><span class="p">;</span>	<span class="cm">/* partition type */</span>
	<span class="n">u8</span>	<span class="n">instance</span><span class="p">;</span> <span class="cm">/* partition instance */</span>
	<span class="n">u8</span>	<span class="n">rsv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Flash write request</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_flash_write_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mh</span><span class="p">;</span>	<span class="cm">/* Common msg header */</span>
	<span class="k">struct</span> <span class="n">bfi_alen_s</span> <span class="n">alen</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">type</span><span class="p">;</span>	<span class="cm">/* partition type */</span>
	<span class="n">u8</span>	<span class="n">instance</span><span class="p">;</span> <span class="cm">/* partition instance */</span>
	<span class="n">u8</span>	<span class="n">last</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">rsv</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u32</span>	<span class="n">offset</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">length</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Flash read request</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_flash_read_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mh</span><span class="p">;</span>	<span class="cm">/* Common msg header */</span>
	<span class="n">u32</span>	<span class="n">type</span><span class="p">;</span>		<span class="cm">/* partition type */</span>
	<span class="n">u8</span>	<span class="n">instance</span><span class="p">;</span>	<span class="cm">/* partition instance */</span>
	<span class="n">u8</span>	<span class="n">rsv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u32</span>	<span class="n">offset</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">length</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_alen_s</span> <span class="n">alen</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Flash query response</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_flash_query_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mh</span><span class="p">;</span>	<span class="cm">/* Common msg header */</span>
	<span class="n">u32</span>	<span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Flash read response</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_flash_read_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mh</span><span class="p">;</span>	<span class="cm">/* Common msg header */</span>
	<span class="n">u32</span>	<span class="n">type</span><span class="p">;</span>       <span class="cm">/* partition type */</span>
	<span class="n">u8</span>	<span class="n">instance</span><span class="p">;</span>   <span class="cm">/* partition instance */</span>
	<span class="n">u8</span>	<span class="n">rsv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u32</span>	<span class="n">status</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">length</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Flash write response</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_flash_write_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mh</span><span class="p">;</span>	<span class="cm">/* Common msg header */</span>
	<span class="n">u32</span>	<span class="n">type</span><span class="p">;</span>       <span class="cm">/* partition type */</span>
	<span class="n">u8</span>	<span class="n">instance</span><span class="p">;</span>   <span class="cm">/* partition instance */</span>
	<span class="n">u8</span>	<span class="n">rsv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u32</span>	<span class="n">status</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">length</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Flash erase response</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_flash_erase_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mh</span><span class="p">;</span>	<span class="cm">/* Common msg header */</span>
	<span class="n">u32</span>	<span class="n">type</span><span class="p">;</span>		<span class="cm">/* partition type */</span>
	<span class="n">u8</span>	<span class="n">instance</span><span class="p">;</span>	<span class="cm">/* partition instance */</span>
	<span class="n">u8</span>	<span class="n">rsv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u32</span>	<span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Flash event notification</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_flash_event_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>	<span class="cm">/* Common msg header */</span>
	<span class="n">bfa_status_t</span>		<span class="n">status</span><span class="p">;</span>
	<span class="n">u32</span>			<span class="n">param</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *----------------------------------------------------------------------</span>
<span class="cm"> *				DIAG</span>
<span class="cm"> *----------------------------------------------------------------------</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfi_diag_h2i</span> <span class="p">{</span>
	<span class="n">BFI_DIAG_H2I_PORTBEACON</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFI_DIAG_H2I_LOOPBACK</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">BFI_DIAG_H2I_FWPING</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">BFI_DIAG_H2I_TEMPSENSOR</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">BFI_DIAG_H2I_LEDTEST</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">BFI_DIAG_H2I_QTEST</span>      <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfi_diag_i2h</span> <span class="p">{</span>
	<span class="n">BFI_DIAG_I2H_PORTBEACON</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_DIAG_H2I_PORTBEACON</span><span class="p">),</span>
	<span class="n">BFI_DIAG_I2H_LOOPBACK</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_DIAG_H2I_LOOPBACK</span><span class="p">),</span>
	<span class="n">BFI_DIAG_I2H_FWPING</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_DIAG_H2I_FWPING</span><span class="p">),</span>
	<span class="n">BFI_DIAG_I2H_TEMPSENSOR</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_DIAG_H2I_TEMPSENSOR</span><span class="p">),</span>
	<span class="n">BFI_DIAG_I2H_LEDTEST</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_DIAG_H2I_LEDTEST</span><span class="p">),</span>
	<span class="n">BFI_DIAG_I2H_QTEST</span>      <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="n">BFI_DIAG_H2I_QTEST</span><span class="p">),</span>
<span class="p">};</span>

<span class="cp">#define BFI_DIAG_MAX_SGES	2</span>
<span class="cp">#define BFI_DIAG_DMA_BUF_SZ	(2 * 1024)</span>
<span class="cp">#define BFI_BOOT_MEMTEST_RES_ADDR 0x900</span>
<span class="cp">#define BFI_BOOT_MEMTEST_RES_SIG  0xA0A1A2A3</span>

<span class="k">struct</span> <span class="n">bfi_diag_lb_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mh</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">loopcnt</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">pattern</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">lb_mode</span><span class="p">;</span>        <span class="cm">/*!&lt; bfa_port_opmode_t */</span>
	<span class="n">u8</span>	<span class="n">speed</span><span class="p">;</span>          <span class="cm">/*!&lt; bfa_port_speed_t */</span>
	<span class="n">u8</span>	<span class="n">rsvd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfi_diag_lb_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>  <span class="n">mh</span><span class="p">;</span>          <span class="cm">/* 4 bytes */</span>
	<span class="k">struct</span> <span class="n">bfa_diag_loopback_result_s</span> <span class="n">res</span><span class="p">;</span> <span class="cm">/* 16 bytes */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfi_diag_fwping_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mh</span><span class="p">;</span>	<span class="cm">/* 4 bytes */</span>
	<span class="k">struct</span> <span class="n">bfi_alen_s</span> <span class="n">alen</span><span class="p">;</span> <span class="cm">/* 12 bytes */</span>
	<span class="n">u32</span>	<span class="n">data</span><span class="p">;</span>           <span class="cm">/* user input data pattern */</span>
	<span class="n">u32</span>	<span class="n">count</span><span class="p">;</span>          <span class="cm">/* user input dma count */</span>
	<span class="n">u8</span>	<span class="n">qtag</span><span class="p">;</span>           <span class="cm">/* track CPE vc */</span>
	<span class="n">u8</span>	<span class="n">rsv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfi_diag_fwping_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>  <span class="n">mh</span><span class="p">;</span>          <span class="cm">/* 4 bytes */</span>
	<span class="n">u32</span>	<span class="n">data</span><span class="p">;</span>           <span class="cm">/* user input data pattern    */</span>
	<span class="n">u8</span>	<span class="n">qtag</span><span class="p">;</span>           <span class="cm">/* track CPE vc               */</span>
	<span class="n">u8</span>	<span class="n">dma_status</span><span class="p">;</span>     <span class="cm">/* dma status                 */</span>
	<span class="n">u8</span>	<span class="n">rsv</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Temperature Sensor</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_diag_ts_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span> <span class="n">mh</span><span class="p">;</span>	<span class="cm">/* 4 bytes */</span>
	<span class="n">u16</span>	<span class="n">temp</span><span class="p">;</span>           <span class="cm">/* 10-bit A/D value */</span>
	<span class="n">u16</span>	<span class="n">brd_temp</span><span class="p">;</span>       <span class="cm">/* 9-bit board temp */</span>
	<span class="n">u8</span>	<span class="n">status</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">ts_junc</span><span class="p">;</span>        <span class="cm">/* show junction tempsensor   */</span>
	<span class="n">u8</span>	<span class="n">ts_brd</span><span class="p">;</span>         <span class="cm">/* show board tempsensor      */</span>
	<span class="n">u8</span>	<span class="n">rsv</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#define bfi_diag_ts_rsp_t struct bfi_diag_ts_req_s</span>

<span class="k">struct</span> <span class="n">bfi_diag_ledtest_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>  <span class="n">mh</span><span class="p">;</span>  <span class="cm">/* 4 bytes */</span>
	<span class="n">u8</span>	<span class="n">cmd</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">color</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">portid</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">led</span><span class="p">;</span>    <span class="cm">/* bitmap of LEDs to be tested */</span>
	<span class="n">u16</span>	<span class="n">freq</span><span class="p">;</span>   <span class="cm">/* no. of blinks every 10 secs */</span>
	<span class="n">u8</span>	<span class="n">rsv</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* notify host led operation is done */</span>
<span class="k">struct</span> <span class="n">bfi_diag_ledtest_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>  <span class="n">mh</span><span class="p">;</span>  <span class="cm">/* 4 bytes */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfi_diag_portbeacon_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>  <span class="n">mh</span><span class="p">;</span>  <span class="cm">/* 4 bytes */</span>
	<span class="n">u32</span>	<span class="n">period</span><span class="p">;</span> <span class="cm">/* beaconing period */</span>
	<span class="n">u8</span>	<span class="n">beacon</span><span class="p">;</span> <span class="cm">/* 1: beacon on */</span>
	<span class="n">u8</span>	<span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* notify host the beacon is off */</span>
<span class="k">struct</span> <span class="n">bfi_diag_portbeacon_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>  <span class="n">mh</span><span class="p">;</span>  <span class="cm">/* 4 bytes */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfi_diag_qtest_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>             <span class="cm">/* 4 bytes */</span>
	<span class="n">u32</span>	<span class="n">data</span><span class="p">[</span><span class="n">BFI_LMSG_PL_WSZ</span><span class="p">];</span> <span class="cm">/* fill up tcm prefetch area */</span>
<span class="p">};</span>
<span class="cp">#define bfi_diag_qtest_rsp_t struct bfi_diag_qtest_req_s</span>

<span class="cm">/*</span>
<span class="cm"> *	PHY module specific</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfi_phy_h2i_msgs_e</span> <span class="p">{</span>
	<span class="n">BFI_PHY_H2I_QUERY_REQ</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFI_PHY_H2I_STATS_REQ</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">BFI_PHY_H2I_WRITE_REQ</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">BFI_PHY_H2I_READ_REQ</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfi_phy_i2h_msgs_e</span> <span class="p">{</span>
	<span class="n">BFI_PHY_I2H_QUERY_RSP</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
	<span class="n">BFI_PHY_I2H_STATS_RSP</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="n">BFI_PHY_I2H_WRITE_RSP</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
	<span class="n">BFI_PHY_I2H_READ_RSP</span> <span class="o">=</span> <span class="n">BFA_I2HM</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * External PHY query request</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_phy_query_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>             <span class="cm">/* Common msg header */</span>
	<span class="n">u8</span>			<span class="n">instance</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">rsv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">bfi_alen_s</span>	<span class="n">alen</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * External PHY stats request</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_phy_stats_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>             <span class="cm">/* Common msg header */</span>
	<span class="n">u8</span>			<span class="n">instance</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">rsv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">bfi_alen_s</span>	<span class="n">alen</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * External PHY write request</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_phy_write_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>             <span class="cm">/* Common msg header */</span>
	<span class="n">u8</span>		<span class="n">instance</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">last</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">rsv</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u32</span>		<span class="n">offset</span><span class="p">;</span>
	<span class="n">u32</span>		<span class="n">length</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_alen_s</span>	<span class="n">alen</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * External PHY read request</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_phy_read_req_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>	<span class="cm">/* Common msg header */</span>
	<span class="n">u8</span>		<span class="n">instance</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">rsv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u32</span>		<span class="n">offset</span><span class="p">;</span>
	<span class="n">u32</span>		<span class="n">length</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfi_alen_s</span>	<span class="n">alen</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * External PHY query response</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_phy_query_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>	<span class="cm">/* Common msg header */</span>
	<span class="n">u32</span>			<span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * External PHY stats response</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_phy_stats_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>	<span class="cm">/* Common msg header */</span>
	<span class="n">u32</span>			<span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * External PHY read response</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_phy_read_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>	<span class="cm">/* Common msg header */</span>
	<span class="n">u32</span>			<span class="n">status</span><span class="p">;</span>
	<span class="n">u32</span>		<span class="n">length</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * External PHY write response</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfi_phy_write_rsp_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfi_mhdr_s</span>	<span class="n">mh</span><span class="p">;</span>	<span class="cm">/* Common msg header */</span>
	<span class="n">u32</span>			<span class="n">status</span><span class="p">;</span>
	<span class="n">u32</span>			<span class="n">length</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#pragma pack()</span>

<span class="cp">#endif </span><span class="cm">/* __BFI_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
