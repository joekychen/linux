<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › scsi › bfa › bfa_defs_svc.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>bfa_defs_svc.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2005-2010 Brocade Communications Systems, Inc.</span>
<span class="cm"> * All rights reserved</span>
<span class="cm"> * www.brocade.com</span>
<span class="cm"> *</span>
<span class="cm"> * Linux driver for Brocade Fibre Channel Host Bus Adapter.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify it</span>
<span class="cm"> * under the terms of the GNU General Public License (GPL) Version 2 as</span>
<span class="cm"> * published by the Free Software Foundation</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful, but</span>
<span class="cm"> * WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="cm"> * General Public License for more details.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __BFA_DEFS_SVC_H__</span>
<span class="cp">#define __BFA_DEFS_SVC_H__</span>

<span class="cp">#include &quot;bfa_defs.h&quot;</span>
<span class="cp">#include &quot;bfa_fc.h&quot;</span>
<span class="cp">#include &quot;bfi.h&quot;</span>

<span class="cp">#define BFA_IOCFC_INTR_DELAY	1125</span>
<span class="cp">#define BFA_IOCFC_INTR_LATENCY	225</span>
<span class="cp">#define BFA_IOCFCOE_INTR_DELAY	25</span>
<span class="cp">#define BFA_IOCFCOE_INTR_LATENCY 5</span>

<span class="cm">/*</span>
<span class="cm"> * Interrupt coalescing configuration.</span>
<span class="cm"> */</span>
<span class="cp">#pragma pack(1)</span>
<span class="k">struct</span> <span class="n">bfa_iocfc_intr_attr_s</span> <span class="p">{</span>
	<span class="n">u8</span>		<span class="n">coalesce</span><span class="p">;</span>	<span class="cm">/*  enable/disable coalescing */</span>
	<span class="n">u8</span>		<span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">__be16</span>		<span class="n">latency</span><span class="p">;</span>	<span class="cm">/*  latency in microseconds   */</span>
	<span class="n">__be16</span>		<span class="n">delay</span><span class="p">;</span>		<span class="cm">/*  delay in microseconds     */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IOC firmware configuraton</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_iocfc_fwcfg_s</span> <span class="p">{</span>
	<span class="n">u16</span>		<span class="n">num_fabrics</span><span class="p">;</span>	<span class="cm">/*  number of fabrics		*/</span>
	<span class="n">u16</span>		<span class="n">num_lports</span><span class="p">;</span>	<span class="cm">/*  number of local lports	*/</span>
	<span class="n">u16</span>		<span class="n">num_rports</span><span class="p">;</span>	<span class="cm">/*  number of remote ports	*/</span>
	<span class="n">u16</span>		<span class="n">num_ioim_reqs</span><span class="p">;</span>	<span class="cm">/*  number of IO reqs		*/</span>
	<span class="n">u16</span>		<span class="n">num_tskim_reqs</span><span class="p">;</span>	<span class="cm">/*  task management requests	*/</span>
	<span class="n">u16</span>		<span class="n">num_fwtio_reqs</span><span class="p">;</span>	<span class="cm">/* number of TM IO reqs in FW   */</span>
	<span class="n">u16</span>		<span class="n">num_fcxp_reqs</span><span class="p">;</span>	<span class="cm">/*  unassisted FC exchanges	*/</span>
	<span class="n">u16</span>		<span class="n">num_uf_bufs</span><span class="p">;</span>	<span class="cm">/*  unsolicited recv buffers	*/</span>
	<span class="n">u8</span>		<span class="n">num_cqs</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">fw_tick_res</span><span class="p">;</span>	<span class="cm">/*  FW clock resolution in ms */</span>
	<span class="n">u8</span>		<span class="n">rsvd</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="p">};</span>
<span class="cp">#pragma pack()</span>

<span class="k">struct</span> <span class="n">bfa_iocfc_drvcfg_s</span> <span class="p">{</span>
	<span class="n">u16</span>		<span class="n">num_reqq_elems</span><span class="p">;</span>	<span class="cm">/*  number of req queue elements */</span>
	<span class="n">u16</span>		<span class="n">num_rspq_elems</span><span class="p">;</span>	<span class="cm">/*  number of rsp queue elements */</span>
	<span class="n">u16</span>		<span class="n">num_sgpgs</span><span class="p">;</span>	<span class="cm">/*  number of total SG pages	 */</span>
	<span class="n">u16</span>		<span class="n">num_sboot_tgts</span><span class="p">;</span>	<span class="cm">/*  number of SAN boot targets	 */</span>
	<span class="n">u16</span>		<span class="n">num_sboot_luns</span><span class="p">;</span>	<span class="cm">/*  number of SAN boot luns	 */</span>
	<span class="n">u16</span>		<span class="n">ioc_recover</span><span class="p">;</span>	<span class="cm">/*  IOC recovery mode		 */</span>
	<span class="n">u16</span>		<span class="n">min_cfg</span><span class="p">;</span>	<span class="cm">/*  minimum configuration	 */</span>
	<span class="n">u16</span>		<span class="n">path_tov</span><span class="p">;</span>	<span class="cm">/*  device path timeout		*/</span>
	<span class="n">u16</span>		<span class="n">num_tio_reqs</span><span class="p">;</span>	<span class="cm">/* number of TM IO reqs	*/</span>
	<span class="n">u8</span>		<span class="n">port_mode</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">rsvd_a</span><span class="p">;</span>
	<span class="n">bfa_boolean_t</span>	<span class="n">delay_comp</span><span class="p">;</span>	<span class="cm">/* delay completion of failed</span>
<span class="cm">					 * inflight IOs */</span>
	<span class="n">u16</span>		<span class="n">num_ttsk_reqs</span><span class="p">;</span>	 <span class="cm">/* TM task management requests */</span>
	<span class="n">u32</span>		<span class="n">rsvd</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IOC configuration</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_iocfc_cfg_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_iocfc_fwcfg_s</span>	<span class="n">fwcfg</span><span class="p">;</span>	<span class="cm">/*  firmware side config */</span>
	<span class="k">struct</span> <span class="n">bfa_iocfc_drvcfg_s</span>	<span class="n">drvcfg</span><span class="p">;</span>	<span class="cm">/*  driver side config	  */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IOC firmware IO stats</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fw_ioim_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">host_abort</span><span class="p">;</span>		<span class="cm">/*  IO aborted by host driver*/</span>
	<span class="n">u32</span>	<span class="n">host_cleanup</span><span class="p">;</span>		<span class="cm">/*  IO clean up by host driver */</span>

	<span class="n">u32</span>	<span class="n">fw_io_timeout</span><span class="p">;</span>		<span class="cm">/*  IOs timedout */</span>
	<span class="n">u32</span>	<span class="n">fw_frm_parse</span><span class="p">;</span>		<span class="cm">/*  frame parsed by f/w */</span>
	<span class="n">u32</span>	<span class="n">fw_frm_data</span><span class="p">;</span>		<span class="cm">/*  fcp_data frame parsed by f/w */</span>
	<span class="n">u32</span>	<span class="n">fw_frm_rsp</span><span class="p">;</span>		<span class="cm">/*  fcp_rsp frame parsed by f/w */</span>
	<span class="n">u32</span>	<span class="n">fw_frm_xfer_rdy</span><span class="p">;</span>	<span class="cm">/*  xfer_rdy frame parsed by f/w */</span>
	<span class="n">u32</span>	<span class="n">fw_frm_bls_acc</span><span class="p">;</span>		<span class="cm">/*  BLS ACC  frame parsed by f/w */</span>
	<span class="n">u32</span>	<span class="n">fw_frm_tgt_abort</span><span class="p">;</span>	<span class="cm">/*  target ABTS parsed by f/w */</span>
	<span class="n">u32</span>	<span class="n">fw_frm_unknown</span><span class="p">;</span>		<span class="cm">/*  unknown parsed by f/w */</span>
	<span class="n">u32</span>	<span class="n">fw_data_dma</span><span class="p">;</span>		<span class="cm">/*  f/w DMA&#39;ed the data frame */</span>
	<span class="n">u32</span>	<span class="n">fw_frm_drop</span><span class="p">;</span>		<span class="cm">/*  f/w drop the frame */</span>

	<span class="n">u32</span>	<span class="n">rec_timeout</span><span class="p">;</span>		<span class="cm">/*  FW rec timed out */</span>
	<span class="n">u32</span>	<span class="n">error_rec</span><span class="p">;</span>		<span class="cm">/*  FW sending rec on</span>
<span class="cm">					 *  an error condition*/</span>
	<span class="n">u32</span>	<span class="n">wait_for_si</span><span class="p">;</span>		<span class="cm">/*  FW wait for SI */</span>
	<span class="n">u32</span>	<span class="n">rec_rsp_inval</span><span class="p">;</span>		<span class="cm">/*  REC rsp invalid */</span>
	<span class="n">u32</span>	<span class="n">seqr_io_abort</span><span class="p">;</span>		<span class="cm">/*  target does not know cmd so abort */</span>
	<span class="n">u32</span>	<span class="n">seqr_io_retry</span><span class="p">;</span>		<span class="cm">/*  SEQR failed so retry IO */</span>

	<span class="n">u32</span>	<span class="n">itn_cisc_upd_rsp</span><span class="p">;</span>	<span class="cm">/*  ITN cisc updated on fcp_rsp */</span>
	<span class="n">u32</span>	<span class="n">itn_cisc_upd_data</span><span class="p">;</span>	<span class="cm">/*  ITN cisc updated on fcp_data */</span>
	<span class="n">u32</span>	<span class="n">itn_cisc_upd_xfer_rdy</span><span class="p">;</span>	<span class="cm">/*  ITN cisc updated on fcp_data */</span>

	<span class="n">u32</span>	<span class="n">fcp_data_lost</span><span class="p">;</span>		<span class="cm">/*  fcp data lost */</span>

	<span class="n">u32</span>	<span class="n">ro_set_in_xfer_rdy</span><span class="p">;</span>	<span class="cm">/*  Target set RO in Xfer_rdy frame */</span>
	<span class="n">u32</span>	<span class="n">xfer_rdy_ooo_err</span><span class="p">;</span>	<span class="cm">/*  Out of order Xfer_rdy received */</span>
	<span class="n">u32</span>	<span class="n">xfer_rdy_unknown_err</span><span class="p">;</span>	<span class="cm">/*  unknown error in xfer_rdy frame */</span>

	<span class="n">u32</span>	<span class="n">io_abort_timeout</span><span class="p">;</span>	<span class="cm">/*  ABTS timedout  */</span>
	<span class="n">u32</span>	<span class="n">sler_initiated</span><span class="p">;</span>		<span class="cm">/*  SLER initiated */</span>

	<span class="n">u32</span>	<span class="n">unexp_fcp_rsp</span><span class="p">;</span>		<span class="cm">/*  fcp response in wrong state */</span>

	<span class="n">u32</span>	<span class="n">fcp_rsp_under_run</span><span class="p">;</span>	<span class="cm">/*  fcp rsp IO underrun */</span>
	<span class="n">u32</span>     <span class="n">fcp_rsp_under_run_wr</span><span class="p">;</span>   <span class="cm">/*  fcp rsp IO underrun for write */</span>
	<span class="n">u32</span>	<span class="n">fcp_rsp_under_run_err</span><span class="p">;</span>	<span class="cm">/*  fcp rsp IO underrun error */</span>
	<span class="n">u32</span>     <span class="n">fcp_rsp_resid_inval</span><span class="p">;</span>    <span class="cm">/*  invalid residue */</span>
	<span class="n">u32</span>	<span class="n">fcp_rsp_over_run</span><span class="p">;</span>	<span class="cm">/*  fcp rsp IO overrun */</span>
	<span class="n">u32</span>	<span class="n">fcp_rsp_over_run_err</span><span class="p">;</span>	<span class="cm">/*  fcp rsp IO overrun error */</span>
	<span class="n">u32</span>	<span class="n">fcp_rsp_proto_err</span><span class="p">;</span>	<span class="cm">/*  protocol error in fcp rsp */</span>
	<span class="n">u32</span>	<span class="n">fcp_rsp_sense_err</span><span class="p">;</span>	<span class="cm">/*  error in sense info in fcp rsp */</span>
	<span class="n">u32</span>	<span class="n">fcp_conf_req</span><span class="p">;</span>		<span class="cm">/*  FCP conf requested */</span>

	<span class="n">u32</span>	<span class="n">tgt_aborted_io</span><span class="p">;</span>		<span class="cm">/*  target initiated abort */</span>

	<span class="n">u32</span>	<span class="n">ioh_edtov_timeout_event</span><span class="p">;</span><span class="cm">/*  IOH edtov timer popped */</span>
	<span class="n">u32</span>	<span class="n">ioh_fcp_rsp_excp_event</span><span class="p">;</span>	<span class="cm">/*  IOH FCP_RSP exception */</span>
	<span class="n">u32</span>	<span class="n">ioh_fcp_conf_event</span><span class="p">;</span>	<span class="cm">/*  IOH FCP_CONF */</span>
	<span class="n">u32</span>	<span class="n">ioh_mult_frm_rsp_event</span><span class="p">;</span>	<span class="cm">/*  IOH multi_frame FCP_RSP */</span>
	<span class="n">u32</span>	<span class="n">ioh_hit_class2_event</span><span class="p">;</span>	<span class="cm">/*  IOH hit class2 */</span>
	<span class="n">u32</span>	<span class="n">ioh_miss_other_event</span><span class="p">;</span>	<span class="cm">/*  IOH miss other */</span>
	<span class="n">u32</span>	<span class="n">ioh_seq_cnt_err_event</span><span class="p">;</span>	<span class="cm">/*  IOH seq cnt error */</span>
	<span class="n">u32</span>	<span class="n">ioh_len_err_event</span><span class="p">;</span>	<span class="cm">/*  IOH len error - fcp_dl !=</span>
<span class="cm">					 *  bytes xfered */</span>
	<span class="n">u32</span>	<span class="n">ioh_seq_len_err_event</span><span class="p">;</span>	<span class="cm">/*  IOH seq len error */</span>
	<span class="n">u32</span>	<span class="n">ioh_data_oor_event</span><span class="p">;</span>	<span class="cm">/*  Data out of range */</span>
	<span class="n">u32</span>	<span class="n">ioh_ro_ooo_event</span><span class="p">;</span>	<span class="cm">/*  Relative offset out of range */</span>
	<span class="n">u32</span>	<span class="n">ioh_cpu_owned_event</span><span class="p">;</span>	<span class="cm">/*  IOH hit -iost owned by f/w */</span>
	<span class="n">u32</span>	<span class="n">ioh_unexp_frame_event</span><span class="p">;</span>	<span class="cm">/*  unexpected frame received</span>
<span class="cm">					 *  count */</span>
	<span class="n">u32</span>	<span class="n">ioh_err_int</span><span class="p">;</span>		<span class="cm">/*  IOH error int during data-phase</span>
<span class="cm">					 *  for scsi write */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_fw_tio_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">tio_conf_proc</span><span class="p">;</span>	    <span class="cm">/* TIO CONF processed */</span>
	<span class="n">u32</span>	<span class="n">tio_conf_drop</span><span class="p">;</span>      <span class="cm">/* TIO CONF dropped */</span>
	<span class="n">u32</span>	<span class="n">tio_cleanup_req</span><span class="p">;</span>    <span class="cm">/* TIO cleanup requested */</span>
	<span class="n">u32</span>	<span class="n">tio_cleanup_comp</span><span class="p">;</span>   <span class="cm">/* TIO cleanup completed */</span>
	<span class="n">u32</span>	<span class="n">tio_abort_rsp</span><span class="p">;</span>      <span class="cm">/* TIO abort response */</span>
	<span class="n">u32</span>	<span class="n">tio_abort_rsp_comp</span><span class="p">;</span> <span class="cm">/* TIO abort rsp completed */</span>
	<span class="n">u32</span>	<span class="n">tio_abts_req</span><span class="p">;</span>       <span class="cm">/* TIO ABTS requested */</span>
	<span class="n">u32</span>	<span class="n">tio_abts_ack</span><span class="p">;</span>       <span class="cm">/* TIO ABTS ack-ed */</span>
	<span class="n">u32</span>	<span class="n">tio_abts_ack_nocomp</span><span class="p">;</span><span class="cm">/* TIO ABTS ack-ed but not completed */</span>
	<span class="n">u32</span>	<span class="n">tio_abts_tmo</span><span class="p">;</span>       <span class="cm">/* TIO ABTS timeout */</span>
	<span class="n">u32</span>	<span class="n">tio_snsdata_dma</span><span class="p">;</span>    <span class="cm">/* TIO sense data DMA */</span>
	<span class="n">u32</span>	<span class="n">tio_rxwchan_wait</span><span class="p">;</span>   <span class="cm">/* TIO waiting for RX wait channel */</span>
	<span class="n">u32</span>	<span class="n">tio_rxwchan_avail</span><span class="p">;</span>  <span class="cm">/* TIO RX wait channel available */</span>
	<span class="n">u32</span>	<span class="n">tio_hit_bls</span><span class="p">;</span>        <span class="cm">/* TIO IOH BLS event */</span>
	<span class="n">u32</span>	<span class="n">tio_uf_recv</span><span class="p">;</span>        <span class="cm">/* TIO received UF */</span>
	<span class="n">u32</span>	<span class="n">tio_rd_invalid_sm</span><span class="p">;</span>  <span class="cm">/* TIO read reqst in wrong state machine */</span>
	<span class="n">u32</span>	<span class="n">tio_wr_invalid_sm</span><span class="p">;</span>  <span class="cm">/* TIO write reqst in wrong state machine */</span>

	<span class="n">u32</span>	<span class="n">ds_rxwchan_wait</span><span class="p">;</span>    <span class="cm">/* DS waiting for RX wait channel */</span>
	<span class="n">u32</span>	<span class="n">ds_rxwchan_avail</span><span class="p">;</span>   <span class="cm">/* DS RX wait channel available */</span>
	<span class="n">u32</span>	<span class="n">ds_unaligned_rd</span><span class="p">;</span>    <span class="cm">/* DS unaligned read */</span>
	<span class="n">u32</span>	<span class="n">ds_rdcomp_invalid_sm</span><span class="p">;</span> <span class="cm">/* DS read completed in wrong state</span>
<span class="cm">				       * machine */</span>
	<span class="n">u32</span>	<span class="n">ds_wrcomp_invalid_sm</span><span class="p">;</span> <span class="cm">/* DS write completed in wrong state</span>
<span class="cm">				       * machine */</span>
	<span class="n">u32</span>	<span class="n">ds_flush_req</span><span class="p">;</span>       <span class="cm">/* DS flush requested */</span>
	<span class="n">u32</span>	<span class="n">ds_flush_comp</span><span class="p">;</span>      <span class="cm">/* DS flush completed */</span>
	<span class="n">u32</span>	<span class="n">ds_xfrdy_exp</span><span class="p">;</span>       <span class="cm">/* DS XFER_RDY expired */</span>
	<span class="n">u32</span>	<span class="n">ds_seq_cnt_err</span><span class="p">;</span>     <span class="cm">/* DS seq cnt error */</span>
	<span class="n">u32</span>	<span class="n">ds_seq_len_err</span><span class="p">;</span>     <span class="cm">/* DS seq len error */</span>
	<span class="n">u32</span>	<span class="n">ds_data_oor</span><span class="p">;</span>        <span class="cm">/* DS data out of order */</span>
	<span class="n">u32</span>	<span class="n">ds_hit_bls</span><span class="p">;</span>	    <span class="cm">/* DS hit BLS */</span>
	<span class="n">u32</span>	<span class="n">ds_edtov_timer_exp</span><span class="p">;</span> <span class="cm">/* DS edtov expired */</span>
	<span class="n">u32</span>	<span class="n">ds_cpu_owned</span><span class="p">;</span>       <span class="cm">/* DS cpu owned */</span>
	<span class="n">u32</span>	<span class="n">ds_hit_class2</span><span class="p">;</span>      <span class="cm">/* DS hit class2 */</span>
	<span class="n">u32</span>	<span class="n">ds_length_err</span><span class="p">;</span>      <span class="cm">/* DS length error */</span>
	<span class="n">u32</span>	<span class="n">ds_ro_ooo_err</span><span class="p">;</span>      <span class="cm">/* DS relative offset out-of-order error */</span>
	<span class="n">u32</span>	<span class="n">ds_rectov_timer_exp</span><span class="p">;</span><span class="cm">/* DS rectov expired */</span>
	<span class="n">u32</span>	<span class="n">ds_unexp_fr_err</span><span class="p">;</span>    <span class="cm">/* DS unexp frame error */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IOC firmware IO stats</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fw_io_stats_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_fw_ioim_stats_s</span>	<span class="n">ioim_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_tio_stats_s</span>	<span class="n">tio_stats</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IOC port firmware stats</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">bfa_fw_port_fpg_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>    <span class="n">intr_evt</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">intr</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">intr_excess</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">intr_cause0</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">intr_other</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">intr_other_ign</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">sig_lost</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">sig_regained</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">sync_lost</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">sync_to</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">sync_regained</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">div2_overflow</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">div2_underflow</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">efifo_overflow</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">efifo_underflow</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">idle_rx</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">lrr_rx</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">lr_rx</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">ols_rx</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">nos_rx</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">lip_rx</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">arbf0_rx</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">arb_rx</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">mrk_rx</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">const_mrk_rx</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">prim_unknown</span><span class="p">;</span>
<span class="p">};</span>


<span class="k">struct</span> <span class="n">bfa_fw_port_lksm_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>    <span class="n">hwsm_success</span><span class="p">;</span>       <span class="cm">/*  hwsm state machine success          */</span>
	<span class="n">u32</span>    <span class="n">hwsm_fails</span><span class="p">;</span>         <span class="cm">/*  hwsm fails                          */</span>
	<span class="n">u32</span>    <span class="n">hwsm_wdtov</span><span class="p">;</span>         <span class="cm">/*  hwsm timed out                      */</span>
	<span class="n">u32</span>    <span class="n">swsm_success</span><span class="p">;</span>       <span class="cm">/*  swsm success                        */</span>
	<span class="n">u32</span>    <span class="n">swsm_fails</span><span class="p">;</span>         <span class="cm">/*  swsm fails                          */</span>
	<span class="n">u32</span>    <span class="n">swsm_wdtov</span><span class="p">;</span>         <span class="cm">/*  swsm timed out                      */</span>
	<span class="n">u32</span>    <span class="n">busybufs</span><span class="p">;</span>           <span class="cm">/*  link init failed due to busybuf     */</span>
	<span class="n">u32</span>    <span class="n">buf_waits</span><span class="p">;</span>          <span class="cm">/*  bufwait state entries               */</span>
	<span class="n">u32</span>    <span class="n">link_fails</span><span class="p">;</span>         <span class="cm">/*  link failures                       */</span>
	<span class="n">u32</span>    <span class="n">psp_errors</span><span class="p">;</span>         <span class="cm">/*  primitive sequence protocol errors  */</span>
	<span class="n">u32</span>    <span class="n">lr_unexp</span><span class="p">;</span>           <span class="cm">/*  No. of times LR rx-ed unexpectedly  */</span>
	<span class="n">u32</span>    <span class="n">lrr_unexp</span><span class="p">;</span>          <span class="cm">/*  No. of times LRR rx-ed unexpectedly */</span>
	<span class="n">u32</span>    <span class="n">lr_tx</span><span class="p">;</span>              <span class="cm">/*  No. of times LR tx started          */</span>
	<span class="n">u32</span>    <span class="n">lrr_tx</span><span class="p">;</span>             <span class="cm">/*  No. of times LRR tx started         */</span>
	<span class="n">u32</span>    <span class="n">ols_tx</span><span class="p">;</span>             <span class="cm">/*  No. of times OLS tx started         */</span>
	<span class="n">u32</span>    <span class="n">nos_tx</span><span class="p">;</span>             <span class="cm">/*  No. of times NOS tx started         */</span>
	<span class="n">u32</span>    <span class="n">hwsm_lrr_rx</span><span class="p">;</span>        <span class="cm">/*  No. of times LRR rx-ed by HWSM      */</span>
	<span class="n">u32</span>    <span class="n">hwsm_lr_rx</span><span class="p">;</span>         <span class="cm">/*  No. of times LR rx-ed by HWSM       */</span>
	<span class="n">u32</span>    <span class="n">bbsc_lr</span><span class="p">;</span>		   <span class="cm">/* LKSM LR tx for credit recovery       */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_fw_port_snsm_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>    <span class="n">hwsm_success</span><span class="p">;</span>       <span class="cm">/*  Successful hwsm terminations        */</span>
	<span class="n">u32</span>    <span class="n">hwsm_fails</span><span class="p">;</span>         <span class="cm">/*  hwsm fail count                     */</span>
	<span class="n">u32</span>    <span class="n">hwsm_wdtov</span><span class="p">;</span>         <span class="cm">/*  hwsm timed out                      */</span>
	<span class="n">u32</span>    <span class="n">swsm_success</span><span class="p">;</span>       <span class="cm">/*  swsm success                        */</span>
	<span class="n">u32</span>    <span class="n">swsm_wdtov</span><span class="p">;</span>         <span class="cm">/*  swsm timed out                      */</span>
	<span class="n">u32</span>    <span class="n">error_resets</span><span class="p">;</span>       <span class="cm">/*  error resets initiated by upsm      */</span>
	<span class="n">u32</span>    <span class="n">sync_lost</span><span class="p">;</span>          <span class="cm">/*  Sync loss count                     */</span>
	<span class="n">u32</span>    <span class="n">sig_lost</span><span class="p">;</span>           <span class="cm">/*  Signal loss count                   */</span>
	<span class="n">u32</span>    <span class="n">asn8g_attempts</span><span class="p">;</span>	   <span class="cm">/* SNSM HWSM at 8Gbps attempts	   */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_fw_port_physm_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>    <span class="n">module_inserts</span><span class="p">;</span>     <span class="cm">/*  Module insert count                 */</span>
	<span class="n">u32</span>    <span class="n">module_xtracts</span><span class="p">;</span>     <span class="cm">/*  Module extracts count               */</span>
	<span class="n">u32</span>    <span class="n">module_invalids</span><span class="p">;</span>    <span class="cm">/*  Invalid module inserted count       */</span>
	<span class="n">u32</span>    <span class="n">module_read_ign</span><span class="p">;</span>    <span class="cm">/*  Module validation status ignored    */</span>
	<span class="n">u32</span>    <span class="n">laser_faults</span><span class="p">;</span>       <span class="cm">/*  Laser fault count                   */</span>
	<span class="n">u32</span>    <span class="n">rsvd</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_fw_fip_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>    <span class="n">vlan_req</span><span class="p">;</span>           <span class="cm">/*  vlan discovery requests             */</span>
	<span class="n">u32</span>    <span class="n">vlan_notify</span><span class="p">;</span>        <span class="cm">/*  vlan notifications                  */</span>
	<span class="n">u32</span>    <span class="n">vlan_err</span><span class="p">;</span>           <span class="cm">/*  vlan response error                 */</span>
	<span class="n">u32</span>    <span class="n">vlan_timeouts</span><span class="p">;</span>      <span class="cm">/*  vlan disvoery timeouts              */</span>
	<span class="n">u32</span>    <span class="n">vlan_invalids</span><span class="p">;</span>      <span class="cm">/*  invalid vlan in discovery advert.   */</span>
	<span class="n">u32</span>    <span class="n">disc_req</span><span class="p">;</span>           <span class="cm">/*  Discovery solicit requests          */</span>
	<span class="n">u32</span>    <span class="n">disc_rsp</span><span class="p">;</span>           <span class="cm">/*  Discovery solicit response          */</span>
	<span class="n">u32</span>    <span class="n">disc_err</span><span class="p">;</span>           <span class="cm">/*  Discovery advt. parse errors        */</span>
	<span class="n">u32</span>    <span class="n">disc_unsol</span><span class="p">;</span>         <span class="cm">/*  Discovery unsolicited               */</span>
	<span class="n">u32</span>    <span class="n">disc_timeouts</span><span class="p">;</span>      <span class="cm">/*  Discovery timeouts                  */</span>
	<span class="n">u32</span>    <span class="n">disc_fcf_unavail</span><span class="p">;</span>   <span class="cm">/*  Discovery FCF Not Avail.            */</span>
	<span class="n">u32</span>    <span class="n">linksvc_unsupp</span><span class="p">;</span>     <span class="cm">/*  Unsupported link service req        */</span>
	<span class="n">u32</span>    <span class="n">linksvc_err</span><span class="p">;</span>        <span class="cm">/*  Parse error in link service req     */</span>
	<span class="n">u32</span>    <span class="n">logo_req</span><span class="p">;</span>           <span class="cm">/*  FIP logos received                  */</span>
	<span class="n">u32</span>    <span class="n">clrvlink_req</span><span class="p">;</span>       <span class="cm">/*  Clear virtual link req              */</span>
	<span class="n">u32</span>    <span class="n">op_unsupp</span><span class="p">;</span>          <span class="cm">/*  Unsupported FIP operation           */</span>
	<span class="n">u32</span>    <span class="n">untagged</span><span class="p">;</span>           <span class="cm">/*  Untagged frames (ignored)           */</span>
	<span class="n">u32</span>    <span class="n">invalid_version</span><span class="p">;</span>    <span class="cm">/*  Invalid FIP version                 */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_fw_lps_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>    <span class="n">mac_invalids</span><span class="p">;</span>       <span class="cm">/*  Invalid mac assigned                */</span>
	<span class="n">u32</span>    <span class="n">rsvd</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_fw_fcoe_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>    <span class="n">cee_linkups</span><span class="p">;</span>        <span class="cm">/*  CEE link up count                   */</span>
	<span class="n">u32</span>    <span class="n">cee_linkdns</span><span class="p">;</span>        <span class="cm">/*  CEE link down count                 */</span>
	<span class="n">u32</span>    <span class="n">fip_linkups</span><span class="p">;</span>        <span class="cm">/*  FIP link up count                   */</span>
	<span class="n">u32</span>    <span class="n">fip_linkdns</span><span class="p">;</span>        <span class="cm">/*  FIP link up count                   */</span>
	<span class="n">u32</span>    <span class="n">fip_fails</span><span class="p">;</span>          <span class="cm">/*  FIP fail count                      */</span>
	<span class="n">u32</span>    <span class="n">mac_invalids</span><span class="p">;</span>       <span class="cm">/*  Invalid mac assigned                */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IOC firmware FCoE port stats</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fw_fcoe_port_stats_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_fw_fcoe_stats_s</span>		<span class="n">fcoe_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_fip_stats_s</span>		<span class="n">fip_stats</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IOC firmware FC uport stats</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fw_fc_uport_stats_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_fw_port_snsm_stats_s</span>		<span class="n">snsm_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_port_lksm_stats_s</span>		<span class="n">lksm_stats</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IOC firmware FC port stats</span>
<span class="cm"> */</span>
<span class="k">union</span> <span class="n">bfa_fw_fc_port_stats_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_fw_fc_uport_stats_s</span>		<span class="n">fc_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_fcoe_port_stats_s</span>		<span class="n">fcoe_stats</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IOC firmware port stats</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fw_port_stats_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_fw_port_fpg_stats_s</span>		<span class="n">fpg_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_port_physm_stats_s</span>	<span class="n">physm_stats</span><span class="p">;</span>
	<span class="k">union</span>  <span class="n">bfa_fw_fc_port_stats_s</span>		<span class="n">fc_port</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * fcxchg module statistics</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fw_fcxchg_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">ua_tag_inv</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ua_state_inv</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_fw_lpsm_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">cls_rx</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">cls_tx</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Trunk statistics</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fw_trunk_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">emt_recvd</span><span class="p">;</span>		<span class="cm">/*  Trunk EMT received		*/</span>
	<span class="n">u32</span> <span class="n">emt_accepted</span><span class="p">;</span>	<span class="cm">/*  Trunk EMT Accepted		*/</span>
	<span class="n">u32</span> <span class="n">emt_rejected</span><span class="p">;</span>	<span class="cm">/*  Trunk EMT rejected		*/</span>
	<span class="n">u32</span> <span class="n">etp_recvd</span><span class="p">;</span>		<span class="cm">/*  Trunk ETP received		*/</span>
	<span class="n">u32</span> <span class="n">etp_accepted</span><span class="p">;</span>	<span class="cm">/*  Trunk ETP Accepted		*/</span>
	<span class="n">u32</span> <span class="n">etp_rejected</span><span class="p">;</span>	<span class="cm">/*  Trunk ETP rejected		*/</span>
	<span class="n">u32</span> <span class="n">lr_recvd</span><span class="p">;</span>		<span class="cm">/*  Trunk LR received		*/</span>
	<span class="n">u32</span> <span class="n">rsvd</span><span class="p">;</span>		<span class="cm">/*  padding for 64 bit alignment */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_fw_advsm_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">flogi_sent</span><span class="p">;</span>		<span class="cm">/*  Flogi sent			*/</span>
	<span class="n">u32</span> <span class="n">flogi_acc_recvd</span><span class="p">;</span>	<span class="cm">/*  Flogi Acc received		*/</span>
	<span class="n">u32</span> <span class="n">flogi_rjt_recvd</span><span class="p">;</span>	<span class="cm">/*  Flogi rejects received	*/</span>
	<span class="n">u32</span> <span class="n">flogi_retries</span><span class="p">;</span>	<span class="cm">/*  Flogi retries		*/</span>

	<span class="n">u32</span> <span class="n">elp_recvd</span><span class="p">;</span>		<span class="cm">/*  ELP received		*/</span>
	<span class="n">u32</span> <span class="n">elp_accepted</span><span class="p">;</span>	<span class="cm">/*  ELP Accepted		*/</span>
	<span class="n">u32</span> <span class="n">elp_rejected</span><span class="p">;</span>	<span class="cm">/*  ELP rejected		*/</span>
	<span class="n">u32</span> <span class="n">elp_dropped</span><span class="p">;</span>	<span class="cm">/*  ELP dropped			*/</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IOCFC firmware stats</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fw_iocfc_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">cfg_reqs</span><span class="p">;</span>	<span class="cm">/*  cfg request */</span>
	<span class="n">u32</span>	<span class="n">updq_reqs</span><span class="p">;</span>	<span class="cm">/*  update queue request */</span>
	<span class="n">u32</span>	<span class="n">ic_reqs</span><span class="p">;</span>	<span class="cm">/*  interrupt coalesce reqs */</span>
	<span class="n">u32</span>	<span class="n">unknown_reqs</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">set_intr_reqs</span><span class="p">;</span>	<span class="cm">/*  set interrupt reqs */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IOC attributes returned in queries</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_iocfc_attr_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_iocfc_cfg_s</span>		<span class="n">config</span><span class="p">;</span>		<span class="cm">/*  IOCFC config   */</span>
	<span class="k">struct</span> <span class="n">bfa_iocfc_intr_attr_s</span>	<span class="n">intr_attr</span><span class="p">;</span>	<span class="cm">/*  interrupt attr */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Eth_sndrcv mod stats</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fw_eth_sndrcv_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">crc_err</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">rsvd</span><span class="p">;</span>		<span class="cm">/*  64bit align    */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * CT MAC mod stats</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fw_mac_mod_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">mac_on</span><span class="p">;</span>		<span class="cm">/*  MAC got turned-on */</span>
	<span class="n">u32</span>	<span class="n">link_up</span><span class="p">;</span>	<span class="cm">/*  link-up */</span>
	<span class="n">u32</span>	<span class="n">signal_off</span><span class="p">;</span>	<span class="cm">/*  lost signal */</span>
	<span class="n">u32</span>	<span class="n">dfe_on</span><span class="p">;</span>		<span class="cm">/*  DFE on */</span>
	<span class="n">u32</span>	<span class="n">mac_reset</span><span class="p">;</span>	<span class="cm">/*  # of MAC reset to bring lnk up */</span>
	<span class="n">u32</span>	<span class="n">pcs_reset</span><span class="p">;</span>	<span class="cm">/*  # of PCS reset to bring lnk up */</span>
	<span class="n">u32</span>	<span class="n">loopback</span><span class="p">;</span>	<span class="cm">/*  MAC got into serdes loopback */</span>
	<span class="n">u32</span>	<span class="n">lb_mac_reset</span><span class="p">;</span>
			<span class="cm">/*  # of MAC reset to bring link up in loopback */</span>
	<span class="n">u32</span>	<span class="n">lb_pcs_reset</span><span class="p">;</span>
			<span class="cm">/*  # of PCS reset to bring link up in loopback */</span>
	<span class="n">u32</span>	<span class="n">rsvd</span><span class="p">;</span>		<span class="cm">/*  64bit align    */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * CT MOD stats</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fw_ct_mod_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">rxa_rds_undrun</span><span class="p">;</span>	<span class="cm">/*  RxA RDS underrun */</span>
	<span class="n">u32</span>	<span class="n">rad_bpc_ovfl</span><span class="p">;</span>	<span class="cm">/*  RAD BPC overflow */</span>
	<span class="n">u32</span>	<span class="n">rad_rlb_bpc_ovfl</span><span class="p">;</span> <span class="cm">/*  RAD RLB BPC overflow */</span>
	<span class="n">u32</span>	<span class="n">bpc_fcs_err</span><span class="p">;</span>	<span class="cm">/*  BPC FCS_ERR */</span>
	<span class="n">u32</span>	<span class="n">txa_tso_hdr</span><span class="p">;</span>	<span class="cm">/*  TxA TSO header too long */</span>
	<span class="n">u32</span>	<span class="n">rsvd</span><span class="p">;</span>		<span class="cm">/*  64bit align    */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IOC firmware stats</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fw_stats_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_fw_ioc_stats_s</span>	<span class="n">ioc_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_iocfc_stats_s</span>	<span class="n">iocfc_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_io_stats_s</span>	<span class="n">io_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_port_stats_s</span>	<span class="n">port_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_fcxchg_stats_s</span>	<span class="n">fcxchg_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_lpsm_stats_s</span>	<span class="n">lpsm_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_lps_stats_s</span>	<span class="n">lps_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_trunk_stats_s</span>	<span class="n">trunk_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_advsm_stats_s</span>	<span class="n">advsm_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_mac_mod_stats_s</span>	<span class="n">macmod_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_ct_mod_stats_s</span>	<span class="n">ctmod_stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fw_eth_sndrcv_stats_s</span>	<span class="n">ethsndrcv_stats</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define BFA_IOCFC_PATHTOV_MAX	60</span>
<span class="cp">#define BFA_IOCFC_QDEPTH_MAX	2000</span>

<span class="cm">/*</span>
<span class="cm"> * QoS states</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_qos_state</span> <span class="p">{</span>
	<span class="n">BFA_QOS_DISABLED</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>		<span class="cm">/* QoS is disabled */</span>
	<span class="n">BFA_QOS_ONLINE</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>		<span class="cm">/*  QoS is online */</span>
	<span class="n">BFA_QOS_OFFLINE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>		<span class="cm">/*  QoS is offline */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * QoS  Priority levels.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_qos_priority</span> <span class="p">{</span>
	<span class="n">BFA_QOS_UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">BFA_QOS_HIGH</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/*  QoS Priority Level High */</span>
	<span class="n">BFA_QOS_MED</span>  <span class="o">=</span>  <span class="mi">2</span><span class="p">,</span>	<span class="cm">/*  QoS Priority Level Medium */</span>
	<span class="n">BFA_QOS_LOW</span>  <span class="o">=</span>  <span class="mi">3</span><span class="p">,</span>	<span class="cm">/*  QoS Priority Level Low */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * QoS  bandwidth allocation for each priority level</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_qos_bw_alloc</span> <span class="p">{</span>
	<span class="n">BFA_QOS_BW_HIGH</span>  <span class="o">=</span> <span class="mi">60</span><span class="p">,</span>	<span class="cm">/*  bandwidth allocation for High */</span>
	<span class="n">BFA_QOS_BW_MED</span>  <span class="o">=</span>  <span class="mi">30</span><span class="p">,</span>	<span class="cm">/*  bandwidth allocation for Medium */</span>
	<span class="n">BFA_QOS_BW_LOW</span>  <span class="o">=</span>  <span class="mi">10</span><span class="p">,</span>	<span class="cm">/*  bandwidth allocation for Low */</span>
<span class="p">};</span>
<span class="cp">#pragma pack(1)</span>
<span class="cm">/*</span>
<span class="cm"> * QoS attribute returned in QoS Query</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_qos_attr_s</span> <span class="p">{</span>
	<span class="n">u8</span>		<span class="n">state</span><span class="p">;</span>		<span class="cm">/*  QoS current state */</span>
	<span class="n">u8</span>		<span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u32</span>  <span class="n">total_bb_cr</span><span class="p">;</span>		<span class="cm">/*  Total BB Credits */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * These fields should be displayed only from the CLI.</span>
<span class="cm"> * There will be a separate BFAL API (get_qos_vc_attr ?)</span>
<span class="cm"> * to retrieve this.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="cp">#define  BFA_QOS_MAX_VC  16</span>

<span class="k">struct</span> <span class="n">bfa_qos_vc_info_s</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">vc_credit</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">borrow_credit</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">priority</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">resvd</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_qos_vc_attr_s</span> <span class="p">{</span>
	<span class="n">u16</span>  <span class="n">total_vc_count</span><span class="p">;</span>                    <span class="cm">/*  Total VC Count */</span>
	<span class="n">u16</span>  <span class="n">shared_credit</span><span class="p">;</span>
	<span class="n">u32</span>  <span class="n">elp_opmode_flags</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_qos_vc_info_s</span> <span class="n">vc_info</span><span class="p">[</span><span class="n">BFA_QOS_MAX_VC</span><span class="p">];</span>  <span class="cm">/* as many as</span>
<span class="cm">							    * total_vc_count */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * QoS statistics</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_qos_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">flogi_sent</span><span class="p">;</span>		<span class="cm">/*  QoS Flogi sent */</span>
	<span class="n">u32</span>	<span class="n">flogi_acc_recvd</span><span class="p">;</span>	<span class="cm">/*  QoS Flogi Acc received */</span>
	<span class="n">u32</span>	<span class="n">flogi_rjt_recvd</span><span class="p">;</span>	<span class="cm">/*  QoS Flogi rejects received */</span>
	<span class="n">u32</span>	<span class="n">flogi_retries</span><span class="p">;</span>		<span class="cm">/*  QoS Flogi retries */</span>

	<span class="n">u32</span>	<span class="n">elp_recvd</span><span class="p">;</span>		<span class="cm">/*  QoS ELP received */</span>
	<span class="n">u32</span>	<span class="n">elp_accepted</span><span class="p">;</span>		<span class="cm">/*  QoS ELP Accepted */</span>
	<span class="n">u32</span>	<span class="n">elp_rejected</span><span class="p">;</span>		<span class="cm">/*  QoS ELP rejected */</span>
	<span class="n">u32</span>	<span class="n">elp_dropped</span><span class="p">;</span>		<span class="cm">/*  QoS ELP dropped  */</span>

	<span class="n">u32</span>	<span class="n">qos_rscn_recvd</span><span class="p">;</span>		<span class="cm">/*  QoS RSCN received */</span>
	<span class="n">u32</span>	<span class="n">rsvd</span><span class="p">;</span>			<span class="cm">/* padding for 64 bit alignment */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * FCoE statistics</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fcoe_stats_s</span> <span class="p">{</span>
	<span class="n">u64</span>	<span class="n">secs_reset</span><span class="p">;</span>	<span class="cm">/*  Seconds since stats reset	     */</span>
	<span class="n">u64</span>	<span class="n">cee_linkups</span><span class="p">;</span>	<span class="cm">/*  CEE link up			     */</span>
	<span class="n">u64</span>	<span class="n">cee_linkdns</span><span class="p">;</span>	<span class="cm">/*  CEE link down		     */</span>
	<span class="n">u64</span>	<span class="n">fip_linkups</span><span class="p">;</span>	<span class="cm">/*  FIP link up			     */</span>
	<span class="n">u64</span>	<span class="n">fip_linkdns</span><span class="p">;</span>	<span class="cm">/*  FIP link down		     */</span>
	<span class="n">u64</span>	<span class="n">fip_fails</span><span class="p">;</span>	<span class="cm">/*  FIP failures		     */</span>
	<span class="n">u64</span>	<span class="n">mac_invalids</span><span class="p">;</span>	<span class="cm">/*  Invalid mac assignments	     */</span>
	<span class="n">u64</span>	<span class="n">vlan_req</span><span class="p">;</span>	<span class="cm">/*  Vlan requests		     */</span>
	<span class="n">u64</span>	<span class="n">vlan_notify</span><span class="p">;</span>	<span class="cm">/*  Vlan notifications		     */</span>
	<span class="n">u64</span>	<span class="n">vlan_err</span><span class="p">;</span>	<span class="cm">/*  Vlan notification errors	     */</span>
	<span class="n">u64</span>	<span class="n">vlan_timeouts</span><span class="p">;</span>	<span class="cm">/*  Vlan request timeouts	     */</span>
	<span class="n">u64</span>	<span class="n">vlan_invalids</span><span class="p">;</span>	<span class="cm">/*  Vlan invalids		     */</span>
	<span class="n">u64</span>	<span class="n">disc_req</span><span class="p">;</span>	<span class="cm">/*  Discovery requests		     */</span>
	<span class="n">u64</span>	<span class="n">disc_rsp</span><span class="p">;</span>	<span class="cm">/*  Discovery responses		     */</span>
	<span class="n">u64</span>	<span class="n">disc_err</span><span class="p">;</span>	<span class="cm">/*  Discovery error frames	     */</span>
	<span class="n">u64</span>	<span class="n">disc_unsol</span><span class="p">;</span>	<span class="cm">/*  Discovery unsolicited	     */</span>
	<span class="n">u64</span>	<span class="n">disc_timeouts</span><span class="p">;</span>	<span class="cm">/*  Discovery timeouts		     */</span>
	<span class="n">u64</span>	<span class="n">disc_fcf_unavail</span><span class="p">;</span> <span class="cm">/*  Discovery FCF not avail	     */</span>
	<span class="n">u64</span>	<span class="n">linksvc_unsupp</span><span class="p">;</span>	<span class="cm">/*  FIP link service req unsupp	     */</span>
	<span class="n">u64</span>	<span class="n">linksvc_err</span><span class="p">;</span>	<span class="cm">/*  FIP link service req errors	     */</span>
	<span class="n">u64</span>	<span class="n">logo_req</span><span class="p">;</span>	<span class="cm">/*  FIP logos received		     */</span>
	<span class="n">u64</span>	<span class="n">clrvlink_req</span><span class="p">;</span>	<span class="cm">/*  Clear virtual link requests	     */</span>
	<span class="n">u64</span>	<span class="n">op_unsupp</span><span class="p">;</span>	<span class="cm">/*  FIP operation unsupp.	     */</span>
	<span class="n">u64</span>	<span class="n">untagged</span><span class="p">;</span>	<span class="cm">/*  FIP untagged frames		     */</span>
	<span class="n">u64</span>	<span class="n">txf_ucast</span><span class="p">;</span>	<span class="cm">/*  Tx FCoE unicast frames	     */</span>
	<span class="n">u64</span>	<span class="n">txf_ucast_vlan</span><span class="p">;</span>	<span class="cm">/*  Tx FCoE unicast vlan frames      */</span>
	<span class="n">u64</span>	<span class="n">txf_ucast_octets</span><span class="p">;</span> <span class="cm">/*  Tx FCoE unicast octets	     */</span>
	<span class="n">u64</span>	<span class="n">txf_mcast</span><span class="p">;</span>	<span class="cm">/*  Tx FCoE multicast frames	     */</span>
	<span class="n">u64</span>	<span class="n">txf_mcast_vlan</span><span class="p">;</span>	<span class="cm">/*  Tx FCoE multicast vlan frames    */</span>
	<span class="n">u64</span>	<span class="n">txf_mcast_octets</span><span class="p">;</span> <span class="cm">/*  Tx FCoE multicast octets	     */</span>
	<span class="n">u64</span>	<span class="n">txf_bcast</span><span class="p">;</span>	<span class="cm">/*  Tx FCoE broadcast frames	     */</span>
	<span class="n">u64</span>	<span class="n">txf_bcast_vlan</span><span class="p">;</span>	<span class="cm">/*  Tx FCoE broadcast vlan frames    */</span>
	<span class="n">u64</span>	<span class="n">txf_bcast_octets</span><span class="p">;</span> <span class="cm">/*  Tx FCoE broadcast octets	     */</span>
	<span class="n">u64</span>	<span class="n">txf_timeout</span><span class="p">;</span>	  <span class="cm">/*  Tx timeouts		     */</span>
	<span class="n">u64</span>	<span class="n">txf_parity_errors</span><span class="p">;</span> <span class="cm">/*  Transmit parity err	     */</span>
	<span class="n">u64</span>	<span class="n">txf_fid_parity_errors</span><span class="p">;</span> <span class="cm">/*  Transmit FID parity err   */</span>
	<span class="n">u64</span>	<span class="n">rxf_ucast_octets</span><span class="p">;</span> <span class="cm">/*  Rx FCoE unicast octets	     */</span>
	<span class="n">u64</span>	<span class="n">rxf_ucast</span><span class="p">;</span>	<span class="cm">/*  Rx FCoE unicast frames	     */</span>
	<span class="n">u64</span>	<span class="n">rxf_ucast_vlan</span><span class="p">;</span>	<span class="cm">/*  Rx FCoE unicast vlan frames	     */</span>
	<span class="n">u64</span>	<span class="n">rxf_mcast_octets</span><span class="p">;</span> <span class="cm">/*  Rx FCoE multicast octets	     */</span>
	<span class="n">u64</span>	<span class="n">rxf_mcast</span><span class="p">;</span>	<span class="cm">/*  Rx FCoE multicast frames	     */</span>
	<span class="n">u64</span>	<span class="n">rxf_mcast_vlan</span><span class="p">;</span>	<span class="cm">/*  Rx FCoE multicast vlan frames    */</span>
	<span class="n">u64</span>	<span class="n">rxf_bcast_octets</span><span class="p">;</span> <span class="cm">/*  Rx FCoE broadcast octets	     */</span>
	<span class="n">u64</span>	<span class="n">rxf_bcast</span><span class="p">;</span>	<span class="cm">/*  Rx FCoE broadcast frames	     */</span>
	<span class="n">u64</span>	<span class="n">rxf_bcast_vlan</span><span class="p">;</span>	<span class="cm">/*  Rx FCoE broadcast vlan frames    */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * QoS or FCoE stats (fcport stats excluding physical FC port stats)</span>
<span class="cm"> */</span>
<span class="k">union</span> <span class="n">bfa_fcport_stats_u</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_qos_stats_s</span>	<span class="n">fcqos</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_fcoe_stats_s</span>	<span class="n">fcoe</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#pragma pack()</span>

<span class="k">struct</span> <span class="n">bfa_fcpim_del_itn_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">del_itn_iocomp_aborted</span><span class="p">;</span>	   <span class="cm">/* Aborted IO requests	      */</span>
	<span class="n">u32</span>	<span class="n">del_itn_iocomp_timedout</span><span class="p">;</span>   <span class="cm">/* IO timeouts		      */</span>
	<span class="n">u32</span>	<span class="n">del_itn_iocom_sqer_needed</span><span class="p">;</span> <span class="cm">/* IO retry for SQ error recovery  */</span>
	<span class="n">u32</span>	<span class="n">del_itn_iocom_res_free</span><span class="p">;</span>    <span class="cm">/* Delayed freeing of IO resources */</span>
	<span class="n">u32</span>	<span class="n">del_itn_iocom_hostabrts</span><span class="p">;</span>   <span class="cm">/* Host IO abort requests	      */</span>
	<span class="n">u32</span>	<span class="n">del_itn_total_ios</span><span class="p">;</span>	   <span class="cm">/* Total IO count		      */</span>
	<span class="n">u32</span>	<span class="n">del_io_iocdowns</span><span class="p">;</span>	   <span class="cm">/* IO cleaned-up due to IOC down   */</span>
	<span class="n">u32</span>	<span class="n">del_tm_iocdowns</span><span class="p">;</span>	   <span class="cm">/* TM cleaned-up due to IOC down   */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_itnim_iostats_s</span> <span class="p">{</span>

	<span class="n">u32</span>	<span class="n">total_ios</span><span class="p">;</span>		<span class="cm">/*  Total IO Requests		*/</span>
	<span class="n">u32</span>	<span class="n">input_reqs</span><span class="p">;</span>		<span class="cm">/*  Data in-bound requests	*/</span>
	<span class="n">u32</span>	<span class="n">output_reqs</span><span class="p">;</span>		<span class="cm">/*  Data out-bound requests	*/</span>
	<span class="n">u32</span>	<span class="n">io_comps</span><span class="p">;</span>		<span class="cm">/*  Total IO Completions	*/</span>
	<span class="n">u32</span>	<span class="n">wr_throughput</span><span class="p">;</span>		<span class="cm">/*  Write data transferred in bytes */</span>
	<span class="n">u32</span>	<span class="n">rd_throughput</span><span class="p">;</span>		<span class="cm">/*  Read data transferred in bytes  */</span>

	<span class="n">u32</span>	<span class="n">iocomp_ok</span><span class="p">;</span>		<span class="cm">/*  Slowpath IO completions	*/</span>
	<span class="n">u32</span>	<span class="n">iocomp_underrun</span><span class="p">;</span>	<span class="cm">/*  IO underrun		*/</span>
	<span class="n">u32</span>	<span class="n">iocomp_overrun</span><span class="p">;</span>		<span class="cm">/*  IO overrun			*/</span>
	<span class="n">u32</span>	<span class="n">qwait</span><span class="p">;</span>			<span class="cm">/*  IO Request-Q wait		*/</span>
	<span class="n">u32</span>	<span class="n">qresumes</span><span class="p">;</span>		<span class="cm">/*  IO Request-Q wait done	*/</span>
	<span class="n">u32</span>	<span class="n">no_iotags</span><span class="p">;</span>		<span class="cm">/*  No free IO tag		*/</span>
	<span class="n">u32</span>	<span class="n">iocomp_timedout</span><span class="p">;</span>	<span class="cm">/*  IO timeouts		*/</span>
	<span class="n">u32</span>	<span class="n">iocom_nexus_abort</span><span class="p">;</span>	<span class="cm">/*  IO failure due to target offline */</span>
	<span class="n">u32</span>	<span class="n">iocom_proto_err</span><span class="p">;</span>	<span class="cm">/*  IO protocol errors		*/</span>
	<span class="n">u32</span>	<span class="n">iocom_dif_err</span><span class="p">;</span>		<span class="cm">/*  IO SBC-3 protection errors	*/</span>

	<span class="n">u32</span>	<span class="n">iocom_sqer_needed</span><span class="p">;</span>	<span class="cm">/*  fcp-2 error recovery failed	*/</span>
	<span class="n">u32</span>	<span class="n">iocom_res_free</span><span class="p">;</span>		<span class="cm">/*  Delayed freeing of IO tag	*/</span>


	<span class="n">u32</span>	<span class="n">io_aborts</span><span class="p">;</span>		<span class="cm">/*  Host IO abort requests	*/</span>
	<span class="n">u32</span>	<span class="n">iocom_hostabrts</span><span class="p">;</span>	<span class="cm">/*  Host IO abort completions	*/</span>
	<span class="n">u32</span>	<span class="n">io_cleanups</span><span class="p">;</span>		<span class="cm">/*  IO clean-up requests	*/</span>
	<span class="n">u32</span>	<span class="n">path_tov_expired</span><span class="p">;</span>	<span class="cm">/*  IO path tov expired	*/</span>
	<span class="n">u32</span>	<span class="n">iocomp_aborted</span><span class="p">;</span>		<span class="cm">/*  IO abort completions	*/</span>
	<span class="n">u32</span>	<span class="n">io_iocdowns</span><span class="p">;</span>		<span class="cm">/*  IO cleaned-up due to IOC down */</span>
	<span class="n">u32</span>	<span class="n">iocom_utags</span><span class="p">;</span>		<span class="cm">/*  IO comp with unknown tags	*/</span>

	<span class="n">u32</span>	<span class="n">io_tmaborts</span><span class="p">;</span>		<span class="cm">/*  Abort request due to TM command */</span>
	<span class="n">u32</span>	<span class="n">tm_io_comps</span><span class="p">;</span>		<span class="cm">/* Abort completion due to TM command */</span>

	<span class="n">u32</span>	<span class="n">creates</span><span class="p">;</span>		<span class="cm">/*  IT Nexus create requests	*/</span>
	<span class="n">u32</span>	<span class="n">fw_create</span><span class="p">;</span>		<span class="cm">/*  IT Nexus FW create requests	*/</span>
	<span class="n">u32</span>	<span class="n">create_comps</span><span class="p">;</span>		<span class="cm">/*  IT Nexus FW create completions */</span>
	<span class="n">u32</span>	<span class="n">onlines</span><span class="p">;</span>		<span class="cm">/*  IT Nexus onlines		*/</span>
	<span class="n">u32</span>	<span class="n">offlines</span><span class="p">;</span>		<span class="cm">/*  IT Nexus offlines		*/</span>
	<span class="n">u32</span>	<span class="n">fw_delete</span><span class="p">;</span>		<span class="cm">/*  IT Nexus FW delete requests	*/</span>
	<span class="n">u32</span>	<span class="n">delete_comps</span><span class="p">;</span>		<span class="cm">/*  IT Nexus FW delete completions */</span>
	<span class="n">u32</span>	<span class="n">deletes</span><span class="p">;</span>		<span class="cm">/*  IT Nexus delete requests	   */</span>
	<span class="n">u32</span>	<span class="n">sler_events</span><span class="p">;</span>		<span class="cm">/*  SLER events		*/</span>
	<span class="n">u32</span>	<span class="n">ioc_disabled</span><span class="p">;</span>		<span class="cm">/*  Num IOC disables		*/</span>
	<span class="n">u32</span>	<span class="n">cleanup_comps</span><span class="p">;</span>		<span class="cm">/*  IT Nexus cleanup completions    */</span>

	<span class="n">u32</span>	<span class="n">tm_cmnds</span><span class="p">;</span>		<span class="cm">/*  TM Requests		*/</span>
	<span class="n">u32</span>	<span class="n">tm_fw_rsps</span><span class="p">;</span>		<span class="cm">/*  TM Completions		*/</span>
	<span class="n">u32</span>	<span class="n">tm_success</span><span class="p">;</span>		<span class="cm">/*  TM initiated IO cleanup success */</span>
	<span class="n">u32</span>	<span class="n">tm_failures</span><span class="p">;</span>		<span class="cm">/*  TM initiated IO cleanup failure */</span>
	<span class="n">u32</span>	<span class="n">no_tskims</span><span class="p">;</span>		<span class="cm">/*  No free TM tag		*/</span>
	<span class="n">u32</span>	<span class="n">tm_qwait</span><span class="p">;</span>		<span class="cm">/*  TM Request-Q wait		*/</span>
	<span class="n">u32</span>	<span class="n">tm_qresumes</span><span class="p">;</span>		<span class="cm">/*  TM Request-Q wait done	*/</span>

	<span class="n">u32</span>	<span class="n">tm_iocdowns</span><span class="p">;</span>		<span class="cm">/*  TM cleaned-up due to IOC down   */</span>
	<span class="n">u32</span>	<span class="n">tm_cleanups</span><span class="p">;</span>		<span class="cm">/*  TM cleanup requests	*/</span>
	<span class="n">u32</span>	<span class="n">tm_cleanup_comps</span><span class="p">;</span>	<span class="cm">/*  TM cleanup completions	*/</span>
	<span class="n">u32</span>	<span class="n">rsvd</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* Modify char* port_stt[] in bfal_port.c if a new state was added */</span>
<span class="k">enum</span> <span class="n">bfa_port_states</span> <span class="p">{</span>
	<span class="n">BFA_PORT_ST_UNINIT</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_ENABLING_QWAIT</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_ENABLING</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_LINKDOWN</span>		<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_LINKUP</span>		<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_DISABLING_QWAIT</span>	<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_DISABLING</span>		<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_DISABLED</span>		<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_STOPPED</span>		<span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_IOCDOWN</span>		<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_IOCDIS</span>		<span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_FWMISMATCH</span>		<span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_PREBOOT_DISABLED</span>	<span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_TOGGLING_QWAIT</span>	<span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_ACQ_ADDR</span>		<span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
	<span class="n">BFA_PORT_ST_MAX_STATE</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	Port operational type (in sync with SNIA port type).</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_port_type</span> <span class="p">{</span>
	<span class="n">BFA_PORT_TYPE_UNKNOWN</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/*  port type is unknown */</span>
	<span class="n">BFA_PORT_TYPE_NPORT</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>	<span class="cm">/*  P2P with switched fabric */</span>
	<span class="n">BFA_PORT_TYPE_NLPORT</span>	<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>	<span class="cm">/*  public loop */</span>
	<span class="n">BFA_PORT_TYPE_LPORT</span>	<span class="o">=</span> <span class="mi">20</span><span class="p">,</span>	<span class="cm">/*  private loop */</span>
	<span class="n">BFA_PORT_TYPE_P2P</span>	<span class="o">=</span> <span class="mi">21</span><span class="p">,</span>	<span class="cm">/*  P2P with no switched fabric */</span>
	<span class="n">BFA_PORT_TYPE_VPORT</span>	<span class="o">=</span> <span class="mi">22</span><span class="p">,</span>	<span class="cm">/*  NPIV - virtual port */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	Port topology setting. A port&#39;s topology and fabric login status</span>
<span class="cm"> *	determine its operational type.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_port_topology</span> <span class="p">{</span>
	<span class="n">BFA_PORT_TOPOLOGY_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/*  No valid topology */</span>
	<span class="n">BFA_PORT_TOPOLOGY_P2P</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/*  P2P only */</span>
	<span class="n">BFA_PORT_TOPOLOGY_LOOP</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/*  LOOP topology */</span>
	<span class="n">BFA_PORT_TOPOLOGY_AUTO</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/*  auto topology selection */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	Physical port loopback types.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_port_opmode</span> <span class="p">{</span>
	<span class="n">BFA_PORT_OPMODE_NORMAL</span>   <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span> <span class="cm">/*  normal non-loopback mode */</span>
	<span class="n">BFA_PORT_OPMODE_LB_INT</span>   <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span> <span class="cm">/*  internal loop back */</span>
	<span class="n">BFA_PORT_OPMODE_LB_SLW</span>   <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span> <span class="cm">/*  serial link wrapback (serdes) */</span>
	<span class="n">BFA_PORT_OPMODE_LB_EXT</span>   <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span> <span class="cm">/*  external loop back (serdes) */</span>
	<span class="n">BFA_PORT_OPMODE_LB_CBL</span>   <span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span> <span class="cm">/*  cabled loop back */</span>
	<span class="n">BFA_PORT_OPMODE_LB_NLINT</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span> <span class="cm">/*  NL_Port internal loopback */</span>
<span class="p">};</span>

<span class="cp">#define BFA_PORT_OPMODE_LB_HARD(_mode)			\</span>
<span class="cp">	((_mode == BFA_PORT_OPMODE_LB_INT) ||		\</span>
<span class="cp">	(_mode == BFA_PORT_OPMODE_LB_SLW) ||		\</span>
<span class="cp">	(_mode == BFA_PORT_OPMODE_LB_EXT))</span>

<span class="cm">/*</span>
<span class="cm"> *	Port link state</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_port_linkstate</span> <span class="p">{</span>
	<span class="n">BFA_PORT_LINKUP</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/*  Physical port/Trunk link up */</span>
	<span class="n">BFA_PORT_LINKDOWN</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/*  Physical port/Trunk link down */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	Port link state reason code</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_port_linkstate_rsn</span> <span class="p">{</span>
	<span class="n">BFA_PORT_LINKSTATE_RSN_NONE</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">BFA_PORT_LINKSTATE_RSN_DISABLED</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFA_PORT_LINKSTATE_RSN_RX_NOS</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">BFA_PORT_LINKSTATE_RSN_RX_OLS</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">BFA_PORT_LINKSTATE_RSN_RX_LIP</span>		<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">BFA_PORT_LINKSTATE_RSN_RX_LIPF7</span>		<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">BFA_PORT_LINKSTATE_RSN_SFP_REMOVED</span>	<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">BFA_PORT_LINKSTATE_RSN_PORT_FAULT</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">BFA_PORT_LINKSTATE_RSN_RX_LOS</span>		<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">BFA_PORT_LINKSTATE_RSN_LOCAL_FAULT</span>	<span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">BFA_PORT_LINKSTATE_RSN_REMOTE_FAULT</span>	<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">BFA_PORT_LINKSTATE_RSN_TIMEOUT</span>		<span class="o">=</span> <span class="mi">11</span><span class="p">,</span>



	<span class="cm">/* CEE related reason codes/errors */</span>
	<span class="n">CEE_LLDP_INFO_AGED_OUT</span>			<span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
	<span class="n">CEE_LLDP_SHUTDOWN_TLV_RCVD</span>		<span class="o">=</span> <span class="mi">21</span><span class="p">,</span>
	<span class="n">CEE_PEER_NOT_ADVERTISE_DCBX</span>		<span class="o">=</span> <span class="mi">22</span><span class="p">,</span>
	<span class="n">CEE_PEER_NOT_ADVERTISE_PG</span>		<span class="o">=</span> <span class="mi">23</span><span class="p">,</span>
	<span class="n">CEE_PEER_NOT_ADVERTISE_PFC</span>		<span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
	<span class="n">CEE_PEER_NOT_ADVERTISE_FCOE</span>		<span class="o">=</span> <span class="mi">25</span><span class="p">,</span>
	<span class="n">CEE_PG_NOT_COMPATIBLE</span>			<span class="o">=</span> <span class="mi">26</span><span class="p">,</span>
	<span class="n">CEE_PFC_NOT_COMPATIBLE</span>			<span class="o">=</span> <span class="mi">27</span><span class="p">,</span>
	<span class="n">CEE_FCOE_NOT_COMPATIBLE</span>			<span class="o">=</span> <span class="mi">28</span><span class="p">,</span>
	<span class="n">CEE_BAD_PG_RCVD</span>				<span class="o">=</span> <span class="mi">29</span><span class="p">,</span>
	<span class="n">CEE_BAD_BW_RCVD</span>				<span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
	<span class="n">CEE_BAD_PFC_RCVD</span>			<span class="o">=</span> <span class="mi">31</span><span class="p">,</span>
	<span class="n">CEE_BAD_APP_PRI_RCVD</span>			<span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
	<span class="n">CEE_FCOE_PRI_PFC_OFF</span>			<span class="o">=</span> <span class="mi">33</span><span class="p">,</span>
	<span class="n">CEE_DUP_CONTROL_TLV_RCVD</span>		<span class="o">=</span> <span class="mi">34</span><span class="p">,</span>
	<span class="n">CEE_DUP_FEAT_TLV_RCVD</span>			<span class="o">=</span> <span class="mi">35</span><span class="p">,</span>
	<span class="n">CEE_APPLY_NEW_CFG</span>			<span class="o">=</span> <span class="mi">36</span><span class="p">,</span> <span class="cm">/* reason, not error */</span>
	<span class="n">CEE_PROTOCOL_INIT</span>			<span class="o">=</span> <span class="mi">37</span><span class="p">,</span> <span class="cm">/* reason, not error */</span>
	<span class="n">CEE_PHY_LINK_DOWN</span>			<span class="o">=</span> <span class="mi">38</span><span class="p">,</span>
	<span class="n">CEE_LLS_FCOE_ABSENT</span>			<span class="o">=</span> <span class="mi">39</span><span class="p">,</span>
	<span class="n">CEE_LLS_FCOE_DOWN</span>			<span class="o">=</span> <span class="mi">40</span><span class="p">,</span>
	<span class="n">CEE_ISCSI_NOT_COMPATIBLE</span>		<span class="o">=</span> <span class="mi">41</span><span class="p">,</span>
	<span class="n">CEE_ISCSI_PRI_PFC_OFF</span>			<span class="o">=</span> <span class="mi">42</span><span class="p">,</span>
	<span class="n">CEE_ISCSI_PRI_OVERLAP_FCOE_PRI</span>		<span class="o">=</span> <span class="mi">43</span>
<span class="p">};</span>

<span class="cp">#define MAX_LUN_MASK_CFG 16</span>

<span class="cm">/*</span>
<span class="cm"> * Initially flash content may be fff. On making LUN mask enable and disable</span>
<span class="cm"> * state chnage.  when report lun command is being processed it goes from</span>
<span class="cm"> * BFA_LUN_MASK_ACTIVE to BFA_LUN_MASK_FETCH and comes back to</span>
<span class="cm"> * BFA_LUN_MASK_ACTIVE.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_ioim_lun_mask_state_s</span> <span class="p">{</span>
	<span class="n">BFA_IOIM_LUN_MASK_INACTIVE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">BFA_IOIM_LUN_MASK_ACTIVE</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFA_IOIM_LUN_MASK_FETCHED</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfa_lunmask_state_s</span> <span class="p">{</span>
	<span class="n">BFA_LUNMASK_DISABLED</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">BFA_LUNMASK_ENABLED</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">BFA_LUNMASK_MINCFG</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">BFA_LUNMASK_UNINITIALIZED</span> <span class="o">=</span> <span class="mh">0xff</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#pragma pack(1)</span>
<span class="cm">/*</span>
<span class="cm"> * LUN mask configuration</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_lun_mask_s</span> <span class="p">{</span>
	<span class="n">wwn_t</span>		<span class="n">lp_wwn</span><span class="p">;</span>
	<span class="n">wwn_t</span>		<span class="n">rp_wwn</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">scsi_lun</span>	<span class="n">lun</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">ua</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u16</span>		<span class="n">rp_tag</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">lp_tag</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">state</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define MAX_LUN_MASK_CFG 16</span>
<span class="k">struct</span> <span class="n">bfa_lunmask_cfg_s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">status</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">rsvd</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_lun_mask_s</span>	<span class="n">lun_list</span><span class="p">[</span><span class="n">MAX_LUN_MASK_CFG</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *      Physical port configuration</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_port_cfg_s</span> <span class="p">{</span>
	<span class="n">u8</span>	 <span class="n">topology</span><span class="p">;</span>	<span class="cm">/*  bfa_port_topology		*/</span>
	<span class="n">u8</span>	 <span class="n">speed</span><span class="p">;</span>		<span class="cm">/*  enum bfa_port_speed	*/</span>
	<span class="n">u8</span>	 <span class="n">trunked</span><span class="p">;</span>	<span class="cm">/*  trunked or not		*/</span>
	<span class="n">u8</span>	 <span class="n">qos_enabled</span><span class="p">;</span>	<span class="cm">/*  qos enabled or not		*/</span>
	<span class="n">u8</span>	 <span class="n">cfg_hardalpa</span><span class="p">;</span>	<span class="cm">/*  is hard alpa configured	*/</span>
	<span class="n">u8</span>	 <span class="n">hardalpa</span><span class="p">;</span>	<span class="cm">/*  configured hard alpa	*/</span>
	<span class="n">__be16</span>	 <span class="n">maxfrsize</span><span class="p">;</span>	<span class="cm">/*  maximum frame size		*/</span>
	<span class="n">u8</span>	 <span class="n">rx_bbcredit</span><span class="p">;</span>	<span class="cm">/*  receive buffer credits	*/</span>
	<span class="n">u8</span>	 <span class="n">tx_bbcredit</span><span class="p">;</span>	<span class="cm">/*  transmit buffer credits	*/</span>
	<span class="n">u8</span>	 <span class="n">ratelimit</span><span class="p">;</span>	<span class="cm">/*  ratelimit enabled or not	*/</span>
	<span class="n">u8</span>	 <span class="n">trl_def_speed</span><span class="p">;</span>	<span class="cm">/*  ratelimit default speed	*/</span>
	<span class="n">u8</span>	 <span class="n">bb_scn</span><span class="p">;</span>	<span class="cm">/*  BB_SCN value from FLOGI Exchg */</span>
	<span class="n">u8</span>	 <span class="n">bb_scn_state</span><span class="p">;</span>	<span class="cm">/*  Config state of BB_SCN */</span>
	<span class="n">u8</span>	 <span class="n">faa_state</span><span class="p">;</span>	<span class="cm">/*  FAA enabled/disabled        */</span>
	<span class="n">u8</span>	 <span class="n">rsvd</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
	<span class="n">u16</span>	 <span class="n">path_tov</span><span class="p">;</span>	<span class="cm">/*  device path timeout	*/</span>
	<span class="n">u16</span>	 <span class="n">q_depth</span><span class="p">;</span>	<span class="cm">/*  SCSI Queue depth		*/</span>
<span class="p">};</span>
<span class="cp">#pragma pack()</span>

<span class="cm">/*</span>
<span class="cm"> *	Port attribute values.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_port_attr_s</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * Static fields</span>
<span class="cm">	 */</span>
	<span class="n">wwn_t</span>			<span class="n">nwwn</span><span class="p">;</span>		<span class="cm">/*  node wwn */</span>
	<span class="n">wwn_t</span>			<span class="n">pwwn</span><span class="p">;</span>		<span class="cm">/*  port wwn */</span>
	<span class="n">wwn_t</span>			<span class="n">factorynwwn</span><span class="p">;</span>	<span class="cm">/*  factory node wwn */</span>
	<span class="n">wwn_t</span>			<span class="n">factorypwwn</span><span class="p">;</span>	<span class="cm">/*  factory port wwn */</span>
	<span class="k">enum</span> <span class="n">fc_cos</span>		<span class="n">cos_supported</span><span class="p">;</span>	<span class="cm">/*  supported class of</span>
<span class="cm">						 *  services */</span>
	<span class="n">u32</span>			<span class="n">rsvd</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">fc_symname_s</span>	<span class="n">port_symname</span><span class="p">;</span>	<span class="cm">/*  port symbolic name */</span>
	<span class="k">enum</span> <span class="n">bfa_port_speed</span>	<span class="n">speed_supported</span><span class="p">;</span> <span class="cm">/* supported speeds */</span>
	<span class="n">bfa_boolean_t</span>		<span class="n">pbind_enabled</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * Configured values</span>
<span class="cm">	 */</span>
	<span class="k">struct</span> <span class="n">bfa_port_cfg_s</span>	<span class="n">pport_cfg</span><span class="p">;</span>	<span class="cm">/*  pport cfg */</span>

	<span class="cm">/*</span>
<span class="cm">	 * Dynamic field - info from BFA</span>
<span class="cm">	 */</span>
	<span class="k">enum</span> <span class="n">bfa_port_states</span>	<span class="n">port_state</span><span class="p">;</span>	<span class="cm">/*  current port state */</span>
	<span class="k">enum</span> <span class="n">bfa_port_speed</span>	<span class="n">speed</span><span class="p">;</span>		<span class="cm">/*  current speed */</span>
	<span class="k">enum</span> <span class="n">bfa_port_topology</span>	<span class="n">topology</span><span class="p">;</span>	<span class="cm">/*  current topology */</span>
	<span class="n">bfa_boolean_t</span>		<span class="n">beacon</span><span class="p">;</span>		<span class="cm">/*  current beacon status */</span>
	<span class="n">bfa_boolean_t</span>		<span class="n">link_e2e_beacon</span><span class="p">;</span> <span class="cm">/* link beacon is on */</span>
	<span class="n">bfa_boolean_t</span>		<span class="n">bbsc_op_status</span><span class="p">;</span>	<span class="cm">/* fc credit recovery oper</span>
<span class="cm">						 * state */</span>

	<span class="cm">/*</span>
<span class="cm">	 * Dynamic field - info from FCS</span>
<span class="cm">	 */</span>
	<span class="n">u32</span>			<span class="n">pid</span><span class="p">;</span>		<span class="cm">/*  port ID */</span>
	<span class="k">enum</span> <span class="n">bfa_port_type</span>	<span class="n">port_type</span><span class="p">;</span>	<span class="cm">/*  current topology */</span>
	<span class="n">u32</span>			<span class="n">loopback</span><span class="p">;</span>	<span class="cm">/*  external loopback */</span>
	<span class="n">u32</span>			<span class="n">authfail</span><span class="p">;</span>	<span class="cm">/*  auth fail state */</span>

	<span class="cm">/* FCoE specific  */</span>
	<span class="n">u16</span>			<span class="n">fcoe_vlan</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">rsvd1</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	      Port FCP mappings.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_port_fcpmap_s</span> <span class="p">{</span>
	<span class="kt">char</span>	<span class="n">osdevname</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
	<span class="n">u32</span>	<span class="n">bus</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">target</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">oslun</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">fcid</span><span class="p">;</span>
	<span class="n">wwn_t</span>	<span class="n">nwwn</span><span class="p">;</span>
	<span class="n">wwn_t</span>	<span class="n">pwwn</span><span class="p">;</span>
	<span class="n">u64</span>	<span class="n">fcplun</span><span class="p">;</span>
	<span class="kt">char</span>	<span class="n">luid</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	      Port RNID info.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_port_rnid_s</span> <span class="p">{</span>
	<span class="n">wwn_t</span>	  <span class="n">wwn</span><span class="p">;</span>
	<span class="n">u32</span>	  <span class="n">unittype</span><span class="p">;</span>
	<span class="n">u32</span>	  <span class="n">portid</span><span class="p">;</span>
	<span class="n">u32</span>	  <span class="n">attached_nodes_num</span><span class="p">;</span>
	<span class="n">u16</span>	  <span class="n">ip_version</span><span class="p">;</span>
	<span class="n">u16</span>	  <span class="n">udp_port</span><span class="p">;</span>
	<span class="n">u8</span>	  <span class="n">ipaddr</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">u16</span>	  <span class="n">rsvd</span><span class="p">;</span>
	<span class="n">u16</span>	  <span class="n">topologydiscoveryflags</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#pragma pack(1)</span>
<span class="k">struct</span> <span class="n">bfa_fcport_fcf_s</span> <span class="p">{</span>
	<span class="n">wwn_t</span>	<span class="n">name</span><span class="p">;</span>		<span class="cm">/*  FCF name		   */</span>
	<span class="n">wwn_t</span>	<span class="n">fabric_name</span><span class="p">;</span>    <span class="cm">/*  Fabric Name		   */</span>
	<span class="n">u8</span>	<span class="n">fipenabled</span><span class="p">;</span>	<span class="cm">/*  FIP enabled or not	   */</span>
	<span class="n">u8</span>	<span class="n">fipfailed</span><span class="p">;</span>	<span class="cm">/*  FIP failed or not	   */</span>
	<span class="n">u8</span>	<span class="n">resv</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">pri</span><span class="p">;</span>		<span class="cm">/*  FCF priority	   */</span>
	<span class="n">u8</span>	<span class="n">version</span><span class="p">;</span>	<span class="cm">/*  FIP version used	   */</span>
	<span class="n">u8</span>	<span class="n">available</span><span class="p">;</span>      <span class="cm">/*  Available for login    */</span>
	<span class="n">u8</span>	<span class="n">fka_disabled</span><span class="p">;</span>   <span class="cm">/*  FKA is disabled	   */</span>
	<span class="n">u8</span>	<span class="n">maxsz_verified</span><span class="p">;</span> <span class="cm">/*  FCoE max size verified */</span>
	<span class="n">u8</span>	<span class="n">fc_map</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>      <span class="cm">/*  FC map		   */</span>
	<span class="n">__be16</span>	<span class="n">vlan</span><span class="p">;</span>		<span class="cm">/*  FCoE vlan tag/priority */</span>
	<span class="n">u32</span>	<span class="n">fka_adv_per</span><span class="p">;</span>    <span class="cm">/*  FIP  ka advert. period */</span>
	<span class="n">mac_t</span>	<span class="n">mac</span><span class="p">;</span>		<span class="cm">/*  FCF mac		   */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	Trunk states for BCU/BFAL</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_trunk_state</span> <span class="p">{</span>
	<span class="n">BFA_TRUNK_DISABLED</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/*  Trunk is not configured	*/</span>
	<span class="n">BFA_TRUNK_ONLINE</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/*  Trunk is online		*/</span>
	<span class="n">BFA_TRUNK_OFFLINE</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/*  Trunk is offline		*/</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	VC attributes for trunked link</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_trunk_vc_attr_s</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">bb_credit</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">elp_opmode_flags</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">req_credit</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">vc_credits</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	Link state information</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_port_link_s</span> <span class="p">{</span>
	<span class="n">u8</span>	 <span class="n">linkstate</span><span class="p">;</span>	<span class="cm">/*  Link state bfa_port_linkstate */</span>
	<span class="n">u8</span>	 <span class="n">linkstate_rsn</span><span class="p">;</span>	<span class="cm">/*  bfa_port_linkstate_rsn_t */</span>
	<span class="n">u8</span>	 <span class="n">topology</span><span class="p">;</span>	<span class="cm">/*  P2P/LOOP bfa_port_topology */</span>
	<span class="n">u8</span>	 <span class="n">speed</span><span class="p">;</span>		<span class="cm">/*  Link speed (1/2/4/8 G) */</span>
	<span class="n">u32</span>	 <span class="n">linkstate_opt</span><span class="p">;</span> <span class="cm">/*  Linkstate optional data (debug) */</span>
	<span class="n">u8</span>	 <span class="n">trunked</span><span class="p">;</span>	<span class="cm">/*  Trunked or not (1 or 0) */</span>
	<span class="n">u8</span>	 <span class="n">resvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">bfa_qos_attr_s</span>  <span class="n">qos_attr</span><span class="p">;</span>   <span class="cm">/* QoS Attributes */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">bfa_qos_vc_attr_s</span> <span class="n">qos_vc_attr</span><span class="p">;</span>  <span class="cm">/*  VC info from ELP */</span>
		<span class="k">struct</span> <span class="n">bfa_trunk_vc_attr_s</span> <span class="n">trunk_vc_attr</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">bfa_fcport_fcf_s</span> <span class="n">fcf</span><span class="p">;</span> <span class="cm">/*  FCF information (for FCoE) */</span>
	<span class="p">}</span> <span class="n">vc_fcf</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#pragma pack()</span>

<span class="k">enum</span> <span class="n">bfa_trunk_link_fctl</span> <span class="p">{</span>
	<span class="n">BFA_TRUNK_LINK_FCTL_NORMAL</span><span class="p">,</span>
	<span class="n">BFA_TRUNK_LINK_FCTL_VC</span><span class="p">,</span>
	<span class="n">BFA_TRUNK_LINK_FCTL_VC_QOS</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfa_trunk_link_state</span> <span class="p">{</span>
	<span class="n">BFA_TRUNK_LINK_STATE_UP</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>		<span class="cm">/* link part of trunk */</span>
	<span class="n">BFA_TRUNK_LINK_STATE_DN_LINKDN</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/* physical link down */</span>
	<span class="n">BFA_TRUNK_LINK_STATE_DN_GRP_MIS</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/* trunk group different */</span>
	<span class="n">BFA_TRUNK_LINK_STATE_DN_SPD_MIS</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>	<span class="cm">/* speed mismatch */</span>
	<span class="n">BFA_TRUNK_LINK_STATE_DN_MODE_MIS</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>	<span class="cm">/* remote port not trunked */</span>
<span class="p">};</span>

<span class="cp">#define BFA_TRUNK_MAX_PORTS	2</span>
<span class="k">struct</span> <span class="n">bfa_trunk_link_attr_s</span> <span class="p">{</span>
	<span class="n">wwn_t</span>    <span class="n">trunk_wwn</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">bfa_trunk_link_fctl</span> <span class="n">fctl</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">bfa_trunk_link_state</span> <span class="n">link_state</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">bfa_port_speed</span>	<span class="n">speed</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">deskew</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_trunk_attr_s</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">bfa_trunk_state</span>	<span class="n">state</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">bfa_port_speed</span>	<span class="n">speed</span><span class="p">;</span>
	<span class="n">u32</span>		<span class="n">port_id</span><span class="p">;</span>
	<span class="n">u32</span>		<span class="n">rsvd</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_trunk_link_attr_s</span> <span class="n">link_attr</span><span class="p">[</span><span class="n">BFA_TRUNK_MAX_PORTS</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_rport_hal_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>        <span class="n">sm_un_cr</span><span class="p">;</span>	    <span class="cm">/*  uninit: create events      */</span>
	<span class="n">u32</span>        <span class="n">sm_un_unexp</span><span class="p">;</span>	    <span class="cm">/*  uninit: exception events   */</span>
	<span class="n">u32</span>        <span class="n">sm_cr_on</span><span class="p">;</span>	    <span class="cm">/*  created: online events     */</span>
	<span class="n">u32</span>        <span class="n">sm_cr_del</span><span class="p">;</span>	    <span class="cm">/*  created: delete events     */</span>
	<span class="n">u32</span>        <span class="n">sm_cr_hwf</span><span class="p">;</span>	    <span class="cm">/*  created: IOC down          */</span>
	<span class="n">u32</span>        <span class="n">sm_cr_unexp</span><span class="p">;</span>	    <span class="cm">/*  created: exception events  */</span>
	<span class="n">u32</span>        <span class="n">sm_fwc_rsp</span><span class="p">;</span>	    <span class="cm">/*  fw create: f/w responses   */</span>
	<span class="n">u32</span>        <span class="n">sm_fwc_del</span><span class="p">;</span>	    <span class="cm">/*  fw create: delete events   */</span>
	<span class="n">u32</span>        <span class="n">sm_fwc_off</span><span class="p">;</span>	    <span class="cm">/*  fw create: offline events  */</span>
	<span class="n">u32</span>        <span class="n">sm_fwc_hwf</span><span class="p">;</span>	    <span class="cm">/*  fw create: IOC down        */</span>
	<span class="n">u32</span>        <span class="n">sm_fwc_unexp</span><span class="p">;</span>    <span class="cm">/*  fw create: exception events*/</span>
	<span class="n">u32</span>        <span class="n">sm_on_off</span><span class="p">;</span>	    <span class="cm">/*  online: offline events     */</span>
	<span class="n">u32</span>        <span class="n">sm_on_del</span><span class="p">;</span>	    <span class="cm">/*  online: delete events      */</span>
	<span class="n">u32</span>        <span class="n">sm_on_hwf</span><span class="p">;</span>	    <span class="cm">/*  online: IOC down events    */</span>
	<span class="n">u32</span>        <span class="n">sm_on_unexp</span><span class="p">;</span>	    <span class="cm">/*  online: exception events   */</span>
	<span class="n">u32</span>        <span class="n">sm_fwd_rsp</span><span class="p">;</span>	    <span class="cm">/*  fw delete: fw responses    */</span>
	<span class="n">u32</span>        <span class="n">sm_fwd_del</span><span class="p">;</span>	    <span class="cm">/*  fw delete: delete events   */</span>
	<span class="n">u32</span>        <span class="n">sm_fwd_hwf</span><span class="p">;</span>	    <span class="cm">/*  fw delete: IOC down events */</span>
	<span class="n">u32</span>        <span class="n">sm_fwd_unexp</span><span class="p">;</span>    <span class="cm">/*  fw delete: exception events*/</span>
	<span class="n">u32</span>        <span class="n">sm_off_del</span><span class="p">;</span>	    <span class="cm">/*  offline: delete events     */</span>
	<span class="n">u32</span>        <span class="n">sm_off_on</span><span class="p">;</span>	    <span class="cm">/*  offline: online events     */</span>
	<span class="n">u32</span>        <span class="n">sm_off_hwf</span><span class="p">;</span>	    <span class="cm">/*  offline: IOC down events   */</span>
	<span class="n">u32</span>        <span class="n">sm_off_unexp</span><span class="p">;</span>    <span class="cm">/*  offline: exception events  */</span>
	<span class="n">u32</span>        <span class="n">sm_del_fwrsp</span><span class="p">;</span>    <span class="cm">/*  delete: fw responses       */</span>
	<span class="n">u32</span>        <span class="n">sm_del_hwf</span><span class="p">;</span>	    <span class="cm">/*  delete: IOC down events    */</span>
	<span class="n">u32</span>        <span class="n">sm_del_unexp</span><span class="p">;</span>    <span class="cm">/*  delete: exception events   */</span>
	<span class="n">u32</span>        <span class="n">sm_delp_fwrsp</span><span class="p">;</span>   <span class="cm">/*  delete pend: fw responses  */</span>
	<span class="n">u32</span>        <span class="n">sm_delp_hwf</span><span class="p">;</span>	    <span class="cm">/*  delete pend: IOC downs     */</span>
	<span class="n">u32</span>        <span class="n">sm_delp_unexp</span><span class="p">;</span>   <span class="cm">/*  delete pend: exceptions    */</span>
	<span class="n">u32</span>        <span class="n">sm_offp_fwrsp</span><span class="p">;</span>   <span class="cm">/*  off-pending: fw responses  */</span>
	<span class="n">u32</span>        <span class="n">sm_offp_del</span><span class="p">;</span>	    <span class="cm">/*  off-pending: deletes       */</span>
	<span class="n">u32</span>        <span class="n">sm_offp_hwf</span><span class="p">;</span>	    <span class="cm">/*  off-pending: IOC downs     */</span>
	<span class="n">u32</span>        <span class="n">sm_offp_unexp</span><span class="p">;</span>   <span class="cm">/*  off-pending: exceptions    */</span>
	<span class="n">u32</span>        <span class="n">sm_iocd_off</span><span class="p">;</span>	    <span class="cm">/*  IOC down: offline events   */</span>
	<span class="n">u32</span>        <span class="n">sm_iocd_del</span><span class="p">;</span>	    <span class="cm">/*  IOC down: delete events    */</span>
	<span class="n">u32</span>        <span class="n">sm_iocd_on</span><span class="p">;</span>	    <span class="cm">/*  IOC down: online events    */</span>
	<span class="n">u32</span>        <span class="n">sm_iocd_unexp</span><span class="p">;</span>   <span class="cm">/*  IOC down: exceptions       */</span>
	<span class="n">u32</span>        <span class="n">rsvd</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#pragma pack(1)</span>
<span class="cm">/*</span>
<span class="cm"> *  Rport&#39;s QoS attributes</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_rport_qos_attr_s</span> <span class="p">{</span>
	<span class="n">u8</span>		<span class="n">qos_priority</span><span class="p">;</span>	<span class="cm">/*  rport&#39;s QoS priority   */</span>
	<span class="n">u8</span>		<span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u32</span>		<span class="n">qos_flow_id</span><span class="p">;</span>	<span class="cm">/*  QoS flow Id	 */</span>
<span class="p">};</span>
<span class="cp">#pragma pack()</span>

<span class="cp">#define BFA_IOBUCKET_MAX 14</span>

<span class="k">struct</span> <span class="n">bfa_itnim_latency_s</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">min</span><span class="p">[</span><span class="n">BFA_IOBUCKET_MAX</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">max</span><span class="p">[</span><span class="n">BFA_IOBUCKET_MAX</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">count</span><span class="p">[</span><span class="n">BFA_IOBUCKET_MAX</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">avg</span><span class="p">[</span><span class="n">BFA_IOBUCKET_MAX</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_itnim_ioprofile_s</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">clock_res_mul</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">clock_res_div</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">index</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">io_profile_start_time</span><span class="p">;</span>	<span class="cm">/*  IO profile start time	*/</span>
	<span class="n">u32</span> <span class="n">iocomps</span><span class="p">[</span><span class="n">BFA_IOBUCKET_MAX</span><span class="p">];</span>	<span class="cm">/*  IO completed	*/</span>
	<span class="k">struct</span> <span class="n">bfa_itnim_latency_s</span> <span class="n">io_latency</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	vHBA port attribute values.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_vhba_attr_s</span> <span class="p">{</span>
	<span class="n">wwn_t</span>	<span class="n">nwwn</span><span class="p">;</span>       <span class="cm">/* node wwn */</span>
	<span class="n">wwn_t</span>	<span class="n">pwwn</span><span class="p">;</span>       <span class="cm">/* port wwn */</span>
	<span class="n">u32</span>	<span class="n">pid</span><span class="p">;</span>        <span class="cm">/* port ID */</span>
	<span class="n">bfa_boolean_t</span>       <span class="n">io_profile</span><span class="p">;</span> <span class="cm">/* get it from fcpim mod */</span>
	<span class="n">bfa_boolean_t</span>       <span class="n">plog_enabled</span><span class="p">;</span>   <span class="cm">/* portlog is enabled */</span>
	<span class="n">u16</span>	<span class="n">path_tov</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">rsvd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * FC physical port statistics.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_port_fc_stats_s</span> <span class="p">{</span>
	<span class="n">u64</span>     <span class="n">secs_reset</span><span class="p">;</span>     <span class="cm">/*  Seconds since stats is reset */</span>
	<span class="n">u64</span>     <span class="n">tx_frames</span><span class="p">;</span>      <span class="cm">/*  Tx frames                   */</span>
	<span class="n">u64</span>     <span class="n">tx_words</span><span class="p">;</span>       <span class="cm">/*  Tx words                    */</span>
	<span class="n">u64</span>     <span class="n">tx_lip</span><span class="p">;</span>         <span class="cm">/*  Tx LIP                      */</span>
	<span class="n">u64</span>     <span class="n">tx_nos</span><span class="p">;</span>         <span class="cm">/*  Tx NOS                      */</span>
	<span class="n">u64</span>     <span class="n">tx_ols</span><span class="p">;</span>         <span class="cm">/*  Tx OLS                      */</span>
	<span class="n">u64</span>     <span class="n">tx_lr</span><span class="p">;</span>          <span class="cm">/*  Tx LR                       */</span>
	<span class="n">u64</span>     <span class="n">tx_lrr</span><span class="p">;</span>         <span class="cm">/*  Tx LRR                      */</span>
	<span class="n">u64</span>     <span class="n">rx_frames</span><span class="p">;</span>      <span class="cm">/*  Rx frames                   */</span>
	<span class="n">u64</span>     <span class="n">rx_words</span><span class="p">;</span>       <span class="cm">/*  Rx words                    */</span>
	<span class="n">u64</span>     <span class="n">lip_count</span><span class="p">;</span>      <span class="cm">/*  Rx LIP                      */</span>
	<span class="n">u64</span>     <span class="n">nos_count</span><span class="p">;</span>      <span class="cm">/*  Rx NOS                      */</span>
	<span class="n">u64</span>     <span class="n">ols_count</span><span class="p">;</span>      <span class="cm">/*  Rx OLS                      */</span>
	<span class="n">u64</span>     <span class="n">lr_count</span><span class="p">;</span>       <span class="cm">/*  Rx LR                       */</span>
	<span class="n">u64</span>     <span class="n">lrr_count</span><span class="p">;</span>      <span class="cm">/*  Rx LRR                      */</span>
	<span class="n">u64</span>     <span class="n">invalid_crcs</span><span class="p">;</span>   <span class="cm">/*  Rx CRC err frames           */</span>
	<span class="n">u64</span>     <span class="n">invalid_crc_gd_eof</span><span class="p">;</span> <span class="cm">/*  Rx CRC err good EOF frames */</span>
	<span class="n">u64</span>     <span class="n">undersized_frm</span><span class="p">;</span> <span class="cm">/*  Rx undersized frames        */</span>
	<span class="n">u64</span>     <span class="n">oversized_frm</span><span class="p">;</span>  <span class="cm">/*  Rx oversized frames */</span>
	<span class="n">u64</span>     <span class="n">bad_eof_frm</span><span class="p">;</span>    <span class="cm">/*  Rx frames with bad EOF      */</span>
	<span class="n">u64</span>     <span class="n">error_frames</span><span class="p">;</span>   <span class="cm">/*  Errored frames              */</span>
	<span class="n">u64</span>     <span class="n">dropped_frames</span><span class="p">;</span> <span class="cm">/*  Dropped frames              */</span>
	<span class="n">u64</span>     <span class="n">link_failures</span><span class="p">;</span>  <span class="cm">/*  Link Failure (LF) count     */</span>
	<span class="n">u64</span>     <span class="n">loss_of_syncs</span><span class="p">;</span>  <span class="cm">/*  Loss of sync count          */</span>
	<span class="n">u64</span>     <span class="n">loss_of_signals</span><span class="p">;</span> <span class="cm">/*  Loss of signal count       */</span>
	<span class="n">u64</span>     <span class="n">primseq_errs</span><span class="p">;</span>   <span class="cm">/*  Primitive sequence protocol err. */</span>
	<span class="n">u64</span>     <span class="n">bad_os_count</span><span class="p">;</span>   <span class="cm">/*  Invalid ordered sets        */</span>
	<span class="n">u64</span>     <span class="n">err_enc_out</span><span class="p">;</span>    <span class="cm">/*  Encoding err nonframe_8b10b */</span>
	<span class="n">u64</span>     <span class="n">err_enc</span><span class="p">;</span>        <span class="cm">/*  Encoding err frame_8b10b    */</span>
	<span class="n">u64</span>	<span class="n">bbsc_frames_lost</span><span class="p">;</span> <span class="cm">/* Credit Recovery-Frames Lost  */</span>
	<span class="n">u64</span>	<span class="n">bbsc_credits_lost</span><span class="p">;</span> <span class="cm">/* Credit Recovery-Credits Lost */</span>
	<span class="n">u64</span>	<span class="n">bbsc_link_resets</span><span class="p">;</span> <span class="cm">/* Credit Recovery-Link Resets   */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Eth Physical Port statistics.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_port_eth_stats_s</span> <span class="p">{</span>
	<span class="n">u64</span>     <span class="n">secs_reset</span><span class="p">;</span>     <span class="cm">/*  Seconds since stats is reset */</span>
	<span class="n">u64</span>     <span class="n">frame_64</span><span class="p">;</span>       <span class="cm">/*  Frames 64 bytes             */</span>
	<span class="n">u64</span>     <span class="n">frame_65_127</span><span class="p">;</span>   <span class="cm">/*  Frames 65-127 bytes */</span>
	<span class="n">u64</span>     <span class="n">frame_128_255</span><span class="p">;</span>  <span class="cm">/*  Frames 128-255 bytes        */</span>
	<span class="n">u64</span>     <span class="n">frame_256_511</span><span class="p">;</span>  <span class="cm">/*  Frames 256-511 bytes        */</span>
	<span class="n">u64</span>     <span class="n">frame_512_1023</span><span class="p">;</span> <span class="cm">/*  Frames 512-1023 bytes       */</span>
	<span class="n">u64</span>     <span class="n">frame_1024_1518</span><span class="p">;</span> <span class="cm">/*  Frames 1024-1518 bytes     */</span>
	<span class="n">u64</span>     <span class="n">frame_1519_1522</span><span class="p">;</span> <span class="cm">/*  Frames 1519-1522 bytes     */</span>
	<span class="n">u64</span>     <span class="n">tx_bytes</span><span class="p">;</span>       <span class="cm">/*  Tx bytes                    */</span>
	<span class="n">u64</span>     <span class="n">tx_packets</span><span class="p">;</span>      <span class="cm">/*  Tx packets         */</span>
	<span class="n">u64</span>     <span class="n">tx_mcast_packets</span><span class="p">;</span> <span class="cm">/*  Tx multicast packets      */</span>
	<span class="n">u64</span>     <span class="n">tx_bcast_packets</span><span class="p">;</span> <span class="cm">/*  Tx broadcast packets      */</span>
	<span class="n">u64</span>     <span class="n">tx_control_frame</span><span class="p">;</span> <span class="cm">/*  Tx control frame          */</span>
	<span class="n">u64</span>     <span class="n">tx_drop</span><span class="p">;</span>        <span class="cm">/*  Tx drops                    */</span>
	<span class="n">u64</span>     <span class="n">tx_jabber</span><span class="p">;</span>      <span class="cm">/*  Tx jabber                   */</span>
	<span class="n">u64</span>     <span class="n">tx_fcs_error</span><span class="p">;</span>   <span class="cm">/*  Tx FCS errors               */</span>
	<span class="n">u64</span>     <span class="n">tx_fragments</span><span class="p">;</span>   <span class="cm">/*  Tx fragments                */</span>
	<span class="n">u64</span>     <span class="n">rx_bytes</span><span class="p">;</span>       <span class="cm">/*  Rx bytes                    */</span>
	<span class="n">u64</span>     <span class="n">rx_packets</span><span class="p">;</span>     <span class="cm">/*  Rx packets                  */</span>
	<span class="n">u64</span>     <span class="n">rx_mcast_packets</span><span class="p">;</span> <span class="cm">/*  Rx multicast packets      */</span>
	<span class="n">u64</span>     <span class="n">rx_bcast_packets</span><span class="p">;</span> <span class="cm">/*  Rx broadcast packets      */</span>
	<span class="n">u64</span>     <span class="n">rx_control_frames</span><span class="p">;</span> <span class="cm">/*  Rx control frames        */</span>
	<span class="n">u64</span>     <span class="n">rx_unknown_opcode</span><span class="p">;</span> <span class="cm">/*  Rx unknown opcode        */</span>
	<span class="n">u64</span>     <span class="n">rx_drop</span><span class="p">;</span>        <span class="cm">/*  Rx drops                    */</span>
	<span class="n">u64</span>     <span class="n">rx_jabber</span><span class="p">;</span>      <span class="cm">/*  Rx jabber                   */</span>
	<span class="n">u64</span>     <span class="n">rx_fcs_error</span><span class="p">;</span>   <span class="cm">/*  Rx FCS errors               */</span>
	<span class="n">u64</span>     <span class="n">rx_alignment_error</span><span class="p">;</span> <span class="cm">/*  Rx alignment errors     */</span>
	<span class="n">u64</span>     <span class="n">rx_frame_length_error</span><span class="p">;</span> <span class="cm">/*  Rx frame len errors  */</span>
	<span class="n">u64</span>     <span class="n">rx_code_error</span><span class="p">;</span>  <span class="cm">/*  Rx code errors              */</span>
	<span class="n">u64</span>     <span class="n">rx_fragments</span><span class="p">;</span>   <span class="cm">/*  Rx fragments                */</span>
	<span class="n">u64</span>     <span class="n">rx_pause</span><span class="p">;</span>       <span class="cm">/*  Rx pause                    */</span>
	<span class="n">u64</span>     <span class="n">rx_zero_pause</span><span class="p">;</span>  <span class="cm">/*  Rx zero pause               */</span>
	<span class="n">u64</span>     <span class="n">tx_pause</span><span class="p">;</span>       <span class="cm">/*  Tx pause                    */</span>
	<span class="n">u64</span>     <span class="n">tx_zero_pause</span><span class="p">;</span>  <span class="cm">/*  Tx zero pause               */</span>
	<span class="n">u64</span>     <span class="n">rx_fcoe_pause</span><span class="p">;</span>  <span class="cm">/*  Rx FCoE pause               */</span>
	<span class="n">u64</span>     <span class="n">rx_fcoe_zero_pause</span><span class="p">;</span> <span class="cm">/*  Rx FCoE zero pause      */</span>
	<span class="n">u64</span>     <span class="n">tx_fcoe_pause</span><span class="p">;</span>  <span class="cm">/*  Tx FCoE pause               */</span>
	<span class="n">u64</span>     <span class="n">tx_fcoe_zero_pause</span><span class="p">;</span> <span class="cm">/*  Tx FCoE zero pause      */</span>
	<span class="n">u64</span>     <span class="n">rx_iscsi_pause</span><span class="p">;</span> <span class="cm">/*  Rx iSCSI pause              */</span>
	<span class="n">u64</span>     <span class="n">rx_iscsi_zero_pause</span><span class="p">;</span> <span class="cm">/*  Rx iSCSI zero pause    */</span>
	<span class="n">u64</span>     <span class="n">tx_iscsi_pause</span><span class="p">;</span> <span class="cm">/*  Tx iSCSI pause              */</span>
	<span class="n">u64</span>     <span class="n">tx_iscsi_zero_pause</span><span class="p">;</span> <span class="cm">/*  Tx iSCSI zero pause    */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *              Port statistics.</span>
<span class="cm"> */</span>
<span class="k">union</span> <span class="n">bfa_port_stats_u</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_port_fc_stats_s</span>      <span class="n">fc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_port_eth_stats_s</span>     <span class="n">eth</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_port_cfg_mode_s</span> <span class="p">{</span>
	<span class="n">u16</span>		<span class="n">max_pf</span><span class="p">;</span>
	<span class="n">u16</span>		<span class="n">max_vf</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">bfa_mode_s</span>	<span class="n">mode</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#pragma pack(1)</span>

<span class="cp">#define BFA_CEE_LLDP_MAX_STRING_LEN	(128)</span>
<span class="cp">#define BFA_CEE_DCBX_MAX_PRIORITY	(8)</span>
<span class="cp">#define BFA_CEE_DCBX_MAX_PGID		(8)</span>

<span class="k">struct</span> <span class="n">bfa_cee_lldp_str_s</span> <span class="p">{</span>
	<span class="n">u8</span>	<span class="n">sub_type</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">len</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">rsvd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">value</span><span class="p">[</span><span class="n">BFA_CEE_LLDP_MAX_STRING_LEN</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_cee_lldp_cfg_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_cee_lldp_str_s</span> <span class="n">chassis_id</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_cee_lldp_str_s</span> <span class="n">port_id</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_cee_lldp_str_s</span> <span class="n">port_desc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_cee_lldp_str_s</span> <span class="n">sys_name</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_cee_lldp_str_s</span> <span class="n">sys_desc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_cee_lldp_str_s</span> <span class="n">mgmt_addr</span><span class="p">;</span>
	<span class="n">u16</span>	<span class="n">time_to_live</span><span class="p">;</span>
	<span class="n">u16</span>	<span class="n">enabled_system_cap</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* CEE/DCBX parameters */</span>
<span class="k">struct</span> <span class="n">bfa_cee_dcbx_cfg_s</span> <span class="p">{</span>
	<span class="n">u8</span>	<span class="n">pgid</span><span class="p">[</span><span class="n">BFA_CEE_DCBX_MAX_PRIORITY</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">pg_percentage</span><span class="p">[</span><span class="n">BFA_CEE_DCBX_MAX_PGID</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">pfc_primap</span><span class="p">;</span> <span class="cm">/* bitmap of priorties with PFC enabled */</span>
	<span class="n">u8</span>	<span class="n">fcoe_primap</span><span class="p">;</span> <span class="cm">/* bitmap of priorities used for FcoE traffic */</span>
	<span class="n">u8</span>	<span class="n">iscsi_primap</span><span class="p">;</span> <span class="cm">/* bitmap of priorities used for iSCSI traffic */</span>
	<span class="n">u8</span>	<span class="n">dcbx_version</span><span class="p">;</span> <span class="cm">/* operating version:CEE or preCEE */</span>
	<span class="n">u8</span>	<span class="n">lls_fcoe</span><span class="p">;</span> <span class="cm">/* FCoE Logical Link Status */</span>
	<span class="n">u8</span>	<span class="n">lls_lan</span><span class="p">;</span> <span class="cm">/* LAN Logical Link Status */</span>
	<span class="n">u8</span>	<span class="n">rsvd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* CEE Query */</span>
<span class="k">struct</span> <span class="n">bfa_cee_attr_s</span> <span class="p">{</span>
	<span class="n">u8</span>	<span class="n">cee_status</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">error_reason</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_cee_lldp_cfg_s</span> <span class="n">lldp_remote</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_cee_dcbx_cfg_s</span> <span class="n">dcbx_remote</span><span class="p">;</span>
	<span class="n">mac_t</span> <span class="n">src_mac</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">link_speed</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">nw_priority</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">filler</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* LLDP/DCBX/CEE Statistics */</span>
<span class="k">struct</span> <span class="n">bfa_cee_stats_s</span> <span class="p">{</span>
	<span class="n">u32</span>		<span class="n">lldp_tx_frames</span><span class="p">;</span>		<span class="cm">/* LLDP Tx Frames */</span>
	<span class="n">u32</span>		<span class="n">lldp_rx_frames</span><span class="p">;</span>		<span class="cm">/* LLDP Rx Frames */</span>
	<span class="n">u32</span>		<span class="n">lldp_rx_frames_invalid</span><span class="p">;</span> <span class="cm">/* LLDP Rx Frames invalid */</span>
	<span class="n">u32</span>		<span class="n">lldp_rx_frames_new</span><span class="p">;</span>     <span class="cm">/* LLDP Rx Frames new */</span>
	<span class="n">u32</span>		<span class="n">lldp_tlvs_unrecognized</span><span class="p">;</span> <span class="cm">/* LLDP Rx unrecog. TLVs */</span>
	<span class="n">u32</span>		<span class="n">lldp_rx_shutdown_tlvs</span><span class="p">;</span>  <span class="cm">/* LLDP Rx shutdown TLVs */</span>
	<span class="n">u32</span>		<span class="n">lldp_info_aged_out</span><span class="p">;</span>     <span class="cm">/* LLDP remote info aged */</span>
	<span class="n">u32</span>		<span class="n">dcbx_phylink_ups</span><span class="p">;</span>       <span class="cm">/* DCBX phy link ups */</span>
	<span class="n">u32</span>		<span class="n">dcbx_phylink_downs</span><span class="p">;</span>     <span class="cm">/* DCBX phy link downs */</span>
	<span class="n">u32</span>		<span class="n">dcbx_rx_tlvs</span><span class="p">;</span>           <span class="cm">/* DCBX Rx TLVs */</span>
	<span class="n">u32</span>		<span class="n">dcbx_rx_tlvs_invalid</span><span class="p">;</span>   <span class="cm">/* DCBX Rx TLVs invalid */</span>
	<span class="n">u32</span>		<span class="n">dcbx_control_tlv_error</span><span class="p">;</span> <span class="cm">/* DCBX control TLV errors */</span>
	<span class="n">u32</span>		<span class="n">dcbx_feature_tlv_error</span><span class="p">;</span> <span class="cm">/* DCBX feature TLV errors */</span>
	<span class="n">u32</span>		<span class="n">dcbx_cee_cfg_new</span><span class="p">;</span>       <span class="cm">/* DCBX new CEE cfg rcvd */</span>
	<span class="n">u32</span>		<span class="n">cee_status_down</span><span class="p">;</span>        <span class="cm">/* DCB status down */</span>
	<span class="n">u32</span>		<span class="n">cee_status_up</span><span class="p">;</span>          <span class="cm">/* DCB status up */</span>
	<span class="n">u32</span>		<span class="n">cee_hw_cfg_changed</span><span class="p">;</span>     <span class="cm">/* DCB hw cfg changed */</span>
	<span class="n">u32</span>		<span class="n">cee_rx_invalid_cfg</span><span class="p">;</span>     <span class="cm">/* DCB invalid cfg */</span>
<span class="p">};</span>

<span class="cp">#pragma pack()</span>

<span class="cm">/*</span>
<span class="cm"> *			AEN related definitions</span>
<span class="cm"> */</span>
<span class="cp">#define BFAD_NL_VENDOR_ID (((u64)0x01 &lt;&lt; SCSI_NL_VID_TYPE_SHIFT) \</span>
<span class="cp">			   | BFA_PCI_VENDOR_ID_BROCADE)</span>

<span class="cm">/* BFA remote port events */</span>
<span class="k">enum</span> <span class="n">bfa_rport_aen_event</span> <span class="p">{</span>
	<span class="n">BFA_RPORT_AEN_ONLINE</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>   <span class="cm">/* RPort online event */</span>
	<span class="n">BFA_RPORT_AEN_OFFLINE</span>    <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>   <span class="cm">/* RPort offline event */</span>
	<span class="n">BFA_RPORT_AEN_DISCONNECT</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>   <span class="cm">/* RPort disconnect event */</span>
	<span class="n">BFA_RPORT_AEN_QOS_PRIO</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>   <span class="cm">/* QOS priority change event */</span>
	<span class="n">BFA_RPORT_AEN_QOS_FLOWID</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>   <span class="cm">/* QOS flow Id change event */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_rport_aen_data_s</span> <span class="p">{</span>
	<span class="n">u16</span>             <span class="n">vf_id</span><span class="p">;</span>  <span class="cm">/* vf_id of this logical port */</span>
	<span class="n">u16</span>             <span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">wwn_t</span>           <span class="n">ppwwn</span><span class="p">;</span>  <span class="cm">/* WWN of its physical port */</span>
	<span class="n">wwn_t</span>           <span class="n">lpwwn</span><span class="p">;</span>  <span class="cm">/* WWN of this logical port */</span>
	<span class="n">wwn_t</span>           <span class="n">rpwwn</span><span class="p">;</span>  <span class="cm">/* WWN of this remote port */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">bfa_rport_qos_attr_s</span> <span class="n">qos</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">priv</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">bfa_aen_data_u</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_adapter_aen_data_s</span>	<span class="n">adapter</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_port_aen_data_s</span>	<span class="n">port</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_lport_aen_data_s</span>	<span class="n">lport</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_rport_aen_data_s</span>	<span class="n">rport</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_itnim_aen_data_s</span>	<span class="n">itnim</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_audit_aen_data_s</span>	<span class="n">audit</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bfa_ioc_aen_data_s</span>	<span class="n">ioc</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define BFA_AEN_MAX_ENTRY	512</span>

<span class="k">struct</span> <span class="n">bfa_aen_entry_s</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">qe</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">bfa_aen_category</span>   <span class="n">aen_category</span><span class="p">;</span>
	<span class="n">u32</span>                     <span class="n">aen_type</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">bfa_aen_data_u</span>    <span class="n">aen_data</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timeval</span>          <span class="n">aen_tv</span><span class="p">;</span>
	<span class="n">u32</span>                     <span class="n">seq_num</span><span class="p">;</span>
	<span class="n">u32</span>                     <span class="n">bfad_num</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* __BFA_DEFS_SVC_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
