f | hv_kvp.c | s | 11K | 391 | K. Y. Srinivasan | kys@microsoft.com | 1337011171 |  | Drivers: hv: util: Properly handle version negotiations.  The current version negotiation code is not "future proof". Fix this by allowing each service the flexibility to either specify the highest version it can support or it can support the highest version number the host is offering.  Signed-off-by: K. Y. Srinivasan <kys@microsoft.com> Reviewed-by: Haiyang Zhang <haiyangz@microsoft.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | hv.c | s | 10K | 346 | Dan Carpenter | dan.carpenter@oracle.com | 1334009147 |  | hv: fix return type of hv_post_message()  This function returns negative error codes, but because the type is u16 they get truncated into positive numbers.  It doesn't look like the callers care, but we should fix it anyway as a cleanup.  Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com> Signed-off-by: K. Y. Srinivasan <kys@microsoft.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | ring_buffer.c | s | 10K | 382 | Haiyang Zhang | haiyangz@microsoft.com | 1333489635 |  | net/hyperv: Add flow control based on hi/low watermark  In the existing code, we only stop queue when the ringbuffer is full, so the current packet has to be dropped or retried from upper layer.  This patch stops the tx queue when available ringbuffer is below the low watermark. So the ringbuffer still has small amount of space available for the current packet. This will reduce the overhead of retries on sending.  Signed-off-by: Haiyang Zhang <haiyangz@microsoft.com> Reviewed-by: K. Y. Srinivasan <kys@microsoft.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | Makefile | g | 204B |  | Greg Kroah-Hartman | gregkh@suse.de | 1318308775 |  | Staging: hv: move hyperv code out of staging directory  After many years wandering the desert, it is finally time for the Microsoft HyperV code to move out of the staging directory.  Or at least the core hyperv bus code, and the utility driver, the rest still have some review to get through by the various subsystem maintainers.  Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de> Signed-off-by: K. Y. Srinivasan <kys@microsoft.com>
f | hyperv_vmbus.h | s | 14K | 499 | Dan Carpenter | dan.carpenter@oracle.com | 1334009147 |  | hv: fix return type of hv_post_message()  This function returns negative error codes, but because the type is u16 they get truncated into positive numbers.  It doesn't look like the callers care, but we should fix it anyway as a cleanup.  Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com> Signed-off-by: K. Y. Srinivasan <kys@microsoft.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | vmbus_drv.c | s | 21K | 669 | K. Y. Srinivasan | kys@microsoft.com | 1325722484 |  | Drivers:hv: Fix a bug in vmbus_driver_unregister()  The function vmbus_exists() was introduced recently to deal with cases where the vmbus driver failed to initialize and yet other Hyper-V drivers attempted to register with the vmbus bus driver. This patch introduced a bug where vmbus_driver_unregister() would fail to unregister the driver. This patch fixes the problem.  Signed-off-by: K. Y. Srinivasan <kys@microsoft.com> Signed-off-by: Fuzhou Chen <fuzhouch@microsoft.com> Cc: Sasha Levin <levinsasha928@gmail.com> Cc: stable <stable@vger.kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | connection.c | s | 8.1K | 272 | Greg Kroah-Hartman | gregkh@suse.de | 1318344559 |  | Staging: hv: remove unneeded asm include file in hyperv.h  No one outside of the hyperv core needs to include the asm/hyperv.h file, so don't put it in the "global" include/linux/hyperv.h file.  Cc: K. Y. Srinivasan <kys@microsoft.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | channel.c | s | 22K | 660 | Greg Kroah-Hartman | gregkh@suse.de | 1318308775 |  | Staging: hv: move hyperv code out of staging directory  After many years wandering the desert, it is finally time for the Microsoft HyperV code to move out of the staging directory.  Or at least the core hyperv bus code, and the utility driver, the rest still have some review to get through by the various subsystem maintainers.  Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de> Signed-off-by: K. Y. Srinivasan <kys@microsoft.com>
f | channel_mgmt.c | s | 16K | 501 | K. Y. Srinivasan | kys@microsoft.com | 1337011171 |  | Drivers: hv: util: Properly handle version negotiations.  The current version negotiation code is not "future proof". Fix this by allowing each service the flexibility to either specify the highest version it can support or it can support the highest version number the host is offering.  Signed-off-by: K. Y. Srinivasan <kys@microsoft.com> Reviewed-by: Haiyang Zhang <haiyangz@microsoft.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | hv_util.c | s | 9.0K | 296 | K. Y. Srinivasan | kys@microsoft.com | 1337011171 |  | Drivers: hv: util: Properly handle version negotiations.  The current version negotiation code is not "future proof". Fix this by allowing each service the flexibility to either specify the highest version it can support or it can support the highest version number the host is offering.  Signed-off-by: K. Y. Srinivasan <kys@microsoft.com> Reviewed-by: Haiyang Zhang <haiyangz@microsoft.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | Kconfig | g | 389B |  | Bart Van Assche | bvanassche@acm.org | 1322355934 |  | hv: Add Kconfig menu entry  Most of the drivers/*/Kconfig files define a menu entry. Define a menu item for hv too such that it becomes uniform with e.g. virtio for at least "make xconfig" and "make menuconfig" users.  Signed-off-by: Bart Van Assche <bvanassche@acm.org> Cc: Greg Kroah-Hartman <gregkh@suse.de> Cc: James Bottomley <JBottomley@Parallels.com> Cc: K. Y. Srinivasan <kys@microsoft.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
