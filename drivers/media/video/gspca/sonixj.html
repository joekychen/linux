<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › media › video › gspca › sonixj.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>sonixj.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Sonix sn9c102p sn9c105 sn9c120 (jpeg) subdriver</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2009-2011 Jean-François Moine &lt;http://moinejf.free.fr&gt;</span>
<span class="cm"> * Copyright (C) 2005 Michel Xhaard mxhaard@magic.fr</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>
<span class="cm"> */</span>

<span class="cp">#define pr_fmt(fmt) KBUILD_MODNAME &quot;: &quot; fmt</span>

<span class="cp">#define MODULE_NAME &quot;sonixj&quot;</span>

<span class="cp">#include &lt;linux/input.h&gt;</span>
<span class="cp">#include &quot;gspca.h&quot;</span>
<span class="cp">#include &quot;jpeg.h&quot;</span>

<span class="n">MODULE_AUTHOR</span><span class="p">(</span><span class="s">&quot;Jean-François Moine &lt;http://moinejf.free.fr&gt;&quot;</span><span class="p">);</span>
<span class="n">MODULE_DESCRIPTION</span><span class="p">(</span><span class="s">&quot;GSPCA/SONIX JPEG USB Camera Driver&quot;</span><span class="p">);</span>
<span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span>

<span class="cm">/* controls */</span>
<span class="k">enum</span> <span class="n">e_ctrl</span> <span class="p">{</span>
	<span class="n">BRIGHTNESS</span><span class="p">,</span>
	<span class="n">CONTRAST</span><span class="p">,</span>
	<span class="n">COLORS</span><span class="p">,</span>
	<span class="n">BLUE</span><span class="p">,</span>
	<span class="n">RED</span><span class="p">,</span>
	<span class="n">GAMMA</span><span class="p">,</span>
	<span class="n">EXPOSURE</span><span class="p">,</span>
	<span class="n">AUTOGAIN</span><span class="p">,</span>
	<span class="n">GAIN</span><span class="p">,</span>
	<span class="n">HFLIP</span><span class="p">,</span>
	<span class="n">VFLIP</span><span class="p">,</span>
	<span class="n">SHARPNESS</span><span class="p">,</span>
	<span class="n">ILLUM</span><span class="p">,</span>
	<span class="n">FREQ</span><span class="p">,</span>
	<span class="n">NCTRLS</span>		<span class="cm">/* number of controls */</span>
<span class="p">};</span>

<span class="cm">/* specific webcam descriptor */</span>
<span class="k">struct</span> <span class="n">sd</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">gspca_dev</span> <span class="n">gspca_dev</span><span class="p">;</span>	<span class="cm">/* !! must be the first item */</span>

	<span class="k">struct</span> <span class="n">gspca_ctrl</span> <span class="n">ctrls</span><span class="p">[</span><span class="n">NCTRLS</span><span class="p">];</span>

	<span class="n">atomic_t</span> <span class="n">avg_lum</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">exposure</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">work</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">workqueue_struct</span> <span class="o">*</span><span class="n">work_thread</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">pktsz</span><span class="p">;</span>			<span class="cm">/* (used by pkt_scan) */</span>
	<span class="n">u16</span> <span class="n">npkt</span><span class="p">;</span>
	<span class="n">s8</span> <span class="n">nchg</span><span class="p">;</span>
	<span class="n">s8</span> <span class="n">short_mark</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">quality</span><span class="p">;</span>			<span class="cm">/* image quality */</span>
<span class="cp">#define QUALITY_MIN 25</span>
<span class="cp">#define QUALITY_MAX 90</span>
<span class="cp">#define QUALITY_DEF 70</span>

	<span class="n">u8</span> <span class="n">reg01</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reg17</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reg18</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">flags</span><span class="p">;</span>

	<span class="n">s8</span> <span class="n">ag_cnt</span><span class="p">;</span>
<span class="cp">#define AG_CNT_START 13</span>

	<span class="n">u8</span> <span class="n">bridge</span><span class="p">;</span>
<span class="cp">#define BRIDGE_SN9C102P 0</span>
<span class="cp">#define BRIDGE_SN9C105 1</span>
<span class="cp">#define BRIDGE_SN9C110 2</span>
<span class="cp">#define BRIDGE_SN9C120 3</span>
	<span class="n">u8</span> <span class="n">sensor</span><span class="p">;</span>			<span class="cm">/* Type of image sensor chip */</span>
	<span class="n">u8</span> <span class="n">i2c_addr</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">jpeg_hdr</span><span class="p">[</span><span class="n">JPEG_HDR_SZ</span><span class="p">];</span>
<span class="p">};</span>
<span class="k">enum</span> <span class="n">sensors</span> <span class="p">{</span>
	<span class="n">SENSOR_ADCM1700</span><span class="p">,</span>
	<span class="n">SENSOR_GC0307</span><span class="p">,</span>
	<span class="n">SENSOR_HV7131R</span><span class="p">,</span>
	<span class="n">SENSOR_MI0360</span><span class="p">,</span>
	<span class="n">SENSOR_MI0360B</span><span class="p">,</span>
	<span class="n">SENSOR_MO4000</span><span class="p">,</span>
	<span class="n">SENSOR_MT9V111</span><span class="p">,</span>
	<span class="n">SENSOR_OM6802</span><span class="p">,</span>
	<span class="n">SENSOR_OV7630</span><span class="p">,</span>
	<span class="n">SENSOR_OV7648</span><span class="p">,</span>
	<span class="n">SENSOR_OV7660</span><span class="p">,</span>
	<span class="n">SENSOR_PO1030</span><span class="p">,</span>
	<span class="n">SENSOR_PO2030N</span><span class="p">,</span>
	<span class="n">SENSOR_SOI768</span><span class="p">,</span>
	<span class="n">SENSOR_SP80708</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">qual_upd</span><span class="p">(</span><span class="k">struct</span> <span class="n">work_struct</span> <span class="o">*</span><span class="n">work</span><span class="p">);</span>

<span class="cm">/* device flags */</span>
<span class="cp">#define F_PDN_INV	0x01	</span><span class="cm">/* inverse pin S_PWR_DN / sn_xxx tables */</span><span class="cp"></span>
<span class="cp">#define F_ILLUM		0x02	</span><span class="cm">/* presence of illuminator */</span><span class="cp"></span>

<span class="cm">/* sn9c1xx definitions */</span>
<span class="cm">/* register 0x01 */</span>
<span class="cp">#define S_PWR_DN	0x01	</span><span class="cm">/* sensor power down */</span><span class="cp"></span>
<span class="cp">#define S_PDN_INV	0x02	</span><span class="cm">/* inverse pin S_PWR_DN */</span><span class="cp"></span>
<span class="cp">#define V_TX_EN		0x04	</span><span class="cm">/* video transfer enable */</span><span class="cp"></span>
<span class="cp">#define LED		0x08	</span><span class="cm">/* output to pin LED */</span><span class="cp"></span>
<span class="cp">#define SCL_SEL_OD	0x20	</span><span class="cm">/* open-drain mode */</span><span class="cp"></span>
<span class="cp">#define SYS_SEL_48M	0x40	</span><span class="cm">/* system clock 0: 24MHz, 1: 48MHz */</span><span class="cp"></span>
<span class="cm">/* register 0x17 */</span>
<span class="cp">#define MCK_SIZE_MASK	0x1f	</span><span class="cm">/* sensor master clock */</span><span class="cp"></span>
<span class="cp">#define SEN_CLK_EN	0x20	</span><span class="cm">/* enable sensor clock */</span><span class="cp"></span>
<span class="cp">#define DEF_EN		0x80	</span><span class="cm">/* defect pixel by 0: soft, 1: hard */</span><span class="cp"></span>

<span class="cm">/* V4L2 controls supported by the driver */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">setbrightness</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">setcontrast</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">setcolors</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">setredblue</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">setgamma</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">setexposure</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">sd_setautogain</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">__s32</span> <span class="n">val</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">setgain</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">sethvflip</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">setsharpness</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">setillum</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">setfreq</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">ctrl</span> <span class="n">sd_ctrls</span><span class="p">[</span><span class="n">NCTRLS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="p">[</span><span class="n">BRIGHTNESS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>
		<span class="p">.</span><span class="n">id</span>      <span class="o">=</span> <span class="n">V4L2_CID_BRIGHTNESS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>    <span class="o">=</span> <span class="n">V4L2_CTRL_TYPE_INTEGER</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>    <span class="o">=</span> <span class="s">&quot;Brightness&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="mh">0xff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">step</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mh">0x80</span><span class="p">,</span>
	    <span class="p">},</span>
	    <span class="p">.</span><span class="n">set_control</span> <span class="o">=</span> <span class="n">setbrightness</span>
	<span class="p">},</span>
<span class="p">[</span><span class="n">CONTRAST</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>
		<span class="p">.</span><span class="n">id</span>      <span class="o">=</span> <span class="n">V4L2_CID_CONTRAST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>    <span class="o">=</span> <span class="n">V4L2_CTRL_TYPE_INTEGER</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>    <span class="o">=</span> <span class="s">&quot;Contrast&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="cp">#define CONTRAST_MAX 127</span>
		<span class="p">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="n">CONTRAST_MAX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">step</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
	    <span class="p">},</span>
	    <span class="p">.</span><span class="n">set_control</span> <span class="o">=</span> <span class="n">setcontrast</span>
	<span class="p">},</span>
<span class="p">[</span><span class="n">COLORS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>
		<span class="p">.</span><span class="n">id</span>      <span class="o">=</span> <span class="n">V4L2_CID_SATURATION</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>    <span class="o">=</span> <span class="n">V4L2_CTRL_TYPE_INTEGER</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>    <span class="o">=</span> <span class="s">&quot;Saturation&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span>
		<span class="p">.</span><span class="n">step</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="cp">#define COLORS_DEF 25</span>
		<span class="p">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="n">COLORS_DEF</span><span class="p">,</span>
	    <span class="p">},</span>
	    <span class="p">.</span><span class="n">set_control</span> <span class="o">=</span> <span class="n">setcolors</span>
	<span class="p">},</span>
<span class="p">[</span><span class="n">BLUE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>
		<span class="p">.</span><span class="n">id</span>      <span class="o">=</span> <span class="n">V4L2_CID_BLUE_BALANCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>    <span class="o">=</span> <span class="n">V4L2_CTRL_TYPE_INTEGER</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>    <span class="o">=</span> <span class="s">&quot;Blue Balance&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
		<span class="p">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span>
		<span class="p">.</span><span class="n">step</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
	    <span class="p">},</span>
	    <span class="p">.</span><span class="n">set_control</span> <span class="o">=</span> <span class="n">setredblue</span>
	<span class="p">},</span>
<span class="p">[</span><span class="n">RED</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>
		<span class="p">.</span><span class="n">id</span>      <span class="o">=</span> <span class="n">V4L2_CID_RED_BALANCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>    <span class="o">=</span> <span class="n">V4L2_CTRL_TYPE_INTEGER</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>    <span class="o">=</span> <span class="s">&quot;Red Balance&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
		<span class="p">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span>
		<span class="p">.</span><span class="n">step</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
	    <span class="p">},</span>
	    <span class="p">.</span><span class="n">set_control</span> <span class="o">=</span> <span class="n">setredblue</span>
	<span class="p">},</span>
<span class="p">[</span><span class="n">GAMMA</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>
		<span class="p">.</span><span class="n">id</span>      <span class="o">=</span> <span class="n">V4L2_CID_GAMMA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>    <span class="o">=</span> <span class="n">V4L2_CTRL_TYPE_INTEGER</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>    <span class="o">=</span> <span class="s">&quot;Gamma&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span>
		<span class="p">.</span><span class="n">step</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="cp">#define GAMMA_DEF 20</span>
		<span class="p">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="n">GAMMA_DEF</span><span class="p">,</span>
	    <span class="p">},</span>
	    <span class="p">.</span><span class="n">set_control</span> <span class="o">=</span> <span class="n">setgamma</span>
	<span class="p">},</span>
<span class="p">[</span><span class="n">EXPOSURE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>
		<span class="p">.</span><span class="n">id</span>      <span class="o">=</span> <span class="n">V4L2_CID_EXPOSURE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>    <span class="o">=</span> <span class="n">V4L2_CTRL_TYPE_INTEGER</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>    <span class="o">=</span> <span class="s">&quot;Exposure&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>
		<span class="p">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="mi">1500</span><span class="p">,</span>
		<span class="p">.</span><span class="n">step</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mi">1024</span>
	    <span class="p">},</span>
	    <span class="p">.</span><span class="n">set_control</span> <span class="o">=</span> <span class="n">setexposure</span>
	<span class="p">},</span>
<span class="p">[</span><span class="n">AUTOGAIN</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>
		<span class="p">.</span><span class="n">id</span>      <span class="o">=</span> <span class="n">V4L2_CID_AUTOGAIN</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>    <span class="o">=</span> <span class="n">V4L2_CTRL_TYPE_BOOLEAN</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>    <span class="o">=</span> <span class="s">&quot;Auto Gain&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">step</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mi">1</span>
	    <span class="p">},</span>
	    <span class="p">.</span><span class="n">set</span> <span class="o">=</span> <span class="n">sd_setautogain</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">[</span><span class="n">GAIN</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>
		<span class="p">.</span><span class="n">id</span>      <span class="o">=</span> <span class="n">V4L2_CID_GAIN</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>    <span class="o">=</span> <span class="n">V4L2_CTRL_TYPE_INTEGER</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>    <span class="o">=</span> <span class="s">&quot;Gain&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="mi">49</span><span class="p">,</span>
		<span class="p">.</span><span class="n">step</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mi">15</span>
	    <span class="p">},</span>
	    <span class="p">.</span><span class="n">set_control</span> <span class="o">=</span> <span class="n">setgain</span>
	<span class="p">},</span>
<span class="p">[</span><span class="n">HFLIP</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>
		<span class="p">.</span><span class="n">id</span>      <span class="o">=</span> <span class="n">V4L2_CID_HFLIP</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>    <span class="o">=</span> <span class="n">V4L2_CTRL_TYPE_BOOLEAN</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>    <span class="o">=</span> <span class="s">&quot;Mirror&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">step</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	    <span class="p">},</span>
	    <span class="p">.</span><span class="n">set_control</span> <span class="o">=</span> <span class="n">sethvflip</span>
	<span class="p">},</span>
<span class="p">[</span><span class="n">VFLIP</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>
		<span class="p">.</span><span class="n">id</span>      <span class="o">=</span> <span class="n">V4L2_CID_VFLIP</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>    <span class="o">=</span> <span class="n">V4L2_CTRL_TYPE_BOOLEAN</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>    <span class="o">=</span> <span class="s">&quot;Vflip&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">step</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	    <span class="p">},</span>
	    <span class="p">.</span><span class="n">set_control</span> <span class="o">=</span> <span class="n">sethvflip</span>
	<span class="p">},</span>
<span class="p">[</span><span class="n">SHARPNESS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>
		<span class="p">.</span><span class="n">id</span>	 <span class="o">=</span> <span class="n">V4L2_CID_SHARPNESS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>    <span class="o">=</span> <span class="n">V4L2_CTRL_TYPE_INTEGER</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>    <span class="o">=</span> <span class="s">&quot;Sharpness&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="mi">255</span><span class="p">,</span>
		<span class="p">.</span><span class="n">step</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mi">90</span><span class="p">,</span>
	    <span class="p">},</span>
	    <span class="p">.</span><span class="n">set_control</span> <span class="o">=</span> <span class="n">setsharpness</span>
	<span class="p">},</span>
<span class="p">[</span><span class="n">ILLUM</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>
		<span class="p">.</span><span class="n">id</span>      <span class="o">=</span> <span class="n">V4L2_CID_ILLUMINATORS_1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>    <span class="o">=</span> <span class="n">V4L2_CTRL_TYPE_BOOLEAN</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>    <span class="o">=</span> <span class="s">&quot;Illuminator / infrared&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">step</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	    <span class="p">},</span>
	    <span class="p">.</span><span class="n">set_control</span> <span class="o">=</span> <span class="n">setillum</span>
	<span class="p">},</span>
<span class="cm">/* ov7630/ov7648/ov7660 only */</span>
<span class="p">[</span><span class="n">FREQ</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>
		<span class="p">.</span><span class="n">id</span>	 <span class="o">=</span> <span class="n">V4L2_CID_POWER_LINE_FREQUENCY</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>    <span class="o">=</span> <span class="n">V4L2_CTRL_TYPE_MENU</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>    <span class="o">=</span> <span class="s">&quot;Light frequency filter&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/* 0: 0, 1: 50Hz, 2:60Hz */</span>
		<span class="p">.</span><span class="n">step</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	    <span class="p">},</span>
	    <span class="p">.</span><span class="n">set_control</span> <span class="o">=</span> <span class="n">setfreq</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* table of the disabled controls */</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">__u32</span> <span class="n">ctrl_dis</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="p">[</span><span class="n">SENSOR_ADCM1700</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">AUTOGAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">HFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">VFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">FREQ</span><span class="p">),</span>

<span class="p">[</span><span class="n">SENSOR_GC0307</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">HFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">VFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">FREQ</span><span class="p">),</span>

<span class="p">[</span><span class="n">SENSOR_HV7131R</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">HFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">FREQ</span><span class="p">),</span>

<span class="p">[</span><span class="n">SENSOR_MI0360</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">HFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">VFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">FREQ</span><span class="p">),</span>

<span class="p">[</span><span class="n">SENSOR_MI0360B</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">HFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">VFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">FREQ</span><span class="p">),</span>

<span class="p">[</span><span class="n">SENSOR_MO4000</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">HFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">VFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">FREQ</span><span class="p">),</span>

<span class="p">[</span><span class="n">SENSOR_MT9V111</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">HFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">VFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">FREQ</span><span class="p">),</span>

<span class="p">[</span><span class="n">SENSOR_OM6802</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">HFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">VFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">FREQ</span><span class="p">),</span>

<span class="p">[</span><span class="n">SENSOR_OV7630</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">HFLIP</span><span class="p">),</span>

<span class="p">[</span><span class="n">SENSOR_OV7648</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">HFLIP</span><span class="p">),</span>

<span class="p">[</span><span class="n">SENSOR_OV7660</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">AUTOGAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">HFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">VFLIP</span><span class="p">),</span>

<span class="p">[</span><span class="n">SENSOR_PO1030</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">AUTOGAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">HFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">VFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">FREQ</span><span class="p">),</span>

<span class="p">[</span><span class="n">SENSOR_PO2030N</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">FREQ</span><span class="p">),</span>

<span class="p">[</span><span class="n">SENSOR_SOI768</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">AUTOGAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">HFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">VFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">FREQ</span><span class="p">),</span>

<span class="p">[</span><span class="n">SENSOR_SP80708</span><span class="p">]</span> <span class="o">=</span>	<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">AUTOGAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">HFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">VFLIP</span><span class="p">)</span> <span class="o">|</span>
			<span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">FREQ</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">v4l2_pix_format</span> <span class="n">cif_mode</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mi">352</span><span class="p">,</span> <span class="mi">288</span><span class="p">,</span> <span class="n">V4L2_PIX_FMT_JPEG</span><span class="p">,</span> <span class="n">V4L2_FIELD_NONE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bytesperline</span> <span class="o">=</span> <span class="mi">352</span><span class="p">,</span>
		<span class="p">.</span><span class="n">sizeimage</span> <span class="o">=</span> <span class="mi">352</span> <span class="o">*</span> <span class="mi">288</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">/</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">590</span><span class="p">,</span>
		<span class="p">.</span><span class="n">colorspace</span> <span class="o">=</span> <span class="n">V4L2_COLORSPACE_JPEG</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priv</span> <span class="o">=</span> <span class="mi">0</span><span class="p">},</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">v4l2_pix_format</span> <span class="n">vga_mode</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mi">160</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="n">V4L2_PIX_FMT_JPEG</span><span class="p">,</span> <span class="n">V4L2_FIELD_NONE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bytesperline</span> <span class="o">=</span> <span class="mi">160</span><span class="p">,</span>
		<span class="p">.</span><span class="n">sizeimage</span> <span class="o">=</span> <span class="mi">160</span> <span class="o">*</span> <span class="mi">120</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">/</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">590</span><span class="p">,</span>
		<span class="p">.</span><span class="n">colorspace</span> <span class="o">=</span> <span class="n">V4L2_COLORSPACE_JPEG</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priv</span> <span class="o">=</span> <span class="mi">2</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">320</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="n">V4L2_PIX_FMT_JPEG</span><span class="p">,</span> <span class="n">V4L2_FIELD_NONE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bytesperline</span> <span class="o">=</span> <span class="mi">320</span><span class="p">,</span>
		<span class="p">.</span><span class="n">sizeimage</span> <span class="o">=</span> <span class="mi">320</span> <span class="o">*</span> <span class="mi">240</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">590</span><span class="p">,</span>
		<span class="p">.</span><span class="n">colorspace</span> <span class="o">=</span> <span class="n">V4L2_COLORSPACE_JPEG</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priv</span> <span class="o">=</span> <span class="mi">1</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="n">V4L2_PIX_FMT_JPEG</span><span class="p">,</span> <span class="n">V4L2_FIELD_NONE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bytesperline</span> <span class="o">=</span> <span class="mi">640</span><span class="p">,</span>
		<span class="cm">/* Note 3 / 8 is not large enough, not even 5 / 8 is ?! */</span>
		<span class="p">.</span><span class="n">sizeimage</span> <span class="o">=</span> <span class="mi">640</span> <span class="o">*</span> <span class="mi">480</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">590</span><span class="p">,</span>
		<span class="p">.</span><span class="n">colorspace</span> <span class="o">=</span> <span class="n">V4L2_COLORSPACE_JPEG</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priv</span> <span class="o">=</span> <span class="mi">0</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_adcm1700</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x43</span><span class="p">,</span>	<span class="mh">0x60</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x80</span><span class="p">,</span>	<span class="mh">0x51</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x05</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="mh">0x05</span><span class="p">,</span>	<span class="mh">0x16</span><span class="p">,</span>	<span class="mh">0x12</span><span class="p">,</span>	<span class="mh">0x42</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x06</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_gc0307</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x61</span><span class="p">,</span>	<span class="mh">0x62</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x80</span><span class="p">,</span>	<span class="mh">0x21</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="mh">0x08</span><span class="p">,</span>	<span class="mh">0x28</span><span class="p">,</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="mh">0x02</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x06</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_hv7131</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x60</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x81</span><span class="p">,</span>	<span class="mh">0x11</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x28</span><span class="p">,</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="mh">0x41</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x0a</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_mi0360</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x63</span><span class="p">,</span>	<span class="mh">0x40</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x81</span><span class="p">,</span>	<span class="mh">0x5d</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x02</span><span class="p">,</span>	<span class="mh">0x0a</span><span class="p">,</span>	<span class="mh">0x28</span><span class="p">,</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="mh">0x61</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x06</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_mi0360b</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x61</span><span class="p">,</span>	<span class="mh">0x40</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x81</span><span class="p">,</span>	<span class="mh">0x5d</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x02</span><span class="p">,</span>	<span class="mh">0x0a</span><span class="p">,</span>	<span class="mh">0x28</span><span class="p">,</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="mh">0x40</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x06</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_mo4000</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x23</span><span class="p">,</span>	<span class="mh">0x60</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x18</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x81</span><span class="p">,</span>	<span class="mh">0x21</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	 <span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x0b</span><span class="p">,</span>	<span class="mh">0x0f</span><span class="p">,</span>	<span class="mh">0x14</span><span class="p">,</span>	<span class="mh">0x28</span><span class="p">,</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="mh">0x40</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x08</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_mt9v111</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x61</span><span class="p">,</span>	<span class="mh">0x40</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x81</span><span class="p">,</span>	<span class="mh">0x5c</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x02</span><span class="p">,</span>	<span class="mh">0x1c</span><span class="p">,</span>	<span class="mh">0x28</span><span class="p">,</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="mh">0x40</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x06</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_om6802</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x23</span><span class="p">,</span>	<span class="mh">0x72</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x19</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x80</span><span class="p">,</span>	<span class="mh">0x34</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x51</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x28</span><span class="p">,</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="mh">0x40</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x05</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_ov7630</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x21</span><span class="p">,</span>	<span class="mh">0x40</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x81</span><span class="p">,</span>	<span class="mh">0x21</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x04</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="mh">0x0a</span><span class="p">,</span>	<span class="mh">0x28</span><span class="p">,</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="mh">0xc2</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x0b</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_ov7648</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x63</span><span class="p">,</span>	<span class="mh">0x40</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x81</span><span class="p">,</span>	<span class="mh">0x21</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x28</span><span class="p">,</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x0b</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_ov7660</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x61</span><span class="p">,</span>	<span class="mh">0x40</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x81</span><span class="p">,</span>	<span class="mh">0x21</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="mh">0x08</span><span class="p">,</span>	<span class="mh">0x28</span><span class="p">,</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x07</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_po1030</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x21</span><span class="p">,</span>	<span class="mh">0x62</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x81</span><span class="p">,</span>	<span class="mh">0x6e</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x06</span><span class="p">,</span>	<span class="mh">0x06</span><span class="p">,</span>	<span class="mh">0x28</span><span class="p">,</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x07</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_po2030n</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x63</span><span class="p">,</span>	<span class="mh">0x40</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x81</span><span class="p">,</span>	<span class="mh">0x6e</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="mh">0x14</span><span class="p">,</span>	<span class="mh">0x28</span><span class="p">,</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x07</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_soi768</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x21</span><span class="p">,</span>	<span class="mh">0x40</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x81</span><span class="p">,</span>	<span class="mh">0x21</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="mh">0x08</span><span class="p">,</span>	<span class="mh">0x28</span><span class="p">,</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x07</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sn_sp80708</span><span class="p">[</span><span class="mh">0x1c</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	reg0	reg1	reg2	reg3	reg4	reg5	reg6	reg7 */</span>
	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x63</span><span class="p">,</span>	<span class="mh">0x60</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x1a</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="mh">0x20</span><span class="p">,</span>
<span class="cm">/*	reg8	reg9	rega	regb	regc	regd	rege	regf */</span>
	<span class="mh">0x81</span><span class="p">,</span>	<span class="mh">0x18</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg10	reg11	reg12	reg13	reg14	reg15	reg16	reg17 */</span>
	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x03</span><span class="p">,</span>	<span class="mh">0x04</span><span class="p">,</span>	<span class="mh">0x28</span><span class="p">,</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>
<span class="cm">/*	reg18	reg19	reg1a	reg1b */</span>
	<span class="mh">0x07</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0x00</span>
<span class="p">};</span>

<span class="cm">/* sequence specific to the sensors - !! index = SENSOR_xxx */</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">sn_tb</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="p">[</span><span class="n">SENSOR_ADCM1700</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_adcm1700</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_GC0307</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_gc0307</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_HV7131R</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_hv7131</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_MI0360</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_mi0360</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_MI0360B</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_mi0360b</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_MO4000</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_mo4000</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_MT9V111</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_mt9v111</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_OM6802</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_om6802</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_OV7630</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_ov7630</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_OV7648</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_ov7648</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_OV7660</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_ov7660</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_PO1030</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_po1030</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_PO2030N</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_po2030n</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_SOI768</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_soi768</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_SP80708</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sn_sp80708</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* default gamma table */</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">gamma_def</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x46</span><span class="p">,</span> <span class="mh">0x5a</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x8b</span><span class="p">,</span> <span class="mh">0x99</span><span class="p">,</span>
	<span class="mh">0xa6</span><span class="p">,</span> <span class="mh">0xb2</span><span class="p">,</span> <span class="mh">0xbf</span><span class="p">,</span> <span class="mh">0xca</span><span class="p">,</span> <span class="mh">0xd5</span><span class="p">,</span> <span class="mh">0xe0</span><span class="p">,</span> <span class="mh">0xeb</span><span class="p">,</span> <span class="mh">0xf5</span><span class="p">,</span> <span class="mh">0xff</span>
<span class="p">};</span>
<span class="cm">/* gamma for sensor ADCM1700 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">gamma_spec_0</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x39</span><span class="p">,</span> <span class="mh">0x5a</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x86</span><span class="p">,</span> <span class="mh">0x95</span><span class="p">,</span> <span class="mh">0xa6</span><span class="p">,</span> <span class="mh">0xb4</span><span class="p">,</span>
	<span class="mh">0xbd</span><span class="p">,</span> <span class="mh">0xc4</span><span class="p">,</span> <span class="mh">0xcc</span><span class="p">,</span> <span class="mh">0xd4</span><span class="p">,</span> <span class="mh">0xd5</span><span class="p">,</span> <span class="mh">0xde</span><span class="p">,</span> <span class="mh">0xe4</span><span class="p">,</span> <span class="mh">0xed</span><span class="p">,</span> <span class="mh">0xf5</span>
<span class="p">};</span>
<span class="cm">/* gamma for sensors HV7131R and MT9V111 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">gamma_spec_1</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x3a</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x75</span><span class="p">,</span> <span class="mh">0x83</span><span class="p">,</span> <span class="mh">0x91</span><span class="p">,</span> <span class="mh">0x9d</span><span class="p">,</span>
	<span class="mh">0xa9</span><span class="p">,</span> <span class="mh">0xb4</span><span class="p">,</span> <span class="mh">0xbe</span><span class="p">,</span> <span class="mh">0xc8</span><span class="p">,</span> <span class="mh">0xd2</span><span class="p">,</span> <span class="mh">0xdb</span><span class="p">,</span> <span class="mh">0xe4</span><span class="p">,</span> <span class="mh">0xed</span><span class="p">,</span> <span class="mh">0xf5</span>
<span class="p">};</span>
<span class="cm">/* gamma for sensor GC0307 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">gamma_spec_2</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x37</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x6a</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x8d</span><span class="p">,</span> <span class="mh">0x9d</span><span class="p">,</span> <span class="mh">0xab</span><span class="p">,</span>
	<span class="mh">0xb5</span><span class="p">,</span> <span class="mh">0xbf</span><span class="p">,</span> <span class="mh">0xc2</span><span class="p">,</span> <span class="mh">0xcb</span><span class="p">,</span> <span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0xd6</span><span class="p">,</span> <span class="mh">0xdb</span><span class="p">,</span> <span class="mh">0xe1</span><span class="p">,</span> <span class="mh">0xeb</span>
<span class="p">};</span>
<span class="cm">/* gamma for sensor SP80708 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">gamma_spec_3</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x4e</span><span class="p">,</span> <span class="mh">0x68</span><span class="p">,</span> <span class="mh">0x7d</span><span class="p">,</span> <span class="mh">0x8f</span><span class="p">,</span> <span class="mh">0x9f</span><span class="p">,</span> <span class="mh">0xab</span><span class="p">,</span>
	<span class="mh">0xb7</span><span class="p">,</span> <span class="mh">0xc2</span><span class="p">,</span> <span class="mh">0xcc</span><span class="p">,</span> <span class="mh">0xd3</span><span class="p">,</span> <span class="mh">0xd8</span><span class="p">,</span> <span class="mh">0xde</span><span class="p">,</span> <span class="mh">0xe2</span><span class="p">,</span> <span class="mh">0xe5</span><span class="p">,</span> <span class="mh">0xe6</span>
<span class="p">};</span>

<span class="cm">/* color matrix and offsets */</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">reg84</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>	<span class="cm">/* YR YG YB gains */</span>
	<span class="mh">0xe8</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0xda</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>	<span class="cm">/* UR UG UB */</span>
	<span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xcd</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0xf7</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span>	<span class="cm">/* VR VG VB */</span>
	<span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span>			<span class="cm">/* YUV offsets */</span>
<span class="p">};</span>

<span class="cp">#define DELAY	0xdd</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">adcm1700_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>	<span class="cm">/* reset */</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0xe0</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">adcm1700_sensor_param1</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x26</span><span class="p">,</span> <span class="mh">0xf9</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>	<span class="cm">/* exposure? */</span>
	<span class="p">{</span><span class="mh">0xd0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x8e</span><span class="p">,</span> <span class="mh">0x8e</span><span class="p">,</span> <span class="mh">0x8e</span><span class="p">,</span> <span class="mh">0x8e</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>

	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0xbe</span><span class="p">,</span> <span class="mh">0xd7</span><span class="p">,</span> <span class="mh">0xe8</span><span class="p">,</span> <span class="mh">0xbe</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>	<span class="cm">/* exposure? */</span>

	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xa2</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">gc0307_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x43</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0xa2</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x6a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0xe8</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x0b</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0xb2</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span> <span class="cm">/*delay 10ms*/</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0xb8</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x90</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x98</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x67</span><span class="p">,</span> <span class="mh">0x90</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x96</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x45</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x47</span><span class="p">,</span> <span class="mh">0x2c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x43</span><span class="p">,</span> <span class="mh">0x47</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0xd8</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">gc0307_sensor_param1</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x68</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xa6</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/*param3*/</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x88</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">hv7131r_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/*	{0x91, 0x11, 0x44, 0x00, 0x00, 0x00, 0x00, 0x10}, */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xe2</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x82</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/*	{0x91, 0x11, 0x18, 0x00, 0x00, 0x00, 0x00, 0x10}, */</span>

	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0xa8</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x31</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xc3</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* gain14 */</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x31</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* r g b 101a10 */</span>

	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0xd0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x23</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>

	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0xd0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x23</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
							<span class="cm">/* set sensor clock */</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">mi0360_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xe2</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x82</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x91</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x26</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x2f</span><span class="p">,</span> <span class="mh">0xf7</span><span class="p">,</span> <span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x31</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x33</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x3d</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x8f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xe0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x82</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x58</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x43</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x5a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x5e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xa3</span><span class="p">,</span> <span class="mh">0x1d</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>

	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x91</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>

	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* sensor clck ?2 */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x35</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* exposure 2 */</span>

	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xb9</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xe3</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x5f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xb9</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* 42 */</span>
<span class="cm">/*	{0xb1, 0x5d, 0x35, 0x00, 0x67, 0x00, 0x00, 0x10}, * gain orig */</span>
<span class="cm">/*	{0xb1, 0x5d, 0x35, 0x00, 0x20, 0x00, 0x00, 0x10}, * gain */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* update */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* sensor on */</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">mi0360b_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span> <span class="cm">/*delay 20ms*/</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span> <span class="cm">/*delay 20ms*/</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xe2</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x82</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x26</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x2f</span><span class="p">,</span> <span class="mh">0xf7</span><span class="p">,</span> <span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x31</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x33</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x3d</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x8f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xe0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x82</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x58</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x43</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x5a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x5e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xa3</span><span class="p">,</span> <span class="mh">0x1d</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>

	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x33</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x33</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">mi0360b_sensor_param1</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x35</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* exposure 2 */</span>

	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xc9</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xed</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* update */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* sensor on */</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">mo4000_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x81</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">mt9v111_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* reset? */</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span> <span class="cm">/* delay 20ms */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* IFP select */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* output fmt ctrl */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* op mode ctrl */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* sensor select */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* row start */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* col start */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xe7</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* window height */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x87</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* window width */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* output ctrl */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* shutter delay */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* zoom col start */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* zoom row start */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* digital zoom */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* read mode */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">mt9v111_sensor_param1</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x33</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xad</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* G1 and B gains */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xad</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x33</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* R and G2 gains */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* vert blanking */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* horiz blanking */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x35</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* global gain */</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">om6802_init0</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*fixme: variable*/</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x23</span><span class="p">,</span> <span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">om6802_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0xdf</span><span class="p">,</span> <span class="mh">0x6d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* factory mode */</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0xdd</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* output raw RGB */</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x5a</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/*	{0xa0, 0x34, 0xfb, 0x11, 0x00, 0x00, 0x00, 0x10}, */</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
		<span class="cm">/* auto-exposure speed (0) / white balance mode (auto RGB) */</span>
<span class="cm">/*	{0xa0, 0x34, 0xf1, 0x02, 0x00, 0x00, 0x00, 0x10},</span>
<span class="cm">							 * set color mode */</span>
<span class="cm">/*	{0xa0, 0x34, 0xfe, 0x5b, 0x00, 0x00, 0x00, 0x10},</span>
<span class="cm">						 * max AGC value in AE */</span>
<span class="cm">/*	{0xa0, 0x34, 0xe5, 0x00, 0x00, 0x00, 0x00, 0x10},</span>
<span class="cm">							 * preset AGC */</span>
<span class="cm">/*	{0xa0, 0x34, 0xe6, 0x00, 0x00, 0x00, 0x00, 0x10},</span>
<span class="cm">						 * preset brightness */</span>
<span class="cm">/*	{0xa0, 0x34, 0xe7, 0x00, 0x00, 0x00, 0x00, 0x10},</span>
<span class="cm">							 * preset contrast */</span>
<span class="cm">/*	{0xa0, 0x34, 0xe8, 0x31, 0x00, 0x00, 0x00, 0x10},</span>
<span class="cm">							 * preset gamma */</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0xe9</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
				<span class="cm">/* luminance mode (0x4f -&gt; AutoExpo on) */</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0xe4</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
							<span class="cm">/* preset shutter */</span>
<span class="cm">/*	{0xa0, 0x34, 0xef, 0x00, 0x00, 0x00, 0x00, 0x10},</span>
<span class="cm">							 * auto frame rate */</span>
<span class="cm">/*	{0xa0, 0x34, 0xfb, 0xee, 0x00, 0x00, 0x00, 0x10}, */</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">om6802_sensor_param1</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x71</span><span class="p">,</span> <span class="mh">0x84</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x72</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x68</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x69</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">ov7630_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x76</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0xc8</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span> <span class="cm">/* delay 20ms */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0xc8</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span> <span class="cm">/* delay 20ms */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/* win: i2c_r from 00 to 80 */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/* HDG: 0x11 was 0x00 change to 0x01 for better exposure (15 fps instead of 30)</span>
<span class="cm">	0x13 was 0xc0 change to 0xc3 for auto gain and exposure */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">,</span> <span class="mh">0xc3</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="mh">0xbd</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0xf6</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x23</span><span class="p">,</span> <span class="mh">0xde</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x8a</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">,</span> <span class="mh">0xca</span><span class="p">,</span> <span class="mh">0xa2</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2a</span><span class="p">,</span> <span class="mh">0x88</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x88</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0xc2</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x4c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x57</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x55</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xac</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x69</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x77</span><span class="p">,</span> <span class="mh">0xf3</span><span class="p">,</span> <span class="mh">0x90</span><span class="p">,</span> <span class="mh">0x98</span><span class="p">,</span> <span class="mh">0x98</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x7b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x4c</span><span class="p">,</span> <span class="mh">0xf7</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="mh">0xbd</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0xf6</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">ov7630_sensor_param1</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/*fixme: + 0x12, 0x04*/</span>
<span class="cm">/*	{0xa1, 0x21, 0x75, 0x82, 0x00, 0x00, 0x00, 0x10},  * COMN</span>
<span class="cm">							 * set by setvflip */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/* */</span>
<span class="cm">/*	{0xa1, 0x21, 0x2a, 0x88, 0x00, 0x00, 0x00, 0x10}, * set by setfreq */</span>
<span class="cm">/*	{0xa1, 0x21, 0x2b, 0x34, 0x00, 0x00, 0x00, 0x10}, * set by setfreq */</span>
<span class="cm">/* */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x83</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/*	{0xb1, 0x21, 0x01, 0x88, 0x70, 0x00, 0x00, 0x10}, */</span>
	<span class="p">{}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">ov7648_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x76</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>	<span class="cm">/* reset */</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span> <span class="cm">/* delay 20ms */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0xa4</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x88</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x84</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0xba</span><span class="p">,</span> <span class="mh">0xf4</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x23</span><span class="p">,</span> <span class="mh">0xde</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x91</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x88</span><span class="p">,</span> <span class="mh">0x85</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2f</span><span class="p">,</span> <span class="mh">0x9c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xc4</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0xa6</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x88</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x88</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x94</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x68</span><span class="p">,</span> <span class="mh">0x7a</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x33</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xb5</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x8a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x43</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>

	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x86</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xde</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/*	{0xd1, 0x21, 0x25, 0x80, 0x32, 0xfe, 0xa0, 0x10}, jfm done */</span>
<span class="cm">/*	{0xd1, 0x21, 0x29, 0x00, 0x91, 0x00, 0x88, 0x10}, jfm done */</span>
<span class="cm">/*	{0xb1, 0x21, 0x2d, 0x85, 0x00, 0x00, 0x00, 0x10}, set by setfreq */</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">ov7648_sensor_param1</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/*	{0xa1, 0x21, 0x12, 0x08, 0x00, 0x00, 0x00, 0x10}, jfm done */</span>
<span class="cm">/*	{0xa1, 0x21, 0x75, 0x06, 0x00, 0x00, 0x00, 0x10},   * COMN</span>
<span class="cm">							 * set by setvflip */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x19</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/*	{0xa1, 0x21, 0x16, 0x00, 0x00, 0x00, 0x00, 0x10}, jfm done */</span>
<span class="cm">/*	{0xa1, 0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10},  * GAIN - def */</span>
<span class="cm">/*	{0xb1, 0x21, 0x01, 0x6c, 0x6c, 0x00, 0x00, 0x10},  * B R - def: 80 */</span>
<span class="cm">/*...*/</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x81</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* CLKRC */</span>
<span class="cm">/*	{0xa1, 0x21, 0x1e, 0x00, 0x00, 0x00, 0x00, 0x10}, jfm done */</span>
<span class="cm">/*	{0xa1, 0x21, 0x16, 0x00, 0x00, 0x00, 0x00, 0x10}, jfm done */</span>
<span class="cm">/*	{0xa1, 0x21, 0x2a, 0x91, 0x00, 0x00, 0x00, 0x10}, jfm done */</span>
<span class="cm">/*	{0xa1, 0x21, 0x2b, 0x00, 0x00, 0x00, 0x00, 0x10}, jfm done */</span>
<span class="cm">/*	{0xb1, 0x21, 0x01, 0x64, 0x84, 0x00, 0x00, 0x10},  * B R - def: 80 */</span>

	<span class="p">{}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">ov7660_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* reset SCCB */</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span> <span class="cm">/* delay 20ms */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* Outformat = rawRGB */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="mh">0xb8</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* init COM8 */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x92</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* GAIN BLUE RED VREF */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x7d</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* COM 1 BAVE GEAVE AECHH */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x83</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* RAVE COM2 */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* COM 3 4 5 6 */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* AECH CLKRC COM7 COM8 */</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x2c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* COM9 COM10 */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x7b</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* HSTART HSTOP VSTRT VSTOP */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* PSHFT */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* MVFP LAEC */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
					<span class="cm">/* BOS GBOS GROS ROS (BGGR offset) */</span>
<span class="cm">/*	{0xd1, 0x21, 0x24, 0x68, 0x58, 0xd4, 0x80, 0x10}, */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x68</span><span class="p">,</span> <span class="mh">0xd4</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* AEW AEB VPT BBIAS */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* GbBIAS RSVD EXHCH EXHCL */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2c</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* RBIAS ADVFL ASDVFH YAVE */</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0xb4</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* HSYST HSYEN HREF */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x33</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x84</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* reserved */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x37</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x43</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* ADC ACOM OFON TSLB */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x3b</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x19</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* COM11 COM12 COM13 COM14 */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* EDGE COM15 COM16 COM17 */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x43</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0xa8</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* reserved */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x47</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* reserved */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x4b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* reserved */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x46</span><span class="p">,</span> <span class="mh">0x36</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* MTX 1 2 3 4 */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x96</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* MTX 5 6 7 8 */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x57</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* MTX9 MTXS */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x59</span><span class="p">,</span> <span class="mh">0xba</span><span class="p">,</span> <span class="mh">0x9a</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0xb9</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* reserved */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x9b</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* reserved */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* reserved */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* LCC1 LCC2 LCC3 LCC4 */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x66</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* LCC5 */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x67</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x7a</span><span class="p">,</span> <span class="mh">0x90</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* MANU */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x6b</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
					<span class="cm">/* band gap reference [0:3] DBLV */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* gamma curve */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x58</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* gamma curve */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x54</span><span class="p">,</span> <span class="mh">0x4c</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* gamma curve */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x2f</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* gamma curve */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* gamma curve */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x4d</span><span class="p">,</span> <span class="mh">0x58</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* gamma curve */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x84</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x77</span><span class="p">,</span> <span class="mh">0x87</span><span class="p">,</span> <span class="mh">0x95</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* gamma curve */</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x88</span><span class="p">,</span> <span class="mh">0xaf</span><span class="p">,</span> <span class="mh">0xc7</span><span class="p">,</span> <span class="mh">0xdf</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* gamma curve */</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x8b</span><span class="p">,</span> <span class="mh">0x99</span><span class="p">,</span> <span class="mh">0x99</span><span class="p">,</span> <span class="mh">0xcf</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* reserved */</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x92</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* DM_LNL/H */</span>
<span class="cm">/* not in all ms-win traces*/</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">ov7660_sensor_param1</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* MVFP */</span>
						<span class="cm">/* bits[3..0]reserved */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
						<span class="cm">/* VREF vertical frame ctrl */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* AECH 0x20 */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* ADVFL */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* ADVFH */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* GAIN */</span>
<span class="cm">/*	{0xb1, 0x21, 0x01, 0x78, 0x78, 0x00, 0x00, 0x10}, * BLUE */</span>
<span class="cm">/****** (some exchanges in the win trace) ******/</span>
<span class="cm">/*fixme:param2*/</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x93</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span><span class="cm">/* dummy line hight */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x92</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* dummy line low */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* EXHCH */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* EXHCL */</span>
<span class="cm">/*	{0xa1, 0x21, 0x02, 0x90, 0x00, 0x00, 0x00, 0x10},  * RED */</span>
<span class="cm">/****** (some exchanges in the win trace) ******/</span>
<span class="cm">/******!! startsensor KO if changed !!****/</span>
<span class="cm">/*fixme: param3*/</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x93</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x92</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0xc3</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">po1030_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/* the sensor registers are described in m5602/m5602_po1030.h */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* sensor reset */</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span> <span class="cm">/* delay 20ms */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x39</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xe0</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x85</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x4a</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* r/g1/b/g2 gains */</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1d</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x23</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x94</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">,</span> <span class="mh">0x58</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x35</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x84</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* gamma corr */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x31</span><span class="p">,</span> <span class="mh">0xa2</span><span class="p">,</span> <span class="mh">0xbd</span><span class="p">,</span> <span class="mh">0xd8</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x35</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* color matrix */</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x39</span><span class="p">,</span> <span class="mh">0xaa</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">,</span> <span class="mh">0x37</span><span class="p">,</span> <span class="mh">0xd5</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x3d</span><span class="p">,</span> <span class="mh">0xf2</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x46</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x4b</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0xef</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0xcd</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xd0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xaa</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x5a</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* raw rgb bayer */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x5e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x5f</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>

	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x67</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x6b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0xeb</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">po1030_sensor_param1</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/* from ms-win traces - these values change with auto gain/expo/wb.. */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/* mean values */</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0xd4</span><span class="p">,</span> <span class="mh">0xa4</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* integlines */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* global gain */</span>
	<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* r/g1/b gains */</span>

	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1d</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* control1 */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* frameheight */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0xd5</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/*	{0xc1, 0x6e, 0x16, 0x49, 0x40, 0x45, 0x00, 0x10}, */</span>
	<span class="p">{}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">po2030n_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x99</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span> <span class="cm">/* delay 10ms */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x19</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span> <span class="cm">/* delay 10ms */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xd0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xe8</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1d</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x19</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x31</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x35</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x39</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x3d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x45</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x4d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xed</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x4a</span><span class="p">,</span> <span class="mh">0x2f</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x55</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x59</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x69</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x6d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x71</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x75</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x79</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x7d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x81</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x85</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x89</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xe8</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x8d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">,</span> <span class="mh">0xe6</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xbd</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x68</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x31</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x36</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x35</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x39</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x33</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x3d</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">po2030n_sensor_param1</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span> <span class="cm">/* delay 8ms */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="mh">0xf4</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xd1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* RGBG gains */</span>
<span class="cm">/*param2*/</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">soi768_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* reset */</span>
	<span class="p">{</span><span class="n">DELAY</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span> <span class="cm">/* delay 96ms */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x19</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">soi768_sensor_param1</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/* */</span>
<span class="cm">/*	{0xa1, 0x21, 0x2e, 0x00, 0x00, 0x00, 0x00, 0x10}, */</span>
<span class="cm">/*	{0xa1, 0x21, 0x2d, 0x25, 0x00, 0x00, 0x00, 0x10}, */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/*	{0xb1, 0x21, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x10}, */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x8d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
<span class="cm">/* the next sequence should be used for auto gain */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
			<span class="cm">/* global gain ? : 07 - change with 0x15 at the end */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span> <span class="cm">/* ???? : 063f */</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
			<span class="cm">/* exposure ? : 0200 - change with 0x1e at the end */</span>
	<span class="p">{}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sp80708_sensor_init</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0xf9</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x4e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x19</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x1d</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x26</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x5a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x2a</span><span class="p">,</span> <span class="mh">0x78</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x2c</span><span class="p">,</span> <span class="mh">0xf7</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0xd5</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x39</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x3a</span><span class="p">,</span> <span class="mh">0x67</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x3b</span><span class="p">,</span> <span class="mh">0x87</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x3c</span><span class="p">,</span> <span class="mh">0xa3</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x3d</span><span class="p">,</span> <span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x3e</span><span class="p">,</span> <span class="mh">0xbc</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="mh">0xc8</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0xd4</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0xdf</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">,</span> <span class="mh">0xea</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x43</span><span class="p">,</span> <span class="mh">0xf5</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x45</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x46</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x47</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x4d</span><span class="p">,</span> <span class="mh">0xae</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x4e</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">,</span> <span class="mh">0x66</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x4a</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x54</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x55</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x56</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x57</span><span class="p">,</span> <span class="mh">0xe0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x58</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x59</span><span class="p">,</span> <span class="mh">0xab</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x5a</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x5b</span><span class="p">,</span> <span class="mh">0x99</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x90</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x5e</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x5f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x66</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x67</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x68</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x2f</span><span class="p">,</span> <span class="mh">0xc9</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sp80708_sensor_param1</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0xa4</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="p">(</span><span class="o">*</span><span class="n">sensor_init</span><span class="p">[])[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="p">[</span><span class="n">SENSOR_ADCM1700</span><span class="p">]</span> <span class="o">=</span>	<span class="n">adcm1700_sensor_init</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_GC0307</span><span class="p">]</span> <span class="o">=</span>	<span class="n">gc0307_sensor_init</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_HV7131R</span><span class="p">]</span> <span class="o">=</span>	<span class="n">hv7131r_sensor_init</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_MI0360</span><span class="p">]</span> <span class="o">=</span>	<span class="n">mi0360_sensor_init</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_MI0360B</span><span class="p">]</span> <span class="o">=</span>	<span class="n">mi0360b_sensor_init</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_MO4000</span><span class="p">]</span> <span class="o">=</span>	<span class="n">mo4000_sensor_init</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_MT9V111</span><span class="p">]</span> <span class="o">=</span>	<span class="n">mt9v111_sensor_init</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_OM6802</span><span class="p">]</span> <span class="o">=</span>	<span class="n">om6802_sensor_init</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_OV7630</span><span class="p">]</span> <span class="o">=</span>	<span class="n">ov7630_sensor_init</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_OV7648</span><span class="p">]</span> <span class="o">=</span>	<span class="n">ov7648_sensor_init</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_OV7660</span><span class="p">]</span> <span class="o">=</span>	<span class="n">ov7660_sensor_init</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_PO1030</span><span class="p">]</span> <span class="o">=</span>	<span class="n">po1030_sensor_init</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_PO2030N</span><span class="p">]</span> <span class="o">=</span>	<span class="n">po2030n_sensor_init</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_SOI768</span><span class="p">]</span> <span class="o">=</span>	<span class="n">soi768_sensor_init</span><span class="p">,</span>
<span class="p">[</span><span class="n">SENSOR_SP80708</span><span class="p">]</span> <span class="o">=</span>	<span class="n">sp80708_sensor_init</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* read &lt;len&gt; bytes to gspca_dev-&gt;usb_buf */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">reg_r</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">,</span>
		  <span class="n">u16</span> <span class="n">value</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
<span class="cp">#ifdef GSPCA_DEBUG</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">len</span> <span class="o">&gt;</span> <span class="n">USB_BUF_SZ</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;reg_r: buffer overflow</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
<span class="cp">#endif</span>
	<span class="n">ret</span> <span class="o">=</span> <span class="n">usb_control_msg</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span>
			<span class="n">usb_rcvctrlpipe</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
			<span class="mi">0</span><span class="p">,</span>
			<span class="n">USB_DIR_IN</span> <span class="o">|</span> <span class="n">USB_TYPE_VENDOR</span> <span class="o">|</span> <span class="n">USB_RECIP_INTERFACE</span><span class="p">,</span>
			<span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span>
			<span class="mi">500</span><span class="p">);</span>
	<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_USBI</span><span class="p">,</span> <span class="s">&quot;reg_r [%02x] -&gt; %02x&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;reg_r err %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">);</span>
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">=</span> <span class="n">ret</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">reg_w1</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">,</span>
		   <span class="n">u16</span> <span class="n">value</span><span class="p">,</span>
		   <span class="n">u8</span> <span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_USBO</span><span class="p">,</span> <span class="s">&quot;reg_w1 [%04x] = %02x&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
	<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">;</span>
	<span class="n">ret</span> <span class="o">=</span> <span class="n">usb_control_msg</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span>
			<span class="n">usb_sndctrlpipe</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
			<span class="mh">0x08</span><span class="p">,</span>
			<span class="n">USB_DIR_OUT</span> <span class="o">|</span> <span class="n">USB_TYPE_VENDOR</span> <span class="o">|</span> <span class="n">USB_RECIP_INTERFACE</span><span class="p">,</span>
			<span class="n">value</span><span class="p">,</span>
			<span class="mi">0</span><span class="p">,</span>
			<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
			<span class="mi">500</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;reg_w1 err %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">);</span>
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">=</span> <span class="n">ret</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">reg_w</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">,</span>
			  <span class="n">u16</span> <span class="n">value</span><span class="p">,</span>
			  <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span>
			  <span class="kt">int</span> <span class="n">len</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_USBO</span><span class="p">,</span> <span class="s">&quot;reg_w [%04x] = %02x %02x ..&quot;</span><span class="p">,</span>
		<span class="n">value</span><span class="p">,</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="cp">#ifdef GSPCA_DEBUG</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">len</span> <span class="o">&gt;</span> <span class="n">USB_BUF_SZ</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;reg_w: buffer overflow</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
<span class="cp">#endif</span>
	<span class="n">memcpy</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
	<span class="n">ret</span> <span class="o">=</span> <span class="n">usb_control_msg</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span>
			<span class="n">usb_sndctrlpipe</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
			<span class="mh">0x08</span><span class="p">,</span>
			<span class="n">USB_DIR_OUT</span> <span class="o">|</span> <span class="n">USB_TYPE_VENDOR</span> <span class="o">|</span> <span class="n">USB_RECIP_INTERFACE</span><span class="p">,</span>
			<span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span>
			<span class="mi">500</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;reg_w err %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">);</span>
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">=</span> <span class="n">ret</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* I2C write 1 byte */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">i2c_w1</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">u8</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u8</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_USBO</span><span class="p">,</span> <span class="s">&quot;i2c_w1 [%02x] = %02x&quot;</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_ADCM1700</span>:
	<span class="k">case</span> <span class="n">SENSOR_OM6802</span>:
	<span class="k">case</span> <span class="n">SENSOR_GC0307</span>:		<span class="cm">/* i2c command = a0 (100 kHz) */</span>
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x80</span> <span class="o">|</span> <span class="p">(</span><span class="mi">2</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>			<span class="cm">/* i2c command = a1 (400 kHz) */</span>
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x81</span> <span class="o">|</span> <span class="p">(</span><span class="mi">2</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">i2c_addr</span><span class="p">;</span>
	<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">reg</span><span class="p">;</span>
	<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span><span class="p">;</span>
	<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
	<span class="n">ret</span> <span class="o">=</span> <span class="n">usb_control_msg</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span>
			<span class="n">usb_sndctrlpipe</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
			<span class="mh">0x08</span><span class="p">,</span>
			<span class="n">USB_DIR_OUT</span> <span class="o">|</span> <span class="n">USB_TYPE_VENDOR</span> <span class="o">|</span> <span class="n">USB_RECIP_INTERFACE</span><span class="p">,</span>
			<span class="mh">0x08</span><span class="p">,</span>			<span class="cm">/* value = i2c */</span>
			<span class="mi">0</span><span class="p">,</span>
			<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span>
			<span class="mi">500</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;i2c_w1 err %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">);</span>
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">=</span> <span class="n">ret</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* I2C write 8 bytes */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">i2c_w8</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">,</span>
		   <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">buffer</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_USBO</span><span class="p">,</span> <span class="s">&quot;i2c_w8 [%02x] = %02x ..&quot;</span><span class="p">,</span>
		<span class="n">buffer</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
	<span class="n">memcpy</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
	<span class="n">ret</span> <span class="o">=</span> <span class="n">usb_control_msg</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span>
			<span class="n">usb_sndctrlpipe</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
			<span class="mh">0x08</span><span class="p">,</span>
			<span class="n">USB_DIR_OUT</span> <span class="o">|</span> <span class="n">USB_TYPE_VENDOR</span> <span class="o">|</span> <span class="n">USB_RECIP_INTERFACE</span><span class="p">,</span>
			<span class="mh">0x08</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>		<span class="cm">/* value, index */</span>
			<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span>
			<span class="mi">500</span><span class="p">);</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;i2c_w8 err %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">);</span>
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">=</span> <span class="n">ret</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* sensor read &#39;len&#39; (1..5) bytes in gspca_dev-&gt;usb_buf */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">i2c_r</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">u8</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">mode</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_ADCM1700</span>:
	<span class="k">case</span> <span class="n">SENSOR_OM6802</span>:
	<span class="k">case</span> <span class="n">SENSOR_GC0307</span>:		<span class="cm">/* i2c command = a0 (100 kHz) */</span>
		<span class="n">mode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x80</span> <span class="o">|</span> <span class="mh">0x10</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>			<span class="cm">/* i2c command = 91 (400 kHz) */</span>
		<span class="n">mode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x81</span> <span class="o">|</span> <span class="mh">0x10</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">mode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">i2c_addr</span><span class="p">;</span>
	<span class="n">mode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">reg</span><span class="p">;</span>
	<span class="n">mode</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">mode</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">mode</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">mode</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">mode</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
	<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">mode</span><span class="p">);</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
	<span class="n">mode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">mode</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x81</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">len</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="mh">0x02</span><span class="p">;</span>
	<span class="n">mode</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">mode</span><span class="p">);</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
	<span class="n">reg_r</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">i2c_w_seq</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">,</span>
			<span class="k">const</span> <span class="n">u8</span> <span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">)[</span><span class="mi">8</span><span class="p">])</span>
<span class="p">{</span>
	<span class="k">while</span> <span class="p">((</span><span class="o">*</span><span class="n">data</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">((</span><span class="o">*</span><span class="n">data</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">DELAY</span><span class="p">)</span>
			<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="n">msleep</span><span class="p">((</span><span class="o">*</span><span class="n">data</span><span class="p">)[</span><span class="mi">1</span><span class="p">]);</span>
		<span class="n">data</span><span class="o">++</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* check the ID of the hv7131 sensor */</span>
<span class="cm">/* this sequence is needed because it activates the sensor */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">hv7131r_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* sensor wakeup */</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x66</span><span class="p">);</span>		<span class="cm">/* Gpio on */</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
	<span class="n">i2c_r</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>			<span class="cm">/* read sensor id */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0x02</span>	<span class="cm">/* chip ID (02 is R) */</span>
	    <span class="o">&amp;&amp;</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0x09</span>
	    <span class="o">&amp;&amp;</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0x01</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_PROBE</span><span class="p">,</span> <span class="s">&quot;Sensor HV7131R found&quot;</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">pr_warn</span><span class="p">(</span><span class="s">&quot;Erroneous HV7131R ID 0x%02x 0x%02x 0x%02x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">mi0360_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">val</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">probe_tb</span><span class="p">[][</span><span class="mi">4</span><span class="p">][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="p">{</span>					<span class="cm">/* mi0360 */</span>
		<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0x90</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xa2</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">}</span>
	    <span class="p">},</span>
	    <span class="p">{</span>					<span class="cm">/* mt9v111 */</span>
		<span class="p">{</span><span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0x90</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x36</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xa2</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">},</span>
		<span class="p">{}</span>
	    <span class="p">},</span>
	<span class="p">};</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">probe_tb</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">);</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">);</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
			<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">probe_tb</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
		<span class="n">reg_r</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
		<span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">probe_tb</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
			<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">probe_tb</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">3</span><span class="p">]);</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">);</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">!=</span> <span class="mh">0xffff</span><span class="p">)</span>
			<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mh">0x8221</span>:
		<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_PROBE</span><span class="p">,</span> <span class="s">&quot;Sensor mi0360b&quot;</span><span class="p">);</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">=</span> <span class="n">SENSOR_MI0360B</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x823a</span>:
		<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_PROBE</span><span class="p">,</span> <span class="s">&quot;Sensor mt9v111&quot;</span><span class="p">);</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">=</span> <span class="n">SENSOR_MT9V111</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x8243</span>:
		<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_PROBE</span><span class="p">,</span> <span class="s">&quot;Sensor mi0360&quot;</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_PROBE</span><span class="p">,</span> <span class="s">&quot;Unknown sensor %04x - forced to mi0360&quot;</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">ov7630_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">val</span><span class="p">;</span>

	<span class="cm">/* check ov76xx */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">);</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">i2c_addr</span> <span class="o">=</span> <span class="mh">0x21</span><span class="p">;</span>
	<span class="n">i2c_r</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
	<span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">==</span> <span class="mh">0x7628</span><span class="p">)</span> <span class="p">{</span>			<span class="cm">/* soi768 */</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">=</span> <span class="n">SENSOR_SOI768</span><span class="p">;</span>
<span class="cm">/*fixme: only valid for 0c45:613e?*/</span>
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">cam</span><span class="p">.</span><span class="n">input_flags</span> <span class="o">=</span>
				<span class="n">V4L2_IN_ST_VFLIP</span> <span class="o">|</span> <span class="n">V4L2_IN_ST_HFLIP</span><span class="p">;</span>
		<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_PROBE</span><span class="p">,</span> <span class="s">&quot;Sensor soi768&quot;</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_PROBE</span><span class="p">,</span> <span class="s">&quot;Sensor ov%04x&quot;</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">ov7648_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">val</span><span class="p">;</span>

	<span class="cm">/* check ov76xx */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">);</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">i2c_addr</span> <span class="o">=</span> <span class="mh">0x21</span><span class="p">;</span>
	<span class="n">i2c_r</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
	<span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">val</span> <span class="o">&amp;</span> <span class="mh">0xff00</span><span class="p">)</span> <span class="o">==</span> <span class="mh">0x7600</span><span class="p">)</span> <span class="p">{</span>		<span class="cm">/* ov76xx */</span>
		<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_PROBE</span><span class="p">,</span> <span class="s">&quot;Sensor ov%04x&quot;</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* check po1030 */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">);</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">i2c_addr</span> <span class="o">=</span> <span class="mh">0x6e</span><span class="p">;</span>
	<span class="n">i2c_r</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
	<span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">==</span> <span class="mh">0x1030</span><span class="p">)</span> <span class="p">{</span>			<span class="cm">/* po1030 */</span>
		<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_PROBE</span><span class="p">,</span> <span class="s">&quot;Sensor po1030&quot;</span><span class="p">);</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">=</span> <span class="n">SENSOR_PO1030</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;Unknown sensor %04x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* 0c45:6142 sensor may be po2030n, gc0305 or gc0307 */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">po2030n_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">val</span><span class="p">;</span>

	<span class="cm">/* check gc0307 */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">);</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">i2c_addr</span> <span class="o">=</span> <span class="mh">0x21</span><span class="p">;</span>
	<span class="n">i2c_r</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">val</span> <span class="o">=</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">);</span>		<span class="cm">/* reset */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">==</span> <span class="mh">0x99</span><span class="p">)</span> <span class="p">{</span>			<span class="cm">/* gc0307 (?) */</span>
		<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_PROBE</span><span class="p">,</span> <span class="s">&quot;Sensor gc0307&quot;</span><span class="p">);</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">=</span> <span class="n">SENSOR_GC0307</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* check po2030n */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">);</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">i2c_addr</span> <span class="o">=</span> <span class="mh">0x6e</span><span class="p">;</span>
	<span class="n">i2c_r</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
	<span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">==</span> <span class="mh">0x2030</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_PROBE</span><span class="p">,</span> <span class="s">&quot;Sensor po2030n&quot;</span><span class="p">);</span>
<span class="cm">/*		sd-&gt;sensor = SENSOR_PO2030N; */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;Unknown sensor ID %04x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* this function is called at probe time */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">sd_config</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">usb_device_id</span> <span class="o">*</span><span class="n">id</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cam</span> <span class="o">*</span><span class="n">cam</span><span class="p">;</span>

	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">bridge</span> <span class="o">=</span> <span class="n">id</span><span class="o">-&gt;</span><span class="n">driver_info</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">=</span> <span class="n">id</span><span class="o">-&gt;</span><span class="n">driver_info</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">=</span> <span class="n">id</span><span class="o">-&gt;</span><span class="n">driver_info</span><span class="p">;</span>

	<span class="n">cam</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">cam</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">==</span> <span class="n">SENSOR_ADCM1700</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">cam</span><span class="o">-&gt;</span><span class="n">cam_mode</span> <span class="o">=</span> <span class="n">cif_mode</span><span class="p">;</span>
		<span class="n">cam</span><span class="o">-&gt;</span><span class="n">nmodes</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cif_mode</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">cam</span><span class="o">-&gt;</span><span class="n">cam_mode</span> <span class="o">=</span> <span class="n">vga_mode</span><span class="p">;</span>
		<span class="n">cam</span><span class="o">-&gt;</span><span class="n">nmodes</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">vga_mode</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">cam</span><span class="o">-&gt;</span><span class="n">npkt</span> <span class="o">=</span> <span class="mi">24</span><span class="p">;</span>			<span class="cm">/* 24 packets per ISOC message */</span>
	<span class="n">cam</span><span class="o">-&gt;</span><span class="n">ctrls</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">;</span>

	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">ag_cnt</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">quality</span> <span class="o">=</span> <span class="n">QUALITY_DEF</span><span class="p">;</span>

	<span class="n">INIT_WORK</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">work</span><span class="p">,</span> <span class="n">qual_upd</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* this function is called at probe and resume time */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">sd_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">sn9c1xx</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">regGpio</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mh">0x29</span><span class="p">,</span> <span class="mh">0x70</span> <span class="p">};</span>		<span class="cm">/* no audio */</span>
	<span class="n">u8</span> <span class="n">regF1</span><span class="p">;</span>

	<span class="cm">/* setup a selector by bridge */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xf1</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">);</span>
	<span class="n">reg_r</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xf1</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">reg_r</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* get sonix chip id */</span>
	<span class="n">regF1</span> <span class="o">=</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span><span class="p">;</span>
	<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_PROBE</span><span class="p">,</span> <span class="s">&quot;Sonix chip id: %02x&quot;</span><span class="p">,</span> <span class="n">regF1</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">audio</span><span class="p">)</span>
		<span class="n">regGpio</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">|=</span> <span class="mh">0x04</span><span class="p">;</span>		<span class="cm">/* with audio */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">bridge</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">BRIDGE_SN9C102P</span>:
	<span class="k">case</span> <span class="n">BRIDGE_SN9C105</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">regF1</span> <span class="o">!=</span> <span class="mh">0x11</span><span class="p">)</span>
			<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
<span class="cm">/*	case BRIDGE_SN9C110: */</span>
<span class="cm">/*	case BRIDGE_SN9C120: */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">regF1</span> <span class="o">!=</span> <span class="mh">0x12</span><span class="p">)</span>
			<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_MI0360</span>:
		<span class="n">mi0360_probe</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_OV7630</span>:
		<span class="n">ov7630_probe</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_OV7648</span>:
		<span class="n">ov7648_probe</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_PO2030N</span>:
		<span class="n">po2030n_probe</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">bridge</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">BRIDGE_SN9C102P</span>:
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="n">regGpio</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">regGpio</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">==</span> <span class="n">SENSOR_OM6802</span><span class="p">)</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">SHARPNESS</span><span class="p">].</span><span class="n">def</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>

	<span class="cm">/* Note we do not disable the sensor clock here (power saving mode),</span>
<span class="cm">	   as that also disables the button on the cam. */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xf1</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>

	<span class="cm">/* set the i2c address */</span>
	<span class="n">sn9c1xx</span> <span class="o">=</span> <span class="n">sn_tb</span><span class="p">[</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">];</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">i2c_addr</span> <span class="o">=</span> <span class="n">sn9c1xx</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>

	<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">ctrl_dis</span> <span class="o">=</span> <span class="n">ctrl_dis</span><span class="p">[</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">];</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="n">F_ILLUM</span><span class="p">))</span>
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">ctrl_dis</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">ILLUM</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">u32</span> <span class="nf">expo_adjust</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">,</span>
			<span class="n">u32</span> <span class="n">expo</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_GC0307</span>: <span class="p">{</span>
		<span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">;</span>

		<span class="cm">/* expo = 0..255 -&gt; a = 19..43 */</span>
		<span class="n">a</span> <span class="o">=</span> <span class="mi">19</span> <span class="o">+</span> <span class="n">expo</span> <span class="o">*</span> <span class="mi">25</span> <span class="o">/</span> <span class="mi">256</span><span class="p">;</span>
		<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x68</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
		<span class="n">a</span> <span class="o">-=</span> <span class="mi">12</span><span class="p">;</span>
		<span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>			<span class="cm">/* heuristic */</span>
		<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="n">b</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">);</span>
		<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	    <span class="p">}</span>
	<span class="k">case</span> <span class="n">SENSOR_HV7131R</span>: <span class="p">{</span>
		<span class="n">u8</span> <span class="n">Expodoit</span><span class="p">[]</span> <span class="o">=</span>
			<span class="p">{</span> <span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x16</span> <span class="p">};</span>

		<span class="n">Expodoit</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">expo</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">;</span>
		<span class="n">Expodoit</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">expo</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">;</span>
		<span class="n">Expodoit</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">expo</span><span class="p">;</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">Expodoit</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	    <span class="p">}</span>
	<span class="k">case</span> <span class="n">SENSOR_MI0360</span>:
	<span class="k">case</span> <span class="n">SENSOR_MI0360B</span>: <span class="p">{</span>
		<span class="n">u8</span> <span class="n">expoMi</span><span class="p">[]</span> <span class="o">=</span>		<span class="cm">/* exposure 0x0635 -&gt; 4 fp/s 0x10 */</span>
			<span class="p">{</span> <span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x16</span> <span class="p">};</span>
		<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">doit</span><span class="p">[]</span> <span class="o">=</span>		<span class="cm">/* update sensor */</span>
			<span class="p">{</span> <span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span> <span class="p">};</span>
		<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">sensorgo</span><span class="p">[]</span> <span class="o">=</span>		<span class="cm">/* sensor on */</span>
			<span class="p">{</span> <span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span> <span class="p">};</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">expo</span> <span class="o">&gt;</span> <span class="mh">0x0635</span><span class="p">)</span>
			<span class="n">expo</span> <span class="o">=</span> <span class="mh">0x0635</span><span class="p">;</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">expo</span> <span class="o">&lt;</span> <span class="mh">0x0001</span><span class="p">)</span>
			<span class="n">expo</span> <span class="o">=</span> <span class="mh">0x0001</span><span class="p">;</span>
		<span class="n">expoMi</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">expo</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">;</span>
		<span class="n">expoMi</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">expo</span><span class="p">;</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">expoMi</span><span class="p">);</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">doit</span><span class="p">);</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">sensorgo</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	    <span class="p">}</span>
	<span class="k">case</span> <span class="n">SENSOR_MO4000</span>: <span class="p">{</span>
		<span class="n">u8</span> <span class="n">expoMof</span><span class="p">[]</span> <span class="o">=</span>
			<span class="p">{</span> <span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span> <span class="p">};</span>
		<span class="n">u8</span> <span class="n">expoMo10</span><span class="p">[]</span> <span class="o">=</span>
			<span class="p">{</span> <span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span> <span class="p">};</span>
		<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">gainMo</span><span class="p">[]</span> <span class="o">=</span>
			<span class="p">{</span> <span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x1d</span> <span class="p">};</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">expo</span> <span class="o">&gt;</span> <span class="mh">0x1fff</span><span class="p">)</span>
			<span class="n">expo</span> <span class="o">=</span> <span class="mh">0x1fff</span><span class="p">;</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">expo</span> <span class="o">&lt;</span> <span class="mh">0x0001</span><span class="p">)</span>
			<span class="n">expo</span> <span class="o">=</span> <span class="mh">0x0001</span><span class="p">;</span>
		<span class="n">expoMof</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">expo</span> <span class="o">&amp;</span> <span class="mh">0x03fc</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">;</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">expoMof</span><span class="p">);</span>
		<span class="n">expoMo10</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="n">expo</span> <span class="o">&amp;</span> <span class="mh">0x1c00</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">10</span><span class="p">)</span>
				<span class="o">|</span> <span class="p">((</span><span class="n">expo</span> <span class="o">&amp;</span> <span class="mh">0x0003</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">);</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">expoMo10</span><span class="p">);</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">gainMo</span><span class="p">);</span>
		<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_FRAM</span><span class="p">,</span> <span class="s">&quot;set exposure %d&quot;</span><span class="p">,</span>
			<span class="p">((</span><span class="n">expoMo10</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x07</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span><span class="p">)</span>
			<span class="o">|</span> <span class="p">(</span><span class="n">expoMof</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span>
			<span class="o">|</span> <span class="p">((</span><span class="n">expoMo10</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x30</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">));</span>
		<span class="k">break</span><span class="p">;</span>
	    <span class="p">}</span>
	<span class="k">case</span> <span class="n">SENSOR_MT9V111</span>: <span class="p">{</span>
		<span class="n">u8</span> <span class="n">expo_c1</span><span class="p">[]</span> <span class="o">=</span>
			<span class="p">{</span> <span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span> <span class="p">};</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">expo</span> <span class="o">&gt;</span> <span class="mh">0x0390</span><span class="p">)</span>
			<span class="n">expo</span> <span class="o">=</span> <span class="mh">0x0390</span><span class="p">;</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">expo</span> <span class="o">&lt;</span> <span class="mh">0x0060</span><span class="p">)</span>
			<span class="n">expo</span> <span class="o">=</span> <span class="mh">0x0060</span><span class="p">;</span>
		<span class="n">expo_c1</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">expo</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">;</span>
		<span class="n">expo_c1</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">expo</span><span class="p">;</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">expo_c1</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	    <span class="p">}</span>
	<span class="k">case</span> <span class="n">SENSOR_OM6802</span>: <span class="p">{</span>
		<span class="n">u8</span> <span class="n">gainOm</span><span class="p">[]</span> <span class="o">=</span>
			<span class="p">{</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0xe5</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span> <span class="p">};</span>
				<span class="cm">/* preset AGC - works when AutoExpo = off */</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">expo</span> <span class="o">&gt;</span> <span class="mh">0x03ff</span><span class="p">)</span>
			<span class="n">expo</span> <span class="o">=</span> <span class="mh">0x03ff</span><span class="p">;</span>
		 <span class="k">if</span> <span class="p">(</span><span class="n">expo</span> <span class="o">&lt;</span> <span class="mh">0x0001</span><span class="p">)</span>
			<span class="n">expo</span> <span class="o">=</span> <span class="mh">0x0001</span><span class="p">;</span>
		<span class="n">gainOm</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">expo</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">;</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">gainOm</span><span class="p">);</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x96</span><span class="p">,</span> <span class="n">expo</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span><span class="p">);</span>
		<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_FRAM</span><span class="p">,</span> <span class="s">&quot;set exposure %d&quot;</span><span class="p">,</span> <span class="n">gainOm</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
		<span class="k">break</span><span class="p">;</span>
	    <span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">expo</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">setbrightness</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">expo</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">brightness</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">k2</span><span class="p">;</span>

	<span class="n">brightness</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">BRIGHTNESS</span><span class="p">].</span><span class="n">val</span><span class="p">;</span>
	<span class="n">k2</span> <span class="o">=</span> <span class="p">(</span><span class="n">brightness</span> <span class="o">-</span> <span class="mh">0x80</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">;</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_ADCM1700</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">k2</span> <span class="o">&gt;</span> <span class="mh">0x1f</span><span class="p">)</span>
			<span class="n">k2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>		<span class="cm">/* only positive Y offset */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_HV7131R</span>:
		<span class="n">expo</span> <span class="o">=</span> <span class="n">brightness</span> <span class="o">&lt;&lt;</span> <span class="mi">12</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">expo</span> <span class="o">&gt;</span> <span class="mh">0x002dc6c0</span><span class="p">)</span>
			<span class="n">expo</span> <span class="o">=</span> <span class="mh">0x002dc6c0</span><span class="p">;</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">expo</span> <span class="o">&lt;</span> <span class="mh">0x02a0</span><span class="p">)</span>
			<span class="n">expo</span> <span class="o">=</span> <span class="mh">0x02a0</span><span class="p">;</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">exposure</span> <span class="o">=</span> <span class="n">expo_adjust</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">expo</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_MI0360</span>:
	<span class="k">case</span> <span class="n">SENSOR_MO4000</span>:
		<span class="n">expo</span> <span class="o">=</span> <span class="n">brightness</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">;</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">exposure</span> <span class="o">=</span> <span class="n">expo_adjust</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">expo</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_MI0360B</span>:
		<span class="n">expo</span> <span class="o">=</span> <span class="n">brightness</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">;</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">exposure</span> <span class="o">=</span> <span class="n">expo_adjust</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">expo</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_GC0307</span>:
		<span class="n">expo</span> <span class="o">=</span> <span class="n">brightness</span><span class="p">;</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">exposure</span> <span class="o">=</span> <span class="n">expo_adjust</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">expo</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>			<span class="cm">/* don&#39;t set the Y offset */</span>
	<span class="k">case</span> <span class="n">SENSOR_MT9V111</span>:
		<span class="n">expo</span> <span class="o">=</span> <span class="n">brightness</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">;</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">exposure</span> <span class="o">=</span> <span class="n">expo_adjust</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">expo</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>			<span class="cm">/* don&#39;t set the Y offset */</span>
	<span class="k">case</span> <span class="n">SENSOR_OM6802</span>:
		<span class="n">expo</span> <span class="o">=</span> <span class="n">brightness</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">;</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">exposure</span> <span class="o">=</span> <span class="n">expo_adjust</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">expo</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>			<span class="cm">/* Y offset already set */</span>
	<span class="p">}</span>

	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x96</span><span class="p">,</span> <span class="n">k2</span><span class="p">);</span>	<span class="cm">/* color matrix Y offset */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">setcontrast</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">k2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">contrast</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>

	<span class="n">k2</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">CONTRAST</span><span class="p">].</span><span class="n">val</span> <span class="o">*</span> <span class="mi">37</span> <span class="o">/</span> <span class="p">(</span><span class="n">CONTRAST_MAX</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
				<span class="o">+</span> <span class="mi">37</span><span class="p">;</span>		<span class="cm">/* 37..73 */</span>
	<span class="n">contrast</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">k2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>		<span class="cm">/* red */</span>
	<span class="n">contrast</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">contrast</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">k2</span><span class="p">;</span>			<span class="cm">/* green */</span>
	<span class="n">contrast</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">contrast</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">k2</span> <span class="o">/</span> <span class="mi">5</span><span class="p">;</span>			<span class="cm">/* blue */</span>
	<span class="n">contrast</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x84</span><span class="p">,</span> <span class="n">contrast</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">contrast</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">setcolors</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">colors</span><span class="p">;</span>
	<span class="k">const</span> <span class="n">s16</span> <span class="o">*</span><span class="n">uv</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reg8a</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>			<span class="cm">/* U &amp; V gains */</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">s16</span> <span class="n">uv_com</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>	<span class="cm">/* same as reg84 in signed decimal */</span>
		<span class="o">-</span><span class="mi">24</span><span class="p">,</span> <span class="o">-</span><span class="mi">38</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span>		<span class="cm">/* UR UG UB */</span>
		 <span class="mi">62</span><span class="p">,</span> <span class="o">-</span><span class="mi">51</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span>		<span class="cm">/* VR VG VB */</span>
	<span class="p">};</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">s16</span> <span class="n">uv_mi0360b</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">38</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span>		<span class="cm">/* UR UG UB */</span>
		 <span class="mi">60</span><span class="p">,</span> <span class="o">-</span><span class="mi">51</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span>		<span class="cm">/* VR VG VB */</span>
	<span class="p">};</span>

	<span class="n">colors</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">COLORS</span><span class="p">].</span><span class="n">val</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">==</span> <span class="n">SENSOR_MI0360B</span><span class="p">)</span>
		<span class="n">uv</span> <span class="o">=</span> <span class="n">uv_mi0360b</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">uv</span> <span class="o">=</span> <span class="n">uv_com</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">v</span> <span class="o">=</span> <span class="n">uv</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">colors</span> <span class="o">/</span> <span class="n">COLORS_DEF</span><span class="p">;</span>
		<span class="n">reg8a</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">;</span>
		<span class="n">reg8a</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x8a</span><span class="p">,</span> <span class="n">reg8a</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">reg8a</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">setredblue</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">==</span> <span class="n">SENSOR_PO2030N</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">rg1b</span><span class="p">[]</span> <span class="o">=</span>		<span class="cm">/* red  green1 blue (no g2) */</span>
			<span class="p">{</span><span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">};</span>

		<span class="cm">/* 0x40 = normal value = gain x 1 */</span>
		<span class="n">rg1b</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">RED</span><span class="p">].</span><span class="n">val</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
		<span class="n">rg1b</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">BLUE</span><span class="p">].</span><span class="n">val</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">rg1b</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">RED</span><span class="p">].</span><span class="n">val</span><span class="p">);</span>
<span class="cm">/*	reg_w1(gspca_dev, 0x07, 32); */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">BLUE</span><span class="p">].</span><span class="n">val</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">setgamma</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">gamma</span><span class="p">[</span><span class="mi">17</span><span class="p">];</span>
	<span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">gamma_base</span><span class="p">;</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">delta</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span>
		<span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span>
	<span class="p">};</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_ADCM1700</span>:
		<span class="n">gamma_base</span> <span class="o">=</span> <span class="n">gamma_spec_0</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_HV7131R</span>:
	<span class="k">case</span> <span class="n">SENSOR_MI0360B</span>:
	<span class="k">case</span> <span class="n">SENSOR_MT9V111</span>:
		<span class="n">gamma_base</span> <span class="o">=</span> <span class="n">gamma_spec_1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_GC0307</span>:
		<span class="n">gamma_base</span> <span class="o">=</span> <span class="n">gamma_spec_2</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_SP80708</span>:
		<span class="n">gamma_base</span> <span class="o">=</span> <span class="n">gamma_spec_3</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">gamma_base</span> <span class="o">=</span> <span class="n">gamma_def</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">val</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">GAMMA</span><span class="p">].</span><span class="n">val</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="k">sizeof</span> <span class="n">gamma</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="n">gamma</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">gamma_base</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
			<span class="o">+</span> <span class="n">delta</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">val</span> <span class="o">-</span> <span class="n">GAMMA_DEF</span><span class="p">)</span> <span class="o">/</span> <span class="mi">32</span><span class="p">;</span>
	<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="n">gamma</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">gamma</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">setexposure</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">==</span> <span class="n">SENSOR_PO2030N</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">rexpo</span><span class="p">[]</span> <span class="o">=</span>		<span class="cm">/* 1a: expo H, 1b: expo M */</span>
			<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">};</span>

		<span class="n">rexpo</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">EXPOSURE</span><span class="p">].</span><span class="n">val</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">;</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">rexpo</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
		<span class="n">rexpo</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1b</span><span class="p">;</span>
		<span class="n">rexpo</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">EXPOSURE</span><span class="p">].</span><span class="n">val</span><span class="p">;</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">rexpo</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">setautogain</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">ctrl_dis</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">AUTOGAIN</span><span class="p">))</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_OV7630</span>:
	<span class="k">case</span> <span class="n">SENSOR_OV7648</span>: <span class="p">{</span>
		<span class="n">u8</span> <span class="n">comb</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">==</span> <span class="n">SENSOR_OV7630</span><span class="p">)</span>
			<span class="n">comb</span> <span class="o">=</span> <span class="mh">0xc0</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="n">comb</span> <span class="o">=</span> <span class="mh">0xa0</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">AUTOGAIN</span><span class="p">].</span><span class="n">val</span><span class="p">)</span>
			<span class="n">comb</span> <span class="o">|=</span> <span class="mh">0x03</span><span class="p">;</span>
		<span class="n">i2c_w1</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">comb</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	    <span class="p">}</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">AUTOGAIN</span><span class="p">].</span><span class="n">val</span><span class="p">)</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">ag_cnt</span> <span class="o">=</span> <span class="n">AG_CNT_START</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">ag_cnt</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">setgain</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">==</span> <span class="n">SENSOR_PO2030N</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">rgain</span><span class="p">[]</span> <span class="o">=</span>		<span class="cm">/* 15: gain */</span>
			<span class="p">{</span><span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x6e</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">};</span>

		<span class="n">rgain</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">GAIN</span><span class="p">].</span><span class="n">val</span><span class="p">;</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">rgain</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">sethvflip</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">comn</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_HV7131R</span>:
		<span class="n">comn</span> <span class="o">=</span> <span class="mh">0x18</span><span class="p">;</span>			<span class="cm">/* clkdiv = 1, ablcen = 1 */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">VFLIP</span><span class="p">].</span><span class="n">val</span><span class="p">)</span>
			<span class="n">comn</span> <span class="o">|=</span> <span class="mh">0x01</span><span class="p">;</span>
		<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">comn</span><span class="p">);</span>	<span class="cm">/* sctra */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_OV7630</span>:
		<span class="n">comn</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">VFLIP</span><span class="p">].</span><span class="n">val</span><span class="p">)</span>
			<span class="n">comn</span> <span class="o">|=</span> <span class="mh">0x80</span><span class="p">;</span>
		<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x75</span><span class="p">,</span> <span class="n">comn</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_OV7648</span>:
		<span class="n">comn</span> <span class="o">=</span> <span class="mh">0x06</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">VFLIP</span><span class="p">].</span><span class="n">val</span><span class="p">)</span>
			<span class="n">comn</span> <span class="o">|=</span> <span class="mh">0x80</span><span class="p">;</span>
		<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x75</span><span class="p">,</span> <span class="n">comn</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_PO2030N</span>:
		<span class="cm">/* Reg. 0x1E: Timing Generator Control Register 2 (Tgcontrol2)</span>
<span class="cm">		 * (reset value: 0x0A)</span>
<span class="cm">		 * bit7: HM: Horizontal Mirror: 0: disable, 1: enable</span>
<span class="cm">		 * bit6: VM: Vertical Mirror: 0: disable, 1: enable</span>
<span class="cm">		 * bit5: ST: Shutter Selection: 0: electrical, 1: mechanical</span>
<span class="cm">		 * bit4: FT: Single Frame Transfer: 0: disable, 1: enable</span>
<span class="cm">		 * bit3-0: X</span>
<span class="cm">		 */</span>
		<span class="n">comn</span> <span class="o">=</span> <span class="mh">0x0a</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">HFLIP</span><span class="p">].</span><span class="n">val</span><span class="p">)</span>
			<span class="n">comn</span> <span class="o">|=</span> <span class="mh">0x80</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">VFLIP</span><span class="p">].</span><span class="n">val</span><span class="p">)</span>
			<span class="n">comn</span> <span class="o">|=</span> <span class="mh">0x40</span><span class="p">;</span>
		<span class="n">i2c_w1</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="n">comn</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">setsharpness</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>

	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x99</span><span class="p">,</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">SHARPNESS</span><span class="p">].</span><span class="n">val</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">setillum</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">ctrl_dis</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">ILLUM</span><span class="p">))</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_ADCM1700</span>:
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span>				<span class="cm">/* gpio */</span>
			<span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">ILLUM</span><span class="p">].</span><span class="n">val</span> <span class="o">?</span> <span class="mh">0x64</span> <span class="o">:</span> <span class="mh">0x60</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_MT9V111</span>:
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span>
			<span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">ILLUM</span><span class="p">].</span><span class="n">val</span> <span class="o">?</span> <span class="mh">0x77</span> <span class="o">:</span> <span class="mh">0x74</span><span class="p">);</span>
<span class="cm">/* should have been: */</span>
<span class="cm">/*						0x55 : 0x54);	* 370i */</span>
<span class="cm">/*						0x66 : 0x64);	* Clip */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">setfreq</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">ctrl_dis</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">FREQ</span><span class="p">))</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">==</span> <span class="n">SENSOR_OV7660</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">com8</span><span class="p">;</span>

		<span class="n">com8</span> <span class="o">=</span> <span class="mh">0xdf</span><span class="p">;</span>		<span class="cm">/* auto gain/wb/expo */</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">FREQ</span><span class="p">].</span><span class="n">val</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="mi">0</span>: <span class="cm">/* Banding filter disabled */</span>
			<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">com8</span> <span class="o">|</span> <span class="mh">0x20</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">1</span>: <span class="cm">/* 50 hz */</span>
			<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">com8</span><span class="p">);</span>
			<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x3b</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">2</span>: <span class="cm">/* 60 hz */</span>
			<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">com8</span><span class="p">);</span>
			<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x3b</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">reg2a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">reg2b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">reg2d</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="cm">/* Get reg2a / reg2d base values */</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="n">SENSOR_OV7630</span>:
			<span class="n">reg2a</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
			<span class="n">reg2d</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">SENSOR_OV7648</span>:
			<span class="n">reg2a</span> <span class="o">=</span> <span class="mh">0x11</span><span class="p">;</span>
			<span class="n">reg2d</span> <span class="o">=</span> <span class="mh">0x81</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">FREQ</span><span class="p">].</span><span class="n">val</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="mi">0</span>: <span class="cm">/* Banding filter disabled */</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">1</span>: <span class="cm">/* 50 hz (filter on and framerate adj) */</span>
			<span class="n">reg2a</span> <span class="o">|=</span> <span class="mh">0x80</span><span class="p">;</span>
			<span class="n">reg2b</span> <span class="o">=</span> <span class="mh">0xac</span><span class="p">;</span>
			<span class="n">reg2d</span> <span class="o">|=</span> <span class="mh">0x04</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">2</span>: <span class="cm">/* 60 hz (filter on, no framerate adj) */</span>
			<span class="n">reg2a</span> <span class="o">|=</span> <span class="mh">0x80</span><span class="p">;</span>
			<span class="n">reg2d</span> <span class="o">|=</span> <span class="mh">0x04</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x2a</span><span class="p">,</span> <span class="n">reg2a</span><span class="p">);</span>
		<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="n">reg2b</span><span class="p">);</span>
		<span class="n">i2c_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="n">reg2d</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">setjpegqual</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>

	<span class="n">jpeg_set_qual</span><span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">jpeg_hdr</span><span class="p">,</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">quality</span><span class="p">);</span>
<span class="cp">#if USB_BUF_SZ &lt; 64</span>
<span class="cp">#error &quot;No room enough in usb_buf for quantization table&quot;</span>
<span class="cp">#endif</span>
	<span class="n">memcpy</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">jpeg_hdr</span><span class="p">[</span><span class="n">JPEG_QT0_OFFSET</span><span class="p">],</span> <span class="mi">64</span><span class="p">);</span>
	<span class="n">usb_control_msg</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span>
			<span class="n">usb_sndctrlpipe</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
			<span class="mh">0x08</span><span class="p">,</span>
			<span class="n">USB_DIR_OUT</span> <span class="o">|</span> <span class="n">USB_TYPE_VENDOR</span> <span class="o">|</span> <span class="n">USB_RECIP_INTERFACE</span><span class="p">,</span>
			<span class="mh">0x0100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span>
			<span class="mi">500</span><span class="p">);</span>
	<span class="n">memcpy</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">jpeg_hdr</span><span class="p">[</span><span class="n">JPEG_QT1_OFFSET</span><span class="p">],</span> <span class="mi">64</span><span class="p">);</span>
	<span class="n">usb_control_msg</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span>
			<span class="n">usb_sndctrlpipe</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
			<span class="mh">0x08</span><span class="p">,</span>
			<span class="n">USB_DIR_OUT</span> <span class="o">|</span> <span class="n">USB_TYPE_VENDOR</span> <span class="o">|</span> <span class="n">USB_RECIP_INTERFACE</span><span class="p">,</span>
			<span class="mh">0x0140</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_buf</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span>
			<span class="mi">500</span><span class="p">);</span>

	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">reg18</span> <span class="o">^=</span> <span class="mh">0x40</span><span class="p">;</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">reg18</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* JPEG quality update */</span>
<span class="cm">/* This function is executed from a work queue. */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">qual_upd</span><span class="p">(</span><span class="k">struct</span> <span class="n">work_struct</span> <span class="o">*</span><span class="n">work</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="n">container_of</span><span class="p">(</span><span class="n">work</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sd</span><span class="p">,</span> <span class="n">work</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">gspca_dev</span><span class="p">;</span>

	<span class="n">mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_lock</span><span class="p">);</span>
	<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_STREAM</span><span class="p">,</span> <span class="s">&quot;qual_upd %d%%&quot;</span><span class="p">,</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">quality</span><span class="p">);</span>
	<span class="n">setjpegqual</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
	<span class="n">mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_lock</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* -- start the camera -- */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">sd_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reg01</span><span class="p">,</span> <span class="n">reg17</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reg0102</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">sn9c1xx</span><span class="p">;</span>
	<span class="k">const</span> <span class="n">u8</span> <span class="p">(</span><span class="o">*</span><span class="n">init</span><span class="p">)[</span><span class="mi">8</span><span class="p">];</span>
	<span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">reg9a</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mode</span><span class="p">;</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">reg9a_def</span><span class="p">[]</span> <span class="o">=</span>
		<span class="p">{</span><span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">};</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">reg9a_spec</span><span class="p">[]</span> <span class="o">=</span>
		<span class="p">{</span><span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">};</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">regd4</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">};</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">C0</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x3a</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x3f</span> <span class="p">};</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">CA</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0xd8</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0xec</span> <span class="p">};</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">CA_adcm1700</span><span class="p">[]</span> <span class="o">=</span>
				<span class="p">{</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0xec</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0xf6</span> <span class="p">};</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">CA_po2030n</span><span class="p">[]</span> <span class="o">=</span>
				<span class="p">{</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0xe2</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0xec</span> <span class="p">};</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">CE</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0xdd</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0xdd</span> <span class="p">};</span>	<span class="cm">/* MI0360 */</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">CE_gc0307</span><span class="p">[]</span> <span class="o">=</span>
				<span class="p">{</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0xce</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0xd3</span> <span class="p">};</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">CE_ov76xx</span><span class="p">[]</span> <span class="o">=</span>
				<span class="p">{</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0xdd</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0xdd</span> <span class="p">};</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">CE_po2030n</span><span class="p">[]</span> <span class="o">=</span>
				<span class="p">{</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0xe7</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0xdd</span> <span class="p">};</span>

	<span class="cm">/* create the JPEG header */</span>
	<span class="n">jpeg_define</span><span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">jpeg_hdr</span><span class="p">,</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">,</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">width</span><span class="p">,</span>
			<span class="mh">0x21</span><span class="p">);</span>		<span class="cm">/* JPEG 422 */</span>

	<span class="cm">/* initialize the bridge */</span>
	<span class="n">sn9c1xx</span> <span class="o">=</span> <span class="n">sn_tb</span><span class="p">[</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">];</span>

	<span class="cm">/* sensor clock already enabled in sd_init */</span>
	<span class="cm">/* reg_w1(gspca_dev, 0xf1, 0x00); */</span>
	<span class="n">reg01</span> <span class="o">=</span> <span class="n">sn9c1xx</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="n">F_PDN_INV</span><span class="p">)</span>
		<span class="n">reg01</span> <span class="o">^=</span> <span class="n">S_PDN_INV</span><span class="p">;</span>		<span class="cm">/* power down inverted */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>

	<span class="cm">/* configure gpio */</span>
	<span class="n">reg0102</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">reg01</span><span class="p">;</span>
	<span class="n">reg0102</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">sn9c1xx</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">audio</span><span class="p">)</span>
		<span class="n">reg0102</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">|=</span> <span class="mh">0x04</span><span class="p">;</span>	<span class="cm">/* keep the audio connection */</span>
	<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg0102</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
	<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sn9c1xx</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="mi">2</span><span class="p">);</span>
	<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sn9c1xx</span><span class="p">[</span><span class="mh">0x17</span><span class="p">],</span> <span class="mi">5</span><span class="p">);</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_GC0307</span>:
	<span class="k">case</span> <span class="n">SENSOR_OV7660</span>:
	<span class="k">case</span> <span class="n">SENSOR_PO1030</span>:
	<span class="k">case</span> <span class="n">SENSOR_PO2030N</span>:
	<span class="k">case</span> <span class="n">SENSOR_SOI768</span>:
	<span class="k">case</span> <span class="n">SENSOR_SP80708</span>:
		<span class="n">reg9a</span> <span class="o">=</span> <span class="n">reg9a_spec</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">reg9a</span> <span class="o">=</span> <span class="n">reg9a_def</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x9a</span><span class="p">,</span> <span class="n">reg9a</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>

	<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xd4</span><span class="p">,</span> <span class="n">regd4</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">regd4</span><span class="p">);</span>

	<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sn9c1xx</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mh">0x0f</span><span class="p">);</span>

	<span class="n">reg17</span> <span class="o">=</span> <span class="n">sn9c1xx</span><span class="p">[</span><span class="mh">0x17</span><span class="p">];</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_GC0307</span>:
		<span class="n">msleep</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>		<span class="cm">/*fixme: is it useful? */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_OM6802</span>:
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">);</span>
		<span class="n">reg17</span> <span class="o">|=</span> <span class="n">SEN_CLK_EN</span><span class="p">;</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="n">reg17</span><span class="p">);</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
		<span class="n">reg01</span> <span class="o">=</span> <span class="n">SCL_SEL_OD</span> <span class="o">|</span> <span class="n">S_PDN_INV</span><span class="p">;</span>
		<span class="n">reg17</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">MCK_SIZE_MASK</span><span class="p">;</span>
		<span class="n">reg17</span> <span class="o">|=</span> <span class="mh">0x04</span><span class="p">;</span>		<span class="cm">/* clock / 4 */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">reg01</span> <span class="o">|=</span> <span class="n">SYS_SEL_48M</span><span class="p">;</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
	<span class="n">reg17</span> <span class="o">|=</span> <span class="n">SEN_CLK_EN</span><span class="p">;</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="n">reg17</span><span class="p">);</span>
	<span class="n">reg01</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">S_PWR_DN</span><span class="p">;</span>		<span class="cm">/* sensor power on */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
	<span class="n">reg01</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">SCL_SEL_OD</span><span class="p">;</span>		<span class="cm">/* remove open-drain mode */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_HV7131R</span>:
		<span class="n">hv7131r_probe</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>	<span class="cm">/*fixme: is it useful? */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_OM6802</span>:
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">om6802_init0</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">om6802_init0</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x71</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_SP80708</span>:
		<span class="n">msleep</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* initialize the sensor */</span>
	<span class="n">i2c_w_seq</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">sensor_init</span><span class="p">[</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">]);</span>

	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="n">sn9c1xx</span><span class="p">[</span><span class="mh">0x15</span><span class="p">]);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="n">sn9c1xx</span><span class="p">[</span><span class="mh">0x16</span><span class="p">]);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="n">sn9c1xx</span><span class="p">[</span><span class="mh">0x12</span><span class="p">]);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="n">sn9c1xx</span><span class="p">[</span><span class="mh">0x13</span><span class="p">]);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="n">sn9c1xx</span><span class="p">[</span><span class="mh">0x18</span><span class="p">]);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">==</span> <span class="n">SENSOR_ADCM1700</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xd2</span><span class="p">,</span> <span class="mh">0x3a</span><span class="p">);</span>	<span class="cm">/* AE_H_SIZE = 116 */</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xd3</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">);</span>	<span class="cm">/* AE_V_SIZE = 96 */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xd2</span><span class="p">,</span> <span class="mh">0x6a</span><span class="p">);</span>	<span class="cm">/* AE_H_SIZE = 212 */</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xd3</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">);</span>	<span class="cm">/* AE_V_SIZE = 160 */</span>
	<span class="p">}</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xc6</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xc7</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">==</span> <span class="n">SENSOR_ADCM1700</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xc8</span><span class="p">,</span> <span class="mh">0x2c</span><span class="p">);</span>	<span class="cm">/* AW_H_STOP = 352 */</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xc9</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">);</span>	<span class="cm">/* AW_V_STOP = 288 */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xc8</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">);</span>	<span class="cm">/* AW_H_STOP = 640 */</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xc9</span><span class="p">,</span> <span class="mh">0x3c</span><span class="p">);</span>	<span class="cm">/* AW_V_STOP = 480 */</span>
	<span class="p">}</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="n">sn9c1xx</span><span class="p">[</span><span class="mh">0x18</span><span class="p">]);</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_OM6802</span>:
<span class="cm">/*	case SENSOR_OV7648:		* fixme: sometimes */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">reg17</span> <span class="o">|=</span> <span class="n">DEF_EN</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="n">reg17</span><span class="p">);</span>

	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>		<span class="cm">/* red */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>		<span class="cm">/* green */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>		<span class="cm">/* blue */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="n">sn9c1xx</span><span class="p">[</span><span class="mh">0x14</span><span class="p">]);</span>

	<span class="n">setgamma</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>

<span class="cm">/*fixme: 8 times with all zeroes and 1 or 2 times with normal values */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x84</span><span class="p">,</span> <span class="n">reg84</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">reg84</span><span class="p">);</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_ADCM1700</span>:
	<span class="k">case</span> <span class="n">SENSOR_OV7660</span>:
	<span class="k">case</span> <span class="n">SENSOR_SP80708</span>:
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x9a</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_GC0307</span>:
	<span class="k">case</span> <span class="n">SENSOR_MT9V111</span>:
	<span class="k">case</span> <span class="n">SENSOR_MI0360B</span>:
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x9a</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_OV7630</span>:
	<span class="k">case</span> <span class="n">SENSOR_OV7648</span>:
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x9a</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_PO2030N</span>:
	<span class="k">case</span> <span class="n">SENSOR_SOI768</span>:
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x9a</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x9a</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">setsharpness</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>

	<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x84</span><span class="p">,</span> <span class="n">reg84</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">reg84</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>		<span class="cm">/* red */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>		<span class="cm">/* green */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>		<span class="cm">/* blue */</span>

	<span class="n">init</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
	<span class="n">mode</span> <span class="o">=</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">cam</span><span class="p">.</span><span class="n">cam_mode</span><span class="p">[</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">curr_mode</span><span class="p">].</span><span class="n">priv</span><span class="p">;</span>
	<span class="n">reg01</span> <span class="o">|=</span> <span class="n">SYS_SEL_48M</span> <span class="o">|</span> <span class="n">V_TX_EN</span><span class="p">;</span>
	<span class="n">reg17</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">MCK_SIZE_MASK</span><span class="p">;</span>
	<span class="n">reg17</span> <span class="o">|=</span> <span class="mh">0x02</span><span class="p">;</span>			<span class="cm">/* clock / 2 */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_ADCM1700</span>:
		<span class="n">init</span> <span class="o">=</span> <span class="n">adcm1700_sensor_param1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_GC0307</span>:
		<span class="n">init</span> <span class="o">=</span> <span class="n">gc0307_sensor_param1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_HV7131R</span>:
	<span class="k">case</span> <span class="n">SENSOR_MI0360</span>:
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">mode</span><span class="p">)</span>
			<span class="n">reg01</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">SYS_SEL_48M</span><span class="p">;</span>	<span class="cm">/* 640x480: clk 24Mhz */</span>
		<span class="n">reg17</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">MCK_SIZE_MASK</span><span class="p">;</span>
		<span class="n">reg17</span> <span class="o">|=</span> <span class="mh">0x01</span><span class="p">;</span>			<span class="cm">/* clock / 1 */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_MI0360B</span>:
		<span class="n">init</span> <span class="o">=</span> <span class="n">mi0360b_sensor_param1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_MO4000</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="p">{</span>			<span class="cm">/* if 320x240 */</span>
			<span class="n">reg01</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">SYS_SEL_48M</span><span class="p">;</span>	<span class="cm">/* clk 24Mz */</span>
			<span class="n">reg17</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">MCK_SIZE_MASK</span><span class="p">;</span>
			<span class="n">reg17</span> <span class="o">|=</span> <span class="mh">0x01</span><span class="p">;</span>		<span class="cm">/* clock / 1 */</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_MT9V111</span>:
		<span class="n">init</span> <span class="o">=</span> <span class="n">mt9v111_sensor_param1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_OM6802</span>:
		<span class="n">init</span> <span class="o">=</span> <span class="n">om6802_sensor_param1</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">mode</span><span class="p">)</span> <span class="p">{</span>			<span class="cm">/* if 640x480 */</span>
			<span class="n">reg17</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">MCK_SIZE_MASK</span><span class="p">;</span>
			<span class="n">reg17</span> <span class="o">|=</span> <span class="mh">0x04</span><span class="p">;</span>		<span class="cm">/* clock / 4 */</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">reg01</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">SYS_SEL_48M</span><span class="p">;</span>	<span class="cm">/* clk 24Mz */</span>
			<span class="n">reg17</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">MCK_SIZE_MASK</span><span class="p">;</span>
			<span class="n">reg17</span> <span class="o">|=</span> <span class="mh">0x02</span><span class="p">;</span>		<span class="cm">/* clock / 2 */</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_OV7630</span>:
		<span class="n">init</span> <span class="o">=</span> <span class="n">ov7630_sensor_param1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_OV7648</span>:
		<span class="n">init</span> <span class="o">=</span> <span class="n">ov7648_sensor_param1</span><span class="p">;</span>
		<span class="n">reg17</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">MCK_SIZE_MASK</span><span class="p">;</span>
		<span class="n">reg17</span> <span class="o">|=</span> <span class="mh">0x01</span><span class="p">;</span>			<span class="cm">/* clock / 1 */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_OV7660</span>:
		<span class="n">init</span> <span class="o">=</span> <span class="n">ov7660_sensor_param1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_PO1030</span>:
		<span class="n">init</span> <span class="o">=</span> <span class="n">po1030_sensor_param1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_PO2030N</span>:
		<span class="n">init</span> <span class="o">=</span> <span class="n">po2030n_sensor_param1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_SOI768</span>:
		<span class="n">init</span> <span class="o">=</span> <span class="n">soi768_sensor_param1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_SP80708</span>:
		<span class="n">init</span> <span class="o">=</span> <span class="n">sp80708_sensor_param1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* more sensor initialization - param1 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">init</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">i2c_w_seq</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">init</span><span class="p">);</span>
<span class="cm">/*		init = NULL; */</span>
	<span class="p">}</span>

	<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="n">C0</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_ADCM1700</span>:
	<span class="k">case</span> <span class="n">SENSOR_GC0307</span>:
	<span class="k">case</span> <span class="n">SENSOR_SOI768</span>:
		<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xca</span><span class="p">,</span> <span class="n">CA_adcm1700</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_PO2030N</span>:
		<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xca</span><span class="p">,</span> <span class="n">CA_po2030n</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xca</span><span class="p">,</span> <span class="n">CA</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_ADCM1700</span>:
	<span class="k">case</span> <span class="n">SENSOR_OV7630</span>:
	<span class="k">case</span> <span class="n">SENSOR_OV7648</span>:
	<span class="k">case</span> <span class="n">SENSOR_OV7660</span>:
	<span class="k">case</span> <span class="n">SENSOR_SOI768</span>:
		<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xce</span><span class="p">,</span> <span class="n">CE_ov76xx</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_GC0307</span>:
		<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xce</span><span class="p">,</span> <span class="n">CE_gc0307</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_PO2030N</span>:
		<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xce</span><span class="p">,</span> <span class="n">CE_po2030n</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">reg_w</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0xce</span><span class="p">,</span> <span class="n">CE</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
					<span class="cm">/* ?? {0x1e, 0xdd, 0x2d, 0xe7} */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* here change size mode 0 -&gt; VGA; 1 -&gt; CIF */</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">reg18</span> <span class="o">=</span> <span class="n">sn9c1xx</span><span class="p">[</span><span class="mh">0x18</span><span class="p">]</span> <span class="o">|</span> <span class="p">(</span><span class="n">mode</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="mh">0x40</span><span class="p">;</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">reg18</span><span class="p">);</span>
	<span class="n">setjpegqual</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>

	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="n">reg17</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">reg01</span> <span class="o">=</span> <span class="n">reg01</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">reg17</span> <span class="o">=</span> <span class="n">reg17</span><span class="p">;</span>

	<span class="n">sethvflip</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
	<span class="n">setbrightness</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
	<span class="n">setcontrast</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
	<span class="n">setcolors</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
	<span class="n">setautogain</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">ctrl_inac</span> <span class="o">&amp;</span> <span class="p">((</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">))))</span> <span class="p">{</span>
		<span class="n">setexposure</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
		<span class="n">setgain</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">setfreq</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>

	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">pktsz</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">npkt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">nchg</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">short_mark</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">work_thread</span> <span class="o">=</span> <span class="n">create_singlethread_workqueue</span><span class="p">(</span><span class="n">MODULE_NAME</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">sd_stopN</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">stophv7131</span><span class="p">[]</span> <span class="o">=</span>
		<span class="p">{</span> <span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span> <span class="p">};</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">stopmi0360</span><span class="p">[]</span> <span class="o">=</span>
		<span class="p">{</span> <span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span> <span class="p">};</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">stopov7648</span><span class="p">[]</span> <span class="o">=</span>
		<span class="p">{</span> <span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x76</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span> <span class="p">};</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">stopsoi768</span><span class="p">[]</span> <span class="o">=</span>
		<span class="p">{</span> <span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span> <span class="p">};</span>
	<span class="n">u8</span> <span class="n">reg01</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reg17</span><span class="p">;</span>

	<span class="n">reg01</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">reg01</span><span class="p">;</span>
	<span class="n">reg17</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">reg17</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">SEN_CLK_EN</span><span class="p">;</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SENSOR_ADCM1700</span>:
	<span class="k">case</span> <span class="n">SENSOR_GC0307</span>:
	<span class="k">case</span> <span class="n">SENSOR_PO2030N</span>:
	<span class="k">case</span> <span class="n">SENSOR_SP80708</span>:
		<span class="n">reg01</span> <span class="o">|=</span> <span class="n">LED</span><span class="p">;</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
		<span class="n">reg01</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="n">LED</span> <span class="o">|</span> <span class="n">V_TX_EN</span><span class="p">);</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
<span class="cm">/*		reg_w1(gspca_dev, 0x02, 0x??);	 * LED off ? */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_HV7131R</span>:
		<span class="n">reg01</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">V_TX_EN</span><span class="p">;</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">stophv7131</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_MI0360</span>:
	<span class="k">case</span> <span class="n">SENSOR_MI0360B</span>:
		<span class="n">reg01</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">V_TX_EN</span><span class="p">;</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
<span class="cm">/*		reg_w1(gspca_dev, 0x02, 0x40);	  * LED off ? */</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">stopmi0360</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_MT9V111</span>:
	<span class="k">case</span> <span class="n">SENSOR_OM6802</span>:
	<span class="k">case</span> <span class="n">SENSOR_PO1030</span>:
		<span class="n">reg01</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">V_TX_EN</span><span class="p">;</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_OV7630</span>:
	<span class="k">case</span> <span class="n">SENSOR_OV7648</span>:
		<span class="n">reg01</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">V_TX_EN</span><span class="p">;</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">stopov7648</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_OV7660</span>:
		<span class="n">reg01</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">V_TX_EN</span><span class="p">;</span>
		<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SENSOR_SOI768</span>:
		<span class="n">i2c_w8</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">stopsoi768</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">reg01</span> <span class="o">|=</span> <span class="n">SCL_SEL_OD</span><span class="p">;</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
	<span class="n">reg01</span> <span class="o">|=</span> <span class="n">S_PWR_DN</span><span class="p">;</span>		<span class="cm">/* sensor power down */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="n">reg17</span><span class="p">);</span>
	<span class="n">reg01</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">SYS_SEL_48M</span><span class="p">;</span>		<span class="cm">/* clock 24MHz */</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
	<span class="n">reg01</span> <span class="o">|=</span> <span class="n">LED</span><span class="p">;</span>
	<span class="n">reg_w1</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">reg01</span><span class="p">);</span>
	<span class="cm">/* Don&#39;t disable sensor clock as that disables the button on the cam */</span>
	<span class="cm">/* reg_w1(gspca_dev, 0xf1, 0x01); */</span>
<span class="p">}</span>

<span class="cm">/* called on streamoff with alt==0 and on disconnect */</span>
<span class="cm">/* the usb_lock is held at entry - restore on exit */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">sd_stop0</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">work_thread</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_lock</span><span class="p">);</span>
		<span class="n">destroy_workqueue</span><span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">work_thread</span><span class="p">);</span>
		<span class="n">mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_lock</span><span class="p">);</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">work_thread</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cp">#define WANT_REGULAR_AUTOGAIN</span>
<span class="cp">#include &quot;autogain_functions.h&quot;</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">do_autogain</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">delta</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">expotimes</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">luma_mean</span> <span class="o">=</span> <span class="mi">130</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">luma_delta</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>

	<span class="cm">/* Thanks S., without your advice, autobright should not work :) */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">ag_cnt</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">--</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">ag_cnt</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">ag_cnt</span> <span class="o">=</span> <span class="n">AG_CNT_START</span><span class="p">;</span>

	<span class="n">delta</span> <span class="o">=</span> <span class="n">atomic_read</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">avg_lum</span><span class="p">);</span>
	<span class="n">PDEBUG</span><span class="p">(</span><span class="n">D_FRAM</span><span class="p">,</span> <span class="s">&quot;mean lum %d&quot;</span><span class="p">,</span> <span class="n">delta</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span> <span class="o">==</span> <span class="n">SENSOR_PO2030N</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">auto_gain_n_exposure</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">luma_mean</span><span class="p">,</span> <span class="n">luma_delta</span><span class="p">,</span>
					<span class="mi">15</span><span class="p">,</span> <span class="mi">1024</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">delta</span> <span class="o">&lt;</span> <span class="n">luma_mean</span> <span class="o">-</span> <span class="n">luma_delta</span> <span class="o">||</span>
	    <span class="n">delta</span> <span class="o">&gt;</span> <span class="n">luma_mean</span> <span class="o">+</span> <span class="n">luma_delta</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">sensor</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="n">SENSOR_GC0307</span>:
			<span class="n">expotimes</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">exposure</span><span class="p">;</span>
			<span class="n">expotimes</span> <span class="o">+=</span> <span class="p">(</span><span class="n">luma_mean</span> <span class="o">-</span> <span class="n">delta</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">6</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">expotimes</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
				<span class="n">expotimes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="n">sd</span><span class="o">-&gt;</span><span class="n">exposure</span> <span class="o">=</span> <span class="n">expo_adjust</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span>
						   <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span> <span class="n">expotimes</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">SENSOR_HV7131R</span>:
			<span class="n">expotimes</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">exposure</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">;</span>
			<span class="n">expotimes</span> <span class="o">+=</span> <span class="p">(</span><span class="n">luma_mean</span> <span class="o">-</span> <span class="n">delta</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">expotimes</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
				<span class="n">expotimes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="n">sd</span><span class="o">-&gt;</span><span class="n">exposure</span> <span class="o">=</span> <span class="n">expo_adjust</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span>
					<span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="n">expotimes</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">));</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">SENSOR_OM6802</span>:
		<span class="k">case</span> <span class="n">SENSOR_MT9V111</span>:
			<span class="n">expotimes</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">exposure</span><span class="p">;</span>
			<span class="n">expotimes</span> <span class="o">+=</span> <span class="p">(</span><span class="n">luma_mean</span> <span class="o">-</span> <span class="n">delta</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">expotimes</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
				<span class="n">expotimes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="n">sd</span><span class="o">-&gt;</span><span class="n">exposure</span> <span class="o">=</span> <span class="n">expo_adjust</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span>
						   <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span> <span class="n">expotimes</span><span class="p">);</span>
			<span class="n">setredblue</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="nl">default:</span>
<span class="cm">/*		case SENSOR_MO4000: */</span>
<span class="cm">/*		case SENSOR_MI0360: */</span>
<span class="cm">/*		case SENSOR_MI0360B: */</span>
			<span class="n">expotimes</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">exposure</span><span class="p">;</span>
			<span class="n">expotimes</span> <span class="o">+=</span> <span class="p">(</span><span class="n">luma_mean</span> <span class="o">-</span> <span class="n">delta</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">6</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">expotimes</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
				<span class="n">expotimes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="n">sd</span><span class="o">-&gt;</span><span class="n">exposure</span> <span class="o">=</span> <span class="n">expo_adjust</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span>
						   <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span> <span class="n">expotimes</span><span class="p">);</span>
			<span class="n">setredblue</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* set the average luminosity from an isoc marker */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">set_lum</span><span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span><span class="p">,</span>
		    <span class="n">u8</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">avg_lum</span><span class="p">;</span>

	<span class="cm">/*	w0 w1 w2</span>
<span class="cm">	 *	w3 w4 w5</span>
<span class="cm">	 *	w6 w7 w8</span>
<span class="cm">	 */</span>
	<span class="n">avg_lum</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">27</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="mi">28</span><span class="p">]</span>		<span class="cm">/* w3 */</span>

		<span class="o">+</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">31</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span>		<span class="cm">/* w5 */</span>

		<span class="o">+</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">23</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="mi">24</span><span class="p">]</span>		<span class="cm">/* w1 */</span>

		<span class="o">+</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">35</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="mi">36</span><span class="p">]</span>		<span class="cm">/* w7 */</span>

		<span class="o">+</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">29</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">30</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">);</span>	<span class="cm">/* w4 * 4 */</span>
	<span class="n">avg_lum</span> <span class="o">&gt;&gt;=</span> <span class="mi">10</span><span class="p">;</span>
	<span class="n">atomic_set</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">avg_lum</span><span class="p">,</span> <span class="n">avg_lum</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* scan the URB packets */</span>
<span class="cm">/* This function is run at interrupt level. */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">sd_pkt_scan</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">,</span>
			<span class="n">u8</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span>			<span class="cm">/* isoc packet */</span>
			<span class="kt">int</span> <span class="n">len</span><span class="p">)</span>			<span class="cm">/* iso packet length */</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">new_qual</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * A frame ends on the marker</span>
<span class="cm">	 *		ff ff 00 c4 c4 96 ..</span>
<span class="cm">	 * which is 62 bytes long and is followed by various information</span>
<span class="cm">	 * including statuses and luminosity.</span>
<span class="cm">	 *</span>
<span class="cm">	 * A marker may be splitted on two packets.</span>
<span class="cm">	 *</span>
<span class="cm">	 * The 6th byte of a marker contains the bits:</span>
<span class="cm">	 *	0x08: USB full</span>
<span class="cm">	 *	0xc0: frame sequence</span>
<span class="cm">	 * When the bit &#39;USB full&#39; is set, the frame must be discarded;</span>
<span class="cm">	 * this is also the case when the 2 bytes before the marker are</span>
<span class="cm">	 * not the JPEG end of frame (&#39;ff d9&#39;).</span>
<span class="cm">	 */</span>

	<span class="cm">/* count the packets and their size */</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">npkt</span><span class="o">++</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">pktsz</span> <span class="o">+=</span> <span class="n">len</span><span class="p">;</span>

<span class="cm">/*fixme: assumption about the following code:</span>
<span class="cm"> *	- there can be only one marker in a packet</span>
<span class="cm"> */</span>

	<span class="cm">/* skip the remaining bytes of a short marker */</span>
	<span class="n">i</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">short_mark</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">short_mark</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span>	<span class="cm">/* if &#39;ff&#39; at end of previous packet */</span>
		 <span class="o">&amp;&amp;</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0xff</span>
		 <span class="o">&amp;&amp;</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0x00</span><span class="p">)</span>
			<span class="k">goto</span> <span class="n">marker_found</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0xff</span> <span class="o">&amp;&amp;</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0xff</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">goto</span> <span class="n">marker_found</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">len</span> <span class="o">-=</span> <span class="n">i</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">len</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="n">data</span> <span class="o">+=</span> <span class="n">i</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* search backwards if there is a marker in the packet */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="n">len</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="mh">0xff</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">i</span><span class="o">--</span><span class="p">;</span>
			<span class="k">continue</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0xff</span><span class="p">)</span> <span class="p">{</span>

			<span class="cm">/* (there may be &#39;ff ff&#39; inside a marker) */</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">&gt;=</span> <span class="n">len</span> <span class="o">||</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0x00</span><span class="p">)</span>
				<span class="k">goto</span> <span class="n">marker_found</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="cm">/* no marker found */</span>
	<span class="cm">/* add the JPEG header if first fragment */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">len</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0xff</span><span class="p">)</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">short_mark</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">last_packet_type</span> <span class="o">==</span> <span class="n">LAST_PACKET</span><span class="p">)</span>
		<span class="n">gspca_frame_add</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">FIRST_PACKET</span><span class="p">,</span>
				<span class="n">sd</span><span class="o">-&gt;</span><span class="n">jpeg_hdr</span><span class="p">,</span> <span class="n">JPEG_HDR_SZ</span><span class="p">);</span>
	<span class="n">gspca_frame_add</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">INTER_PACKET</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
	<span class="k">return</span><span class="p">;</span>

	<span class="cm">/* marker found */</span>
	<span class="cm">/* if some error, discard the frame and decrease the quality */</span>
<span class="nl">marker_found:</span>
	<span class="n">new_qual</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="mh">0xff</span> <span class="o">||</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mh">0xd9</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">last_packet_type</span> <span class="o">=</span> <span class="n">DISCARD_PACKET</span><span class="p">;</span>
			<span class="n">new_qual</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">6</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x08</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">last_packet_type</span> <span class="o">=</span> <span class="n">DISCARD_PACKET</span><span class="p">;</span>
			<span class="n">new_qual</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">gspca_frame_add</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">LAST_PACKET</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>

	<span class="cm">/* compute the filling rate and a new JPEG quality */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">new_qual</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="kt">int</span> <span class="n">r</span><span class="p">;</span>

		<span class="n">r</span> <span class="o">=</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">pktsz</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span> <span class="o">/</span>
			<span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">npkt</span> <span class="o">*</span>
				<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">urb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">iso_frame_desc</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">length</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">&gt;=</span> <span class="mi">85</span><span class="p">)</span>
			<span class="n">new_qual</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span><span class="p">;</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">&lt;</span> <span class="mi">75</span><span class="p">)</span>
			<span class="n">new_qual</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">new_qual</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">nchg</span> <span class="o">+=</span> <span class="n">new_qual</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">nchg</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">6</span> <span class="o">||</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">nchg</span> <span class="o">&gt;=</span> <span class="mi">12</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">sd</span><span class="o">-&gt;</span><span class="n">nchg</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="n">new_qual</span> <span class="o">+=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">quality</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">new_qual</span> <span class="o">&lt;</span> <span class="n">QUALITY_MIN</span><span class="p">)</span>
				<span class="n">new_qual</span> <span class="o">=</span> <span class="n">QUALITY_MIN</span><span class="p">;</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">new_qual</span> <span class="o">&gt;</span> <span class="n">QUALITY_MAX</span><span class="p">)</span>
				<span class="n">new_qual</span> <span class="o">=</span> <span class="n">QUALITY_MAX</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">new_qual</span> <span class="o">!=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">quality</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">sd</span><span class="o">-&gt;</span><span class="n">quality</span> <span class="o">=</span> <span class="n">new_qual</span><span class="p">;</span>
				<span class="n">queue_work</span><span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">work_thread</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">work</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">nchg</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">pktsz</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">npkt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="cm">/* if the marker is smaller than 62 bytes,</span>
<span class="cm">	 * memorize the number of bytes to skip in the next packet */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">62</span> <span class="o">&gt;</span> <span class="n">len</span><span class="p">)</span> <span class="p">{</span>			<span class="cm">/* no more usable data */</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">short_mark</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">62</span> <span class="o">-</span> <span class="n">len</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">ag_cnt</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">set_lum</span><span class="p">(</span><span class="n">sd</span><span class="p">,</span> <span class="n">data</span> <span class="o">+</span> <span class="n">i</span><span class="p">);</span>

	<span class="cm">/* if more data, start a new frame */</span>
	<span class="n">i</span> <span class="o">+=</span> <span class="mi">62</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">data</span> <span class="o">+=</span> <span class="n">i</span><span class="p">;</span>
		<span class="n">len</span> <span class="o">-=</span> <span class="n">i</span><span class="p">;</span>
		<span class="n">gspca_frame_add</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">FIRST_PACKET</span><span class="p">,</span>
				<span class="n">sd</span><span class="o">-&gt;</span><span class="n">jpeg_hdr</span><span class="p">,</span> <span class="n">JPEG_HDR_SZ</span><span class="p">);</span>
		<span class="n">gspca_frame_add</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">INTER_PACKET</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">sd_setautogain</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">__s32</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>

	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">ctrls</span><span class="p">[</span><span class="n">AUTOGAIN</span><span class="p">].</span><span class="n">val</span> <span class="o">=</span> <span class="n">val</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">val</span><span class="p">)</span>
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">ctrl_inac</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">ctrl_inac</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EXPOSURE</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">GAIN</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">streaming</span><span class="p">)</span>
		<span class="n">setautogain</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">usb_err</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">sd_querymenu</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">v4l2_querymenu</span> <span class="o">*</span><span class="n">menu</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">menu</span><span class="o">-&gt;</span><span class="n">id</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">V4L2_CID_POWER_LINE_FREQUENCY</span>:
		<span class="k">switch</span> <span class="p">(</span><span class="n">menu</span><span class="o">-&gt;</span><span class="n">index</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="mi">0</span>:		<span class="cm">/* V4L2_CID_POWER_LINE_FREQUENCY_DISABLED */</span>
			<span class="n">strcpy</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span> <span class="n">menu</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="s">&quot;NoFliker&quot;</span><span class="p">);</span>
			<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">1</span>:		<span class="cm">/* V4L2_CID_POWER_LINE_FREQUENCY_50HZ */</span>
			<span class="n">strcpy</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span> <span class="n">menu</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="s">&quot;50 Hz&quot;</span><span class="p">);</span>
			<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">2</span>:		<span class="cm">/* V4L2_CID_POWER_LINE_FREQUENCY_60HZ */</span>
			<span class="n">strcpy</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span> <span class="n">menu</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="s">&quot;60 Hz&quot;</span><span class="p">);</span>
			<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#if defined(CONFIG_INPUT) || defined(CONFIG_INPUT_MODULE)</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">sd_int_pkt_scan</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">,</span>
			<span class="n">u8</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span>		<span class="cm">/* interrupt packet data */</span>
			<span class="kt">int</span> <span class="n">len</span><span class="p">)</span>		<span class="cm">/* interrupt packet length */</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">len</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">input_report_key</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">input_dev</span><span class="p">,</span> <span class="n">KEY_CAMERA</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
		<span class="n">input_sync</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">input_dev</span><span class="p">);</span>
		<span class="n">input_report_key</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">input_dev</span><span class="p">,</span> <span class="n">KEY_CAMERA</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">input_sync</span><span class="p">(</span><span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">input_dev</span><span class="p">);</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cm">/* sub-driver description */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">sd_desc</span> <span class="n">sd_desc</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">MODULE_NAME</span><span class="p">,</span>
	<span class="p">.</span><span class="n">ctrls</span> <span class="o">=</span> <span class="n">sd_ctrls</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nctrls</span> <span class="o">=</span> <span class="n">NCTRLS</span><span class="p">,</span>
	<span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">sd_config</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init</span> <span class="o">=</span> <span class="n">sd_init</span><span class="p">,</span>
	<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">sd_start</span><span class="p">,</span>
	<span class="p">.</span><span class="n">stopN</span> <span class="o">=</span> <span class="n">sd_stopN</span><span class="p">,</span>
	<span class="p">.</span><span class="n">stop0</span> <span class="o">=</span> <span class="n">sd_stop0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pkt_scan</span> <span class="o">=</span> <span class="n">sd_pkt_scan</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dq_callback</span> <span class="o">=</span> <span class="n">do_autogain</span><span class="p">,</span>
	<span class="p">.</span><span class="n">querymenu</span> <span class="o">=</span> <span class="n">sd_querymenu</span><span class="p">,</span>
<span class="cp">#if defined(CONFIG_INPUT) || defined(CONFIG_INPUT_MODULE)</span>
	<span class="p">.</span><span class="n">int_pkt_scan</span> <span class="o">=</span> <span class="n">sd_int_pkt_scan</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="cm">/* -- module initialisation -- */</span>
<span class="cp">#define BS(bridge, sensor) \</span>
<span class="cp">	.driver_info = (BRIDGE_ ## bridge &lt;&lt; 16) \</span>
<span class="cp">			| (SENSOR_ ## sensor &lt;&lt; 8)</span>
<span class="cp">#define BSF(bridge, sensor, flags) \</span>
<span class="cp">	.driver_info = (BRIDGE_ ## bridge &lt;&lt; 16) \</span>
<span class="cp">			| (SENSOR_ ## sensor &lt;&lt; 8) \</span>
<span class="cp">			| (flags)</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">usb_device_id</span> <span class="n">device_table</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0458</span><span class="p">,</span> <span class="mh">0x7025</span><span class="p">),</span> <span class="n">BSF</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">MI0360B</span><span class="p">,</span> <span class="n">F_PDN_INV</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0458</span><span class="p">,</span> <span class="mh">0x702e</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">OV7660</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x045e</span><span class="p">,</span> <span class="mh">0x00f5</span><span class="p">),</span> <span class="n">BSF</span><span class="p">(</span><span class="n">SN9C105</span><span class="p">,</span> <span class="n">OV7660</span><span class="p">,</span> <span class="n">F_PDN_INV</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x045e</span><span class="p">,</span> <span class="mh">0x00f7</span><span class="p">),</span> <span class="n">BSF</span><span class="p">(</span><span class="n">SN9C105</span><span class="p">,</span> <span class="n">OV7660</span><span class="p">,</span> <span class="n">F_PDN_INV</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0471</span><span class="p">,</span> <span class="mh">0x0327</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C105</span><span class="p">,</span> <span class="n">MI0360</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0471</span><span class="p">,</span> <span class="mh">0x0328</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C105</span><span class="p">,</span> <span class="n">MI0360</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0471</span><span class="p">,</span> <span class="mh">0x0330</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C105</span><span class="p">,</span> <span class="n">MI0360</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x06f8</span><span class="p">,</span> <span class="mh">0x3004</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C105</span><span class="p">,</span> <span class="n">OV7660</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x06f8</span><span class="p">,</span> <span class="mh">0x3008</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C105</span><span class="p">,</span> <span class="n">OV7660</span><span class="p">)},</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x603a), BS(SN9C102P, OV7648)}, */</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x6040</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C102P</span><span class="p">,</span> <span class="n">HV7131R</span><span class="p">)},</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x607a), BS(SN9C102P, OV7648)}, */</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x607b), BS(SN9C102P, OV7660)}, */</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x607c</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C102P</span><span class="p">,</span> <span class="n">HV7131R</span><span class="p">)},</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x607e), BS(SN9C102P, OV7630)}, */</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x60c0</span><span class="p">),</span> <span class="n">BSF</span><span class="p">(</span><span class="n">SN9C105</span><span class="p">,</span> <span class="n">MI0360</span><span class="p">,</span> <span class="n">F_ILLUM</span><span class="p">)},</span>
						<span class="cm">/* or MT9V111 */</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x60c2), BS(SN9C105, P1030xC)}, */</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x60c8), BS(SN9C105, OM6802)}, */</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x60cc), BS(SN9C105, HV7131GP)}, */</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x60ce</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C105</span><span class="p">,</span> <span class="n">SP80708</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x60ec</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C105</span><span class="p">,</span> <span class="n">MO4000</span><span class="p">)},</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x60ef), BS(SN9C105, ICM105C)}, */</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x60fa), BS(SN9C105, OV7648)}, */</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x60f2), BS(SN9C105, OV7660)}, */</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x60fb</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C105</span><span class="p">,</span> <span class="n">OV7660</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x60fc</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C105</span><span class="p">,</span> <span class="n">HV7131R</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x60fe</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C105</span><span class="p">,</span> <span class="n">OV7630</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x6100</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">MI0360</span><span class="p">)},</span>	<span class="cm">/*sn9c128*/</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x6102</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">PO2030N</span><span class="p">)},</span>	<span class="cm">/* /GC0305*/</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x6108), BS(SN9C120, OM6802)}, */</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x610a</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">OV7648</span><span class="p">)},</span>	<span class="cm">/*sn9c128*/</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x610b</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">OV7660</span><span class="p">)},</span>	<span class="cm">/*sn9c128*/</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x610c</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">HV7131R</span><span class="p">)},</span>	<span class="cm">/*sn9c128*/</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x610e</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">OV7630</span><span class="p">)},</span>	<span class="cm">/*sn9c128*/</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x610f), BS(SN9C120, S5K53BEB)}, */</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x6122), BS(SN9C110, ICM105C)}, */</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x6123), BS(SN9C110, SanyoCCD)}, */</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x6128</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">OM6802</span><span class="p">)},</span>	<span class="cm">/*sn9c325?*/</span>
<span class="cm">/*bw600.inf:*/</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x612a</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">OV7648</span><span class="p">)},</span>	<span class="cm">/*sn9c325?*/</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x612b</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C110</span><span class="p">,</span> <span class="n">ADCM1700</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x612c</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C110</span><span class="p">,</span> <span class="n">MO4000</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x612e</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C110</span><span class="p">,</span> <span class="n">OV7630</span><span class="p">)},</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x612f), BS(SN9C110, ICM105C)}, */</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x6130</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">MI0360</span><span class="p">)},</span>
						<span class="cm">/* or MT9V111 / MI0360B */</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x6132), BS(SN9C120, OV7670)}, */</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x6138</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">MO4000</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x613a</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">OV7648</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x613b</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">OV7660</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x613c</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">HV7131R</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x613e</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">OV7630</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x6142</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">PO2030N</span><span class="p">)},</span>	<span class="cm">/*sn9c120b*/</span>
						<span class="cm">/* or GC0305 / GC0307 */</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x6143</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">SP80708</span><span class="p">)},</span>	<span class="cm">/*sn9c120b*/</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x6148</span><span class="p">),</span> <span class="n">BS</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">OM6802</span><span class="p">)},</span>	<span class="cm">/*sn9c120b*/</span>
	<span class="p">{</span><span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0c45</span><span class="p">,</span> <span class="mh">0x614a</span><span class="p">),</span> <span class="n">BSF</span><span class="p">(</span><span class="n">SN9C120</span><span class="p">,</span> <span class="n">ADCM1700</span><span class="p">,</span> <span class="n">F_ILLUM</span><span class="p">)},</span>
<span class="cm">/*	{USB_DEVICE(0x0c45, 0x614c), BS(SN9C120, GC0306)}, */</span>	<span class="cm">/*sn9c120b*/</span>
	<span class="p">{}</span>
<span class="p">};</span>
<span class="n">MODULE_DEVICE_TABLE</span><span class="p">(</span><span class="n">usb</span><span class="p">,</span> <span class="n">device_table</span><span class="p">);</span>

<span class="cm">/* -- device connect -- */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">sd_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">usb_interface</span> <span class="o">*</span><span class="n">intf</span><span class="p">,</span>
		    <span class="k">const</span> <span class="k">struct</span> <span class="n">usb_device_id</span> <span class="o">*</span><span class="n">id</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">gspca_dev_probe</span><span class="p">(</span><span class="n">intf</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sd_desc</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">sd</span><span class="p">),</span>
				<span class="n">THIS_MODULE</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">usb_driver</span> <span class="n">sd_driver</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">MODULE_NAME</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id_table</span> <span class="o">=</span> <span class="n">device_table</span><span class="p">,</span>
	<span class="p">.</span><span class="n">probe</span> <span class="o">=</span> <span class="n">sd_probe</span><span class="p">,</span>
	<span class="p">.</span><span class="n">disconnect</span> <span class="o">=</span> <span class="n">gspca_disconnect</span><span class="p">,</span>
<span class="cp">#ifdef CONFIG_PM</span>
	<span class="p">.</span><span class="n">suspend</span> <span class="o">=</span> <span class="n">gspca_suspend</span><span class="p">,</span>
	<span class="p">.</span><span class="n">resume</span> <span class="o">=</span> <span class="n">gspca_resume</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="n">module_usb_driver</span><span class="p">(</span><span class="n">sd_driver</span><span class="p">);</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
