<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › media › video › gspca › gl860 › gl860-mi1320.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>gl860-mi1320.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* Subdriver for the GL860 chip with the MI1320 sensor</span>
<span class="cm"> * Author Olivier LORIN from own logs</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="cm"> */</span>

<span class="cm">/* Sensor : MI1320 */</span>

<span class="cp">#include &quot;gl860.h&quot;</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">validx</span> <span class="n">tbl_common</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba51</span><span class="p">,</span> <span class="mh">0x0066</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba02</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xba05</span><span class="p">,</span> <span class="mh">0x0067</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba05</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xbaa0</span><span class="p">,</span> <span class="mh">0x0065</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xffff</span><span class="p">,</span> <span class="mh">0xffff</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba02</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xbafa</span><span class="p">,</span> <span class="mh">0x0028</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba02</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba01</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xbaf0</span><span class="p">,</span> <span class="mh">0x0006</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba0e</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xba70</span><span class="p">,</span> <span class="mh">0x0006</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba0e</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xffff</span><span class="p">,</span> <span class="mh">0xffff</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xba74</span><span class="p">,</span> <span class="mh">0x0006</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba0e</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xffff</span><span class="p">,</span> <span class="mh">0xffff</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x0061</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">},</span> <span class="p">{</span><span class="mh">0x0068</span><span class="p">,</span> <span class="mh">0x000d</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">validx</span> <span class="n">tbl_init_at_startup</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">},</span> <span class="p">{</span><span class="mh">0x0010</span><span class="p">,</span> <span class="mh">0x0010</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">35</span><span class="p">,</span> <span class="mh">0xffff</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x0008</span><span class="p">,</span> <span class="mh">0x00c0</span><span class="p">},</span> <span class="p">{</span><span class="mh">0x0001</span><span class="p">,</span> <span class="mh">0x00c1</span><span class="p">},</span> <span class="p">{</span><span class="mh">0x0001</span><span class="p">,</span> <span class="mh">0x00c2</span><span class="p">},</span> <span class="p">{</span><span class="mh">0x0020</span><span class="p">,</span> <span class="mh">0x0006</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x006a</span><span class="p">,</span> <span class="mh">0x000d</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">validx</span> <span class="n">tbl_sensor_settings_common</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0x0010</span><span class="p">,</span> <span class="mh">0x0010</span><span class="p">},</span> <span class="p">{</span><span class="mh">0x0003</span><span class="p">,</span> <span class="mh">0x00c1</span><span class="p">},</span> <span class="p">{</span><span class="mh">0x0042</span><span class="p">,</span> <span class="mh">0x00c2</span><span class="p">},</span> <span class="p">{</span><span class="mh">0x0040</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x006a</span><span class="p">,</span> <span class="mh">0x0007</span><span class="p">},</span> <span class="p">{</span><span class="mh">0x006a</span><span class="p">,</span> <span class="mh">0x000d</span><span class="p">},</span> <span class="p">{</span><span class="mh">0x0063</span><span class="p">,</span> <span class="mh">0x0006</span><span class="p">},</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">validx</span> <span class="n">tbl_sensor_settings_1280</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba5a</span><span class="p">,</span> <span class="mh">0x0066</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba02</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xba05</span><span class="p">,</span> <span class="mh">0x0067</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba05</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba20</span><span class="p">,</span> <span class="mh">0x0065</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">validx</span> <span class="n">tbl_sensor_settings_800</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba5a</span><span class="p">,</span> <span class="mh">0x0066</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba02</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xba05</span><span class="p">,</span> <span class="mh">0x0067</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba05</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba20</span><span class="p">,</span> <span class="mh">0x0065</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">validx</span> <span class="n">tbl_sensor_settings_640</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xbaa0</span><span class="p">,</span> <span class="mh">0x0065</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xba51</span><span class="p">,</span> <span class="mh">0x0066</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba02</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba05</span><span class="p">,</span> <span class="mh">0x0067</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba05</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xba20</span><span class="p">,</span> <span class="mh">0x0065</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">validx</span> <span class="n">tbl_post_unset_alt</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xbaa0</span><span class="p">,</span> <span class="mh">0x0065</span><span class="p">},</span> <span class="p">{</span><span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x0061</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">},</span> <span class="p">{</span><span class="mh">0x0068</span><span class="p">,</span> <span class="mh">0x000d</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">u8</span> <span class="o">*</span><span class="n">tbl_1280</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;</span><span class="se">\x0d\x80\xf1\x08\x03\x04\xf1\x00</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x04\x05\xf1\x02\x05\x00\xf1\xf1</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x06\x00\xf1\x0d\x20\x01\xf1\x00</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x21\x84\xf1\x00\x0d\x00\xf1\x08</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x01\x34\x00\xf1\x00</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x9b\x43\xf1\x00\xa6\x05\xf1\x00</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xa9\x04\xf1\x00\xa1\x05\xf1\x00</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xa4\x04\xf1\x00\xae\x0a\xf1\x08</span><span class="s">&quot;</span>
	<span class="p">,</span>
	<span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x02\x3a\x05\xf1\xf1</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x3c\x05\xf1\xf1\x59\x01\xf1\x47</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x5a\x01\xf1\x88\x5c\x0a\xf1\x06</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x5d\x0e\xf1\x0a\x64\x5e\xf1\x1c</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xd2\x00\xf1\xcf\xcb\x00\xf1\x01</span><span class="s">&quot;</span>
	<span class="p">,</span>
	<span class="s">&quot;</span><span class="se">\xd3\x02\xd4\x28\xd5\x01\xd0\x02</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xd1\x18\xd2\xc1</span><span class="s">&quot;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">u8</span> <span class="o">*</span><span class="n">tbl_800</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;</span><span class="se">\x0d\x80\xf1\x08\x03\x03\xf1\xc0</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x04\x05\xf1\x02\x05\x00\xf1\xf1</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x06\x00\xf1\x0d\x20\x01\xf1\x00</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x21\x84\xf1\x00\x0d\x00\xf1\x08</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x01\x34\x00\xf1\x00</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x9b\x43\xf1\x00\xa6\x05\xf1\x00</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xa9\x03\xf1\xc0\xa1\x03\xf1\x20</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xa4\x02\xf1\x5a\xae\x0a\xf1\x08</span><span class="s">&quot;</span>
	<span class="p">,</span>
	<span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x02\x3a\x05\xf1\xf1</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x3c\x05\xf1\xf1\x59\x01\xf1\x47</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x5a\x01\xf1\x88\x5c\x0a\xf1\x06</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x5d\x0e\xf1\x0a\x64\x5e\xf1\x1c</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xd2\x00\xf1\xcf\xcb\x00\xf1\x01</span><span class="s">&quot;</span>
	<span class="p">,</span>
	<span class="s">&quot;</span><span class="se">\xd3\x02\xd4\x18\xd5\x21\xd0\x02</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xd1\x10\xd2\x59</span><span class="s">&quot;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">u8</span> <span class="o">*</span><span class="n">tbl_640</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;</span><span class="se">\x0d\x80\xf1\x08\x03\x04\xf1\x04</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x04\x05\xf1\x02\x07\x01\xf1\x7c</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x08\x00\xf1\x0e\x21\x80\xf1\x00</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x0d\x00\xf1\x08\xf0\x00\xf1\x01</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x34\x10\xf1\x10\x3a\x43\xf1\x00</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xa6\x05\xf1\x02\xa9\x04\xf1\x04</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xa7\x02\xf1\x81\xaa\x01\xf1\xe2</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xae\x0c\xf1\x09</span><span class="s">&quot;</span>
	<span class="p">,</span>
	<span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x02\x39\x03\xf1\xfc</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x3b\x04\xf1\x04\x57\x01\xf1\xb6</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x58\x02\xf1\x0d\x5c\x1f\xf1\x19</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x5d\x24\xf1\x1e\x64\x5e\xf1\x1c</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xd2\x00\xf1\x00\xcb\x00\xf1\x01</span><span class="s">&quot;</span>
	<span class="p">,</span>
	<span class="s">&quot;</span><span class="se">\xd3\x02\xd4\x10\xd5\x81\xd0\x02</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xd1\x08\xd2\xe1</span><span class="s">&quot;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">s32</span> <span class="n">tbl_sat</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x1d</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x4d</span><span class="p">,</span> <span class="mh">0x55</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">};</span>
<span class="k">static</span> <span class="n">s32</span> <span class="n">tbl_bright</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">};</span>
<span class="k">static</span> <span class="n">s32</span> <span class="n">tbl_backlight</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">};</span>

<span class="k">static</span> <span class="n">s32</span> <span class="n">tbl_cntr1</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x90</span><span class="p">,</span> <span class="mh">0x98</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0xa8</span><span class="p">,</span> <span class="mh">0xb0</span><span class="p">,</span> <span class="mh">0xb8</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0xc8</span><span class="p">,</span> <span class="mh">0xd0</span><span class="p">,</span> <span class="mh">0xe0</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">};</span>
<span class="k">static</span> <span class="n">s32</span> <span class="n">tbl_cntr2</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x68</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x58</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">};</span>

<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_wbalNL</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x01\x05\x00\xf1\x06</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x3b\x04\xf1\x2a\x47\x10\xf1\x10</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x9d\x3c\xf1\xae\xaf\x10\xf1\x00</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x02\x2f\x91\xf1\x20</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x9c\x91\xf1\x20\x37\x03\xf1\x00</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x9d\xc5\xf1\x0f\xf0\x00\xf1\x00</span><span class="s">&quot;</span><span class="p">;</span>

<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_wbalLL</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x01\x05\x00\xf1\x0c</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x3b\x04\xf1\x2a\x47\x40\xf1\x40</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x9d\x20\xf1\xae\xaf\x10\xf1\x00</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x02\x2f\xd1\xf1\x00</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x9c\xd1\xf1\x00\x37\x03\xf1\x00</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x9d\xc5\xf1\x3f\xf0\x00\xf1\x00</span><span class="s">&quot;</span><span class="p">;</span>

<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_wbalBL</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x01\x05\x00\xf1\x06</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x47\x10\xf1\x30\x9d\x3c\xf1\xae</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xaf\x10\xf1\x00\xf0\x00\xf1\x02</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x2f\x91\xf1\x20\x9c\x91\xf1\x20</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x37\x03\xf1\x00\x9d\xc5\xf1\x2f</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x00</span><span class="s">&quot;</span><span class="p">;</span>

<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_hvflip1</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0xf0</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xf1</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">};</span>

<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_common00</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\x00\x01\x07\x6a\x06\x63\x0d\x6a</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xc0\x00\x10\x10\xc1\x03\xc2\x42</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xd8\x04\x58\x00\x04\x02</span><span class="s">&quot;</span><span class="p">;</span>
<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_common01</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\x0d\x00\xf1\x0b\x0d\x00\xf1\x08</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x35\x00\xf1\x22\x68\x00\xf1\x5d</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x01\x06\x70\xf1\x0e</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x02\xdd\x18\xf1\xe0</span><span class="s">&quot;</span><span class="p">;</span>
<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_common02</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\x05\x01\xf1\x84\x06\x00\xf1\x44</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x07\x00\xf1\xbe\x08\x00\xf1\x1e</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x20\x01\xf1\x03\x21\x84\xf1\x00</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x22\x0d\xf1\x0f\x24\x80\xf1\x00</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x34\x18\xf1\x2d\x35\x00\xf1\x22</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x43\x83\xf1\x83\x59\x00\xf1\xff</span><span class="s">&quot;</span><span class="p">;</span>
<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_common03</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x02\x39\x06\xf1\x8c</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x3a\x06\xf1\x8c\x3b\x03\xf1\xda</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x3c\x05\xf1\x30\x57\x01\xf1\x0c</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x58\x01\xf1\x42\x59\x01\xf1\x0c</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x5a\x01\xf1\x42\x5c\x13\xf1\x0e</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x5d\x17\xf1\x12\x64\x1e\xf1\x1c</span><span class="s">&quot;</span><span class="p">;</span>
<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_common04</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x02\x24\x5f\xf1\x20</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x28\xea\xf1\x02\x5f\x41\xf1\x43</span><span class="s">&quot;</span><span class="p">;</span>
<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_common05</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\x02\x00\xf1\xee\x03\x29\xf1\x1a</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x04\x02\xf1\xa4\x09\x00\xf1\x68</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x0a\x00\xf1\x2a\x0b\x00\xf1\x04</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x0c\x00\xf1\x93\x0d\x00\xf1\x82</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x0e\x00\xf1\x40\x0f\x00\xf1\x5f</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x10\x00\xf1\x4e\x11\x00\xf1\x5b</span><span class="s">&quot;</span><span class="p">;</span>
<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_common06</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\x15\x00\xf1\xc9\x16\x00\xf1\x5e</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x17\x00\xf1\x9d\x18\x00\xf1\x06</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x19\x00\xf1\x89\x1a\x00\xf1\x12</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x1b\x00\xf1\xa1\x1c\x00\xf1\xe4</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x1d\x00\xf1\x7a\x1e\x00\xf1\x64</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xf6\x00\xf1\x5f</span><span class="s">&quot;</span><span class="p">;</span>
<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_common07</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x01\x53\x09\xf1\x03</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x54\x3d\xf1\x1c\x55\x99\xf1\x72</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x56\xc1\xf1\xb1\x57\xd8\xf1\xce</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x58\xe0\xf1\x00\xdc\x0a\xf1\x03</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xdd\x45\xf1\x20\xde\xae\xf1\x82</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xdf\xdc\xf1\xc9\xe0\xf6\xf1\xea</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xe1\xff\xf1\x00</span><span class="s">&quot;</span><span class="p">;</span>
<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_common08</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x01\x80\x00\xf1\x06</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x81\xf6\xf1\x08\x82\xfb\xf1\xf7</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x83\x00\xf1\xfe\xb6\x07\xf1\x03</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xb7\x18\xf1\x0c\x84\xfb\xf1\x06</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x85\xfb\xf1\xf9\x86\x00\xf1\xff</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xb8\x07\xf1\x04\xb9\x16\xf1\x0a</span><span class="s">&quot;</span><span class="p">;</span>
<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_common09</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\x87\xfa\xf1\x05\x88\xfc\xf1\xf9</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x89\x00\xf1\xff\xba\x06\xf1\x03</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xbb\x17\xf1\x09\x8a\xe8\xf1\x14</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x8b\xf7\xf1\xf0\x8c\xfd\xf1\xfa</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x8d\x00\xf1\x00\xbc\x05\xf1\x01</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xbd\x0c\xf1\x08\xbe\x00\xf1\x14</span><span class="s">&quot;</span><span class="p">;</span>
<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_common10</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\x8e\xea\xf1\x13\x8f\xf7\xf1\xf2</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x90\xfd\xf1\xfa\x91\x00\xf1\x00</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xbf\x05\xf1\x01\xc0\x0a\xf1\x08</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\xc1\x00\xf1\x0c\x92\xed\xf1\x0f</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x93\xf9\xf1\xf4\x94\xfe\xf1\xfb</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x95\x00\xf1\x00\xc2\x04\xf1\x01</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xc3\x0a\xf1\x07\xc4\x00\xf1\x10</span><span class="s">&quot;</span><span class="p">;</span>
<span class="k">static</span> <span class="n">u8</span> <span class="n">dat_common11</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">&quot;</span><span class="se">\xf0\x00\xf1\x01\x05\x00\xf1\x06</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x25\x00\xf1\x55\x34\x10\xf1\x10</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\x35\xf0\xf1\x10\x3a\x02\xf1\x03</span><span class="s">&quot;</span> <span class="s">&quot;</span><span class="se">\x3b\x04\xf1\x2a\x9b\x43\xf1\x00</span><span class="s">&quot;</span>
	<span class="s">&quot;</span><span class="se">\xa4\x03\xf1\xc0\xa7\x02\xf1\x81</span><span class="s">&quot;</span><span class="p">;</span>

<span class="k">static</span> <span class="kt">int</span>  <span class="n">mi1320_init_at_startup</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span>  <span class="n">mi1320_configure_alt</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span>  <span class="n">mi1320_init_pre_alt</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span>  <span class="n">mi1320_init_post_alt</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">mi1320_post_unset_alt</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span>  <span class="n">mi1320_sensor_settings</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span>  <span class="n">mi1320_camera_settings</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">);</span>
<span class="cm">/*==========================================================================*/</span>

<span class="kt">void</span> <span class="nf">mi1320_init_settings</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>

	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">backlight</span>  <span class="o">=</span>  <span class="mi">0</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">brightness</span> <span class="o">=</span>  <span class="mi">0</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">sharpness</span>  <span class="o">=</span>  <span class="mi">6</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">contrast</span>   <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">gamma</span>      <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">hue</span>        <span class="o">=</span>  <span class="mi">0</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">saturation</span> <span class="o">=</span>  <span class="mi">6</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">whitebal</span>   <span class="o">=</span>  <span class="mi">0</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">mirror</span>     <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">flip</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">AC50Hz</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">backlight</span>  <span class="o">=</span>  <span class="mi">2</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">brightness</span> <span class="o">=</span>  <span class="mi">8</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">sharpness</span>  <span class="o">=</span>  <span class="mi">7</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">contrast</span>   <span class="o">=</span>  <span class="mi">0</span><span class="p">;</span> <span class="cm">/* 10 but not working with this driver */</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">gamma</span>      <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">hue</span>        <span class="o">=</span>  <span class="mi">5</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">saturation</span> <span class="o">=</span>  <span class="mi">8</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">whitebal</span>   <span class="o">=</span>  <span class="mi">2</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">mirror</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">flip</span>       <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">AC50Hz</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">dev_camera_settings</span> <span class="o">=</span> <span class="n">mi1320_camera_settings</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">dev_init_at_startup</span> <span class="o">=</span> <span class="n">mi1320_init_at_startup</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">dev_configure_alt</span>   <span class="o">=</span> <span class="n">mi1320_configure_alt</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">dev_init_pre_alt</span>    <span class="o">=</span> <span class="n">mi1320_init_pre_alt</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">dev_post_unset_alt</span>  <span class="o">=</span> <span class="n">mi1320_post_unset_alt</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*==========================================================================*/</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">common</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">s32</span> <span class="n">n</span><span class="p">;</span> <span class="cm">/* reserved for FETCH functions */</span>

	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="n">dat_common00</span><span class="p">);</span>
	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x0041</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="n">dat_common01</span><span class="p">);</span>
	<span class="n">n</span> <span class="o">=</span> <span class="n">fetch_validx</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">tbl_common</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">tbl_common</span><span class="p">));</span>
	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="n">dat_common02</span><span class="p">);</span>
	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="n">dat_common03</span><span class="p">);</span>
	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="n">dat_common04</span><span class="p">);</span>
	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="n">dat_common05</span><span class="p">);</span>
	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="n">dat_common06</span><span class="p">);</span>
	<span class="n">keep_on_fetching_validx</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">tbl_common</span><span class="p">,</span>
					<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">tbl_common</span><span class="p">),</span> <span class="n">n</span><span class="p">);</span>
	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="n">dat_common07</span><span class="p">);</span>
	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="n">dat_common08</span><span class="p">);</span>
	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="n">dat_common09</span><span class="p">);</span>
	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="n">dat_common10</span><span class="p">);</span>
	<span class="n">keep_on_fetching_validx</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">tbl_common</span><span class="p">,</span>
					<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">tbl_common</span><span class="p">),</span> <span class="n">n</span><span class="p">);</span>
	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">dat_common11</span><span class="p">);</span>
	<span class="n">keep_on_fetching_validx</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">tbl_common</span><span class="p">,</span>
					<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">tbl_common</span><span class="p">),</span> <span class="n">n</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">mi1320_init_at_startup</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">fetch_validx</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">tbl_init_at_startup</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">tbl_init_at_startup</span><span class="p">));</span>

	<span class="n">common</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>

<span class="cm">/*	ctrl_out(gspca_dev, 0x40, 11, 0x0000, 0x0000, 0, NULL); */</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">mi1320_init_pre_alt</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>

	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">mirrorMask</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">backlight</span>  <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">brightness</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">sharpness</span>  <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">contrast</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">saturation</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">gamma</span>    <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">hue</span>      <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">whitebal</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">mirror</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">flip</span>     <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">AC50Hz</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

	<span class="n">common</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>

	<span class="n">mi1320_sensor_settings</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>

	<span class="n">mi1320_init_post_alt</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">mi1320_init_post_alt</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">mi1320_camera_settings</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">mi1320_sensor_settings</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">s32</span> <span class="n">reso</span> <span class="o">=</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">cam</span><span class="p">.</span><span class="n">cam_mode</span><span class="p">[(</span><span class="n">s32</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">curr_mode</span><span class="p">].</span><span class="n">priv</span><span class="p">;</span>

	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mh">0x0001</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">fetch_validx</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">tbl_sensor_settings_common</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">tbl_sensor_settings_common</span><span class="p">));</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">reso</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">IMAGE_1280</span>:
		<span class="n">fetch_validx</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">tbl_sensor_settings_1280</span><span class="p">,</span>
					<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">tbl_sensor_settings_1280</span><span class="p">));</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="n">tbl_1280</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">tbl_1280</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">tbl_1280</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
		<span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="n">IMAGE_800</span>:
		<span class="n">fetch_validx</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">tbl_sensor_settings_800</span><span class="p">,</span>
					<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">tbl_sensor_settings_800</span><span class="p">));</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="n">tbl_800</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">tbl_800</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">tbl_800</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
		<span class="k">break</span><span class="p">;</span>

	<span class="nl">default:</span>
		<span class="n">fetch_validx</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">tbl_sensor_settings_640</span><span class="p">,</span>
					<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">tbl_sensor_settings_640</span><span class="p">));</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="n">tbl_640</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">tbl_640</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">tbl_640</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">mi1320_configure_alt</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">s32</span> <span class="n">reso</span> <span class="o">=</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">cam</span><span class="p">.</span><span class="n">cam_mode</span><span class="p">[(</span><span class="n">s32</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">curr_mode</span><span class="p">].</span><span class="n">priv</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">reso</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">IMAGE_640</span>:
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">alt</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="n">IMAGE_800</span>:
	<span class="k">case</span> <span class="n">IMAGE_1280</span>:
		<span class="n">gspca_dev</span><span class="o">-&gt;</span><span class="n">alt</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">mi1320_camera_settings</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">sd</span> <span class="o">*</span><span class="p">)</span> <span class="n">gspca_dev</span><span class="p">;</span>

	<span class="n">s32</span> <span class="n">backlight</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">backlight</span><span class="p">;</span>
	<span class="n">s32</span> <span class="n">bright</span> <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">brightness</span><span class="p">;</span>
	<span class="n">s32</span> <span class="n">sharp</span>  <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">sharpness</span><span class="p">;</span>
	<span class="n">s32</span> <span class="n">cntr</span>   <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">contrast</span><span class="p">;</span>
	<span class="n">s32</span> <span class="n">gam</span>	   <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">gamma</span><span class="p">;</span>
	<span class="n">s32</span> <span class="n">hue</span>    <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">hue</span><span class="p">;</span>
	<span class="n">s32</span> <span class="n">sat</span>	   <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">saturation</span><span class="p">;</span>
	<span class="n">s32</span> <span class="n">wbal</span>   <span class="o">=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">whitebal</span><span class="p">;</span>
	<span class="n">s32</span> <span class="n">mirror</span> <span class="o">=</span> <span class="p">(((</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">mirror</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">^</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">mirrorMask</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">s32</span> <span class="n">flip</span>   <span class="o">=</span> <span class="p">(((</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">flip</span>   <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">^</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">mirrorMask</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">s32</span> <span class="n">freq</span>   <span class="o">=</span> <span class="p">(</span><span class="n">sd</span><span class="o">-&gt;</span><span class="n">vcur</span><span class="p">.</span><span class="n">AC50Hz</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">s32</span> <span class="n">i</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">freq</span> <span class="o">!=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">AC50Hz</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">AC50Hz</span> <span class="o">=</span> <span class="n">freq</span><span class="p">;</span>

		<span class="n">freq</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">freq</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba02</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span>       <span class="p">,</span> <span class="mh">0x005b</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba01</span> <span class="o">+</span> <span class="n">freq</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">wbal</span> <span class="o">!=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">whitebal</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">whitebal</span> <span class="o">=</span> <span class="n">wbal</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">wbal</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">wbal</span> <span class="o">&gt;</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">whitebal</span><span class="p">)</span>
			<span class="n">wbal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">wbal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* Normal light */</span>
				<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
						<span class="mh">0x0010</span><span class="p">,</span> <span class="mh">0x0010</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
				<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
						<span class="mh">0x0003</span><span class="p">,</span> <span class="mh">0x00c1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
				<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
						<span class="mh">0x0042</span><span class="p">,</span> <span class="mh">0x00c2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
				<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span>
						<span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="n">dat_wbalNL</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">wbal</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* Low light */</span>
				<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
						<span class="mh">0x0010</span><span class="p">,</span> <span class="mh">0x0010</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
				<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
						<span class="mh">0x0004</span><span class="p">,</span> <span class="mh">0x00c1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
				<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
						<span class="mh">0x0043</span><span class="p">,</span> <span class="mh">0x00c2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
				<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span>
						<span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="n">dat_wbalLL</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">wbal</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* Back light */</span>
				<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
						<span class="mh">0x0010</span><span class="p">,</span> <span class="mh">0x0010</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
				<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
						<span class="mh">0x0003</span><span class="p">,</span> <span class="mh">0x00c1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
				<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
						<span class="mh">0x0042</span><span class="p">,</span> <span class="mh">0x00c2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
				<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span>
						<span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="n">dat_wbalBL</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">bright</span> <span class="o">!=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">brightness</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">brightness</span> <span class="o">=</span> <span class="n">bright</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">bright</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">bright</span> <span class="o">&gt;</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">brightness</span><span class="p">)</span>
			<span class="n">bright</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="n">bright</span> <span class="o">=</span> <span class="n">tbl_bright</span><span class="p">[</span><span class="n">bright</span><span class="p">];</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba01</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span> <span class="o">+</span> <span class="n">bright</span><span class="p">,</span> <span class="mh">0x0034</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span> <span class="o">+</span> <span class="n">bright</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">sat</span> <span class="o">!=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">saturation</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">saturation</span> <span class="o">=</span> <span class="n">sat</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">sat</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">sat</span> <span class="o">&gt;</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">saturation</span><span class="p">)</span>
			<span class="n">sat</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="n">sat</span> <span class="o">=</span> <span class="n">tbl_sat</span><span class="p">[</span><span class="n">sat</span><span class="p">];</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba01</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span>      <span class="p">,</span> <span class="mh">0x0025</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span> <span class="o">+</span> <span class="n">sat</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">sharp</span> <span class="o">!=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">sharpness</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">sharpness</span> <span class="o">=</span> <span class="n">sharp</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">sharp</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">sharp</span> <span class="o">&gt;</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">sharpness</span><span class="p">)</span>
			<span class="n">sharp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba01</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span>        <span class="p">,</span> <span class="mh">0x0005</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span> <span class="o">+</span> <span class="n">sharp</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">hue</span> <span class="o">!=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">hue</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* 0=normal  1=NB  2=&quot;sepia&quot;  3=negative  4=other  5=other2 */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">hue</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">hue</span> <span class="o">&gt;</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">hue</span><span class="p">)</span>
			<span class="n">hue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">hue</span> <span class="o">==</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">hue</span><span class="p">)</span>
			<span class="n">sd</span><span class="o">-&gt;</span><span class="n">swapRB</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="n">sd</span><span class="o">-&gt;</span><span class="n">swapRB</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba01</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba70</span><span class="p">,</span> <span class="mh">0x00e2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span> <span class="o">+</span> <span class="n">hue</span> <span class="o">*</span> <span class="p">(</span><span class="n">hue</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">),</span> <span class="mh">0x00f1</span><span class="p">,</span>
							<span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">backlight</span> <span class="o">!=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">backlight</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">backlight</span> <span class="o">=</span> <span class="n">backlight</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">backlight</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">backlight</span> <span class="o">&gt;</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">backlight</span><span class="p">)</span>
			<span class="n">backlight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="n">backlight</span> <span class="o">=</span> <span class="n">tbl_backlight</span><span class="p">[</span><span class="n">backlight</span><span class="p">];</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
			<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba01</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
			<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba74</span><span class="p">,</span> <span class="mh">0x0006</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
			<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba80</span> <span class="o">+</span> <span class="n">backlight</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span>
								<span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">hue</span> <span class="o">!=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">hue</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">hue</span> <span class="o">=</span> <span class="n">hue</span><span class="p">;</span>

		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba01</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba70</span><span class="p">,</span> <span class="mh">0x00e2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span> <span class="o">+</span> <span class="n">hue</span> <span class="o">*</span> <span class="p">(</span><span class="n">hue</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">),</span> <span class="mh">0x00f1</span><span class="p">,</span>
							<span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">mirror</span> <span class="o">!=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">mirror</span> <span class="o">||</span> <span class="n">flip</span> <span class="o">!=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">flip</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">dat_hvflip2</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xf1</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">};</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">mirror</span> <span class="o">=</span> <span class="n">mirror</span><span class="p">;</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">flip</span> <span class="o">=</span> <span class="n">flip</span><span class="p">;</span>

		<span class="n">dat_hvflip2</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">flip</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">mirror</span><span class="p">;</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">dat_hvflip1</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">dat_hvflip2</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">gam</span> <span class="o">!=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">gamma</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="n">gam</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">gam</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">gam</span> <span class="o">&gt;</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">gamma</span><span class="p">)</span>
			<span class="n">gam</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="n">gam</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">gam</span><span class="p">;</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba01</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba04</span>      <span class="p">,</span> <span class="mh">0x003b</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba02</span> <span class="o">+</span> <span class="n">gam</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">cntr</span> <span class="o">!=</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">contrast</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">sd</span><span class="o">-&gt;</span><span class="n">vold</span><span class="p">.</span><span class="n">contrast</span> <span class="o">=</span> <span class="n">cntr</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">cntr</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">cntr</span> <span class="o">&gt;</span> <span class="n">sd</span><span class="o">-&gt;</span><span class="n">vmax</span><span class="p">.</span><span class="n">contrast</span><span class="p">)</span>
			<span class="n">cntr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span><span class="p">,</span> <span class="mh">0x00f0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba01</span><span class="p">,</span> <span class="mh">0x00f1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span> <span class="o">+</span> <span class="n">tbl_cntr1</span><span class="p">[</span><span class="n">cntr</span><span class="p">],</span> <span class="mh">0x0035</span><span class="p">,</span>
							<span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xba00</span> <span class="o">+</span> <span class="n">tbl_cntr2</span><span class="p">[</span><span class="n">cntr</span><span class="p">],</span> <span class="mh">0x00f1</span><span class="p">,</span>
							<span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">mi1320_post_unset_alt</span><span class="p">(</span><span class="k">struct</span> <span class="n">gspca_dev</span> <span class="o">*</span><span class="n">gspca_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">ctrl_out</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">fetch_validx</span><span class="p">(</span><span class="n">gspca_dev</span><span class="p">,</span> <span class="n">tbl_post_unset_alt</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">tbl_post_unset_alt</span><span class="p">));</span>
<span class="p">}</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
