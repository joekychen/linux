<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › media › video › bt8xx › bttv-cards.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>bttv-cards.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>

<span class="cm">    bttv-cards.c</span>

<span class="cm">    this file has configuration informations - card-specific stuff</span>
<span class="cm">    like the big tvcards array for the most part</span>

<span class="cm">    Copyright (C) 1996,97,98 Ralph  Metzler (rjkm@thp.uni-koeln.de)</span>
<span class="cm">			   &amp; Marcus Metzler (mocm@thp.uni-koeln.de)</span>
<span class="cm">    (c) 1999-2001 Gerd Knorr &lt;kraxel@goldbach.in-berlin.de&gt;</span>

<span class="cm">    This program is free software; you can redistribute it and/or modify</span>
<span class="cm">    it under the terms of the GNU General Public License as published by</span>
<span class="cm">    the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm">    (at your option) any later version.</span>

<span class="cm">    This program is distributed in the hope that it will be useful,</span>
<span class="cm">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm">    GNU General Public License for more details.</span>

<span class="cm">    You should have received a copy of the GNU General Public License</span>
<span class="cm">    along with this program; if not, write to the Free Software</span>
<span class="cm">    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>

<span class="cm">*/</span>

<span class="cp">#define pr_fmt(fmt) KBUILD_MODNAME &quot;: &quot; fmt</span>

<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/kmod.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/pci.h&gt;</span>
<span class="cp">#include &lt;linux/vmalloc.h&gt;</span>
<span class="cp">#include &lt;linux/firmware.h&gt;</span>
<span class="cp">#include &lt;net/checksum.h&gt;</span>

<span class="cp">#include &lt;asm/unaligned.h&gt;</span>
<span class="cp">#include &lt;asm/io.h&gt;</span>

<span class="cp">#include &quot;bttvp.h&quot;</span>
<span class="cp">#include &lt;media/v4l2-common.h&gt;</span>
<span class="cp">#include &lt;media/tvaudio.h&gt;</span>
<span class="cp">#include &quot;bttv-audio-hook.h&quot;</span>

<span class="cm">/* fwd decl */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">boot_msp34xx</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pin</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">hauppauge_eeprom</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">avermedia_eeprom</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">osprey_eeprom</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">ee</span><span class="p">[</span><span class="mi">256</span><span class="p">]);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">modtec_eeprom</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">init_PXC200</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">init_RTV24</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">rv605_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">eagle_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">xguard_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">ivc120_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">gvc1100_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">PXC200_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">picolo_tetra_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">picolo_tetra_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">tibetCS16_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">tibetCS16_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">kodicom4400r_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">kodicom4400r_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">sigmaSLC_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">sigmaSQ_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">geovision_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">phytec_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">gv800s_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">gv800s_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">td3116_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">terratec_active_radio_upgrade</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">tea5757_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">tea5757_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">identify_by_eeprom</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span>
			       <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">eeprom_data</span><span class="p">[</span><span class="mi">256</span><span class="p">]);</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">__devinit</span> <span class="n">pvr_boot</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">);</span>

<span class="cm">/* config variables */</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">triton1</span><span class="p">;</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vsfx</span><span class="p">;</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">latency</span> <span class="o">=</span> <span class="n">UNSET</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">no_overlay</span><span class="o">=-</span><span class="mi">1</span><span class="p">;</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">card</span><span class="p">[</span><span class="n">BTTV_MAX</span><span class="p">]</span>   <span class="o">=</span> <span class="p">{</span> <span class="p">[</span> <span class="mi">0</span> <span class="p">...</span> <span class="p">(</span><span class="n">BTTV_MAX</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="n">UNSET</span> <span class="p">};</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pll</span><span class="p">[</span><span class="n">BTTV_MAX</span><span class="p">]</span>    <span class="o">=</span> <span class="p">{</span> <span class="p">[</span> <span class="mi">0</span> <span class="p">...</span> <span class="p">(</span><span class="n">BTTV_MAX</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="n">UNSET</span> <span class="p">};</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tuner</span><span class="p">[</span><span class="n">BTTV_MAX</span><span class="p">]</span>  <span class="o">=</span> <span class="p">{</span> <span class="p">[</span> <span class="mi">0</span> <span class="p">...</span> <span class="p">(</span><span class="n">BTTV_MAX</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="n">UNSET</span> <span class="p">};</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">svhs</span><span class="p">[</span><span class="n">BTTV_MAX</span><span class="p">]</span>   <span class="o">=</span> <span class="p">{</span> <span class="p">[</span> <span class="mi">0</span> <span class="p">...</span> <span class="p">(</span><span class="n">BTTV_MAX</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="n">UNSET</span> <span class="p">};</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">remote</span><span class="p">[</span><span class="n">BTTV_MAX</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span> <span class="mi">0</span> <span class="p">...</span> <span class="p">(</span><span class="n">BTTV_MAX</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="n">UNSET</span> <span class="p">};</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">audiodev</span><span class="p">[</span><span class="n">BTTV_MAX</span><span class="p">];</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">saa6588</span><span class="p">[</span><span class="n">BTTV_MAX</span><span class="p">];</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">bttv</span>  <span class="o">*</span><span class="n">master</span><span class="p">[</span><span class="n">BTTV_MAX</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span> <span class="mi">0</span> <span class="p">...</span> <span class="p">(</span><span class="n">BTTV_MAX</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="nb">NULL</span> <span class="p">};</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">autoload</span> <span class="o">=</span> <span class="n">UNSET</span><span class="p">;</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">gpiomask</span> <span class="o">=</span> <span class="n">UNSET</span><span class="p">;</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">audioall</span> <span class="o">=</span> <span class="n">UNSET</span><span class="p">;</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">audiomux</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span> <span class="mi">0</span> <span class="p">...</span> <span class="mi">4</span> <span class="p">]</span> <span class="o">=</span> <span class="n">UNSET</span> <span class="p">};</span>

<span class="cm">/* insmod options */</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">triton1</span><span class="p">,</span>    <span class="kt">int</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">vsfx</span><span class="p">,</span>       <span class="kt">int</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">no_overlay</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">latency</span><span class="p">,</span>    <span class="kt">int</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">gpiomask</span><span class="p">,</span>   <span class="kt">int</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">audioall</span><span class="p">,</span>   <span class="kt">int</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">autoload</span><span class="p">,</span>   <span class="kt">int</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>

<span class="n">module_param_array</span><span class="p">(</span><span class="n">card</span><span class="p">,</span>     <span class="kt">int</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param_array</span><span class="p">(</span><span class="n">pll</span><span class="p">,</span>      <span class="kt">int</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param_array</span><span class="p">(</span><span class="n">tuner</span><span class="p">,</span>    <span class="kt">int</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param_array</span><span class="p">(</span><span class="n">svhs</span><span class="p">,</span>     <span class="kt">int</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param_array</span><span class="p">(</span><span class="n">remote</span><span class="p">,</span>   <span class="kt">int</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param_array</span><span class="p">(</span><span class="n">audiodev</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param_array</span><span class="p">(</span><span class="n">audiomux</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>

<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">triton1</span><span class="p">,</span><span class="s">&quot;set ETBF pci config bit &quot;</span>
		 <span class="s">&quot;[enable bug compatibility for triton1 + others]&quot;</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">vsfx</span><span class="p">,</span><span class="s">&quot;set VSFX pci config bit &quot;</span>
		 <span class="s">&quot;[yet another chipset flaw workaround]&quot;</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">latency</span><span class="p">,</span><span class="s">&quot;pci latency timer&quot;</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">card</span><span class="p">,</span><span class="s">&quot;specify TV/grabber card model, see CARDLIST file for a list&quot;</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">pll</span><span class="p">,</span><span class="s">&quot;specify installed crystal (0=none, 28=28 MHz, 35=35 MHz)&quot;</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">tuner</span><span class="p">,</span><span class="s">&quot;specify installed tuner type&quot;</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">autoload</span><span class="p">,</span> <span class="s">&quot;obsolete option, please do not use anymore&quot;</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">audiodev</span><span class="p">,</span> <span class="s">&quot;specify audio device:</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;</span><span class="se">\t\t</span><span class="s">-1 = no audio</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;</span><span class="se">\t\t</span><span class="s"> 0 = autodetect (default)</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;</span><span class="se">\t\t</span><span class="s"> 1 = msp3400</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;</span><span class="se">\t\t</span><span class="s"> 2 = tda7432</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;</span><span class="se">\t\t</span><span class="s"> 3 = tvaudio&quot;</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">saa6588</span><span class="p">,</span> <span class="s">&quot;if 1, then load the saa6588 RDS module, default (0) is to use the card definition.&quot;</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">no_overlay</span><span class="p">,</span><span class="s">&quot;allow override overlay default (0 disables, 1 enables)&quot;</span>
		<span class="s">&quot; [some VIA/SIS chipsets are known to have problem with overlay]&quot;</span><span class="p">);</span>

<span class="cm">/* ----------------------------------------------------------------------- */</span>
<span class="cm">/* list of card IDs for bt878+ cards                                       */</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">CARD</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="n">id</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">cardnr</span><span class="p">;</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cards</span><span class="p">[]</span> <span class="n">__devinitdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="mh">0x13eb0070</span><span class="p">,</span> <span class="n">BTTV_BOARD_HAUPPAUGE878</span><span class="p">,</span>  <span class="s">&quot;Hauppauge WinTV&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x39000070</span><span class="p">,</span> <span class="n">BTTV_BOARD_HAUPPAUGE878</span><span class="p">,</span>  <span class="s">&quot;Hauppauge WinTV-D&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x45000070</span><span class="p">,</span> <span class="n">BTTV_BOARD_HAUPPAUGEPVR</span><span class="p">,</span>  <span class="s">&quot;Hauppauge WinTV/PVR&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xff000070</span><span class="p">,</span> <span class="n">BTTV_BOARD_OSPREY1x0</span><span class="p">,</span>     <span class="s">&quot;Osprey-100&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xff010070</span><span class="p">,</span> <span class="n">BTTV_BOARD_OSPREY2x0_SVID</span><span class="p">,</span><span class="s">&quot;Osprey-200&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xff020070</span><span class="p">,</span> <span class="n">BTTV_BOARD_OSPREY500</span><span class="p">,</span>     <span class="s">&quot;Osprey-500&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xff030070</span><span class="p">,</span> <span class="n">BTTV_BOARD_OSPREY2000</span><span class="p">,</span>    <span class="s">&quot;Osprey-2000&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xff040070</span><span class="p">,</span> <span class="n">BTTV_BOARD_OSPREY540</span><span class="p">,</span>     <span class="s">&quot;Osprey-540&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xff070070</span><span class="p">,</span> <span class="n">BTTV_BOARD_OSPREY440</span><span class="p">,</span>     <span class="s">&quot;Osprey-440&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x00011002</span><span class="p">,</span> <span class="n">BTTV_BOARD_ATI_TVWONDER</span><span class="p">,</span>  <span class="s">&quot;ATI TV Wonder&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x00031002</span><span class="p">,</span> <span class="n">BTTV_BOARD_ATI_TVWONDERVE</span><span class="p">,</span><span class="s">&quot;ATI TV Wonder/VE&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x6606107d</span><span class="p">,</span> <span class="n">BTTV_BOARD_WINFAST2000</span><span class="p">,</span>   <span class="s">&quot;Leadtek WinFast TV 2000&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x6607107d</span><span class="p">,</span> <span class="n">BTTV_BOARD_WINFASTVC100</span><span class="p">,</span>  <span class="s">&quot;Leadtek WinFast VC 100&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x6609107d</span><span class="p">,</span> <span class="n">BTTV_BOARD_WINFAST2000</span><span class="p">,</span>   <span class="s">&quot;Leadtek TV 2000 XP&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x263610b4</span><span class="p">,</span> <span class="n">BTTV_BOARD_STB2</span><span class="p">,</span>          <span class="s">&quot;STB TV PCI FM, Gateway P/N 6000704&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x264510b4</span><span class="p">,</span> <span class="n">BTTV_BOARD_STB2</span><span class="p">,</span>          <span class="s">&quot;STB TV PCI FM, Gateway P/N 6000704&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x402010fc</span><span class="p">,</span> <span class="n">BTTV_BOARD_GVBCTV3PCI</span><span class="p">,</span>    <span class="s">&quot;I-O Data Co. GV-BCTV3/PCI&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x405010fc</span><span class="p">,</span> <span class="n">BTTV_BOARD_GVBCTV4PCI</span><span class="p">,</span>    <span class="s">&quot;I-O Data Co. GV-BCTV4/PCI&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x407010fc</span><span class="p">,</span> <span class="n">BTTV_BOARD_GVBCTV5PCI</span><span class="p">,</span>    <span class="s">&quot;I-O Data Co. GV-BCTV5/PCI&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xd01810fc</span><span class="p">,</span> <span class="n">BTTV_BOARD_GVBCTV5PCI</span><span class="p">,</span>    <span class="s">&quot;I-O Data Co. GV-BCTV5/PCI&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x001211bd</span><span class="p">,</span> <span class="n">BTTV_BOARD_PINNACLE</span><span class="p">,</span>      <span class="s">&quot;Pinnacle PCTV&quot;</span> <span class="p">},</span>
	<span class="cm">/* some cards ship with byteswapped IDs ... */</span>
	<span class="p">{</span> <span class="mh">0x1200bd11</span><span class="p">,</span> <span class="n">BTTV_BOARD_PINNACLE</span><span class="p">,</span>      <span class="s">&quot;Pinnacle PCTV [bswap]&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xff00bd11</span><span class="p">,</span> <span class="n">BTTV_BOARD_PINNACLE</span><span class="p">,</span>      <span class="s">&quot;Pinnacle PCTV [bswap]&quot;</span> <span class="p">},</span>
	<span class="cm">/* this seems to happen as well ... */</span>
	<span class="p">{</span> <span class="mh">0xff1211bd</span><span class="p">,</span> <span class="n">BTTV_BOARD_PINNACLE</span><span class="p">,</span>      <span class="s">&quot;Pinnacle PCTV&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x3000121a</span><span class="p">,</span> <span class="n">BTTV_BOARD_VOODOOTV_200</span><span class="p">,</span>  <span class="s">&quot;3Dfx VoodooTV 200&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x263710b4</span><span class="p">,</span> <span class="n">BTTV_BOARD_VOODOOTV_FM</span><span class="p">,</span>   <span class="s">&quot;3Dfx VoodooTV FM&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x3060121a</span><span class="p">,</span> <span class="n">BTTV_BOARD_STB2</span><span class="p">,</span>	  <span class="s">&quot;3Dfx VoodooTV 100/ STB OEM&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x3000144f</span><span class="p">,</span> <span class="n">BTTV_BOARD_MAGICTVIEW063</span><span class="p">,</span> <span class="s">&quot;(Askey Magic/others) TView99 CPH06x&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa005144f</span><span class="p">,</span> <span class="n">BTTV_BOARD_MAGICTVIEW063</span><span class="p">,</span> <span class="s">&quot;CPH06X TView99-Card&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x3002144f</span><span class="p">,</span> <span class="n">BTTV_BOARD_MAGICTVIEW061</span><span class="p">,</span> <span class="s">&quot;(Askey Magic/others) TView99 CPH05x&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x3005144f</span><span class="p">,</span> <span class="n">BTTV_BOARD_MAGICTVIEW061</span><span class="p">,</span> <span class="s">&quot;(Askey Magic/others) TView99 CPH061/06L (T1/LC)&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x5000144f</span><span class="p">,</span> <span class="n">BTTV_BOARD_MAGICTVIEW061</span><span class="p">,</span> <span class="s">&quot;Askey CPH050&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x300014ff</span><span class="p">,</span> <span class="n">BTTV_BOARD_MAGICTVIEW061</span><span class="p">,</span> <span class="s">&quot;TView 99 (CPH061)&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x300214ff</span><span class="p">,</span> <span class="n">BTTV_BOARD_PHOEBE_TVMAS</span><span class="p">,</span>  <span class="s">&quot;Phoebe TV Master (CPH060)&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x00011461</span><span class="p">,</span> <span class="n">BTTV_BOARD_AVPHONE98</span><span class="p">,</span>     <span class="s">&quot;AVerMedia TVPhone98&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x00021461</span><span class="p">,</span> <span class="n">BTTV_BOARD_AVERMEDIA98</span><span class="p">,</span>   <span class="s">&quot;AVermedia TVCapture 98&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x00031461</span><span class="p">,</span> <span class="n">BTTV_BOARD_AVPHONE98</span><span class="p">,</span>     <span class="s">&quot;AVerMedia TVPhone98&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x00041461</span><span class="p">,</span> <span class="n">BTTV_BOARD_AVERMEDIA98</span><span class="p">,</span>   <span class="s">&quot;AVerMedia TVCapture 98&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x03001461</span><span class="p">,</span> <span class="n">BTTV_BOARD_AVERMEDIA98</span><span class="p">,</span>   <span class="s">&quot;VDOMATE TV TUNER CARD&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x1117153b</span><span class="p">,</span> <span class="n">BTTV_BOARD_TERRATVALUE</span><span class="p">,</span>   <span class="s">&quot;Terratec TValue (Philips PAL B/G)&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x1118153b</span><span class="p">,</span> <span class="n">BTTV_BOARD_TERRATVALUE</span><span class="p">,</span>   <span class="s">&quot;Terratec TValue (Temic PAL B/G)&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x1119153b</span><span class="p">,</span> <span class="n">BTTV_BOARD_TERRATVALUE</span><span class="p">,</span>   <span class="s">&quot;Terratec TValue (Philips PAL I)&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x111a153b</span><span class="p">,</span> <span class="n">BTTV_BOARD_TERRATVALUE</span><span class="p">,</span>   <span class="s">&quot;Terratec TValue (Temic PAL I)&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x1123153b</span><span class="p">,</span> <span class="n">BTTV_BOARD_TERRATVRADIO</span><span class="p">,</span>  <span class="s">&quot;Terratec TV Radio+&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x1127153b</span><span class="p">,</span> <span class="n">BTTV_BOARD_TERRATV</span><span class="p">,</span>       <span class="s">&quot;Terratec TV+ (V1.05)&quot;</span>    <span class="p">},</span>
	<span class="cm">/* clashes with FlyVideo</span>
<span class="cm">	 *{ 0x18521852, BTTV_BOARD_TERRATV,     &quot;Terratec TV+ (V1.10)&quot;    }, */</span>
	<span class="p">{</span> <span class="mh">0x1134153b</span><span class="p">,</span> <span class="n">BTTV_BOARD_TERRATVALUE</span><span class="p">,</span>   <span class="s">&quot;Terratec TValue (LR102)&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x1135153b</span><span class="p">,</span> <span class="n">BTTV_BOARD_TERRATVALUER</span><span class="p">,</span>  <span class="s">&quot;Terratec TValue Radio&quot;</span> <span class="p">},</span> <span class="cm">/* LR102 */</span>
	<span class="p">{</span> <span class="mh">0x5018153b</span><span class="p">,</span> <span class="n">BTTV_BOARD_TERRATVALUE</span><span class="p">,</span>   <span class="s">&quot;Terratec TValue&quot;</span> <span class="p">},</span>       <span class="cm">/* ?? */</span>
	<span class="p">{</span> <span class="mh">0xff3b153b</span><span class="p">,</span> <span class="n">BTTV_BOARD_TERRATVALUER</span><span class="p">,</span>  <span class="s">&quot;Terratec TValue Radio&quot;</span> <span class="p">},</span> <span class="cm">/* ?? */</span>

	<span class="p">{</span> <span class="mh">0x400015b0</span><span class="p">,</span> <span class="n">BTTV_BOARD_ZOLTRIX_GENIE</span><span class="p">,</span> <span class="s">&quot;Zoltrix Genie TV&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x400a15b0</span><span class="p">,</span> <span class="n">BTTV_BOARD_ZOLTRIX_GENIE</span><span class="p">,</span> <span class="s">&quot;Zoltrix Genie TV&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x400d15b0</span><span class="p">,</span> <span class="n">BTTV_BOARD_ZOLTRIX_GENIE</span><span class="p">,</span> <span class="s">&quot;Zoltrix Genie TV / Radio&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x401015b0</span><span class="p">,</span> <span class="n">BTTV_BOARD_ZOLTRIX_GENIE</span><span class="p">,</span> <span class="s">&quot;Zoltrix Genie TV / Radio&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x401615b0</span><span class="p">,</span> <span class="n">BTTV_BOARD_ZOLTRIX_GENIE</span><span class="p">,</span> <span class="s">&quot;Zoltrix Genie TV / Radio&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x1430aa00</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV143</span><span class="p">,</span>         <span class="s">&quot;Provideo PV143A&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x1431aa00</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV143</span><span class="p">,</span>         <span class="s">&quot;Provideo PV143B&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x1432aa00</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV143</span><span class="p">,</span>         <span class="s">&quot;Provideo PV143C&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x1433aa00</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV143</span><span class="p">,</span>         <span class="s">&quot;Provideo PV143D&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x1433aa03</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV143</span><span class="p">,</span>         <span class="s">&quot;Security Eyes&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x1460aa00</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV150</span><span class="p">,</span>         <span class="s">&quot;Provideo PV150A-1&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x1461aa01</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV150</span><span class="p">,</span>         <span class="s">&quot;Provideo PV150A-2&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x1462aa02</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV150</span><span class="p">,</span>         <span class="s">&quot;Provideo PV150A-3&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x1463aa03</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV150</span><span class="p">,</span>         <span class="s">&quot;Provideo PV150A-4&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x1464aa04</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV150</span><span class="p">,</span>         <span class="s">&quot;Provideo PV150B-1&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x1465aa05</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV150</span><span class="p">,</span>         <span class="s">&quot;Provideo PV150B-2&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x1466aa06</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV150</span><span class="p">,</span>         <span class="s">&quot;Provideo PV150B-3&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x1467aa07</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV150</span><span class="p">,</span>         <span class="s">&quot;Provideo PV150B-4&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0xa132ff00</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC100</span><span class="p">,</span>        <span class="s">&quot;IVC-100&quot;</span>  <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa1550000</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC200</span><span class="p">,</span>        <span class="s">&quot;IVC-200&quot;</span>  <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa1550001</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC200</span><span class="p">,</span>        <span class="s">&quot;IVC-200&quot;</span>  <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa1550002</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC200</span><span class="p">,</span>        <span class="s">&quot;IVC-200&quot;</span>  <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa1550003</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC200</span><span class="p">,</span>        <span class="s">&quot;IVC-200&quot;</span>  <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa1550100</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC200</span><span class="p">,</span>        <span class="s">&quot;IVC-200G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa1550101</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC200</span><span class="p">,</span>        <span class="s">&quot;IVC-200G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa1550102</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC200</span><span class="p">,</span>        <span class="s">&quot;IVC-200G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa1550103</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC200</span><span class="p">,</span>        <span class="s">&quot;IVC-200G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa1550800</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC200</span><span class="p">,</span>        <span class="s">&quot;IVC-200&quot;</span>  <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa1550801</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC200</span><span class="p">,</span>        <span class="s">&quot;IVC-200&quot;</span>  <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa1550802</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC200</span><span class="p">,</span>        <span class="s">&quot;IVC-200&quot;</span>  <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa1550803</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC200</span><span class="p">,</span>        <span class="s">&quot;IVC-200&quot;</span>  <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff00</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff01</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff02</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff03</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff04</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff05</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff06</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff07</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff08</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff09</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff0a</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff0b</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff0c</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff0d</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff0e</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa182ff0f</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVC120</span><span class="p">,</span>        <span class="s">&quot;IVC-120G&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xf0500000</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVCE8784</span><span class="p">,</span>      <span class="s">&quot;IVCE-8784&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xf0500001</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVCE8784</span><span class="p">,</span>      <span class="s">&quot;IVCE-8784&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xf0500002</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVCE8784</span><span class="p">,</span>      <span class="s">&quot;IVCE-8784&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xf0500003</span><span class="p">,</span> <span class="n">BTTV_BOARD_IVCE8784</span><span class="p">,</span>      <span class="s">&quot;IVCE-8784&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x41424344</span><span class="p">,</span> <span class="n">BTTV_BOARD_GRANDTEC</span><span class="p">,</span>      <span class="s">&quot;GrandTec Multi Capture&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x01020304</span><span class="p">,</span> <span class="n">BTTV_BOARD_XGUARD</span><span class="p">,</span>        <span class="s">&quot;Grandtec Grand X-Guard&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x18501851</span><span class="p">,</span> <span class="n">BTTV_BOARD_CHRONOS_VS2</span><span class="p">,</span>   <span class="s">&quot;FlyVideo 98 (LR50)/ Chronos Video Shuttle II&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa0501851</span><span class="p">,</span> <span class="n">BTTV_BOARD_CHRONOS_VS2</span><span class="p">,</span>   <span class="s">&quot;FlyVideo 98 (LR50)/ Chronos Video Shuttle II&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x18511851</span><span class="p">,</span> <span class="n">BTTV_BOARD_FLYVIDEO98EZ</span><span class="p">,</span>  <span class="s">&quot;FlyVideo 98EZ (LR51)/ CyberMail AV&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x18521852</span><span class="p">,</span> <span class="n">BTTV_BOARD_TYPHOON_TVIEW</span><span class="p">,</span> <span class="s">&quot;FlyVideo 98FM (LR50)/ Typhoon TView TV/FM Tuner&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x41a0a051</span><span class="p">,</span> <span class="n">BTTV_BOARD_FLYVIDEO_98FM</span><span class="p">,</span> <span class="s">&quot;Lifeview FlyVideo 98 LR50 Rev Q&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x18501f7f</span><span class="p">,</span> <span class="n">BTTV_BOARD_FLYVIDEO_98</span><span class="p">,</span>   <span class="s">&quot;Lifeview Flyvideo 98&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x010115cb</span><span class="p">,</span> <span class="n">BTTV_BOARD_GMV1</span><span class="p">,</span>          <span class="s">&quot;AG GMV1&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x010114c7</span><span class="p">,</span> <span class="n">BTTV_BOARD_MODTEC_205</span><span class="p">,</span>    <span class="s">&quot;Modular Technology MM201/MM202/MM205/MM210/MM215 PCTV&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x10b42636</span><span class="p">,</span> <span class="n">BTTV_BOARD_HAUPPAUGE878</span><span class="p">,</span>  <span class="s">&quot;STB ???&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x217d6606</span><span class="p">,</span> <span class="n">BTTV_BOARD_WINFAST2000</span><span class="p">,</span>   <span class="s">&quot;Leadtek WinFast TV 2000&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xfff6f6ff</span><span class="p">,</span> <span class="n">BTTV_BOARD_WINFAST2000</span><span class="p">,</span>   <span class="s">&quot;Leadtek WinFast TV 2000&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x03116000</span><span class="p">,</span> <span class="n">BTTV_BOARD_SENSORAY311_611</span><span class="p">,</span> <span class="s">&quot;Sensoray 311&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x06116000</span><span class="p">,</span> <span class="n">BTTV_BOARD_SENSORAY311_611</span><span class="p">,</span> <span class="s">&quot;Sensoray 611&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x00790e11</span><span class="p">,</span> <span class="n">BTTV_BOARD_WINDVR</span><span class="p">,</span>        <span class="s">&quot;Canopus WinDVR PCI&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xa0fca1a0</span><span class="p">,</span> <span class="n">BTTV_BOARD_ZOLTRIX</span><span class="p">,</span>       <span class="s">&quot;Face to Face Tvmax&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x82b2aa6a</span><span class="p">,</span> <span class="n">BTTV_BOARD_SIMUS_GVC1100</span><span class="p">,</span> <span class="s">&quot;SIMUS GVC1100&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x146caa0c</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV951</span><span class="p">,</span>         <span class="s">&quot;ituner spectra8&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x200a1295</span><span class="p">,</span> <span class="n">BTTV_BOARD_PXC200</span><span class="p">,</span>        <span class="s">&quot;ImageNation PXC200A&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x40111554</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV_BT878P_9B</span><span class="p">,</span>  <span class="s">&quot;Prolink Pixelview PV-BT&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x17de0a01</span><span class="p">,</span> <span class="n">BTTV_BOARD_KWORLD</span><span class="p">,</span>        <span class="s">&quot;Mecer TV/FM/Video Tuner&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x01051805</span><span class="p">,</span> <span class="n">BTTV_BOARD_PICOLO_TETRA_CHIP</span><span class="p">,</span> <span class="s">&quot;Picolo Tetra Chip #1&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x01061805</span><span class="p">,</span> <span class="n">BTTV_BOARD_PICOLO_TETRA_CHIP</span><span class="p">,</span> <span class="s">&quot;Picolo Tetra Chip #2&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x01071805</span><span class="p">,</span> <span class="n">BTTV_BOARD_PICOLO_TETRA_CHIP</span><span class="p">,</span> <span class="s">&quot;Picolo Tetra Chip #3&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x01081805</span><span class="p">,</span> <span class="n">BTTV_BOARD_PICOLO_TETRA_CHIP</span><span class="p">,</span> <span class="s">&quot;Picolo Tetra Chip #4&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x15409511</span><span class="p">,</span> <span class="n">BTTV_BOARD_ACORP_Y878F</span><span class="p">,</span> <span class="s">&quot;Acorp Y878F&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x53534149</span><span class="p">,</span> <span class="n">BTTV_BOARD_SSAI_SECURITY</span><span class="p">,</span> <span class="s">&quot;SSAI Security Video Interface&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x5353414a</span><span class="p">,</span> <span class="n">BTTV_BOARD_SSAI_ULTRASOUND</span><span class="p">,</span> <span class="s">&quot;SSAI Ultrasound Video Interface&quot;</span> <span class="p">},</span>

	<span class="cm">/* likely broken, vendor id doesn&#39;t match the other magic views ...</span>
<span class="cm">	 * { 0xa0fca04f, BTTV_BOARD_MAGICTVIEW063, &quot;Guillemot Maxi TV Video 3&quot; }, */</span>

	<span class="cm">/* Duplicate PCI ID, reconfigure for this board during the eeprom read.</span>
<span class="cm">	* { 0x13eb0070, BTTV_BOARD_HAUPPAUGE_IMPACTVCB,  &quot;Hauppauge ImpactVCB&quot; }, */</span>

	<span class="p">{</span> <span class="mh">0x109e036e</span><span class="p">,</span> <span class="n">BTTV_BOARD_CONCEPTRONIC_CTVFMI2</span><span class="p">,</span>	<span class="s">&quot;Conceptronic CTVFMi v2&quot;</span><span class="p">},</span>

	<span class="cm">/* DVB cards (using pci function .1 for mpeg data xfer) */</span>
	<span class="p">{</span> <span class="mh">0x001c11bd</span><span class="p">,</span> <span class="n">BTTV_BOARD_PINNACLESAT</span><span class="p">,</span>   <span class="s">&quot;Pinnacle PCTV Sat&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x01010071</span><span class="p">,</span> <span class="n">BTTV_BOARD_NEBULA_DIGITV</span><span class="p">,</span> <span class="s">&quot;Nebula Electronics DigiTV&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x20007063</span><span class="p">,</span> <span class="n">BTTV_BOARD_PC_HDTV</span><span class="p">,</span>       <span class="s">&quot;pcHDTV HD-2000 TV&quot;</span><span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x002611bd</span><span class="p">,</span> <span class="n">BTTV_BOARD_TWINHAN_DST</span><span class="p">,</span>   <span class="s">&quot;Pinnacle PCTV SAT CI&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x00011822</span><span class="p">,</span> <span class="n">BTTV_BOARD_TWINHAN_DST</span><span class="p">,</span>   <span class="s">&quot;Twinhan VisionPlus DVB&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xfc00270f</span><span class="p">,</span> <span class="n">BTTV_BOARD_TWINHAN_DST</span><span class="p">,</span>   <span class="s">&quot;ChainTech digitop DST-1000 DVB-S&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x07711461</span><span class="p">,</span> <span class="n">BTTV_BOARD_AVDVBT_771</span><span class="p">,</span>    <span class="s">&quot;AVermedia AverTV DVB-T 771&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x07611461</span><span class="p">,</span> <span class="n">BTTV_BOARD_AVDVBT_761</span><span class="p">,</span>    <span class="s">&quot;AverMedia AverTV DVB-T 761&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xdb1018ac</span><span class="p">,</span> <span class="n">BTTV_BOARD_DVICO_DVBT_LITE</span><span class="p">,</span>    <span class="s">&quot;DViCO FusionHDTV DVB-T Lite&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xdb1118ac</span><span class="p">,</span> <span class="n">BTTV_BOARD_DVICO_DVBT_LITE</span><span class="p">,</span>    <span class="s">&quot;Ultraview DVB-T Lite&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xd50018ac</span><span class="p">,</span> <span class="n">BTTV_BOARD_DVICO_FUSIONHDTV_5_LITE</span><span class="p">,</span>    <span class="s">&quot;DViCO FusionHDTV 5 Lite&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x00261822</span><span class="p">,</span> <span class="n">BTTV_BOARD_TWINHAN_DST</span><span class="p">,</span>	<span class="s">&quot;DNTV Live! Mini &quot;</span><span class="p">},</span>
	<span class="p">{</span> <span class="mh">0xd200dbc0</span><span class="p">,</span> <span class="n">BTTV_BOARD_DVICO_FUSIONHDTV_2</span><span class="p">,</span>	<span class="s">&quot;DViCO FusionHDTV 2&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x763c008a</span><span class="p">,</span> <span class="n">BTTV_BOARD_GEOVISION_GV600</span><span class="p">,</span>	<span class="s">&quot;GeoVision GV-600&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x18011000</span><span class="p">,</span> <span class="n">BTTV_BOARD_ENLTV_FM_2</span><span class="p">,</span>	<span class="s">&quot;Encore ENL TV-FM-2&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x763d800a</span><span class="p">,</span> <span class="n">BTTV_BOARD_GEOVISION_GV800S</span><span class="p">,</span> <span class="s">&quot;GeoVision GV-800(S) (master)&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x763d800b</span><span class="p">,</span> <span class="n">BTTV_BOARD_GEOVISION_GV800S_SL</span><span class="p">,</span>	<span class="s">&quot;GeoVision GV-800(S) (slave)&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x763d800c</span><span class="p">,</span> <span class="n">BTTV_BOARD_GEOVISION_GV800S_SL</span><span class="p">,</span>	<span class="s">&quot;GeoVision GV-800(S) (slave)&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x763d800d</span><span class="p">,</span> <span class="n">BTTV_BOARD_GEOVISION_GV800S_SL</span><span class="p">,</span>	<span class="s">&quot;GeoVision GV-800(S) (slave)&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mh">0x15401830</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV183</span><span class="p">,</span>         <span class="s">&quot;Provideo PV183-1&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x15401831</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV183</span><span class="p">,</span>         <span class="s">&quot;Provideo PV183-2&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x15401832</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV183</span><span class="p">,</span>         <span class="s">&quot;Provideo PV183-3&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x15401833</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV183</span><span class="p">,</span>         <span class="s">&quot;Provideo PV183-4&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x15401834</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV183</span><span class="p">,</span>         <span class="s">&quot;Provideo PV183-5&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x15401835</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV183</span><span class="p">,</span>         <span class="s">&quot;Provideo PV183-6&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x15401836</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV183</span><span class="p">,</span>         <span class="s">&quot;Provideo PV183-7&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x15401837</span><span class="p">,</span> <span class="n">BTTV_BOARD_PV183</span><span class="p">,</span>         <span class="s">&quot;Provideo PV183-8&quot;</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x3116f200</span><span class="p">,</span> <span class="n">BTTV_BOARD_TVT_TD3116</span><span class="p">,</span>	<span class="s">&quot;Tongwei Video Technology TD-3116&quot;</span> <span class="p">},</span>

	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">NULL</span> <span class="p">}</span>
<span class="p">};</span>

<span class="cm">/* ----------------------------------------------------------------------- */</span>
<span class="cm">/* array with description for bt848 / bt878 tv/grabber cards               */</span>

<span class="k">struct</span> <span class="n">tvcard</span> <span class="n">bttv_tvcards</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* ---- card 0x00 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_UNKNOWN</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot; *** UNKNOWN/GENERIC *** &quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_MIRO</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;MIRO PCTV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_HAUPPAUGE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge (bt848)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_STB</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;STB, Gateway P/N 6000699 (bt848)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_NTSC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x04 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_INTEL</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Intel Create and Share PCI/ Smart Video Recorder III&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_DIAMOND</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Diamond DTV2000&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_AVERMEDIA</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;AVerMedia TVPhone&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x0f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x04</span> <span class="p">},</span>
		<span class="cm">/*                0x04 for some cards ?? */</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">audio_mode_gpio</span><span class="o">=</span> <span class="n">avermedia_tvphone_audio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_MATRIX_VISION</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;MATRIX-Vision MV-Delta&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x08 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_FLYVIDEO</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Lifeview FlyVideo II (Bt848) LR26 / MAXI TV Video PCI2 LR26&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0xc00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0xc00</span><span class="p">,</span> <span class="mh">0x800</span><span class="p">,</span> <span class="mh">0x400</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0xc00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_TURBOTV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;IMS/IXmicro TurboTV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_TEMIC_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_HAUPPAUGE878</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge (bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="cm">/* old: 7 */</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_MIROPRO</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;MIRO PCTV pro&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x3014f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x20001</span><span class="p">,</span><span class="mh">0x10001</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x0c ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_ADSTECH_TV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;ADS Technologies Channel Surfer TV (bt848)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">7</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_AVERMEDIA98</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;AVerMedia TVCapture 98&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 4, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">7</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">msp34xx_alt</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">audio_mode_gpio</span><span class="o">=</span> <span class="n">avermedia_tv_stereo_audio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_gpioirq</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_VHX</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Aimslab Video Highway Xtreme (VHX)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span> <span class="p">},</span> <span class="cm">/* old: {0, 1, 2, 3, 4} */</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_ZOLTRIX</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Zoltrix TV-Max&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x10 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PIXVIEWPLAYTV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Prolink Pixelview PlayTV (bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x01fe00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="cm">/* 2003-10-20 by &quot;Anton A. Arapov&quot; &lt;arapov@mail.ru&gt; */</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mh">0x001e00</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x018000</span><span class="p">,</span> <span class="mh">0x014000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x002000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>     <span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_WINVIEW_601</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Leadtek WinView 601&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x8300f8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x4fa007</span><span class="p">,</span><span class="mh">0xcfa007</span><span class="p">,</span><span class="mh">0xcfa007</span><span class="p">,</span><span class="mh">0xcfa007</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0xcfa007</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">volume_gpio</span>	<span class="o">=</span> <span class="n">winview_volume</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_AVEC_INTERCAP</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;AVEC Intercapture&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 2, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_LIFE_FLYKIT</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Lifeview FlyVideo II EZ /FlyKit LR38 Bt848 (capture only)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x8dff00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x14 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_CEI_RAFFLES</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;CEI Raffles Card&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 3, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_CONFERENCETV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Lifeview FlyVideo 98/ Lucky Star Image World ConferenceTV LR50&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 2,  tuner, line in */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x1800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x800</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">,</span> <span class="mh">0x1000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x1800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL_I</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PHOEBE_TVMAS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Askey CPH050/ Phoebe Tv Master + FM&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0xc00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x800</span><span class="p">,</span> <span class="mh">0x400</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0xc00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_MODTEC_205</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Modular Technology MM201/MM202/MM205/MM210/MM215 PCTV, bt878&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dig_in</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="cm">/* input 2 is digital */</span>
		<span class="cm">/* .digital_mode= DIGITAL_MODE_CAMERA, */</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ALPS_TSBB5_PAL_I</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x18 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_MAGICTVIEW061</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Askey CPH05X/06X (bt878) [many vendors]&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0xe00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span><span class="mh">0x400</span><span class="p">,</span> <span class="mh">0x400</span><span class="p">,</span> <span class="mh">0x400</span><span class="p">,</span> <span class="mh">0x400</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0xc00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_VOBIS_BOOSTAR</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Terratec TerraTV+ Version 1.0 (Bt848)/ Terra TValue Version 1.0/ Vobis TV-Boostar&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x1f0fff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mh">0x20000</span><span class="p">,</span> <span class="mh">0x30000</span><span class="p">,</span> <span class="mh">0x10000</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x40000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">audio_mode_gpio</span><span class="o">=</span> <span class="n">terratv_audio</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_HAUPPAUG_WCAM</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinCam newer (bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_MAXI</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Lifeview FlyVideo 98/ MAXI TV Video PCI2 LR50&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 2, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x1800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x800</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">,</span> <span class="mh">0x1000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x1800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_SECAM</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x1c ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_TERRATV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Terratec TerraTV+ Version 1.1 (bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x1f0fff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x20000</span><span class="p">,</span> <span class="mh">0x30000</span><span class="p">,</span> <span class="mh">0x10000</span><span class="p">,</span> <span class="mh">0x00000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x40000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">audio_mode_gpio</span><span class="o">=</span> <span class="n">terratv_audio</span><span class="p">,</span>
		<span class="cm">/* GPIO wiring:</span>
<span class="cm">		External 20 pin connector (for Active Radio Upgrade board)</span>
<span class="cm">		gpio00: i2c-sda</span>
<span class="cm">		gpio01: i2c-scl</span>
<span class="cm">		gpio02: om5610-data</span>
<span class="cm">		gpio03: om5610-clk</span>
<span class="cm">		gpio04: om5610-wre</span>
<span class="cm">		gpio05: om5610-stereo</span>
<span class="cm">		gpio06: rds6588-davn</span>
<span class="cm">		gpio07: Pin 7 n.c.</span>
<span class="cm">		gpio08: nIOW</span>
<span class="cm">		gpio09+10: nIOR, nSEL ?? (bt878)</span>
<span class="cm">			gpio09: nIOR (bt848)</span>
<span class="cm">			gpio10: nSEL (bt848)</span>
<span class="cm">		Sound Routing:</span>
<span class="cm">		gpio16: u2-A0 (1st 4052bt)</span>
<span class="cm">		gpio17: u2-A1</span>
<span class="cm">		gpio18: u2-nEN</span>
<span class="cm">		gpio19: u4-A0 (2nd 4052)</span>
<span class="cm">		gpio20: u4-A1</span>
<span class="cm">			u4-nEN - GND</span>
<span class="cm">		Btspy:</span>
<span class="cm">			00000 : Cdrom (internal audio input)</span>
<span class="cm">			10000 : ext. Video audio input</span>
<span class="cm">			20000 : TV Mono</span>
<span class="cm">			a0000 : TV Mono/2</span>
<span class="cm">		1a0000 : TV Stereo</span>
<span class="cm">			30000 : Radio</span>
<span class="cm">			40000 : Mute</span>
<span class="cm">	*/</span>

	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PXC200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Jannik Fritsch &lt;jannik@techfak.uni-bielefeld.de&gt; */</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Imagenation PXC200&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="cm">/* was: 4 */</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>    <span class="o">=</span> <span class="n">PXC200_muxsel</span><span class="p">,</span>

	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_FLYVIDEO_98</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Lifeview FlyVideo 98 LR50&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x1800</span><span class="p">,</span>  <span class="cm">/* 0x8dfe00 */</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x0800</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">,</span> <span class="mh">0x1000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x1800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_IPROTV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Formac iProTV, Formac ProTV I (bt848)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x20 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_INTEL_C_S_PCI</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Intel Create and Share PCI/ Smart Video Recorder III&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_TERRATVALUE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Terratec TerraTValue Version Bt878&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0xffff00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x500</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x300</span><span class="p">,</span> <span class="mh">0x900</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x900</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_WINFAST2000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Leadtek WinFast 2000/ WinFast 2000 XP&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* TV, CVid, SVid, CVid over SVid connector */</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="cm">/* Alexander Varakin &lt;avarakin@hotmail.com&gt; [stereo version] */</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0xb33000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x122000</span><span class="p">,</span><span class="mh">0x1000</span><span class="p">,</span><span class="mh">0x0000</span><span class="p">,</span><span class="mh">0x620000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x800000</span><span class="p">,</span>
		<span class="cm">/* Audio Routing for &quot;WinFast 2000 XP&quot; (no tv stereo !)</span>
<span class="cm">			gpio23 -- hef4052:nEnable (0x800000)</span>
<span class="cm">			gpio12 -- hef4052:A1</span>
<span class="cm">			gpio13 -- hef4052:A0</span>
<span class="cm">		0x0000: external audio</span>
<span class="cm">		0x1000: FM</span>
<span class="cm">		0x2000: TV</span>
<span class="cm">		0x3000: n.c.</span>
<span class="cm">		Note: There exists another variant &quot;Winfast 2000&quot; with tv stereo !?</span>
<span class="cm">		Note: eeprom only contains FF and pci subsystem id 107d:6606</span>
<span class="cm">		*/</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span> <span class="cm">/* default for now, gpio reads BFFF06 for Pal bg+dk */</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">audio_mode_gpio</span><span class="o">=</span> <span class="n">winfast2000_audio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_CHRONOS_VS2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Lifeview FlyVideo 98 LR50 / Chronos Video Shuttle II&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 3, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x1800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x800</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">,</span> <span class="mh">0x1000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x1800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x24 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_TYPHOON_TVIEW</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Lifeview FlyVideo 98FM LR50 / Typhoon TView TV/FM Tuner&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 3, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x1800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x800</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">,</span> <span class="mh">0x1000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x1800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PXELVWPLTVPRO</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Prolink PixelView PlayTV pro&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0xff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x2c</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x29</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_MAGICTVIEW063</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Askey CPH06X TView99&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x551e00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x551400</span><span class="p">,</span> <span class="mh">0x551200</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x551c00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL_I</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PINNACLE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Pinnacle PCTV Studio/Rave&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x03000F</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mh">0xd0001</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x28 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_STB2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;STB TV PCI FM, Gateway P/N 6000704 (bt878), 3Dfx VoodooTV 100&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_NTSC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_AVPHONE98</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;AVerMedia TVPhone 98&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 4, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">7</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">audio_mode_gpio</span><span class="o">=</span> <span class="n">avermedia_tvphone_audio</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PV951</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;ProVideo PV951&quot;</span><span class="p">,</span> <span class="cm">/* pic16c54 */</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL_I</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_ONAIR_TV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Little OnAir TV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0xe00b</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0xff9ff6</span><span class="p">,</span> <span class="mh">0xff9ff6</span><span class="p">,</span> <span class="mh">0xff1ff7</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0xff3ffc</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x2c ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_SIGMA_TVII_FM</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Sigma TVII-FM&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_NONE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_MATRIX_VISION2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;MATRIX-Vision MV-Delta 2&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_ZOLTRIX_GENIE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Zoltrix Genie TV/FM&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0xbcf03f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0xbc803f</span><span class="p">,</span> <span class="mh">0xbc903f</span><span class="p">,</span> <span class="mh">0xbcb03f</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0xbcb03f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_TEMIC_4039FR5_NTSC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_TERRATVRADIO</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Terratec TV/Radio+&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x70000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x20000</span><span class="p">,</span> <span class="mh">0x30000</span><span class="p">,</span> <span class="mh">0x10000</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x40000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_35</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL_I</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x30 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_DYNALINK</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Askey CPH03x/ Dynalink Magic TView&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_GVBCTV3PCI</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;IODATA GV-BCTV3/PCI&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x010f00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span><span class="mh">0x10000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x10000</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ALPS_TSHC6_NTSC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">audio_mode_gpio</span><span class="o">=</span> <span class="n">gvbctv3pci_audio</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PXELVWPLTVPAK</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Prolink PV-BT878P+4E / PixelView PlayTV PAK / Lenco MXTV-9578 CP&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dig_in</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0xAA0000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="cm">/* in 4 is digital */</span>
		<span class="cm">/* .digital_mode= DIGITAL_MODE_CAMERA, */</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x20000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x80000</span><span class="p">,</span> <span class="mh">0x80000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0xa8000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL_I</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="cm">/* GPIO wiring: (different from Rev.4C !)</span>
<span class="cm">			GPIO17: U4.A0 (first hef4052bt)</span>
<span class="cm">			GPIO19: U4.A1</span>
<span class="cm">			GPIO20: U5.A1 (second hef4052bt)</span>
<span class="cm">			GPIO21: U4.nEN</span>
<span class="cm">			GPIO22: BT832 Reset Line</span>
<span class="cm">			GPIO23: A5,A0, U5,nEN</span>
<span class="cm">		Note: At i2c=0x8a is a Bt832 chip, which changes to 0x88 after being reset via GPIO22</span>
<span class="cm">		*/</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_EAGLE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Eagle Wireless Capricorn2 (bt878A)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">UNSET</span> <span class="cm">/* TUNER_ALPS_TMDH2_NTSC */</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x34 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PINNACLEPRO</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* David Härdeman &lt;david@2gen.com&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Pinnacle PCTV Studio Pro&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x03000F</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xd0001</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
				<span class="cm">/* sound path (5 sources):</span>
<span class="cm">				MUX1 (mask 0x03), Enable Pin 0x08 (0=enable, 1=disable)</span>
<span class="cm">					0= ext. Audio IN</span>
<span class="cm">					1= from MUX2</span>
<span class="cm">					2= Mono TV sound from Tuner</span>
<span class="cm">					3= not connected</span>
<span class="cm">				MUX2 (mask 0x30000):</span>
<span class="cm">					0,2,3= from MSP34xx</span>
<span class="cm">					1= FM stereo Radio from Tuner */</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_TVIEW_RDS_FM</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Claas Langbehn &lt;claas@bigfoot.com&gt;,</span>
<span class="cm">		Sven Grothklags &lt;sven@upb.de&gt; */</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Typhoon TView RDS + FM Stereo / KNC1 TV Station RDS&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 3, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x1c</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">8</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_LIFETEC_9415</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Tim Röstermundt &lt;rosterm@uni-muenster.de&gt;</span>
<span class="cm">		in de.comp.os.unix.linux.hardware:</span>
<span class="cm">			options bttv card=0 pll=1 radio=1 gpiomask=0x18e0</span>
<span class="cm">			gpiomux =0x44c71f,0x44d71f,0,0x44d71f,0x44dfff</span>
<span class="cm">			options tuner type=5 */</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Lifeview FlyVideo 2000 /FlyVideo A2/ Lifetec LT 9415 TV [LR90]&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x18e0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x0000</span><span class="p">,</span><span class="mh">0x0800</span><span class="p">,</span><span class="mh">0x1000</span><span class="p">,</span><span class="mh">0x1000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x18e0</span><span class="p">,</span>
			<span class="cm">/* For cards with tda9820/tda9821:</span>
<span class="cm">				0x0000: Tuner normal stereo</span>
<span class="cm">				0x0080: Tuner A2 SAP (second audio program = Zweikanalton)</span>
<span class="cm">				0x0880: Tuner A2 stereo */</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_BESTBUY_EASYTV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Miguel Angel Alvarez &lt;maacruz@navegalia.com&gt;</span>
<span class="cm">		old Easy TV BT848 version (model CPH031) */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Askey CPH031/ BESTBUY Easy TV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0xF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_TEMIC_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x38 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_FLYVIDEO_98FM</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Gordon Heydon &lt;gjheydon@bigfoot.com (&#39;98) */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Lifeview FlyVideo 98FM LR50&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 3, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x1800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x800</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">,</span> <span class="mh">0x1000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x1800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="cm">/* This is the ultimate cheapo capture card</span>
<span class="cm">		* just a BT848A on a small PCB!</span>
<span class="cm">		* Steve Hosgood &lt;steve@equiinet.com&gt; */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_GRANDTEC</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;GrandTec &#39;Grand Video Capture&#39; (Bt848)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_35</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_ASKEY_CPH060</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Daniel Herrington &lt;daniel.herrington@home.com&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Askey CPH060/ Phoebe TV Master Only (No FM)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0xe00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mh">0x400</span><span class="p">,</span> <span class="mh">0x400</span><span class="p">,</span> <span class="mh">0x400</span><span class="p">,</span> <span class="mh">0x400</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_TEMIC_4036FY5_NTSC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_ASKEY_CPH03X</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Matti Mottus &lt;mottus@physic.ut.ee&gt; */</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Askey CPH03x TV Capturer&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x03000F</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_TEMIC_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x3c ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_MM100PCTV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Philip Blundell &lt;philb@gnu.org&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Modular Technology MM100PCTV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 2, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_35</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_TEMIC_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_GMV1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Adrian Cox &lt;adrian@humboldt.co.uk */</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;AG Electronics GMV1&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0xF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_BESTBUY_EASYTV2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Miguel Angel Alvarez &lt;maacruz@navegalia.com&gt;</span>
<span class="cm">		new Easy TV BT878 version (model CPH061)</span>
<span class="cm">		special thanks to Informatica Mieres for providing the card */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Askey CPH061/ BESTBUY Easy TV (bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 2, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0xFF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_ATI_TVWONDER</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Lukas Gebauer &lt;geby@volny.cz&gt; */</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;ATI TV-Wonder&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0xf03f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0xbffe</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0xbfff</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0xbffe</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_TEMIC_4006FN5_MULTI_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x40 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_ATI_TVWONDERVE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Lukas Gebauer &lt;geby@volny.cz&gt; */</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;ATI TV-Wonder VE&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_TEMIC_4006FN5_MULTI_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_FLYVIDEO2000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* DeeJay &lt;deejay@westel900.net (2000S) */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Lifeview FlyVideo 2000S LR90&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 3, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x18e0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
				<span class="cm">/* Radio changed from 1e80 to 0x800 to make</span>
<span class="cm">				FlyVideo2000S in .hu happy (gm)*/</span>
				<span class="cm">/* -dk-???: set mute=0x1800 for tda9874h daughterboard */</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x0000</span><span class="p">,</span><span class="mh">0x0800</span><span class="p">,</span><span class="mh">0x1000</span><span class="p">,</span><span class="mh">0x1000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x1800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">audio_mode_gpio</span><span class="o">=</span> <span class="n">fv2000s_audio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_TERRATVALUER</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Terratec TValueRadio&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0xffff00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x500</span><span class="p">,</span> <span class="mh">0x500</span><span class="p">,</span> <span class="mh">0x300</span><span class="p">,</span> <span class="mh">0x900</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x900</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_GVBCTV4PCI</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* TANAKA Kei &lt;peg00625@nifty.com&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;IODATA GV-BCTV4/PCI&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x010f00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span><span class="mh">0x10000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x10000</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_SHARP_2U5JF5540_NTSC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">audio_mode_gpio</span><span class="o">=</span> <span class="n">gvbctv3pci_audio</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x44 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_VOODOOTV_FM</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;3Dfx VoodooTV FM (Euro)&quot;</span><span class="p">,</span>
		<span class="cm">/* try &quot;insmod msp3400 simple=0&quot; if you have</span>
<span class="cm">		* sound problems with this card. */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x4f8a00</span><span class="p">,</span>
		<span class="cm">/* 0x100000: 1=MSP enabled (0=disable again)</span>
<span class="cm">		* 0x010000: Connected to &quot;S0&quot; on tda9880 (0=Pal/BG, 1=NTSC) */</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span><span class="mh">0x947fff</span><span class="p">,</span> <span class="mh">0x987fff</span><span class="p">,</span><span class="mh">0x947fff</span><span class="p">,</span><span class="mh">0x947fff</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x947fff</span><span class="p">,</span>
		<span class="cm">/* tvtuner, radio,   external,internal, mute,  stereo</span>
<span class="cm">		* tuner, Composit, SVid, Composit-on-Svid-adapter */</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_MT2032</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_VOODOOTV_200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;VoodooTV 200 (USA)&quot;</span><span class="p">,</span>
		<span class="cm">/* try &quot;insmod msp3400 simple=0&quot; if you have</span>
<span class="cm">		* sound problems with this card. */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x4f8a00</span><span class="p">,</span>
		<span class="cm">/* 0x100000: 1=MSP enabled (0=disable again)</span>
<span class="cm">		* 0x010000: Connected to &quot;S0&quot; on tda9880 (0=Pal/BG, 1=NTSC) */</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span><span class="mh">0x947fff</span><span class="p">,</span> <span class="mh">0x987fff</span><span class="p">,</span><span class="mh">0x947fff</span><span class="p">,</span><span class="mh">0x947fff</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x947fff</span><span class="p">,</span>
		<span class="cm">/* tvtuner, radio,   external,internal, mute,  stereo</span>
<span class="cm">		* tuner, Composit, SVid, Composit-on-Svid-adapter */</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_MT2032</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_AIMMS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Philip Blundell &lt;pb@nexus.co.uk&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Active Imaging AIMMS&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">0</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PV_BT878P_PLUS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Tomasz Pyra &lt;hellfire@sedez.iq.pl&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Prolink Pixelview PV-BT878P+ (Rev.4C,8E)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 4, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">7</span> <span class="p">},</span> <span class="cm">/* TV and Radio with same GPIO ! */</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_LG_PAL_I_FM</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="cm">/* GPIO wiring:</span>
<span class="cm">			GPIO0: U4.A0 (hef4052bt)</span>
<span class="cm">			GPIO1: U4.A1</span>
<span class="cm">			GPIO2: U4.A1 (second hef4052bt)</span>
<span class="cm">			GPIO3: U4.nEN, U5.A0, A5.nEN</span>
<span class="cm">			GPIO8-15: vrd866b ?</span>
<span class="cm">		*/</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_FLYVIDEO98EZ</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Lifeview FlyVideo 98EZ (capture only) LR51&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* AV1, AV2, SVHS, CVid adapter on SVHS */</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x48 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PV_BT878P_9B</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Dariusz Kowalewski &lt;darekk@automex.pl&gt; */</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Prolink Pixelview PV-BT878P+9B (PlayTV Pro rev.9B FM+NICAM)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x3f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x03</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x09</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">audio_mode_gpio</span><span class="o">=</span> <span class="n">pvbt878p9b_audio</span><span class="p">,</span> <span class="cm">/* Note: not all cards have stereo */</span>
		<span class="p">.</span><span class="n">has_radio</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>  <span class="cm">/* Note: not all cards have radio */</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="cm">/* GPIO wiring:</span>
<span class="cm">			GPIO0: A0 hef4052</span>
<span class="cm">			GPIO1: A1 hef4052</span>
<span class="cm">			GPIO3: nEN hef4052</span>
<span class="cm">			GPIO8-15: vrd866b</span>
<span class="cm">			GPIO20,22,23: R30,R29,R28</span>
<span class="cm">		*/</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_SENSORAY311_611</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Clay Kunz &lt;ckunz@mail.arc.nasa.gov&gt; */</span>
		<span class="cm">/* you must jumper JP5 for the 311 card (PC/104+) to work */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Sensoray 311/611&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_RV605</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Miguel Freitas &lt;miguel@cetuc.puc-rio.br&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;RemoteVision MX (RV605)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask2</span>      <span class="o">=</span> <span class="mh">0x07ff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>    <span class="o">=</span> <span class="n">rv605_muxsel</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_POWERCLR_MTV878</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Powercolor MTV878/ MTV878R/ MTV878F&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 2, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x1C800F</span><span class="p">,</span>  <span class="cm">/* Bit0-2: Audio select, 8-12:remote control 14:remote valid 15:remote reset */</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* ---- card 0x4c ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_WINDVR</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Masaki Suzuki &lt;masaki@btree.org&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Canopus WinDVR PCI (COMPAQ Presario 3524JP, 5112JP)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x140007</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_NTSC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">audio_mode_gpio</span><span class="o">=</span> <span class="n">windvr_audio</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_GRANDTEC_MULTI</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;GrandTec Multi Capture Card (Bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_KWORLD</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Jetway TV/Capture JW-TV878-FBK, Kworld KW-TV878RF&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 3, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
		<span class="cm">/* Tuner, SVid, SVHS, SVid to SVHS connector */</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span> <span class="p">},</span><span class="cm">/* Yes, this tuner uses the same audio output for TV and FM radio!</span>
<span class="cm">						* This card lacks external Audio In, so we mute it on Ext. &amp; Int.</span>
<span class="cm">						* The PCB can take a sbx1637/sbx1673, wiring unknown.</span>
<span class="cm">						* This card lacks PCI subsystem ID, sigh.</span>
<span class="cm">						* gpiomux =1: lower volume, 2+3: mute</span>
<span class="cm">						* btwincap uses 0x80000/0x80003</span>
<span class="cm">						*/</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="cm">/* Samsung TCPA9095PC27A (BG+DK), philips compatible, w/FM, stereo and</span>
<span class="cm">		radio signal strength indicators work fine. */</span>
		<span class="p">.</span><span class="n">has_radio</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="cm">/* GPIO Info:</span>
<span class="cm">			GPIO0,1:   HEF4052 A0,A1</span>
<span class="cm">			GPIO2:     HEF4052 nENABLE</span>
<span class="cm">			GPIO3-7:   n.c.</span>
<span class="cm">			GPIO8-13:  IRDC357 data0-5 (data6 n.c. ?) [chip not present on my card]</span>
<span class="cm">			GPIO14,15: ??</span>
<span class="cm">			GPIO16-21: n.c.</span>
<span class="cm">			GPIO22,23: ??</span>
<span class="cm">			??       : mtu8b56ep microcontroller for IR (GPIO wiring unknown)*/</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_DSP_TCVIDEO</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Arthur Tetzlaff-Deas, DSP Design Ltd &lt;software@dspdesign.com&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;DSP Design TCVIDEO&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

		<span class="cm">/* ---- card 0x50 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_HAUPPAUGEPVR</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Hauppauge WinTV PVR&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>

		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span><span class="mi">7</span><span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_GVBCTV5PCI</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;IODATA GV-BCTV5/PCI&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x0f0f80</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span><span class="mh">0x030000</span><span class="p">,</span> <span class="mh">0x010000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x020000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_NTSC_M</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">audio_mode_gpio</span><span class="o">=</span> <span class="n">gvbctv5pci_audio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_OSPREY1x0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Osprey 100/150 (878)&quot;</span><span class="p">,</span> <span class="cm">/* 0x1(2|3)-45C6-C1 */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>                  <span class="cm">/* id-inputs-clock */</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_OSPREY1x0_848</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Osprey 100/150 (848)&quot;</span><span class="p">,</span> <span class="cm">/* 0x04-54C0-C1 &amp; older boards */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>

		<span class="cm">/* ---- card 0x54 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_OSPREY101_848</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Osprey 101 (848)&quot;</span><span class="p">,</span> <span class="cm">/* 0x05-40C0-C1 */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_OSPREY1x1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Osprey 101/151&quot;</span><span class="p">,</span>       <span class="cm">/* 0x1(4|5)-0004-C4 */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_OSPREY1x1_SVID</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Osprey 101/151 w/ svid&quot;</span><span class="p">,</span>  <span class="cm">/* 0x(16|17|20)-00C4-C1 */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_OSPREY2xx</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Osprey 200/201/250/251&quot;</span><span class="p">,</span>  <span class="cm">/* 0x1(8|9|E|F)-0004-C4 */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>

		<span class="cm">/* ---- card 0x58 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_OSPREY2x0_SVID</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Osprey 200/250&quot;</span><span class="p">,</span>   <span class="cm">/* 0x1(A|B)-00C4-C1 */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_OSPREY2x0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Osprey 210/220/230&quot;</span><span class="p">,</span>   <span class="cm">/* 0x1(A|B)-04C0-C1 */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_OSPREY500</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Osprey 500&quot;</span><span class="p">,</span>   <span class="cm">/* 500 */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_OSPREY540</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Osprey 540&quot;</span><span class="p">,</span>   <span class="cm">/* 540 */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>

		<span class="cm">/* ---- card 0x5C ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_OSPREY2000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Osprey 2000&quot;</span><span class="p">,</span>  <span class="cm">/* 2000 */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>      <span class="cm">/* must avoid, conflicts with the bt860 */</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_IDS_EAGLE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* M G Berberich &lt;berberic@forwiss.uni-passau.de&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;IDS Eagle&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>    <span class="o">=</span> <span class="n">eagle_muxsel</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PINNACLESAT</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Pinnacle PCTV Sat&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_gpioirq</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>        <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_FORMAC_PROTV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Formac ProTV II (bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* TV, Comp1, Composite over SVID con, SVID */</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="cm">/* sound routing:</span>
<span class="cm">		GPIO=0x00,0x01,0x03: mute (?)</span>
<span class="cm">		0x02: both TV and radio (tuner: FM1216/I)</span>
<span class="cm">		The card has onboard audio connectors labeled &quot;cdrom&quot; and &quot;board&quot;,</span>
<span class="cm">		not soldered here, though unknown wiring.</span>
<span class="cm">		Card lacks: external audio in, pci subsystem id.</span>
<span class="cm">	*/</span>
	<span class="p">},</span>

		<span class="cm">/* ---- card 0x60 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_MACHTV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;MachTV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_EURESYS_PICOLO</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Euresys Picolo&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PV150</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Luc Van Hoeylandt &lt;luc@e-magic.be&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;ProVideo PV150&quot;</span><span class="p">,</span> <span class="cm">/* 0x4f */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_AD_TVK503</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Hiroshi Takekawa &lt;sian@big.or.jp&gt; */</span>
		<span class="cm">/* This card lacks subsystem ID */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;AD-TVK503&quot;</span><span class="p">,</span> <span class="cm">/* 0x63 */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x001e8007</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="cm">/*                  Tuner, Radio, external, internal, off,  on */</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mh">0x08</span><span class="p">,</span>  <span class="mh">0x0f</span><span class="p">,</span>  <span class="mh">0x0a</span><span class="p">,</span>     <span class="mh">0x08</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x0f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_NTSC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">audio_mode_gpio</span><span class="o">=</span> <span class="n">adtvk503_audio</span><span class="p">,</span>
	<span class="p">},</span>

		<span class="cm">/* ---- card 0x64 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_HERCULES_SM_TV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Hercules Smart TV Stereo&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="cm">/* Notes:</span>
<span class="cm">		- card lacks subsystem ID</span>
<span class="cm">		- stereo variant w/ daughter board with tda9874a @0xb0</span>
<span class="cm">		- Audio Routing:</span>
<span class="cm">			always from tda9874 independent of GPIO (?)</span>
<span class="cm">			external line in: unknown</span>
<span class="cm">		- Other chips: em78p156elp @ 0x96 (probably IR remote control)</span>
<span class="cm">			hef4053 (instead 4052) for unknown function</span>
<span class="cm">		*/</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PACETV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Pace TV &amp; Radio Card&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* Tuner, CVid, SVid, CVid over SVid connector */</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL_I</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="cm">/* Bt878, Bt832, FI1246 tuner; no pci subsystem id</span>
<span class="cm">		only internal line out: (4pin header) RGGL</span>
<span class="cm">		Radio must be decoded by msp3410d (not routed through)*/</span>
		<span class="cm">/*</span>
<span class="cm">		.digital_mode   = DIGITAL_MODE_CAMERA,  todo!</span>
<span class="cm">		*/</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_IVC200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Chris Willing &lt;chris@vislab.usyd.edu.au&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;IVC-200&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0xdf</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_IVCE8784</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;IVCE-8784&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>     <span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0xdf</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_XGUARD</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Grand X-Guard / Trust 814PCI&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask2</span>      <span class="o">=</span> <span class="mh">0xff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>    <span class="o">=</span> <span class="n">xguard_muxsel</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
	<span class="p">},</span>

		<span class="cm">/* ---- card 0x68 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_NEBULA_DIGITV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Nebula Electronics DigiTV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>        <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x1b</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_gpioirq</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PV143</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Jorge Boncompte - DTI2 &lt;jorge@dti2.net&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;ProVideo PV143&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_VD009X1_VD011_MINIDIN</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* M.Klahr@phytec.de */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;PHYTEC VD-009-X1 VD-011 MiniDIN (bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span> <span class="cm">/* card has no audio */</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_VD009X1_VD011_COMBI</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;PHYTEC VD-009-X1 VD-011 Combi (bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span> <span class="cm">/* card has no audio */</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>

		<span class="cm">/* ---- card 0x6c ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_VD009_MINIDIN</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;PHYTEC VD-009 MiniDIN (bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask2</span>      <span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span> <span class="cm">/* used for external vodeo mux */</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>	<span class="o">=</span> <span class="n">phytec_muxsel</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span> <span class="cm">/* card has no audio */</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_VD009_COMBI</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;PHYTEC VD-009 Combi (bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask2</span>      <span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span> <span class="cm">/* used for external vodeo mux */</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>	<span class="o">=</span> <span class="n">phytec_muxsel</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span> <span class="cm">/* card has no audio */</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_IVC100</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;IVC-100&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0xdf</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_IVC120</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* IVC-120G - Alan Garfield &lt;alan@fromorbit.com&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;IVC-120G&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>   <span class="cm">/* card has no svhs */</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>    <span class="o">=</span> <span class="n">ivc120_muxsel</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
	<span class="p">},</span>

		<span class="cm">/* ---- card 0x70 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PC_HDTV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;pcHDTV HD-2000 TV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_FCV1236D</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>        <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_TWINHAN_DST</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Twinhan DST + clones&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_video</span>       <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>        <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_WINFASTVC100</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Winfast VC100&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="cm">/* Vid In, SVid In, Vid over SVid in connector */</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_TEV560</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Teppro TEV-560/InterVision IV-560&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_35</span><span class="p">,</span>
	<span class="p">},</span>

		<span class="cm">/* ---- card 0x74 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_SIMUS_GVC1100</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;SIMUS GVC1100&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x3F</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>    <span class="o">=</span> <span class="n">gvc1100_muxsel</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_NGSTV_PLUS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Carlos Silva r3pek@r3pek.homelinux.org || card 0x75 */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;NGS NGSTV+&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x008007</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x000003</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_LMLBT4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* http://linuxmedialabs.com */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;LMLBT4&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="cm">/* IN1,IN2,IN3,IN4 */</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_TEKRAM_M205</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Helmroos Harri &lt;harri.helmroos@pp.inet.fi&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Tekram M205 PRO&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x68</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mh">0x68</span><span class="p">,</span> <span class="mh">0x68</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0x61</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
	<span class="p">},</span>

		<span class="cm">/* ---- card 0x78 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_CONTVFMI</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Javier Cendan Ares &lt;jcendan@lycos.es&gt; */</span>
		<span class="cm">/* bt878 TV + FM without subsystem ID */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Conceptronic CONTVFMi&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x008007</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PICOLO_TETRA_CHIP</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/*Eric DEBIEF &lt;debief@telemsa.com&gt;*/</span>
		<span class="cm">/*EURESYS Picolo Tetra : 4 Conexant Fusion 878A, no audio, video input set with analog multiplexers GPIO controlled*/</span>
		<span class="cm">/* adds picolo_tetra_muxsel(), picolo_tetra_init(), the following declaration strucure, and #define BTTV_BOARD_PICOLO_TETRA_CHIP*/</span>
		<span class="cm">/*0x79 in bttv.h*/</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Euresys Picolo Tetra&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask2</span>      <span class="o">=</span> <span class="mh">0x3C</span><span class="o">&lt;&lt;</span><span class="mi">16</span><span class="p">,</span><span class="cm">/*Set the GPIO[18]-&gt;GPIO[21] as output pin.==&gt; drive the video inputs through analog multiplexers*/</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="cm">/*878A input is always MUX0, see above.*/</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span> <span class="cm">/* card has no audio */</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>    <span class="o">=</span> <span class="n">picolo_tetra_muxsel</span><span class="p">,</span><span class="cm">/*Required as it doesn&#39;t follow the classic input selection policy*/</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_SPIRIT_TV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Spirit TV Tuner from http://spiritmodems.com.au */</span>
		<span class="cm">/* Stafford Goodsell &lt;surge@goliath.homeunix.org&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Spirit TV Tuner&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x0000000f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_TEMIC_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_AVDVBT_771</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Wolfram Joost &lt;wojo@frokaschwei.de&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;AVerMedia AVerTV DVB-T 771&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>        <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_gpioirq</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="cm">/* ---- card 0x7c ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_AVDVBT_761</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Matt Jesson &lt;dvb@jesson.eclipse.co.uk&gt; */</span>
		<span class="cm">/* Based on the Nebula card data - added remote and new card number - BTTV_BOARD_AVDVBT_761, see also ir-kbd-gpio.c */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;AverMedia AverTV DVB-T 761&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="cm">/* Comp0, S-Video, ?, ? */</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>        <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_gpioirq</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_MATRIX_VISIONSQ</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* andre.schwarz@matrix-vision.de */</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;MATRIX Vision Sigma-SQ&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>	<span class="o">=</span> <span class="n">sigmaSQ_muxsel</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomux</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_MATRIX_VISIONSLC</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* andre.schwarz@matrix-vision.de */</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;MATRIX Vision Sigma-SLC&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>	<span class="o">=</span> <span class="n">sigmaSLC_muxsel</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomux</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="cm">/* BTTV_BOARD_APAC_VIEWCOMP */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_APAC_VIEWCOMP</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Attila Kondoros &lt;attila.kondoros@chello.hu&gt; */</span>
		<span class="cm">/* bt878 TV + FM 0x00000000 subsystem ID */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;APAC Viewcomp 878(AMAX)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0xFF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>   <span class="cm">/* miniremote works, see ir-kbd-gpio.c */</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>   <span class="cm">/* not every card has radio */</span>
	<span class="p">},</span>

		<span class="cm">/* ---- card 0x80 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_DVICO_DVBT_LITE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Chris Pascoe &lt;c.pascoe@itee.uq.edu.au&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;DViCO FusionHDTV DVB-T Lite&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_video</span>       <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>        <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_VGEAR_MYVCD</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Steven &lt;photon38@pchome.com.tw&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;V-Gear MyVCD&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x3f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span><span class="mh">0x31</span><span class="p">,</span> <span class="mh">0x31</span><span class="p">,</span> <span class="mh">0x31</span><span class="p">,</span> <span class="mh">0x31</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x31</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_NTSC_M</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_SUPER_TV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Rick C &lt;cryptdragoon@gmail.com&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Super TV Tuner&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_NTSC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x008007</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x000001</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_TIBET_CS16</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Chris Fanning &lt;video4linux@haydon.net&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Tibet Systems &#39;Progress DVR&#39; CS16&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>    <span class="o">=</span> <span class="n">tibetCS16_muxsel</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_KODICOM_4400R</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Bill Brack &lt;wbrack@mmm.com.hk&gt; */</span>
		<span class="cm">/*</span>
<span class="cm">		* Note that, because of the card&#39;s wiring, the &quot;master&quot;</span>
<span class="cm">		* BT878A chip (i.e. the one which controls the analog switch</span>
<span class="cm">		* and must use this card type) is the 2nd one detected.  The</span>
<span class="cm">		* other 3 chips should use card type 0x85, whose description</span>
<span class="cm">		* follows this one.  There is a EEPROM on the card (which is</span>
<span class="cm">		* connected to the I2C of one of those other chips), but is</span>
<span class="cm">		* not currently handled.  There is also a facility for a</span>
<span class="cm">		* &quot;monitor&quot;, which is also not currently implemented.</span>
<span class="cm">		*/</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Kodicom 4400R (master)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="cm">/* GPIO bits 0-9 used for analog switch:</span>
<span class="cm">		*   00 - 03:	camera selector</span>
<span class="cm">		*   04 - 06:	channel (controller) selector</span>
<span class="cm">		*   07:	data (1-&gt;on, 0-&gt;off)</span>
<span class="cm">		*   08:	strobe</span>
<span class="cm">		*   09:	reset</span>
<span class="cm">		* bit 16 is input from sync separator for the channel</span>
<span class="cm">		*/</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x0003ff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_gpioirq</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>	<span class="o">=</span> <span class="n">kodicom4400r_muxsel</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_KODICOM_4400R_SL</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Bill Brack &lt;wbrack@mmm.com.hk&gt; */</span>
		<span class="cm">/* Note that, for reasons unknown, the &quot;master&quot; BT878A chip (i.e. the</span>
<span class="cm">		* one which controls the analog switch, and must use the card type)</span>
<span class="cm">		* is the 2nd one detected.  The other 3 chips should use this card</span>
<span class="cm">		* type</span>
<span class="cm">		*/</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Kodicom 4400R (slave)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x010000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_gpioirq</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>	<span class="o">=</span> <span class="n">kodicom4400r_muxsel</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="cm">/* ---- card 0x86---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_ADLINK_RTV24</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Michael Henson &lt;mhenson@clarityvi.com&gt; */</span>
		<span class="cm">/* Adlink RTV24 with special unlock codes */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Adlink RTV24&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="cm">/* ---- card 0x87---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_DVICO_FUSIONHDTV_5_LITE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Michael Krufky &lt;mkrufky@m1k.net&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;DViCO FusionHDTV 5 Lite&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_LG_TDVS_H06XF</span><span class="p">,</span> <span class="cm">/* TDVS-H064F */</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x00e00007</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mh">0x00400005</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x00000001</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x00c00007</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>        <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="cm">/* ---- card 0x88---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_ACORP_Y878F</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Mauro Carvalho Chehab &lt;mchehab@infradead.org&gt; */</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Acorp Y878F&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x01fe00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mh">0x001e00</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x018000</span><span class="p">,</span> <span class="mh">0x014000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x002000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_YMEC_TVF66T5_B_DFF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="mh">0xc1</span> <span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="cm">/* ---- card 0x89 ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_CONCEPTRONIC_CTVFMI2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Conceptronic CTVFMi v2&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x001c0007</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_TENA_9533_DI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="cm">/* ---- card 0x8a ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PV_BT878P_2E</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Prolink Pixelview PV-BT878P+ (Rev.2E)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dig_in</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x01fe00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="cm">/* in 4 is digital */</span>
		<span class="cm">/* .digital_mode= DIGITAL_MODE_CAMERA, */</span>
		<span class="p">.</span><span class="n">gpiomux</span>	<span class="o">=</span> <span class="p">{</span> <span class="mh">0x00400</span><span class="p">,</span> <span class="mh">0x10400</span><span class="p">,</span> <span class="mh">0x04400</span><span class="p">,</span> <span class="mh">0x80000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span>	<span class="o">=</span> <span class="mh">0x12400</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_LG_PAL_FM</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="cm">/* ---- card 0x8b ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PV_M4900</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Sérgio Fortier &lt;sergiofortier@yahoo.com.br&gt; */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Prolink PixelView PlayTV MPEG2 PV-M4900&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x3f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="mh">0x2c</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x29</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_YMEC_TVF_5533MF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>     <span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="cm">/* ---- card 0x8c ---------------------------------- */</span>
	<span class="cm">/* Has four Bt878 chips behind a PCI bridge, each chip has:</span>
<span class="cm">	     one external BNC composite input (mux 2)</span>
<span class="cm">	     three internal composite inputs (unknown muxes)</span>
<span class="cm">	     an 18-bit stereo A/D (CS5331A), which has:</span>
<span class="cm">	       one external stereo unblanced (RCA) audio connection</span>
<span class="cm">	       one (or 3?) internal stereo balanced (XLR) audio connection</span>
<span class="cm">	       input is selected via gpio to a 14052B mux</span>
<span class="cm">		 (mask=0x300, unbal=0x000, bal=0x100, ??=0x200,0x300)</span>
<span class="cm">	       gain is controlled via an X9221A chip on the I2C bus @0x28</span>
<span class="cm">	       sample rate is controlled via gpio to an MK1413S</span>
<span class="cm">		 (mask=0x3, 32kHz=0x0, 44.1kHz=0x1, 48kHz=0x2, ??=0x3)</span>
<span class="cm">	     There is neither a tuner nor an svideo input. */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_OSPREY440</span><span class="p">]</span>  <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Osprey 440&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 2, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="cm">/* 3,0,1 are guesses */</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x303</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomute</span>	<span class="o">=</span> <span class="mh">0x000</span><span class="p">,</span> <span class="cm">/* int + 32kHz */</span>
		<span class="p">.</span><span class="n">gpiomux</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x000</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">},</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>     <span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="cm">/* ---- card 0x8d ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_ASOUND_SKYEYE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Asound Skyeye PCTV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_NTSC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="cm">/* ---- card 0x8e ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_SABRENT_TVFM</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Sabrent TV-FM (bttv version)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x108007</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span> 	<span class="o">=</span> <span class="p">{</span> <span class="mi">100000</span><span class="p">,</span> <span class="mi">100002</span><span class="p">,</span> <span class="mi">100002</span><span class="p">,</span> <span class="mi">100000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_TNF_5335MF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/* ---- card 0x8f ---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_HAUPPAUGE_IMPACTVCB</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge ImpactVCB (bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="cm">/* old: 7 */</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="cm">/* Composite 0-3 */</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_MACHTV_MAGICTV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Julian Calaby &lt;julian.calaby@gmail.com&gt;</span>
<span class="cm">		 * Slightly different from original MachTV definition (0x60)</span>

<span class="cm">		 * FIXME: RegSpy says gpiomask should be &quot;0x001c800f&quot;, but it</span>
<span class="cm">		 * stuffs up remote chip. Bug is a pin on the jaecs is not set</span>
<span class="cm">		 * properly (methinks) causing no keyup bits being set */</span>

		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;MagicTV&quot;</span><span class="p">,</span> <span class="cm">/* rebranded MachTV */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_TEMIC_4009FR5_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>     <span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_SSAI_SECURITY</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;SSAI Security Video Interface&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_SSAI_ULTRASOUND</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;SSAI Ultrasound Video Interface&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/* ---- card 0x94---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_DVICO_FUSIONHDTV_2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;DViCO FusionHDTV 2&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_FCV1236D</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x00e00007</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mh">0x00400005</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x00000001</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mh">0x00c00007</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/* ---- card 0x95---------------------------------- */</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_TYPHOON_TVTUNERPCI</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Typhoon TV-Tuner PCI (50684)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x3014f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mh">0x20001</span><span class="p">,</span><span class="mh">0x10001</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span>       <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_PAL_I</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>     <span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_GEOVISION_GV600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* emhn@usb.ve */</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Geovision GV-600&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>		<span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>	<span class="o">=</span> <span class="n">geovision_muxsel</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomux</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_KOZUMI_KTV_01C</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Mauro Lacy &lt;mauro@lacy.com.ar&gt;</span>
<span class="cm">		 * Based on MagicTV and Conceptronic CONTVFMi */</span>

		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Kozumi KTV-01C&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x008007</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span> <span class="p">},</span> <span class="cm">/* CONTVFMi */</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="cm">/* CONTVFMi */</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_PHILIPS_FM1216ME_MK3</span><span class="p">,</span> <span class="cm">/* TCL MK3 */</span>
		<span class="p">.</span><span class="n">tuner_addr</span>     <span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_ENLTV_FM_2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Encore TV Tuner Pro ENL TV-FM-2</span>
<span class="cm">		   Mauro Carvalho Chehab &lt;mchehab@infradead.org */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Encore ENL TV-FM-2&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* bit 6          -&gt; IR disabled</span>
<span class="cm">		   bit 18/17 = 00 -&gt; mute</span>
<span class="cm">			       01 -&gt; enable external audio input</span>
<span class="cm">			       10 -&gt; internal audio input (mono?)</span>
<span class="cm">			       11 -&gt; internal audio input</span>
<span class="cm">		 */</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x060040</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mh">0x60000</span><span class="p">,</span> <span class="mh">0x60000</span><span class="p">,</span> <span class="mh">0x20000</span><span class="p">,</span> <span class="mh">0x20000</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">gpiomute</span> 	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_TCL_MF02GIP_5N</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>     <span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_radio</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_remote</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="p">[</span><span class="n">BTTV_BOARD_VD012</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* D.Heer@Phytec.de */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;PHYTEC VD-012 (bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span> <span class="cm">/* card has no audio */</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="p">[</span><span class="n">BTTV_BOARD_VD012_X1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* D.Heer@Phytec.de */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;PHYTEC VD-012-X1 (bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span> <span class="cm">/* card has no audio */</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="p">[</span><span class="n">BTTV_BOARD_VD012_X2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* D.Heer@Phytec.de */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;PHYTEC VD-012-X2 (bt878)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span> <span class="cm">/* card has no audio */</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="p">[</span><span class="n">BTTV_BOARD_GEOVISION_GV800S</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Bruno Christo &lt;bchristo@inf.ufsm.br&gt;</span>
<span class="cm">		 *</span>
<span class="cm">		 * GeoVision GV-800(S) has 4 Conexant Fusion 878A:</span>
<span class="cm">		 * 	1 audio input  per BT878A = 4 audio inputs</span>
<span class="cm">		 * 	4 video inputs per BT878A = 16 video inputs</span>
<span class="cm">		 * This is the first BT878A chip of the GV-800(S). It&#39;s the</span>
<span class="cm">		 * &quot;master&quot; chip and it controls the video inputs through an</span>
<span class="cm">		 * analog multiplexer (a CD22M3494) via some GPIO pins. The</span>
<span class="cm">		 * slaves should use card type 0x9e (following this one).</span>
<span class="cm">		 * There is a EEPROM on the card which is currently not handled.</span>
<span class="cm">		 * The audio input is not working yet.</span>
<span class="cm">		 */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Geovision GV-800(S) (master)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0xf107f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_gpioirq</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>    <span class="o">=</span> <span class="n">gv800s_muxsel</span><span class="p">,</span>
	<span class="p">},</span>
		<span class="p">[</span><span class="n">BTTV_BOARD_GEOVISION_GV800S_SL</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Bruno Christo &lt;bchristo@inf.ufsm.br&gt;</span>
<span class="cm">		 *</span>
<span class="cm">		 * GeoVision GV-800(S) has 4 Conexant Fusion 878A:</span>
<span class="cm">		 * 	1 audio input  per BT878A = 4 audio inputs</span>
<span class="cm">		 * 	4 video inputs per BT878A = 16 video inputs</span>
<span class="cm">		 * The 3 other BT878A chips are &quot;slave&quot; chips of the GV-800(S)</span>
<span class="cm">		 * and should use this card type.</span>
<span class="cm">		 * The audio input is not working yet.</span>
<span class="cm">		 */</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Geovision GV-800(S) (slave)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 1, */</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>	<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_gpioirq</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>		<span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">no_tda7432</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>    <span class="o">=</span> <span class="n">gv800s_muxsel</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_PV183</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;ProVideo PV183&quot;</span><span class="p">,</span> <span class="cm">/* 0x9f */</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="cm">/* .audio_inputs= 0, */</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
		<span class="p">.</span><span class="n">gpiomux</span>        <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">no_msp34xx</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>            <span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">BTTV_BOARD_TVT_TD3116</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Tongwei Video Technology TD-3116&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">video_inputs</span>   <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpiomask</span>       <span class="o">=</span> <span class="mh">0xc00ff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">muxsel</span>         <span class="o">=</span> <span class="n">MUXSEL</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
		<span class="p">.</span><span class="n">muxsel_hook</span>    <span class="o">=</span> <span class="n">td3116_muxsel</span><span class="p">,</span>
		<span class="p">.</span><span class="n">svhs</span>           <span class="o">=</span> <span class="n">NO_SVHS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pll</span>		<span class="o">=</span> <span class="n">PLL_28</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bttv_num_tvcards</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bttv_tvcards</span><span class="p">);</span>

<span class="cm">/* ----------------------------------------------------------------------- */</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">eeprom_data</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>

<span class="cm">/*</span>
<span class="cm"> * identify card</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">__devinit</span> <span class="nf">bttv_idcard</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">gpiobits</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="n">type</span><span class="p">;</span>

	<span class="cm">/* read PCI subsystem ID */</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">cardid</span>  <span class="o">=</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">pci</span><span class="o">-&gt;</span><span class="n">subsystem_device</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">;</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">cardid</span> <span class="o">|=</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">pci</span><span class="o">-&gt;</span><span class="n">subsystem_vendor</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">!=</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">cardid</span> <span class="o">&amp;&amp;</span> <span class="mh">0xffffffff</span> <span class="o">!=</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">cardid</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* look for the card */</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">type</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">cards</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">id</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">cards</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">id</span>  <span class="o">==</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">cardid</span><span class="p">)</span>
				<span class="n">type</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">type</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
			<span class="cm">/* found it */</span>
			<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: detected: %s [card=%d], PCI subsystem ID is %04x:%04x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">cards</span><span class="p">[</span><span class="n">type</span><span class="p">].</span><span class="n">name</span><span class="p">,</span> <span class="n">cards</span><span class="p">[</span><span class="n">type</span><span class="p">].</span><span class="n">cardnr</span><span class="p">,</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">cardid</span> <span class="o">&amp;</span> <span class="mh">0xffff</span><span class="p">,</span>
				<span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">cardid</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xffff</span><span class="p">);</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">cards</span><span class="p">[</span><span class="n">type</span><span class="p">].</span><span class="n">cardnr</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="cm">/* 404 */</span>
			<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: subsystem: %04x:%04x (UNKNOWN)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">cardid</span> <span class="o">&amp;</span> <span class="mh">0xffff</span><span class="p">,</span>
				<span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">cardid</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xffff</span><span class="p">);</span>
			<span class="n">pr_debug</span><span class="p">(</span><span class="s">&quot;please mail id, board name and the correct card= insmod option to linux-media@vger.kernel.org</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="cm">/* let the user override the autodetected type */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">card</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">bttv_num_tvcards</span><span class="p">)</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="o">=</span><span class="n">card</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">];</span>

	<span class="cm">/* print which card config we are using */</span>
	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: using: %s [card=%d,%s]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">name</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">,</span>
		<span class="n">card</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">bttv_num_tvcards</span>
		<span class="o">?</span> <span class="s">&quot;insmod option&quot;</span> <span class="o">:</span> <span class="s">&quot;autodetected&quot;</span><span class="p">);</span>

	<span class="cm">/* overwrite gpio stuff ?? */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">UNSET</span> <span class="o">==</span> <span class="n">audioall</span> <span class="o">&amp;&amp;</span> <span class="n">UNSET</span> <span class="o">==</span> <span class="n">audiomux</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">UNSET</span> <span class="o">!=</span> <span class="n">audiomux</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
		<span class="n">gpiobits</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bttv_tvcards</span><span class="o">-&gt;</span><span class="n">gpiomux</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">gpiomux</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">audiomux</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
			<span class="n">gpiobits</span> <span class="o">|=</span> <span class="n">audiomux</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">gpiobits</span> <span class="o">=</span> <span class="n">audioall</span><span class="p">;</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bttv_tvcards</span><span class="o">-&gt;</span><span class="n">gpiomux</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">gpiomux</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">audioall</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">gpiomask</span> <span class="o">=</span> <span class="p">(</span><span class="n">UNSET</span> <span class="o">!=</span> <span class="n">gpiomask</span><span class="p">)</span> <span class="o">?</span> <span class="n">gpiomask</span> <span class="o">:</span> <span class="n">gpiobits</span><span class="p">;</span>
	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: gpio config override: mask=0x%x, mux=&quot;</span><span class="p">,</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">gpiomask</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bttv_tvcards</span><span class="o">-&gt;</span><span class="n">gpiomux</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_cont</span><span class="p">(</span><span class="s">&quot;%s0x%x&quot;</span><span class="p">,</span>
			<span class="n">i</span> <span class="o">?</span> <span class="s">&quot;,&quot;</span> <span class="o">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">gpiomux</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
	<span class="p">}</span>
	<span class="n">pr_cont</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * (most) board specific initialisations goes here</span>
<span class="cm"> */</span>

<span class="cm">/* Some Modular Technology cards have an eeprom, but no subsystem ID */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">identify_by_eeprom</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">eeprom_data</span><span class="p">[</span><span class="mi">256</span><span class="p">])</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">type</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">strncmp</span><span class="p">(</span><span class="n">eeprom_data</span><span class="p">,</span><span class="s">&quot;GET MM20xPCTV&quot;</span><span class="p">,</span><span class="mi">13</span><span class="p">))</span>
		<span class="n">type</span> <span class="o">=</span> <span class="n">BTTV_BOARD_MODTEC_205</span><span class="p">;</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">strncmp</span><span class="p">(</span><span class="n">eeprom_data</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span><span class="s">&quot;Picolo&quot;</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
		<span class="n">type</span> <span class="o">=</span> <span class="n">BTTV_BOARD_EURESYS_PICOLO</span><span class="p">;</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">eeprom_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0x84</span> <span class="o">&amp;&amp;</span> <span class="n">eeprom_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">type</span> <span class="o">=</span> <span class="n">BTTV_BOARD_HAUPPAUGE</span><span class="p">;</span> <span class="cm">/* old bt848 */</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">!=</span> <span class="n">type</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">type</span><span class="p">;</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: detected by eeprom: %s [card=%d]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">name</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">flyvideo_gpio</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">gpio</span><span class="p">,</span> <span class="n">has_remote</span><span class="p">,</span> <span class="n">has_radio</span><span class="p">,</span> <span class="n">is_capture_only</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">is_lr90</span><span class="p">,</span> <span class="n">has_tda9820_tda9821</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">tuner_type</span> <span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span> <span class="n">ttype</span><span class="p">;</span>

	<span class="n">gpio_inout</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">udelay</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>  <span class="cm">/* without this we would see the 0x1800 mask */</span>
	<span class="n">gpio</span> <span class="o">=</span> <span class="n">gpio_read</span><span class="p">();</span>
	<span class="cm">/* FIXME: must restore OUR_EN ??? */</span>

	<span class="cm">/* all cards provide GPIO info, some have an additional eeprom</span>
<span class="cm">	 * LR50: GPIO coding can be found lower right CP1 .. CP9</span>
<span class="cm">	 *       CP9=GPIO23 .. CP1=GPIO15; when OPEN, the corresponding GPIO reads 1.</span>
<span class="cm">	 *       GPIO14-12: n.c.</span>
<span class="cm">	 * LR90: GP9=GPIO23 .. GP1=GPIO15 (right above the bt878)</span>

<span class="cm">	 * lowest 3 bytes are remote control codes (no handshake needed)</span>
<span class="cm">	 * xxxFFF: No remote control chip soldered</span>
<span class="cm">	 * xxxF00(LR26/LR50), xxxFE0(LR90): Remote control chip (LVA001 or CF45) soldered</span>
<span class="cm">	 * Note: Some bits are Audio_Mask !</span>
<span class="cm">	 */</span>
	<span class="n">ttype</span> <span class="o">=</span> <span class="p">(</span><span class="n">gpio</span> <span class="o">&amp;</span> <span class="mh">0x0f0000</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">;</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">ttype</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mh">0x0</span>:
		<span class="n">tuner_type</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>  <span class="cm">/* NTSC, e.g. TPI8NSR11P */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x2</span>:
		<span class="n">tuner_type</span> <span class="o">=</span> <span class="mi">39</span><span class="p">;</span> <span class="cm">/* LG NTSC (newer TAPC series) TAPC-H701P */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x4</span>:
		<span class="n">tuner_type</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>  <span class="cm">/* Philips PAL TPI8PSB02P, TPI8PSB12P, TPI8PSB12D or FI1216, FM1216 */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x6</span>:
		<span class="n">tuner_type</span> <span class="o">=</span> <span class="mi">37</span><span class="p">;</span> <span class="cm">/* LG PAL (newer TAPC series) TAPC-G702P */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0xC</span>:
		<span class="n">tuner_type</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>  <span class="cm">/* Philips SECAM(+PAL) FQ1216ME or FI1216MF */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: FlyVideo_gpio: unknown tuner type</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">has_remote</span>          <span class="o">=</span>   <span class="n">gpio</span> <span class="o">&amp;</span> <span class="mh">0x800000</span><span class="p">;</span>
	<span class="n">has_radio</span>	    <span class="o">=</span>   <span class="n">gpio</span> <span class="o">&amp;</span> <span class="mh">0x400000</span><span class="p">;</span>
	<span class="cm">/*   unknown                   0x200000;</span>
<span class="cm">	 *   unknown2                  0x100000; */</span>
	<span class="n">is_capture_only</span>     <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="n">gpio</span> <span class="o">&amp;</span> <span class="mh">0x008000</span><span class="p">);</span> <span class="cm">/* GPIO15 */</span>
	<span class="n">has_tda9820_tda9821</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="n">gpio</span> <span class="o">&amp;</span> <span class="mh">0x004000</span><span class="p">);</span>
	<span class="n">is_lr90</span>             <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="n">gpio</span> <span class="o">&amp;</span> <span class="mh">0x002000</span><span class="p">);</span> <span class="cm">/* else LR26/LR50 (LR38/LR51 f. capture only) */</span>
	<span class="cm">/*</span>
<span class="cm">	 * gpio &amp; 0x001000    output bit for audio routing */</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">is_capture_only</span><span class="p">)</span>
		<span class="n">tuner_type</span> <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">;</span> <span class="cm">/* No tuner present */</span>

	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: FlyVideo Radio=%s RemoteControl=%s Tuner=%d gpio=0x%06x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">has_radio</span> <span class="o">?</span> <span class="s">&quot;yes&quot;</span> <span class="o">:</span> <span class="s">&quot;no&quot;</span><span class="p">,</span>
		<span class="n">has_remote</span> <span class="o">?</span> <span class="s">&quot;yes&quot;</span> <span class="o">:</span> <span class="s">&quot;no&quot;</span><span class="p">,</span> <span class="n">tuner_type</span><span class="p">,</span> <span class="n">gpio</span><span class="p">);</span>
	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: FlyVideo  LR90=%s tda9821/tda9820=%s capture_only=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">is_lr90</span> <span class="o">?</span> <span class="s">&quot;yes&quot;</span> <span class="o">:</span> <span class="s">&quot;no&quot;</span><span class="p">,</span>
		<span class="n">has_tda9820_tda9821</span> <span class="o">?</span> <span class="s">&quot;yes&quot;</span> <span class="o">:</span> <span class="s">&quot;no&quot;</span><span class="p">,</span>
		<span class="n">is_capture_only</span> <span class="o">?</span> <span class="s">&quot;yes&quot;</span> <span class="o">:</span> <span class="s">&quot;no&quot;</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">tuner_type</span> <span class="o">!=</span> <span class="n">UNSET</span><span class="p">)</span> <span class="cm">/* only set if known tuner autodetected, else let insmod option through */</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">tuner_type</span><span class="p">;</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span> <span class="o">=</span> <span class="n">has_radio</span><span class="p">;</span>

	<span class="cm">/* LR90 Audio Routing is done by 2 hef4052, so Audio_Mask has 4 bits: 0x001c80</span>
<span class="cm">	 * LR26/LR50 only has 1 hef4052, Audio_Mask 0x000c00</span>
<span class="cm">	 * Audio options: from tuner, from tda9821/tda9821(mono,stereo,sap), from tda9874, ext., mute */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">has_tda9820_tda9821</span><span class="p">)</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">audio_mode_gpio</span> <span class="o">=</span> <span class="n">lt9415_audio</span><span class="p">;</span>
	<span class="cm">/* todo: if(has_tda9874) btv-&gt;audio_mode_gpio = fv2000s_audio; */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">miro_tunermap</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span>   <span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span>
			       <span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span> <span class="p">};</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">miro_fmtuner</span><span class="p">[]</span>  <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span>
			       <span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span> <span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">miro_pinnacle_gpio</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">id</span><span class="p">,</span><span class="n">msp</span><span class="p">,</span><span class="n">gpio</span><span class="p">;</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">info</span><span class="p">;</span>

	<span class="n">gpio_inout</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">gpio</span> <span class="o">=</span> <span class="n">gpio_read</span><span class="p">();</span>
	<span class="n">id</span>   <span class="o">=</span> <span class="p">((</span><span class="n">gpio</span><span class="o">&gt;&gt;</span><span class="mi">10</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">63</span><span class="p">)</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">msp</span>  <span class="o">=</span> <span class="n">bttv_I2CRead</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">I2C_ADDR_MSP3400</span><span class="p">,</span> <span class="s">&quot;MSP34xx&quot;</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">id</span> <span class="o">&lt;</span> <span class="mi">32</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">miro_tunermap</span><span class="p">[</span><span class="n">id</span><span class="p">];</span>
		<span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="p">(</span><span class="n">gpio</span> <span class="o">&amp;</span> <span class="mh">0x20</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">miro_fmtuner</span><span class="p">[</span><span class="n">id</span><span class="p">])</span> <span class="p">{</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_matchbox</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_we</span>    <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">6</span><span class="p">);</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_most</span>  <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">7</span><span class="p">);</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_clk</span>   <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">);</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_data</span>  <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">9</span><span class="p">);</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_mask</span>  <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">6</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">7</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">9</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">!=</span> <span class="n">msp</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">BTTV_BOARD_MIRO</span><span class="p">)</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">BTTV_BOARD_MIROPRO</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">BTTV_BOARD_PINNACLE</span><span class="p">)</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">BTTV_BOARD_PINNACLEPRO</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: miro: id=%d tuner=%d radio=%s stereo=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">id</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span><span class="p">,</span>
			<span class="o">!</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span> <span class="o">?</span> <span class="s">&quot;no&quot;</span> <span class="o">:</span>
			<span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_matchbox</span> <span class="o">?</span> <span class="s">&quot;matchbox&quot;</span> <span class="o">:</span> <span class="s">&quot;fmtuner&quot;</span><span class="p">),</span>
			<span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">==</span> <span class="n">msp</span><span class="p">)</span> <span class="o">?</span> <span class="s">&quot;no&quot;</span> <span class="o">:</span> <span class="s">&quot;yes&quot;</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="cm">/* new cards with microtune tuner */</span>
		<span class="n">id</span> <span class="o">=</span> <span class="mi">63</span> <span class="o">-</span> <span class="n">id</span><span class="p">;</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="mi">1</span>:
			<span class="n">info</span> <span class="o">=</span> <span class="s">&quot;PAL / mono&quot;</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_INTERCARRIER</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">2</span>:
			<span class="n">info</span> <span class="o">=</span> <span class="s">&quot;PAL+SECAM / stereo&quot;</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_QSS</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">3</span>:
			<span class="n">info</span> <span class="o">=</span> <span class="s">&quot;NTSC / stereo&quot;</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_QSS</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">4</span>:
			<span class="n">info</span> <span class="o">=</span> <span class="s">&quot;PAL+SECAM / mono&quot;</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_QSS</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">5</span>:
			<span class="n">info</span> <span class="o">=</span> <span class="s">&quot;NTSC / mono&quot;</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_INTERCARRIER</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">6</span>:
			<span class="n">info</span> <span class="o">=</span> <span class="s">&quot;NTSC / stereo&quot;</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_INTERCARRIER</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">7</span>:
			<span class="n">info</span> <span class="o">=</span> <span class="s">&quot;PAL / stereo&quot;</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_INTERCARRIER</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="nl">default:</span>
			<span class="n">info</span> <span class="o">=</span> <span class="s">&quot;oops: unknown card&quot;</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">!=</span> <span class="n">msp</span><span class="p">)</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">BTTV_BOARD_PINNACLEPRO</span><span class="p">;</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: pinnacle/mt: id=%d info=</span><span class="se">\&quot;</span><span class="s">%s</span><span class="se">\&quot;</span><span class="s"> radio=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span> <span class="o">?</span> <span class="s">&quot;yes&quot;</span> <span class="o">:</span> <span class="s">&quot;no&quot;</span><span class="p">);</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">TUNER_MT2032</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* GPIO21   L: Buffer aktiv, H: Buffer inaktiv */</span>
<span class="cp">#define LM1882_SYNC_DRIVE     0x200000L</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">init_ids_eagle</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">gpio_inout</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span><span class="mh">0xFFFF37</span><span class="p">);</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="mh">0x200020</span><span class="p">);</span>

	<span class="cm">/* flash strobe inverter ?! */</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="mh">0x200024</span><span class="p">);</span>

	<span class="cm">/* switch sync drive off */</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="n">LM1882_SYNC_DRIVE</span><span class="p">,</span><span class="n">LM1882_SYNC_DRIVE</span><span class="p">);</span>

	<span class="cm">/* set BT848 muxel to 2 */</span>
	<span class="n">btaor</span><span class="p">((</span><span class="mi">2</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="mi">5</span><span class="p">,</span> <span class="o">~</span><span class="p">(</span><span class="mi">2</span><span class="o">&lt;&lt;</span><span class="mi">5</span><span class="p">),</span> <span class="n">BT848_IFORM</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* Muxsel helper for the IDS Eagle.</span>
<span class="cm"> * the eagles does not use the standard muxsel-bits but</span>
<span class="cm"> * has its own multiplexer */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">eagle_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">input</span> <span class="o">&amp;</span> <span class="mi">3</span><span class="p">);</span>

	<span class="cm">/* composite */</span>
	<span class="cm">/* set chroma ADC to sleep */</span>
	<span class="n">btor</span><span class="p">(</span><span class="n">BT848_ADC_C_SLEEP</span><span class="p">,</span> <span class="n">BT848_ADC</span><span class="p">);</span>
	<span class="cm">/* set to composite video */</span>
	<span class="n">btand</span><span class="p">(</span><span class="o">~</span><span class="n">BT848_CONTROL_COMP</span><span class="p">,</span> <span class="n">BT848_E_CONTROL</span><span class="p">);</span>
	<span class="n">btand</span><span class="p">(</span><span class="o">~</span><span class="n">BT848_CONTROL_COMP</span><span class="p">,</span> <span class="n">BT848_O_CONTROL</span><span class="p">);</span>

	<span class="cm">/* switch sync drive off */</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="n">LM1882_SYNC_DRIVE</span><span class="p">,</span><span class="n">LM1882_SYNC_DRIVE</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">gvc1100_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">masks</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x23</span><span class="p">};</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="n">masks</span><span class="p">[</span><span class="n">input</span><span class="o">%</span><span class="mi">4</span><span class="p">]);</span>
<span class="p">}</span>

<span class="cm">/* LMLBT4x initialization - to allow access to GPIO bits for sensors input and</span>
<span class="cm">   alarms output</span>

<span class="cm">   GPIObit    | 10 | 9 | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |</span>
<span class="cm">   assignment | TI | O3|INx| O2| O1|IN4|IN3|IN2|IN1|   |   |</span>

<span class="cm">   IN - sensor inputs, INx - sensor inputs and TI XORed together</span>
<span class="cm">   O1,O2,O3 - alarm outputs (relays)</span>

<span class="cm">   OUT ENABLE   1    1   0  . 1  1   0   0 . 0   0   0    0   = 0x6C0</span>

<span class="cm">*/</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">init_lmlbt4x</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">pr_debug</span><span class="p">(</span><span class="s">&quot;LMLBT4x init</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">btwrite</span><span class="p">(</span><span class="mh">0x000000</span><span class="p">,</span> <span class="n">BT848_GPIO_REG_INP</span><span class="p">);</span>
	<span class="n">gpio_inout</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mh">0x0006C0</span><span class="p">);</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="mh">0x000000</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">sigmaSQ_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">inmux</span> <span class="o">=</span> <span class="n">input</span> <span class="o">%</span> <span class="mi">8</span><span class="p">;</span>
	<span class="n">gpio_inout</span><span class="p">(</span> <span class="mh">0xf</span><span class="p">,</span> <span class="mh">0xf</span> <span class="p">);</span>
	<span class="n">gpio_bits</span><span class="p">(</span> <span class="mh">0xf</span><span class="p">,</span> <span class="n">inmux</span> <span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">sigmaSLC_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">inmux</span> <span class="o">=</span> <span class="n">input</span> <span class="o">%</span> <span class="mi">4</span><span class="p">;</span>
	<span class="n">gpio_inout</span><span class="p">(</span> <span class="mi">3</span><span class="o">&lt;&lt;</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="o">&lt;&lt;</span><span class="mi">9</span> <span class="p">);</span>
	<span class="n">gpio_bits</span><span class="p">(</span> <span class="mi">3</span><span class="o">&lt;&lt;</span><span class="mi">9</span><span class="p">,</span> <span class="n">inmux</span><span class="o">&lt;&lt;</span><span class="mi">9</span> <span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">geovision_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">inmux</span> <span class="o">=</span> <span class="n">input</span> <span class="o">%</span> <span class="mi">16</span><span class="p">;</span>
	<span class="n">gpio_inout</span><span class="p">(</span><span class="mh">0xf</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">);</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0xf</span><span class="p">,</span> <span class="n">inmux</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * The TD3116 has 2 74HC4051 muxes wired to the MUX0 input of a bt878.</span>
<span class="cm"> * The first 74HC4051 has the lower 8 inputs, the second one the higher 8.</span>
<span class="cm"> * The muxes are controlled via a 74HC373 latch which is connected to</span>
<span class="cm"> * GPIOs 0-7. GPIO 18 is connected to the LE signal of the latch.</span>
<span class="cm"> * Q0 of the latch is connected to the Enable (~E) input of the first</span>
<span class="cm"> * 74HC4051. Q1 - Q3 are connected to S0 - S2 of the same 74HC4051.</span>
<span class="cm"> * Q4 - Q7 are connected to the second 74HC4051 in the same way.</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">td3116_latch_value</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="n">u32</span> <span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">gpio_bits</span><span class="p">((</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">18</span><span class="p">)</span> <span class="o">|</span> <span class="mh">0xff</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
	<span class="n">gpio_bits</span><span class="p">((</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">18</span><span class="p">)</span> <span class="o">|</span> <span class="mh">0xff</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">18</span><span class="p">)</span> <span class="o">|</span> <span class="n">value</span><span class="p">);</span>
	<span class="n">udelay</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
	<span class="n">gpio_bits</span><span class="p">((</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">18</span><span class="p">)</span> <span class="o">|</span> <span class="mh">0xff</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">td3116_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u32</span> <span class="n">value</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">highbit</span><span class="p">;</span>

	<span class="n">highbit</span> <span class="o">=</span> <span class="p">(</span><span class="n">input</span> <span class="o">&amp;</span> <span class="mh">0x8</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span> <span class="p">;</span>

	<span class="cm">/* Disable outputs and set value in the mux */</span>
	<span class="n">value</span> <span class="o">=</span> <span class="mh">0x11</span><span class="p">;</span> <span class="cm">/* Disable outputs */</span>
	<span class="n">value</span> <span class="o">|=</span> <span class="p">((</span><span class="n">input</span> <span class="o">&amp;</span> <span class="mh">0x7</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span>  <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">highbit</span><span class="p">);</span>
	<span class="n">td3116_latch_value</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>

	<span class="cm">/* Enable the correct output */</span>
	<span class="n">value</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="mh">0x11</span><span class="p">;</span>
	<span class="n">value</span> <span class="o">|=</span> <span class="p">((</span><span class="n">highbit</span> <span class="o">^</span> <span class="mh">0x1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="n">highbit</span><span class="p">;</span>
	<span class="n">td3116_latch_value</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* ----------------------------------------------------------------------- */</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">bttv_reset_audio</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * BT878A has a audio-reset register.</span>
<span class="cm">	 * 1. This register is an audio reset function but it is in</span>
<span class="cm">	 *    function-0 (video capture) address space.</span>
<span class="cm">	 * 2. It is enough to do this once per power-up of the card.</span>
<span class="cm">	 * 3. There is a typo in the Conexant doc -- it is not at</span>
<span class="cm">	 *    0x5B, but at 0x058. (B is an odd-number, obviously a typo!).</span>
<span class="cm">	 * --//Shrikumar 030609</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">id</span> <span class="o">!=</span> <span class="mi">878</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">bttv_debug</span><span class="p">)</span>
		<span class="n">pr_debug</span><span class="p">(</span><span class="s">&quot;%d: BT878A ARESET</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
	<span class="n">btwrite</span><span class="p">((</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">7</span><span class="p">),</span> <span class="mh">0x058</span><span class="p">);</span>
	<span class="n">udelay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
	<span class="n">btwrite</span><span class="p">(</span>     <span class="mi">0</span><span class="p">,</span> <span class="mh">0x058</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* initialization part one -- before registering i2c bus */</span>
<span class="kt">void</span> <span class="n">__devinit</span> <span class="nf">bttv_init_card1</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_HAUPPAUGE</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_HAUPPAUGE878</span>:
		<span class="n">boot_msp34xx</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_VOODOOTV_200</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_VOODOOTV_FM</span>:
		<span class="n">boot_msp34xx</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_AVERMEDIA98</span>:
		<span class="n">boot_msp34xx</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="mi">11</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_HAUPPAUGEPVR</span>:
		<span class="n">pvr_boot</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_TWINHAN_DST</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_AVDVBT_771</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_PINNACLESAT</span>:
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">use_i2c_hw</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_ADLINK_RTV24</span>:
		<span class="n">init_RTV24</span><span class="p">(</span> <span class="n">btv</span> <span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>

	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">has_dvb</span><span class="p">)</span>
		<span class="n">bttv_reset_audio</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* initialization part two -- after registering i2c bus */</span>
<span class="kt">void</span> <span class="n">__devinit</span> <span class="nf">bttv_init_card2</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">UNSET</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">BTTV_BOARD_UNKNOWN</span> <span class="o">==</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">bttv_readee</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">eeprom_data</span><span class="p">,</span><span class="mh">0xa0</span><span class="p">);</span>
		<span class="n">identify_by_eeprom</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">eeprom_data</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_MIRO</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_MIROPRO</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_PINNACLE</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_PINNACLEPRO</span>:
		<span class="cm">/* miro/pinnacle */</span>
		<span class="n">miro_pinnacle_gpio</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_FLYVIDEO_98</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_MAXI</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_LIFE_FLYKIT</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_FLYVIDEO</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_TYPHOON_TVIEW</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_CHRONOS_VS2</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_FLYVIDEO_98FM</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_FLYVIDEO2000</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_FLYVIDEO98EZ</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_CONFERENCETV</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_LIFETEC_9415</span>:
		<span class="n">flyvideo_gpio</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_HAUPPAUGE</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_HAUPPAUGE878</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_HAUPPAUGEPVR</span>:
		<span class="cm">/* pick up some config infos from the eeprom */</span>
		<span class="n">bttv_readee</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">eeprom_data</span><span class="p">,</span><span class="mh">0xa0</span><span class="p">);</span>
		<span class="n">hauppauge_eeprom</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_AVERMEDIA98</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_AVPHONE98</span>:
		<span class="n">bttv_readee</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">eeprom_data</span><span class="p">,</span><span class="mh">0xa0</span><span class="p">);</span>
		<span class="n">avermedia_eeprom</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_PXC200</span>:
		<span class="n">init_PXC200</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_PICOLO_TETRA_CHIP</span>:
		<span class="n">picolo_tetra_init</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_VHX</span>:
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_matchbox</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_we</span>      <span class="o">=</span> <span class="mh">0x20</span><span class="p">;</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_most</span>    <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_clk</span>     <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_data</span>    <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_mask</span>    <span class="o">=</span> <span class="mh">0x38</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_VOBIS_BOOSTAR</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_TERRATV</span>:
		<span class="n">terratec_active_radio_upgrade</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_MAGICTVIEW061</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">cardid</span> <span class="o">==</span> <span class="mh">0x3002144f</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: radio detected by subsystem id (CPH05x)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_STB2</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">cardid</span> <span class="o">==</span> <span class="mh">0x3060121a</span><span class="p">)</span> <span class="p">{</span>
			<span class="cm">/* Fix up entry for 3DFX VoodooTV 100,</span>
<span class="cm">			   which is an OEM STB card variant. */</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span><span class="o">=</span><span class="n">TUNER_TEMIC_NTSC</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_OSPREY1x0</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_OSPREY1x0_848</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_OSPREY101_848</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_OSPREY1x1</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_OSPREY1x1_SVID</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_OSPREY2xx</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_OSPREY2x0_SVID</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_OSPREY2x0</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_OSPREY440</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_OSPREY500</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_OSPREY540</span>:
	<span class="k">case</span> <span class="n">BTTV_BOARD_OSPREY2000</span>:
		<span class="n">bttv_readee</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">eeprom_data</span><span class="p">,</span><span class="mh">0xa0</span><span class="p">);</span>
		<span class="n">osprey_eeprom</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">eeprom_data</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_IDS_EAGLE</span>:
		<span class="n">init_ids_eagle</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_MODTEC_205</span>:
		<span class="n">bttv_readee</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">eeprom_data</span><span class="p">,</span><span class="mh">0xa0</span><span class="p">);</span>
		<span class="n">modtec_eeprom</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_LMLBT4</span>:
		<span class="n">init_lmlbt4x</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_TIBET_CS16</span>:
		<span class="n">tibetCS16_init</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_KODICOM_4400R</span>:
		<span class="n">kodicom4400r_init</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BTTV_BOARD_GEOVISION_GV800S</span>:
		<span class="n">gv800s_init</span><span class="p">(</span><span class="n">btv</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* pll configuration */</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">id</span><span class="o">==</span><span class="mi">848</span> <span class="o">&amp;&amp;</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">revision</span><span class="o">==</span><span class="mh">0x11</span><span class="p">))</span> <span class="p">{</span>
		<span class="cm">/* defaults from card list */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">PLL_28</span> <span class="o">==</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">pll</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">pll</span><span class="p">.</span><span class="n">pll_ifreq</span><span class="o">=</span><span class="mi">28636363</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">pll</span><span class="p">.</span><span class="n">pll_crystal</span><span class="o">=</span><span class="n">BT848_IFORM_XT0</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">PLL_35</span> <span class="o">==</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">pll</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">pll</span><span class="p">.</span><span class="n">pll_ifreq</span><span class="o">=</span><span class="mi">35468950</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">pll</span><span class="p">.</span><span class="n">pll_crystal</span><span class="o">=</span><span class="n">BT848_IFORM_XT1</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="cm">/* insmod options can override */</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">pll</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">])</span> <span class="p">{</span>
		<span class="k">case</span> <span class="mi">0</span>: <span class="cm">/* none */</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">pll</span><span class="p">.</span><span class="n">pll_crystal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">pll</span><span class="p">.</span><span class="n">pll_ifreq</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">pll</span><span class="p">.</span><span class="n">pll_ofreq</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">1</span>: <span class="cm">/* 28 MHz */</span>
		<span class="k">case</span> <span class="mi">28</span>:
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">pll</span><span class="p">.</span><span class="n">pll_ifreq</span>   <span class="o">=</span> <span class="mi">28636363</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">pll</span><span class="p">.</span><span class="n">pll_ofreq</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">pll</span><span class="p">.</span><span class="n">pll_crystal</span> <span class="o">=</span> <span class="n">BT848_IFORM_XT0</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">2</span>: <span class="cm">/* 35 MHz */</span>
		<span class="k">case</span> <span class="mi">35</span>:
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">pll</span><span class="p">.</span><span class="n">pll_ifreq</span>   <span class="o">=</span> <span class="mi">35468950</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">pll</span><span class="p">.</span><span class="n">pll_ofreq</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">pll</span><span class="p">.</span><span class="n">pll_crystal</span> <span class="o">=</span> <span class="n">BT848_IFORM_XT1</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">pll</span><span class="p">.</span><span class="n">pll_current</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

	<span class="cm">/* tuner configuration (from card list / autodetect / insmod option) */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">UNSET</span> <span class="o">!=</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">tuner_type</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">UNSET</span> <span class="o">==</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span><span class="p">)</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">tuner_type</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">UNSET</span> <span class="o">!=</span> <span class="n">tuner</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">])</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">tuner</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">];</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">==</span> <span class="n">TUNER_ABSENT</span><span class="p">)</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: tuner absent</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">==</span> <span class="n">UNSET</span><span class="p">)</span>
		<span class="n">pr_warn</span><span class="p">(</span><span class="s">&quot;%d: tuner type unset</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: tuner type=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">autoload</span> <span class="o">!=</span> <span class="n">UNSET</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_warn</span><span class="p">(</span><span class="s">&quot;%d: the autoload option is obsolete</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
		<span class="n">pr_warn</span><span class="p">(</span><span class="s">&quot;%d: use option msp3400, tda7432 or tvaudio to override which audio module should be used</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">UNSET</span> <span class="o">==</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span><span class="p">)</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">;</span>

	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">dig</span> <span class="o">=</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">has_dig_in</span> <span class="o">?</span>
		   <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">video_inputs</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">UNSET</span><span class="p">;</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">svhs</span> <span class="o">=</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">svhs</span> <span class="o">==</span> <span class="n">NO_SVHS</span> <span class="o">?</span>
		    <span class="n">UNSET</span> <span class="o">:</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">svhs</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">svhs</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">]</span> <span class="o">!=</span> <span class="n">UNSET</span><span class="p">)</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">svhs</span> <span class="o">=</span> <span class="n">svhs</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">];</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">remote</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">]</span> <span class="o">!=</span> <span class="n">UNSET</span><span class="p">)</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_remote</span> <span class="o">=</span> <span class="n">remote</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">];</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">has_radio</span><span class="p">)</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">has_remote</span><span class="p">)</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_remote</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">no_gpioirq</span><span class="p">)</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">gpioirq</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">volume_gpio</span><span class="p">)</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">volume_gpio</span> <span class="o">=</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">volume_gpio</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">audio_mode_gpio</span><span class="p">)</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">audio_mode_gpio</span> <span class="o">=</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">audio_mode_gpio</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">==</span> <span class="n">TUNER_ABSENT</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>  <span class="cm">/* no tuner or related drivers to load */</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_saa6588</span> <span class="o">||</span> <span class="n">saa6588</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">])</span> <span class="p">{</span>
		<span class="cm">/* Probe for RDS receiver chip */</span>
		<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">addrs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
			<span class="mh">0x20</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span>
			<span class="mh">0x22</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span>
			<span class="n">I2C_CLIENT_END</span>
		<span class="p">};</span>
		<span class="k">struct</span> <span class="n">v4l2_subdev</span> <span class="o">*</span><span class="n">sd</span><span class="p">;</span>

		<span class="n">sd</span> <span class="o">=</span> <span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">v4l2_dev</span><span class="p">,</span>
			<span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">i2c_adap</span><span class="p">,</span> <span class="s">&quot;saa6588&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">addrs</span><span class="p">);</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_saa6588</span> <span class="o">=</span> <span class="p">(</span><span class="n">sd</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="cm">/* try to detect audio/fader chips */</span>

	<span class="cm">/* First check if the user specified the audio chip via a module</span>
<span class="cm">	   option. */</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">audiodev</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">])</span> <span class="p">{</span>
	<span class="k">case</span> <span class="o">-</span><span class="mi">1</span>:
		<span class="k">return</span><span class="p">;</span>	<span class="cm">/* do not load any audio module */</span>

	<span class="k">case</span> <span class="mi">0</span>: <span class="cm">/* autodetect */</span>
		<span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="mi">1</span>: <span class="p">{</span>
		<span class="cm">/* The user specified that we should probe for msp3400 */</span>
		<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">addrs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
			<span class="n">I2C_ADDR_MSP3400</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span>
			<span class="n">I2C_ADDR_MSP3400_ALT</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span>
			<span class="n">I2C_CLIENT_END</span>
		<span class="p">};</span>

		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">sd_msp34xx</span> <span class="o">=</span> <span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">v4l2_dev</span><span class="p">,</span>
			<span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">i2c_adap</span><span class="p">,</span> <span class="s">&quot;msp3400&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">addrs</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">sd_msp34xx</span><span class="p">)</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="k">goto</span> <span class="n">no_audio</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">case</span> <span class="mi">2</span>: <span class="p">{</span>
		<span class="cm">/* The user specified that we should probe for tda7432 */</span>
		<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">addrs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
			<span class="n">I2C_ADDR_TDA7432</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span>
			<span class="n">I2C_CLIENT_END</span>
		<span class="p">};</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">v4l2_dev</span><span class="p">,</span>
				<span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">i2c_adap</span><span class="p">,</span> <span class="s">&quot;tda7432&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">addrs</span><span class="p">))</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="k">goto</span> <span class="n">no_audio</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">case</span> <span class="mi">3</span>: <span class="p">{</span>
		<span class="cm">/* The user specified that we should probe for tvaudio */</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">sd_tvaudio</span> <span class="o">=</span> <span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">v4l2_dev</span><span class="p">,</span>
			<span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">i2c_adap</span><span class="p">,</span> <span class="s">&quot;tvaudio&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tvaudio_addrs</span><span class="p">());</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">sd_tvaudio</span><span class="p">)</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="k">goto</span> <span class="n">no_audio</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="nl">default:</span>
		<span class="n">pr_warn</span><span class="p">(</span><span class="s">&quot;%d: unknown audiodev value!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* There were no overrides, so now we try to discover this through the</span>
<span class="cm">	   card definition */</span>

	<span class="cm">/* probe for msp3400 first: this driver can detect whether or not</span>
<span class="cm">	   it really is a msp3400, so it will return NULL when the device</span>
<span class="cm">	   found is really something else (e.g. a tea6300). */</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">no_msp34xx</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">sd_msp34xx</span> <span class="o">=</span> <span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">v4l2_dev</span><span class="p">,</span>
			<span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">i2c_adap</span><span class="p">,</span> <span class="s">&quot;msp3400&quot;</span><span class="p">,</span>
			<span class="mi">0</span><span class="p">,</span> <span class="n">I2C_ADDRS</span><span class="p">(</span><span class="n">I2C_ADDR_MSP3400</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">));</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">msp34xx_alt</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">sd_msp34xx</span> <span class="o">=</span> <span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">v4l2_dev</span><span class="p">,</span>
			<span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">i2c_adap</span><span class="p">,</span> <span class="s">&quot;msp3400&quot;</span><span class="p">,</span>
			<span class="mi">0</span><span class="p">,</span> <span class="n">I2C_ADDRS</span><span class="p">(</span><span class="n">I2C_ADDR_MSP3400_ALT</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">));</span>
	<span class="p">}</span>

	<span class="cm">/* If we found a msp34xx, then we&#39;re done. */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">sd_msp34xx</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="cm">/* it might also be a tda7432. */</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">no_tda7432</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">addrs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
			<span class="n">I2C_ADDR_TDA7432</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span>
			<span class="n">I2C_CLIENT_END</span>
		<span class="p">};</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">v4l2_dev</span><span class="p">,</span>
				<span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">i2c_adap</span><span class="p">,</span> <span class="s">&quot;tda7432&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">addrs</span><span class="p">))</span>
			<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* Now see if we can find one of the tvaudio devices. */</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">sd_tvaudio</span> <span class="o">=</span> <span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">v4l2_dev</span><span class="p">,</span>
		<span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">i2c_adap</span><span class="p">,</span> <span class="s">&quot;tvaudio&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tvaudio_addrs</span><span class="p">());</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">sd_tvaudio</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

<span class="nl">no_audio:</span>
	<span class="n">pr_warn</span><span class="p">(</span><span class="s">&quot;%d: audio absent, no audio device found!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
<span class="p">}</span>


<span class="cm">/* initialize the tuner */</span>
<span class="kt">void</span> <span class="n">__devinit</span> <span class="nf">bttv_init_tuner</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">ADDR_UNSET</span> <span class="o">!=</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">tuner_addr</span><span class="p">)</span>
		<span class="n">addr</span> <span class="o">=</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">tuner_addr</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">!=</span> <span class="n">TUNER_ABSENT</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">tuner_setup</span> <span class="n">tun_setup</span><span class="p">;</span>

		<span class="cm">/* Load tuner module before issuing tuner config call! */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span><span class="p">)</span>
			<span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">v4l2_dev</span><span class="p">,</span>
				<span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">i2c_adap</span><span class="p">,</span> <span class="s">&quot;tuner&quot;</span><span class="p">,</span>
				<span class="mi">0</span><span class="p">,</span> <span class="n">v4l2_i2c_tuner_addrs</span><span class="p">(</span><span class="n">ADDRS_RADIO</span><span class="p">));</span>
		<span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">v4l2_dev</span><span class="p">,</span>
				<span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">i2c_adap</span><span class="p">,</span> <span class="s">&quot;tuner&quot;</span><span class="p">,</span>
				<span class="mi">0</span><span class="p">,</span> <span class="n">v4l2_i2c_tuner_addrs</span><span class="p">(</span><span class="n">ADDRS_DEMOD</span><span class="p">));</span>
		<span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">v4l2_dev</span><span class="p">,</span>
				<span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">i2c_adap</span><span class="p">,</span> <span class="s">&quot;tuner&quot;</span><span class="p">,</span>
				<span class="mi">0</span><span class="p">,</span> <span class="n">v4l2_i2c_tuner_addrs</span><span class="p">(</span><span class="n">ADDRS_TV_WITH_DEMOD</span><span class="p">));</span>

		<span class="n">tun_setup</span><span class="p">.</span><span class="n">mode_mask</span> <span class="o">=</span> <span class="n">T_ANALOG_TV</span><span class="p">;</span>
		<span class="n">tun_setup</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span><span class="p">;</span>
		<span class="n">tun_setup</span><span class="p">.</span><span class="n">addr</span> <span class="o">=</span> <span class="n">addr</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span><span class="p">)</span>
			<span class="n">tun_setup</span><span class="p">.</span><span class="n">mode_mask</span> <span class="o">|=</span> <span class="n">T_RADIO</span><span class="p">;</span>

		<span class="n">bttv_call_all</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">tuner</span><span class="p">,</span> <span class="n">s_type_addr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tun_setup</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">tda9887_conf</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">v4l2_priv_tun_config</span> <span class="n">tda9887_cfg</span><span class="p">;</span>

		<span class="n">tda9887_cfg</span><span class="p">.</span><span class="n">tuner</span> <span class="o">=</span> <span class="n">TUNER_TDA9887</span><span class="p">;</span>
		<span class="n">tda9887_cfg</span><span class="p">.</span><span class="n">priv</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">tda9887_conf</span><span class="p">;</span>

		<span class="n">bttv_call_all</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">tuner</span><span class="p">,</span> <span class="n">s_config</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tda9887_cfg</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* ----------------------------------------------------------------------- */</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">modtec_eeprom</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span><span class="p">(</span> <span class="n">strncmp</span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="n">eeprom_data</span><span class="p">[</span><span class="mh">0x1e</span><span class="p">]),</span><span class="s">&quot;Temic 4066 FY5&quot;</span><span class="p">,</span><span class="mi">14</span><span class="p">)</span> <span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span><span class="o">=</span><span class="n">TUNER_TEMIC_4066FY5_PAL_I</span><span class="p">;</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: Modtec: Tuner autodetected by eeprom: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">eeprom_data</span><span class="p">[</span><span class="mh">0x1e</span><span class="p">]);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strncmp</span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="n">eeprom_data</span><span class="p">[</span><span class="mh">0x1e</span><span class="p">]),</span><span class="s">&quot;Alps TSBB5&quot;</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span><span class="o">=</span><span class="n">TUNER_ALPS_TSBB5_PAL_I</span><span class="p">;</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: Modtec: Tuner autodetected by eeprom: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">eeprom_data</span><span class="p">[</span><span class="mh">0x1e</span><span class="p">]);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">strncmp</span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="n">eeprom_data</span><span class="p">[</span><span class="mh">0x1e</span><span class="p">]),</span><span class="s">&quot;Philips FM1246&quot;</span><span class="p">,</span><span class="mi">14</span><span class="p">)</span> <span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span><span class="o">=</span><span class="n">TUNER_PHILIPS_NTSC</span><span class="p">;</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: Modtec: Tuner autodetected by eeprom: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">eeprom_data</span><span class="p">[</span><span class="mh">0x1e</span><span class="p">]);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: Modtec: Unknown TunerString: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">eeprom_data</span><span class="p">[</span><span class="mh">0x1e</span><span class="p">]);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__devinit</span> <span class="nf">hauppauge_eeprom</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">tveeprom</span> <span class="n">tv</span><span class="p">;</span>

	<span class="n">tveeprom_hauppauge_analog</span><span class="p">(</span><span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">i2c_client</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tv</span><span class="p">,</span> <span class="n">eeprom_data</span><span class="p">);</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">tv</span><span class="p">.</span><span class="n">tuner_type</span><span class="p">;</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span>  <span class="o">=</span> <span class="n">tv</span><span class="p">.</span><span class="n">has_radio</span><span class="p">;</span>

	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: Hauppauge eeprom indicates model#%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">tv</span><span class="p">.</span><span class="n">model</span><span class="p">);</span>

	<span class="cm">/*</span>
<span class="cm">	 * Some of the 878 boards have duplicate PCI IDs. Switch the board</span>
<span class="cm">	 * type based on model #.</span>
<span class="cm">	 */</span>
	<span class="k">if</span><span class="p">(</span><span class="n">tv</span><span class="p">.</span><span class="n">model</span> <span class="o">==</span> <span class="mi">64900</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: Switching board type from %s to %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span>
			<span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">name</span><span class="p">,</span>
			<span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">BTTV_BOARD_HAUPPAUGE_IMPACTVCB</span><span class="p">].</span><span class="n">name</span><span class="p">);</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">BTTV_BOARD_HAUPPAUGE_IMPACTVCB</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* The 61334 needs the msp3410 to do the radio demod to get sound */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">tv</span><span class="p">.</span><span class="n">model</span> <span class="o">==</span> <span class="mi">61334</span><span class="p">)</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">radio_uses_msp_demodulator</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">terratec_active_radio_upgrade</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">freq</span><span class="p">;</span>

	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_matchbox</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_we</span>      <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_most</span>    <span class="o">=</span> <span class="mh">0x20</span><span class="p">;</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_clk</span>     <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_data</span>    <span class="o">=</span> <span class="mh">0x04</span><span class="p">;</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_mask</span>    <span class="o">=</span> <span class="mh">0x3c</span><span class="p">;</span>

	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_iow</span>     <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span>  <span class="mi">8</span><span class="p">;</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span>     <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span>  <span class="mi">9</span><span class="p">;</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_csel</span>    <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span><span class="p">;</span>

	<span class="n">freq</span><span class="o">=</span><span class="mi">88000</span><span class="o">/</span><span class="mf">62.5</span><span class="p">;</span>
	<span class="n">tea5757_write</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">freq</span> <span class="o">+</span> <span class="mh">0x358</span><span class="p">);</span> <span class="cm">/* write 0x1ed8 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="mh">0x1ed8</span> <span class="o">==</span> <span class="n">tea5757_read</span><span class="p">(</span><span class="n">btv</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: Terratec Active Radio Upgrade found</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_saa6588</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_matchbox</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_radio</span>    <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_matchbox</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>


<span class="cm">/* ----------------------------------------------------------------------- */</span>

<span class="cm">/*</span>
<span class="cm"> * minimal bootstrap for the WinTV/PVR -- upload altera firmware.</span>
<span class="cm"> *</span>
<span class="cm"> * The hcwamc.rbf firmware file is on the Hauppauge driver CD.  Have</span>
<span class="cm"> * a look at Pvr/pvr45xxx.EXE (self-extracting zip archive, can be</span>
<span class="cm"> * unpacked with unzip).</span>
<span class="cm"> */</span>
<span class="cp">#define PVR_GPIO_DELAY		10</span>

<span class="cp">#define BTTV_ALT_DATA		0x000001</span>
<span class="cp">#define BTTV_ALT_DCLK		0x100000</span>
<span class="cp">#define BTTV_ALT_NCONFIG	0x800000</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__devinit</span> <span class="nf">pvr_altera_load</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">micro</span><span class="p">,</span>
				     <span class="n">u32</span> <span class="n">microlen</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u32</span> <span class="n">n</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bits</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="n">gpio_inout</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span><span class="n">BTTV_ALT_DATA</span><span class="o">|</span><span class="n">BTTV_ALT_DCLK</span><span class="o">|</span><span class="n">BTTV_ALT_NCONFIG</span><span class="p">);</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
	<span class="n">udelay</span><span class="p">(</span><span class="n">PVR_GPIO_DELAY</span><span class="p">);</span>

	<span class="n">gpio_write</span><span class="p">(</span><span class="n">BTTV_ALT_NCONFIG</span><span class="p">);</span>
	<span class="n">udelay</span><span class="p">(</span><span class="n">PVR_GPIO_DELAY</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">microlen</span><span class="p">;</span> <span class="n">n</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">bits</span> <span class="o">=</span> <span class="n">micro</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span> <span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">gpio_bits</span><span class="p">(</span><span class="n">BTTV_ALT_DCLK</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">bits</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">)</span>
				<span class="n">gpio_bits</span><span class="p">(</span><span class="n">BTTV_ALT_DATA</span><span class="p">,</span><span class="n">BTTV_ALT_DATA</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">gpio_bits</span><span class="p">(</span><span class="n">BTTV_ALT_DATA</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
			<span class="n">gpio_bits</span><span class="p">(</span><span class="n">BTTV_ALT_DCLK</span><span class="p">,</span><span class="n">BTTV_ALT_DCLK</span><span class="p">);</span>
			<span class="n">bits</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="n">BTTV_ALT_DCLK</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
	<span class="n">udelay</span><span class="p">(</span><span class="n">PVR_GPIO_DELAY</span><span class="p">);</span>

	<span class="cm">/* begin Altera init loop (Not necessary,but doesn&#39;t hurt) */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">30</span> <span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">gpio_bits</span><span class="p">(</span><span class="n">BTTV_ALT_DCLK</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
		<span class="n">gpio_bits</span><span class="p">(</span><span class="n">BTTV_ALT_DCLK</span><span class="p">,</span><span class="n">BTTV_ALT_DCLK</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="n">BTTV_ALT_DCLK</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__devinit</span> <span class="nf">pvr_boot</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">firmware</span> <span class="o">*</span><span class="n">fw_entry</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rc</span><span class="p">;</span>

	<span class="n">rc</span> <span class="o">=</span> <span class="n">request_firmware</span><span class="p">(</span><span class="o">&amp;</span><span class="n">fw_entry</span><span class="p">,</span> <span class="s">&quot;hcwamc.rbf&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">pci</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">rc</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_warn</span><span class="p">(</span><span class="s">&quot;%d: no altera firmware [via hotplug]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
		<span class="k">return</span> <span class="n">rc</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">rc</span> <span class="o">=</span> <span class="n">pvr_altera_load</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">fw_entry</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">,</span> <span class="n">fw_entry</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">);</span>
	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: altera firmware upload %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="p">(</span><span class="n">rc</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="s">&quot;failed&quot;</span> <span class="o">:</span> <span class="s">&quot;ok&quot;</span><span class="p">);</span>
	<span class="n">release_firmware</span><span class="p">(</span><span class="n">fw_entry</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">rc</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* ----------------------------------------------------------------------- */</span>
<span class="cm">/* some osprey specific stuff                                              */</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__devinit</span> <span class="nf">osprey_eeprom</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">ee</span><span class="p">[</span><span class="mi">256</span><span class="p">])</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serial</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">cardid</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

	<span class="cm">/* This code will nevery actually get called in this case.... */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">BTTV_BOARD_UNKNOWN</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* this might be an antique... check for MMAC label in eeprom */</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">strncmp</span><span class="p">(</span><span class="n">ee</span><span class="p">,</span> <span class="s">&quot;MMAC&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">u8</span> <span class="n">checksum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">21</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
				<span class="n">checksum</span> <span class="o">+=</span> <span class="n">ee</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">checksum</span> <span class="o">!=</span> <span class="n">ee</span><span class="p">[</span><span class="mi">21</span><span class="p">])</span>
				<span class="k">return</span><span class="p">;</span>
			<span class="n">cardid</span> <span class="o">=</span> <span class="n">BTTV_BOARD_OSPREY1x0_848</span><span class="p">;</span>
			<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">21</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
				<span class="n">serial</span> <span class="o">*=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">serial</span> <span class="o">+=</span> <span class="n">ee</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">type</span><span class="p">;</span>

		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">4</span><span class="o">*</span><span class="mi">16</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="o">*</span><span class="mi">16</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">16</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">u16</span> <span class="n">checksum</span> <span class="o">=</span> <span class="n">ip_compute_csum</span><span class="p">(</span><span class="n">ee</span> <span class="o">+</span> <span class="n">i</span><span class="p">,</span> <span class="mi">16</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">((</span><span class="n">checksum</span><span class="o">&amp;</span><span class="mh">0xff</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">checksum</span><span class="o">&gt;&gt;</span><span class="mi">8</span><span class="p">)</span> <span class="o">==</span> <span class="mh">0xff</span><span class="p">)</span>
				<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">8</span><span class="o">*</span><span class="mi">16</span><span class="p">)</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="n">ee</span> <span class="o">+=</span> <span class="n">i</span><span class="p">;</span>

		<span class="cm">/* found a valid descriptor */</span>
		<span class="n">type</span> <span class="o">=</span> <span class="n">get_unaligned_be16</span><span class="p">((</span><span class="n">__be16</span> <span class="o">*</span><span class="p">)(</span><span class="n">ee</span><span class="o">+</span><span class="mi">4</span><span class="p">));</span>

		<span class="k">switch</span><span class="p">(</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* 848 based */</span>
		<span class="k">case</span> <span class="mh">0x0004</span>:
			<span class="n">cardid</span> <span class="o">=</span> <span class="n">BTTV_BOARD_OSPREY1x0_848</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mh">0x0005</span>:
			<span class="n">cardid</span> <span class="o">=</span> <span class="n">BTTV_BOARD_OSPREY101_848</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>

		<span class="cm">/* 878 based */</span>
		<span class="k">case</span> <span class="mh">0x0012</span>:
		<span class="k">case</span> <span class="mh">0x0013</span>:
			<span class="n">cardid</span> <span class="o">=</span> <span class="n">BTTV_BOARD_OSPREY1x0</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mh">0x0014</span>:
		<span class="k">case</span> <span class="mh">0x0015</span>:
			<span class="n">cardid</span> <span class="o">=</span> <span class="n">BTTV_BOARD_OSPREY1x1</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mh">0x0016</span>:
		<span class="k">case</span> <span class="mh">0x0017</span>:
		<span class="k">case</span> <span class="mh">0x0020</span>:
			<span class="n">cardid</span> <span class="o">=</span> <span class="n">BTTV_BOARD_OSPREY1x1_SVID</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mh">0x0018</span>:
		<span class="k">case</span> <span class="mh">0x0019</span>:
		<span class="k">case</span> <span class="mh">0x001E</span>:
		<span class="k">case</span> <span class="mh">0x001F</span>:
			<span class="n">cardid</span> <span class="o">=</span> <span class="n">BTTV_BOARD_OSPREY2xx</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mh">0x001A</span>:
		<span class="k">case</span> <span class="mh">0x001B</span>:
			<span class="n">cardid</span> <span class="o">=</span> <span class="n">BTTV_BOARD_OSPREY2x0_SVID</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mh">0x0040</span>:
			<span class="n">cardid</span> <span class="o">=</span> <span class="n">BTTV_BOARD_OSPREY500</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mh">0x0050</span>:
		<span class="k">case</span> <span class="mh">0x0056</span>:
			<span class="n">cardid</span> <span class="o">=</span> <span class="n">BTTV_BOARD_OSPREY540</span><span class="p">;</span>
			<span class="cm">/* bttv_osprey_540_init(btv); */</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mh">0x0060</span>:
		<span class="k">case</span> <span class="mh">0x0070</span>:
		<span class="k">case</span> <span class="mh">0x00A0</span>:
			<span class="n">cardid</span> <span class="o">=</span> <span class="n">BTTV_BOARD_OSPREY2x0</span><span class="p">;</span>
			<span class="cm">/* enable output on select control lines */</span>
			<span class="n">gpio_inout</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span><span class="mh">0x000303</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mh">0x00D8</span>:
			<span class="n">cardid</span> <span class="o">=</span> <span class="n">BTTV_BOARD_OSPREY440</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="nl">default:</span>
			<span class="cm">/* unknown...leave generic, but get serial # */</span>
			<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: osprey eeprom: unknown card type 0x%04x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">type</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">serial</span> <span class="o">=</span> <span class="n">get_unaligned_be32</span><span class="p">((</span><span class="n">__be32</span> <span class="o">*</span><span class="p">)(</span><span class="n">ee</span><span class="o">+</span><span class="mi">6</span><span class="p">));</span>
	<span class="p">}</span>

	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: osprey eeprom: card=%d &#39;%s&#39; serial=%u</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">cardid</span><span class="p">,</span>
		<span class="n">cardid</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">cardid</span><span class="p">].</span><span class="n">name</span> <span class="o">:</span> <span class="s">&quot;Unknown&quot;</span><span class="p">,</span> <span class="n">serial</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">cardid</span><span class="o">&lt;</span><span class="mi">0</span> <span class="o">||</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">cardid</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="cm">/* card type isn&#39;t set correctly */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">card</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">bttv_num_tvcards</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_warn</span><span class="p">(</span><span class="s">&quot;%d: osprey eeprom: Not overriding user specified card type</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: osprey eeprom: Changing card type from %d to %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">,</span> <span class="n">cardid</span><span class="p">);</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">cardid</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* ----------------------------------------------------------------------- */</span>
<span class="cm">/* AVermedia specific stuff, from  bktr_card.c                             */</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">tuner_0_table</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">TUNER_PHILIPS_NTSC</span><span class="p">,</span>  <span class="n">TUNER_PHILIPS_PAL</span> <span class="cm">/* PAL-BG*/</span><span class="p">,</span>
	<span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>   <span class="n">TUNER_PHILIPS_PAL</span> <span class="cm">/* PAL-I*/</span><span class="p">,</span>
	<span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>   <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
	<span class="n">TUNER_PHILIPS_SECAM</span><span class="p">,</span> <span class="n">TUNER_PHILIPS_SECAM</span><span class="p">,</span>
	<span class="n">TUNER_PHILIPS_SECAM</span><span class="p">,</span> <span class="n">TUNER_PHILIPS_PAL</span><span class="p">,</span>
	<span class="n">TUNER_PHILIPS_FM1216ME_MK3</span> <span class="p">};</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">tuner_1_table</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">TUNER_TEMIC_NTSC</span><span class="p">,</span>  <span class="n">TUNER_TEMIC_PAL</span><span class="p">,</span>
	<span class="n">TUNER_TEMIC_PAL</span><span class="p">,</span>   <span class="n">TUNER_TEMIC_PAL</span><span class="p">,</span>
	<span class="n">TUNER_TEMIC_PAL</span><span class="p">,</span>   <span class="n">TUNER_TEMIC_PAL</span><span class="p">,</span>
	<span class="n">TUNER_TEMIC_4012FY5</span><span class="p">,</span> <span class="n">TUNER_TEMIC_4012FY5</span><span class="p">,</span> <span class="cm">/* TUNER_TEMIC_SECAM */</span>
	<span class="n">TUNER_TEMIC_4012FY5</span><span class="p">,</span> <span class="n">TUNER_TEMIC_PAL</span><span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__devinit</span> <span class="nf">avermedia_eeprom</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">tuner_make</span><span class="p">,</span> <span class="n">tuner_tv_fm</span><span class="p">,</span> <span class="n">tuner_format</span><span class="p">,</span> <span class="n">tuner_type</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="n">tuner_make</span>      <span class="o">=</span> <span class="p">(</span><span class="n">eeprom_data</span><span class="p">[</span><span class="mh">0x41</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x7</span><span class="p">);</span>
	<span class="n">tuner_tv_fm</span>     <span class="o">=</span> <span class="p">(</span><span class="n">eeprom_data</span><span class="p">[</span><span class="mh">0x41</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x18</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">;</span>
	<span class="n">tuner_format</span>    <span class="o">=</span> <span class="p">(</span><span class="n">eeprom_data</span><span class="p">[</span><span class="mh">0x42</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0xf0</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">;</span>
	<span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_remote</span> <span class="o">=</span> <span class="p">(</span><span class="n">eeprom_data</span><span class="p">[</span><span class="mh">0x42</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">tuner_make</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">tuner_make</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">tuner_format</span> <span class="o">&lt;=</span> <span class="mh">0x0a</span><span class="p">)</span>
			<span class="n">tuner_type</span> <span class="o">=</span> <span class="n">tuner_0_table</span><span class="p">[</span><span class="n">tuner_format</span><span class="p">];</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">tuner_make</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">tuner_format</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">)</span>
			<span class="n">tuner_type</span> <span class="o">=</span> <span class="n">tuner_1_table</span><span class="p">[</span><span class="n">tuner_format</span><span class="p">];</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">tuner_make</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">tuner_format</span> <span class="o">==</span> <span class="mh">0x09</span><span class="p">)</span>
			<span class="n">tuner_type</span> <span class="o">=</span> <span class="n">TUNER_LG_NTSC_NEW_TAPC</span><span class="p">;</span> <span class="cm">/* TAPC-G702P */</span>

	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: Avermedia eeprom[0x%02x%02x]: tuner=&quot;</span><span class="p">,</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">eeprom_data</span><span class="p">[</span><span class="mh">0x41</span><span class="p">],</span> <span class="n">eeprom_data</span><span class="p">[</span><span class="mh">0x42</span><span class="p">]);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">tuner_type</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">tuner_type</span><span class="p">;</span>
		<span class="n">pr_cont</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="n">tuner_type</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span>
		<span class="n">pr_cont</span><span class="p">(</span><span class="s">&quot;Unknown type&quot;</span><span class="p">);</span>
	<span class="n">pr_cont</span><span class="p">(</span><span class="s">&quot; radio:%s remote control:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
	       <span class="n">tuner_tv_fm</span>     <span class="o">?</span> <span class="s">&quot;yes&quot;</span> <span class="o">:</span> <span class="s">&quot;no&quot;</span><span class="p">,</span>
	       <span class="n">btv</span><span class="o">-&gt;</span><span class="n">has_remote</span> <span class="o">?</span> <span class="s">&quot;yes&quot;</span> <span class="o">:</span> <span class="s">&quot;no&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * For Voodoo TV/FM and Voodoo 200.  These cards&#39; tuners use a TDA9880</span>
<span class="cm"> * analog demod, which is not I2C controlled like the newer and more common</span>
<span class="cm"> * TDA9887 series.  Instead is has two tri-state input pins, S0 and S1,</span>
<span class="cm"> * that control the IF for the video and audio.  Apparently, bttv GPIO</span>
<span class="cm"> * 0x10000 is connected to S0.  S0 low selects a 38.9 MHz VIF for B/G/D/K/I</span>
<span class="cm"> * (i.e., PAL) while high selects 45.75 MHz for M/N (i.e., NTSC).</span>
<span class="cm"> */</span>
<span class="n">u32</span> <span class="nf">bttv_tda9880_setnorm</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="n">u32</span> <span class="n">gpiobits</span><span class="p">)</span>
<span class="p">{</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">audio</span> <span class="o">==</span> <span class="n">TVAUDIO_INPUT_TUNER</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">bttv_tvnorms</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">tvnorm</span><span class="p">].</span><span class="n">v4l2_id</span> <span class="o">&amp;</span> <span class="n">V4L2_STD_MN</span><span class="p">)</span>
			<span class="n">gpiobits</span> <span class="o">|=</span> <span class="mh">0x10000</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="n">gpiobits</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="mh">0x10000</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">gpio_bits</span><span class="p">(</span><span class="n">bttv_tvcards</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">type</span><span class="p">].</span><span class="n">gpiomask</span><span class="p">,</span> <span class="n">gpiobits</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">gpiobits</span><span class="p">;</span>
<span class="p">}</span>


<span class="cm">/*</span>
<span class="cm"> * reset/enable the MSP on some Hauppauge cards</span>
<span class="cm"> * Thanks to Kyösti Mälkki (kmalkki@cc.hut.fi)!</span>
<span class="cm"> *</span>
<span class="cm"> * Hauppauge:  pin  5</span>
<span class="cm"> * Voodoo:     pin 20</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">__devinit</span> <span class="nf">boot_msp34xx</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pin</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">pin</span><span class="p">);</span>

	<span class="n">gpio_inout</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span><span class="n">mask</span><span class="p">);</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
	<span class="n">mdelay</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
	<span class="n">udelay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span><span class="n">mask</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">bttv_gpio</span><span class="p">)</span>
		<span class="n">bttv_gpio_tracking</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="s">&quot;msp34xx&quot;</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">bttv_verbose</span><span class="p">)</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: Hauppauge/Voodoo msp34xx: reset line init [%d]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">pin</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* ----------------------------------------------------------------------- */</span>
<span class="cm">/*  Imagenation L-Model PXC200 Framegrabber */</span>
<span class="cm">/*  This is basically the same procedure as</span>
<span class="cm"> *  used by Alessandro Rubini in his pxc200</span>
<span class="cm"> *  driver, but using BTTV functions */</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__devinit</span> <span class="nf">init_PXC200</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">static</span> <span class="kt">int</span> <span class="n">vals</span><span class="p">[]</span> <span class="n">__devinitdata</span> <span class="o">=</span> <span class="p">{</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x0b</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span>
					    <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span>
					    <span class="mh">0x00</span> <span class="p">};</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">tmp</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">val</span><span class="p">;</span>

	<span class="cm">/* Initialise GPIO-connevted stuff */</span>
	<span class="n">gpio_inout</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">13</span><span class="p">));</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
	<span class="n">udelay</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">13</span><span class="p">);</span>
	<span class="cm">/* GPIO inputs are pulled up, so no need to drive</span>
<span class="cm">	 * reset pin any longer */</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">bttv_gpio</span><span class="p">)</span>
		<span class="n">bttv_gpio_tracking</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="s">&quot;pxc200&quot;</span><span class="p">);</span>

	<span class="cm">/*  we could/should try and reset/control the AD pots? but</span>
<span class="cm">	    right now  we simply  turned off the crushing.  Without</span>
<span class="cm">	    this the AGC drifts drifts</span>
<span class="cm">	    remember the EN is reverse logic --&gt;</span>
<span class="cm">	    setting BT848_ADC_AGC_EN disable the AGC</span>
<span class="cm">	    tboult@eecs.lehigh.edu</span>
<span class="cm">	*/</span>

	<span class="n">btwrite</span><span class="p">(</span><span class="n">BT848_ADC_RESERVED</span><span class="o">|</span><span class="n">BT848_ADC_AGC_EN</span><span class="p">,</span> <span class="n">BT848_ADC</span><span class="p">);</span>

	<span class="cm">/*	Initialise MAX517 DAC */</span>
	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Setting DAC reference voltage level ...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">bttv_I2CWrite</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="mh">0x5E</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mh">0x80</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>

	<span class="cm">/*	Initialise 12C508 PIC */</span>
	<span class="cm">/*	The I2CWrite and I2CRead commmands are actually to the</span>
<span class="cm">	 *	same chips - but the R/W bit is included in the address</span>
<span class="cm">	 *	argument so the numbers are different */</span>


	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Initialising 12C508 PIC chip ...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

	<span class="cm">/* First of all, enable the clock line. This is used in the PXC200-F */</span>
	<span class="n">val</span> <span class="o">=</span> <span class="n">btread</span><span class="p">(</span><span class="n">BT848_GPIO_DMA_CTL</span><span class="p">);</span>
	<span class="n">val</span> <span class="o">|=</span> <span class="n">BT848_GPIO_DMA_CTL_GPCLKMODE</span><span class="p">;</span>
	<span class="n">btwrite</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">BT848_GPIO_DMA_CTL</span><span class="p">);</span>

	<span class="cm">/* Then, push to 0 the reset pin long enough to reset the *</span>
<span class="cm">	 * device same as above for the reset line, but not the same</span>
<span class="cm">	 * value sent to the GPIO-connected stuff</span>
<span class="cm">	 * which one is the good one? */</span>
	<span class="n">gpio_inout</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">2</span><span class="p">));</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
	<span class="n">udelay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">2</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">vals</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">tmp</span><span class="o">=</span><span class="n">bttv_I2CWrite</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="mh">0x1E</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="mi">1</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">tmp</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;I2C Write(%2.2x) = %i</span><span class="se">\n</span><span class="s">I2C Read () = %2.2x</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">,</span>
			       <span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">tmp</span><span class="p">,</span><span class="n">bttv_I2CRead</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="mh">0x1F</span><span class="p">,</span><span class="nb">NULL</span><span class="p">));</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;PXC200 Initialised</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>



<span class="cm">/* ----------------------------------------------------------------------- */</span>
<span class="cm">/*</span>
<span class="cm"> *  The Adlink RTV-24 (aka Angelo) has some special initialisation to unlock</span>
<span class="cm"> *  it. This apparently involves the following procedure for each 878 chip:</span>
<span class="cm"> *</span>
<span class="cm"> *  1) write 0x00C3FEFF to the GPIO_OUT_EN register</span>
<span class="cm"> *</span>
<span class="cm"> *  2)  write to GPIO_DATA</span>
<span class="cm"> *      - 0x0E</span>
<span class="cm"> *      - sleep 1ms</span>
<span class="cm"> *      - 0x10 + 0x0E</span>
<span class="cm"> *      - sleep 10ms</span>
<span class="cm"> *      - 0x0E</span>
<span class="cm"> *     read from GPIO_DATA into buf (uint_32)</span>
<span class="cm"> *      - if ( data&gt;&gt;18 &amp; 0x01 != 0) || ( buf&gt;&gt;19 &amp; 0x01 != 1 )</span>
<span class="cm"> *                 error. ERROR_CPLD_Check_Failed stop.</span>
<span class="cm"> *</span>
<span class="cm"> *  3) write to GPIO_DATA</span>
<span class="cm"> *      - write 0x4400 + 0x0E</span>
<span class="cm"> *      - sleep 10ms</span>
<span class="cm"> *      - write 0x4410 + 0x0E</span>
<span class="cm"> *      - sleep 1ms</span>
<span class="cm"> *      - write 0x0E</span>
<span class="cm"> *     read from GPIO_DATA into buf (uint_32)</span>
<span class="cm"> *      - if ( buf&gt;&gt;18 &amp; 0x01 ) || ( buf&gt;&gt;19 &amp; 0x01 != 0 )</span>
<span class="cm"> *                error. ERROR_CPLD_Check_Failed.</span>
<span class="cm"> */</span>
<span class="cm">/* ----------------------------------------------------------------------- */</span>
<span class="k">static</span> <span class="kt">void</span>
<span class="nf">init_RTV24</span> <span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">dataRead</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">long</span> <span class="n">watchdog_value</span> <span class="o">=</span> <span class="mh">0x0E</span><span class="p">;</span>

	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: Adlink RTV-24 initialisation in progress ...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>

	<span class="n">btwrite</span> <span class="p">(</span><span class="mh">0x00c3feff</span><span class="p">,</span> <span class="n">BT848_GPIO_OUT_EN</span><span class="p">);</span>

	<span class="n">btwrite</span> <span class="p">(</span><span class="mi">0</span> <span class="o">+</span> <span class="n">watchdog_value</span><span class="p">,</span> <span class="n">BT848_GPIO_DATA</span><span class="p">);</span>
	<span class="n">msleep</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>
	<span class="n">btwrite</span> <span class="p">(</span><span class="mh">0x10</span> <span class="o">+</span> <span class="n">watchdog_value</span><span class="p">,</span> <span class="n">BT848_GPIO_DATA</span><span class="p">);</span>
	<span class="n">msleep</span> <span class="p">(</span><span class="mi">10</span><span class="p">);</span>
	<span class="n">btwrite</span> <span class="p">(</span><span class="mi">0</span> <span class="o">+</span> <span class="n">watchdog_value</span><span class="p">,</span> <span class="n">BT848_GPIO_DATA</span><span class="p">);</span>

	<span class="n">dataRead</span> <span class="o">=</span> <span class="n">btread</span> <span class="p">(</span><span class="n">BT848_GPIO_DATA</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">((((</span><span class="n">dataRead</span> <span class="o">&gt;&gt;</span> <span class="mi">18</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="p">(((</span><span class="n">dataRead</span> <span class="o">&gt;&gt;</span> <span class="mi">19</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: Adlink RTV-24 initialisation(1) ERROR_CPLD_Check_Failed (read %d)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">dataRead</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">btwrite</span> <span class="p">(</span><span class="mh">0x4400</span> <span class="o">+</span> <span class="n">watchdog_value</span><span class="p">,</span> <span class="n">BT848_GPIO_DATA</span><span class="p">);</span>
	<span class="n">msleep</span> <span class="p">(</span><span class="mi">10</span><span class="p">);</span>
	<span class="n">btwrite</span> <span class="p">(</span><span class="mh">0x4410</span> <span class="o">+</span> <span class="n">watchdog_value</span><span class="p">,</span> <span class="n">BT848_GPIO_DATA</span><span class="p">);</span>
	<span class="n">msleep</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>
	<span class="n">btwrite</span> <span class="p">(</span><span class="n">watchdog_value</span><span class="p">,</span> <span class="n">BT848_GPIO_DATA</span><span class="p">);</span>
	<span class="n">msleep</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>
	<span class="n">dataRead</span> <span class="o">=</span> <span class="n">btread</span> <span class="p">(</span><span class="n">BT848_GPIO_DATA</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">((((</span><span class="n">dataRead</span> <span class="o">&gt;&gt;</span> <span class="mi">18</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="p">(((</span><span class="n">dataRead</span> <span class="o">&gt;&gt;</span> <span class="mi">19</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: Adlink RTV-24 initialisation(2) ERROR_CPLD_Check_Failed (read %d)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">dataRead</span><span class="p">);</span>

		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: Adlink RTV-24 initialisation complete</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
<span class="p">}</span>



<span class="cm">/* ----------------------------------------------------------------------- */</span>
<span class="cm">/* Miro Pro radio stuff -- the tea5757 is connected to some GPIO ports     */</span>
<span class="cm">/*</span>
<span class="cm"> * Copyright (c) 1999 Csaba Halasz &lt;qgehali@uni-miskolc.hu&gt;</span>
<span class="cm"> * This code is placed under the terms of the GNU General Public License</span>
<span class="cm"> *</span>
<span class="cm"> * Brutally hacked by Dan Sheridan &lt;dan.sheridan@contact.org.uk&gt; djs52 8/3/00</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">bus_low</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">bit</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">gpio_bits</span><span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_iow</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_csel</span><span class="p">,</span>
			  <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_iow</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_csel</span><span class="p">);</span>
		<span class="n">udelay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">gpio_bits</span><span class="p">(</span><span class="n">bit</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
	<span class="n">udelay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">gpio_bits</span><span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_iow</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_csel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">udelay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">bus_high</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">bit</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">gpio_bits</span><span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_iow</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_csel</span><span class="p">,</span>
			  <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_iow</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_csel</span><span class="p">);</span>
		<span class="n">udelay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">gpio_bits</span><span class="p">(</span><span class="n">bit</span><span class="p">,</span><span class="n">bit</span><span class="p">);</span>
	<span class="n">udelay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">gpio_bits</span><span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_iow</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_csel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">udelay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">bus_in</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">bit</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">gpio_bits</span><span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_iow</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_csel</span><span class="p">,</span>
			  <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_iow</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_csel</span><span class="p">);</span>
		<span class="n">udelay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

		<span class="n">gpio_bits</span><span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_iow</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_csel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">udelay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">gpio_read</span><span class="p">()</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">bit</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* TEA5757 register bits */</span>
<span class="cp">#define TEA_FREQ		0:14</span>
<span class="cp">#define TEA_BUFFER		15:15</span>

<span class="cp">#define TEA_SIGNAL_STRENGTH	16:17</span>

<span class="cp">#define TEA_PORT1		18:18</span>
<span class="cp">#define TEA_PORT0		19:19</span>

<span class="cp">#define TEA_BAND		20:21</span>
<span class="cp">#define TEA_BAND_FM		0</span>
<span class="cp">#define TEA_BAND_MW		1</span>
<span class="cp">#define TEA_BAND_LW		2</span>
<span class="cp">#define TEA_BAND_SW		3</span>

<span class="cp">#define TEA_MONO		22:22</span>
<span class="cp">#define TEA_ALLOW_STEREO	0</span>
<span class="cp">#define TEA_FORCE_MONO		1</span>

<span class="cp">#define TEA_SEARCH_DIRECTION	23:23</span>
<span class="cp">#define TEA_SEARCH_DOWN		0</span>
<span class="cp">#define TEA_SEARCH_UP		1</span>

<span class="cp">#define TEA_STATUS		24:24</span>
<span class="cp">#define TEA_STATUS_TUNED	0</span>
<span class="cp">#define TEA_STATUS_SEARCHING	1</span>

<span class="cm">/* Low-level stuff */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">tea5757_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">timeout</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="cm">/* better safe than sorry */</span>
	<span class="n">gpio_inout</span><span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_mask</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_clk</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_we</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">gpio_bits</span><span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_iow</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_csel</span><span class="p">,</span>
			  <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_iow</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_csel</span><span class="p">);</span>
		<span class="n">udelay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">bttv_gpio</span><span class="p">)</span>
		<span class="n">bttv_gpio_tracking</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="s">&quot;tea5757 read&quot;</span><span class="p">);</span>

	<span class="n">bus_low</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_we</span><span class="p">);</span>
	<span class="n">bus_low</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_clk</span><span class="p">);</span>

	<span class="n">udelay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
	<span class="n">timeout</span><span class="o">=</span> <span class="n">jiffies</span> <span class="o">+</span> <span class="n">msecs_to_jiffies</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>

	<span class="cm">/* wait for DATA line to go low; error if it doesn&#39;t */</span>
	<span class="k">while</span> <span class="p">(</span><span class="n">bus_in</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_data</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">time_before</span><span class="p">(</span><span class="n">jiffies</span><span class="p">,</span> <span class="n">timeout</span><span class="p">))</span>
		<span class="n">schedule</span><span class="p">();</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">bus_in</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_data</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">pr_warn</span><span class="p">(</span><span class="s">&quot;%d: tea5757: read timeout</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">dprintk</span><span class="p">(</span><span class="s">&quot;%d: tea5757:&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">24</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">udelay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
		<span class="n">bus_high</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_clk</span><span class="p">);</span>
		<span class="n">udelay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
		<span class="n">dprintk_cont</span><span class="p">(</span><span class="s">&quot;%c&quot;</span><span class="p">,</span>
			     <span class="n">bus_in</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_most</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="sc">&#39;T&#39;</span> <span class="o">:</span> <span class="sc">&#39;-&#39;</span><span class="p">);</span>
		<span class="n">bus_low</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_clk</span><span class="p">);</span>
		<span class="n">value</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">value</span> <span class="o">|=</span> <span class="p">(</span><span class="n">bus_in</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="o">?</span><span class="mi">0</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>  <span class="cm">/* MSB first */</span>
		<span class="n">dprintk_cont</span><span class="p">(</span><span class="s">&quot;%c&quot;</span><span class="p">,</span>
			     <span class="n">bus_in</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_most</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="sc">&#39;S&#39;</span> <span class="o">:</span> <span class="sc">&#39;M&#39;</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">dprintk_cont</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">dprintk</span><span class="p">(</span><span class="s">&quot;%d: tea5757: read 0x%X</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">tea5757_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">reg</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>

	<span class="n">gpio_inout</span><span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_mask</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_clk</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_we</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_data</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">gpio_bits</span><span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_iow</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_csel</span><span class="p">,</span>
			  <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_ior</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_iow</span> <span class="o">|</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_csel</span><span class="p">);</span>
		<span class="n">udelay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">bttv_gpio</span><span class="p">)</span>
		<span class="n">bttv_gpio_tracking</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="s">&quot;tea5757 write&quot;</span><span class="p">);</span>

	<span class="n">dprintk</span><span class="p">(</span><span class="s">&quot;%d: tea5757: write 0x%X</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
	<span class="n">bus_low</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_clk</span><span class="p">);</span>
	<span class="n">bus_high</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_we</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">25</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">reg</span> <span class="o">&amp;</span> <span class="mh">0x1000000</span><span class="p">)</span>
			<span class="n">bus_high</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_data</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="n">bus_low</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_data</span><span class="p">);</span>
		<span class="n">reg</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">bus_high</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_clk</span><span class="p">);</span>
		<span class="n">udelay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="n">bus_low</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_clk</span><span class="p">);</span>
		<span class="n">udelay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">bus_low</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_we</span><span class="p">);</span>  <span class="cm">/* unmute !!! */</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">tea5757_set_freq</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">freq</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">dprintk</span><span class="p">(</span><span class="s">&quot;tea5757_set_freq %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">freq</span><span class="p">);</span>
	<span class="n">tea5757_write</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">freq</span> <span class="o">+</span> <span class="mh">0x358</span><span class="p">);</span> <span class="cm">/* add 10.7MHz (see docs) */</span>
<span class="p">}</span>

<span class="cm">/* RemoteVision MX (rv605) muxsel helper [Miguel Freitas]</span>
<span class="cm"> *</span>
<span class="cm"> * This is needed because rv605 don&#39;t use a normal multiplex, but a crosspoint</span>
<span class="cm"> * switch instead (CD22M3494E). This IC can have multiple active connections</span>
<span class="cm"> * between Xn (input) and Yn (output) pins. We need to clear any existing</span>
<span class="cm"> * connection prior to establish a new one, pulsing the STROBE pin.</span>
<span class="cm"> *</span>
<span class="cm"> * The board hardwire Y0 (xpoint) to MUX1 and MUXOUT to Yin.</span>
<span class="cm"> * GPIO pins are wired as:</span>
<span class="cm"> *  GPIO[0:3] - AX[0:3] (xpoint) - P1[0:3] (microcontroller)</span>
<span class="cm"> *  GPIO[4:6] - AY[0:2] (xpoint) - P1[4:6] (microcontroller)</span>
<span class="cm"> *  GPIO[7]   - DATA (xpoint)    - P1[7] (microcontroller)</span>
<span class="cm"> *  GPIO[8]   -                  - P3[5] (microcontroller)</span>
<span class="cm"> *  GPIO[9]   - RESET (xpoint)   - P3[6] (microcontroller)</span>
<span class="cm"> *  GPIO[10]  - STROBE (xpoint)  - P3[7] (microcontroller)</span>
<span class="cm"> *  GPINTR    -                  - P3[4] (microcontroller)</span>
<span class="cm"> *</span>
<span class="cm"> * The microcontroller is a 80C32 like. It should be possible to change xpoint</span>
<span class="cm"> * configuration either directly (as we are doing) or using the microcontroller</span>
<span class="cm"> * which is also wired to I2C interface. I have no further info on the</span>
<span class="cm"> * microcontroller features, one would need to disassembly the firmware.</span>
<span class="cm"> * note: the vendor refused to give any information on this product, all</span>
<span class="cm"> *       that stuff was found using a multimeter! :)</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">rv605_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">static</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">muxgpio</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mh">0x3</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">,</span> <span class="mh">0x2</span><span class="p">,</span> <span class="mh">0x4</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">,</span> <span class="mh">0x7</span><span class="p">,</span> <span class="mh">0xe</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span>
				      <span class="mh">0xd</span><span class="p">,</span> <span class="mh">0xb</span><span class="p">,</span> <span class="mh">0xc</span><span class="p">,</span> <span class="mh">0x6</span><span class="p">,</span> <span class="mh">0x9</span><span class="p">,</span> <span class="mh">0x5</span><span class="p">,</span> <span class="mh">0x8</span><span class="p">,</span> <span class="mh">0xa</span> <span class="p">};</span>

	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0x07f</span><span class="p">,</span> <span class="n">muxgpio</span><span class="p">[</span><span class="n">input</span><span class="p">]);</span>

	<span class="cm">/* reset all conections */</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0x200</span><span class="p">,</span><span class="mh">0x200</span><span class="p">);</span>
	<span class="n">mdelay</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0x200</span><span class="p">,</span><span class="mh">0x000</span><span class="p">);</span>
	<span class="n">mdelay</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

	<span class="cm">/* create a new connection */</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0x480</span><span class="p">,</span><span class="mh">0x480</span><span class="p">);</span>
	<span class="n">mdelay</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0x480</span><span class="p">,</span><span class="mh">0x080</span><span class="p">);</span>
	<span class="n">mdelay</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* Tibet Systems &#39;Progress DVR&#39; CS16 muxsel helper [Chris Fanning]</span>
<span class="cm"> *</span>
<span class="cm"> * The CS16 (available on eBay cheap) is a PCI board with four Fusion</span>
<span class="cm"> * 878A chips, a PCI bridge, an Atmel microcontroller, four sync separator</span>
<span class="cm"> * chips, ten eight input analog multiplexors, a not chip and a few</span>
<span class="cm"> * other components.</span>
<span class="cm"> *</span>
<span class="cm"> * 16 inputs on a secondary bracket are provided and can be selected</span>
<span class="cm"> * from each of the four capture chips.  Two of the eight input</span>
<span class="cm"> * multiplexors are used to select from any of the 16 input signals.</span>
<span class="cm"> *</span>
<span class="cm"> * Unsupported hardware capabilities:</span>
<span class="cm"> *  . A video output monitor on the secondary bracket can be selected from</span>
<span class="cm"> *    one of the 878A chips.</span>
<span class="cm"> *  . Another passthrough but I haven&#39;t spent any time investigating it.</span>
<span class="cm"> *  . Digital I/O (logic level connected to GPIO) is available from an</span>
<span class="cm"> *    onboard header.</span>
<span class="cm"> *</span>
<span class="cm"> * The on chip input mux should always be set to 2.</span>
<span class="cm"> * GPIO[16:19] - Video input selection</span>
<span class="cm"> * GPIO[0:3]   - Video output monitor select (only available from one 878A)</span>
<span class="cm"> * GPIO[?:?]   - Digital I/O.</span>
<span class="cm"> *</span>
<span class="cm"> * There is an ATMEL microcontroller with an 8031 core on board.  I have not</span>
<span class="cm"> * determined what function (if any) it provides.  With the microcontroller</span>
<span class="cm"> * and sync separator chips a guess is that it might have to do with video</span>
<span class="cm"> * switching and maybe some digital I/O.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">tibetCS16_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* video mux */</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0x0f0000</span><span class="p">,</span> <span class="n">input</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">tibetCS16_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* enable gpio bits, mask obtained via btSpy */</span>
	<span class="n">gpio_inout</span><span class="p">(</span><span class="mh">0xffffff</span><span class="p">,</span> <span class="mh">0x0f7fff</span><span class="p">);</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="mh">0x0f7fff</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * The following routines for the Kodicom-4400r get a little mind-twisting.</span>
<span class="cm"> * There is a &quot;master&quot; controller and three &quot;slave&quot; controllers, together</span>
<span class="cm"> * an analog switch which connects any of 16 cameras to any of the BT87A&#39;s.</span>
<span class="cm"> * The analog switch is controlled by the &quot;master&quot;, but the detection order</span>
<span class="cm"> * of the four BT878A chips is in an order which I just don&#39;t understand.</span>
<span class="cm"> * The &quot;master&quot; is actually the second controller to be detected.  The</span>
<span class="cm"> * logic on the board uses logical numbers for the 4 controllers, but</span>
<span class="cm"> * those numbers are different from the detection sequence.  When working</span>
<span class="cm"> * with the analog switch, we need to &quot;map&quot; from the detection sequence</span>
<span class="cm"> * over to the board&#39;s logical controller number.  This mapping sequence</span>
<span class="cm"> * is {3, 0, 2, 1}, i.e. the first controller to be detected is logical</span>
<span class="cm"> * unit 3, the second (which is the master) is logical unit 0, etc.</span>
<span class="cm"> * We need to maintain the status of the analog switch (which of the 16</span>
<span class="cm"> * cameras is connected to which of the 4 controllers).  Rather than</span>
<span class="cm"> * add to the bttv structure for this, we use the data reserved for</span>
<span class="cm"> * the mbox (unused for this card type).</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * First a routine to set the analog switch, which controls which camera</span>
<span class="cm"> * is routed to which controller.  The switch comprises an X-address</span>
<span class="cm"> * (gpio bits 0-3, representing the camera, ranging from 0-15), and a</span>
<span class="cm"> * Y-address (gpio bits 4-6, representing the controller, ranging from 0-3).</span>
<span class="cm"> * A data value (gpio bit 7) of &#39;1&#39; enables the switch, and &#39;0&#39; disables</span>
<span class="cm"> * the switch.  A STROBE bit (gpio bit 8) latches the data value into the</span>
<span class="cm"> * specified address.  The idea is to set the address and data, then bring</span>
<span class="cm"> * STROBE high, and finally bring STROBE back to low.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">kodicom4400r_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span>
			       <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">xaddr</span><span class="p">,</span>
			       <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">yaddr</span><span class="p">,</span>
			       <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">udata</span><span class="p">;</span>

	<span class="n">udata</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">)</span> <span class="o">|</span> <span class="p">((</span><span class="n">yaddr</span><span class="o">&amp;</span><span class="mi">3</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">xaddr</span><span class="o">&amp;</span><span class="mh">0xf</span><span class="p">);</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0x1ff</span><span class="p">,</span> <span class="n">udata</span><span class="p">);</span>		<span class="cm">/* write ADDR and DAT */</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0x1ff</span><span class="p">,</span> <span class="n">udata</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">));</span>	<span class="cm">/* strobe high */</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0x1ff</span><span class="p">,</span> <span class="n">udata</span><span class="p">);</span>		<span class="cm">/* strobe low */</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Next the mux select.  Both the &quot;master&quot; and &quot;slave&quot; &#39;cards&#39; (controllers)</span>
<span class="cm"> * use this routine.  The routine finds the &quot;master&quot; for the card, maps</span>
<span class="cm"> * the controller number from the detected position over to the logical</span>
<span class="cm"> * number, writes the appropriate data to the analog switch, and housekeeps</span>
<span class="cm"> * the local copy of the switch information.  The parameter &#39;input&#39; is the</span>
<span class="cm"> * requested camera number (0 - 15).</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">kodicom4400r_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">sw_status</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">xaddr</span><span class="p">,</span> <span class="n">yaddr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">mctlr</span><span class="p">;</span>
	<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">map</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">};</span>

	<span class="n">mctlr</span> <span class="o">=</span> <span class="n">master</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">];</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">mctlr</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>	<span class="cm">/* ignore if master not yet detected */</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">yaddr</span> <span class="o">=</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span> <span class="o">-</span> <span class="n">mctlr</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">3</span><span class="p">;</span> <span class="cm">/* the &#39;&amp;&#39; is for safety */</span>
	<span class="n">yaddr</span> <span class="o">=</span> <span class="n">map</span><span class="p">[</span><span class="n">yaddr</span><span class="p">];</span>
	<span class="n">sw_status</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)(</span><span class="o">&amp;</span><span class="n">mctlr</span><span class="o">-&gt;</span><span class="n">mbox_we</span><span class="p">);</span>
	<span class="n">xaddr</span> <span class="o">=</span> <span class="n">input</span> <span class="o">&amp;</span> <span class="mh">0xf</span><span class="p">;</span>
	<span class="cm">/* Check if the controller/camera pair has changed, else ignore */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">sw_status</span><span class="p">[</span><span class="n">yaddr</span><span class="p">]</span> <span class="o">!=</span> <span class="n">xaddr</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="cm">/* &quot;open&quot; the old switch, &quot;close&quot; the new one, save the new */</span>
		<span class="n">kodicom4400r_write</span><span class="p">(</span><span class="n">mctlr</span><span class="p">,</span> <span class="n">sw_status</span><span class="p">[</span><span class="n">yaddr</span><span class="p">],</span> <span class="n">yaddr</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">sw_status</span><span class="p">[</span><span class="n">yaddr</span><span class="p">]</span> <span class="o">=</span> <span class="n">xaddr</span><span class="p">;</span>
		<span class="n">kodicom4400r_write</span><span class="p">(</span><span class="n">mctlr</span><span class="p">,</span> <span class="n">xaddr</span><span class="p">,</span> <span class="n">yaddr</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * During initialisation, we need to reset the analog switch.  We</span>
<span class="cm"> * also preset the switch to map the 4 connectors on the card to the</span>
<span class="cm"> * *user&#39;s* (see above description of kodicom4400r_muxsel) channels</span>
<span class="cm"> * 0 through 3</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">kodicom4400r_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">sw_status</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)(</span><span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_we</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">ix</span><span class="p">;</span>

	<span class="n">gpio_inout</span><span class="p">(</span><span class="mh">0x0003ff</span><span class="p">,</span> <span class="mh">0x0003ff</span><span class="p">);</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">9</span><span class="p">);</span>	<span class="cm">/* reset MUX */</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* Preset camera 0 to the 4 controllers */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">ix</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">ix</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">ix</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">sw_status</span><span class="p">[</span><span class="n">ix</span><span class="p">]</span> <span class="o">=</span> <span class="n">ix</span><span class="p">;</span>
		<span class="n">kodicom4400r_write</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">ix</span><span class="p">,</span> <span class="n">ix</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="cm">/*</span>
<span class="cm">	 * Since this is the &quot;master&quot;, we need to set up the</span>
<span class="cm">	 * other three controller chips&#39; pointers to this structure</span>
<span class="cm">	 * for later use in the muxsel routine.</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="o">&lt;</span><span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="o">&gt;</span><span class="n">BTTV_MAX</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span>
	    <span class="k">return</span><span class="p">;</span>
	<span class="n">master</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">btv</span><span class="p">;</span>
	<span class="n">master</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">]</span>   <span class="o">=</span> <span class="n">btv</span><span class="p">;</span>
	<span class="n">master</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">btv</span><span class="p">;</span>
	<span class="n">master</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">btv</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* The Grandtec X-Guard framegrabber card uses two Dual 4-channel</span>
<span class="cm"> * video multiplexers to provide up to 16 video inputs. These</span>
<span class="cm"> * multiplexers are controlled by the lower 8 GPIO pins of the</span>
<span class="cm"> * bt878. The multiplexers probably Pericom PI5V331Q or similar.</span>

<span class="cm"> * xxx0 is pin xxx of multiplexer U5,</span>
<span class="cm"> * yyy1 is pin yyy of multiplexer U2</span>
<span class="cm"> */</span>
<span class="cp">#define ENA0    0x01</span>
<span class="cp">#define ENB0    0x02</span>
<span class="cp">#define ENA1    0x04</span>
<span class="cp">#define ENB1    0x08</span>

<span class="cp">#define IN10    0x10</span>
<span class="cp">#define IN00    0x20</span>
<span class="cp">#define IN11    0x40</span>
<span class="cp">#define IN01    0x80</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">xguard_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">masks</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="n">ENB0</span><span class="p">,</span> <span class="n">ENB0</span><span class="o">|</span><span class="n">IN00</span><span class="p">,</span> <span class="n">ENB0</span><span class="o">|</span><span class="n">IN10</span><span class="p">,</span> <span class="n">ENB0</span><span class="o">|</span><span class="n">IN00</span><span class="o">|</span><span class="n">IN10</span><span class="p">,</span>
		<span class="n">ENA0</span><span class="p">,</span> <span class="n">ENA0</span><span class="o">|</span><span class="n">IN00</span><span class="p">,</span> <span class="n">ENA0</span><span class="o">|</span><span class="n">IN10</span><span class="p">,</span> <span class="n">ENA0</span><span class="o">|</span><span class="n">IN00</span><span class="o">|</span><span class="n">IN10</span><span class="p">,</span>
		<span class="n">ENB1</span><span class="p">,</span> <span class="n">ENB1</span><span class="o">|</span><span class="n">IN01</span><span class="p">,</span> <span class="n">ENB1</span><span class="o">|</span><span class="n">IN11</span><span class="p">,</span> <span class="n">ENB1</span><span class="o">|</span><span class="n">IN01</span><span class="o">|</span><span class="n">IN11</span><span class="p">,</span>
		<span class="n">ENA1</span><span class="p">,</span> <span class="n">ENA1</span><span class="o">|</span><span class="n">IN01</span><span class="p">,</span> <span class="n">ENA1</span><span class="o">|</span><span class="n">IN11</span><span class="p">,</span> <span class="n">ENA1</span><span class="o">|</span><span class="n">IN01</span><span class="o">|</span><span class="n">IN11</span><span class="p">,</span>
	<span class="p">};</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="n">masks</span><span class="p">[</span><span class="n">input</span><span class="o">%</span><span class="mi">16</span><span class="p">]);</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">picolo_tetra_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/*This is the video input redirection fonctionality : I DID NOT USED IT. */</span>
	<span class="n">btwrite</span> <span class="p">(</span><span class="mh">0x08</span><span class="o">&lt;&lt;</span><span class="mi">16</span><span class="p">,</span><span class="n">BT848_GPIO_DATA</span><span class="p">);</span><span class="cm">/*GPIO[19] [==&gt; 4053 B+C] set to 1 */</span>
	<span class="n">btwrite</span> <span class="p">(</span><span class="mh">0x04</span><span class="o">&lt;&lt;</span><span class="mi">16</span><span class="p">,</span><span class="n">BT848_GPIO_DATA</span><span class="p">);</span><span class="cm">/*GPIO[18] [==&gt; 4053 A]  set to 1*/</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">picolo_tetra_muxsel</span> <span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span><span class="o">*</span> <span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>

	<span class="n">dprintk</span><span class="p">(</span><span class="s">&quot;%d : picolo_tetra_muxsel =&gt;  input = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">input</span><span class="p">);</span>
	<span class="cm">/*Just set the right path in the analog multiplexers : channel 1 -&gt; 4 ==&gt; Analog Mux ==&gt; MUX0*/</span>
	<span class="cm">/*GPIO[20]&amp;GPIO[21] used to choose the right input*/</span>
	<span class="n">btwrite</span> <span class="p">(</span><span class="n">input</span><span class="o">&lt;&lt;</span><span class="mi">20</span><span class="p">,</span><span class="n">BT848_GPIO_DATA</span><span class="p">);</span>

<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * ivc120_muxsel [Added by Alan Garfield &lt;alan@fromorbit.com&gt;]</span>
<span class="cm"> *</span>
<span class="cm"> * The IVC120G security card has 4 i2c controlled TDA8540 matrix</span>
<span class="cm"> * swichers to provide 16 channels to MUX0. The TDA8540&#39;s have</span>
<span class="cm"> * 4 independent outputs and as such the IVC120G also has the</span>
<span class="cm"> * optional &quot;Monitor Out&quot; bus. This allows the card to be looking</span>
<span class="cm"> * at one input while the monitor is looking at another.</span>
<span class="cm"> *</span>
<span class="cm"> * Since I&#39;ve couldn&#39;t be bothered figuring out how to add an</span>
<span class="cm"> * independent muxsel for the monitor bus, I&#39;ve just set it to</span>
<span class="cm"> * whatever the card is looking at.</span>
<span class="cm"> *</span>
<span class="cm"> *  OUT0 of the TDA8540&#39;s is connected to MUX0         (0x03)</span>
<span class="cm"> *  OUT1 of the TDA8540&#39;s is connected to &quot;Monitor Out&quot;        (0x0C)</span>
<span class="cm"> *</span>
<span class="cm"> *  TDA8540_ALT3 IN0-3 = Channel 13 - 16       (0x03)</span>
<span class="cm"> *  TDA8540_ALT4 IN0-3 = Channel 1 - 4         (0x03)</span>
<span class="cm"> *  TDA8540_ALT5 IN0-3 = Channel 5 - 8         (0x03)</span>
<span class="cm"> *  TDA8540_ALT6 IN0-3 = Channel 9 - 12                (0x03)</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cm">/* All 7 possible sub-ids for the TDA8540 Matrix Switcher */</span>
<span class="cp">#define I2C_TDA8540        0x90</span>
<span class="cp">#define I2C_TDA8540_ALT1   0x92</span>
<span class="cp">#define I2C_TDA8540_ALT2   0x94</span>
<span class="cp">#define I2C_TDA8540_ALT3   0x96</span>
<span class="cp">#define I2C_TDA8540_ALT4   0x98</span>
<span class="cp">#define I2C_TDA8540_ALT5   0x9a</span>
<span class="cp">#define I2C_TDA8540_ALT6   0x9c</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">ivc120_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Simple maths */</span>
	<span class="kt">int</span> <span class="n">key</span> <span class="o">=</span> <span class="n">input</span> <span class="o">%</span> <span class="mi">4</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">matrix</span> <span class="o">=</span> <span class="n">input</span> <span class="o">/</span> <span class="mi">4</span><span class="p">;</span>

	<span class="n">dprintk</span><span class="p">(</span><span class="s">&quot;%d: ivc120_muxsel: Input - %02d | TDA - %02d | In - %02d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="n">matrix</span><span class="p">,</span> <span class="n">key</span><span class="p">);</span>

	<span class="cm">/* Handles the input selection on the TDA8540&#39;s */</span>
	<span class="n">bttv_I2CWrite</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">I2C_TDA8540_ALT3</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
		      <span class="p">((</span><span class="n">matrix</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="n">key</span> <span class="o">|</span> <span class="n">key</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">:</span> <span class="mh">0x00</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">bttv_I2CWrite</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">I2C_TDA8540_ALT4</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
		      <span class="p">((</span><span class="n">matrix</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="n">key</span> <span class="o">|</span> <span class="n">key</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">:</span> <span class="mh">0x00</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">bttv_I2CWrite</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">I2C_TDA8540_ALT5</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
		      <span class="p">((</span><span class="n">matrix</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="n">key</span> <span class="o">|</span> <span class="n">key</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">:</span> <span class="mh">0x00</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">bttv_I2CWrite</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">I2C_TDA8540_ALT6</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
		      <span class="p">((</span><span class="n">matrix</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="n">key</span> <span class="o">|</span> <span class="n">key</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">:</span> <span class="mh">0x00</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>

	<span class="cm">/* Handles the output enables on the TDA8540&#39;s */</span>
	<span class="n">bttv_I2CWrite</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">I2C_TDA8540_ALT3</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span>
		      <span class="p">((</span><span class="n">matrix</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="o">?</span> <span class="mh">0x03</span> <span class="o">:</span> <span class="mh">0x00</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>  <span class="cm">/* 13 - 16 */</span>
	<span class="n">bttv_I2CWrite</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">I2C_TDA8540_ALT4</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span>
		      <span class="p">((</span><span class="n">matrix</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="mh">0x03</span> <span class="o">:</span> <span class="mh">0x00</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>  <span class="cm">/* 1-4 */</span>
	<span class="n">bttv_I2CWrite</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">I2C_TDA8540_ALT5</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span>
		      <span class="p">((</span><span class="n">matrix</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="mh">0x03</span> <span class="o">:</span> <span class="mh">0x00</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>  <span class="cm">/* 5-8 */</span>
	<span class="n">bttv_I2CWrite</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">I2C_TDA8540_ALT6</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span>
		      <span class="p">((</span><span class="n">matrix</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="o">?</span> <span class="mh">0x03</span> <span class="o">:</span> <span class="mh">0x00</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>  <span class="cm">/* 9-12 */</span>

	<span class="cm">/* 878&#39;s MUX0 is already selected for input via muxsel values */</span>
<span class="p">}</span>


<span class="cm">/* PXC200 muxsel helper</span>
<span class="cm"> * luke@syseng.anu.edu.au</span>
<span class="cm"> * another transplant</span>
<span class="cm"> * from Alessandro Rubini (rubini@linux.it)</span>
<span class="cm"> *</span>
<span class="cm"> * There are 4 kinds of cards:</span>
<span class="cm"> * PXC200L which is bt848</span>
<span class="cm"> * PXC200F which is bt848 with PIC controlling mux</span>
<span class="cm"> * PXC200AL which is bt878</span>
<span class="cm"> * PXC200AF which is bt878 with PIC controlling mux</span>
<span class="cm"> */</span>
<span class="cp">#define PX_CFG_PXC200F 0x01</span>
<span class="cp">#define PX_FLAG_PXC200A  0x00001000 </span><span class="cm">/* a pxc200A is bt-878 based */</span><span class="cp"></span>
<span class="cp">#define PX_I2C_PIC       0x0f</span>
<span class="cp">#define PX_PXC200A_CARDID 0x200a1295</span>
<span class="cp">#define PX_I2C_CMD_CFG   0x00</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">PXC200_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">rc</span><span class="p">;</span>
	<span class="kt">long</span> <span class="n">mux</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">bitmask</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

	<span class="cm">/* Read PIC config to determine if this is a PXC200F */</span>
	<span class="cm">/* PX_I2C_CMD_CFG*/</span>
	<span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
	<span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
	<span class="n">rc</span><span class="o">=</span><span class="n">bttv_I2CWrite</span><span class="p">(</span><span class="n">btv</span><span class="p">,(</span><span class="n">PX_I2C_PIC</span><span class="o">&lt;&lt;</span><span class="mi">1</span><span class="p">),</span><span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">1</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">rc</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_debug</span><span class="p">(</span><span class="s">&quot;%d: PXC200_muxsel: pic cfg write failed:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			 <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">rc</span><span class="p">);</span>
	  <span class="cm">/* not PXC ? do nothing */</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">rc</span><span class="o">=</span><span class="n">bttv_I2CRead</span><span class="p">(</span><span class="n">btv</span><span class="p">,(</span><span class="n">PX_I2C_PIC</span><span class="o">&lt;&lt;</span><span class="mi">1</span><span class="p">),</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">rc</span> <span class="o">&amp;</span> <span class="n">PX_CFG_PXC200F</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">pr_debug</span><span class="p">(</span><span class="s">&quot;%d: PXC200_muxsel: not PXC200F rc:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			 <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">rc</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>


	<span class="cm">/* The multiplexer in the 200F is handled by the GPIO port */</span>
	<span class="cm">/* get correct mapping between inputs  */</span>
	<span class="cm">/*  mux = bttv_tvcards[btv-&gt;type].muxsel[input] &amp; 3; */</span>
	<span class="cm">/* ** not needed!?   */</span>
	<span class="n">mux</span> <span class="o">=</span> <span class="n">input</span><span class="p">;</span>

	<span class="cm">/* make sure output pins are enabled */</span>
	<span class="cm">/* bitmask=0x30f; */</span>
	<span class="n">bitmask</span><span class="o">=</span><span class="mh">0x302</span><span class="p">;</span>
	<span class="cm">/* check whether we have a PXC200A */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">cardid</span> <span class="o">==</span> <span class="n">PX_PXC200A_CARDID</span><span class="p">)</span>  <span class="p">{</span>
	   <span class="n">bitmask</span> <span class="o">^=</span> <span class="mh">0x180</span><span class="p">;</span> <span class="cm">/* use 7 and 9, not 8 and 9 */</span>
	   <span class="n">bitmask</span> <span class="o">|=</span> <span class="mi">7</span><span class="o">&lt;&lt;</span><span class="mi">4</span><span class="p">;</span> <span class="cm">/* the DAC */</span>
	<span class="p">}</span>
	<span class="n">btwrite</span><span class="p">(</span><span class="n">bitmask</span><span class="p">,</span> <span class="n">BT848_GPIO_OUT_EN</span><span class="p">);</span>

	<span class="n">bitmask</span> <span class="o">=</span> <span class="n">btread</span><span class="p">(</span><span class="n">BT848_GPIO_DATA</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">cardid</span> <span class="o">==</span> <span class="n">PX_PXC200A_CARDID</span><span class="p">)</span>
	  <span class="n">bitmask</span> <span class="o">=</span> <span class="p">(</span><span class="n">bitmask</span> <span class="o">&amp;</span> <span class="o">~</span><span class="mh">0x280</span><span class="p">)</span> <span class="o">|</span> <span class="p">((</span><span class="n">mux</span> <span class="o">&amp;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="p">((</span><span class="n">mux</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">);</span>
	<span class="k">else</span> <span class="cm">/* older device */</span>
	  <span class="n">bitmask</span> <span class="o">=</span> <span class="p">(</span><span class="n">bitmask</span> <span class="o">&amp;</span> <span class="o">~</span><span class="mh">0x300</span><span class="p">)</span> <span class="o">|</span> <span class="p">((</span><span class="n">mux</span> <span class="o">&amp;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">);</span>
	<span class="n">btwrite</span><span class="p">(</span><span class="n">bitmask</span><span class="p">,</span><span class="n">BT848_GPIO_DATA</span><span class="p">);</span>

	<span class="cm">/*</span>
<span class="cm">	 * Was &quot;to be safe, set the bt848 to input 0&quot;</span>
<span class="cm">	 * Actually, since it&#39;s ok at load time, better not messing</span>
<span class="cm">	 * with these bits (on PXC200AF you need to set mux 2 here)</span>
<span class="cm">	 *</span>
<span class="cm">	 * needed because bttv-driver sets mux before calling this function</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">cardid</span> <span class="o">==</span> <span class="n">PX_PXC200A_CARDID</span><span class="p">)</span>
	  <span class="n">btaor</span><span class="p">(</span><span class="mi">2</span><span class="o">&lt;&lt;</span><span class="mi">5</span><span class="p">,</span> <span class="o">~</span><span class="n">BT848_IFORM_MUXSEL</span><span class="p">,</span> <span class="n">BT848_IFORM</span><span class="p">);</span>
	<span class="k">else</span> <span class="cm">/* older device */</span>
	  <span class="n">btand</span><span class="p">(</span><span class="o">~</span><span class="n">BT848_IFORM_MUXSEL</span><span class="p">,</span><span class="n">BT848_IFORM</span><span class="p">);</span>

	<span class="n">pr_debug</span><span class="p">(</span><span class="s">&quot;%d: setting input channel to:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">mux</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">phytec_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mux</span> <span class="o">=</span> <span class="n">input</span> <span class="o">%</span> <span class="mi">4</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">input</span> <span class="o">==</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">svhs</span><span class="p">)</span>
		<span class="n">mux</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0x3</span><span class="p">,</span> <span class="n">mux</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * GeoVision GV-800(S) functions</span>
<span class="cm"> * Bruno Christo &lt;bchristo@inf.ufsm.br&gt;</span>
<span class="cm">*/</span>

<span class="cm">/* This is a function to control the analog switch, which determines which</span>
<span class="cm"> * camera is routed to which controller.  The switch comprises an X-address</span>
<span class="cm"> * (gpio bits 0-3, representing the camera, ranging from 0-15), and a</span>
<span class="cm"> * Y-address (gpio bits 4-6, representing the controller, ranging from 0-3).</span>
<span class="cm"> * A data value (gpio bit 18) of &#39;1&#39; enables the switch, and &#39;0&#39; disables</span>
<span class="cm"> * the switch.  A STROBE bit (gpio bit 17) latches the data value into the</span>
<span class="cm"> * specified address. There is also a chip select (gpio bit 16).</span>
<span class="cm"> * The idea is to set the address and chip select together, bring</span>
<span class="cm"> * STROBE high, write the data, and finally bring STROBE back to low.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">gv800s_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span>
			 <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">xaddr</span><span class="p">,</span>
			 <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">yaddr</span><span class="p">,</span>
			 <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
	<span class="cm">/* On the &quot;master&quot; 878A:</span>
<span class="cm">	* GPIO bits 0-9 are used for the analog switch:</span>
<span class="cm">	*   00 - 03:	camera selector</span>
<span class="cm">	*   04 - 06:	878A (controller) selector</span>
<span class="cm">	*   16: 	cselect</span>
<span class="cm">	*   17:		strobe</span>
<span class="cm">	*   18: 	data (1-&gt;on, 0-&gt;off)</span>
<span class="cm">	*   19:		reset</span>
<span class="cm">	*/</span>
	<span class="k">const</span> <span class="n">u32</span> <span class="n">ADDRESS</span> <span class="o">=</span> <span class="p">((</span><span class="n">xaddr</span><span class="o">&amp;</span><span class="mh">0xf</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">yaddr</span><span class="o">&amp;</span><span class="mi">3</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="mi">4</span><span class="p">);</span>
	<span class="k">const</span> <span class="n">u32</span> <span class="n">CSELECT</span> <span class="o">=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">16</span><span class="p">;</span>
	<span class="k">const</span> <span class="n">u32</span> <span class="n">STROBE</span> <span class="o">=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">17</span><span class="p">;</span>
	<span class="k">const</span> <span class="n">u32</span> <span class="n">DATA</span> <span class="o">=</span> <span class="n">data</span><span class="o">&lt;&lt;</span><span class="mi">18</span><span class="p">;</span>

	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0x1007f</span><span class="p">,</span> <span class="n">ADDRESS</span> <span class="o">|</span> <span class="n">CSELECT</span><span class="p">);</span>	<span class="cm">/* write ADDRESS and CSELECT */</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0x20000</span><span class="p">,</span> <span class="n">STROBE</span><span class="p">);</span>		<span class="cm">/* STROBE high */</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0x40000</span><span class="p">,</span> <span class="n">DATA</span><span class="p">);</span>		<span class="cm">/* write DATA */</span>
	<span class="n">gpio_bits</span><span class="p">(</span><span class="mh">0x20000</span><span class="p">,</span> <span class="o">~</span><span class="n">STROBE</span><span class="p">);</span>		<span class="cm">/* STROBE low */</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * GeoVision GV-800(S) muxsel</span>
<span class="cm"> *</span>
<span class="cm"> * Each of the 4 cards (controllers) use this function.</span>
<span class="cm"> * The controller using this function selects the input through the GPIO pins</span>
<span class="cm"> * of the &quot;master&quot; card. A pointer to this card is stored in master[btv-&gt;c.nr].</span>
<span class="cm"> *</span>
<span class="cm"> * The parameter &#39;input&#39; is the requested camera number (0-4) on the controller.</span>
<span class="cm"> * The map array has the address of each input. Note that the addresses in the</span>
<span class="cm"> * array are in the sequence the original GeoVision driver uses, that is, set</span>
<span class="cm"> * every controller to input 0, then to input 1, 2, 3, repeat. This means that</span>
<span class="cm"> * the physical &quot;camera 1&quot; connector corresponds to controller 0 input 0,</span>
<span class="cm"> * &quot;camera 2&quot; corresponds to controller 1 input 0, and so on.</span>
<span class="cm"> *</span>
<span class="cm"> * After getting the input address, the function then writes the appropriate</span>
<span class="cm"> * data to the analog switch, and housekeeps the local copy of the switch</span>
<span class="cm"> * information.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">gv800s_muxsel</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">mctlr</span><span class="p">;</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">sw_status</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">xaddr</span><span class="p">,</span> <span class="n">yaddr</span><span class="p">;</span>
	<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">map</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="p">{</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x4</span><span class="p">,</span> <span class="mh">0xa</span><span class="p">,</span> <span class="mh">0x6</span> <span class="p">},</span>
					  <span class="p">{</span> <span class="mh">0x1</span><span class="p">,</span> <span class="mh">0x5</span><span class="p">,</span> <span class="mh">0xb</span><span class="p">,</span> <span class="mh">0x7</span> <span class="p">},</span>
					  <span class="p">{</span> <span class="mh">0x2</span><span class="p">,</span> <span class="mh">0x8</span><span class="p">,</span> <span class="mh">0xc</span><span class="p">,</span> <span class="mh">0xe</span> <span class="p">},</span>
					  <span class="p">{</span> <span class="mh">0x3</span><span class="p">,</span> <span class="mh">0x9</span><span class="p">,</span> <span class="mh">0xd</span><span class="p">,</span> <span class="mh">0xf</span> <span class="p">}</span> <span class="p">};</span>
	<span class="n">input</span> <span class="o">=</span> <span class="n">input</span><span class="o">%</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">mctlr</span> <span class="o">=</span> <span class="n">master</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">];</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">mctlr</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* do nothing until the &quot;master&quot; is detected */</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">yaddr</span> <span class="o">=</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span> <span class="o">-</span> <span class="n">mctlr</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">3</span><span class="p">;</span>
	<span class="n">sw_status</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)(</span><span class="o">&amp;</span><span class="n">mctlr</span><span class="o">-&gt;</span><span class="n">mbox_we</span><span class="p">);</span>
	<span class="n">xaddr</span> <span class="o">=</span> <span class="n">map</span><span class="p">[</span><span class="n">yaddr</span><span class="p">][</span><span class="n">input</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0xf</span><span class="p">;</span>

	<span class="cm">/* Check if the controller/camera pair has changed, ignore otherwise */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">sw_status</span><span class="p">[</span><span class="n">yaddr</span><span class="p">]</span> <span class="o">!=</span> <span class="n">xaddr</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* disable the old switch, enable the new one and save status */</span>
		<span class="n">gv800s_write</span><span class="p">(</span><span class="n">mctlr</span><span class="p">,</span> <span class="n">sw_status</span><span class="p">[</span><span class="n">yaddr</span><span class="p">],</span> <span class="n">yaddr</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">sw_status</span><span class="p">[</span><span class="n">yaddr</span><span class="p">]</span> <span class="o">=</span> <span class="n">xaddr</span><span class="p">;</span>
		<span class="n">gv800s_write</span><span class="p">(</span><span class="n">mctlr</span><span class="p">,</span> <span class="n">xaddr</span><span class="p">,</span> <span class="n">yaddr</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* GeoVision GV-800(S) &quot;master&quot; chip init */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">gv800s_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">sw_status</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)(</span><span class="o">&amp;</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">mbox_we</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">ix</span><span class="p">;</span>

	<span class="n">gpio_inout</span><span class="p">(</span><span class="mh">0xf107f</span><span class="p">,</span> <span class="mh">0xf107f</span><span class="p">);</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">19</span><span class="p">);</span> <span class="cm">/* reset the analog MUX */</span>
	<span class="n">gpio_write</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

	<span class="cm">/* Preset camera 0 to the 4 controllers */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">ix</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">ix</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">ix</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">sw_status</span><span class="p">[</span><span class="n">ix</span><span class="p">]</span> <span class="o">=</span> <span class="n">ix</span><span class="p">;</span>
		<span class="n">gv800s_write</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="n">ix</span><span class="p">,</span> <span class="n">ix</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="cm">/* Inputs on the &quot;master&quot; controller need this brightness fix */</span>
	<span class="n">bttv_I2CWrite</span><span class="p">(</span><span class="n">btv</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x5</span><span class="p">,</span> <span class="mh">0x90</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span> <span class="o">&gt;</span> <span class="n">BTTV_MAX</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * Store the &quot;master&quot; controller pointer in the master</span>
<span class="cm">	 * array for later use in the muxsel function.</span>
<span class="cm">	 */</span>
	<span class="n">master</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">]</span>   <span class="o">=</span> <span class="n">btv</span><span class="p">;</span>
	<span class="n">master</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">btv</span><span class="p">;</span>
	<span class="n">master</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">btv</span><span class="p">;</span>
	<span class="n">master</span><span class="p">[</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">btv</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* ----------------------------------------------------------------------- */</span>
<span class="cm">/* motherboard chipset specific stuff                                      */</span>

<span class="kt">void</span> <span class="n">__init</span> <span class="nf">bttv_check_chipset</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">pcipci_fail</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">pci_pci_problems</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">PCIPCI_FAIL</span><span class="o">|</span><span class="n">PCIAGP_FAIL</span><span class="p">))</span> 	<span class="cm">/* should check if target is AGP */</span>
		<span class="n">pcipci_fail</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">pci_pci_problems</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">PCIPCI_TRITON</span><span class="o">|</span><span class="n">PCIPCI_NATOMA</span><span class="o">|</span><span class="n">PCIPCI_VIAETBF</span><span class="p">))</span>
		<span class="n">triton1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">pci_pci_problems</span> <span class="o">&amp;</span> <span class="n">PCIPCI_VSFX</span><span class="p">)</span>
		<span class="n">vsfx</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="cp">#ifdef PCIPCI_ALIMAGIK</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">pci_pci_problems</span> <span class="o">&amp;</span> <span class="n">PCIPCI_ALIMAGIK</span><span class="p">)</span>
		<span class="n">latency</span> <span class="o">=</span> <span class="mh">0x0A</span><span class="p">;</span>
<span class="cp">#endif</span>


	<span class="cm">/* print warnings about any quirks found */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">triton1</span><span class="p">)</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Host bridge needs ETBF enabled</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">vsfx</span><span class="p">)</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Host bridge needs VSFX enabled</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">pcipci_fail</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;bttv and your chipset may not work together</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">no_overlay</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;overlay will be disabled</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">no_overlay</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;overlay forced. Use this option at your own risk.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">UNSET</span> <span class="o">!=</span> <span class="n">latency</span><span class="p">)</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;pci latency fixup [%d]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">latency</span><span class="p">);</span>
	<span class="k">while</span> <span class="p">((</span><span class="n">dev</span> <span class="o">=</span> <span class="n">pci_get_device</span><span class="p">(</span><span class="n">PCI_VENDOR_ID_INTEL</span><span class="p">,</span>
				      <span class="n">PCI_DEVICE_ID_INTEL_82441</span><span class="p">,</span> <span class="n">dev</span><span class="p">)))</span> <span class="p">{</span>
		<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">b</span><span class="p">;</span>
		<span class="n">pci_read_config_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">bttv_debug</span><span class="p">)</span>
			<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Host bridge: 82441FX Natoma, bufcon=0x%02x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				<span class="n">b</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">__devinit</span> <span class="nf">bttv_handle_chipset</span><span class="p">(</span><span class="k">struct</span> <span class="n">bttv</span> <span class="o">*</span><span class="n">btv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">command</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">triton1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">vsfx</span> <span class="o">&amp;&amp;</span> <span class="n">UNSET</span> <span class="o">==</span> <span class="n">latency</span><span class="p">)</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">bttv_verbose</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">triton1</span><span class="p">)</span>
			<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: enabling ETBF (430FX/VP3 compatibility)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">vsfx</span> <span class="o">&amp;&amp;</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">id</span> <span class="o">&gt;=</span> <span class="mi">878</span><span class="p">)</span>
			<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: enabling VSFX</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">UNSET</span> <span class="o">!=</span> <span class="n">latency</span><span class="p">)</span>
			<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;%d: setting pci timer to %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				<span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">nr</span><span class="p">,</span> <span class="n">latency</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">id</span> <span class="o">&lt;</span> <span class="mi">878</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* bt848 (mis)uses a bit in the irq mask for etbf */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">triton1</span><span class="p">)</span>
			<span class="n">btv</span><span class="o">-&gt;</span><span class="n">triton1</span> <span class="o">=</span> <span class="n">BT848_INT_ETBF</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="cm">/* bt878 has a bit in the pci config space for it */</span>
		<span class="n">pci_read_config_byte</span><span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">pci</span><span class="p">,</span> <span class="n">BT878_DEVCTRL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">command</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">triton1</span><span class="p">)</span>
			<span class="n">command</span> <span class="o">|=</span> <span class="n">BT878_EN_TBFX</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">vsfx</span><span class="p">)</span>
			<span class="n">command</span> <span class="o">|=</span> <span class="n">BT878_EN_VSFX</span><span class="p">;</span>
		<span class="n">pci_write_config_byte</span><span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">pci</span><span class="p">,</span> <span class="n">BT878_DEVCTRL</span><span class="p">,</span> <span class="n">command</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">UNSET</span> <span class="o">!=</span> <span class="n">latency</span><span class="p">)</span>
		<span class="n">pci_write_config_byte</span><span class="p">(</span><span class="n">btv</span><span class="o">-&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">pci</span><span class="p">,</span> <span class="n">PCI_LATENCY_TIMER</span><span class="p">,</span> <span class="n">latency</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>


<span class="cm">/*</span>
<span class="cm"> * Local variables:</span>
<span class="cm"> * c-basic-offset: 8</span>
<span class="cm"> * End:</span>
<span class="cm"> */</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
