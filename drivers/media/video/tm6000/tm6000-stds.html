<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › media › video › tm6000 › tm6000-stds.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>tm6000-stds.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  tm6000-stds.c - driver for TM5600/TM6000/TM6010 USB video capture devices</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright (C) 2007 Mauro Carvalho Chehab &lt;mchehab@redhat.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *  it under the terms of the GNU General Public License as published by</span>
<span class="cm"> *  the Free Software Foundation version 2</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is distributed in the hope that it will be useful,</span>
<span class="cm"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> *  GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> *  You should have received a copy of the GNU General Public License</span>
<span class="cm"> *  along with this program; if not, write to the Free Software</span>
<span class="cm"> *  Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &quot;tm6000.h&quot;</span>
<span class="cp">#include &quot;tm6000-regs.h&quot;</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tm6010_a_mode</span><span class="p">;</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">tm6010_a_mode</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="mo">0644</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">tm6010_a_mode</span><span class="p">,</span> <span class="s">&quot;set tm6010 sif audio mode&quot;</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">tm6000_reg_settings</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">req</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">value</span><span class="p">;</span>
<span class="p">};</span>


<span class="k">struct</span> <span class="n">tm6000_std_settings</span> <span class="p">{</span>
	<span class="n">v4l2_std_id</span> <span class="n">id</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">tm6000_reg_settings</span> <span class="o">*</span><span class="n">common</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">tm6000_reg_settings</span> <span class="n">composite_pal_m</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x01</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R00_VIDEO_CONTROL0</span><span class="p">,</span> <span class="mh">0x04</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R01_VIDEO_CONTROL1</span><span class="p">,</span> <span class="mh">0x0e</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R02_VIDEO_CONTROL2</span><span class="p">,</span> <span class="mh">0x5f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R03_YC_SEP_CONTROL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R07_OUTPUT_CONTROL</span><span class="p">,</span> <span class="mh">0x31</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R18_CHROMA_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1e</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R19_CHROMA_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0x83</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1A_CHROMA_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0x0a</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1B_CHROMA_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xe0</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1C_HSYNC_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1D_HSYNC_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1E_HSYNC_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1F_HSYNC_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xcd</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R2E_ACTIVE_VIDEO_HSTART</span><span class="p">,</span> <span class="mh">0x88</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R30_ACTIVE_VIDEO_VSTART</span><span class="p">,</span> <span class="mh">0x20</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R31_ACTIVE_VIDEO_VHIGHT</span><span class="p">,</span> <span class="mh">0x61</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R33_VSYNC_HLOCK_MAX</span><span class="p">,</span> <span class="mh">0x0c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R35_VSYNC_AGC_MAX</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R82_COMB_FILTER_CONFIG</span><span class="p">,</span> <span class="mh">0x52</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R83_CHROMA_LOCK_CONFIG</span><span class="p">,</span> <span class="mh">0x6f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R04_LUMA_HAGC_CONTROL</span><span class="p">,</span> <span class="mh">0xdc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R0D_CHROMA_KILL_LEVEL</span><span class="p">,</span> <span class="mh">0x07</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">tm6000_reg_settings</span> <span class="n">composite_pal_nc</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x01</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R00_VIDEO_CONTROL0</span><span class="p">,</span> <span class="mh">0x36</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R01_VIDEO_CONTROL1</span><span class="p">,</span> <span class="mh">0x0e</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R02_VIDEO_CONTROL2</span><span class="p">,</span> <span class="mh">0x5f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R03_YC_SEP_CONTROL</span><span class="p">,</span> <span class="mh">0x02</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R07_OUTPUT_CONTROL</span><span class="p">,</span> <span class="mh">0x31</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R18_CHROMA_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1e</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R19_CHROMA_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0x91</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1A_CHROMA_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0x1f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1B_CHROMA_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0x0c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1C_HSYNC_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1D_HSYNC_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1E_HSYNC_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1F_HSYNC_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xcd</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R2E_ACTIVE_VIDEO_HSTART</span><span class="p">,</span> <span class="mh">0x8c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R30_ACTIVE_VIDEO_VSTART</span><span class="p">,</span> <span class="mh">0x2c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R31_ACTIVE_VIDEO_VHIGHT</span><span class="p">,</span> <span class="mh">0xc1</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R33_VSYNC_HLOCK_MAX</span><span class="p">,</span> <span class="mh">0x0c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R35_VSYNC_AGC_MAX</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R82_COMB_FILTER_CONFIG</span><span class="p">,</span> <span class="mh">0x52</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R83_CHROMA_LOCK_CONFIG</span><span class="p">,</span> <span class="mh">0x6f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R04_LUMA_HAGC_CONTROL</span><span class="p">,</span> <span class="mh">0xdc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R0D_CHROMA_KILL_LEVEL</span><span class="p">,</span> <span class="mh">0x07</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">tm6000_reg_settings</span> <span class="n">composite_pal</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x01</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R00_VIDEO_CONTROL0</span><span class="p">,</span> <span class="mh">0x32</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R01_VIDEO_CONTROL1</span><span class="p">,</span> <span class="mh">0x0e</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R02_VIDEO_CONTROL2</span><span class="p">,</span> <span class="mh">0x5f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R03_YC_SEP_CONTROL</span><span class="p">,</span> <span class="mh">0x02</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R07_OUTPUT_CONTROL</span><span class="p">,</span> <span class="mh">0x31</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R18_CHROMA_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x25</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R19_CHROMA_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0xd5</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1A_CHROMA_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0x63</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1B_CHROMA_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0x50</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1C_HSYNC_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1D_HSYNC_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1E_HSYNC_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1F_HSYNC_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xcd</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R2E_ACTIVE_VIDEO_HSTART</span><span class="p">,</span> <span class="mh">0x8c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R30_ACTIVE_VIDEO_VSTART</span><span class="p">,</span> <span class="mh">0x2c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R31_ACTIVE_VIDEO_VHIGHT</span><span class="p">,</span> <span class="mh">0xc1</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R33_VSYNC_HLOCK_MAX</span><span class="p">,</span> <span class="mh">0x0c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R35_VSYNC_AGC_MAX</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R82_COMB_FILTER_CONFIG</span><span class="p">,</span> <span class="mh">0x52</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R83_CHROMA_LOCK_CONFIG</span><span class="p">,</span> <span class="mh">0x6f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R04_LUMA_HAGC_CONTROL</span><span class="p">,</span> <span class="mh">0xdc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R0D_CHROMA_KILL_LEVEL</span><span class="p">,</span> <span class="mh">0x07</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">tm6000_reg_settings</span> <span class="n">composite_secam</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x01</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R00_VIDEO_CONTROL0</span><span class="p">,</span> <span class="mh">0x38</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R01_VIDEO_CONTROL1</span><span class="p">,</span> <span class="mh">0x0e</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R02_VIDEO_CONTROL2</span><span class="p">,</span> <span class="mh">0x5f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R03_YC_SEP_CONTROL</span><span class="p">,</span> <span class="mh">0x02</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R07_OUTPUT_CONTROL</span><span class="p">,</span> <span class="mh">0x31</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R18_CHROMA_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x24</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R19_CHROMA_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0x92</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1A_CHROMA_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0xe8</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1B_CHROMA_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xed</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1C_HSYNC_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1D_HSYNC_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1E_HSYNC_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1F_HSYNC_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xcd</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R2E_ACTIVE_VIDEO_HSTART</span><span class="p">,</span> <span class="mh">0x8c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R30_ACTIVE_VIDEO_VSTART</span><span class="p">,</span> <span class="mh">0x2c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R31_ACTIVE_VIDEO_VHIGHT</span><span class="p">,</span> <span class="mh">0xc1</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R33_VSYNC_HLOCK_MAX</span><span class="p">,</span> <span class="mh">0x2c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R35_VSYNC_AGC_MAX</span><span class="p">,</span> <span class="mh">0x18</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R82_COMB_FILTER_CONFIG</span><span class="p">,</span> <span class="mh">0x42</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R83_CHROMA_LOCK_CONFIG</span><span class="p">,</span> <span class="mh">0xff</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R0D_CHROMA_KILL_LEVEL</span><span class="p">,</span> <span class="mh">0x07</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">tm6000_reg_settings</span> <span class="n">composite_ntsc</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x01</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R00_VIDEO_CONTROL0</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R01_VIDEO_CONTROL1</span><span class="p">,</span> <span class="mh">0x0f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R02_VIDEO_CONTROL2</span><span class="p">,</span> <span class="mh">0x5f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R03_YC_SEP_CONTROL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R07_OUTPUT_CONTROL</span><span class="p">,</span> <span class="mh">0x31</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R18_CHROMA_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1e</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R19_CHROMA_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0x8b</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1A_CHROMA_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0xa2</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1B_CHROMA_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xe9</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1C_HSYNC_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1D_HSYNC_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1E_HSYNC_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1F_HSYNC_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xcd</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R2E_ACTIVE_VIDEO_HSTART</span><span class="p">,</span> <span class="mh">0x88</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R30_ACTIVE_VIDEO_VSTART</span><span class="p">,</span> <span class="mh">0x22</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R31_ACTIVE_VIDEO_VHIGHT</span><span class="p">,</span> <span class="mh">0x61</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R33_VSYNC_HLOCK_MAX</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R35_VSYNC_AGC_MAX</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R82_COMB_FILTER_CONFIG</span><span class="p">,</span> <span class="mh">0x42</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R83_CHROMA_LOCK_CONFIG</span><span class="p">,</span> <span class="mh">0x6f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R04_LUMA_HAGC_CONTROL</span><span class="p">,</span> <span class="mh">0xdd</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R0D_CHROMA_KILL_LEVEL</span><span class="p">,</span> <span class="mh">0x07</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">tm6000_std_settings</span> <span class="n">composite_stds</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">V4L2_STD_PAL_M</span><span class="p">,</span> <span class="p">.</span><span class="n">common</span> <span class="o">=</span> <span class="n">composite_pal_m</span><span class="p">,</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">V4L2_STD_PAL_Nc</span><span class="p">,</span> <span class="p">.</span><span class="n">common</span> <span class="o">=</span> <span class="n">composite_pal_nc</span><span class="p">,</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">V4L2_STD_PAL</span><span class="p">,</span> <span class="p">.</span><span class="n">common</span> <span class="o">=</span> <span class="n">composite_pal</span><span class="p">,</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">V4L2_STD_SECAM</span><span class="p">,</span> <span class="p">.</span><span class="n">common</span> <span class="o">=</span> <span class="n">composite_secam</span><span class="p">,</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">V4L2_STD_NTSC</span><span class="p">,</span> <span class="p">.</span><span class="n">common</span> <span class="o">=</span> <span class="n">composite_ntsc</span><span class="p">,</span> <span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">tm6000_reg_settings</span> <span class="n">svideo_pal_m</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x01</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R00_VIDEO_CONTROL0</span><span class="p">,</span> <span class="mh">0x05</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R01_VIDEO_CONTROL1</span><span class="p">,</span> <span class="mh">0x0e</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R02_VIDEO_CONTROL2</span><span class="p">,</span> <span class="mh">0x5f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R03_YC_SEP_CONTROL</span><span class="p">,</span> <span class="mh">0x04</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R07_OUTPUT_CONTROL</span><span class="p">,</span> <span class="mh">0x31</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R18_CHROMA_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1e</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R19_CHROMA_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0x83</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1A_CHROMA_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0x0a</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1B_CHROMA_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xe0</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1C_HSYNC_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1D_HSYNC_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1E_HSYNC_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1F_HSYNC_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xcd</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R2E_ACTIVE_VIDEO_HSTART</span><span class="p">,</span> <span class="mh">0x88</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R30_ACTIVE_VIDEO_VSTART</span><span class="p">,</span> <span class="mh">0x22</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R31_ACTIVE_VIDEO_VHIGHT</span><span class="p">,</span> <span class="mh">0x61</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R33_VSYNC_HLOCK_MAX</span><span class="p">,</span> <span class="mh">0x0c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R35_VSYNC_AGC_MAX</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R82_COMB_FILTER_CONFIG</span><span class="p">,</span> <span class="mh">0x52</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R83_CHROMA_LOCK_CONFIG</span><span class="p">,</span> <span class="mh">0x6f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R04_LUMA_HAGC_CONTROL</span><span class="p">,</span> <span class="mh">0xdc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R0D_CHROMA_KILL_LEVEL</span><span class="p">,</span> <span class="mh">0x07</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">tm6000_reg_settings</span> <span class="n">svideo_pal_nc</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x01</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R00_VIDEO_CONTROL0</span><span class="p">,</span> <span class="mh">0x37</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R01_VIDEO_CONTROL1</span><span class="p">,</span> <span class="mh">0x0e</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R02_VIDEO_CONTROL2</span><span class="p">,</span> <span class="mh">0x5f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R03_YC_SEP_CONTROL</span><span class="p">,</span> <span class="mh">0x04</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R07_OUTPUT_CONTROL</span><span class="p">,</span> <span class="mh">0x31</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R18_CHROMA_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1e</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R19_CHROMA_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0x91</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1A_CHROMA_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0x1f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1B_CHROMA_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0x0c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1C_HSYNC_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1D_HSYNC_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1E_HSYNC_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1F_HSYNC_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xcd</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R2E_ACTIVE_VIDEO_HSTART</span><span class="p">,</span> <span class="mh">0x88</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R30_ACTIVE_VIDEO_VSTART</span><span class="p">,</span> <span class="mh">0x22</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R31_ACTIVE_VIDEO_VHIGHT</span><span class="p">,</span> <span class="mh">0xc1</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R33_VSYNC_HLOCK_MAX</span><span class="p">,</span> <span class="mh">0x0c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R35_VSYNC_AGC_MAX</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R82_COMB_FILTER_CONFIG</span><span class="p">,</span> <span class="mh">0x52</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R83_CHROMA_LOCK_CONFIG</span><span class="p">,</span> <span class="mh">0x6f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R04_LUMA_HAGC_CONTROL</span><span class="p">,</span> <span class="mh">0xdc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R0D_CHROMA_KILL_LEVEL</span><span class="p">,</span> <span class="mh">0x07</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">tm6000_reg_settings</span> <span class="n">svideo_pal</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x01</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R00_VIDEO_CONTROL0</span><span class="p">,</span> <span class="mh">0x33</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R01_VIDEO_CONTROL1</span><span class="p">,</span> <span class="mh">0x0e</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R02_VIDEO_CONTROL2</span><span class="p">,</span> <span class="mh">0x5f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R03_YC_SEP_CONTROL</span><span class="p">,</span> <span class="mh">0x04</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R07_OUTPUT_CONTROL</span><span class="p">,</span> <span class="mh">0x30</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R18_CHROMA_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x25</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R19_CHROMA_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0xd5</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1A_CHROMA_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0x63</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1B_CHROMA_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0x50</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1C_HSYNC_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1D_HSYNC_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1E_HSYNC_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1F_HSYNC_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xcd</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R2E_ACTIVE_VIDEO_HSTART</span><span class="p">,</span> <span class="mh">0x8c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R30_ACTIVE_VIDEO_VSTART</span><span class="p">,</span> <span class="mh">0x2a</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R31_ACTIVE_VIDEO_VHIGHT</span><span class="p">,</span> <span class="mh">0xc1</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R33_VSYNC_HLOCK_MAX</span><span class="p">,</span> <span class="mh">0x0c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R35_VSYNC_AGC_MAX</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R82_COMB_FILTER_CONFIG</span><span class="p">,</span> <span class="mh">0x52</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R83_CHROMA_LOCK_CONFIG</span><span class="p">,</span> <span class="mh">0x6f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R04_LUMA_HAGC_CONTROL</span><span class="p">,</span> <span class="mh">0xdc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R0D_CHROMA_KILL_LEVEL</span><span class="p">,</span> <span class="mh">0x07</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">tm6000_reg_settings</span> <span class="n">svideo_secam</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x01</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R00_VIDEO_CONTROL0</span><span class="p">,</span> <span class="mh">0x39</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R01_VIDEO_CONTROL1</span><span class="p">,</span> <span class="mh">0x0e</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R02_VIDEO_CONTROL2</span><span class="p">,</span> <span class="mh">0x5f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R03_YC_SEP_CONTROL</span><span class="p">,</span> <span class="mh">0x03</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R07_OUTPUT_CONTROL</span><span class="p">,</span> <span class="mh">0x31</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R18_CHROMA_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x24</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R19_CHROMA_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0x92</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1A_CHROMA_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0xe8</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1B_CHROMA_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xed</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1C_HSYNC_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1D_HSYNC_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1E_HSYNC_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1F_HSYNC_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xcd</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R2E_ACTIVE_VIDEO_HSTART</span><span class="p">,</span> <span class="mh">0x8c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R30_ACTIVE_VIDEO_VSTART</span><span class="p">,</span> <span class="mh">0x2a</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R31_ACTIVE_VIDEO_VHIGHT</span><span class="p">,</span> <span class="mh">0xc1</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R33_VSYNC_HLOCK_MAX</span><span class="p">,</span> <span class="mh">0x2c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R35_VSYNC_AGC_MAX</span><span class="p">,</span> <span class="mh">0x18</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R82_COMB_FILTER_CONFIG</span><span class="p">,</span> <span class="mh">0x42</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R83_CHROMA_LOCK_CONFIG</span><span class="p">,</span> <span class="mh">0xff</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R0D_CHROMA_KILL_LEVEL</span><span class="p">,</span> <span class="mh">0x07</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">tm6000_reg_settings</span> <span class="n">svideo_ntsc</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x01</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R00_VIDEO_CONTROL0</span><span class="p">,</span> <span class="mh">0x01</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R01_VIDEO_CONTROL1</span><span class="p">,</span> <span class="mh">0x0f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R02_VIDEO_CONTROL2</span><span class="p">,</span> <span class="mh">0x5f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R03_YC_SEP_CONTROL</span><span class="p">,</span> <span class="mh">0x03</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R07_OUTPUT_CONTROL</span><span class="p">,</span> <span class="mh">0x30</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R17_HLOOP_MAXSTATE</span><span class="p">,</span> <span class="mh">0x8b</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R18_CHROMA_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1e</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R19_CHROMA_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0x8b</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1A_CHROMA_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0xa2</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1B_CHROMA_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xe9</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1C_HSYNC_DTO_INCREMENT3</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1D_HSYNC_DTO_INCREMENT2</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1E_HSYNC_DTO_INCREMENT1</span><span class="p">,</span> <span class="mh">0xcc</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R1F_HSYNC_DTO_INCREMENT0</span><span class="p">,</span> <span class="mh">0xcd</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R2E_ACTIVE_VIDEO_HSTART</span><span class="p">,</span> <span class="mh">0x88</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R30_ACTIVE_VIDEO_VSTART</span><span class="p">,</span> <span class="mh">0x22</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R31_ACTIVE_VIDEO_VHIGHT</span><span class="p">,</span> <span class="mh">0x61</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R33_VSYNC_HLOCK_MAX</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R35_VSYNC_AGC_MAX</span><span class="p">,</span> <span class="mh">0x1c</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R82_COMB_FILTER_CONFIG</span><span class="p">,</span> <span class="mh">0x42</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R83_CHROMA_LOCK_CONFIG</span><span class="p">,</span> <span class="mh">0x6f</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R04_LUMA_HAGC_CONTROL</span><span class="p">,</span> <span class="mh">0xdd</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R0D_CHROMA_KILL_LEVEL</span><span class="p">,</span> <span class="mh">0x07</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">TM6010_REQ07_R3F_RESET</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">tm6000_std_settings</span> <span class="n">svideo_stds</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">V4L2_STD_PAL_M</span><span class="p">,</span> <span class="p">.</span><span class="n">common</span> <span class="o">=</span> <span class="n">svideo_pal_m</span><span class="p">,</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">V4L2_STD_PAL_Nc</span><span class="p">,</span> <span class="p">.</span><span class="n">common</span> <span class="o">=</span> <span class="n">svideo_pal_nc</span><span class="p">,</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">V4L2_STD_PAL</span><span class="p">,</span> <span class="p">.</span><span class="n">common</span> <span class="o">=</span> <span class="n">svideo_pal</span><span class="p">,</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">V4L2_STD_SECAM</span><span class="p">,</span> <span class="p">.</span><span class="n">common</span> <span class="o">=</span> <span class="n">svideo_secam</span><span class="p">,</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">V4L2_STD_NTSC</span><span class="p">,</span> <span class="p">.</span><span class="n">common</span> <span class="o">=</span> <span class="n">svideo_ntsc</span><span class="p">,</span> <span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">tm6000_set_audio_std</span><span class="p">(</span><span class="k">struct</span> <span class="n">tm6000_core</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">areg_02</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">;</span> <span class="cm">/* GC1 Fixed gain 0dB */</span>
	<span class="kt">uint8_t</span> <span class="n">areg_05</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span> <span class="cm">/* Auto 4.5 = M Japan, Auto 6.5 = DK */</span>
	<span class="kt">uint8_t</span> <span class="n">areg_06</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span> <span class="cm">/* Auto de-emphasis, mannual channel mode */</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">radio</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R01_A_INIT</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R02_A_FIX_GAIN_CTRL</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">);</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R03_A_AUTO_GAIN_CTRL</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R04_A_SIF_AMP_CTRL</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R05_A_STANDARD_MOD</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">);</span>
		<span class="cm">/* set mono or stereo */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">amode</span> <span class="o">==</span> <span class="n">V4L2_TUNER_MODE_MONO</span><span class="p">)</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R06_A_SOUND_MOD</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">amode</span> <span class="o">==</span> <span class="n">V4L2_TUNER_MODE_STEREO</span><span class="p">)</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R06_A_SOUND_MOD</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">);</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R09_A_MAIN_VOL</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">);</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R0C_A_ASD_THRES2</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">);</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R0D_A_AMD_THRES</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">);</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RF1_AADC_POWER_DOWN</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">);</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R1E_A_GAIN_DEEMPH_OUT</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">);</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R01_A_INIT</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ07_RFE_POWER_DOWN</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">);</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/*</span>
<span class="cm">	 * STD/MN shouldn&#39;t be affected by tm6010_a_mode, as there&#39;s just one</span>
<span class="cm">	 * audio standard for each V4L2_STD type.</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">norm</span> <span class="o">&amp;</span> <span class="n">V4L2_STD_NTSC</span><span class="p">)</span> <span class="o">==</span> <span class="n">V4L2_STD_NTSC_M_KR</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">areg_05</span> <span class="o">|=</span> <span class="mh">0x04</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">norm</span> <span class="o">&amp;</span> <span class="n">V4L2_STD_NTSC</span><span class="p">)</span> <span class="o">==</span> <span class="n">V4L2_STD_NTSC_M_JP</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">areg_05</span> <span class="o">|=</span> <span class="mh">0x43</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">norm</span> <span class="o">&amp;</span> <span class="n">V4L2_STD_MN</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">areg_05</span> <span class="o">|=</span> <span class="mh">0x22</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">switch</span> <span class="p">(</span><span class="n">tm6010_a_mode</span><span class="p">)</span> <span class="p">{</span>
	<span class="cm">/* auto */</span>
	<span class="k">case</span> <span class="mi">0</span>:
		<span class="k">if</span> <span class="p">((</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">norm</span> <span class="o">&amp;</span> <span class="n">V4L2_STD_SECAM</span><span class="p">)</span> <span class="o">==</span> <span class="n">V4L2_STD_SECAM_L</span><span class="p">)</span>
			<span class="n">areg_05</span> <span class="o">|=</span> <span class="mh">0x00</span><span class="p">;</span>
		<span class="k">else</span>	<span class="cm">/* Other PAL/SECAM standards */</span>
			<span class="n">areg_05</span> <span class="o">|=</span> <span class="mh">0x10</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="cm">/* A2 */</span>
	<span class="k">case</span> <span class="mi">1</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">norm</span> <span class="o">&amp;</span> <span class="n">V4L2_STD_DK</span><span class="p">)</span>
			<span class="n">areg_05</span> <span class="o">=</span> <span class="mh">0x09</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="n">areg_05</span> <span class="o">=</span> <span class="mh">0x05</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="cm">/* NICAM */</span>
	<span class="k">case</span> <span class="mi">2</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">norm</span> <span class="o">&amp;</span> <span class="n">V4L2_STD_DK</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">areg_05</span> <span class="o">=</span> <span class="mh">0x06</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">norm</span> <span class="o">&amp;</span> <span class="n">V4L2_STD_PAL_I</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">areg_05</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">norm</span> <span class="o">&amp;</span> <span class="n">V4L2_STD_SECAM_L</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">areg_05</span> <span class="o">=</span> <span class="mh">0x0a</span><span class="p">;</span>
			<span class="n">areg_02</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">areg_05</span> <span class="o">=</span> <span class="mh">0x07</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="cm">/* other */</span>
	<span class="k">case</span> <span class="mi">3</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">norm</span> <span class="o">&amp;</span> <span class="n">V4L2_STD_DK</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">areg_05</span> <span class="o">=</span> <span class="mh">0x0b</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">areg_05</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R01_A_INIT</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R02_A_FIX_GAIN_CTRL</span><span class="p">,</span> <span class="n">areg_02</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R03_A_AUTO_GAIN_CTRL</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R04_A_SIF_AMP_CTRL</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R05_A_STANDARD_MOD</span><span class="p">,</span> <span class="n">areg_05</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R06_A_SOUND_MOD</span><span class="p">,</span> <span class="n">areg_06</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R07_A_LEFT_VOL</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R08_A_RIGHT_VOL</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R09_A_MAIN_VOL</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R0A_A_I2S_MOD</span><span class="p">,</span> <span class="mh">0x91</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R0B_A_ASD_THRES1</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R0C_A_ASD_THRES2</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R0D_A_AMD_THRES</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R0E_A_MONO_THRES1</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R0F_A_MONO_THRES2</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R10_A_MUTE_THRES1</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R11_A_MUTE_THRES2</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R12_A_AGC_U</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R13_A_AGC_ERR_T</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R14_A_AGC_GAIN_INIT</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R15_A_AGC_STEP_THR</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R16_A_AGC_GAIN_MAX</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R17_A_AGC_GAIN_MIN</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R18_A_TR_CTRL</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R19_A_FH_2FH_GAIN</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R1A_A_NICAM_SER_MAX</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R1B_A_NICAM_SER_MIN</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">REQ_08_SET_GET_AVREG_BIT</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">REQ_08_SET_GET_AVREG_BIT</span><span class="p">,</span> <span class="mh">0x1d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R1E_A_GAIN_DEEMPH_OUT</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R1F_A_TEST_INTF_SEL</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R20_A_TEST_PIN_SEL</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_R01_A_INIT</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">tm6000_get_std_res</span><span class="p">(</span><span class="k">struct</span> <span class="n">tm6000_core</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Currently, those are the only supported resoltions */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">norm</span> <span class="o">&amp;</span> <span class="n">V4L2_STD_525_60</span><span class="p">)</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">height</span> <span class="o">=</span> <span class="mi">480</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">height</span> <span class="o">=</span> <span class="mi">576</span><span class="p">;</span>

	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">width</span> <span class="o">=</span> <span class="mi">720</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">tm6000_load_std</span><span class="p">(</span><span class="k">struct</span> <span class="n">tm6000_core</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">tm6000_reg_settings</span> <span class="o">*</span><span class="n">set</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">rc</span><span class="p">;</span>

	<span class="cm">/* Load board&#39;s initialization table */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">set</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">req</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">rc</span> <span class="o">=</span> <span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">set</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">req</span><span class="p">,</span> <span class="n">set</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">reg</span><span class="p">,</span> <span class="n">set</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">value</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">rc</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">printk</span><span class="p">(</span><span class="n">KERN_ERR</span> <span class="s">&quot;Error %i while setting &quot;</span>
			       <span class="s">&quot;req %d, reg %d to value %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			       <span class="n">rc</span><span class="p">,</span> <span class="n">set</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">req</span><span class="p">,</span> <span class="n">set</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">reg</span><span class="p">,</span> <span class="n">set</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">value</span><span class="p">);</span>
			<span class="k">return</span> <span class="n">rc</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">tm6000_set_standard</span><span class="p">(</span><span class="k">struct</span> <span class="n">tm6000_core</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">tm6000_input</span> <span class="o">*</span><span class="n">input</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">rc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reg_07_fe</span> <span class="o">=</span> <span class="mh">0x8a</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reg_08_f1</span> <span class="o">=</span> <span class="mh">0xfc</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reg_08_e2</span> <span class="o">=</span> <span class="mh">0xf0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reg_08_e6</span> <span class="o">=</span> <span class="mh">0x0f</span><span class="p">;</span>

	<span class="n">tm6000_get_std_res</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">radio</span><span class="p">)</span>
		<span class="n">input</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">vinput</span><span class="p">[</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">input</span><span class="p">];</span>
	<span class="k">else</span>
		<span class="n">input</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">rinput</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_type</span> <span class="o">==</span> <span class="n">TM6010</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">input</span><span class="o">-&gt;</span><span class="n">vmux</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="n">TM6000_VMUX_VIDEO_A</span>:
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RE3_ADC_IN1_SEL</span><span class="p">,</span> <span class="mh">0xf4</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_REA_BUFF_DRV_CTRL</span><span class="p">,</span> <span class="mh">0xf1</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_REB_SIF_GAIN_CTRL</span><span class="p">,</span> <span class="mh">0xe0</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_REC_REVERSE_YC_CTRL</span><span class="p">,</span> <span class="mh">0xc2</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RED_GAIN_SEL</span><span class="p">,</span> <span class="mh">0xe8</span><span class="p">);</span>
			<span class="n">reg_07_fe</span> <span class="o">|=</span> <span class="mh">0x01</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">TM6000_VMUX_VIDEO_B</span>:
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RE3_ADC_IN1_SEL</span><span class="p">,</span> <span class="mh">0xf8</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_REA_BUFF_DRV_CTRL</span><span class="p">,</span> <span class="mh">0xf1</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_REB_SIF_GAIN_CTRL</span><span class="p">,</span> <span class="mh">0xe0</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_REC_REVERSE_YC_CTRL</span><span class="p">,</span> <span class="mh">0xc2</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RED_GAIN_SEL</span><span class="p">,</span> <span class="mh">0xe8</span><span class="p">);</span>
			<span class="n">reg_07_fe</span> <span class="o">|=</span> <span class="mh">0x01</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">TM6000_VMUX_VIDEO_AB</span>:
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RE3_ADC_IN1_SEL</span><span class="p">,</span> <span class="mh">0xfc</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RE4_ADC_IN2_SEL</span><span class="p">,</span> <span class="mh">0xf8</span><span class="p">);</span>
			<span class="n">reg_08_e6</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_REA_BUFF_DRV_CTRL</span><span class="p">,</span> <span class="mh">0xf2</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_REB_SIF_GAIN_CTRL</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_REC_REVERSE_YC_CTRL</span><span class="p">,</span> <span class="mh">0xc2</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RED_GAIN_SEL</span><span class="p">,</span> <span class="mh">0xe0</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="nl">default:</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">input</span><span class="o">-&gt;</span><span class="n">amux</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="n">TM6000_AMUX_ADC1</span>:
			<span class="n">tm6000_set_reg_mask</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RF0_DAUDIO_INPUT_CONFIG</span><span class="p">,</span>
				<span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">);</span>
			<span class="cm">/* Mux overflow workaround */</span>
			<span class="n">tm6000_set_reg_mask</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ07_R07_OUTPUT_CONTROL</span><span class="p">,</span>
				<span class="mh">0x10</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">TM6000_AMUX_ADC2</span>:
			<span class="n">tm6000_set_reg_mask</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RF0_DAUDIO_INPUT_CONFIG</span><span class="p">,</span>
				<span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">);</span>
			<span class="cm">/* Mux overflow workaround */</span>
			<span class="n">tm6000_set_reg_mask</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ07_R07_OUTPUT_CONTROL</span><span class="p">,</span>
				<span class="mh">0x10</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">TM6000_AMUX_SIF1</span>:
			<span class="n">reg_08_e2</span> <span class="o">|=</span> <span class="mh">0x02</span><span class="p">;</span>
			<span class="n">reg_08_e6</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
			<span class="n">reg_07_fe</span> <span class="o">|=</span> <span class="mh">0x40</span><span class="p">;</span>
			<span class="n">reg_08_f1</span> <span class="o">|=</span> <span class="mh">0x02</span><span class="p">;</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RE4_ADC_IN2_SEL</span><span class="p">,</span> <span class="mh">0xf3</span><span class="p">);</span>
			<span class="n">tm6000_set_reg_mask</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RF0_DAUDIO_INPUT_CONFIG</span><span class="p">,</span>
				<span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">);</span>
			<span class="cm">/* Mux overflow workaround */</span>
			<span class="n">tm6000_set_reg_mask</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ07_R07_OUTPUT_CONTROL</span><span class="p">,</span>
				<span class="mh">0x30</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">TM6000_AMUX_SIF2</span>:
			<span class="n">reg_08_e2</span> <span class="o">|=</span> <span class="mh">0x02</span><span class="p">;</span>
			<span class="n">reg_08_e6</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
			<span class="n">reg_07_fe</span> <span class="o">|=</span> <span class="mh">0x40</span><span class="p">;</span>
			<span class="n">reg_08_f1</span> <span class="o">|=</span> <span class="mh">0x02</span><span class="p">;</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RE4_ADC_IN2_SEL</span><span class="p">,</span> <span class="mh">0xf7</span><span class="p">);</span>
			<span class="n">tm6000_set_reg_mask</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RF0_DAUDIO_INPUT_CONFIG</span><span class="p">,</span>
				<span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">);</span>
			<span class="cm">/* Mux overflow workaround */</span>
			<span class="n">tm6000_set_reg_mask</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ07_R07_OUTPUT_CONTROL</span><span class="p">,</span>
				<span class="mh">0x30</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="nl">default:</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RE2_POWER_DOWN_CTRL1</span><span class="p">,</span> <span class="n">reg_08_e2</span><span class="p">);</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RE6_POWER_DOWN_CTRL2</span><span class="p">,</span> <span class="n">reg_08_e6</span><span class="p">);</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ08_RF1_AADC_POWER_DOWN</span><span class="p">,</span> <span class="n">reg_08_f1</span><span class="p">);</span>
		<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6010_REQ07_RFE_POWER_DOWN</span><span class="p">,</span> <span class="n">reg_07_fe</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">input</span><span class="o">-&gt;</span><span class="n">vmux</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="n">TM6000_VMUX_VIDEO_A</span>:
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6000_REQ07_RE3_VADC_INP_LPF_SEL1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6000_REQ07_RE5_VADC_INP_LPF_SEL2</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6000_REQ07_RE8_VADC_PWDOWN_CTL</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
			    <span class="n">REQ_03_SET_GET_MCU_PIN</span><span class="p">,</span> <span class="n">input</span><span class="o">-&gt;</span><span class="n">v_gpio</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">TM6000_VMUX_VIDEO_B</span>:
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6000_REQ07_RE3_VADC_INP_LPF_SEL1</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6000_REQ07_RE5_VADC_INP_LPF_SEL2</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6000_REQ07_RE8_VADC_PWDOWN_CTL</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
			    <span class="n">REQ_03_SET_GET_MCU_PIN</span><span class="p">,</span> <span class="n">input</span><span class="o">-&gt;</span><span class="n">v_gpio</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">TM6000_VMUX_VIDEO_AB</span>:
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6000_REQ07_RE3_VADC_INP_LPF_SEL1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6000_REQ07_RE5_VADC_INP_LPF_SEL2</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">TM6000_REQ07_RE8_VADC_PWDOWN_CTL</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
			<span class="n">tm6000_set_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
			    <span class="n">REQ_03_SET_GET_MCU_PIN</span><span class="p">,</span> <span class="n">input</span><span class="o">-&gt;</span><span class="n">v_gpio</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="nl">default:</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">input</span><span class="o">-&gt;</span><span class="n">amux</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="n">TM6000_AMUX_ADC1</span>:
			<span class="n">tm6000_set_reg_mask</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
				<span class="n">TM6000_REQ07_REB_VADC_AADC_MODE</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">TM6000_AMUX_ADC2</span>:
			<span class="n">tm6000_set_reg_mask</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
				<span class="n">TM6000_REQ07_REB_VADC_AADC_MODE</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="nl">default:</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">input</span><span class="o">-&gt;</span><span class="n">type</span> <span class="o">==</span> <span class="n">TM6000_INPUT_SVIDEO</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">svideo_stds</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">norm</span> <span class="o">&amp;</span> <span class="n">svideo_stds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">id</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">rc</span> <span class="o">=</span> <span class="n">tm6000_load_std</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">svideo_stds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">common</span><span class="p">);</span>
				<span class="k">goto</span> <span class="n">ret</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">composite_stds</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">norm</span> <span class="o">&amp;</span> <span class="n">composite_stds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">id</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">rc</span> <span class="o">=</span> <span class="n">tm6000_load_std</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">composite_stds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">common</span><span class="p">);</span>
				<span class="k">goto</span> <span class="n">ret</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>

<span class="nl">ret:</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">rc</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">rc</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_type</span> <span class="o">==</span> <span class="n">TM6010</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	    <span class="p">((</span><span class="n">input</span><span class="o">-&gt;</span><span class="n">amux</span> <span class="o">==</span> <span class="n">TM6000_AMUX_SIF1</span><span class="p">)</span> <span class="o">||</span>
	    <span class="p">(</span><span class="n">input</span><span class="o">-&gt;</span><span class="n">amux</span> <span class="o">==</span> <span class="n">TM6000_AMUX_SIF2</span><span class="p">)))</span>
		<span class="n">tm6000_set_audio_std</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">msleep</span><span class="p">(</span><span class="mi">40</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
