<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › media › video › saa7134 › saa7134.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>saa7134.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *</span>
<span class="cm"> * v4l2 device driver for philips saa7134 based TV cards</span>
<span class="cm"> *</span>
<span class="cm"> * (c) 2001,02 Gerd Knorr &lt;kraxel@bytesex.org&gt;</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *  it under the terms of the GNU General Public License as published by</span>
<span class="cm"> *  the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> *  (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is distributed in the hope that it will be useful,</span>
<span class="cm"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> *  GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> *  You should have received a copy of the GNU General Public License</span>
<span class="cm"> *  along with this program; if not, write to the Free Software</span>
<span class="cm"> *  Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
<span class="cm"> */</span>

<span class="cp">#define SAA7134_VERSION &quot;0, 2, 17&quot;</span>

<span class="cp">#include &lt;linux/pci.h&gt;</span>
<span class="cp">#include &lt;linux/i2c.h&gt;</span>
<span class="cp">#include &lt;linux/videodev2.h&gt;</span>
<span class="cp">#include &lt;linux/kdev_t.h&gt;</span>
<span class="cp">#include &lt;linux/input.h&gt;</span>
<span class="cp">#include &lt;linux/notifier.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;linux/mutex.h&gt;</span>

<span class="cp">#include &lt;asm/io.h&gt;</span>

<span class="cp">#include &lt;media/v4l2-common.h&gt;</span>
<span class="cp">#include &lt;media/v4l2-ioctl.h&gt;</span>
<span class="cp">#include &lt;media/v4l2-device.h&gt;</span>
<span class="cp">#include &lt;media/tuner.h&gt;</span>
<span class="cp">#include &lt;media/rc-core.h&gt;</span>
<span class="cp">#include &lt;media/ir-kbd-i2c.h&gt;</span>
<span class="cp">#include &lt;media/videobuf-dma-sg.h&gt;</span>
<span class="cp">#include &lt;sound/core.h&gt;</span>
<span class="cp">#include &lt;sound/pcm.h&gt;</span>
<span class="cp">#if defined(CONFIG_VIDEO_SAA7134_DVB) || defined(CONFIG_VIDEO_SAA7134_DVB_MODULE)</span>
<span class="cp">#include &lt;media/videobuf-dvb.h&gt;</span>
<span class="cp">#endif</span>

<span class="cp">#define UNSET (-1U)</span>

<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* enums                                                       */</span>

<span class="k">enum</span> <span class="n">saa7134_tvaudio_mode</span> <span class="p">{</span>
	<span class="n">TVAUDIO_FM_MONO</span>       <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">TVAUDIO_FM_BG_STEREO</span>  <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">TVAUDIO_FM_SAT_STEREO</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">TVAUDIO_FM_K_STEREO</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">TVAUDIO_NICAM_AM</span>      <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">TVAUDIO_NICAM_FM</span>      <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">saa7134_audio_in</span> <span class="p">{</span>
	<span class="n">TV</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">LINE1</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">LINE2</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">LINE2_LEFT</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">saa7134_video_out</span> <span class="p">{</span>
	<span class="n">CCIR656</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* static data                                                 */</span>

<span class="k">struct</span> <span class="n">saa7134_tvnorm</span> <span class="p">{</span>
	<span class="kt">char</span>          <span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="n">v4l2_std_id</span>   <span class="n">id</span><span class="p">;</span>

	<span class="cm">/* video decoder */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">sync_control</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">luma_control</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">chroma_ctrl1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">chroma_gain</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">chroma_ctrl2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">vgate_misc</span><span class="p">;</span>

	<span class="cm">/* video scaler */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">h_start</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">h_stop</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">video_v_start</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">video_v_stop</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">vbi_v_start_0</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">vbi_v_stop_0</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">src_timing</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">vbi_v_start_1</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">saa7134_tvaudio</span> <span class="p">{</span>
	<span class="kt">char</span>         <span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="n">v4l2_std_id</span>  <span class="n">std</span><span class="p">;</span>
	<span class="k">enum</span>         <span class="n">saa7134_tvaudio_mode</span> <span class="n">mode</span><span class="p">;</span>
	<span class="kt">int</span>          <span class="n">carr1</span><span class="p">;</span>
	<span class="kt">int</span>          <span class="n">carr2</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">saa7134_format</span> <span class="p">{</span>
	<span class="kt">char</span>           <span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">fourcc</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">depth</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">pm</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">vshift</span><span class="p">;</span>   <span class="cm">/* vertical downsampling (for planar yuv) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">hshift</span><span class="p">;</span>   <span class="cm">/* horizontal downsampling (for planar yuv) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">bswap</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">wswap</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">yuv</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">planar</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>   <span class="n">uvswap</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">saa7134_card_ir</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">rc_dev</span>		<span class="o">*</span><span class="n">dev</span><span class="p">;</span>

	<span class="kt">char</span>                    <span class="n">name</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="kt">char</span>                    <span class="n">phys</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="kt">unsigned</span>                <span class="n">users</span><span class="p">;</span>

	<span class="n">u32</span>			<span class="n">polling</span><span class="p">;</span>
	<span class="n">u32</span>			<span class="n">last_gpio</span><span class="p">;</span>
	<span class="n">u32</span>			<span class="n">mask_keycode</span><span class="p">,</span> <span class="n">mask_keydown</span><span class="p">,</span> <span class="n">mask_keyup</span><span class="p">;</span>

	<span class="n">bool</span>                    <span class="n">running</span><span class="p">;</span>
	<span class="n">bool</span>			<span class="n">active</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">timer_list</span>       <span class="n">timer</span><span class="p">;</span>

	<span class="cm">/* IR core raw decoding */</span>
	<span class="n">u32</span>                     <span class="n">raw_decode</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* card configuration                                          */</span>

<span class="cp">#define SAA7134_BOARD_NOAUTO        UNSET</span>
<span class="cp">#define SAA7134_BOARD_UNKNOWN           0</span>
<span class="cp">#define SAA7134_BOARD_PROTEUS_PRO       1</span>
<span class="cp">#define SAA7134_BOARD_FLYVIDEO3000      2</span>
<span class="cp">#define SAA7134_BOARD_FLYVIDEO2000      3</span>
<span class="cp">#define SAA7134_BOARD_EMPRESS           4</span>
<span class="cp">#define SAA7134_BOARD_MONSTERTV         5</span>
<span class="cp">#define SAA7134_BOARD_MD9717            6</span>
<span class="cp">#define SAA7134_BOARD_TVSTATION_RDS     7</span>
<span class="cp">#define SAA7134_BOARD_CINERGY400	8</span>
<span class="cp">#define SAA7134_BOARD_MD5044		9</span>
<span class="cp">#define SAA7134_BOARD_KWORLD           10</span>
<span class="cp">#define SAA7134_BOARD_CINERGY600       11</span>
<span class="cp">#define SAA7134_BOARD_MD7134           12</span>
<span class="cp">#define SAA7134_BOARD_TYPHOON_90031    13</span>
<span class="cp">#define SAA7134_BOARD_ELSA             14</span>
<span class="cp">#define SAA7134_BOARD_ELSA_500TV       15</span>
<span class="cp">#define SAA7134_BOARD_ASUSTeK_TVFM7134 16</span>
<span class="cp">#define SAA7134_BOARD_VA1000POWER      17</span>
<span class="cp">#define SAA7134_BOARD_BMK_MPEX_NOTUNER 18</span>
<span class="cp">#define SAA7134_BOARD_VIDEOMATE_TV     19</span>
<span class="cp">#define SAA7134_BOARD_CRONOS_PLUS      20</span>
<span class="cp">#define SAA7134_BOARD_10MOONSTVMASTER  21</span>
<span class="cp">#define SAA7134_BOARD_MD2819           22</span>
<span class="cp">#define SAA7134_BOARD_BMK_MPEX_TUNER   23</span>
<span class="cp">#define SAA7134_BOARD_TVSTATION_DVR    24</span>
<span class="cp">#define SAA7134_BOARD_ASUSTEK_TVFM7133	25</span>
<span class="cp">#define SAA7134_BOARD_PINNACLE_PCTV_STEREO 26</span>
<span class="cp">#define SAA7134_BOARD_MANLI_MTV002     27</span>
<span class="cp">#define SAA7134_BOARD_MANLI_MTV001     28</span>
<span class="cp">#define SAA7134_BOARD_TG3000TV         29</span>
<span class="cp">#define SAA7134_BOARD_ECS_TVP3XP       30</span>
<span class="cp">#define SAA7134_BOARD_ECS_TVP3XP_4CB5  31</span>
<span class="cp">#define SAA7134_BOARD_AVACSSMARTTV     32</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_DVD_EZMAKER 33</span>
<span class="cp">#define SAA7134_BOARD_NOVAC_PRIMETV7133 34</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_STUDIO_305 35</span>
<span class="cp">#define SAA7134_BOARD_UPMOST_PURPLE_TV 36</span>
<span class="cp">#define SAA7134_BOARD_ITEMS_MTV005     37</span>
<span class="cp">#define SAA7134_BOARD_CINERGY200       38</span>
<span class="cp">#define SAA7134_BOARD_FLYTVPLATINUM_MINI 39</span>
<span class="cp">#define SAA7134_BOARD_VIDEOMATE_TV_PVR 40</span>
<span class="cp">#define SAA7134_BOARD_VIDEOMATE_TV_GOLD_PLUS 41</span>
<span class="cp">#define SAA7134_BOARD_SABRENT_SBTTVFM  42</span>
<span class="cp">#define SAA7134_BOARD_ZOLID_XPERT_TV7134 43</span>
<span class="cp">#define SAA7134_BOARD_EMPIRE_PCI_TV_RADIO_LE 44</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_STUDIO_307    45</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_CARDBUS 46</span>
<span class="cp">#define SAA7134_BOARD_CINERGY400_CARDBUS 47</span>
<span class="cp">#define SAA7134_BOARD_CINERGY600_MK3   48</span>
<span class="cp">#define SAA7134_BOARD_VIDEOMATE_GOLD_PLUS 49</span>
<span class="cp">#define SAA7134_BOARD_PINNACLE_300I_DVBT_PAL 50</span>
<span class="cp">#define SAA7134_BOARD_PROVIDEO_PV952   51</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_305    52</span>
<span class="cp">#define SAA7134_BOARD_ASUSTeK_TVFM7135 53</span>
<span class="cp">#define SAA7134_BOARD_FLYTVPLATINUM_FM 54</span>
<span class="cp">#define SAA7134_BOARD_FLYDVBTDUO 55</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_307    56</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_GO_007_FM 57</span>
<span class="cp">#define SAA7134_BOARD_ADS_INSTANT_TV 58</span>
<span class="cp">#define SAA7134_BOARD_KWORLD_VSTREAM_XPERT 59</span>
<span class="cp">#define SAA7134_BOARD_FLYDVBT_DUO_CARDBUS 60</span>
<span class="cp">#define SAA7134_BOARD_PHILIPS_TOUGH 61</span>
<span class="cp">#define SAA7134_BOARD_VIDEOMATE_TV_GOLD_PLUSII 62</span>
<span class="cp">#define SAA7134_BOARD_KWORLD_XPERT 63</span>
<span class="cp">#define SAA7134_BOARD_FLYTV_DIGIMATRIX 64</span>
<span class="cp">#define SAA7134_BOARD_KWORLD_TERMINATOR 65</span>
<span class="cp">#define SAA7134_BOARD_YUAN_TUN900 66</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_409FM 67</span>
<span class="cp">#define SAA7134_BOARD_GOTVIEW_7135 68</span>
<span class="cp">#define SAA7134_BOARD_PHILIPS_EUROPA  69</span>
<span class="cp">#define SAA7134_BOARD_VIDEOMATE_DVBT_300 70</span>
<span class="cp">#define SAA7134_BOARD_VIDEOMATE_DVBT_200 71</span>
<span class="cp">#define SAA7134_BOARD_RTD_VFG7350 72</span>
<span class="cp">#define SAA7134_BOARD_RTD_VFG7330 73</span>
<span class="cp">#define SAA7134_BOARD_FLYTVPLATINUM_MINI2 74</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_AVERTVHD_A180 75</span>
<span class="cp">#define SAA7134_BOARD_MONSTERTV_MOBILE 76</span>
<span class="cp">#define SAA7134_BOARD_PINNACLE_PCTV_110i 77</span>
<span class="cp">#define SAA7134_BOARD_ASUSTeK_P7131_DUAL 78</span>
<span class="cp">#define SAA7134_BOARD_SEDNA_PC_TV_CARDBUS     79</span>
<span class="cp">#define SAA7134_BOARD_ASUSTEK_DIGIMATRIX_TV 80</span>
<span class="cp">#define SAA7134_BOARD_PHILIPS_TIGER  81</span>
<span class="cp">#define SAA7134_BOARD_MSI_TVATANYWHERE_PLUS  82</span>
<span class="cp">#define SAA7134_BOARD_CINERGY250PCI 83</span>
<span class="cp">#define SAA7134_BOARD_FLYDVB_TRIO 84</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_777 85</span>
<span class="cp">#define SAA7134_BOARD_FLYDVBT_LR301 86</span>
<span class="cp">#define SAA7134_BOARD_ADS_DUO_CARDBUS_PTV331 87</span>
<span class="cp">#define SAA7134_BOARD_TEVION_DVBT_220RF 88</span>
<span class="cp">#define SAA7134_BOARD_ELSA_700TV       89</span>
<span class="cp">#define SAA7134_BOARD_KWORLD_ATSC110   90</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_A169_B 91</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_A169_B1 92</span>
<span class="cp">#define SAA7134_BOARD_MD7134_BRIDGE_2     93</span>
<span class="cp">#define SAA7134_BOARD_FLYDVBT_HYBRID_CARDBUS 94</span>
<span class="cp">#define SAA7134_BOARD_FLYVIDEO3000_NTSC 95</span>
<span class="cp">#define SAA7134_BOARD_MEDION_MD8800_QUADRO 96</span>
<span class="cp">#define SAA7134_BOARD_FLYDVBS_LR300 97</span>
<span class="cp">#define SAA7134_BOARD_PROTEUS_2309 98</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_A16AR   99</span>
<span class="cp">#define SAA7134_BOARD_ASUS_EUROPA2_HYBRID 100</span>
<span class="cp">#define SAA7134_BOARD_PINNACLE_PCTV_310i  101</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_STUDIO_507 102</span>
<span class="cp">#define SAA7134_BOARD_VIDEOMATE_DVBT_200A  103</span>
<span class="cp">#define SAA7134_BOARD_HAUPPAUGE_HVR1110    104</span>
<span class="cp">#define SAA7134_BOARD_CINERGY_HT_PCMCIA    105</span>
<span class="cp">#define SAA7134_BOARD_ENCORE_ENLTV         106</span>
<span class="cp">#define SAA7134_BOARD_ENCORE_ENLTV_FM      107</span>
<span class="cp">#define SAA7134_BOARD_CINERGY_HT_PCI       108</span>
<span class="cp">#define SAA7134_BOARD_PHILIPS_TIGER_S      109</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_M102	   110</span>
<span class="cp">#define SAA7134_BOARD_ASUS_P7131_4871	   111</span>
<span class="cp">#define SAA7134_BOARD_ASUSTeK_P7131_HYBRID_LNA 112</span>
<span class="cp">#define SAA7134_BOARD_ECS_TVP3XP_4CB6  113</span>
<span class="cp">#define SAA7134_BOARD_KWORLD_DVBT_210 114</span>
<span class="cp">#define SAA7134_BOARD_SABRENT_TV_PCB05     115</span>
<span class="cp">#define SAA7134_BOARD_10MOONSTVMASTER3     116</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_SUPER_007  117</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_401  	118</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_403  	119</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_403FM	120</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_405	121</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_405FM	122</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_407	123</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_407FM	124</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_409	125</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_505FM	126</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_507_9FM	127</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_COLUMBUS_TVFM 128</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_607FM_MK3	129</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_M6		130</span>
<span class="cp">#define SAA7134_BOARD_TWINHAN_DTV_DVB_3056 131</span>
<span class="cp">#define SAA7134_BOARD_GENIUS_TVGO_A11MCE   132</span>
<span class="cp">#define SAA7134_BOARD_PHILIPS_SNAKE        133</span>
<span class="cp">#define SAA7134_BOARD_CREATIX_CTX953       134</span>
<span class="cp">#define SAA7134_BOARD_MSI_TVANYWHERE_AD11  135</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_CARDBUS_506 136</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_A16D       137</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_M115       138</span>
<span class="cp">#define SAA7134_BOARD_VIDEOMATE_T750       139</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_A700_PRO    140</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_A700_HYBRID 141</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_H6      142</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_M63      143</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_M6_EXTRA    144</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_M103    145</span>
<span class="cp">#define SAA7134_BOARD_ASUSTeK_P7131_ANALOG 146</span>
<span class="cp">#define SAA7134_BOARD_ASUSTeK_TIGER_3IN1   147</span>
<span class="cp">#define SAA7134_BOARD_ENCORE_ENLTV_FM53 148</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_M135A    149</span>
<span class="cp">#define SAA7134_BOARD_REAL_ANGEL_220     150</span>
<span class="cp">#define SAA7134_BOARD_ADS_INSTANT_HDTV_PCI  151</span>
<span class="cp">#define SAA7134_BOARD_ASUSTeK_TIGER         152</span>
<span class="cp">#define SAA7134_BOARD_KWORLD_PLUS_TV_ANALOG 153</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_GO_007_FM_PLUS 154</span>
<span class="cp">#define SAA7134_BOARD_HAUPPAUGE_HVR1150     155</span>
<span class="cp">#define SAA7134_BOARD_HAUPPAUGE_HVR1120   156</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_STUDIO_507UA 157</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_CARDBUS_501 158</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_505RDS_MK5     159</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_507RDS_MK3     160</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_507RDS_MK5     161</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_607FM_MK5      162</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_609FM_MK3      163</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_609FM_MK5      164</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_607RDS_MK3     165</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_607RDS_MK5     166</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_609RDS_MK3     167</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_609RDS_MK5     168</span>
<span class="cp">#define SAA7134_BOARD_VIDEOMATE_S350        169</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_STUDIO_505  170</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_X7             171</span>
<span class="cp">#define SAA7134_BOARD_ROVERMEDIA_LINK_PRO_FM 172</span>
<span class="cp">#define SAA7134_BOARD_ZOLID_HYBRID_PCI		173</span>
<span class="cp">#define SAA7134_BOARD_ASUS_EUROPA_HYBRID	174</span>
<span class="cp">#define SAA7134_BOARD_LEADTEK_WINFAST_DTV1000S 175</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_505RDS_MK3     176</span>
<span class="cp">#define SAA7134_BOARD_HAWELL_HW_404M7		177</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_H7             178</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_A7             179</span>
<span class="cp">#define SAA7134_BOARD_AVERMEDIA_M733A       180</span>
<span class="cp">#define SAA7134_BOARD_TECHNOTREND_BUDGET_T3000 181</span>
<span class="cp">#define SAA7134_BOARD_KWORLD_PCI_SBTVD_FULLSEG 182</span>
<span class="cp">#define SAA7134_BOARD_VIDEOMATE_M1F         183</span>
<span class="cp">#define SAA7134_BOARD_ENCORE_ENLTV_FM3      184</span>
<span class="cp">#define SAA7134_BOARD_MAGICPRO_PROHDTV_PRO2 185</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_501            186</span>
<span class="cp">#define SAA7134_BOARD_BEHOLD_503FM          187</span>
<span class="cp">#define SAA7134_BOARD_SENSORAY811_911       188</span>
<span class="cp">#define SAA7134_BOARD_KWORLD_PC150U         189</span>
<span class="cp">#define SAA7134_BOARD_ASUSTeK_PS3_100      190</span>

<span class="cp">#define SAA7134_MAXBOARDS 32</span>
<span class="cp">#define SAA7134_INPUT_MAX 8</span>

<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* Since we support 2 remote types, lets tell them apart       */</span>

<span class="cp">#define SAA7134_REMOTE_GPIO  1</span>
<span class="cp">#define SAA7134_REMOTE_I2C   2</span>

<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* Video Output Port Register Initialization Options           */</span>

<span class="cp">#define SET_T_CODE_POLARITY_NON_INVERTED	(1 &lt;&lt; 0)</span>
<span class="cp">#define SET_CLOCK_NOT_DELAYED			(1 &lt;&lt; 1)</span>
<span class="cp">#define SET_CLOCK_INVERTED			(1 &lt;&lt; 2)</span>
<span class="cp">#define SET_VSYNC_OFF				(1 &lt;&lt; 3)</span>

<span class="k">struct</span> <span class="n">saa7134_input</span> <span class="p">{</span>
	<span class="kt">char</span>                    <span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">vmux</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">saa7134_audio_in</span>   <span class="n">amux</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">gpio</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">tv</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">saa7134_mpeg_type</span> <span class="p">{</span>
	<span class="n">SAA7134_MPEG_UNUSED</span><span class="p">,</span>
	<span class="n">SAA7134_MPEG_EMPRESS</span><span class="p">,</span>
	<span class="n">SAA7134_MPEG_DVB</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">saa7134_mpeg_ts_type</span> <span class="p">{</span>
	<span class="n">SAA7134_MPEG_TS_PARALLEL</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">SAA7134_MPEG_TS_SERIAL</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">saa7134_board</span> <span class="p">{</span>
	<span class="kt">char</span>                    <span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">audio_clock</span><span class="p">;</span>

	<span class="cm">/* input switching */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">gpiomask</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_input</span>    <span class="n">inputs</span><span class="p">[</span><span class="n">SAA7134_INPUT_MAX</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">saa7134_input</span>    <span class="n">radio</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_input</span>    <span class="n">mute</span><span class="p">;</span>

	<span class="cm">/* i2c chip info */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">tuner_type</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">radio_type</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">tuner_addr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">radio_addr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">empress_addr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">rds_addr</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">tda9887_conf</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">tuner_config</span><span class="p">;</span>

	<span class="cm">/* peripheral I/O */</span>
	<span class="k">enum</span> <span class="n">saa7134_video_out</span>  <span class="n">video_out</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">saa7134_mpeg_type</span>  <span class="n">mpeg</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">saa7134_mpeg_ts_type</span> <span class="n">ts_type</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">vid_port_opts</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">ts_force_val</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define card_has_radio(dev)   (NULL != saa7134_boards[dev-&gt;board].radio.name)</span>
<span class="cp">#define card_is_empress(dev)  (SAA7134_MPEG_EMPRESS == saa7134_boards[dev-&gt;board].mpeg)</span>
<span class="cp">#define card_is_dvb(dev)      (SAA7134_MPEG_DVB     == saa7134_boards[dev-&gt;board].mpeg)</span>
<span class="cp">#define card_has_mpeg(dev)    (SAA7134_MPEG_UNUSED  != saa7134_boards[dev-&gt;board].mpeg)</span>
<span class="cp">#define card(dev)             (saa7134_boards[dev-&gt;board])</span>
<span class="cp">#define card_in(dev,n)        (saa7134_boards[dev-&gt;board].inputs[n])</span>

<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* device / file handle status                                 */</span>

<span class="cp">#define RESOURCE_OVERLAY       1</span>
<span class="cp">#define RESOURCE_VIDEO         2</span>
<span class="cp">#define RESOURCE_VBI           4</span>

<span class="cp">#define INTERLACE_AUTO         0</span>
<span class="cp">#define INTERLACE_ON           1</span>
<span class="cp">#define INTERLACE_OFF          2</span>

<span class="cp">#define BUFFER_TIMEOUT     msecs_to_jiffies(500)  </span><span class="cm">/* 0.5 seconds */</span><span class="cp"></span>
<span class="cp">#define TS_BUFFER_TIMEOUT  msecs_to_jiffies(1000)  </span><span class="cm">/* 1 second */</span><span class="cp"></span>

<span class="k">struct</span> <span class="n">saa7134_dev</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">saa7134_dma</span><span class="p">;</span>

<span class="cm">/* saa7134 page table */</span>
<span class="k">struct</span> <span class="n">saa7134_pgtable</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">size</span><span class="p">;</span>
	<span class="n">__le32</span>                     <span class="o">*</span><span class="n">cpu</span><span class="p">;</span>
	<span class="n">dma_addr_t</span>                 <span class="n">dma</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* tvaudio thread status */</span>
<span class="k">struct</span> <span class="n">saa7134_thread</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">task_struct</span>         <span class="o">*</span><span class="kr">thread</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">scan1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">scan2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">mode</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		   <span class="n">stopped</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* buffer for one video/vbi/ts frame */</span>
<span class="k">struct</span> <span class="n">saa7134_buf</span> <span class="p">{</span>
	<span class="cm">/* common v4l buffer stuff -- must be first */</span>
	<span class="k">struct</span> <span class="n">videobuf_buffer</span> <span class="n">vb</span><span class="p">;</span>

	<span class="cm">/* saa7134 specific */</span>
	<span class="k">struct</span> <span class="n">saa7134_format</span>   <span class="o">*</span><span class="n">fmt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">top_seen</span><span class="p">;</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">activate</span><span class="p">)(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">saa7134_buf</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">saa7134_buf</span> <span class="o">*</span><span class="n">next</span><span class="p">);</span>

	<span class="cm">/* page tables */</span>
	<span class="k">struct</span> <span class="n">saa7134_pgtable</span>  <span class="o">*</span><span class="n">pt</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">saa7134_dmaqueue</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">saa7134_dev</span>         <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_buf</span>         <span class="o">*</span><span class="n">curr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span>           <span class="n">queue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span>          <span class="n">timeout</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">need_two</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* video filehandle status */</span>
<span class="k">struct</span> <span class="n">saa7134_fh</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">saa7134_dev</span>         <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">radio</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">v4l2_buf_type</span>         <span class="n">type</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">resources</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">v4l2_priority</span>	   <span class="n">prio</span><span class="p">;</span>

	<span class="cm">/* video overlay */</span>
	<span class="k">struct</span> <span class="n">v4l2_window</span>         <span class="n">win</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">v4l2_clip</span>           <span class="n">clips</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">nclips</span><span class="p">;</span>

	<span class="cm">/* video capture */</span>
	<span class="k">struct</span> <span class="n">saa7134_format</span>      <span class="o">*</span><span class="n">fmt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">videobuf_queue</span>      <span class="n">cap</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_pgtable</span>     <span class="n">pt_cap</span><span class="p">;</span>

	<span class="cm">/* vbi capture */</span>
	<span class="k">struct</span> <span class="n">videobuf_queue</span>      <span class="n">vbi</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_pgtable</span>     <span class="n">pt_vbi</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* dmasound dsp status */</span>
<span class="k">struct</span> <span class="n">saa7134_dmasound</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">mutex</span>               <span class="n">lock</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">minor_mixer</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">minor_dsp</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">users_dsp</span><span class="p">;</span>

	<span class="cm">/* mixer */</span>
	<span class="k">enum</span> <span class="n">saa7134_audio_in</span>      <span class="n">input</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">count</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">line1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">line2</span><span class="p">;</span>

	<span class="cm">/* dsp */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">afmt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">rate</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">channels</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">recording_on</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">dma_running</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">blocks</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">blksize</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">bufsize</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_pgtable</span>     <span class="n">pt</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">videobuf_dmabuf</span>     <span class="n">dma</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">dma_blk</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">read_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">read_count</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span>			   <span class="n">priv_data</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_pcm_substream</span>   <span class="o">*</span><span class="n">substream</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* ts/mpeg status */</span>
<span class="k">struct</span> <span class="n">saa7134_ts</span> <span class="p">{</span>
	<span class="cm">/* TS capture */</span>
	<span class="k">struct</span> <span class="n">saa7134_pgtable</span>     <span class="n">pt_ts</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">nr_packets</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">nr_bufs</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* ts/mpeg ops */</span>
<span class="k">struct</span> <span class="n">saa7134_mpeg_ops</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">saa7134_mpeg_type</span>     <span class="n">type</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span>           <span class="n">next</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="p">(</span><span class="o">*</span><span class="n">init</span><span class="p">)(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
	<span class="kt">int</span>                        <span class="p">(</span><span class="o">*</span><span class="n">fini</span><span class="p">)(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
	<span class="kt">void</span>                       <span class="p">(</span><span class="o">*</span><span class="n">signal_change</span><span class="p">)(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/* global device status */</span>
<span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span>           <span class="n">devlist</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span>               <span class="n">lock</span><span class="p">;</span>
	<span class="n">spinlock_t</span>                 <span class="n">slock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">v4l2_prio_state</span>     <span class="n">prio</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">v4l2_device</span>         <span class="n">v4l2_dev</span><span class="p">;</span>
	<span class="cm">/* workstruct for loading modules */</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">request_module_wk</span><span class="p">;</span>

	<span class="cm">/* insmod option/autodetected */</span>
	<span class="kt">int</span>                        <span class="n">autodetected</span><span class="p">;</span>

	<span class="cm">/* various device info */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">resources</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">video_device</span>        <span class="o">*</span><span class="n">video_dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">video_device</span>        <span class="o">*</span><span class="n">radio_dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">video_device</span>        <span class="o">*</span><span class="n">vbi_dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_dmasound</span>    <span class="n">dmasound</span><span class="p">;</span>

	<span class="cm">/* infrared remote */</span>
	<span class="kt">int</span>                        <span class="n">has_remote</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_card_ir</span>     <span class="o">*</span><span class="n">remote</span><span class="p">;</span>

	<span class="cm">/* pci i/o */</span>
	<span class="kt">char</span>                       <span class="n">name</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="kt">int</span>                        <span class="n">nr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_dev</span>             <span class="o">*</span><span class="n">pci</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>              <span class="n">pci_rev</span><span class="p">,</span><span class="n">pci_lat</span><span class="p">;</span>
	<span class="n">__u32</span>                      <span class="n">__iomem</span> <span class="o">*</span><span class="n">lmmio</span><span class="p">;</span>
	<span class="n">__u8</span>                       <span class="n">__iomem</span> <span class="o">*</span><span class="n">bmmio</span><span class="p">;</span>

	<span class="cm">/* config info */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">board</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">tuner_type</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> 		   <span class="n">radio_type</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		   <span class="n">tuner_addr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		   <span class="n">radio_addr</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">tda9887_conf</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">gpio_value</span><span class="p">;</span>

	<span class="cm">/* i2c i/o */</span>
	<span class="k">struct</span> <span class="n">i2c_adapter</span>         <span class="n">i2c_adap</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">i2c_client</span>          <span class="n">i2c_client</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>              <span class="n">eedata</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
	<span class="kt">int</span> 			   <span class="n">has_rds</span><span class="p">;</span>

	<span class="cm">/* video overlay */</span>
	<span class="k">struct</span> <span class="n">v4l2_framebuffer</span>    <span class="n">ovbuf</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_format</span>      <span class="o">*</span><span class="n">ovfmt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">ovenable</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">v4l2_field</span>            <span class="n">ovfield</span><span class="p">;</span>

	<span class="cm">/* video+ts+vbi capture */</span>
	<span class="k">struct</span> <span class="n">saa7134_dmaqueue</span>    <span class="n">video_q</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_dmaqueue</span>    <span class="n">vbi_q</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">video_fieldcount</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">vbi_fieldcount</span><span class="p">;</span>

	<span class="cm">/* various v4l controls */</span>
	<span class="k">struct</span> <span class="n">saa7134_tvnorm</span>      <span class="o">*</span><span class="n">tvnorm</span><span class="p">;</span>              <span class="cm">/* video */</span>
	<span class="k">struct</span> <span class="n">saa7134_tvaudio</span>     <span class="o">*</span><span class="n">tvaudio</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">ctl_input</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">ctl_bright</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">ctl_contrast</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">ctl_hue</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">ctl_saturation</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">ctl_freq</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">ctl_mute</span><span class="p">;</span>             <span class="cm">/* audio */</span>
	<span class="kt">int</span>                        <span class="n">ctl_volume</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">ctl_invert</span><span class="p">;</span>           <span class="cm">/* private */</span>
	<span class="kt">int</span>                        <span class="n">ctl_mirror</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">ctl_y_odd</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">ctl_y_even</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">ctl_automute</span><span class="p">;</span>

	<span class="cm">/* crop */</span>
	<span class="k">struct</span> <span class="n">v4l2_rect</span>           <span class="n">crop_bounds</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">v4l2_rect</span>           <span class="n">crop_defrect</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">v4l2_rect</span>           <span class="n">crop_current</span><span class="p">;</span>

	<span class="cm">/* other global state info */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">automute</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_thread</span>      <span class="kr">thread</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_input</span>       <span class="o">*</span><span class="n">input</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_input</span>       <span class="o">*</span><span class="n">hw_input</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">hw_mute</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">last_carrier</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">nosignal</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>               <span class="n">insuspend</span><span class="p">;</span>

	<span class="cm">/* I2C keyboard data */</span>
	<span class="k">struct</span> <span class="n">IR_i2c_init_data</span>    <span class="n">init_data</span><span class="p">;</span>

	<span class="cm">/* SAA7134_MPEG_* */</span>
	<span class="k">struct</span> <span class="n">saa7134_ts</span>          <span class="n">ts</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_dmaqueue</span>    <span class="n">ts_q</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">ts_started</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7134_mpeg_ops</span>    <span class="o">*</span><span class="n">mops</span><span class="p">;</span>

	<span class="cm">/* SAA7134_MPEG_EMPRESS only */</span>
	<span class="k">struct</span> <span class="n">video_device</span>        <span class="o">*</span><span class="n">empress_dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">videobuf_queue</span>      <span class="n">empress_tsq</span><span class="p">;</span>
	<span class="n">atomic_t</span> 		   <span class="n">empress_users</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span>         <span class="n">empress_workqueue</span><span class="p">;</span>
	<span class="kt">int</span>                        <span class="n">empress_started</span><span class="p">;</span>

<span class="cp">#if defined(CONFIG_VIDEO_SAA7134_DVB) || defined(CONFIG_VIDEO_SAA7134_DVB_MODULE)</span>
	<span class="cm">/* SAA7134_MPEG_DVB only */</span>
	<span class="k">struct</span> <span class="n">videobuf_dvb_frontends</span> <span class="n">frontends</span><span class="p">;</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">original_demod_sleep</span><span class="p">)(</span><span class="k">struct</span> <span class="n">dvb_frontend</span> <span class="o">*</span><span class="n">fe</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">original_set_voltage</span><span class="p">)(</span><span class="k">struct</span> <span class="n">dvb_frontend</span> <span class="o">*</span><span class="n">fe</span><span class="p">,</span> <span class="n">fe_sec_voltage_t</span> <span class="n">voltage</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">original_set_high_voltage</span><span class="p">)(</span><span class="k">struct</span> <span class="n">dvb_frontend</span> <span class="o">*</span><span class="n">fe</span><span class="p">,</span> <span class="kt">long</span> <span class="n">arg</span><span class="p">);</span>
<span class="cp">#endif</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">gate_ctrl</span><span class="p">)(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">open</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/* ----------------------------------------------------------- */</span>

<span class="cp">#define saa_readl(reg)             readl(dev-&gt;lmmio + (reg))</span>
<span class="cp">#define saa_writel(reg,value)      writel((value), dev-&gt;lmmio + (reg));</span>
<span class="cp">#define saa_andorl(reg,mask,value) \</span>
<span class="cp">  writel((readl(dev-&gt;lmmio+(reg)) &amp; ~(mask)) |\</span>
<span class="cp">  ((value) &amp; (mask)), dev-&gt;lmmio+(reg))</span>
<span class="cp">#define saa_setl(reg,bit)          saa_andorl((reg),(bit),(bit))</span>
<span class="cp">#define saa_clearl(reg,bit)        saa_andorl((reg),(bit),0)</span>

<span class="cp">#define saa_readb(reg)             readb(dev-&gt;bmmio + (reg))</span>
<span class="cp">#define saa_writeb(reg,value)      writeb((value), dev-&gt;bmmio + (reg));</span>
<span class="cp">#define saa_andorb(reg,mask,value) \</span>
<span class="cp">  writeb((readb(dev-&gt;bmmio+(reg)) &amp; ~(mask)) |\</span>
<span class="cp">  ((value) &amp; (mask)), dev-&gt;bmmio+(reg))</span>
<span class="cp">#define saa_setb(reg,bit)          saa_andorb((reg),(bit),(bit))</span>
<span class="cp">#define saa_clearb(reg,bit)        saa_andorb((reg),(bit),0)</span>

<span class="cp">#define saa_wait(us) { udelay(us); }</span>

<span class="cp">#define SAA7134_NORMS	(\</span>
<span class="cp">		V4L2_STD_PAL    | V4L2_STD_PAL_N | \</span>
<span class="cp">		V4L2_STD_PAL_Nc | V4L2_STD_SECAM | \</span>
<span class="cp">		V4L2_STD_NTSC   | V4L2_STD_PAL_M | \</span>
<span class="cp">		V4L2_STD_PAL_60)</span>

<span class="cp">#define GRP_EMPRESS (1)</span>
<span class="cp">#define saa_call_all(dev, o, f, args...) do {				\</span>
<span class="cp">	if (dev-&gt;gate_ctrl)						\</span>
<span class="cp">		dev-&gt;gate_ctrl(dev, 1);					\</span>
<span class="cp">	v4l2_device_call_all(&amp;(dev)-&gt;v4l2_dev, 0, o, f , ##args);	\</span>
<span class="cp">	if (dev-&gt;gate_ctrl)						\</span>
<span class="cp">		dev-&gt;gate_ctrl(dev, 0);					\</span>
<span class="cp">} while (0)</span>

<span class="cp">#define saa_call_empress(dev, o, f, args...) ({				\</span>
<span class="cp">	long _rc;							\</span>
<span class="cp">	if (dev-&gt;gate_ctrl)						\</span>
<span class="cp">		dev-&gt;gate_ctrl(dev, 1);					\</span>
<span class="cp">	_rc = v4l2_device_call_until_err(&amp;(dev)-&gt;v4l2_dev,		\</span>
<span class="cp">					 GRP_EMPRESS, o, f , ##args);	\</span>
<span class="cp">	if (dev-&gt;gate_ctrl)						\</span>
<span class="cp">		dev-&gt;gate_ctrl(dev, 0);					\</span>
<span class="cp">	_rc;								\</span>
<span class="cp">})</span>

<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* saa7134-core.c                                              */</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">list_head</span>  <span class="n">saa7134_devlist</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">mutex</span> <span class="n">saa7134_devlist_lock</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">saa7134_no_overlay</span><span class="p">;</span>

<span class="kt">void</span> <span class="n">saa7134_track_gpio</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">msg</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_set_gpio</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">bit_no</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">);</span>

<span class="cp">#define SAA7134_PGTABLE_SIZE 4096</span>

<span class="kt">int</span> <span class="n">saa7134_pgtable_alloc</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pci</span><span class="p">,</span> <span class="k">struct</span> <span class="n">saa7134_pgtable</span> <span class="o">*</span><span class="n">pt</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">saa7134_pgtable_build</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pci</span><span class="p">,</span> <span class="k">struct</span> <span class="n">saa7134_pgtable</span> <span class="o">*</span><span class="n">pt</span><span class="p">,</span>
			   <span class="k">struct</span> <span class="n">scatterlist</span> <span class="o">*</span><span class="n">list</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">length</span><span class="p">,</span>
			   <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">startpage</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_pgtable_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pci</span><span class="p">,</span> <span class="k">struct</span> <span class="n">saa7134_pgtable</span> <span class="o">*</span><span class="n">pt</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">saa7134_buffer_count</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">count</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_buffer_startpage</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_buf</span> <span class="o">*</span><span class="n">buf</span><span class="p">);</span>
<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">saa7134_buffer_base</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_buf</span> <span class="o">*</span><span class="n">buf</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">saa7134_buffer_queue</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">saa7134_dmaqueue</span> <span class="o">*</span><span class="n">q</span><span class="p">,</span>
			 <span class="k">struct</span> <span class="n">saa7134_buf</span> <span class="o">*</span><span class="n">buf</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_buffer_finish</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">saa7134_dmaqueue</span> <span class="o">*</span><span class="n">q</span><span class="p">,</span>
			   <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">state</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_buffer_next</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">saa7134_dmaqueue</span> <span class="o">*</span><span class="n">q</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_buffer_timeout</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">data</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_dma_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">videobuf_queue</span> <span class="o">*</span><span class="n">q</span><span class="p">,</span><span class="k">struct</span> <span class="n">saa7134_buf</span> <span class="o">*</span><span class="n">buf</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">saa7134_set_dmabits</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">saa7134_dmasound_init</span><span class="p">)(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">saa7134_dmasound_exit</span><span class="p">)(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>


<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* saa7134-cards.c                                             */</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">saa7134_board</span> <span class="n">saa7134_boards</span><span class="p">[];</span>
<span class="k">extern</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">saa7134_bcount</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">pci_device_id</span> <span class="n">__devinitdata</span> <span class="n">saa7134_pci_tbl</span><span class="p">[];</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">saa7134_board_init1</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">saa7134_board_init2</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_tuner_callback</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">component</span><span class="p">,</span> <span class="kt">int</span> <span class="n">command</span><span class="p">,</span> <span class="kt">int</span> <span class="n">arg</span><span class="p">);</span>


<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* saa7134-i2c.c                                               */</span>

<span class="kt">int</span> <span class="n">saa7134_i2c_register</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_i2c_unregister</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>


<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* saa7134-video.c                                             */</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">video_debug</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">video_device</span> <span class="n">saa7134_video_template</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">video_device</span> <span class="n">saa7134_radio_template</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">saa7134_s_ctrl_internal</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>  <span class="k">struct</span> <span class="n">saa7134_fh</span> <span class="o">*</span><span class="n">fh</span><span class="p">,</span> <span class="k">struct</span> <span class="n">v4l2_control</span> <span class="o">*</span><span class="n">c</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_g_ctrl_internal</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>  <span class="k">struct</span> <span class="n">saa7134_fh</span> <span class="o">*</span><span class="n">fh</span><span class="p">,</span> <span class="k">struct</span> <span class="n">v4l2_control</span> <span class="o">*</span><span class="n">c</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_queryctrl</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="n">file</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="k">struct</span> <span class="n">v4l2_queryctrl</span> <span class="o">*</span><span class="n">c</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_s_std_internal</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>  <span class="k">struct</span> <span class="n">saa7134_fh</span> <span class="o">*</span><span class="n">fh</span><span class="p">,</span> <span class="n">v4l2_std_id</span> <span class="o">*</span><span class="n">id</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">saa7134_videoport_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_set_tvnorm_hw</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">saa7134_video_init1</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_video_init2</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_irq_video_signalchange</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_irq_video_done</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">status</span><span class="p">);</span>


<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* saa7134-ts.c                                                */</span>

<span class="cp">#define TS_PACKET_SIZE 188 </span><span class="cm">/* TS packets 188 bytes */</span><span class="cp"></span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">videobuf_queue_ops</span> <span class="n">saa7134_ts_qops</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">saa7134_ts_init1</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_ts_fini</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_irq_ts_done</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">status</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">saa7134_ts_register</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_mpeg_ops</span> <span class="o">*</span><span class="n">ops</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_ts_unregister</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_mpeg_ops</span> <span class="o">*</span><span class="n">ops</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">saa7134_ts_init_hw</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">saa7134_ts_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_ts_stop</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* saa7134-vbi.c                                               */</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">videobuf_queue_ops</span> <span class="n">saa7134_vbi_qops</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">video_device</span> <span class="n">saa7134_vbi_template</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">saa7134_vbi_init1</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_vbi_fini</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_irq_vbi_done</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">status</span><span class="p">);</span>


<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* saa7134-tvaudio.c                                           */</span>

<span class="kt">int</span> <span class="n">saa7134_tvaudio_rx2mode</span><span class="p">(</span><span class="n">u32</span> <span class="n">rx</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">saa7134_tvaudio_setmute</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_tvaudio_setinput</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">saa7134_input</span> <span class="o">*</span><span class="n">in</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_tvaudio_setvolume</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">level</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_tvaudio_getstereo</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">saa7134_tvaudio_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_tvaudio_init2</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_tvaudio_fini</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_tvaudio_do_scan</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_tvaudio_close</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">saa_dsp_writel</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u32</span> <span class="n">value</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">saa7134_enable_i2s</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* saa7134-oss.c                                               */</span>

<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">file_operations</span> <span class="n">saa7134_dsp_fops</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">file_operations</span> <span class="n">saa7134_mixer_fops</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">saa7134_oss_init1</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_oss_fini</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_irq_oss_done</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">status</span><span class="p">);</span>

<span class="cm">/* ----------------------------------------------------------- */</span>
<span class="cm">/* saa7134-input.c                                             */</span>

<span class="cp">#if defined(CONFIG_VIDEO_SAA7134_RC)</span>
<span class="kt">int</span>  <span class="n">saa7134_input_init1</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_input_fini</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_input_irq</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_probe_i2c_ir</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7134_ir_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7134_ir_stop</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7134_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="cp">#define saa7134_input_init1(dev)	((void)0)</span>
<span class="cp">#define saa7134_input_fini(dev)		((void)0)</span>
<span class="cp">#define saa7134_input_irq(dev)		((void)0)</span>
<span class="cp">#define saa7134_probe_i2c_ir(dev)	((void)0)</span>
<span class="cp">#define saa7134_ir_start(dev)		((void)0)</span>
<span class="cp">#define saa7134_ir_stop(dev)		((void)0)</span>
<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
