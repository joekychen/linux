<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › media › video › em28xx › em28xx-cards.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>em28xx-cards.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">   em28xx-cards.c - driver for Empia EM2800/EM2820/2840 USB</span>
<span class="cm">		    video capture devices</span>

<span class="cm">   Copyright (C) 2005 Ludovico Cavedon &lt;cavedon@sssup.it&gt;</span>
<span class="cm">		      Markus Rechberger &lt;mrechberger@gmail.com&gt;</span>
<span class="cm">		      Mauro Carvalho Chehab &lt;mchehab@infradead.org&gt;</span>
<span class="cm">		      Sascha Sommer &lt;saschasommer@freenet.de&gt;</span>

<span class="cm">   This program is free software; you can redistribute it and/or modify</span>
<span class="cm">   it under the terms of the GNU General Public License as published by</span>
<span class="cm">   the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm">   (at your option) any later version.</span>

<span class="cm">   This program is distributed in the hope that it will be useful,</span>
<span class="cm">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm">   GNU General Public License for more details.</span>

<span class="cm">   You should have received a copy of the GNU General Public License</span>
<span class="cm">   along with this program; if not, write to the Free Software</span>
<span class="cm">   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/slab.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;linux/i2c.h&gt;</span>
<span class="cp">#include &lt;linux/usb.h&gt;</span>
<span class="cp">#include &lt;media/tuner.h&gt;</span>
<span class="cp">#include &lt;media/msp3400.h&gt;</span>
<span class="cp">#include &lt;media/saa7115.h&gt;</span>
<span class="cp">#include &lt;media/tvp5150.h&gt;</span>
<span class="cp">#include &lt;media/tvaudio.h&gt;</span>
<span class="cp">#include &lt;media/mt9v011.h&gt;</span>
<span class="cp">#include &lt;media/i2c-addr.h&gt;</span>
<span class="cp">#include &lt;media/tveeprom.h&gt;</span>
<span class="cp">#include &lt;media/v4l2-common.h&gt;</span>
<span class="cp">#include &lt;media/v4l2-chip-ident.h&gt;</span>

<span class="cp">#include &quot;em28xx.h&quot;</span>

<span class="cp">#define DRIVER_NAME         &quot;em28xx&quot;</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">tuner</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">tuner</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">tuner</span><span class="p">,</span> <span class="s">&quot;tuner type&quot;</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">disable_ir</span><span class="p">;</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">disable_ir</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">disable_ir</span><span class="p">,</span> <span class="s">&quot;disable infrared remote support&quot;</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">disable_usb_speed_check</span><span class="p">;</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">disable_usb_speed_check</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">disable_usb_speed_check</span><span class="p">,</span>
		 <span class="s">&quot;override min bandwidth requirement of 480M bps&quot;</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">card</span><span class="p">[]</span>     <span class="o">=</span> <span class="p">{[</span><span class="mi">0</span> <span class="p">...</span> <span class="p">(</span><span class="n">EM28XX_MAXBOARDS</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">UNSET</span> <span class="p">};</span>
<span class="n">module_param_array</span><span class="p">(</span><span class="n">card</span><span class="p">,</span>  <span class="kt">int</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">card</span><span class="p">,</span>     <span class="s">&quot;card type&quot;</span><span class="p">);</span>

<span class="cm">/* Bitmask marking allocated devices from 0 to EM28XX_MAXBOARDS - 1 */</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">em28xx_devused</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">em28xx_hash_table</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">hash</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">model</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">tuner</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">em28xx_pre_card_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> *  Reset sequences for analog/digital modes</span>
<span class="cm"> */</span>

<span class="cm">/* Reset for the most [analog] boards */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">default_analog</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x6d</span><span class="p">,</span>   <span class="o">~</span><span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* Reset for the most [digital] boards */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">default_digital</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x6e</span><span class="p">,</span>	<span class="o">~</span><span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* Board Hauppauge WinTV HVR 900 analog */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x2d</span><span class="p">,</span>	<span class="o">~</span><span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x05</span><span class="p">,</span>			<span class="mh">0xff</span><span class="p">,</span>	<span class="mh">0x10</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>  <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* Board Hauppauge WinTV HVR 900 digital */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">hauppauge_wintv_hvr_900_digital</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x2e</span><span class="p">,</span>	<span class="o">~</span><span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x04</span><span class="p">,</span>	<span class="mh">0x0f</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x0c</span><span class="p">,</span>	<span class="mh">0x0f</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* Board Hauppauge WinTV HVR 900 (R2) digital */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">hauppauge_wintv_hvr_900R2_digital</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x2e</span><span class="p">,</span>	<span class="o">~</span><span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x0c</span><span class="p">,</span>	<span class="mh">0x0f</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* Boards - EM2880 MSI DIGIVOX AD and EM2880_BOARD_MSI_DIGIVOX_AD_II */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">em2880_msi_digivox_ad_analog</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>       <span class="mh">0x69</span><span class="p">,</span>   <span class="o">~</span><span class="n">EM_GPIO_4</span><span class="p">,</span>	 <span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		 <span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* Boards - EM2880 MSI DIGIVOX AD and EM2880_BOARD_MSI_DIGIVOX_AD_II */</span>

<span class="cm">/* Board  - EM2870 Kworld 355u</span>
<span class="cm">   Analog - No input analog */</span>

<span class="cm">/* Board - EM2882 Kworld 315U digital */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">em2882_kworld_315u_digital</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0xfe</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x04</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x0c</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x7e</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>  <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">em2882_kworld_315u_tuner_gpio</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x08</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x0c</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x08</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x0c</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>  <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">kworld_330u_analog</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x6d</span><span class="p">,</span>	<span class="o">~</span><span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">kworld_330u_digital</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x6e</span><span class="p">,</span>	<span class="o">~</span><span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x08</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* Evga inDtube</span>
<span class="cm">   GPIO0 - Enable digital power (s5h1409) - low to enable</span>
<span class="cm">   GPIO1 - Enable analog power (tvp5150/emp202) - low to enable</span>
<span class="cm">   GPIO4 - xc3028 reset</span>
<span class="cm">   GOP3  - s5h1409 reset</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">evga_indtube_analog</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x79</span><span class="p">,</span>   <span class="mh">0xff</span><span class="p">,</span>		<span class="mi">60</span><span class="p">},</span>
	<span class="p">{</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">evga_indtube_digital</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x7a</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		 <span class="mi">1</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x04</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x0c</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		 <span class="mi">1</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * KWorld PlusTV 340U and UB435-Q (ATSC) GPIOs map:</span>
<span class="cm"> * EM_GPIO_0 - currently unknown</span>
<span class="cm"> * EM_GPIO_1 - LED disable/enable (1 = off, 0 = on)</span>
<span class="cm"> * EM_GPIO_2 - currently unknown</span>
<span class="cm"> * EM_GPIO_3 - currently unknown</span>
<span class="cm"> * EM_GPIO_4 - TDA18271HD/C1 tuner (1 = active, 0 = in reset)</span>
<span class="cm"> * EM_GPIO_5 - LGDT3304 ATSC/QAM demod (1 = active, 0 = in reset)</span>
<span class="cm"> * EM_GPIO_6 - currently unknown</span>
<span class="cm"> * EM_GPIO_7 - currently unknown</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">kworld_a340_digital</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x6d</span><span class="p">,</span>		<span class="o">~</span><span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* Pinnacle Hybrid Pro eb1a:2881 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">pinnacle_hybrid_pro_analog</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0xfd</span><span class="p">,</span>   <span class="o">~</span><span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">pinnacle_hybrid_pro_digital</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x6e</span><span class="p">,</span>	<span class="o">~</span><span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x04</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>	       <span class="mi">100</span><span class="p">},</span><span class="cm">/* zl10353 reset */</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x0c</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		 <span class="mi">1</span><span class="p">},</span>
	<span class="p">{</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">terratec_cinergy_USB_XS_FR_analog</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x6d</span><span class="p">,</span>	<span class="o">~</span><span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">terratec_cinergy_USB_XS_FR_digital</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x6e</span><span class="p">,</span>	<span class="o">~</span><span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x08</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* eb1a:2868 Reddo DVB-C USB TV Box</span>
<span class="cm">   GPIO4 - CU1216L NIM</span>
<span class="cm">   Other GPIOs seems to be don&#39;t care. */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">reddo_dvb_c_usb_box</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0xfe</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0xde</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0xfe</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x7f</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x6f</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* Callback for the most boards */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">default_tuner_gpio</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mi">0</span><span class="p">,</span>		<span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>  <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* Mute/unmute */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">compro_unmute_tv_gpio</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mi">5</span><span class="p">,</span>		<span class="mi">7</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>  <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">compro_unmute_svid_gpio</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mi">4</span><span class="p">,</span>		<span class="mi">7</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>  <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">compro_mute_gpio</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mi">6</span><span class="p">,</span>		<span class="mi">7</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>  <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* Terratec AV350 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">terratec_av350_mute_gpio</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>	<span class="mh">0x7f</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">terratec_av350_unmute_gpio</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">silvercrest_reg_seq</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="mh">0xf7</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">vc211a_enable</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>	<span class="mh">0x07</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>	<span class="mh">0x0f</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>	<span class="mh">0x0b</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">dikom_dk300_digital</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM28XX_R08_GPIO</span><span class="p">,</span>	<span class="mh">0x6e</span><span class="p">,</span>	<span class="o">~</span><span class="n">EM_GPIO_4</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2880_R04_GPO</span><span class="p">,</span>	<span class="mh">0x08</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>


<span class="cm">/* Reset for the most [digital] boards */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">leadership_digital</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span>	<span class="mh">0x70</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">leadership_reset</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span>	<span class="mh">0xf0</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span>	<span class="mh">0xb0</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span>	<span class="mh">0xf0</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>	<span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* 2013:024f PCTV nanoStick T2 290e</span>
<span class="cm"> * GPIO_6 - demod reset</span>
<span class="cm"> * GPIO_7 - LED</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">pctv_290e</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">80</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span>	<span class="mh">0x40</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">80</span><span class="p">},</span> <span class="cm">/* GPIO_6 = 1 */</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span>	<span class="mh">0xc0</span><span class="p">,</span>	<span class="mh">0xff</span><span class="p">,</span>		<span class="mi">80</span><span class="p">},</span> <span class="cm">/* GPIO_7 = 1 */</span>
	<span class="p">{</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>			<span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="o">-</span><span class="mi">1</span><span class="p">,</span>		<span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cp">#if 0</span><span class="c"></span>
<span class="c">static struct em28xx_reg_seq terratec_h5_gpio[] = {</span>
<span class="c">	{EM28XX_R08_GPIO,	0xff,	0xff,	10},</span>
<span class="c">	{EM2874_R80_GPIO,	0xf6,	0xff,	100},</span>
<span class="c">	{EM2874_R80_GPIO,	0xf2,	0xff,	50},</span>
<span class="c">	{EM2874_R80_GPIO,	0xf6,	0xff,	50},</span>
<span class="c">	{ -1,			-1,	-1,	-1},</span>
<span class="c">};</span>

<span class="c">static struct em28xx_reg_seq terratec_h5_digital[] = {</span>
<span class="c">	{EM2874_R80_GPIO,	0xf6,	0xff,	10},</span>
<span class="c">	{EM2874_R80_GPIO,	0xe6,	0xff,	100},</span>
<span class="c">	{EM2874_R80_GPIO,	0xa6,	0xff,	10},</span>
<span class="c">	{ -1,			-1,	-1,	-1},</span>
<span class="c">};</span>
<span class="cp">#endif</span>

<span class="cm">/* 2013:024f PCTV DVB-S2 Stick 460e</span>
<span class="cm"> * GPIO_0 - POWER_ON</span>
<span class="cm"> * GPIO_1 - BOOST</span>
<span class="cm"> * GPIO_2 - VUV_LNB (red LED)</span>
<span class="cm"> * GPIO_3 - EXT_12V</span>
<span class="cm"> * GPIO_4 - INT_DEM (DEMOD GPIO_0)</span>
<span class="cm"> * GPIO_5 - INT_LNB</span>
<span class="cm"> * GPIO_6 - RESET_DEM</span>
<span class="cm"> * GPIO_7 - LED (green LED)</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">pctv_460e</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span>  <span class="mi">50</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x0d</span><span class="p">,</span>            <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span>  <span class="mi">50</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span>  <span class="mi">50</span><span class="p">},</span> <span class="cm">/* GPIO_6=1 */</span>
	<span class="p">{</span><span class="mh">0x0d</span><span class="p">,</span>            <span class="mh">0x42</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span>  <span class="mi">50</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span>  <span class="mi">50</span><span class="p">},</span> <span class="cm">/* GPIO_5=1 */</span>
	<span class="p">{</span>             <span class="o">-</span><span class="mi">1</span><span class="p">,</span>   <span class="o">-</span><span class="mi">1</span><span class="p">,</span>   <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cp">#if 0</span><span class="c"></span>
<span class="c">static struct em28xx_reg_seq hauppauge_930c_gpio[] = {</span>
<span class="c">	{EM2874_R80_GPIO,	0x6f,	0xff,	10},</span>
<span class="c">	{EM2874_R80_GPIO,	0x4f,	0xff,	10}, /* xc5000 reset */</span>
<span class="c">	{EM2874_R80_GPIO,	0x6f,	0xff,	10},</span>
<span class="c">	{EM2874_R80_GPIO,	0x4f,	0xff,	10},</span>
<span class="c">	{ -1,			-1,	-1,	-1},</span>
<span class="c">};</span>

<span class="c">static struct em28xx_reg_seq hauppauge_930c_digital[] = {</span>
<span class="c">	{EM2874_R80_GPIO,	0xf6,	0xff,	10},</span>
<span class="c">	{EM2874_R80_GPIO,	0xe6,	0xff,	100},</span>
<span class="c">	{EM2874_R80_GPIO,	0xa6,	0xff,	10},</span>
<span class="c">	{ -1,			-1,	-1,	-1},</span>
<span class="c">};</span>
<span class="cp">#endif</span>

<span class="cm">/* 1b80:e425 MaxMedia UB425-TC</span>
<span class="cm"> * GPIO_6 - demod reset, 0=active</span>
<span class="cm"> * GPIO_7 - LED, 0=active</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">maxmedia_ub425_tc</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span>  <span class="mh">0x83</span><span class="p">,</span>  <span class="mh">0xff</span><span class="p">,</span>  <span class="mi">100</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span>  <span class="mh">0xc3</span><span class="p">,</span>  <span class="mh">0xff</span><span class="p">,</span>  <span class="mi">100</span><span class="p">},</span> <span class="cm">/* GPIO_6 = 1 */</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span>  <span class="mh">0x43</span><span class="p">,</span>  <span class="mh">0xff</span><span class="p">,</span>  <span class="mo">000</span><span class="p">},</span> <span class="cm">/* GPIO_7 = 0 */</span>
	<span class="p">{</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>                 <span class="o">-</span><span class="mi">1</span><span class="p">,</span>    <span class="o">-</span><span class="mi">1</span><span class="p">,</span>   <span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* 2304:0242 PCTV QuatroStick (510e)</span>
<span class="cm"> * GPIO_2: decoder reset, 0=active</span>
<span class="cm"> * GPIO_4: decoder suspend, 0=active</span>
<span class="cm"> * GPIO_6: demod reset, 0=active</span>
<span class="cm"> * GPIO_7: LED, 1=active</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">pctv_510e</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mi">100</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mi">100</span><span class="p">},</span> <span class="cm">/* GPIO_2 = 1 */</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span> <span class="mh">0x54</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mo">050</span><span class="p">},</span> <span class="cm">/* GPIO_6 = 1 */</span>
	<span class="p">{</span>             <span class="o">-</span><span class="mi">1</span><span class="p">,</span>   <span class="o">-</span><span class="mi">1</span><span class="p">,</span>   <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* 2013:0251 PCTV QuatroStick nano (520e)</span>
<span class="cm"> * GPIO_2: decoder reset, 0=active</span>
<span class="cm"> * GPIO_4: decoder suspend, 0=active</span>
<span class="cm"> * GPIO_6: demod reset, 0=active</span>
<span class="cm"> * GPIO_7: LED, 1=active</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_reg_seq</span> <span class="n">pctv_520e</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mi">100</span><span class="p">},</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mi">100</span><span class="p">},</span> <span class="cm">/* GPIO_2 = 1 */</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span> <span class="mh">0x54</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mo">050</span><span class="p">},</span> <span class="cm">/* GPIO_6 = 1 */</span>
	<span class="p">{</span><span class="n">EM2874_R80_GPIO</span><span class="p">,</span> <span class="mh">0xd4</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mo">000</span><span class="p">},</span> <span class="cm">/* GPIO_7 = 1 */</span>
	<span class="p">{</span>             <span class="o">-</span><span class="mi">1</span><span class="p">,</span>   <span class="o">-</span><span class="mi">1</span><span class="p">,</span>   <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="o">-</span><span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Board definitions</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">em28xx_board</span> <span class="n">em28xx_boards</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="n">EM2750_BOARD_UNKNOWN</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>          <span class="o">=</span> <span class="s">&quot;EM2710/EM2750/EM2751 webcam grabber&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xclk</span>          <span class="o">=</span> <span class="n">EM28XX_XCLK_FREQUENCY_20MHZ</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>    <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">is_webcam</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>         <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">silvercrest_reg_seq</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2800_BOARD_UNKNOWN</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Unknown EM2800 video grabber&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">is_em2800</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_UNKNOWN</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>          <span class="o">=</span> <span class="s">&quot;Unknown EM2750/28xx video grabber&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>    <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">is_webcam</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/* To enable sensor probe */</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2750_BOARD_DLCW_130</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Beijing Huaqi Information Digital Technology Co., Ltd */</span>
		<span class="p">.</span><span class="n">name</span>          <span class="o">=</span> <span class="s">&quot;Huaqi DLCW-130&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>         <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xclk</span>          <span class="o">=</span> <span class="n">EM28XX_XCLK_FREQUENCY_48MHZ</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>    <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">is_webcam</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>         <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_KWORLD_PVRTV2800RF</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Kworld PVR TV 2800 RF&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_TEMIC_PAL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_GADMEI_TVR200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Gadmei TVR200&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_LG_PAL_NEW_TAPC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_TERRATEC_CINERGY_250</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Terratec Cinergy 250 USB&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_LG_PAL_NEW_TAPC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_ir_i2c</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_PINNACLE_USB_2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Pinnacle PCTV USB 2&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_LG_PAL_NEW_TAPC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_ir_i2c</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_HAUPPAUGE_WINTV_USB_2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Hauppauge WinTV USB 2&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_PHILIPS_FM1236_MK3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span> <span class="o">|</span>
				<span class="n">TDA9887_PORT1_ACTIVE</span> <span class="o">|</span>
				<span class="n">TDA9887_PORT2_ACTIVE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_msp34xx</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_ir_i2c</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">MSP_INPUT_DEFAULT</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">MSP_INPUT</span><span class="p">(</span><span class="n">MSP_IN_SCART1</span><span class="p">,</span> <span class="n">MSP_IN_TUNER1</span><span class="p">,</span>
					<span class="n">MSP_DSP_IN_SCART</span><span class="p">,</span> <span class="n">MSP_DSP_IN_SCART</span><span class="p">),</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_DLINK_USB_TV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;D-Link DUB-T210 TV Tuner&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_LG_PAL_NEW_TAPC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_HERCULES_SMART_TV_USB2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Hercules Smart TV USB 2.0&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_LG_PAL_NEW_TAPC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_PINNACLE_USB_2_FM1216ME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Pinnacle PCTV USB 2 (Philips FM1216ME)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_PHILIPS_FM1216ME_MK3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_GADMEI_UTV310</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Gadmei UTV310&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_TNF_5335MF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_LEADTEK_WINFAST_USBII_DELUXE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Leadtek Winfast USB II Deluxe&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_PHILIPS_FM1216ME_MK3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_ir_i2c</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tvaudio_addr</span> <span class="o">=</span> <span class="mh">0x58</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span> <span class="o">|</span>
				<span class="n">TDA9887_PORT2_ACTIVE</span> <span class="o">|</span>
				<span class="n">TDA9887_QSS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adecoder</span>     <span class="o">=</span> <span class="n">EM28XX_TVAUDIO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE4</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_AUX</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE5</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
			<span class="p">.</span><span class="n">radio</span>	  <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_RADIO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_AUX</span><span class="p">,</span>
			<span class="p">}</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_VIDEOLOGY_20K14XUSB</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Videology 20K14XUSB USB2.0&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">is_webcam</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_SILVERCREST_WEBCAM</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Silvercrest Webcam 1.3mpix&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">is_webcam</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">silvercrest_reg_seq</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2821_BOARD_SUPERCOMP_USB_2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Supercomp USB 2.0 TV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_PHILIPS_FM1236_MK3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span> <span class="o">|</span>
				<span class="n">TDA9887_PORT1_ACTIVE</span> <span class="o">|</span>
				<span class="n">TDA9887_PORT2_ACTIVE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2821_BOARD_USBGEAR_VD204</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Usbgear VD204v9&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>	<span class="cm">/* Capture only device */</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>  <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>  <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>  <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>  <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>  <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>  <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2860_BOARD_NETGMBH_CAM</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="cm">/* Beijing Huaqi Information Digital Technology Co., Ltd */</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;NetGMBH Cam&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">is_webcam</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2860_BOARD_TYPHOON_DVD_MAKER</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Typhoon DVD Maker&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>	<span class="cm">/* Capture only device */</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>  <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>  <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>  <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>  <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>  <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>  <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2860_BOARD_GADMEI_UTV330</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Gadmei UTV330&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_TNF_5335MF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2861_BOARD_GADMEI_UTV330PLUS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Gadmei UTV330+&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_TNF_5335MF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>     <span class="o">=</span> <span class="n">RC_MAP_GADMEI_RM008Z</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xclk</span>         <span class="o">=</span> <span class="n">EM28XX_XCLK_FREQUENCY_12MHZ</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2860_BOARD_TERRATEC_HYBRID_XS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Terratec Cinergy A Hybrid XS&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>

		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2861_BOARD_KWORLD_PVRTV_300U</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	      <span class="o">=</span> <span class="s">&quot;KWorld PVRTV 300U&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2861_BOARD_YAKUMO_MOVIE_MIXER</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>          <span class="o">=</span> <span class="s">&quot;Yakumo MovieMixer&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>    <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>	<span class="cm">/* Capture only device */</span>
		<span class="p">.</span><span class="n">decoder</span>       <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>         <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2860_BOARD_TVP5150_REFERENCE_DESIGN</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>          <span class="o">=</span> <span class="s">&quot;EM2860/TVP5150 Reference Design&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>    <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>	<span class="cm">/* Capture only device */</span>
		<span class="p">.</span><span class="n">decoder</span>       <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>         <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2861_BOARD_PLEXTOR_PX_TV100U</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Plextor ConvertX PX-TV100U&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_TNF_5335MF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xclk</span>         <span class="o">=</span> <span class="n">EM28XX_XCLK_I2S_MSB_TIMING</span> <span class="o">|</span>
				<span class="n">EM28XX_XCLK_FREQUENCY_12MHZ</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_msp34xx</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">pinnacle_hybrid_pro_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">pinnacle_hybrid_pro_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">pinnacle_hybrid_pro_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>

	<span class="cm">/* Those boards with em2870 are DVB Only*/</span>

	<span class="p">[</span><span class="n">EM2870_BOARD_TERRATEC_XS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Terratec Cinergy T XS&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2870_BOARD_TERRATEC_XS_MT2060</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Terratec Cinergy T XS (MT2060)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span> <span class="cm">/* MT2060 */</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2870_BOARD_KWORLD_350U</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Kworld 350 U DVB-T&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2870_BOARD_KWORLD_355U</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Kworld 355 U DVB-T&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>     <span class="o">=</span> <span class="n">default_digital</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2870_BOARD_PINNACLE_PCTV_DVB</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Pinnacle PCTV DVB-T&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span> <span class="cm">/* MT2060 */</span>
		<span class="cm">/* djh - I have serious doubts this is right... */</span>
		<span class="p">.</span><span class="n">xclk</span>         <span class="o">=</span> <span class="n">EM28XX_XCLK_IR_RC5_MODE</span> <span class="o">|</span>
				<span class="n">EM28XX_XCLK_FREQUENCY_10MHZ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2870_BOARD_COMPRO_VIDEOMATE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Compro, VideoMate U3&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span> <span class="cm">/* MT2060 */</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">EM2880_BOARD_TERRATEC_HYBRID_XS_FR</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Terratec Hybrid XS Secam&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_msp34xx</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>     <span class="o">=</span> <span class="n">terratec_cinergy_USB_XS_FR_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">terratec_cinergy_USB_XS_FR_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">terratec_cinergy_USB_XS_FR_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">terratec_cinergy_USB_XS_FR_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2884_BOARD_TERRATEC_H5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Terratec Cinergy H5&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="cp">#if 0</span><span class="c"></span>
<span class="c">		.tuner_type   = TUNER_PHILIPS_TDA8290,</span>
<span class="c">		.tuner_addr   = 0x41,</span>
<span class="c">		.dvb_gpio     = terratec_h5_digital, /* FIXME: probably wrong */</span>
<span class="c">		.tuner_gpio   = terratec_h5_gpio,</span>
<span class="cp">#else</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
<span class="cp">#endif</span>
		<span class="p">.</span><span class="n">i2c_speed</span>    <span class="o">=</span> <span class="n">EM2874_I2C_SECONDARY_BUS_SELECT</span> <span class="o">|</span>
				<span class="n">EM28XX_I2C_CLK_WAIT_ENABLE</span> <span class="o">|</span>
				<span class="n">EM28XX_I2C_FREQ_400_KHZ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2884_BOARD_HAUPPAUGE_WINTV_HVR_930C</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Hauppauge WinTV HVR 930C&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="cp">#if 0</span><span class="c"> /* FIXME: Add analog support */</span>
<span class="c">		.tuner_type   = TUNER_XC5000,</span>
<span class="c">		.tuner_addr   = 0x41,</span>
<span class="c">		.dvb_gpio     = hauppauge_930c_digital,</span>
<span class="c">		.tuner_gpio   = hauppauge_930c_gpio,</span>
<span class="cp">#else</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
<span class="cp">#endif</span>
		<span class="p">.</span><span class="n">ir_codes</span>     <span class="o">=</span> <span class="n">RC_MAP_HAUPPAUGE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">i2c_speed</span>    <span class="o">=</span> <span class="n">EM2874_I2C_SECONDARY_BUS_SELECT</span> <span class="o">|</span>
				<span class="n">EM28XX_I2C_CLK_WAIT_ENABLE</span> <span class="o">|</span>
				<span class="n">EM28XX_I2C_FREQ_400_KHZ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2884_BOARD_CINERGY_HTC_STICK</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Terratec Cinergy HTC Stick&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>     <span class="o">=</span> <span class="n">RC_MAP_NEC_TERRATEC_CINERGY_XS</span><span class="p">,</span>
<span class="cp">#if 0</span><span class="c"></span>
<span class="c">		.tuner_type   = TUNER_PHILIPS_TDA8290,</span>
<span class="c">		.tuner_addr   = 0x41,</span>
<span class="c">		.dvb_gpio     = terratec_h5_digital, /* FIXME: probably wrong */</span>
<span class="c">		.tuner_gpio   = terratec_h5_gpio,</span>
<span class="cp">#endif</span>
		<span class="p">.</span><span class="n">i2c_speed</span>    <span class="o">=</span> <span class="n">EM2874_I2C_SECONDARY_BUS_SELECT</span> <span class="o">|</span>
				<span class="n">EM28XX_I2C_CLK_WAIT_ENABLE</span> <span class="o">|</span>
				<span class="n">EM28XX_I2C_FREQ_400_KHZ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2880_BOARD_HAUPPAUGE_WINTV_HVR_900</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Hauppauge WinTV HVR 900&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mts_firmware</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>     <span class="o">=</span> <span class="n">RC_MAP_HAUPPAUGE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2880_BOARD_HAUPPAUGE_WINTV_HVR_900_R2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Hauppauge WinTV HVR 900 (R2)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mts_firmware</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900R2_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>     <span class="o">=</span> <span class="n">RC_MAP_HAUPPAUGE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2883_BOARD_HAUPPAUGE_WINTV_HVR_850</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Hauppauge WinTV HVR 850&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>     <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mts_firmware</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>        <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>       <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>       <span class="o">=</span> <span class="n">RC_MAP_HAUPPAUGE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>        <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2883_BOARD_HAUPPAUGE_WINTV_HVR_950</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Hauppauge WinTV HVR 950&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>     <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mts_firmware</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>        <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>       <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>       <span class="o">=</span> <span class="n">RC_MAP_HAUPPAUGE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>        <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2880_BOARD_PINNACLE_PCTV_HD_PRO</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Pinnacle PCTV HD Pro Stick&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mts_firmware</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>        <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>       <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>       <span class="o">=</span> <span class="n">RC_MAP_PINNACLE_PCTV_HD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>        <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2880_BOARD_AMD_ATI_TV_WONDER_HD_600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;AMD ATI TV Wonder HD 600&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>     <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mts_firmware</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>        <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>       <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>       <span class="o">=</span> <span class="n">RC_MAP_ATI_TV_WONDER_HD_600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>        <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2880_BOARD_TERRATEC_HYBRID_XS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;Terratec Hybrid XS&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>     <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>        <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>        <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>       <span class="o">=</span> <span class="n">default_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>       <span class="o">=</span> <span class="n">RC_MAP_TERRATEC_CINERGY_XS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xclk</span>           <span class="o">=</span> <span class="n">EM28XX_XCLK_FREQUENCY_12MHZ</span><span class="p">,</span> <span class="cm">/* NEC IR */</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">default_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">default_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">default_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="cm">/* maybe there&#39;s a reason behind it why Terratec sells the Hybrid XS</span>
<span class="cm">	   as Prodigy XS with a different PID, let&#39;s keep it separated for now</span>
<span class="cm">	   maybe we&#39;ll need it lateron */</span>
	<span class="p">[</span><span class="n">EM2880_BOARD_TERRATEC_PRODIGY_XS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Terratec Prodigy XS&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_MSI_VOX_USB_2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		   <span class="o">=</span> <span class="s">&quot;MSI VOX USB 2.0&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	   <span class="o">=</span> <span class="n">TUNER_LG_PAL_NEW_TAPC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span>	   <span class="o">=</span> <span class="n">TDA9887_PRESENT</span>      <span class="o">|</span>
				     <span class="n">TDA9887_PORT1_ACTIVE</span> <span class="o">|</span>
				     <span class="n">TDA9887_PORT2_ACTIVE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_range_640_480</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>           <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>             <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>      <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>      <span class="o">=</span> <span class="n">SAA7115_COMPOSITE4</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>      <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>      <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>      <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>      <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>      <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>      <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>      <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2800_BOARD_TERRATEC_CINERGY_200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Terratec Cinergy 200 USB&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">is_em2800</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_ir_i2c</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_LG_TALN</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2800_BOARD_GRABBEEX_USB2800</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>       <span class="o">=</span> <span class="s">&quot;eMPIA Technology, Inc. GrabBeeX+ Video Encoder&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">is_em2800</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>    <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span> <span class="cm">/* capture only board */</span>
		<span class="p">.</span><span class="n">input</span>      <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2800_BOARD_VC211A</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Actionmaster/LinXcel/Digitus VC211A&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">is_em2800</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>	<span class="cm">/* Capture-only board */</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">vc211a_enable</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">vc211a_enable</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2800_BOARD_LEADTEK_WINFAST_USBII</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Leadtek Winfast USB II&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">is_em2800</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_LG_PAL_NEW_TAPC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2800_BOARD_KWORLD_USB2800</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Kworld USB2800&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">is_em2800</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_PHILIPS_FCV1236D</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_PINNACLE_DVC_90</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Pinnacle Dazzle DVC 90/100/101/107 / Kaiser Baas Video to DVD maker &quot;</span>
			       <span class="s">&quot;/ Kworld DVD Maker 2 / Plextor ConvertX PX-AV100U&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span> <span class="cm">/* capture only board */</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2800_BOARD_VGEAR_POCKETTV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;V-Gear PocketTV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">is_em2800</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_LG_PAL_NEW_TAPC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_PROLINK_PLAYTV_BOX4_USB2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Pixelview PlayTV Box 4 USB 2.0&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_YMEC_TVF_5533MF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">aout</span>     <span class="o">=</span> <span class="n">EM28XX_AOUT_MONO</span> <span class="o">|</span> 	<span class="cm">/* I2S */</span>
				    <span class="n">EM28XX_AOUT_MASTER</span><span class="p">,</span>	<span class="cm">/* Line out pin */</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_PROLINK_PLAYTV_USB2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;SIIG AVTuner-PVR / Pixelview Prolink PlayTV USB 2.0&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_snapshot_button</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_YMEC_TVF_5533MF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">aout</span>     <span class="o">=</span> <span class="n">EM28XX_AOUT_MONO</span> <span class="o">|</span> 	<span class="cm">/* I2S */</span>
				    <span class="n">EM28XX_AOUT_MASTER</span><span class="p">,</span>	<span class="cm">/* Line out pin */</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2860_BOARD_SAA711X_REFERENCE_DESIGN</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>                <span class="o">=</span> <span class="s">&quot;EM2860/SAA711X Reference Design&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_snapshot_button</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>          <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>             <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>               <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">EM2874_BOARD_LEADERSHIP_ISDBT</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">i2c_speed</span>      <span class="o">=</span> <span class="n">EM2874_I2C_SECONDARY_BUS_SELECT</span> <span class="o">|</span>
				  <span class="n">EM28XX_I2C_CLK_WAIT_ENABLE</span> <span class="o">|</span>
				  <span class="n">EM28XX_I2C_FREQ_100_KHZ</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xclk</span>		<span class="o">=</span> <span class="n">EM28XX_XCLK_FREQUENCY_10MHZ</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;EM2874 Leadership ISDBT&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>     <span class="o">=</span> <span class="n">leadership_reset</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>       <span class="o">=</span> <span class="n">leadership_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">EM2880_BOARD_MSI_DIGIVOX_AD</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;MSI DigiVox A/D&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">em2880_msi_digivox_ad_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">em2880_msi_digivox_ad_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">em2880_msi_digivox_ad_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2880_BOARD_MSI_DIGIVOX_AD_II</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;MSI DigiVox A/D II&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">em2880_msi_digivox_ad_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">em2880_msi_digivox_ad_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">em2880_msi_digivox_ad_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2880_BOARD_KWORLD_DVB_305U</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	      <span class="o">=</span> <span class="s">&quot;KWorld DVB-T 305U&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2880_BOARD_KWORLD_DVB_310U</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	      <span class="o">=</span> <span class="s">&quot;KWorld DVB-T 310U&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>     <span class="o">=</span> <span class="n">default_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mts_firmware</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">default_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">default_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>	<span class="cm">/* S-video has not been tested yet */</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">default_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2882_BOARD_KWORLD_ATSC_315U</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;KWorld ATSC 315U HDTV TV Box&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>		<span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_THOMSON_DTT761X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>	<span class="o">=</span> <span class="n">em2882_kworld_315u_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span>	<span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>	<span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>	<span class="o">=</span> <span class="n">em2882_kworld_315u_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>	<span class="o">=</span> <span class="n">RC_MAP_KWORLD_315U</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xclk</span>		<span class="o">=</span> <span class="n">EM28XX_XCLK_FREQUENCY_12MHZ</span><span class="p">,</span>
		<span class="p">.</span><span class="n">i2c_speed</span>	<span class="o">=</span> <span class="n">EM28XX_I2C_CLK_WAIT_ENABLE</span><span class="p">,</span>
		<span class="cm">/* Analog mode - still not ready */</span>
		<span class="cm">/*.input        = { {</span>
<span class="cm">			.type = EM28XX_VMUX_TELEVISION,</span>
<span class="cm">			.vmux = SAA7115_COMPOSITE2,</span>
<span class="cm">			.amux = EM28XX_AMUX_VIDEO,</span>
<span class="cm">			.gpio = em2882_kworld_315u_analog,</span>
<span class="cm">			.aout = EM28XX_AOUT_PCM_IN | EM28XX_AOUT_PCM_STEREO,</span>
<span class="cm">		}, {</span>
<span class="cm">			.type = EM28XX_VMUX_COMPOSITE1,</span>
<span class="cm">			.vmux = SAA7115_COMPOSITE0,</span>
<span class="cm">			.amux = EM28XX_AMUX_LINE_IN,</span>
<span class="cm">			.gpio = em2882_kworld_315u_analog1,</span>
<span class="cm">			.aout = EM28XX_AOUT_PCM_IN | EM28XX_AOUT_PCM_STEREO,</span>
<span class="cm">		}, {</span>
<span class="cm">			.type = EM28XX_VMUX_SVIDEO,</span>
<span class="cm">			.vmux = SAA7115_SVIDEO3,</span>
<span class="cm">			.amux = EM28XX_AMUX_LINE_IN,</span>
<span class="cm">			.gpio = em2882_kworld_315u_analog1,</span>
<span class="cm">			.aout = EM28XX_AOUT_PCM_IN | EM28XX_AOUT_PCM_STEREO,</span>
<span class="cm">		} }, */</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2880_BOARD_EMPIRE_DUAL_TV</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Empire dual TV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span> <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span> <span class="o">=</span> <span class="n">default_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mts_firmware</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span> <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span> <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span> <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span> <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span> <span class="o">=</span> <span class="n">default_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span> <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span> <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span> <span class="o">=</span> <span class="n">default_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span> <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span> <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span> <span class="o">=</span> <span class="n">default_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2881_BOARD_DNT_DA2_HYBRID</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;DNT DA2 Hybrid&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid</span>        <span class="o">=</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">default_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">default_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">default_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2881_BOARD_PINNACLE_HYBRID_PRO</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Pinnacle Hybrid Pro&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>     <span class="o">=</span> <span class="n">pinnacle_hybrid_pro_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">pinnacle_hybrid_pro_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">pinnacle_hybrid_pro_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">pinnacle_hybrid_pro_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2882_BOARD_PINNACLE_HYBRID_PRO_330E</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Pinnacle Hybrid Pro (330e)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mts_firmware</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900R2_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>     <span class="o">=</span> <span class="n">RC_MAP_PINNACLE_PCTV_HD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2882_BOARD_KWORLD_VS_DVBT</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Kworld VS-DVB-T 323UR&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mts_firmware</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>     <span class="o">=</span> <span class="n">kworld_330u_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xclk</span>         <span class="o">=</span> <span class="n">EM28XX_XCLK_FREQUENCY_12MHZ</span><span class="p">,</span> <span class="cm">/* NEC IR */</span>
		<span class="p">.</span><span class="n">ir_codes</span>     <span class="o">=</span> <span class="n">RC_MAP_KWORLD_315U</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2882_BOARD_TERRATEC_HYBRID_XS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Terratec Cinnergy Hybrid T USB XS (em2882)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mts_firmware</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>     <span class="o">=</span> <span class="n">RC_MAP_TERRATEC_CINERGY_XS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xclk</span>         <span class="o">=</span> <span class="n">EM28XX_XCLK_FREQUENCY_12MHZ</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">hauppauge_wintv_hvr_900_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2882_BOARD_DIKOM_DK300</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Dikom DK300&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mts_firmware</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>     <span class="o">=</span> <span class="n">dikom_dk300_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">default_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2883_BOARD_KWORLD_HYBRID_330U</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Kworld PlusTV HD Hybrid 330&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mts_firmware</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>     <span class="o">=</span> <span class="n">kworld_330u_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xclk</span>             <span class="o">=</span> <span class="n">EM28XX_XCLK_FREQUENCY_12MHZ</span><span class="p">,</span>
		<span class="p">.</span><span class="n">i2c_speed</span>        <span class="o">=</span> <span class="n">EM28XX_I2C_CLK_WAIT_ENABLE</span> <span class="o">|</span>
				    <span class="n">EM28XX_I2C_EEPROM_ON_BOARD</span> <span class="o">|</span>
				    <span class="n">EM28XX_I2C_EEPROM_KEY_VALID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">kworld_330u_analog</span><span class="p">,</span>
			<span class="p">.</span><span class="n">aout</span>     <span class="o">=</span> <span class="n">EM28XX_AOUT_PCM_IN</span> <span class="o">|</span> <span class="n">EM28XX_AOUT_PCM_STEREO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">kworld_330u_analog</span><span class="p">,</span>
			<span class="p">.</span><span class="n">aout</span>     <span class="o">=</span> <span class="n">EM28XX_AOUT_PCM_IN</span> <span class="o">|</span> <span class="n">EM28XX_AOUT_PCM_STEREO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">kworld_330u_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_COMPRO_VIDEOMATE_FORYOU</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Compro VideoMate ForYou/Stereo&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_LG_PAL_NEW_TAPC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tvaudio_addr</span> <span class="o">=</span> <span class="mh">0xb0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adecoder</span>     <span class="o">=</span> <span class="n">EM28XX_TVAUDIO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mute_gpio</span>    <span class="o">=</span> <span class="n">compro_mute_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">compro_unmute_tv_gpio</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">compro_unmute_svid_gpio</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2860_BOARD_KAIOMY_TVNPC_U2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	      <span class="o">=</span> <span class="s">&quot;Kaiomy TVnPC U2&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">vchannels</span>    <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>   <span class="o">=</span> <span class="mh">0x61</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mts_firmware</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>     <span class="o">=</span> <span class="n">RC_MAP_KAIOMY</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>

		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
		<span class="p">.</span><span class="n">radio</span>		<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_RADIO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2860_BOARD_EASYCAP</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Easy Cap Capture DC-60&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">vchannels</span>    <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>           <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2820_BOARD_IODATA_GVMVP_SZ</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>       <span class="o">=</span> <span class="s">&quot;IO-DATA GV-MVP/SZ&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_PHILIPS_FM1236_MK3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">TDA9887_PRESENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span> <span class="cm">/* Composite has not been tested yet */</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span> <span class="cm">/* S-video has not been tested yet */</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2860_BOARD_TERRATEC_GRABBY</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>            <span class="o">=</span> <span class="s">&quot;Terratec Grabby&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">vchannels</span>       <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>      <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>         <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xclk</span>            <span class="o">=</span> <span class="n">EM28XX_XCLK_FREQUENCY_12MHZ</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>           <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">EM2860_BOARD_TERRATEC_AV350</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>            <span class="o">=</span> <span class="s">&quot;Terratec AV350&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">vchannels</span>       <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>      <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>         <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xclk</span>            <span class="o">=</span> <span class="n">EM28XX_XCLK_FREQUENCY_12MHZ</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mute_gpio</span>       <span class="o">=</span> <span class="n">terratec_av350_mute_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>           <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AUDIO_SRC_LINE</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">terratec_av350_unmute_gpio</span><span class="p">,</span>

		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AUDIO_SRC_LINE</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">terratec_av350_unmute_gpio</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">EM2860_BOARD_ELGATO_VIDEO_CAPTURE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Elgato Video Capture&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>   <span class="cm">/* Capture only device */</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>  <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>  <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>  <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>  <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>  <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>  <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">EM2882_BOARD_EVGA_INDTUBE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>         <span class="o">=</span> <span class="s">&quot;Evga inDtube&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>   <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>   <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>      <span class="o">=</span> <span class="n">EM28XX_TVP5150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xclk</span>         <span class="o">=</span> <span class="n">EM28XX_XCLK_FREQUENCY_12MHZ</span><span class="p">,</span> <span class="cm">/* NEC IR */</span>
		<span class="p">.</span><span class="n">mts_firmware</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>      <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>     <span class="o">=</span> <span class="n">evga_indtube_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>     <span class="o">=</span> <span class="n">RC_MAP_EVGA_INDTUBE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>        <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_VIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">evga_indtube_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">evga_indtube_analog</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">TVP5150_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio</span>     <span class="o">=</span> <span class="n">evga_indtube_analog</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="cm">/* eb1a:2868 Empia EM2870 + Philips CU1216L NIM (Philips TDA10023 +</span>
<span class="cm">	   Infineon TUA6034) */</span>
	<span class="p">[</span><span class="n">EM2870_BOARD_REDDO_DVB_C_USB_BOX</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>          <span class="o">=</span> <span class="s">&quot;Reddo DVB-C USB TV Box&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>    <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>    <span class="o">=</span> <span class="n">reddo_dvb_c_usb_box</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>       <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/* 1b80:a340 - Empia EM2870, NXP TDA18271HD and LG DT3304, sold</span>
<span class="cm">	 * initially as the KWorld PlusTV 340U, then as the UB435-Q.</span>
<span class="cm">	 * Early variants have a TDA18271HD/C1, later ones a TDA18271HD/C2 */</span>
	<span class="p">[</span><span class="n">EM2870_BOARD_KWORLD_A340</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>       <span class="o">=</span> <span class="s">&quot;KWorld PlusTV 340U or UB435-Q (ATSC)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>	<span class="cm">/* Digital-only TDA18271HD */</span>
		<span class="p">.</span><span class="n">has_dvb</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dvb_gpio</span>   <span class="o">=</span> <span class="n">kworld_a340_digital</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span> <span class="o">=</span> <span class="n">default_tuner_gpio</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/* 2013:024f PCTV nanoStick T2 290e.</span>
<span class="cm">	 * Empia EM28174, Sony CXD2820R and NXP TDA18271HD/C2 */</span>
	<span class="p">[</span><span class="n">EM28174_BOARD_PCTV_290E</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>          <span class="o">=</span> <span class="s">&quot;PCTV nanoStick T2 290e&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">i2c_speed</span>      <span class="o">=</span> <span class="n">EM2874_I2C_SECONDARY_BUS_SELECT</span> <span class="o">|</span>
			<span class="n">EM28XX_I2C_CLK_WAIT_ENABLE</span> <span class="o">|</span> <span class="n">EM28XX_I2C_FREQ_100_KHZ</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>    <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>    <span class="o">=</span> <span class="n">pctv_290e</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>       <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>      <span class="o">=</span> <span class="n">RC_MAP_PINNACLE_PCTV_HD</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/* 2013:024f PCTV DVB-S2 Stick 460e</span>
<span class="cm">	 * Empia EM28174, NXP TDA10071, Conexant CX24118A and Allegro A8293 */</span>
	<span class="p">[</span><span class="n">EM28174_BOARD_PCTV_460E</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">i2c_speed</span>     <span class="o">=</span> <span class="n">EM2874_I2C_SECONDARY_BUS_SELECT</span> <span class="o">|</span>
			<span class="n">EM28XX_I2C_CLK_WAIT_ENABLE</span> <span class="o">|</span> <span class="n">EM28XX_I2C_FREQ_400_KHZ</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>          <span class="o">=</span> <span class="s">&quot;PCTV DVB-S2 Stick (460e)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>    <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>    <span class="o">=</span> <span class="n">pctv_460e</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>       <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>      <span class="o">=</span> <span class="n">RC_MAP_PINNACLE_PCTV_HD</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/* eb1a:5006 Honestech VIDBOX NW03</span>
<span class="cm">	 * Empia EM2860, Philips SAA7113, Empia EMP202, No Tuner */</span>
	<span class="p">[</span><span class="n">EM2860_BOARD_HT_VIDBOX_NW03</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>                <span class="o">=</span> <span class="s">&quot;Honestech Vidbox NW03&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>          <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">decoder</span>             <span class="o">=</span> <span class="n">EM28XX_SAA711X</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>               <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_COMPOSITE0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>     <span class="o">=</span> <span class="n">EM28XX_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>     <span class="o">=</span> <span class="n">SAA7115_SVIDEO3</span><span class="p">,</span>  <span class="cm">/* S-VIDEO needs confirming */</span>
			<span class="p">.</span><span class="n">amux</span>     <span class="o">=</span> <span class="n">EM28XX_AMUX_LINE_IN</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="cm">/* 1b80:e425 MaxMedia UB425-TC</span>
<span class="cm">	 * Empia EM2874B + Micronas DRX 3913KA2 + NXP TDA18271HDC2 */</span>
	<span class="p">[</span><span class="n">EM2874_BOARD_MAXMEDIA_UB425_TC</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>          <span class="o">=</span> <span class="s">&quot;MaxMedia UB425-TC&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>    <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>    <span class="o">=</span> <span class="n">maxmedia_ub425_tc</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>       <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">i2c_speed</span>     <span class="o">=</span> <span class="n">EM2874_I2C_SECONDARY_BUS_SELECT</span> <span class="o">|</span>
				<span class="n">EM28XX_I2C_CLK_WAIT_ENABLE</span> <span class="o">|</span>
				<span class="n">EM28XX_I2C_FREQ_400_KHZ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/* 2304:0242 PCTV QuatroStick (510e)</span>
<span class="cm">	 * Empia EM2884 + Micronas DRX 3926K + NXP TDA18271HDC2 */</span>
	<span class="p">[</span><span class="n">EM2884_BOARD_PCTV_510E</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>          <span class="o">=</span> <span class="s">&quot;PCTV QuatroStick (510e)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>    <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>    <span class="o">=</span> <span class="n">pctv_510e</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>       <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>      <span class="o">=</span> <span class="n">RC_MAP_PINNACLE_PCTV_HD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">i2c_speed</span>     <span class="o">=</span> <span class="n">EM2874_I2C_SECONDARY_BUS_SELECT</span> <span class="o">|</span>
				<span class="n">EM28XX_I2C_CLK_WAIT_ENABLE</span> <span class="o">|</span>
				<span class="n">EM28XX_I2C_FREQ_400_KHZ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/* 2013:0251 PCTV QuatroStick nano (520e)</span>
<span class="cm">	 * Empia EM2884 + Micronas DRX 3926K + NXP TDA18271HDC2 */</span>
	<span class="p">[</span><span class="n">EM2884_BOARD_PCTV_520E</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>          <span class="o">=</span> <span class="s">&quot;PCTV QuatroStick nano (520e)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>    <span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_gpio</span>    <span class="o">=</span> <span class="n">pctv_520e</span><span class="p">,</span>
		<span class="p">.</span><span class="n">has_dvb</span>       <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ir_codes</span>      <span class="o">=</span> <span class="n">RC_MAP_PINNACLE_PCTV_HD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">i2c_speed</span>     <span class="o">=</span> <span class="n">EM2874_I2C_SECONDARY_BUS_SELECT</span> <span class="o">|</span>
				<span class="n">EM28XX_I2C_CLK_WAIT_ENABLE</span> <span class="o">|</span>
				<span class="n">EM28XX_I2C_FREQ_400_KHZ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">em28xx_bcount</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">em28xx_boards</span><span class="p">);</span>

<span class="cm">/* table of devices that work with this driver */</span>
<span class="k">struct</span> <span class="n">usb_device_id</span> <span class="n">em28xx_id_table</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2750</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2750_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2751</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2750_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2800</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2800_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2710</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2820</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2821</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2860</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2861</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2862</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2863</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2870</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2881</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2883</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2868</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2875</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_UNKNOWN</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0xe300</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2861_BOARD_KWORLD_PVRTV_300U</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0xe303</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2860_BOARD_KAIOMY_TVNPC_U2</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0xe305</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2880_BOARD_KWORLD_DVB_305U</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0xe310</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2880_BOARD_MSI_DIGIVOX_AD</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0xa313</span><span class="p">),</span>
		<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2882_BOARD_KWORLD_ATSC_315U</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0xa316</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2883_BOARD_KWORLD_HYBRID_330U</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0xe320</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2880_BOARD_MSI_DIGIVOX_AD_II</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0xe323</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2882_BOARD_KWORLD_VS_DVBT</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0xe350</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2870_BOARD_KWORLD_350U</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0xe355</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2870_BOARD_KWORLD_355U</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x2801</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2800_BOARD_GRABBEEX_USB2800</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0xe357</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2870_BOARD_KWORLD_355U</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0xe359</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2870_BOARD_KWORLD_355U</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x1b80</span><span class="p">,</span> <span class="mh">0xe302</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_PINNACLE_DVC_90</span> <span class="p">},</span> <span class="cm">/* Kaiser Baas Video to DVD maker */</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x1b80</span><span class="p">,</span> <span class="mh">0xe304</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_PINNACLE_DVC_90</span> <span class="p">},</span> <span class="cm">/* Kworld DVD Maker 2 */</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0ccd</span><span class="p">,</span> <span class="mh">0x0036</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_TERRATEC_CINERGY_250</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0ccd</span><span class="p">,</span> <span class="mh">0x004c</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2880_BOARD_TERRATEC_HYBRID_XS_FR</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0ccd</span><span class="p">,</span> <span class="mh">0x004f</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2860_BOARD_TERRATEC_HYBRID_XS</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0ccd</span><span class="p">,</span> <span class="mh">0x005e</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2882_BOARD_TERRATEC_HYBRID_XS</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0ccd</span><span class="p">,</span> <span class="mh">0x0042</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2882_BOARD_TERRATEC_HYBRID_XS</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0ccd</span><span class="p">,</span> <span class="mh">0x0043</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2870_BOARD_TERRATEC_XS</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0ccd</span><span class="p">,</span> <span class="mh">0x008e</span><span class="p">),</span>	<span class="cm">/* Cinergy HTC USB XS Rev. 1 */</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2884_BOARD_TERRATEC_H5</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0ccd</span><span class="p">,</span> <span class="mh">0x00ac</span><span class="p">),</span>	<span class="cm">/* Cinergy HTC USB XS Rev. 2 */</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2884_BOARD_TERRATEC_H5</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0ccd</span><span class="p">,</span> <span class="mh">0x10a2</span><span class="p">),</span>	<span class="cm">/* H5 Rev. 1 */</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2884_BOARD_TERRATEC_H5</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0ccd</span><span class="p">,</span> <span class="mh">0x10ad</span><span class="p">),</span>	<span class="cm">/* H5 Rev. 2 */</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2884_BOARD_TERRATEC_H5</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0ccd</span><span class="p">,</span> <span class="mh">0x0084</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2860_BOARD_TERRATEC_AV350</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0ccd</span><span class="p">,</span> <span class="mh">0x0096</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2860_BOARD_TERRATEC_GRABBY</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0ccd</span><span class="p">,</span> <span class="mh">0x10AF</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2860_BOARD_TERRATEC_GRABBY</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0ccd</span><span class="p">,</span> <span class="mh">0x00b2</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2884_BOARD_CINERGY_HTC_STICK</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0fd9</span><span class="p">,</span> <span class="mh">0x0033</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2860_BOARD_ELGATO_VIDEO_CAPTURE</span><span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x185b</span><span class="p">,</span> <span class="mh">0x2870</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2870_BOARD_COMPRO_VIDEOMATE</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x185b</span><span class="p">,</span> <span class="mh">0x2041</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_COMPRO_VIDEOMATE_FORYOU</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2040</span><span class="p">,</span> <span class="mh">0x4200</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_HAUPPAUGE_WINTV_USB_2</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2040</span><span class="p">,</span> <span class="mh">0x4201</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_HAUPPAUGE_WINTV_USB_2</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2040</span><span class="p">,</span> <span class="mh">0x6500</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2880_BOARD_HAUPPAUGE_WINTV_HVR_900</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2040</span><span class="p">,</span> <span class="mh">0x6502</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2880_BOARD_HAUPPAUGE_WINTV_HVR_900_R2</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2040</span><span class="p">,</span> <span class="mh">0x6513</span><span class="p">),</span> <span class="cm">/* HCW HVR-980 */</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2883_BOARD_HAUPPAUGE_WINTV_HVR_950</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2040</span><span class="p">,</span> <span class="mh">0x6517</span><span class="p">),</span> <span class="cm">/* HP  HVR-950 */</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2883_BOARD_HAUPPAUGE_WINTV_HVR_950</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2040</span><span class="p">,</span> <span class="mh">0x651b</span><span class="p">),</span> <span class="cm">/* RP  HVR-950 */</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2883_BOARD_HAUPPAUGE_WINTV_HVR_950</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2040</span><span class="p">,</span> <span class="mh">0x651f</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2883_BOARD_HAUPPAUGE_WINTV_HVR_850</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0438</span><span class="p">,</span> <span class="mh">0xb002</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2880_BOARD_AMD_ATI_TV_WONDER_HD_600</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2001</span><span class="p">,</span> <span class="mh">0xf112</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_DLINK_USB_TV</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2304</span><span class="p">,</span> <span class="mh">0x0207</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_PINNACLE_DVC_90</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2304</span><span class="p">,</span> <span class="mh">0x0208</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_PINNACLE_USB_2</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2304</span><span class="p">,</span> <span class="mh">0x021a</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_PINNACLE_DVC_90</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2304</span><span class="p">,</span> <span class="mh">0x0226</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2882_BOARD_PINNACLE_HYBRID_PRO_330E</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2304</span><span class="p">,</span> <span class="mh">0x0227</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2880_BOARD_PINNACLE_PCTV_HD_PRO</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x0413</span><span class="p">,</span> <span class="mh">0x6023</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2800_BOARD_LEADTEK_WINFAST_USBII</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x093b</span><span class="p">,</span> <span class="mh">0xa003</span><span class="p">),</span>
		       <span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_PINNACLE_DVC_90</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x093b</span><span class="p">,</span> <span class="mh">0xa005</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2861_BOARD_PLEXTOR_PX_TV100U</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x04bb</span><span class="p">,</span> <span class="mh">0x0515</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2820_BOARD_IODATA_GVMVP_SZ</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x50a6</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2860_BOARD_GADMEI_UTV330</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x1b80</span><span class="p">,</span> <span class="mh">0xa340</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2870_BOARD_KWORLD_A340</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2013</span><span class="p">,</span> <span class="mh">0x024f</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM28174_BOARD_PCTV_290E</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2013</span><span class="p">,</span> <span class="mh">0x024c</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM28174_BOARD_PCTV_460E</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2040</span><span class="p">,</span> <span class="mh">0x1605</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2884_BOARD_HAUPPAUGE_WINTV_HVR_930C</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0xeb1a</span><span class="p">,</span> <span class="mh">0x5006</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2860_BOARD_HT_VIDBOX_NW03</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x1b80</span><span class="p">,</span> <span class="mh">0xe309</span><span class="p">),</span> <span class="cm">/* Sveon STV40 */</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2860_BOARD_EASYCAP</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x1b80</span><span class="p">,</span> <span class="mh">0xe425</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2874_BOARD_MAXMEDIA_UB425_TC</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2304</span><span class="p">,</span> <span class="mh">0x0242</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2884_BOARD_PCTV_510E</span> <span class="p">},</span>
	<span class="p">{</span> <span class="n">USB_DEVICE</span><span class="p">(</span><span class="mh">0x2013</span><span class="p">,</span> <span class="mh">0x0251</span><span class="p">),</span>
			<span class="p">.</span><span class="n">driver_info</span> <span class="o">=</span> <span class="n">EM2884_BOARD_PCTV_520E</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">},</span>
<span class="p">};</span>
<span class="n">MODULE_DEVICE_TABLE</span><span class="p">(</span><span class="n">usb</span><span class="p">,</span> <span class="n">em28xx_id_table</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * EEPROM hash table for devices with generic USB IDs</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_hash_table</span> <span class="n">em28xx_eeprom_hash</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* P/N: SA 60002070465 Tuner: TVF7533-MF */</span>
	<span class="p">{</span><span class="mh">0x6ce05a8f</span><span class="p">,</span> <span class="n">EM2820_BOARD_PROLINK_PLAYTV_USB2</span><span class="p">,</span> <span class="n">TUNER_YMEC_TVF_5533MF</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x72cc5a8b</span><span class="p">,</span> <span class="n">EM2820_BOARD_PROLINK_PLAYTV_BOX4_USB2</span><span class="p">,</span> <span class="n">TUNER_YMEC_TVF_5533MF</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x966a0441</span><span class="p">,</span> <span class="n">EM2880_BOARD_KWORLD_DVB_310U</span><span class="p">,</span> <span class="n">TUNER_XC2028</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x166a0441</span><span class="p">,</span> <span class="n">EM2880_BOARD_EMPIRE_DUAL_TV</span><span class="p">,</span> <span class="n">TUNER_XC2028</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xcee44a99</span><span class="p">,</span> <span class="n">EM2882_BOARD_EVGA_INDTUBE</span><span class="p">,</span> <span class="n">TUNER_XC2028</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xb8846b20</span><span class="p">,</span> <span class="n">EM2881_BOARD_PINNACLE_HYBRID_PRO</span><span class="p">,</span> <span class="n">TUNER_XC2028</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x63f653bd</span><span class="p">,</span> <span class="n">EM2870_BOARD_REDDO_DVB_C_USB_BOX</span><span class="p">,</span> <span class="n">TUNER_ABSENT</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x4e913442</span><span class="p">,</span> <span class="n">EM2882_BOARD_DIKOM_DK300</span><span class="p">,</span> <span class="n">TUNER_XC2028</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* I2C devicelist hash table for devices with generic USB IDs */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">em28xx_hash_table</span> <span class="n">em28xx_i2c_hash</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0xb06a32c3</span><span class="p">,</span> <span class="n">EM2800_BOARD_TERRATEC_CINERGY_200</span><span class="p">,</span> <span class="n">TUNER_LG_PAL_NEW_TAPC</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xf51200e3</span><span class="p">,</span> <span class="n">EM2800_BOARD_VGEAR_POCKETTV</span><span class="p">,</span> <span class="n">TUNER_LG_PAL_NEW_TAPC</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x1ba50080</span><span class="p">,</span> <span class="n">EM2860_BOARD_SAA711X_REFERENCE_DESIGN</span><span class="p">,</span> <span class="n">TUNER_ABSENT</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x77800080</span><span class="p">,</span> <span class="n">EM2860_BOARD_TVP5150_REFERENCE_DESIGN</span><span class="p">,</span> <span class="n">TUNER_ABSENT</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0xc51200e3</span><span class="p">,</span> <span class="n">EM2820_BOARD_GADMEI_TVR200</span><span class="p">,</span> <span class="n">TUNER_LG_PAL_NEW_TAPC</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x4ba50080</span><span class="p">,</span> <span class="n">EM2861_BOARD_GADMEI_UTV330PLUS</span><span class="p">,</span> <span class="n">TUNER_TNF_5335MF</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x6b800080</span><span class="p">,</span> <span class="n">EM2874_BOARD_LEADERSHIP_ISDBT</span><span class="p">,</span> <span class="n">TUNER_ABSENT</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* I2C possible address to saa7115, tvp5150, msp3400, tvaudio */</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">saa711x_addrs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x4a</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x48</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span>   <span class="cm">/* SAA7111, SAA7111A and SAA7113 */</span>
	<span class="mh">0x42</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x40</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span>   <span class="cm">/* SAA7114, SAA7115 and SAA7118 */</span>
	<span class="n">I2C_CLIENT_END</span> <span class="p">};</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">tvp5150_addrs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0xb8</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span>
	<span class="mh">0xba</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">I2C_CLIENT_END</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">msp3400_addrs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x80</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span>
	<span class="mh">0x88</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">I2C_CLIENT_END</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">em28xx_tuner_callback</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">component</span><span class="p">,</span> <span class="kt">int</span> <span class="n">command</span><span class="p">,</span> <span class="kt">int</span> <span class="n">arg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">rc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="n">ptr</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">!=</span> <span class="n">TUNER_XC2028</span> <span class="o">&amp;&amp;</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">!=</span> <span class="n">TUNER_XC5000</span><span class="p">)</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">command</span> <span class="o">!=</span> <span class="n">XC2028_TUNER_RESET</span> <span class="o">&amp;&amp;</span> <span class="n">command</span> <span class="o">!=</span> <span class="n">XC5000_TUNER_RESET</span><span class="p">)</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

	<span class="n">rc</span> <span class="o">=</span> <span class="n">em28xx_gpio_set</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">tuner_gpio</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">rc</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL_GPL</span><span class="p">(</span><span class="n">em28xx_tuner_callback</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">em28xx_set_model</span><span class="p">(</span><span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">memcpy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">em28xx_boards</span><span class="p">[</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">],</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">));</span>

	<span class="cm">/* Those are the default values for the majority of boards</span>
<span class="cm">	   Use those values if not specified otherwise at boards entry</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">xclk</span><span class="p">)</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">xclk</span> <span class="o">=</span> <span class="n">EM28XX_XCLK_IR_RC5_MODE</span> <span class="o">|</span>
				  <span class="n">EM28XX_XCLK_FREQUENCY_12MHZ</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">i2c_speed</span><span class="p">)</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">i2c_speed</span> <span class="o">=</span> <span class="n">EM28XX_I2C_CLK_WAIT_ENABLE</span> <span class="o">|</span>
				       <span class="n">EM28XX_I2C_FREQ_100_KHZ</span><span class="p">;</span>
<span class="p">}</span>


<span class="cm">/* FIXME: Should be replaced by a proper mt9m111 driver */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">em28xx_initialize_mt9m111</span><span class="p">(</span><span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">regs</span><span class="p">[][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">{</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="p">},</span>  <span class="cm">/* reset and use defaults */</span>
		<span class="p">{</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="p">},</span>
		<span class="p">{</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="p">},</span>
		<span class="p">{</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="p">},</span>  <span class="cm">/* full readout speed, no row/col skipping */</span>
	<span class="p">};</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">regs</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="n">i2c_master_send</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_client</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">regs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="mi">3</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>


<span class="cm">/* FIXME: Should be replaced by a proper mt9m001 driver */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">em28xx_initialize_mt9m001</span><span class="p">(</span><span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">regs</span><span class="p">[][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">{</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="p">},</span>
		<span class="p">{</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="p">},</span>
		<span class="p">{</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="p">},</span>	<span class="cm">/* hres = 1280 */</span>
		<span class="p">{</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="p">},</span>  <span class="cm">/* vres = 1024 */</span>
		<span class="p">{</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="p">},</span>
		<span class="p">{</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="p">},</span>
		<span class="p">{</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="p">},</span>
		<span class="p">{</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="p">},</span>
		<span class="p">{</span> <span class="mh">0x35</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x24</span><span class="p">,</span> <span class="p">},</span>
		<span class="p">{</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="p">},</span>
		<span class="p">{</span> <span class="mh">0x2c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="p">},</span>
		<span class="p">{</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0xd4</span><span class="p">,</span> <span class="p">},</span>
		<span class="p">{</span> <span class="mh">0x35</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x57</span><span class="p">,</span> <span class="p">},</span>
	<span class="p">};</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">regs</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="n">i2c_master_send</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_client</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">regs</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="mi">3</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* HINT method: webcam I2C chips</span>
<span class="cm"> *</span>
<span class="cm"> * This method works for webcams with Micron sensors</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">em28xx_hint_sensor</span><span class="p">(</span><span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">rc</span><span class="p">;</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">sensor_name</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">cmd</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">version_be</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">version</span><span class="p">;</span>

	<span class="cm">/* Micron sensor detection */</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_client</span><span class="p">.</span><span class="n">addr</span> <span class="o">=</span> <span class="mh">0xba</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">cmd</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">i2c_master_send</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_client</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">cmd</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">rc</span> <span class="o">=</span> <span class="n">i2c_master_recv</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_client</span><span class="p">,</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">version_be</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">rc</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="n">version</span> <span class="o">=</span> <span class="n">be16_to_cpu</span><span class="p">(</span><span class="n">version_be</span><span class="p">);</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">version</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mh">0x8232</span>:		<span class="cm">/* mt9v011 640x480 1.3 Mpix sensor */</span>
	<span class="k">case</span> <span class="mh">0x8243</span>:		<span class="cm">/* mt9v011 rev B 640x480 1.3 Mpix sensor */</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span> <span class="o">=</span> <span class="n">EM2820_BOARD_SILVERCREST_WEBCAM</span><span class="p">;</span>
		<span class="n">em28xx_set_model</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

		<span class="n">sensor_name</span> <span class="o">=</span> <span class="s">&quot;mt9v011&quot;</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">em28xx_sensor</span> <span class="o">=</span> <span class="n">EM28XX_MT9V011</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sensor_xres</span> <span class="o">=</span> <span class="mi">640</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sensor_yres</span> <span class="o">=</span> <span class="mi">480</span><span class="p">;</span>
		<span class="cm">/*</span>
<span class="cm">		 * FIXME: mt9v011 uses I2S speed as xtal clk - at least with</span>
<span class="cm">		 * the Silvercrest cam I have here for testing - for higher</span>
<span class="cm">		 * resolutions, a high clock cause horizontal artifacts, so we</span>
<span class="cm">		 * need to use a lower xclk frequency.</span>
<span class="cm">		 * Yet, it would be possible to adjust xclk depending on the</span>
<span class="cm">		 * desired resolution, since this affects directly the</span>
<span class="cm">		 * frame rate.</span>
<span class="cm">		 */</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">xclk</span> <span class="o">=</span> <span class="n">EM28XX_XCLK_FREQUENCY_4_3MHZ</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sensor_xtal</span> <span class="o">=</span> <span class="mi">4300000</span><span class="p">;</span>

		<span class="cm">/* probably means GRGB 16 bit bayer */</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">vinmode</span> <span class="o">=</span> <span class="mh">0x0d</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">vinctl</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

		<span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="mh">0x143a</span>:    <span class="cm">/* MT9M111 as found in the ECS G200 */</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span> <span class="o">=</span> <span class="n">EM2750_BOARD_UNKNOWN</span><span class="p">;</span>
		<span class="n">em28xx_set_model</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

		<span class="n">sensor_name</span> <span class="o">=</span> <span class="s">&quot;mt9m111&quot;</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">xclk</span> <span class="o">=</span> <span class="n">EM28XX_XCLK_FREQUENCY_48MHZ</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">em28xx_sensor</span> <span class="o">=</span> <span class="n">EM28XX_MT9M111</span><span class="p">;</span>
		<span class="n">em28xx_initialize_mt9m111</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sensor_xres</span> <span class="o">=</span> <span class="mi">640</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sensor_yres</span> <span class="o">=</span> <span class="mi">512</span><span class="p">;</span>

		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">vinmode</span> <span class="o">=</span> <span class="mh">0x0a</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">vinctl</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

		<span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="mh">0x8431</span>:
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span> <span class="o">=</span> <span class="n">EM2750_BOARD_UNKNOWN</span><span class="p">;</span>
		<span class="n">em28xx_set_model</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

		<span class="n">sensor_name</span> <span class="o">=</span> <span class="s">&quot;mt9m001&quot;</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">em28xx_sensor</span> <span class="o">=</span> <span class="n">EM28XX_MT9M001</span><span class="p">;</span>
		<span class="n">em28xx_initialize_mt9m001</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sensor_xres</span> <span class="o">=</span> <span class="mi">1280</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sensor_yres</span> <span class="o">=</span> <span class="mi">1024</span><span class="p">;</span>

		<span class="cm">/* probably means BGGR 16 bit bayer */</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">vinmode</span> <span class="o">=</span> <span class="mh">0x0c</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">vinctl</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">printk</span><span class="p">(</span><span class="s">&quot;Unknown Micron Sensor 0x%04x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">version</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* Setup webcam defaults */</span>
	<span class="n">em28xx_pre_card_setup</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;Sensor is %s, using model %s entry.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		      <span class="n">sensor_name</span><span class="p">,</span> <span class="n">em28xx_boards</span><span class="p">[</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">].</span><span class="n">name</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* Since em28xx_pre_card_setup() requires a proper dev-&gt;model,</span>
<span class="cm"> * this won&#39;t work for boards with generic PCI IDs</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">em28xx_pre_card_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Set the initial XCLK and I2C clock values based on the board</span>
<span class="cm">	   definition */</span>
	<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R0F_XCLK</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">xclk</span> <span class="o">&amp;</span> <span class="mh">0x7f</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">is_em2800</span><span class="p">)</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R06_I2C_CLK</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">i2c_speed</span><span class="p">);</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>

	<span class="cm">/* request some modules */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">EM2861_BOARD_PLEXTOR_PX_TV100U</span>:
		<span class="cm">/* Sets the msp34xx I2S speed */</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2s_speed</span> <span class="o">=</span> <span class="mi">2048000</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">EM2861_BOARD_KWORLD_PVRTV_300U</span>:
	<span class="k">case</span> <span class="n">EM2880_BOARD_KWORLD_DVB_305U</span>:
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0x6d</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0x7d</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">EM2870_BOARD_COMPRO_VIDEOMATE</span>:
		<span class="cm">/* TODO: someone can do some cleanup here...</span>
<span class="cm">			 not everything&#39;s needed */</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM2880_R04_GPO</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM2880_R04_GPO</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xfd</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xfc</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xdc</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xfc</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">EM2870_BOARD_TERRATEC_XS_MT2060</span>:
		<span class="cm">/* this device needs some gpio writes to get the DVB-T</span>
<span class="cm">		   demod work */</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xde</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">EM2870_BOARD_PINNACLE_PCTV_DVB</span>:
		<span class="cm">/* this device needs some gpio writes to get the</span>
<span class="cm">		   DVB-T demod work */</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xde</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">EM2820_BOARD_GADMEI_UTV310</span>:
	<span class="k">case</span> <span class="n">EM2820_BOARD_MSI_VOX_USB_2</span>:
		<span class="cm">/* enables audio for that devices */</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xfd</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="n">EM2882_BOARD_KWORLD_ATSC_315U</span>:
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM2880_R04_GPO</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM2880_R04_GPO</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="n">EM2860_BOARD_KAIOMY_TVNPC_U2</span>:
		<span class="n">em28xx_write_regs</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R0F_XCLK</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\x07</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
		<span class="n">em28xx_write_regs</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R06_I2C_CLK</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\x40</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
		<span class="n">em28xx_write_regs</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\x42</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
		<span class="n">em28xx_write_regs</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\xfd</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="n">em28xx_write_regs</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\xff</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="n">em28xx_write_regs</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\x7f</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="n">em28xx_write_regs</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\x6b</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">EM2860_BOARD_EASYCAP</span>:
		<span class="n">em28xx_write_regs</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\xf8</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="n">EM2820_BOARD_IODATA_GVMVP_SZ</span>:
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xf7</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xfe</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xfd</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">70</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">em28xx_gpio_set</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">tuner_gpio</span><span class="p">);</span>
	<span class="n">em28xx_set_mode</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_ANALOG_MODE</span><span class="p">);</span>

	<span class="cm">/* Unlock device */</span>
	<span class="n">em28xx_set_mode</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_SUSPEND</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">em28xx_setup_xc3028</span><span class="p">(</span><span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">xc2028_ctrl</span> <span class="o">*</span><span class="n">ctl</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">memset</span><span class="p">(</span><span class="n">ctl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="o">*</span><span class="n">ctl</span><span class="p">));</span>

	<span class="n">ctl</span><span class="o">-&gt;</span><span class="n">fname</span>   <span class="o">=</span> <span class="n">XC2028_DEFAULT_FIRMWARE</span><span class="p">;</span>
	<span class="n">ctl</span><span class="o">-&gt;</span><span class="n">max_len</span> <span class="o">=</span> <span class="mi">64</span><span class="p">;</span>
	<span class="n">ctl</span><span class="o">-&gt;</span><span class="n">mts</span> <span class="o">=</span> <span class="n">em28xx_boards</span><span class="p">[</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">].</span><span class="n">mts_firmware</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">EM2880_BOARD_EMPIRE_DUAL_TV</span>:
	<span class="k">case</span> <span class="n">EM2880_BOARD_HAUPPAUGE_WINTV_HVR_900</span>:
	<span class="k">case</span> <span class="n">EM2882_BOARD_TERRATEC_HYBRID_XS</span>:
		<span class="n">ctl</span><span class="o">-&gt;</span><span class="n">demod</span> <span class="o">=</span> <span class="n">XC3028_FE_ZARLINK456</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">EM2880_BOARD_TERRATEC_HYBRID_XS</span>:
	<span class="k">case</span> <span class="n">EM2880_BOARD_TERRATEC_HYBRID_XS_FR</span>:
	<span class="k">case</span> <span class="n">EM2881_BOARD_PINNACLE_HYBRID_PRO</span>:
		<span class="n">ctl</span><span class="o">-&gt;</span><span class="n">demod</span> <span class="o">=</span> <span class="n">XC3028_FE_ZARLINK456</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">EM2880_BOARD_HAUPPAUGE_WINTV_HVR_900_R2</span>:
	<span class="k">case</span> <span class="n">EM2882_BOARD_PINNACLE_HYBRID_PRO_330E</span>:
		<span class="n">ctl</span><span class="o">-&gt;</span><span class="n">demod</span> <span class="o">=</span> <span class="n">XC3028_FE_DEFAULT</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">EM2880_BOARD_AMD_ATI_TV_WONDER_HD_600</span>:
		<span class="n">ctl</span><span class="o">-&gt;</span><span class="n">demod</span> <span class="o">=</span> <span class="n">XC3028_FE_DEFAULT</span><span class="p">;</span>
		<span class="n">ctl</span><span class="o">-&gt;</span><span class="n">fname</span> <span class="o">=</span> <span class="n">XC3028L_DEFAULT_FIRMWARE</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">EM2883_BOARD_HAUPPAUGE_WINTV_HVR_850</span>:
	<span class="k">case</span> <span class="n">EM2883_BOARD_HAUPPAUGE_WINTV_HVR_950</span>:
	<span class="k">case</span> <span class="n">EM2880_BOARD_PINNACLE_PCTV_HD_PRO</span>:
		<span class="cm">/* FIXME: Better to specify the needed IF */</span>
		<span class="n">ctl</span><span class="o">-&gt;</span><span class="n">demod</span> <span class="o">=</span> <span class="n">XC3028_FE_DEFAULT</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">EM2883_BOARD_KWORLD_HYBRID_330U</span>:
	<span class="k">case</span> <span class="n">EM2882_BOARD_DIKOM_DK300</span>:
	<span class="k">case</span> <span class="n">EM2882_BOARD_KWORLD_VS_DVBT</span>:
		<span class="n">ctl</span><span class="o">-&gt;</span><span class="n">demod</span> <span class="o">=</span> <span class="n">XC3028_FE_CHINA</span><span class="p">;</span>
		<span class="n">ctl</span><span class="o">-&gt;</span><span class="n">fname</span> <span class="o">=</span> <span class="n">XC2028_DEFAULT_FIRMWARE</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">EM2882_BOARD_EVGA_INDTUBE</span>:
		<span class="n">ctl</span><span class="o">-&gt;</span><span class="n">demod</span> <span class="o">=</span> <span class="n">XC3028_FE_CHINA</span><span class="p">;</span>
		<span class="n">ctl</span><span class="o">-&gt;</span><span class="n">fname</span> <span class="o">=</span> <span class="n">XC3028L_DEFAULT_FIRMWARE</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">ctl</span><span class="o">-&gt;</span><span class="n">demod</span> <span class="o">=</span> <span class="n">XC3028_FE_OREN538</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">em28xx_tuner_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">tuner_setup</span>           <span class="n">tun_setup</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">v4l2_frequency</span>        <span class="n">f</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">==</span> <span class="n">TUNER_ABSENT</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tun_setup</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">tun_setup</span><span class="p">));</span>

	<span class="n">tun_setup</span><span class="p">.</span><span class="n">mode_mask</span> <span class="o">=</span> <span class="n">T_ANALOG_TV</span> <span class="o">|</span> <span class="n">T_RADIO</span><span class="p">;</span>
	<span class="n">tun_setup</span><span class="p">.</span><span class="n">tuner_callback</span> <span class="o">=</span> <span class="n">em28xx_tuner_callback</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">radio</span><span class="p">.</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">tun_setup</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">radio</span><span class="p">.</span><span class="n">type</span><span class="p">;</span>
		<span class="n">tun_setup</span><span class="p">.</span><span class="n">addr</span> <span class="o">=</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">radio_addr</span><span class="p">;</span>

		<span class="n">v4l2_device_call_all</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tuner</span><span class="p">,</span> <span class="n">s_type_addr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tun_setup</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">!=</span> <span class="n">TUNER_ABSENT</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_type</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">tun_setup</span><span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_type</span><span class="p">;</span>
		<span class="n">tun_setup</span><span class="p">.</span><span class="n">addr</span>   <span class="o">=</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_addr</span><span class="p">;</span>

		<span class="n">v4l2_device_call_all</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tuner</span><span class="p">,</span> <span class="n">s_type_addr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tun_setup</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">tda9887_conf</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">v4l2_priv_tun_config</span> <span class="n">tda9887_cfg</span><span class="p">;</span>

		<span class="n">tda9887_cfg</span><span class="p">.</span><span class="n">tuner</span> <span class="o">=</span> <span class="n">TUNER_TDA9887</span><span class="p">;</span>
		<span class="n">tda9887_cfg</span><span class="p">.</span><span class="n">priv</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">tda9887_conf</span><span class="p">;</span>

		<span class="n">v4l2_device_call_all</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tuner</span><span class="p">,</span> <span class="n">s_config</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tda9887_cfg</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">==</span> <span class="n">TUNER_XC2028</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">v4l2_priv_tun_config</span>  <span class="n">xc2028_cfg</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">xc2028_ctrl</span>           <span class="n">ctl</span><span class="p">;</span>

		<span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">xc2028_cfg</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">xc2028_cfg</span><span class="p">));</span>
		<span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ctl</span><span class="p">));</span>

		<span class="n">em28xx_setup_xc3028</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ctl</span><span class="p">);</span>

		<span class="n">xc2028_cfg</span><span class="p">.</span><span class="n">tuner</span> <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">;</span>
		<span class="n">xc2028_cfg</span><span class="p">.</span><span class="n">priv</span>  <span class="o">=</span> <span class="o">&amp;</span><span class="n">ctl</span><span class="p">;</span>

		<span class="n">v4l2_device_call_all</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tuner</span><span class="p">,</span> <span class="n">s_config</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">xc2028_cfg</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="cm">/* configure tuner */</span>
	<span class="n">f</span><span class="p">.</span><span class="n">tuner</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">f</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">V4L2_TUNER_ANALOG_TV</span><span class="p">;</span>
	<span class="n">f</span><span class="p">.</span><span class="n">frequency</span> <span class="o">=</span> <span class="mi">9076</span><span class="p">;</span>     <span class="cm">/* just a magic number */</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">ctl_freq</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">frequency</span><span class="p">;</span>
	<span class="n">v4l2_device_call_all</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tuner</span><span class="p">,</span> <span class="n">s_frequency</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">em28xx_hint_board</span><span class="p">(</span><span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="cm">/* HINT method: EEPROM</span>
<span class="cm">	 *</span>
<span class="cm">	 * This method works only for boards with eeprom.</span>
<span class="cm">	 * Uses a hash of all eeprom bytes. The hash should be</span>
<span class="cm">	 * unique for a vendor/tuner pair.</span>
<span class="cm">	 * There are a high chance that tuners for different</span>
<span class="cm">	 * video standards produce different hashes.</span>
<span class="cm">	 */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">em28xx_eeprom_hash</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">hash</span> <span class="o">==</span> <span class="n">em28xx_eeprom_hash</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">hash</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span> <span class="o">=</span> <span class="n">em28xx_eeprom_hash</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">model</span><span class="p">;</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">em28xx_eeprom_hash</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">tuner</span><span class="p">;</span>

			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;Your board has no unique USB ID.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;A hint were successfully done, &quot;</span>
				      <span class="s">&quot;based on eeprom hash.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;This method is not 100%% failproof.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;If the board were missdetected, &quot;</span>
				      <span class="s">&quot;please email this log to:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">V4L Mailing List &quot;</span>
				      <span class="s">&quot; &lt;linux-media@vger.kernel.org&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;Board detected as %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				      <span class="n">em28xx_boards</span><span class="p">[</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">].</span><span class="n">name</span><span class="p">);</span>

			<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="cm">/* HINT method: I2C attached devices</span>
<span class="cm">	 *</span>
<span class="cm">	 * This method works for all boards.</span>
<span class="cm">	 * Uses a hash of i2c scanned devices.</span>
<span class="cm">	 * Devices with the same i2c attached chips will</span>
<span class="cm">	 * be considered equal.</span>
<span class="cm">	 * This method is less precise than the eeprom one.</span>
<span class="cm">	 */</span>

	<span class="cm">/* user did not request i2c scanning =&gt; do it now */</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_hash</span><span class="p">)</span>
		<span class="n">em28xx_do_i2c_scan</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">em28xx_i2c_hash</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_hash</span> <span class="o">==</span> <span class="n">em28xx_i2c_hash</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">hash</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span> <span class="o">=</span> <span class="n">em28xx_i2c_hash</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">model</span><span class="p">;</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">em28xx_i2c_hash</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">tuner</span><span class="p">;</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;Your board has no unique USB ID.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;A hint were successfully done, &quot;</span>
				      <span class="s">&quot;based on i2c devicelist hash.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;This method is not 100%% failproof.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;If the board were missdetected, &quot;</span>
				      <span class="s">&quot;please email this log to:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">V4L Mailing List &quot;</span>
				      <span class="s">&quot; &lt;linux-media@vger.kernel.org&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;Board detected as %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				      <span class="n">em28xx_boards</span><span class="p">[</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">].</span><span class="n">name</span><span class="p">);</span>

			<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;Your board has no unique USB ID and thus need a &quot;</span>
		      <span class="s">&quot;hint to be detected.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;You may try to use card=&lt;n&gt; insmod option to &quot;</span>
		      <span class="s">&quot;workaround that.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;Please send an email with this log to:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">V4L Mailing List &lt;linux-media@vger.kernel.org&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;Board eeprom hash is 0x%08lx</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">hash</span><span class="p">);</span>
	<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;Board i2c devicelist hash is 0x%08lx</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_hash</span><span class="p">);</span>

	<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;Here is a list of valid choices for the card=&lt;n&gt;&quot;</span>
		      <span class="s">&quot; insmod option:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">em28xx_bcount</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;    card=%d -&gt; %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				<span class="n">i</span><span class="p">,</span> <span class="n">em28xx_boards</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">name</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">em28xx_card_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * If the device can be a webcam, seek for a sensor.</span>
<span class="cm">	 * If sensor is not found, then it isn&#39;t a webcam.</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">is_webcam</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">em28xx_hint_sensor</span><span class="p">(</span><span class="n">dev</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">is_webcam</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">progressive</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">is_webcam</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="n">EM2820_BOARD_UNKNOWN</span>:
		<span class="k">case</span> <span class="n">EM2800_BOARD_UNKNOWN</span>:
		<span class="cm">/*</span>
<span class="cm">		 * The K-WORLD DVB-T 310U is detected as an MSI Digivox AD.</span>
<span class="cm">		 *</span>
<span class="cm">		 * This occurs because they share identical USB vendor and</span>
<span class="cm">		 * product IDs.</span>
<span class="cm">		 *</span>
<span class="cm">		 * What we do here is look up the EEPROM hash of the K-WORLD</span>
<span class="cm">		 * and if it is found then we decide that we do not have</span>
<span class="cm">		 * a DIGIVOX and reset the device to the K-WORLD instead.</span>
<span class="cm">		 *</span>
<span class="cm">		 * This solution is only valid if they do not share eeprom</span>
<span class="cm">		 * hash identities which has not been determined as yet.</span>
<span class="cm">		 */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">em28xx_hint_board</span><span class="p">(</span><span class="n">dev</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;Board not discovered</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">else</span> <span class="p">{</span>
			<span class="n">em28xx_set_model</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
			<span class="n">em28xx_pre_card_setup</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
		<span class="nl">default:</span>
			<span class="n">em28xx_set_model</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">em28xx_info</span><span class="p">(</span><span class="s">&quot;Identified as %s (card=%d)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		    <span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">);</span>

	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">em28xx_boards</span><span class="p">[</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">].</span><span class="n">tuner_type</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">em28xx_boards</span><span class="p">[</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">].</span><span class="n">tuner_addr</span><span class="p">)</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_addr</span> <span class="o">=</span> <span class="n">em28xx_boards</span><span class="p">[</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">].</span><span class="n">tuner_addr</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">em28xx_boards</span><span class="p">[</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">].</span><span class="n">tda9887_conf</span><span class="p">)</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">tda9887_conf</span> <span class="o">=</span> <span class="n">em28xx_boards</span><span class="p">[</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">].</span><span class="n">tda9887_conf</span><span class="p">;</span>

	<span class="cm">/* request some modules */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">EM2820_BOARD_HAUPPAUGE_WINTV_USB_2</span>:
	<span class="k">case</span> <span class="n">EM2880_BOARD_HAUPPAUGE_WINTV_HVR_900</span>:
	<span class="k">case</span> <span class="n">EM2880_BOARD_HAUPPAUGE_WINTV_HVR_900_R2</span>:
	<span class="k">case</span> <span class="n">EM2883_BOARD_HAUPPAUGE_WINTV_HVR_850</span>:
	<span class="k">case</span> <span class="n">EM2883_BOARD_HAUPPAUGE_WINTV_HVR_950</span>:
	<span class="p">{</span>
		<span class="k">struct</span> <span class="n">tveeprom</span> <span class="n">tv</span><span class="p">;</span>
<span class="cp">#if defined(CONFIG_MODULES) &amp;&amp; defined(MODULE)</span>
		<span class="n">request_module</span><span class="p">(</span><span class="s">&quot;tveeprom&quot;</span><span class="p">);</span>
<span class="cp">#endif</span>
		<span class="cm">/* Call first TVeeprom */</span>

		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_client</span><span class="p">.</span><span class="n">addr</span> <span class="o">=</span> <span class="mh">0xa0</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">tveeprom_hauppauge_analog</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_client</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tv</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">eedata</span><span class="p">);</span>

		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">tv</span><span class="p">.</span><span class="n">tuner_type</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">tv</span><span class="p">.</span><span class="n">audio_processor</span> <span class="o">==</span> <span class="n">V4L2_IDENT_MSPX4XX</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2s_speed</span> <span class="o">=</span> <span class="mi">2048000</span><span class="p">;</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">has_msp34xx</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">case</span> <span class="n">EM2882_BOARD_KWORLD_ATSC_315U</span>:
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xfd</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">EM2820_BOARD_KWORLD_PVRTV2800RF</span>:
		<span class="cm">/* GPIO enables sound on KWORLD PVR TV 2800RF */</span>
		<span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xf9</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">EM2820_BOARD_UNKNOWN</span>:
	<span class="k">case</span> <span class="n">EM2800_BOARD_UNKNOWN</span>:
		<span class="cm">/*</span>
<span class="cm">		 * The K-WORLD DVB-T 310U is detected as an MSI Digivox AD.</span>
<span class="cm">		 *</span>
<span class="cm">		 * This occurs because they share identical USB vendor and</span>
<span class="cm">		 * product IDs.</span>
<span class="cm">		 *</span>
<span class="cm">		 * What we do here is look up the EEPROM hash of the K-WORLD</span>
<span class="cm">		 * and if it is found then we decide that we do not have</span>
<span class="cm">		 * a DIGIVOX and reset the device to the K-WORLD instead.</span>
<span class="cm">		 *</span>
<span class="cm">		 * This solution is only valid if they do not share eeprom</span>
<span class="cm">		 * hash identities which has not been determined as yet.</span>
<span class="cm">		 */</span>
	<span class="k">case</span> <span class="n">EM2880_BOARD_MSI_DIGIVOX_AD</span>:
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">em28xx_hint_board</span><span class="p">(</span><span class="n">dev</span><span class="p">))</span>
			<span class="n">em28xx_set_model</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

		<span class="cm">/* In cases where we had to use a board hint, the call to</span>
<span class="cm">		   em28xx_set_mode() in em28xx_pre_card_setup() was a no-op,</span>
<span class="cm">		   so make the call now so the analog GPIOs are set properly</span>
<span class="cm">		   before probing the i2c bus. */</span>
		<span class="n">em28xx_gpio_set</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">tuner_gpio</span><span class="p">);</span>
		<span class="n">em28xx_set_mode</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_ANALOG_MODE</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm">		 * The Dikom DK300 is detected as an Kworld VS-DVB-T 323UR.</span>
<span class="cm">		 *</span>
<span class="cm">		 * This occurs because they share identical USB vendor and</span>
<span class="cm">		 * product IDs.</span>
<span class="cm">		 *</span>
<span class="cm">		 * What we do here is look up the EEPROM hash of the Dikom</span>
<span class="cm">		 * and if it is found then we decide that we do not have</span>
<span class="cm">		 * a Kworld and reset the device to the Dikom instead.</span>
<span class="cm">		 *</span>
<span class="cm">		 * This solution is only valid if they do not share eeprom</span>
<span class="cm">		 * hash identities which has not been determined as yet.</span>
<span class="cm">		 */</span>
	<span class="k">case</span> <span class="n">EM2882_BOARD_KWORLD_VS_DVBT</span>:
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">em28xx_hint_board</span><span class="p">(</span><span class="n">dev</span><span class="p">))</span>
			<span class="n">em28xx_set_model</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

		<span class="cm">/* In cases where we had to use a board hint, the call to</span>
<span class="cm">		   em28xx_set_mode() in em28xx_pre_card_setup() was a no-op,</span>
<span class="cm">		   so make the call now so the analog GPIOs are set properly</span>
<span class="cm">		   before probing the i2c bus. */</span>
		<span class="n">em28xx_gpio_set</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">tuner_gpio</span><span class="p">);</span>
		<span class="n">em28xx_set_mode</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_ANALOG_MODE</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">valid</span> <span class="o">==</span> <span class="n">EM28XX_BOARD_NOT_VALIDATED</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;The support for this board weren&#39;t &quot;</span>
			      <span class="s">&quot;valid yet.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;Please send a report of having this working</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;not to V4L mailing list (and/or to other &quot;</span>
				<span class="s">&quot;addresses)</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="cm">/* Allow override tuner type by a module parameter */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">tuner</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">tuner</span><span class="p">;</span>

	<span class="cm">/* request some modules */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">has_msp34xx</span><span class="p">)</span>
		<span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_adap</span><span class="p">,</span>
			<span class="s">&quot;msp3400&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">msp3400_addrs</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">decoder</span> <span class="o">==</span> <span class="n">EM28XX_SAA711X</span><span class="p">)</span>
		<span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_adap</span><span class="p">,</span>
			<span class="s">&quot;saa7115_auto&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">saa711x_addrs</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">decoder</span> <span class="o">==</span> <span class="n">EM28XX_TVP5150</span><span class="p">)</span>
		<span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_adap</span><span class="p">,</span>
			<span class="s">&quot;tvp5150&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tvp5150_addrs</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">em28xx_sensor</span> <span class="o">==</span> <span class="n">EM28XX_MT9V011</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">mt9v011_platform_data</span> <span class="n">pdata</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">i2c_board_info</span> <span class="n">mt9v011_info</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="s">&quot;mt9v011&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">addr</span> <span class="o">=</span> <span class="mh">0xba</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pdata</span><span class="p">,</span>
		<span class="p">};</span>

		<span class="n">pdata</span><span class="p">.</span><span class="n">xtal</span> <span class="o">=</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">sensor_xtal</span><span class="p">;</span>
		<span class="n">v4l2_i2c_new_subdev_board</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_adap</span><span class="p">,</span>
				<span class="o">&amp;</span><span class="n">mt9v011_info</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="p">}</span>


	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">adecoder</span> <span class="o">==</span> <span class="n">EM28XX_TVAUDIO</span><span class="p">)</span>
		<span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_adap</span><span class="p">,</span>
			<span class="s">&quot;tvaudio&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">tvaudio_addr</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">tuner_type</span> <span class="o">!=</span> <span class="n">TUNER_ABSENT</span><span class="p">)</span> <span class="p">{</span>
		<span class="kt">int</span> <span class="n">has_demod</span> <span class="o">=</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">tda9887_conf</span> <span class="o">&amp;</span> <span class="n">TDA9887_PRESENT</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">radio</span><span class="p">.</span><span class="n">type</span><span class="p">)</span>
			<span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_adap</span><span class="p">,</span>
				<span class="s">&quot;tuner&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">radio_addr</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">has_demod</span><span class="p">)</span>
			<span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span>
				<span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_adap</span><span class="p">,</span> <span class="s">&quot;tuner&quot;</span><span class="p">,</span>
				<span class="mi">0</span><span class="p">,</span> <span class="n">v4l2_i2c_tuner_addrs</span><span class="p">(</span><span class="n">ADDRS_DEMOD</span><span class="p">));</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_addr</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">enum</span> <span class="n">v4l2_i2c_tuner_type</span> <span class="n">type</span> <span class="o">=</span>
				<span class="n">has_demod</span> <span class="o">?</span> <span class="n">ADDRS_TV_WITH_DEMOD</span> <span class="o">:</span> <span class="n">ADDRS_TV</span><span class="p">;</span>
			<span class="k">struct</span> <span class="n">v4l2_subdev</span> <span class="o">*</span><span class="n">sd</span><span class="p">;</span>

			<span class="n">sd</span> <span class="o">=</span> <span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span>
				<span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_adap</span><span class="p">,</span> <span class="s">&quot;tuner&quot;</span><span class="p">,</span>
				<span class="mi">0</span><span class="p">,</span> <span class="n">v4l2_i2c_tuner_addrs</span><span class="p">(</span><span class="n">type</span><span class="p">));</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">sd</span><span class="p">)</span>
				<span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_addr</span> <span class="o">=</span> <span class="n">v4l2_i2c_subdev_addr</span><span class="p">(</span><span class="n">sd</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_adap</span><span class="p">,</span>
				<span class="s">&quot;tuner&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">tuner_addr</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">em28xx_tuner_setup</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
<span class="p">}</span>


<span class="cp">#if defined(CONFIG_MODULES) &amp;&amp; defined(MODULE)</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">request_module_async</span><span class="p">(</span><span class="k">struct</span> <span class="n">work_struct</span> <span class="o">*</span><span class="n">work</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="n">container_of</span><span class="p">(</span><span class="n">work</span><span class="p">,</span>
			     <span class="k">struct</span> <span class="n">em28xx</span><span class="p">,</span> <span class="n">request_module_wk</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">has_audio_class</span><span class="p">)</span>
		<span class="n">request_module</span><span class="p">(</span><span class="s">&quot;snd-usb-audio&quot;</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">has_alsa_audio</span><span class="p">)</span>
		<span class="n">request_module</span><span class="p">(</span><span class="s">&quot;em28xx-alsa&quot;</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">has_dvb</span><span class="p">)</span>
		<span class="n">request_module</span><span class="p">(</span><span class="s">&quot;em28xx-dvb&quot;</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">has_ir_i2c</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">disable_ir</span><span class="p">)</span>
		<span class="n">request_module</span><span class="p">(</span><span class="s">&quot;em28xx-rc&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">request_modules</span><span class="p">(</span><span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">INIT_WORK</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">request_module_wk</span><span class="p">,</span> <span class="n">request_module_async</span><span class="p">);</span>
	<span class="n">schedule_work</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">request_module_wk</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">flush_request_modules</span><span class="p">(</span><span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">flush_work_sync</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">request_module_wk</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">#else</span>
<span class="cp">#define request_modules(dev)</span>
<span class="cp">#define flush_request_modules(dev)</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_MODULES */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * em28xx_release_resources()</span>
<span class="cm"> * unregisters the v4l2,i2c and usb devices</span>
<span class="cm"> * called when the device gets disconnected or at module unload</span>
<span class="cm">*/</span>
<span class="kt">void</span> <span class="nf">em28xx_release_resources</span><span class="p">(</span><span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/*FIXME: I2C IR should be disconnected */</span>

	<span class="n">em28xx_release_analog_resources</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">em28xx_i2c_unregister</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">v4l2_device_unregister</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">);</span>

	<span class="n">usb_put_dev</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">udev</span><span class="p">);</span>

	<span class="cm">/* Mark device as unused */</span>
	<span class="n">clear_bit</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">devno</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">em28xx_devused</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * em28xx_init_dev()</span>
<span class="cm"> * allocates and inits the device structs, registers i2c bus and v4l device</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">em28xx_init_dev</span><span class="p">(</span><span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">usb_device</span> <span class="o">*</span><span class="n">udev</span><span class="p">,</span>
			   <span class="k">struct</span> <span class="n">usb_interface</span> <span class="o">*</span><span class="n">interface</span><span class="p">,</span>
			   <span class="kt">int</span> <span class="n">minor</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">retval</span><span class="p">;</span>

	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">udev</span> <span class="o">=</span> <span class="n">udev</span><span class="p">;</span>
	<span class="n">mutex_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">ctrl_urb_lock</span><span class="p">);</span>
	<span class="n">spin_lock_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">slock</span><span class="p">);</span>

	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">em28xx_write_regs</span> <span class="o">=</span> <span class="n">em28xx_write_regs</span><span class="p">;</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">em28xx_read_reg</span> <span class="o">=</span> <span class="n">em28xx_read_reg</span><span class="p">;</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">em28xx_read_reg_req_len</span> <span class="o">=</span> <span class="n">em28xx_read_reg_req_len</span><span class="p">;</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">em28xx_write_regs_req</span> <span class="o">=</span> <span class="n">em28xx_write_regs_req</span><span class="p">;</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">em28xx_read_reg_req</span> <span class="o">=</span> <span class="n">em28xx_read_reg_req</span><span class="p">;</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">is_em2800</span> <span class="o">=</span> <span class="n">em28xx_boards</span><span class="p">[</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span><span class="p">].</span><span class="n">is_em2800</span><span class="p">;</span>

	<span class="n">em28xx_set_model</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="cm">/* Set the default GPO/GPIO for legacy devices */</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">reg_gpo_num</span> <span class="o">=</span> <span class="n">EM2880_R04_GPO</span><span class="p">;</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">reg_gpio_num</span> <span class="o">=</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">;</span>

	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">wait_after_write</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

	<span class="cm">/* Based on the Chip ID, set the device configuration */</span>
	<span class="n">retval</span> <span class="o">=</span> <span class="n">em28xx_read_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R0A_CHIPID</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">retval</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">chip_id</span> <span class="o">=</span> <span class="n">retval</span><span class="p">;</span>

		<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">chip_id</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="n">CHIP_ID_EM2800</span>:
			<span class="n">em28xx_info</span><span class="p">(</span><span class="s">&quot;chip ID is em2800</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">CHIP_ID_EM2710</span>:
			<span class="n">em28xx_info</span><span class="p">(</span><span class="s">&quot;chip ID is em2710</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">CHIP_ID_EM2750</span>:
			<span class="n">em28xx_info</span><span class="p">(</span><span class="s">&quot;chip ID is em2750</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">CHIP_ID_EM2820</span>:
			<span class="n">em28xx_info</span><span class="p">(</span><span class="s">&quot;chip ID is em2820 (or em2710)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">CHIP_ID_EM2840</span>:
			<span class="n">em28xx_info</span><span class="p">(</span><span class="s">&quot;chip ID is em2840</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">CHIP_ID_EM2860</span>:
			<span class="n">em28xx_info</span><span class="p">(</span><span class="s">&quot;chip ID is em2860</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">CHIP_ID_EM2870</span>:
			<span class="n">em28xx_info</span><span class="p">(</span><span class="s">&quot;chip ID is em2870</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">wait_after_write</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">CHIP_ID_EM2874</span>:
			<span class="n">em28xx_info</span><span class="p">(</span><span class="s">&quot;chip ID is em2874</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">reg_gpio_num</span> <span class="o">=</span> <span class="n">EM2874_R80_GPIO</span><span class="p">;</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">wait_after_write</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">CHIP_ID_EM28174</span>:
			<span class="n">em28xx_info</span><span class="p">(</span><span class="s">&quot;chip ID is em28174</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">reg_gpio_num</span> <span class="o">=</span> <span class="n">EM2874_R80_GPIO</span><span class="p">;</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">wait_after_write</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">CHIP_ID_EM2883</span>:
			<span class="n">em28xx_info</span><span class="p">(</span><span class="s">&quot;chip ID is em2882/em2883</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">wait_after_write</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">CHIP_ID_EM2884</span>:
			<span class="n">em28xx_info</span><span class="p">(</span><span class="s">&quot;chip ID is em2884</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">reg_gpio_num</span> <span class="o">=</span> <span class="n">EM2874_R80_GPIO</span><span class="p">;</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">wait_after_write</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="nl">default:</span>
			<span class="n">em28xx_info</span><span class="p">(</span><span class="s">&quot;em28xx chip ID = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">chip_id</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">is_audio_only</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">retval</span> <span class="o">=</span> <span class="n">em28xx_audio_setup</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">retval</span><span class="p">)</span>
			<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
		<span class="n">em28xx_init_extension</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* Prepopulate cached GPO register content */</span>
	<span class="n">retval</span> <span class="o">=</span> <span class="n">em28xx_read_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">reg_gpo_num</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">retval</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">reg_gpo</span> <span class="o">=</span> <span class="n">retval</span><span class="p">;</span>

	<span class="n">em28xx_pre_card_setup</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">is_em2800</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* Resets I2C speed */</span>
		<span class="n">retval</span> <span class="o">=</span> <span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R06_I2C_CLK</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">i2c_speed</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">retval</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;%s: em28xx_write_reg failed!&quot;</span>
				      <span class="s">&quot; retval [%d]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				      <span class="n">__func__</span><span class="p">,</span> <span class="n">retval</span><span class="p">);</span>
			<span class="k">return</span> <span class="n">retval</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">retval</span> <span class="o">=</span> <span class="n">v4l2_device_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">interface</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">retval</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;Call to v4l2_device_register() failed!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span> <span class="n">retval</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* register i2c bus */</span>
	<span class="n">retval</span> <span class="o">=</span> <span class="n">em28xx_i2c_register</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">retval</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;%s: em28xx_i2c_register - error [%d]!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">__func__</span><span class="p">,</span> <span class="n">retval</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">unregister_dev</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/*</span>
<span class="cm">	 * Default format, used for tvp5150 or saa711x output formats</span>
<span class="cm">	 */</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">vinmode</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">vinctl</span>  <span class="o">=</span> <span class="n">EM28XX_VINCTRL_INTERLACED</span> <span class="o">|</span>
		       <span class="n">EM28XX_VINCTRL_CCIR656_ENABLE</span><span class="p">;</span>

	<span class="cm">/* Do board specific init and eeprom reading */</span>
	<span class="n">em28xx_card_setup</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="cm">/* Configure audio */</span>
	<span class="n">retval</span> <span class="o">=</span> <span class="n">em28xx_audio_setup</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">retval</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;%s: Error while setting audio - error [%d]!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">__func__</span><span class="p">,</span> <span class="n">retval</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">fail</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* wake i2c devices */</span>
	<span class="n">em28xx_wake_i2c</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="cm">/* init video dma queues */</span>
	<span class="n">INIT_LIST_HEAD</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">vidq</span><span class="p">.</span><span class="n">active</span><span class="p">);</span>
	<span class="n">INIT_LIST_HEAD</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">vbiq</span><span class="p">.</span><span class="n">active</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">.</span><span class="n">has_msp34xx</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* Send a reset to other chips via gpio */</span>
		<span class="n">retval</span> <span class="o">=</span> <span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xf7</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">retval</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;%s: em28xx_write_reg - &quot;</span>
				      <span class="s">&quot;msp34xx(1) failed! error [%d]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				      <span class="n">__func__</span><span class="p">,</span> <span class="n">retval</span><span class="p">);</span>
			<span class="k">goto</span> <span class="n">fail</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>

		<span class="n">retval</span> <span class="o">=</span> <span class="n">em28xx_write_reg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_R08_GPIO</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">retval</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;%s: em28xx_write_reg - &quot;</span>
				      <span class="s">&quot;msp34xx(2) failed! error [%d]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				      <span class="n">__func__</span><span class="p">,</span> <span class="n">retval</span><span class="p">);</span>
			<span class="k">goto</span> <span class="n">fail</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">retval</span> <span class="o">=</span> <span class="n">em28xx_register_analog_devices</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">retval</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">goto</span> <span class="n">fail</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* Save some power by putting tuner to sleep */</span>
	<span class="n">v4l2_device_call_all</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">core</span><span class="p">,</span> <span class="n">s_power</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

<span class="nl">fail:</span>
	<span class="n">em28xx_i2c_unregister</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

<span class="nl">unregister_dev:</span>
	<span class="n">v4l2_device_unregister</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">retval</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* high bandwidth multiplier, as encoded in highspeed endpoint descriptors */</span>
<span class="cp">#define hb_mult(wMaxPacketSize) (1 + (((wMaxPacketSize) &gt;&gt; 11) &amp; 0x03))</span>

<span class="cm">/*</span>
<span class="cm"> * em28xx_usb_probe()</span>
<span class="cm"> * checks for supported devices</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">em28xx_usb_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">usb_interface</span> <span class="o">*</span><span class="n">interface</span><span class="p">,</span>
			    <span class="k">const</span> <span class="k">struct</span> <span class="n">usb_device_id</span> <span class="o">*</span><span class="n">id</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">usb_device</span> <span class="o">*</span><span class="n">udev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">retval</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">has_audio</span> <span class="o">=</span> <span class="nb">false</span><span class="p">,</span> <span class="n">has_video</span> <span class="o">=</span> <span class="nb">false</span><span class="p">,</span> <span class="n">has_dvb</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">nr</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">int</span> <span class="n">ifnum</span> <span class="o">=</span> <span class="n">interface</span><span class="o">-&gt;</span><span class="n">altsetting</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">desc</span><span class="p">.</span><span class="n">bInterfaceNumber</span><span class="p">;</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">speed</span><span class="p">;</span>

	<span class="n">udev</span> <span class="o">=</span> <span class="n">usb_get_dev</span><span class="p">(</span><span class="n">interface_to_usbdev</span><span class="p">(</span><span class="n">interface</span><span class="p">));</span>

	<span class="cm">/* Check to see next free device and mark as used */</span>
	<span class="k">do</span> <span class="p">{</span>
		<span class="n">nr</span> <span class="o">=</span> <span class="n">find_first_zero_bit</span><span class="p">(</span><span class="o">&amp;</span><span class="n">em28xx_devused</span><span class="p">,</span> <span class="n">EM28XX_MAXBOARDS</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">nr</span> <span class="o">&gt;=</span> <span class="n">EM28XX_MAXBOARDS</span><span class="p">)</span> <span class="p">{</span>
			<span class="cm">/* No free device slots */</span>
			<span class="n">printk</span><span class="p">(</span><span class="n">DRIVER_NAME</span> <span class="s">&quot;: Supports only %i em28xx boards.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
					<span class="n">EM28XX_MAXBOARDS</span><span class="p">);</span>
			<span class="n">retval</span> <span class="o">=</span> <span class="o">-</span><span class="n">ENOMEM</span><span class="p">;</span>
			<span class="k">goto</span> <span class="n">err_no_slot</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">test_and_set_bit</span><span class="p">(</span><span class="n">nr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">em28xx_devused</span><span class="p">));</span>

	<span class="cm">/* Don&#39;t register audio interfaces */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">interface</span><span class="o">-&gt;</span><span class="n">altsetting</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">desc</span><span class="p">.</span><span class="n">bInterfaceClass</span> <span class="o">==</span> <span class="n">USB_CLASS_AUDIO</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">em28xx_err</span><span class="p">(</span><span class="n">DRIVER_NAME</span> <span class="s">&quot; audio device (%04x:%04x): &quot;</span>
			<span class="s">&quot;interface %i, class %i</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">le16_to_cpu</span><span class="p">(</span><span class="n">udev</span><span class="o">-&gt;</span><span class="n">descriptor</span><span class="p">.</span><span class="n">idVendor</span><span class="p">),</span>
			<span class="n">le16_to_cpu</span><span class="p">(</span><span class="n">udev</span><span class="o">-&gt;</span><span class="n">descriptor</span><span class="p">.</span><span class="n">idProduct</span><span class="p">),</span>
			<span class="n">ifnum</span><span class="p">,</span>
			<span class="n">interface</span><span class="o">-&gt;</span><span class="n">altsetting</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">desc</span><span class="p">.</span><span class="n">bInterfaceClass</span><span class="p">);</span>

		<span class="n">retval</span> <span class="o">=</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
		<span class="k">goto</span> <span class="n">err</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* allocate memory for our device state and initialize it */</span>
	<span class="n">dev</span> <span class="o">=</span> <span class="n">kzalloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="o">*</span><span class="n">dev</span><span class="p">),</span> <span class="n">GFP_KERNEL</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">em28xx_err</span><span class="p">(</span><span class="n">DRIVER_NAME</span> <span class="s">&quot;: out of memory!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">retval</span> <span class="o">=</span> <span class="o">-</span><span class="n">ENOMEM</span><span class="p">;</span>
		<span class="k">goto</span> <span class="n">err</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* compute alternate max packet sizes */</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">alt_max_pkt_size</span> <span class="o">=</span> <span class="n">kmalloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">alt_max_pkt_size</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span>
					<span class="n">interface</span><span class="o">-&gt;</span><span class="n">num_altsetting</span><span class="p">,</span> <span class="n">GFP_KERNEL</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">alt_max_pkt_size</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">em28xx_errdev</span><span class="p">(</span><span class="s">&quot;out of memory!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">kfree</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
		<span class="n">retval</span> <span class="o">=</span> <span class="o">-</span><span class="n">ENOMEM</span><span class="p">;</span>
		<span class="k">goto</span> <span class="n">err</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* Get endpoints */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">interface</span><span class="o">-&gt;</span><span class="n">num_altsetting</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="kt">int</span> <span class="n">ep</span><span class="p">;</span>

		<span class="k">for</span> <span class="p">(</span><span class="n">ep</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">ep</span> <span class="o">&lt;</span> <span class="n">interface</span><span class="o">-&gt;</span><span class="n">altsetting</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">desc</span><span class="p">.</span><span class="n">bNumEndpoints</span><span class="p">;</span> <span class="n">ep</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">usb_endpoint_descriptor</span> <span class="o">*</span><span class="n">e</span><span class="p">;</span>
			<span class="kt">int</span> <span class="n">sizedescr</span><span class="p">,</span> <span class="n">size</span><span class="p">;</span>

			<span class="n">e</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">interface</span><span class="o">-&gt;</span><span class="n">altsetting</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">endpoint</span><span class="p">[</span><span class="n">ep</span><span class="p">].</span><span class="n">desc</span><span class="p">;</span>

			<span class="n">sizedescr</span> <span class="o">=</span> <span class="n">le16_to_cpu</span><span class="p">(</span><span class="n">e</span><span class="o">-&gt;</span><span class="n">wMaxPacketSize</span><span class="p">);</span>
			<span class="n">size</span> <span class="o">=</span> <span class="n">sizedescr</span> <span class="o">&amp;</span> <span class="mh">0x7ff</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">udev</span><span class="o">-&gt;</span><span class="n">speed</span> <span class="o">==</span> <span class="n">USB_SPEED_HIGH</span><span class="p">)</span>
				<span class="n">size</span> <span class="o">=</span> <span class="n">size</span> <span class="o">*</span> <span class="n">hb_mult</span><span class="p">(</span><span class="n">sizedescr</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">usb_endpoint_xfer_isoc</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
			    <span class="n">usb_endpoint_dir_in</span><span class="p">(</span><span class="n">e</span><span class="p">))</span> <span class="p">{</span>
				<span class="k">switch</span> <span class="p">(</span><span class="n">e</span><span class="o">-&gt;</span><span class="n">bEndpointAddress</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">case</span> <span class="n">EM28XX_EP_AUDIO</span>:
					<span class="n">has_audio</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
					<span class="k">break</span><span class="p">;</span>
				<span class="k">case</span> <span class="n">EM28XX_EP_ANALOG</span>:
					<span class="n">has_video</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
					<span class="n">dev</span><span class="o">-&gt;</span><span class="n">alt_max_pkt_size</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>
					<span class="k">break</span><span class="p">;</span>
				<span class="k">case</span> <span class="n">EM28XX_EP_DIGITAL</span>:
					<span class="n">has_dvb</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">size</span> <span class="o">&gt;</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">dvb_max_pkt_size</span><span class="p">)</span> <span class="p">{</span>
						<span class="n">dev</span><span class="o">-&gt;</span><span class="n">dvb_max_pkt_size</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>
						<span class="n">dev</span><span class="o">-&gt;</span><span class="n">dvb_alt</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
					<span class="p">}</span>
					<span class="k">break</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">has_audio</span> <span class="o">||</span> <span class="n">has_video</span> <span class="o">||</span> <span class="n">has_dvb</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">retval</span> <span class="o">=</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
		<span class="k">goto</span> <span class="n">err_free</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">udev</span><span class="o">-&gt;</span><span class="n">speed</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">USB_SPEED_LOW</span>:
		<span class="n">speed</span> <span class="o">=</span> <span class="s">&quot;1.5&quot;</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">USB_SPEED_UNKNOWN</span>:
	<span class="k">case</span> <span class="n">USB_SPEED_FULL</span>:
		<span class="n">speed</span> <span class="o">=</span> <span class="s">&quot;12&quot;</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">USB_SPEED_HIGH</span>:
		<span class="n">speed</span> <span class="o">=</span> <span class="s">&quot;480&quot;</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">speed</span> <span class="o">=</span> <span class="s">&quot;unknown&quot;</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="n">DRIVER_NAME</span>
		<span class="s">&quot;: New device %s %s @ %s Mbps &quot;</span>
		<span class="s">&quot;(%04x:%04x, interface %d, class %d)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">udev</span><span class="o">-&gt;</span><span class="n">manufacturer</span> <span class="o">?</span> <span class="n">udev</span><span class="o">-&gt;</span><span class="n">manufacturer</span> <span class="o">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
		<span class="n">udev</span><span class="o">-&gt;</span><span class="n">product</span> <span class="o">?</span> <span class="n">udev</span><span class="o">-&gt;</span><span class="n">product</span> <span class="o">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
		<span class="n">speed</span><span class="p">,</span>
		<span class="n">le16_to_cpu</span><span class="p">(</span><span class="n">udev</span><span class="o">-&gt;</span><span class="n">descriptor</span><span class="p">.</span><span class="n">idVendor</span><span class="p">),</span>
		<span class="n">le16_to_cpu</span><span class="p">(</span><span class="n">udev</span><span class="o">-&gt;</span><span class="n">descriptor</span><span class="p">.</span><span class="n">idProduct</span><span class="p">),</span>
		<span class="n">ifnum</span><span class="p">,</span>
		<span class="n">interface</span><span class="o">-&gt;</span><span class="n">altsetting</span><span class="o">-&gt;</span><span class="n">desc</span><span class="p">.</span><span class="n">bInterfaceNumber</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">has_audio</span><span class="p">)</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="n">DRIVER_NAME</span>
		       <span class="s">&quot;: Audio Vendor Class interface %i found</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		       <span class="n">ifnum</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">has_video</span><span class="p">)</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="n">DRIVER_NAME</span>
		       <span class="s">&quot;: Video interface %i found</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		       <span class="n">ifnum</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">has_dvb</span><span class="p">)</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="n">DRIVER_NAME</span>
		       <span class="s">&quot;: DVB interface %i found</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		       <span class="n">ifnum</span><span class="p">);</span>

	<span class="cm">/*</span>
<span class="cm">	 * Make sure we have 480 Mbps of bandwidth, otherwise things like</span>
<span class="cm">	 * video stream wouldn&#39;t likely work, since 12 Mbps is generally</span>
<span class="cm">	 * not enough even for most Digital TV streams.</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">udev</span><span class="o">-&gt;</span><span class="n">speed</span> <span class="o">!=</span> <span class="n">USB_SPEED_HIGH</span> <span class="o">&amp;&amp;</span> <span class="n">disable_usb_speed_check</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">DRIVER_NAME</span> <span class="s">&quot;: Device initialization failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">DRIVER_NAME</span> <span class="s">&quot;: Device must be connected to a high-speed&quot;</span>
		       <span class="s">&quot; USB 2.0 port.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">retval</span> <span class="o">=</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
		<span class="k">goto</span> <span class="n">err_free</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">snprintf</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">),</span> <span class="s">&quot;em28xx #%d&quot;</span><span class="p">,</span> <span class="n">nr</span><span class="p">);</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">devno</span> <span class="o">=</span> <span class="n">nr</span><span class="p">;</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span> <span class="o">=</span> <span class="n">id</span><span class="o">-&gt;</span><span class="n">driver_info</span><span class="p">;</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">alt</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">is_audio_only</span> <span class="o">=</span> <span class="n">has_audio</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="n">has_video</span> <span class="o">||</span> <span class="n">has_dvb</span><span class="p">);</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">has_alsa_audio</span> <span class="o">=</span> <span class="n">has_audio</span><span class="p">;</span>
	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">audio_ifnum</span> <span class="o">=</span> <span class="n">ifnum</span><span class="p">;</span>

	<span class="cm">/* Checks if audio is provided by some interface */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">udev</span><span class="o">-&gt;</span><span class="n">config</span><span class="o">-&gt;</span><span class="n">desc</span><span class="p">.</span><span class="n">bNumInterfaces</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">usb_interface</span> <span class="o">*</span><span class="n">uif</span> <span class="o">=</span> <span class="n">udev</span><span class="o">-&gt;</span><span class="n">config</span><span class="o">-&gt;</span><span class="n">interface</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">uif</span><span class="o">-&gt;</span><span class="n">altsetting</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">desc</span><span class="p">.</span><span class="n">bInterfaceClass</span> <span class="o">==</span> <span class="n">USB_CLASS_AUDIO</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">has_audio_class</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">dev</span><span class="o">-&gt;</span><span class="n">num_alt</span> <span class="o">=</span> <span class="n">interface</span><span class="o">-&gt;</span><span class="n">num_altsetting</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">card</span><span class="p">[</span><span class="n">nr</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">card</span><span class="p">[</span><span class="n">nr</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">em28xx_bcount</span><span class="p">))</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">model</span> <span class="o">=</span> <span class="n">card</span><span class="p">[</span><span class="n">nr</span><span class="p">];</span>

	<span class="cm">/* save our data pointer in this interface device */</span>
	<span class="n">usb_set_intfdata</span><span class="p">(</span><span class="n">interface</span><span class="p">,</span> <span class="n">dev</span><span class="p">);</span>

	<span class="cm">/* allocate device struct */</span>
	<span class="n">mutex_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">lock</span><span class="p">);</span>
	<span class="n">mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">lock</span><span class="p">);</span>
	<span class="n">retval</span> <span class="o">=</span> <span class="n">em28xx_init_dev</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">udev</span><span class="p">,</span> <span class="n">interface</span><span class="p">,</span> <span class="n">nr</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">retval</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">goto</span> <span class="n">unlock_and_free</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">has_dvb</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* pre-allocate DVB isoc transfer buffers */</span>
		<span class="n">retval</span> <span class="o">=</span> <span class="n">em28xx_alloc_isoc</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_DIGITAL_MODE</span><span class="p">,</span>
					   <span class="n">EM28XX_DVB_MAX_PACKETS</span><span class="p">,</span>
					   <span class="n">EM28XX_DVB_NUM_BUFS</span><span class="p">,</span>
					   <span class="n">dev</span><span class="o">-&gt;</span><span class="n">dvb_max_pkt_size</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">retval</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">goto</span> <span class="n">unlock_and_free</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">request_modules</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="cm">/* Should be the last thing to do, to avoid newer udev&#39;s to</span>
<span class="cm">	   open the device before fully initializing it</span>
<span class="cm">	 */</span>
	<span class="n">mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">lock</span><span class="p">);</span>

	<span class="cm">/*</span>
<span class="cm">	 * These extensions can be modules. If the modules are already</span>
<span class="cm">	 * loaded then we can initialise the device now, otherwise we</span>
<span class="cm">	 * will initialise it when the modules load instead.</span>
<span class="cm">	 */</span>
	<span class="n">em28xx_init_extension</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

<span class="nl">unlock_and_free:</span>
	<span class="n">mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">lock</span><span class="p">);</span>

<span class="nl">err_free:</span>
	<span class="n">kfree</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">alt_max_pkt_size</span><span class="p">);</span>
	<span class="n">kfree</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

<span class="nl">err:</span>
	<span class="n">clear_bit</span><span class="p">(</span><span class="n">nr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">em28xx_devused</span><span class="p">);</span>

<span class="nl">err_no_slot:</span>
	<span class="n">usb_put_dev</span><span class="p">(</span><span class="n">udev</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">retval</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * em28xx_usb_disconnect()</span>
<span class="cm"> * called when the device gets disconnected</span>
<span class="cm"> * video device will be unregistered on v4l2_close in case it is still open</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">em28xx_usb_disconnect</span><span class="p">(</span><span class="k">struct</span> <span class="n">usb_interface</span> <span class="o">*</span><span class="n">interface</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">em28xx</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>

	<span class="n">dev</span> <span class="o">=</span> <span class="n">usb_get_intfdata</span><span class="p">(</span><span class="n">interface</span><span class="p">);</span>
	<span class="n">usb_set_intfdata</span><span class="p">(</span><span class="n">interface</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">dev</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">is_audio_only</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">lock</span><span class="p">);</span>
		<span class="n">em28xx_close_extension</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
		<span class="n">mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">lock</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">em28xx_info</span><span class="p">(</span><span class="s">&quot;disconnecting %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">vdev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">);</span>

	<span class="n">flush_request_modules</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="cm">/* wait until all current v4l2 io is finished then deallocate</span>
<span class="cm">	   resources */</span>
	<span class="n">mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">lock</span><span class="p">);</span>

	<span class="n">v4l2_device_disconnect</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">users</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">em28xx_warn</span>
		    <span class="p">(</span><span class="s">&quot;device %s is open! Deregistration and memory &quot;</span>
		     <span class="s">&quot;deallocation are deferred on close.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		     <span class="n">video_device_node_name</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">vdev</span><span class="p">));</span>

		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">|=</span> <span class="n">DEV_MISCONFIGURED</span><span class="p">;</span>
		<span class="n">em28xx_uninit_isoc</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">mode</span><span class="p">);</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">|=</span> <span class="n">DEV_DISCONNECTED</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">|=</span> <span class="n">DEV_DISCONNECTED</span><span class="p">;</span>
		<span class="n">em28xx_release_resources</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="cm">/* free DVB isoc buffers */</span>
	<span class="n">em28xx_uninit_isoc</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EM28XX_DIGITAL_MODE</span><span class="p">);</span>

	<span class="n">mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">lock</span><span class="p">);</span>

	<span class="n">em28xx_close_extension</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">users</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">kfree</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">alt_max_pkt_size</span><span class="p">);</span>
		<span class="n">kfree</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">usb_driver</span> <span class="n">em28xx_usb_driver</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;em28xx&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">probe</span> <span class="o">=</span> <span class="n">em28xx_usb_probe</span><span class="p">,</span>
	<span class="p">.</span><span class="n">disconnect</span> <span class="o">=</span> <span class="n">em28xx_usb_disconnect</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id_table</span> <span class="o">=</span> <span class="n">em28xx_id_table</span><span class="p">,</span>
<span class="p">};</span>

<span class="n">module_usb_driver</span><span class="p">(</span><span class="n">em28xx_usb_driver</span><span class="p">);</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
