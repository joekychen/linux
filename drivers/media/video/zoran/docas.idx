f | zr36050.c | s | 26K | 744 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1276704305 |  | fix typos concerning "initiali[zs]e"  Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | zr36016.c | s | 13K | 437 | Hans Verkuil | hverkuil@xs4all.nl | 1238427779 |  | V4L/DVB (10730): v4l-dvb: cleanup obsolete references to v4l1 headers.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> [mchehab@redhat.com: fix compilation of tea575x-tuner.c] Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | Makefile | g | 233B |  | Hans Verkuil | hverkuil@xs4all.nl | 1223811544 |  | V4L/DVB (9129): zoran: move zoran sources into a zoran subdirectory  Prevent the zoran driver sources from cluttering the video directory. This changeset only moves the drivers and it does not fix any of the checkpatch warnings/errors to keep the changeset clean.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | zr36016.h | s | 3.2K | 100 | Hans Verkuil | hverkuil@xs4all.nl | 1223811544 |  | V4L/DVB (9129): zoran: move zoran sources into a zoran subdirectory  Prevent the zoran driver sources from cluttering the video directory. This changeset only moves the drivers and it does not fix any of the checkpatch warnings/errors to keep the changeset clean.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | zoran_driver.c | s | 79K | 2627 | Xi Wang | xi.wang@gmail.com | 1334837485 |  | [media] zoran: fix integer overflow in setup_window()  `clipcount' is from userspace and thus needs validation.  Otherwise, a large `clipcount' could overflow the vmalloc() size, leading to out-of-bounds access.  || setup_window() || zoran_s_fmt_vid_overlay() || __video_do_ioctl() || video_ioctl2()  Use 2048 as the maximum `clipcount'.  Also change the corresponding parameter type to `unsigned int'.  Signed-off-by: Xi Wang <xi.wang@gmail.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | zoran.h | s | 11K | 327 | Mauro Carvalho Chehab | mchehab@redhat.com | 1311799992 |  | [media] Stop using linux/version.h on most video drivers  All the modified drivers didn't have any version increment since Jan, 1 2011. Several of them didn't have any version increment for a long time, even having new features and important bug fixes happening.  As we're now filling the QUERYCAP version with the current Kernel Release, we don't need to maintain a per-driver version control anymore. So, let's just use the default.  In order to preserve the Kernel module version history, a KERNEL_VERSION() macro were added to all modified drivers, and the extraver number were incremented.  I opted to preserve the per-driver version control to a few pwc, pvrusb2, s2255, s5p-fimc and sh_vou.  A few drivers are still using the legacy way to handle ioctl's. So, we can't do such change on them, otherwise, they'll break. Those are: uvc, et61x251 and sn9c102.  The rationale is that the per-driver version control seems to be actively maintained on those.  Yet, I think that the better for them would be to just use the default version numbering, instead of doing that by themselves.  While here, removed a few uneeded include linux/version.h  Acked-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | zoran_procfs.c | s | 5.2K | 198 | Hans Verkuil | hverkuil@xs4all.nl | 1238427779 |  | V4L/DVB (10730): v4l-dvb: cleanup obsolete references to v4l1 headers.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> [mchehab@redhat.com: fix compilation of tea575x-tuner.c] Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | zr36050.h | s | 5.8K | 159 | Hans Verkuil | hverkuil@xs4all.nl | 1223811544 |  | V4L/DVB (9129): zoran: move zoran sources into a zoran subdirectory  Prevent the zoran driver sources from cluttering the video directory. This changeset only moves the drivers and it does not fix any of the checkpatch warnings/errors to keep the changeset clean.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | zoran_card.c | s | 39K | 1356 | Mauro Carvalho Chehab | mchehab@redhat.com | 1311799992 |  | [media] Stop using linux/version.h on most video drivers  All the modified drivers didn't have any version increment since Jan, 1 2011. Several of them didn't have any version increment for a long time, even having new features and important bug fixes happening.  As we're now filling the QUERYCAP version with the current Kernel Release, we don't need to maintain a per-driver version control anymore. So, let's just use the default.  In order to preserve the Kernel module version history, a KERNEL_VERSION() macro were added to all modified drivers, and the extraver number were incremented.  I opted to preserve the per-driver version control to a few pwc, pvrusb2, s2255, s5p-fimc and sh_vou.  A few drivers are still using the legacy way to handle ioctl's. So, we can't do such change on them, otherwise, they'll break. Those are: uvc, et61x251 and sn9c102.  The rationale is that the per-driver version control seems to be actively maintained on those.  Yet, I think that the better for them would be to just use the default version numbering, instead of doing that by themselves.  While here, removed a few uneeded include linux/version.h  Acked-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | zr36060.c | s | 29K | 826 | Rusty Russell | rusty@rustcorp.com.au | 1326409340 |  | module_param: make bool parameters really bool (drivers & misc)  module_param(bool) used to counter-intuitively take an int.  In fddd5201 (mid-2009) we allowed bool or int/unsigned int using a messy trick.  It's time to remove the int/unsigned int option.  For this version it'll simply give a warning, but it'll break next kernel version.  Acked-by: Mauro Carvalho Chehab <mchehab@redhat.com> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | zoran_device.h | s | 3.0K | 82 | Hans Verkuil | hverkuil@xs4all.nl | 1238427801 |  | V4L/DVB (11022): zoran/bt819: use new notify functionality.  Bt819 needs the parent driver to drive a GPIO pin low and high in order to reset its fifo. Use the new notify callback for this.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | Kconfig | g | 2.5K |  | Hans Verkuil | hverkuil@xs4all.nl | 1238427777 |  | V4L/DVB (10714): zoran et al: convert zoran i2c modules to V4L2.  The zoran i2c modules were still using V4L1 internally. Replace this with V4L2. Also deleted saa7111.c and saa7114.c, we use saa7115.c instead.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> [mchehab@redhat.com: fix v4l2_ctrl_query_fill_std merge conflict] Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | videocodec.h | s | 12K | 289 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | zoran_card.h | s | 1.7K | 46 | Hans Verkuil | hverkuil@xs4all.nl | 1238427776 |  | V4L/DVB (10711): zoran: fix TRY_FMT support  Actually try to turn the format into something usable rather than just rejecting it if it isn't perfect.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | zr36060.h | s | 6.0K | 189 | Hans Verkuil | hverkuil@xs4all.nl | 1223811544 |  | V4L/DVB (9129): zoran: move zoran sources into a zoran subdirectory  Prevent the zoran driver sources from cluttering the video directory. This changeset only moves the drivers and it does not fix any of the checkpatch warnings/errors to keep the changeset clean.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | zoran_procfs.h | s | 1.3K | 33 | Hans Verkuil | hverkuil@xs4all.nl | 1223811544 |  | V4L/DVB (9129): zoran: move zoran sources into a zoran subdirectory  Prevent the zoran driver sources from cluttering the video directory. This changeset only moves the drivers and it does not fix any of the checkpatch warnings/errors to keep the changeset clean.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | zoran_device.c | s | 42K | 1415 | Hans Verkuil | hans.verkuil@cisco.com | 1337017778 |  | [media] v4l: fix compiler warnings  media_build/v4l/adv7343.c: In function 'adv7343_setstd': media_build/v4l/adv7343.c:133:6: warning: variable 'output_idx' set but not used [-Wunused-but-set-variable] media_build/v4l/tvp5150.c: In function 'tvp5150_mbus_fmt': media_build/v4l/tvp5150.c:833:14: warning: variable 'std' set but not used [-Wunused-but-set-variable] media_build/v4l/tvp7002.c: In function 'tvp7002_query_dv_preset': media_build/v4l/tvp7002.c:673:18: warning: variable 'device' set but not used [-Wunused-but-set-variable] media_build/v4l/c-qcam.c: In function 'qc_capture': media_build/v4l/c-qcam.c:381:33: warning: variable 'bitsperxfer' set but not used [-Wunused-but-set-variable] media_build/v4l/pms.c: In function 'pms_s_std': media_build/v4l/pms.c:738:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/pms.c: In function 'init_mediavision': media_build/v4l/pms.c:959:6: warning: variable 'id' set but not used [-Wunused-but-set-variable] media_build/v4l/cx25821-alsa.c: In function 'cx25821_irq': media_build/v4l/cx25821-alsa.c:294:6: warning: variable 'audint_count' set but not used [-Wunused-but-set-variable] media_build/v4l/zr364xx.c: In function 'zr364xx_fillbuff': media_build/v4l/zr364xx.c:510:25: warning: variable 'frm' set but not used [-Wunused-but-set-variable] media_build/v4l/s2255drv.c: In function 's2255_fillbuff': media_build/v4l/s2255drv.c:637:23: warning: variable 'frm' set but not used [-Wunused-but-set-variable] media_build/v4l/s2255drv.c: In function 'vidioc_s_fmt_vid_cap': media_build/v4l/s2255drv.c:990:6: warning: variable 'norm' set but not used [-Wunused-but-set-variable] media_build/v4l/tm6000-stds.c: In function 'tm6000_set_audio_std': media_build/v4l/tm6000-stds.c:341:10: warning: variable 'nicam_flag' set but not used [-Wunused-but-set-variable] media_build/v4l/tm6000-video.c: In function 'get_next_buf': media_build/v4l/tm6000-video.c:172:8: warning: variable 'outp' set but not used [-Wunused-but-set-variable] media_build/v4l/tm6000-video.c: In function 'copy_streams': media_build/v4l/tm6000-video.c:214:36: warning: variable 'c' set but not used [-Wunused-but-set-variable] media_build/v4l/tm6000-input.c: In function 'tm6000_ir_urb_received': media_build/v4l/tm6000-input.c:171:6: warning: variable 'rc' set but not used [-Wunused-but-set-variable] media_build/v4l/usbvision-core.c: In function 'usbvision_decompress': media_build/v4l/usbvision-core.c:604:23: warning: variable 'max_pos' set but not used [-Wunused-but-set-variable] media_build/v4l/usbvision-core.c: In function 'usbvision_parse_compress': media_build/v4l/usbvision-core.c:705:39: warning: variable 'rc' set but not used [-Wunused-but-set-variable] media_build/v4l/usbvision-core.c:705:22: warning: variable 'bytes_per_pixel' set but not used [-Wunused-but-set-variable] media_build/v4l/zoran_device.c: In function 'write_overlay_mask': media_build/v4l/zoran_device.c:545:6: warning: variable 'reg' set but not used [-Wunused-but-set-variable] media_build/v4l/go7007-v4l2.c: In function 'go7007_streamoff': media_build/v4l/go7007-v4l2.c:79:6: warning: variable 'retval' set but not used [-Wunused-but-set-variable]  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | videocodec.c | s | 9.1K | 353 | Julia Lawall | julia@diku.dk | 1280772244 |  | V4L/DVB: drivers/media/video/zoran: Use kmemdup  Use kmemdup when some other buffer is immediately copied into the allocated region.  A simplified version of the semantic patch that makes this change is as follows: (http://coccinelle.lip6.fr/)  // <smpl> @@ expression from,to,size,flag; statement S; @@  -  to = \(kmalloc\||kzalloc\)(size,flag); +  to = kmemdup(from,size,flag);    if (to==NULL |||| ...) S -  memcpy(to, from, size); // </smpl>  Signed-off-by: Julia Lawall <julia@diku.dk> Signed-off-by: Douglas Schilling Landgraf <dougsland@redhat.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | zr36057.h | s | 6.7K | 133 | Hans Verkuil | hverkuil@xs4all.nl | 1223811544 |  | V4L/DVB (9129): zoran: move zoran sources into a zoran subdirectory  Prevent the zoran driver sources from cluttering the video directory. This changeset only moves the drivers and it does not fix any of the checkpatch warnings/errors to keep the changeset clean.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
