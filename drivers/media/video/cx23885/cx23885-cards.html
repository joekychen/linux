<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › media › video › cx23885 › cx23885-cards.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>cx23885-cards.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  Driver for the Conexant CX23885 PCIe bridge</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright (c) 2006 Steven Toth &lt;stoth@linuxtv.org&gt;</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *  it under the terms of the GNU General Public License as published by</span>
<span class="cm"> *  the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> *  (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is distributed in the hope that it will be useful,</span>
<span class="cm"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> *</span>
<span class="cm"> *  GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> *  You should have received a copy of the GNU General Public License</span>
<span class="cm"> *  along with this program; if not, write to the Free Software</span>
<span class="cm"> *  Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/pci.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;media/cx25840.h&gt;</span>
<span class="cp">#include &lt;linux/firmware.h&gt;</span>
<span class="cp">#include &lt;misc/altera.h&gt;</span>

<span class="cp">#include &quot;cx23885.h&quot;</span>
<span class="cp">#include &quot;tuner-xc2028.h&quot;</span>
<span class="cp">#include &quot;netup-eeprom.h&quot;</span>
<span class="cp">#include &quot;netup-init.h&quot;</span>
<span class="cp">#include &quot;altera-ci.h&quot;</span>
<span class="cp">#include &quot;xc4000.h&quot;</span>
<span class="cp">#include &quot;xc5000.h&quot;</span>
<span class="cp">#include &quot;cx23888-ir.h&quot;</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">netup_card_rev</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">netup_card_rev</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="mo">0644</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">netup_card_rev</span><span class="p">,</span>
		<span class="s">&quot;NetUP Dual DVB-T/C CI card revision&quot;</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">enable_885_ir</span><span class="p">;</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">enable_885_ir</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="mo">0644</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">enable_885_ir</span><span class="p">,</span>
		 <span class="s">&quot;Enable integrated IR controller for supported</span><span class="se">\n</span><span class="s">&quot;</span>
		 <span class="s">&quot;</span><span class="se">\t\t</span><span class="s">    CX2388[57] boards that are wired for it:</span><span class="se">\n</span><span class="s">&quot;</span>
		 <span class="s">&quot;</span><span class="se">\t\t\t</span><span class="s">HVR-1250 (reported safe)</span><span class="se">\n</span><span class="s">&quot;</span>
		 <span class="s">&quot;</span><span class="se">\t\t\t</span><span class="s">TeVii S470 (reported unsafe)</span><span class="se">\n</span><span class="s">&quot;</span>
		 <span class="s">&quot;</span><span class="se">\t\t</span><span class="s">    This can cause an interrupt storm with some cards.</span><span class="se">\n</span><span class="s">&quot;</span>
		 <span class="s">&quot;</span><span class="se">\t\t</span><span class="s">    Default: 0 [Disabled]&quot;</span><span class="p">);</span>

<span class="cm">/* ------------------------------------------------------------------ */</span>
<span class="cm">/* board config info                                                  */</span>

<span class="k">struct</span> <span class="n">cx23885_board</span> <span class="n">cx23885_boards</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_UNKNOWN</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;UNKNOWN/GENERIC&quot;</span><span class="p">,</span>
		<span class="cm">/* Ensure safe default for unknown boards */</span>
		<span class="p">.</span><span class="n">clk_freq</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE4</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_HAUPPAUGE_HVR1800lp</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinTV-HVR1800lp&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mh">0xff00</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_DEBUG</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mh">0xff01</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mh">0xff02</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mh">0xff02</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_HAUPPAUGE_HVR1800</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinTV-HVR1800&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">porta</span>		<span class="o">=</span> <span class="n">CX23885_ANALOG_VIDEO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_ENCODER</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_PHILIPS_TDA8290</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="mh">0x42</span><span class="p">,</span> <span class="cm">/* 0x84 &gt;&gt; 1 */</span>
		<span class="p">.</span><span class="n">tuner_bus</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span>	<span class="n">CX25840_VIN7_CH3</span> <span class="o">|</span>
					<span class="n">CX25840_VIN5_CH2</span> <span class="o">|</span>
					<span class="n">CX25840_VIN2_CH1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>   <span class="o">=</span> <span class="n">CX25840_AUDIO8</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span>	<span class="n">CX25840_VIN7_CH3</span> <span class="o">|</span>
					<span class="n">CX25840_VIN4_CH2</span> <span class="o">|</span>
					<span class="n">CX25840_VIN6_CH1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>   <span class="o">=</span> <span class="n">CX25840_AUDIO7</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span>	<span class="n">CX25840_VIN7_CH3</span> <span class="o">|</span>
					<span class="n">CX25840_VIN4_CH2</span> <span class="o">|</span>
					<span class="n">CX25840_VIN8_CH1</span> <span class="o">|</span>
					<span class="n">CX25840_SVIDEO_ON</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>   <span class="o">=</span> <span class="n">CX25840_AUDIO7</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_HAUPPAUGE_HVR1250</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinTV-HVR1250&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mh">0xff00</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_DEBUG</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mh">0xff01</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mh">0xff02</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mh">0xff02</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_DVICO_FUSIONHDTV_5_EXP</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;DViCO FusionHDTV5 Express&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500Q</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinTV-HVR1500Q&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinTV-HVR1500&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">porta</span>		<span class="o">=</span> <span class="n">CX23885_ANALOG_VIDEO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="mh">0x61</span><span class="p">,</span> <span class="cm">/* 0xc2 &gt;&gt; 1 */</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span>	<span class="n">CX25840_VIN7_CH3</span> <span class="o">|</span>
					<span class="n">CX25840_VIN5_CH2</span> <span class="o">|</span>
					<span class="n">CX25840_VIN2_CH1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span>	<span class="n">CX25840_VIN7_CH3</span> <span class="o">|</span>
					<span class="n">CX25840_VIN4_CH2</span> <span class="o">|</span>
					<span class="n">CX25840_VIN6_CH1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span>	<span class="n">CX25840_VIN7_CH3</span> <span class="o">|</span>
					<span class="n">CX25840_VIN4_CH2</span> <span class="o">|</span>
					<span class="n">CX25840_VIN8_CH1</span> <span class="o">|</span>
					<span class="n">CX25840_SVIDEO_ON</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_HAUPPAUGE_HVR1200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinTV-HVR1200&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_HAUPPAUGE_HVR1700</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinTV-HVR1700&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_HAUPPAUGE_HVR1400</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinTV-HVR1400&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_DVICO_FUSIONHDTV_7_DUAL_EXP</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;DViCO FusionHDTV7 Dual Express&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_DVICO_FUSIONHDTV_DVB_T_DUAL_EXP</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;DViCO FusionHDTV DVB-T Dual Express&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXDVR3200_H</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Leadtek Winfast PxDVR3200 H&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXDVR3200_H_XC4000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Leadtek Winfast PxDVR3200 H XC4000&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">porta</span>		<span class="o">=</span> <span class="n">CX23885_ANALOG_VIDEO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_XC4000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="mh">0x61</span><span class="p">,</span>
		<span class="p">.</span><span class="n">radio_type</span>	<span class="o">=</span> <span class="n">UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">radio_addr</span>	<span class="o">=</span> <span class="n">ADDR_UNSET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>		<span class="o">=</span> <span class="p">{{</span>
			<span class="p">.</span><span class="n">type</span>	<span class="o">=</span> <span class="n">CX23885_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>	<span class="o">=</span> <span class="n">CX25840_VIN2_CH1</span> <span class="o">|</span>
				  <span class="n">CX25840_VIN5_CH2</span> <span class="o">|</span>
				  <span class="n">CX25840_NONE0_CH3</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>	<span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>	<span class="o">=</span> <span class="n">CX25840_COMPOSITE1</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>	<span class="o">=</span> <span class="n">CX23885_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>	<span class="o">=</span> <span class="n">CX25840_SVIDEO_LUMA3</span> <span class="o">|</span>
				  <span class="n">CX25840_SVIDEO_CHROMA4</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>	<span class="o">=</span> <span class="n">CX23885_VMUX_COMPONENT</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>	<span class="o">=</span> <span class="n">CX25840_VIN7_CH1</span> <span class="o">|</span>
				  <span class="n">CX25840_VIN6_CH2</span> <span class="o">|</span>
				  <span class="n">CX25840_VIN8_CH3</span> <span class="o">|</span>
				  <span class="n">CX25840_COMPONENT_ON</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_COMPRO_VIDEOMATE_E650F</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Compro VideoMate E650F&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_TBS_6920</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;TurboSight TBS 6920&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_TEVII_S470</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;TeVii S470&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_DVBWORLD_2005</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;DVBWorld DVB-S2 2005&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_NETUP_DUAL_DVBS2_CI</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ci_type</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;NetUP Dual DVB-S2 CI&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_HAUPPAUGE_HVR1270</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinTV-HVR1270&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_HAUPPAUGE_HVR1275</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinTV-HVR1275&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_HAUPPAUGE_HVR1255</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinTV-HVR1255&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_HAUPPAUGE_HVR1210</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinTV-HVR1210&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_MYGICA_X8506</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Mygica X8506 DMB-TH&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">TUNER_XC5000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span> <span class="o">=</span> <span class="mh">0x61</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_bus</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">porta</span>		<span class="o">=</span> <span class="n">CX23885_ANALOG_VIDEO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>		<span class="o">=</span> <span class="p">{</span>
			<span class="p">{</span>
				<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_TELEVISION</span><span class="p">,</span>
				<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPOSITE2</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="p">{</span>
				<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE1</span><span class="p">,</span>
				<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPOSITE8</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="p">{</span>
				<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_SVIDEO</span><span class="p">,</span>
				<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_SVIDEO_LUMA3</span> <span class="o">|</span>
						<span class="n">CX25840_SVIDEO_CHROMA4</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="p">{</span>
				<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPONENT</span><span class="p">,</span>
				<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPONENT_ON</span> <span class="o">|</span>
					<span class="n">CX25840_VIN1_CH1</span> <span class="o">|</span>
					<span class="n">CX25840_VIN6_CH2</span> <span class="o">|</span>
					<span class="n">CX25840_VIN7_CH3</span><span class="p">,</span>
			<span class="p">},</span>
		<span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_MAGICPRO_PROHDTVE2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Magic-Pro ProHDTV Extreme 2&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">TUNER_XC5000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span> <span class="o">=</span> <span class="mh">0x61</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_bus</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">porta</span>		<span class="o">=</span> <span class="n">CX23885_ANALOG_VIDEO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>		<span class="o">=</span> <span class="p">{</span>
			<span class="p">{</span>
				<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_TELEVISION</span><span class="p">,</span>
				<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPOSITE2</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="p">{</span>
				<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE1</span><span class="p">,</span>
				<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPOSITE8</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="p">{</span>
				<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_SVIDEO</span><span class="p">,</span>
				<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_SVIDEO_LUMA3</span> <span class="o">|</span>
						<span class="n">CX25840_SVIDEO_CHROMA4</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="p">{</span>
				<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPONENT</span><span class="p">,</span>
				<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPONENT_ON</span> <span class="o">|</span>
					<span class="n">CX25840_VIN1_CH1</span> <span class="o">|</span>
					<span class="n">CX25840_VIN6_CH2</span> <span class="o">|</span>
					<span class="n">CX25840_VIN7_CH3</span><span class="p">,</span>
			<span class="p">},</span>
		<span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_HAUPPAUGE_HVR1850</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinTV-HVR1850&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">porta</span>		<span class="o">=</span> <span class="n">CX23885_ANALOG_VIDEO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_ENCODER</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_ABSENT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="mh">0x42</span><span class="p">,</span> <span class="cm">/* 0x84 &gt;&gt; 1 */</span>
		<span class="p">.</span><span class="n">force_bff</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span>	<span class="n">CX25840_VIN7_CH3</span> <span class="o">|</span>
					<span class="n">CX25840_VIN5_CH2</span> <span class="o">|</span>
					<span class="n">CX25840_VIN2_CH1</span> <span class="o">|</span>
					<span class="n">CX25840_DIF_ON</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>   <span class="o">=</span> <span class="n">CX25840_AUDIO8</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span>	<span class="n">CX25840_VIN7_CH3</span> <span class="o">|</span>
					<span class="n">CX25840_VIN4_CH2</span> <span class="o">|</span>
					<span class="n">CX25840_VIN6_CH1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>   <span class="o">=</span> <span class="n">CX25840_AUDIO7</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span>	<span class="n">CX25840_VIN7_CH3</span> <span class="o">|</span>
					<span class="n">CX25840_VIN4_CH2</span> <span class="o">|</span>
					<span class="n">CX25840_VIN8_CH1</span> <span class="o">|</span>
					<span class="n">CX25840_SVIDEO_ON</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>   <span class="o">=</span> <span class="n">CX25840_AUDIO7</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_COMPRO_VIDEOMATE_E800</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Compro VideoMate E800&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_HAUPPAUGE_HVR1290</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Hauppauge WinTV-HVR1290&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_MYGICA_X8558PRO</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Mygica X8558 PRO DMB-TH&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXTV1200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;LEADTEK WinFast PxTV1200&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">porta</span>          <span class="o">=</span> <span class="n">CX23885_ANALOG_VIDEO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>     <span class="o">=</span> <span class="n">TUNER_XC2028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>     <span class="o">=</span> <span class="mh">0x61</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_bus</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_VIN2_CH1</span> <span class="o">|</span>
				  <span class="n">CX25840_VIN5_CH2</span> <span class="o">|</span>
				  <span class="n">CX25840_NONE0_CH3</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPOSITE1</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_SVIDEO_LUMA3</span> <span class="o">|</span>
				  <span class="n">CX25840_SVIDEO_CHROMA4</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPONENT</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_VIN7_CH1</span> <span class="o">|</span>
				  <span class="n">CX25840_VIN6_CH2</span> <span class="o">|</span>
				  <span class="n">CX25840_VIN8_CH3</span> <span class="o">|</span>
				  <span class="n">CX25840_COMPONENT_ON</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_GOTVIEW_X5_3D_HYBRID</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;GoTView X5 3D Hybrid&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_XC5000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="mh">0x64</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_bus</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">porta</span>		<span class="o">=</span> <span class="n">CX23885_ANALOG_VIDEO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_TELEVISION</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_VIN2_CH1</span> <span class="o">|</span>
				  <span class="n">CX25840_VIN5_CH2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>	<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE1</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_SVIDEO</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_SVIDEO_LUMA3</span> <span class="o">|</span>
				  <span class="n">CX25840_SVIDEO_CHROMA4</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_NETUP_DUAL_DVB_T_C_CI_RF</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ci_type</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;NetUP Dual DVB-T/C-CI RF&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">porta</span>		<span class="o">=</span> <span class="n">CX23885_ANALOG_VIDEO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_fds_portb</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_fds_portc</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span>	<span class="o">=</span> <span class="n">TUNER_XC5000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span>	<span class="o">=</span> <span class="mh">0x64</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{</span> <span class="p">{</span>
				<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_TELEVISION</span><span class="p">,</span>
				<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPOSITE1</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_MPX885</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;MPX-885&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">porta</span>		<span class="o">=</span> <span class="n">CX23885_ANALOG_VIDEO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>          <span class="o">=</span> <span class="p">{{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPOSITE1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>   <span class="o">=</span> <span class="n">CX25840_AUDIO6</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPOSITE2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>   <span class="o">=</span> <span class="n">CX25840_AUDIO6</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPOSITE3</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>   <span class="o">=</span> <span class="n">CX25840_AUDIO7</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE4</span><span class="p">,</span>
			<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPOSITE4</span><span class="p">,</span>
			<span class="p">.</span><span class="n">amux</span>   <span class="o">=</span> <span class="n">CX25840_AUDIO7</span><span class="p">,</span>
			<span class="p">.</span><span class="n">gpio0</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">}</span> <span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_MYGICA_X8507</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Mygica X8507&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_type</span> <span class="o">=</span> <span class="n">TUNER_XC5000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_addr</span> <span class="o">=</span> <span class="mh">0x61</span><span class="p">,</span>
		<span class="p">.</span><span class="n">tuner_bus</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">porta</span>		<span class="o">=</span> <span class="n">CX23885_ANALOG_VIDEO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">input</span>		<span class="o">=</span> <span class="p">{</span>
			<span class="p">{</span>
				<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_TELEVISION</span><span class="p">,</span>
				<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPOSITE2</span><span class="p">,</span>
				<span class="p">.</span><span class="n">amux</span>   <span class="o">=</span> <span class="n">CX25840_AUDIO8</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="p">{</span>
				<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPOSITE1</span><span class="p">,</span>
				<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPOSITE8</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="p">{</span>
				<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_SVIDEO</span><span class="p">,</span>
				<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_SVIDEO_LUMA3</span> <span class="o">|</span>
						<span class="n">CX25840_SVIDEO_CHROMA4</span><span class="p">,</span>
			<span class="p">},</span>
			<span class="p">{</span>
				<span class="p">.</span><span class="n">type</span>   <span class="o">=</span> <span class="n">CX23885_VMUX_COMPONENT</span><span class="p">,</span>
				<span class="p">.</span><span class="n">vmux</span>   <span class="o">=</span> <span class="n">CX25840_COMPONENT_ON</span> <span class="o">|</span>
					<span class="n">CX25840_VIN1_CH1</span> <span class="o">|</span>
					<span class="n">CX25840_VIN6_CH2</span> <span class="o">|</span>
					<span class="n">CX25840_VIN7_CH3</span><span class="p">,</span>
			<span class="p">},</span>
		<span class="p">},</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_TERRATEC_CINERGY_T_PCIE_DUAL</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;TerraTec Cinergy T PCIe Dual&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portc</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">CX23885_BOARD_TEVII_S471</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;TeVii S471&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">portb</span>		<span class="o">=</span> <span class="n">CX23885_MPEG_DVB</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>
<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cx23885_bcount</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cx23885_boards</span><span class="p">);</span>

<span class="cm">/* ------------------------------------------------------------------ */</span>
<span class="cm">/* PCI subsystem IDs                                                  */</span>

<span class="k">struct</span> <span class="n">cx23885_subid</span> <span class="n">cx23885_subids</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x3400</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_UNKNOWN</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x7600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1800lp</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x7800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1800</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x7801</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1800</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x7809</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1800</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x7911</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1250</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x18ac</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0xd500</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_DVICO_FUSIONHDTV_5_EXP</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x7790</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500Q</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x7797</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500Q</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x7710</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x7717</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x71d1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1200</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x71d3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1200</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x8101</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1700</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x8010</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1400</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x18ac</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0xd618</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_DVICO_FUSIONHDTV_7_DUAL_EXP</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x18ac</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0xdb78</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_DVICO_FUSIONHDTV_DVB_T_DUAL_EXP</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x107d</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x6681</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXDVR3200_H</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x107d</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x6f39</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>	   <span class="o">=</span> <span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXDVR3200_H_XC4000</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x185b</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0xe800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_COMPRO_VIDEOMATE_E650F</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x6920</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x8888</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_TBS_6920</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0xd470</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x9022</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_TEVII_S470</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0001</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x2005</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_DVBWORLD_2005</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x1b55</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x2a2c</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_NETUP_DUAL_DVBS2_CI</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x2211</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1270</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x2215</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1275</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x221d</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1275</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x2251</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1255</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x2259</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1255</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x2291</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1210</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x2295</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1210</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x2299</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1210</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x229d</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1210</span><span class="p">,</span> <span class="cm">/* HVR1215 */</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x22f0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1210</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x22f1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1255</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x22f2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1275</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x22f3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1210</span><span class="p">,</span> <span class="cm">/* HVR1215 */</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x22f4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1210</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x22f5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1210</span><span class="p">,</span> <span class="cm">/* HVR1215 */</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x14f1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x8651</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_MYGICA_X8506</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x14f1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x8657</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_MAGICPRO_PROHDTVE2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x8541</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1850</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x1858</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0xe800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_COMPRO_VIDEOMATE_E800</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x0070</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x8551</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1290</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x14f1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x8578</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_MYGICA_X8558PRO</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x107d</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x6f22</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXTV1200</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x5654</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x2390</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_GOTVIEW_X5_3D_HYBRID</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x1b55</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0xe2e4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_NETUP_DUAL_DVB_T_C_CI_RF</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x14f1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x8502</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_MYGICA_X8507</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0x153b</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x117e</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_TERRATEC_CINERGY_T_PCIE_DUAL</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">subvendor</span> <span class="o">=</span> <span class="mh">0xd471</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span> <span class="o">=</span> <span class="mh">0x9022</span><span class="p">,</span>
		<span class="p">.</span><span class="n">card</span>      <span class="o">=</span> <span class="n">CX23885_BOARD_TEVII_S471</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cx23885_idcount</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cx23885_subids</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">cx23885_card_list</span><span class="p">(</span><span class="k">struct</span> <span class="n">cx23885_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">pci</span><span class="o">-&gt;</span><span class="n">subsystem_vendor</span> <span class="o">&amp;&amp;</span>
	    <span class="mi">0</span> <span class="o">==</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">pci</span><span class="o">-&gt;</span><span class="n">subsystem_device</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span>
			<span class="s">&quot;%s: Board has no valid PCIe Subsystem ID and can&#39;t</span><span class="se">\n</span><span class="s">&quot;</span>
		       <span class="s">&quot;%s: be autodetected. Pass card=&lt;n&gt; insmod option</span><span class="se">\n</span><span class="s">&quot;</span>
		       <span class="s">&quot;%s: to workaround that. Redirect complaints to the</span><span class="se">\n</span><span class="s">&quot;</span>
		       <span class="s">&quot;%s: vendor of the TV card.  Best regards,</span><span class="se">\n</span><span class="s">&quot;</span>
		       <span class="s">&quot;%s:         -- tux</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		       <span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span>
			<span class="s">&quot;%s: Your board isn&#39;t known (yet) to the driver.</span><span class="se">\n</span><span class="s">&quot;</span>
		       <span class="s">&quot;%s: Try to pick one of the existing card configs via</span><span class="se">\n</span><span class="s">&quot;</span>
		       <span class="s">&quot;%s: card=&lt;n&gt; insmod option.  Updating to the latest</span><span class="se">\n</span><span class="s">&quot;</span>
		       <span class="s">&quot;%s: version might help as well.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		       <span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;%s: Here is a list of valid choices for the card=&lt;n&gt; insmod option:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
	       <span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">cx23885_bcount</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;%s:    card=%d -&gt; %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		       <span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">cx23885_boards</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">name</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">hauppauge_eeprom</span><span class="p">(</span><span class="k">struct</span> <span class="n">cx23885_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">eeprom_data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">tveeprom</span> <span class="n">tv</span><span class="p">;</span>

	<span class="n">tveeprom_hauppauge_analog</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_bus</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i2c_client</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tv</span><span class="p">,</span>
		<span class="n">eeprom_data</span><span class="p">);</span>

	<span class="cm">/* Make sure we support the board model */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">tv</span><span class="p">.</span><span class="n">model</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mi">22001</span>:
		<span class="cm">/* WinTV-HVR1270 (PCIe, Retail, half height)</span>
<span class="cm">		 * ATSC/QAM and basic analog, IR Blast */</span>
	<span class="k">case</span> <span class="mi">22009</span>:
		<span class="cm">/* WinTV-HVR1210 (PCIe, Retail, half height)</span>
<span class="cm">		 * DVB-T and basic analog, IR Blast */</span>
	<span class="k">case</span> <span class="mi">22011</span>:
		<span class="cm">/* WinTV-HVR1270 (PCIe, Retail, half height)</span>
<span class="cm">		 * ATSC/QAM and basic analog, IR Recv */</span>
	<span class="k">case</span> <span class="mi">22019</span>:
		<span class="cm">/* WinTV-HVR1210 (PCIe, Retail, half height)</span>
<span class="cm">		 * DVB-T and basic analog, IR Recv */</span>
	<span class="k">case</span> <span class="mi">22021</span>:
		<span class="cm">/* WinTV-HVR1275 (PCIe, Retail, half height)</span>
<span class="cm">		 * ATSC/QAM and basic analog, IR Recv */</span>
	<span class="k">case</span> <span class="mi">22029</span>:
		<span class="cm">/* WinTV-HVR1210 (PCIe, Retail, half height)</span>
<span class="cm">		 * DVB-T and basic analog, IR Recv */</span>
	<span class="k">case</span> <span class="mi">22101</span>:
		<span class="cm">/* WinTV-HVR1270 (PCIe, Retail, full height)</span>
<span class="cm">		 * ATSC/QAM and basic analog, IR Blast */</span>
	<span class="k">case</span> <span class="mi">22109</span>:
		<span class="cm">/* WinTV-HVR1210 (PCIe, Retail, full height)</span>
<span class="cm">		 * DVB-T and basic analog, IR Blast */</span>
	<span class="k">case</span> <span class="mi">22111</span>:
		<span class="cm">/* WinTV-HVR1270 (PCIe, Retail, full height)</span>
<span class="cm">		 * ATSC/QAM and basic analog, IR Recv */</span>
	<span class="k">case</span> <span class="mi">22119</span>:
		<span class="cm">/* WinTV-HVR1210 (PCIe, Retail, full height)</span>
<span class="cm">		 * DVB-T and basic analog, IR Recv */</span>
	<span class="k">case</span> <span class="mi">22121</span>:
		<span class="cm">/* WinTV-HVR1275 (PCIe, Retail, full height)</span>
<span class="cm">		 * ATSC/QAM and basic analog, IR Recv */</span>
	<span class="k">case</span> <span class="mi">22129</span>:
		<span class="cm">/* WinTV-HVR1210 (PCIe, Retail, full height)</span>
<span class="cm">		 * DVB-T and basic analog, IR Recv */</span>
	<span class="k">case</span> <span class="mi">71009</span>:
		<span class="cm">/* WinTV-HVR1200 (PCIe, Retail, full height)</span>
<span class="cm">		 * DVB-T and basic analog */</span>
	<span class="k">case</span> <span class="mi">71359</span>:
		<span class="cm">/* WinTV-HVR1200 (PCIe, OEM, half height)</span>
<span class="cm">		 * DVB-T and basic analog */</span>
	<span class="k">case</span> <span class="mi">71439</span>:
		<span class="cm">/* WinTV-HVR1200 (PCIe, OEM, half height)</span>
<span class="cm">		 * DVB-T and basic analog */</span>
	<span class="k">case</span> <span class="mi">71449</span>:
		<span class="cm">/* WinTV-HVR1200 (PCIe, OEM, full height)</span>
<span class="cm">		 * DVB-T and basic analog */</span>
	<span class="k">case</span> <span class="mi">71939</span>:
		<span class="cm">/* WinTV-HVR1200 (PCIe, OEM, half height)</span>
<span class="cm">		 * DVB-T and basic analog */</span>
	<span class="k">case</span> <span class="mi">71949</span>:
		<span class="cm">/* WinTV-HVR1200 (PCIe, OEM, full height)</span>
<span class="cm">		 * DVB-T and basic analog */</span>
	<span class="k">case</span> <span class="mi">71959</span>:
		<span class="cm">/* WinTV-HVR1200 (PCIe, OEM, full height)</span>
<span class="cm">		 * DVB-T and basic analog */</span>
	<span class="k">case</span> <span class="mi">71979</span>:
		<span class="cm">/* WinTV-HVR1200 (PCIe, OEM, half height)</span>
<span class="cm">		 * DVB-T and basic analog */</span>
	<span class="k">case</span> <span class="mi">71999</span>:
		<span class="cm">/* WinTV-HVR1200 (PCIe, OEM, full height)</span>
<span class="cm">		 * DVB-T and basic analog */</span>
	<span class="k">case</span> <span class="mi">76601</span>:
		<span class="cm">/* WinTV-HVR1800lp (PCIe, Retail, No IR, Dual</span>
<span class="cm">			channel ATSC and MPEG2 HW Encoder */</span>
	<span class="k">case</span> <span class="mi">77001</span>:
		<span class="cm">/* WinTV-HVR1500 (Express Card, OEM, No IR, ATSC</span>
<span class="cm">			and Basic analog */</span>
	<span class="k">case</span> <span class="mi">77011</span>:
		<span class="cm">/* WinTV-HVR1500 (Express Card, Retail, No IR, ATSC</span>
<span class="cm">			and Basic analog */</span>
	<span class="k">case</span> <span class="mi">77041</span>:
		<span class="cm">/* WinTV-HVR1500Q (Express Card, OEM, No IR, ATSC/QAM</span>
<span class="cm">			and Basic analog */</span>
	<span class="k">case</span> <span class="mi">77051</span>:
		<span class="cm">/* WinTV-HVR1500Q (Express Card, Retail, No IR, ATSC/QAM</span>
<span class="cm">			and Basic analog */</span>
	<span class="k">case</span> <span class="mi">78011</span>:
		<span class="cm">/* WinTV-HVR1800 (PCIe, Retail, 3.5mm in, IR, No FM,</span>
<span class="cm">			Dual channel ATSC and MPEG2 HW Encoder */</span>
	<span class="k">case</span> <span class="mi">78501</span>:
		<span class="cm">/* WinTV-HVR1800 (PCIe, OEM, RCA in, No IR, FM,</span>
<span class="cm">			Dual channel ATSC and MPEG2 HW Encoder */</span>
	<span class="k">case</span> <span class="mi">78521</span>:
		<span class="cm">/* WinTV-HVR1800 (PCIe, OEM, RCA in, No IR, FM,</span>
<span class="cm">			Dual channel ATSC and MPEG2 HW Encoder */</span>
	<span class="k">case</span> <span class="mi">78531</span>:
		<span class="cm">/* WinTV-HVR1800 (PCIe, OEM, RCA in, No IR, No FM,</span>
<span class="cm">			Dual channel ATSC and MPEG2 HW Encoder */</span>
	<span class="k">case</span> <span class="mi">78631</span>:
		<span class="cm">/* WinTV-HVR1800 (PCIe, OEM, No IR, No FM,</span>
<span class="cm">			Dual channel ATSC and MPEG2 HW Encoder */</span>
	<span class="k">case</span> <span class="mi">79001</span>:
		<span class="cm">/* WinTV-HVR1250 (PCIe, Retail, IR, full height,</span>
<span class="cm">			ATSC and Basic analog */</span>
	<span class="k">case</span> <span class="mi">79101</span>:
		<span class="cm">/* WinTV-HVR1250 (PCIe, Retail, IR, half height,</span>
<span class="cm">			ATSC and Basic analog */</span>
	<span class="k">case</span> <span class="mi">79501</span>:
		<span class="cm">/* WinTV-HVR1250 (PCIe, No IR, half height,</span>
<span class="cm">			ATSC [at least] and Basic analog) */</span>
	<span class="k">case</span> <span class="mi">79561</span>:
		<span class="cm">/* WinTV-HVR1250 (PCIe, OEM, No IR, half height,</span>
<span class="cm">			ATSC and Basic analog */</span>
	<span class="k">case</span> <span class="mi">79571</span>:
		<span class="cm">/* WinTV-HVR1250 (PCIe, OEM, No IR, full height,</span>
<span class="cm">		 ATSC and Basic analog */</span>
	<span class="k">case</span> <span class="mi">79671</span>:
		<span class="cm">/* WinTV-HVR1250 (PCIe, OEM, No IR, half height,</span>
<span class="cm">			ATSC and Basic analog */</span>
	<span class="k">case</span> <span class="mi">80019</span>:
		<span class="cm">/* WinTV-HVR1400 (Express Card, Retail, IR,</span>
<span class="cm">		 * DVB-T and Basic analog */</span>
	<span class="k">case</span> <span class="mi">81509</span>:
		<span class="cm">/* WinTV-HVR1700 (PCIe, OEM, No IR, half height)</span>
<span class="cm">		 * DVB-T and MPEG2 HW Encoder */</span>
	<span class="k">case</span> <span class="mi">81519</span>:
		<span class="cm">/* WinTV-HVR1700 (PCIe, OEM, No IR, full height)</span>
<span class="cm">		 * DVB-T and MPEG2 HW Encoder */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">85021</span>:
		<span class="cm">/* WinTV-HVR1850 (PCIe, Retail, 3.5mm in, IR, FM,</span>
<span class="cm">			Dual channel ATSC and MPEG2 HW Encoder */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">85721</span>:
		<span class="cm">/* WinTV-HVR1290 (PCIe, OEM, RCA in, IR,</span>
<span class="cm">			Dual channel ATSC and Basic analog */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_WARNING</span> <span class="s">&quot;%s: warning: &quot;</span>
			<span class="s">&quot;unknown hauppauge model #%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">tv</span><span class="p">.</span><span class="n">model</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;%s: hauppauge eeprom: model=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">tv</span><span class="p">.</span><span class="n">model</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">cx23885_tuner_callback</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">component</span><span class="p">,</span> <span class="kt">int</span> <span class="n">command</span><span class="p">,</span> <span class="kt">int</span> <span class="n">arg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">cx23885_tsport</span> <span class="o">*</span><span class="n">port</span> <span class="o">=</span> <span class="n">priv</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cx23885_dev</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="n">port</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">bitmask</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">command</span> <span class="o">==</span> <span class="n">XC2028_RESET_CLK</span><span class="p">)</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">command</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_ERR</span> <span class="s">&quot;%s(): Unknown command 0x%x.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">__func__</span><span class="p">,</span> <span class="n">command</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1400</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500Q</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXDVR3200_H</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXDVR3200_H_XC4000</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_COMPRO_VIDEOMATE_E650F</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_COMPRO_VIDEOMATE_E800</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXTV1200</span>:
		<span class="cm">/* Tuner Reset Command */</span>
		<span class="n">bitmask</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_DVICO_FUSIONHDTV_7_DUAL_EXP</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_DVICO_FUSIONHDTV_DVB_T_DUAL_EXP</span>:
		<span class="cm">/* Two identical tuners on two different i2c buses,</span>
<span class="cm">		 * we need to reset the correct gpio. */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">port</span><span class="o">-&gt;</span><span class="n">nr</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
			<span class="n">bitmask</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">port</span><span class="o">-&gt;</span><span class="n">nr</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
			<span class="n">bitmask</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_GOTVIEW_X5_3D_HYBRID</span>:
		<span class="cm">/* Tuner Reset Command */</span>
		<span class="n">bitmask</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_NETUP_DUAL_DVB_T_C_CI_RF</span>:
		<span class="n">altera_ci_tuner_reset</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">port</span><span class="o">-&gt;</span><span class="n">nr</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">bitmask</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* Drive the tuner into reset and back out */</span>
		<span class="n">cx_clear</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="n">bitmask</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="n">bitmask</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">cx23885_gpio_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">cx23885_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1250</span>:
		<span class="cm">/* GPIO-0 cx24227 demodulator reset */</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00010001</span><span class="p">);</span> <span class="cm">/* Bring the part out of reset */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500</span>:
		<span class="cm">/* GPIO-0 cx24227 demodulator */</span>
		<span class="cm">/* GPIO-2 xc3028 tuner */</span>

		<span class="cm">/* Put the parts into reset */</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00050000</span><span class="p">);</span>
		<span class="n">cx_clear</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00000005</span><span class="p">);</span>
		<span class="n">msleep</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* Bring the parts out of reset */</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00050005</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500Q</span>:
		<span class="cm">/* GPIO-0 cx24227 demodulator reset */</span>
		<span class="cm">/* GPIO-2 xc5000 tuner reset */</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00050005</span><span class="p">);</span> <span class="cm">/* Bring the part out of reset */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1800</span>:
		<span class="cm">/* GPIO-0 656_CLK */</span>
		<span class="cm">/* GPIO-1 656_D0 */</span>
		<span class="cm">/* GPIO-2 8295A Reset */</span>
		<span class="cm">/* GPIO-3-10 cx23417 data0-7 */</span>
		<span class="cm">/* GPIO-11-14 cx23417 addr0-3 */</span>
		<span class="cm">/* GPIO-15-18 cx23417 READY, CS, RD, WR */</span>
		<span class="cm">/* GPIO-19 IR_RX */</span>

		<span class="cm">/* CX23417 GPIO&#39;s */</span>
		<span class="cm">/* EIO15 Zilog Reset */</span>
		<span class="cm">/* EIO14 S5H1409/CX24227 Reset */</span>
		<span class="n">mc417_gpio_enable</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_15</span> <span class="o">|</span> <span class="n">GPIO_14</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

		<span class="cm">/* Put the demod into reset and protect the eeprom */</span>
		<span class="n">mc417_gpio_clear</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_15</span> <span class="o">|</span> <span class="n">GPIO_14</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>

		<span class="cm">/* Bring the demod and blaster out of reset */</span>
		<span class="n">mc417_gpio_set</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_15</span> <span class="o">|</span> <span class="n">GPIO_14</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>

		<span class="cm">/* Force the TDA8295A into reset and back */</span>
		<span class="n">cx23885_gpio_enable</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
		<span class="n">cx23885_gpio_set</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_2</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx23885_gpio_clear</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_2</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx23885_gpio_set</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_2</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1200</span>:
		<span class="cm">/* GPIO-0 tda10048 demodulator reset */</span>
		<span class="cm">/* GPIO-2 tda18271 tuner reset */</span>

		<span class="cm">/* Put the parts into reset and back */</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00050000</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx_clear</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00000005</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00050005</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1700</span>:
		<span class="cm">/* GPIO-0 TDA10048 demodulator reset */</span>
		<span class="cm">/* GPIO-2 TDA8295A Reset */</span>
		<span class="cm">/* GPIO-3-10 cx23417 data0-7 */</span>
		<span class="cm">/* GPIO-11-14 cx23417 addr0-3 */</span>
		<span class="cm">/* GPIO-15-18 cx23417 READY, CS, RD, WR */</span>

		<span class="cm">/* The following GPIO&#39;s are on the interna AVCore (cx25840) */</span>
		<span class="cm">/* GPIO-19 IR_RX */</span>
		<span class="cm">/* GPIO-20 IR_TX 416/DVBT Select */</span>
		<span class="cm">/* GPIO-21 IIS DAT */</span>
		<span class="cm">/* GPIO-22 IIS WCLK */</span>
		<span class="cm">/* GPIO-23 IIS BCLK */</span>

		<span class="cm">/* Put the parts into reset and back */</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00050000</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx_clear</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00000005</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00050005</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1400</span>:
		<span class="cm">/* GPIO-0  Dibcom7000p demodulator reset */</span>
		<span class="cm">/* GPIO-2  xc3028L tuner reset */</span>
		<span class="cm">/* GPIO-13 LED */</span>

		<span class="cm">/* Put the parts into reset and back */</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00050000</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx_clear</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00000005</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00050005</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_DVICO_FUSIONHDTV_7_DUAL_EXP</span>:
		<span class="cm">/* GPIO-0 xc5000 tuner reset i2c bus 0 */</span>
		<span class="cm">/* GPIO-1 s5h1409 demod reset i2c bus 0 */</span>
		<span class="cm">/* GPIO-2 xc5000 tuner reset i2c bus 1 */</span>
		<span class="cm">/* GPIO-3 s5h1409 demod reset i2c bus 0 */</span>

		<span class="cm">/* Put the parts into reset and back */</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x000f0000</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx_clear</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x0000000f</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x000f000f</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_DVICO_FUSIONHDTV_DVB_T_DUAL_EXP</span>:
		<span class="cm">/* GPIO-0 portb xc3028 reset */</span>
		<span class="cm">/* GPIO-1 portb zl10353 reset */</span>
		<span class="cm">/* GPIO-2 portc xc3028 reset */</span>
		<span class="cm">/* GPIO-3 portc zl10353 reset */</span>

		<span class="cm">/* Put the parts into reset and back */</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x000f0000</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx_clear</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x0000000f</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x000f000f</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXDVR3200_H</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXDVR3200_H_XC4000</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_COMPRO_VIDEOMATE_E650F</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_COMPRO_VIDEOMATE_E800</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXTV1200</span>:
		<span class="cm">/* GPIO-2  xc3028 tuner reset */</span>

		<span class="cm">/* The following GPIO&#39;s are on the internal AVCore (cx25840) */</span>
		<span class="cm">/* GPIO-?  zl10353 demod reset */</span>

		<span class="cm">/* Put the parts into reset and back */</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00040000</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx_clear</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00000004</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00040004</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_TBS_6920</span>:
		<span class="n">cx_write</span><span class="p">(</span><span class="n">MC417_CTL</span><span class="p">,</span> <span class="mh">0x00000036</span><span class="p">);</span>
		<span class="n">cx_write</span><span class="p">(</span><span class="n">MC417_OEN</span><span class="p">,</span> <span class="mh">0x00001000</span><span class="p">);</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">MC417_RWD</span><span class="p">,</span> <span class="mh">0x00000002</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
		<span class="n">cx_clear</span><span class="p">(</span><span class="n">MC417_RWD</span><span class="p">,</span> <span class="mh">0x00000800</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">MC417_RWD</span><span class="p">,</span> <span class="mh">0x00000800</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_NETUP_DUAL_DVBS2_CI</span>:
		<span class="cm">/* GPIO-0 INTA from CiMax1</span>
<span class="cm">		   GPIO-1 INTB from CiMax2</span>
<span class="cm">		   GPIO-2 reset chips</span>
<span class="cm">		   GPIO-3 to GPIO-10 data/addr for CA</span>
<span class="cm">		   GPIO-11 ~CS0 to CiMax1</span>
<span class="cm">		   GPIO-12 ~CS1 to CiMax2</span>
<span class="cm">		   GPIO-13 ADL0 load LSB addr</span>
<span class="cm">		   GPIO-14 ADL1 load MSB addr</span>
<span class="cm">		   GPIO-15 ~RDY from CiMax</span>
<span class="cm">		   GPIO-17 ~RD to CiMax</span>
<span class="cm">		   GPIO-18 ~WR to CiMax</span>
<span class="cm">		 */</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00040000</span><span class="p">);</span> <span class="cm">/* GPIO as out */</span>
		<span class="cm">/* GPIO1 and GPIO2 as INTA and INTB from CiMaxes, reset low */</span>
		<span class="n">cx_clear</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00030004</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span><span class="cm">/* reset delay */</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00040004</span><span class="p">);</span> <span class="cm">/* GPIO as out, reset high */</span>
		<span class="n">cx_write</span><span class="p">(</span><span class="n">MC417_CTL</span><span class="p">,</span> <span class="mh">0x00000037</span><span class="p">);</span><span class="cm">/* enable GPIO3-18 pins */</span>
		<span class="cm">/* GPIO-15 IN as ~ACK, rest as OUT */</span>
		<span class="n">cx_write</span><span class="p">(</span><span class="n">MC417_OEN</span><span class="p">,</span> <span class="mh">0x00001000</span><span class="p">);</span>
		<span class="cm">/* ~RD, ~WR high; ADL0, ADL1 low; ~CS0, ~CS1 high */</span>
		<span class="n">cx_write</span><span class="p">(</span><span class="n">MC417_RWD</span><span class="p">,</span> <span class="mh">0x0000c300</span><span class="p">);</span>
		<span class="cm">/* enable irq */</span>
		<span class="n">cx_write</span><span class="p">(</span><span class="n">GPIO_ISM</span><span class="p">,</span> <span class="mh">0x00000000</span><span class="p">);</span><span class="cm">/* INTERRUPTS active low*/</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1270</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1275</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1255</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1210</span>:
		<span class="cm">/* GPIO-5 RF Control: 0 = RF1 Terrestrial, 1 = RF2 Cable */</span>
		<span class="cm">/* GPIO-6 I2C Gate which can isolate the demod from the bus */</span>
		<span class="cm">/* GPIO-9 Demod reset */</span>

		<span class="cm">/* Put the parts into reset and back */</span>
		<span class="n">cx23885_gpio_enable</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_9</span> <span class="o">|</span> <span class="n">GPIO_6</span> <span class="o">|</span> <span class="n">GPIO_5</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
		<span class="n">cx23885_gpio_set</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_9</span> <span class="o">|</span> <span class="n">GPIO_6</span> <span class="o">|</span> <span class="n">GPIO_5</span><span class="p">);</span>
		<span class="n">cx23885_gpio_clear</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_9</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
		<span class="n">cx23885_gpio_set</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_9</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_MYGICA_X8506</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_MAGICPRO_PROHDTVE2</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_MYGICA_X8507</span>:
		<span class="cm">/* GPIO-0 (0)Analog / (1)Digital TV */</span>
		<span class="cm">/* GPIO-1 reset XC5000 */</span>
		<span class="cm">/* GPIO-2 reset LGS8GL5 / LGS8G75 */</span>
		<span class="n">cx23885_gpio_enable</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_0</span> <span class="o">|</span> <span class="n">GPIO_1</span> <span class="o">|</span> <span class="n">GPIO_2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
		<span class="n">cx23885_gpio_clear</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_1</span> <span class="o">|</span> <span class="n">GPIO_2</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
		<span class="n">cx23885_gpio_set</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_0</span> <span class="o">|</span> <span class="n">GPIO_1</span> <span class="o">|</span> <span class="n">GPIO_2</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_MYGICA_X8558PRO</span>:
		<span class="cm">/* GPIO-0 reset first ATBM8830 */</span>
		<span class="cm">/* GPIO-1 reset second ATBM8830 */</span>
		<span class="n">cx23885_gpio_enable</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_0</span> <span class="o">|</span> <span class="n">GPIO_1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
		<span class="n">cx23885_gpio_clear</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_0</span> <span class="o">|</span> <span class="n">GPIO_1</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
		<span class="n">cx23885_gpio_set</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_0</span> <span class="o">|</span> <span class="n">GPIO_1</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1850</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1290</span>:
		<span class="cm">/* GPIO-0 656_CLK */</span>
		<span class="cm">/* GPIO-1 656_D0 */</span>
		<span class="cm">/* GPIO-2 Wake# */</span>
		<span class="cm">/* GPIO-3-10 cx23417 data0-7 */</span>
		<span class="cm">/* GPIO-11-14 cx23417 addr0-3 */</span>
		<span class="cm">/* GPIO-15-18 cx23417 READY, CS, RD, WR */</span>
		<span class="cm">/* GPIO-19 IR_RX */</span>
		<span class="cm">/* GPIO-20 C_IR_TX */</span>
		<span class="cm">/* GPIO-21 I2S DAT */</span>
		<span class="cm">/* GPIO-22 I2S WCLK */</span>
		<span class="cm">/* GPIO-23 I2S BCLK */</span>
		<span class="cm">/* ALT GPIO: EXP GPIO LATCH */</span>

		<span class="cm">/* CX23417 GPIO&#39;s */</span>
		<span class="cm">/* GPIO-14 S5H1411/CX24228 Reset */</span>
		<span class="cm">/* GPIO-13 EEPROM write protect */</span>
		<span class="n">mc417_gpio_enable</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_14</span> <span class="o">|</span> <span class="n">GPIO_13</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

		<span class="cm">/* Put the demod into reset and protect the eeprom */</span>
		<span class="n">mc417_gpio_clear</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_14</span> <span class="o">|</span> <span class="n">GPIO_13</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>

		<span class="cm">/* Bring the demod out of reset */</span>
		<span class="n">mc417_gpio_set</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPIO_14</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>

		<span class="cm">/* CX24228 GPIO */</span>
		<span class="cm">/* Connected to IF / Mux */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_GOTVIEW_X5_3D_HYBRID</span>:
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00010001</span><span class="p">);</span> <span class="cm">/* Bring the part out of reset */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_NETUP_DUAL_DVB_T_C_CI_RF</span>:
		<span class="cm">/* GPIO-0 ~INT in</span>
<span class="cm">		   GPIO-1 TMS out</span>
<span class="cm">		   GPIO-2 ~reset chips out</span>
<span class="cm">		   GPIO-3 to GPIO-10 data/addr for CA in/out</span>
<span class="cm">		   GPIO-11 ~CS out</span>
<span class="cm">		   GPIO-12 ADDR out</span>
<span class="cm">		   GPIO-13 ~WR out</span>
<span class="cm">		   GPIO-14 ~RD out</span>
<span class="cm">		   GPIO-15 ~RDY in</span>
<span class="cm">		   GPIO-16 TCK out</span>
<span class="cm">		   GPIO-17 TDO in</span>
<span class="cm">		   GPIO-18 TDI out</span>
<span class="cm">		 */</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00060000</span><span class="p">);</span> <span class="cm">/* GPIO-1,2 as out */</span>
		<span class="cm">/* GPIO-0 as INT, reset &amp; TMS low */</span>
		<span class="n">cx_clear</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00010006</span><span class="p">);</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span><span class="cm">/* reset delay */</span>
		<span class="n">cx_set</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="mh">0x00000004</span><span class="p">);</span> <span class="cm">/* reset high */</span>
		<span class="n">cx_write</span><span class="p">(</span><span class="n">MC417_CTL</span><span class="p">,</span> <span class="mh">0x00000037</span><span class="p">);</span><span class="cm">/* enable GPIO-3..18 pins */</span>
		<span class="cm">/* GPIO-17 is TDO in, GPIO-15 is ~RDY in, rest is out */</span>
		<span class="n">cx_write</span><span class="p">(</span><span class="n">MC417_OEN</span><span class="p">,</span> <span class="mh">0x00005000</span><span class="p">);</span>
		<span class="cm">/* ~RD, ~WR high; ADDR low; ~CS high */</span>
		<span class="n">cx_write</span><span class="p">(</span><span class="n">MC417_RWD</span><span class="p">,</span> <span class="mh">0x00000d00</span><span class="p">);</span>
		<span class="cm">/* enable irq */</span>
		<span class="n">cx_write</span><span class="p">(</span><span class="n">GPIO_ISM</span><span class="p">,</span> <span class="mh">0x00000000</span><span class="p">);</span><span class="cm">/* INTERRUPTS active low*/</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">cx23885_ir_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">cx23885_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">static</span> <span class="k">struct</span> <span class="n">v4l2_subdev_io_pin_config</span> <span class="n">ir_rxtx_pin_cfg</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">{</span>
			<span class="p">.</span><span class="n">flags</span>	  <span class="o">=</span> <span class="n">V4L2_SUBDEV_IO_PIN_INPUT</span><span class="p">,</span>
			<span class="p">.</span><span class="n">pin</span>	  <span class="o">=</span> <span class="n">CX23885_PIN_IR_RX_GPIO19</span><span class="p">,</span>
			<span class="p">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">CX23885_PAD_IR_RX</span><span class="p">,</span>
			<span class="p">.</span><span class="n">value</span>	  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">strength</span> <span class="o">=</span> <span class="n">CX25840_PIN_DRIVE_MEDIUM</span><span class="p">,</span>
		<span class="p">},</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">flags</span>	  <span class="o">=</span> <span class="n">V4L2_SUBDEV_IO_PIN_OUTPUT</span><span class="p">,</span>
			<span class="p">.</span><span class="n">pin</span>	  <span class="o">=</span> <span class="n">CX23885_PIN_IR_TX_GPIO20</span><span class="p">,</span>
			<span class="p">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">CX23885_PAD_IR_TX</span><span class="p">,</span>
			<span class="p">.</span><span class="n">value</span>	  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">strength</span> <span class="o">=</span> <span class="n">CX25840_PIN_DRIVE_MEDIUM</span><span class="p">,</span>
		<span class="p">}</span>
	<span class="p">};</span>
	<span class="k">const</span> <span class="kt">size_t</span> <span class="n">ir_rxtx_pin_cfg_count</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ir_rxtx_pin_cfg</span><span class="p">);</span>

	<span class="k">static</span> <span class="k">struct</span> <span class="n">v4l2_subdev_io_pin_config</span> <span class="n">ir_rx_pin_cfg</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">{</span>
			<span class="p">.</span><span class="n">flags</span>	  <span class="o">=</span> <span class="n">V4L2_SUBDEV_IO_PIN_INPUT</span><span class="p">,</span>
			<span class="p">.</span><span class="n">pin</span>	  <span class="o">=</span> <span class="n">CX23885_PIN_IR_RX_GPIO19</span><span class="p">,</span>
			<span class="p">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">CX23885_PAD_IR_RX</span><span class="p">,</span>
			<span class="p">.</span><span class="n">value</span>	  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="p">.</span><span class="n">strength</span> <span class="o">=</span> <span class="n">CX25840_PIN_DRIVE_MEDIUM</span><span class="p">,</span>
		<span class="p">}</span>
	<span class="p">};</span>
	<span class="k">const</span> <span class="kt">size_t</span> <span class="n">ir_rx_pin_cfg_count</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ir_rx_pin_cfg</span><span class="p">);</span>

	<span class="k">struct</span> <span class="n">v4l2_subdev_ir_parameters</span> <span class="n">params</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500Q</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1800</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1200</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1400</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1275</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1255</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1210</span>:
		<span class="cm">/* FIXME: Implement me */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1270</span>:
		<span class="n">ret</span> <span class="o">=</span> <span class="n">cx23888_ir_probe</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">ret</span><span class="p">)</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_ir</span> <span class="o">=</span> <span class="n">cx23885_find_hw</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">CX23885_HW_888_IR</span><span class="p">);</span>
		<span class="n">v4l2_subdev_call</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_cx25840</span><span class="p">,</span> <span class="n">core</span><span class="p">,</span> <span class="n">s_io_pin_config</span><span class="p">,</span>
				 <span class="n">ir_rx_pin_cfg_count</span><span class="p">,</span> <span class="n">ir_rx_pin_cfg</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1850</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1290</span>:
		<span class="n">ret</span> <span class="o">=</span> <span class="n">cx23888_ir_probe</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">ret</span><span class="p">)</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_ir</span> <span class="o">=</span> <span class="n">cx23885_find_hw</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">CX23885_HW_888_IR</span><span class="p">);</span>
		<span class="n">v4l2_subdev_call</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_cx25840</span><span class="p">,</span> <span class="n">core</span><span class="p">,</span> <span class="n">s_io_pin_config</span><span class="p">,</span>
				 <span class="n">ir_rxtx_pin_cfg_count</span><span class="p">,</span> <span class="n">ir_rxtx_pin_cfg</span><span class="p">);</span>
		<span class="cm">/*</span>
<span class="cm">		 * For these boards we need to invert the Tx output via the</span>
<span class="cm">		 * IR controller to have the LED off while idle</span>
<span class="cm">		 */</span>
		<span class="n">v4l2_subdev_call</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_ir</span><span class="p">,</span> <span class="n">ir</span><span class="p">,</span> <span class="n">tx_g_parameters</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">params</span><span class="p">);</span>
		<span class="n">params</span><span class="p">.</span><span class="n">enable</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
		<span class="n">params</span><span class="p">.</span><span class="n">shutdown</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
		<span class="n">params</span><span class="p">.</span><span class="n">invert_level</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
		<span class="n">v4l2_subdev_call</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_ir</span><span class="p">,</span> <span class="n">ir</span><span class="p">,</span> <span class="n">tx_s_parameters</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">params</span><span class="p">);</span>
		<span class="n">params</span><span class="p">.</span><span class="n">shutdown</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
		<span class="n">v4l2_subdev_call</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_ir</span><span class="p">,</span> <span class="n">ir</span><span class="p">,</span> <span class="n">tx_s_parameters</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">params</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_TEVII_S470</span>:
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">enable_885_ir</span><span class="p">)</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_ir</span> <span class="o">=</span> <span class="n">cx23885_find_hw</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">CX23885_HW_AV_CORE</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_ir</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">v4l2_subdev_call</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_cx25840</span><span class="p">,</span> <span class="n">core</span><span class="p">,</span> <span class="n">s_io_pin_config</span><span class="p">,</span>
				 <span class="n">ir_rx_pin_cfg_count</span><span class="p">,</span> <span class="n">ir_rx_pin_cfg</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1250</span>:
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">enable_885_ir</span><span class="p">)</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_ir</span> <span class="o">=</span> <span class="n">cx23885_find_hw</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">CX23885_HW_AV_CORE</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_ir</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">v4l2_subdev_call</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_cx25840</span><span class="p">,</span> <span class="n">core</span><span class="p">,</span> <span class="n">s_io_pin_config</span><span class="p">,</span>
				 <span class="n">ir_rxtx_pin_cfg_count</span><span class="p">,</span> <span class="n">ir_rxtx_pin_cfg</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_DVICO_FUSIONHDTV_DVB_T_DUAL_EXP</span>:
		<span class="n">request_module</span><span class="p">(</span><span class="s">&quot;ir-kbd-i2c&quot;</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">cx23885_ir_fini</span><span class="p">(</span><span class="k">struct</span> <span class="n">cx23885_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1270</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1850</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1290</span>:
		<span class="n">cx23885_irq_remove</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">PCI_MSK_IR</span><span class="p">);</span>
		<span class="n">cx23888_ir_remove</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_ir</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_TEVII_S470</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1250</span>:
		<span class="n">cx23885_irq_remove</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">PCI_MSK_AV_CORE</span><span class="p">);</span>
		<span class="cm">/* sd_ir is a duplicate pointer to the AV Core, just clear it */</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_ir</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">netup_jtag_io</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">device</span><span class="p">,</span> <span class="kt">int</span> <span class="n">tms</span><span class="p">,</span> <span class="kt">int</span> <span class="n">tdi</span><span class="p">,</span> <span class="kt">int</span> <span class="n">read_tdo</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">data</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">tdo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cx23885_dev</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">cx23885_dev</span> <span class="o">*</span><span class="p">)</span><span class="n">device</span><span class="p">;</span>
	<span class="cm">/*TMS*/</span>
	<span class="n">data</span> <span class="o">=</span> <span class="p">((</span><span class="n">cx_read</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">))</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="mh">0x00000002</span><span class="p">));</span>
	<span class="n">data</span> <span class="o">|=</span> <span class="p">(</span><span class="n">tms</span> <span class="o">?</span> <span class="mh">0x00020002</span> <span class="o">:</span> <span class="mh">0x00020000</span><span class="p">);</span>
	<span class="n">cx_write</span><span class="p">(</span><span class="n">GP0_IO</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>

	<span class="cm">/*TDI*/</span>
	<span class="n">data</span> <span class="o">=</span> <span class="p">((</span><span class="n">cx_read</span><span class="p">(</span><span class="n">MC417_RWD</span><span class="p">))</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="mh">0x0000a000</span><span class="p">));</span>
	<span class="n">data</span> <span class="o">|=</span> <span class="p">(</span><span class="n">tdi</span> <span class="o">?</span> <span class="mh">0x00008000</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">cx_write</span><span class="p">(</span><span class="n">MC417_RWD</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">read_tdo</span><span class="p">)</span>
		<span class="n">tdo</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span> <span class="o">&amp;</span> <span class="mh">0x00004000</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span> <span class="cm">/*TDO*/</span>

	<span class="n">cx_write</span><span class="p">(</span><span class="n">MC417_RWD</span><span class="p">,</span> <span class="n">data</span> <span class="o">|</span> <span class="mh">0x00002000</span><span class="p">);</span>
	<span class="n">udelay</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
	<span class="cm">/*TCK*/</span>
	<span class="n">cx_write</span><span class="p">(</span><span class="n">MC417_RWD</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">tdo</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">cx23885_ir_pci_int_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">cx23885_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1270</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1850</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1290</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_ir</span><span class="p">)</span>
			<span class="n">cx23885_irq_add_enable</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">PCI_MSK_IR</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_TEVII_S470</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1250</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_ir</span><span class="p">)</span>
			<span class="n">cx23885_irq_add_enable</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">PCI_MSK_AV_CORE</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">cx23885_card_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">cx23885_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">cx23885_tsport</span> <span class="o">*</span><span class="n">ts1</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">ts1</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cx23885_tsport</span> <span class="o">*</span><span class="n">ts2</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">ts2</span><span class="p">;</span>

	<span class="k">static</span> <span class="n">u8</span> <span class="n">eeprom</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_bus</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i2c_rc</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_bus</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i2c_client</span><span class="p">.</span><span class="n">addr</span> <span class="o">=</span> <span class="mh">0xa0</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">tveeprom_read</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_bus</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i2c_client</span><span class="p">,</span>
			      <span class="n">eeprom</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">eeprom</span><span class="p">));</span>
	<span class="p">}</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1250</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_bus</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i2c_rc</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">eeprom</span><span class="p">[</span><span class="mh">0x80</span><span class="p">]</span> <span class="o">!=</span> <span class="mh">0x84</span><span class="p">)</span>
				<span class="n">hauppauge_eeprom</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">eeprom</span><span class="o">+</span><span class="mh">0xc0</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">hauppauge_eeprom</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">eeprom</span><span class="o">+</span><span class="mh">0x80</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500Q</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1400</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_bus</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i2c_rc</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
			<span class="n">hauppauge_eeprom</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">eeprom</span><span class="o">+</span><span class="mh">0x80</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1800</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1800lp</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1200</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1700</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1270</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1275</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1255</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1210</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1850</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1290</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_bus</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i2c_rc</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
			<span class="n">hauppauge_eeprom</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">eeprom</span><span class="o">+</span><span class="mh">0xc0</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_DVICO_FUSIONHDTV_7_DUAL_EXP</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_DVICO_FUSIONHDTV_DVB_T_DUAL_EXP</span>:
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">gen_ctrl_val</span>  <span class="o">=</span> <span class="mh">0xc</span><span class="p">;</span> <span class="cm">/* Serial bus + punctured clock */</span>
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">ts_clk_en_val</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">;</span> <span class="cm">/* Enable TS_CLK */</span>
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">src_sel_val</span>   <span class="o">=</span> <span class="n">CX23885_SRC_SEL_PARALLEL_MPEG_VIDEO</span><span class="p">;</span>
		<span class="cm">/* break omitted intentionally */</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_DVICO_FUSIONHDTV_5_EXP</span>:
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">gen_ctrl_val</span>  <span class="o">=</span> <span class="mh">0xc</span><span class="p">;</span> <span class="cm">/* Serial bus + punctured clock */</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">ts_clk_en_val</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">;</span> <span class="cm">/* Enable TS_CLK */</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">src_sel_val</span>   <span class="o">=</span> <span class="n">CX23885_SRC_SEL_PARALLEL_MPEG_VIDEO</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1850</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1800</span>:
		<span class="cm">/* Defaults for VID B - Analog encoder */</span>
		<span class="cm">/* DREQ_POL, SMODE, PUNC_CLK, MCLK_POL Serial bus + punc clk */</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">gen_ctrl_val</span>    <span class="o">=</span> <span class="mh">0x10e</span><span class="p">;</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">ts_clk_en_val</span>   <span class="o">=</span> <span class="mh">0x1</span><span class="p">;</span> <span class="cm">/* Enable TS_CLK */</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">src_sel_val</span>     <span class="o">=</span> <span class="n">CX23885_SRC_SEL_PARALLEL_MPEG_VIDEO</span><span class="p">;</span>

		<span class="cm">/* APB_TSVALERR_POL (active low)*/</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">vld_misc_val</span>    <span class="o">=</span> <span class="mh">0x2000</span><span class="p">;</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">hw_sop_ctrl_val</span> <span class="o">=</span> <span class="p">(</span><span class="mh">0x47</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span> <span class="o">|</span> <span class="mi">188</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span> <span class="o">|</span> <span class="mh">0xc</span><span class="p">);</span>
		<span class="n">cx_write</span><span class="p">(</span><span class="mh">0x130184</span><span class="p">,</span> <span class="mh">0xc</span><span class="p">);</span>

		<span class="cm">/* Defaults for VID C */</span>
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">gen_ctrl_val</span>  <span class="o">=</span> <span class="mh">0xc</span><span class="p">;</span> <span class="cm">/* Serial bus + punctured clock */</span>
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">ts_clk_en_val</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">;</span> <span class="cm">/* Enable TS_CLK */</span>
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">src_sel_val</span>   <span class="o">=</span> <span class="n">CX23885_SRC_SEL_PARALLEL_MPEG_VIDEO</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_TBS_6920</span>:
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">gen_ctrl_val</span>  <span class="o">=</span> <span class="mh">0x4</span><span class="p">;</span> <span class="cm">/* Parallel */</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">ts_clk_en_val</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">;</span> <span class="cm">/* Enable TS_CLK */</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">src_sel_val</span>   <span class="o">=</span> <span class="n">CX23885_SRC_SEL_PARALLEL_MPEG_VIDEO</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_TEVII_S470</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_TEVII_S471</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_DVBWORLD_2005</span>:
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">gen_ctrl_val</span>  <span class="o">=</span> <span class="mh">0x5</span><span class="p">;</span> <span class="cm">/* Parallel */</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">ts_clk_en_val</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">;</span> <span class="cm">/* Enable TS_CLK */</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">src_sel_val</span>   <span class="o">=</span> <span class="n">CX23885_SRC_SEL_PARALLEL_MPEG_VIDEO</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_NETUP_DUAL_DVBS2_CI</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_NETUP_DUAL_DVB_T_C_CI_RF</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_TERRATEC_CINERGY_T_PCIE_DUAL</span>:
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">gen_ctrl_val</span>  <span class="o">=</span> <span class="mh">0xc</span><span class="p">;</span> <span class="cm">/* Serial bus + punctured clock */</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">ts_clk_en_val</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">;</span> <span class="cm">/* Enable TS_CLK */</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">src_sel_val</span>   <span class="o">=</span> <span class="n">CX23885_SRC_SEL_PARALLEL_MPEG_VIDEO</span><span class="p">;</span>
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">gen_ctrl_val</span>  <span class="o">=</span> <span class="mh">0xc</span><span class="p">;</span> <span class="cm">/* Serial bus + punctured clock */</span>
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">ts_clk_en_val</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">;</span> <span class="cm">/* Enable TS_CLK */</span>
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">src_sel_val</span>   <span class="o">=</span> <span class="n">CX23885_SRC_SEL_PARALLEL_MPEG_VIDEO</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_MYGICA_X8506</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_MAGICPRO_PROHDTVE2</span>:
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">gen_ctrl_val</span>  <span class="o">=</span> <span class="mh">0x5</span><span class="p">;</span> <span class="cm">/* Parallel */</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">ts_clk_en_val</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">;</span> <span class="cm">/* Enable TS_CLK */</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">src_sel_val</span>   <span class="o">=</span> <span class="n">CX23885_SRC_SEL_PARALLEL_MPEG_VIDEO</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_MYGICA_X8558PRO</span>:
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">gen_ctrl_val</span>  <span class="o">=</span> <span class="mh">0x5</span><span class="p">;</span> <span class="cm">/* Parallel */</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">ts_clk_en_val</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">;</span> <span class="cm">/* Enable TS_CLK */</span>
		<span class="n">ts1</span><span class="o">-&gt;</span><span class="n">src_sel_val</span>   <span class="o">=</span> <span class="n">CX23885_SRC_SEL_PARALLEL_MPEG_VIDEO</span><span class="p">;</span>
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">gen_ctrl_val</span>  <span class="o">=</span> <span class="mh">0xc</span><span class="p">;</span> <span class="cm">/* Serial bus + punctured clock */</span>
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">ts_clk_en_val</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">;</span> <span class="cm">/* Enable TS_CLK */</span>
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">src_sel_val</span>   <span class="o">=</span> <span class="n">CX23885_SRC_SEL_PARALLEL_MPEG_VIDEO</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1250</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500Q</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1800lp</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1200</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1700</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1400</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXDVR3200_H</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXDVR3200_H_XC4000</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_COMPRO_VIDEOMATE_E650F</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1270</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1275</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1255</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1210</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_COMPRO_VIDEOMATE_E800</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1290</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_GOTVIEW_X5_3D_HYBRID</span>:
	<span class="nl">default:</span>
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">gen_ctrl_val</span>  <span class="o">=</span> <span class="mh">0xc</span><span class="p">;</span> <span class="cm">/* Serial bus + punctured clock */</span>
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">ts_clk_en_val</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">;</span> <span class="cm">/* Enable TS_CLK */</span>
		<span class="n">ts2</span><span class="o">-&gt;</span><span class="n">src_sel_val</span>   <span class="o">=</span> <span class="n">CX23885_SRC_SEL_PARALLEL_MPEG_VIDEO</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* Certain boards support analog, or require the avcore to be</span>
<span class="cm">	 * loaded, ensure this happens.</span>
<span class="cm">	 */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_TEVII_S470</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1250</span>:
		<span class="cm">/* Currently only enabled for the integrated IR controller */</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">enable_885_ir</span><span class="p">)</span>
			<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1800</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1800lp</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1700</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXDVR3200_H</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXDVR3200_H_XC4000</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_COMPRO_VIDEOMATE_E650F</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_NETUP_DUAL_DVBS2_CI</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_NETUP_DUAL_DVB_T_C_CI_RF</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_COMPRO_VIDEOMATE_E800</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1270</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1850</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_MYGICA_X8506</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_MAGICPRO_PROHDTVE2</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1290</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_LEADTEK_WINFAST_PXTV1200</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_GOTVIEW_X5_3D_HYBRID</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_HAUPPAUGE_HVR1500</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_MPX885</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_MYGICA_X8507</span>:
	<span class="k">case</span> <span class="n">CX23885_BOARD_TERRATEC_CINERGY_T_PCIE_DUAL</span>:
		<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_cx25840</span> <span class="o">=</span> <span class="n">v4l2_i2c_new_subdev</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">v4l2_dev</span><span class="p">,</span>
				<span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_bus</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">i2c_adap</span><span class="p">,</span>
				<span class="s">&quot;cx25840&quot;</span><span class="p">,</span> <span class="mh">0x88</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_cx25840</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_cx25840</span><span class="o">-&gt;</span><span class="n">grp_id</span> <span class="o">=</span> <span class="n">CX23885_HW_AV_CORE</span><span class="p">;</span>
			<span class="n">v4l2_subdev_call</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">sd_cx25840</span><span class="p">,</span> <span class="n">core</span><span class="p">,</span> <span class="n">load_fw</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* AUX-PLL 27MHz CLK */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">board</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_NETUP_DUAL_DVBS2_CI</span>:
		<span class="n">netup_initialize</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">CX23885_BOARD_NETUP_DUAL_DVB_T_C_CI_RF</span>: <span class="p">{</span>
		<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>
		<span class="k">const</span> <span class="k">struct</span> <span class="n">firmware</span> <span class="o">*</span><span class="n">fw</span><span class="p">;</span>
		<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">filename</span> <span class="o">=</span> <span class="s">&quot;dvb-netup-altera-01.fw&quot;</span><span class="p">;</span>
		<span class="kt">char</span> <span class="o">*</span><span class="n">action</span> <span class="o">=</span> <span class="s">&quot;configure&quot;</span><span class="p">;</span>
		<span class="k">static</span> <span class="k">struct</span> <span class="n">netup_card_info</span> <span class="n">cinfo</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">altera_config</span> <span class="n">netup_config</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="n">dev</span><span class="p">,</span>
			<span class="p">.</span><span class="n">action</span> <span class="o">=</span> <span class="n">action</span><span class="p">,</span>
			<span class="p">.</span><span class="n">jtag_io</span> <span class="o">=</span> <span class="n">netup_jtag_io</span><span class="p">,</span>
		<span class="p">};</span>

		<span class="n">netup_initialize</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

		<span class="n">netup_get_card_info</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">i2c_bus</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i2c_adap</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">cinfo</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">netup_card_rev</span><span class="p">)</span>
			<span class="n">cinfo</span><span class="p">.</span><span class="n">rev</span> <span class="o">=</span> <span class="n">netup_card_rev</span><span class="p">;</span>

		<span class="k">switch</span> <span class="p">(</span><span class="n">cinfo</span><span class="p">.</span><span class="n">rev</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="mh">0x4</span>:
			<span class="n">filename</span> <span class="o">=</span> <span class="s">&quot;dvb-netup-altera-04.fw&quot;</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="nl">default:</span>
			<span class="n">filename</span> <span class="o">=</span> <span class="s">&quot;dvb-netup-altera-01.fw&quot;</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;NetUP card rev=0x%x fw_filename=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				<span class="n">cinfo</span><span class="p">.</span><span class="n">rev</span><span class="p">,</span> <span class="n">filename</span><span class="p">);</span>

		<span class="n">ret</span> <span class="o">=</span> <span class="n">request_firmware</span><span class="p">(</span><span class="o">&amp;</span><span class="n">fw</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">pci</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
			<span class="n">printk</span><span class="p">(</span><span class="n">KERN_ERR</span> <span class="s">&quot;did not find the firmware file. (%s) &quot;</span>
			<span class="s">&quot;Please see linux/Documentation/dvb/ for more details &quot;</span>
			<span class="s">&quot;on firmware-problems.&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="n">altera_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">netup_config</span><span class="p">,</span> <span class="n">fw</span><span class="p">);</span>

		<span class="n">release_firmware</span><span class="p">(</span><span class="n">fw</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* ------------------------------------------------------------------ */</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
