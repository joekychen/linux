f | Makefile | g | 539B |  | Andy Shevchenko | andriy.shevchenko@linux.intel.com | 1331214123 |  | [media] media: ivtv: append $(srctree) to -I parameters  Without this we have got the warnings like following if build with "make W=1 O=/var/tmp":   cc1: warning: drivers/media/dvb/dvb-core: No such file or directory [enabled by default]  Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-firmware.c | s | 11K | 335 | Ian Armstrong | ian@iarmst.demon.co.uk | 1306928798 |  | [media] ivtv: Internally separate encoder & decoder standard setting  Internally separates the setting of the broadcast standard for the encoder & decoder. Externally there's no change in functionality.  [awalls@md.metrocast.net: Edited to fix a checkpatch gripe about multiple assignment and to remove a now unused DEFINE_WAIT() due to this patch]  Signed-off-by: Ian Armstrong <ian@iarmst.demon.co.uk> Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-irq.c | s | 31K | 908 | Hans Verkuil | hans.verkuil@cisco.com | 1326715210 |  | [media] ivtv: remove open_id/id from the filehandle code  Instead of messing around with id's it's much easier to just compare against a filehandle pointer.  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Acked-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-mailbox.h | s | 1.4K | 28 | Ian Armstrong | ian@iarmst.demon.co.uk | 1280771293 |  | V4L/DVB: ivtv: Automatic firmware reload  If the firmware has failed, this patch will automatically reload & restart the card. The previous card state will be restored on a successful restart.  Firmware reload will only happen if neither the encoder or decoder is active.  If the card is busy then behaviour is as before, returning -EIO on device access until the reload can occur. On cards that support video output, coloured bars will be displayed during the reload.  Andy Walls (ivtv maintainer and patch committer) made minor tweaks to comments and the logged messages, but nothing substantial otherwise.  Signed-off-by: Ian Armstrong <ian@iarmst.demon.co.uk> Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-driver.h | s | 29K | 698 | Hans Verkuil | hans.verkuil@cisco.com | 1339449207 |  | [media] ivtv: fix support for big-endian systems  base_addr has type resource_size_t, which may be 64 bits on a 32-bit ppc.  Tested on my ppc board.  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-yuv.c | s | 38K | 1109 | Hans Verkuil | hans.verkuil@cisco.com | 1326715183 |  | [media] ivtv: switch to the v4l core lock  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Acked-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-gpio.h | s | 1.1K | 23 | Hans Verkuil | hverkuil@xs4all.nl | 1230637124 |  | V4L/DVB (9835): ivtv/ivtvfb: convert to v4l2_device/v4l2_subdev.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-irq.h | s | 2.1K | 43 | Tejun Heo | tj@kernel.org | 1277798829 |  | ivtv: use kthread_worker instead of workqueue  Upcoming workqueue updates will no longer guarantee fixed workqueue to worker kthread association, so giving RT priority to the irq worker won't work.  Use kthread_worker which guarantees specific kthread association instead.  This also makes setting the priority cleaner.  Signed-off-by: Tejun Heo <tj@kernel.org> Cc: Andy Walls <awalls@md.metrocast.net> Cc: Andrew Morton <akpm@linux-foundation.org> Cc: ivtv-devel@ivtvdriver.org Cc: linux-media@vger.kernel.org
f | ivtv-vbi.c | s | 14K | 483 | Ian Armstrong | ian@iarmst.demon.co.uk | 1306928798 |  | [media] ivtv: Internally separate encoder & decoder standard setting  Internally separates the setting of the broadcast standard for the encoder & decoder. Externally there's no change in functionality.  [awalls@md.metrocast.net: Edited to fix a checkpatch gripe about multiple assignment and to remove a now unused DEFINE_WAIT() due to this patch]  Signed-off-by: Ian Armstrong <ian@iarmst.demon.co.uk> Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-cards.h | s | 10K | 264 | Mauro Carvalho Chehab | mchehab@redhat.com | 1293718628 |  | [media] ivtv: Add Adaptec Remote Controller  lirc-i2c implements a get key logic for the Adaptec Remote Controller, at address 0x6b. The only driver that seems to have an Adaptec device is ivtv:  $ git grep -i adaptec drivers/media drivers/media/video/cs53l32a.c: * cs53l32a (Adaptec AVC-2010 and AVC-2410) i2c ivtv driver. drivers/media/video/cs53l32a.c: * Audio source switching for Adaptec AVC-2410 added by Trev Jackson drivers/media/video/cs53l32a.c:   /* Set cs53l32a internal register for Adaptec 2010/2410 setup */ drivers/media/video/ivtv/ivtv-cards.c:/* Adaptec VideOh! AVC-2410 card */ drivers/media/video/ivtv/ivtv-cards.c:    { PCI_DEVICE_ID_IVTV16, IVTV_PCI_ID_ADAPTEC, 0x0093 }, drivers/media/video/ivtv/ivtv-cards.c:    .name = "Adaptec VideOh! AVC-2410", drivers/media/video/ivtv/ivtv-cards.c:/* Adaptec VideOh! AVC-2010 card */ drivers/media/video/ivtv/ivtv-cards.c:    { PCI_DEVICE_ID_IVTV16, IVTV_PCI_ID_ADAPTEC, 0x0092 }, drivers/media/video/ivtv/ivtv-cards.c:    .name = "Adaptec VideOh! AVC-2010", drivers/media/video/ivtv/ivtv-cards.h:#define IVTV_CARD_AVC2410         7 /* Adaptec AVC-2410 */ drivers/media/video/ivtv/ivtv-cards.h:#define IVTV_CARD_AVC2010         8 /* Adaptec AVD-2010 (No Tuner) */ drivers/media/video/ivtv/ivtv-cards.h:#define IVTV_PCI_ID_ADAPTEC                 0x9005 drivers/media/video/ivtv/ivtv-driver.c:            "\t\t\t 8 = Adaptec AVC-2410\n" drivers/media/video/ivtv/ivtv-driver.c:            "\t\t\t 9 = Adaptec AVC-2010\n" drivers/media/video/ivtv/ivtv-i2c.c:              0x6b,   /* Adaptec IR */  There are two Adaptec cards defined there, but AVC-2010 doesn't have a remote controller. So, the logic at lirc_i2c seems to be for Adaptec AVC-2410.  As we'll remove lirc_i2c from kernel, move the getkey code to ivtv driver, and use it for AVC-2410.  Reviewed-by: Andy Walls <awalls@md.metrocast.net> Acked-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-mailbox.c | s | 13K | 341 | Ian Armstrong | ian@iarmst.demon.co.uk | 1280771293 |  | V4L/DVB: ivtv: Automatic firmware reload  If the firmware has failed, this patch will automatically reload & restart the card. The previous card state will be restored on a successful restart.  Firmware reload will only happen if neither the encoder or decoder is active.  If the card is busy then behaviour is as before, returning -EIO on device access until the reload can occur. On cards that support video output, coloured bars will be displayed during the reload.  Andy Walls (ivtv maintainer and patch committer) made minor tweaks to comments and the logged messages, but nothing substantial otherwise.  Signed-off-by: Ian Armstrong <ian@iarmst.demon.co.uk> Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-gpio.c | s | 10K | 332 | Hans Verkuil | hverkuil@xs4all.nl | 1281321785 |  | V4L/DVB: ivtv: convert gpio subdev to new control framework  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-vbi.h | s | 1.3K | 28 | Andy Walls | awalls@md.metrocast.net | 1293617830 |  | [media] ivtv: Return EFAULT when copy_from_user() fails in ivtv_write_vbi_from_user()  If write() on a VBI device node fails due to a bad buffer pointer from userspace, we should notify the application properly with EFAULT, per the V4L2 API spec.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-i2c.h | s | 1.2K | 25 | Jean Delvare | khali@linux-fr.org | 1322154677 |  | [media] video: Drop undue references to i2c-algo-bit  There's one comment that has been copied from bttv to many other media/video drivers:  /* init + register i2c algo-bit adapter */  Meanwhile, many drivers use hardware I2C implementations instead of relying on i2c-algo-bit, so this comment is misleading. Remove the reference to "algo-bit" from all drivers, to avoid any confusion. This is the best way to ensure that the comments won't go out of sync again. Anyone interested in the implementation details would rather look at the code itself.  Signed-off-by: Jean Delvare <khali@linux-fr.org> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-firmware.h | s | 1.2K | 25 | Ian Armstrong | ian@iarmst.demon.co.uk | 1280771275 |  | V4L/DVB: ivtv: Add firmare monitoring and debug mode to ignore firmware problems  >From Ian's e-mail: When a device is opened the firmware state will be checked. If it isn't responding then the open will fail with -EIO.  Due to the nature of the hardware, a single failed check will block everything since we don't know exactly what has failed. A side effect of this is the blocking of debug access, so an additional debug level has been created which allows the block to be bypassed.  Andy Walls' modifications: I modified Ian's patch to add a separate fw_debug module parameter to change the driver's behavior, as opposed to using the normal debug module parameter. The fw_debug module parameter is only available when CONFIG_VIDEO_ADV_DEBUG is set. I also made some minor whitespace adjustments and changed some warning messages to be a bit more specific.  s/happy/glad/g  Signed-off-by: Ian Armstrong <ian@iarmst.demon.co.uk> Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-routing.h | s | 1.0K | 21 | Hans Verkuil | hverkuil@xs4all.nl | 1191978407 |  | V4L/DVB (6092): ivtv: more cleanups, merged ivtv-audio.c and ivtv-video.c into ivtv-routing.c  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>
f | ivtv-driver.c | s | 45K | 1322 | Hans Verkuil | hans.verkuil@cisco.com | 1339449207 |  | [media] ivtv: fix support for big-endian systems  base_addr has type resource_size_t, which may be 64 bits on a 32-bit ppc.  Tested on my ppc board.  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-ioctl.c | s | 51K | 1634 | Hans Verkuil | hans.verkuil@cisco.com | 1337017548 |  | [media] ivtv/cx18: fix compiler warnings  media_build/v4l/cx18-alsa-main.c: In function 'cx18_alsa_exit': media_build/v4l/cx18-alsa-main.c:282:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-mailbox.c: In function 'cx18_api_call': media_build/v4l/cx18-mailbox.c:598:6: warning: variable 'state' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_capture_open': media_build/v4l/cx18-alsa-pcm.c:156:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_capture_close': media_build/v4l/cx18-alsa-pcm.c:202:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_hw_params': media_build/v4l/cx18-alsa-pcm.c:255:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-streams.c: In function 'cx18_stop_v4l2_encode_stream': media_build/v4l/cx18-streams.c:983:16: warning: variable 'then' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtv-ioctl.c: In function 'ivtv_set_speed': media_build/v4l/ivtv-ioctl.c:138:22: warning: variable 's' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtvfb.c: In function 'ivtvfb_init': media_build/v4l/ivtvfb.c:1286:6: warning: variable 'err' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtvfb.c: In function 'ivtvfb_cleanup': media_build/v4l/ivtvfb.c:1306:6: warning: variable 'err' set but not used [-Wunused-but-set-variable]  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-controls.h | s | 1.1K | 22 | Hans Verkuil | hans.verkuil@cisco.com | 1329234281 |  | [media] ivtv: implement new decoder controls  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-queue.h | s | 3.1K | 77 | Hans Verkuil | hverkuil@xs4all.nl | 1238427761 |  | V4L/DVB (10488): ivtv: cleanup naming conventions  Use consistent naming for pci_dev, v4l2_device and video_device.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtvfb.c | s | 36K | 1087 | Hans Verkuil | hans.verkuil@cisco.com | 1337017548 |  | [media] ivtv/cx18: fix compiler warnings  media_build/v4l/cx18-alsa-main.c: In function 'cx18_alsa_exit': media_build/v4l/cx18-alsa-main.c:282:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-mailbox.c: In function 'cx18_api_call': media_build/v4l/cx18-mailbox.c:598:6: warning: variable 'state' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_capture_open': media_build/v4l/cx18-alsa-pcm.c:156:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_capture_close': media_build/v4l/cx18-alsa-pcm.c:202:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_hw_params': media_build/v4l/cx18-alsa-pcm.c:255:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-streams.c: In function 'cx18_stop_v4l2_encode_stream': media_build/v4l/cx18-streams.c:983:16: warning: variable 'then' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtv-ioctl.c: In function 'ivtv_set_speed': media_build/v4l/ivtv-ioctl.c:138:22: warning: variable 's' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtvfb.c: In function 'ivtvfb_init': media_build/v4l/ivtvfb.c:1286:6: warning: variable 'err' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtvfb.c: In function 'ivtvfb_cleanup': media_build/v4l/ivtvfb.c:1306:6: warning: variable 'err' set but not used [-Wunused-but-set-variable]  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-fileops.c | s | 30K | 915 | Hans Verkuil | hans.verkuil@cisco.com | 1332858989 |  | [media] ivtv: only start streaming in poll() if polling for input  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Acked-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Hans de Goede <hdegoede@redhat.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-routing.c | s | 3.6K | 102 | Hans Verkuil | hverkuil@xs4all.nl | 1239065067 |  | V4L/DVB (11380): v4l2-subdev: change s_routing prototype  It is no longer needed to use a struct pointer as argument, since v4l2_subdev doesn't require that ioctl-like approach anymore. Instead just pass the input, output and config (new!) arguments directly.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-yuv.h | s | 1.6K | 33 | Al Viro | viro@ftp.linux.org.uk | 1212658549 |  | V4L/DVB (7963): ivtv: trivial annotations  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>
f | ivtv-streams.c | s | 29K | 855 | Hans Verkuil | hans.verkuil@cisco.com | 1336997978 |  | [media] v4l2-dev: add flag to have the core lock all file operations  This used to be the default if the lock pointer was set, but now that lock is by default only used for ioctl serialization. Those drivers that already used core locking have this flag set explicitly, except for some drivers where it was obvious that there was no need to serialize any file operations other than ioctl.  The drivers that didn't need this flag were:  drivers/media/radio/dsbr100.c drivers/media/radio/radio-isa.c drivers/media/radio/radio-keene.c drivers/media/radio/radio-miropcm20.c drivers/media/radio/radio-mr800.c drivers/media/radio/radio-tea5764.c drivers/media/radio/radio-timb.c drivers/media/video/vivi.c sound/i2c/other/tea575x-tuner.c  The other drivers that use core locking and where it was not immediately obvious that this flag wasn't needed were changed so that the flag is set together with a comment that that driver needs work to avoid having to set that flag. This will often involve taking the core lock in the fops themselves.  Eventually this flag should go and it should not be used in new drivers.  There are a few reasons why we want to avoid core locking of non-ioctl fops: in the case of mmap this can lead to a deadlock in rare situations since when mmap is called the mmap_sem is held and it is possible for other parts of the code to take that lock as well (copy_from_user()/copy_to_user() perform a down_read(&mm->mmap_sem) when a page fault occurs).  It is very unlikely that that happens since the core lock serializes all fops, but the kernel warns about it if lock validation is turned on.  For poll it is also undesirable to take the core lock as that can introduce increased latency. The same is true for read/write.  While it was possible to make flags or something to turn on/off taking the core lock for each file operation, in practice it is much simpler to just not take it at all except for ioctl and leave it to the driver to take the lock. There are only a handful fops compared to the zillion ioctls we have.  I also wanted to make it obvious which drivers still take the lock for all fops, so that's why I chose to have drivers set it explicitly.  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Acked-by: Hans de Goede <hdegoede@redhat.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-i2c.c | s | 21K | 669 | Mauro Carvalho Chehab | mchehab@redhat.com | 1300832657 |  | [media] rc/keymaps: Remove the obsolete rc-rc5-tv keymap  This keymap were used for the Hauppauge Black remote controller only. It also contains some keycodes not found there. As the Hauppauge Black is now part of the hauppauge keymap, just remove it.  Also, remove the modprobe hacks to select between the Gray and the Black versions of the remote controller as:  - Both are supported by default by the keymap;  - If the user just wants one keyboard supported,    it is just a matter of changing the keymap via    the userspace tool (ir-keytable), removing    the keys that he doesn't desire. As ir-keytable    auto-loads the keys via udev, this is better than    obscure modprobe parameters.  Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com> Signed-off-by: Jarod Wilson <jarod@redhat.com>
f | ivtv-fileops.h | s | 1.7K | 36 | Hans Verkuil | hverkuil@xs4all.nl | 1230923472 |  | V4L/DVB (10135): v4l2: introduce v4l2_file_operations.  Introduce a struct v4l2_file_operations for v4l2 drivers.  Remove the unnecessary inode argument.  Move compat32 handling (and llseek) into the v4l2-dev core: this is now handled in the v4l2 core and no longer in the drivers themselves.  Note that this changeset reverts an earlier patch that changed the return type of__video_ioctl2 from int to long. This change will be reinstated later in a much improved version.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-queue.c | s | 8.8K | 260 | Alan Cox | alan@linux.intel.com | 1244214323 |  | ivtv: Fix PCI DMA direction  The ivtv stream buffers may be for receive or for send but the attached sg handle is always destined cpu->device.  We flush it correctly but the allocation is wrongly done with the same type as the buffers.  See bug: http://bugzilla.kernel.org/show_bug.cgi?id=13385  (Note this doesn't close the bug - it fixes the ivtv part and in turn the logging next shows up some rather alarming DMA sg list warnings in libata)  Signed-off-by: Alan Cox <alan@linux.intel.com> Acked-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | Kconfig | g | 1.3K |  | Mauro Carvalho Chehab | mchehab@redhat.com | 1293617810 |  | [media] rc: rename the remaining things to rc_core  The Remote Controller subsystem is meant to be used not only by Infra Red but also for similar types of Remote Controllers. The core is not specific to Infra Red. As such, rename: 	- ir-core.h to rc-core.h 	- IR_CORE to RC_CORE 	- namespace inside rc-core.c/rc-core.h  To be consistent with the other changes.  No functional change on this patch.  Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-version.h | s | 944B | 20 | Mauro Carvalho Chehab | mchehab@redhat.com | 1311799994 |  | [media] ivtv,cx18: Use default version control for VIDIOC_QUERYCAP  After discussing with Andy Walls on irc, we've agreed that this is the best thing to do. No regressions will be introduced, as 3.x.y is greater then the current versions for cx18 and ivtv.  Acked-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-ioctl.h | s | 1.5K | 30 | Ian Armstrong | ian@iarmst.demon.co.uk | 1306928798 |  | [media] ivtv: Internally separate encoder & decoder standard setting  Internally separates the setting of the broadcast standard for the encoder & decoder. Externally there's no change in functionality.  [awalls@md.metrocast.net: Edited to fix a checkpatch gripe about multiple assignment and to remove a now unused DEFINE_WAIT() due to this patch]  Signed-off-by: Ian Armstrong <ian@iarmst.demon.co.uk> Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-streams.h | s | 1.5K | 29 | Hans Verkuil | hverkuil@xs4all.nl | 1210744449 |  | V4L/DVB (7854): cx18/ivtv: improve and fix out-of-memory handling  - don't show kernel backtrace when the allocation of the buffers fails: the   normal ivtv/cx18 messages are clear enough and the backtrace scares users. - fix cleanup after the buffer allocation fails (caused kernel panic).  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>
f | ivtv-controls.c | s | 5.0K | 140 | Hans Verkuil | hans.verkuil@cisco.com | 1331215431 |  | [media] ivtv: simplify how the decoder controls are set up  The code was unnecessarily complex, introducing a hdl_out handler that was not needed. Instead just add the controls to the cxhdl.hdl handler directly.  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-udma.c | s | 6.6K | 193 | Cong Wang | amwang@redhat.com | 1332251298 |  | media: remove the second argument of k[un]map_atomic()  Acked-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Cong Wang <amwang@redhat.com>
f | ivtv-cards.c | s | 46K | 1236 | Mauro Carvalho Chehab | mchehab@redhat.com | 1293718628 |  | [media] ivtv: Add Adaptec Remote Controller  lirc-i2c implements a get key logic for the Adaptec Remote Controller, at address 0x6b. The only driver that seems to have an Adaptec device is ivtv:  $ git grep -i adaptec drivers/media drivers/media/video/cs53l32a.c: * cs53l32a (Adaptec AVC-2010 and AVC-2410) i2c ivtv driver. drivers/media/video/cs53l32a.c: * Audio source switching for Adaptec AVC-2410 added by Trev Jackson drivers/media/video/cs53l32a.c:   /* Set cs53l32a internal register for Adaptec 2010/2410 setup */ drivers/media/video/ivtv/ivtv-cards.c:/* Adaptec VideOh! AVC-2410 card */ drivers/media/video/ivtv/ivtv-cards.c:    { PCI_DEVICE_ID_IVTV16, IVTV_PCI_ID_ADAPTEC, 0x0093 }, drivers/media/video/ivtv/ivtv-cards.c:    .name = "Adaptec VideOh! AVC-2410", drivers/media/video/ivtv/ivtv-cards.c:/* Adaptec VideOh! AVC-2010 card */ drivers/media/video/ivtv/ivtv-cards.c:    { PCI_DEVICE_ID_IVTV16, IVTV_PCI_ID_ADAPTEC, 0x0092 }, drivers/media/video/ivtv/ivtv-cards.c:    .name = "Adaptec VideOh! AVC-2010", drivers/media/video/ivtv/ivtv-cards.h:#define IVTV_CARD_AVC2410         7 /* Adaptec AVC-2410 */ drivers/media/video/ivtv/ivtv-cards.h:#define IVTV_CARD_AVC2010         8 /* Adaptec AVD-2010 (No Tuner) */ drivers/media/video/ivtv/ivtv-cards.h:#define IVTV_PCI_ID_ADAPTEC                 0x9005 drivers/media/video/ivtv/ivtv-driver.c:            "\t\t\t 8 = Adaptec AVC-2410\n" drivers/media/video/ivtv/ivtv-driver.c:            "\t\t\t 9 = Adaptec AVC-2010\n" drivers/media/video/ivtv/ivtv-i2c.c:              0x6b,   /* Adaptec IR */  There are two Adaptec cards defined there, but AVC-2010 doesn't have a remote controller. So, the logic at lirc_i2c seems to be for Adaptec AVC-2410.  As we'll remove lirc_i2c from kernel, move the getkey code to ivtv driver, and use it for AVC-2410.  Reviewed-by: Andy Walls <awalls@md.metrocast.net> Acked-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ivtv-udma.h | s | 1.9K | 40 | Hans Verkuil | hverkuil@xs4all.nl | 1238427761 |  | V4L/DVB (10488): ivtv: cleanup naming conventions  Use consistent naming for pci_dev, v4l2_device and video_device.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
