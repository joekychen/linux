<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › media › video › cx18 › cx18-cards.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>cx18-cards.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  cx18 functions to query card hardware</span>
<span class="cm"> *</span>
<span class="cm"> *  Derived from ivtv-cards.c</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright (C) 2007  Hans Verkuil &lt;hverkuil@xs4all.nl&gt;</span>
<span class="cm"> *  Copyright (C) 2008  Andy Walls &lt;awalls@md.metrocast.net&gt;</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *  it under the terms of the GNU General Public License as published by</span>
<span class="cm"> *  the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> *  (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is distributed in the hope that it will be useful,</span>
<span class="cm"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> *  GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> *  You should have received a copy of the GNU General Public License</span>
<span class="cm"> *  along with this program; if not, write to the Free Software</span>
<span class="cm"> *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
<span class="cm"> */</span>

<span class="cm">/* hardware flags */</span>
<span class="cp">#define CX18_HW_TUNER			(1 &lt;&lt; 0)</span>
<span class="cp">#define CX18_HW_TVEEPROM		(1 &lt;&lt; 1)</span>
<span class="cp">#define CX18_HW_CS5345			(1 &lt;&lt; 2)</span>
<span class="cp">#define CX18_HW_DVB			(1 &lt;&lt; 3)</span>
<span class="cp">#define CX18_HW_418_AV			(1 &lt;&lt; 4)</span>
<span class="cp">#define CX18_HW_GPIO_MUX		(1 &lt;&lt; 5)</span>
<span class="cp">#define CX18_HW_GPIO_RESET_CTRL		(1 &lt;&lt; 6)</span>
<span class="cp">#define CX18_HW_Z8F0811_IR_TX_HAUP	(1 &lt;&lt; 7)</span>
<span class="cp">#define CX18_HW_Z8F0811_IR_RX_HAUP	(1 &lt;&lt; 8)</span>
<span class="cp">#define CX18_HW_Z8F0811_IR_HAUP	(CX18_HW_Z8F0811_IR_RX_HAUP | \</span>
<span class="cp">				 CX18_HW_Z8F0811_IR_TX_HAUP)</span>

<span class="cp">#define CX18_HW_IR_ANY (CX18_HW_Z8F0811_IR_RX_HAUP | \</span>
<span class="cp">			CX18_HW_Z8F0811_IR_TX_HAUP)</span>

<span class="cm">/* video inputs */</span>
<span class="cp">#define	CX18_CARD_INPUT_VID_TUNER	1</span>
<span class="cp">#define	CX18_CARD_INPUT_SVIDEO1 	2</span>
<span class="cp">#define	CX18_CARD_INPUT_SVIDEO2 	3</span>
<span class="cp">#define	CX18_CARD_INPUT_COMPOSITE1 	4</span>
<span class="cp">#define	CX18_CARD_INPUT_COMPOSITE2 	5</span>
<span class="cp">#define	CX18_CARD_INPUT_COMPONENT1 	6</span>

<span class="cm">/* audio inputs */</span>
<span class="cp">#define	CX18_CARD_INPUT_AUD_TUNER	1</span>
<span class="cp">#define	CX18_CARD_INPUT_LINE_IN1 	2</span>
<span class="cp">#define	CX18_CARD_INPUT_LINE_IN2 	3</span>

<span class="cp">#define CX18_CARD_MAX_VIDEO_INPUTS 6</span>
<span class="cp">#define CX18_CARD_MAX_AUDIO_INPUTS 3</span>
<span class="cp">#define CX18_CARD_MAX_TUNERS  	   2</span>

<span class="cm">/* V4L2 capability aliases */</span>
<span class="cp">#define CX18_CAP_ENCODER (V4L2_CAP_VIDEO_CAPTURE | V4L2_CAP_TUNER | \</span>
<span class="cp">			  V4L2_CAP_AUDIO | V4L2_CAP_READWRITE | \</span>
<span class="cp">			  V4L2_CAP_VBI_CAPTURE | V4L2_CAP_SLICED_VBI_CAPTURE)</span>

<span class="k">struct</span> <span class="n">cx18_card_video_input</span> <span class="p">{</span>
	<span class="n">u8</span>  <span class="n">video_type</span><span class="p">;</span> 	<span class="cm">/* video input type */</span>
	<span class="n">u8</span>  <span class="n">audio_index</span><span class="p">;</span>	<span class="cm">/* index in cx18_card_audio_input array */</span>
	<span class="n">u32</span> <span class="n">video_input</span><span class="p">;</span>	<span class="cm">/* hardware video input */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cx18_card_audio_input</span> <span class="p">{</span>
	<span class="n">u8</span>  <span class="n">audio_type</span><span class="p">;</span>		<span class="cm">/* audio input type */</span>
	<span class="n">u32</span> <span class="n">audio_input</span><span class="p">;</span>	<span class="cm">/* hardware audio input */</span>
	<span class="n">u16</span> <span class="n">muxer_input</span><span class="p">;</span>	<span class="cm">/* hardware muxer input for boards with a</span>
<span class="cm">				   multiplexer chip */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cx18_card_pci_info</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">device</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">subsystem_vendor</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">subsystem_device</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* GPIO definitions */</span>

<span class="cm">/* The mask is the set of bits used by the operation */</span>

<span class="k">struct</span> <span class="n">cx18_gpio_init</span> <span class="p">{</span> <span class="cm">/* set initial GPIO DIR and OUT values */</span>
	<span class="n">u32</span> <span class="n">direction</span><span class="p">;</span> 	<span class="cm">/* DIR setting. Leave to 0 if no init is needed */</span>
	<span class="n">u32</span> <span class="n">initial_value</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cx18_gpio_i2c_slave_reset</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">active_lo_mask</span><span class="p">;</span> <span class="cm">/* GPIO outputs that reset i2c chips when low */</span>
	<span class="n">u32</span> <span class="n">active_hi_mask</span><span class="p">;</span> <span class="cm">/* GPIO outputs that reset i2c chips when high */</span>
	<span class="kt">int</span> <span class="n">msecs_asserted</span><span class="p">;</span> <span class="cm">/* time period reset must remain asserted */</span>
	<span class="kt">int</span> <span class="n">msecs_recovery</span><span class="p">;</span> <span class="cm">/* time after deassert for chips to be ready */</span>
	<span class="n">u32</span> <span class="n">ir_reset_mask</span><span class="p">;</span>  <span class="cm">/* GPIO to reset the Zilog Z8F0811 IR contoller */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cx18_gpio_audio_input</span> <span class="p">{</span> 	<span class="cm">/* select tuner/line in input */</span>
	<span class="n">u32</span> <span class="n">mask</span><span class="p">;</span> 		<span class="cm">/* leave to 0 if not supported */</span>
	<span class="n">u32</span> <span class="n">tuner</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">linein</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">radio</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cx18_card_tuner</span> <span class="p">{</span>
	<span class="n">v4l2_std_id</span> <span class="n">std</span><span class="p">;</span> 	<span class="cm">/* standard for which the tuner is suitable */</span>
	<span class="kt">int</span> 	    <span class="n">tuner</span><span class="p">;</span> 	<span class="cm">/* tuner ID (from tuner.h) */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cx18_card_tuner_i2c</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">radio</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span><span class="cm">/* radio tuner i2c address to probe */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">demod</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span><span class="cm">/* demodulator i2c address to probe */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">tv</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/* tv tuner i2c addresses to probe */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cx18_ddr</span> <span class="p">{</span>		<span class="cm">/* DDR config data */</span>
	<span class="n">u32</span> <span class="n">chip_config</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">refresh</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">timing1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">timing2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tune_lane</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">initial_emrs</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* for card information/parameters */</span>
<span class="k">struct</span> <span class="n">cx18_card</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">type</span><span class="p">;</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">comment</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">v4l2_capabilities</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">hw_audio_ctrl</span><span class="p">;</span>	<span class="cm">/* hardware used for the V4L2 controls (only</span>
<span class="cm">				   1 dev allowed currently) */</span>
	<span class="n">u32</span> <span class="n">hw_muxer</span><span class="p">;</span>		<span class="cm">/* hardware used to multiplex audio input */</span>
	<span class="n">u32</span> <span class="n">hw_all</span><span class="p">;</span>		<span class="cm">/* all hardware used by the board */</span>
	<span class="k">struct</span> <span class="n">cx18_card_video_input</span> <span class="n">video_inputs</span><span class="p">[</span><span class="n">CX18_CARD_MAX_VIDEO_INPUTS</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">cx18_card_audio_input</span> <span class="n">audio_inputs</span><span class="p">[</span><span class="n">CX18_CARD_MAX_AUDIO_INPUTS</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">cx18_card_audio_input</span> <span class="n">radio_input</span><span class="p">;</span>

	<span class="cm">/* GPIO card-specific settings */</span>
	<span class="n">u8</span> <span class="n">xceive_pin</span><span class="p">;</span> 		<span class="cm">/* XCeive tuner GPIO reset pin */</span>
	<span class="k">struct</span> <span class="n">cx18_gpio_init</span> 		 <span class="n">gpio_init</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cx18_gpio_i2c_slave_reset</span> <span class="n">gpio_i2c_slave_reset</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cx18_gpio_audio_input</span>    <span class="n">gpio_audio_input</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">cx18_card_tuner</span> <span class="n">tuners</span><span class="p">[</span><span class="n">CX18_CARD_MAX_TUNERS</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">cx18_card_tuner_i2c</span> <span class="o">*</span><span class="n">i2c</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">cx18_ddr</span> <span class="n">ddr</span><span class="p">;</span>

	<span class="cm">/* list of device and subsystem vendor/devices that</span>
<span class="cm">	   correspond to this card type. */</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">cx18_card_pci_info</span> <span class="o">*</span><span class="n">pci_list</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">cx18_get_input</span><span class="p">(</span><span class="k">struct</span> <span class="n">cx18</span> <span class="o">*</span><span class="n">cx</span><span class="p">,</span> <span class="n">u16</span> <span class="n">index</span><span class="p">,</span> <span class="k">struct</span> <span class="n">v4l2_input</span> <span class="o">*</span><span class="n">input</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">cx18_get_audio_input</span><span class="p">(</span><span class="k">struct</span> <span class="n">cx18</span> <span class="o">*</span><span class="n">cx</span><span class="p">,</span> <span class="n">u16</span> <span class="n">index</span><span class="p">,</span> <span class="k">struct</span> <span class="n">v4l2_audio</span> <span class="o">*</span><span class="n">input</span><span class="p">);</span>
<span class="k">const</span> <span class="k">struct</span> <span class="n">cx18_card</span> <span class="o">*</span><span class="n">cx18_get_card</span><span class="p">(</span><span class="n">u16</span> <span class="n">index</span><span class="p">);</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
