f | cx18-driver.h | s | 25K | 621 | Hans Verkuil | hans.verkuil@cisco.com | 1339449237 |  | [media] cx18: support big-endian systems  base_addr has type resource_size_t, which may be 64 bits.  Also fix a few endian issues related to mailboxes and firmware loading.  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-cards.h | s | 5.0K | 134 | Andy Walls | awalls@md.metrocast.net | 1305894414 |  | [media] cx18: Make RF analog TV work for newer HVR-1600 models with silicon tuners  A previous changes which added the newer model HVR-1600's and DTV support for them, neglected to add RF analog TV for them.  Fix RF analog TV for the newer HVR-1600's which have a worldwide analog tuner assembly with a TDA18271 tuner and TDA8295 demodulator.  Thanks go to Jeff Campbell and Mike Bradley for reproting the problem, and also to Mike Bradley for doing a lot of the legwork to figure out the tuner reset GPIO line, the demodulator I2C address, and that the GPIOs have to be reinitialized after a cardtype switch.  Reported-by: Jeff Campbell <jac1dlists@gmail.com> Tested-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-firmware.c | s | 14K | 393 | Hans Verkuil | hans.verkuil@cisco.com | 1339449237 |  | [media] cx18: support big-endian systems  base_addr has type resource_size_t, which may be 64 bits.  Also fix a few endian issues related to mailboxes and firmware loading.  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-vbi.h | s | 1.0K | 25 | Andy Walls | awalls@radix.net | 1260045711 |  | V4L/DVB (13429): cx18: Add Memory Descriptor List (MDL) layer to buffer handling  Add a Memory Descriptor List (MDL) layer to buffer handling to implement scatter-gather I/O.  Currently there is still only 1 buffer per MDL.  Signed-off-by: Andy Walls <awalls@radix.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-scb.h | s | 7.3K | 230 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | Makefile | g | 586B |  | Arnaud Lacombe | lacombar@gmail.com | 1315086659 |  | [media] drivers/media: do not use EXTRA_CFLAGS  Usage of these flags has been deprecated for nearly 4 years by:      commit f77bf01425b11947eeb3b5b54685212c302741b8     Author: Sam Ravnborg <sam@neptun.(none)>     Date:   Mon Oct 15 22:25:06 2007 +0200          kbuild: introduce ccflags-y, asflags-y and ldflags-y  Moreover, these flags (at least EXTRA_CFLAGS) have been documented for command line use. By default, gmake(1) do not override command line setting, so this is likely to result in build failure or unexpected behavior.  Replace their usage by Kbuild's `{as,cc,ld}flags-y'.  Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Mauro Carvalho Chehab <mchehab@infradead.org> Cc: linux-media@vger.kernel.org Signed-off-by: Arnaud Lacombe <lacombar@gmail.com> Acked-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-io.h | s | 4.8K | 163 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-firmware.h | s | 1001B | 24 | Hans Verkuil | hverkuil@xs4all.nl | 1209505301 |  | V4L/DVB (7786): cx18: new driver for the Conexant CX23418 MPEG encoder chip  Many thanks to Steve Toth from Hauppauge and Nattu Dakshinamurthy from Conexant for their support. I am in particular thankful to Hauppauge since without their help this driver would not exist. It should also be noted that Steve did the work to get the DVB part up and running. Thank you!  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Steven Toth <stoth@hauppauge.com> Signed-off-by: Michael Krufky <mkrufky@linuxtv.org> Signed-off-by: G. Andrew Walls <awalls@radix.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>
f | cx18-alsa-main.c | s | 7.1K | 239 | Hans Verkuil | hans.verkuil@cisco.com | 1337017548 |  | [media] ivtv/cx18: fix compiler warnings  media_build/v4l/cx18-alsa-main.c: In function 'cx18_alsa_exit': media_build/v4l/cx18-alsa-main.c:282:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-mailbox.c: In function 'cx18_api_call': media_build/v4l/cx18-mailbox.c:598:6: warning: variable 'state' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_capture_open': media_build/v4l/cx18-alsa-pcm.c:156:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_capture_close': media_build/v4l/cx18-alsa-pcm.c:202:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_hw_params': media_build/v4l/cx18-alsa-pcm.c:255:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-streams.c: In function 'cx18_stop_v4l2_encode_stream': media_build/v4l/cx18-streams.c:983:16: warning: variable 'then' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtv-ioctl.c: In function 'ivtv_set_speed': media_build/v4l/ivtv-ioctl.c:138:22: warning: variable 's' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtvfb.c: In function 'ivtvfb_init': media_build/v4l/ivtvfb.c:1286:6: warning: variable 'err' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtvfb.c: In function 'ivtvfb_cleanup': media_build/v4l/ivtvfb.c:1306:6: warning: variable 'err' set but not used [-Wunused-but-set-variable]  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-mailbox.h | s | 3.5K | 83 | Joe Perches | joe@perches.com | 1317139684 |  | treewide: Correct spelling of successfully in comments  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | cx18-controls.c | s | 4.0K | 116 | Hans Verkuil | hverkuil@xs4all.nl | 1300750309 |  | [media] cx18: Use the control framework  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-video.c | s | 1.1K | 29 | Hans Verkuil | hverkuil@xs4all.nl | 1239065067 |  | V4L/DVB (11380): v4l2-subdev: change s_routing prototype  It is no longer needed to use a struct pointer as argument, since v4l2_subdev doesn't require that ioctl-like approach anymore. Instead just pass the input, output and config (new!) arguments directly.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-streams.c | s | 29K | 911 | Hans Verkuil | hans.verkuil@cisco.com | 1337017548 |  | [media] ivtv/cx18: fix compiler warnings  media_build/v4l/cx18-alsa-main.c: In function 'cx18_alsa_exit': media_build/v4l/cx18-alsa-main.c:282:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-mailbox.c: In function 'cx18_api_call': media_build/v4l/cx18-mailbox.c:598:6: warning: variable 'state' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_capture_open': media_build/v4l/cx18-alsa-pcm.c:156:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_capture_close': media_build/v4l/cx18-alsa-pcm.c:202:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_hw_params': media_build/v4l/cx18-alsa-pcm.c:255:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-streams.c: In function 'cx18_stop_v4l2_encode_stream': media_build/v4l/cx18-streams.c:983:16: warning: variable 'then' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtv-ioctl.c: In function 'ivtv_set_speed': media_build/v4l/ivtv-ioctl.c:138:22: warning: variable 's' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtvfb.c: In function 'ivtvfb_init': media_build/v4l/ivtvfb.c:1286:6: warning: variable 'err' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtvfb.c: In function 'ivtvfb_cleanup': media_build/v4l/ivtvfb.c:1306:6: warning: variable 'err' set but not used [-Wunused-but-set-variable]  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx23418.h | s | 17K | 404 | Steven Toth | stoth@kernellabs.com | 1305894523 |  | [media] cx18: mmap() support for raw YUV video capture  Add support for mmap method streaming of raw YUV video on cx18-based hardware, in addition to the existing support for read() streaming of raw YUV and MPEG-2 encoded video.  [simon.farnsworth@onelan.co.uk: I forward-ported this from Steven's original work,  done under contract to ONELAN. The original code is at  http://www.kernellabs.com/hg/~stoth/cx18-videobuf]  Signed-off-by: Steven Toth <stoth@kernellabs.com> Signed-off-by: Simon Farnsworth <simon.farnsworth@onelan.co.uk> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-av-audio.c | s | 13K | 398 | Hans Verkuil | hverkuil@xs4all.nl | 1300750309 |  | [media] cx18: Use the control framework  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-fileops.h | s | 1.6K | 39 | Steven Toth | stoth@kernellabs.com | 1305894523 |  | [media] cx18: mmap() support for raw YUV video capture  Add support for mmap method streaming of raw YUV video on cx18-based hardware, in addition to the existing support for read() streaming of raw YUV and MPEG-2 encoded video.  [simon.farnsworth@onelan.co.uk: I forward-ported this from Steven's original work,  done under contract to ONELAN. The original code is at  http://www.kernellabs.com/hg/~stoth/cx18-videobuf]  Signed-off-by: Steven Toth <stoth@kernellabs.com> Signed-off-by: Simon Farnsworth <simon.farnsworth@onelan.co.uk> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-av-core.h | s | 14K | 346 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | cx18-alsa-pcm.h | s | 1.1K | 25 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-i2c.h | s | 1.0K | 27 | Jean Delvare | khali@linux-fr.org | 1322154677 |  | [media] video: Drop undue references to i2c-algo-bit  There's one comment that has been copied from bttv to many other media/video drivers:  /* init + register i2c algo-bit adapter */  Meanwhile, many drivers use hardware I2C implementations instead of relying on i2c-algo-bit, so this comment is misleading. Remove the reference to "algo-bit" from all drivers, to avoid any confusion. This is the best way to ensure that the comments won't go out of sync again. Anyone interested in the implementation details would rather look at the code itself.  Signed-off-by: Jean Delvare <khali@linux-fr.org> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-irq.h | s | 1.4K | 33 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-dvb.c | s | 16K | 536 | Devin Heitmueller | dheitmueller@kernellabs.com | 1299084356 |  | [media] cx18: Add support for Hauppauge HVR-1600 models with s5h1411  The newest variants of the HVR-1600 have an s5h1411/tda18271 for the digital frontend.  Add support for these boards.  Thanks to Hauppauge Computer Works for providing sample hardware.  [awalls@md.metrocast.net: Changed an additional log message to clarify for the end user that the driver is defaulting to an original HVR-1600 for unknown model numbers.]  Signed-off-by: Devin Heitmueller <dheitmueller@kernellabs.com> Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-vbi.c | s | 8.0K | 248 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | cx18-scb.c | s | 5.7K | 112 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-audio.c | s | 2.5K | 85 | Andy Walls | awalls@radix.net | 1245187245 |  | V4L/DVB (11624): cx18: Toggle the AI1 mux when changing the CX18_AUDIO_ENABLE register  Toggle the AI1 mux when changing the CX18_AUDIO_ENABLE register.  It's hard to reliably tell when we have written to this register successfully unless we change some bits we know we can read back.  The AI mux bits always read back what we wrote to them, so force them to toggle whenever we have to write to the register, so we can tell we wrote to the register successfully.  This change was prompted by users experiencing broadcast audio decoding problems after the cx18 module loads for the first time.  Signed-off-by: Andy Walls <awalls@radix.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-alsa-mixer.c | s | 4.7K | 147 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-queue.h | s | 3.0K | 84 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-gpio.c | s | 9.1K | 301 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-av-vbi.c | s | 8.7K | 279 | Hans Verkuil | hverkuil@xs4all.nl | 1274284728 |  | V4L/DVB: cx18: support new vbi ops to set/get VBI format  Also removed the bogus zeroing of fmt.sliced when setting up raw VBI. This should have been removed in ivtv, but it was just copied-and-pasted into cx18.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-mailbox.c | s | 24K | 765 | Hans Verkuil | hans.verkuil@cisco.com | 1339449237 |  | [media] cx18: support big-endian systems  base_addr has type resource_size_t, which may be 64 bits.  Also fix a few endian issues related to mailboxes and firmware loading.  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-gpio.h | s | 1.2K | 31 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-ioctl.h | s | 1.4K | 32 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-video.h | s | 875B | 21 | Hans Verkuil | hverkuil@xs4all.nl | 1209505301 |  | V4L/DVB (7786): cx18: new driver for the Conexant CX23418 MPEG encoder chip  Many thanks to Steve Toth from Hauppauge and Nattu Dakshinamurthy from Conexant for their support. I am in particular thankful to Hauppauge since without their help this driver would not exist. It should also be noted that Steve did the work to get the DVB part up and running. Thank you!  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Steven Toth <stoth@hauppauge.com> Signed-off-by: Michael Krufky <mkrufky@linuxtv.org> Signed-off-by: G. Andrew Walls <awalls@radix.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>
f | cx18-ioctl.c | s | 32K | 1035 | Hans Verkuil | hans.verkuil@cisco.com | 1334867035 |  | [media] V4L2: drivers implementing vidioc_default should also return -ENOTTY  If the vidioc_default implementation doesn't support the ioctl, then drivers must return -ENOTTY instead of -EINVAL.  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-alsa-mixer.h | s | 943B | 22 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-irq.c | s | 2.3K | 70 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-dvb.h | s | 946B | 23 | Andy Walls | awalls@radix.net | 1230637087 |  | V4L/DVB (9720): cx18: Major rewrite of interrupt handling for incoming mailbox processing  A major rewrite of interrupt handling for incoming mailbox processing, to split the timing critical steps from the the deferrable steps as the sending XPU on the CX23418 will time out and overwrite our incoming mailboxes rather quickly. Setup a pool of work "order forms" for the irq handler to send jobs to the new work handler routine which uses the kernel default work queue to do the deferrable work.  Started optimizing some of the cx18-io calls as they are now the low hanging fruit for recoving microseconds back from the timeline. Future optimizations will get rid of mmio read retries, mmio stats logging, and combine smaller functions in the irq path into the larger ones to save ~2 us each.  Signed-off-by: Andy Walls <awalls@radix.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | Kconfig | g | 1.1K |  | Simon Farnsworth | simon.farnsworth@onelan.co.uk | 1305894622 |  | [media] cx18: Clean up mmap() support for raw YUV  The initial version of this patch (commit d5976931639176bb6777755d96b9f8d959f79e9e) had some issues:   * It didn't correctly calculate the size of the YUV buffer for 4:2:2,    resulting in capture sometimes being offset by 1/3rd of a picture.   * There were a lot of variables duplicating information the driver    already knew, which have been removed.   * There was an in-kernel format conversion - libv4l can do this one,    and is the right place to do format conversions anyway.   * Some magic numbers weren't properly explained.  Fix all these issues, leaving just the move from videobuf to videobuf2 to do.  Signed-off-by: Simon Farnsworth <simon.farnsworth@onelan.co.uk> Acked-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-streams.h | s | 2.1K | 54 | Tejun Heo | tj@kernel.org | 1295444746 |  | [media] v4l/cx18: update workqueue usage  With cmwq, there's no reason to use separate out_work_queue.  Drop it and use system_wq instead.  The in_work_queue needs to be ordered so can't use one of the system wqs; however, as it isn't used to reclaim memory, allocate the workqueue with alloc_ordered_workqueue() without WQ_MEM_RECLAIM.  Signed-off-by: Tejun Heo <tj@kernel.org> Reviewed-by: Andy Walls <awalls@md.metrocast.net> Acked-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-i2c.c | s | 9.4K | 287 | Jean Delvare | khali@linux-fr.org | 1322154677 |  | [media] video: Drop undue references to i2c-algo-bit  There's one comment that has been copied from bttv to many other media/video drivers:  /* init + register i2c algo-bit adapter */  Meanwhile, many drivers use hardware I2C implementations instead of relying on i2c-algo-bit, so this comment is misleading. Remove the reference to "algo-bit" from all drivers, to avoid any confusion. This is the best way to ensure that the comments won't go out of sync again. Anyone interested in the implementation details would rather look at the code itself.  Signed-off-by: Jean Delvare <khali@linux-fr.org> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-av-core.c | s | 40K | 1239 | Hans Verkuil | hverkuil@xs4all.nl | 1300750309 |  | [media] cx18: Use the control framework  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-driver.c | s | 39K | 1190 | Hans Verkuil | hans.verkuil@cisco.com | 1339449237 |  | [media] cx18: support big-endian systems  base_addr has type resource_size_t, which may be 64 bits.  Also fix a few endian issues related to mailboxes and firmware loading.  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-fileops.c | s | 25K | 781 | Hans Verkuil | hans.verkuil@cisco.com | 1326715162 |  | [media] cx18: remove exclusive open of radio device  For some reason the cx18 driver could open the radio device only once. Remove this limitation.  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Acked-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-alsa-pcm.c | s | 8.9K | 290 | Hans Verkuil | hans.verkuil@cisco.com | 1337017548 |  | [media] ivtv/cx18: fix compiler warnings  media_build/v4l/cx18-alsa-main.c: In function 'cx18_alsa_exit': media_build/v4l/cx18-alsa-main.c:282:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-mailbox.c: In function 'cx18_api_call': media_build/v4l/cx18-mailbox.c:598:6: warning: variable 'state' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_capture_open': media_build/v4l/cx18-alsa-pcm.c:156:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_capture_close': media_build/v4l/cx18-alsa-pcm.c:202:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-alsa-pcm.c: In function 'snd_cx18_pcm_hw_params': media_build/v4l/cx18-alsa-pcm.c:255:6: warning: variable 'ret' set but not used [-Wunused-but-set-variable] media_build/v4l/cx18-streams.c: In function 'cx18_stop_v4l2_encode_stream': media_build/v4l/cx18-streams.c:983:16: warning: variable 'then' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtv-ioctl.c: In function 'ivtv_set_speed': media_build/v4l/ivtv-ioctl.c:138:22: warning: variable 's' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtvfb.c: In function 'ivtvfb_init': media_build/v4l/ivtvfb.c:1286:6: warning: variable 'err' set but not used [-Wunused-but-set-variable] media_build/v4l/ivtvfb.c: In function 'ivtvfb_cleanup': media_build/v4l/ivtvfb.c:1306:6: warning: variable 'err' set but not used [-Wunused-but-set-variable]  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-controls.h | s | 912B | 20 | Hans Verkuil | hverkuil@xs4all.nl | 1300750309 |  | [media] cx18: Use the control framework  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-alsa.h | s | 2.3K | 63 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-queue.c | s | 11K | 388 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-av-firmware.c | s | 7.1K | 195 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-io.c | s | 2.7K | 88 | Andy Walls | awalls@md.metrocast.net | 1275366269 |  | V4L/DVB: cx18, cx23885, v4l2 doc, MAINTAINERS: Update Andy Walls' email address  A trivial change to update my email address from my dead awalls@radix.net address to my current awalls@md.metrocast.net address.  Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-cards.c | s | 20K | 592 | Andy Walls | awalls@md.metrocast.net | 1305894414 |  | [media] cx18: Make RF analog TV work for newer HVR-1600 models with silicon tuners  A previous changes which added the newer model HVR-1600's and DTV support for them, neglected to add RF analog TV for them.  Fix RF analog TV for the newer HVR-1600's which have a worldwide analog tuner assembly with a TDA18271 tuner and TDA8295 demodulator.  Thanks go to Jeff Campbell and Mike Bradley for reproting the problem, and also to Mike Bradley for doing a lot of the legwork to figure out the tuner reset GPIO line, the demodulator I2C address, and that the GPIOs have to be reinitialized after a cardtype switch.  Reported-by: Jeff Campbell <jac1dlists@gmail.com> Tested-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Andy Walls <awalls@md.metrocast.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-version.h | s | 951B | 25 | Mauro Carvalho Chehab | mchehab@redhat.com | 1311799994 |  | [media] ivtv,cx18: Use default version control for VIDIOC_QUERYCAP  After discussing with Andy Walls on irc, we've agreed that this is the best thing to do. No regressions will be introduced, as 3.x.y is greater then the current versions for cx18 and ivtv.  Acked-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | cx18-audio.h | s | 905B | 23 | Andy Walls | awalls@radix.net | 1238427781 |  | V4L/DVB (10758): cx18: Convert I2C devices to v4l2_subdevices  This is a major perturbation to cx18 I2C device handling to convert it to the v4l2_device/subdeivce framework.  This change breaks GPIO audio multiplexer control for the time being.  It will be fixed in a coming change.  Signed-off-by: Andy Walls <awalls@radix.net> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
