f | omap_voutdef.h | s | 5.3K | 188 | Archit Taneja | archit@ti.com | 1320672118 |  | [media] OMAP_VOUT: Increase MAX_DISPLAYS to a larger value  There is no limit to the number of displays that can registered with DSS2. The current value of MAX_DISPLAYS is 3, set this to 10 so that the 'displays' member of omap2video_device struct can store more omap_dss_device pointers.  This fixes a crash seen in omap_vout_probe when DSS2 registers for more than 3 displays.  Signed-off-by: Archit Taneja <archit@ti.com> Acked-by: Vaibhav Hiremath <hvaibhav@ti.com> Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | omap_vout_vrfb.c | s | 10K | 346 | Rusty Russell | rusty@rustcorp.com.au | 1326409340 |  | module_param: make bool parameters really bool (drivers & misc)  module_param(bool) used to counter-intuitively take an int.  In fddd5201 (mid-2009) we allowed bool or int/unsigned int using a messy trick.  It's time to remove the int/unsigned int option.  For this version it'll simply give a warning, but it'll break next kernel version.  Acked-by: Mauro Carvalho Chehab <mchehab@redhat.com> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | Makefile | g | 226B |  | archit taneja | archit@ti.com | 1311800166 |  | [media] OMAP_VOUT: Create separate file for VRFB related API's  Introduce omap_vout_vrfb.c and omap_vout_vrfb.h, for all VRFB related API's, making OMAP_VOUT driver independent from VRFB. This is required for OMAP4 DSS, since OMAP4 doesn't have VRFB block.  Added new enum vout_rotation_type and "rotation_type" member to omapvideo_info, this is initialized based on the arch type in omap_vout_probe. The rotation_type var is now used to choose between vrfb and non-vrfb calls.  Signed-off-by: Archit Taneja <archit@ti.com> Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | omap_vout_vrfb.h | s | 1.4K | 37 | archit taneja | archit@ti.com | 1311800166 |  | [media] OMAP_VOUT: Create separate file for VRFB related API's  Introduce omap_vout_vrfb.c and omap_vout_vrfb.h, for all VRFB related API's, making OMAP_VOUT driver independent from VRFB. This is required for OMAP4 DSS, since OMAP4 doesn't have VRFB block.  Added new enum vout_rotation_type and "rotation_type" member to omapvideo_info, this is initialized based on the arch type in omap_vout_probe. The rotation_type var is now used to choose between vrfb and non-vrfb calls.  Signed-off-by: Archit Taneja <archit@ti.com> Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | omap_vout.c | s | 56K | 1930 | Tomi Valkeinen | tomi.valkeinen@ti.com | 1327339637 |  | [media] omap_vout: fix section mismatch  Fix the following warning by using platform_driver_probe() instead of platform_driver_register():  WARNING: drivers/media/video/omap/omap-vout.o(.data+0x24): Section mismatch in reference from the variable omap_vout_driver to the function .init.text:omap_vout_probe() The variable omap_vout_driver references the function __init omap_vout_probe()  Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com> Acked-by: Vaibhav Hiremath <hvaibhav@ti.com> Tested-by: Vaibhav Hiremath <hvaibhav@ti.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | omap_voutlib.c | s | 10K | 302 | archit taneja | archit@ti.com | 1311800165 |  | [media] OMAP_VOUT: CLEANUP: Move generic functions and macros to common files  Move the inline functions rotate_90_or_270(), rotation_enabled(), and calc_rotation() from omap_vout.c to omap_voutdef.h.  Move the independent functions omap_vout_alloc_buffer() and omap_vout_free_buffer() to omap_voutlib.c.  Remove extern identifier from function definitions in omap_voutlib.h  Add static identifier to functions that are used locally in omap_vout.c  Signed-off-by: Archit Taneja <archit@ti.com> Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | Kconfig | g | 399B |  | archit taneja | archit@ti.com | 1311800166 |  | [media] OMAP_VOUT: Create separate file for VRFB related API's  Introduce omap_vout_vrfb.c and omap_vout_vrfb.h, for all VRFB related API's, making OMAP_VOUT driver independent from VRFB. This is required for OMAP4 DSS, since OMAP4 doesn't have VRFB block.  Added new enum vout_rotation_type and "rotation_type" member to omapvideo_info, this is initialized based on the arch type in omap_vout_probe. The rotation_type var is now used to choose between vrfb and non-vrfb calls.  Signed-off-by: Archit Taneja <archit@ti.com> Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | omap_voutlib.h | s | 1.1K | 29 | archit taneja | archit@ti.com | 1311800165 |  | [media] OMAP_VOUT: CLEANUP: Move generic functions and macros to common files  Move the inline functions rotate_90_or_270(), rotation_enabled(), and calc_rotation() from omap_vout.c to omap_voutdef.h.  Move the independent functions omap_vout_alloc_buffer() and omap_vout_free_buffer() to omap_voutlib.c.  Remove extern identifier from function definitions in omap_voutlib.h  Add static identifier to functions that are used locally in omap_vout.c  Signed-off-by: Archit Taneja <archit@ti.com> Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
