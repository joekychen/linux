<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › media › dvb › dvb-core › demux.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>demux.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * demux.h</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (c) 2002 Convergence GmbH</span>
<span class="cm"> *</span>
<span class="cm"> * based on code:</span>
<span class="cm"> * Copyright (c) 2000 Nokia Research Center</span>
<span class="cm"> *                    Tampere, FINLAND</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU Lesser General Public License</span>
<span class="cm"> * as published by the Free Software Foundation; either version 2.1</span>
<span class="cm"> * of the License, or (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU Lesser General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __DEMUX_H</span>
<span class="cp">#define __DEMUX_H</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/errno.h&gt;</span>
<span class="cp">#include &lt;linux/list.h&gt;</span>
<span class="cp">#include &lt;linux/time.h&gt;</span>
<span class="cp">#include &lt;linux/dvb/dmx.h&gt;</span>

<span class="cm">/*--------------------------------------------------------------------------*/</span>
<span class="cm">/* Common definitions */</span>
<span class="cm">/*--------------------------------------------------------------------------*/</span>

<span class="cm">/*</span>
<span class="cm"> * DMX_MAX_FILTER_SIZE: Maximum length (in bytes) of a section/PES filter.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef DMX_MAX_FILTER_SIZE</span>
<span class="cp">#define DMX_MAX_FILTER_SIZE 18</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * DMX_MAX_SECFEED_SIZE: Maximum length (in bytes) of a private section feed filter.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef DMX_MAX_SECTION_SIZE</span>
<span class="cp">#define DMX_MAX_SECTION_SIZE 4096</span>
<span class="cp">#endif</span>
<span class="cp">#ifndef DMX_MAX_SECFEED_SIZE</span>
<span class="cp">#define DMX_MAX_SECFEED_SIZE (DMX_MAX_SECTION_SIZE + 188)</span>
<span class="cp">#endif</span>


<span class="cm">/*</span>
<span class="cm"> * enum dmx_success: Success codes for the Demux Callback API.</span>
<span class="cm"> */</span>

<span class="k">enum</span> <span class="n">dmx_success</span> <span class="p">{</span>
  <span class="n">DMX_OK</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="cm">/* Received Ok */</span>
  <span class="n">DMX_LENGTH_ERROR</span><span class="p">,</span> <span class="cm">/* Incorrect length */</span>
  <span class="n">DMX_OVERRUN_ERROR</span><span class="p">,</span> <span class="cm">/* Receiver ring buffer overrun */</span>
  <span class="n">DMX_CRC_ERROR</span><span class="p">,</span> <span class="cm">/* Incorrect CRC */</span>
  <span class="n">DMX_FRAME_ERROR</span><span class="p">,</span> <span class="cm">/* Frame alignment error */</span>
  <span class="n">DMX_FIFO_ERROR</span><span class="p">,</span> <span class="cm">/* Receiver FIFO overrun */</span>
  <span class="n">DMX_MISSED_ERROR</span> <span class="cm">/* Receiver missed packet */</span>
<span class="p">}</span> <span class="p">;</span>

<span class="cm">/*--------------------------------------------------------------------------*/</span>
<span class="cm">/* TS packet reception */</span>
<span class="cm">/*--------------------------------------------------------------------------*/</span>

<span class="cm">/* TS filter type for set() */</span>

<span class="cp">#define TS_PACKET       1   </span><span class="cm">/* send TS packets (188 bytes) to callback (default) */</span><span class="cp"></span>
<span class="cp">#define	TS_PAYLOAD_ONLY 2   </span><span class="cm">/* in case TS_PACKET is set, only send the TS</span>
<span class="cm">			       payload (&lt;=184 bytes per packet) to callback */</span><span class="cp"></span>
<span class="cp">#define TS_DECODER      4   </span><span class="cm">/* send stream to built-in decoder (if present) */</span><span class="cp"></span>
<span class="cp">#define TS_DEMUX        8   </span><span class="cm">/* in case TS_PACKET is set, send the TS to</span>
<span class="cm">			       the demux device, not to the dvr device */</span><span class="cp"></span>

<span class="cm">/* PES type for filters which write to built-in decoder */</span>
<span class="cm">/* these should be kept identical to the types in dmx.h */</span>

<span class="k">enum</span> <span class="n">dmx_ts_pes</span>
<span class="p">{</span>  <span class="cm">/* also send packets to decoder (if it exists) */</span>
	<span class="n">DMX_TS_PES_AUDIO0</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_VIDEO0</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_TELETEXT0</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_SUBTITLE0</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_PCR0</span><span class="p">,</span>

	<span class="n">DMX_TS_PES_AUDIO1</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_VIDEO1</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_TELETEXT1</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_SUBTITLE1</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_PCR1</span><span class="p">,</span>

	<span class="n">DMX_TS_PES_AUDIO2</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_VIDEO2</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_TELETEXT2</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_SUBTITLE2</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_PCR2</span><span class="p">,</span>

	<span class="n">DMX_TS_PES_AUDIO3</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_VIDEO3</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_TELETEXT3</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_SUBTITLE3</span><span class="p">,</span>
	<span class="n">DMX_TS_PES_PCR3</span><span class="p">,</span>

	<span class="n">DMX_TS_PES_OTHER</span>
<span class="p">};</span>

<span class="cp">#define DMX_TS_PES_AUDIO    DMX_TS_PES_AUDIO0</span>
<span class="cp">#define DMX_TS_PES_VIDEO    DMX_TS_PES_VIDEO0</span>
<span class="cp">#define DMX_TS_PES_TELETEXT DMX_TS_PES_TELETEXT0</span>
<span class="cp">#define DMX_TS_PES_SUBTITLE DMX_TS_PES_SUBTITLE0</span>
<span class="cp">#define DMX_TS_PES_PCR      DMX_TS_PES_PCR0</span>


<span class="k">struct</span> <span class="n">dmx_ts_feed</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">is_filtering</span><span class="p">;</span> <span class="cm">/* Set to non-zero when filtering in progress */</span>
	<span class="k">struct</span> <span class="n">dmx_demux</span> <span class="o">*</span><span class="n">parent</span><span class="p">;</span> <span class="cm">/* Back-pointer */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">priv</span><span class="p">;</span> <span class="cm">/* Pointer to private data of the API client */</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_ts_feed</span> <span class="o">*</span><span class="n">feed</span><span class="p">,</span>
		    <span class="n">u16</span> <span class="n">pid</span><span class="p">,</span>
		    <span class="kt">int</span> <span class="n">type</span><span class="p">,</span>
		    <span class="k">enum</span> <span class="n">dmx_ts_pes</span> <span class="n">pes_type</span><span class="p">,</span>
		    <span class="kt">size_t</span> <span class="n">circular_buffer_size</span><span class="p">,</span>
		    <span class="k">struct</span> <span class="n">timespec</span> <span class="n">timeout</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">start_filtering</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_ts_feed</span><span class="o">*</span> <span class="n">feed</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">stop_filtering</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_ts_feed</span><span class="o">*</span> <span class="n">feed</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/*--------------------------------------------------------------------------*/</span>
<span class="cm">/* Section reception */</span>
<span class="cm">/*--------------------------------------------------------------------------*/</span>

<span class="k">struct</span> <span class="n">dmx_section_filter</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">filter_value</span> <span class="p">[</span><span class="n">DMX_MAX_FILTER_SIZE</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">filter_mask</span> <span class="p">[</span><span class="n">DMX_MAX_FILTER_SIZE</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">filter_mode</span> <span class="p">[</span><span class="n">DMX_MAX_FILTER_SIZE</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">dmx_section_feed</span><span class="o">*</span> <span class="n">parent</span><span class="p">;</span> <span class="cm">/* Back-pointer */</span>
	<span class="kt">void</span><span class="o">*</span> <span class="n">priv</span><span class="p">;</span> <span class="cm">/* Pointer to private data of the API client */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">dmx_section_feed</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">is_filtering</span><span class="p">;</span> <span class="cm">/* Set to non-zero when filtering in progress */</span>
	<span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">parent</span><span class="p">;</span> <span class="cm">/* Back-pointer */</span>
	<span class="kt">void</span><span class="o">*</span> <span class="n">priv</span><span class="p">;</span> <span class="cm">/* Pointer to private data of the API client */</span>

	<span class="kt">int</span> <span class="n">check_crc</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">crc_val</span><span class="p">;</span>

	<span class="n">u8</span> <span class="o">*</span><span class="n">secbuf</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">secbuf_base</span><span class="p">[</span><span class="n">DMX_MAX_SECFEED_SIZE</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">secbufp</span><span class="p">,</span> <span class="n">seclen</span><span class="p">,</span> <span class="n">tsfeedp</span><span class="p">;</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_section_feed</span><span class="o">*</span> <span class="n">feed</span><span class="p">,</span>
		    <span class="n">u16</span> <span class="n">pid</span><span class="p">,</span>
		    <span class="kt">size_t</span> <span class="n">circular_buffer_size</span><span class="p">,</span>
		    <span class="kt">int</span> <span class="n">check_crc</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">allocate_filter</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_section_feed</span><span class="o">*</span> <span class="n">feed</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">dmx_section_filter</span><span class="o">**</span> <span class="n">filter</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">release_filter</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_section_feed</span><span class="o">*</span> <span class="n">feed</span><span class="p">,</span>
			       <span class="k">struct</span> <span class="n">dmx_section_filter</span><span class="o">*</span> <span class="n">filter</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">start_filtering</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_section_feed</span><span class="o">*</span> <span class="n">feed</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">stop_filtering</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_section_feed</span><span class="o">*</span> <span class="n">feed</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/*--------------------------------------------------------------------------*/</span>
<span class="cm">/* Callback functions */</span>
<span class="cm">/*--------------------------------------------------------------------------*/</span>

<span class="k">typedef</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">dmx_ts_cb</span><span class="p">)</span> <span class="p">(</span> <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span> <span class="n">buffer1</span><span class="p">,</span>
			   <span class="kt">size_t</span> <span class="n">buffer1_length</span><span class="p">,</span>
			   <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span> <span class="n">buffer2</span><span class="p">,</span>
			   <span class="kt">size_t</span> <span class="n">buffer2_length</span><span class="p">,</span>
			   <span class="k">struct</span> <span class="n">dmx_ts_feed</span><span class="o">*</span> <span class="n">source</span><span class="p">,</span>
			   <span class="k">enum</span> <span class="n">dmx_success</span> <span class="n">success</span><span class="p">);</span>

<span class="k">typedef</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">dmx_section_cb</span><span class="p">)</span> <span class="p">(</span>	<span class="k">const</span> <span class="n">u8</span> <span class="o">*</span> <span class="n">buffer1</span><span class="p">,</span>
				<span class="kt">size_t</span> <span class="n">buffer1_len</span><span class="p">,</span>
				<span class="k">const</span> <span class="n">u8</span> <span class="o">*</span> <span class="n">buffer2</span><span class="p">,</span>
				<span class="kt">size_t</span> <span class="n">buffer2_len</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">dmx_section_filter</span> <span class="o">*</span> <span class="n">source</span><span class="p">,</span>
				<span class="k">enum</span> <span class="n">dmx_success</span> <span class="n">success</span><span class="p">);</span>

<span class="cm">/*--------------------------------------------------------------------------*/</span>
<span class="cm">/* DVB Front-End */</span>
<span class="cm">/*--------------------------------------------------------------------------*/</span>

<span class="k">enum</span> <span class="n">dmx_frontend_source</span> <span class="p">{</span>
	<span class="n">DMX_MEMORY_FE</span><span class="p">,</span>
	<span class="n">DMX_FRONTEND_0</span><span class="p">,</span>
	<span class="n">DMX_FRONTEND_1</span><span class="p">,</span>
	<span class="n">DMX_FRONTEND_2</span><span class="p">,</span>
	<span class="n">DMX_FRONTEND_3</span><span class="p">,</span>
	<span class="n">DMX_STREAM_0</span><span class="p">,</span>    <span class="cm">/* external stream input, e.g. LVDS */</span>
	<span class="n">DMX_STREAM_1</span><span class="p">,</span>
	<span class="n">DMX_STREAM_2</span><span class="p">,</span>
	<span class="n">DMX_STREAM_3</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">dmx_frontend</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">connectivity_list</span><span class="p">;</span> <span class="cm">/* List of front-ends that can</span>
<span class="cm">					       be connected to a particular</span>
<span class="cm">					       demux */</span>
	<span class="k">enum</span> <span class="n">dmx_frontend_source</span> <span class="n">source</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*--------------------------------------------------------------------------*/</span>
<span class="cm">/* MPEG-2 TS Demux */</span>
<span class="cm">/*--------------------------------------------------------------------------*/</span>

<span class="cm">/*</span>
<span class="cm"> * Flags OR&#39;ed in the capabilities field of struct dmx_demux.</span>
<span class="cm"> */</span>

<span class="cp">#define DMX_TS_FILTERING                        1</span>
<span class="cp">#define DMX_PES_FILTERING                       2</span>
<span class="cp">#define DMX_SECTION_FILTERING                   4</span>
<span class="cp">#define DMX_MEMORY_BASED_FILTERING              8    </span><span class="cm">/* write() available */</span><span class="cp"></span>
<span class="cp">#define DMX_CRC_CHECKING                        16</span>
<span class="cp">#define DMX_TS_DESCRAMBLING                     32</span>

<span class="cm">/*</span>
<span class="cm"> * Demux resource type identifier.</span>
<span class="cm">*/</span>

<span class="cm">/*</span>
<span class="cm"> * DMX_FE_ENTRY(): Casts elements in the list of registered</span>
<span class="cm"> * front-ends from the generic type struct list_head</span>
<span class="cm"> * to the type * struct dmx_frontend</span>
<span class="cm"> *.</span>
<span class="cm">*/</span>

<span class="cp">#define DMX_FE_ENTRY(list) list_entry(list, struct dmx_frontend, connectivity_list)</span>

<span class="k">struct</span> <span class="n">dmx_demux</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">capabilities</span><span class="p">;</span>            <span class="cm">/* Bitfield of capability flags */</span>
	<span class="k">struct</span> <span class="n">dmx_frontend</span><span class="o">*</span> <span class="n">frontend</span><span class="p">;</span>    <span class="cm">/* Front-end connected to the demux */</span>
	<span class="kt">void</span><span class="o">*</span> <span class="n">priv</span><span class="p">;</span>                  <span class="cm">/* Pointer to private data of the API client */</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">open</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">close</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">write</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">count</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">allocate_ts_feed</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">dmx_ts_feed</span><span class="o">**</span> <span class="n">feed</span><span class="p">,</span>
				 <span class="n">dmx_ts_cb</span> <span class="n">callback</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">release_ts_feed</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">dmx_ts_feed</span><span class="o">*</span> <span class="n">feed</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">allocate_section_feed</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">,</span>
				      <span class="k">struct</span> <span class="n">dmx_section_feed</span><span class="o">**</span> <span class="n">feed</span><span class="p">,</span>
				      <span class="n">dmx_section_cb</span> <span class="n">callback</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">release_section_feed</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">dmx_section_feed</span><span class="o">*</span> <span class="n">feed</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">add_frontend</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">,</span>
			     <span class="k">struct</span> <span class="n">dmx_frontend</span><span class="o">*</span> <span class="n">frontend</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">remove_frontend</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">dmx_frontend</span><span class="o">*</span> <span class="n">frontend</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">list_head</span><span class="o">*</span> <span class="p">(</span><span class="o">*</span><span class="n">get_frontends</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">connect_frontend</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">dmx_frontend</span><span class="o">*</span> <span class="n">frontend</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">disconnect_frontend</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">get_pes_pids</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">pids</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">get_caps</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">,</span> <span class="k">struct</span> <span class="n">dmx_caps</span> <span class="o">*</span><span class="n">caps</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_source</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">,</span> <span class="k">const</span> <span class="n">dmx_source_t</span> <span class="o">*</span><span class="n">src</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">get_stc</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dmx_demux</span><span class="o">*</span> <span class="n">demux</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">num</span><span class="p">,</span>
			<span class="n">u64</span> <span class="o">*</span><span class="n">stc</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">base</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* #ifndef __DEMUX_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
