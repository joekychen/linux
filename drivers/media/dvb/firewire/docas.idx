f | firedtv-avc.c | s | 39K | 1199 | Mauro Carvalho Chehab | mchehab@redhat.com | 1325332660 |  | [media] firedtv: convert set_fontend to use DVBv5 parameters  Instead of using dvb_frontend_parameters struct, that were designed for a subset of the supported standards, use the DVBv5 cache information.  Also, fill the supported delivery systems at dvb_frontend_ops struct.  Cc: Stefan Richter <stefanr@s5r6.in-berlin.de> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | firedtv.h | s | 5.0K | 147 | Mauro Carvalho Chehab | mchehab@redhat.com | 1325332660 |  | [media] firedtv: convert set_fontend to use DVBv5 parameters  Instead of using dvb_frontend_parameters struct, that were designed for a subset of the supported standards, use the DVBv5 cache information.  Also, fill the supported delivery systems at dvb_frontend_ops struct.  Cc: Stefan Richter <stefanr@s5r6.in-berlin.de> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | firedtv-rc.c | s | 4.0K | 173 | Stefan Richter | stefanr@s5r6.in-berlin.de | 1295444759 |  | [media] firedtv: fix remote control with newer Xorg evdev  After a recent update of xf86-input-evdev and xorg-server, I noticed that X11 applications did not receive keypresses from the FireDTV infrared remote control anymore.  Instead, the Xorg log featured lots of      "FireDTV remote control: dropping event due to full queue!"  exclamations.  The Linux console did not have an issue with the FireDTV's RC though.  The fix is to insert EV_SYN events after the key-down/-up events.  Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | Makefile | g | 218B |  | Hans Verkuil | hverkuil@xs4all.nl | 1300750332 |  | [media] firedtv: remove obsolete ieee1394 backend code  drivers/ieee1394/ has been removed in Linux 2.6.37.  The corresponding backend code in firedtv is no longer built in now and can be deleted. Firedtv continues to work with drivers/firewire/.  Also, fix a Kconfig menu comment:  Removal of CONFIG_IEEE1394 made the "Supported FireWire (IEEE 1394) Adapters" comment disappear; bring it back with corrected dependency.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Reviewed-by: Stefan Richter <stefanr@s5r6.in-berlin.de> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | firedtv-fe.c | s | 5.8K | 203 | Mauro Carvalho Chehab | mchehab@redhat.com | 1325725819 |  | [media] Don't test for ops->info.type inside drivers  Now, ops->info.type is handled inside the dvb_frontend core, only for DVBv3 calls, and according with the delivery system. So, drivers should not care or use it, otherwise, it may have issues with DVBv5 calls.  The drivers that were still using it were detected via this small temporary hack:  --- a/include/linux/dvb/frontend.h +++ b/include/linux/dvb/frontend.h @@ -29,13 +29,16 @@  #include <linux/types.h>   typedef enum fe_type { +#if defined(__DVB_CORE__) |||| !defined (__KERNEL__)         FE_QPSK,         FE_QAM,         FE_OFDM,         FE_ATSC +#else +FE_FOOO +#endif  } fe_type_t;  -  typedef enum fe_caps {         FE_IS_STUPID                    = 0,         FE_CAN_INVERSION_AUTO           = 0x1,  Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | firedtv-dvb.c | s | 5.8K | 206 | Jonathan Nieder | jrnieder@gmail.com | 1325861486 |  | [media] firedtv: handle errors from dvb_net_init  It is not common for dvb_net_init to fail, but after the patch "dvb_net_init: return -errno on error" it can fail due to running out of memory.  Handle this.  From an audit of dvb_net_init callers.  Signed-off-by: Jonathan Nieder <jrnieder@gmail.com> Reviewed-by: Stefan Richter <stefanr@s5r6.in-berlin.de> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | firedtv-fw.c | s | 10K | 350 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | firedtv-ci.c | s | 5.6K | 218 | Stefan Richter | stefanr@s5r6.in-berlin.de | 1311800018 |  | [media] firedtv: change some -EFAULT returns to more fitting error codes  Mauro Carvalho Chehab wrote: > I'm validating if all drivers are behaving equally with respect to the > error codes returned to userspace, and double-checking with the API. > > On almost all places, -EFAULT code is used only to indicate when > copy_from_user/copy_to_user fails. However, firedtv uses a lot of > -EFAULT, where it seems to me that other error codes should be used > instead (like -EIO for bus transfer errors and -EINVAL/-ERANGE for > invalid/out of range parameters).  This concerns only the CI (CAM) related code of firedtv of which I know little.  Let's just pass through the error returns of lower level I/O code where applicable, and -EACCES (permission denied) when a seemingly valid but negative FCP response or an unknown-to-firedtv CA message is received.  Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de> Cc: Henrik Kurelid <henrik@kurelid.se> Acked-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | Kconfig | g | 513B |  | Hans Verkuil | hverkuil@xs4all.nl | 1300750332 |  | [media] firedtv: remove obsolete ieee1394 backend code  drivers/ieee1394/ has been removed in Linux 2.6.37.  The corresponding backend code in firedtv is no longer built in now and can be deleted. Firedtv continues to work with drivers/firewire/.  Also, fix a Kconfig menu comment:  Removal of CONFIG_IEEE1394 made the "Supported FireWire (IEEE 1394) Adapters" comment disappear; bring it back with corrected dependency.  Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl> Reviewed-by: Stefan Richter <stefanr@s5r6.in-berlin.de> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
