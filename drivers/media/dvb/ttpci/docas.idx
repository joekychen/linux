f | Makefile | g | 676B |  | Arnaud Lacombe | lacombar@gmail.com | 1315086659 |  | [media] drivers/media: do not use EXTRA_CFLAGS  Usage of these flags has been deprecated for nearly 4 years by:      commit f77bf01425b11947eeb3b5b54685212c302741b8     Author: Sam Ravnborg <sam@neptun.(none)>     Date:   Mon Oct 15 22:25:06 2007 +0200          kbuild: introduce ccflags-y, asflags-y and ldflags-y  Moreover, these flags (at least EXTRA_CFLAGS) have been documented for command line use. By default, gmake(1) do not override command line setting, so this is likely to result in build failure or unexpected behavior.  Replace their usage by Kbuild's `{as,cc,ld}flags-y'.  Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Mauro Carvalho Chehab <mchehab@infradead.org> Cc: linux-media@vger.kernel.org Signed-off-by: Arnaud Lacombe <lacombar@gmail.com> Acked-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | budget.h | s | 3.0K | 96 | Julian Scheel | julian@jusst.de | 1314452506 |  | [media] Add support for new revision of KNC 1 DVB-C cards. Using tda10024 instead of tda10023, which is compatible to tda10023 driver  Signed-off-by: Julian Scheel <julian@jusst.de> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | av7110_ca.h | s | 441B | 10 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | av7110_ipack.h | s | 402B | 9 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | budget.c | s | 23K | 678 | Mauro Carvalho Chehab | mchehab@redhat.com | 1325329049 |  | [media] tuners: remove dvb_frontend_parameters from set_params()  This is a big patch, yet trivial: now that all tuners use the DVBv5 way to pass parameters (e. g. via fe->dtv_property_cache), the extra parameter can be removed from set_params() call.  After this change, very few DVBv3 specific stuff are left at the tuners.  Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | budget-patch.c | s | 20K | 564 | Mauro Carvalho Chehab | mchehab@redhat.com | 1325329049 |  | [media] tuners: remove dvb_frontend_parameters from set_params()  This is a big patch, yet trivial: now that all tuners use the DVBv5 way to pass parameters (e. g. via fe->dtv_property_cache), the extra parameter can be removed from set_params() call.  After this change, very few DVBv3 specific stuff are left at the tuners.  Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | av7110_av.c | s | 39K | 1377 | Linus Torvalds | torvalds@linux-foundation.org | 1288283711 |  | Merge branch 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-2.6  * 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-2.6: (505 commits)   [media] af9015: Fix max I2C message size when used with tda18271   [media] IR: initialize ir_raw_event in few more drivers   [media] Guard a divide in v4l1 compat layer   [media] imon: fix nomouse modprobe option   [media] imon: remove redundant change_protocol call   [media] imon: fix my egregious brown paper bag w/rdev/idev split   [media] cafe_ccic: Configure ov7670 correctly   [media] ov7670: allow configuration of image size, clock speed, and I/O method   [media] af9015: support for DigitalNow TinyTwin v3 [1f4d:9016]   [media] af9015: map DigitalNow TinyTwin v2 remote   [media] DigitalNow TinyTwin remote controller   [media] af9015: RC fixes and improvements   videodev2.h.xml: Update to reflect the latest changes at videodev2.h   [media] v4l: document new Bayer and monochrome pixel formats   [media] DocBook/v4l: Add missing formats used on gspca cpia1 and sn9c2028   [media] firedtv: add parameter to fake ca_system_ids in CA_INFO   [media] tm6000: fix a macro coding style issue   tm6000: Remove some ugly debug code   [media] Nova-S-Plus audio line input   [media] [RFC,1/1] V4L2: Use new CAP bits in existing RDS capable drivers   ...
f | av7110_hw.c | s | 31K | 1049 | Justin P. Mattock | justinmattock@gmail.com | 1287392594 |  | Update broken web addresses in the kernel.  The patch below updates broken web addresses in the kernel  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Cc: Maciej W. Rozycki <macro@linux-mips.org> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Cc: Finn Thain <fthain@telegraphics.com.au> Cc: Randy Dunlap <rdunlap@xenotime.net> Cc: Matt Turner <mattst88@gmail.com> Cc: Dimitry Torokhov <dmitry.torokhov@gmail.com> Cc: Mike Frysinger <vapier.adi@gmail.com> Acked-by: Ben Pfaff <blp@cs.stanford.edu> Acked-by: Hans J. Koch <hjk@linutronix.de> Reviewed-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | budget-av.c | s | 44K | 1413 | Hans Verkuil | hans.verkuil@cisco.com | 1337018449 |  | [media] saa7146: fix querycap, vbi/video separation and g/s_register  The querycap ioctl returned an incorrect version number and incorrect capabilities (mixing up vbi and video caps).  The reason for that was that video nodes could do vbi activities: that should be separated between the vbi and video nodes.  There were also a few minor problems with dbg_g/s_register that have been resolved. The mxb/saa7146 driver now passes the v4l2_compliance tests.  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | ttpci-eeprom.c | s | 4.7K | 139 | Igor M. Liplianin | liplianin@me.by | 1316833662 |  | [media] dvb: Add support for pctv452e  Signed-off-by: Igor M. Liplianin <liplianin@me.by> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | av7110_hw.h | s | 12K | 412 | Jaswinder Singh | jaswinder@infradead.org | 1239053652 |  | firmware: convert av7110 driver to request_firmware()  Signed-off-by: Jaswinder Singh <jaswinder@infradead.org> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | av7110_ipack.c | s | 7.8K | 360 | Christophe Lucas | clucas@rotomalug.org | 1120785838 |  | [PATCH] dvb: ttpci: kj printk fix  printk() calls should include appropriate KERN_* constant.  Signed-off-by: Christophe Lucas <clucas@rotomalug.org> Signed-off-by: Domen Puncer <domen@coderock.org> Signed-off-by: Johannes Stezenbach <js@linuxtv.org> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
f | budget-ci.c | s | 44K | 1390 | Mauro Carvalho Chehab | mchehab@redhat.com | 1325329049 |  | [media] tuners: remove dvb_frontend_parameters from set_params()  This is a big patch, yet trivial: now that all tuners use the DVBv5 way to pass parameters (e. g. via fe->dtv_property_cache), the extra parameter can be removed from set_params() call.  After this change, very few DVBv3 specific stuff are left at the tuners.  Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | av7110.c | s | 80K | 2467 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | ttpci-eeprom.h | s | 1.2K | 25 | Igor M. Liplianin | liplianin@me.by | 1316833662 |  | [media] dvb: Add support for pctv452e  Signed-off-by: Igor M. Liplianin <liplianin@me.by> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | av7110_av.h | s | 1.2K | 21 | Marco Schluessler | marco@lordzodiac.de | 1201294912 |  | V4L/DVB (6497): saa7146/budget*/dvb-ttpci: Remove V4L1 code  Remove V4L1 code.  Signed-off-by: Marco Schluessler <marco@lordzodiac.de> Signed-off-by: Oliver Endriss <o.endriss@gmx.de> Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>
f | av7110_v4l.c | s | 28K | 834 | Hans Verkuil | hans.verkuil@cisco.com | 1337018651 |  | [media] av7110: fix v4l2_compliance test issues  Besides the usual inconsistencies in input enumeration there was also a kernel crash if you tried to poll on a vbi node. The checks for sliced vbi output vs vbi capture were not complete enough.  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | av7110_ca.c | s | 9.0K | 325 | Dan Carpenter | error27@gmail.com | 1295444754 |  | [media] [v3,media] av7110: check for negative array offset  info->num comes from the user.  It's type int.  If the user passes in a negative value that would cause memory corruption.  Signed-off-by: Dan Carpenter <error27@gmail.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | Kconfig | g | 5.5K |  | Oliver Endriss | o.endriss@gmx.de | 1305894510 |  | [media] budget-ci: Add support for TT S-1500 with BSBE1-D01A tuner  Add support for TT S-1500 with BSBE1-D01A tuner.  Signed-off-by: Oliver Endriss <o.endriss@gmx.de> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | budget-core.c | s | 16K | 479 | Julian Scheel | julian@jusst.de | 1314452506 |  | [media] Add support for new revision of KNC 1 DVB-C cards. Using tda10024 instead of tda10023, which is compatible to tda10023 driver  Signed-off-by: Julian Scheel <julian@jusst.de> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | av7110_ir.c | s | 11K | 333 | Arnd Bergmann | arnd@arndb.de | 1287150807 |  | llseek: automatically add .llseek fop  All file_operations should get a .llseek operation so we can make nonseekable_open the default for future file operations without a .llseek pointer.  The three cases that we can automatically detect are no_llseek, seq_lseek and default_llseek. For cases where we can we can automatically prove that the file offset is always ignored, we use noop_llseek, which maintains the current behavior of not returning an error from a seek.  New drivers should normally not use noop_llseek but instead use no_llseek and call nonseekable_open at open time.  Existing drivers can be converted to do the same when the maintainer knows for certain that no user code relies on calling seek on the device file.  The generated code is often incorrectly indented and right now contains comments that clarify for each added line why a specific variant was chosen. In the version that gets submitted upstream, the comments will be gone and I will manually fix the indentation, because there does not seem to be a way to do that using coccinelle.  Some amount of new code is currently sitting in linux-next that should get the same modifications, which I will do at the end of the merge window.  Many thanks to Julia Lawall for helping me learn to write a semantic patch that does all this.  ===== begin semantic patch ===== // This adds an llseek= method to all file operations, // as a preparation for making no_llseek the default. // // The rules are // - use no_llseek explicitly if we do nonseekable_open // - use seq_lseek for sequential files // - use default_llseek if we know we access f_pos // - use noop_llseek if we know we don't access f_pos, //   but we still want to allow users to call lseek // @ open1 exists @ identifier nested_open; @@ nested_open(...) { <+... nonseekable_open(...) ...+> }  @ open exists@ identifier open_f; identifier i, f; identifier open1.nested_open; @@ int open_f(struct inode *i, struct file *f) { <+... ( nonseekable_open(...) || nested_open(...) ) ...+> }  @ read disable optional_qualifier exists @ identifier read_f; identifier f, p, s, off; type ssize_t, size_t, loff_t; expression E; identifier func; @@ ssize_t read_f(struct file *f, char *p, size_t s, loff_t *off) { <+... (    *off = E ||    *off += E ||    func(..., off, ...) ||    E = *off ) ...+> }  @ read_no_fpos disable optional_qualifier exists @ identifier read_f; identifier f, p, s, off; type ssize_t, size_t, loff_t; @@ ssize_t read_f(struct file *f, char *p, size_t s, loff_t *off) { ... when != off }  @ write @ identifier write_f; identifier f, p, s, off; type ssize_t, size_t, loff_t; expression E; identifier func; @@ ssize_t write_f(struct file *f, const char *p, size_t s, loff_t *off) { <+... (   *off = E ||   *off += E ||   func(..., off, ...) ||   E = *off ) ...+> }  @ write_no_fpos @ identifier write_f; identifier f, p, s, off; type ssize_t, size_t, loff_t; @@ ssize_t write_f(struct file *f, const char *p, size_t s, loff_t *off) { ... when != off }  @ fops0 @ identifier fops; @@ struct file_operations fops = {  ... };  @ has_llseek depends on fops0 @ identifier fops0.fops; identifier llseek_f; @@ struct file_operations fops = { ...  .llseek = llseek_f, ... };  @ has_read depends on fops0 @ identifier fops0.fops; identifier read_f; @@ struct file_operations fops = { ...  .read = read_f, ... };  @ has_write depends on fops0 @ identifier fops0.fops; identifier write_f; @@ struct file_operations fops = { ...  .write = write_f, ... };  @ has_open depends on fops0 @ identifier fops0.fops; identifier open_f; @@ struct file_operations fops = { ...  .open = open_f, ... };  // use no_llseek if we call nonseekable_open //////////////////////////////////////////// @ nonseekable1 depends on !has_llseek && has_open @ identifier fops0.fops; identifier nso ~= "nonseekable_open"; @@ struct file_operations fops = { ...  .open = nso, ... +.llseek = no_llseek, /* nonseekable */ };  @ nonseekable2 depends on !has_llseek @ identifier fops0.fops; identifier open.open_f; @@ struct file_operations fops = { ...  .open = open_f, ... +.llseek = no_llseek, /* open uses nonseekable */ };  // use seq_lseek for sequential files ///////////////////////////////////// @ seq depends on !has_llseek @ identifier fops0.fops; identifier sr ~= "seq_read"; @@ struct file_operations fops = { ...  .read = sr, ... +.llseek = seq_lseek, /* we have seq_read */ };  // use default_llseek if there is a readdir /////////////////////////////////////////// @ fops1 depends on !has_llseek && !nonseekable1 && !nonseekable2 && !seq @ identifier fops0.fops; identifier readdir_e; @@ // any other fop is used that changes pos struct file_operations fops = { ... .readdir = readdir_e, ... +.llseek = default_llseek, /* readdir is present */ };  // use default_llseek if at least one of read/write touches f_pos ///////////////////////////////////////////////////////////////// @ fops2 depends on !fops1 && !has_llseek && !nonseekable1 && !nonseekable2 && !seq @ identifier fops0.fops; identifier read.read_f; @@ // read fops use offset struct file_operations fops = { ... .read = read_f, ... +.llseek = default_llseek, /* read accesses f_pos */ };  @ fops3 depends on !fops1 && !fops2 && !has_llseek && !nonseekable1 && !nonseekable2 && !seq @ identifier fops0.fops; identifier write.write_f; @@ // write fops use offset struct file_operations fops = { ... .write = write_f, ... +	.llseek = default_llseek, /* write accesses f_pos */ };  // Use noop_llseek if neither read nor write accesses f_pos ///////////////////////////////////////////////////////////  @ fops4 depends on !fops1 && !fops2 && !fops3 && !has_llseek && !nonseekable1 && !nonseekable2 && !seq @ identifier fops0.fops; identifier read_no_fpos.read_f; identifier write_no_fpos.write_f; @@ // write fops use offset struct file_operations fops = { ...  .write = write_f,  .read = read_f, ... +.llseek = noop_llseek, /* read and write both use no f_pos */ };  @ depends on has_write && !has_read && !fops1 && !fops2 && !has_llseek && !nonseekable1 && !nonseekable2 && !seq @ identifier fops0.fops; identifier write_no_fpos.write_f; @@ struct file_operations fops = { ... .write = write_f, ... +.llseek = noop_llseek, /* write uses no f_pos */ };  @ depends on has_read && !has_write && !fops1 && !fops2 && !has_llseek && !nonseekable1 && !nonseekable2 && !seq @ identifier fops0.fops; identifier read_no_fpos.read_f; @@ struct file_operations fops = { ... .read = read_f, ... +.llseek = noop_llseek, /* read uses no f_pos */ };  @ depends on !has_read && !has_write && !fops1 && !fops2 && !has_llseek && !nonseekable1 && !nonseekable2 && !seq @ identifier fops0.fops; @@ struct file_operations fops = { ... +.llseek = noop_llseek, /* no read or write fn */ }; ===== End semantic patch =====  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Cc: Julia Lawall <julia@diku.dk> Cc: Christoph Hellwig <hch@infradead.org>
f | av7110.h | s | 6.9K | 238 | Mauro Carvalho Chehab | mchehab@redhat.com | 1325330104 |  | [media] av7110: convert set_fontend to use DVBv5 parameters  Instead of using dvb_frontend_parameters struct, that were designed for a subset of the supported standards, use the DVBv5 cache information.  Also, fill the supported delivery systems at dvb_frontend_ops struct.  Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
