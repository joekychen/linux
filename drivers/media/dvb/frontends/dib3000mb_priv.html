<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › media › dvb › frontends › dib3000mb_priv.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>dib3000mb_priv.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * dib3000mb_priv.h</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2004 Patrick Boettcher (patrick.boettcher@desy.de)</span>
<span class="cm"> *</span>
<span class="cm"> *	This program is free software; you can redistribute it and/or</span>
<span class="cm"> *	modify it under the terms of the GNU General Public License as</span>
<span class="cm"> *	published by the Free Software Foundation, version 2.</span>
<span class="cm"> *</span>
<span class="cm"> * for more information see dib3000mb.c .</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __DIB3000MB_PRIV_H_INCLUDED__</span>
<span class="cp">#define __DIB3000MB_PRIV_H_INCLUDED__</span>

<span class="cm">/* info and err, taken from usb.h, if there is anything available like by default. */</span>
<span class="cp">#define err(format, arg...)  printk(KERN_ERR     &quot;dib3000: &quot; format &quot;\n&quot; , ## arg)</span>
<span class="cp">#define info(format, arg...) printk(KERN_INFO    &quot;dib3000: &quot; format &quot;\n&quot; , ## arg)</span>
<span class="cp">#define warn(format, arg...) printk(KERN_WARNING &quot;dib3000: &quot; format &quot;\n&quot; , ## arg)</span>

<span class="cm">/* handy shortcuts */</span>
<span class="cp">#define rd(reg) dib3000_read_reg(state,reg)</span>

<span class="cp">#define wr(reg,val) if (dib3000_write_reg(state,reg,val)) \</span>
<span class="cp">	{ err(&quot;while sending 0x%04x to 0x%04x.&quot;,val,reg); return -EREMOTEIO; }</span>

<span class="cp">#define wr_foreach(a,v) { int i; \</span>
<span class="cp">	if (sizeof(a) != sizeof(v)) \</span>
<span class="cp">		err(&quot;sizeof: %zu %zu is different&quot;,sizeof(a),sizeof(v));\</span>
<span class="cp">	for (i=0; i &lt; sizeof(a)/sizeof(u16); i++) \</span>
<span class="cp">		wr(a[i],v[i]); \</span>
<span class="cp">	}</span>

<span class="cp">#define set_or(reg,val) wr(reg,rd(reg) | val)</span>

<span class="cp">#define set_and(reg,val) wr(reg,rd(reg) &amp; val)</span>

<span class="cm">/* debug */</span>

<span class="cp">#define dprintk(level,args...) \</span>
<span class="cp">    do { if ((debug &amp; level)) { printk(args); } } while (0)</span>

<span class="cm">/* mask for enabling a specific pid for the pid_filter */</span>
<span class="cp">#define DIB3000_ACTIVATE_PID_FILTERING	(0x2000)</span>

<span class="cm">/* common values for tuning */</span>
<span class="cp">#define DIB3000_ALPHA_0					(     0)</span>
<span class="cp">#define DIB3000_ALPHA_1					(     1)</span>
<span class="cp">#define DIB3000_ALPHA_2					(     2)</span>
<span class="cp">#define DIB3000_ALPHA_4					(     4)</span>

<span class="cp">#define DIB3000_CONSTELLATION_QPSK		(     0)</span>
<span class="cp">#define DIB3000_CONSTELLATION_16QAM		(     1)</span>
<span class="cp">#define DIB3000_CONSTELLATION_64QAM		(     2)</span>

<span class="cp">#define DIB3000_GUARD_TIME_1_32			(     0)</span>
<span class="cp">#define DIB3000_GUARD_TIME_1_16			(     1)</span>
<span class="cp">#define DIB3000_GUARD_TIME_1_8			(     2)</span>
<span class="cp">#define DIB3000_GUARD_TIME_1_4			(     3)</span>

<span class="cp">#define DIB3000_TRANSMISSION_MODE_2K	(     0)</span>
<span class="cp">#define DIB3000_TRANSMISSION_MODE_8K	(     1)</span>

<span class="cp">#define DIB3000_SELECT_LP				(     0)</span>
<span class="cp">#define DIB3000_SELECT_HP				(     1)</span>

<span class="cp">#define DIB3000_FEC_1_2					(     1)</span>
<span class="cp">#define DIB3000_FEC_2_3					(     2)</span>
<span class="cp">#define DIB3000_FEC_3_4					(     3)</span>
<span class="cp">#define DIB3000_FEC_5_6					(     5)</span>
<span class="cp">#define DIB3000_FEC_7_8					(     7)</span>

<span class="cp">#define DIB3000_HRCH_OFF				(     0)</span>
<span class="cp">#define DIB3000_HRCH_ON					(     1)</span>

<span class="cp">#define DIB3000_DDS_INVERSION_OFF		(     0)</span>
<span class="cp">#define DIB3000_DDS_INVERSION_ON		(     1)</span>

<span class="cp">#define DIB3000_TUNER_WRITE_ENABLE(a)	(0xffff &amp; (a &lt;&lt; 8))</span>
<span class="cp">#define DIB3000_TUNER_WRITE_DISABLE(a)	(0xffff &amp; ((a &lt;&lt; 8) | (1 &lt;&lt; 7)))</span>

<span class="cp">#define DIB3000_REG_MANUFACTOR_ID		(  1025)</span>
<span class="cp">#define DIB3000_I2C_ID_DIBCOM			(0x01b3)</span>

<span class="cp">#define DIB3000_REG_DEVICE_ID			(  1026)</span>
<span class="cp">#define DIB3000MB_DEVICE_ID				(0x3000)</span>
<span class="cp">#define DIB3000MC_DEVICE_ID				(0x3001)</span>
<span class="cp">#define DIB3000P_DEVICE_ID				(0x3002)</span>

<span class="cm">/* frontend state */</span>
<span class="k">struct</span> <span class="n">dib3000_state</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">i2c_adapter</span><span class="o">*</span> <span class="n">i2c</span><span class="p">;</span>

<span class="cm">/* configuration settings */</span>
	<span class="k">struct</span> <span class="n">dib3000_config</span> <span class="n">config</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">dvb_frontend</span> <span class="n">frontend</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">timing_offset</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">timing_offset_comp_done</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">last_tuned_bw</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">last_tuned_freq</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* register addresses and some of their default values */</span>

<span class="cm">/* restart subsystems */</span>
<span class="cp">#define DIB3000MB_REG_RESTART			(     0)</span>

<span class="cp">#define DIB3000MB_RESTART_OFF			(     0)</span>
<span class="cp">#define DIB3000MB_RESTART_AUTO_SEARCH		(1 &lt;&lt; 1)</span>
<span class="cp">#define DIB3000MB_RESTART_CTRL				(1 &lt;&lt; 2)</span>
<span class="cp">#define DIB3000MB_RESTART_AGC				(1 &lt;&lt; 3)</span>

<span class="cm">/* FFT size */</span>
<span class="cp">#define DIB3000MB_REG_FFT				(     1)</span>

<span class="cm">/* Guard time */</span>
<span class="cp">#define DIB3000MB_REG_GUARD_TIME		(     2)</span>

<span class="cm">/* QAM */</span>
<span class="cp">#define DIB3000MB_REG_QAM				(     3)</span>

<span class="cm">/* Alpha coefficient high priority Viterbi algorithm */</span>
<span class="cp">#define DIB3000MB_REG_VIT_ALPHA			(     4)</span>

<span class="cm">/* spectrum inversion */</span>
<span class="cp">#define DIB3000MB_REG_DDS_INV			(     5)</span>

<span class="cm">/* DDS frequency value (IF position) ad ? values don&#39;t match reg_3000mb.txt */</span>
<span class="cp">#define DIB3000MB_REG_DDS_FREQ_MSB		(     6)</span>
<span class="cp">#define DIB3000MB_REG_DDS_FREQ_LSB		(     7)</span>
<span class="cp">#define DIB3000MB_DDS_FREQ_MSB				(   178)</span>
<span class="cp">#define DIB3000MB_DDS_FREQ_LSB				(  8990)</span>

<span class="cm">/* timing frequency (carrier spacing) */</span>
<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_reg_timing_freq</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">8</span><span class="p">,</span><span class="mi">9</span> <span class="p">};</span>
<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_timing_freq</span><span class="p">[][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="mi">126</span> <span class="p">,</span> <span class="mi">48873</span> <span class="p">},</span> <span class="cm">/* 6 MHz */</span>
	<span class="p">{</span> <span class="mi">147</span> <span class="p">,</span> <span class="mi">57019</span> <span class="p">},</span> <span class="cm">/* 7 MHz */</span>
	<span class="p">{</span> <span class="mi">168</span> <span class="p">,</span> <span class="mi">65164</span> <span class="p">},</span> <span class="cm">/* 8 MHz */</span>
<span class="p">};</span>

<span class="cm">/* impulse noise parameter */</span>
<span class="cm">/* 36 ??? */</span>

<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_reg_impulse_noise</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">36</span> <span class="p">};</span>

<span class="k">enum</span> <span class="n">dib3000mb_impulse_noise_type</span> <span class="p">{</span>
	<span class="n">DIB3000MB_IMPNOISE_OFF</span><span class="p">,</span>
	<span class="n">DIB3000MB_IMPNOISE_MOBILE</span><span class="p">,</span>
	<span class="n">DIB3000MB_IMPNOISE_FIXED</span><span class="p">,</span>
	<span class="n">DIB3000MB_IMPNOISE_DEFAULT</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_impulse_noise_values</span><span class="p">[][</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0004</span><span class="p">,</span> <span class="mh">0x0014</span><span class="p">,</span> <span class="mh">0x01ff</span><span class="p">,</span> <span class="mh">0x0399</span> <span class="p">},</span> <span class="cm">/* off */</span>
	<span class="p">{</span> <span class="mh">0x0001</span><span class="p">,</span> <span class="mh">0x0004</span><span class="p">,</span> <span class="mh">0x0014</span><span class="p">,</span> <span class="mh">0x01ff</span><span class="p">,</span> <span class="mh">0x037b</span> <span class="p">},</span> <span class="cm">/* mobile */</span>
	<span class="p">{</span> <span class="mh">0x0001</span><span class="p">,</span> <span class="mh">0x0004</span><span class="p">,</span> <span class="mh">0x0020</span><span class="p">,</span> <span class="mh">0x01bd</span><span class="p">,</span> <span class="mh">0x0399</span> <span class="p">},</span> <span class="cm">/* fixed */</span>
	<span class="p">{</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0002</span><span class="p">,</span> <span class="mh">0x000a</span><span class="p">,</span> <span class="mh">0x01ff</span><span class="p">,</span> <span class="mh">0x0399</span> <span class="p">},</span> <span class="cm">/* default */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Dual Automatic-Gain-Control</span>
<span class="cm"> * - gains RF in tuner (AGC1)</span>
<span class="cm"> * - gains IF after filtering (AGC2)</span>
<span class="cm"> */</span>

<span class="cm">/* also from 16 to 18 */</span>
<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_reg_agc_gain</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mi">19</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">26</span><span class="p">,</span><span class="mi">27</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">29</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">32</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_default_agc_gain</span><span class="p">[]</span> <span class="o">=</span>
	<span class="p">{</span> <span class="mh">0x0001</span><span class="p">,</span> <span class="mi">52429</span><span class="p">,</span>   <span class="mi">623</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">166</span><span class="p">,</span> <span class="mi">195</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span>   <span class="cm">/* RF ??? */</span>
	  <span class="mh">0x0001</span><span class="p">,</span> <span class="mi">53766</span><span class="p">,</span> <span class="mi">38011</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>  <span class="mi">90</span><span class="p">,</span>  <span class="mi">33</span><span class="p">,</span> <span class="mi">23</span> <span class="p">};</span> <span class="cm">/* IF ??? */</span>

<span class="cm">/* phase noise */</span>
<span class="cm">/* 36 is set when setting the impulse noise */</span>
<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_reg_phase_noise</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">33</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">37</span><span class="p">,</span><span class="mi">38</span> <span class="p">};</span>

<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_default_noise_phase</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">544</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span> <span class="p">};</span>

<span class="cm">/* lock duration */</span>
<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_reg_lock_duration</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">39</span><span class="p">,</span><span class="mi">40</span> <span class="p">};</span>
<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_default_lock_duration</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">135</span><span class="p">,</span> <span class="mi">135</span> <span class="p">};</span>

<span class="cm">/* AGC loop bandwidth */</span>
<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_reg_agc_bandwidth</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">43</span><span class="p">,</span><span class="mi">44</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">46</span><span class="p">,</span><span class="mi">47</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">49</span><span class="p">,</span><span class="mi">50</span> <span class="p">};</span>

<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_agc_bandwidth_low</span><span class="p">[]</span>  <span class="o">=</span>
	<span class="p">{</span> <span class="mi">2088</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2088</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3448</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3448</span><span class="p">,</span> <span class="mi">5</span> <span class="p">};</span>
<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_agc_bandwidth_high</span><span class="p">[]</span> <span class="o">=</span>
	<span class="p">{</span> <span class="mi">2349</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span> <span class="mi">2349</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span> <span class="mi">2586</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2586</span><span class="p">,</span> <span class="mi">2</span> <span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * lock0 definition (coff_lock)</span>
<span class="cm"> */</span>
<span class="cp">#define DIB3000MB_REG_LOCK0_MASK		(    51)</span>
<span class="cp">#define DIB3000MB_LOCK0_DEFAULT				(     4)</span>

<span class="cm">/*</span>
<span class="cm"> * lock1 definition (cpil_lock)</span>
<span class="cm"> * for auto search</span>
<span class="cm"> * which values hide behind the lock masks</span>
<span class="cm"> */</span>
<span class="cp">#define DIB3000MB_REG_LOCK1_MASK		(    52)</span>
<span class="cp">#define DIB3000MB_LOCK1_SEARCH_4			(0x0004)</span>
<span class="cp">#define DIB3000MB_LOCK1_SEARCH_2048			(0x0800)</span>
<span class="cp">#define DIB3000MB_LOCK1_DEFAULT				(0x0001)</span>

<span class="cm">/*</span>
<span class="cm"> * lock2 definition (fec_lock) */</span>
<span class="cp">#define DIB3000MB_REG_LOCK2_MASK		(    53)</span>
<span class="cp">#define DIB3000MB_LOCK2_DEFAULT				(0x0080)</span>

<span class="cm">/*</span>
<span class="cm"> * SEQ ? what was that again ... :)</span>
<span class="cm"> * changes when, inversion, guard time and fft is</span>
<span class="cm"> * either automatically detected or not</span>
<span class="cm"> */</span>
<span class="cp">#define DIB3000MB_REG_SEQ				(    54)</span>

<span class="cm">/* bandwidth */</span>
<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_reg_bandwidth</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">55</span><span class="p">,</span><span class="mi">56</span><span class="p">,</span><span class="mi">57</span><span class="p">,</span><span class="mi">58</span><span class="p">,</span><span class="mi">59</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">62</span><span class="p">,</span><span class="mi">63</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="mi">65</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">67</span> <span class="p">};</span>
<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_bandwidth_6mhz</span><span class="p">[]</span> <span class="o">=</span>
	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">53312</span><span class="p">,</span> <span class="mi">112</span><span class="p">,</span> <span class="mi">46635</span><span class="p">,</span> <span class="mi">563</span><span class="p">,</span> <span class="mi">36565</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">45264</span> <span class="p">};</span>

<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_bandwidth_7mhz</span><span class="p">[]</span> <span class="o">=</span>
	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">64421</span><span class="p">,</span>  <span class="mi">96</span><span class="p">,</span> <span class="mi">39973</span><span class="p">,</span> <span class="mi">483</span><span class="p">,</span>  <span class="mi">3255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">45264</span> <span class="p">};</span>

<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_bandwidth_8mhz</span><span class="p">[]</span> <span class="o">=</span>
	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">23600</span><span class="p">,</span>  <span class="mi">84</span><span class="p">,</span> <span class="mi">34976</span><span class="p">,</span> <span class="mi">422</span><span class="p">,</span> <span class="mi">43808</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">45264</span> <span class="p">};</span>

<span class="cp">#define DIB3000MB_REG_UNK_68				(    68)</span>
<span class="cp">#define DIB3000MB_UNK_68						(     0)</span>

<span class="cp">#define DIB3000MB_REG_UNK_69				(    69)</span>
<span class="cp">#define DIB3000MB_UNK_69						(     0)</span>

<span class="cp">#define DIB3000MB_REG_UNK_71				(    71)</span>
<span class="cp">#define DIB3000MB_UNK_71						(     0)</span>

<span class="cp">#define DIB3000MB_REG_UNK_77				(    77)</span>
<span class="cp">#define DIB3000MB_UNK_77						(     6)</span>

<span class="cp">#define DIB3000MB_REG_UNK_78				(    78)</span>
<span class="cp">#define DIB3000MB_UNK_78						(0x0080)</span>

<span class="cm">/* isi */</span>
<span class="cp">#define DIB3000MB_REG_ISI				(    79)</span>
<span class="cp">#define DIB3000MB_ISI_ACTIVATE				(     0)</span>
<span class="cp">#define DIB3000MB_ISI_INHIBIT				(     1)</span>

<span class="cm">/* sync impovement */</span>
<span class="cp">#define DIB3000MB_REG_SYNC_IMPROVEMENT	(    84)</span>
<span class="cp">#define DIB3000MB_SYNC_IMPROVE_2K_1_8		(     3)</span>
<span class="cp">#define DIB3000MB_SYNC_IMPROVE_DEFAULT		(     0)</span>

<span class="cm">/* phase noise compensation inhibition */</span>
<span class="cp">#define DIB3000MB_REG_PHASE_NOISE		(    87)</span>
<span class="cp">#define DIB3000MB_PHASE_NOISE_DEFAULT	(     0)</span>

<span class="cp">#define DIB3000MB_REG_UNK_92				(    92)</span>
<span class="cp">#define DIB3000MB_UNK_92						(0x0080)</span>

<span class="cp">#define DIB3000MB_REG_UNK_96				(    96)</span>
<span class="cp">#define DIB3000MB_UNK_96						(0x0010)</span>

<span class="cp">#define DIB3000MB_REG_UNK_97				(    97)</span>
<span class="cp">#define DIB3000MB_UNK_97						(0x0009)</span>

<span class="cm">/* mobile mode ??? */</span>
<span class="cp">#define DIB3000MB_REG_MOBILE_MODE		(   101)</span>
<span class="cp">#define DIB3000MB_MOBILE_MODE_ON			(     1)</span>
<span class="cp">#define DIB3000MB_MOBILE_MODE_OFF			(     0)</span>

<span class="cp">#define DIB3000MB_REG_UNK_106			(   106)</span>
<span class="cp">#define DIB3000MB_UNK_106					(0x0080)</span>

<span class="cp">#define DIB3000MB_REG_UNK_107			(   107)</span>
<span class="cp">#define DIB3000MB_UNK_107					(0x0080)</span>

<span class="cp">#define DIB3000MB_REG_UNK_108			(   108)</span>
<span class="cp">#define DIB3000MB_UNK_108					(0x0080)</span>

<span class="cm">/* fft */</span>
<span class="cp">#define DIB3000MB_REG_UNK_121			(   121)</span>
<span class="cp">#define DIB3000MB_UNK_121_2K				(     7)</span>
<span class="cp">#define DIB3000MB_UNK_121_DEFAULT			(     5)</span>

<span class="cp">#define DIB3000MB_REG_UNK_122			(   122)</span>
<span class="cp">#define DIB3000MB_UNK_122					(  2867)</span>

<span class="cm">/* QAM for mobile mode */</span>
<span class="cp">#define DIB3000MB_REG_MOBILE_MODE_QAM	(   126)</span>
<span class="cp">#define DIB3000MB_MOBILE_MODE_QAM_64		(     3)</span>
<span class="cp">#define DIB3000MB_MOBILE_MODE_QAM_QPSK_16	(     1)</span>
<span class="cp">#define DIB3000MB_MOBILE_MODE_QAM_OFF		(     0)</span>

<span class="cm">/*</span>
<span class="cm"> * data diversity when having more than one chip on-board</span>
<span class="cm"> * see also DIB3000MB_OUTPUT_MODE_DATA_DIVERSITY</span>
<span class="cm"> */</span>
<span class="cp">#define DIB3000MB_REG_DATA_IN_DIVERSITY		(   127)</span>
<span class="cp">#define DIB3000MB_DATA_DIVERSITY_IN_OFF			(     0)</span>
<span class="cp">#define DIB3000MB_DATA_DIVERSITY_IN_ON			(     2)</span>

<span class="cm">/* vit hrch */</span>
<span class="cp">#define DIB3000MB_REG_VIT_HRCH			(   128)</span>

<span class="cm">/* vit code rate */</span>
<span class="cp">#define DIB3000MB_REG_VIT_CODE_RATE		(   129)</span>

<span class="cm">/* vit select hp */</span>
<span class="cp">#define DIB3000MB_REG_VIT_HP			(   130)</span>

<span class="cm">/* time frame for Bit-Error-Rate calculation */</span>
<span class="cp">#define DIB3000MB_REG_BERLEN			(   135)</span>
<span class="cp">#define DIB3000MB_BERLEN_LONG				(     0)</span>
<span class="cp">#define DIB3000MB_BERLEN_DEFAULT			(     1)</span>
<span class="cp">#define DIB3000MB_BERLEN_MEDIUM				(     2)</span>
<span class="cp">#define DIB3000MB_BERLEN_SHORT				(     3)</span>

<span class="cm">/* 142 - 152 FIFO parameters</span>
<span class="cm"> * which is what ?</span>
<span class="cm"> */</span>

<span class="cp">#define DIB3000MB_REG_FIFO_142			(   142)</span>
<span class="cp">#define DIB3000MB_FIFO_142					(     0)</span>

<span class="cm">/* MPEG2 TS output mode */</span>
<span class="cp">#define DIB3000MB_REG_MPEG2_OUT_MODE	(   143)</span>
<span class="cp">#define DIB3000MB_MPEG2_OUT_MODE_204		(     0)</span>
<span class="cp">#define DIB3000MB_MPEG2_OUT_MODE_188		(     1)</span>

<span class="cp">#define DIB3000MB_REG_PID_PARSE			(   144)</span>
<span class="cp">#define DIB3000MB_PID_PARSE_INHIBIT		(     0)</span>
<span class="cp">#define DIB3000MB_PID_PARSE_ACTIVATE	(     1)</span>

<span class="cp">#define DIB3000MB_REG_FIFO				(   145)</span>
<span class="cp">#define DIB3000MB_FIFO_INHIBIT				(     1)</span>
<span class="cp">#define DIB3000MB_FIFO_ACTIVATE				(     0)</span>

<span class="cp">#define DIB3000MB_REG_FIFO_146			(   146)</span>
<span class="cp">#define DIB3000MB_FIFO_146					(     3)</span>

<span class="cp">#define DIB3000MB_REG_FIFO_147			(   147)</span>
<span class="cp">#define DIB3000MB_FIFO_147					(0x0100)</span>

<span class="cm">/*</span>
<span class="cm"> * pidfilter</span>
<span class="cm"> * it is not a hardware pidfilter but a filter which drops all pids</span>
<span class="cm"> * except the ones set. Necessary because of the limited USB1.1 bandwidth.</span>
<span class="cm"> * regs 153-168</span>
<span class="cm"> */</span>

<span class="cp">#define DIB3000MB_REG_FIRST_PID			(   153)</span>
<span class="cp">#define DIB3000MB_NUM_PIDS				(    16)</span>

<span class="cm">/*</span>
<span class="cm"> * output mode</span>
<span class="cm"> * USB devices have to use &#39;slave&#39;-mode</span>
<span class="cm"> * see also DIB3000MB_REG_ELECT_OUT_MODE</span>
<span class="cm"> */</span>
<span class="cp">#define DIB3000MB_REG_OUTPUT_MODE		(   169)</span>
<span class="cp">#define DIB3000MB_OUTPUT_MODE_GATED_CLK		(     0)</span>
<span class="cp">#define DIB3000MB_OUTPUT_MODE_CONT_CLK		(     1)</span>
<span class="cp">#define DIB3000MB_OUTPUT_MODE_SERIAL		(     2)</span>
<span class="cp">#define DIB3000MB_OUTPUT_MODE_DATA_DIVERSITY	(     5)</span>
<span class="cp">#define DIB3000MB_OUTPUT_MODE_SLAVE			(     6)</span>

<span class="cm">/* irq event mask */</span>
<span class="cp">#define DIB3000MB_REG_IRQ_EVENT_MASK		(   170)</span>
<span class="cp">#define DIB3000MB_IRQ_EVENT_MASK				(     0)</span>

<span class="cm">/* filter coefficients */</span>
<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_reg_filter_coeffs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mi">171</span><span class="p">,</span> <span class="mi">172</span><span class="p">,</span> <span class="mi">173</span><span class="p">,</span> <span class="mi">174</span><span class="p">,</span> <span class="mi">175</span><span class="p">,</span> <span class="mi">176</span><span class="p">,</span> <span class="mi">177</span><span class="p">,</span> <span class="mi">178</span><span class="p">,</span>
	<span class="mi">179</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">181</span><span class="p">,</span> <span class="mi">182</span><span class="p">,</span> <span class="mi">183</span><span class="p">,</span> <span class="mi">184</span><span class="p">,</span> <span class="mi">185</span><span class="p">,</span> <span class="mi">186</span><span class="p">,</span>
	<span class="mi">188</span><span class="p">,</span> <span class="mi">189</span><span class="p">,</span> <span class="mi">190</span><span class="p">,</span> <span class="mi">191</span><span class="p">,</span> <span class="mi">192</span><span class="p">,</span> <span class="mi">194</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">u16</span> <span class="n">dib3000mb_filter_coeffs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	 <span class="mi">226</span><span class="p">,</span>  <span class="mi">160</span><span class="p">,</span>   <span class="mi">29</span><span class="p">,</span>
	 <span class="mi">979</span><span class="p">,</span>  <span class="mi">998</span><span class="p">,</span>   <span class="mi">19</span><span class="p">,</span>
	  <span class="mi">22</span><span class="p">,</span> <span class="mi">1019</span><span class="p">,</span> <span class="mi">1006</span><span class="p">,</span>
	<span class="mi">1022</span><span class="p">,</span>   <span class="mi">12</span><span class="p">,</span>    <span class="mi">6</span><span class="p">,</span>
	<span class="mi">1017</span><span class="p">,</span> <span class="mi">1017</span><span class="p">,</span>    <span class="mi">3</span><span class="p">,</span>
	   <span class="mi">6</span><span class="p">,</span>       <span class="mi">1019</span><span class="p">,</span>
	<span class="mi">1021</span><span class="p">,</span>    <span class="mi">2</span><span class="p">,</span>    <span class="mi">3</span><span class="p">,</span>
	   <span class="mi">1</span><span class="p">,</span>          <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * mobile algorithm (when you are moving with your device)</span>
<span class="cm"> * but not faster than 90 km/h</span>
<span class="cm"> */</span>
<span class="cp">#define DIB3000MB_REG_MOBILE_ALGO		(   195)</span>
<span class="cp">#define DIB3000MB_MOBILE_ALGO_ON			(     0)</span>
<span class="cp">#define DIB3000MB_MOBILE_ALGO_OFF			(     1)</span>

<span class="cm">/* multiple demodulators algorithm */</span>
<span class="cp">#define DIB3000MB_REG_MULTI_DEMOD_MSB	(   206)</span>
<span class="cp">#define DIB3000MB_REG_MULTI_DEMOD_LSB	(   207)</span>

<span class="cm">/* terminator, no more demods */</span>
<span class="cp">#define DIB3000MB_MULTI_DEMOD_MSB			( 32767)</span>
<span class="cp">#define DIB3000MB_MULTI_DEMOD_LSB			(  4095)</span>

<span class="cm">/* bring the device into a known  */</span>
<span class="cp">#define DIB3000MB_REG_RESET_DEVICE		(  1024)</span>
<span class="cp">#define DIB3000MB_RESET_DEVICE				(0x812c)</span>
<span class="cp">#define DIB3000MB_RESET_DEVICE_RST			(     0)</span>

<span class="cm">/* hardware clock configuration */</span>
<span class="cp">#define DIB3000MB_REG_CLOCK				(  1027)</span>
<span class="cp">#define DIB3000MB_CLOCK_DEFAULT				(0x9000)</span>
<span class="cp">#define DIB3000MB_CLOCK_DIVERSITY			(0x92b0)</span>

<span class="cm">/* power down config */</span>
<span class="cp">#define DIB3000MB_REG_POWER_CONTROL		(  1028)</span>
<span class="cp">#define DIB3000MB_POWER_DOWN				(     1)</span>
<span class="cp">#define DIB3000MB_POWER_UP					(     0)</span>

<span class="cm">/* electrical output mode */</span>
<span class="cp">#define DIB3000MB_REG_ELECT_OUT_MODE	(  1029)</span>
<span class="cp">#define DIB3000MB_ELECT_OUT_MODE_OFF		(     0)</span>
<span class="cp">#define DIB3000MB_ELECT_OUT_MODE_ON			(     1)</span>

<span class="cm">/* set the tuner i2c address */</span>
<span class="cp">#define DIB3000MB_REG_TUNER				(  1089)</span>

<span class="cm">/* monitoring registers (read only) */</span>

<span class="cm">/* agc loop locked (size: 1) */</span>
<span class="cp">#define DIB3000MB_REG_AGC_LOCK			(   324)</span>

<span class="cm">/* agc power (size: 16) */</span>
<span class="cp">#define DIB3000MB_REG_AGC_POWER			(   325)</span>

<span class="cm">/* agc1 value (16) */</span>
<span class="cp">#define DIB3000MB_REG_AGC1_VALUE		(   326)</span>

<span class="cm">/* agc2 value (16) */</span>
<span class="cp">#define DIB3000MB_REG_AGC2_VALUE		(   327)</span>

<span class="cm">/* total RF power (16), can be used for signal strength */</span>
<span class="cp">#define DIB3000MB_REG_RF_POWER			(   328)</span>

<span class="cm">/* dds_frequency with offset (24) */</span>
<span class="cp">#define DIB3000MB_REG_DDS_VALUE_MSB		(   339)</span>
<span class="cp">#define DIB3000MB_REG_DDS_VALUE_LSB		(   340)</span>

<span class="cm">/* timing offset signed (24) */</span>
<span class="cp">#define DIB3000MB_REG_TIMING_OFFSET_MSB	(   341)</span>
<span class="cp">#define DIB3000MB_REG_TIMING_OFFSET_LSB	(   342)</span>

<span class="cm">/* fft start position (13) */</span>
<span class="cp">#define DIB3000MB_REG_FFT_WINDOW_POS	(   353)</span>

<span class="cm">/* carriers locked (1) */</span>
<span class="cp">#define DIB3000MB_REG_CARRIER_LOCK		(   355)</span>

<span class="cm">/* noise power (24) */</span>
<span class="cp">#define DIB3000MB_REG_NOISE_POWER_MSB	(   372)</span>
<span class="cp">#define DIB3000MB_REG_NOISE_POWER_LSB	(   373)</span>

<span class="cp">#define DIB3000MB_REG_MOBILE_NOISE_MSB	(   374)</span>
<span class="cp">#define DIB3000MB_REG_MOBILE_NOISE_LSB	(   375)</span>

<span class="cm">/*</span>
<span class="cm"> * signal power (16), this and the above can be</span>
<span class="cm"> * used to calculate the signal/noise - ratio</span>
<span class="cm"> */</span>
<span class="cp">#define DIB3000MB_REG_SIGNAL_POWER		(   380)</span>

<span class="cm">/* mer (24) */</span>
<span class="cp">#define DIB3000MB_REG_MER_MSB			(   381)</span>
<span class="cp">#define DIB3000MB_REG_MER_LSB			(   382)</span>

<span class="cm">/*</span>
<span class="cm"> * Transmission Parameter Signalling (TPS)</span>
<span class="cm"> * the following registers can be used to get TPS-information.</span>
<span class="cm"> * The values are according to the DVB-T standard.</span>
<span class="cm"> */</span>

<span class="cm">/* TPS locked (1) */</span>
<span class="cp">#define DIB3000MB_REG_TPS_LOCK			(   394)</span>

<span class="cm">/* QAM from TPS (2) (values according to DIB3000MB_REG_QAM) */</span>
<span class="cp">#define DIB3000MB_REG_TPS_QAM			(   398)</span>

<span class="cm">/* hierarchy from TPS (1) */</span>
<span class="cp">#define DIB3000MB_REG_TPS_HRCH			(   399)</span>

<span class="cm">/* alpha from TPS (3) (values according to DIB3000MB_REG_VIT_ALPHA) */</span>
<span class="cp">#define DIB3000MB_REG_TPS_VIT_ALPHA		(   400)</span>

<span class="cm">/* code rate high priority from TPS (3) (values according to DIB3000MB_FEC_*) */</span>
<span class="cp">#define DIB3000MB_REG_TPS_CODE_RATE_HP	(   401)</span>

<span class="cm">/* code rate low priority from TPS (3) if DIB3000MB_REG_TPS_VIT_ALPHA */</span>
<span class="cp">#define DIB3000MB_REG_TPS_CODE_RATE_LP	(   402)</span>

<span class="cm">/* guard time from TPS (2) (values according to DIB3000MB_REG_GUARD_TIME */</span>
<span class="cp">#define DIB3000MB_REG_TPS_GUARD_TIME	(   403)</span>

<span class="cm">/* fft size from TPS (2) (values according to DIB3000MB_REG_FFT) */</span>
<span class="cp">#define DIB3000MB_REG_TPS_FFT			(   404)</span>

<span class="cm">/* cell id from TPS (16) */</span>
<span class="cp">#define DIB3000MB_REG_TPS_CELL_ID		(   406)</span>

<span class="cm">/* TPS (68) */</span>
<span class="cp">#define DIB3000MB_REG_TPS_1				(   408)</span>
<span class="cp">#define DIB3000MB_REG_TPS_2				(   409)</span>
<span class="cp">#define DIB3000MB_REG_TPS_3				(   410)</span>
<span class="cp">#define DIB3000MB_REG_TPS_4				(   411)</span>
<span class="cp">#define DIB3000MB_REG_TPS_5				(   412)</span>

<span class="cm">/* bit error rate (before RS correction) (21) */</span>
<span class="cp">#define DIB3000MB_REG_BER_MSB			(   414)</span>
<span class="cp">#define DIB3000MB_REG_BER_LSB			(   415)</span>

<span class="cm">/* packet error rate (uncorrected TS packets) (16) */</span>
<span class="cp">#define DIB3000MB_REG_PACKET_ERROR_RATE	(   417)</span>

<span class="cm">/* uncorrected packet count (16) */</span>
<span class="cp">#define DIB3000MB_REG_UNC				(   420)</span>

<span class="cm">/* viterbi locked (1) */</span>
<span class="cp">#define DIB3000MB_REG_VIT_LCK			(   421)</span>

<span class="cm">/* viterbi inidcator (16) */</span>
<span class="cp">#define DIB3000MB_REG_VIT_INDICATOR		(   422)</span>

<span class="cm">/* transport stream sync lock (1) */</span>
<span class="cp">#define DIB3000MB_REG_TS_SYNC_LOCK		(   423)</span>

<span class="cm">/* transport stream RS lock (1) */</span>
<span class="cp">#define DIB3000MB_REG_TS_RS_LOCK		(   424)</span>

<span class="cm">/* lock mask 0 value (1) */</span>
<span class="cp">#define DIB3000MB_REG_LOCK0_VALUE		(   425)</span>

<span class="cm">/* lock mask 1 value (1) */</span>
<span class="cp">#define DIB3000MB_REG_LOCK1_VALUE		(   426)</span>

<span class="cm">/* lock mask 2 value (1) */</span>
<span class="cp">#define DIB3000MB_REG_LOCK2_VALUE		(   427)</span>

<span class="cm">/* interrupt pending for auto search */</span>
<span class="cp">#define DIB3000MB_REG_AS_IRQ_PENDING	(   434)</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
