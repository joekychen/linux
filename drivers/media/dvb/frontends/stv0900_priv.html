<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › media › dvb › frontends › stv0900_priv.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>stv0900_priv.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * stv0900_priv.h</span>
<span class="cm"> *</span>
<span class="cm"> * Driver for ST STV0900 satellite demodulator IC.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) ST Microelectronics.</span>
<span class="cm"> * Copyright (C) 2009 NetUP Inc.</span>
<span class="cm"> * Copyright (C) 2009 Igor M. Liplianin &lt;liplianin@netup.ru&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> *</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef STV0900_PRIV_H</span>
<span class="cp">#define STV0900_PRIV_H</span>

<span class="cp">#include &lt;linux/i2c.h&gt;</span>

<span class="cp">#define ABS(X) ((X) &lt; 0 ? (-1 * (X)) : (X))</span>
<span class="cp">#define INRANGE(X, Y, Z) ((((X) &lt;= (Y)) &amp;&amp; ((Y) &lt;= (Z))) \</span>
<span class="cp">		|| (((Z) &lt;= (Y)) &amp;&amp; ((Y) &lt;= (X))) ? 1 : 0)</span>

<span class="cp">#ifndef MAKEWORD</span>
<span class="cp">#define MAKEWORD(X, Y) (((X) &lt;&lt; 8) + (Y))</span>
<span class="cp">#endif</span>

<span class="cp">#define LSB(X) (((X) &amp; 0xFF))</span>
<span class="cp">#define MSB(Y) (((Y) &gt;&gt; 8) &amp; 0xFF)</span>

<span class="cp">#ifndef TRUE</span>
<span class="cp">#define TRUE (1 == 1)</span>
<span class="cp">#endif</span>
<span class="cp">#ifndef FALSE</span>
<span class="cp">#define FALSE (!TRUE)</span>
<span class="cp">#endif</span>

<span class="cp">#define dprintk(args...) \</span>
<span class="cp">	do { \</span>
<span class="cp">		if (stvdebug) \</span>
<span class="cp">			printk(KERN_DEBUG args); \</span>
<span class="cp">	} while (0)</span>

<span class="cp">#define STV0900_MAXLOOKUPSIZE 500</span>
<span class="cp">#define STV0900_BLIND_SEARCH_AGC2_TH 700</span>
<span class="cp">#define STV0900_BLIND_SEARCH_AGC2_TH_CUT30 1400</span>
<span class="cp">#define IQPOWER_THRESHOLD  30</span>

<span class="cm">/* One point of the lookup table */</span>
<span class="k">struct</span> <span class="n">stv000_lookpoint</span> <span class="p">{</span>
	<span class="n">s32</span> <span class="n">realval</span><span class="p">;</span><span class="cm">/* real value */</span>
	<span class="n">s32</span> <span class="n">regval</span><span class="p">;</span><span class="cm">/* binary value */</span>
<span class="p">};</span>

<span class="cm">/* Lookup table definition */</span>
<span class="k">struct</span> <span class="n">stv0900_table</span><span class="p">{</span>
	<span class="n">s32</span> <span class="n">size</span><span class="p">;</span><span class="cm">/* Size of the lookup table */</span>
	<span class="k">struct</span> <span class="n">stv000_lookpoint</span> <span class="n">table</span><span class="p">[</span><span class="n">STV0900_MAXLOOKUPSIZE</span><span class="p">];</span><span class="cm">/* Lookup table */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_error</span> <span class="p">{</span>
	<span class="n">STV0900_NO_ERROR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">STV0900_INVALID_HANDLE</span><span class="p">,</span>
	<span class="n">STV0900_BAD_PARAMETER</span><span class="p">,</span>
	<span class="n">STV0900_I2C_ERROR</span><span class="p">,</span>
	<span class="n">STV0900_SEARCH_FAILED</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_clock_type</span> <span class="p">{</span>
	<span class="n">STV0900_USE_REGISTERS_DEFAULT</span><span class="p">,</span>
	<span class="n">STV0900_SERIAL_PUNCT_CLOCK</span><span class="p">,</span><span class="cm">/*Serial punctured clock */</span>
	<span class="n">STV0900_SERIAL_CONT_CLOCK</span><span class="p">,</span><span class="cm">/*Serial continues clock */</span>
	<span class="n">STV0900_PARALLEL_PUNCT_CLOCK</span><span class="p">,</span><span class="cm">/*Parallel punctured clock */</span>
	<span class="n">STV0900_DVBCI_CLOCK</span><span class="cm">/*Parallel continues clock : DVBCI */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_search_state</span> <span class="p">{</span>
	<span class="n">STV0900_SEARCH</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">STV0900_PLH_DETECTED</span><span class="p">,</span>
	<span class="n">STV0900_DVBS2_FOUND</span><span class="p">,</span>
	<span class="n">STV0900_DVBS_FOUND</span>

<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_ldpc_state</span> <span class="p">{</span>
	<span class="n">STV0900_PATH1_OFF_PATH2_OFF</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">STV0900_PATH1_ON_PATH2_OFF</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">STV0900_PATH1_OFF_PATH2_ON</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">STV0900_PATH1_ON_PATH2_ON</span> <span class="o">=</span> <span class="mi">3</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_signal_type</span> <span class="p">{</span>
	<span class="n">STV0900_NOAGC1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">STV0900_AGC1OK</span><span class="p">,</span>
	<span class="n">STV0900_NOTIMING</span><span class="p">,</span>
	<span class="n">STV0900_ANALOGCARRIER</span><span class="p">,</span>
	<span class="n">STV0900_TIMINGOK</span><span class="p">,</span>
	<span class="n">STV0900_NOAGC2</span><span class="p">,</span>
	<span class="n">STV0900_AGC2OK</span><span class="p">,</span>
	<span class="n">STV0900_NOCARRIER</span><span class="p">,</span>
	<span class="n">STV0900_CARRIEROK</span><span class="p">,</span>
	<span class="n">STV0900_NODATA</span><span class="p">,</span>
	<span class="n">STV0900_DATAOK</span><span class="p">,</span>
	<span class="n">STV0900_OUTOFRANGE</span><span class="p">,</span>
	<span class="n">STV0900_RANGEOK</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_demod_num</span> <span class="p">{</span>
	<span class="n">STV0900_DEMOD_1</span><span class="p">,</span>
	<span class="n">STV0900_DEMOD_2</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_tracking_standard</span> <span class="p">{</span>
	<span class="n">STV0900_DVBS1_STANDARD</span><span class="p">,</span><span class="cm">/* Found Standard*/</span>
	<span class="n">STV0900_DVBS2_STANDARD</span><span class="p">,</span>
	<span class="n">STV0900_DSS_STANDARD</span><span class="p">,</span>
	<span class="n">STV0900_TURBOCODE_STANDARD</span><span class="p">,</span>
	<span class="n">STV0900_UNKNOWN_STANDARD</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_search_standard</span> <span class="p">{</span>
	<span class="n">STV0900_AUTO_SEARCH</span><span class="p">,</span>
	<span class="n">STV0900_SEARCH_DVBS1</span><span class="p">,</span><span class="cm">/* Search Standard*/</span>
	<span class="n">STV0900_SEARCH_DVBS2</span><span class="p">,</span>
	<span class="n">STV0900_SEARCH_DSS</span><span class="p">,</span>
	<span class="n">STV0900_SEARCH_TURBOCODE</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_search_algo</span> <span class="p">{</span>
	<span class="n">STV0900_BLIND_SEARCH</span><span class="p">,</span><span class="cm">/* offset freq and SR are Unknown */</span>
	<span class="n">STV0900_COLD_START</span><span class="p">,</span><span class="cm">/* only the SR is known */</span>
	<span class="n">STV0900_WARM_START</span><span class="cm">/* offset freq and SR are known */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_modulation</span> <span class="p">{</span>
	<span class="n">STV0900_QPSK</span><span class="p">,</span>
	<span class="n">STV0900_8PSK</span><span class="p">,</span>
	<span class="n">STV0900_16APSK</span><span class="p">,</span>
	<span class="n">STV0900_32APSK</span><span class="p">,</span>
	<span class="n">STV0900_UNKNOWN</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_modcode</span> <span class="p">{</span>
	<span class="n">STV0900_DUMMY_PLF</span><span class="p">,</span>
	<span class="n">STV0900_QPSK_14</span><span class="p">,</span>
	<span class="n">STV0900_QPSK_13</span><span class="p">,</span>
	<span class="n">STV0900_QPSK_25</span><span class="p">,</span>
	<span class="n">STV0900_QPSK_12</span><span class="p">,</span>
	<span class="n">STV0900_QPSK_35</span><span class="p">,</span>
	<span class="n">STV0900_QPSK_23</span><span class="p">,</span>
	<span class="n">STV0900_QPSK_34</span><span class="p">,</span>
	<span class="n">STV0900_QPSK_45</span><span class="p">,</span>
	<span class="n">STV0900_QPSK_56</span><span class="p">,</span>
	<span class="n">STV0900_QPSK_89</span><span class="p">,</span>
	<span class="n">STV0900_QPSK_910</span><span class="p">,</span>
	<span class="n">STV0900_8PSK_35</span><span class="p">,</span>
	<span class="n">STV0900_8PSK_23</span><span class="p">,</span>
	<span class="n">STV0900_8PSK_34</span><span class="p">,</span>
	<span class="n">STV0900_8PSK_56</span><span class="p">,</span>
	<span class="n">STV0900_8PSK_89</span><span class="p">,</span>
	<span class="n">STV0900_8PSK_910</span><span class="p">,</span>
	<span class="n">STV0900_16APSK_23</span><span class="p">,</span>
	<span class="n">STV0900_16APSK_34</span><span class="p">,</span>
	<span class="n">STV0900_16APSK_45</span><span class="p">,</span>
	<span class="n">STV0900_16APSK_56</span><span class="p">,</span>
	<span class="n">STV0900_16APSK_89</span><span class="p">,</span>
	<span class="n">STV0900_16APSK_910</span><span class="p">,</span>
	<span class="n">STV0900_32APSK_34</span><span class="p">,</span>
	<span class="n">STV0900_32APSK_45</span><span class="p">,</span>
	<span class="n">STV0900_32APSK_56</span><span class="p">,</span>
	<span class="n">STV0900_32APSK_89</span><span class="p">,</span>
	<span class="n">STV0900_32APSK_910</span><span class="p">,</span>
	<span class="n">STV0900_MODCODE_UNKNOWN</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_fec</span> <span class="p">{</span><span class="cm">/*DVBS1, DSS and turbo code puncture rate*/</span>
	<span class="n">STV0900_FEC_1_2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">STV0900_FEC_2_3</span><span class="p">,</span>
	<span class="n">STV0900_FEC_3_4</span><span class="p">,</span>
	<span class="n">STV0900_FEC_4_5</span><span class="p">,</span><span class="cm">/*for turbo code only*/</span>
	<span class="n">STV0900_FEC_5_6</span><span class="p">,</span>
	<span class="n">STV0900_FEC_6_7</span><span class="p">,</span><span class="cm">/*for DSS only */</span>
	<span class="n">STV0900_FEC_7_8</span><span class="p">,</span>
	<span class="n">STV0900_FEC_8_9</span><span class="p">,</span><span class="cm">/*for turbo code only*/</span>
	<span class="n">STV0900_FEC_UNKNOWN</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_frame_length</span> <span class="p">{</span>
	<span class="n">STV0900_LONG_FRAME</span><span class="p">,</span>
	<span class="n">STV0900_SHORT_FRAME</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_pilot</span> <span class="p">{</span>
	<span class="n">STV0900_PILOTS_OFF</span><span class="p">,</span>
	<span class="n">STV0900_PILOTS_ON</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_rolloff</span> <span class="p">{</span>
	<span class="n">STV0900_35</span><span class="p">,</span>
	<span class="n">STV0900_25</span><span class="p">,</span>
	<span class="n">STV0900_20</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_search_iq</span> <span class="p">{</span>
	<span class="n">STV0900_IQ_AUTO</span><span class="p">,</span>
	<span class="n">STV0900_IQ_AUTO_NORMAL_FIRST</span><span class="p">,</span>
	<span class="n">STV0900_IQ_FORCE_NORMAL</span><span class="p">,</span>
	<span class="n">STV0900_IQ_FORCE_SWAPPED</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">stv0900_iq_inversion</span> <span class="p">{</span>
	<span class="n">STV0900_IQ_NORMAL</span><span class="p">,</span>
	<span class="n">STV0900_IQ_SWAPPED</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_diseqc_mode</span> <span class="p">{</span>
	<span class="n">STV0900_22KHZ_Continues</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">STV0900_DISEQC_2_3_PWM</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">STV0900_DISEQC_3_3_PWM</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">STV0900_DISEQC_2_3_ENVELOP</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">STV0900_DISEQC_3_3_ENVELOP</span> <span class="o">=</span> <span class="mi">5</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fe_stv0900_demod_mode</span> <span class="p">{</span>
	<span class="n">STV0900_SINGLE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">STV0900_DUAL</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">stv0900_init_params</span><span class="p">{</span>
	<span class="n">u32</span>	<span class="n">dmd_ref_clk</span><span class="p">;</span><span class="cm">/* Reference,Input clock for the demod in Hz */</span>

	<span class="cm">/* Demodulator Type (single demod or dual demod) */</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_demod_mode</span>	<span class="n">demod_mode</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_rolloff</span>		<span class="n">rolloff</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_clock_type</span>	<span class="n">path1_ts_clock</span><span class="p">;</span>

	<span class="n">u8</span>	<span class="n">tun1_maddress</span><span class="p">;</span>
	<span class="kt">int</span>	<span class="n">tuner1_adc</span><span class="p">;</span>
	<span class="kt">int</span> 	<span class="n">tuner1_type</span><span class="p">;</span>

	<span class="cm">/* IQ from the tuner1 to the demod */</span>
	<span class="k">enum</span> <span class="n">stv0900_iq_inversion</span>	<span class="n">tun1_iq_inv</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_clock_type</span>	<span class="n">path2_ts_clock</span><span class="p">;</span>

	<span class="n">u8</span>	<span class="n">tun2_maddress</span><span class="p">;</span>
	<span class="kt">int</span>	<span class="n">tuner2_adc</span><span class="p">;</span>
	<span class="kt">int</span>	<span class="n">tuner2_type</span><span class="p">;</span>

	<span class="cm">/* IQ from the tuner2 to the demod */</span>
	<span class="k">enum</span> <span class="n">stv0900_iq_inversion</span>	<span class="n">tun2_iq_inv</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">stv0900_reg</span>		<span class="o">*</span><span class="n">ts_config</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">stv0900_search_params</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_demod_num</span>	<span class="n">path</span><span class="p">;</span><span class="cm">/* Path Used demod1 or 2 */</span>

	<span class="n">u32</span>	<span class="n">frequency</span><span class="p">;</span><span class="cm">/* Transponder frequency (in KHz) */</span>
	<span class="n">u32</span>	<span class="n">symbol_rate</span><span class="p">;</span><span class="cm">/* Transponder symbol rate  (in bds)*/</span>
	<span class="n">u32</span>	<span class="n">search_range</span><span class="p">;</span><span class="cm">/* Range of the search (in Hz) */</span>

	<span class="k">enum</span> <span class="n">fe_stv0900_search_standard</span>	<span class="n">standard</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_modulation</span>	<span class="n">modulation</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_fec</span>		<span class="n">fec</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_modcode</span>		<span class="n">modcode</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_search_iq</span>	<span class="n">iq_inversion</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_search_algo</span>	<span class="n">search_algo</span><span class="p">;</span>

<span class="p">};</span>

<span class="k">struct</span> <span class="n">stv0900_signal_info</span> <span class="p">{</span>
	<span class="kt">int</span>	<span class="n">locked</span><span class="p">;</span><span class="cm">/* Transponder locked */</span>
	<span class="n">u32</span>	<span class="n">frequency</span><span class="p">;</span><span class="cm">/* Transponder frequency (in KHz) */</span>
	<span class="n">u32</span>	<span class="n">symbol_rate</span><span class="p">;</span><span class="cm">/* Transponder symbol rate  (in Mbds) */</span>

	<span class="k">enum</span> <span class="n">fe_stv0900_tracking_standard</span>	<span class="n">standard</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_fec</span>			<span class="n">fec</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_modcode</span>			<span class="n">modcode</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_modulation</span>		<span class="n">modulation</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_pilot</span>			<span class="n">pilot</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_frame_length</span>		<span class="n">frame_len</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">stv0900_iq_inversion</span>		<span class="n">spectrum</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_rolloff</span>			<span class="n">rolloff</span><span class="p">;</span>

	<span class="n">s32</span> <span class="n">Power</span><span class="p">;</span><span class="cm">/* Power of the RF signal (dBm) */</span>
	<span class="n">s32</span> <span class="n">C_N</span><span class="p">;</span><span class="cm">/* Carrier to noise ratio (dB x10)*/</span>
	<span class="n">u32</span> <span class="n">BER</span><span class="p">;</span><span class="cm">/* Bit error rate (x10^7) */</span>

<span class="p">};</span>

<span class="k">struct</span> <span class="n">stv0900_internal</span><span class="p">{</span>
	<span class="n">s32</span>	<span class="n">quartz</span><span class="p">;</span>
	<span class="n">s32</span>	<span class="n">mclk</span><span class="p">;</span>
	<span class="cm">/* manual RollOff for DVBS1/DSS only */</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_rolloff</span>		<span class="n">rolloff</span><span class="p">;</span>
	<span class="cm">/* Demodulator use for single demod or for dual demod) */</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_demod_mode</span>	<span class="n">demod_mode</span><span class="p">;</span>

	<span class="cm">/*Demods */</span>
	<span class="n">s32</span>	<span class="n">freq</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">s32</span>	<span class="n">bw</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">s32</span>	<span class="n">symbol_rate</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">s32</span>	<span class="n">srch_range</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="cm">/* for software/auto tuner */</span>
	<span class="kt">int</span>	<span class="n">tuner_type</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

	<span class="cm">/* algorithm for search Blind, Cold or Warm*/</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_search_algo</span>	<span class="n">srch_algo</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="cm">/* search standard: Auto, DVBS1/DSS only or DVBS2 only*/</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_search_standard</span>	<span class="n">srch_standard</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="cm">/* inversion search : auto, auto norma first, normal or inverted */</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_search_iq</span>	<span class="n">srch_iq_inv</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_modcode</span>		<span class="n">modcode</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_modulation</span>	<span class="n">modulation</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_fec</span>		<span class="n">fec</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

	<span class="k">struct</span> <span class="n">stv0900_signal_info</span>	<span class="n">result</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_error</span>		<span class="n">err</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>


	<span class="k">struct</span> <span class="n">i2c_adapter</span>	<span class="o">*</span><span class="n">i2c_adap</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">i2c_addr</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">clkmode</span><span class="p">;</span><span class="cm">/* 0 for CLKI, 2 for XTALI */</span>
	<span class="n">u8</span>			<span class="n">chip_id</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">stv0900_reg</span>	<span class="o">*</span><span class="n">ts_config</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">fe_stv0900_error</span>	<span class="n">errs</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">dmds_used</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* state for each demod */</span>
<span class="k">struct</span> <span class="n">stv0900_state</span> <span class="p">{</span>
	<span class="cm">/* pointer for internal params, one for each pair of demods */</span>
	<span class="k">struct</span> <span class="n">stv0900_internal</span>		<span class="o">*</span><span class="n">internal</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">i2c_adapter</span>		<span class="o">*</span><span class="n">i2c_adap</span><span class="p">;</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">stv0900_config</span>	<span class="o">*</span><span class="n">config</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">dvb_frontend</span>		<span class="n">frontend</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">demod</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">stvdebug</span><span class="p">;</span>

<span class="k">extern</span> <span class="n">s32</span> <span class="n">ge2comp</span><span class="p">(</span><span class="n">s32</span> <span class="n">a</span><span class="p">,</span> <span class="n">s32</span> <span class="n">width</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">stv0900_write_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">stv0900_internal</span> <span class="o">*</span><span class="n">i_params</span><span class="p">,</span>
				<span class="n">u16</span> <span class="n">reg_addr</span><span class="p">,</span> <span class="n">u8</span> <span class="n">reg_data</span><span class="p">);</span>

<span class="k">extern</span> <span class="n">u8</span> <span class="n">stv0900_read_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">stv0900_internal</span> <span class="o">*</span><span class="n">i_params</span><span class="p">,</span>
				<span class="n">u16</span> <span class="n">reg_addr</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">stv0900_write_bits</span><span class="p">(</span><span class="k">struct</span> <span class="n">stv0900_internal</span> <span class="o">*</span><span class="n">i_params</span><span class="p">,</span>
				<span class="n">u32</span> <span class="n">label</span><span class="p">,</span> <span class="n">u8</span> <span class="n">val</span><span class="p">);</span>

<span class="k">extern</span> <span class="n">u8</span> <span class="n">stv0900_get_bits</span><span class="p">(</span><span class="k">struct</span> <span class="n">stv0900_internal</span> <span class="o">*</span><span class="n">i_params</span><span class="p">,</span>
				<span class="n">u32</span> <span class="n">label</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">stv0900_get_demod_lock</span><span class="p">(</span><span class="k">struct</span> <span class="n">stv0900_internal</span> <span class="o">*</span><span class="n">i_params</span><span class="p">,</span>
				<span class="k">enum</span> <span class="n">fe_stv0900_demod_num</span> <span class="n">demod</span><span class="p">,</span> <span class="n">s32</span> <span class="n">time_out</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">stv0900_check_signal_presence</span><span class="p">(</span><span class="k">struct</span> <span class="n">stv0900_internal</span> <span class="o">*</span><span class="n">i_params</span><span class="p">,</span>
				<span class="k">enum</span> <span class="n">fe_stv0900_demod_num</span> <span class="n">demod</span><span class="p">);</span>

<span class="k">extern</span> <span class="k">enum</span> <span class="n">fe_stv0900_signal_type</span> <span class="n">stv0900_algo</span><span class="p">(</span><span class="k">struct</span> <span class="n">dvb_frontend</span> <span class="o">*</span><span class="n">fe</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">stv0900_set_tuner</span><span class="p">(</span><span class="k">struct</span> <span class="n">dvb_frontend</span> <span class="o">*</span><span class="n">fe</span><span class="p">,</span> <span class="n">u32</span> <span class="n">frequency</span><span class="p">,</span>
				<span class="n">u32</span> <span class="n">bandwidth</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">stv0900_set_bandwidth</span><span class="p">(</span><span class="k">struct</span> <span class="n">dvb_frontend</span> <span class="o">*</span><span class="n">fe</span><span class="p">,</span> <span class="n">u32</span> <span class="n">bandwidth</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">stv0900_start_search</span><span class="p">(</span><span class="k">struct</span> <span class="n">stv0900_internal</span> <span class="o">*</span><span class="n">i_params</span><span class="p">,</span>
				<span class="k">enum</span> <span class="n">fe_stv0900_demod_num</span> <span class="n">demod</span><span class="p">);</span>

<span class="k">extern</span> <span class="n">u8</span> <span class="n">stv0900_get_optim_carr_loop</span><span class="p">(</span><span class="n">s32</span> <span class="n">srate</span><span class="p">,</span>
				<span class="k">enum</span> <span class="n">fe_stv0900_modcode</span> <span class="n">modcode</span><span class="p">,</span>
				<span class="n">s32</span> <span class="n">pilot</span><span class="p">,</span> <span class="n">u8</span> <span class="n">chip_id</span><span class="p">);</span>

<span class="k">extern</span> <span class="n">u8</span> <span class="n">stv0900_get_optim_short_carr_loop</span><span class="p">(</span><span class="n">s32</span> <span class="n">srate</span><span class="p">,</span>
				<span class="k">enum</span> <span class="n">fe_stv0900_modulation</span> <span class="n">modulation</span><span class="p">,</span>
				<span class="n">u8</span> <span class="n">chip_id</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">stv0900_stop_all_s2_modcod</span><span class="p">(</span><span class="k">struct</span> <span class="n">stv0900_internal</span> <span class="o">*</span><span class="n">i_params</span><span class="p">,</span>
				<span class="k">enum</span> <span class="n">fe_stv0900_demod_num</span> <span class="n">demod</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">stv0900_activate_s2_modcod</span><span class="p">(</span><span class="k">struct</span> <span class="n">stv0900_internal</span> <span class="o">*</span><span class="n">i_params</span><span class="p">,</span>
				<span class="k">enum</span> <span class="n">fe_stv0900_demod_num</span> <span class="n">demod</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">stv0900_activate_s2_modcod_single</span><span class="p">(</span><span class="k">struct</span> <span class="n">stv0900_internal</span> <span class="o">*</span><span class="n">i_params</span><span class="p">,</span>
				<span class="k">enum</span> <span class="n">fe_stv0900_demod_num</span> <span class="n">demod</span><span class="p">);</span>

<span class="k">extern</span> <span class="k">enum</span>
<span class="n">fe_stv0900_tracking_standard</span> <span class="n">stv0900_get_standard</span><span class="p">(</span><span class="k">struct</span> <span class="n">dvb_frontend</span> <span class="o">*</span><span class="n">fe</span><span class="p">,</span>
				<span class="k">enum</span> <span class="n">fe_stv0900_demod_num</span> <span class="n">demod</span><span class="p">);</span>

<span class="k">extern</span> <span class="n">u32</span>
<span class="n">stv0900_get_freq_auto</span><span class="p">(</span><span class="k">struct</span> <span class="n">stv0900_internal</span> <span class="o">*</span><span class="n">intp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">demod</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span>
<span class="n">stv0900_set_tuner_auto</span><span class="p">(</span><span class="k">struct</span> <span class="n">stv0900_internal</span> <span class="o">*</span><span class="n">intp</span><span class="p">,</span> <span class="n">u32</span> <span class="n">Frequency</span><span class="p">,</span>
						<span class="n">u32</span> <span class="n">Bandwidth</span><span class="p">,</span> <span class="kt">int</span> <span class="n">demod</span><span class="p">);</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
