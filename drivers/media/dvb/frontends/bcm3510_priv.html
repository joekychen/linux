<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › media › dvb › frontends › bcm3510_priv.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>bcm3510_priv.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Support for the Broadcom BCM3510 ATSC demodulator (1st generation Air2PC)</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright (C) 2001-5, B2C2 inc.</span>
<span class="cm"> *</span>
<span class="cm"> *  GPL/Linux driver written by Patrick Boettcher &lt;patrick.boettcher@desy.de&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __BCM3510_PRIV_H__</span>
<span class="cp">#define __BCM3510_PRIV_H__</span>

<span class="cp">#define PACKED __attribute__((packed))</span>

<span class="cp">#undef err</span>
<span class="cp">#define err(format, arg...)  printk(KERN_ERR     &quot;bcm3510: &quot; format &quot;\n&quot; , ## arg)</span>
<span class="cp">#undef info</span>
<span class="cp">#define info(format, arg...) printk(KERN_INFO    &quot;bcm3510: &quot; format &quot;\n&quot; , ## arg)</span>
<span class="cp">#undef warn</span>
<span class="cp">#define warn(format, arg...) printk(KERN_WARNING &quot;bcm3510: &quot; format &quot;\n&quot; , ## arg)</span>


<span class="cp">#define PANASONIC_FIRST_IF_BASE_IN_KHz  1407500</span>
<span class="cp">#define BCM3510_SYMBOL_RATE             5381000</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">raw</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">CTL</span>   <span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">TSTCTL_2e</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">LDCERC_4e</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LDUERC_4f</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LD_BER0_65</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LD_BER1_66</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LD_BER2_67</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LD_BER3_68</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">RESET</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">IDLE</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">STOP</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">HIRQ0</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">HIRQ1</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">na0</span>   <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">HABAV</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">na1</span>   <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">HCTL1_a0</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">na0</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">IDLMSK</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">STMSK</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">I0MSK</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">I1MSK</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">na1</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">HABMSK</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">na2</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">HCTLMSK_a1</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">RESET</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">IDLE</span>   <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">STOP</span>   <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">RUN</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">HABAV</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">MEMAV</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">ALDONE</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">REIRQ</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">APSTAT1_a2</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">RSTMSK</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">IMSK</span>   <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">SMSK</span>   <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">RMSK</span>   <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">HABMSK</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">MAVMSK</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">ALDMSK</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">REMSK</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">APMSK1_a3</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">APSTAT2_a4</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">APMSK2_a5</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">HABADR</span> <span class="o">:</span><span class="mi">7</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">na</span>     <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">HABADR_a6</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">HABDATA_a7</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">HABR</span>   <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">LDHABR</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">APMSK</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">HMSK</span>   <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">LDMSK</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">na</span>     <span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">HABSTAT_a8</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">MADRH_a9</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">MADRL_aa</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">MDATA_ab</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
<span class="cp">#define JDEC_WAIT_AT_RAM      0x7</span>
<span class="cp">#define JDEC_EEPROM_LOAD_WAIT 0x4</span>
		<span class="n">u8</span> <span class="n">JDEC</span>   <span class="o">:</span><span class="mi">3</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">na</span>     <span class="o">:</span><span class="mi">5</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">JDEC_ca</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">REV</span>   <span class="o">:</span><span class="mi">4</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">LAYER</span> <span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">REVID_e0</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">unk0</span>   <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">CNTCTL</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">BITCNT</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">unk1</span>   <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">RESYNC</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">unk2</span>   <span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">BERCTL_fa</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">CSEL0</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">CLKED0</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">CSEL1</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">CLKED1</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">CLKLEV</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">SPIVAR</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">na</span>     <span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">TUNSET_fc</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">CLK</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">DATA</span>   <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">CS0</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">CS1</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">AGCSEL</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">na0</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">TUNSEL</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">na1</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">TUNCTL_fd</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">TUNSEL0_fe</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">TUNSEL1_ff</span><span class="p">;</span>

<span class="p">}</span> <span class="n">bcm3510_register_value</span><span class="p">;</span>

<span class="cm">/* HAB commands */</span>

<span class="cm">/* version */</span>
<span class="cp">#define CMD_GET_VERSION_INFO   0x3D</span>
<span class="cp">#define MSGID_GET_VERSION_INFO 0x15</span>
<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_get_version_info</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">microcode_version</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">script_version</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">config_version</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">demod_version</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PACKED</span><span class="p">;</span>

<span class="cp">#define BCM3510_DEF_MICROCODE_VERSION 0x0E</span>
<span class="cp">#define BCM3510_DEF_SCRIPT_VERSION    0x06</span>
<span class="cp">#define BCM3510_DEF_CONFIG_VERSION    0x01</span>
<span class="cp">#define BCM3510_DEF_DEMOD_VERSION     0xB1</span>

<span class="cm">/* acquire */</span>
<span class="cp">#define CMD_ACQUIRE            0x38</span>

<span class="cp">#define MSGID_EXT_TUNER_ACQUIRE 0x0A</span>
<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_ext_acquire</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">MODE</span>      <span class="o">:</span><span class="mi">4</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">BW</span>        <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">FA</span>        <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">NTSCSWEEP</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">OFFSET</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">PACKED</span> <span class="n">ACQUIRE0</span><span class="p">;</span> <span class="cm">/* control_byte */</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">IF_FREQ</span>  <span class="o">:</span><span class="mi">3</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">zero0</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">SYM_RATE</span> <span class="o">:</span><span class="mi">3</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">zero1</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">PACKED</span> <span class="n">ACQUIRE1</span><span class="p">;</span> <span class="cm">/* sym_if */</span>

	<span class="n">u8</span> <span class="n">IF_OFFSET0</span><span class="p">;</span>   <span class="cm">/* IF_Offset_10hz */</span>
	<span class="n">u8</span> <span class="n">IF_OFFSET1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SYM_OFFSET0</span><span class="p">;</span>  <span class="cm">/* SymbolRateOffset */</span>
	<span class="n">u8</span> <span class="n">SYM_OFFSET1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">NTSC_OFFSET0</span><span class="p">;</span> <span class="cm">/* NTSC_Offset_10hz */</span>
	<span class="n">u8</span> <span class="n">NTSC_OFFSET1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PACKED</span><span class="p">;</span>

<span class="cp">#define MSGID_INT_TUNER_ACQUIRE 0x0B</span>
<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_int_acquire</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">MODE</span>      <span class="o">:</span><span class="mi">4</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">BW</span>        <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">FA</span>        <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">NTSCSWEEP</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">OFFSET</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">PACKED</span> <span class="n">ACQUIRE0</span><span class="p">;</span> <span class="cm">/* control_byte */</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">IF_FREQ</span>  <span class="o">:</span><span class="mi">3</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">zero0</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">SYM_RATE</span> <span class="o">:</span><span class="mi">3</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">zero1</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">PACKED</span> <span class="n">ACQUIRE1</span><span class="p">;</span> <span class="cm">/* sym_if */</span>

	<span class="n">u8</span> <span class="n">TUNER_FREQ0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">TUNER_FREQ1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">TUNER_FREQ2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">TUNER_FREQ3</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">IF_OFFSET0</span><span class="p">;</span>   <span class="cm">/* IF_Offset_10hz */</span>
	<span class="n">u8</span> <span class="n">IF_OFFSET1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SYM_OFFSET0</span><span class="p">;</span>  <span class="cm">/* SymbolRateOffset */</span>
	<span class="n">u8</span> <span class="n">SYM_OFFSET1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">NTSC_OFFSET0</span><span class="p">;</span> <span class="cm">/* NTSC_Offset_10hz */</span>
	<span class="n">u8</span> <span class="n">NTSC_OFFSET1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PACKED</span><span class="p">;</span>

<span class="cm">/* modes */</span>
<span class="cp">#define BCM3510_QAM16           =   0x01</span>
<span class="cp">#define BCM3510_QAM32           =   0x02</span>
<span class="cp">#define BCM3510_QAM64           =   0x03</span>
<span class="cp">#define BCM3510_QAM128          =   0x04</span>
<span class="cp">#define BCM3510_QAM256          =   0x05</span>
<span class="cp">#define BCM3510_8VSB            =   0x0B</span>
<span class="cp">#define BCM3510_16VSB           =   0x0D</span>

<span class="cm">/* IF_FREQS */</span>
<span class="cp">#define BCM3510_IF_TERRESTRIAL 0x0</span>
<span class="cp">#define BCM3510_IF_CABLE       0x1</span>
<span class="cp">#define BCM3510_IF_USE_CMD     0x7</span>

<span class="cm">/* SYM_RATE */</span>
<span class="cp">#define BCM3510_SR_8VSB        0x0 </span><span class="cm">/* 5381119 s/sec */</span><span class="cp"></span>
<span class="cp">#define BCM3510_SR_256QAM      0x1 </span><span class="cm">/* 5360537 s/sec */</span><span class="cp"></span>
<span class="cp">#define BCM3510_SR_16QAM       0x2 </span><span class="cm">/* 5056971 s/sec */</span><span class="cp"></span>
<span class="cp">#define BCM3510_SR_MISC        0x3 </span><span class="cm">/* 5000000 s/sec */</span><span class="cp"></span>
<span class="cp">#define BCM3510_SR_USE_CMD     0x7</span>

<span class="cm">/* special symbol rate */</span>
<span class="cp">#define CMD_SET_VALUE_NOT_LISTED  0x2d</span>
<span class="cp">#define MSGID_SET_SYMBOL_RATE_NOT_LISTED 0x0c</span>
<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_set_sr_not_listed</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">HOST_SYM_RATE0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">HOST_SYM_RATE1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">HOST_SYM_RATE2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">HOST_SYM_RATE3</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PACKED</span><span class="p">;</span>

<span class="cm">/* special IF */</span>
<span class="cp">#define MSGID_SET_IF_FREQ_NOT_LISTED 0x0d</span>
<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_set_if_freq_not_listed</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">HOST_IF_FREQ0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">HOST_IF_FREQ1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">HOST_IF_FREQ2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">HOST_IF_FREQ3</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PACKED</span><span class="p">;</span>

<span class="cm">/* auto reacquire */</span>
<span class="cp">#define CMD_AUTO_PARAM       0x2a</span>
<span class="cp">#define MSGID_AUTO_REACQUIRE 0x0e</span>
<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_auto_reacquire</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">ACQ</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* on/off*/</span>
	<span class="n">u8</span> <span class="n">unused</span> <span class="o">:</span><span class="mi">7</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PACKED</span><span class="p">;</span>

<span class="cp">#define MSGID_SET_RF_AGC_SEL 0x12</span>
<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_set_agc</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">LVL</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">unused</span> <span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SEL</span>    <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PACKED</span><span class="p">;</span>

<span class="cp">#define MSGID_SET_AUTO_INVERSION 0x14</span>
<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_auto_inversion</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">AI</span>     <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">unused</span> <span class="o">:</span><span class="mi">7</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PACKED</span><span class="p">;</span>


<span class="cm">/* bert control */</span>
<span class="cp">#define CMD_STATE_CONTROL  0x12</span>
<span class="cp">#define MSGID_BERT_CONTROL 0x0e</span>
<span class="cp">#define MSGID_BERT_SET     0xfa</span>
<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_bert_control</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">BE</span>     <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">unused</span> <span class="o">:</span><span class="mi">7</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PACKED</span><span class="p">;</span>

<span class="cp">#define MSGID_TRI_STATE 0x2e</span>
<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_tri_state</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">RE</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* a/d ram port pins */</span>
	<span class="n">u8</span> <span class="n">PE</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* baud clock pin */</span>
	<span class="n">u8</span> <span class="n">AC</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* a/d clock pin */</span>
	<span class="n">u8</span> <span class="n">BE</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* baud clock pin */</span>
	<span class="n">u8</span> <span class="n">unused</span> <span class="o">:</span><span class="mi">4</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PACKED</span><span class="p">;</span>


<span class="cm">/* tune */</span>
<span class="cp">#define CMD_TUNE   0x38</span>
<span class="cp">#define MSGID_TUNE 0x16</span>
<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_tune_ctrl_data_pair</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
<span class="cp">#define BITS_8 0x07</span>
<span class="cp">#define BITS_7 0x06</span>
<span class="cp">#define BITS_6 0x05</span>
<span class="cp">#define BITS_5 0x04</span>
<span class="cp">#define BITS_4 0x03</span>
<span class="cp">#define BITS_3 0x02</span>
<span class="cp">#define BITS_2 0x01</span>
<span class="cp">#define BITS_1 0x00</span>
		<span class="n">u8</span> <span class="n">size</span>    <span class="o">:</span><span class="mi">3</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">unk</span>     <span class="o">:</span><span class="mi">2</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">clk_off</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">cs0</span>     <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">cs1</span>     <span class="o">:</span><span class="mi">1</span><span class="p">;</span>

	<span class="p">}</span> <span class="n">PACKED</span> <span class="n">ctrl</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">data</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PACKED</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_tune</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">length</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">clock_width</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">misc</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">TUNCTL_state</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_tune_ctrl_data_pair</span> <span class="n">ctl_dat</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">}</span> <span class="n">PACKED</span><span class="p">;</span>

<span class="cp">#define CMD_STATUS    0x38</span>
<span class="cp">#define MSGID_STATUS1 0x08</span>
<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_status1</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">EQ_MODE</span>       <span class="o">:</span><span class="mi">4</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">reserved</span>      <span class="o">:</span><span class="mi">2</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">QRE</span>           <span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* if QSE and the spectrum is inversed */</span>
		<span class="n">u8</span> <span class="n">QSE</span>           <span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* automatic spectral inversion */</span>
	<span class="p">}</span> <span class="n">PACKED</span> <span class="n">STATUS0</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">RECEIVER_LOCK</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">FEC_LOCK</span>      <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">OUT_PLL_LOCK</span>  <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">reserved</span>      <span class="o">:</span><span class="mi">5</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">PACKED</span> <span class="n">STATUS1</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">reserved</span>      <span class="o">:</span><span class="mi">2</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">BW</span>            <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">NTE</span>           <span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* NTSC filter sweep enabled */</span>
		<span class="n">u8</span> <span class="n">AQI</span>           <span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* currently acquiring */</span>
		<span class="n">u8</span> <span class="n">FA</span>            <span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* fast acquisition */</span>
		<span class="n">u8</span> <span class="n">ARI</span>           <span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* auto reacquire */</span>
		<span class="n">u8</span> <span class="n">TI</span>            <span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* programming the tuner */</span>
	<span class="p">}</span> <span class="n">PACKED</span> <span class="n">STATUS2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">STATUS3</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SNR_EST0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SNR_EST1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">TUNER_FREQ0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">TUNER_FREQ1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">TUNER_FREQ2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">TUNER_FREQ3</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SYM_RATE0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SYM_RATE1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SYM_RATE2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SYM_RATE3</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SYM_OFFSET0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SYM_OFFSET1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SYM_ERROR0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SYM_ERROR1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">IF_FREQ0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">IF_FREQ1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">IF_FREQ2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">IF_FREQ3</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">IF_OFFSET0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">IF_OFFSET1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">IF_ERROR0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">IF_ERROR1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">NTSC_FILTER0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">NTSC_FILTER1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">NTSC_FILTER2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">NTSC_FILTER3</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">NTSC_OFFSET0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">NTSC_OFFSET1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">NTSC_ERROR0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">NTSC_ERROR1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">INT_AGC_LEVEL0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">INT_AGC_LEVEL1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">EXT_AGC_LEVEL0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">EXT_AGC_LEVEL1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PACKED</span><span class="p">;</span>

<span class="cp">#define MSGID_STATUS2 0x14</span>
<span class="k">struct</span> <span class="n">bcm3510_hab_cmd_status2</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">EQ_MODE</span>  <span class="o">:</span><span class="mi">4</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">reserved</span> <span class="o">:</span><span class="mi">2</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">QRE</span>      <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">QSR</span>      <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">PACKED</span> <span class="n">STATUS0</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">RL</span>       <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">FL</span>       <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">OL</span>       <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">reserved</span> <span class="o">:</span><span class="mi">5</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">PACKED</span> <span class="n">STATUS1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SYMBOL_RATE0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SYMBOL_RATE1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SYMBOL_RATE2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SYMBOL_RATE3</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LDCERC0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LDCERC1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LDCERC2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LDCERC3</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LDUERC0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LDUERC1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LDUERC2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LDUERC3</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LDBER0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LDBER1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LDBER2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">LDBER3</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">MODE_TYPE</span> <span class="o">:</span><span class="mi">4</span><span class="p">;</span> <span class="cm">/* acquire mode 0 */</span>
		<span class="n">u8</span> <span class="n">reservd</span>   <span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">MODE_TYPE</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SNR_EST0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SNR_EST1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">SIGNAL</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PACKED</span><span class="p">;</span>

<span class="cp">#define CMD_SET_RF_BW_NOT_LISTED   0x3f</span>
<span class="cp">#define MSGID_SET_RF_BW_NOT_LISTED 0x11</span>
<span class="cm">/* TODO */</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
