<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › vt6656 › device.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>device.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 1996, 2003 VIA Networking Technologies, Inc.</span>
<span class="cm"> * All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License along</span>
<span class="cm"> * with this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="cm"> * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</span>
<span class="cm"> *</span>
<span class="cm"> * File: device.h</span>
<span class="cm"> *</span>
<span class="cm"> * Purpose: MAC Data structure</span>
<span class="cm"> *</span>
<span class="cm"> * Author: Tevin Chen</span>
<span class="cm"> *</span>
<span class="cm"> * Date: Mar 17, 1997</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __DEVICE_H__</span>
<span class="cp">#define __DEVICE_H__</span>

<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/mm.h&gt;</span>
<span class="cp">#include &lt;linux/errno.h&gt;</span>
<span class="cp">#include &lt;linux/ioport.h&gt;</span>
<span class="cp">#include &lt;linux/pci.h&gt;</span>
<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/netdevice.h&gt;</span>
<span class="cp">#include &lt;linux/etherdevice.h&gt;</span>
<span class="cp">#include &lt;linux/skbuff.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;linux/timer.h&gt;</span>
<span class="cp">#include &lt;linux/slab.h&gt;</span>
<span class="cp">#include &lt;linux/interrupt.h&gt;</span>
<span class="cp">#include &lt;linux/string.h&gt;</span>
<span class="cp">#include &lt;linux/wait.h&gt;</span>
<span class="cp">#include &lt;linux/if_arp.h&gt;</span>
<span class="cp">#include &lt;linux/sched.h&gt;</span>
<span class="cp">#include &lt;linux/if.h&gt;</span>
<span class="cp">#include &lt;linux/rtnetlink.h&gt;</span><span class="c1">//James</span>
<span class="cp">#include &lt;linux/proc_fs.h&gt;</span>
<span class="cp">#include &lt;linux/inetdevice.h&gt;</span>
<span class="cp">#include &lt;linux/reboot.h&gt;</span>
<span class="cp">#include &lt;linux/usb.h&gt;</span>
<span class="cp">#include &lt;linux/signal.h&gt;</span>
<span class="cp">#include &lt;linux/firmware.h&gt;</span>
<span class="cp">#include &lt;asm/io.h&gt;</span>
<span class="cp">#include &lt;asm/uaccess.h&gt;</span>
<span class="cp">#ifdef SIOCETHTOOL</span>
<span class="cp">#define DEVICE_ETHTOOL_IOCTL_SUPPORT</span>
<span class="cp">#include &lt;linux/ethtool.h&gt;</span>
<span class="cp">#else</span>
<span class="cp">#undef DEVICE_ETHTOOL_IOCTL_SUPPORT</span>
<span class="cp">#endif</span>
<span class="cm">/* Include Wireless Extension definition and check version - Jean II */</span>
<span class="cp">#include &lt;linux/wireless.h&gt;</span>
<span class="cp">#include &lt;net/iw_handler.h&gt;	</span><span class="c1">// New driver API</span>

<span class="cp">#ifndef WPA_SUPPLICANT_DRIVER_WEXT_SUPPORT</span>
<span class="cp">#define WPA_SUPPLICANT_DRIVER_WEXT_SUPPORT</span>
<span class="cp">#endif</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>please copy below macro to driver_event.c for API</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define RT_INSMOD_EVENT_FLAG                             0x0101</span>
<span class="cp">#define RT_UPDEV_EVENT_FLAG                               0x0102</span>
<span class="cp">#define RT_DISCONNECTED_EVENT_FLAG               0x0103</span>
<span class="cp">#define RT_WPACONNECTED_EVENT_FLAG             0x0104</span>
<span class="cp">#define RT_DOWNDEV_EVENT_FLAG                        0x0105</span>
<span class="cp">#define RT_RMMOD_EVENT_FLAG                              0x0106</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>device specific</p></td><td class="code"><div class="highlight"><pre><span class="cp">#include &quot;device_cfg.h&quot;</span>
<span class="cp">#include &quot;ttype.h&quot;</span>
<span class="cp">#include &quot;80211hdr.h&quot;</span>
<span class="cp">#include &quot;tether.h&quot;</span>
<span class="cp">#include &quot;wmgr.h&quot;</span>
<span class="cp">#include &quot;wcmd.h&quot;</span>
<span class="cp">#include &quot;mib.h&quot;</span>
<span class="cp">#include &quot;srom.h&quot;</span>
<span class="cp">#include &quot;rc4.h&quot;</span>
<span class="cp">#include &quot;desc.h&quot;</span>
<span class="cp">#include &quot;key.h&quot;</span>
<span class="cp">#include &quot;card.h&quot;</span>

<span class="cm">/*---------------------  Export Definitions -------------------------*/</span>
<span class="cp">#define VNT_USB_VENDOR_ID                     0x160a</span>
<span class="cp">#define VNT_USB_PRODUCT_ID                    0x3184</span>

<span class="cp">#define MAC_MAX_CONTEXT_REG     (256+128)</span>

<span class="cp">#define MAX_MULTICAST_ADDRESS_NUM       32</span>
<span class="cp">#define MULTICAST_ADDRESS_LIST_SIZE     (MAX_MULTICAST_ADDRESS_NUM * ETH_ALEN)</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><h1>define OP<em>MODE</em>INFRASTRUCTURE  0</h1>

<h1>define OP<em>MODE</em>ADHOC           1</h1>

<h1>define OP<em>MODE</em>AP              2</h1></td><td class="code"><div class="highlight"><pre><span class="cp">#define DUPLICATE_RX_CACHE_LENGTH       5</span>

<span class="cp">#define NUM_KEY_ENTRY                   11</span>

<span class="cp">#define TX_WEP_NONE                     0</span>
<span class="cp">#define TX_WEP_OTF                      1</span>
<span class="cp">#define TX_WEP_SW                       2</span>
<span class="cp">#define TX_WEP_SWOTP                    3</span>
<span class="cp">#define TX_WEP_OTPSW                    4</span>
<span class="cp">#define TX_WEP_SW232                    5</span>

<span class="cp">#define KEYSEL_WEP40                    0</span>
<span class="cp">#define KEYSEL_WEP104                   1</span>
<span class="cp">#define KEYSEL_TKIP                     2</span>
<span class="cp">#define KEYSEL_CCMP                     3</span>

<span class="cp">#define AUTO_FB_NONE            0</span>
<span class="cp">#define AUTO_FB_0               1</span>
<span class="cp">#define AUTO_FB_1               2</span>

<span class="cp">#define FB_RATE0                0</span>
<span class="cp">#define FB_RATE1                1</span></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><p>Antenna Mode</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define ANT_A                   0</span>
<span class="cp">#define ANT_B                   1</span>
<span class="cp">#define ANT_DIVERSITY           2</span>
<span class="cp">#define ANT_RXD_TXA             3</span>
<span class="cp">#define ANT_RXD_TXB             4</span>
<span class="cp">#define ANT_UNKNOWN             0xFF</span>
<span class="cp">#define ANT_TXA                 0</span>
<span class="cp">#define ANT_TXB                 1</span>
<span class="cp">#define ANT_RXA                 2</span>
<span class="cp">#define ANT_RXB                 3</span>


<span class="cp">#define MAXCHECKHANGCNT         4</span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><p>Packet type</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define TX_PKT_UNI              0x00</span>
<span class="cp">#define TX_PKT_MULTI            0x01</span>
<span class="cp">#define TX_PKT_BROAD            0x02</span>

<span class="cp">#define BB_VGA_LEVEL            4</span>
<span class="cp">#define BB_VGA_CHANGE_THRESHOLD 3</span>

<span class="cp">#ifndef RUN_AT</span>
<span class="cp">#define RUN_AT(x)                       (jiffies+(x))</span>
<span class="cp">#endif</span></pre></div></td></tr>


<tr id="section-7"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-7">&#182;</a></div><p>DMA related</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define RESERV_AC0DMA                   4</span>

<span class="cp">#define PRIVATE_Message                 0</span>

<span class="cm">/*---------------------  Export Types  ------------------------------*/</span>

<span class="cp">#define DBG_PRT(l, p, args...) { if (l &lt;= msglevel) printk(p, ##args); }</span>
<span class="cp">#define PRINT_K(p, args...) { if (PRIVATE_Message) printk(p, ##args); }</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">__device_msg_level</span> <span class="p">{</span>
	<span class="n">MSG_LEVEL_ERR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>            <span class="cm">/* Errors causing abnormal operation */</span>
	<span class="n">MSG_LEVEL_NOTICE</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>         <span class="cm">/* Errors needing user notification */</span>
	<span class="n">MSG_LEVEL_INFO</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>           <span class="cm">/* Normal message. */</span>
	<span class="n">MSG_LEVEL_VERBOSE</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>        <span class="cm">/* Will report all trival errors. */</span>
	<span class="n">MSG_LEVEL_DEBUG</span> <span class="o">=</span> <span class="mi">4</span>           <span class="cm">/* Only for debug purpose. */</span>
<span class="p">}</span> <span class="n">DEVICE_MSG_LEVEL</span><span class="p">,</span> <span class="o">*</span><span class="n">PDEVICE_MSG_LEVEL</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">__device_init_type</span> <span class="p">{</span>
	<span class="n">DEVICE_INIT_COLD</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>       <span class="cm">/* cold init */</span>
	<span class="n">DEVICE_INIT_RESET</span><span class="p">,</span>          <span class="cm">/* reset init or Dx to D0 power remain */</span>
	<span class="n">DEVICE_INIT_DXPL</span>            <span class="cm">/* Dx to D0 power lost init */</span>
<span class="p">}</span> <span class="n">DEVICE_INIT_TYPE</span><span class="p">,</span> <span class="o">*</span><span class="n">PDEVICE_INIT_TYPE</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-8"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-8">&#182;</a></div><p>USB</p></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-9"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-9">&#182;</a></div><p>Enum of context types for SendPacket</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">enum</span> <span class="n">_CONTEXT_TYPE</span> <span class="p">{</span>
    <span class="n">CONTEXT_DATA_PACKET</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">CONTEXT_MGMT_PACKET</span>
<span class="p">}</span> <span class="n">CONTEXT_TYPE</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-10"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-10">&#182;</a></div><p>RCB (Receive Control Block)</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">_RCB</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="o">*</span><span class="n">Next</span><span class="p">;</span>
    <span class="kt">signed</span> <span class="kt">long</span>                    <span class="n">Ref</span><span class="p">;</span>
    <span class="kt">void</span> <span class="o">*</span><span class="n">pDevice</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">urb</span>              <span class="o">*</span><span class="n">pUrb</span><span class="p">;</span>
    <span class="n">SRxMgmtPacket</span>           <span class="n">sMngPacket</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">sk_buff</span><span class="o">*</span>         <span class="n">skb</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bBoolInUse</span><span class="p">;</span>

<span class="p">}</span> <span class="n">RCB</span><span class="p">,</span> <span class="o">*</span><span class="n">PRCB</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-11"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-11">&#182;</a></div><p>used to track bulk out irps</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">_USB_SEND_CONTEXT</span> <span class="p">{</span>
    <span class="kt">void</span> <span class="o">*</span><span class="n">pDevice</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">pPacket</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">urb</span>      <span class="o">*</span><span class="n">pUrb</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">uBufLen</span><span class="p">;</span>
    <span class="n">CONTEXT_TYPE</span>    <span class="n">Type</span><span class="p">;</span>
    <span class="n">SEthernetHeader</span> <span class="n">sEthHeader</span><span class="p">;</span>
    <span class="kt">void</span> <span class="o">*</span><span class="n">Next</span><span class="p">;</span>
    <span class="n">BOOL</span>            <span class="n">bBoolInUse</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span>           <span class="n">Data</span><span class="p">[</span><span class="n">MAX_TOTAL_SIZE_WITH_ALL_HEADERS</span><span class="p">];</span>
<span class="p">}</span> <span class="n">USB_SEND_CONTEXT</span><span class="p">,</span> <span class="o">*</span><span class="n">PUSB_SEND_CONTEXT</span><span class="p">;</span>

<span class="cm">/* structure got from configuration file as user-desired default settings */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_DEFAULT_CONFIG</span> <span class="p">{</span>
	<span class="kt">signed</span> <span class="kt">int</span>    <span class="n">ZoneType</span><span class="p">;</span>
	<span class="kt">signed</span> <span class="kt">int</span>    <span class="n">eConfigMode</span><span class="p">;</span>
	<span class="kt">signed</span> <span class="kt">int</span>    <span class="n">eAuthenMode</span><span class="p">;</span>        <span class="cm">/* open/wep/wpa */</span>
	<span class="kt">signed</span> <span class="kt">int</span>    <span class="n">bShareKeyAlgorithm</span><span class="p">;</span> <span class="cm">/* open-open/{open,wep}-sharekey */</span>
	<span class="kt">signed</span> <span class="kt">int</span>    <span class="n">keyidx</span><span class="p">;</span>             <span class="cm">/* wepkey index */</span>
	<span class="kt">signed</span> <span class="kt">int</span>    <span class="n">eEncryptionStatus</span><span class="p">;</span>
<span class="p">}</span> <span class="n">DEFAULT_CONFIG</span><span class="p">,</span> <span class="o">*</span><span class="n">PDEFAULT_CONFIG</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-12"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-12">&#182;</a></div><p>Structure to keep track of usb interrupt packets</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">uDataLen</span><span class="p">;</span>
    <span class="n">PBYTE</span>           <span class="n">pDataBuf</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-13"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-13">&#182;</a></div><p>struct urb      *pUrb;</p></td><td class="code"><div class="highlight"><pre>    <span class="n">BOOL</span>            <span class="n">bInUse</span><span class="p">;</span>
<span class="p">}</span> <span class="n">INT_BUFFER</span><span class="p">,</span> <span class="o">*</span><span class="n">PINT_BUFFER</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-14"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-14">&#182;</a></div><p>0:11A 1:11B 2:11G</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">enum</span> <span class="n">_VIA_BB_TYPE</span>
<span class="p">{</span>
    <span class="n">BB_TYPE_11A</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">BB_TYPE_11B</span><span class="p">,</span>
    <span class="n">BB_TYPE_11G</span>
<span class="p">}</span> <span class="n">VIA_BB_TYPE</span><span class="p">,</span> <span class="o">*</span><span class="n">PVIA_BB_TYPE</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-15"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-15">&#182;</a></div><p>0:11a,1:11b,2:11gb(only CCK in BasicRate),3:11ga(OFDM in Basic Rate)</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">enum</span> <span class="n">_VIA_PKT_TYPE</span>
<span class="p">{</span>
    <span class="n">PK_TYPE_11A</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">PK_TYPE_11B</span><span class="p">,</span>
    <span class="n">PK_TYPE_11GB</span><span class="p">,</span>
    <span class="n">PK_TYPE_11GA</span>
<span class="p">}</span> <span class="n">VIA_PKT_TYPE</span><span class="p">,</span> <span class="o">*</span><span class="n">PVIA_PKT_TYPE</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-16"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-16">&#182;</a></div><p>++ NDIS related</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">enum</span> <span class="n">__DEVICE_NDIS_STATUS</span> <span class="p">{</span>
    <span class="n">STATUS_SUCCESS</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">STATUS_FAILURE</span><span class="p">,</span>
    <span class="n">STATUS_RESOURCES</span><span class="p">,</span>
    <span class="n">STATUS_PENDING</span><span class="p">,</span>
<span class="p">}</span> <span class="n">DEVICE_NDIS_STATUS</span><span class="p">,</span> <span class="o">*</span><span class="n">PDEVICE_NDIS_STATUS</span><span class="p">;</span>

<span class="cp">#define MAX_BSSIDINFO_4_PMKID   16</span>
<span class="cp">#define MAX_PMKIDLIST           5</span></pre></div></td></tr>


<tr id="section-17"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-17">&#182;</a></div><p>Flags for PMKID Candidate list structure</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define NDIS_802_11_PMKID_CANDIDATE_PREAUTH_ENABLED	0x01</span></pre></div></td></tr>


<tr id="section-18"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-18">&#182;</a></div><p>PMKID Structures</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">char</span>   <span class="n">NDIS_802_11_PMKID_VALUE</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>


<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_NDIS_802_11_WEP_STATUS</span>
<span class="p">{</span>
    <span class="n">Ndis802_11WEPEnabled</span><span class="p">,</span>
    <span class="n">Ndis802_11Encryption1Enabled</span> <span class="o">=</span> <span class="n">Ndis802_11WEPEnabled</span><span class="p">,</span>
    <span class="n">Ndis802_11WEPDisabled</span><span class="p">,</span>
    <span class="n">Ndis802_11EncryptionDisabled</span> <span class="o">=</span> <span class="n">Ndis802_11WEPDisabled</span><span class="p">,</span>
    <span class="n">Ndis802_11WEPKeyAbsent</span><span class="p">,</span>
    <span class="n">Ndis802_11Encryption1KeyAbsent</span> <span class="o">=</span> <span class="n">Ndis802_11WEPKeyAbsent</span><span class="p">,</span>
    <span class="n">Ndis802_11WEPNotSupported</span><span class="p">,</span>
    <span class="n">Ndis802_11EncryptionNotSupported</span> <span class="o">=</span> <span class="n">Ndis802_11WEPNotSupported</span><span class="p">,</span>
    <span class="n">Ndis802_11Encryption2Enabled</span><span class="p">,</span>
    <span class="n">Ndis802_11Encryption2KeyAbsent</span><span class="p">,</span>
    <span class="n">Ndis802_11Encryption3Enabled</span><span class="p">,</span>
    <span class="n">Ndis802_11Encryption3KeyAbsent</span>
<span class="p">}</span> <span class="n">NDIS_802_11_WEP_STATUS</span><span class="p">,</span> <span class="o">*</span><span class="n">PNDIS_802_11_WEP_STATUS</span><span class="p">,</span>
  <span class="n">NDIS_802_11_ENCRYPTION_STATUS</span><span class="p">,</span> <span class="o">*</span><span class="n">PNDIS_802_11_ENCRYPTION_STATUS</span><span class="p">;</span>


<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_NDIS_802_11_STATUS_TYPE</span>
<span class="p">{</span>
    <span class="n">Ndis802_11StatusType_Authentication</span><span class="p">,</span>
    <span class="n">Ndis802_11StatusType_MediaStreamMode</span><span class="p">,</span>
    <span class="n">Ndis802_11StatusType_PMKID_CandidateList</span><span class="p">,</span>
    <span class="n">Ndis802_11StatusTypeMax</span>    <span class="c1">// not a real type, defined as an upper bound</span>
<span class="p">}</span> <span class="n">NDIS_802_11_STATUS_TYPE</span><span class="p">,</span> <span class="o">*</span><span class="n">PNDIS_802_11_STATUS_TYPE</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-19"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-19">&#182;</a></div><p>Added new types for PMKID Candidate lists.</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">_PMKID_CANDIDATE</span> <span class="p">{</span>
    <span class="n">NDIS_802_11_MAC_ADDRESS</span> <span class="n">BSSID</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">Flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PMKID_CANDIDATE</span><span class="p">,</span> <span class="o">*</span><span class="n">PPMKID_CANDIDATE</span><span class="p">;</span>


<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_BSSID_INFO</span>
<span class="p">{</span>
    <span class="n">NDIS_802_11_MAC_ADDRESS</span> <span class="n">BSSID</span><span class="p">;</span>
    <span class="n">NDIS_802_11_PMKID_VALUE</span> <span class="n">PMKID</span><span class="p">;</span>
<span class="p">}</span> <span class="n">BSSID_INFO</span><span class="p">,</span> <span class="o">*</span><span class="n">PBSSID_INFO</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagSPMKID</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">Length</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">BSSIDInfoCount</span><span class="p">;</span>
    <span class="n">BSSID_INFO</span> <span class="n">BSSIDInfo</span><span class="p">[</span><span class="n">MAX_BSSIDINFO_4_PMKID</span><span class="p">];</span>
<span class="p">}</span> <span class="n">SPMKID</span><span class="p">,</span> <span class="o">*</span><span class="n">PSPMKID</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagSPMKIDCandidateEvent</span> <span class="p">{</span>
    <span class="n">NDIS_802_11_STATUS_TYPE</span>     <span class="n">StatusType</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">Version</span><span class="p">;</span>       <span class="cm">/* Version of the structure */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">NumCandidates</span><span class="p">;</span> <span class="cm">/* No. of pmkid candidates */</span>
    <span class="n">PMKID_CANDIDATE</span> <span class="n">CandidateList</span><span class="p">[</span><span class="n">MAX_PMKIDLIST</span><span class="p">];</span>
<span class="p">}</span> <span class="n">SPMKIDCandidateEvent</span><span class="p">,</span> <span class="o">*</span><span class="n">PSPMKIDCandidateEvent</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-20"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-20">&#182;</a></div><p>--</p></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-21"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-21">&#182;</a></div><p>++ 802.11h related</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define MAX_QUIET_COUNT     8</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagSQuietControl</span> <span class="p">{</span>
    <span class="n">BOOL</span>        <span class="n">bEnable</span><span class="p">;</span>
    <span class="n">DWORD</span>       <span class="n">dwStartTime</span><span class="p">;</span>
    <span class="n">BYTE</span>        <span class="n">byPeriod</span><span class="p">;</span>
    <span class="n">WORD</span>        <span class="n">wDuration</span><span class="p">;</span>
<span class="p">}</span> <span class="n">SQuietControl</span><span class="p">,</span> <span class="o">*</span><span class="n">PSQuietControl</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-22"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-22">&#182;</a></div><p>--</p></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-23"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-23">&#182;</a></div><p>The receive duplicate detection cache entry</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagSCacheEntry</span><span class="p">{</span>
    <span class="n">WORD</span>        <span class="n">wFmSequence</span><span class="p">;</span>
    <span class="n">BYTE</span>        <span class="n">abyAddr2</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="n">WORD</span>        <span class="n">wFrameCtl</span><span class="p">;</span>
<span class="p">}</span> <span class="n">SCacheEntry</span><span class="p">,</span> <span class="o">*</span><span class="n">PSCacheEntry</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagSCache</span><span class="p">{</span>
<span class="cm">/* The receive cache is updated circularly.  The next entry to be written is</span>
<span class="cm"> * indexed by the &quot;InPtr&quot;.</span>
<span class="cm">*/</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">uInPtr</span><span class="p">;</span> <span class="cm">/* Place to use next */</span>
    <span class="n">SCacheEntry</span>     <span class="n">asCacheEntry</span><span class="p">[</span><span class="n">DUPLICATE_RX_CACHE_LENGTH</span><span class="p">];</span>
<span class="p">}</span> <span class="n">SCache</span><span class="p">,</span> <span class="o">*</span><span class="n">PSCache</span><span class="p">;</span>

<span class="cp">#define CB_MAX_RX_FRAG                 64</span></pre></div></td></tr>


<tr id="section-24"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-24">&#182;</a></div><p>DeFragment Control Block, used for collecting fragments prior to reassembly</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagSDeFragControlBlock</span>
<span class="p">{</span>
    <span class="n">WORD</span>            <span class="n">wSequence</span><span class="p">;</span>
    <span class="n">WORD</span>            <span class="n">wFragNum</span><span class="p">;</span>
    <span class="n">BYTE</span>            <span class="n">abyAddr2</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">uLifetime</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">sk_buff</span><span class="o">*</span> <span class="n">skb</span><span class="p">;</span>
    <span class="n">PBYTE</span>           <span class="n">pbyRxBuffer</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>            <span class="n">cbFrameLength</span><span class="p">;</span>
    <span class="n">BOOL</span>            <span class="n">bInUse</span><span class="p">;</span>
<span class="p">}</span> <span class="n">SDeFragControlBlock</span><span class="p">,</span> <span class="o">*</span><span class="n">PSDeFragControlBlock</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-25"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-25">&#182;</a></div><p>flags for options</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define     DEVICE_FLAGS_UNPLUG          0x00000001UL</span>
<span class="cp">#define     DEVICE_FLAGS_PREAMBLE_TYPE   0x00000002UL</span>
<span class="cp">#define     DEVICE_FLAGS_OP_MODE         0x00000004UL</span>
<span class="cp">#define     DEVICE_FLAGS_PS_MODE         0x00000008UL</span>
<span class="cp">#define		DEVICE_FLAGS_80211h_MODE	 0x00000010UL</span></pre></div></td></tr>


<tr id="section-26"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-26">&#182;</a></div><p>flags for driver status</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define     DEVICE_FLAGS_OPENED          0x00010000UL</span>
<span class="cp">#define     DEVICE_FLAGS_WOL_ENABLED     0x00080000UL</span></pre></div></td></tr>


<tr id="section-27"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-27">&#182;</a></div><p>flags for capbilities</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define     DEVICE_FLAGS_TX_ALIGN        0x01000000UL</span>
<span class="cp">#define     DEVICE_FLAGS_HAVE_CAM        0x02000000UL</span>
<span class="cp">#define     DEVICE_FLAGS_FLOW_CTRL       0x04000000UL</span></pre></div></td></tr>


<tr id="section-28"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-28">&#182;</a></div><p>flags for MII status</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define     DEVICE_LINK_FAIL             0x00000001UL</span>
<span class="cp">#define     DEVICE_SPEED_10              0x00000002UL</span>
<span class="cp">#define     DEVICE_SPEED_100             0x00000004UL</span>
<span class="cp">#define     DEVICE_SPEED_1000            0x00000008UL</span>
<span class="cp">#define     DEVICE_DUPLEX_FULL           0x00000010UL</span>
<span class="cp">#define     DEVICE_AUTONEG_ENABLE        0x00000020UL</span>
<span class="cp">#define     DEVICE_FORCED_BY_EEPROM      0x00000040UL</span></pre></div></td></tr>


<tr id="section-29"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-29">&#182;</a></div><p>for device<em>set</em>media_duplex</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define     DEVICE_LINK_CHANGE           0x00000001UL</span>


<span class="k">typedef</span> <span class="k">struct</span> <span class="n">__device_opt</span> <span class="p">{</span>
    <span class="kt">int</span>         <span class="n">nRxDescs0</span><span class="p">;</span>    <span class="c1">//Number of RX descriptors0</span>
    <span class="kt">int</span>         <span class="n">nTxDescs0</span><span class="p">;</span>    <span class="c1">//Number of TX descriptors 0, 1, 2, 3</span>
    <span class="kt">int</span>         <span class="n">rts_thresh</span><span class="p">;</span>   <span class="c1">//rts threshold</span>
    <span class="kt">int</span>         <span class="n">frag_thresh</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">OpMode</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">data_rate</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">channel_num</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">short_retry</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">long_retry</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">bbp_type</span><span class="p">;</span>
    <span class="n">u32</span>         <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">OPTIONS</span><span class="p">,</span> <span class="o">*</span><span class="n">POPTIONS</span><span class="p">;</span>


<span class="k">typedef</span> <span class="k">struct</span> <span class="n">__device_info</span> <span class="p">{</span></pre></div></td></tr>


<tr id="section-30"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-30">&#182;</a></div><p>netdev</p></td><td class="code"><div class="highlight"><pre>	<span class="k">struct</span> <span class="n">usb_device</span><span class="o">*</span>          <span class="n">usb</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">net_device</span><span class="o">*</span>          <span class="n">dev</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">net_device_stats</span>     <span class="n">stats</span><span class="p">;</span>

    <span class="k">const</span> <span class="k">struct</span> <span class="n">firmware</span>	<span class="o">*</span><span class="n">firmware</span><span class="p">;</span>

    <span class="n">OPTIONS</span>                     <span class="n">sOpts</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">tasklet_struct</span>       <span class="n">CmdWorkItem</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">tasklet_struct</span>       <span class="n">EventWorkItem</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">tasklet_struct</span>       <span class="n">ReadWorkItem</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">tasklet_struct</span>       <span class="n">RxMngWorkItem</span><span class="p">;</span>

    <span class="n">u32</span>                         <span class="n">rx_buf_sz</span><span class="p">;</span>
    <span class="kt">int</span>                         <span class="n">multicast_limit</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byRxMode</span><span class="p">;</span>

    <span class="n">spinlock_t</span>                  <span class="n">lock</span><span class="p">;</span>

    <span class="n">u32</span>                         <span class="n">rx_bytes</span><span class="p">;</span>

    <span class="n">BYTE</span>                        <span class="n">byRevId</span><span class="p">;</span>

    <span class="n">u32</span>                         <span class="n">flags</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">Flags</span><span class="p">;</span>

    <span class="n">SCache</span>                      <span class="n">sDupRxCache</span><span class="p">;</span>

    <span class="n">SDeFragControlBlock</span>         <span class="n">sRxDFCB</span><span class="p">[</span><span class="n">CB_MAX_RX_FRAG</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                        <span class="n">cbDFCB</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                        <span class="n">cbFreeDFCB</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                        <span class="n">uCurrentDFCBIdx</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-31"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-31">&#182;</a></div><p>+++USB</p></td><td class="code"><div class="highlight"><pre>    <span class="k">struct</span> <span class="n">urb</span>                  <span class="o">*</span><span class="n">pControlURB</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">urb</span>                  <span class="o">*</span><span class="n">pInterruptURB</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">usb_ctrlrequest</span>      <span class="n">sUsbCtlRequest</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">int</span>                        <span class="n">int_interval</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-32"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-32">&#182;</a></div><p>Variables to track resources for the BULK In Pipe</p></td><td class="code"><div class="highlight"><pre>    <span class="n">PRCB</span>                        <span class="n">pRCBMem</span><span class="p">;</span>
    <span class="n">PRCB</span>                        <span class="n">apRCB</span><span class="p">[</span><span class="n">CB_MAX_RX_DESC</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                        <span class="n">cbRD</span><span class="p">;</span>
    <span class="n">PRCB</span>                        <span class="n">FirstRecvFreeList</span><span class="p">;</span>
    <span class="n">PRCB</span>                        <span class="n">LastRecvFreeList</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                        <span class="n">NumRecvFreeList</span><span class="p">;</span>
    <span class="n">PRCB</span>                        <span class="n">FirstRecvMngList</span><span class="p">;</span>
    <span class="n">PRCB</span>                        <span class="n">LastRecvMngList</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                        <span class="n">NumRecvMngList</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bIsRxWorkItemQueued</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bIsRxMngWorkItemQueued</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ulRcvRefCount</span><span class="p">;</span> <span class="cm">/* packets that have not returned back */</span></pre></div></td></tr>


<tr id="section-33"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-33">&#182;</a></div><p>Variables to track resources for the BULK Out Pipe</p></td><td class="code"><div class="highlight"><pre>    <span class="n">PUSB_SEND_CONTEXT</span>           <span class="n">apTD</span><span class="p">[</span><span class="n">CB_MAX_TX_DESC</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                        <span class="n">cbTD</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-34"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-34">&#182;</a></div><p>Variables to track resources for the Interript In Pipe</p></td><td class="code"><div class="highlight"><pre>    <span class="n">INT_BUFFER</span>                  <span class="n">intBuf</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">fKillEventPollingThread</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bEventAvailable</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-35"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-35">&#182;</a></div><p>default config from file by user setting</p></td><td class="code"><div class="highlight"><pre>    <span class="n">DEFAULT_CONFIG</span>    <span class="n">config_file</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-36"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-36">&#182;</a></div><p>Statistic for USB
protect with spinlock</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulBulkInPosted</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulBulkInError</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulBulkInContCRCError</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulBulkInBytesRead</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulBulkOutPosted</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulBulkOutError</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulBulkOutContCRCError</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulBulkOutBytesWrite</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulIntInPosted</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulIntInError</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulIntInContCRCError</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulIntInBytesRead</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-37"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-37">&#182;</a></div><p>Version control</p></td><td class="code"><div class="highlight"><pre>    <span class="n">WORD</span>                        <span class="n">wFirmwareVersion</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byLocalID</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byRFType</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byBBRxConf</span><span class="p">;</span>


    <span class="n">BYTE</span>                        <span class="n">byZoneType</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bZoneRegExist</span><span class="p">;</span>

    <span class="n">BYTE</span>                        <span class="n">byOriginalZonetype</span><span class="p">;</span>

    <span class="n">BOOL</span>                        <span class="n">bLinkPass</span><span class="p">;</span>          <span class="c1">// link status: OK or fail</span>
    <span class="n">BYTE</span>                        <span class="n">abyCurrentNetAddr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="n">BYTE</span>                        <span class="n">abyPermanentNetAddr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span></pre></div></td></tr>


<tr id="section-38"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-38">&#182;</a></div><p>SW network address</p></td><td class="code"><div class="highlight"><pre>	<span class="cm">/* u8 abySoftwareNetAddr[ETH_ALEN]; */</span>
    <span class="n">BOOL</span>                        <span class="n">bExistSWNetAddr</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-39"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-39">&#182;</a></div><p>Adapter statistics</p></td><td class="code"><div class="highlight"><pre>    <span class="n">SStatCounter</span>                <span class="n">scStatistic</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-40"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-40">&#182;</a></div><p>802.11 counter</p></td><td class="code"><div class="highlight"><pre>    <span class="n">SDot11Counters</span>              <span class="n">s802_11Counter</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-41"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-41">&#182;</a></div><p>Maintain statistical debug info.</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">packetsReceived</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">packetsReceivedDropped</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">packetsReceivedOverflow</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">packetsSent</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">packetsSentDropped</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">SendContextsInUse</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">RcvBuffersInUse</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-42"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-42">&#182;</a></div><p>802.11 management</p></td><td class="code"><div class="highlight"><pre>    <span class="n">SMgmtObject</span>                 <span class="n">sMgmtObj</span><span class="p">;</span>

    <span class="n">QWORD</span>                       <span class="n">qwCurrTSF</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                        <span class="n">cbBulkInMax</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bPSRxBeacon</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-43"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-43">&#182;</a></div><p>802.11 MAC specific</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">int</span>                        <span class="n">uCurrRSSI</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byCurrSQ</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-44"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-44">&#182;</a></div><p>Antenna Diversity</p></td><td class="code"><div class="highlight"><pre>    <span class="n">BOOL</span>                        <span class="n">bTxRxAntInv</span><span class="p">;</span>
    <span class="n">DWORD</span>                       <span class="n">dwRxAntennaSel</span><span class="p">;</span>
    <span class="n">DWORD</span>                       <span class="n">dwTxAntennaSel</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byAntennaCount</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byRxAntennaMode</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byTxAntennaMode</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byRadioCtl</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">bHWRadioOff</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-45"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-45">&#182;</a></div><p>SQ3 functions for antenna diversity</p></td><td class="code"><div class="highlight"><pre>    <span class="k">struct</span> <span class="n">timer_list</span>           <span class="n">TimerSQ3Tmax1</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">timer_list</span>           <span class="n">TimerSQ3Tmax2</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">timer_list</span>           <span class="n">TimerSQ3Tmax3</span><span class="p">;</span>

    <span class="n">BOOL</span>                        <span class="n">bDiversityRegCtlON</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bDiversityEnable</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulDiversityNValue</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulDiversityMValue</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byTMax</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byTMax2</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byTMax3</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulSQ3TH</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">uDiversityCnt</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byAntennaState</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulRatio_State0</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulRatio_State1</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulSQ3_State0</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulSQ3_State1</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">aulSQ3Val</span><span class="p">[</span><span class="n">MAX_RATE</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">aulPktNum</span><span class="p">[</span><span class="n">MAX_RATE</span><span class="p">];</span>

	<span class="cm">/* IFS &amp; Cw */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">uSIFS</span><span class="p">;</span>  <span class="cm">/* Current SIFS */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">uDIFS</span><span class="p">;</span>  <span class="cm">/* Current DIFS */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">uEIFS</span><span class="p">;</span>  <span class="cm">/* Current EIFS */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">uSlot</span><span class="p">;</span>  <span class="cm">/* Current SlotTime */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">uCwMin</span><span class="p">;</span> <span class="cm">/* Current CwMin */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">uCwMax</span><span class="p">;</span> <span class="cm">/* CwMax is fixed on 1023 */</span></pre></div></td></tr>


<tr id="section-46"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-46">&#182;</a></div><p>PHY parameter</p></td><td class="code"><div class="highlight"><pre>    <span class="n">BYTE</span>                        <span class="n">bySIFS</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byDIFS</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byEIFS</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">bySlot</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byCWMaxMin</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-47"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-47">&#182;</a></div><p>Rate</p></td><td class="code"><div class="highlight"><pre>    <span class="n">VIA_BB_TYPE</span>                 <span class="n">byBBType</span><span class="p">;</span> <span class="c1">//0: 11A, 1:11B, 2:11G</span>
    <span class="n">VIA_PKT_TYPE</span>                <span class="n">byPacketType</span><span class="p">;</span> <span class="c1">//0:11a,1:11b,2:11gb(only CCK in BasicRate),3:11ga(OFDM in Basic Rate)</span>
    <span class="n">WORD</span>                        <span class="n">wBasicRate</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byACKRate</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byTopOFDMBasicRate</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byTopCCKBasicRate</span><span class="p">;</span>


    <span class="n">DWORD</span>                       <span class="n">dwAotoRateTxOkCnt</span><span class="p">;</span>
    <span class="n">DWORD</span>                       <span class="n">dwAotoRateTxFailCnt</span><span class="p">;</span>
    <span class="n">DWORD</span>                       <span class="n">dwErrorRateThreshold</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
    <span class="n">DWORD</span>                       <span class="n">dwTPTable</span><span class="p">[</span><span class="n">MAX_RATE</span><span class="p">];</span>
    <span class="n">BYTE</span>                        <span class="n">abyEEPROM</span><span class="p">[</span><span class="n">EEP_MAX_CONTEXT_SIZE</span><span class="p">];</span>  <span class="c1">//DWORD alignment</span>

    <span class="n">BYTE</span>                        <span class="n">byMinChannel</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byMaxChannel</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                        <span class="n">uConnectionRate</span><span class="p">;</span>

    <span class="n">BYTE</span>                        <span class="n">byPreambleType</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byShortPreamble</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-48"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-48">&#182;</a></div><p>CARD<em>PHY</em>TYPE</p></td><td class="code"><div class="highlight"><pre>    <span class="n">BYTE</span>                        <span class="n">eConfigPHYMode</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-49"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-49">&#182;</a></div><p>For RF Power table</p></td><td class="code"><div class="highlight"><pre>    <span class="n">BYTE</span>                        <span class="n">byCCKPwr</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byOFDMPwrG</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byOFDMPwrA</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byCurPwr</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">abyCCKPwrTbl</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
    <span class="n">BYTE</span>                        <span class="n">abyOFDMPwrTbl</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
    <span class="n">BYTE</span>                        <span class="n">abyOFDMAPwrTbl</span><span class="p">[</span><span class="mi">42</span><span class="p">];</span>

    <span class="n">WORD</span>                        <span class="n">wCurrentRate</span><span class="p">;</span>
    <span class="n">WORD</span>                        <span class="n">wRTSThreshold</span><span class="p">;</span>
    <span class="n">WORD</span>                        <span class="n">wFragmentationThreshold</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byShortRetryLimit</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">byLongRetryLimit</span><span class="p">;</span>
    <span class="n">CARD_OP_MODE</span>                <span class="n">eOPMode</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bBSSIDFilter</span><span class="p">;</span>
    <span class="n">WORD</span>                        <span class="n">wMaxTransmitMSDULifetime</span><span class="p">;</span>
    <span class="n">BYTE</span>                        <span class="n">abyBSSID</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="n">BYTE</span>                        <span class="n">abyDesireBSSID</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="n">WORD</span>                        <span class="n">wCTSDuration</span><span class="p">;</span>       <span class="c1">// update while speed change</span>
    <span class="n">WORD</span>                        <span class="n">wACKDuration</span><span class="p">;</span>       <span class="c1">// update while speed change</span>
    <span class="n">WORD</span>                        <span class="n">wRTSTransmitLen</span><span class="p">;</span>    <span class="c1">// update while speed change</span>
    <span class="n">BYTE</span>                        <span class="n">byRTSServiceField</span><span class="p">;</span>  <span class="c1">// update while speed change</span>
    <span class="n">BYTE</span>                        <span class="n">byRTSSignalField</span><span class="p">;</span>   <span class="c1">// update while speed change</span>

    <span class="n">DWORD</span>                       <span class="n">dwMaxReceiveLifetime</span><span class="p">;</span>       <span class="c1">// dot11MaxReceiveLifetime</span>

    <span class="n">BOOL</span>                        <span class="n">bCCK</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bEncryptionEnable</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bLongHeader</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bSoftwareGenCrcErr</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bShortSlotTime</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bProtectMode</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bNonERPPresent</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bBarkerPreambleMd</span><span class="p">;</span>

    <span class="n">BYTE</span>                        <span class="n">byERPFlag</span><span class="p">;</span>
    <span class="n">WORD</span>                        <span class="n">wUseProtectCntDown</span><span class="p">;</span>

    <span class="n">BOOL</span>                        <span class="n">bRadioControlOff</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bRadioOff</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-50"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-50">&#182;</a></div><p>Power save</p></td><td class="code"><div class="highlight"><pre>    <span class="n">BOOL</span>                        <span class="n">bEnablePSMode</span><span class="p">;</span>
    <span class="n">WORD</span>                        <span class="n">wListenInterval</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bPWBitOn</span><span class="p">;</span>
    <span class="n">WMAC_POWER_MODE</span>             <span class="n">ePSMode</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">ulPSModeWaitTx</span><span class="p">;</span>
    <span class="n">BOOL</span>                        <span class="n">bPSModeTxBurst</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-51"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-51">&#182;</a></div><p>Beacon releated</p></td><td class="code"><div class="highlight"><pre>    <span class="n">WORD</span>                    <span class="n">wSeqCounter</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bBeaconBufReady</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bBeaconSent</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bFixRate</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">byCurrentCh</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                    <span class="n">uScanTime</span><span class="p">;</span>

    <span class="n">CMD_STATE</span>               <span class="n">eCommandState</span><span class="p">;</span>

    <span class="n">CMD_CODE</span>                <span class="n">eCommand</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bBeaconTx</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">byScanBBType</span><span class="p">;</span>

    <span class="n">BOOL</span>                    <span class="n">bStopBeacon</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bStopDataPkt</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bStopTx0Pkt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                    <span class="n">uAutoReConnectTime</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                    <span class="n">uIsroamingTime</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-52"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-52">&#182;</a></div><p>802.11 counter</p></td><td class="code"><div class="highlight"><pre>    <span class="n">CMD_ITEM</span>                <span class="n">eCmdQueue</span><span class="p">[</span><span class="n">CMD_Q_SIZE</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                    <span class="n">uCmdDequeueIdx</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                    <span class="n">uCmdEnqueueIdx</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                    <span class="n">cbFreeCmdQueue</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bCmdRunning</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bCmdClear</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bNeedRadioOFF</span><span class="p">;</span>

    <span class="n">BOOL</span>                    <span class="n">bEnableRoaming</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bIsRoaming</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bFastRoaming</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">bSameBSSMaxNum</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">bSameBSSCurNum</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bRoaming</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">b11hEable</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span>                   <span class="n">ulTxPower</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-53"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-53">&#182;</a></div><p>Encryption</p></td><td class="code"><div class="highlight"><pre>    <span class="n">NDIS_802_11_WEP_STATUS</span>  <span class="n">eEncryptionStatus</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bTransmitKey</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-54"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-54">&#182;</a></div><p>mike add :save old Encryption</p></td><td class="code"><div class="highlight"><pre>    <span class="n">NDIS_802_11_WEP_STATUS</span>  <span class="n">eOldEncryptionStatus</span><span class="p">;</span>

    <span class="n">SKeyManagement</span>          <span class="n">sKey</span><span class="p">;</span>
    <span class="n">DWORD</span>                   <span class="n">dwIVCounter</span><span class="p">;</span>


    <span class="n">RC4Ext</span>                  <span class="n">SBox</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">abyPRNG</span><span class="p">[</span><span class="n">WLAN_WEPMAX_KEYLEN</span><span class="o">+</span><span class="mi">3</span><span class="p">];</span>
    <span class="n">BYTE</span>                    <span class="n">byKeyIndex</span><span class="p">;</span>

    <span class="n">BOOL</span>                    <span class="n">bAES</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">byCntMeasure</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">int</span>                    <span class="n">uKeyLength</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">abyKey</span><span class="p">[</span><span class="n">WLAN_WEP232_KEYLEN</span><span class="p">];</span></pre></div></td></tr>


<tr id="section-55"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-55">&#182;</a></div><p>for AP mode</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">int</span>                    <span class="n">uAssocCount</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bMoreData</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-56"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-56">&#182;</a></div><p>QoS</p></td><td class="code"><div class="highlight"><pre>    <span class="n">BOOL</span>                    <span class="n">bGrpAckPolicy</span><span class="p">;</span>


    <span class="n">BYTE</span>                    <span class="n">byAutoFBCtrl</span><span class="p">;</span>

    <span class="n">BOOL</span>                    <span class="n">bTxMICFail</span><span class="p">;</span>
    <span class="n">BOOL</span>                    <span class="n">bRxMICFail</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-57"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-57">&#182;</a></div><p>For Update BaseBand VGA Gain Offset</p></td><td class="code"><div class="highlight"><pre>    <span class="n">BOOL</span>                    <span class="n">bUpdateBBVGA</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                    <span class="n">uBBVGADiffCount</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">byBBVGANew</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">byBBVGACurrent</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">abyBBVGA</span><span class="p">[</span><span class="n">BB_VGA_LEVEL</span><span class="p">];</span>
    <span class="kt">signed</span> <span class="kt">long</span>                    <span class="n">ldBmThreshold</span><span class="p">[</span><span class="n">BB_VGA_LEVEL</span><span class="p">];</span>

    <span class="n">BYTE</span>                    <span class="n">byBBPreEDRSSI</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">byBBPreEDIndex</span><span class="p">;</span>


    <span class="n">BOOL</span>                    <span class="n">bRadioCmd</span><span class="p">;</span>
    <span class="n">DWORD</span>                   <span class="n">dwDiagRefCount</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-58"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-58">&#182;</a></div><p>For FOE Tuning</p></td><td class="code"><div class="highlight"><pre>    <span class="n">BYTE</span>                    <span class="n">byFOETuning</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-59"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-59">&#182;</a></div><p>For Auto Power Tunning</p></td><td class="code"><div class="highlight"><pre>    <span class="n">BYTE</span>                    <span class="n">byAutoPwrTunning</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-60"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-60">&#182;</a></div><p>BaseBand Loopback Use</p></td><td class="code"><div class="highlight"><pre>    <span class="n">BYTE</span>                    <span class="n">byBBCR4d</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">byBBCRc9</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">byBBCR88</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">byBBCR09</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-61"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-61">&#182;</a></div><p>command timer</p></td><td class="code"><div class="highlight"><pre>    <span class="k">struct</span> <span class="n">timer_list</span>       <span class="n">sTimerCommand</span><span class="p">;</span>

     <span class="k">struct</span> <span class="n">timer_list</span>       <span class="n">sTimerTxData</span><span class="p">;</span>
     <span class="kt">unsigned</span> <span class="kt">long</span>                       <span class="n">nTxDataTimeCout</span><span class="p">;</span>
     <span class="n">BOOL</span>  <span class="n">fTxDataInSleep</span><span class="p">;</span>
     <span class="n">BOOL</span>  <span class="n">IsTxDataTrigger</span><span class="p">;</span>

    <span class="n">BOOL</span>  <span class="n">fWPA_Authened</span><span class="p">;</span>           <span class="c1">//is WPA/WPA-PSK or WPA2/WPA2-PSK authen??</span>
    <span class="n">BYTE</span>            <span class="n">byReAssocCount</span><span class="p">;</span>   <span class="c1">//mike add:re-association retry times!</span>
    <span class="n">BYTE</span>            <span class="n">byLinkWaitCount</span><span class="p">;</span>

    <span class="n">SEthernetHeader</span>         <span class="n">sTxEthHeader</span><span class="p">;</span>
    <span class="n">SEthernetHeader</span>         <span class="n">sRxEthHeader</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">abyBroadcastAddr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="n">BYTE</span>                    <span class="n">abySNAP_RFC1042</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="n">BYTE</span>                    <span class="n">abySNAP_Bridgetunnel</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span></pre></div></td></tr>


<tr id="section-62"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-62">&#182;</a></div><p>Pre-Authentication &amp; PMK cache</p></td><td class="code"><div class="highlight"><pre>    <span class="n">SPMKID</span>                  <span class="n">gsPMKID</span><span class="p">;</span>
    <span class="n">SPMKIDCandidateEvent</span>    <span class="n">gsPMKIDCandidate</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-63"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-63">&#182;</a></div><p>for 802.11h</p></td><td class="code"><div class="highlight"><pre>    <span class="n">BOOL</span>                    <span class="n">b11hEnable</span><span class="p">;</span>

    <span class="n">BOOL</span>                    <span class="n">bChannelSwitch</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">byNewChannel</span><span class="p">;</span>
    <span class="n">BYTE</span>                    <span class="n">byChannelSwitchCount</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-64"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-64">&#182;</a></div><p>WPA supplicant daemon</p></td><td class="code"><div class="highlight"><pre>	<span class="k">struct</span> <span class="n">net_device</span>       <span class="o">*</span><span class="n">wpadev</span><span class="p">;</span>
	<span class="n">BOOL</span>                    <span class="n">bWPADEVUp</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">sk_buff</span>          <span class="o">*</span><span class="n">skb</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-65"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-65">&#182;</a></div><p>--</p></td><td class="code"><div class="highlight"><pre><span class="cp">#ifdef WPA_SUPPLICANT_DRIVER_WEXT_SUPPORT</span>
        <span class="n">BOOL</span>                 <span class="n">bwextstep0</span><span class="p">;</span>
        <span class="n">BOOL</span>                 <span class="n">bwextstep1</span><span class="p">;</span>
        <span class="n">BOOL</span>                 <span class="n">bwextstep2</span><span class="p">;</span>
        <span class="n">BOOL</span>                 <span class="n">bwextstep3</span><span class="p">;</span>
        <span class="n">BOOL</span>                 <span class="n">bWPASuppWextEnabled</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef HOSTAP</span></pre></div></td></tr>


<tr id="section-66"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-66">&#182;</a></div><p>user space daemon: hostapd, is used for HOSTAP</p></td><td class="code"><div class="highlight"><pre>	<span class="n">BOOL</span>                    <span class="n">bEnableHostapd</span><span class="p">;</span>
	<span class="n">BOOL</span>                    <span class="n">bEnable8021x</span><span class="p">;</span>
	<span class="n">BOOL</span>                    <span class="n">bEnableHostWEP</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span>       <span class="o">*</span><span class="n">apdev</span><span class="p">;</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">tx_80211</span><span class="p">)(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="cp">#endif</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>                    <span class="n">uChannel</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">iw_statistics</span>	<span class="n">wstats</span><span class="p">;</span>		<span class="c1">// wireless stats</span>
    <span class="n">BOOL</span>                    <span class="n">bCommit</span><span class="p">;</span>

<span class="p">}</span> <span class="n">DEVICE_INFO</span><span class="p">,</span> <span class="o">*</span><span class="n">PSDevice</span><span class="p">;</span>




<span class="cp">#define EnqueueRCB(_Head, _Tail, _RCB)                  \</span>
<span class="cp">{                                                       \</span>
<span class="cp">    if (!_Head) {                                       \</span>
<span class="cp">        _Head = _RCB;                                   \</span>
<span class="cp">    }                                                   \</span>
<span class="cp">    else {                                              \</span>
<span class="cp">        _Tail-&gt;Next = _RCB;                             \</span>
<span class="cp">    }                                                   \</span>
<span class="cp">    _RCB-&gt;Next = NULL;                                  \</span>
<span class="cp">    _Tail = _RCB;                                       \</span>
<span class="cp">}</span>

<span class="cp">#define DequeueRCB(Head, Tail)                          \</span>
<span class="cp">{                                                       \</span>
<span class="cp">    PRCB   RCB = Head;                                  \</span>
<span class="cp">    if (!RCB-&gt;Next) {                                   \</span>
<span class="cp">        Tail = NULL;                                    \</span>
<span class="cp">    }                                                   \</span>
<span class="cp">    Head = RCB-&gt;Next;                                   \</span>
<span class="cp">}</span>


<span class="cp">#define ADD_ONE_WITH_WRAP_AROUND(uVar, uModulo) {   \</span>
<span class="cp">    if ((uVar) &gt;= ((uModulo) - 1))                  \</span>
<span class="cp">        (uVar) = 0;                                 \</span>
<span class="cp">    else                                            \</span>
<span class="cp">        (uVar)++;                                   \</span>
<span class="cp">}</span>


<span class="cp">#define fMP_RESET_IN_PROGRESS               0x00000001</span>
<span class="cp">#define fMP_DISCONNECTED                    0x00000002</span>
<span class="cp">#define fMP_HALT_IN_PROGRESS                0x00000004</span>
<span class="cp">#define fMP_SURPRISE_REMOVED                0x00000008</span>
<span class="cp">#define fMP_RECV_LOOKASIDE                  0x00000010</span>
<span class="cp">#define fMP_INIT_IN_PROGRESS                0x00000020</span>
<span class="cp">#define fMP_SEND_SIDE_RESOURCE_ALLOCATED    0x00000040</span>
<span class="cp">#define fMP_RECV_SIDE_RESOURCE_ALLOCATED    0x00000080</span>
<span class="cp">#define fMP_POST_READS                      0x00000100</span>
<span class="cp">#define fMP_POST_WRITES                     0x00000200</span>
<span class="cp">#define fMP_CONTROL_READS                   0x00000400</span>
<span class="cp">#define fMP_CONTROL_WRITES                  0x00000800</span>

<span class="cp">#define MP_SET_FLAG(_M, _F)             ((_M)-&gt;Flags |= (_F))</span>
<span class="cp">#define MP_CLEAR_FLAG(_M, _F)            ((_M)-&gt;Flags &amp;= ~(_F))</span>
<span class="cp">#define MP_TEST_FLAGS(_M, _F)            (((_M)-&gt;Flags &amp; (_F)) == (_F))</span>

<span class="cp">#define MP_IS_READY(_M)        (((_M)-&gt;Flags &amp; \</span>
<span class="cp">                                 (fMP_DISCONNECTED | fMP_RESET_IN_PROGRESS | fMP_HALT_IN_PROGRESS | fMP_INIT_IN_PROGRESS | fMP_SURPRISE_REMOVED)) == 0)</span>

<span class="cm">/*---------------------  Export Functions  --------------------------*/</span>

<span class="cm">/* BOOL device_dma0_xmit(PSDevice pDevice, struct sk_buff *skb,</span>
<span class="cm"> *                       unsigned int uNodeIndex);</span>
<span class="cm"> */</span>
<span class="n">BOOL</span> <span class="n">device_alloc_frag_buf</span><span class="p">(</span><span class="n">PSDevice</span> <span class="n">pDevice</span><span class="p">,</span> <span class="n">PSDeFragControlBlock</span> <span class="n">pDeF</span><span class="p">);</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
