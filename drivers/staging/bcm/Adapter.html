<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › bcm › Adapter.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>Adapter.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/***********************************</span>
<span class="cm">*	Adapter.h</span>
<span class="cm">************************************/</span>
<span class="cp">#ifndef	__ADAPTER_H__</span>
<span class="cp">#define	__ADAPTER_H__</span>

<span class="cp">#define MAX_FRAGMENTEDIP_CLASSIFICATION_ENTRIES 256</span>
<span class="cp">#include &quot;Debug.h&quot;</span>

<span class="k">struct</span> <span class="n">_LEADER</span> <span class="p">{</span>
	<span class="n">USHORT</span>	<span class="n">Vcid</span><span class="p">;</span>
	<span class="n">USHORT</span>	<span class="n">PLength</span><span class="p">;</span>
	<span class="n">UCHAR</span>	<span class="n">Status</span><span class="p">;</span>
	<span class="n">UCHAR</span>	<span class="n">Unused</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_LEADER</span> <span class="n">LEADER</span><span class="p">,</span> <span class="o">*</span><span class="n">PLEADER</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">_PACKETTOSEND</span> <span class="p">{</span>
	<span class="n">LEADER</span>	<span class="n">Leader</span><span class="p">;</span>
	<span class="n">UCHAR</span>	<span class="n">ucPayload</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_PACKETTOSEND</span> <span class="n">PACKETTOSEND</span><span class="p">,</span> <span class="o">*</span><span class="n">PPACKETTOSEND</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">_CONTROL_PACKET</span> <span class="p">{</span>
	<span class="n">PVOID</span>	<span class="n">ControlBuff</span><span class="p">;</span>
	<span class="n">UINT</span>	<span class="n">ControlBuffLen</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">_CONTROL_PACKET</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_CONTROL_PACKET</span> <span class="n">CONTROL_PACKET</span><span class="p">,</span> <span class="o">*</span><span class="n">PCONTROL_PACKET</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">link_request</span> <span class="p">{</span>
	<span class="n">LEADER</span>	<span class="n">Leader</span><span class="p">;</span>
	<span class="n">UCHAR</span>	<span class="n">szData</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">link_request</span> <span class="n">LINK_REQUEST</span><span class="p">,</span> <span class="o">*</span><span class="n">PLINK_REQUEST</span><span class="p">;</span>

<span class="cm">/* classification extension is added */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_ADD_CONNECTION</span> <span class="p">{</span>
	<span class="n">ULONG</span>	<span class="n">SrcIpAddressCount</span><span class="p">;</span>
	<span class="n">ULONG</span>	<span class="n">SrcIpAddress</span><span class="p">[</span><span class="n">MAX_CONNECTIONS</span><span class="p">];</span>
	<span class="n">ULONG</span>	<span class="n">SrcIpMask</span><span class="p">[</span><span class="n">MAX_CONNECTIONS</span><span class="p">];</span>

	<span class="n">ULONG</span>	<span class="n">DestIpAddressCount</span><span class="p">;</span>
	<span class="n">ULONG</span>	<span class="n">DestIpAddress</span><span class="p">[</span><span class="n">MAX_CONNECTIONS</span><span class="p">];</span>
	<span class="n">ULONG</span>	<span class="n">DestIpMask</span><span class="p">[</span><span class="n">MAX_CONNECTIONS</span><span class="p">];</span>

	<span class="n">USHORT</span>	<span class="n">SrcPortBegin</span><span class="p">;</span>
	<span class="n">USHORT</span>	<span class="n">SrcPortEnd</span><span class="p">;</span>

	<span class="n">USHORT</span>	<span class="n">DestPortBegin</span><span class="p">;</span>
	<span class="n">USHORT</span>	<span class="n">DestPortEnd</span><span class="p">;</span>

	<span class="n">UCHAR</span>	<span class="n">SrcTOS</span><span class="p">;</span>
	<span class="n">UCHAR</span>	<span class="n">SrcProtocol</span><span class="p">;</span>
<span class="p">}</span> <span class="n">ADD_CONNECTION</span><span class="p">,</span> <span class="o">*</span><span class="n">PADD_CONNECTION</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_CLASSIFICATION_RULE</span> <span class="p">{</span>
	<span class="n">UCHAR</span>	<span class="n">ucIPSrcAddrLen</span><span class="p">;</span>
	<span class="n">UCHAR</span>	<span class="n">ucIPSrcAddr</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="n">UCHAR</span>	<span class="n">ucIPDestAddrLen</span><span class="p">;</span>
	<span class="n">UCHAR</span>	<span class="n">ucIPDestAddr</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="n">UCHAR</span>	<span class="n">ucSrcPortRangeLen</span><span class="p">;</span>
	<span class="n">UCHAR</span>	<span class="n">ucSrcPortRange</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">UCHAR</span>	<span class="n">ucDestPortRangeLen</span><span class="p">;</span>
	<span class="n">UCHAR</span>	<span class="n">ucDestPortRange</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">USHORT</span>	<span class="n">usVcid</span><span class="p">;</span>
<span class="p">}</span> <span class="n">CLASSIFICATION_RULE</span><span class="p">,</span> <span class="o">*</span><span class="n">PCLASSIFICATION_RULE</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_CLASSIFICATION_ONLY</span> <span class="p">{</span>
	<span class="n">USHORT</span>	<span class="n">usVcid</span><span class="p">;</span>
	<span class="n">ULONG</span>	<span class="n">DestIpAddress</span><span class="p">;</span>
	<span class="n">ULONG</span>	<span class="n">DestIpMask</span><span class="p">;</span>
	<span class="n">USHORT</span>	<span class="n">usPortLo</span><span class="p">;</span>
	<span class="n">USHORT</span>	<span class="n">usPortHi</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>	<span class="n">bIpVersion</span><span class="p">;</span>
	<span class="n">UCHAR</span>	<span class="n">ucDestinationAddress</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">}</span> <span class="n">CLASSIFICATION_ONLY</span><span class="p">,</span> <span class="o">*</span><span class="n">PCLASSIFICATION_ONLY</span><span class="p">;</span>

<span class="cp">#define MAX_IP_RANGE_LENGTH 4</span>
<span class="cp">#define MAX_PORT_RANGE 4</span>
<span class="cp">#define MAX_PROTOCOL_LENGTH   32</span>
<span class="cp">#define IPV6_ADDRESS_SIZEINBYTES 0x10</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="n">_U_IP_ADDRESS</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">ULONG</span> <span class="n">ulIpv4Addr</span><span class="p">[</span><span class="n">MAX_IP_RANGE_LENGTH</span><span class="p">];</span> <span class="cm">/* Source Ip Address Range */</span>
		<span class="n">ULONG</span> <span class="n">ulIpv4Mask</span><span class="p">[</span><span class="n">MAX_IP_RANGE_LENGTH</span><span class="p">];</span> <span class="cm">/* Source Ip Mask Address Range */</span>
	<span class="p">};</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">ULONG</span> <span class="n">ulIpv6Addr</span><span class="p">[</span><span class="n">MAX_IP_RANGE_LENGTH</span> <span class="o">*</span> <span class="mi">4</span><span class="p">];</span> <span class="cm">/* Source Ip Address Range */</span>
		<span class="n">ULONG</span> <span class="n">ulIpv6Mask</span><span class="p">[</span><span class="n">MAX_IP_RANGE_LENGTH</span> <span class="o">*</span> <span class="mi">4</span><span class="p">];</span> <span class="cm">/* Source Ip Mask Address Range */</span>
	<span class="p">};</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">UCHAR</span> <span class="n">ucIpv4Address</span><span class="p">[</span><span class="n">MAX_IP_RANGE_LENGTH</span> <span class="o">*</span> <span class="n">IP_LENGTH_OF_ADDRESS</span><span class="p">];</span>
		<span class="n">UCHAR</span> <span class="n">ucIpv4Mask</span><span class="p">[</span><span class="n">MAX_IP_RANGE_LENGTH</span> <span class="o">*</span> <span class="n">IP_LENGTH_OF_ADDRESS</span><span class="p">];</span>
	<span class="p">};</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">UCHAR</span> <span class="n">ucIpv6Address</span><span class="p">[</span><span class="n">MAX_IP_RANGE_LENGTH</span> <span class="o">*</span> <span class="n">IPV6_ADDRESS_SIZEINBYTES</span><span class="p">];</span>
		<span class="n">UCHAR</span> <span class="n">ucIpv6Mask</span><span class="p">[</span><span class="n">MAX_IP_RANGE_LENGTH</span> <span class="o">*</span> <span class="n">IPV6_ADDRESS_SIZEINBYTES</span><span class="p">];</span>
	<span class="p">};</span>
<span class="p">}</span> <span class="n">U_IP_ADDRESS</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">_packet_info</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_S_HDR_SUPRESSION_CONTEXTINFO</span> <span class="p">{</span>
	<span class="n">UCHAR</span> <span class="n">ucaHdrSupressionInBuf</span><span class="p">[</span><span class="n">MAX_PHS_LENGTHS</span><span class="p">];</span> <span class="cm">/* Intermediate buffer to accumulate pkt Header for PHS */</span>
	<span class="n">UCHAR</span> <span class="n">ucaHdrSupressionOutBuf</span><span class="p">[</span><span class="n">MAX_PHS_LENGTHS</span> <span class="o">+</span> <span class="n">PHSI_LEN</span><span class="p">];</span> <span class="cm">/* Intermediate buffer containing pkt Header after PHS */</span>
<span class="p">}</span> <span class="n">S_HDR_SUPRESSION_CONTEXTINFO</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_S_CLASSIFIER_RULE</span> <span class="p">{</span>
	<span class="n">ULONG</span>		<span class="n">ulSFID</span><span class="p">;</span>
	<span class="n">UCHAR</span>		<span class="n">ucReserved</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">B_UINT16</span>	<span class="n">uiClassifierRuleIndex</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>		<span class="n">bUsed</span><span class="p">;</span>
	<span class="n">USHORT</span>		<span class="n">usVCID_Value</span><span class="p">;</span>
	<span class="n">B_UINT8</span>		<span class="n">u8ClassifierRulePriority</span><span class="p">;</span> <span class="cm">/* This field detemines the Classifier Priority */</span>
	<span class="n">U_IP_ADDRESS</span>	<span class="n">stSrcIpAddress</span><span class="p">;</span>
	<span class="n">UCHAR</span>		<span class="n">ucIPSourceAddressLength</span><span class="p">;</span> <span class="cm">/* Ip Source Address Length */</span>

	<span class="n">U_IP_ADDRESS</span>	<span class="n">stDestIpAddress</span><span class="p">;</span>
	<span class="n">UCHAR</span>		<span class="n">ucIPDestinationAddressLength</span><span class="p">;</span> <span class="cm">/* Ip Destination Address Length */</span>
	<span class="n">UCHAR</span>		<span class="n">ucIPTypeOfServiceLength</span><span class="p">;</span> <span class="cm">/* Type of service Length */</span>
	<span class="n">UCHAR</span>		<span class="n">ucTosLow</span><span class="p">;</span> <span class="cm">/* Tos Low */</span>
	<span class="n">UCHAR</span>		<span class="n">ucTosHigh</span><span class="p">;</span> <span class="cm">/* Tos High */</span>
	<span class="n">UCHAR</span>		<span class="n">ucTosMask</span><span class="p">;</span> <span class="cm">/* Tos Mask */</span>

	<span class="n">UCHAR</span>		<span class="n">ucProtocolLength</span><span class="p">;</span> <span class="cm">/* protocol Length */</span>
	<span class="n">UCHAR</span>		<span class="n">ucProtocol</span><span class="p">[</span><span class="n">MAX_PROTOCOL_LENGTH</span><span class="p">];</span> <span class="cm">/* protocol Length */</span>
	<span class="n">USHORT</span>		<span class="n">usSrcPortRangeLo</span><span class="p">[</span><span class="n">MAX_PORT_RANGE</span><span class="p">];</span>
	<span class="n">USHORT</span>		<span class="n">usSrcPortRangeHi</span><span class="p">[</span><span class="n">MAX_PORT_RANGE</span><span class="p">];</span>
	<span class="n">UCHAR</span>		<span class="n">ucSrcPortRangeLength</span><span class="p">;</span>

	<span class="n">USHORT</span>		<span class="n">usDestPortRangeLo</span><span class="p">[</span><span class="n">MAX_PORT_RANGE</span><span class="p">];</span>
	<span class="n">USHORT</span>		<span class="n">usDestPortRangeHi</span><span class="p">[</span><span class="n">MAX_PORT_RANGE</span><span class="p">];</span>
	<span class="n">UCHAR</span>		<span class="n">ucDestPortRangeLength</span><span class="p">;</span>

	<span class="n">BOOLEAN</span>		<span class="n">bProtocolValid</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>		<span class="n">bTOSValid</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>		<span class="n">bDestIpValid</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>		<span class="n">bSrcIpValid</span><span class="p">;</span>

	<span class="cm">/* For IPv6 Addressing */</span>
	<span class="n">UCHAR</span>		<span class="n">ucDirection</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>		<span class="n">bIpv6Protocol</span><span class="p">;</span>
	<span class="n">UINT32</span>		<span class="n">u32PHSRuleID</span><span class="p">;</span>
	<span class="n">S_PHS_RULE</span>	<span class="n">sPhsRule</span><span class="p">;</span>
	<span class="n">UCHAR</span>		<span class="n">u8AssociatedPHSI</span><span class="p">;</span>

	<span class="cm">/* Classification fields for ETH CS */</span>
	<span class="n">UCHAR</span>		<span class="n">ucEthCSSrcMACLen</span><span class="p">;</span>
	<span class="n">UCHAR</span>		<span class="n">au8EThCSSrcMAC</span><span class="p">[</span><span class="n">MAC_ADDRESS_SIZE</span><span class="p">];</span>
	<span class="n">UCHAR</span>		<span class="n">au8EThCSSrcMACMask</span><span class="p">[</span><span class="n">MAC_ADDRESS_SIZE</span><span class="p">];</span>
	<span class="n">UCHAR</span>		<span class="n">ucEthCSDestMACLen</span><span class="p">;</span>
	<span class="n">UCHAR</span>		<span class="n">au8EThCSDestMAC</span><span class="p">[</span><span class="n">MAC_ADDRESS_SIZE</span><span class="p">];</span>
	<span class="n">UCHAR</span>		<span class="n">au8EThCSDestMACMask</span><span class="p">[</span><span class="n">MAC_ADDRESS_SIZE</span><span class="p">];</span>
	<span class="n">UCHAR</span>		<span class="n">ucEtherTypeLen</span><span class="p">;</span>
	<span class="n">UCHAR</span>		<span class="n">au8EthCSEtherType</span><span class="p">[</span><span class="n">NUM_ETHERTYPE_BYTES</span><span class="p">];</span>
	<span class="n">UCHAR</span>		<span class="n">usUserPriority</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">USHORT</span>		<span class="n">usVLANID</span><span class="p">;</span>
	<span class="n">USHORT</span>		<span class="n">usValidityBitMap</span><span class="p">;</span>
<span class="p">}</span> <span class="n">S_CLASSIFIER_RULE</span><span class="p">;</span>
<span class="cm">/* typedef struct _S_CLASSIFIER_RULE S_CLASSIFIER_RULE; */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_S_FRAGMENTED_PACKET_INFO</span> <span class="p">{</span>
	<span class="n">BOOLEAN</span>			<span class="n">bUsed</span><span class="p">;</span>
	<span class="n">ULONG</span>			<span class="n">ulSrcIpAddress</span><span class="p">;</span>
	<span class="n">USHORT</span>			<span class="n">usIpIdentification</span><span class="p">;</span>
	<span class="n">S_CLASSIFIER_RULE</span>	<span class="o">*</span><span class="n">pstMatchedClassifierEntry</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bOutOfOrderFragment</span><span class="p">;</span>
<span class="p">}</span> <span class="n">S_FRAGMENTED_PACKET_INFO</span><span class="p">,</span> <span class="o">*</span><span class="n">PS_FRAGMENTED_PACKET_INFO</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">_packet_info</span> <span class="p">{</span>
	<span class="cm">/* classification extension Rule */</span>
	<span class="n">ULONG</span>		<span class="n">ulSFID</span><span class="p">;</span>
	<span class="n">USHORT</span>		<span class="n">usVCID_Value</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiThreshold</span><span class="p">;</span>
	<span class="cm">/* This field determines the priority of the SF Queues */</span>
	<span class="n">B_UINT8</span>		<span class="n">u8TrafficPriority</span><span class="p">;</span>

	<span class="n">BOOLEAN</span>		<span class="n">bValid</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>		<span class="n">bActive</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>		<span class="n">bActivateRequestSent</span><span class="p">;</span>

	<span class="n">B_UINT8</span>		<span class="n">u8QueueType</span><span class="p">;</span> <span class="cm">/* BE or rtPS */</span>

	<span class="n">UINT</span>		<span class="n">uiMaxBucketSize</span><span class="p">;</span> <span class="cm">/* maximum size of the bucket for the queue */</span>
	<span class="n">UINT</span>		<span class="n">uiCurrentQueueDepthOnTarget</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiCurrentBytesOnHost</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiCurrentPacketsOnHost</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiDroppedCountBytes</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiDroppedCountPackets</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiSentBytes</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiSentPackets</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiCurrentDrainRate</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiThisPeriodSentBytes</span><span class="p">;</span>
	<span class="n">LARGE_INTEGER</span>	<span class="n">liDrainCalculated</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiCurrentTokenCount</span><span class="p">;</span>
	<span class="n">LARGE_INTEGER</span>	<span class="n">liLastUpdateTokenAt</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiMaxAllowedRate</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">NumOfPacketsSent</span><span class="p">;</span>
	<span class="n">UCHAR</span>		<span class="n">ucDirection</span><span class="p">;</span>
	<span class="n">USHORT</span>		<span class="n">usCID</span><span class="p">;</span>
	<span class="n">S_MIBS_EXTSERVICEFLOW_PARAMETERS</span>	<span class="n">stMibsExtServiceFlowTable</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiCurrentRxRate</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiThisPeriodRxBytes</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiTotalRxBytes</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiTotalTxBytes</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiPendedLast</span><span class="p">;</span>
	<span class="n">UCHAR</span>		<span class="n">ucIpVersion</span><span class="p">;</span>

	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">FirstTxQueue</span><span class="p">;</span>
			<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">LastTxQueue</span><span class="p">;</span>
		<span class="p">};</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">ControlHead</span><span class="p">;</span>
			<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">ControlTail</span><span class="p">;</span>
		<span class="p">};</span>
	<span class="p">};</span>

	<span class="n">BOOLEAN</span>		<span class="n">bProtocolValid</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>		<span class="n">bTOSValid</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>		<span class="n">bDestIpValid</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>		<span class="n">bSrcIpValid</span><span class="p">;</span>

	<span class="n">BOOLEAN</span>		<span class="n">bActiveSet</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>		<span class="n">bAdmittedSet</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>		<span class="n">bAuthorizedSet</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>		<span class="n">bClassifierPriority</span><span class="p">;</span>
	<span class="n">UCHAR</span>		<span class="n">ucServiceClassName</span><span class="p">[</span><span class="n">MAX_CLASS_NAME_LENGTH</span><span class="p">];</span>
	<span class="n">BOOLEAN</span>		<span class="n">bHeaderSuppressionEnabled</span><span class="p">;</span>
	<span class="n">spinlock_t</span>	<span class="n">SFQueueLock</span><span class="p">;</span>
	<span class="kt">void</span>		<span class="o">*</span><span class="n">pstSFIndication</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timeval</span>	<span class="n">stLastUpdateTokenAt</span><span class="p">;</span>
	<span class="n">atomic_t</span>	<span class="n">uiPerSFTxResourceCount</span><span class="p">;</span>
	<span class="n">UINT</span>		<span class="n">uiMaxLatency</span><span class="p">;</span>
	<span class="n">UCHAR</span>		<span class="n">bIPCSSupport</span><span class="p">;</span>
	<span class="n">UCHAR</span>		<span class="n">bEthCSSupport</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_packet_info</span> <span class="n">PacketInfo</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_PER_TARANG_DATA</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">_PER_TARANG_DATA</span>	<span class="o">*</span><span class="n">next</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">_MINI_ADAPTER</span>	<span class="o">*</span><span class="n">Adapter</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span>		<span class="o">*</span><span class="n">RxAppControlHead</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span>		<span class="o">*</span><span class="n">RxAppControlTail</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">AppCtrlQueueLen</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">MacTracingEnabled</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bApplicationToExit</span><span class="p">;</span>
	<span class="n">S_MIBS_DROPPED_APP_CNTRL_MESSAGES</span>	<span class="n">stDroppedAppCntrlMsgs</span><span class="p">;</span>
	<span class="n">ULONG</span>			<span class="n">RxCntrlMsgBitMask</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PER_TARANG_DATA</span><span class="p">,</span> <span class="o">*</span><span class="n">PPER_TARANG_DATA</span><span class="p">;</span>

<span class="cp">#ifdef REL_4_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_TARGET_PARAMS</span> <span class="p">{</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32CfgVersion</span><span class="p">;</span>

	<span class="cm">/* Scanning Related Params */</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32CenterFrequency</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32BandAScan</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32BandBScan</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32BandCScan</span><span class="p">;</span>

	<span class="cm">/* QoS Params */</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32minGrantsize</span><span class="p">;</span>	<span class="cm">/* size of minimum grant is 0 or 6 */</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32PHSEnable</span><span class="p">;</span>

	<span class="cm">/* HO Params */</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32HoEnable</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32HoReserved1</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32HoReserved2</span><span class="p">;</span>

	<span class="cm">/* Power Control Params */</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32MimoEnable</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32SecurityEnable</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * bit 1: 1 Idlemode enable;</span>
<span class="cm">	 * bit 2: 1 Sleepmode Enable</span>
<span class="cm">	 */</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32PowerSavingModesEnable</span><span class="p">;</span>
	<span class="cm">/* PowerSaving Mode Options:</span>
<span class="cm">	 * bit 0 = 1: CPE mode - to keep pcmcia if alive;</span>
<span class="cm">	 * bit 1 = 1: CINR reporing in Idlemode Msg</span>
<span class="cm">	 * bit 2 = 1: Default PSC Enable in sleepmode</span>
<span class="cm">	 */</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32PowerSavingModeOptions</span><span class="p">;</span>

	<span class="n">B_UINT32</span> <span class="n">m_u32ArqEnable</span><span class="p">;</span>

	<span class="cm">/* From Version #3, the HARQ section renamed as general */</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32HarqEnable</span><span class="p">;</span>
	<span class="cm">/* EEPROM Param Location */</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32EEPROMFlag</span><span class="p">;</span>
	<span class="cm">/* BINARY TYPE - 4th MSByte:</span>
<span class="cm">	 * Interface Type -  3rd MSByte:</span>
<span class="cm">	 * Vendor Type - 2nd MSByte</span>
<span class="cm">	 */</span>
	<span class="cm">/* Unused - LSByte */</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32Customize</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32ConfigBW</span><span class="p">;</span>  <span class="cm">/* In Hz */</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32ShutDownTimer</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32RadioParameter</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32PhyParameter1</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32PhyParameter2</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32PhyParameter3</span><span class="p">;</span>

	<span class="cm">/* in eval mode only;</span>
<span class="cm">	 * lower 16bits = basic cid for testing;</span>
<span class="cm">	 * then bit 16 is test cqich,</span>
<span class="cm">	 * bit 17  test init rang;</span>
<span class="cm">	 * bit 18 test periodic rang</span>
<span class="cm">	 * bit 19 is test harq ack/nack</span>
<span class="cm">	 */</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32TestOptions</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32MaxMACDataperDLFrame</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32MaxMACDataperULFrame</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32Corr2MacFlags</span><span class="p">;</span>

	<span class="cm">/* adding driver params. */</span>
	<span class="n">B_UINT32</span> <span class="n">HostDrvrConfig1</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">HostDrvrConfig2</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">HostDrvrConfig3</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">HostDrvrConfig4</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">HostDrvrConfig5</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">HostDrvrConfig6</span><span class="p">;</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32SegmentedPUSCenable</span><span class="p">;</span>

	<span class="cm">/* BAMC enable - but 4.x does not support this feature</span>
<span class="cm">	 * This is added just to sync 4.x and 5.x CFGs</span>
<span class="cm">	 */</span>
	<span class="n">B_UINT32</span> <span class="n">m_u32BandAMCEnable</span><span class="p">;</span>
<span class="p">}</span> <span class="n">STARGETPARAMS</span><span class="p">,</span> <span class="o">*</span><span class="n">PSTARGETPARAMS</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_STTARGETDSXBUFFER</span> <span class="p">{</span>
	<span class="n">ULONG</span>		<span class="n">ulTargetDsxBuffer</span><span class="p">;</span>
	<span class="n">B_UINT16</span>	<span class="n">tid</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>		<span class="n">valid</span><span class="p">;</span>
<span class="p">}</span> <span class="n">STTARGETDSXBUFFER</span><span class="p">,</span> <span class="o">*</span><span class="n">PSTTARGETDSXBUFFER</span><span class="p">;</span>

<span class="k">typedef</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">FP_FLASH_WRITE</span><span class="p">)(</span><span class="k">struct</span> <span class="n">_MINI_ADAPTER</span> <span class="o">*</span><span class="p">,</span> <span class="n">UINT</span><span class="p">,</span> <span class="n">PVOID</span><span class="p">);</span>

<span class="k">typedef</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">FP_FLASH_WRITE_STATUS</span><span class="p">)(</span><span class="k">struct</span> <span class="n">_MINI_ADAPTER</span> <span class="o">*</span><span class="p">,</span> <span class="n">UINT</span><span class="p">,</span> <span class="n">PVOID</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * Driver adapter data structure</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">_MINI_ADAPTER</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">_MINI_ADAPTER</span>	<span class="o">*</span><span class="n">next</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span>	<span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="n">u32</span>			<span class="n">msg_enable</span><span class="p">;</span>
	<span class="n">CHAR</span>			<span class="o">*</span><span class="n">caDsxReqResp</span><span class="p">;</span>
	<span class="n">atomic_t</span>		<span class="n">ApplicationRunning</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">AppCtrlQueueOverFlow</span><span class="p">;</span>
	<span class="n">atomic_t</span>		<span class="n">CurrentApplicationCount</span><span class="p">;</span>
	<span class="n">atomic_t</span>		<span class="n">RegisteredApplicationCount</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">LinkUpStatus</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">TimerActive</span><span class="p">;</span>
	<span class="n">u32</span>			<span class="n">StatisticsPointer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span>		<span class="o">*</span><span class="n">RxControlHead</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span>		<span class="o">*</span><span class="n">RxControlTail</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">semaphore</span>	<span class="n">RxAppControlQueuelock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">semaphore</span>	<span class="n">fw_download_sema</span><span class="p">;</span>
	<span class="n">PPER_TARANG_DATA</span>	<span class="n">pTarangs</span><span class="p">;</span>
	<span class="n">spinlock_t</span>		<span class="n">control_queue_lock</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span>	<span class="n">process_read_wait_queue</span><span class="p">;</span>

	<span class="cm">/* the pointer to the first packet we have queued in send</span>
<span class="cm">	 * deserialized miniport support variables</span>
<span class="cm">	 */</span>
	<span class="n">atomic_t</span>		<span class="n">TotalPacketCount</span><span class="p">;</span>
	<span class="n">atomic_t</span>		<span class="n">TxPktAvail</span><span class="p">;</span>

	<span class="cm">/* this to keep track of the Tx and Rx MailBox Registers. */</span>
	<span class="n">atomic_t</span>		<span class="n">CurrNumFreeTxDesc</span><span class="p">;</span>
	<span class="cm">/* to keep track the no of byte received */</span>
	<span class="n">USHORT</span>			<span class="n">PrevNumRecvDescs</span><span class="p">;</span>
	<span class="n">USHORT</span>			<span class="n">CurrNumRecvDescs</span><span class="p">;</span>
	<span class="n">UINT</span>			<span class="n">u32TotalDSD</span><span class="p">;</span>
	<span class="n">PacketInfo</span>		<span class="n">PackInfo</span><span class="p">[</span><span class="n">NO_OF_QUEUES</span><span class="p">];</span>
	<span class="n">S_CLASSIFIER_RULE</span>	<span class="n">astClassifierTable</span><span class="p">[</span><span class="n">MAX_CLASSIFIERS</span><span class="p">];</span>
	<span class="n">BOOLEAN</span>			<span class="n">TransferMode</span><span class="p">;</span>

	<span class="cm">/*************** qos ******************/</span>
	<span class="n">BOOLEAN</span>			<span class="n">bETHCSEnabled</span><span class="p">;</span>
	<span class="n">ULONG</span>			<span class="n">BEBucketSize</span><span class="p">;</span>
	<span class="n">ULONG</span>			<span class="n">rtPSBucketSize</span><span class="p">;</span>
	<span class="n">UCHAR</span>			<span class="n">LinkStatus</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">AutoLinkUp</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">AutoSyncup</span><span class="p">;</span>

	<span class="kt">int</span>			<span class="n">major</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">minor</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span>	<span class="n">tx_packet_wait_queue</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span>	<span class="n">process_rx_cntrlpkt</span><span class="p">;</span>
	<span class="n">atomic_t</span>		<span class="n">process_waiting</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">fw_download_done</span><span class="p">;</span>

	<span class="kt">char</span>			<span class="o">*</span><span class="n">txctlpacket</span><span class="p">[</span><span class="n">MAX_CNTRL_PKTS</span><span class="p">];</span>
	<span class="n">atomic_t</span>		<span class="n">cntrlpktCnt</span> <span class="p">;</span>
	<span class="n">atomic_t</span>		<span class="n">index_app_read_cntrlpkt</span><span class="p">;</span>
	<span class="n">atomic_t</span>		<span class="n">index_wr_txcntrlpkt</span><span class="p">;</span>
	<span class="n">atomic_t</span>		<span class="n">index_rd_txcntrlpkt</span><span class="p">;</span>
	<span class="n">UINT</span>			<span class="n">index_datpkt</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">semaphore</span>	<span class="n">rdmwrmsync</span><span class="p">;</span>

	<span class="n">STTARGETDSXBUFFER</span>	<span class="n">astTargetDsxBuffer</span><span class="p">[</span><span class="n">MAX_TARGET_DSX_BUFFERS</span><span class="p">];</span>
	<span class="n">ULONG</span>			<span class="n">ulFreeTargetBufferCnt</span><span class="p">;</span>
	<span class="n">ULONG</span>			<span class="n">ulCurrentTargetBuffer</span><span class="p">;</span>
	<span class="n">ULONG</span>			<span class="n">ulTotalTargetBuffersAvailable</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">chip_id</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span>	<span class="n">lowpower_mode_wait_queue</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bFlashBoot</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bBinDownloaded</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bCfgDownloaded</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bSyncUpRequestSent</span><span class="p">;</span>
	<span class="n">USHORT</span>			<span class="n">usBestEffortQueueIndex</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span>	<span class="n">ioctl_fw_dnld_wait_queue</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">waiting_to_fw_download_done</span><span class="p">;</span>
	<span class="n">pid_t</span>			<span class="n">fw_download_process_pid</span><span class="p">;</span>
	<span class="n">PSTARGETPARAMS</span>		<span class="n">pstargetparams</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">device_removed</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">DeviceAccess</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bIsAutoCorrectEnabled</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bDDRInitDone</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">DDRSetting</span><span class="p">;</span>
	<span class="n">ULONG</span>			<span class="n">ulPowerSaveMode</span><span class="p">;</span>
	<span class="n">spinlock_t</span>		<span class="n">txtransmitlock</span><span class="p">;</span>
	<span class="n">B_UINT8</span>			<span class="n">txtransmit_running</span><span class="p">;</span>
	<span class="cm">/* Thread for control packet handling */</span>
	<span class="k">struct</span> <span class="n">task_struct</span>	<span class="o">*</span><span class="n">control_packet_handler</span><span class="p">;</span>
	<span class="cm">/* thread for transmitting packets. */</span>
	<span class="k">struct</span> <span class="n">task_struct</span>	<span class="o">*</span><span class="n">transmit_packet_thread</span><span class="p">;</span>

	<span class="cm">/* LED Related Structures */</span>
	<span class="n">LED_INFO_STRUCT</span>		<span class="n">LEDInfo</span><span class="p">;</span>

	<span class="cm">/* Driver State for LED Blinking */</span>
	<span class="n">LedEventInfo_t</span>		<span class="n">DriverState</span><span class="p">;</span>
	<span class="cm">/* Interface Specific */</span>
	<span class="n">PVOID</span>			<span class="n">pvInterfaceAdapter</span><span class="p">;</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">bcm_file_download</span><span class="p">)(</span><span class="n">PVOID</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="p">,</span>
				<span class="kt">unsigned</span> <span class="kt">int</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">bcm_file_readback_from_chip</span><span class="p">)(</span><span class="n">PVOID</span><span class="p">,</span>
					<span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="p">,</span>
					<span class="kt">unsigned</span> <span class="kt">int</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">interface_rdm</span><span class="p">)(</span><span class="n">PVOID</span><span class="p">,</span>
			<span class="n">UINT</span><span class="p">,</span>
			<span class="n">PVOID</span><span class="p">,</span>
			<span class="kt">int</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">interface_wrm</span><span class="p">)(</span><span class="n">PVOID</span><span class="p">,</span>
			<span class="n">UINT</span><span class="p">,</span>
			<span class="n">PVOID</span><span class="p">,</span>
			<span class="kt">int</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">interface_transmit</span><span class="p">)(</span><span class="n">PVOID</span><span class="p">,</span> <span class="n">PVOID</span> <span class="p">,</span> <span class="n">UINT</span><span class="p">);</span>
	<span class="n">BOOLEAN</span>			<span class="n">IdleMode</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bDregRequestSentInIdleMode</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bTriedToWakeUpFromlowPowerMode</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bShutStatus</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bWakeUpDevice</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">usIdleModePattern</span><span class="p">;</span>
	<span class="cm">/* BOOLEAN			bTriedToWakeUpFromShutdown; */</span>
	<span class="n">BOOLEAN</span>			<span class="n">bLinkDownRequested</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">downloadDDR</span><span class="p">;</span>
	<span class="n">PHS_DEVICE_EXTENSION</span>	<span class="n">stBCMPhsContext</span><span class="p">;</span>
	<span class="n">S_HDR_SUPRESSION_CONTEXTINFO</span> <span class="n">stPhsTxContextInfo</span><span class="p">;</span>
	<span class="kt">uint8_t</span>			<span class="n">ucaPHSPktRestoreBuf</span><span class="p">[</span><span class="mi">2048</span><span class="p">];</span>
	<span class="kt">uint8_t</span>			<span class="n">bPHSEnabled</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">AutoFirmDld</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bMipsConfig</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bDPLLConfig</span><span class="p">;</span>
	<span class="n">UINT32</span>			<span class="n">aTxPktSizeHist</span><span class="p">[</span><span class="n">MIBS_MAX_HIST_ENTRIES</span><span class="p">];</span>
	<span class="n">UINT32</span>			<span class="n">aRxPktSizeHist</span><span class="p">[</span><span class="n">MIBS_MAX_HIST_ENTRIES</span><span class="p">];</span>
	<span class="n">S_FRAGMENTED_PACKET_INFO</span> <span class="n">astFragmentedPktClassifierTable</span><span class="p">[</span><span class="n">MAX_FRAGMENTEDIP_CLASSIFICATION_ENTRIES</span><span class="p">];</span>
	<span class="n">atomic_t</span>		<span class="n">uiMBupdate</span><span class="p">;</span>
	<span class="n">UINT32</span>			<span class="n">PmuMode</span><span class="p">;</span>
	<span class="n">NVM_TYPE</span>		<span class="n">eNVMType</span><span class="p">;</span>
	<span class="n">UINT</span>			<span class="n">uiSectorSize</span><span class="p">;</span>
	<span class="n">UINT</span>			<span class="n">uiSectorSizeInCFG</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bSectorSizeOverride</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bStatusWrite</span><span class="p">;</span>
	<span class="n">UINT</span>			<span class="n">uiNVMDSDSize</span><span class="p">;</span>
	<span class="n">UINT</span>			<span class="n">uiVendorExtnFlag</span><span class="p">;</span>
	<span class="cm">/* it will always represent chosen DSD at any point of time.</span>
<span class="cm">	 * Generally it is Active DSD but in case of NVM RD/WR it might be different.</span>
<span class="cm">	 */</span>
	<span class="n">UINT</span>			<span class="n">ulFlashCalStart</span><span class="p">;</span>
	<span class="n">ULONG</span>			<span class="n">ulFlashControlSectionStart</span><span class="p">;</span>
	<span class="n">ULONG</span>			<span class="n">ulFlashWriteSize</span><span class="p">;</span>
	<span class="n">ULONG</span>			<span class="n">ulFlashID</span><span class="p">;</span>
	<span class="n">FP_FLASH_WRITE</span>		<span class="n">fpFlashWrite</span><span class="p">;</span>
	<span class="n">FP_FLASH_WRITE_STATUS</span>	<span class="n">fpFlashWriteWithStatusCheck</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">semaphore</span>	<span class="n">NVMRdmWrmLock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">device</span>		<span class="o">*</span><span class="n">pstCreatedClassDevice</span><span class="p">;</span>

	<span class="cm">/*	BOOLEAN				InterfaceUpStatus; */</span>
	<span class="n">PFLASH2X_CS_INFO</span>	<span class="n">psFlash2xCSInfo</span><span class="p">;</span>
	<span class="n">PFLASH_CS_INFO</span>		<span class="n">psFlashCSInfo</span><span class="p">;</span>
	<span class="n">PFLASH2X_VENDORSPECIFIC_INFO</span> <span class="n">psFlash2xVendorInfo</span><span class="p">;</span>
	<span class="n">UINT</span>			<span class="n">uiFlashBaseAdd</span><span class="p">;</span> <span class="cm">/* Flash start address */</span>
	<span class="n">UINT</span>			<span class="n">uiActiveISOOffset</span><span class="p">;</span> <span class="cm">/* Active ISO offset chosen before f/w download */</span>
	<span class="n">FLASH2X_SECTION_VAL</span>	<span class="n">eActiveISO</span><span class="p">;</span> <span class="cm">/* Active ISO section val */</span>
	<span class="n">FLASH2X_SECTION_VAL</span>	<span class="n">eActiveDSD</span><span class="p">;</span>	<span class="cm">/* Active DSD val chosen before f/w download */</span>
	<span class="n">UINT</span>			<span class="n">uiActiveDSDOffsetAtFwDld</span><span class="p">;</span>  <span class="cm">/* For accessing Active DSD chosen before f/w download */</span>
	<span class="n">UINT</span>			<span class="n">uiFlashLayoutMajorVersion</span><span class="p">;</span>
	<span class="n">UINT</span>			<span class="n">uiFlashLayoutMinorVersion</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bAllDSDWriteAllow</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bSigCorrupted</span><span class="p">;</span>
	<span class="cm">/* this should be set who so ever want to change the Headers. after Wrtie it should be reset immediately. */</span>
	<span class="n">BOOLEAN</span>			<span class="n">bHeaderChangeAllowed</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">SelectedChip</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bEndPointHalted</span><span class="p">;</span>
	<span class="cm">/* while bFlashRawRead will be true, Driver  ignore map lay out and consider flash as of without any map. */</span>
	<span class="n">BOOLEAN</span>			<span class="n">bFlashRawRead</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bPreparingForLowPowerMode</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">bDoSuspend</span><span class="p">;</span>
	<span class="n">UINT</span>			<span class="n">syscfgBefFwDld</span><span class="p">;</span>
	<span class="n">BOOLEAN</span>			<span class="n">StopAllXaction</span><span class="p">;</span>
	<span class="n">UINT32</span>			<span class="n">liTimeSinceLastNetEntry</span><span class="p">;</span> <span class="cm">/* Used to Support extended CAPI requirements from */</span>
	<span class="k">struct</span> <span class="n">semaphore</span>	<span class="n">LowPowerModeSync</span><span class="p">;</span>
	<span class="n">ULONG</span>			<span class="n">liDrainCalculated</span><span class="p">;</span>
	<span class="n">UINT</span>			<span class="n">gpioBitMap</span><span class="p">;</span>
	<span class="n">S_BCM_DEBUG_STATE</span>	<span class="n">stDebugState</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MINI_ADAPTER</span> <span class="n">MINI_ADAPTER</span><span class="p">,</span> <span class="o">*</span><span class="n">PMINI_ADAPTER</span><span class="p">;</span>

<span class="cp">#define GET_BCM_ADAPTER(net_dev) netdev_priv(net_dev)</span>

<span class="k">struct</span> <span class="n">_ETH_HEADER_STRUC</span> <span class="p">{</span>
	<span class="n">UCHAR</span>	<span class="n">au8DestinationAddress</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">UCHAR</span>	<span class="n">au8SourceAddress</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">USHORT</span>	<span class="n">u16Etype</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_ETH_HEADER_STRUC</span> <span class="n">ETH_HEADER_STRUC</span><span class="p">,</span> <span class="o">*</span><span class="n">PETH_HEADER_STRUC</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">FirmwareInfo</span> <span class="p">{</span>
	<span class="kt">void</span>	<span class="n">__user</span> <span class="o">*</span><span class="n">pvMappedFirmwareAddress</span><span class="p">;</span>
	<span class="n">ULONG</span>	<span class="n">u32FirmwareLength</span><span class="p">;</span>
	<span class="n">ULONG</span>	<span class="n">u32StartingAddress</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">FIRMWARE_INFO</span><span class="p">,</span> <span class="o">*</span><span class="n">PFIRMWARE_INFO</span><span class="p">;</span>

<span class="cm">/* holds the value of net_device structure.. */</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">gblpnetdev</span><span class="p">;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_cntl_pkt</span> <span class="p">{</span>
	<span class="n">PMINI_ADAPTER</span>	<span class="n">Adapter</span><span class="p">;</span>
	<span class="n">PLEADER</span>		<span class="n">PLeader</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cntl_pkt</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">LINK_REQUEST</span> <span class="n">CONTROL_MESSAGE</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_DDR_SETTING</span> <span class="p">{</span>
	<span class="n">UINT</span> <span class="n">ulRegAddress</span><span class="p">;</span>
	<span class="n">UINT</span> <span class="n">ulRegValue</span><span class="p">;</span>
<span class="p">}</span> <span class="n">DDR_SETTING</span><span class="p">,</span> <span class="o">*</span><span class="n">PDDR_SETTING</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">DDR_SETTING</span> <span class="n">DDR_SET_NODE</span><span class="p">,</span> <span class="o">*</span><span class="n">PDDR_SET_NODE</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">InitAdapter</span><span class="p">(</span><span class="n">PMINI_ADAPTER</span> <span class="n">psAdapter</span><span class="p">);</span>

<span class="cm">/* =====================================================================</span>
<span class="cm"> * Beceem vendor request codes for EP0</span>
<span class="cm"> * =====================================================================</span>
<span class="cm"> */</span>

<span class="cp">#define BCM_REQUEST_READ	0x2</span>
<span class="cp">#define BCM_REQUEST_WRITE	0x1</span>
<span class="cp">#define EP2_MPS_REG		0x0F0110A0</span>
<span class="cp">#define EP2_MPS			0x40</span>

<span class="cp">#define EP2_CFG_REG	0x0F0110A8</span>
<span class="cp">#define EP2_CFG_INT	0x27</span>
<span class="cp">#define EP2_CFG_BULK	0x25</span>

<span class="cp">#define EP4_MPS_REG	0x0F0110F0</span>
<span class="cp">#define EP4_MPS		0x8C</span>

<span class="cp">#define EP4_CFG_REG	0x0F0110F8</span>

<span class="cp">#define ISO_MPS_REG	0x0F0110C8</span>
<span class="cp">#define ISO_MPS		0x00000000</span>

<span class="cp">#define EP1 0</span>
<span class="cp">#define EP2 1</span>
<span class="cp">#define EP3 2</span>
<span class="cp">#define EP4 3</span>
<span class="cp">#define EP5 4</span>
<span class="cp">#define EP6 5</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">eInterface_setting</span> <span class="p">{</span>
	<span class="n">DEFAULT_SETTING_0</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">ALTERNATE_SETTING_1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">}</span> <span class="n">INTERFACE_SETTING</span><span class="p">;</span>

<span class="cp">#endif	</span><span class="cm">/* __ADAPTER_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
