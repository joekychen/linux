<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › vt6655 › tether.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>tether.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 1996, 2003 VIA Networking Technologies, Inc.</span>
<span class="cm"> * All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License along</span>
<span class="cm"> * with this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="cm"> * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</span>
<span class="cm"> *</span>
<span class="cm"> * File: tether.h</span>
<span class="cm"> *</span>
<span class="cm"> * Purpose:</span>
<span class="cm"> *</span>
<span class="cm"> * Author: Tevin Chen</span>
<span class="cm"> *</span>
<span class="cm"> * Date: Jan. 28, 1997</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __TETHER_H__</span>
<span class="cp">#define __TETHER_H__</span>

<span class="cp">#include &lt;linux/etherdevice.h&gt;</span>
<span class="cp">#include &quot;ttype.h&quot;</span>

<span class="cm">/*---------------------  Export Definitions -------------------------*/</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>constants</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define U_ETHER_ADDR_STR_LEN (ETH_ALEN * 2 + 1)</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>Ethernet address string length</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define MAX_LOOKAHEAD_SIZE  ETH_FRAME_LEN</span>

<span class="cp">#define U_MULTI_ADDR_LEN    8           </span><span class="c1">// multicast address length</span>


<span class="cp">#ifdef __BIG_ENDIAN</span>

<span class="cp">#define TYPE_PKT_IP         0x0800      </span><span class="c1">//</span>
<span class="cp">#define TYPE_PKT_ARP        0x0806      </span><span class="c1">//</span>
<span class="cp">#define TYPE_PKT_RARP       0x8035      </span><span class="c1">//</span>
<span class="cp">#define TYPE_PKT_IPX	    0x8137	    </span><span class="c1">//</span>
<span class="cp">#define TYPE_PKT_802_1x     0x888e</span>
<span class="cp">#define TYPE_PKT_PreAuth    0x88C7</span>

<span class="cp">#define TYPE_PKT_PING_M_REQ 0x8011      </span><span class="c1">// master reguest</span>
<span class="cp">#define TYPE_PKT_PING_S_GNT 0x8022      </span><span class="c1">// slave grant</span>
<span class="cp">#define TYPE_PKT_PING_M     0x8077      </span><span class="c1">// pingpong master packet</span>
<span class="cp">#define TYPE_PKT_PING_S     0x8088      </span><span class="c1">// pingpong slave packet</span>
<span class="cp">#define TYPE_PKT_WOL_M_REQ  0x8033      </span><span class="c1">// WOL waker request</span>
<span class="cp">#define TYPE_PKT_WOL_S_GNT  0x8044      </span><span class="c1">// WOL sleeper grant</span>
<span class="cp">#define TYPE_MGMT_PROBE_RSP 0x5000</span>
<span class="cp">#define TYPE_PKT_VNT_DIAG   0x8011      </span><span class="c1">// Diag Pkt</span>
<span class="cp">#define TYPE_PKT_VNT_PER    0x8888      </span><span class="c1">// Diag PER Pkt</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>wFrameCtl field in the S802_11Header</p>

<p>NOTE....
  in network byte order, high byte is going first</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define FC_TODS             0x0001</span>
<span class="cp">#define FC_FROMDS           0x0002</span>
<span class="cp">#define FC_MOREFRAG         0x0004</span>
<span class="cp">#define FC_RETRY            0x0008</span>
<span class="cp">#define FC_POWERMGT         0x0010</span>
<span class="cp">#define FC_MOREDATA         0x0020</span>
<span class="cp">#define FC_WEP              0x0040</span>
<span class="cp">#define TYPE_802_11_ATIM    0x9000</span>

<span class="cp">#define TYPE_802_11_DATA    0x0800</span>
<span class="cp">#define TYPE_802_11_CTL     0x0400</span>
<span class="cp">#define TYPE_802_11_MGMT    0x0000</span>
<span class="cp">#define TYPE_802_11_MASK    0x0C00</span>
<span class="cp">#define TYPE_SUBTYPE_MASK   0xFC00</span>
<span class="cp">#define TYPE_802_11_NODATA  0x4000</span>
<span class="cp">#define TYPE_DATE_NULL      0x4800</span>

<span class="cp">#define TYPE_CTL_PSPOLL     0xa400</span>
<span class="cp">#define TYPE_CTL_RTS        0xb400</span>
<span class="cp">#define TYPE_CTL_CTS        0xc400</span>
<span class="cp">#define TYPE_CTL_ACK        0xd400</span></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><h1>define WEP<em>IV</em>MASK         0xFFFFFF00</h1></td><td class="code"><div class="highlight"><pre><span class="cp">#else </span><span class="c1">//if LITTLE_ENDIAN</span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><p>wType field in the SEthernetHeader</p>

<p>NOTE....
  in network byte order, high byte is going first</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define TYPE_PKT_IP         0x0008      </span><span class="c1">//</span>
<span class="cp">#define TYPE_PKT_ARP        0x0608      </span><span class="c1">//</span>
<span class="cp">#define TYPE_PKT_RARP       0x3580      </span><span class="c1">//</span>
<span class="cp">#define TYPE_PKT_IPX	    0x3781	    </span><span class="c1">//</span>

<span class="cp">#define TYPE_PKT_802_1x     0x8e88</span>
<span class="cp">#define TYPE_PKT_PreAuth    0xC788</span>

<span class="cp">#define TYPE_PKT_PING_M_REQ 0x1180      </span><span class="c1">// master reguest</span>
<span class="cp">#define TYPE_PKT_PING_S_GNT 0x2280      </span><span class="c1">// slave grant</span>
<span class="cp">#define TYPE_PKT_PING_M     0x7780      </span><span class="c1">// pingpong master packet</span>
<span class="cp">#define TYPE_PKT_PING_S     0x8880      </span><span class="c1">// pingpong slave packet</span>
<span class="cp">#define TYPE_PKT_WOL_M_REQ  0x3380      </span><span class="c1">// WOL waker request</span>
<span class="cp">#define TYPE_PKT_WOL_S_GNT  0x4480      </span><span class="c1">// WOL sleeper grant</span>
<span class="cp">#define TYPE_MGMT_PROBE_RSP 0x0050</span>
<span class="cp">#define TYPE_PKT_VNT_DIAG   0x1180      </span><span class="c1">// Diag Pkt</span>
<span class="cp">#define TYPE_PKT_VNT_PER    0x8888      </span><span class="c1">// Diag PER Pkt</span></pre></div></td></tr>


<tr id="section-7"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-7">&#182;</a></div><p>wFrameCtl field in the S802_11Header</p>

<p>NOTE....
  in network byte order, high byte is going first</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define FC_TODS             0x0100</span>
<span class="cp">#define FC_FROMDS           0x0200</span>
<span class="cp">#define FC_MOREFRAG         0x0400</span>
<span class="cp">#define FC_RETRY            0x0800</span>
<span class="cp">#define FC_POWERMGT         0x1000</span>
<span class="cp">#define FC_MOREDATA         0x2000</span>
<span class="cp">#define FC_WEP              0x4000</span>
<span class="cp">#define TYPE_802_11_ATIM    0x0090</span>

<span class="cp">#define TYPE_802_11_DATA    0x0008</span>
<span class="cp">#define TYPE_802_11_CTL     0x0004</span>
<span class="cp">#define TYPE_802_11_MGMT    0x0000</span>
<span class="cp">#define TYPE_802_11_MASK    0x000C</span>
<span class="cp">#define TYPE_SUBTYPE_MASK   0x00FC</span>
<span class="cp">#define TYPE_802_11_NODATA  0x0040</span>
<span class="cp">#define TYPE_DATE_NULL      0x0048</span>

<span class="cp">#define TYPE_CTL_PSPOLL     0x00a4</span>
<span class="cp">#define TYPE_CTL_RTS        0x00b4</span>
<span class="cp">#define TYPE_CTL_CTS        0x00c4</span>
<span class="cp">#define TYPE_CTL_ACK        0x00d4</span></pre></div></td></tr>


<tr id="section-8"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-8">&#182;</a></div><h1>define WEP<em>IV</em>MASK         0x00FFFFFF</h1></td><td class="code"><div class="highlight"><pre><span class="cp">#endif </span><span class="c1">//#ifdef __BIG_ENDIAN</span>

<span class="cp">#define WEP_IV_MASK         0x00FFFFFF</span>

<span class="cm">/*---------------------  Export Types  ------------------------------*/</span></pre></div></td></tr>


<tr id="section-9"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-9">&#182;</a></div><p>Ethernet packet</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagSEthernetHeader</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyDstAddr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abySrcAddr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wType</span><span class="p">;</span>
<span class="p">}</span><span class="n">__attribute__</span> <span class="p">((</span><span class="n">__packed__</span><span class="p">))</span>
<span class="n">SEthernetHeader</span><span class="p">,</span> <span class="o">*</span><span class="n">PSEthernetHeader</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-10"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-10">&#182;</a></div><p>802_3 packet</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagS802_3Header</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyDstAddr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abySrcAddr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wLen</span><span class="p">;</span>
<span class="p">}</span><span class="n">__attribute__</span> <span class="p">((</span><span class="n">__packed__</span><span class="p">))</span>
<span class="n">S802_3Header</span><span class="p">,</span> <span class="o">*</span><span class="n">PS802_3Header</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-11"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-11">&#182;</a></div><p>802_11 packet</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagS802_11Header</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wFrameCtl</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wDurationID</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyAddr1</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyAddr2</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyAddr3</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wSeqCtl</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyAddr4</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
<span class="p">}</span><span class="n">__attribute__</span> <span class="p">((</span><span class="n">__packed__</span><span class="p">))</span>
<span class="n">S802_11Header</span><span class="p">,</span> <span class="o">*</span><span class="n">PS802_11Header</span><span class="p">;</span>

<span class="cm">/*---------------------  Export Macros ------------------------------*/</span>

<span class="cm">/*---------------------  Export Classes  ----------------------------*/</span>

<span class="cm">/*---------------------  Export Variables  --------------------------*/</span>

<span class="cm">/*---------------------  Export Functions  --------------------------*/</span>

<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ETHbyGetHashIndexByCrc32</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pbyMultiAddr</span><span class="p">);</span></pre></div></td></tr>


<tr id="section-12"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-12">&#182;</a></div><p>unsigned char ETHbyGetHashIndexByCrc(unsigned char *pbyMultiAddr);</p></td><td class="code"><div class="highlight"><pre><span class="n">bool</span> <span class="n">ETHbIsBufferCrc32Ok</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pbyBuffer</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cbFrameLength</span><span class="p">);</span>

<span class="cp">#endif </span><span class="c1">// __TETHER_H__</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
