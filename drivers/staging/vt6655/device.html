<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › vt6655 › device.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>device.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 1996, 2003 VIA Networking Technologies, Inc.</span>
<span class="cm"> * All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License along</span>
<span class="cm"> * with this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="cm"> * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</span>
<span class="cm"> *</span>
<span class="cm"> * File: device.h</span>
<span class="cm"> *</span>
<span class="cm"> * Purpose: MAC Data structure</span>
<span class="cm"> *</span>
<span class="cm"> * Author: Tevin Chen</span>
<span class="cm"> *</span>
<span class="cm"> * Date: Mar 17, 1997</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __DEVICE_H__</span>
<span class="cp">#define __DEVICE_H__</span>

<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/mm.h&gt;</span>
<span class="cp">#include &lt;linux/errno.h&gt;</span>
<span class="cp">#include &lt;linux/ioport.h&gt;</span>
<span class="cp">#include &lt;linux/pci.h&gt;</span>
<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/netdevice.h&gt;</span>
<span class="cp">#include &lt;linux/etherdevice.h&gt;</span>
<span class="cp">#include &lt;linux/skbuff.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;linux/timer.h&gt;</span>
<span class="cp">#include &lt;linux/slab.h&gt;</span>
<span class="cp">#include &lt;linux/interrupt.h&gt;</span>
<span class="cp">#include &lt;linux/string.h&gt;</span>
<span class="cp">#include &lt;linux/wait.h&gt;</span>
<span class="cp">#include &lt;linux/if_arp.h&gt;</span>
<span class="cp">#include &lt;linux/sched.h&gt;</span>
<span class="cp">#include &lt;linux/io.h&gt;</span>
<span class="cp">#include &lt;linux/if.h&gt;</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><h1>include <linux/config.h></h1></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;linux/uaccess.h&gt;</span>
<span class="cp">#include &lt;linux/proc_fs.h&gt;</span>
<span class="cp">#include &lt;linux/inetdevice.h&gt;</span>
<span class="cp">#include &lt;linux/reboot.h&gt;</span>
<span class="cp">#ifdef SIOCETHTOOL</span>
<span class="cp">#define DEVICE_ETHTOOL_IOCTL_SUPPORT</span>
<span class="cp">#include &lt;linux/ethtool.h&gt;</span>
<span class="cp">#else</span>
<span class="cp">#undef DEVICE_ETHTOOL_IOCTL_SUPPORT</span>
<span class="cp">#endif</span>
<span class="cm">/* Include Wireless Extension definition and check version - Jean II */</span>
<span class="cp">#include &lt;linux/wireless.h&gt;</span>
<span class="cp">#include &lt;net/iw_handler.h&gt;	</span><span class="c1">// New driver API</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>2008-0409-07, <Add> by Einsn Liu</p></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef WPA_SUPPLICANT_DRIVER_WEXT_SUPPORT</span>
<span class="cp">#define WPA_SUPPLICANT_DRIVER_WEXT_SUPPORT</span>
<span class="cp">#endif</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>2008-4-14<add> by chester for led issue</p>

<h1>define FOR<em>LED</em>ON_NOTEBOOK</h1></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><p>device specific</p></td><td class="code"><div class="highlight"><pre><span class="cp">#include &quot;device_cfg.h&quot;</span>
<span class="cp">#include &quot;ttype.h&quot;</span>
<span class="cp">#include &quot;80211hdr.h&quot;</span>
<span class="cp">#include &quot;tether.h&quot;</span>
<span class="cp">#include &quot;wmgr.h&quot;</span>
<span class="cp">#include &quot;wcmd.h&quot;</span>
<span class="cp">#include &quot;mib.h&quot;</span>
<span class="cp">#include &quot;srom.h&quot;</span>
<span class="cp">#include &quot;rc4.h&quot;</span>
<span class="cp">#include &quot;desc.h&quot;</span>
<span class="cp">#include &quot;key.h&quot;</span>
<span class="cp">#include &quot;mac.h&quot;</span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><p>PLICE_DEBUG-></p>

<h1>define        THREAD</h1></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-7"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-7">&#182;</a></div><h1>define    TASK_LET</h1>

<p>PLICE_DEBUG&lt;-</p></td><td class="code"><div class="highlight"><pre><span class="cm">/*---------------------  Export Definitions -------------------------*/</span>

<span class="cp">#define MAC_MAX_CONTEXT_REG     (256+128)</span>

<span class="cp">#define MAX_MULTICAST_ADDRESS_NUM       32</span>
<span class="cp">#define MULTICAST_ADDRESS_LIST_SIZE     (MAX_MULTICAST_ADDRESS_NUM * ETH_ALEN)</span></pre></div></td></tr>


<tr id="section-8"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-8">&#182;</a></div><h1>define OP<em>MODE</em>INFRASTRUCTURE  0</h1>

<h1>define OP<em>MODE</em>ADHOC           1</h1>

<h1>define OP<em>MODE</em>AP              2</h1></td><td class="code"><div class="highlight"><pre><span class="cp">#define DUPLICATE_RX_CACHE_LENGTH       5</span>

<span class="cp">#define NUM_KEY_ENTRY                   11</span>

<span class="cp">#define TX_WEP_NONE                     0</span>
<span class="cp">#define TX_WEP_OTF                      1</span>
<span class="cp">#define TX_WEP_SW                       2</span>
<span class="cp">#define TX_WEP_SWOTP                    3</span>
<span class="cp">#define TX_WEP_OTPSW                    4</span>
<span class="cp">#define TX_WEP_SW232                    5</span>

<span class="cp">#define KEYSEL_WEP40                    0</span>
<span class="cp">#define KEYSEL_WEP104                   1</span>
<span class="cp">#define KEYSEL_TKIP                     2</span>
<span class="cp">#define KEYSEL_CCMP                     3</span>



<span class="cp">#define AUTO_FB_NONE            0</span>
<span class="cp">#define AUTO_FB_0               1</span>
<span class="cp">#define AUTO_FB_1               2</span>

<span class="cp">#define FB_RATE0                0</span>
<span class="cp">#define FB_RATE1                1</span></pre></div></td></tr>


<tr id="section-9"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-9">&#182;</a></div><p>Antenna Mode</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define ANT_A                   0</span>
<span class="cp">#define ANT_B                   1</span>
<span class="cp">#define ANT_DIVERSITY           2</span>
<span class="cp">#define ANT_RXD_TXA             3</span>
<span class="cp">#define ANT_RXD_TXB             4</span>
<span class="cp">#define ANT_UNKNOWN             0xFF</span>

<span class="cp">#define MAXCHECKHANGCNT         4</span>

<span class="cp">#define BB_VGA_LEVEL            4</span>
<span class="cp">#define BB_VGA_CHANGE_THRESHOLD 16</span>



<span class="cp">#ifndef RUN_AT</span>
<span class="cp">#define RUN_AT(x)                       (jiffies+(x))</span>
<span class="cp">#endif</span></pre></div></td></tr>


<tr id="section-10"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-10">&#182;</a></div><p>DMA related</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define RESERV_AC0DMA                   4</span></pre></div></td></tr>


<tr id="section-11"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-11">&#182;</a></div><p>BUILD OBJ mode</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define	AVAIL_TD(p,q)	((p)-&gt;sOpts.nTxDescs[(q)]-((p)-&gt;iTDUsed[(q)]))</span></pre></div></td></tr>


<tr id="section-12"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-12">&#182;</a></div><p>PLICE_DEBUG -></p></td><td class="code"><div class="highlight"><pre><span class="cp">#define	NUM				64</span></pre></div></td></tr>


<tr id="section-13"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-13">&#182;</a></div><p>PLICE_DEUBG &lt;-</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define PRIVATE_Message                 0</span>

<span class="cm">/*---------------------  Export Types  ------------------------------*/</span>


<span class="cp">#define DBG_PRT(l, p, args...) {if (l&lt;=msglevel) printk( p ,##args);}</span>
<span class="cp">#define PRINT_K(p, args...) {if (PRIVATE_Message) printk( p ,##args);}</span></pre></div></td></tr>


<tr id="section-14"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-14">&#182;</a></div><p>0:11A 1:11B 2:11G</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">enum</span> <span class="n">_VIA_BB_TYPE</span>
<span class="p">{</span>
    <span class="n">BB_TYPE_11A</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">BB_TYPE_11B</span><span class="p">,</span>
    <span class="n">BB_TYPE_11G</span>
<span class="p">}</span> <span class="n">VIA_BB_TYPE</span><span class="p">,</span> <span class="o">*</span><span class="n">PVIA_BB_TYPE</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-15"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-15">&#182;</a></div><p>0:11a,1:11b,2:11gb(only CCK in BasicRate),3:11ga(OFDM in Basic Rate)</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">enum</span> <span class="n">_VIA_PKT_TYPE</span>
<span class="p">{</span>
    <span class="n">PK_TYPE_11A</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">PK_TYPE_11B</span><span class="p">,</span>
    <span class="n">PK_TYPE_11GB</span><span class="p">,</span>
    <span class="n">PK_TYPE_11GA</span>
<span class="p">}</span> <span class="n">VIA_PKT_TYPE</span><span class="p">,</span> <span class="o">*</span><span class="n">PVIA_PKT_TYPE</span><span class="p">;</span>


<span class="k">typedef</span> <span class="k">enum</span> <span class="n">__device_msg_level</span> <span class="p">{</span>
    <span class="n">MSG_LEVEL_ERR</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>            <span class="c1">//Errors that will cause abnormal operation.</span>
    <span class="n">MSG_LEVEL_NOTICE</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>         <span class="c1">//Some errors need users to be notified.</span>
    <span class="n">MSG_LEVEL_INFO</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>           <span class="c1">//Normal message.</span>
    <span class="n">MSG_LEVEL_VERBOSE</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>        <span class="c1">//Will report all trival errors.</span>
    <span class="n">MSG_LEVEL_DEBUG</span><span class="o">=</span><span class="mi">4</span>           <span class="c1">//Only for debug purpose.</span>
<span class="p">}</span> <span class="n">DEVICE_MSG_LEVEL</span><span class="p">,</span> <span class="o">*</span><span class="n">PDEVICE_MSG_LEVEL</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">__device_init_type</span> <span class="p">{</span>
    <span class="n">DEVICE_INIT_COLD</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>         <span class="c1">// cold init</span>
    <span class="n">DEVICE_INIT_RESET</span><span class="p">,</span>          <span class="c1">// reset init or Dx to D0 power remain init</span>
    <span class="n">DEVICE_INIT_DXPL</span>            <span class="c1">// Dx to D0 power lost init</span>
<span class="p">}</span> <span class="n">DEVICE_INIT_TYPE</span><span class="p">,</span> <span class="o">*</span><span class="n">PDEVICE_INIT_TYPE</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-16"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-16">&#182;</a></div><p>++ NDIS related</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define MAX_BSSIDINFO_4_PMKID   16</span>
<span class="cp">#define MAX_PMKIDLIST           5</span></pre></div></td></tr>


<tr id="section-17"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-17">&#182;</a></div><p>Flags for PMKID Candidate list structure</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define NDIS_802_11_PMKID_CANDIDATE_PREAUTH_ENABLED	0x01</span></pre></div></td></tr>


<tr id="section-18"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-18">&#182;</a></div><p>PMKID Structures</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">NDIS_802_11_PMKID_VALUE</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>


<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_NDIS_802_11_WEP_STATUS</span>
<span class="p">{</span>
    <span class="n">Ndis802_11WEPEnabled</span><span class="p">,</span>
    <span class="n">Ndis802_11Encryption1Enabled</span> <span class="o">=</span> <span class="n">Ndis802_11WEPEnabled</span><span class="p">,</span>
    <span class="n">Ndis802_11WEPDisabled</span><span class="p">,</span>
    <span class="n">Ndis802_11EncryptionDisabled</span> <span class="o">=</span> <span class="n">Ndis802_11WEPDisabled</span><span class="p">,</span>
    <span class="n">Ndis802_11WEPKeyAbsent</span><span class="p">,</span>
    <span class="n">Ndis802_11Encryption1KeyAbsent</span> <span class="o">=</span> <span class="n">Ndis802_11WEPKeyAbsent</span><span class="p">,</span>
    <span class="n">Ndis802_11WEPNotSupported</span><span class="p">,</span>
    <span class="n">Ndis802_11EncryptionNotSupported</span> <span class="o">=</span> <span class="n">Ndis802_11WEPNotSupported</span><span class="p">,</span>
    <span class="n">Ndis802_11Encryption2Enabled</span><span class="p">,</span>
    <span class="n">Ndis802_11Encryption2KeyAbsent</span><span class="p">,</span>
    <span class="n">Ndis802_11Encryption3Enabled</span><span class="p">,</span>
    <span class="n">Ndis802_11Encryption3KeyAbsent</span>
<span class="p">}</span> <span class="n">NDIS_802_11_WEP_STATUS</span><span class="p">,</span> <span class="o">*</span><span class="n">PNDIS_802_11_WEP_STATUS</span><span class="p">,</span>
  <span class="n">NDIS_802_11_ENCRYPTION_STATUS</span><span class="p">,</span> <span class="o">*</span><span class="n">PNDIS_802_11_ENCRYPTION_STATUS</span><span class="p">;</span>


<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_NDIS_802_11_STATUS_TYPE</span>
<span class="p">{</span>
    <span class="n">Ndis802_11StatusType_Authentication</span><span class="p">,</span>
    <span class="n">Ndis802_11StatusType_MediaStreamMode</span><span class="p">,</span>
    <span class="n">Ndis802_11StatusType_PMKID_CandidateList</span><span class="p">,</span>
    <span class="n">Ndis802_11StatusTypeMax</span>    <span class="c1">// not a real type, defined as an upper bound</span>
<span class="p">}</span> <span class="n">NDIS_802_11_STATUS_TYPE</span><span class="p">,</span> <span class="o">*</span><span class="n">PNDIS_802_11_STATUS_TYPE</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-19"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-19">&#182;</a></div><p>Added new types for PMKID Candidate lists.</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">_PMKID_CANDIDATE</span> <span class="p">{</span>
    <span class="n">NDIS_802_11_MAC_ADDRESS</span> <span class="n">BSSID</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">Flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PMKID_CANDIDATE</span><span class="p">,</span> <span class="o">*</span><span class="n">PPMKID_CANDIDATE</span><span class="p">;</span>


<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_BSSID_INFO</span>
<span class="p">{</span>
    <span class="n">NDIS_802_11_MAC_ADDRESS</span> <span class="n">BSSID</span><span class="p">;</span>
    <span class="n">NDIS_802_11_PMKID_VALUE</span> <span class="n">PMKID</span><span class="p">;</span>
<span class="p">}</span> <span class="n">BSSID_INFO</span><span class="p">,</span> <span class="o">*</span><span class="n">PBSSID_INFO</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagSPMKID</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">Length</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">BSSIDInfoCount</span><span class="p">;</span>
    <span class="n">BSSID_INFO</span> <span class="n">BSSIDInfo</span><span class="p">[</span><span class="n">MAX_BSSIDINFO_4_PMKID</span><span class="p">];</span>
<span class="p">}</span> <span class="n">SPMKID</span><span class="p">,</span> <span class="o">*</span><span class="n">PSPMKID</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagSPMKIDCandidateEvent</span> <span class="p">{</span>
    <span class="n">NDIS_802_11_STATUS_TYPE</span>     <span class="n">StatusType</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">Version</span><span class="p">;</span>       <span class="c1">// Version of the structure</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">NumCandidates</span><span class="p">;</span> <span class="c1">// No. of pmkid candidates</span>
    <span class="n">PMKID_CANDIDATE</span> <span class="n">CandidateList</span><span class="p">[</span><span class="n">MAX_PMKIDLIST</span><span class="p">];</span>
<span class="p">}</span> <span class="n">SPMKIDCandidateEvent</span><span class="p">,</span> <span class="o">*</span><span class="n">PSPMKIDCandidateEvent</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-20"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-20">&#182;</a></div><p>--</p></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-21"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-21">&#182;</a></div><p>++ 802.11h related</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define MAX_QUIET_COUNT     8</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagSQuietControl</span> <span class="p">{</span>
    <span class="n">bool</span> <span class="n">bEnable</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dwStartTime</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byPeriod</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wDuration</span><span class="p">;</span>
<span class="p">}</span> <span class="n">SQuietControl</span><span class="p">,</span> <span class="o">*</span><span class="n">PSQuietControl</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-22"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-22">&#182;</a></div><p>--</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">__chip_info_tbl</span><span class="p">{</span>
    <span class="n">CHIP_TYPE</span>   <span class="n">chip_id</span><span class="p">;</span>
    <span class="kt">char</span><span class="o">*</span>       <span class="n">name</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">io_size</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">nTxQueue</span><span class="p">;</span>
    <span class="n">u32</span>         <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">CHIP_INFO</span><span class="p">,</span> <span class="o">*</span><span class="n">PCHIP_INFO</span><span class="p">;</span>


<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
    <span class="n">OWNED_BY_HOST</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">OWNED_BY_NIC</span><span class="o">=</span><span class="mi">1</span>
<span class="p">}</span> <span class="n">DEVICE_OWNER_TYPE</span><span class="p">,</span> <span class="o">*</span><span class="n">PDEVICE_OWNER_TYPE</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-23"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-23">&#182;</a></div><p>The receive duplicate detection cache entry</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagSCacheEntry</span><span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wFmSequence</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyAddr2</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
<span class="p">}</span> <span class="n">SCacheEntry</span><span class="p">,</span> <span class="o">*</span><span class="n">PSCacheEntry</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagSCache</span><span class="p">{</span>
<span class="cm">/* The receive cache is updated circularly.  The next entry to be written is</span>
<span class="cm"> * indexed by the &quot;InPtr&quot;.</span>
<span class="cm">*/</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">uInPtr</span><span class="p">;</span>         <span class="c1">// Place to use next</span>
    <span class="n">SCacheEntry</span>     <span class="n">asCacheEntry</span><span class="p">[</span><span class="n">DUPLICATE_RX_CACHE_LENGTH</span><span class="p">];</span>
<span class="p">}</span> <span class="n">SCache</span><span class="p">,</span> <span class="o">*</span><span class="n">PSCache</span><span class="p">;</span>

<span class="cp">#define CB_MAX_RX_FRAG                 64</span></pre></div></td></tr>


<tr id="section-24"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-24">&#182;</a></div><p>DeFragment Control Block, used for collecting fragments prior to reassembly</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">tagSDeFragControlBlock</span>
<span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wSequence</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wFragNum</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyAddr2</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">uLifetime</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">sk_buff</span><span class="o">*</span> <span class="n">skb</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pbyRxBuffer</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cbFrameLength</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bInUse</span><span class="p">;</span>
<span class="p">}</span> <span class="n">SDeFragControlBlock</span><span class="p">,</span> <span class="o">*</span><span class="n">PSDeFragControlBlock</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-25"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-25">&#182;</a></div><p>flags for options</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define     DEVICE_FLAGS_IP_ALIGN        0x00000001UL</span>
<span class="cp">#define     DEVICE_FLAGS_PREAMBLE_TYPE   0x00000002UL</span>
<span class="cp">#define     DEVICE_FLAGS_OP_MODE         0x00000004UL</span>
<span class="cp">#define     DEVICE_FLAGS_PS_MODE         0x00000008UL</span>
<span class="cp">#define		DEVICE_FLAGS_80211h_MODE	 0x00000010UL</span>
<span class="cp">#define		DEVICE_FLAGS_DiversityANT	 0x00000020UL</span></pre></div></td></tr>


<tr id="section-26"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-26">&#182;</a></div><p>flags for driver status</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define     DEVICE_FLAGS_OPENED          0x00010000UL</span>
<span class="cp">#define     DEVICE_FLAGS_WOL_ENABLED     0x00080000UL</span></pre></div></td></tr>


<tr id="section-27"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-27">&#182;</a></div><p>flags for capbilities</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define     DEVICE_FLAGS_TX_ALIGN        0x01000000UL</span>
<span class="cp">#define     DEVICE_FLAGS_HAVE_CAM        0x02000000UL</span>
<span class="cp">#define     DEVICE_FLAGS_FLOW_CTRL       0x04000000UL</span></pre></div></td></tr>


<tr id="section-28"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-28">&#182;</a></div><p>flags for MII status</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define     DEVICE_LINK_FAIL             0x00000001UL</span>
<span class="cp">#define     DEVICE_SPEED_10              0x00000002UL</span>
<span class="cp">#define     DEVICE_SPEED_100             0x00000004UL</span>
<span class="cp">#define     DEVICE_SPEED_1000            0x00000008UL</span>
<span class="cp">#define     DEVICE_DUPLEX_FULL           0x00000010UL</span>
<span class="cp">#define     DEVICE_AUTONEG_ENABLE        0x00000020UL</span>
<span class="cp">#define     DEVICE_FORCED_BY_EEPROM      0x00000040UL</span></pre></div></td></tr>


<tr id="section-29"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-29">&#182;</a></div><p>for device<em>set</em>media_duplex</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define     DEVICE_LINK_CHANGE           0x00000001UL</span></pre></div></td></tr>


<tr id="section-30"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-30">&#182;</a></div><p>PLICE_DEBUG-></p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span>	<span class="k">struct</span> <span class="n">_RxManagementQueue</span>
<span class="p">{</span>
	<span class="kt">int</span>	<span class="n">packet_num</span><span class="p">;</span>
	<span class="kt">int</span>	<span class="n">head</span><span class="p">,</span><span class="n">tail</span><span class="p">;</span>
	<span class="n">PSRxMgmtPacket</span>	<span class="n">Q</span><span class="p">[</span><span class="n">NUM</span><span class="p">];</span>
<span class="p">}</span> <span class="n">RxManagementQueue</span><span class="p">,</span><span class="o">*</span><span class="n">PSRxManagementQueue</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-31"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-31">&#182;</a></div><p>PLICE_DEBUG&lt;-</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">__device_opt</span> <span class="p">{</span>
    <span class="kt">int</span>         <span class="n">nRxDescs0</span><span class="p">;</span>    <span class="c1">//Number of RX descriptors0</span>
    <span class="kt">int</span>         <span class="n">nRxDescs1</span><span class="p">;</span>    <span class="c1">//Number of RX descriptors1</span>
    <span class="kt">int</span>         <span class="n">nTxDescs</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>  <span class="c1">//Number of TX descriptors 0, 1</span>
    <span class="kt">int</span>         <span class="n">int_works</span><span class="p">;</span>    <span class="c1">//interrupt limits</span>
    <span class="kt">int</span>         <span class="n">rts_thresh</span><span class="p">;</span>   <span class="c1">//rts threshold</span>
    <span class="kt">int</span>         <span class="n">frag_thresh</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">data_rate</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">channel_num</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">short_retry</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">long_retry</span><span class="p">;</span>
    <span class="kt">int</span>         <span class="n">bbp_type</span><span class="p">;</span>
    <span class="n">u32</span>         <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">OPTIONS</span><span class="p">,</span> <span class="o">*</span><span class="n">POPTIONS</span><span class="p">;</span>


<span class="k">typedef</span> <span class="k">struct</span> <span class="n">__device_info</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="n">__device_info</span><span class="o">*</span>        <span class="n">next</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">__device_info</span><span class="o">*</span>        <span class="n">prev</span><span class="p">;</span>

    <span class="k">struct</span> <span class="n">pci_dev</span><span class="o">*</span>             <span class="n">pcid</span><span class="p">;</span>

<span class="cp">#ifdef CONFIG_PM</span>
    <span class="n">u32</span>                         <span class="n">pci_state</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="cp">#endif</span></pre></div></td></tr>


<tr id="section-32"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-32">&#182;</a></div><p>netdev</p></td><td class="code"><div class="highlight"><pre>    <span class="k">struct</span> <span class="n">net_device</span><span class="o">*</span>          <span class="n">dev</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">net_device</span><span class="o">*</span>          <span class="n">next_module</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">net_device_stats</span>     <span class="n">stats</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-33"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-33">&#182;</a></div><p>dma addr, rx/tx pool</p></td><td class="code"><div class="highlight"><pre>    <span class="n">dma_addr_t</span>                  <span class="n">pool_dma</span><span class="p">;</span>
    <span class="n">dma_addr_t</span>                  <span class="n">rd0_pool_dma</span><span class="p">;</span>
    <span class="n">dma_addr_t</span>                  <span class="n">rd1_pool_dma</span><span class="p">;</span>

    <span class="n">dma_addr_t</span>                  <span class="n">td0_pool_dma</span><span class="p">;</span>
    <span class="n">dma_addr_t</span>                  <span class="n">td1_pool_dma</span><span class="p">;</span>

    <span class="n">dma_addr_t</span>                  <span class="n">tx_bufs_dma0</span><span class="p">;</span>
    <span class="n">dma_addr_t</span>                  <span class="n">tx_bufs_dma1</span><span class="p">;</span>
    <span class="n">dma_addr_t</span>                  <span class="n">tx_beacon_dma</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">tx0_bufs</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">tx1_bufs</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">tx_beacon_bufs</span><span class="p">;</span>

    <span class="n">CHIP_TYPE</span>                   <span class="n">chip_id</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">long</span>               <span class="n">PortOffset</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dwIsr</span><span class="p">;</span>
    <span class="n">u32</span>                         <span class="n">memaddr</span><span class="p">;</span>
    <span class="n">u32</span>                         <span class="n">ioaddr</span><span class="p">;</span>
    <span class="n">u32</span>                         <span class="n">io_size</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byRevId</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">SubSystemID</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">SubVendorID</span><span class="p">;</span>

    <span class="kt">int</span>                         <span class="n">nTxQueues</span><span class="p">;</span>
    <span class="k">volatile</span> <span class="kt">int</span>                <span class="n">iTDUsed</span><span class="p">[</span><span class="n">TYPE_MAXTD</span><span class="p">];</span>

    <span class="k">volatile</span> <span class="n">PSTxDesc</span>           <span class="n">apCurrTD</span><span class="p">[</span><span class="n">TYPE_MAXTD</span><span class="p">];</span>
    <span class="k">volatile</span> <span class="n">PSTxDesc</span>           <span class="n">apTailTD</span><span class="p">[</span><span class="n">TYPE_MAXTD</span><span class="p">];</span>

    <span class="k">volatile</span> <span class="n">PSTxDesc</span>           <span class="n">apTD0Rings</span><span class="p">;</span>
    <span class="k">volatile</span> <span class="n">PSTxDesc</span>           <span class="n">apTD1Rings</span><span class="p">;</span>

    <span class="k">volatile</span> <span class="n">PSRxDesc</span>           <span class="n">aRD0Ring</span><span class="p">;</span>
    <span class="k">volatile</span> <span class="n">PSRxDesc</span>           <span class="n">aRD1Ring</span><span class="p">;</span>
    <span class="k">volatile</span> <span class="n">PSRxDesc</span>           <span class="n">pCurrRD</span><span class="p">[</span><span class="n">TYPE_MAXRD</span><span class="p">];</span>
    <span class="n">SCache</span>                      <span class="n">sDupRxCache</span><span class="p">;</span>

    <span class="n">SDeFragControlBlock</span>         <span class="n">sRxDFCB</span><span class="p">[</span><span class="n">CB_MAX_RX_FRAG</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">cbDFCB</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">cbFreeDFCB</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uCurrentDFCBIdx</span><span class="p">;</span>

    <span class="n">OPTIONS</span>                     <span class="n">sOpts</span><span class="p">;</span>

    <span class="n">u32</span>                         <span class="n">flags</span><span class="p">;</span>

    <span class="n">u32</span>                         <span class="n">rx_buf_sz</span><span class="p">;</span>
    <span class="kt">int</span>                         <span class="n">multicast_limit</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byRxMode</span><span class="p">;</span>

    <span class="n">spinlock_t</span>                  <span class="n">lock</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-34"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-34">&#182;</a></div><p>PLICE_DEBUG-></p></td><td class="code"><div class="highlight"><pre>	<span class="k">struct</span>	<span class="n">tasklet_struct</span> 		<span class="n">RxMngWorkItem</span><span class="p">;</span>
	<span class="n">RxManagementQueue</span>	<span class="n">rxManeQueue</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-35"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-35">&#182;</a></div><p>PLICE<em>DEBUG&lt;-
PLICE</em>DEBUG -></p></td><td class="code"><div class="highlight"><pre>	<span class="n">pid_t</span>				<span class="n">MLMEThr_pid</span><span class="p">;</span>
	<span class="k">struct</span> 	<span class="n">completion</span>	<span class="n">notify</span><span class="p">;</span>
	<span class="k">struct</span> 	<span class="n">semaphore</span>	<span class="n">mlme_semaphore</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-36"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-36">&#182;</a></div><p>PLICE_DEBUG &lt;-</p></td><td class="code"><div class="highlight"><pre>    <span class="n">u32</span>                         <span class="n">rx_bytes</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-37"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-37">&#182;</a></div><p>Version control</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byLocalID</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byRFType</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byMaxPwrLevel</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byZoneType</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bZoneRegExist</span><span class="p">;</span>
   <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byOriginalZonetype</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyMacContext</span><span class="p">[</span><span class="n">MAC_MAX_CONTEXT_REG</span><span class="p">];</span>
    <span class="n">bool</span> <span class="n">bLinkPass</span><span class="p">;</span>          <span class="c1">// link status: OK or fail</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyCurrentNetAddr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span></pre></div></td></tr>


<tr id="section-38"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-38">&#182;</a></div><p>Adapter statistics</p></td><td class="code"><div class="highlight"><pre>    <span class="n">SStatCounter</span>                <span class="n">scStatistic</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-39"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-39">&#182;</a></div><p>802.11 counter</p></td><td class="code"><div class="highlight"><pre>    <span class="n">SDot11Counters</span>              <span class="n">s802_11Counter</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-40"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-40">&#182;</a></div><p>802.11 management</p></td><td class="code"><div class="highlight"><pre>    <span class="n">PSMgmtObject</span>                <span class="n">pMgmt</span><span class="p">;</span>
    <span class="n">SMgmtObject</span>                 <span class="n">sMgmtObj</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-41"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-41">&#182;</a></div><p>802.11 MAC specific</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uCurrRSSI</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byCurrSQ</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dwTxAntennaSel</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dwRxAntennaSel</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byAntennaCount</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byRxAntennaMode</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byTxAntennaMode</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bTxRxAntInv</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pbyTmpBuff</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uSIFS</span><span class="p">;</span>    <span class="c1">//Current SIFS</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uDIFS</span><span class="p">;</span>    <span class="c1">//Current DIFS</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uEIFS</span><span class="p">;</span>    <span class="c1">//Current EIFS</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uSlot</span><span class="p">;</span>    <span class="c1">//Current SlotTime</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uCwMin</span><span class="p">;</span>   <span class="c1">//Current CwMin</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uCwMax</span><span class="p">;</span>   <span class="c1">//CwMax is fixed on 1023.</span></pre></div></td></tr>


<tr id="section-42"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-42">&#182;</a></div><p>PHY parameter</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">bySIFS</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byDIFS</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byEIFS</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">bySlot</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byCWMaxMin</span><span class="p">;</span>
    <span class="n">CARD_PHY_TYPE</span>               <span class="n">eCurrentPHYType</span><span class="p">;</span>


    <span class="n">VIA_BB_TYPE</span>                 <span class="n">byBBType</span><span class="p">;</span> <span class="c1">//0: 11A, 1:11B, 2:11G</span>
    <span class="n">VIA_PKT_TYPE</span>                <span class="n">byPacketType</span><span class="p">;</span> <span class="c1">//0:11a,1:11b,2:11gb(only CCK in BasicRate),3:11ga(OFDM in Basic Rate)</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wBasicRate</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byACKRate</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byTopOFDMBasicRate</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byTopCCKBasicRate</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byMinChannel</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byMaxChannel</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uConnectionRate</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byPreambleType</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byShortPreamble</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wCurrentRate</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wRTSThreshold</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wFragmentationThreshold</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byShortRetryLimit</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byLongRetryLimit</span><span class="p">;</span>
    <span class="n">CARD_OP_MODE</span>                <span class="n">eOPMode</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byOpMode</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bBSSIDFilter</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wMaxTransmitMSDULifetime</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyBSSID</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyDesireBSSID</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wCTSDuration</span><span class="p">;</span>       <span class="c1">// update while speed change</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wACKDuration</span><span class="p">;</span>       <span class="c1">// update while speed change</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wRTSTransmitLen</span><span class="p">;</span>    <span class="c1">// update while speed change</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byRTSServiceField</span><span class="p">;</span>  <span class="c1">// update while speed change</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byRTSSignalField</span><span class="p">;</span>   <span class="c1">// update while speed change</span>

    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dwMaxReceiveLifetime</span><span class="p">;</span>       <span class="c1">// dot11MaxReceiveLifetime</span>

    <span class="n">bool</span> <span class="n">bCCK</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bEncryptionEnable</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bLongHeader</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bShortSlotTime</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bProtectMode</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bNonERPPresent</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bBarkerPreambleMd</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byERPFlag</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wUseProtectCntDown</span><span class="p">;</span>

    <span class="n">bool</span> <span class="n">bRadioControlOff</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bRadioOff</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bEnablePSMode</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wListenInterval</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bPWBitOn</span><span class="p">;</span>
    <span class="n">WMAC_POWER_MODE</span>         <span class="n">ePSMode</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-43"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-43">&#182;</a></div><p>GPIO Radio Control</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byRadioCtl</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byGPIO</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bHWRadioOff</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bPrvActive4RadioOFF</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bGPIOBlockRead</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-44"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-44">&#182;</a></div><p>Beacon releated</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wSeqCounter</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wBCNBufLen</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bBeaconBufReady</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bBeaconSent</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bIsBeaconBufReadySet</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">cbBeaconBufReadySetCnt</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bFixRate</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byCurrentCh</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uScanTime</span><span class="p">;</span>

    <span class="n">CMD_STATE</span>               <span class="n">eCommandState</span><span class="p">;</span>

    <span class="n">CMD_CODE</span>                <span class="n">eCommand</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bBeaconTx</span><span class="p">;</span>

    <span class="n">bool</span> <span class="n">bStopBeacon</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bStopDataPkt</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bStopTx0Pkt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uAutoReConnectTime</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-45"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-45">&#182;</a></div><p>802.11 counter</p></td><td class="code"><div class="highlight"><pre>    <span class="n">CMD_ITEM</span>                <span class="n">eCmdQueue</span><span class="p">[</span><span class="n">CMD_Q_SIZE</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uCmdDequeueIdx</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uCmdEnqueueIdx</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">cbFreeCmdQueue</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bCmdRunning</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bCmdClear</span><span class="p">;</span>



    <span class="n">bool</span> <span class="n">bRoaming</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-46"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-46">&#182;</a></div><p>WOW</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyIPAddr</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>

    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ulTxPower</span><span class="p">;</span>
    <span class="n">NDIS_802_11_WEP_STATUS</span>  <span class="n">eEncryptionStatus</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bTransmitKey</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-47"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-47">&#182;</a></div><p>2007-0925-01<Add>by MikeLiu
mike add :save old Encryption</p></td><td class="code"><div class="highlight"><pre>    <span class="n">NDIS_802_11_WEP_STATUS</span>  <span class="n">eOldEncryptionStatus</span><span class="p">;</span>

    <span class="n">SKeyManagement</span>          <span class="n">sKey</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dwIVCounter</span><span class="p">;</span>

    <span class="n">QWORD</span>                   <span class="n">qwPacketNumber</span><span class="p">;</span> <span class="c1">//For CCMP and TKIP as TSC(6 bytes)</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uCurrentWEPMode</span><span class="p">;</span>

    <span class="n">RC4Ext</span>                  <span class="n">SBox</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyPRNG</span><span class="p">[</span><span class="n">WLAN_WEPMAX_KEYLEN</span><span class="o">+</span><span class="mi">3</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byKeyIndex</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uKeyLength</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyKey</span><span class="p">[</span><span class="n">WLAN_WEP232_KEYLEN</span><span class="p">];</span>

    <span class="n">bool</span> <span class="n">bAES</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byCntMeasure</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-48"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-48">&#182;</a></div><p>for AP mode</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uAssocCount</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bMoreData</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-49"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-49">&#182;</a></div><p>QoS</p></td><td class="code"><div class="highlight"><pre>    <span class="n">bool</span> <span class="n">bGrpAckPolicy</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-50"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-50">&#182;</a></div><p>for OID<em>802</em>11<em>ASSOCIATION</em>INFORMATION</p></td><td class="code"><div class="highlight"><pre>    <span class="n">bool</span> <span class="n">bAssocInfoSet</span><span class="p">;</span>


    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byAutoFBCtrl</span><span class="p">;</span>

    <span class="n">bool</span> <span class="n">bTxMICFail</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bRxMICFail</span><span class="p">;</span>


    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uRATEIdx</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-51"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-51">&#182;</a></div><p>For Update BaseBand VGA Gain Offset</p></td><td class="code"><div class="highlight"><pre>    <span class="n">bool</span> <span class="n">bUpdateBBVGA</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uBBVGADiffCount</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byBBVGANew</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byBBVGACurrent</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyBBVGA</span><span class="p">[</span><span class="n">BB_VGA_LEVEL</span><span class="p">];</span>
    <span class="kt">long</span>                    <span class="n">ldBmThreshold</span><span class="p">[</span><span class="n">BB_VGA_LEVEL</span><span class="p">];</span>

    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byBBPreEDRSSI</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byBBPreEDIndex</span><span class="p">;</span>


    <span class="n">bool</span> <span class="n">bRadioCmd</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dwDiagRefCount</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-52"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-52">&#182;</a></div><p>For FOE Tuning</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byFOETuning</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-53"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-53">&#182;</a></div><p>For Auto Power Tunning</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byAutoPwrTunning</span><span class="p">;</span>
    <span class="kt">short</span>                   <span class="n">sPSetPointCCK</span><span class="p">;</span>
    <span class="kt">short</span>                   <span class="n">sPSetPointOFDMG</span><span class="p">;</span>
    <span class="kt">short</span>                   <span class="n">sPSetPointOFDMA</span><span class="p">;</span>
    <span class="kt">long</span>                    <span class="n">lPFormulaOffset</span><span class="p">;</span>
    <span class="kt">short</span>                   <span class="n">sPThreshold</span><span class="p">;</span>
    <span class="kt">char</span>                    <span class="n">cAdjustStep</span><span class="p">;</span>
    <span class="kt">char</span>                    <span class="n">cMinTxAGC</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-54"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-54">&#182;</a></div><p>For RF Power table</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byCCKPwr</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byOFDMPwrG</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byCurPwr</span><span class="p">;</span>
    <span class="kt">char</span>	 <span class="n">byCurPwrdBm</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyCCKPwrTbl</span><span class="p">[</span><span class="n">CB_MAX_CHANNEL_24G</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyOFDMPwrTbl</span><span class="p">[</span><span class="n">CB_MAX_CHANNEL</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
    <span class="kt">char</span>	<span class="n">abyCCKDefaultPwr</span><span class="p">[</span><span class="n">CB_MAX_CHANNEL_24G</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
    <span class="kt">char</span>	<span class="n">abyOFDMDefaultPwr</span><span class="p">[</span><span class="n">CB_MAX_CHANNEL</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
    <span class="kt">char</span>	<span class="n">abyRegPwr</span><span class="p">[</span><span class="n">CB_MAX_CHANNEL</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
    <span class="kt">char</span>	<span class="n">abyLocalPwr</span><span class="p">[</span><span class="n">CB_MAX_CHANNEL</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span></pre></div></td></tr>


<tr id="section-55"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-55">&#182;</a></div><p>BaseBand Loopback Use</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byBBCR4d</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byBBCRc9</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byBBCR88</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byBBCR09</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-56"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-56">&#182;</a></div><p>command timer</p></td><td class="code"><div class="highlight"><pre>    <span class="k">struct</span> <span class="n">timer_list</span>       <span class="n">sTimerCommand</span><span class="p">;</span>
<span class="cp">#ifdef TxInSleep</span>
     <span class="k">struct</span> <span class="n">timer_list</span>       <span class="n">sTimerTxData</span><span class="p">;</span>
     <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">nTxDataTimeCout</span><span class="p">;</span>
     <span class="n">bool</span> <span class="n">fTxDataInSleep</span><span class="p">;</span>
     <span class="n">bool</span> <span class="n">IsTxDataTrigger</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef WPA_SM_Transtatus</span>
    <span class="n">bool</span> <span class="n">fWPA_Authened</span><span class="p">;</span>           <span class="c1">//is WPA/WPA-PSK or WPA2/WPA2-PSK authen??</span>
<span class="cp">#endif</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byReAssocCount</span><span class="p">;</span>   <span class="c1">//mike add:re-association retry times!</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byLinkWaitCount</span><span class="p">;</span>


    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyNodeName</span><span class="p">[</span><span class="mi">17</span><span class="p">];</span>

    <span class="n">bool</span> <span class="n">bDiversityRegCtlON</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bDiversityEnable</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ulDiversityNValue</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ulDiversityMValue</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byTMax</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byTMax2</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byTMax3</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ulSQ3TH</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-57"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-57">&#182;</a></div><p>ANT diversity</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">uDiversityCnt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byAntennaState</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ulRatio_State0</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ulRatio_State1</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-58"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-58">&#182;</a></div><p>SQ3 functions for antenna diversity</p></td><td class="code"><div class="highlight"><pre>    <span class="k">struct</span> <span class="n">timer_list</span>           <span class="n">TimerSQ3Tmax1</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">timer_list</span>           <span class="n">TimerSQ3Tmax2</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">timer_list</span>           <span class="n">TimerSQ3Tmax3</span><span class="p">;</span>


    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">uNumSQ3</span><span class="p">[</span><span class="n">MAX_RATE</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wAntDiversityMaxRate</span><span class="p">;</span>


    <span class="n">SEthernetHeader</span>         <span class="n">sTxEthHeader</span><span class="p">;</span>
    <span class="n">SEthernetHeader</span>         <span class="n">sRxEthHeader</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyBroadcastAddr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abySNAP_RFC1042</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abySNAP_Bridgetunnel</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
     <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyEEPROM</span><span class="p">[</span><span class="n">EEP_MAX_CONTEXT_SIZE</span><span class="p">];</span>  <span class="c1">//unsigned long alignment</span></pre></div></td></tr>


<tr id="section-59"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-59">&#182;</a></div><p>Pre-Authentication &amp; PMK cache</p></td><td class="code"><div class="highlight"><pre>    <span class="n">SPMKID</span>                  <span class="n">gsPMKID</span><span class="p">;</span>
    <span class="n">SPMKIDCandidateEvent</span>    <span class="n">gsPMKIDCandidate</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-60"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-60">&#182;</a></div><p>for 802.11h</p></td><td class="code"><div class="highlight"><pre>    <span class="n">bool</span> <span class="n">b11hEnable</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyCountryCode</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span></pre></div></td></tr>


<tr id="section-61"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-61">&#182;</a></div><p>for 802.11h DFS</p></td><td class="code"><div class="highlight"><pre>    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uNumOfMeasureEIDs</span><span class="p">;</span>
    <span class="n">PWLAN_IE_MEASURE_REQ</span>    <span class="n">pCurrMeasureEID</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bMeasureInProgress</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byOrgChannel</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byOrgRCR</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dwOrgMAR0</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dwOrgMAR4</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byBasicMap</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byCCAFraction</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">abyRPIs</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dwRPIs</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
    <span class="n">bool</span> <span class="n">bChannelSwitch</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byNewChannel</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byChannelSwitchCount</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bQuietEnable</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bEnableFirstQuiet</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byQuietStartCount</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uQuietEnqueue</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dwCurrentQuietEndTime</span><span class="p">;</span>
    <span class="n">SQuietControl</span>           <span class="n">sQuiet</span><span class="p">[</span><span class="n">MAX_QUIET_COUNT</span><span class="p">];</span></pre></div></td></tr>


<tr id="section-62"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-62">&#182;</a></div><p>for 802.11h TPC</p></td><td class="code"><div class="highlight"><pre>    <span class="n">bool</span> <span class="n">bCountryInfo5G</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bCountryInfo24G</span><span class="p">;</span>

    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">wBeaconInterval</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-63"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-63">&#182;</a></div><p>WPA supplicant deamon</p></td><td class="code"><div class="highlight"><pre>	<span class="k">struct</span> <span class="n">net_device</span>       <span class="o">*</span><span class="n">wpadev</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">bWPADEVUp</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">sk_buff</span>          <span class="o">*</span><span class="n">skb</span><span class="p">;</span>
<span class="cp">#ifdef WPA_SUPPLICANT_DRIVER_WEXT_SUPPORT</span>
<span class="cm">/*</span>
<span class="cm">        bool bwextstep0;</span>
<span class="cm">        bool bwextstep1;</span>
<span class="cm">        bool bwextstep2;</span>
<span class="cm">        bool bwextstep3;</span>
<span class="cm">        */</span>
        <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">bwextcount</span><span class="p">;</span>
        <span class="n">bool</span> <span class="n">bWPASuppWextEnabled</span><span class="p">;</span>
<span class="cp">#endif</span></pre></div></td></tr>


<tr id="section-64"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-64">&#182;</a></div><p>--</p></td><td class="code"><div class="highlight"><pre><span class="cp">#ifdef HOSTAP</span></pre></div></td></tr>


<tr id="section-65"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-65">&#182;</a></div><p>user space daemon: hostapd, is used for HOSTAP</p></td><td class="code"><div class="highlight"><pre>	<span class="n">bool</span> <span class="n">bEnableHostapd</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">bEnable8021x</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">bEnableHostWEP</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span>       <span class="o">*</span><span class="n">apdev</span><span class="p">;</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">tx_80211</span><span class="p">)(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="cp">#endif</span>
    <span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uChannel</span><span class="p">;</span>
    <span class="n">bool</span> <span class="n">bMACSuspend</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">iw_statistics</span>	<span class="n">wstats</span><span class="p">;</span>		<span class="c1">// wireless stats</span>
    <span class="n">bool</span> <span class="n">bCommit</span><span class="p">;</span>

<span class="p">}</span> <span class="n">DEVICE_INFO</span><span class="p">,</span> <span class="o">*</span><span class="n">PSDevice</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-66"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-66">&#182;</a></div><p>PLICE_DEBUG-></p></td><td class="code"><div class="highlight"><pre> <span class="kr">inline</span>  <span class="k">static</span>	<span class="kt">void</span>   <span class="nf">EnQueue</span> <span class="p">(</span><span class="n">PSDevice</span> <span class="n">pDevice</span><span class="p">,</span><span class="n">PSRxMgmtPacket</span>  <span class="n">pRxMgmtPacket</span><span class="p">)</span>
<span class="p">{</span></pre></div></td></tr>


<tr id="section-67"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-67">&#182;</a></div><p>printk("Enter EnQueue:tail is %d\n",pDevice->rxManeQueue.tail);</p></td><td class="code"><div class="highlight"><pre>	<span class="k">if</span> <span class="p">((</span><span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">rxManeQueue</span><span class="p">.</span><span class="n">tail</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">NUM</span> <span class="o">==</span> <span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">rxManeQueue</span><span class="p">.</span><span class="n">head</span><span class="p">)</span>
	<span class="p">{</span></pre></div></td></tr>


<tr id="section-68"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-68">&#182;</a></div><p>printk("Queue is Full,tail is %d\n",pDevice->rxManeQueue.tail);</p></td><td class="code"><div class="highlight"><pre>		<span class="k">return</span> <span class="p">;</span>
	<span class="p">}</span>
	<span class="k">else</span>
	<span class="p">{</span>
		<span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">rxManeQueue</span><span class="p">.</span><span class="n">tail</span> <span class="o">=</span> <span class="p">(</span><span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">rxManeQueue</span><span class="p">.</span><span class="n">tail</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span> <span class="n">NUM</span><span class="p">;</span>
		<span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">rxManeQueue</span><span class="p">.</span><span class="n">Q</span><span class="p">[</span><span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">rxManeQueue</span><span class="p">.</span><span class="n">tail</span><span class="p">]</span> <span class="o">=</span> <span class="n">pRxMgmtPacket</span><span class="p">;</span>
		<span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">rxManeQueue</span><span class="p">.</span><span class="n">packet_num</span><span class="o">++</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-69"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-69">&#182;</a></div><p>printk("packet num is %d\n",pDevice->rxManeQueue.packet_num);</p></td><td class="code"><div class="highlight"><pre>	<span class="p">}</span>
<span class="p">}</span>




	<span class="kr">inline</span>  <span class="k">static</span>  <span class="n">PSRxMgmtPacket</span> <span class="nf">DeQueue</span> <span class="p">(</span><span class="n">PSDevice</span> <span class="n">pDevice</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">PSRxMgmtPacket</span>  <span class="n">pRxMgmtPacket</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">rxManeQueue</span><span class="p">.</span><span class="n">tail</span> <span class="o">==</span> <span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">rxManeQueue</span><span class="p">.</span><span class="n">head</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">printk</span><span class="p">(</span><span class="s">&quot;Queue is Empty</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">else</span>
	<span class="p">{</span>
		<span class="kt">int</span>	<span class="n">x</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-70"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-70">&#182;</a></div><p>x=pDevice->rxManeQueue.head = (pDevice->rxManeQueue.head+1)%NUM;</p></td><td class="code"><div class="highlight"><pre>		<span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">rxManeQueue</span><span class="p">.</span><span class="n">head</span> <span class="o">=</span> <span class="p">(</span><span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">rxManeQueue</span><span class="p">.</span><span class="n">head</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="n">NUM</span><span class="p">;</span>
		<span class="n">x</span> <span class="o">=</span> <span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">rxManeQueue</span><span class="p">.</span><span class="n">head</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-71"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-71">&#182;</a></div><p>printk("Enter DeQueue:head is %d\n",x);</p></td><td class="code"><div class="highlight"><pre>		<span class="n">pRxMgmtPacket</span> <span class="o">=</span> <span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">rxManeQueue</span><span class="p">.</span><span class="n">Q</span><span class="p">[</span><span class="n">x</span><span class="p">];</span>
		<span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">rxManeQueue</span><span class="p">.</span><span class="n">packet_num</span><span class="o">--</span><span class="p">;</span>
		<span class="k">return</span> <span class="n">pRxMgmtPacket</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span>	<span class="n">InitRxManagementQueue</span><span class="p">(</span><span class="n">PSDevice</span>   <span class="n">pDevice</span><span class="p">);</span></pre></div></td></tr>


<tr id="section-72"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-72">&#182;</a></div><p>PLICE_DEBUG&lt;-</p></td><td class="code"><div class="highlight"><pre><span class="kr">inline</span> <span class="k">static</span> <span class="n">bool</span> <span class="nf">device_get_ip</span><span class="p">(</span><span class="n">PSDevice</span> <span class="n">pInfo</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="n">in_device</span><span class="o">*</span> <span class="n">in_dev</span><span class="o">=</span><span class="p">(</span><span class="k">struct</span> <span class="n">in_device</span><span class="o">*</span><span class="p">)</span> <span class="n">pInfo</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">ip_ptr</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">in_ifaddr</span><span class="o">*</span> <span class="n">ifa</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">in_dev</span><span class="o">!=</span><span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">ifa</span><span class="o">=</span><span class="p">(</span><span class="k">struct</span> <span class="n">in_ifaddr</span><span class="o">*</span><span class="p">)</span> <span class="n">in_dev</span><span class="o">-&gt;</span><span class="n">ifa_list</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">ifa</span><span class="o">!=</span><span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">memcpy</span><span class="p">(</span><span class="n">pInfo</span><span class="o">-&gt;</span><span class="n">abyIPAddr</span><span class="p">,</span><span class="o">&amp;</span><span class="n">ifa</span><span class="o">-&gt;</span><span class="n">ifa_address</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>



<span class="k">static</span> <span class="kr">inline</span> <span class="n">PDEVICE_RD_INFO</span> <span class="nf">alloc_rd_info</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">PDEVICE_RD_INFO</span>  <span class="n">ptr</span><span class="p">;</span>
    <span class="n">ptr</span> <span class="o">=</span> <span class="p">(</span><span class="n">PDEVICE_RD_INFO</span><span class="p">)</span><span class="n">kmalloc</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="k">sizeof</span><span class="p">(</span><span class="n">DEVICE_RD_INFO</span><span class="p">),</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">GFP_ATOMIC</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ptr</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="n">DEVICE_RD_INFO</span><span class="p">));</span>
        <span class="k">return</span> <span class="n">ptr</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">PDEVICE_TD_INFO</span> <span class="nf">alloc_td_info</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">PDEVICE_TD_INFO</span>  <span class="n">ptr</span><span class="p">;</span>
    <span class="n">ptr</span> <span class="o">=</span> <span class="p">(</span><span class="n">PDEVICE_TD_INFO</span><span class="p">)</span><span class="n">kmalloc</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="k">sizeof</span><span class="p">(</span><span class="n">DEVICE_TD_INFO</span><span class="p">),</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">GFP_ATOMIC</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ptr</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="n">DEVICE_TD_INFO</span><span class="p">));</span>
        <span class="k">return</span> <span class="n">ptr</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/*---------------------  Export Functions  --------------------------*/</span>

<span class="n">bool</span> <span class="n">device_dma0_xmit</span><span class="p">(</span><span class="n">PSDevice</span> <span class="n">pDevice</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">uNodeIndex</span><span class="p">);</span>
<span class="n">bool</span> <span class="n">device_alloc_frag_buf</span><span class="p">(</span><span class="n">PSDevice</span> <span class="n">pDevice</span><span class="p">,</span> <span class="n">PSDeFragControlBlock</span> <span class="n">pDeF</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">Config_FileOperation</span><span class="p">(</span><span class="n">PSDevice</span> <span class="n">pDevice</span><span class="p">,</span> <span class="n">bool</span> <span class="n">fwrite</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">Parameter</span><span class="p">);</span>
<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
