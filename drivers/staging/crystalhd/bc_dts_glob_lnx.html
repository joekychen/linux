<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › crystalhd › bc_dts_glob_lnx.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>bc_dts_glob_lnx.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/********************************************************************</span>
<span class="cm"> * Copyright(c) 2006-2009 Broadcom Corporation.</span>
<span class="cm"> *</span>
<span class="cm"> *  Name: bc_dts_glob_lnx.h</span>
<span class="cm"> *</span>
<span class="cm"> *  Description: Wrapper to Windows dts_glob.h for Link-Linux usage.</span>
<span class="cm"> *		 The idea is to define additional Linux related defs</span>
<span class="cm"> *		 in this file to avoid changes to existing Windows</span>
<span class="cm"> *		 glob file.</span>
<span class="cm"> *</span>
<span class="cm"> *  AU</span>
<span class="cm"> *</span>
<span class="cm"> *  HISTORY:</span>
<span class="cm"> *</span>
<span class="cm"> ********************************************************************</span>
<span class="cm"> * This header is free software: you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU Lesser General Public License as published</span>
<span class="cm"> * by the Free Software Foundation, either version 2.1 of the License.</span>
<span class="cm"> *</span>
<span class="cm"> * This header is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU Lesser General Public License for more details.</span>
<span class="cm"> * You should have received a copy of the GNU Lesser General Public License</span>
<span class="cm"> * along with this header.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="cm"> *******************************************************************/</span>

<span class="cp">#ifndef _BC_DTS_GLOB_LNX_H_</span>
<span class="cp">#define _BC_DTS_GLOB_LNX_H_</span>

<span class="cp">#ifdef __LINUX_USER__</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;stdlib.h&gt;</span>
<span class="cp">#include &lt;unistd.h&gt;</span>
<span class="cp">#include &lt;fcntl.h&gt;</span>
<span class="cp">#include &lt;ctype.h&gt;</span>
<span class="cp">#include &lt;string.h&gt;</span>
<span class="cp">#include &lt;errno.h&gt;</span>
<span class="cp">#include &lt;netdb.h&gt;</span>
<span class="cp">#include &lt;sys/time.h&gt;</span>
<span class="cp">#include &lt;time.h&gt;</span>
<span class="cp">#include &lt;arpa/inet.h&gt;</span>
<span class="cp">#include &lt;linux/param.h&gt;</span>
<span class="cp">#include &lt;linux/ioctl.h&gt;</span>
<span class="cp">#include &lt;sys/select.h&gt;</span>

<span class="cp">#define DRVIFLIB_INT_API</span>

<span class="cp">#endif</span>

<span class="cp">#include &quot;crystalhd.h&quot;</span>

<span class="cp">#define CRYSTALHD_API_NAME	&quot;crystalhd&quot;</span>
<span class="cp">#define CRYSTALHD_API_DEV_NAME	&quot;/dev/crystalhd&quot;</span>

<span class="cm">/*</span>
<span class="cm"> * These are SW stack tunable parameters shared</span>
<span class="cm"> * between the driver and the application.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">BC_DTS_GLOBALS</span> <span class="p">{</span>
	<span class="n">BC_MAX_FW_CMD_BUFF_SZ</span>	<span class="o">=</span> <span class="mh">0x40</span><span class="p">,</span>		<span class="cm">/* FW passthrough cmd/rsp buffer size */</span>
	<span class="n">PCI_CFG_SIZE</span>		<span class="o">=</span> <span class="mi">256</span><span class="p">,</span>		<span class="cm">/* PCI config size buffer */</span>
	<span class="n">BC_IOCTL_DATA_POOL_SIZE</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>		<span class="cm">/* BC_IOCTL_DATA Pool size */</span>
	<span class="n">BC_LINK_MAX_OPENS</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>		<span class="cm">/* Maximum simultaneous opens*/</span>
	<span class="n">BC_LINK_MAX_SGLS</span>	<span class="o">=</span> <span class="mi">1024</span><span class="p">,</span>		<span class="cm">/* Maximum SG elements 4M/4K */</span>
	<span class="n">BC_TX_LIST_CNT</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>		<span class="cm">/* Max Tx DMA Rings */</span>
	<span class="n">BC_RX_LIST_CNT</span>		<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>		<span class="cm">/* Max Rx DMA Rings*/</span>
	<span class="n">BC_PROC_OUTPUT_TIMEOUT</span>	<span class="o">=</span> <span class="mi">3000</span><span class="p">,</span>		<span class="cm">/* Milliseconds */</span>
	<span class="n">BC_INFIFO_THRESHOLD</span>	<span class="o">=</span> <span class="mh">0x10000</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_CMD_REG_ACC</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>		<span class="n">Offset</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">Value</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_CMD_DEV_MEM</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>		<span class="n">StartOff</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">NumDwords</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">Rsrd</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* FW Passthrough command structure */</span>
<span class="k">enum</span> <span class="n">bc_fw_cmd_flags</span> <span class="p">{</span>
	<span class="n">BC_FW_CMD_FLAGS_NONE</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">BC_FW_CMD_PIB_QS</span>	<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_FW_CMD</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>		<span class="n">cmd</span><span class="p">[</span><span class="n">BC_MAX_FW_CMD_BUFF_SZ</span><span class="p">];</span>
	<span class="kt">uint32_t</span>		<span class="n">rsp</span><span class="p">[</span><span class="n">BC_MAX_FW_CMD_BUFF_SZ</span><span class="p">];</span>
	<span class="kt">uint32_t</span>		<span class="n">flags</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">add_data</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_HW_TYPE</span> <span class="p">{</span>
	<span class="kt">uint16_t</span>		<span class="n">PciDevId</span><span class="p">;</span>
	<span class="kt">uint16_t</span>		<span class="n">PciVenId</span><span class="p">;</span>
	<span class="kt">uint8_t</span>			<span class="n">HwRev</span><span class="p">;</span>
	<span class="kt">uint8_t</span>			<span class="n">Align</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_PCI_CFG</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>		<span class="n">Size</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">Offset</span><span class="p">;</span>
	<span class="kt">uint8_t</span>			<span class="n">pci_cfg_space</span><span class="p">[</span><span class="n">PCI_CFG_SIZE</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_VERSION_INFO</span> <span class="p">{</span>
	<span class="kt">uint8_t</span>			<span class="n">DriverMajor</span><span class="p">;</span>
	<span class="kt">uint8_t</span>			<span class="n">DriverMinor</span><span class="p">;</span>
	<span class="kt">uint16_t</span>		<span class="n">DriverRevision</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_START_RX_CAP</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>		<span class="n">Rsrd</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">StartDeliveryThsh</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">PauseThsh</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">ResumeThsh</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_FLUSH_RX_CAP</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>		<span class="n">Rsrd</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">bDiscardOnly</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_DTS_STATS</span> <span class="p">{</span>
	<span class="kt">uint8_t</span>			<span class="n">drvRLL</span><span class="p">;</span>
	<span class="kt">uint8_t</span>			<span class="n">drvFLL</span><span class="p">;</span>
	<span class="kt">uint8_t</span>			<span class="n">eosDetected</span><span class="p">;</span>
	<span class="kt">uint8_t</span>			<span class="n">pwr_state_change</span><span class="p">;</span>

	<span class="cm">/* Stats from App */</span>
	<span class="kt">uint32_t</span>		<span class="n">opFrameDropped</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">opFrameCaptured</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">ipSampleCnt</span><span class="p">;</span>
	<span class="kt">uint64_t</span>		<span class="n">ipTotalSize</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">reptdFrames</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">pauseCount</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">pibMisses</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">discCounter</span><span class="p">;</span>

	<span class="cm">/* Stats from Driver */</span>
	<span class="kt">uint32_t</span>		<span class="n">TxFifoBsyCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">intCount</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">DrvIgnIntrCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">DrvTotalFrmDropped</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">DrvTotalHWErrs</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">DrvTotalPIBFlushCnt</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">DrvTotalFrmCaptured</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">DrvPIBMisses</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">DrvPauseTime</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">DrvRepeatedFrms</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">res1</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>

<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_PROC_INPUT</span> <span class="p">{</span>
	<span class="kt">uint8_t</span>			<span class="o">*</span><span class="n">pDmaBuff</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">BuffSz</span><span class="p">;</span>
	<span class="kt">uint8_t</span>			<span class="n">Mapped</span><span class="p">;</span>
	<span class="kt">uint8_t</span>			<span class="n">Encrypted</span><span class="p">;</span>
	<span class="kt">uint8_t</span>			<span class="n">Rsrd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint32_t</span>		<span class="n">DramOffset</span><span class="p">;</span>	<span class="cm">/* For debug use only */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_DEC_YUV_BUFFS</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>		<span class="n">b422Mode</span><span class="p">;</span>
	<span class="kt">uint8_t</span>			<span class="o">*</span><span class="n">YuvBuff</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">YuvBuffSz</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">UVbuffOffset</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">YBuffDoneSz</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">UVBuffDoneSz</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">RefCnt</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">DECOUT_COMPLETION_FLAGS</span> <span class="p">{</span>
	<span class="n">COMP_FLAG_NO_INFO</span>	<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">COMP_FLAG_FMT_CHANGE</span>	<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">COMP_FLAG_PIB_VALID</span>	<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">COMP_FLAG_DATA_VALID</span>	<span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">COMP_FLAG_DATA_ENC</span>	<span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">COMP_FLAG_DATA_BOT</span>	<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_DEC_OUT_BUFF</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">BC_DEC_YUV_BUFFS</span>	<span class="n">OutPutBuffs</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">BC_PIC_INFO_BLOCK</span> <span class="n">PibInfo</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">Flags</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">BadFrCnt</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_NOTIFY_MODE</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>		<span class="n">Mode</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">Rsvr</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_CLOCK</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>		<span class="n">clk</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">Rsvr</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">BC_IOCTL_DATA</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">BC_STATUS</span>		<span class="n">RetSts</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">IoctlDataSz</span><span class="p">;</span>
	<span class="kt">uint32_t</span>		<span class="n">Timeout</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">BC_CMD_REG_ACC</span>	<span class="n">regAcc</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">BC_CMD_DEV_MEM</span>	<span class="n">devMem</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">BC_FW_CMD</span>	<span class="n">fwCmd</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">BC_HW_TYPE</span>	<span class="n">hwType</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">BC_PCI_CFG</span>	<span class="n">pciCfg</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">BC_VERSION_INFO</span>	<span class="n">VerInfo</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">BC_PROC_INPUT</span>	<span class="n">ProcInput</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">BC_DEC_YUV_BUFFS</span>	<span class="n">RxBuffs</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">BC_DEC_OUT_BUFF</span>	<span class="n">DecOutData</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">BC_START_RX_CAP</span>	<span class="n">RxCap</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">BC_FLUSH_RX_CAP</span>	<span class="n">FlushRxCap</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">BC_DTS_STATS</span>	<span class="n">drvStat</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">BC_NOTIFY_MODE</span>	<span class="n">NotifyMode</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">BC_CLOCK</span>		<span class="n">clockValue</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">u</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">_BC_IOCTL_DATA</span>	<span class="o">*</span><span class="n">next</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">BC_DRV_CMD</span> <span class="p">{</span>
	<span class="n">DRV_CMD_VERSION</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/* Get SW version */</span>
	<span class="n">DRV_CMD_GET_HWTYPE</span><span class="p">,</span>	<span class="cm">/* Get HW version and type Dozer/Tank */</span>
	<span class="n">DRV_CMD_REG_RD</span><span class="p">,</span>		<span class="cm">/* Read Device Register */</span>
	<span class="n">DRV_CMD_REG_WR</span><span class="p">,</span>		<span class="cm">/* Write Device Register */</span>
	<span class="n">DRV_CMD_FPGA_RD</span><span class="p">,</span>	<span class="cm">/* Read FPGA Register */</span>
	<span class="n">DRV_CMD_FPGA_WR</span><span class="p">,</span>	<span class="cm">/* Wrtie FPGA Reister */</span>
	<span class="n">DRV_CMD_MEM_RD</span><span class="p">,</span>		<span class="cm">/* Read Device Memory */</span>
	<span class="n">DRV_CMD_MEM_WR</span><span class="p">,</span>		<span class="cm">/* Write Device Memory */</span>
	<span class="n">DRV_CMD_RD_PCI_CFG</span><span class="p">,</span>	<span class="cm">/* Read PCI Config Space */</span>
	<span class="n">DRV_CMD_WR_PCI_CFG</span><span class="p">,</span>	<span class="cm">/* Write the PCI Configuration Space*/</span>
	<span class="n">DRV_CMD_FW_DOWNLOAD</span><span class="p">,</span>	<span class="cm">/* Download Firmware */</span>
	<span class="n">DRV_ISSUE_FW_CMD</span><span class="p">,</span>	<span class="cm">/* Issue FW Cmd (pass through mode) */</span>
	<span class="n">DRV_CMD_PROC_INPUT</span><span class="p">,</span>	<span class="cm">/* Process Input Sample */</span>
	<span class="n">DRV_CMD_ADD_RXBUFFS</span><span class="p">,</span>	<span class="cm">/* Add Rx side buffers to driver pool */</span>
	<span class="n">DRV_CMD_FETCH_RXBUFF</span><span class="p">,</span>	<span class="cm">/* Get Rx DMAed buffer */</span>
	<span class="n">DRV_CMD_START_RX_CAP</span><span class="p">,</span>	<span class="cm">/* Start Rx Buffer Capture */</span>
	<span class="n">DRV_CMD_FLUSH_RX_CAP</span><span class="p">,</span>	<span class="cm">/* Stop the capture for now...we will enhance this later*/</span>
	<span class="n">DRV_CMD_GET_DRV_STAT</span><span class="p">,</span>	<span class="cm">/* Get Driver Internal Statistics */</span>
	<span class="n">DRV_CMD_RST_DRV_STAT</span><span class="p">,</span>	<span class="cm">/* Reset Driver Internal Statistics */</span>
	<span class="n">DRV_CMD_NOTIFY_MODE</span><span class="p">,</span>	<span class="cm">/* Notify the Mode to driver in which the application is Operating*/</span>
	<span class="n">DRV_CMD_CHANGE_CLOCK</span><span class="p">,</span>	<span class="cm">/* Change the core clock to either save power or improve performance */</span>

	<span class="cm">/* MUST be the last one.. */</span>
	<span class="n">DRV_CMD_END</span><span class="p">,</span>			<span class="cm">/* End of the List.. */</span>
<span class="p">};</span>

<span class="cp">#define BC_IOC_BASE		&#39;b&#39;</span>
<span class="cp">#define BC_IOC_VOID		_IOC_NONE</span>
<span class="cp">#define BC_IOC_IOWR(nr, type)	_IOWR(BC_IOC_BASE, nr, type)</span>
<span class="cp">#define BC_IOCTL_MB		struct BC_IOCTL_DATA</span>

<span class="cp">#define	BCM_IOC_GET_VERSION	BC_IOC_IOWR(DRV_CMD_VERSION, BC_IOCTL_MB)</span>
<span class="cp">#define	BCM_IOC_GET_HWTYPE	BC_IOC_IOWR(DRV_CMD_GET_HWTYPE, BC_IOCTL_MB)</span>
<span class="cp">#define	BCM_IOC_REG_RD		BC_IOC_IOWR(DRV_CMD_REG_RD, BC_IOCTL_MB)</span>
<span class="cp">#define	BCM_IOC_REG_WR		BC_IOC_IOWR(DRV_CMD_REG_WR, BC_IOCTL_MB)</span>
<span class="cp">#define	BCM_IOC_MEM_RD		BC_IOC_IOWR(DRV_CMD_MEM_RD, BC_IOCTL_MB)</span>
<span class="cp">#define	BCM_IOC_MEM_WR		BC_IOC_IOWR(DRV_CMD_MEM_WR, BC_IOCTL_MB)</span>
<span class="cp">#define BCM_IOC_FPGA_RD		BC_IOC_IOWR(DRV_CMD_FPGA_RD, BC_IOCTL_MB)</span>
<span class="cp">#define BCM_IOC_FPGA_WR		BC_IOC_IOWR(DRV_CMD_FPGA_WR, BC_IOCTL_MB)</span>
<span class="cp">#define	BCM_IOC_RD_PCI_CFG	BC_IOC_IOWR(DRV_CMD_RD_PCI_CFG, BC_IOCTL_MB)</span>
<span class="cp">#define	BCM_IOC_WR_PCI_CFG	BC_IOC_IOWR(DRV_CMD_WR_PCI_CFG, BC_IOCTL_MB)</span>
<span class="cp">#define BCM_IOC_PROC_INPUT	BC_IOC_IOWR(DRV_CMD_PROC_INPUT, BC_IOCTL_MB)</span>
<span class="cp">#define BCM_IOC_ADD_RXBUFFS	BC_IOC_IOWR(DRV_CMD_ADD_RXBUFFS, BC_IOCTL_MB)</span>
<span class="cp">#define BCM_IOC_FETCH_RXBUFF	BC_IOC_IOWR(DRV_CMD_FETCH_RXBUFF, BC_IOCTL_MB)</span>
<span class="cp">#define	BCM_IOC_FW_CMD		BC_IOC_IOWR(DRV_ISSUE_FW_CMD, BC_IOCTL_MB)</span>
<span class="cp">#define	BCM_IOC_START_RX_CAP	BC_IOC_IOWR(DRV_CMD_START_RX_CAP, BC_IOCTL_MB)</span>
<span class="cp">#define BCM_IOC_FLUSH_RX_CAP	BC_IOC_IOWR(DRV_CMD_FLUSH_RX_CAP, BC_IOCTL_MB)</span>
<span class="cp">#define BCM_IOC_GET_DRV_STAT	BC_IOC_IOWR(DRV_CMD_GET_DRV_STAT, BC_IOCTL_MB)</span>
<span class="cp">#define BCM_IOC_RST_DRV_STAT	BC_IOC_IOWR(DRV_CMD_RST_DRV_STAT, BC_IOCTL_MB)</span>
<span class="cp">#define BCM_IOC_NOTIFY_MODE	BC_IOC_IOWR(DRV_CMD_NOTIFY_MODE, BC_IOCTL_MB)</span>
<span class="cp">#define	BCM_IOC_FW_DOWNLOAD	BC_IOC_IOWR(DRV_CMD_FW_DOWNLOAD, BC_IOCTL_MB)</span>
<span class="cp">#define BCM_IOC_CHG_CLK		BC_IOC_IOWR(DRV_CMD_CHANGE_CLOCK, BC_IOCTL_MB)</span>
<span class="cp">#define	BCM_IOC_END		BC_IOC_VOID</span>

<span class="cm">/* Wrapper for main IOCTL data */</span>
<span class="k">struct</span> <span class="n">crystalhd_ioctl_data</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">BC_IOCTL_DATA</span>	<span class="n">udata</span><span class="p">;</span>		<span class="cm">/* IOCTL from App..*/</span>
	<span class="kt">uint32_t</span>		<span class="n">u_id</span><span class="p">;</span>		<span class="cm">/* Driver specific user ID */</span>
	<span class="kt">uint32_t</span>		<span class="n">cmd</span><span class="p">;</span>		<span class="cm">/* Cmd ID for driver&#39;s use. */</span>
	<span class="kt">void</span>			<span class="o">*</span><span class="n">add_cdata</span><span class="p">;</span>	<span class="cm">/* Additional command specific data..*/</span>
	<span class="kt">uint32_t</span>		<span class="n">add_cdata_sz</span><span class="p">;</span>	<span class="cm">/* Additional command specific data size */</span>
	<span class="k">struct</span> <span class="n">crystalhd_ioctl_data</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>	<span class="cm">/* List/Fifo management */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">crystalhd_kmod_ver</span> <span class="p">{</span>
	<span class="n">crystalhd_kmod_major</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">crystalhd_kmod_minor</span>	<span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">crystalhd_kmod_rev</span>	<span class="o">=</span> <span class="mi">27</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
