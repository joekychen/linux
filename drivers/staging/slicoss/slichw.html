<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › slicoss › slichw.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>slichw.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/**************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (c) 2000-2002 Alacritech, Inc.  All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> * Redistribution and use in source and binary forms, with or without</span>
<span class="cm"> * modification, are permitted provided that the following conditions</span>
<span class="cm"> * are met:</span>
<span class="cm"> *</span>
<span class="cm"> * 1. Redistributions of source code must retain the above copyright</span>
<span class="cm"> *    notice, this list of conditions and the following disclaimer.</span>
<span class="cm"> * 2. Redistributions in binary form must reproduce the above</span>
<span class="cm"> *    copyright notice, this list of conditions and the following</span>
<span class="cm"> *    disclaimer in the documentation and/or other materials provided</span>
<span class="cm"> *    with the distribution.</span>
<span class="cm"> *</span>
<span class="cm"> * THIS SOFTWARE IS PROVIDED BY ALACRITECH, INC. ``AS IS&#39;&#39; AND ANY</span>
<span class="cm"> * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<span class="cm"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR</span>
<span class="cm"> * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL ALACRITECH, INC. OR</span>
<span class="cm"> * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<span class="cm"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<span class="cm"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF</span>
<span class="cm"> * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</span>
<span class="cm"> * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,</span>
<span class="cm"> * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT</span>
<span class="cm"> * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</span>
<span class="cm"> * SUCH DAMAGE.</span>
<span class="cm"> *</span>
<span class="cm"> * The views and conclusions contained in the software and documentation</span>
<span class="cm"> * are those of the authors and should not be interpreted as representing</span>
<span class="cm"> * official policies, either expressed or implied, of Alacritech, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> **************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> * FILENAME: slichw.h</span>
<span class="cm"> *</span>
<span class="cm"> * This header file contains definitions that are common to our hardware.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __SLICHW_H__</span>
<span class="cp">#define __SLICHW_H__</span>

<span class="cp">#define PCI_VENDOR_ID_ALACRITECH	0x139A</span>
<span class="cp">#define SLIC_1GB_DEVICE_ID		0x0005</span>
<span class="cp">#define SLIC_2GB_DEVICE_ID		0x0007	</span><span class="cm">/* Oasis Device ID */</span><span class="cp"></span>

<span class="cp">#define SLIC_1GB_CICADA_SUBSYS_ID	0x0008</span>

<span class="cp">#define SLIC_NBR_MACS		4</span>

<span class="cp">#define SLIC_RCVBUF_SIZE	2048</span>
<span class="cp">#define SLIC_RCVBUF_HEADSIZE	34</span>
<span class="cp">#define SLIC_RCVBUF_TAILSIZE	0</span>
<span class="cp">#define SLIC_RCVBUF_DATASIZE	(SLIC_RCVBUF_SIZE -		\</span>
<span class="cp">				 (SLIC_RCVBUF_HEADSIZE +	\</span>
<span class="cp">				  SLIC_RCVBUF_TAILSIZE))</span>

<span class="cp">#define VGBSTAT_XPERR		0x40000000</span>
<span class="cp">#define VGBSTAT_XERRSHFT	25</span>
<span class="cp">#define VGBSTAT_XCSERR		0x23</span>
<span class="cp">#define VGBSTAT_XUFLOW		0x22</span>
<span class="cp">#define VGBSTAT_XHLEN		0x20</span>
<span class="cp">#define VGBSTAT_NETERR		0x01000000</span>
<span class="cp">#define VGBSTAT_NERRSHFT	16</span>
<span class="cp">#define VGBSTAT_NERRMSK		0x1ff</span>
<span class="cp">#define VGBSTAT_NCSERR		0x103</span>
<span class="cp">#define VGBSTAT_NUFLOW		0x102</span>
<span class="cp">#define VGBSTAT_NHLEN		0x100</span>
<span class="cp">#define VGBSTAT_LNKERR		0x00000080</span>
<span class="cp">#define VGBSTAT_LERRMSK		0xff</span>
<span class="cp">#define VGBSTAT_LDEARLY		0x86</span>
<span class="cp">#define VGBSTAT_LBOFLO		0x85</span>
<span class="cp">#define VGBSTAT_LCODERR		0x84</span>
<span class="cp">#define VGBSTAT_LDBLNBL		0x83</span>
<span class="cp">#define VGBSTAT_LCRCERR		0x82</span>
<span class="cp">#define VGBSTAT_LOFLO		0x81</span>
<span class="cp">#define VGBSTAT_LUFLO		0x80</span>
<span class="cp">#define IRHDDR_FLEN_MSK		0x0000ffff</span>
<span class="cp">#define IRHDDR_SVALID		0x80000000</span>
<span class="cp">#define IRHDDR_ERR		0x10000000</span>
<span class="cp">#define VRHSTAT_802OE		0x80000000</span>
<span class="cp">#define VRHSTAT_TPOFLO		0x10000000</span>
<span class="cp">#define VRHSTATB_802UE		0x80000000</span>
<span class="cp">#define VRHSTATB_RCVE		0x40000000</span>
<span class="cp">#define VRHSTATB_BUFF		0x20000000</span>
<span class="cp">#define VRHSTATB_CARRE		0x08000000</span>
<span class="cp">#define VRHSTATB_LONGE		0x02000000</span>
<span class="cp">#define VRHSTATB_PREA		0x01000000</span>
<span class="cp">#define VRHSTATB_CRC		0x00800000</span>
<span class="cp">#define VRHSTATB_DRBL		0x00400000</span>
<span class="cp">#define VRHSTATB_CODE		0x00200000</span>
<span class="cp">#define VRHSTATB_TPCSUM		0x00100000</span>
<span class="cp">#define VRHSTATB_TPHLEN		0x00080000</span>
<span class="cp">#define VRHSTATB_IPCSUM		0x00040000</span>
<span class="cp">#define VRHSTATB_IPLERR		0x00020000</span>
<span class="cp">#define VRHSTATB_IPHERR		0x00010000</span>
<span class="cp">#define SLIC_MAX64_BCNT		23</span>
<span class="cp">#define SLIC_MAX32_BCNT		26</span>
<span class="cp">#define IHCMD_XMT_REQ		0x01</span>
<span class="cp">#define IHFLG_IFSHFT		2</span>
<span class="cp">#define SLIC_RSPBUF_SIZE	32</span>

<span class="cp">#define SLIC_RESET_MAGIC	0xDEAD</span>
<span class="cp">#define ICR_INT_OFF		0</span>
<span class="cp">#define ICR_INT_ON		1</span>
<span class="cp">#define ICR_INT_MASK		2</span>

<span class="cp">#define ISR_ERR			0x80000000</span>
<span class="cp">#define ISR_RCV			0x40000000</span>
<span class="cp">#define ISR_CMD			0x20000000</span>
<span class="cp">#define ISR_IO			0x60000000</span>
<span class="cp">#define ISR_UPC			0x10000000</span>
<span class="cp">#define ISR_LEVENT		0x08000000</span>
<span class="cp">#define ISR_RMISS		0x02000000</span>
<span class="cp">#define ISR_UPCERR		0x01000000</span>
<span class="cp">#define ISR_XDROP		0x00800000</span>
<span class="cp">#define ISR_UPCBSY		0x00020000</span>
<span class="cp">#define ISR_EVMSK		0xffff0000</span>
<span class="cp">#define ISR_PINGMASK		0x00700000</span>
<span class="cp">#define ISR_PINGDSMASK		0x00710000</span>
<span class="cp">#define ISR_UPCMASK		0x11000000</span>
<span class="cp">#define SLIC_WCS_START		0x80000000</span>
<span class="cp">#define SLIC_WCS_COMPARE	0x40000000</span>
<span class="cp">#define SLIC_RCVWCS_BEGIN	0x40000000</span>
<span class="cp">#define SLIC_RCVWCS_FINISH	0x80000000</span>
<span class="cp">#define SLIC_PM_MAXPATTERNS	6</span>
<span class="cp">#define SLIC_PM_PATTERNSIZE	128</span>
<span class="cp">#define SLIC_PMCAPS_WAKEONLAN	0x00000001</span>
<span class="cp">#define MIICR_REG_PCR		0x00000000</span>
<span class="cp">#define MIICR_REG_4		0x00040000</span>
<span class="cp">#define MIICR_REG_9		0x00090000</span>
<span class="cp">#define MIICR_REG_16		0x00100000</span>
<span class="cp">#define PCR_RESET		0x8000</span>
<span class="cp">#define PCR_POWERDOWN		0x0800</span>
<span class="cp">#define PCR_SPEED_100		0x2000</span>
<span class="cp">#define PCR_SPEED_1000		0x0040</span>
<span class="cp">#define PCR_AUTONEG		0x1000</span>
<span class="cp">#define PCR_AUTONEG_RST		0x0200</span>
<span class="cp">#define PCR_DUPLEX_FULL		0x0100</span>
<span class="cp">#define PSR_LINKUP		0x0004</span>

<span class="cp">#define PAR_ADV100FD		0x0100</span>
<span class="cp">#define PAR_ADV100HD		0x0080</span>
<span class="cp">#define PAR_ADV10FD		0x0040</span>
<span class="cp">#define PAR_ADV10HD		0x0020</span>
<span class="cp">#define PAR_ASYMPAUSE		0x0C00</span>
<span class="cp">#define PAR_802_3		0x0001</span>

<span class="cp">#define PAR_ADV1000XFD		0x0020</span>
<span class="cp">#define PAR_ADV1000XHD		0x0040</span>
<span class="cp">#define PAR_ASYMPAUSE_FIBER	0x0180</span>

<span class="cp">#define PGC_ADV1000FD		0x0200</span>
<span class="cp">#define PGC_ADV1000HD		0x0100</span>
<span class="cp">#define SEEQ_LINKFAIL		0x4000</span>
<span class="cp">#define SEEQ_SPEED		0x0080</span>
<span class="cp">#define SEEQ_DUPLEX		0x0040</span>
<span class="cp">#define TDK_DUPLEX		0x0800</span>
<span class="cp">#define TDK_SPEED		0x0400</span>
<span class="cp">#define MRV_REG16_XOVERON	0x0068</span>
<span class="cp">#define MRV_REG16_XOVEROFF	0x0008</span>
<span class="cp">#define MRV_SPEED_1000		0x8000</span>
<span class="cp">#define MRV_SPEED_100		0x4000</span>
<span class="cp">#define MRV_SPEED_10		0x0000</span>
<span class="cp">#define MRV_FULLDUPLEX		0x2000</span>
<span class="cp">#define MRV_LINKUP		0x0400</span>

<span class="cp">#define GIG_LINKUP		0x0001</span>
<span class="cp">#define GIG_FULLDUPLEX		0x0002</span>
<span class="cp">#define GIG_SPEED_MASK		0x000C</span>
<span class="cp">#define GIG_SPEED_1000		0x0008</span>
<span class="cp">#define GIG_SPEED_100		0x0004</span>
<span class="cp">#define GIG_SPEED_10		0x0000</span>

<span class="cp">#define MCR_RESET		0x80000000</span>
<span class="cp">#define MCR_CRCEN		0x40000000</span>
<span class="cp">#define MCR_FULLD		0x10000000</span>
<span class="cp">#define MCR_PAD			0x02000000</span>
<span class="cp">#define MCR_RETRYLATE		0x01000000</span>
<span class="cp">#define MCR_BOL_SHIFT		21</span>
<span class="cp">#define MCR_IPG1_SHIFT		14</span>
<span class="cp">#define MCR_IPG2_SHIFT		7</span>
<span class="cp">#define MCR_IPG3_SHIFT		0</span>
<span class="cp">#define GMCR_RESET		0x80000000</span>
<span class="cp">#define GMCR_GBIT		0x20000000</span>
<span class="cp">#define GMCR_FULLD		0x10000000</span>
<span class="cp">#define GMCR_GAPBB_SHIFT	14</span>
<span class="cp">#define GMCR_GAPR1_SHIFT	7</span>
<span class="cp">#define GMCR_GAPR2_SHIFT	0</span>
<span class="cp">#define GMCR_GAPBB_1000		0x60</span>
<span class="cp">#define GMCR_GAPR1_1000		0x2C</span>
<span class="cp">#define GMCR_GAPR2_1000		0x40</span>
<span class="cp">#define GMCR_GAPBB_100		0x70</span>
<span class="cp">#define GMCR_GAPR1_100		0x2C</span>
<span class="cp">#define GMCR_GAPR2_100		0x40</span>
<span class="cp">#define XCR_RESET		0x80000000</span>
<span class="cp">#define XCR_XMTEN		0x40000000</span>
<span class="cp">#define XCR_PAUSEEN		0x20000000</span>
<span class="cp">#define XCR_LOADRNG		0x10000000</span>
<span class="cp">#define RCR_RESET		0x80000000</span>
<span class="cp">#define RCR_RCVEN		0x40000000</span>
<span class="cp">#define RCR_RCVALL		0x20000000</span>
<span class="cp">#define RCR_RCVBAD		0x10000000</span>
<span class="cp">#define RCR_CTLEN		0x08000000</span>
<span class="cp">#define RCR_ADDRAEN		0x02000000</span>
<span class="cp">#define GXCR_RESET		0x80000000</span>
<span class="cp">#define GXCR_XMTEN		0x40000000</span>
<span class="cp">#define GXCR_PAUSEEN		0x20000000</span>
<span class="cp">#define GRCR_RESET		0x80000000</span>
<span class="cp">#define GRCR_RCVEN		0x40000000</span>
<span class="cp">#define GRCR_RCVALL		0x20000000</span>
<span class="cp">#define GRCR_RCVBAD		0x10000000</span>
<span class="cp">#define GRCR_CTLEN		0x08000000</span>
<span class="cp">#define GRCR_ADDRAEN		0x02000000</span>
<span class="cp">#define GRCR_HASHSIZE_SHIFT	17</span>
<span class="cp">#define GRCR_HASHSIZE		14</span>

<span class="cp">#define SLIC_EEPROM_ID		0xA5A5</span>
<span class="cp">#define SLIC_SRAM_SIZE2GB	(64 * 1024)</span>
<span class="cp">#define SLIC_SRAM_SIZE1GB	(32 * 1024)</span>
<span class="cp">#define SLIC_HOSTID_DEFAULT	0xFFFF		</span><span class="cm">/* uninitialized hostid */</span><span class="cp"></span>
<span class="cp">#define SLIC_NBR_MACS		4</span>

<span class="k">struct</span> <span class="n">slic_rcvbuf</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">pad1</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">pad2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pad3</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pad4</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">buffer</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">length</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pad5</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">pad6</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data</span><span class="p">[</span><span class="n">SLIC_RCVBUF_DATASIZE</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">slic_hddr_wds</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u32</span> <span class="n">frame_status</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">frame_status_b</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">time_stamp</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">checksum</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">hdrs_14port</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u32</span> <span class="n">frame_status</span><span class="p">;</span>
			<span class="n">u16</span> <span class="n">ByteCnt</span><span class="p">;</span>
			<span class="n">u16</span> <span class="n">TpChksum</span><span class="p">;</span>
			<span class="n">u16</span> <span class="n">CtxHash</span><span class="p">;</span>
			<span class="n">u16</span> <span class="n">MacHash</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">BufLnk</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">hdrs_gbit</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">u0</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define frame_status14		u0.hdrs_14port.frame_status</span>
<span class="cp">#define frame_status_b14	u0.hdrs_14port.frame_status_b</span>
<span class="cp">#define frame_statusGB		u0.hdrs_gbit.frame_status</span>

<span class="k">struct</span> <span class="n">slic_host64sg</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">paddrl</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">paddrh</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">length</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">slic_host64_cmd</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">hosthandle</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">RSVD</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">command</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">flags</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="n">u16</span> <span class="n">rsv1</span><span class="p">;</span>
		<span class="n">u16</span> <span class="n">rsv2</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">u0</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u32</span> <span class="n">totlen</span><span class="p">;</span>
			<span class="k">struct</span> <span class="n">slic_host64sg</span> <span class="n">bufs</span><span class="p">[</span><span class="n">SLIC_MAX64_BCNT</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">slic_buffers</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">u</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">slic_rspbuf</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">hosthandle</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pad0</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pad1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pad2</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">slic_regs</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">slic_reset</span><span class="p">;</span>	<span class="cm">/* Reset Register */</span>
	<span class="n">u32</span>	<span class="n">pad0</span><span class="p">;</span>

	<span class="n">u32</span>	<span class="n">slic_icr</span><span class="p">;</span>	<span class="cm">/* Interrupt Control Register */</span>
	<span class="n">u32</span>	<span class="n">pad2</span><span class="p">;</span>
<span class="cp">#define SLIC_ICR		0x0008</span>

	<span class="n">u32</span>	<span class="n">slic_isp</span><span class="p">;</span>	<span class="cm">/* Interrupt status pointer */</span>
	<span class="n">u32</span>	<span class="n">pad1</span><span class="p">;</span>
<span class="cp">#define SLIC_ISP		0x0010</span>

	<span class="n">u32</span>	<span class="n">slic_isr</span><span class="p">;</span>	<span class="cm">/* Interrupt status */</span>
	<span class="n">u32</span>	<span class="n">pad3</span><span class="p">;</span>
<span class="cp">#define SLIC_ISR		0x0018</span>

	<span class="n">u32</span>	<span class="n">slic_hbar</span><span class="p">;</span>	<span class="cm">/* Header buffer address reg */</span>
	<span class="n">u32</span>	<span class="n">pad4</span><span class="p">;</span>
	<span class="cm">/* 31-8 - phy addr of set of contiguous hdr buffers</span>
<span class="cm">	    7-0 - number of buffers passed</span>
<span class="cm">	   Buffers are 256 bytes long on 256-byte boundaries. */</span>
<span class="cp">#define SLIC_HBAR		0x0020</span>
<span class="cp">#define SLIC_HBAR_CNT_MSK	0x000000FF</span>

	<span class="n">u32</span>	<span class="n">slic_dbar</span><span class="p">;</span>	<span class="cm">/* Data buffer handle &amp; address reg */</span>
	<span class="n">u32</span>	<span class="n">pad5</span><span class="p">;</span>

	<span class="cm">/* 4 sets of registers; Buffers are 2K bytes long 2 per 4K page. */</span>
<span class="cp">#define SLIC_DBAR		0x0028</span>
<span class="cp">#define SLIC_DBAR_SIZE		2048</span>

	<span class="n">u32</span>	<span class="n">slic_cbar</span><span class="p">;</span>	<span class="cm">/* Xmt Cmd buf addr regs.*/</span>
	<span class="cm">/* 1 per XMT interface</span>
<span class="cm">	   31-5 - phy addr of host command buffer</span>
<span class="cm">	    4-0 - length of cmd in multiples of 32 bytes</span>
<span class="cm">	   Buffers are 32 bytes up to 512 bytes long */</span>
<span class="cp">#define SLIC_CBAR		0x0030</span>
<span class="cp">#define SLIC_CBAR_LEN_MSK	0x0000001F</span>
<span class="cp">#define SLIC_CBAR_ALIGN		0x00000020</span>

	<span class="n">u32</span>	<span class="n">slic_wcs</span><span class="p">;</span>	<span class="cm">/* write control store*/</span>
<span class="cp">#define	SLIC_WCS		0x0034</span>
<span class="cp">#define SLIC_WCS_START		0x80000000	</span><span class="cm">/*Start the SLIC (Jump to WCS)*/</span><span class="cp"></span>
<span class="cp">#define SLIC_WCS_COMPARE	0x40000000	</span><span class="cm">/* Compare with value in WCS*/</span><span class="cp"></span>

	<span class="n">u32</span>	<span class="n">slic_rbar</span><span class="p">;</span>	<span class="cm">/* Response buffer address reg.*/</span>
	<span class="n">u32</span>	<span class="n">pad7</span><span class="p">;</span>
	 <span class="cm">/*31-8 - phy addr of set of contiguous response buffers</span>
<span class="cm">	  7-0 - number of buffers passed</span>
<span class="cm">	 Buffers are 32 bytes long on 32-byte boundaries.*/</span>
<span class="cp">#define SLIC_RBAR		0x0038</span>
<span class="cp">#define SLIC_RBAR_CNT_MSK	0x000000FF</span>
<span class="cp">#define SLIC_RBAR_SIZE		32</span>

	<span class="n">u32</span>	<span class="n">slic_stats</span><span class="p">;</span>	<span class="cm">/* read statistics (UPR) */</span>
	<span class="n">u32</span>	<span class="n">pad8</span><span class="p">;</span>
<span class="cp">#define	SLIC_RSTAT		0x0040</span>

	<span class="n">u32</span>	<span class="n">slic_rlsr</span><span class="p">;</span>	<span class="cm">/* read link status */</span>
	<span class="n">u32</span>	<span class="n">pad9</span><span class="p">;</span>
<span class="cp">#define SLIC_LSTAT		0x0048</span>

	<span class="n">u32</span>	<span class="n">slic_wmcfg</span><span class="p">;</span>	<span class="cm">/* Write Mac Config */</span>
	<span class="n">u32</span>	<span class="n">pad10</span><span class="p">;</span>
<span class="cp">#define	SLIC_WMCFG		0x0050</span>

	<span class="n">u32</span>	<span class="n">slic_wphy</span><span class="p">;</span>	<span class="cm">/* Write phy register */</span>
	<span class="n">u32</span>	<span class="n">pad11</span><span class="p">;</span>
<span class="cp">#define SLIC_WPHY		0x0058</span>

	<span class="n">u32</span>	<span class="n">slic_rcbar</span><span class="p">;</span>	<span class="cm">/* Rcv Cmd buf addr reg */</span>
	<span class="n">u32</span>	<span class="n">pad12</span><span class="p">;</span>
<span class="cp">#define	SLIC_RCBAR		0x0060</span>

	<span class="n">u32</span>	<span class="n">slic_rconfig</span><span class="p">;</span>	<span class="cm">/* Read SLIC Config*/</span>
	<span class="n">u32</span>	<span class="n">pad13</span><span class="p">;</span>
<span class="cp">#define SLIC_RCONFIG	0x0068</span>

	<span class="n">u32</span>	<span class="n">slic_intagg</span><span class="p">;</span>	<span class="cm">/* Interrupt aggregation time */</span>
	<span class="n">u32</span>	<span class="n">pad14</span><span class="p">;</span>
<span class="cp">#define SLIC_INTAGG		0x0070</span>

	<span class="n">u32</span>	<span class="n">slic_wxcfg</span><span class="p">;</span>	<span class="cm">/* Write XMIT config reg*/</span>
	<span class="n">u32</span>	<span class="n">pad16</span><span class="p">;</span>
<span class="cp">#define	SLIC_WXCFG		0x0078</span>

	<span class="n">u32</span>	<span class="n">slic_wrcfg</span><span class="p">;</span>	<span class="cm">/* Write RCV config reg*/</span>
	<span class="n">u32</span>	<span class="n">pad17</span><span class="p">;</span>
<span class="cp">#define	SLIC_WRCFG		0x0080</span>

	<span class="n">u32</span>	<span class="n">slic_wraddral</span><span class="p">;</span>	<span class="cm">/* Write rcv addr a low*/</span>
	<span class="n">u32</span>	<span class="n">pad18</span><span class="p">;</span>
<span class="cp">#define	SLIC_WRADDRAL	0x0088</span>

	<span class="n">u32</span>	<span class="n">slic_wraddrah</span><span class="p">;</span>	<span class="cm">/* Write rcv addr a high*/</span>
	<span class="n">u32</span>	<span class="n">pad19</span><span class="p">;</span>
<span class="cp">#define	SLIC_WRADDRAH	0x0090</span>

	<span class="n">u32</span>	<span class="n">slic_wraddrbl</span><span class="p">;</span>	<span class="cm">/* Write rcv addr b low*/</span>
	<span class="n">u32</span>	<span class="n">pad20</span><span class="p">;</span>
<span class="cp">#define	SLIC_WRADDRBL	0x0098</span>

	<span class="n">u32</span>	<span class="n">slic_wraddrbh</span><span class="p">;</span>	<span class="cm">/* Write rcv addr b high*/</span>
	<span class="n">u32</span>		<span class="n">pad21</span><span class="p">;</span>
<span class="cp">#define	SLIC_WRADDRBH	0x00a0</span>

	<span class="n">u32</span>	<span class="n">slic_mcastlow</span><span class="p">;</span>	<span class="cm">/* Low bits of mcast mask*/</span>
	<span class="n">u32</span>		<span class="n">pad22</span><span class="p">;</span>
<span class="cp">#define	SLIC_MCASTLOW	0x00a8</span>

	<span class="n">u32</span>	<span class="n">slic_mcasthigh</span><span class="p">;</span>	<span class="cm">/* High bits of mcast mask*/</span>
	<span class="n">u32</span>		<span class="n">pad23</span><span class="p">;</span>
<span class="cp">#define	SLIC_MCASTHIGH	0x00b0</span>

	<span class="n">u32</span>	<span class="n">slic_ping</span><span class="p">;</span>	<span class="cm">/* Ping the card*/</span>
	<span class="n">u32</span>	<span class="n">pad24</span><span class="p">;</span>
<span class="cp">#define SLIC_PING		0x00b8</span>

	<span class="n">u32</span>	<span class="n">slic_dump_cmd</span><span class="p">;</span>	<span class="cm">/* Dump command */</span>
	<span class="n">u32</span>	<span class="n">pad25</span><span class="p">;</span>
<span class="cp">#define SLIC_DUMP_CMD	0x00c0</span>

	<span class="n">u32</span>	<span class="n">slic_dump_data</span><span class="p">;</span>	<span class="cm">/* Dump data pointer */</span>
	<span class="n">u32</span>	<span class="n">pad26</span><span class="p">;</span>
<span class="cp">#define SLIC_DUMP_DATA	0x00c8</span>

	<span class="n">u32</span>	<span class="n">slic_pcistatus</span><span class="p">;</span>	<span class="cm">/* Read card&#39;s pci_status register */</span>
	<span class="n">u32</span>	<span class="n">pad27</span><span class="p">;</span>
<span class="cp">#define	SLIC_PCISTATUS	0x00d0</span>

	<span class="n">u32</span>	<span class="n">slic_wrhostid</span><span class="p">;</span>	<span class="cm">/* Write hostid field */</span>
	<span class="n">u32</span>		<span class="n">pad28</span><span class="p">;</span>
<span class="cp">#define SLIC_WRHOSTID		 0x00d8</span>
<span class="cp">#define SLIC_RDHOSTID_1GB	 0x1554</span>
<span class="cp">#define SLIC_RDHOSTID_2GB	 0x1554</span>

	<span class="n">u32</span>	<span class="n">slic_low_power</span><span class="p">;</span>	<span class="cm">/* Put card in a low power state */</span>
	<span class="n">u32</span>	<span class="n">pad29</span><span class="p">;</span>
<span class="cp">#define SLIC_LOW_POWER	0x00e0</span>

	<span class="n">u32</span>	<span class="n">slic_quiesce</span><span class="p">;</span>	<span class="cm">/* force slic into quiescent state</span>
<span class="cm">				   before soft reset */</span>
	<span class="n">u32</span>	<span class="n">pad30</span><span class="p">;</span>
<span class="cp">#define SLIC_QUIESCE	0x00e8</span>

	<span class="n">u32</span>	<span class="n">slic_reset_iface</span><span class="p">;</span><span class="cm">/* reset interface queues */</span>
	<span class="n">u32</span>	<span class="n">pad31</span><span class="p">;</span>
<span class="cp">#define SLIC_RESET_IFACE 0x00f0</span>

	<span class="n">u32</span>	<span class="n">slic_addr_upper</span><span class="p">;</span><span class="cm">/* Bits 63-32 for host i/f addrs */</span>
	<span class="n">u32</span>	<span class="n">pad32</span><span class="p">;</span>
<span class="cp">#define SLIC_ADDR_UPPER	0x00f8 </span><span class="cm">/*Register is only written when it has changed*/</span><span class="cp"></span>

	<span class="n">u32</span>	<span class="n">slic_hbar64</span><span class="p">;</span>	<span class="cm">/* 64 bit Header buffer address reg */</span>
	<span class="n">u32</span>	<span class="n">pad33</span><span class="p">;</span>
<span class="cp">#define SLIC_HBAR64		0x0100</span>

	<span class="n">u32</span>	<span class="n">slic_dbar64</span><span class="p">;</span>	<span class="cm">/* 64 bit Data buffer handle &amp; address reg */</span>
	<span class="n">u32</span>	<span class="n">pad34</span><span class="p">;</span>
<span class="cp">#define SLIC_DBAR64		0x0108</span>

	<span class="n">u32</span>	<span class="n">slic_cbar64</span><span class="p">;</span> 	<span class="cm">/* 64 bit Xmt Cmd buf addr regs. */</span>
	<span class="n">u32</span>	<span class="n">pad35</span><span class="p">;</span>
<span class="cp">#define SLIC_CBAR64		0x0110</span>

	<span class="n">u32</span>	<span class="n">slic_rbar64</span><span class="p">;</span>	<span class="cm">/* 64 bit Response buffer address reg.*/</span>
	<span class="n">u32</span>	<span class="n">pad36</span><span class="p">;</span>
<span class="cp">#define SLIC_RBAR64		0x0118</span>

	<span class="n">u32</span>	<span class="n">slic_rcbar64</span><span class="p">;</span>	<span class="cm">/* 64 bit Rcv Cmd buf addr reg*/</span>
	<span class="n">u32</span>	<span class="n">pad37</span><span class="p">;</span>
<span class="cp">#define	SLIC_RCBAR64	0x0120</span>

	<span class="n">u32</span>	<span class="n">slic_stats64</span><span class="p">;</span>	<span class="cm">/* read statistics (64 bit UPR) */</span>
	<span class="n">u32</span>	<span class="n">pad38</span><span class="p">;</span>
<span class="cp">#define	SLIC_RSTAT64	0x0128</span>

	<span class="n">u32</span>	<span class="n">slic_rcv_wcs</span><span class="p">;</span>	<span class="cm">/*Download Gigabit RCV sequencer ucode*/</span>
	<span class="n">u32</span>	<span class="n">pad39</span><span class="p">;</span>
<span class="cp">#define SLIC_RCV_WCS	0x0130</span>
<span class="cp">#define SLIC_RCVWCS_BEGIN	0x40000000</span>
<span class="cp">#define SLIC_RCVWCS_FINISH	0x80000000</span>

	<span class="n">u32</span>	<span class="n">slic_wrvlanid</span><span class="p">;</span>	<span class="cm">/* Write VlanId field */</span>
	<span class="n">u32</span>	<span class="n">pad40</span><span class="p">;</span>
<span class="cp">#define SLIC_WRVLANID	0x0138</span>

	<span class="n">u32</span>	<span class="n">slic_read_xf_info</span><span class="p">;</span>	<span class="cm">/* Read Transformer info */</span>
	<span class="n">u32</span>	<span class="n">pad41</span><span class="p">;</span>
<span class="cp">#define SLIC_READ_XF_INFO 	0x0140</span>

	<span class="n">u32</span>	<span class="n">slic_write_xf_info</span><span class="p">;</span>	<span class="cm">/* Write Transformer info */</span>
	<span class="n">u32</span>	<span class="n">pad42</span><span class="p">;</span>
<span class="cp">#define SLIC_WRITE_XF_INFO 	0x0148</span>

	<span class="n">u32</span>	<span class="n">RSVD1</span><span class="p">;</span>		<span class="cm">/* TOE Only */</span>
	<span class="n">u32</span>	<span class="n">pad43</span><span class="p">;</span>

	<span class="n">u32</span>	<span class="n">RSVD2</span><span class="p">;</span>		<span class="cm">/* TOE Only */</span>
	<span class="n">u32</span>	<span class="n">pad44</span><span class="p">;</span>

	<span class="n">u32</span>	<span class="n">RSVD3</span><span class="p">;</span>		<span class="cm">/* TOE Only */</span>
	<span class="n">u32</span>	<span class="n">pad45</span><span class="p">;</span>

	<span class="n">u32</span>	<span class="n">RSVD4</span><span class="p">;</span>		<span class="cm">/* TOE Only */</span>
	<span class="n">u32</span>	<span class="n">pad46</span><span class="p">;</span>

	<span class="n">u32</span>	<span class="n">slic_ticks_per_sec</span><span class="p">;</span> <span class="cm">/* Write card ticks per second */</span>
	<span class="n">u32</span>	<span class="n">pad47</span><span class="p">;</span>
<span class="cp">#define SLIC_TICKS_PER_SEC	0x0170</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">UPR_REQUEST</span> <span class="p">{</span>
	<span class="n">SLIC_UPR_STATS</span><span class="p">,</span>
	<span class="n">SLIC_UPR_RLSR</span><span class="p">,</span>
	<span class="n">SLIC_UPR_WCFG</span><span class="p">,</span>
	<span class="n">SLIC_UPR_RCONFIG</span><span class="p">,</span>
	<span class="n">SLIC_UPR_RPHY</span><span class="p">,</span>
	<span class="n">SLIC_UPR_ENLB</span><span class="p">,</span>
	<span class="n">SLIC_UPR_ENCT</span><span class="p">,</span>
	<span class="n">SLIC_UPR_PDWN</span><span class="p">,</span>
	<span class="n">SLIC_UPR_PING</span><span class="p">,</span>
	<span class="n">SLIC_UPR_DUMP</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">inicpm_wakepattern</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">patternlength</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">pattern</span><span class="p">[</span><span class="n">SLIC_PM_PATTERNSIZE</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">mask</span><span class="p">[</span><span class="n">SLIC_PM_PATTERNSIZE</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">inicpm_state</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">powercaps</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">powerstate</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">wake_linkstatus</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">wake_magicpacket</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">wake_framepattern</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">inicpm_wakepattern</span> <span class="n">wakepattern</span><span class="p">[</span><span class="n">SLIC_PM_MAXPATTERNS</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">slicpm_packet_pattern</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">priority</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">reserved</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">masksize</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">patternoffset</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">patternsize</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">patternflags</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">slicpm_power_state</span> <span class="p">{</span>
	<span class="n">slicpm_state_unspecified</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">slicpm_state_d0</span><span class="p">,</span>
	<span class="n">slicpm_state_d1</span><span class="p">,</span>
	<span class="n">slicpm_state_d2</span><span class="p">,</span>
	<span class="n">slicpm_state_d3</span><span class="p">,</span>
	<span class="n">slicpm_state_maximum</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">slicpm_wakeup_capabilities</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">slicpm_power_state</span> <span class="n">min_magic_packet_wakeup</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">slicpm_power_state</span> <span class="n">min_pattern_wakeup</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">slicpm_power_state</span> <span class="n">min_link_change_wakeup</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">slic_pnp_capabilities</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">slicpm_wakeup_capabilities</span> <span class="n">wakeup_capabilities</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">xmt_stats</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">xmit_tcp_bytes</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">xmit_tcp_segs</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">xmit_bytes</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">xmit_collisions</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">xmit_unicasts</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">xmit_other_error</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">xmit_excess_collisions</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rcv_stats</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">rcv_tcp_bytes</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rcv_tcp_segs</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rcv_bytes</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rcv_unicasts</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rcv_other_error</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rcv_drops</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">xmt_statsgb</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">xmit_tcp_bytes</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">xmit_tcp_segs</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">xmit_bytes</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">xmit_collisions</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">xmit_unicasts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">xmit_other_error</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">xmit_excess_collisions</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rcv_statsgb</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">rcv_tcp_bytes</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rcv_tcp_segs</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rcv_bytes</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rcv_unicasts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rcv_other_error</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rcv_drops</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">slic_stats</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="k">struct</span> <span class="n">xmt_stats</span> <span class="n">xmt100</span><span class="p">;</span>
			<span class="k">struct</span> <span class="n">rcv_stats</span> <span class="n">rcv100</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">stats_100</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="k">struct</span> <span class="n">xmt_statsgb</span> <span class="n">xmtGB</span><span class="p">;</span>
			<span class="k">struct</span> <span class="n">rcv_statsgb</span> <span class="n">rcvGB</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">stats_GB</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">u</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define xmit_tcp_segs100		u.stats_100.xmt100.xmit_tcp_segs</span>
<span class="cp">#define xmit_tcp_bytes100		u.stats_100.xmt100.xmit_tcp_bytes</span>
<span class="cp">#define xmit_bytes100			u.stats_100.xmt100.xmit_bytes</span>
<span class="cp">#define xmit_collisions100		u.stats_100.xmt100.xmit_collisions</span>
<span class="cp">#define xmit_unicasts100		u.stats_100.xmt100.xmit_unicasts</span>
<span class="cp">#define xmit_other_error100		u.stats_100.xmt100.xmit_other_error</span>
<span class="cp">#define xmit_excess_collisions100	u.stats_100.xmt100.xmit_excess_collisions</span>
<span class="cp">#define rcv_tcp_segs100			u.stats_100.rcv100.rcv_tcp_segs</span>
<span class="cp">#define rcv_tcp_bytes100		u.stats_100.rcv100.rcv_tcp_bytes</span>
<span class="cp">#define rcv_bytes100			u.stats_100.rcv100.rcv_bytes</span>
<span class="cp">#define rcv_unicasts100			u.stats_100.rcv100.rcv_unicasts</span>
<span class="cp">#define rcv_other_error100		u.stats_100.rcv100.rcv_other_error</span>
<span class="cp">#define rcv_drops100			u.stats_100.rcv100.rcv_drops</span>
<span class="cp">#define xmit_tcp_segs_gb		u.stats_GB.xmtGB.xmit_tcp_segs</span>
<span class="cp">#define xmit_tcp_bytes_gb		u.stats_GB.xmtGB.xmit_tcp_bytes</span>
<span class="cp">#define xmit_bytes_gb			u.stats_GB.xmtGB.xmit_bytes</span>
<span class="cp">#define xmit_collisions_gb		u.stats_GB.xmtGB.xmit_collisions</span>
<span class="cp">#define xmit_unicasts_gb		u.stats_GB.xmtGB.xmit_unicasts</span>
<span class="cp">#define xmit_other_error_gb		u.stats_GB.xmtGB.xmit_other_error</span>
<span class="cp">#define xmit_excess_collisions_gb	u.stats_GB.xmtGB.xmit_excess_collisions</span>

<span class="cp">#define rcv_tcp_segs_gb			u.stats_GB.rcvGB.rcv_tcp_segs</span>
<span class="cp">#define rcv_tcp_bytes_gb		u.stats_GB.rcvGB.rcv_tcp_bytes</span>
<span class="cp">#define rcv_bytes_gb			u.stats_GB.rcvGB.rcv_bytes</span>
<span class="cp">#define rcv_unicasts_gb			u.stats_GB.rcvGB.rcv_unicasts</span>
<span class="cp">#define rcv_other_error_gb		u.stats_GB.rcvGB.rcv_other_error</span>
<span class="cp">#define rcv_drops_gb			u.stats_GB.rcvGB.rcv_drops</span>

<span class="k">struct</span> <span class="n">slic_config_mac</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">macaddrA</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define ATK_FRU_FORMAT		0x00</span>
<span class="cp">#define VENDOR1_FRU_FORMAT	0x01</span>
<span class="cp">#define VENDOR2_FRU_FORMAT	0x02</span>
<span class="cp">#define VENDOR3_FRU_FORMAT	0x03</span>
<span class="cp">#define VENDOR4_FRU_FORMAT	0x04</span>
<span class="cp">#define NO_FRU_FORMAT		0xFF</span>

<span class="k">struct</span> <span class="n">atk_fru</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">assembly</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">revision</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">serial</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">pad</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">vendor1_fru</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">commodity</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">assembly</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">revision</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">supplier</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">date</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">sequence</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">pad</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">vendor2_fru</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">part</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">supplier</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">date</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">sequence</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">pad</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">vendor3_fru</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">assembly</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">revision</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">serial</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">pad</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">vendor4_fru</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">number</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">part</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">version</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">pad</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">oemfru</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">vendor1_fru</span> <span class="n">vendor1_fru</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">vendor2_fru</span> <span class="n">vendor2_fru</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">vendor3_fru</span> <span class="n">vendor3_fru</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">vendor4_fru</span> <span class="n">vendor4_fru</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * SLIC EEPROM structure for Mojave</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">slic_eeprom</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">Id</span><span class="p">;</span>			<span class="cm">/* 00 EEPROM/FLASH Magic code &#39;A5A5&#39;*/</span>
	<span class="n">u16</span> <span class="n">EecodeSize</span><span class="p">;</span>		<span class="cm">/* 01 Size of EEPROM Codes (bytes * 4)*/</span>
	<span class="n">u16</span> <span class="n">FlashSize</span><span class="p">;</span>		<span class="cm">/* 02 Flash size */</span>
	<span class="n">u16</span> <span class="n">EepromSize</span><span class="p">;</span>		<span class="cm">/* 03 EEPROM Size */</span>
	<span class="n">u16</span> <span class="n">VendorId</span><span class="p">;</span>		<span class="cm">/* 04 Vendor ID */</span>
	<span class="n">u16</span> <span class="n">DeviceId</span><span class="p">;</span>		<span class="cm">/* 05 Device ID */</span>
	<span class="n">u8</span> <span class="n">RevisionId</span><span class="p">;</span>		<span class="cm">/* 06 Revision ID */</span>
	<span class="n">u8</span> <span class="n">ClassCode</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* 07 Class Code */</span>
	<span class="n">u8</span> <span class="n">DbgIntPin</span><span class="p">;</span>		<span class="cm">/* 08 Debug Interrupt pin */</span>
	<span class="n">u8</span> <span class="n">NetIntPin0</span><span class="p">;</span>		<span class="cm">/*    Network Interrupt Pin */</span>
	<span class="n">u8</span> <span class="n">MinGrant</span><span class="p">;</span>		<span class="cm">/* 09 Minimum grant */</span>
	<span class="n">u8</span> <span class="n">MaxLat</span><span class="p">;</span>		<span class="cm">/*    Maximum Latency */</span>
	<span class="n">u16</span> <span class="n">PciStatus</span><span class="p">;</span>		<span class="cm">/* 10 PCI Status */</span>
	<span class="n">u16</span> <span class="n">SubSysVId</span><span class="p">;</span>		<span class="cm">/* 11 Subsystem Vendor Id */</span>
	<span class="n">u16</span> <span class="n">SubSysId</span><span class="p">;</span>		<span class="cm">/* 12 Subsystem ID */</span>
	<span class="n">u16</span> <span class="n">DbgDevId</span><span class="p">;</span>		<span class="cm">/* 13 Debug Device Id */</span>
	<span class="n">u16</span> <span class="n">DramRomFn</span><span class="p">;</span>		<span class="cm">/* 14 Dram/Rom function */</span>
	<span class="n">u16</span> <span class="n">DSize2Pci</span><span class="p">;</span>		<span class="cm">/* 15 DRAM size to PCI (bytes * 64K) */</span>
	<span class="n">u16</span> <span class="n">RSize2Pci</span><span class="p">;</span>		<span class="cm">/* 16 ROM extension size to PCI (bytes * 4k) */</span>
	<span class="n">u8</span> <span class="n">NetIntPin1</span><span class="p">;</span>		<span class="cm">/* 17 Network Interface Pin 1</span>
<span class="cm">				    (simba/leone only) */</span>
	<span class="n">u8</span> <span class="n">NetIntPin2</span><span class="p">;</span>		<span class="cm">/* Network Interface Pin 2 (simba/leone only)*/</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">NetIntPin3</span><span class="p">;</span>	<span class="cm">/* 18 Network Interface Pin 3 (simba only) */</span>
		<span class="n">u8</span> <span class="n">FreeTime</span><span class="p">;</span>	<span class="cm">/* FreeTime setting (leone/mojave only) */</span>
	<span class="p">}</span> <span class="n">u1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">TBIctl</span><span class="p">;</span>		<span class="cm">/* 10-bit interface control (Mojave only) */</span>
	<span class="n">u16</span> <span class="n">DramSize</span><span class="p">;</span>		<span class="cm">/* 19 DRAM size (bytes * 64k) */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="cm">/* Mac Interface Specific portions */</span>
			<span class="k">struct</span> <span class="n">slic_config_mac</span>	<span class="n">MacInfo</span><span class="p">[</span><span class="n">SLIC_NBR_MACS</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">mac</span><span class="p">;</span>				<span class="cm">/* MAC access for all boards */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="cm">/* use above struct for MAC access */</span>
			<span class="k">struct</span> <span class="n">slic_config_mac</span>	<span class="n">pad</span><span class="p">[</span><span class="n">SLIC_NBR_MACS</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
			<span class="n">u16</span> <span class="n">DeviceId2</span><span class="p">;</span>	<span class="cm">/* Device ID for 2nd PCI function */</span>
			<span class="n">u8</span> <span class="n">IntPin2</span><span class="p">;</span>	<span class="cm">/* Interrupt pin for 2nd PCI function */</span>
			<span class="n">u8</span> <span class="n">ClassCode2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span> <span class="cm">/* Class Code for 2nd PCI function */</span>
		<span class="p">}</span> <span class="n">mojave</span><span class="p">;</span>	<span class="cm">/* 2nd function access for gigabit board */</span>
	<span class="p">}</span> <span class="n">u2</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">CfgByte6</span><span class="p">;</span>		<span class="cm">/* Config Byte 6 */</span>
	<span class="n">u16</span> <span class="n">PMECapab</span><span class="p">;</span>		<span class="cm">/* Power Mgment capabilities */</span>
	<span class="n">u16</span> <span class="n">NwClkCtrls</span><span class="p">;</span>		<span class="cm">/* NetworkClockControls */</span>
	<span class="n">u8</span> <span class="n">FruFormat</span><span class="p">;</span>		<span class="cm">/* Alacritech FRU format type */</span>
	<span class="k">struct</span> <span class="n">atk_fru</span>  <span class="n">AtkFru</span><span class="p">;</span>	<span class="cm">/* Alacritech FRU information */</span>
	<span class="n">u8</span> <span class="n">OemFruFormat</span><span class="p">;</span>	<span class="cm">/* optional OEM FRU format type */</span>
	<span class="k">union</span> <span class="n">oemfru</span> <span class="n">OemFru</span><span class="p">;</span>	<span class="cm">/* optional OEM FRU information */</span>
	<span class="n">u8</span>	<span class="n">Pad</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>		<span class="cm">/* Pad to 128 bytes - includes 2 cksum bytes</span>
<span class="cm">				 * (if OEM FRU info exists) and two unusable</span>
<span class="cm">				 * bytes at the end */</span>
<span class="p">};</span>

<span class="cm">/* SLIC EEPROM structure for Oasis */</span>
<span class="k">struct</span> <span class="n">oslic_eeprom</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">Id</span><span class="p">;</span>			<span class="cm">/* 00 EEPROM/FLASH Magic code &#39;A5A5&#39; */</span>
	<span class="n">u16</span> <span class="n">EecodeSize</span><span class="p">;</span>		<span class="cm">/* 01 Size of EEPROM Codes (bytes * 4)*/</span>
	<span class="n">u16</span> <span class="n">FlashConfig0</span><span class="p">;</span>	<span class="cm">/* 02 Flash Config for SPI device 0 */</span>
	<span class="n">u16</span> <span class="n">FlashConfig1</span><span class="p">;</span>	<span class="cm">/* 03 Flash Config for SPI device 1 */</span>
	<span class="n">u16</span> <span class="n">VendorId</span><span class="p">;</span>		<span class="cm">/* 04 Vendor ID */</span>
	<span class="n">u16</span> <span class="n">DeviceId</span><span class="p">;</span>		<span class="cm">/* 05 Device ID (function 0) */</span>
	<span class="n">u8</span> <span class="n">RevisionId</span><span class="p">;</span>		<span class="cm">/* 06 Revision ID */</span>
	<span class="n">u8</span> <span class="n">ClassCode</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* 07 Class Code for PCI function 0 */</span>
	<span class="n">u8</span> <span class="n">IntPin1</span><span class="p">;</span>		<span class="cm">/* 08 Interrupt pin for PCI function 1*/</span>
	<span class="n">u8</span> <span class="n">ClassCode2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* 09 Class Code for PCI function 1 */</span>
	<span class="n">u8</span> <span class="n">IntPin2</span><span class="p">;</span>		<span class="cm">/* 10 Interrupt pin for PCI function 2*/</span>
	<span class="n">u8</span> <span class="n">IntPin0</span><span class="p">;</span>		<span class="cm">/*    Interrupt pin for PCI function 0*/</span>
	<span class="n">u8</span> <span class="n">MinGrant</span><span class="p">;</span>		<span class="cm">/* 11 Minimum grant */</span>
	<span class="n">u8</span> <span class="n">MaxLat</span><span class="p">;</span>		<span class="cm">/*    Maximum Latency */</span>
	<span class="n">u16</span> <span class="n">SubSysVId</span><span class="p">;</span>		<span class="cm">/* 12 Subsystem Vendor Id */</span>
	<span class="n">u16</span> <span class="n">SubSysId</span><span class="p">;</span>		<span class="cm">/* 13 Subsystem ID */</span>
	<span class="n">u16</span> <span class="n">FlashSize</span><span class="p">;</span>		<span class="cm">/* 14 Flash size (bytes / 4K) */</span>
	<span class="n">u16</span> <span class="n">DSize2Pci</span><span class="p">;</span>		<span class="cm">/* 15 DRAM size to PCI (bytes / 64K) */</span>
	<span class="n">u16</span> <span class="n">RSize2Pci</span><span class="p">;</span>		<span class="cm">/* 16 Flash (ROM extension) size to PCI</span>
<span class="cm">					(bytes / 4K) */</span>
	<span class="n">u16</span> <span class="n">DeviceId1</span><span class="p">;</span>		<span class="cm">/* 17 Device Id (function 1) */</span>
	<span class="n">u16</span> <span class="n">DeviceId2</span><span class="p">;</span>		<span class="cm">/* 18 Device Id (function 2) */</span>
	<span class="n">u16</span> <span class="n">CfgByte6</span><span class="p">;</span>		<span class="cm">/* 19 Device Status Config Bytes 6-7 */</span>
	<span class="n">u16</span> <span class="n">PMECapab</span><span class="p">;</span>		<span class="cm">/* 20 Power Mgment capabilities */</span>
	<span class="n">u8</span> <span class="n">MSICapab</span><span class="p">;</span>		<span class="cm">/* 21 MSI capabilities */</span>
	<span class="n">u8</span> <span class="n">ClockDivider</span><span class="p">;</span>	<span class="cm">/*    Clock divider */</span>
	<span class="n">u16</span> <span class="n">PciStatusLow</span><span class="p">;</span>	<span class="cm">/* 22 PCI Status bits 15:0 */</span>
	<span class="n">u16</span> <span class="n">PciStatusHigh</span><span class="p">;</span>	<span class="cm">/* 23 PCI Status bits 31:16 */</span>
	<span class="n">u16</span> <span class="n">DramConfigLow</span><span class="p">;</span>	<span class="cm">/* 24 DRAM Configuration bits 15:0 */</span>
	<span class="n">u16</span> <span class="n">DramConfigHigh</span><span class="p">;</span>	<span class="cm">/* 25 DRAM Configuration bits 31:16 */</span>
	<span class="n">u16</span> <span class="n">DramSize</span><span class="p">;</span>		<span class="cm">/* 26 DRAM size (bytes / 64K) */</span>
	<span class="n">u16</span> <span class="n">GpioTbiCtl</span><span class="p">;</span>		<span class="cm">/* 27 GPIO/TBI controls for functions 1/0 */</span>
	<span class="n">u16</span> <span class="n">EepromSize</span><span class="p">;</span>		<span class="cm">/* 28 EEPROM Size */</span>
	<span class="k">struct</span> <span class="n">slic_config_mac</span> <span class="n">MacInfo</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* 29 MAC addresses (2 ports) */</span>
	<span class="n">u8</span> <span class="n">FruFormat</span><span class="p">;</span>		<span class="cm">/* 35 Alacritech FRU format type */</span>
	<span class="k">struct</span> <span class="n">atk_fru</span>	<span class="n">AtkFru</span><span class="p">;</span>	<span class="cm">/* Alacritech FRU information */</span>
	<span class="n">u8</span> <span class="n">OemFruFormat</span><span class="p">;</span>	<span class="cm">/* optional OEM FRU format type */</span>
	<span class="k">union</span> <span class="n">oemfru</span> <span class="n">OemFru</span><span class="p">;</span>	<span class="cm">/* optional OEM FRU information */</span>
	<span class="n">u8</span> <span class="n">Pad</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>		<span class="cm">/* Pad to 128 bytes - includes 2 checksum bytes</span>
<span class="cm">				 * (if OEM FRU info exists) and two unusable</span>
<span class="cm">				 * bytes at the end</span>
<span class="cm">				 */</span>
<span class="p">};</span>

<span class="cp">#define	MAX_EECODE_SIZE	sizeof(struct slic_eeprom)</span>
<span class="cp">#define MIN_EECODE_SIZE	0x62	</span><span class="cm">/* code size without optional OEM FRU stuff */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * SLIC CONFIG structure</span>
<span class="cm"> *</span>
<span class="cm"> * This structure lives in the CARD structure and is valid for all board types.</span>
<span class="cm"> * It is filled in from the appropriate EEPROM structure by</span>
<span class="cm"> * SlicGetConfigData()</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">slic_config</span> <span class="p">{</span>
	<span class="n">bool</span> <span class="n">EepromValid</span><span class="p">;</span>	<span class="cm">/* Valid EEPROM flag (checksum good?) */</span>
	<span class="n">u16</span> <span class="n">DramSize</span><span class="p">;</span>		<span class="cm">/* DRAM size (bytes / 64K) */</span>
	<span class="k">struct</span> <span class="n">slic_config_mac</span> <span class="n">MacInfo</span><span class="p">[</span><span class="n">SLIC_NBR_MACS</span><span class="p">];</span> <span class="cm">/* MAC addresses */</span>
	<span class="n">u8</span> <span class="n">FruFormat</span><span class="p">;</span>		<span class="cm">/* Alacritech FRU format type */</span>
	<span class="k">struct</span> <span class="n">atk_fru</span>	<span class="n">AtkFru</span><span class="p">;</span>	<span class="cm">/* Alacritech FRU information */</span>
	<span class="n">u8</span> <span class="n">OemFruFormat</span><span class="p">;</span>	<span class="cm">/* optional OEM FRU format type */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">vendor1_fru</span> <span class="n">vendor1_fru</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">vendor2_fru</span> <span class="n">vendor2_fru</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">vendor3_fru</span> <span class="n">vendor3_fru</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">vendor4_fru</span> <span class="n">vendor4_fru</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">OemFru</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#pragma pack()</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
