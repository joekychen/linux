f | Makefile | g | 2.0K |  | Linus Torvalds | torvalds@linux-foundation.org | 1337729661 |  | 
d | gdm72xx |  | 20 items |  | Ben Chan | benchan@chromium.org | 1339720126 |  | staging: gdm72xx: Release netlink socket properly  This patch modifies the gdm72xx driver to properly release a netlink socket using netlink_kernel_release. It fixes the following kernel crash, which occurs after repeatedly suspending and resuming a system.     kernel BUG at /home/benchan/trunk/src/third_party/kernel/files/mm/slub.c:3471!    invalid opcode: 0000 [#1] SMP    CPU 2    Modules linked in: asix usbnet snd_hda_codec_hdmi    snd_hda_codec_cirrus i2c_dev uinput snd_hda_intel snd_hda_codec    snd_hwdep snd_pcm snd_timer bluetooth snd_page_alloc fuse aesni_intel    cryptd isl29018(C) aes_x86_64 industrialio(C) memconsole nm10_gpio    rtc_cmos nf_conntrack_ipv6 nf_defrag_ipv6 r8169 ath9k mac80211    ip6table_filter ath9k_common ath9k_hw ath cfg80211 xt_mark ip6_tables    uvcvideo videobuf2_core videodev videobuf2_vmalloc videobuf2_memops    gdmwm(C) joydev     Pid: 3125, comm: kworker/u:30 Tainted: G        WC   3.4.0 #1    RIP: 0010:[<ffffffff810cda19>]  [<ffffffff810cda19>] kfree+0x67/0xca    RSP: 0018:ffff880134977d60  EFLAGS: 00010246    RAX: 4000000000000400 RBX: ffffffff818832a0 RCX: 0000000000000000    RDX: 4000000000000000 RSI: 0000000000000000 RDI: ffffffff818832a0    RBP: ffff880134977d80 R08: 00000000ffffffff R09: ffffea00000620c0    R10: ffffffff8111b729 R11: ffff880149fb3840 R12: ffffffff81a08840    R13: ffffffff813f5bc3 R14: ffffffff8138ed84 R15: 0000000000000000    FS:  0000000000000000(0000) GS:ffff88014fb00000(0000) knlGS:0000000000000000    CS:  0010 DS: 0000 ES: 0000 CR0: 000000008005003b    CR2: 00007f7cad963110 CR3: 000000000180b000 CR4: 00000000000407e0    DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000    DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400    Process kworker/u:30 (pid: 3125, threadinfo ffff880134976000, task ffff8801330647e0)    Stack:     0000000000000002 ffffffff818832a0 ffffffff81a08840 ffff880134977df0     ffff880134977da0 ffffffff813f5bc3 ffff880134977df0 ffffffff81883250     ffff880134977dd0 ffffffff8138e64c 0000000180150010 ffffffff81883250    Call Trace:     [<ffffffff813f5bc3>] ipv4_sysctl_exit_net+0x23/0x27     [<ffffffff8138e64c>] ops_exit_list+0x27/0x50     [<ffffffff8138ee72>] cleanup_net+0xee/0x17c     [<ffffffff81040c64>] process_one_work+0x199/0x2b8     [<ffffffff810416e4>] worker_thread+0x13c/0x222     [<ffffffff810415a8>] ? manage_workers.isra.26+0x171/0x171     [<ffffffff8104506d>] kthread+0x8b/0x93     [<ffffffff8145b414>] kernel_thread_helper+0x4/0x10     [<ffffffff81044fe2>] ? __init_kthread_worker+0x39/0x39     [<ffffffff8145b410>] ? gs_change+0xb/0xb    Code: 83 c4 10 49 83 3c 24 00 eb e4 48 83 fb 10 76 76 48 89 df e8 17    e1 ff ff 49 89 c1 48 8b 00 a8 80 75 15 49 f7 01 00 c0 00 00 75 02    <0f> 0b 4c 89 cf e8 b8 b4 fd ff eb 4f 4c 8b 55 08 49 8b 79 30 48    RIP  [<ffffffff810cda19>] kfree+0x67/0xca     RSP <ffff880134977d60>  Signed-off-by: Ben Chan <benchan@chromium.org> Cc: Sage Ahn <syahn@gctsemi.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | net |  | 7 items |  | Jiri Slaby | jslaby@suse.cz | 1334339824 |  | NET: pc300, move to staging as it is broken  It was marked as BROKEN back in 2008. It is because the tty handling in the driver is really broken.  There was some activity in January 2012 to fix the driver, but the patch was commented to be bogus:   https://lkml.org/lkml/2012/1/29/160 and we have not heard back from the author since then:   https://lkml.org/lkml/2012/3/28/412  So since nobody stepped in and rewrote the driver, it is time to move it out of line now. And drop it some time later if nobody comes up with patches to fix the driver in staging.  Signed-off-by: Jiri Slaby <jslaby@suse.cz> Acked-by: David S. Miller <davem@davemloft.net> Cc: Alan Cox <alan@linux.intel.com> Cc: Andrea Shepard <andrea@persephoneslair.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | staging.c | s | 324B | 15 | Greg Kroah-Hartman | gregkh@suse.de | 1223933572 |  | Staging: workaround build system bug  This is needed as CONFIG_STAGING is set to y, yet there is no code in drivers/staging/ to build, so the build-in.o doesn't get created properly.  Create a "dummy" module in drivers/staging called staging.c to work around this bug.  Cc: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
d | media |  | 9 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1340661189 |  | Merge branch 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media  Pull media fixes from Mauro Carvalho Chehab.  Trivial conflict due to new USB HID ID's being added next to each other (Baanto vs Axentia).  * 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media: (44 commits)   [media] smia: Fix compile failures   [media]  Fix VIDIOC_DQEVENT docbook entry   [media] s5p-fimc: Fix control creation function   [media] s5p-mfc: Fix checkpatch error in s5p_mfc_shm.h file   [media] s5p-mfc: Fix setting controls   [media] v4l/s5p-mfc: added image size align in VIDIOC_TRY_FMT   [media] v4l/s5p-mfc: corrected encoder v4l control definitions   [media] v4l: mem2mem_testdev: Fix race conditions in driver   [media] s5p-mfc: Bug fix of timestamp/timecode copy mechanism   [media] cxd2820r: Fix an incorrect modulation type bitmask   [media] em28xx: Show a warning if the board does not support remote controls   [media] em28xx: Add remote control support for Terratec's Cinergy HTC Stick HD   [media] USB: Staging: media: lirc: initialize spinlocks before usage   [media] Revert "[media] media: mx2_camera: Fix mbus format handling"   [media] bw-qcam: driver and pixfmt documentation fixes   [media] cx88: fix firmware load on big-endian systems   [media] cx18: support big-endian systems   [media] ivtv: fix support for big-endian systems   [media] tuner-core: return the frequency range of the correct tuner   [media] v4l2-dev.c: fix g_parm regression in determine_valid_ioctls()   ...
d | octeon |  | 18 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1337729661 |  | 
d | rtl8712 |  | 102 items |  | Lubomir Schmidt | gentoo.lubomir@googlemail.com | 1339797004 |  | staging: r8712u: Add new USB IDs  There are two new devices for this driver.  Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net> Cc: stable <stable@vger.kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | winbond |  | 26 items |  | Greg Kroah-Hartman | gregkh@suse.de | 1321638131 |  | USB: convert drivers/staging/* to use module_usb_driver()  This converts the drivers in drivers/staging/* to use the module_usb_driver() macro which makes the code smaller and a bit simpler.  Added bonus is that it removes some unneeded kernel log messages about drivers loading and/or unloading.  Cc: "David Täht" <d@teklibre.com> Cc: Marek Belisko <marek.belisko@gmail.com> Cc: Al Cho <acho@novell.com> Cc: Forest Bond <forest@alittletooquiet.net> Cc: Pavel Machek <pavel@ucw.cz> Cc: Huajun Li <huajun.li.lee@gmail.com> Cc: Zac Storer <zac.3.14159@gmail.com> Cc: Randy Dunlap <randy.dunlap@oracle.com> Cc: Mauro Carvalho Chehab <mchehab@redhat.com> Cc: edwin_rong <edwin_rong@realsil.com.cn> Cc: Ben Hutchings <ben@decadent.org.uk> Cc: Julia Lawall <julia@diku.dk> Cc: Ilia Mirkin <imirkin@alum.mit.edu> Cc: Joe Perches <joe@perches.com> Cc: Pekka Enberg <penberg@kernel.org> Cc: "John W. Linville" <linville@tuxdriver.com> Cc: Paul Gortmaker <paul.gortmaker@windriver.com> Cc: Larry Finger <Larry.Finger@lwfinger.net> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
d | bcm |  | 55 items |  | Kevin McKinney | klmckinney1@gmail.com | 1337388076 |  | Staging: bcm: Remove two unused variables from Adapter.h  This patch removes two unused variables that are defined in the _MINI_ADAPTER struct.  Signed-off-by: Kevin McKinney <klmckinney1@gmail.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | sep |  | 11 items |  | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1335984487 |  | Merge 3.4-rc5 into staging-next  This resolves the conflict in: 	drivers/staging/vt6656/ioctl.c  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | et131x |  | 5 items |  | joseph daniel | josephdanielwalter@gmail.com | 1335934124 |  | staging: et131x: Fix coding style issues  Signed-off-by: joseph daniel <josephdanielwalter@gmail.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | usbip |  | 18 items |  | Masanari Iida | standby24x7@gmail.com | 1334079061 |  | staging: Fix typo in multiple files  Collect spelling typo in multiple files within staging directory.  Signed-off-by: Masanari Iida <standby24x7@gmail.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | line6 |  | 30 items |  | Johannes Thumshirn | morbidrsa@googlemail.com | 1337386432 |  | staging: line6/config.h: Delete unused header  Delete unused header file drivers/staging/line6/config.h  Signed-off-by: Johannes Thumshirn <morbidrsa@googlemail.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | ozwpan |  | 29 items |  | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1335984487 |  | Merge 3.4-rc5 into staging-next  This resolves the conflict in: 	drivers/staging/vt6656/ioctl.c  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | rtl8187se |  | 15 items |  | Joe Perches | joe@perches.com | 1336596743 |  | staging: Remove test of is_broadcast with is_multicast  A broadcast packet is a multicast packet, no need to test twice.  Reorder one defective test in rtl_core of is_multi_ether_addr before is_broadcast_ether_addr as the is_multi returns true for broadcast frames.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | echo |  | 7 items |  | Chris Forbes | chrisf@ijw.co.nz | 1309923457 |  | drivers: staging: echo: Fix coding style issues.  Fixed coding style issues as flagged by checkpatch.pl  Signed-off-by: Chris Forbes <chrisf@ijw.co.nz> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
d | android |  | 18 items |  | Hugh Dickins | hughd@google.com | 1338333742 |  | mm/fs: route MADV_REMOVE to FALLOC_FL_PUNCH_HOLE  Now tmpfs supports hole-punching via fallocate(), switch madvise_remove() to use do_fallocate() instead of vmtruncate_range(): which extends madvise(,,MADV_REMOVE) support from tmpfs to ext4, ocfs2 and xfs.  There is one more user of vmtruncate_range() in our tree, staging/android's ashmem_shrink(): convert it to use do_fallocate() too (but if its unpinned areas are already unmapped - I don't know - then it would do better to use shmem_truncate_range() directly).  Based-on-patch-by: Cong Wang <amwang@redhat.com> Signed-off-by: Hugh Dickins <hughd@google.com> Cc: Christoph Hellwig <hch@infradead.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Cc: Colin Cross <ccross@android.com> Cc: John Stultz <john.stultz@linaro.org> Cc: Greg Kroah-Hartman <gregkh@linux-foundation.org> Cc: "Theodore Ts'o" <tytso@mit.edu> Cc: Andreas Dilger <adilger@dilger.ca> Cc: Mark Fasheh <mfasheh@suse.de> Cc: Joel Becker <jlbec@evilplan.org> Cc: Dave Chinner <david@fromorbit.com> Cc: Ben Myers <bpm@sgi.com> Cc: Michael Kerrisk <mtk.manpages@gmail.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | frontier |  | 7 items |  | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1334966007 |  | USB: tranzport.c: remove err() usage  err() was a very old USB-specific macro that I thought had gone away.  This patch removes it from being used in the driver and uses dev_err() instead.  CC: "David Täht" <d@teklibre.com> CC: Hitoshi Nakamori <hitoshi.nakamori@gmail.com> CC: "Ken O'Brien" <kernel@kenobrien.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | vme |  | 2 items |  | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1335984487 |  | Merge 3.4-rc5 into staging-next  This resolves the conflict in: 	drivers/staging/vt6656/ioctl.c  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | asus_oled |  | 12 items |  | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1334965997 |  | USB: asus_oled.c: remove err() usage  err() was a very old USB-specific macro that I thought had gone away.  This patch removes it from being used in the driver and uses dev_err() instead.  CC: Jakub Schmidtke <sjakub@gmail.com> CC: Pekka Paalanen <pq@iki.fi> CC: Peter Huewe <peterhuewe@gmx.de> CC: "Ken O'Brien" <kernel@kenobrien.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | wlags49_h2 |  | 45 items |  | Dan Carpenter | dan.carpenter@oracle.com | 1337035424 |  | Staging: wlags49_h2: potential NULL dereference  wl_device_dealloc() dereferences the "dev" paramter, so let's move it under the check for NULL.  Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | olpc_dcon |  | 7 items |  | Jesper Juhl | jj@chaosbits.net | 1335292402 |  | staging: olpc_dcon.c: Remove a few spaces between casts and variables  Just a trivial style cleanup.  Signed-off-by: Jesper Juhl <jj@chaosbits.net> Acked-by: Andres Salomon <dilinger@queued.net> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | zsmalloc |  | 5 items |  | Minchan Kim | minchan@kernel.org | 1336594822 |  | staging: zsmalloc: add/fix function comment  Add/fix the comment.  Signed-off-by: Minchan Kim <minchan@kernel.org> Acked-by: Nitin Gupta <ngupta@vflare.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | sm7xx |  | 5 items |  | Javier M. Mellid | jmunhoz@igalia.com | 1335749540 |  | staging: sm7xx: rename function  This patch changes the name of function cfb_blank to smtc_blank. This function is not implemented like a generic function for frame buffer. Having the old prefix becomes confused when reading fb_ops structs.  Tested with SM712  Signed-off-by: Javier M. Mellid <jmunhoz@igalia.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | serqt_usb2 |  | 3 items |  | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1336684397 |  | USB: serqt_usb2: remove duplicate device ids  There are a number of device ids that the quatech2 driver supports that are duplicated in the serqt_usb2 driver, so remove them from the serqt_usb2 driver as they do not belong there.  Reported-by: Bill Pemberton <wfp5p@virginia.edu> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | ft1000 |  | 6 items |  | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
d | rts_pstor |  | 26 items |  | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1335984487 |  | Merge 3.4-rc5 into staging-next  This resolves the conflict in: 	drivers/staging/vt6656/ioctl.c  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | zram |  | 6 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1332348026 |  | Merge branch 'kmap_atomic' of git://github.com/congwang/linux  Pull kmap_atomic cleanup from Cong Wang.  It's been in -next for a long time, and it gets rid of the (no longer used) second argument to k[un]map_atomic().  Fix up a few trivial conflicts in various drivers, and do an "evil merge" to catch some new uses that have come in since Cong's tree.  * 'kmap_atomic' of git://github.com/congwang/linux: (59 commits)   feature-removal-schedule.txt: schedule the deprecated form of kmap_atomic() for removal   highmem: kill all __kmap_atomic() [swarren@nvidia.com: highmem: Fix ARM build break due to __kmap_atomic rename]   drbd: remove the second argument of k[un]map_atomic()   zcache: remove the second argument of k[un]map_atomic()   gma500: remove the second argument of k[un]map_atomic()   dm: remove the second argument of k[un]map_atomic()   tomoyo: remove the second argument of k[un]map_atomic()   sunrpc: remove the second argument of k[un]map_atomic()   rds: remove the second argument of k[un]map_atomic()   net: remove the second argument of k[un]map_atomic()   mm: remove the second argument of k[un]map_atomic()   lib: remove the second argument of k[un]map_atomic()   power: remove the second argument of k[un]map_atomic()   kdb: remove the second argument of k[un]map_atomic()   udf: remove the second argument of k[un]map_atomic()   ubifs: remove the second argument of k[un]map_atomic()   squashfs: remove the second argument of k[un]map_atomic()   reiserfs: remove the second argument of k[un]map_atomic()   ocfs2: remove the second argument of k[un]map_atomic()   ntfs: remove the second argument of k[un]map_atomic()   ...
d | ramster |  | 13 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338838125 |  | 
d | rtl8192e |  | 28 items |  | Joe Perches | joe@perches.com | 1336596743 |  | staging: Remove test of is_broadcast with is_multicast  A broadcast packet is a multicast packet, no need to test twice.  Reorder one defective test in rtl_core of is_multi_ether_addr before is_broadcast_ether_addr as the is_multi returns true for broadcast frames.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | rtl8192u |  | 32 items |  | Joe Perches | joe@perches.com | 1336596743 |  | staging: Remove test of is_broadcast with is_multicast  A broadcast packet is a multicast packet, no need to test twice.  Reorder one defective test in rtl_core of is_multi_ether_addr before is_broadcast_ether_addr as the is_multi returns true for broadcast frames.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | cxt1e1 |  | 30 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1326140297 |  | Merge branch 'staging-next' of git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/staging  * 'staging-next' of git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/staging: (466 commits)   net/hyperv: Add support for jumbo frame up to 64KB   net/hyperv: Add NETVSP protocol version negotiation   net/hyperv: Remove unnecessary kmap_atomic in netvsc driver   staging/rtl8192e: Register against lib80211   staging/rtl8192e: Convert to lib80211_crypt_info   staging/rtl8192e: Convert to lib80211_crypt_data and lib80211_crypt_ops   staging/rtl8192e: Add lib80211.h to rtllib.h   staging/mei: add watchdog device registration wrappers   drm/omap: GEM, deal with cache   staging: vt6656: int.c, int.h: Change return of function to void   staging: usbip: removed unused definitions from header   staging: usbip: removed dead code from receive function   staging:iio: Drop {mark,unmark}_in_use callbacks   staging:iio: Drop buffer mark_param_change callback   staging:iio: Drop the unused buffer enable() and is_enabled() callbacks   staging:iio: Drop buffer busy flag   staging:iio: Make sure a device is only opened once at a time   staging:iio: Disallow modifying buffer size when buffer is enabled   staging:iio: Disallow changing scan elements in all buffered modes   staging:iio: Use iio_buffer_enabled instead of open coding it   ...  Fix up conflict in drivers/staging/iio/adc/ad799x_core.c (removal of module_init due to using module_i2c_driver() helper, next to removal of MODULE_ALIAS due to using MODULE_DEVICE_TABLE instead).
d | ipack |  | 7 items |  | Samuel Iglesias Gonsalvez | siglesias@igalia.com | 1337387897 |  | Staging: ipack/bridges/tpci200: remove unneeded casts  Signed-off-by: Samuel Iglesias Gonsalvez <siglesias@igalia.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | nvec |  | 11 items |  | Justin P. Mattock | justinmattock@gmail.com | 1334075361 |  | staging:nvec:nvec.h Fix typos in staging:nvec  The below patch fixes a typo I found while reading.  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Cc: Julian Andres Klode <jak@jak-linux.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | slicoss |  | 6 items |  | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1329345940 |  | staging: clean up Greg's email address in some TODO files  My old email address was in some TODO files, so this fixes that issue.  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | phison |  | 3 items |  | Peter Huewe | peterhuewe@gmx.de | 1322421872 |  | staging/phison: Convert pci_table entries to PCI_DEVICE (if PCI_ANY_ID is used)  This patch converts pci_table entries to use the PCI_DEVICE macro, if .subvendor and .subdevice are set to PCI_ANY_ID, and thus improves readablity.  Signed-off-by: Peter Huewe <peterhuewe@gmx.de> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
d | ccg |  | 5 items |  | Andrzej Pietrasiewicz | andrzej.p@samsung.com | 1337171540 |  | staging: usb: gadget: Add FunctionFS support to Configurable Composite Gadget driver  Add FunctionFS support. It allows certain USB functions to be provided from userspace, e.g. MTP, PTP, adb.  The functions provided by the gadget itself are enumerated in /sys/class/ccg0/functions. The functions which can be supplied from userspace must be enumerated in /sys/class/ccg0/f_fs/user_functions. No other userspace functions can be used than specified in the above mentioned file, but just specifying them there is not enough to activate them. The userspace functions in order to be activated need also be enumerated in /sys/class/ccg0/functions.  An example sequence of operations can be as follows:  $ echo 0 > /sys/class/ccg_usb/ccg0/enable  $ echo -n 0x2d01 > /sys/module/g_ccg/parameters/idProduct $ echo -n MyDevice > /sys/module/g_ccg/parameters/iSerialNumber $ echo -n 0x1d6b > /sys/module/g_ccg/parameters/idVendor $ echo -n Manufacturer > /sys/module/g_ccg/parameters/iManufacturer $ echo -n Product > /sys/module/g_ccg/parameters/iProduct $ echo -n bcdDevice > /sys/module/g_ccg/parameters/bcdDevice  $ echo adb,mtp,ptp > /sys/class/ccg_usb/ccg0/f_fs/user_functions $ echo mass_storage,ptp > /sys/class/ccg_usb/ccg0/functions $ echo /file.img > /sys/class/ccg_usb/ccg0/f_mass_storage/lun/file  $ mkdir -p /dev/usbgadget/ptp $ mount -t functionfs ptp /dev/usbgadget/ptp $ ./ptp &  $ echo 1 > /sys/class/ccg_usb/ccg0/enable  The above example declares that adb, mtp and ptp functions can be supplied from userspace through FunctionFS. But of them all only ptp is actually activated, together with mass_storage, the latter being implemented in the gadget itself (in kernel, not in userspace). The list of functions can be modified at runtime while the gadget is not enabled, that is, after  $ echo 0 > /sys/class/ccg_usb/ccg0/enable  The FunctionFS function is implicitly handled by the gadget, that is, if a userspace function name is provided in /sys/class/ccg_usb/ccg0/functions, then the FunctionFS function is activated.  Signed-off-by: Andrzej Pietrasiewicz <andrzej.p@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Acked-by: Michal Nazarewicz <mina86@mina86.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | iio |  | 28 items |  | Lars-Peter Clausen | lars@metafoo.de | 1339524739 |  | staging:iio:ad7298: Fix linker error due to missing IIO kfifo buffer  The ad7298 drivers buffer implementation uses the IIO kfifo buffer, so it needs to select IIO_KFIFO_BUF. Otherwise (if no other driver selects the symbol) the following linker error will occur:  drivers/built-in.o: In function `ad7298_register_ring_funcs_and_init': 	(.text+0x245cf2): undefined reference to `iio_kfifo_allocate' drivers/built-in.o: In function `ad7298_register_ring_funcs_and_init': 	(.text+0x245d7d): undefined reference to `iio_kfifo_free' drivers/built-in.o: In function `ad7298_ring_cleanup': 	(.text+0x245dcd): undefined reference to `iio_kfifo_free'  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Reported-by: Randy Dunlap <rdunlap@xenotime.net> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | xgifb |  | 16 items |  | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1335984487 |  | Merge 3.4-rc5 into staging-next  This resolves the conflict in: 	drivers/staging/vt6656/ioctl.c  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | cptm1217 |  | 5 items |  | Julia Lawall | julia@diku.dk | 1305754249 |  | drivers/staging/cptm1217/clearpad_tm1217.c: Correct call to input_free_device  This code is in a loop that currently is only executed once.  Because of this property, the first block of code is currently actually correct. Nevertheless, the comments associated with the code suggest that the loop is planned to take more than one iteration in the future, and thus this patch is made with that case in mind.  In the first block of code, there is currently an immediate abort from the function.  It is changed to jump to the error handling code at fail, to be able to unregister and free the resources allocated on previous iterations.  In the second block of code, the input_dev for the current iteration has been allocated, but has not been registered.  It has also not been stored in ts->cp_input_info[i].input.  Thus on jumping to fail, it will not be freed.  In this case, we want to free, but not unregister, so the free for this most recently allocated resource is put before the jump.  A simplified version of the semantic match that finds this problem is: (http://coccinelle.lip6.fr/)  // <smpl> @r exists@ local idexpression struct input_dev * x; expression ra,rr; position p1,p2; @@  x = input_allocate_device@p1(...) ...  when != x = rr      when != input_free_device(x,...)      when != if (...) { ... input_free_device(x,...) ...} if(...) { ... when != x = ra      when forall      when != input_free_device(x,...)  \(return <+...x...+>; \|| return@p2...; \) }  @script:python@ p1 << r.p1; p2 << r.p2; @@  cocci.print_main("input_allocate_device",p1) cocci.print_secs("input_free_device",p2) // </smpl>  Signed-off-by: Julia Lawall <julia@diku.dk> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
d | sbe-2t3e3 |  | 16 items |  | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
d | panel |  | 5 items |  | Justin P. Mattock | justinmattock@gmail.com | 1334075361 |  | staging:panel:panel.c Fix typo in staging:panel  The below patch fixes a typo I found while reading.  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Cc: Willy Tarreau <willy@meta-x.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | vt6655 |  | 80 items |  | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1335984487 |  | Merge 3.4-rc5 into staging-next  This resolves the conflict in: 	drivers/staging/vt6656/ioctl.c  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | ste_rmi4 |  | 6 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1332963273 |  | 
d | zcache |  | 5 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338838125 |  | 
d | omapdrm |  | 23 items |  | Andy Gross | andy.gross@ti.com | 1339429329 |  | staging: omapdrm: fix crash when freeing bad fb  During unload, don't cleanup the framebuffer if it is not valid.  Signed-off-by: Andy Gross <andy.gross@ti.com> Reviewed-by: Rob Clark <rob.clark@linaro.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | Kconfig | g | 3.1K |  | Linus Torvalds | torvalds@linux-foundation.org | 1337729661 |  | 
d | keucr |  | 18 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1332267990 |  | 
d | vt6656 |  | 81 items |  | Joe Perches | joe@perches.com | 1336596743 |  | staging: Remove test of is_broadcast with is_multicast  A broadcast packet is a multicast packet, no need to test twice.  Reorder one defective test in rtl_core of is_multi_ether_addr before is_broadcast_ether_addr as the is_multi returns true for broadcast frames.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | wlan-ng |  | 27 items |  | Krzysztof Wilczynski | krzysztof.wilczynski@linux.com | 1335292105 |  | staging: wlan-ng: Release struct returned by cfg80211_inform_bss to avoid potential memory leak.  Function cfg80211_inform_bss returns a pointer to a referenced struct cfg80211_bss but no information is needed from this struct in function prism2_scan and therefore we release it by calling cfg80211_put_bss.  Signed-off-by: Krzysztof Wilczynski <krzysztof.wilczynski@linux.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | tidspbridge |  | 11 items |  | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1335984487 |  | Merge 3.4-rc5 into staging-next  This resolves the conflict in: 	drivers/staging/vt6656/ioctl.c  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | speakup |  | 42 items |  | Jiri Slaby | jslaby@suse.cz | 1331236022 |  | TTY: speakup, do not use serialP  The structures there are going away. And speakup has enough troubles already.  So define a structure similar to what 8250 does: old_serial_port. There define an array of speed, port base and so on needed for configuration. Then use this structure instead of serial_state defined in serialP.h.  Signed-off-by: Jiri Slaby <jslaby@suse.cz> Cc: William Hubbs <w.d.hubbs@gmail.com> Cc: Chris Brannon <chris@the-brannons.com> Cc: Kirk Reiser <kirk@braille.uwo.ca> Cc: Samuel Thibault <samuel.thibault@ens-lyon.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | comedi |  | 16 items |  | Randy Dunlap | rdunlap@xenotime.net | 1339458575 |  | staging/comedi: fix build for USB not enabled  Calls to optional subsystems cannot be made indiscriminately. Enclose all of the usb helper functions inside #if IS_ENABLED(CONFIG_USB) to fix these build errors.  (The pci helper functions are OK since there are stubs in linux/pci.h for the called functions when PCI is not enabled. Possibly the same could be done for the called USB functions.)  ERROR: "usb_deregister" [drivers/staging/comedi/comedi.ko] undefined! ERROR: "usb_register_driver" [drivers/staging/comedi/comedi.ko] undefined!  Signed-off-by: Randy Dunlap <rdunlap@xenotime.net> Cc: Ian Abbott <abbotti@mev.co.uk> Cc: Frank Mori Hess <fmhess@users.sourceforge.net> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | telephony |  | 8 items |  | Jesper Juhl | jj@chaosbits.net | 1334078878 |  | staging/telephony/ixj.c: delete trailing whitespace  There's a lot of trailing whitespace in drivers/telephony/ixj.c . This patch removes it.  Signed-off-by: Jesper Juhl <jj@chaosbits.net> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | rts5139 |  | 27 items |  | Justin P. Mattock | justinmattock@gmail.com | 1337027469 |  | staging: "rts5139" Fix typos.  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | wlags49_h25 |  | 38 items |  | Greg Kroah-Hartman | gregkh@suse.de | 1318970164 |  | Staging: wlags49_h25: Makefile: remove unneeded stuff  There's a lot of unused and unneeded things in this makefile, so delete it all.  Reported-by: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
d | crystalhd |  | 16 items |  | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
d | quickstart |  | 3 items |  | Szymon Janc | szymon@janc.net.pl | 1329192536 |  | Staging: quickstart: Fix compilation warning on 64 bit arch  acpi_size is u32 or u64 depending on architecture. Cast it to unsigned long and use %lu for printing.  This fix following build warning: drivers/staging/quickstart/quickstart.c: In function ‘quickstart_acpi_ghid’: drivers/staging/quickstart/quickstart.c:212:5: warning: format ‘%u’ expects argument of type ‘unsigned int’, but argument 3 has type ‘acpi_size’ [-Wformat]  Signed-off-by: Szymon Janc <szymon@janc.net.pl> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
