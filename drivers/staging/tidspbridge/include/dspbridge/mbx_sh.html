<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › tidspbridge › include › dspbridge › mbx_sh.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>mbx_sh.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * mbx_sh.h</span>
<span class="cm"> *</span>
<span class="cm"> * DSP-BIOS Bridge driver support functions for TI OMAP processors.</span>
<span class="cm"> *</span>
<span class="cm"> * Definitions for shared mailbox cmd/data values.(used on both</span>
<span class="cm"> * the GPP and DSP sides).</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2008 Texas Instruments, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> * This package is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * THIS PACKAGE IS PROVIDED ``AS IS&#39;&#39; AND WITHOUT ANY EXPRESS OR</span>
<span class="cm"> * IMPLIED WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED</span>
<span class="cm"> * WARRANTIES OF MERCHANTIBILITY AND FITNESS FOR A PARTICULAR PURPOSE.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> *  Bridge usage of OMAP mailbox 1 is determined by the &quot;class&quot; of the</span>
<span class="cm"> *  mailbox interrupt&#39;s cmd value received. The class value are defined</span>
<span class="cm"> *  as a bit (10 thru 15) being set.</span>
<span class="cm"> *</span>
<span class="cm"> *  Note: Only 16 bits of each  is used. Other 16 bit data reg available.</span>
<span class="cm"> *</span>
<span class="cm"> *   16 bit Mbx bit defns:</span>
<span class="cm"> *</span>
<span class="cm"> * A). Exception/Error handling (Module DEH) : class = 0.</span>
<span class="cm"> *</span>
<span class="cm"> *    15         10                  0</span>
<span class="cm"> *   ---------------------------------</span>
<span class="cm"> *   |0|0|0|0|0|0|x|x|x|x|x|x|x|x|x|x|</span>
<span class="cm"> *   ---------------------------------</span>
<span class="cm"> *   |  (class)  | (module specific) |</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> * B: DSP-DMA link driver channels (DDMA) : class = 1.</span>
<span class="cm"> *</span>
<span class="cm"> *    15         10                  0</span>
<span class="cm"> *   ---------------------------------</span>
<span class="cm"> *   |0|0|0|0|0|1|b|b|b|b|b|c|c|c|c|c|</span>
<span class="cm"> *   ---------------------------------</span>
<span class="cm"> *   |  (class)  | (module specific) |</span>
<span class="cm"> *</span>
<span class="cm"> *   where b -&gt; buffer index  (32 DDMA buffers/chnl max)</span>
<span class="cm"> *         c -&gt; channel Id    (32 DDMA chnls max)</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> * C: Proc-copy link driver channels (PCPY) : class = 2.</span>
<span class="cm"> *</span>
<span class="cm"> *    15         10                  0</span>
<span class="cm"> *   ---------------------------------</span>
<span class="cm"> *   |0|0|0|0|1|0|x|x|x|x|x|x|x|x|x|x|</span>
<span class="cm"> *   ---------------------------------</span>
<span class="cm"> *   |  (class)  | (module specific) |</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> * D: Zero-copy link driver channels (DDZC) : class = 4.</span>
<span class="cm"> *</span>
<span class="cm"> *    15         10                  0</span>
<span class="cm"> *   ---------------------------------</span>
<span class="cm"> *   |0|0|0|1|0|0|x|x|x|x|x|c|c|c|c|c|</span>
<span class="cm"> *   ---------------------------------</span>
<span class="cm"> *   |  (class)  | (module specific) |</span>
<span class="cm"> *</span>
<span class="cm"> *   where x -&gt; not used</span>
<span class="cm"> *         c -&gt; channel Id    (32 ZCPY chnls max)</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> * E: Power management : class = 8.</span>
<span class="cm"> *</span>
<span class="cm"> *    15         10                  0</span>
<span class="cm"> *   ---------------------------------</span>
<span class="cm"> *   |0|0|1|0|0|0|x|x|x|x|x|c|c|c|c|c|</span>

<span class="cm"> * 	0010 00xx xxxc cccc</span>
<span class="cm"> *	0010 00nn pppp qqqq</span>
<span class="cm"> *	nn:</span>
<span class="cm"> *	00 = reserved</span>
<span class="cm"> *	01 = pwr state change</span>
<span class="cm"> *	10 = opp pre-change</span>
<span class="cm"> *	11 = opp post-change</span>
<span class="cm"> *</span>
<span class="cm"> *	if nn = pwr state change:</span>
<span class="cm"> *	pppp = don&#39;t care</span>
<span class="cm"> *	qqqq:</span>
<span class="cm"> *	0010 = hibernate</span>
<span class="cm"> *	0010 0001 0000 0010</span>
<span class="cm"> *	0110 = retention</span>
<span class="cm"> *	0010 0001 0000 0110</span>
<span class="cm"> *	others reserved</span>
<span class="cm"> *</span>
<span class="cm"> *	if nn = opp pre-change:</span>
<span class="cm"> *	pppp = current opp</span>
<span class="cm"> *	qqqq = next opp</span>
<span class="cm"> *</span>
<span class="cm"> *	if nn = opp post-change:</span>
<span class="cm"> *	pppp = prev opp</span>
<span class="cm"> *	qqqq = current opp</span>
<span class="cm"> *</span>
<span class="cm"> *   ---------------------------------</span>
<span class="cm"> *   |  (class)  | (module specific) |</span>
<span class="cm"> *</span>
<span class="cm"> *   where x -&gt; not used</span>
<span class="cm"> *         c -&gt; Power management command</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _MBX_SH_H</span>
<span class="cp">#define _MBX_SH_H</span>

<span class="cp">#define MBX_PCPY_CLASS     0x0800	</span><span class="cm">/* PROC-COPY  &quot; */</span><span class="cp"></span>
<span class="cp">#define MBX_PM_CLASS       0x2000	</span><span class="cm">/* Power Management */</span><span class="cp"></span>
<span class="cp">#define MBX_DBG_CLASS      0x4000	</span><span class="cm">/* For debugging purpose */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Exception Handler codes</span>
<span class="cm"> * Magic code used to determine if DSP signaled exception.</span>
<span class="cm"> */</span>
<span class="cp">#define MBX_DEH_BASE        0x0</span>
<span class="cp">#define MBX_DEH_USERS_BASE  0x100	</span><span class="cm">/* 256 */</span><span class="cp"></span>
<span class="cp">#define MBX_DEH_LIMIT       0x3FF	</span><span class="cm">/* 1023 */</span><span class="cp"></span>
<span class="cp">#define MBX_DEH_RESET       0x101	</span><span class="cm">/* DSP RESET (DEH) */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> *  Link driver command/status codes.</span>
<span class="cm"> */</span>

<span class="cm">/*  Power Management Commands */</span>
<span class="cp">#define MBX_PM_DSPIDLE                  (MBX_PM_CLASS + 0x0)</span>
<span class="cp">#define MBX_PM_DSPWAKEUP                (MBX_PM_CLASS + 0x1)</span>
<span class="cp">#define MBX_PM_EMERGENCYSLEEP           (MBX_PM_CLASS + 0x2)</span>
<span class="cp">#define MBX_PM_SETPOINT_PRENOTIFY       (MBX_PM_CLASS + 0x6)</span>
<span class="cp">#define MBX_PM_SETPOINT_POSTNOTIFY      (MBX_PM_CLASS + 0x7)</span>
<span class="cp">#define MBX_PM_DSPRETENTION        (MBX_PM_CLASS + 0x8)</span>
<span class="cp">#define MBX_PM_DSPHIBERNATE        (MBX_PM_CLASS + 0x9)</span>
<span class="cp">#define MBX_PM_HIBERNATE_EN        (MBX_PM_CLASS + 0xA)</span>
<span class="cp">#define MBX_PM_OPP_REQ                  (MBX_PM_CLASS + 0xB)</span>

<span class="cm">/* Bridge Debug Commands */</span>
<span class="cp">#define MBX_DBG_SYSPRINTF       (MBX_DBG_CLASS + 0x0)</span>

<span class="cp">#endif </span><span class="cm">/* _MBX_SH_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
