<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › tidspbridge › include › dspbridge › dspapi-ioctl.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>dspapi-ioctl.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * dspapi-ioctl.h</span>
<span class="cm"> *</span>
<span class="cm"> * DSP-BIOS Bridge driver support functions for TI OMAP processors.</span>
<span class="cm"> *</span>
<span class="cm"> * Contains structures and commands that are used for interaction</span>
<span class="cm"> * between the DDSP API and Bridge driver.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2008 Texas Instruments, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> * This package is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * THIS PACKAGE IS PROVIDED ``AS IS&#39;&#39; AND WITHOUT ANY EXPRESS OR</span>
<span class="cm"> * IMPLIED WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED</span>
<span class="cm"> * WARRANTIES OF MERCHANTIBILITY AND FITNESS FOR A PARTICULAR PURPOSE.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef DSPAPIIOCTL_</span>
<span class="cp">#define DSPAPIIOCTL_</span>

<span class="cp">#include &lt;dspbridge/cmm.h&gt;</span>
<span class="cp">#include &lt;dspbridge/strmdefs.h&gt;</span>
<span class="cp">#include &lt;dspbridge/dbdcd.h&gt;</span>

<span class="k">union</span> <span class="n">trapped_args</span> <span class="p">{</span>

	<span class="cm">/* MGR Module */</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u32</span> <span class="n">node_id</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_ndbprops</span> <span class="n">__user</span> <span class="o">*</span><span class="n">ndb_props</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">ndb_props_size</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">num_nodes</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_mgr_enumnode_info</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u32</span> <span class="n">processor_id</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_processorinfo</span> <span class="n">__user</span> <span class="o">*</span><span class="n">processor_info</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">processor_info_size</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">num_procs</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_mgr_enumproc_info</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">dsp_uuid</span> <span class="o">*</span><span class="n">uuid_obj</span><span class="p">;</span>
		<span class="k">enum</span> <span class="n">dsp_dcdobjtype</span> <span class="n">obj_type</span><span class="p">;</span>
		<span class="kt">char</span> <span class="o">*</span><span class="n">sz_path_name</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_mgr_registerobject</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">dsp_uuid</span> <span class="o">*</span><span class="n">uuid_obj</span><span class="p">;</span>
		<span class="k">enum</span> <span class="n">dsp_dcdobjtype</span> <span class="n">obj_type</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_mgr_unregisterobject</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">dsp_notification</span> <span class="n">__user</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">anotifications</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">count</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">index</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">timeout</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_mgr_wait</span><span class="p">;</span>

	<span class="cm">/* PROC Module */</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u32</span> <span class="n">processor_id</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_processorattrin</span> <span class="n">__user</span> <span class="o">*</span><span class="n">attr_in</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">ph_processor</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_attach</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">cmd</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_cbdata</span> <span class="n">__user</span> <span class="o">*</span><span class="n">args</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_ctrl</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_detach</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">node_tab</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">node_tab_size</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">num_nodes</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">allocated</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_enumnode_info</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">resource_type</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_resourceinfo</span> <span class="o">*</span><span class="n">resource_info</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">resource_info_size</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_enumresources</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_processorstate</span> <span class="n">__user</span> <span class="o">*</span><span class="n">proc_state_obj</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">state_info_size</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_getstate</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">__user</span> <span class="o">*</span><span class="n">buf</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">__user</span> <span class="o">*</span><span class="n">size</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">max_size</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_gettrace</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="n">s32</span> <span class="n">argc_index</span><span class="p">;</span>
		<span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">user_args</span><span class="p">;</span>
		<span class="kt">char</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">user_envp</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_load</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">event_mask</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">notify_type</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_notification</span> <span class="n">__user</span> <span class="o">*</span><span class="n">notification</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_register_notify</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">size</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">rsv_addr</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_rsvmem</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">size</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">rsv_addr</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_unrsvmem</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">mpu_addr</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">size</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">req_addr</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">map_addr</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">map_attr</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_mapmem</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">size</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">map_addr</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_unmapmem</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">mpu_addr</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">size</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">dir</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_dma</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">mpu_addr</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">size</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_flushmemory</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">mpu_addr</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">size</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_proc_invalidatememory</span><span class="p">;</span>

	<span class="cm">/* NODE Module */</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_uuid</span> <span class="n">__user</span> <span class="o">*</span><span class="n">node_id_ptr</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_cbdata</span> <span class="n">__user</span> <span class="o">*</span><span class="n">args</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_nodeattrin</span> <span class="n">__user</span> <span class="o">*</span><span class="n">attr_in</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_allocate</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">size</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_bufferattr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">attr</span><span class="p">;</span>
		<span class="n">u8</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">buffer</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_allocmsgbuf</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
		<span class="n">s32</span> <span class="n">prio</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_changepriority</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">stream_id</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">other_node</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">other_stream</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_strmattr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">attrs</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_cbdata</span> <span class="n">__user</span> <span class="o">*</span><span class="n">conn_param</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_connect</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_create</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_delete</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_bufferattr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">attr</span><span class="p">;</span>
		<span class="n">u8</span> <span class="o">*</span><span class="n">buffer</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_freemsgbuf</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_nodeattr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">attr</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">attr_size</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_getattr</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_msg</span> <span class="n">__user</span> <span class="o">*</span><span class="n">message</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">timeout</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_getmessage</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_pause</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_msg</span> <span class="n">__user</span> <span class="o">*</span><span class="n">message</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">timeout</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_putmessage</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">event_mask</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">notify_type</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_notification</span> <span class="n">__user</span> <span class="o">*</span><span class="n">notification</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_registernotify</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_run</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">__user</span> <span class="o">*</span><span class="n">status</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_terminate</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_uuid</span> <span class="n">__user</span> <span class="o">*</span><span class="n">node_id_ptr</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_ndbprops</span> <span class="n">__user</span> <span class="o">*</span><span class="n">node_props</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_node_getuuidprops</span><span class="p">;</span>

	<span class="cm">/* STRM module */</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">stream</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">size</span><span class="p">;</span>
		<span class="n">u8</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">ap_buffer</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">num_bufs</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_strm_allocatebuffer</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">stream</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_strm_close</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">stream</span><span class="p">;</span>
		<span class="n">u8</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">ap_buffer</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">num_bufs</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_strm_freebuffer</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">stream</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">**</span><span class="n">event</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_strm_geteventhandle</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">stream</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">stream_info</span> <span class="n">__user</span> <span class="o">*</span><span class="n">stream_info</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">stream_info_size</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_strm_getinfo</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">stream</span><span class="p">;</span>
		<span class="n">bool</span> <span class="n">flush_flag</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_strm_idle</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">stream</span><span class="p">;</span>
		<span class="n">u8</span> <span class="o">*</span><span class="n">buffer</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">bytes</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">buf_size</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">arg</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_strm_issue</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">node</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">direction</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">index</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">strm_attr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">attr_in</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">stream</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_strm_open</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">stream</span><span class="p">;</span>
		<span class="n">u8</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">buf_ptr</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">bytes</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">buf_size_ptr</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">arg</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_strm_reclaim</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">stream</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">event_mask</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">notify_type</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">dsp_notification</span> <span class="n">__user</span> <span class="o">*</span><span class="n">notification</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_strm_registernotify</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">stream_tab</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">strm_num</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">mask</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">timeout</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_strm_select</span><span class="p">;</span>

	<span class="cm">/* CMM Module */</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">cmm_object</span> <span class="o">*</span><span class="n">cmm_mgr</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">size</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">cmm_attrs</span> <span class="o">*</span><span class="n">attrs</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">**</span><span class="n">buf_va</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_cmm_allocbuf</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">cmm_object</span> <span class="o">*</span><span class="n">cmm_mgr</span><span class="p">;</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">buf_pa</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">seg_id</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_cmm_freebuf</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">processor</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">cmm_object</span> <span class="o">*</span><span class="n">__user</span> <span class="o">*</span><span class="n">cmm_mgr</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_cmm_gethandle</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">cmm_object</span> <span class="o">*</span><span class="n">cmm_mgr</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">cmm_info</span> <span class="n">__user</span> <span class="o">*</span><span class="n">cmm_info_obj</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_cmm_getinfo</span><span class="p">;</span>

	<span class="cm">/* UTIL module */</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">s32</span> <span class="n">util_argc</span><span class="p">;</span>
		<span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">args_util_testdll</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Dspbridge Ioctl numbering scheme</span>
<span class="cm"> *</span>
<span class="cm"> *    7                           0</span>
<span class="cm"> *  ---------------------------------</span>
<span class="cm"> *  |  Module   |   Ioctl Number    |</span>
<span class="cm"> *  ---------------------------------</span>
<span class="cm"> *  | x | x | x | 0 | 0 | 0 | 0 | 0 |</span>
<span class="cm"> *  ---------------------------------</span>
<span class="cm"> */</span>

<span class="cm">/* Ioctl driver identifier */</span>
<span class="cp">#define DB		0xDB</span>

<span class="cm">/*</span>
<span class="cm"> * Following are used to distinguish between module ioctls, this is needed</span>
<span class="cm"> * in case new ioctls are introduced.</span>
<span class="cm"> */</span>
<span class="cp">#define DB_MODULE_MASK		0xE0</span>
<span class="cp">#define DB_IOC_MASK		0x1F</span>

<span class="cm">/* Ioctl module masks */</span>
<span class="cp">#define DB_MGR		0x0</span>
<span class="cp">#define DB_PROC		0x20</span>
<span class="cp">#define DB_NODE		0x40</span>
<span class="cp">#define DB_STRM		0x60</span>
<span class="cp">#define DB_CMM		0x80</span>

<span class="cp">#define DB_MODULE_SHIFT		5</span>

<span class="cm">/* Used to calculate the ioctl per dspbridge module */</span>
<span class="cp">#define DB_IOC(module, num) \</span>
<span class="cp">			(((module) &amp; DB_MODULE_MASK) | ((num) &amp; DB_IOC_MASK))</span>
<span class="cm">/* Used to get dspbridge ioctl module */</span>
<span class="cp">#define DB_GET_MODULE(cmd)	((cmd) &amp; DB_MODULE_MASK)</span>
<span class="cm">/* Used to get dspbridge ioctl number */</span>
<span class="cp">#define DB_GET_IOC(cmd)		((cmd) &amp; DB_IOC_MASK)</span>

<span class="cm">/* TODO: Remove deprecated and not implemented */</span>

<span class="cm">/* MGR Module */</span>
<span class="cp">#define MGR_ENUMNODE_INFO	_IOWR(DB, DB_IOC(DB_MGR, 0), unsigned long)</span>
<span class="cp">#define MGR_ENUMPROC_INFO	_IOWR(DB, DB_IOC(DB_MGR, 1), unsigned long)</span>
<span class="cp">#define MGR_REGISTEROBJECT	_IOWR(DB, DB_IOC(DB_MGR, 2), unsigned long)</span>
<span class="cp">#define MGR_UNREGISTEROBJECT	_IOWR(DB, DB_IOC(DB_MGR, 3), unsigned long)</span>
<span class="cp">#define MGR_WAIT		_IOWR(DB, DB_IOC(DB_MGR, 4), unsigned long)</span>
<span class="cm">/* MGR_GET_PROC_RES Deprecated */</span>
<span class="cp">#define MGR_GET_PROC_RES	_IOR(DB, DB_IOC(DB_MGR, 5), unsigned long)</span>

<span class="cm">/* PROC Module */</span>
<span class="cp">#define PROC_ATTACH		_IOWR(DB, DB_IOC(DB_PROC, 0), unsigned long)</span>
<span class="cp">#define PROC_CTRL		_IOR(DB, DB_IOC(DB_PROC, 1), unsigned long)</span>
<span class="cm">/* PROC_DETACH Deprecated */</span>
<span class="cp">#define PROC_DETACH		_IOR(DB, DB_IOC(DB_PROC, 2), unsigned long)</span>
<span class="cp">#define PROC_ENUMNODE		_IOWR(DB, DB_IOC(DB_PROC, 3), unsigned long)</span>
<span class="cp">#define PROC_ENUMRESOURCES	_IOWR(DB, DB_IOC(DB_PROC, 4), unsigned long)</span>
<span class="cp">#define PROC_GET_STATE		_IOWR(DB, DB_IOC(DB_PROC, 5), unsigned long)</span>
<span class="cp">#define PROC_GET_TRACE		_IOWR(DB, DB_IOC(DB_PROC, 6), unsigned long)</span>
<span class="cp">#define PROC_LOAD		_IOW(DB, DB_IOC(DB_PROC, 7), unsigned long)</span>
<span class="cp">#define PROC_REGISTERNOTIFY	_IOWR(DB, DB_IOC(DB_PROC, 8), unsigned long)</span>
<span class="cp">#define PROC_START		_IOW(DB, DB_IOC(DB_PROC, 9), unsigned long)</span>
<span class="cp">#define PROC_RSVMEM		_IOWR(DB, DB_IOC(DB_PROC, 10), unsigned long)</span>
<span class="cp">#define PROC_UNRSVMEM		_IOW(DB, DB_IOC(DB_PROC, 11), unsigned long)</span>
<span class="cp">#define PROC_MAPMEM		_IOWR(DB, DB_IOC(DB_PROC, 12), unsigned long)</span>
<span class="cp">#define PROC_UNMAPMEM		_IOR(DB, DB_IOC(DB_PROC, 13), unsigned long)</span>
<span class="cp">#define PROC_FLUSHMEMORY	_IOW(DB, DB_IOC(DB_PROC, 14), unsigned long)</span>
<span class="cp">#define PROC_STOP		_IOWR(DB, DB_IOC(DB_PROC, 15), unsigned long)</span>
<span class="cp">#define PROC_INVALIDATEMEMORY	_IOW(DB, DB_IOC(DB_PROC, 16), unsigned long)</span>
<span class="cp">#define PROC_BEGINDMA		_IOW(DB, DB_IOC(DB_PROC, 17), unsigned long)</span>
<span class="cp">#define PROC_ENDDMA		_IOW(DB, DB_IOC(DB_PROC, 18), unsigned long)</span>

<span class="cm">/* NODE Module */</span>
<span class="cp">#define NODE_ALLOCATE		_IOWR(DB, DB_IOC(DB_NODE, 0), unsigned long)</span>
<span class="cp">#define NODE_ALLOCMSGBUF	_IOWR(DB, DB_IOC(DB_NODE, 1), unsigned long)</span>
<span class="cp">#define NODE_CHANGEPRIORITY	_IOW(DB, DB_IOC(DB_NODE, 2), unsigned long)</span>
<span class="cp">#define NODE_CONNECT		_IOW(DB, DB_IOC(DB_NODE, 3), unsigned long)</span>
<span class="cp">#define NODE_CREATE		_IOW(DB, DB_IOC(DB_NODE, 4), unsigned long)</span>
<span class="cp">#define NODE_DELETE		_IOW(DB, DB_IOC(DB_NODE, 5), unsigned long)</span>
<span class="cp">#define NODE_FREEMSGBUF		_IOW(DB, DB_IOC(DB_NODE, 6), unsigned long)</span>
<span class="cp">#define NODE_GETATTR		_IOWR(DB, DB_IOC(DB_NODE, 7), unsigned long)</span>
<span class="cp">#define NODE_GETMESSAGE		_IOWR(DB, DB_IOC(DB_NODE, 8), unsigned long)</span>
<span class="cp">#define NODE_PAUSE		_IOW(DB, DB_IOC(DB_NODE, 9), unsigned long)</span>
<span class="cp">#define NODE_PUTMESSAGE		_IOW(DB, DB_IOC(DB_NODE, 10), unsigned long)</span>
<span class="cp">#define NODE_REGISTERNOTIFY	_IOWR(DB, DB_IOC(DB_NODE, 11), unsigned long)</span>
<span class="cp">#define NODE_RUN		_IOW(DB, DB_IOC(DB_NODE, 12), unsigned long)</span>
<span class="cp">#define NODE_TERMINATE		_IOWR(DB, DB_IOC(DB_NODE, 13), unsigned long)</span>
<span class="cp">#define NODE_GETUUIDPROPS	_IOWR(DB, DB_IOC(DB_NODE, 14), unsigned long)</span>

<span class="cm">/* STRM Module */</span>
<span class="cp">#define STRM_ALLOCATEBUFFER	_IOWR(DB, DB_IOC(DB_STRM, 0), unsigned long)</span>
<span class="cp">#define STRM_CLOSE		_IOW(DB, DB_IOC(DB_STRM, 1), unsigned long)</span>
<span class="cp">#define STRM_FREEBUFFER		_IOWR(DB, DB_IOC(DB_STRM, 2), unsigned long)</span>
<span class="cp">#define STRM_GETEVENTHANDLE	_IO(DB, DB_IOC(DB_STRM, 3))	</span><span class="cm">/* Not Impl&#39;d */</span><span class="cp"></span>
<span class="cp">#define STRM_GETINFO		_IOWR(DB, DB_IOC(DB_STRM, 4), unsigned long)</span>
<span class="cp">#define STRM_IDLE		_IOW(DB, DB_IOC(DB_STRM, 5), unsigned long)</span>
<span class="cp">#define STRM_ISSUE		_IOW(DB, DB_IOC(DB_STRM, 6), unsigned long)</span>
<span class="cp">#define STRM_OPEN		_IOWR(DB, DB_IOC(DB_STRM, 7), unsigned long)</span>
<span class="cp">#define STRM_RECLAIM		_IOWR(DB, DB_IOC(DB_STRM, 8), unsigned long)</span>
<span class="cp">#define STRM_REGISTERNOTIFY	_IOWR(DB, DB_IOC(DB_STRM, 9), unsigned long)</span>
<span class="cp">#define STRM_SELECT		_IOWR(DB, DB_IOC(DB_STRM, 10), unsigned long)</span>

<span class="cm">/* CMM Module */</span>
<span class="cp">#define CMM_ALLOCBUF		_IO(DB, DB_IOC(DB_CMM, 0))	</span><span class="cm">/* Not Impl&#39;d */</span><span class="cp"></span>
<span class="cp">#define CMM_FREEBUF		_IO(DB, DB_IOC(DB_CMM, 1))	</span><span class="cm">/* Not Impl&#39;d */</span><span class="cp"></span>
<span class="cp">#define CMM_GETHANDLE		_IOR(DB, DB_IOC(DB_CMM, 2), unsigned long)</span>
<span class="cp">#define CMM_GETINFO		_IOR(DB, DB_IOC(DB_CMM, 3), unsigned long)</span>

<span class="cp">#endif </span><span class="cm">/* DSPAPIIOCTL_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
