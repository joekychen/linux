<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › cxt1e1 › sbe_promformat.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>sbe_promformat.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _INC_SBE_PROMFORMAT_H_</span>
<span class="cp">#define _INC_SBE_PROMFORMAT_H_</span>

<span class="cm">/*-----------------------------------------------------------------------------</span>
<span class="cm"> * sbe_promformat.h - Contents of seeprom used by dvt and manufacturing tests</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2002-2005  SBE, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> *   This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *   it under the terms of the GNU General Public License as published by</span>
<span class="cm"> *   the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> *   (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *   This program is distributed in the hope that it will be useful,</span>
<span class="cm"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> *   GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * For further information, contact via email: support@sbei.com</span>
<span class="cm"> * SBE, Inc.  San Ramon, California  U.S.A.</span>
<span class="cm"> *</span>
<span class="cm"> *-----------------------------------------------------------------------------</span>
<span class="cm"> */</span>


<span class="cm">/***</span>
<span class="cm"> *  PMCC4 SAMPLE EEPROM IMAGE</span>
<span class="cm"> *</span>
<span class="cm"> *  eeprom[00]:  01 11 76 07  01 00 a0 d6</span>
<span class="cm"> *  eeprom[08]:  22 34 56 3e  5b c1 1c 3e</span>
<span class="cm"> *  eeprom[16]:  5b e1 b6 00  00 00 01 00</span>
<span class="cm"> *  eeprom[24]:  00 08 46 d3  7b 5e a8 fb</span>
<span class="cm"> *  eeprom[32]:  f7 ef df bf  7f 55 00 01</span>
<span class="cm"> *  eeprom[40]:  02 04 08 10  20 40 80 ff</span>
<span class="cm"> *  eeprom[48]:  fe fd fb f7  ef df bf 7f</span>
<span class="cm"> *</span>
<span class="cm"> ***/</span>


<span class="cm">/*------------------------------------------------------------------------</span>
<span class="cm"> *          Type 1 Format</span>
<span class="cm"> * byte:</span>
<span class="cm"> * 0    1  2    3  4      5   6   7    8  9  10    11 12 13 14    15 16 17 18</span>
<span class="cm"> * -------------------------------------------------------------------------</span>
<span class="cm"> * 01   11 76   SS SS     00 0A D6 &lt;SERIAL NUM&gt;    &lt;Create TIME&gt;  &lt;Heatrun TIME&gt;</span>
<span class="cm"> *       SBE    SUB       SERIAL #    (BCD)         (time_t)       (time_t)</span>
<span class="cm"> *       ID     VENDOR                              (format)       (format)</span>
<span class="cm"> *</span>
<span class="cm"> *  19 20 21 22    23 24 25 26</span>
<span class="cm"> *  Heat Run        Heat Run</span>
<span class="cm"> *  Iterations      Errors</span>
<span class="cm"> *------------------------------------------------------------------------</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> *           Type 2 Format  - Added length, CRC in fixed position</span>
<span class="cm"> * byte:</span>
<span class="cm"> * 0    1  2       3  4  5  6      7  8        9  10     11 12 13 14 15 16</span>
<span class="cm"> * -------------------------------------------------------------------------</span>
<span class="cm"> * 02   00 1A      CC CC CC CC    11  76       07 03    00 0A D6 &lt;SERIAL NUM&gt;</span>
<span class="cm"> *      Payload    SBE Crc32      SUB System   System    SERIAL/MAC</span>
<span class="cm"> *      Length                    VENDOR ID    ID</span>
<span class="cm"> *</span>
<span class="cm"> *  17 18 19 20     21 22 23 24     25 26 27 28    29 39 31 32</span>
<span class="cm"> * --------------------------------------------------------------------------</span>
<span class="cm"> *  &lt;Create TIME&gt;   &lt;Heatrun TIME&gt;   Heat Run      Heat Run</span>
<span class="cm"> *  (time_t)         (time_t)        Iterations    Errors</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#define STRUCT_OFFSET(type, symbol)  ((long)&amp;(((type *)0)-&gt;symbol))</span>

<span class="cm">/*------------------------------------------------------------------------</span>
<span class="cm"> *  Historically different Prom format types.</span>
<span class="cm"> *</span>
<span class="cm"> *  For diagnostic and failure purposes, do not create a type 0x00 or a</span>
<span class="cm"> *  type 0xff</span>
<span class="cm"> *------------------------------------------------------------------------</span>
<span class="cm"> */</span>
<span class="cp">#define PROM_FORMAT_Unk   (-1)</span>
<span class="cp">#define PROM_FORMAT_TYPE1   1</span>
<span class="cp">#define PROM_FORMAT_TYPE2   2</span>


<span class="cm">/****** bit fields  for a type 1 formatted seeprom **************************/</span>
    <span class="k">typedef</span> <span class="k">struct</span>
    <span class="p">{</span>
        <span class="kt">char</span>        <span class="n">type</span><span class="p">;</span>       <span class="cm">/* 0x00 */</span>
        <span class="kt">char</span>        <span class="n">Id</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>      <span class="cm">/* 0x01-0x02 */</span>
        <span class="kt">char</span>        <span class="n">SubId</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>   <span class="cm">/* 0x03-0x04 */</span>
        <span class="kt">char</span>        <span class="n">Serial</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>  <span class="cm">/* 0x05-0x0a */</span>
        <span class="kt">char</span>        <span class="n">CreateTime</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>      <span class="cm">/* 0x0b-0x0e */</span>
        <span class="kt">char</span>        <span class="n">HeatRunTime</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>     <span class="cm">/* 0x0f-0x12 */</span>
        <span class="kt">char</span>        <span class="n">HeatRunIterations</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>       <span class="cm">/* 0x13-0x16 */</span>
        <span class="kt">char</span>        <span class="n">HeatRunErrors</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>   <span class="cm">/* 0x17-0x1a */</span>
        <span class="kt">char</span>        <span class="n">Crc32</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>   <span class="cm">/* 0x1b-0x1e */</span>
    <span class="p">}</span>           <span class="n">FLD_TYPE1</span><span class="p">;</span>


<span class="cm">/****** bit fields  for a type 2 formatted seeprom **************************/</span>
    <span class="k">typedef</span> <span class="k">struct</span>
    <span class="p">{</span>
        <span class="kt">char</span>        <span class="n">type</span><span class="p">;</span>       <span class="cm">/* 0x00 */</span>
        <span class="kt">char</span>        <span class="n">length</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>  <span class="cm">/* 0x01-0x02 */</span>
        <span class="kt">char</span>        <span class="n">Crc32</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>   <span class="cm">/* 0x03-0x06 */</span>
        <span class="kt">char</span>        <span class="n">Id</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>      <span class="cm">/* 0x07-0x08 */</span>
        <span class="kt">char</span>        <span class="n">SubId</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>   <span class="cm">/* 0x09-0x0a */</span>
        <span class="kt">char</span>        <span class="n">Serial</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>  <span class="cm">/* 0x0b-0x10 */</span>
        <span class="kt">char</span>        <span class="n">CreateTime</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>      <span class="cm">/* 0x11-0x14 */</span>
        <span class="kt">char</span>        <span class="n">HeatRunTime</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>     <span class="cm">/* 0x15-0x18 */</span>
        <span class="kt">char</span>        <span class="n">HeatRunIterations</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>       <span class="cm">/* 0x19-0x1c */</span>
        <span class="kt">char</span>        <span class="n">HeatRunErrors</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>   <span class="cm">/* 0x1d-0x20 */</span>
    <span class="p">}</span>           <span class="n">FLD_TYPE2</span><span class="p">;</span>



<span class="cm">/***** this union allows us to access the seeprom as an array of bytes ***/</span>
<span class="cm">/***** or as individual fields                                         ***/</span>

<span class="cp">#define SBE_EEPROM_SIZE    128</span>
<span class="cp">#define SBE_MFG_INFO_SIZE  sizeof(FLD_TYPE2)</span>

    <span class="k">typedef</span> <span class="k">union</span>
    <span class="p">{</span>
        <span class="kt">char</span>        <span class="n">bytes</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
        <span class="n">FLD_TYPE1</span>   <span class="n">fldType1</span><span class="p">;</span>
        <span class="n">FLD_TYPE2</span>   <span class="n">fldType2</span><span class="p">;</span>
    <span class="p">}</span>           <span class="n">PROMFORMAT</span><span class="p">;</span>

<span class="cp">#endif                          </span><span class="cm">/*** _INC_SBE_PROMFORMAT_H_ ***/</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
