<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › sep › sep_driver_config.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>sep_driver_config.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *</span>
<span class="cm"> *  sep_driver_config.h - Security Processor Driver configuration</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright(c) 2009-2011 Intel Corporation. All rights reserved.</span>
<span class="cm"> *  Contributions(c) 2009-2011 Discretix. All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute it and/or modify it</span>
<span class="cm"> *  under the terms of the GNU General Public License as published by the Free</span>
<span class="cm"> *  Software Foundation; version 2 of the License.</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="cm"> *  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<span class="cm"> *  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for</span>
<span class="cm"> *  more details.</span>
<span class="cm"> *</span>
<span class="cm"> *  You should have received a copy of the GNU General Public License along with</span>
<span class="cm"> *  this program; if not, write to the Free Software Foundation, Inc., 59</span>
<span class="cm"> *  Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
<span class="cm"> *</span>
<span class="cm"> *  CONTACTS:</span>
<span class="cm"> *</span>
<span class="cm"> *  Mark Allyn		mark.a.allyn@intel.com</span>
<span class="cm"> *  Jayant Mangalampalli jayant.mangalampalli@intel.com</span>
<span class="cm"> *</span>
<span class="cm"> *  CHANGES:</span>
<span class="cm"> *</span>
<span class="cm"> *  2010.06.26	Upgrade to Medfield</span>
<span class="cm"> *  2011.02.22  Enable kernel crypto</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __SEP_DRIVER_CONFIG_H__</span>
<span class="cp">#define __SEP_DRIVER_CONFIG_H__</span>


<span class="cm">/*--------------------------------------</span>
<span class="cm">  DRIVER CONFIGURATION FLAGS</span>
<span class="cm">  -------------------------------------*/</span>

<span class="cm">/* if flag is on , then the driver is running in polling and</span>
<span class="cm">	not interrupt mode */</span>
<span class="cp">#define SEP_DRIVER_POLLING_MODE                         0</span>

<span class="cm">/* flag which defines if the shared area address should be</span>
<span class="cm">	reconfiged (send to SEP anew) during init of the driver */</span>
<span class="cp">#define SEP_DRIVER_RECONFIG_MESSAGE_AREA                0</span>

<span class="cm">/* the mode for running on the ARM1172 Evaluation platform (flag is 1) */</span>
<span class="cp">#define SEP_DRIVER_ARM_DEBUG_MODE                       0</span>

<span class="cm">/* Critical message area contents for sanity checking */</span>
<span class="cp">#define SEP_START_MSG_TOKEN				0x02558808</span>
<span class="cm">/*-------------------------------------------</span>
<span class="cm">	INTERNAL DATA CONFIGURATION</span>
<span class="cm">	-------------------------------------------*/</span>

<span class="cm">/* flag for the input array */</span>
<span class="cp">#define SEP_DRIVER_IN_FLAG                              0</span>

<span class="cm">/* flag for output array */</span>
<span class="cp">#define SEP_DRIVER_OUT_FLAG                             1</span>

<span class="cm">/* maximum number of entries in one LLI tables */</span>
<span class="cp">#define SEP_DRIVER_ENTRIES_PER_TABLE_IN_SEP             31</span>

<span class="cm">/* minimum data size of the MLLI table */</span>
<span class="cp">#define SEP_DRIVER_MIN_DATA_SIZE_PER_TABLE		16</span>

<span class="cm">/* flag that signifies tah the lock is</span>
<span class="cm">currently held by the process (struct file) */</span>
<span class="cp">#define SEP_DRIVER_OWN_LOCK_FLAG                        1</span>

<span class="cm">/* flag that signifies tah the lock is currently NOT</span>
<span class="cm">held by the process (struct file) */</span>
<span class="cp">#define SEP_DRIVER_DISOWN_LOCK_FLAG                     0</span>

<span class="cm">/* indicates whether driver has mapped/unmapped shared area */</span>
<span class="cp">#define SEP_REQUEST_DAEMON_MAPPED 1</span>
<span class="cp">#define SEP_REQUEST_DAEMON_UNMAPPED 0</span>

<span class="cm">/*--------------------------------------------------------</span>
<span class="cm">	SHARED AREA  memory total size is 36K</span>
<span class="cm">	it is divided is following:</span>

<span class="cm">	SHARED_MESSAGE_AREA                     8K         }</span>
<span class="cm">									}</span>
<span class="cm">	STATIC_POOL_AREA                        4K         } MAPPED AREA ( 24 K)</span>
<span class="cm">									}</span>
<span class="cm">	DATA_POOL_AREA                          12K        }</span>

<span class="cm">	SYNCHRONIC_DMA_TABLES_AREA              29K</span>

<span class="cm">	placeholder until drver changes</span>
<span class="cm">	FLOW_DMA_TABLES_AREA                    4K</span>

<span class="cm">	SYSTEM_MEMORY_AREA                      3k</span>

<span class="cm">	SYSTEM_MEMORY total size is 3k</span>
<span class="cm">	it is divided as following:</span>

<span class="cm">	TIME_MEMORY_AREA                     8B</span>
<span class="cm">-----------------------------------------------------------*/</span>

<span class="cp">#define SEP_DEV_NAME &quot;sep_sec_driver&quot;</span>
<span class="cp">#define SEP_DEV_SINGLETON &quot;sep_sec_singleton_driver&quot;</span>
<span class="cp">#define SEP_DEV_DAEMON &quot;sep_req_daemon_driver&quot;</span>


<span class="cm">/*</span>
<span class="cm">	the minimum length of the message - includes 2 reserved fields</span>
<span class="cm">	at the start, then token, message size and opcode fields. all dwords</span>
<span class="cm">*/</span>
<span class="cp">#define SEP_DRIVER_MIN_MESSAGE_SIZE_IN_BYTES			(5*sizeof(u32))</span>

<span class="cm">/*</span>
<span class="cm">	the maximum length of the message - the rest of the message shared</span>
<span class="cm">	area will be dedicated to the dma lli tables</span>
<span class="cm">*/</span>
<span class="cp">#define SEP_DRIVER_MAX_MESSAGE_SIZE_IN_BYTES			(8 * 1024)</span>

<span class="cm">/* the size of the message shared area in pages */</span>
<span class="cp">#define SEP_DRIVER_MESSAGE_SHARED_AREA_SIZE_IN_BYTES		(8 * 1024)</span>

<span class="cm">/* the size of the data pool static area in pages */</span>
<span class="cp">#define SEP_DRIVER_STATIC_AREA_SIZE_IN_BYTES			(4 * 1024)</span>

<span class="cm">/* the size of the data pool shared area size in pages */</span>
<span class="cp">#define SEP_DRIVER_DATA_POOL_SHARED_AREA_SIZE_IN_BYTES		(16 * 1024)</span>

<span class="cm">/* the size of the message shared area in pages */</span>
<span class="cp">#define SYNCHRONIC_DMA_TABLES_AREA_SIZE_BYTES	(1024 * 29)</span>

<span class="cm">/* Placeholder until driver changes */</span>
<span class="cp">#define SEP_DRIVER_FLOW_DMA_TABLES_AREA_SIZE_IN_BYTES		(1024 * 4)</span>

<span class="cm">/* system data (time, caller id etc&#39;) pool */</span>
<span class="cp">#define SEP_DRIVER_SYSTEM_DATA_MEMORY_SIZE_IN_BYTES		(1024 * 3)</span>

<span class="cm">/* Offset of the sep printf buffer in the message area */</span>
<span class="cp">#define SEP_DRIVER_PRINTF_OFFSET_IN_BYTES			(5888)</span>

<span class="cm">/* the size in bytes of the time memory */</span>
<span class="cp">#define SEP_DRIVER_TIME_MEMORY_SIZE_IN_BYTES			8</span>

<span class="cm">/* the size in bytes of the RAR parameters memory */</span>
<span class="cp">#define SEP_DRIVER_SYSTEM_RAR_MEMORY_SIZE_IN_BYTES		8</span>

<span class="cm">/* area size that is mapped  - we map the MESSAGE AREA, STATIC POOL and</span>
<span class="cm">	DATA POOL areas. area must be module 4k */</span>
<span class="cp">#define SEP_DRIVER_MMMAP_AREA_SIZE				(1024 * 28)</span>

<span class="cm">/*-----------------------------------------------</span>
<span class="cm">	offsets of the areas starting from the shared area start address</span>
<span class="cm">*/</span>

<span class="cm">/* message area offset */</span>
<span class="cp">#define SEP_DRIVER_MESSAGE_AREA_OFFSET_IN_BYTES			0</span>

<span class="cm">/* static pool area offset */</span>
<span class="cp">#define SEP_DRIVER_STATIC_AREA_OFFSET_IN_BYTES \</span>
<span class="cp">	(SEP_DRIVER_MESSAGE_SHARED_AREA_SIZE_IN_BYTES)</span>

<span class="cm">/* data pool area offset */</span>
<span class="cp">#define SEP_DRIVER_DATA_POOL_AREA_OFFSET_IN_BYTES \</span>
<span class="cp">	(SEP_DRIVER_STATIC_AREA_OFFSET_IN_BYTES + \</span>
<span class="cp">	SEP_DRIVER_STATIC_AREA_SIZE_IN_BYTES)</span>

<span class="cm">/* synhronic dma tables area offset */</span>
<span class="cp">#define SYNCHRONIC_DMA_TABLES_AREA_OFFSET_BYTES \</span>
<span class="cp">	(SEP_DRIVER_DATA_POOL_AREA_OFFSET_IN_BYTES + \</span>
<span class="cp">	SEP_DRIVER_DATA_POOL_SHARED_AREA_SIZE_IN_BYTES)</span>

<span class="cm">/* system memory offset in bytes */</span>
<span class="cp">#define SEP_DRIVER_SYSTEM_DATA_MEMORY_OFFSET_IN_BYTES \</span>
<span class="cp">	(SYNCHRONIC_DMA_TABLES_AREA_OFFSET_BYTES + \</span>
<span class="cp">	SYNCHRONIC_DMA_TABLES_AREA_SIZE_BYTES)</span>

<span class="cm">/* offset of the time area */</span>
<span class="cp">#define SEP_DRIVER_SYSTEM_TIME_MEMORY_OFFSET_IN_BYTES \</span>
<span class="cp">	(SEP_DRIVER_SYSTEM_DATA_MEMORY_OFFSET_IN_BYTES)</span>

<span class="cm">/* offset of the RAR area */</span>
<span class="cp">#define SEP_DRIVER_SYSTEM_RAR_MEMORY_OFFSET_IN_BYTES \</span>
<span class="cp">	(SEP_DRIVER_SYSTEM_TIME_MEMORY_OFFSET_IN_BYTES + \</span>
<span class="cp">	SEP_DRIVER_TIME_MEMORY_SIZE_IN_BYTES)</span>

<span class="cm">/* offset of the caller id area */</span>
<span class="cp">#define SEP_CALLER_ID_OFFSET_BYTES \</span>
<span class="cp">	(SEP_DRIVER_SYSTEM_RAR_MEMORY_OFFSET_IN_BYTES + \</span>
<span class="cp">	SEP_DRIVER_SYSTEM_RAR_MEMORY_SIZE_IN_BYTES)</span>

<span class="cm">/* offset of the DCB area */</span>
<span class="cp">#define SEP_DRIVER_SYSTEM_DCB_MEMORY_OFFSET_IN_BYTES \</span>
<span class="cp">	(SEP_DRIVER_SYSTEM_DATA_MEMORY_OFFSET_IN_BYTES + \</span>
<span class="cp">	0x400)</span>

<span class="cm">/* offset of the ext cache area */</span>
<span class="cp">#define SEP_DRIVER_SYSTEM_EXT_CACHE_ADDR_OFFSET_IN_BYTES \</span>
<span class="cp">	SEP_DRIVER_SYSTEM_RAR_MEMORY_OFFSET_IN_BYTES</span>

<span class="cm">/* offset of the allocation data pointer area */</span>
<span class="cp">#define SEP_DRIVER_DATA_POOL_ALLOCATION_OFFSET_IN_BYTES \</span>
<span class="cp">	(SEP_CALLER_ID_OFFSET_BYTES + \</span>
<span class="cp">	SEP_CALLER_ID_HASH_SIZE_IN_BYTES)</span>

<span class="cm">/* the token that defines the start of time address */</span>
<span class="cp">#define SEP_TIME_VAL_TOKEN                                    0x12345678</span>

<span class="cp">#define FAKE_RAR_SIZE (1024*1024) </span><span class="cm">/* used only for mfld */</span><span class="cp"></span>
<span class="cm">/* DEBUG LEVEL MASKS */</span>

<span class="cm">/* size of the caller id hash (sha2) */</span>
<span class="cp">#define SEP_CALLER_ID_HASH_SIZE_IN_BYTES                      32</span>

<span class="cm">/* size of the caller id hash (sha2) in 32 bit words */</span>
<span class="cp">#define SEP_CALLER_ID_HASH_SIZE_IN_WORDS                8</span>

<span class="cm">/* maximum number of entries in the caller id table */</span>
<span class="cp">#define SEP_CALLER_ID_TABLE_NUM_ENTRIES                       20</span>

<span class="cm">/* maximum number of symetric operation (that require DMA resource)</span>
<span class="cm">	per one message */</span>
<span class="cp">#define SEP_MAX_NUM_SYNC_DMA_OPS			16</span>

<span class="cm">/* the token that defines the start of time address */</span>
<span class="cp">#define SEP_RAR_VAL_TOKEN                                     0xABABABAB</span>

<span class="cm">/* ioctl error that should be returned when trying</span>
<span class="cm">   to realloc the cache/resident second time */</span>
<span class="cp">#define SEP_ALREADY_INITIALIZED_ERR                           12</span>

<span class="cm">/* bit that locks access to the shared area */</span>
<span class="cp">#define SEP_TRANSACTION_STARTED_LOCK_BIT                      0</span>

<span class="cm">/* bit that lock access to the poll  - after send_command */</span>
<span class="cp">#define SEP_WORKING_LOCK_BIT                                  1</span>

<span class="cm">/* the token that defines the static pool address address */</span>
<span class="cp">#define SEP_STATIC_POOL_VAL_TOKEN                             0xABBAABBA</span>

<span class="cm">/* the token that defines the data pool pointers address */</span>
<span class="cp">#define SEP_DATA_POOL_POINTERS_VAL_TOKEN                      0xEDDEEDDE</span>

<span class="cm">/* the token that defines the data pool pointers address */</span>
<span class="cp">#define SEP_EXT_CACHE_ADDR_VAL_TOKEN                          0xBABABABA</span>

<span class="cm">/* Time limit for SEP to finish */</span>
<span class="cp">#define WAIT_TIME 10</span>

<span class="cm">/* Delay for pm runtime suspend (reduces pm thrashing with bursty traffic */</span>
<span class="cp">#define SUSPEND_DELAY 10</span>

<span class="cm">/* Number of delays to wait until scu boots after runtime resume */</span>
<span class="cp">#define SCU_DELAY_MAX 50</span>

<span class="cm">/* Delay for each iteration (usec) wait for scu boots after runtime resume */</span>
<span class="cp">#define SCU_DELAY_ITERATION 10</span>


<span class="cm">/*</span>
<span class="cm"> * Bits used in struct sep_call_status to check that</span>
<span class="cm"> * driver&#39;s APIs are called in valid order</span>
<span class="cm"> */</span>

<span class="cm">/* Bit offset which indicates status of sep_write() */</span>
<span class="cp">#define SEP_FASTCALL_WRITE_DONE_OFFSET		0</span>

<span class="cm">/* Bit offset which indicates status of sep_mmap() */</span>
<span class="cp">#define SEP_LEGACY_MMAP_DONE_OFFSET		1</span>

<span class="cm">/* Bit offset which indicates status of the SEP_IOCSENDSEPCOMMAND ioctl */</span>
<span class="cp">#define SEP_LEGACY_SENDMSG_DONE_OFFSET		2</span>

<span class="cm">/* Bit offset which indicates status of sep_poll() */</span>
<span class="cp">#define SEP_LEGACY_POLL_DONE_OFFSET		3</span>

<span class="cm">/* Bit offset which indicates status of the SEP_IOCENDTRANSACTION ioctl */</span>
<span class="cp">#define SEP_LEGACY_ENDTRANSACTION_DONE_OFFSET	4</span>

<span class="cm">/*</span>
<span class="cm"> * Used to limit number of concurrent processes</span>
<span class="cm"> * allowed to allocate dynamic buffers in fastcall</span>
<span class="cm"> * interface.</span>
<span class="cm"> */</span>
<span class="cp">#define SEP_DOUBLEBUF_USERS_LIMIT		3</span>

<span class="cm">/* Identifier for valid fastcall header */</span>
<span class="cp">#define SEP_FC_MAGIC				0xFFAACCAA</span>

<span class="cm">/*</span>
<span class="cm"> * Used for enabling driver runtime power management.</span>
<span class="cm"> * Useful for enabling/disabling it during performance</span>
<span class="cm"> * testing</span>
<span class="cm"> */</span>
<span class="cp">#define SEP_ENABLE_RUNTIME_PM</span>

<span class="cp">#endif </span><span class="cm">/* SEP DRIVER CONFIG */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
