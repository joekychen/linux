<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › wlan-ng › hfa384x.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>hfa384x.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* hfa384x.h</span>
<span class="cm">*</span>
<span class="cm">* Defines the constants and data structures for the hfa384x</span>
<span class="cm">*</span>
<span class="cm">* Copyright (C) 1999 AbsoluteValue Systems, Inc.  All Rights Reserved.</span>
<span class="cm">* --------------------------------------------------------------------</span>
<span class="cm">*</span>
<span class="cm">* linux-wlan</span>
<span class="cm">*</span>
<span class="cm">*   The contents of this file are subject to the Mozilla Public</span>
<span class="cm">*   License Version 1.1 (the &quot;License&quot;); you may not use this file</span>
<span class="cm">*   except in compliance with the License. You may obtain a copy of</span>
<span class="cm">*   the License at http://www.mozilla.org/MPL/</span>
<span class="cm">*</span>
<span class="cm">*   Software distributed under the License is distributed on an &quot;AS</span>
<span class="cm">*   IS&quot; basis, WITHOUT WARRANTY OF ANY KIND, either express or</span>
<span class="cm">*   implied. See the License for the specific language governing</span>
<span class="cm">*   rights and limitations under the License.</span>
<span class="cm">*</span>
<span class="cm">*   Alternatively, the contents of this file may be used under the</span>
<span class="cm">*   terms of the GNU Public License version 2 (the &quot;GPL&quot;), in which</span>
<span class="cm">*   case the provisions of the GPL are applicable instead of the</span>
<span class="cm">*   above.  If you wish to allow the use of your version of this file</span>
<span class="cm">*   only under the terms of the GPL and not to allow others to use</span>
<span class="cm">*   your version of this file under the MPL, indicate your decision</span>
<span class="cm">*   by deleting the provisions above and replace them with the notice</span>
<span class="cm">*   and other provisions required by the GPL.  If you do not delete</span>
<span class="cm">*   the provisions above, a recipient may use your version of this</span>
<span class="cm">*   file under either the MPL or the GPL.</span>
<span class="cm">*</span>
<span class="cm">* --------------------------------------------------------------------</span>
<span class="cm">*</span>
<span class="cm">* Inquiries regarding the linux-wlan Open Source project can be</span>
<span class="cm">* made directly to:</span>
<span class="cm">*</span>
<span class="cm">* AbsoluteValue Systems Inc.</span>
<span class="cm">* info@linux-wlan.com</span>
<span class="cm">* http://www.linux-wlan.com</span>
<span class="cm">*</span>
<span class="cm">* --------------------------------------------------------------------</span>
<span class="cm">*</span>
<span class="cm">* Portions of the development of this software were funded by</span>
<span class="cm">* Intersil Corporation as part of PRISM(R) chipset product development.</span>
<span class="cm">*</span>
<span class="cm">* --------------------------------------------------------------------</span>
<span class="cm">*</span>
<span class="cm">*   [Implementation and usage notes]</span>
<span class="cm">*</span>
<span class="cm">*   [References]</span>
<span class="cm">*	CW10 Programmer&#39;s Manual v1.5</span>
<span class="cm">*	IEEE 802.11 D10.0</span>
<span class="cm">*</span>
<span class="cm">* --------------------------------------------------------------------</span>
<span class="cm">*/</span>

<span class="cp">#ifndef _HFA384x_H</span>
<span class="cp">#define _HFA384x_H</span>

<span class="cp">#define HFA384x_FIRMWARE_VERSION(a, b, c) (((a) &lt;&lt; 16) + ((b) &lt;&lt; 8) + (c))</span>

<span class="cp">#include &lt;linux/if_ether.h&gt;</span>

<span class="cm">/*--- Mins &amp; Maxs -----------------------------------*/</span>
<span class="cp">#define	HFA384x_PORTID_MAX		((u16)7)</span>
<span class="cp">#define	HFA384x_NUMPORTS_MAX		((u16)(HFA384x_PORTID_MAX+1))</span>
<span class="cp">#define	HFA384x_PDR_LEN_MAX		((u16)512) </span><span class="cm">/* in bytes, from EK */</span><span class="cp"></span>
<span class="cp">#define	HFA384x_PDA_RECS_MAX		((u16)200) </span><span class="cm">/* a guess */</span><span class="cp"></span>
<span class="cp">#define	HFA384x_PDA_LEN_MAX		((u16)1024) </span><span class="cm">/* in bytes, from EK*/</span><span class="cp"></span>
<span class="cp">#define	HFA384x_SCANRESULT_MAX		((u16)31)</span>
<span class="cp">#define	HFA384x_HSCANRESULT_MAX		((u16)31)</span>
<span class="cp">#define	HFA384x_CHINFORESULT_MAX	((u16)16)</span>
<span class="cp">#define	HFA384x_RID_GUESSING_MAXLEN	2048	</span><span class="cm">/* I&#39;m not really sure */</span><span class="cp"></span>
<span class="cp">#define	HFA384x_RIDDATA_MAXLEN		HFA384x_RID_GUESSING_MAXLEN</span>
<span class="cp">#define	HFA384x_USB_RWMEM_MAXLEN	2048</span>

<span class="cm">/*--- Support Constants -----------------------------*/</span>
<span class="cp">#define		HFA384x_PORTTYPE_IBSS			((u16)0)</span>
<span class="cp">#define		HFA384x_PORTTYPE_BSS			((u16)1)</span>
<span class="cp">#define		HFA384x_PORTTYPE_PSUEDOIBSS		((u16)3)</span>
<span class="cp">#define		HFA384x_WEPFLAGS_PRIVINVOKED		((u16)BIT(0))</span>
<span class="cp">#define		HFA384x_WEPFLAGS_EXCLUDE		((u16)BIT(1))</span>
<span class="cp">#define		HFA384x_WEPFLAGS_DISABLE_TXCRYPT	((u16)BIT(4))</span>
<span class="cp">#define		HFA384x_WEPFLAGS_DISABLE_RXCRYPT	((u16)BIT(7))</span>
<span class="cp">#define 	HFA384x_ROAMMODE_HOSTSCAN_HOSTROAM	((u16)3)</span>
<span class="cp">#define 	HFA384x_PORTSTATUS_DISABLED		((u16)1)</span>
<span class="cp">#define		HFA384x_RATEBIT_1			((u16)1)</span>
<span class="cp">#define		HFA384x_RATEBIT_2			((u16)2)</span>
<span class="cp">#define		HFA384x_RATEBIT_5dot5			((u16)4)</span>
<span class="cp">#define		HFA384x_RATEBIT_11			((u16)8)</span>

<span class="cm">/*--- MAC Internal memory constants and macros ------*/</span>
<span class="cm">/* masks and macros used to manipulate MAC internal memory addresses. */</span>
<span class="cm">/* MAC internal memory addresses are 23 bit quantities.  The MAC uses</span>
<span class="cm"> * a paged address space where the upper 16 bits are the page number</span>
<span class="cm"> * and the lower 7 bits are the offset.  There are various Host API</span>
<span class="cm"> * elements that require two 16-bit quantities to specify a MAC</span>
<span class="cm"> * internal memory address.  Unfortunately, some of the API&#39;s use a</span>
<span class="cm"> * page/offset format where the offset value is JUST the lower seven</span>
<span class="cm"> * bits and the page is  the remaining 16 bits.  Some of the API&#39;s</span>
<span class="cm"> * assume that the 23 bit address has been split at the 16th bit.  We</span>
<span class="cm"> * refer to these two formats as AUX format and CMD format.  The</span>
<span class="cm"> * macros below help handle some of this.</span>
<span class="cm"> */</span>

<span class="cm">/* Mask bits for discarding unwanted pieces in a flat address */</span>
<span class="cp">#define		HFA384x_ADDR_FLAT_AUX_PAGE_MASK	(0x007fff80)</span>
<span class="cp">#define		HFA384x_ADDR_FLAT_AUX_OFF_MASK	(0x0000007f)</span>
<span class="cp">#define		HFA384x_ADDR_FLAT_CMD_PAGE_MASK	(0xffff0000)</span>
<span class="cp">#define		HFA384x_ADDR_FLAT_CMD_OFF_MASK	(0x0000ffff)</span>

<span class="cm">/* Mask bits for discarding unwanted pieces in AUX format</span>
<span class="cm">   16-bit address parts */</span>
<span class="cp">#define		HFA384x_ADDR_AUX_PAGE_MASK	(0xffff)</span>
<span class="cp">#define		HFA384x_ADDR_AUX_OFF_MASK	(0x007f)</span>

<span class="cm">/* Make a 32-bit flat address from AUX format 16-bit page and offset */</span>
<span class="cp">#define		HFA384x_ADDR_AUX_MKFLAT(p, o)	\</span>
<span class="cp">		((((u32)(((u16)(p))&amp;HFA384x_ADDR_AUX_PAGE_MASK)) &lt;&lt; 7) | \</span>
<span class="cp">		((u32)(((u16)(o))&amp;HFA384x_ADDR_AUX_OFF_MASK)))</span>

<span class="cm">/* Make CMD format offset and page from a 32-bit flat address */</span>
<span class="cp">#define		HFA384x_ADDR_CMD_MKPAGE(f) \</span>
<span class="cp">		((u16)((((u32)(f))&amp;HFA384x_ADDR_FLAT_CMD_PAGE_MASK)&gt;&gt;16))</span>
<span class="cp">#define		HFA384x_ADDR_CMD_MKOFF(f) \</span>
<span class="cp">		((u16)(((u32)(f))&amp;HFA384x_ADDR_FLAT_CMD_OFF_MASK))</span>

<span class="cm">/*--- Controller Memory addresses -------------------*/</span>
<span class="cp">#define		HFA3842_PDA_BASE	(0x007f0000UL)</span>
<span class="cp">#define		HFA3841_PDA_BASE	(0x003f0000UL)</span>
<span class="cp">#define		HFA3841_PDA_BOGUS_BASE	(0x00390000UL)</span>

<span class="cm">/*--- Driver Download states  -----------------------*/</span>
<span class="cp">#define		HFA384x_DLSTATE_DISABLED		0</span>
<span class="cp">#define		HFA384x_DLSTATE_RAMENABLED		1</span>
<span class="cp">#define		HFA384x_DLSTATE_FLASHENABLED		2</span>

<span class="cm">/*--- Register Field Masks --------------------------*/</span>
<span class="cp">#define		HFA384x_CMD_AINFO		((u16)(BIT(14) | BIT(13) \</span>
<span class="cp">							| BIT(12) | BIT(11) \</span>
<span class="cp">							| BIT(10) | BIT(9) \</span>
<span class="cp">							| BIT(8)))</span>
<span class="cp">#define		HFA384x_CMD_MACPORT		((u16)(BIT(10) | BIT(9) | \</span>
<span class="cp">							BIT(8)))</span>
<span class="cp">#define		HFA384x_CMD_PROGMODE		((u16)(BIT(9) | BIT(8)))</span>
<span class="cp">#define		HFA384x_CMD_CMDCODE		((u16)(BIT(5) | BIT(4) | \</span>
<span class="cp">							BIT(3) | BIT(2) | \</span>
<span class="cp">							BIT(1) | BIT(0)))</span>

<span class="cp">#define		HFA384x_STATUS_RESULT		((u16)(BIT(14) | BIT(13) \</span>
<span class="cp">							| BIT(12) | BIT(11) \</span>
<span class="cp">							| BIT(10) | BIT(9) \</span>
<span class="cp">							| BIT(8)))</span>

<span class="cm">/*--- Command Code Constants --------------------------*/</span>
<span class="cm">/*--- Controller Commands --------------------------*/</span>
<span class="cp">#define		HFA384x_CMDCODE_INIT		((u16)0x00)</span>
<span class="cp">#define		HFA384x_CMDCODE_ENABLE		((u16)0x01)</span>
<span class="cp">#define		HFA384x_CMDCODE_DISABLE		((u16)0x02)</span>

<span class="cm">/*--- Regulate Commands --------------------------*/</span>
<span class="cp">#define		HFA384x_CMDCODE_INQ		((u16)0x11)</span>

<span class="cm">/*--- Configure Commands --------------------------*/</span>
<span class="cp">#define		HFA384x_CMDCODE_DOWNLD		((u16)0x22)</span>

<span class="cm">/*--- Debugging Commands -----------------------------*/</span>
<span class="cp">#define 	HFA384x_CMDCODE_MONITOR		((u16)(0x38))</span>
<span class="cp">#define		HFA384x_MONITOR_ENABLE		((u16)(0x0b))</span>
<span class="cp">#define		HFA384x_MONITOR_DISABLE		((u16)(0x0f))</span>

<span class="cm">/*--- Result Codes --------------------------*/</span>
<span class="cp">#define		HFA384x_CMD_ERR			((u16)(0x7F))</span>

<span class="cm">/*--- Programming Modes --------------------------</span>
<span class="cm">	MODE 0: Disable programming</span>
<span class="cm">	MODE 1: Enable volatile memory programming</span>
<span class="cm">	MODE 2: Enable non-volatile memory programming</span>
<span class="cm">	MODE 3: Program non-volatile memory section</span>
<span class="cm">--------------------------------------------------*/</span>
<span class="cp">#define		HFA384x_PROGMODE_DISABLE	((u16)0x00)</span>
<span class="cp">#define		HFA384x_PROGMODE_RAM		((u16)0x01)</span>
<span class="cp">#define		HFA384x_PROGMODE_NV		((u16)0x02)</span>
<span class="cp">#define		HFA384x_PROGMODE_NVWRITE	((u16)0x03)</span>

<span class="cm">/*--- Record ID Constants --------------------------*/</span>
<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Configuration RIDs: Network Parameters, Static Configuration Entities</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cp">#define		HFA384x_RID_CNFPORTTYPE		((u16)0xFC00)</span>
<span class="cp">#define		HFA384x_RID_CNFOWNMACADDR	((u16)0xFC01)</span>
<span class="cp">#define		HFA384x_RID_CNFDESIREDSSID	((u16)0xFC02)</span>
<span class="cp">#define		HFA384x_RID_CNFOWNCHANNEL	((u16)0xFC03)</span>
<span class="cp">#define		HFA384x_RID_CNFOWNSSID		((u16)0xFC04)</span>
<span class="cp">#define		HFA384x_RID_CNFMAXDATALEN	((u16)0xFC07)</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Configuration RID lengths: Network Params, Static Config Entities</span>
<span class="cm">  This is the length of JUST the DATA part of the RID (does not</span>
<span class="cm">  include the len or code fields)</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cp">#define		HFA384x_RID_CNFOWNMACADDR_LEN	((u16)6)</span>
<span class="cp">#define		HFA384x_RID_CNFDESIREDSSID_LEN	((u16)34)</span>
<span class="cp">#define		HFA384x_RID_CNFOWNSSID_LEN	((u16)34)</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Configuration RIDs: Network Parameters, Dynamic Configuration Entities</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cp">#define		HFA384x_RID_CREATEIBSS		((u16)0xFC81)</span>
<span class="cp">#define		HFA384x_RID_FRAGTHRESH		((u16)0xFC82)</span>
<span class="cp">#define		HFA384x_RID_RTSTHRESH		((u16)0xFC83)</span>
<span class="cp">#define		HFA384x_RID_TXRATECNTL		((u16)0xFC84)</span>
<span class="cp">#define		HFA384x_RID_PROMISCMODE		((u16)0xFC85)</span>

<span class="cm">/*----------------------------------------------------------------------</span>
<span class="cm">Information RIDs: NIC Information</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cp">#define		HFA384x_RID_MAXLOADTIME		((u16)0xFD00)</span>
<span class="cp">#define		HFA384x_RID_DOWNLOADBUFFER	((u16)0xFD01)</span>
<span class="cp">#define		HFA384x_RID_PRIIDENTITY		((u16)0xFD02)</span>
<span class="cp">#define		HFA384x_RID_PRISUPRANGE		((u16)0xFD03)</span>
<span class="cp">#define		HFA384x_RID_PRI_CFIACTRANGES	((u16)0xFD04)</span>
<span class="cp">#define		HFA384x_RID_NICSERIALNUMBER	((u16)0xFD0A)</span>
<span class="cp">#define		HFA384x_RID_NICIDENTITY		((u16)0xFD0B)</span>
<span class="cp">#define		HFA384x_RID_MFISUPRANGE		((u16)0xFD0C)</span>
<span class="cp">#define		HFA384x_RID_CFISUPRANGE		((u16)0xFD0D)</span>
<span class="cp">#define		HFA384x_RID_STAIDENTITY		((u16)0xFD20)</span>
<span class="cp">#define		HFA384x_RID_STASUPRANGE		((u16)0xFD21)</span>
<span class="cp">#define		HFA384x_RID_STA_MFIACTRANGES	((u16)0xFD22)</span>
<span class="cp">#define		HFA384x_RID_STA_CFIACTRANGES	((u16)0xFD23)</span>

<span class="cm">/*----------------------------------------------------------------------</span>
<span class="cm">Information RID Lengths: NIC Information</span>
<span class="cm">  This is the length of JUST the DATA part of the RID (does not</span>
<span class="cm">  include the len or code fields)</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cp">#define		HFA384x_RID_NICSERIALNUMBER_LEN		((u16)12)</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Information RIDs:  MAC Information</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cp">#define		HFA384x_RID_PORTSTATUS		((u16)0xFD40)</span>
<span class="cp">#define		HFA384x_RID_CURRENTSSID		((u16)0xFD41)</span>
<span class="cp">#define		HFA384x_RID_CURRENTBSSID	((u16)0xFD42)</span>
<span class="cp">#define		HFA384x_RID_CURRENTTXRATE	((u16)0xFD44)</span>
<span class="cp">#define		HFA384x_RID_SHORTRETRYLIMIT	((u16)0xFD48)</span>
<span class="cp">#define		HFA384x_RID_LONGRETRYLIMIT	((u16)0xFD49)</span>
<span class="cp">#define		HFA384x_RID_MAXTXLIFETIME	((u16)0xFD4A)</span>
<span class="cp">#define		HFA384x_RID_PRIVACYOPTIMP	((u16)0xFD4F)</span>
<span class="cp">#define		HFA384x_RID_DBMCOMMSQUALITY	((u16)0xFD51)</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Information RID Lengths:  MAC Information</span>
<span class="cm">  This is the length of JUST the DATA part of the RID (does not</span>
<span class="cm">  include the len or code fields)</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cp">#define		HFA384x_RID_DBMCOMMSQUALITY_LEN	 \</span>
<span class="cp">	((u16) sizeof(hfa384x_dbmcommsquality_t))</span>
<span class="cp">#define		HFA384x_RID_JOINREQUEST_LEN \</span>
<span class="cp">	((u16)sizeof(hfa384x_JoinRequest_data_t))</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Information RIDs:  Modem Information</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cp">#define		HFA384x_RID_CURRENTCHANNEL	((u16)0xFDC1)</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">API ENHANCEMENTS (NOT ALREADY IMPLEMENTED)</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cp">#define		HFA384x_RID_CNFWEPDEFAULTKEYID	((u16)0xFC23)</span>
<span class="cp">#define		HFA384x_RID_CNFWEPDEFAULTKEY0	((u16)0xFC24)</span>
<span class="cp">#define		HFA384x_RID_CNFWEPDEFAULTKEY1	((u16)0xFC25)</span>
<span class="cp">#define		HFA384x_RID_CNFWEPDEFAULTKEY2	((u16)0xFC26)</span>
<span class="cp">#define		HFA384x_RID_CNFWEPDEFAULTKEY3	((u16)0xFC27)</span>
<span class="cp">#define		HFA384x_RID_CNFWEPFLAGS		((u16)0xFC28)</span>
<span class="cp">#define		HFA384x_RID_CNFAUTHENTICATION	((u16)0xFC2A)</span>
<span class="cp">#define		HFA384x_RID_CNFROAMINGMODE	((u16)0xFC2D)</span>
<span class="cp">#define		HFA384x_RID_CNFAPBCNint		((u16)0xFC33)</span>
<span class="cp">#define		HFA384x_RID_CNFDBMADJUST  	((u16)0xFC46)</span>
<span class="cp">#define		HFA384x_RID_CNFWPADATA       	((u16)0xFC48)</span>
<span class="cp">#define		HFA384x_RID_CNFBASICRATES	((u16)0xFCB3)</span>
<span class="cp">#define		HFA384x_RID_CNFSUPPRATES	((u16)0xFCB4)</span>
<span class="cp">#define		HFA384x_RID_CNFPASSIVESCANCTRL	((u16)0xFCBA)</span>
<span class="cp">#define		HFA384x_RID_TXPOWERMAX        	((u16)0xFCBE)</span>
<span class="cp">#define		HFA384x_RID_JOINREQUEST		((u16)0xFCE2)</span>
<span class="cp">#define		HFA384x_RID_AUTHENTICATESTA	((u16)0xFCE3)</span>
<span class="cp">#define		HFA384x_RID_HOSTSCAN          	((u16)0xFCE5)</span>

<span class="cp">#define		HFA384x_RID_CNFWEPDEFAULTKEY_LEN	((u16)6)</span>
<span class="cp">#define		HFA384x_RID_CNFWEP128DEFAULTKEY_LEN	((u16)14)</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">PD Record codes</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cp">#define HFA384x_PDR_PCB_PARTNUM		((u16)0x0001)</span>
<span class="cp">#define HFA384x_PDR_PDAVER		((u16)0x0002)</span>
<span class="cp">#define HFA384x_PDR_NIC_SERIAL		((u16)0x0003)</span>
<span class="cp">#define HFA384x_PDR_MKK_MEASUREMENTS	((u16)0x0004)</span>
<span class="cp">#define HFA384x_PDR_NIC_RAMSIZE		((u16)0x0005)</span>
<span class="cp">#define HFA384x_PDR_MFISUPRANGE		((u16)0x0006)</span>
<span class="cp">#define HFA384x_PDR_CFISUPRANGE		((u16)0x0007)</span>
<span class="cp">#define HFA384x_PDR_NICID		((u16)0x0008)</span>
<span class="cp">#define HFA384x_PDR_MAC_ADDRESS		((u16)0x0101)</span>
<span class="cp">#define HFA384x_PDR_REGDOMAIN		((u16)0x0103)</span>
<span class="cp">#define HFA384x_PDR_ALLOWED_CHANNEL	((u16)0x0104)</span>
<span class="cp">#define HFA384x_PDR_DEFAULT_CHANNEL	((u16)0x0105)</span>
<span class="cp">#define HFA384x_PDR_TEMPTYPE		((u16)0x0107)</span>
<span class="cp">#define HFA384x_PDR_IFR_SETTING		((u16)0x0200)</span>
<span class="cp">#define HFA384x_PDR_RFR_SETTING		((u16)0x0201)</span>
<span class="cp">#define HFA384x_PDR_HFA3861_BASELINE	((u16)0x0202)</span>
<span class="cp">#define HFA384x_PDR_HFA3861_SHADOW	((u16)0x0203)</span>
<span class="cp">#define HFA384x_PDR_HFA3861_IFRF	((u16)0x0204)</span>
<span class="cp">#define HFA384x_PDR_HFA3861_CHCALSP	((u16)0x0300)</span>
<span class="cp">#define HFA384x_PDR_HFA3861_CHCALI	((u16)0x0301)</span>
<span class="cp">#define HFA384x_PDR_MAX_TX_POWER  	((u16)0x0302)</span>
<span class="cp">#define HFA384x_PDR_MASTER_CHAN_LIST	((u16)0x0303)</span>
<span class="cp">#define HFA384x_PDR_3842_NIC_CONFIG	((u16)0x0400)</span>
<span class="cp">#define HFA384x_PDR_USB_ID		((u16)0x0401)</span>
<span class="cp">#define HFA384x_PDR_PCI_ID		((u16)0x0402)</span>
<span class="cp">#define HFA384x_PDR_PCI_IFCONF		((u16)0x0403)</span>
<span class="cp">#define HFA384x_PDR_PCI_PMCONF		((u16)0x0404)</span>
<span class="cp">#define HFA384x_PDR_RFENRGY		((u16)0x0406)</span>
<span class="cp">#define HFA384x_PDR_USB_POWER_TYPE      ((u16)0x0407)</span>
<span class="cp">#define HFA384x_PDR_USB_MAX_POWER	((u16)0x0409)</span>
<span class="cp">#define HFA384x_PDR_USB_MANUFACTURER	((u16)0x0410)</span>
<span class="cp">#define HFA384x_PDR_USB_PRODUCT  	((u16)0x0411)</span>
<span class="cp">#define HFA384x_PDR_ANT_DIVERSITY   	((u16)0x0412)</span>
<span class="cp">#define HFA384x_PDR_HFO_DELAY       	((u16)0x0413)</span>
<span class="cp">#define HFA384x_PDR_SCALE_THRESH 	((u16)0x0414)</span>

<span class="cp">#define HFA384x_PDR_HFA3861_MANF_TESTSP	((u16)0x0900)</span>
<span class="cp">#define HFA384x_PDR_HFA3861_MANF_TESTI	((u16)0x0901)</span>
<span class="cp">#define HFA384x_PDR_END_OF_PDA		((u16)0x0000)</span>

<span class="cm">/*--- Register Test/Get/Set Field macros ------------------------*/</span>

<span class="cp">#define		HFA384x_CMD_AINFO_SET(value)	((u16)((u16)(value) &lt;&lt; 8))</span>
<span class="cp">#define		HFA384x_CMD_MACPORT_SET(value)	\</span>
<span class="cp">			((u16)HFA384x_CMD_AINFO_SET(value))</span>
<span class="cp">#define		HFA384x_CMD_PROGMODE_SET(value)	\</span>
<span class="cp">			((u16)HFA384x_CMD_AINFO_SET((u16)value))</span>
<span class="cp">#define		HFA384x_CMD_CMDCODE_SET(value)		((u16)(value))</span>

<span class="cp">#define		HFA384x_STATUS_RESULT_SET(value)	(((u16)(value)) &lt;&lt; 8)</span>

<span class="cm">/* Host Maintained State Info */</span>
<span class="cp">#define HFA384x_STATE_PREINIT	0</span>
<span class="cp">#define HFA384x_STATE_INIT	1</span>
<span class="cp">#define HFA384x_STATE_RUNNING	2</span>

<span class="cm">/*-------------------------------------------------------------*/</span>
<span class="cm">/* Commonly used basic types */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_bytestr</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">len</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_bytestr_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_bytestr32</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">len</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_bytestr32_t</span><span class="p">;</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Configuration Record Structures:</span>
<span class="cm">	Network Parameters, Static Configuration Entities</span>
<span class="cm">--------------------------------------------------------------------*/</span>

<span class="cm">/*-- Hardware/Firmware Component Information ----------*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_compident</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">id</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">variant</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">major</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">minor</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_compident_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_caplevel</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">role</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">id</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">variant</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">bottom</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">top</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_caplevel_t</span><span class="p">;</span>

<span class="cm">/*-- Configuration Record: cnfAuthentication --*/</span>
<span class="cp">#define HFA384x_CNFAUTHENTICATION_OPENSYSTEM	0x0001</span>
<span class="cp">#define HFA384x_CNFAUTHENTICATION_SHAREDKEY	0x0002</span>
<span class="cp">#define HFA384x_CNFAUTHENTICATION_LEAP     	0x0004</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Configuration Record Structures:</span>
<span class="cm">	Network Parameters, Dynamic Configuration Entities</span>
<span class="cm">--------------------------------------------------------------------*/</span>

<span class="cp">#define HFA384x_CREATEIBSS_JOINCREATEIBSS          0</span>

<span class="cm">/*-- Configuration Record: HostScanRequest (data portion only) --*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_HostScanRequest_data</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">channelList</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">txRate</span><span class="p">;</span>
	<span class="n">hfa384x_bytestr32_t</span> <span class="n">ssid</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_HostScanRequest_data_t</span><span class="p">;</span>

<span class="cm">/*-- Configuration Record: JoinRequest (data portion only) --*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_JoinRequest_data</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">bssid</span><span class="p">[</span><span class="n">WLAN_BSSID_LEN</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">channel</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_JoinRequest_data_t</span><span class="p">;</span>

<span class="cm">/*-- Configuration Record: authenticateStation (data portion only) --*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_authenticateStation_data</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">address</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">algorithm</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_authenticateStation_data_t</span><span class="p">;</span>

<span class="cm">/*-- Configuration Record: WPAData       (data portion only) --*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_WPAData</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">datalen</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>		<span class="cm">/* max 80 */</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_WPAData_t</span><span class="p">;</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Information Record Structures: NIC Information</span>
<span class="cm">--------------------------------------------------------------------*/</span>

<span class="cm">/*-- Information Record: DownLoadBuffer --*/</span>
<span class="cm">/* NOTE: The page and offset are in AUX format */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_downloadbuffer</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">page</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">offset</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">len</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_downloadbuffer_t</span><span class="p">;</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Information Record Structures: NIC Information</span>
<span class="cm">--------------------------------------------------------------------*/</span>

<span class="cp">#define HFA384x_PSTATUS_CONN_IBSS	((u16)3)</span>

<span class="cm">/*-- Information Record: commsquality --*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_commsquality</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">CQ_currBSS</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">ASL_currBSS</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">ANL_currFC</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_commsquality_t</span><span class="p">;</span>

<span class="cm">/*-- Information Record: dmbcommsquality --*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_dbmcommsquality</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">CQdbm_currBSS</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">ASLdbm_currBSS</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">ANLdbm_currFC</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_dbmcommsquality_t</span><span class="p">;</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">FRAME STRUCTURES: Communication Frames</span>
<span class="cm">----------------------------------------------------------------------</span>
<span class="cm">Communication Frames: Transmit Frames</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cm">/*-- Communication Frame: Transmit Frame Structure --*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_tx_frame</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">reserved1</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">reserved2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">sw_support</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tx_retrycount</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tx_rate</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">tx_control</span><span class="p">;</span>

	<span class="cm">/*-- 802.11 Header Information --*/</span>

	<span class="n">u16</span> <span class="n">frame_control</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">duration_id</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">address1</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">address2</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">address3</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">sequence_control</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">address4</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">data_len</span><span class="p">;</span>		<span class="cm">/* little endian format */</span>

	<span class="cm">/*-- 802.3 Header Information --*/</span>

	<span class="n">u8</span> <span class="n">dest_addr</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">src_addr</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">data_length</span><span class="p">;</span>	<span class="cm">/* big endian format */</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_tx_frame_t</span><span class="p">;</span>
<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Communication Frames: Field Masks for Transmit Frames</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cm">/*-- Status Field --*/</span>
<span class="cp">#define		HFA384x_TXSTATUS_ACKERR			((u16)BIT(5))</span>
<span class="cp">#define		HFA384x_TXSTATUS_FORMERR		((u16)BIT(3))</span>
<span class="cp">#define		HFA384x_TXSTATUS_DISCON			((u16)BIT(2))</span>
<span class="cp">#define		HFA384x_TXSTATUS_AGEDERR		((u16)BIT(1))</span>
<span class="cp">#define		HFA384x_TXSTATUS_RETRYERR		((u16)BIT(0))</span>
<span class="cm">/*-- Transmit Control Field --*/</span>
<span class="cp">#define		HFA384x_TX_MACPORT			((u16)(BIT(10) | \</span>
<span class="cp">							  BIT(9) | BIT(8)))</span>
<span class="cp">#define		HFA384x_TX_STRUCTYPE			((u16)(BIT(4) | BIT(3)))</span>
<span class="cp">#define		HFA384x_TX_TXEX				((u16)BIT(2))</span>
<span class="cp">#define		HFA384x_TX_TXOK				((u16)BIT(1))</span>
<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Communication Frames: Test/Get/Set Field Values for Transmit Frames</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cm">/*-- Status Field --*/</span>
<span class="cp">#define HFA384x_TXSTATUS_ISERROR(v)	\</span>
<span class="cp">	(((u16)(v))&amp;\</span>
<span class="cp">	(HFA384x_TXSTATUS_ACKERR|HFA384x_TXSTATUS_FORMERR|\</span>
<span class="cp">	HFA384x_TXSTATUS_DISCON|HFA384x_TXSTATUS_AGEDERR|\</span>
<span class="cp">	HFA384x_TXSTATUS_RETRYERR))</span>

<span class="cp">#define	HFA384x_TX_SET(v, m, s)		((((u16)(v))&lt;&lt;((u16)(s)))&amp;((u16)(m)))</span>

<span class="cp">#define	HFA384x_TX_MACPORT_SET(v)	HFA384x_TX_SET(v, HFA384x_TX_MACPORT, 8)</span>
<span class="cp">#define	HFA384x_TX_STRUCTYPE_SET(v)	HFA384x_TX_SET(v, \</span>
<span class="cp">						HFA384x_TX_STRUCTYPE, 3)</span>
<span class="cp">#define	HFA384x_TX_TXEX_SET(v)		HFA384x_TX_SET(v, HFA384x_TX_TXEX, 2)</span>
<span class="cp">#define	HFA384x_TX_TXOK_SET(v)		HFA384x_TX_SET(v, HFA384x_TX_TXOK, 1)</span>
<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Communication Frames: Receive Frames</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cm">/*-- Communication Frame: Receive Frame Structure --*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_rx_frame</span> <span class="p">{</span>
	<span class="cm">/*-- MAC rx descriptor (hfa384x byte order) --*/</span>
	<span class="n">u16</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">time</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">silence</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">signal</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rate</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rx_flow</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">reserved1</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">reserved2</span><span class="p">;</span>

	<span class="cm">/*-- 802.11 Header Information (802.11 byte order) --*/</span>
	<span class="n">u16</span> <span class="n">frame_control</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">duration_id</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">address1</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">address2</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">address3</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">sequence_control</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">address4</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">data_len</span><span class="p">;</span>		<span class="cm">/* hfa384x (little endian) format */</span>

	<span class="cm">/*-- 802.3 Header Information --*/</span>
	<span class="n">u8</span> <span class="n">dest_addr</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">src_addr</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">data_length</span><span class="p">;</span>	<span class="cm">/* IEEE? (big endian) format */</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_rx_frame_t</span><span class="p">;</span>
<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Communication Frames: Field Masks for Receive Frames</span>
<span class="cm">--------------------------------------------------------------------*/</span>

<span class="cm">/*-- Status Fields --*/</span>
<span class="cp">#define		HFA384x_RXSTATUS_MACPORT		((u16)(BIT(10) | \</span>
<span class="cp">								BIT(9) | \</span>
<span class="cp">								BIT(8)))</span>
<span class="cp">#define		HFA384x_RXSTATUS_FCSERR			((u16)BIT(0))</span>
<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Communication Frames: Test/Get/Set Field Values for Receive Frames</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cp">#define		HFA384x_RXSTATUS_MACPORT_GET(value)	((u16)((((u16)(value)) \</span>
<span class="cp">					    &amp; HFA384x_RXSTATUS_MACPORT) &gt;&gt; 8))</span>
<span class="cp">#define		HFA384x_RXSTATUS_ISFCSERR(value)	((u16)(((u16)(value)) \</span>
<span class="cp">						  &amp; HFA384x_RXSTATUS_FCSERR))</span>
<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm"> FRAME STRUCTURES: Information Types and Information Frame Structures</span>
<span class="cm">----------------------------------------------------------------------</span>
<span class="cm">Information Types</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="cp">#define		HFA384x_IT_HANDOVERADDR			((u16)0xF000UL)</span>
<span class="cp">#define		HFA384x_IT_COMMTALLIES			((u16)0xF100UL)</span>
<span class="cp">#define		HFA384x_IT_SCANRESULTS			((u16)0xF101UL)</span>
<span class="cp">#define		HFA384x_IT_CHINFORESULTS		((u16)0xF102UL)</span>
<span class="cp">#define		HFA384x_IT_HOSTSCANRESULTS		((u16)0xF103UL)</span>
<span class="cp">#define		HFA384x_IT_LINKSTATUS			((u16)0xF200UL)</span>
<span class="cp">#define		HFA384x_IT_ASSOCSTATUS			((u16)0xF201UL)</span>
<span class="cp">#define		HFA384x_IT_AUTHREQ			((u16)0xF202UL)</span>
<span class="cp">#define		HFA384x_IT_PSUSERCNT			((u16)0xF203UL)</span>
<span class="cp">#define		HFA384x_IT_KEYIDCHANGED			((u16)0xF204UL)</span>
<span class="cp">#define		HFA384x_IT_ASSOCREQ    			((u16)0xF205UL)</span>
<span class="cp">#define		HFA384x_IT_MICFAILURE  			((u16)0xF206UL)</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">Information Frames Structures</span>
<span class="cm">----------------------------------------------------------------------</span>
<span class="cm">Information Frames: Notification Frame Structures</span>
<span class="cm">--------------------------------------------------------------------*/</span>

<span class="cm">/*--  Inquiry Frame, Diagnose: Communication Tallies --*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_CommTallies16</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">txunicastframes</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">txmulticastframes</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">txfragments</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">txunicastoctets</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">txmulticastoctets</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">txdeferredtrans</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">txsingleretryframes</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">txmultipleretryframes</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">txretrylimitexceeded</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">txdiscards</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rxunicastframes</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rxmulticastframes</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rxfragments</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rxunicastoctets</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rxmulticastoctets</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rxfcserrors</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rxdiscardsnobuffer</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">txdiscardswrongsa</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rxdiscardswepundecr</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rxmsginmsgfrag</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rxmsginbadmsgfrag</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_CommTallies16_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_CommTallies32</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">txunicastframes</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txmulticastframes</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txfragments</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txunicastoctets</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txmulticastoctets</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txdeferredtrans</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txsingleretryframes</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txmultipleretryframes</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txretrylimitexceeded</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txdiscards</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rxunicastframes</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rxmulticastframes</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rxfragments</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rxunicastoctets</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rxmulticastoctets</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rxfcserrors</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rxdiscardsnobuffer</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txdiscardswrongsa</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rxdiscardswepundecr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rxmsginmsgfrag</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rxmsginbadmsgfrag</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_CommTallies32_t</span><span class="p">;</span>

<span class="cm">/*--  Inquiry Frame, Diagnose: Scan Results &amp; Subfields--*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_ScanResultSub</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">chid</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">anl</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">sl</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bssid</span><span class="p">[</span><span class="n">WLAN_BSSID_LEN</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">bcnint</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">capinfo</span><span class="p">;</span>
	<span class="n">hfa384x_bytestr32_t</span> <span class="n">ssid</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">supprates</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>	<span class="cm">/* 802.11 info element */</span>
	<span class="n">u16</span> <span class="n">proberesp_rate</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_ScanResultSub_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_ScanResult</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">rsvd</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">scanreason</span><span class="p">;</span>
	<span class="n">hfa384x_ScanResultSub_t</span> <span class="n">result</span><span class="p">[</span><span class="n">HFA384x_SCANRESULT_MAX</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_ScanResult_t</span><span class="p">;</span>

<span class="cm">/*--  Inquiry Frame, Diagnose: ChInfo Results &amp; Subfields--*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_ChInfoResultSub</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">chid</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">anl</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">pnl</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">active</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_ChInfoResultSub_t</span><span class="p">;</span>

<span class="cp">#define HFA384x_CHINFORESULT_BSSACTIVE	BIT(0)</span>
<span class="cp">#define HFA384x_CHINFORESULT_PCFACTIVE	BIT(1)</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_ChInfoResult</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">scanchannels</span><span class="p">;</span>
	<span class="n">hfa384x_ChInfoResultSub_t</span> <span class="n">result</span><span class="p">[</span><span class="n">HFA384x_CHINFORESULT_MAX</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_ChInfoResult_t</span><span class="p">;</span>

<span class="cm">/*--  Inquiry Frame, Diagnose: Host Scan Results &amp; Subfields--*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_HScanResultSub</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">chid</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">anl</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">sl</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bssid</span><span class="p">[</span><span class="n">WLAN_BSSID_LEN</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">bcnint</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">capinfo</span><span class="p">;</span>
	<span class="n">hfa384x_bytestr32_t</span> <span class="n">ssid</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">supprates</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>	<span class="cm">/* 802.11 info element */</span>
	<span class="n">u16</span> <span class="n">proberesp_rate</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">atim</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_HScanResultSub_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_HScanResult</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">nresult</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rsvd</span><span class="p">;</span>
	<span class="n">hfa384x_HScanResultSub_t</span> <span class="n">result</span><span class="p">[</span><span class="n">HFA384x_HSCANRESULT_MAX</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_HScanResult_t</span><span class="p">;</span>

<span class="cm">/*--  Unsolicited Frame, MAC Mgmt: LinkStatus --*/</span>

<span class="cp">#define HFA384x_LINK_NOTCONNECTED	((u16)0)</span>
<span class="cp">#define HFA384x_LINK_CONNECTED		((u16)1)</span>
<span class="cp">#define HFA384x_LINK_DISCONNECTED	((u16)2)</span>
<span class="cp">#define HFA384x_LINK_AP_CHANGE		((u16)3)</span>
<span class="cp">#define HFA384x_LINK_AP_OUTOFRANGE	((u16)4)</span>
<span class="cp">#define HFA384x_LINK_AP_INRANGE		((u16)5)</span>
<span class="cp">#define HFA384x_LINK_ASSOCFAIL		((u16)6)</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_LinkStatus</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">linkstatus</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_LinkStatus_t</span><span class="p">;</span>

<span class="cm">/*--  Unsolicited Frame, MAC Mgmt: AssociationStatus (--*/</span>

<span class="cp">#define HFA384x_ASSOCSTATUS_STAASSOC	((u16)1)</span>
<span class="cp">#define HFA384x_ASSOCSTATUS_REASSOC	((u16)2)</span>
<span class="cp">#define HFA384x_ASSOCSTATUS_AUTHFAIL	((u16)5)</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_AssocStatus</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">assocstatus</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">sta_addr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="cm">/* old_ap_addr is only valid if assocstatus == 2 */</span>
	<span class="n">u8</span> <span class="n">old_ap_addr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">reason</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">reserved</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_AssocStatus_t</span><span class="p">;</span>

<span class="cm">/*--  Unsolicited Frame, MAC Mgmt: AuthRequest (AP Only) --*/</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_AuthRequest</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">sta_addr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">algorithm</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_AuthReq_t</span><span class="p">;</span>

<span class="cm">/*--  Unsolicited Frame, MAC Mgmt: PSUserCount (AP Only) --*/</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_PSUserCount</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">usercnt</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_PSUserCount_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_KeyIDChanged</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">sta_addr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">keyid</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_KeyIDChanged_t</span><span class="p">;</span>

<span class="cm">/*--  Collection of all Inf frames ---------------*/</span>
<span class="k">typedef</span> <span class="k">union</span> <span class="n">hfa384x_infodata</span> <span class="p">{</span>
	<span class="n">hfa384x_CommTallies16_t</span> <span class="n">commtallies16</span><span class="p">;</span>
	<span class="n">hfa384x_CommTallies32_t</span> <span class="n">commtallies32</span><span class="p">;</span>
	<span class="n">hfa384x_ScanResult_t</span> <span class="n">scanresult</span><span class="p">;</span>
	<span class="n">hfa384x_ChInfoResult_t</span> <span class="n">chinforesult</span><span class="p">;</span>
	<span class="n">hfa384x_HScanResult_t</span> <span class="n">hscanresult</span><span class="p">;</span>
	<span class="n">hfa384x_LinkStatus_t</span> <span class="n">linkstatus</span><span class="p">;</span>
	<span class="n">hfa384x_AssocStatus_t</span> <span class="n">assocstatus</span><span class="p">;</span>
	<span class="n">hfa384x_AuthReq_t</span> <span class="n">authreq</span><span class="p">;</span>
	<span class="n">hfa384x_PSUserCount_t</span> <span class="n">psusercnt</span><span class="p">;</span>
	<span class="n">hfa384x_KeyIDChanged_t</span> <span class="n">keyidchanged</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_infodata_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_InfFrame</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">framelen</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">infotype</span><span class="p">;</span>
	<span class="n">hfa384x_infodata_t</span> <span class="n">info</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_InfFrame_t</span><span class="p">;</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">USB Packet structures and constants.</span>
<span class="cm">--------------------------------------------------------------------*/</span>

<span class="cm">/* Should be sent to the bulkout endpoint */</span>
<span class="cp">#define HFA384x_USB_TXFRM	0</span>
<span class="cp">#define HFA384x_USB_CMDREQ	1</span>
<span class="cp">#define HFA384x_USB_WRIDREQ	2</span>
<span class="cp">#define HFA384x_USB_RRIDREQ	3</span>
<span class="cp">#define HFA384x_USB_WMEMREQ	4</span>
<span class="cp">#define HFA384x_USB_RMEMREQ	5</span>

<span class="cm">/* Received from the bulkin endpoint */</span>
<span class="cp">#define HFA384x_USB_ISTXFRM(a)	(((a) &amp; 0x9000) == 0x1000)</span>
<span class="cp">#define HFA384x_USB_ISRXFRM(a)	(!((a) &amp; 0x9000))</span>
<span class="cp">#define HFA384x_USB_INFOFRM	0x8000</span>
<span class="cp">#define HFA384x_USB_CMDRESP	0x8001</span>
<span class="cp">#define HFA384x_USB_WRIDRESP	0x8002</span>
<span class="cp">#define HFA384x_USB_RRIDRESP	0x8003</span>
<span class="cp">#define HFA384x_USB_WMEMRESP	0x8004</span>
<span class="cp">#define HFA384x_USB_RMEMRESP	0x8005</span>
<span class="cp">#define HFA384x_USB_BUFAVAIL	0x8006</span>
<span class="cp">#define HFA384x_USB_ERROR	0x8007</span>

<span class="cm">/*------------------------------------*/</span>
<span class="cm">/* Request (bulk OUT) packet contents */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usb_txfrm</span> <span class="p">{</span>
	<span class="n">hfa384x_tx_frame_t</span> <span class="n">desc</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data</span><span class="p">[</span><span class="n">WLAN_DATA_MAXLEN</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usb_txfrm_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usb_cmdreq</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">cmd</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">parm0</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">parm1</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">parm2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">pad</span><span class="p">[</span><span class="mi">54</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usb_cmdreq_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usb_wridreq</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">frmlen</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rid</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data</span><span class="p">[</span><span class="n">HFA384x_RIDDATA_MAXLEN</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usb_wridreq_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usb_rridreq</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">frmlen</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rid</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">pad</span><span class="p">[</span><span class="mi">58</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usb_rridreq_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usb_wmemreq</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">frmlen</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">offset</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">page</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data</span><span class="p">[</span><span class="n">HFA384x_USB_RWMEM_MAXLEN</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usb_wmemreq_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usb_rmemreq</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">frmlen</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">offset</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">page</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">pad</span><span class="p">[</span><span class="mi">56</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usb_rmemreq_t</span><span class="p">;</span>

<span class="cm">/*------------------------------------*/</span>
<span class="cm">/* Response (bulk IN) packet contents */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usb_rxfrm</span> <span class="p">{</span>
	<span class="n">hfa384x_rx_frame_t</span> <span class="n">desc</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data</span><span class="p">[</span><span class="n">WLAN_DATA_MAXLEN</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usb_rxfrm_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usb_infofrm</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">hfa384x_InfFrame_t</span> <span class="n">info</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usb_infofrm_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usb_statusresp</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">resp0</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">resp1</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">resp2</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usb_cmdresp_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">hfa384x_usb_cmdresp_t</span> <span class="n">hfa384x_usb_wridresp_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usb_rridresp</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">frmlen</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rid</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data</span><span class="p">[</span><span class="n">HFA384x_RIDDATA_MAXLEN</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usb_rridresp_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">hfa384x_usb_cmdresp_t</span> <span class="n">hfa384x_usb_wmemresp_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usb_rmemresp</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">frmlen</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data</span><span class="p">[</span><span class="n">HFA384x_USB_RWMEM_MAXLEN</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usb_rmemresp_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usb_bufavail</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">frmlen</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usb_bufavail_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usb_error</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">errortype</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usb_error_t</span><span class="p">;</span>

<span class="cm">/*----------------------------------------------------------*/</span>
<span class="cm">/* Unions for packaging all the known packet types together */</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="n">hfa384x_usbout</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">hfa384x_usb_txfrm_t</span> <span class="n">txfrm</span><span class="p">;</span>
	<span class="n">hfa384x_usb_cmdreq_t</span> <span class="n">cmdreq</span><span class="p">;</span>
	<span class="n">hfa384x_usb_wridreq_t</span> <span class="n">wridreq</span><span class="p">;</span>
	<span class="n">hfa384x_usb_rridreq_t</span> <span class="n">rridreq</span><span class="p">;</span>
	<span class="n">hfa384x_usb_wmemreq_t</span> <span class="n">wmemreq</span><span class="p">;</span>
	<span class="n">hfa384x_usb_rmemreq_t</span> <span class="n">rmemreq</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usbout_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="n">hfa384x_usbin</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">hfa384x_usb_rxfrm_t</span> <span class="n">rxfrm</span><span class="p">;</span>
	<span class="n">hfa384x_usb_txfrm_t</span> <span class="n">txfrm</span><span class="p">;</span>
	<span class="n">hfa384x_usb_infofrm_t</span> <span class="n">infofrm</span><span class="p">;</span>
	<span class="n">hfa384x_usb_cmdresp_t</span> <span class="n">cmdresp</span><span class="p">;</span>
	<span class="n">hfa384x_usb_wridresp_t</span> <span class="n">wridresp</span><span class="p">;</span>
	<span class="n">hfa384x_usb_rridresp_t</span> <span class="n">rridresp</span><span class="p">;</span>
	<span class="n">hfa384x_usb_wmemresp_t</span> <span class="n">wmemresp</span><span class="p">;</span>
	<span class="n">hfa384x_usb_rmemresp_t</span> <span class="n">rmemresp</span><span class="p">;</span>
	<span class="n">hfa384x_usb_bufavail_t</span> <span class="n">bufavail</span><span class="p">;</span>
	<span class="n">hfa384x_usb_error_t</span> <span class="n">usberror</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">boguspad</span><span class="p">[</span><span class="mi">3000</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_usbin_t</span><span class="p">;</span>

<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">PD record structures.</span>
<span class="cm">--------------------------------------------------------------------*/</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_pcb_partnum</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">num</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_pcb_partnum_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_pcb_tracenum</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">num</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_pcb_tracenum_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_nic_serial</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">num</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_nic_serial_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_mkk_measurements</span> <span class="p">{</span>
	<span class="kt">double</span> <span class="n">carrier_freq</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">occupied_band</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">power_density</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">tx_spur_f1</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">tx_spur_f2</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">tx_spur_f3</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">tx_spur_f4</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">tx_spur_l1</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">tx_spur_l2</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">tx_spur_l3</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">tx_spur_l4</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">rx_spur_f1</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">rx_spur_f2</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">rx_spur_l1</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">rx_spur_l2</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_mkk_measurements_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_nic_ramsize</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">size</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>		<span class="cm">/* units of KB */</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_nic_ramsize_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_mfisuprange</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">id</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">variant</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">bottom</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">top</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_mfisuprange_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_cfisuprange</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">id</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">variant</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">bottom</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">top</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_cfisuprange_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_nicid</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">id</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">variant</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">major</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">minor</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_nicid_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_refdac_measurements</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_refdac_measurements_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_vgdac_measurements</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_vgdac_measurements_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_level_comp_measurements</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_level_compc_measurements_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_mac_address</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">addr</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_mac_address_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_mkk_callname</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">callname</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_mkk_callname_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_regdomain</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">numdomains</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">domain</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_regdomain_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_allowed_channel</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">ch_bitmap</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_allowed_channel_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_default_channel</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">channel</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_default_channel_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_privacy_option</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">available</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_privacy_option_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_temptype</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">type</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_temptype_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_refdac_setup</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">ch_value</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_refdac_setup_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_vgdac_setup</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">ch_value</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_vgdac_setup_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_level_comp_setup</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">ch_value</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_level_comp_setup_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_trimdac_setup</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">trimidac</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">trimqdac</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_trimdac_setup_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_ifr_setting</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">value</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_ifr_setting_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_rfr_setting</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">value</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_rfr_setting_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_hfa3861_baseline</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">value</span><span class="p">[</span><span class="mi">50</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_hfa3861_baseline_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_hfa3861_shadow</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">value</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_hfa3861_shadow_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_hfa3861_ifrf</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">value</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_hfa3861_ifrf_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_hfa3861_chcalsp</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">value</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_hfa3861_chcalsp_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_hfa3861_chcali</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">value</span><span class="p">[</span><span class="mi">17</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_hfa3861_chcali_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_hfa3861_nic_config</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">config_bitmap</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_nic_config_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_hfo_delay</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">hfo_delay</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_hfo_delay_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_hfa3861_manf_testsp</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">value</span><span class="p">[</span><span class="mi">30</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_hfa3861_manf_testsp_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdr_hfa3861_manf_testi</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">value</span><span class="p">[</span><span class="mi">30</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_hfa3861_manf_testi_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_end_of_pda</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">crc</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdr_end_of_pda_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_pdrec</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">len</span><span class="p">;</span>		<span class="cm">/* in words */</span>
	<span class="n">u16</span> <span class="n">code</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">pdr</span> <span class="p">{</span>
		<span class="n">hfa384x_pdr_pcb_partnum_t</span> <span class="n">pcb_partnum</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_pcb_tracenum_t</span> <span class="n">pcb_tracenum</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_nic_serial_t</span> <span class="n">nic_serial</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_mkk_measurements_t</span> <span class="n">mkk_measurements</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_nic_ramsize_t</span> <span class="n">nic_ramsize</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_mfisuprange_t</span> <span class="n">mfisuprange</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_cfisuprange_t</span> <span class="n">cfisuprange</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_nicid_t</span> <span class="n">nicid</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_refdac_measurements_t</span> <span class="n">refdac_measurements</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_vgdac_measurements_t</span> <span class="n">vgdac_measurements</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_level_compc_measurements_t</span> <span class="n">level_compc_measurements</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_mac_address_t</span> <span class="n">mac_address</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_mkk_callname_t</span> <span class="n">mkk_callname</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_regdomain_t</span> <span class="n">regdomain</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_allowed_channel_t</span> <span class="n">allowed_channel</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_default_channel_t</span> <span class="n">default_channel</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_privacy_option_t</span> <span class="n">privacy_option</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_temptype_t</span> <span class="n">temptype</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_refdac_setup_t</span> <span class="n">refdac_setup</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_vgdac_setup_t</span> <span class="n">vgdac_setup</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_level_comp_setup_t</span> <span class="n">level_comp_setup</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_trimdac_setup_t</span> <span class="n">trimdac_setup</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_ifr_setting_t</span> <span class="n">ifr_setting</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_rfr_setting_t</span> <span class="n">rfr_setting</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_hfa3861_baseline_t</span> <span class="n">hfa3861_baseline</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_hfa3861_shadow_t</span> <span class="n">hfa3861_shadow</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_hfa3861_ifrf_t</span> <span class="n">hfa3861_ifrf</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_hfa3861_chcalsp_t</span> <span class="n">hfa3861_chcalsp</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_hfa3861_chcali_t</span> <span class="n">hfa3861_chcali</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_nic_config_t</span> <span class="n">nic_config</span><span class="p">;</span>
		<span class="n">hfa384x_hfo_delay_t</span> <span class="n">hfo_delay</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_hfa3861_manf_testsp_t</span> <span class="n">hfa3861_manf_testsp</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_hfa3861_manf_testi_t</span> <span class="n">hfa3861_manf_testi</span><span class="p">;</span>
		<span class="n">hfa384x_pdr_end_of_pda_t</span> <span class="n">end_of_pda</span><span class="p">;</span>

	<span class="p">}</span> <span class="n">data</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">hfa384x_pdrec_t</span><span class="p">;</span>

<span class="cp">#ifdef __KERNEL__</span>
<span class="cm">/*--------------------------------------------------------------------</span>
<span class="cm">---  MAC state structure, argument to all functions --</span>
<span class="cm">---  Also, a collection of support types --</span>
<span class="cm">--------------------------------------------------------------------*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_statusresult</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">resp0</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">resp1</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">resp2</span><span class="p">;</span>
<span class="p">}</span> <span class="n">hfa384x_cmdresult_t</span><span class="p">;</span>

<span class="cm">/* USB Control Exchange (CTLX):</span>
<span class="cm"> *  A queue of the structure below is maintained for all of the</span>
<span class="cm"> *  Request/Response type USB packets supported by Prism2.</span>
<span class="cm"> */</span>
<span class="cm">/* The following hfa384x_* structures are arguments to</span>
<span class="cm"> * the usercb() for the different CTLX types.</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_rridresult</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">rid</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">riddata</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">riddata_len</span><span class="p">;</span>
<span class="p">}</span> <span class="n">hfa384x_rridresult_t</span><span class="p">;</span>

<span class="k">enum</span> <span class="n">ctlx_state</span> <span class="p">{</span>
	<span class="n">CTLX_START</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>		<span class="cm">/* Start state, not queued */</span>

	<span class="n">CTLX_COMPLETE</span><span class="p">,</span>		<span class="cm">/* CTLX successfully completed */</span>
	<span class="n">CTLX_REQ_FAILED</span><span class="p">,</span>	<span class="cm">/* OUT URB completed w/ error */</span>

	<span class="n">CTLX_PENDING</span><span class="p">,</span>		<span class="cm">/* Queued, data valid */</span>
	<span class="n">CTLX_REQ_SUBMITTED</span><span class="p">,</span>	<span class="cm">/* OUT URB submitted */</span>
	<span class="n">CTLX_REQ_COMPLETE</span><span class="p">,</span>	<span class="cm">/* OUT URB complete */</span>
	<span class="n">CTLX_RESP_COMPLETE</span>	<span class="cm">/* IN URB received */</span>
<span class="p">};</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">ctlx_state</span> <span class="n">CTLX_STATE</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">hfa384x_usbctlx</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">hfa384x</span><span class="p">;</span>

<span class="k">typedef</span> <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">ctlx_cmdcb_t</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">hfa384x</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">hfa384x_usbctlx</span> <span class="o">*</span><span class="p">);</span>

<span class="k">typedef</span> <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">ctlx_usercb_t</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">hfa384x</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span>
			       <span class="kt">void</span> <span class="o">*</span><span class="n">ctlxresult</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">usercb_data</span><span class="p">);</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usbctlx</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>

	<span class="kt">size_t</span> <span class="n">outbufsize</span><span class="p">;</span>
	<span class="n">hfa384x_usbout_t</span> <span class="n">outbuf</span><span class="p">;</span>	<span class="cm">/* pkt buf for OUT */</span>
	<span class="n">hfa384x_usbin_t</span> <span class="n">inbuf</span><span class="p">;</span>	<span class="cm">/* pkt buf for IN(a copy) */</span>

	<span class="n">CTLX_STATE</span> <span class="n">state</span><span class="p">;</span>	<span class="cm">/* Tracks running state */</span>

	<span class="k">struct</span> <span class="n">completion</span> <span class="n">done</span><span class="p">;</span>
	<span class="k">volatile</span> <span class="kt">int</span> <span class="n">reapable</span><span class="p">;</span>	<span class="cm">/* Food for the reaper task */</span>

	<span class="n">ctlx_cmdcb_t</span> <span class="n">cmdcb</span><span class="p">;</span>	<span class="cm">/* Async command callback */</span>
	<span class="n">ctlx_usercb_t</span> <span class="n">usercb</span><span class="p">;</span>	<span class="cm">/* Async user callback, */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">usercb_data</span><span class="p">;</span>	<span class="cm">/*  at CTLX completion  */</span>

	<span class="kt">int</span> <span class="n">variant</span><span class="p">;</span>		<span class="cm">/* Identifies cmd variant */</span>
<span class="p">}</span> <span class="n">hfa384x_usbctlx_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x_usbctlxq</span> <span class="p">{</span>
	<span class="n">spinlock_t</span> <span class="n">lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">pending</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">active</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">completing</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">reapable</span><span class="p">;</span>
<span class="p">}</span> <span class="n">hfa384x_usbctlxq_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa484x_metacmd</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">cmd</span><span class="p">;</span>

	<span class="n">u16</span> <span class="n">parm0</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">parm1</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">parm2</span><span class="p">;</span>

	<span class="n">hfa384x_cmdresult_t</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span> <span class="n">hfa384x_metacmd_t</span><span class="p">;</span>

<span class="cp">#define	MAX_GRP_ADDR		32</span>
<span class="cp">#define WLAN_COMMENT_MAX	80  </span><span class="cm">/* Max. length of user comment string. */</span><span class="cp"></span>

<span class="cp">#define WLAN_AUTH_MAX           60  </span><span class="cm">/* Max. # of authenticated stations. */</span><span class="cp"></span>
<span class="cp">#define WLAN_ACCESS_MAX		60  </span><span class="cm">/* Max. # of stations in an access list. */</span><span class="cp"></span>
<span class="cp">#define WLAN_ACCESS_NONE	0   </span><span class="cm">/* No stations may be authenticated. */</span><span class="cp"></span>
<span class="cp">#define WLAN_ACCESS_ALL		1   </span><span class="cm">/* All stations may be authenticated. */</span><span class="cp"></span>
<span class="cp">#define WLAN_ACCESS_ALLOW	2   </span><span class="cm">/* Authenticate only &quot;allowed&quot; stations. */</span><span class="cp"></span>
<span class="cp">#define WLAN_ACCESS_DENY	3   </span><span class="cm">/* Do not authenticate &quot;denied&quot; stations. */</span><span class="cp"></span>

<span class="cm">/* XXX These are going away ASAP */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">prism2sta_authlist</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cnt</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">addr</span><span class="p">[</span><span class="n">WLAN_AUTH_MAX</span><span class="p">][</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">assoc</span><span class="p">[</span><span class="n">WLAN_AUTH_MAX</span><span class="p">];</span>
<span class="p">}</span> <span class="n">prism2sta_authlist_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">prism2sta_accesslist</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">modify</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cnt</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">addr</span><span class="p">[</span><span class="n">WLAN_ACCESS_MAX</span><span class="p">][</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cnt1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">addr1</span><span class="p">[</span><span class="n">WLAN_ACCESS_MAX</span><span class="p">][</span><span class="n">ETH_ALEN</span><span class="p">];</span>
<span class="p">}</span> <span class="n">prism2sta_accesslist_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">hfa384x</span> <span class="p">{</span>
	<span class="cm">/* USB support data */</span>
	<span class="k">struct</span> <span class="n">usb_device</span> <span class="o">*</span><span class="n">usb</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">urb</span> <span class="n">rx_urb</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">rx_urb_skb</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">urb</span> <span class="n">tx_urb</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">urb</span> <span class="n">ctlx_urb</span><span class="p">;</span>
	<span class="n">hfa384x_usbout_t</span> <span class="n">txbuff</span><span class="p">;</span>
	<span class="n">hfa384x_usbctlxq_t</span> <span class="n">ctlxq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">reqtimer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">resptimer</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">throttle</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">tasklet_struct</span> <span class="n">reaper_bh</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">tasklet_struct</span> <span class="n">completion_bh</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">usb_work</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">usb_flags</span><span class="p">;</span>
<span class="cp">#define THROTTLE_RX	0</span>
<span class="cp">#define THROTTLE_TX	1</span>
<span class="cp">#define WORK_RX_HALT	2</span>
<span class="cp">#define WORK_TX_HALT	3</span>
<span class="cp">#define WORK_RX_RESUME	4</span>
<span class="cp">#define WORK_TX_RESUME	5</span>

	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">req_timer_done</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">resp_timer_done</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>

	<span class="kt">int</span> <span class="n">endp_in</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">endp_out</span><span class="p">;</span>

	<span class="kt">int</span> <span class="n">sniff_fcs</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">sniff_channel</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">sniff_truncate</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">sniffhdr</span><span class="p">;</span>

	<span class="n">wait_queue_head_t</span> <span class="n">cmdq</span><span class="p">;</span>	<span class="cm">/* wait queue itself */</span>

	<span class="cm">/* Controller state */</span>
	<span class="n">u32</span> <span class="n">state</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">isap</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">port_enabled</span><span class="p">[</span><span class="n">HFA384x_NUMPORTS_MAX</span><span class="p">];</span>

	<span class="cm">/* Download support */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dlstate</span><span class="p">;</span>
	<span class="n">hfa384x_downloadbuffer_t</span> <span class="n">bufinfo</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">dltimeout</span><span class="p">;</span>

	<span class="kt">int</span> <span class="n">scanflag</span><span class="p">;</span>		<span class="cm">/* to signal scan comlete */</span>
	<span class="kt">int</span> <span class="n">join_ap</span><span class="p">;</span>		<span class="cm">/* are we joined to a specific ap */</span>
	<span class="kt">int</span> <span class="n">join_retries</span><span class="p">;</span>	<span class="cm">/* number of join retries till we fail */</span>
	<span class="n">hfa384x_JoinRequest_data_t</span> <span class="n">joinreq</span><span class="p">;</span>	<span class="cm">/* join request saved data */</span>

	<span class="n">wlandevice_t</span> <span class="o">*</span><span class="n">wlandev</span><span class="p">;</span>
	<span class="cm">/* Timer to allow for the deferred processing of linkstatus messages */</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">link_bh</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">commsqual_bh</span><span class="p">;</span>
	<span class="n">hfa384x_commsquality_t</span> <span class="n">qual</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">commsqual_timer</span><span class="p">;</span>

	<span class="n">u16</span> <span class="n">link_status</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">link_status_new</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="n">authq</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">txrate</span><span class="p">;</span>

	<span class="cm">/* And here we have stuff that used to be in priv */</span>

	<span class="cm">/* State variables */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">presniff_port_type</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">presniff_wepflags</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dot11_desired_bss_type</span><span class="p">;</span>

	<span class="kt">int</span> <span class="n">dbmadjust</span><span class="p">;</span>

	<span class="cm">/* Group Addresses - right now, there are up to a total</span>
<span class="cm">	   of MAX_GRP_ADDR group addresses */</span>
	<span class="n">u8</span> <span class="n">dot11_grp_addr</span><span class="p">[</span><span class="n">MAX_GRP_ADDR</span><span class="p">][</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dot11_grpcnt</span><span class="p">;</span>

	<span class="cm">/* Component Identities */</span>
	<span class="n">hfa384x_compident_t</span> <span class="n">ident_nic</span><span class="p">;</span>
	<span class="n">hfa384x_compident_t</span> <span class="n">ident_pri_fw</span><span class="p">;</span>
	<span class="n">hfa384x_compident_t</span> <span class="n">ident_sta_fw</span><span class="p">;</span>
	<span class="n">hfa384x_compident_t</span> <span class="n">ident_ap_fw</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">mm_mods</span><span class="p">;</span>

	<span class="cm">/* Supplier compatibility ranges */</span>
	<span class="n">hfa384x_caplevel_t</span> <span class="n">cap_sup_mfi</span><span class="p">;</span>
	<span class="n">hfa384x_caplevel_t</span> <span class="n">cap_sup_cfi</span><span class="p">;</span>
	<span class="n">hfa384x_caplevel_t</span> <span class="n">cap_sup_pri</span><span class="p">;</span>
	<span class="n">hfa384x_caplevel_t</span> <span class="n">cap_sup_sta</span><span class="p">;</span>
	<span class="n">hfa384x_caplevel_t</span> <span class="n">cap_sup_ap</span><span class="p">;</span>

	<span class="cm">/* Actor compatibility ranges */</span>
	<span class="n">hfa384x_caplevel_t</span> <span class="n">cap_act_pri_cfi</span><span class="p">;</span>	<span class="cm">/*</span>
<span class="cm">						 * pri f/w to controller</span>
<span class="cm">						 * interface</span>
<span class="cm">						 */</span>

	<span class="n">hfa384x_caplevel_t</span> <span class="n">cap_act_sta_cfi</span><span class="p">;</span>	<span class="cm">/*</span>
<span class="cm">						 * sta f/w to controller</span>
<span class="cm">						 * interface</span>
<span class="cm">						 */</span>

	<span class="n">hfa384x_caplevel_t</span> <span class="n">cap_act_sta_mfi</span><span class="p">;</span>	<span class="cm">/* sta f/w to modem interface */</span>

	<span class="n">hfa384x_caplevel_t</span> <span class="n">cap_act_ap_cfi</span><span class="p">;</span>	<span class="cm">/*</span>
<span class="cm">						 * ap f/w to controller</span>
<span class="cm">						 * interface</span>
<span class="cm">						 */</span>

	<span class="n">hfa384x_caplevel_t</span> <span class="n">cap_act_ap_mfi</span><span class="p">;</span>	<span class="cm">/* ap f/w to modem interface */</span>

	<span class="n">u32</span> <span class="n">psusercount</span><span class="p">;</span>	<span class="cm">/* Power save user count. */</span>
	<span class="n">hfa384x_CommTallies32_t</span> <span class="n">tallies</span><span class="p">;</span>	<span class="cm">/* Communication tallies. */</span>
	<span class="n">u8</span> <span class="n">comment</span><span class="p">[</span><span class="n">WLAN_COMMENT_MAX</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>	<span class="cm">/* User comment */</span>

	<span class="cm">/* Channel Info request results (AP only) */</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">atomic_t</span> <span class="n">done</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">count</span><span class="p">;</span>
		<span class="n">hfa384x_ChInfoResult_t</span> <span class="n">results</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">channel_info</span><span class="p">;</span>

	<span class="n">hfa384x_InfFrame_t</span> <span class="o">*</span><span class="n">scanresults</span><span class="p">;</span>

	<span class="n">prism2sta_authlist_t</span> <span class="n">authlist</span><span class="p">;</span>	<span class="cm">/* Authenticated station list. */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">accessmode</span><span class="p">;</span>	<span class="cm">/* Access mode. */</span>
	<span class="n">prism2sta_accesslist_t</span> <span class="n">allow</span><span class="p">;</span>	<span class="cm">/* Allowed station list. */</span>
	<span class="n">prism2sta_accesslist_t</span> <span class="n">deny</span><span class="p">;</span>	<span class="cm">/* Denied station list. */</span>

<span class="p">}</span> <span class="n">hfa384x_t</span><span class="p">;</span>

<span class="kt">void</span> <span class="n">hfa384x_create</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="k">struct</span> <span class="n">usb_device</span> <span class="o">*</span><span class="n">usb</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">hfa384x_destroy</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">hfa384x_corereset</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="kt">int</span> <span class="n">holdtime</span><span class="p">,</span> <span class="kt">int</span> <span class="n">settletime</span><span class="p">,</span> <span class="kt">int</span> <span class="n">genesis</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_drvr_commtallies</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_drvr_disable</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">macport</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_drvr_enable</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">macport</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_drvr_flashdl_enable</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_drvr_flashdl_disable</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_drvr_flashdl_write</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">daddr</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">u32</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_drvr_getconfig</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">rid</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">u16</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_drvr_ramdl_enable</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">exeaddr</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_drvr_ramdl_disable</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_drvr_ramdl_write</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">daddr</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">u32</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_drvr_readpda</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_drvr_setconfig</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">rid</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">u16</span> <span class="n">len</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">hfa384x_drvr_getconfig16</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">rid</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">result</span> <span class="o">=</span> <span class="n">hfa384x_drvr_getconfig</span><span class="p">(</span><span class="n">hw</span><span class="p">,</span> <span class="n">rid</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">u16</span><span class="p">));</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
		<span class="o">*</span><span class="p">((</span><span class="n">u16</span> <span class="o">*</span><span class="p">)</span> <span class="n">val</span><span class="p">)</span> <span class="o">=</span> <span class="n">le16_to_cpu</span><span class="p">(</span><span class="o">*</span><span class="p">((</span><span class="n">u16</span> <span class="o">*</span><span class="p">)</span> <span class="n">val</span><span class="p">));</span>
	<span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">hfa384x_drvr_setconfig16</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">rid</span><span class="p">,</span> <span class="n">u16</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u16</span> <span class="n">value</span> <span class="o">=</span> <span class="n">cpu_to_le16</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">hfa384x_drvr_setconfig</span><span class="p">(</span><span class="n">hw</span><span class="p">,</span> <span class="n">rid</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">value</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">int</span>
<span class="n">hfa384x_drvr_getconfig_async</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span>
			     <span class="n">u16</span> <span class="n">rid</span><span class="p">,</span> <span class="n">ctlx_usercb_t</span> <span class="n">usercb</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">usercb_data</span><span class="p">);</span>

<span class="kt">int</span>
<span class="n">hfa384x_drvr_setconfig_async</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span>
			     <span class="n">u16</span> <span class="n">rid</span><span class="p">,</span>
			     <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span>
			     <span class="n">u16</span> <span class="n">len</span><span class="p">,</span> <span class="n">ctlx_usercb_t</span> <span class="n">usercb</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">usercb_data</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span>
<span class="nf">hfa384x_drvr_setconfig16_async</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">rid</span><span class="p">,</span> <span class="n">u16</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u16</span> <span class="n">value</span> <span class="o">=</span> <span class="n">cpu_to_le16</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">hfa384x_drvr_setconfig_async</span><span class="p">(</span><span class="n">hw</span><span class="p">,</span> <span class="n">rid</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">value</span><span class="p">),</span>
					    <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">hfa384x_drvr_start</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_drvr_stop</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="kt">int</span>
<span class="n">hfa384x_drvr_txframe</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">,</span>
		     <span class="k">union</span> <span class="n">p80211_hdr</span> <span class="o">*</span><span class="n">p80211_hdr</span><span class="p">,</span> <span class="k">struct</span> <span class="n">p80211_metawep</span> <span class="o">*</span><span class="n">p80211_wep</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">hfa384x_tx_timeout</span><span class="p">(</span><span class="n">wlandevice_t</span> <span class="o">*</span><span class="n">wlandev</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">hfa384x_cmd_initialize</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_cmd_enable</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">macport</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_cmd_disable</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">macport</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_cmd_allocate</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">hfa384x_cmd_monitor</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">enable</span><span class="p">);</span>
<span class="kt">int</span>
<span class="n">hfa384x_cmd_download</span><span class="p">(</span><span class="n">hfa384x_t</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span>
		     <span class="n">u16</span> <span class="n">mode</span><span class="p">,</span> <span class="n">u16</span> <span class="n">lowaddr</span><span class="p">,</span> <span class="n">u16</span> <span class="n">highaddr</span><span class="p">,</span> <span class="n">u16</span> <span class="n">codelen</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/*__KERNEL__ */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/*_HFA384x_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
