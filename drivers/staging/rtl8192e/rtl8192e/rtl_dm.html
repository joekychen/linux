<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › rtl8192e › rtl8192e › rtl_dm.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>rtl_dm.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/******************************************************************************</span>
<span class="cm"> * Copyright(c) 2008 - 2010 Realtek Corporation. All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="cm"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<span class="cm"> * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for</span>
<span class="cm"> * more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License along with</span>
<span class="cm"> * this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="cm"> * 51 Franklin Street, Fifth Floor, Boston, MA 02110, USA</span>
<span class="cm"> *</span>
<span class="cm"> * The full GNU General Public License is included in this distribution in the</span>
<span class="cm"> * file called LICENSE.</span>
<span class="cm"> *</span>
<span class="cm"> * Contact Information:</span>
<span class="cm"> * wlanfae &lt;wlanfae@realtek.com&gt;</span>
<span class="cm">******************************************************************************/</span>
<span class="cp">#include &quot;rtl_core.h&quot;</span>
<span class="cp">#include &quot;rtl_dm.h&quot;</span>
<span class="cp">#include &quot;r8192E_hw.h&quot;</span>
<span class="cp">#include &quot;r8192E_phy.h&quot;</span>
<span class="cp">#include &quot;r8192E_phyreg.h&quot;</span>
<span class="cp">#include &quot;r8190P_rtl8256.h&quot;</span>
<span class="cp">#include &quot;r8192E_cmdpkt.h&quot;</span>

<span class="cm">/*---------------------------Define Local Constant---------------------------*/</span>
<span class="k">static</span> <span class="n">u32</span> <span class="n">edca_setting_DL</span><span class="p">[</span><span class="n">HT_IOT_PEER_MAX</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x5e4322</span><span class="p">,</span>
	<span class="mh">0x5e4322</span><span class="p">,</span>
	<span class="mh">0x5ea44f</span><span class="p">,</span>
	<span class="mh">0x5e4322</span><span class="p">,</span>
	<span class="mh">0x604322</span><span class="p">,</span>
	<span class="mh">0xa44f</span><span class="p">,</span>
	<span class="mh">0x5e4322</span><span class="p">,</span>
	<span class="mh">0x5e4332</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">u32</span> <span class="n">edca_setting_DL_GMode</span><span class="p">[</span><span class="n">HT_IOT_PEER_MAX</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x5e4322</span><span class="p">,</span>
	<span class="mh">0x5e4322</span><span class="p">,</span>
	<span class="mh">0x5e4322</span><span class="p">,</span>
	<span class="mh">0x5e4322</span><span class="p">,</span>
	<span class="mh">0x604322</span><span class="p">,</span>
	<span class="mh">0xa44f</span><span class="p">,</span>
	<span class="mh">0x5e4322</span><span class="p">,</span>
	<span class="mh">0x5e4322</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">u32</span> <span class="n">edca_setting_UL</span><span class="p">[</span><span class="n">HT_IOT_PEER_MAX</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x5e4322</span><span class="p">,</span>
	<span class="mh">0xa44f</span><span class="p">,</span>
	<span class="mh">0x5ea44f</span><span class="p">,</span>
	<span class="mh">0x5e4322</span><span class="p">,</span>
	<span class="mh">0x604322</span><span class="p">,</span>
	<span class="mh">0x5e4322</span><span class="p">,</span>
	<span class="mh">0x5e4322</span><span class="p">,</span>
	<span class="mh">0x5e4332</span>
<span class="p">};</span>

<span class="cp">#define RTK_UL_EDCA 0xa44f</span>
<span class="cp">#define RTK_DL_EDCA 0x5e4322</span>
<span class="cm">/*---------------------------Define Local Constant---------------------------*/</span>


<span class="cm">/*------------------------Define global variable-----------------------------*/</span>
<span class="k">struct</span> <span class="n">dig_t</span> <span class="n">dm_digtable</span><span class="p">;</span>
<span class="n">u8</span> <span class="n">dm_shadow</span><span class="p">[</span><span class="mi">16</span><span class="p">][</span><span class="mi">256</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mi">0</span><span class="p">}</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">drx_path_sel</span> <span class="n">DM_RxPathSelTable</span><span class="p">;</span>
<span class="cm">/*------------------------Define global variable-----------------------------*/</span>


<span class="cm">/*------------------------Define local variable------------------------------*/</span>
<span class="cm">/*------------------------Define local variable------------------------------*/</span>



<span class="cm">/*---------------------Define local function prototype-----------------------*/</span>
<span class="k">static</span>	<span class="kt">void</span>	<span class="n">dm_check_rate_adaptive</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="k">static</span>	<span class="kt">void</span>	<span class="n">dm_init_bandwidth_autoswitch</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span>	<span class="kt">void</span>	<span class="n">dm_bandwidth_autoswitch</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>


<span class="k">static</span>	<span class="kt">void</span>	<span class="n">dm_check_txpower_tracking</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>





<span class="k">static</span>	<span class="kt">void</span>	<span class="n">dm_bb_initialgain_restore</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>


<span class="k">static</span>	<span class="kt">void</span>	<span class="n">dm_bb_initialgain_backup</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_dig_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_ctrl_initgain_byrssi</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_ctrl_initgain_byrssi_highpwr</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_ctrl_initgain_byrssi_by_driverrssi</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_ctrl_initgain_byrssi_by_fwfalse_alarm</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_initial_gain</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_pd_th</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_cs_ratio</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_init_ctstoself</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_Init_WA_Broadcom_IOT</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="k">static</span>	<span class="kt">void</span>	<span class="n">dm_check_edca_turbo</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_check_pbc_gpio</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>


<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_check_rx_path_selection</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_init_rxpath_selection</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_rxpath_sel_byrssi</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>


<span class="k">static</span> <span class="kt">void</span> <span class="n">dm_init_fsync</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">dm_deInit_fsync</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_check_txrateandretrycount</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span>  <span class="kt">void</span> <span class="n">dm_check_ac_dc_power</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="cm">/*---------------------Define local function prototype-----------------------*/</span>

<span class="k">static</span>	<span class="kt">void</span>	<span class="n">dm_init_dynamic_txpower</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span>	<span class="kt">void</span>	<span class="n">dm_dynamic_txpower</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>


<span class="k">static</span>	<span class="kt">void</span> <span class="n">dm_send_rssi_tofw</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">static</span>	<span class="kt">void</span>	<span class="n">dm_ctstoself</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="cm">/*---------------------------Define function prototype------------------------*/</span>

<span class="kt">void</span> <span class="nf">init_hal_dm</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">DM_Type</span> <span class="o">=</span> <span class="n">DM_Type_ByDriver</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

	<span class="n">dm_init_dynamic_txpower</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">init_rate_adaptive</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">dm_dig_init</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_init_edca_turbo</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_init_bandwidth_autoswitch</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_init_fsync</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_init_rxpath_selection</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_init_ctstoself</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_HARDWARE_TYPE_8192SE</span><span class="p">(</span><span class="n">dev</span><span class="p">))</span>
		<span class="n">dm_Init_WA_Broadcom_IOT</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">INIT_DELAYED_WORK_RSL</span><span class="p">(</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">gpio_change_rf_wq</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="n">dm_CheckRfCtrlGPIO</span><span class="p">,</span> <span class="n">dev</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">deinit_hal_dm</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>

	<span class="n">dm_deInit_fsync</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

<span class="p">}</span>

<span class="kt">void</span> <span class="nf">hal_dm_watchdog</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">being_init_adapter</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="n">dm_check_ac_dc_power</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">dm_check_pbc_gpio</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_check_txrateandretrycount</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_check_edca_turbo</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">dm_check_rate_adaptive</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_dynamic_txpower</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_check_txpower_tracking</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">dm_ctrl_initgain_byrssi</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_bandwidth_autoswitch</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">dm_check_rx_path_selection</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_check_fsync</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">dm_send_rssi_tofw</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_ctstoself</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_check_ac_dc_power</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">static</span> <span class="kt">char</span> <span class="o">*</span><span class="n">ac_dc_check_script_path</span> <span class="o">=</span> <span class="s">&quot;/etc/acpi/wireless-rtl-ac-dc-power.sh&quot;</span><span class="p">;</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="n">ac_dc_check_script_path</span><span class="p">,</span> <span class="n">DRV_NAME</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">};</span>
	<span class="k">static</span> <span class="kt">char</span> <span class="o">*</span><span class="n">envp</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;HOME=/&quot;</span><span class="p">,</span>
			<span class="s">&quot;TERM=linux&quot;</span><span class="p">,</span>
			<span class="s">&quot;PATH=/usr/bin:/bin&quot;</span><span class="p">,</span>
			 <span class="nb">NULL</span><span class="p">};</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">ResetProgress</span> <span class="o">==</span> <span class="n">RESET_TYPE_SILENT</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">RT_TRACE</span><span class="p">((</span><span class="n">COMP_INIT</span> <span class="o">|</span> <span class="n">COMP_POWER</span> <span class="o">|</span> <span class="n">COMP_RF</span><span class="p">),</span>
			 <span class="s">&quot;GPIOChangeRFWorkItemCallBack(): Silent Reseting!!!!!!!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">!=</span> <span class="n">RTLLIB_LINKED</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="n">call_usermodehelper</span><span class="p">(</span><span class="n">ac_dc_check_script_path</span><span class="p">,</span> <span class="n">argv</span><span class="p">,</span> <span class="n">envp</span><span class="p">,</span> <span class="n">UMH_WAIT_PROC</span><span class="p">);</span>

	<span class="k">return</span><span class="p">;</span>
<span class="p">};</span>


<span class="kt">void</span> <span class="nf">init_rate_adaptive</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>

	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">rate_adaptive</span> <span class="o">*</span><span class="n">pra</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">rate_adaptive</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rate_adaptive</span><span class="p">;</span>

	<span class="n">pra</span><span class="o">-&gt;</span><span class="n">ratr_state</span> <span class="o">=</span> <span class="n">DM_RATR_STA_MAX</span><span class="p">;</span>
	<span class="n">pra</span><span class="o">-&gt;</span><span class="n">high2low_rssi_thresh_for_ra</span> <span class="o">=</span> <span class="n">RateAdaptiveTH_High</span><span class="p">;</span>
	<span class="n">pra</span><span class="o">-&gt;</span><span class="n">low2high_rssi_thresh_for_ra20M</span> <span class="o">=</span> <span class="n">RateAdaptiveTH_Low_20M</span><span class="o">+</span><span class="mi">5</span><span class="p">;</span>
	<span class="n">pra</span><span class="o">-&gt;</span><span class="n">low2high_rssi_thresh_for_ra40M</span> <span class="o">=</span> <span class="n">RateAdaptiveTH_Low_40M</span><span class="o">+</span><span class="mi">5</span><span class="p">;</span>

	<span class="n">pra</span><span class="o">-&gt;</span><span class="n">high_rssi_thresh_for_ra</span> <span class="o">=</span> <span class="n">RateAdaptiveTH_High</span><span class="o">+</span><span class="mi">5</span><span class="p">;</span>
	<span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_thresh_for_ra20M</span> <span class="o">=</span> <span class="n">RateAdaptiveTH_Low_20M</span><span class="p">;</span>
	<span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_thresh_for_ra40M</span> <span class="o">=</span> <span class="n">RateAdaptiveTH_Low_40M</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CustomerID</span> <span class="o">==</span> <span class="n">RT_CID_819x_Netcore</span><span class="p">)</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">ping_rssi_enable</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">ping_rssi_enable</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">pra</span><span class="o">-&gt;</span><span class="n">ping_rssi_thresh_for_ra</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span>


	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rf_type</span> <span class="o">==</span> <span class="n">RF_2T4R</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">upper_rssi_threshold_ratr</span>		<span class="o">=</span>	<span class="mh">0x8f0f0000</span><span class="p">;</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">middle_rssi_threshold_ratr</span>		<span class="o">=</span>	<span class="mh">0x8f0ff000</span><span class="p">;</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_threshold_ratr</span>		<span class="o">=</span>	<span class="mh">0x8f0ff001</span><span class="p">;</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_threshold_ratr_40M</span>	<span class="o">=</span>	<span class="mh">0x8f0ff005</span><span class="p">;</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_threshold_ratr_20M</span>	<span class="o">=</span>	<span class="mh">0x8f0ff001</span><span class="p">;</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">ping_rssi_ratr</span>	<span class="o">=</span>	<span class="mh">0x0000000d</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rf_type</span> <span class="o">==</span> <span class="n">RF_1T2R</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">upper_rssi_threshold_ratr</span>		<span class="o">=</span>	<span class="mh">0x000fc000</span><span class="p">;</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">middle_rssi_threshold_ratr</span>		<span class="o">=</span>	<span class="mh">0x000ff000</span><span class="p">;</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_threshold_ratr</span>		<span class="o">=</span>	<span class="mh">0x000ff001</span><span class="p">;</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_threshold_ratr_40M</span>	<span class="o">=</span>	<span class="mh">0x000ff005</span><span class="p">;</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_threshold_ratr_20M</span>	<span class="o">=</span>	<span class="mh">0x000ff001</span><span class="p">;</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">ping_rssi_ratr</span>	<span class="o">=</span>	<span class="mh">0x0000000d</span><span class="p">;</span>
	<span class="p">}</span>

<span class="p">}</span>


<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_check_rate_adaptive</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">rt_hi_throughput</span> <span class="o">*</span><span class="n">pHTInfo</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">pHTInfo</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">rate_adaptive</span> <span class="o">*</span><span class="n">pra</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">rate_adaptive</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rate_adaptive</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">currentRATR</span><span class="p">,</span> <span class="n">targetRATR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">LowRSSIThreshForRA</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">HighRSSIThreshForRA</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">bshort_gi_enabled</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="k">static</span> <span class="n">u8</span> <span class="n">ping_rssi_state</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NIC_DOWN</span><span class="p">(</span><span class="n">priv</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_RATE</span><span class="p">,</span> <span class="s">&quot;&lt;---- dm_check_rate_adaptive(): driver is going to unload</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">rate_adaptive_disabled</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">mode</span> <span class="o">==</span> <span class="n">WIRELESS_MODE_N_24G</span> <span class="o">||</span>
	    <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">mode</span> <span class="o">==</span> <span class="n">WIRELESS_MODE_N_5G</span><span class="p">))</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">==</span> <span class="n">RTLLIB_LINKED</span><span class="p">)</span> <span class="p">{</span>

		<span class="n">bshort_gi_enabled</span> <span class="o">=</span> <span class="p">(</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">bCurTxBW40MHz</span> <span class="o">&amp;&amp;</span> <span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">bCurShortGI40MHz</span><span class="p">)</span> <span class="o">||</span>
			<span class="p">(</span><span class="o">!</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">bCurTxBW40MHz</span> <span class="o">&amp;&amp;</span> <span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">bCurShortGI20MHz</span><span class="p">);</span>


		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">upper_rssi_threshold_ratr</span> <span class="o">=</span>
				<span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">upper_rssi_threshold_ratr</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="n">BIT31</span><span class="p">))</span> <span class="o">|</span> <span class="p">((</span><span class="n">bshort_gi_enabled</span><span class="p">)</span> <span class="o">?</span> <span class="n">BIT31</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>

		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">middle_rssi_threshold_ratr</span> <span class="o">=</span>
				<span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">middle_rssi_threshold_ratr</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="n">BIT31</span><span class="p">))</span> <span class="o">|</span> <span class="p">((</span><span class="n">bshort_gi_enabled</span><span class="p">)</span> <span class="o">?</span> <span class="n">BIT31</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CurrentChannelBW</span> <span class="o">!=</span> <span class="n">HT_CHANNEL_WIDTH_20</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_threshold_ratr</span> <span class="o">=</span>
				<span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_threshold_ratr_40M</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="n">BIT31</span><span class="p">))</span> <span class="o">|</span> <span class="p">((</span><span class="n">bshort_gi_enabled</span><span class="p">)</span> <span class="o">?</span> <span class="n">BIT31</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_threshold_ratr</span> <span class="o">=</span>
			<span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_threshold_ratr_20M</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="n">BIT31</span><span class="p">))</span> <span class="o">|</span> <span class="p">((</span><span class="n">bshort_gi_enabled</span><span class="p">)</span> <span class="o">?</span> <span class="n">BIT31</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">ping_rssi_ratr</span> <span class="o">=</span>
				<span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">ping_rssi_ratr</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="n">BIT31</span><span class="p">))</span> <span class="o">|</span> <span class="p">((</span><span class="n">bshort_gi_enabled</span><span class="p">)</span> <span class="o">?</span> <span class="n">BIT31</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">ratr_state</span> <span class="o">==</span> <span class="n">DM_RATR_STA_HIGH</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">HighRSSIThreshForRA</span>	<span class="o">=</span> <span class="n">pra</span><span class="o">-&gt;</span><span class="n">high2low_rssi_thresh_for_ra</span><span class="p">;</span>
			<span class="n">LowRSSIThreshForRA</span>	<span class="o">=</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CurrentChannelBW</span> <span class="o">!=</span> <span class="n">HT_CHANNEL_WIDTH_20</span><span class="p">)</span> <span class="o">?</span>
					<span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_thresh_for_ra40M</span><span class="p">)</span> <span class="o">:</span> <span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_thresh_for_ra20M</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">ratr_state</span> <span class="o">==</span> <span class="n">DM_RATR_STA_LOW</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">HighRSSIThreshForRA</span>	<span class="o">=</span> <span class="n">pra</span><span class="o">-&gt;</span><span class="n">high_rssi_thresh_for_ra</span><span class="p">;</span>
			<span class="n">LowRSSIThreshForRA</span>	<span class="o">=</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CurrentChannelBW</span> <span class="o">!=</span> <span class="n">HT_CHANNEL_WIDTH_20</span><span class="p">)</span> <span class="o">?</span>
					<span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">low2high_rssi_thresh_for_ra40M</span><span class="p">)</span> <span class="o">:</span> <span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">low2high_rssi_thresh_for_ra20M</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">HighRSSIThreshForRA</span>	<span class="o">=</span> <span class="n">pra</span><span class="o">-&gt;</span><span class="n">high_rssi_thresh_for_ra</span><span class="p">;</span>
			<span class="n">LowRSSIThreshForRA</span>	<span class="o">=</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CurrentChannelBW</span> <span class="o">!=</span> <span class="n">HT_CHANNEL_WIDTH_20</span><span class="p">)</span> <span class="o">?</span>
					<span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_thresh_for_ra40M</span><span class="p">)</span> <span class="o">:</span> <span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_thresh_for_ra20M</span><span class="p">);</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="n">HighRSSIThreshForRA</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">pra</span><span class="o">-&gt;</span><span class="n">ratr_state</span> <span class="o">=</span> <span class="n">DM_RATR_STA_HIGH</span><span class="p">;</span>
			<span class="n">targetRATR</span> <span class="o">=</span> <span class="n">pra</span><span class="o">-&gt;</span><span class="n">upper_rssi_threshold_ratr</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="n">LowRSSIThreshForRA</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">pra</span><span class="o">-&gt;</span><span class="n">ratr_state</span> <span class="o">=</span> <span class="n">DM_RATR_STA_MIDDLE</span><span class="p">;</span>
			<span class="n">targetRATR</span> <span class="o">=</span> <span class="n">pra</span><span class="o">-&gt;</span><span class="n">middle_rssi_threshold_ratr</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">pra</span><span class="o">-&gt;</span><span class="n">ratr_state</span> <span class="o">=</span> <span class="n">DM_RATR_STA_LOW</span><span class="p">;</span>
			<span class="n">targetRATR</span> <span class="o">=</span> <span class="n">pra</span><span class="o">-&gt;</span><span class="n">low_rssi_threshold_ratr</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">ping_rssi_enable</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&lt;</span> <span class="p">(</span><span class="kt">long</span><span class="p">)(</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">ping_rssi_thresh_for_ra</span><span class="o">+</span><span class="mi">5</span><span class="p">))</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&lt;</span> <span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="n">pra</span><span class="o">-&gt;</span><span class="n">ping_rssi_thresh_for_ra</span><span class="p">)</span> <span class="o">||</span>
				    <span class="n">ping_rssi_state</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">pra</span><span class="o">-&gt;</span><span class="n">ratr_state</span> <span class="o">=</span> <span class="n">DM_RATR_STA_LOW</span><span class="p">;</span>
					<span class="n">targetRATR</span> <span class="o">=</span> <span class="n">pra</span><span class="o">-&gt;</span><span class="n">ping_rssi_ratr</span><span class="p">;</span>
					<span class="n">ping_rssi_state</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="n">ping_rssi_state</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">GetHalfNmodeSupportByAPsHandler</span><span class="p">(</span><span class="n">dev</span><span class="p">))</span>
			<span class="n">targetRATR</span> <span class="o">&amp;=</span>  <span class="mh">0xf00fffff</span><span class="p">;</span>

		<span class="n">currentRATR</span> <span class="o">=</span> <span class="n">read_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">RATR0</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">targetRATR</span> <span class="o">!=</span>  <span class="n">currentRATR</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">u32</span> <span class="n">ratr_value</span><span class="p">;</span>
			<span class="n">ratr_value</span> <span class="o">=</span> <span class="n">targetRATR</span><span class="p">;</span>
			<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_RATE</span><span class="p">,</span>
				 <span class="s">&quot;currentRATR = %x, targetRATR = %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				 <span class="n">currentRATR</span><span class="p">,</span> <span class="n">targetRATR</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rf_type</span> <span class="o">==</span> <span class="n">RF_1T2R</span><span class="p">)</span>
				<span class="n">ratr_value</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="n">RATE_ALL_OFDM_2SS</span><span class="p">);</span>
			<span class="n">write_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">RATR0</span><span class="p">,</span> <span class="n">ratr_value</span><span class="p">);</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">UFWP</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

			<span class="n">pra</span><span class="o">-&gt;</span><span class="n">last_ratr</span> <span class="o">=</span> <span class="n">targetRATR</span><span class="p">;</span>
		<span class="p">}</span>

	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">pra</span><span class="o">-&gt;</span><span class="n">ratr_state</span> <span class="o">=</span> <span class="n">DM_RATR_STA_MAX</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_init_bandwidth_autoswitch</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bandwidth_auto_switch</span><span class="p">.</span><span class="n">threshold_20Mhzto40Mhz</span> <span class="o">=</span> <span class="n">BW_AUTO_SWITCH_LOW_HIGH</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bandwidth_auto_switch</span><span class="p">.</span><span class="n">threshold_40Mhzto20Mhz</span> <span class="o">=</span> <span class="n">BW_AUTO_SWITCH_HIGH_LOW</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bandwidth_auto_switch</span><span class="p">.</span><span class="n">bforced_tx20Mhz</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bandwidth_auto_switch</span><span class="p">.</span><span class="n">bautoswitch_enable</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_bandwidth_autoswitch</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CurrentChannelBW</span> <span class="o">==</span> <span class="n">HT_CHANNEL_WIDTH_20</span> <span class="o">||</span>
	   <span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bandwidth_auto_switch</span><span class="p">.</span><span class="n">bautoswitch_enable</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bandwidth_auto_switch</span><span class="p">.</span><span class="n">bforced_tx20Mhz</span> <span class="o">==</span> <span class="nb">false</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&lt;=</span>
			    <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bandwidth_auto_switch</span><span class="p">.</span><span class="n">threshold_40Mhzto20Mhz</span><span class="p">)</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bandwidth_auto_switch</span><span class="p">.</span><span class="n">bforced_tx20Mhz</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&gt;=</span>
			    <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bandwidth_auto_switch</span><span class="p">.</span><span class="n">threshold_20Mhzto40Mhz</span><span class="p">)</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bandwidth_auto_switch</span><span class="p">.</span><span class="n">bforced_tx20Mhz</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">u32</span> <span class="n">OFDMSwingTable</span><span class="p">[</span><span class="n">OFDM_Table_Length</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x7f8001fe</span><span class="p">,</span>
	<span class="mh">0x71c001c7</span><span class="p">,</span>
	<span class="mh">0x65400195</span><span class="p">,</span>
	<span class="mh">0x5a400169</span><span class="p">,</span>
	<span class="mh">0x50800142</span><span class="p">,</span>
	<span class="mh">0x47c0011f</span><span class="p">,</span>
	<span class="mh">0x40000100</span><span class="p">,</span>
	<span class="mh">0x390000e4</span><span class="p">,</span>
	<span class="mh">0x32c000cb</span><span class="p">,</span>
	<span class="mh">0x2d4000b5</span><span class="p">,</span>
	<span class="mh">0x288000a2</span><span class="p">,</span>
	<span class="mh">0x24000090</span><span class="p">,</span>
	<span class="mh">0x20000080</span><span class="p">,</span>
	<span class="mh">0x1c800072</span><span class="p">,</span>
	<span class="mh">0x19800066</span><span class="p">,</span>
	<span class="mh">0x26c0005b</span><span class="p">,</span>
	<span class="mh">0x24400051</span><span class="p">,</span>
	<span class="mh">0x12000048</span><span class="p">,</span>
	<span class="mh">0x10000040</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">u8</span>	<span class="n">CCKSwingTable_Ch1_Ch13</span><span class="p">[</span><span class="n">CCK_Table_length</span><span class="p">][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0x36</span><span class="p">,</span> <span class="mh">0x35</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x2f</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x19</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x2a</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x26</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1d</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x0b</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x1b</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x0b</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x13</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x0b</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">u8</span>	<span class="n">CCKSwingTable_Ch14</span><span class="p">[</span><span class="n">CCK_Table_length</span><span class="p">][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="mh">0x36</span><span class="p">,</span> <span class="mh">0x35</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x1b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x30</span><span class="p">,</span> <span class="mh">0x2f</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x2a</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x26</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x1d</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x1b</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x0e</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x0b</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x13</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x0a</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">},</span>
	<span class="p">{</span><span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">}</span>
<span class="p">};</span>

<span class="cp">#define		Pw_Track_Flag				0x11d</span>
<span class="cp">#define		Tssi_Mea_Value				0x13c</span>
<span class="cp">#define		Tssi_Report_Value1			0x134</span>
<span class="cp">#define		Tssi_Report_Value2			0x13e</span>
<span class="cp">#define		FW_Busy_Flag				0x13f</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_TXPowerTrackingCallback_TSSI</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">bool</span>	<span class="n">bHighpowerstate</span><span class="p">,</span> <span class="n">viviflag</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">dcmd_txcmd</span> <span class="n">tx_cmd</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">powerlevelOFDM24G</span><span class="p">;</span>
	<span class="kt">int</span>	<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">RF_Type</span><span class="p">,</span> <span class="n">tmp_report</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span>
	<span class="n">u32</span>	<span class="n">Value</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">Pwr_Flag</span><span class="p">;</span>
	<span class="n">u16</span>	<span class="n">Avg_TSSI_Meas</span><span class="p">,</span> <span class="n">TSSI_13dBm</span><span class="p">,</span> <span class="n">Avg_TSSI_Meas_from_driver</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">delta</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;%s()</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">);</span>
	<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">Pw_Track_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">FW_Busy_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bdynamic_txpower_enable</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">bHighpowerstate</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxHighPower</span><span class="p">;</span>

	<span class="n">powerlevelOFDM24G</span> <span class="o">=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">Pwr_Track</span><span class="o">&gt;&gt;</span><span class="mi">24</span><span class="p">);</span>
	<span class="n">RF_Type</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rf_type</span><span class="p">;</span>
	<span class="n">Value</span> <span class="o">=</span> <span class="p">(</span><span class="n">RF_Type</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">)</span> <span class="o">|</span> <span class="n">powerlevelOFDM24G</span><span class="p">;</span>

	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;powerlevelOFDM24G = %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		 <span class="n">powerlevelOFDM24G</span><span class="p">);</span>


	<span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

		<span class="n">tx_cmd</span><span class="p">.</span><span class="n">Op</span>		<span class="o">=</span> <span class="n">TXCMD_SET_TX_PWR_TRACKING</span><span class="p">;</span>
		<span class="n">tx_cmd</span><span class="p">.</span><span class="n">Length</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
		<span class="n">tx_cmd</span><span class="p">.</span><span class="n">Value</span>		<span class="o">=</span> <span class="n">Value</span><span class="p">;</span>
		<span class="n">cmpk_message_handle_tx</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="p">(</span><span class="n">u8</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">tx_cmd</span><span class="p">,</span>
				       <span class="n">DESC_PACKET_TYPE_INIT</span><span class="p">,</span>
				       <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">dcmd_txcmd</span><span class="p">));</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">Pwr_Flag</span> <span class="o">=</span> <span class="n">read_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">Pw_Track_Flag</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">Pwr_Flag</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">mdelay</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bResetInProgress</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span>
						 <span class="s">&quot;we are in silent reset progress, so return</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
					<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">Pw_Track_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
					<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">FW_Busy_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
					<span class="k">return</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">eRFPowerState</span> <span class="o">!=</span> <span class="n">eRfOn</span><span class="p">))</span> <span class="p">{</span>
					<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span>
						 <span class="s">&quot;we are in power save, so return</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
					<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">Pw_Track_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
					<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">FW_Busy_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
					<span class="k">return</span><span class="p">;</span>
				<span class="p">}</span>

				<span class="k">continue</span><span class="p">;</span>
			<span class="p">}</span>

			<span class="n">Avg_TSSI_Meas</span> <span class="o">=</span> <span class="n">read_nic_word</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">Tssi_Mea_Value</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">Avg_TSSI_Meas</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">Pw_Track_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">FW_Busy_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
				<span class="k">return</span><span class="p">;</span>
			<span class="p">}</span>

			<span class="k">for</span> <span class="p">(</span><span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">k</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">)</span>
					<span class="n">tmp_report</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
							 <span class="n">Tssi_Report_Value1</span><span class="o">+</span><span class="n">k</span><span class="p">);</span>
				<span class="k">else</span>
					<span class="n">tmp_report</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
							 <span class="n">Tssi_Report_Value2</span><span class="p">);</span>

				<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span>
					 <span class="s">&quot;TSSI_report_value = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
					 <span class="n">tmp_report</span><span class="p">[</span><span class="n">k</span><span class="p">]);</span>

			       <span class="k">if</span> <span class="p">(</span><span class="n">tmp_report</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">20</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">viviflag</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
					<span class="k">break</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">viviflag</span> <span class="o">==</span> <span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">Pw_Track_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
				<span class="n">viviflag</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
				<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;we filted this data</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
				<span class="k">for</span> <span class="p">(</span><span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span>
					<span class="n">tmp_report</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="p">}</span>

			<span class="k">for</span> <span class="p">(</span><span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span>
				<span class="n">Avg_TSSI_Meas_from_driver</span> <span class="o">+=</span> <span class="n">tmp_report</span><span class="p">[</span><span class="n">k</span><span class="p">];</span>

			<span class="n">Avg_TSSI_Meas_from_driver</span> <span class="o">=</span> <span class="n">Avg_TSSI_Meas_from_driver</span><span class="o">*</span><span class="mi">100</span><span class="o">/</span><span class="mi">5</span><span class="p">;</span>
			<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span>
				 <span class="s">&quot;Avg_TSSI_Meas_from_driver = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
				 <span class="n">Avg_TSSI_Meas_from_driver</span><span class="p">);</span>
			<span class="n">TSSI_13dBm</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">TSSI_13dBm</span><span class="p">;</span>
			<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;TSSI_13dBm = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">TSSI_13dBm</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">Avg_TSSI_Meas_from_driver</span> <span class="o">&gt;</span> <span class="n">TSSI_13dBm</span><span class="p">)</span>
				<span class="n">delta</span> <span class="o">=</span> <span class="n">Avg_TSSI_Meas_from_driver</span> <span class="o">-</span> <span class="n">TSSI_13dBm</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="n">delta</span> <span class="o">=</span> <span class="n">TSSI_13dBm</span> <span class="o">-</span> <span class="n">Avg_TSSI_Meas_from_driver</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">delta</span> <span class="o">&lt;=</span> <span class="n">E_FOR_TX_POWER_TRACK</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bdynamic_txpower_enable</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">Pw_Track_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">FW_Busy_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
				<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span>
					 <span class="s">&quot;tx power track is done</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
				<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span>
					 <span class="s">&quot;priv-&gt;rfa_txpowertrackingindex = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
					 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span><span class="p">);</span>
				<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span>
					 <span class="s">&quot;priv-&gt;rfa_txpowertrackingindex_real = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
					 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex_real</span><span class="p">);</span>
				<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span>
					 <span class="s">&quot;priv-&gt;CCKPresentAttentuation_difference = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
					 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation_difference</span><span class="p">);</span>
				<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span>
					 <span class="s">&quot;priv-&gt;CCKPresentAttentuation = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
					 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">);</span>
				<span class="k">return</span><span class="p">;</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">Avg_TSSI_Meas_from_driver</span> <span class="o">&lt;</span> <span class="n">TSSI_13dBm</span> <span class="o">-</span> <span class="n">E_FOR_TX_POWER_TRACK</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">RF_Type</span> <span class="o">==</span> <span class="n">RF_2T4R</span><span class="p">)</span> <span class="p">{</span>

						<span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
						    <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfc_txpowertrackingindex</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
							<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span><span class="o">--</span><span class="p">;</span>
							<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex_real</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
								<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex_real</span><span class="o">--</span><span class="p">;</span>
								<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
									 <span class="n">rOFDM0_XATxIQImbalance</span><span class="p">,</span>
									 <span class="n">bMaskDWord</span><span class="p">,</span>
									 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex_real</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
							<span class="p">}</span>

							<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfc_txpowertrackingindex</span><span class="o">--</span><span class="p">;</span>
							<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfc_txpowertrackingindex_real</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
								<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfc_txpowertrackingindex_real</span><span class="o">--</span><span class="p">;</span>
								<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
									 <span class="n">rOFDM0_XCTxIQImbalance</span><span class="p">,</span>
									 <span class="n">bMaskDWord</span><span class="p">,</span>
									 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfc_txpowertrackingindex_real</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
							<span class="p">}</span>
						<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
							<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XATxIQImbalance</span><span class="p">,</span>
									 <span class="n">bMaskDWord</span><span class="p">,</span>
									 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
							<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
									 <span class="n">rOFDM0_XCTxIQImbalance</span><span class="p">,</span>
									 <span class="n">bMaskDWord</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
						<span class="p">}</span>
					<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
						<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
							<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span><span class="o">--</span><span class="p">;</span>
							<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex_real</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
								<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex_real</span><span class="o">--</span><span class="p">;</span>
								<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
										 <span class="n">rOFDM0_XATxIQImbalance</span><span class="p">,</span>
										 <span class="n">bMaskDWord</span><span class="p">,</span>
										 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex_real</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
							<span class="p">}</span>
						<span class="p">}</span> <span class="k">else</span>
							<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XATxIQImbalance</span><span class="p">,</span>
									 <span class="n">bMaskDWord</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>

					<span class="p">}</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">RF_Type</span> <span class="o">==</span> <span class="n">RF_2T4R</span><span class="p">)</span> <span class="p">{</span>
						<span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span> <span class="o">&lt;</span>
						    <span class="n">TxBBGainTableLength</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
						    <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfc_txpowertrackingindex</span> <span class="o">&lt;</span>
						    <span class="n">TxBBGainTableLength</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
							<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span><span class="o">++</span><span class="p">;</span>
							<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex_real</span><span class="o">++</span><span class="p">;</span>
							<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
								 <span class="n">rOFDM0_XATxIQImbalance</span><span class="p">,</span>
								 <span class="n">bMaskDWord</span><span class="p">,</span>
								 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span>
								 <span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex_real</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
							<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfc_txpowertrackingindex</span><span class="o">++</span><span class="p">;</span>
							<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfc_txpowertrackingindex_real</span><span class="o">++</span><span class="p">;</span>
							<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
								 <span class="n">rOFDM0_XCTxIQImbalance</span><span class="p">,</span>
								 <span class="n">bMaskDWord</span><span class="p">,</span>
								 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfc_txpowertrackingindex_real</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
						<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
							<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
								 <span class="n">rOFDM0_XATxIQImbalance</span><span class="p">,</span>
								 <span class="n">bMaskDWord</span><span class="p">,</span>
								 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="n">TxBBGainTableLength</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
							<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
								 <span class="n">rOFDM0_XCTxIQImbalance</span><span class="p">,</span>
								 <span class="n">bMaskDWord</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="n">TxBBGainTableLength</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
						<span class="p">}</span>
					<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
						<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">TxBBGainTableLength</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
							<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span><span class="o">++</span><span class="p">;</span>
							<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex_real</span><span class="o">++</span><span class="p">;</span>
							<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XATxIQImbalance</span><span class="p">,</span>
									 <span class="n">bMaskDWord</span><span class="p">,</span>
									 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex_real</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
						<span class="p">}</span> <span class="k">else</span>
							<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XATxIQImbalance</span><span class="p">,</span>
									 <span class="n">bMaskDWord</span><span class="p">,</span>
									 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="n">TxBBGainTableLength</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
					<span class="p">}</span>
				<span class="p">}</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">RF_Type</span> <span class="o">==</span> <span class="n">RF_2T4R</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation_difference</span>
						<span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span> <span class="o">-</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertracking_default</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation_difference</span>
						<span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex_real</span> <span class="o">-</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertracking_default</span><span class="p">;</span>
				<span class="p">}</span>

				<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CurrentChannelBW</span> <span class="o">==</span> <span class="n">HT_CHANNEL_WIDTH_20</span><span class="p">)</span>
					<span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span> <span class="o">=</span>
						 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation_20Mdefault</span> <span class="o">+</span>
						 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation_difference</span><span class="p">;</span>
				<span class="k">else</span>
					<span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span> <span class="o">=</span>
						 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation_40Mdefault</span> <span class="o">+</span>
						 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation_difference</span><span class="p">;</span>

				<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">CCKTxBBGainTableLength</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
					<span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span> <span class="o">=</span> <span class="n">CCKTxBBGainTableLength</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
					<span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

				<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span>
				    <span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span> <span class="o">&lt;</span> <span class="n">CCKTxBBGainTableLength</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">current_network</span><span class="p">.</span><span class="n">channel</span> <span class="o">==</span> <span class="mi">14</span> <span class="o">&amp;&amp;</span>
					    <span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcck_in_ch14</span><span class="p">)</span> <span class="p">{</span>
						<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcck_in_ch14</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
						<span class="n">dm_cck_txpower_adjust</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcck_in_ch14</span><span class="p">);</span>
					<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">current_network</span><span class="p">.</span><span class="n">channel</span> <span class="o">!=</span> <span class="mi">14</span> <span class="o">&amp;&amp;</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcck_in_ch14</span><span class="p">)</span> <span class="p">{</span>
						<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcck_in_ch14</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
						<span class="n">dm_cck_txpower_adjust</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcck_in_ch14</span><span class="p">);</span>
					<span class="p">}</span> <span class="k">else</span>
						<span class="n">dm_cck_txpower_adjust</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcck_in_ch14</span><span class="p">);</span>
				<span class="p">}</span>
				<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span>
					 <span class="s">&quot;priv-&gt;rfa_txpowertrackingindex = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
					 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span><span class="p">);</span>
				<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span>
					 <span class="s">&quot;priv-&gt;rfa_txpowertrackingindex_real = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
					 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex_real</span><span class="p">);</span>
				<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span>
					 <span class="s">&quot;priv-&gt;CCKPresentAttentuation_difference = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
					 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation_difference</span><span class="p">);</span>
				<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span>
					 <span class="s">&quot;priv-&gt;CCKPresentAttentuation = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
					 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation_difference</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mi">12</span> <span class="o">||</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation_difference</span> <span class="o">&gt;=</span> <span class="mi">24</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bdynamic_txpower_enable</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
					<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">Pw_Track_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
					<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">FW_Busy_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
					<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;tx power track---&gt;limited</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
					<span class="k">return</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">Pw_Track_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
			<span class="n">Avg_TSSI_Meas_from_driver</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">for</span> <span class="p">(</span><span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span>
				<span class="n">tmp_report</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">FW_Busy_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bdynamic_txpower_enable</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
	<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">Pw_Track_Flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_TXPowerTrackingCallback_ThermalMeter</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#define ThermalMeterVal	9</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">u32</span> <span class="n">tmpRegA</span><span class="p">,</span> <span class="n">TempCCk</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tmpOFDMindex</span><span class="p">,</span> <span class="n">tmpCCKindex</span><span class="p">,</span> <span class="n">tmpCCK20Mindex</span><span class="p">,</span> <span class="n">tmpCCK40Mindex</span><span class="p">,</span> <span class="n">tmpval</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">CCKSwingNeedUpdate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">btxpower_trackingInit</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">tmpRegA</span> <span class="o">=</span> <span class="n">rtl8192_QueryBBReg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XATxIQImbalance</span><span class="p">,</span> <span class="n">bMaskDWord</span><span class="p">);</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">OFDM_Table_Length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">tmpRegA</span> <span class="o">==</span> <span class="n">OFDMSwingTable</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">OFDM_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">i</span><span class="p">;</span>
				<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;Initial reg0x%x = 0x%x, OFDM_index = 0x%x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
					<span class="n">rOFDM0_XATxIQImbalance</span><span class="p">,</span> <span class="n">tmpRegA</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">OFDM_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
			<span class="p">}</span>
		<span class="p">}</span>

		<span class="n">TempCCk</span> <span class="o">=</span> <span class="n">rtl8192_QueryBBReg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_TxFilter1</span><span class="p">,</span> <span class="n">bMaskByte2</span><span class="p">);</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">CCK_Table_length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">TempCCk</span> <span class="o">==</span> <span class="p">(</span><span class="n">u32</span><span class="p">)</span><span class="n">CCKSwingTable_Ch1_Ch13</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span> <span class="o">=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span> <span class="n">i</span><span class="p">;</span>
				<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;Initial reg0x%x&quot;</span>
					 <span class="s">&quot; = 0x%x, CCK_index = 0x%x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
					 <span class="n">rCCK0_TxFilter1</span><span class="p">,</span> <span class="n">TempCCk</span><span class="p">,</span>
					 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">);</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">btxpower_trackingInit</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">tmpRegA</span> <span class="o">=</span> <span class="n">rtl8192_phy_QueryRFReg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">RF90_PATH_A</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x078</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;Readback ThermalMeterA = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">tmpRegA</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">tmpRegA</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="o">||</span> <span class="n">tmpRegA</span> <span class="o">&gt;</span> <span class="mi">13</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">tmpRegA</span> <span class="o">&gt;=</span> <span class="mi">12</span><span class="p">)</span>
		<span class="n">tmpRegA</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;Valid ThermalMeterA = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">tmpRegA</span><span class="p">);</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">ThermalMeter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ThermalMeterVal</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">ThermalMeter</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">ThermalMeterVal</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">ThermalMeter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">tmpRegA</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">tmpOFDMindex</span> <span class="o">=</span> <span class="n">tmpCCK20Mindex</span> <span class="o">=</span> <span class="mi">6</span><span class="o">+</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">ThermalMeter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span>
			      <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">tmpRegA</span><span class="p">);</span>
		<span class="n">tmpCCK40Mindex</span> <span class="o">=</span> <span class="n">tmpCCK20Mindex</span> <span class="o">-</span> <span class="mi">6</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">tmpOFDMindex</span> <span class="o">&gt;=</span> <span class="n">OFDM_Table_Length</span><span class="p">)</span>
			<span class="n">tmpOFDMindex</span> <span class="o">=</span> <span class="n">OFDM_Table_Length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">tmpCCK20Mindex</span> <span class="o">&gt;=</span> <span class="n">CCK_Table_length</span><span class="p">)</span>
			<span class="n">tmpCCK20Mindex</span> <span class="o">=</span> <span class="n">CCK_Table_length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">tmpCCK40Mindex</span> <span class="o">&gt;=</span> <span class="n">CCK_Table_length</span><span class="p">)</span>
			<span class="n">tmpCCK40Mindex</span> <span class="o">=</span> <span class="n">CCK_Table_length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">tmpval</span> <span class="o">=</span> <span class="p">((</span><span class="n">u8</span><span class="p">)</span><span class="n">tmpRegA</span> <span class="o">-</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">ThermalMeter</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">tmpval</span> <span class="o">&gt;=</span> <span class="mi">6</span><span class="p">)</span>
			<span class="n">tmpOFDMindex</span> <span class="o">=</span> <span class="n">tmpCCK20Mindex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="n">tmpOFDMindex</span> <span class="o">=</span> <span class="n">tmpCCK20Mindex</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">-</span> <span class="n">tmpval</span><span class="p">;</span>
		<span class="n">tmpCCK40Mindex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CurrentChannelBW</span> <span class="o">!=</span> <span class="n">HT_CHANNEL_WIDTH_20</span><span class="p">)</span>
		<span class="n">tmpCCKindex</span> <span class="o">=</span> <span class="n">tmpCCK40Mindex</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">tmpCCKindex</span> <span class="o">=</span> <span class="n">tmpCCK20Mindex</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">Record_CCK_20Mindex</span> <span class="o">=</span> <span class="n">tmpCCK20Mindex</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">Record_CCK_40Mindex</span> <span class="o">=</span> <span class="n">tmpCCK40Mindex</span><span class="p">;</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;Record_CCK_20Mindex / Record_CCK_40&quot;</span>
		 <span class="s">&quot;Mindex = %d / %d.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">Record_CCK_20Mindex</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">Record_CCK_40Mindex</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">current_network</span><span class="p">.</span><span class="n">channel</span> <span class="o">==</span> <span class="mi">14</span> <span class="o">&amp;&amp;</span>
	    <span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcck_in_ch14</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcck_in_ch14</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
		<span class="n">CCKSwingNeedUpdate</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">current_network</span><span class="p">.</span><span class="n">channel</span> <span class="o">!=</span> <span class="mi">14</span> <span class="o">&amp;&amp;</span>
		   <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcck_in_ch14</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcck_in_ch14</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
		<span class="n">CCKSwingNeedUpdate</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span> <span class="o">!=</span> <span class="n">tmpCCKindex</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span> <span class="o">=</span> <span class="n">tmpCCKindex</span><span class="p">;</span>
		<span class="n">CCKSwingNeedUpdate</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">CCKSwingNeedUpdate</span><span class="p">)</span>
		<span class="n">dm_cck_txpower_adjust</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcck_in_ch14</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">OFDM_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">tmpOFDMindex</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">OFDM_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmpOFDMindex</span><span class="p">;</span>
		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XATxIQImbalance</span><span class="p">,</span> <span class="n">bMaskDWord</span><span class="p">,</span>
				 <span class="n">OFDMSwingTable</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">OFDM_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]]);</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;Update OFDMSwing[%d] = 0x%x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">OFDM_index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
			 <span class="n">OFDMSwingTable</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">OFDM_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]]);</span>
	<span class="p">}</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txpower_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span>	<span class="nf">dm_txpower_trackingcallback</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">container_of_dwork_rsl</span><span class="p">(</span><span class="n">data</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">r8192_priv</span><span class="p">,</span> <span class="n">txpower_tracking_wq</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">IC_Cut</span> <span class="o">&gt;=</span> <span class="n">IC_VersionCut_D</span><span class="p">)</span>
		<span class="n">dm_TXPowerTrackingCallback_TSSI</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">dm_TXPowerTrackingCallback_ThermalMeter</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_InitializeTXPowerTracking_TSSI</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>

	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x7f8001fe</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x788001e2</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x71c001c7</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x6b8001ae</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x65400195</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x5fc0017f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x5a400169</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x55400155</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x50800142</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x4c000130</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x47c0011f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x43c0010f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x40000100</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x3c8000f2</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x390000e4</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x35c000d7</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x32c000cb</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x300000c0</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">6</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x2d4000b5</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">7</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x2ac000ab</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">8</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x288000a2</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">9</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x26000098</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">10</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x24000090</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">23</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">11</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">23</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x22000088</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">24</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">12</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">24</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x20000080</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">25</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">13</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">25</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x1a00006c</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">26</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">14</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">26</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x1c800072</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">27</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">15</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">27</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x18000060</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">28</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">16</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">28</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x19800066</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">29</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">17</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">29</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x15800056</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">30</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">18</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">30</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x26c0005b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">31</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">19</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">31</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x14400051</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">32</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">20</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">32</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x24400051</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">33</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">21</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">33</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x1300004c</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">34</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">22</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">34</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x12000048</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">35</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">23</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">35</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x11000044</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">36</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span> <span class="o">=</span> <span class="o">-</span><span class="mi">24</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="mi">36</span><span class="p">].</span><span class="n">txbbgain_value</span> <span class="o">=</span> <span class="mh">0x10000040</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x36</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x35</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x2e</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x25</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1c</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x12</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x09</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x33</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x32</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x2b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x23</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1a</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x11</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x30</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x2f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x29</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x21</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x19</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x2d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x2d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x27</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x18</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x2b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x2a</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x25</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1e</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x16</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0e</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x07</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x28</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x28</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x22</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1c</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x15</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x07</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x26</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x25</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x21</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x14</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x06</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x24</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x23</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x19</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x13</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0c</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x06</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x22</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x21</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x18</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x11</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x06</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x16</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x11</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x05</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1e</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1a</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x15</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0a</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x05</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1c</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x18</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x14</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0a</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x05</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1a</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x17</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x13</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0e</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x09</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1a</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x19</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x16</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x12</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x09</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x18</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x17</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x15</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x11</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0c</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x17</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x16</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x13</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0c</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x16</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x15</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x12</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x07</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x14</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x14</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x11</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0e</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x07</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x13</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x13</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0a</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x06</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x12</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x12</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0c</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x09</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x06</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x11</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x11</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0c</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x09</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x06</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0e</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x05</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x05</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x36</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x35</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x2e</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x33</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x32</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x2b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x19</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x30</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x2f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x29</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x18</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x2d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x2d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x27</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x17</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x2b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x2a</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x25</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x15</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x28</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x28</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x22</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x14</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x26</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x25</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x21</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x13</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x24</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x23</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x12</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">7</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x22</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x21</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x11</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">8</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">9</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1e</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1a</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">10</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1c</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x18</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0e</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1a</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x17</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0e</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">12</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x1a</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x19</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x16</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">13</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x18</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x17</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x15</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0c</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">14</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x17</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x16</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x13</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">15</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x16</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x15</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x12</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0b</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">16</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x14</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x14</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x11</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0a</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">17</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x13</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x13</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0a</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">18</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x12</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x12</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x09</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">19</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x11</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x11</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x09</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">20</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0e</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">21</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0f</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x0d</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="mi">22</span><span class="p">].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">btxpower_tracking</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txpower_count</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">btxpower_trackingInit</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_InitializeTXPowerTracking_ThermalMeter</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>


	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">FwRWRF</span><span class="p">)</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">btxpower_tracking</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">btxpower_tracking</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txpower_count</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">btxpower_trackingInit</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;pMgntInfo-&gt;bTXPowerTracking = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">btxpower_tracking</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">dm_initialize_txpower_tracking</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">IC_Cut</span> <span class="o">&gt;=</span> <span class="n">IC_VersionCut_D</span><span class="p">)</span>
		<span class="n">dm_InitializeTXPowerTracking_TSSI</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">dm_InitializeTXPowerTracking_ThermalMeter</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_CheckTXPowerTracking_TSSI</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">static</span> <span class="n">u32</span> <span class="n">tx_power_track_counter</span><span class="p">;</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;%s()</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">read_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x11e</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">btxpower_tracking</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="n">tx_power_track_counter</span><span class="o">++</span><span class="p">;</span>


	 <span class="k">if</span> <span class="p">(</span><span class="n">tx_power_track_counter</span> <span class="o">&gt;=</span> <span class="mi">180</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">queue_delayed_work_rsl</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">priv_wq</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">txpower_tracking_wq</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">tx_power_track_counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

<span class="p">}</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_CheckTXPowerTracking_ThermalMeter</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">static</span> <span class="n">u8</span>	<span class="n">TM_Trigger</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">TxPowerCheckCnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">IS_HARDWARE_TYPE_8192SE</span><span class="p">(</span><span class="n">dev</span><span class="p">))</span>
		<span class="n">TxPowerCheckCnt</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">TxPowerCheckCnt</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">btxpower_tracking</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">txpower_count</span>  <span class="o">&lt;=</span> <span class="n">TxPowerCheckCnt</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">txpower_count</span><span class="o">++</span><span class="p">;</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">TM_Trigger</span><span class="p">)</span> <span class="p">{</span>
		<span class="p">{</span>
		<span class="n">rtl8192_phy_SetRFReg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">RF90_PATH_A</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="n">bMask12Bits</span><span class="p">,</span> <span class="mh">0x4d</span><span class="p">);</span>
		<span class="n">rtl8192_phy_SetRFReg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">RF90_PATH_A</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="n">bMask12Bits</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">);</span>
		<span class="n">rtl8192_phy_SetRFReg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">RF90_PATH_A</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="n">bMask12Bits</span><span class="p">,</span> <span class="mh">0x4d</span><span class="p">);</span>
		<span class="n">rtl8192_phy_SetRFReg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">RF90_PATH_A</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="n">bMask12Bits</span><span class="p">,</span> <span class="mh">0x4f</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="n">TM_Trigger</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
	    <span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;===============&gt;Schedule TxPowerTrackingWorkItem</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

		<span class="n">queue_delayed_work_rsl</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">priv_wq</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">txpower_tracking_wq</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">TM_Trigger</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="p">}</span>

	<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_check_txpower_tracking</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">IC_Cut</span> <span class="o">&gt;=</span> <span class="n">IC_VersionCut_D</span><span class="p">)</span>
		<span class="n">dm_CheckTXPowerTracking_TSSI</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">dm_CheckTXPowerTracking_ThermalMeter</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_CCKTxPowerAdjust_TSSI</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">bool</span>  <span class="n">bInCH14</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u32</span> <span class="n">TempVal</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">TempVal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">bInCH14</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">TempVal</span> <span class="o">=</span> <span class="p">(</span><span class="n">u32</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span>
			  <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">))</span> <span class="p">;</span>

		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_TxFilter1</span><span class="p">,</span> <span class="n">bMaskHWord</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
		<span class="n">TempVal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">TempVal</span> <span class="o">=</span> <span class="p">(</span><span class="n">u32</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span>
			  <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span>
			  <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">16</span><span class="p">)</span><span class="o">+</span>
			  <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">24</span><span class="p">));</span>
		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_TxFilter2</span><span class="p">,</span> <span class="n">bMaskDWord</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
		<span class="n">TempVal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">TempVal</span> <span class="o">=</span> <span class="p">(</span><span class="n">u32</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span>
			  <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">))</span> <span class="p">;</span>

		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_DebugPort</span><span class="p">,</span> <span class="n">bMaskLWord</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">TempVal</span> <span class="o">=</span> <span class="p">(</span><span class="n">u32</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span>
			  <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">))</span> <span class="p">;</span>

		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_TxFilter1</span><span class="p">,</span> <span class="n">bMaskHWord</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
		<span class="n">TempVal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">TempVal</span> <span class="o">=</span> <span class="p">(</span><span class="n">u32</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span>
			  <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span>
			  <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">16</span><span class="p">)</span><span class="o">+</span>
			  <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">24</span><span class="p">));</span>
		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_TxFilter2</span><span class="p">,</span> <span class="n">bMaskDWord</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
		<span class="n">TempVal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">TempVal</span> <span class="o">=</span> <span class="p">(</span><span class="n">u32</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span>
			  <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">cck_txbbgain_ch14_table</span><span class="p">[(</span><span class="n">u8</span><span class="p">)(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">)].</span><span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">))</span> <span class="p">;</span>

		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_DebugPort</span><span class="p">,</span> <span class="n">bMaskLWord</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
	<span class="p">}</span>


<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_CCKTxPowerAdjust_ThermalMeter</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>	<span class="n">bool</span>  <span class="n">bInCH14</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u32</span> <span class="n">TempVal</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">TempVal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">bInCH14</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">TempVal</span> <span class="o">=</span>	<span class="n">CCKSwingTable_Ch1_Ch13</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span>
					<span class="p">(</span><span class="n">CCKSwingTable_Ch1_Ch13</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">)</span> <span class="p">;</span>
		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_TxFilter1</span><span class="p">,</span> <span class="n">bMaskHWord</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;CCK not chnl 14, reg 0x%x = 0x%x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">rCCK0_TxFilter1</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
		<span class="n">TempVal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">TempVal</span> <span class="o">=</span>	<span class="n">CCKSwingTable_Ch1_Ch13</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span>
					<span class="p">(</span><span class="n">CCKSwingTable_Ch1_Ch13</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span>
					<span class="p">(</span><span class="n">CCKSwingTable_Ch1_Ch13</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">16</span><span class="p">)</span><span class="o">+</span>
					<span class="p">(</span><span class="n">CCKSwingTable_Ch1_Ch13</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">24</span><span class="p">);</span>
		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_TxFilter2</span><span class="p">,</span> <span class="n">bMaskDWord</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;CCK not chnl 14, reg 0x%x = 0x%x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">rCCK0_TxFilter2</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
		<span class="n">TempVal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">TempVal</span> <span class="o">=</span>	<span class="n">CCKSwingTable_Ch1_Ch13</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span>
					<span class="p">(</span><span class="n">CCKSwingTable_Ch1_Ch13</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">7</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">)</span> <span class="p">;</span>

		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_DebugPort</span><span class="p">,</span> <span class="n">bMaskLWord</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;CCK not chnl 14, reg 0x%x = 0x%x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">rCCK0_DebugPort</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">TempVal</span> <span class="o">=</span>	<span class="n">CCKSwingTable_Ch14</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span>
					<span class="p">(</span><span class="n">CCKSwingTable_Ch14</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">)</span> <span class="p">;</span>

		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_TxFilter1</span><span class="p">,</span> <span class="n">bMaskHWord</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;CCK chnl 14, reg 0x%x = 0x%x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">rCCK0_TxFilter1</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
		<span class="n">TempVal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">TempVal</span> <span class="o">=</span>	<span class="n">CCKSwingTable_Ch14</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span>
					<span class="p">(</span><span class="n">CCKSwingTable_Ch14</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span>
					<span class="p">(</span><span class="n">CCKSwingTable_Ch14</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">16</span><span class="p">)</span><span class="o">+</span>
					<span class="p">(</span><span class="n">CCKSwingTable_Ch14</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">24</span><span class="p">);</span>
		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_TxFilter2</span><span class="p">,</span> <span class="n">bMaskDWord</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;CCK chnl 14, reg 0x%x = 0x%x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">rCCK0_TxFilter2</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
		<span class="n">TempVal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">TempVal</span> <span class="o">=</span>	<span class="n">CCKSwingTable_Ch14</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span>
					<span class="p">(</span><span class="n">CCKSwingTable_Ch14</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCK_index</span><span class="p">][</span><span class="mi">7</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">)</span> <span class="p">;</span>

		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_DebugPort</span><span class="p">,</span> <span class="n">bMaskLWord</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;CCK chnl 14, reg 0x%x = 0x%x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">rCCK0_DebugPort</span><span class="p">,</span> <span class="n">TempVal</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="p">}</span>

<span class="kt">void</span> <span class="nf">dm_cck_txpower_adjust</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">bool</span>  <span class="n">binch14</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">IC_Cut</span> <span class="o">&gt;=</span> <span class="n">IC_VersionCut_D</span><span class="p">)</span>
		<span class="n">dm_CCKTxPowerAdjust_TSSI</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">binch14</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">dm_CCKTxPowerAdjust_ThermalMeter</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">binch14</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_txpower_reset_recovery</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;Start Reset Recovery ==&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XATxIQImbalance</span><span class="p">,</span> <span class="n">bMaskDWord</span><span class="p">,</span>
			 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;Reset Recovery: Fill in 0xc80 is %08x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;Reset Recovery: Fill in RFA_txPowerTrackingIndex is %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;Reset Recovery : RF A I/Q Amplify Gain is %ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfa_txpowertrackingindex</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;Reset Recovery: CCK Attenuation is %d dB</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">CCKPresentAttentuation</span><span class="p">);</span>
	<span class="n">dm_cck_txpower_adjust</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcck_in_ch14</span><span class="p">);</span>

	<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XCTxIQImbalance</span><span class="p">,</span> <span class="n">bMaskDWord</span><span class="p">,</span>
			 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfc_txpowertrackingindex</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;Reset Recovery: Fill in 0xc90 is %08x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfc_txpowertrackingindex</span><span class="p">].</span><span class="n">txbbgain_value</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;Reset Recovery: Fill in RFC_txPowerTrackingIndex is %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfc_txpowertrackingindex</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_POWER_TRACKING</span><span class="p">,</span> <span class="s">&quot;Reset Recovery : RF C I/Q Amplify Gain is %ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">txbbgain_table</span><span class="p">[</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfc_txpowertrackingindex</span><span class="p">].</span><span class="n">txbb_iq_amplifygain</span><span class="p">);</span>

<span class="p">}</span>

<span class="kt">void</span> <span class="nf">dm_restore_dynamic_mechanism_state</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">u32</span>	<span class="n">reg_ratr</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rate_adaptive</span><span class="p">.</span><span class="n">last_ratr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ratr_value</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NIC_DOWN</span><span class="p">(</span><span class="n">priv</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_RATE</span><span class="p">,</span> <span class="s">&quot;&lt;---- dm_restore_dynamic_mechanism_state(): driver is going to unload</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rate_adaptive</span><span class="p">.</span><span class="n">rate_adaptive_disabled</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">mode</span> <span class="o">==</span> <span class="n">WIRELESS_MODE_N_24G</span> <span class="o">||</span>
	      <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">mode</span> <span class="o">==</span> <span class="n">WIRELESS_MODE_N_5G</span><span class="p">))</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="n">ratr_value</span> <span class="o">=</span> <span class="n">reg_ratr</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rf_type</span> <span class="o">==</span> <span class="n">RF_1T2R</span><span class="p">)</span>
		<span class="n">ratr_value</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="n">RATE_ALL_OFDM_2SS</span><span class="p">);</span>
	<span class="n">write_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">RATR0</span><span class="p">,</span> <span class="n">ratr_value</span><span class="p">);</span>
	<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">UFWP</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">btxpower_trackingInit</span> <span class="o">&amp;&amp;</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">btxpower_tracking</span><span class="p">)</span>
		<span class="n">dm_txpower_reset_recovery</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">dm_bb_initialgain_restore</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_bb_initialgain_restore</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">u32</span> <span class="n">bit_mask</span> <span class="o">=</span> <span class="mh">0x7f</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm</span> <span class="o">==</span> <span class="n">DIG_ALGO_BY_RSSI</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">UFWP</span><span class="p">,</span> <span class="n">bMaskByte1</span><span class="p">,</span> <span class="mh">0x8</span><span class="p">);</span>
	<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XAAGCCore1</span><span class="p">,</span> <span class="n">bit_mask</span><span class="p">,</span> <span class="p">(</span><span class="n">u32</span><span class="p">)</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xaagccore1</span><span class="p">);</span>
	<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XBAGCCore1</span><span class="p">,</span> <span class="n">bit_mask</span><span class="p">,</span> <span class="p">(</span><span class="n">u32</span><span class="p">)</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xbagccore1</span><span class="p">);</span>
	<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XCAGCCore1</span><span class="p">,</span> <span class="n">bit_mask</span><span class="p">,</span> <span class="p">(</span><span class="n">u32</span><span class="p">)</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xcagccore1</span><span class="p">);</span>
	<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XDAGCCore1</span><span class="p">,</span> <span class="n">bit_mask</span><span class="p">,</span> <span class="p">(</span><span class="n">u32</span><span class="p">)</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xdagccore1</span><span class="p">);</span>
	<span class="n">bit_mask</span>  <span class="o">=</span> <span class="n">bMaskByte2</span><span class="p">;</span>
	<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_CCA</span><span class="p">,</span> <span class="n">bit_mask</span><span class="p">,</span> <span class="p">(</span><span class="n">u32</span><span class="p">)</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">cca</span><span class="p">);</span>

	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_DIG</span><span class="p">,</span> <span class="s">&quot;dm_BBInitialGainRestore 0xc50 is %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xaagccore1</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_DIG</span><span class="p">,</span> <span class="s">&quot;dm_BBInitialGainRestore 0xc58 is %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xbagccore1</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_DIG</span><span class="p">,</span> <span class="s">&quot;dm_BBInitialGainRestore 0xc60 is %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xcagccore1</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_DIG</span><span class="p">,</span> <span class="s">&quot;dm_BBInitialGainRestore 0xc68 is %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xdagccore1</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_DIG</span><span class="p">,</span> <span class="s">&quot;dm_BBInitialGainRestore 0xa0a is %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">cca</span><span class="p">);</span>
	<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">UFWP</span><span class="p">,</span> <span class="n">bMaskByte1</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>

<span class="p">}</span>


<span class="kt">void</span> <span class="nf">dm_backup_dynamic_mechanism_state</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bswitch_fsync</span>  <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bfsync_processing</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">dm_bb_initialgain_backup</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

<span class="p">}</span>


<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_bb_initialgain_backup</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">u32</span> <span class="n">bit_mask</span> <span class="o">=</span> <span class="n">bMaskByte0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm</span> <span class="o">==</span> <span class="n">DIG_ALGO_BY_RSSI</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">UFWP</span><span class="p">,</span> <span class="n">bMaskByte1</span><span class="p">,</span> <span class="mh">0x8</span><span class="p">);</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xaagccore1</span> <span class="o">=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">rtl8192_QueryBBReg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XAAGCCore1</span><span class="p">,</span> <span class="n">bit_mask</span><span class="p">);</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xbagccore1</span> <span class="o">=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">rtl8192_QueryBBReg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XBAGCCore1</span><span class="p">,</span> <span class="n">bit_mask</span><span class="p">);</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xcagccore1</span> <span class="o">=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">rtl8192_QueryBBReg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XCAGCCore1</span><span class="p">,</span> <span class="n">bit_mask</span><span class="p">);</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xdagccore1</span> <span class="o">=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">rtl8192_QueryBBReg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XDAGCCore1</span><span class="p">,</span> <span class="n">bit_mask</span><span class="p">);</span>
	<span class="n">bit_mask</span>  <span class="o">=</span> <span class="n">bMaskByte2</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">cca</span> <span class="o">=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">rtl8192_QueryBBReg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_CCA</span><span class="p">,</span> <span class="n">bit_mask</span><span class="p">);</span>

	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_DIG</span><span class="p">,</span> <span class="s">&quot;BBInitialGainBackup 0xc50 is %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xaagccore1</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_DIG</span><span class="p">,</span> <span class="s">&quot;BBInitialGainBackup 0xc58 is %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xbagccore1</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_DIG</span><span class="p">,</span> <span class="s">&quot;BBInitialGainBackup 0xc60 is %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xcagccore1</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_DIG</span><span class="p">,</span> <span class="s">&quot;BBInitialGainBackup 0xc68 is %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">xdagccore1</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_DIG</span><span class="p">,</span> <span class="s">&quot;BBInitialGainBackup 0xa0a is %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">initgain_backup</span><span class="p">.</span><span class="n">cca</span><span class="p">);</span>

<span class="p">}</span>

<span class="kt">void</span> <span class="nf">dm_change_dynamic_initgain_thresh</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>
				       <span class="n">u32</span> <span class="n">dm_type</span><span class="p">,</span> <span class="n">u32</span> <span class="n">dm_value</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dm_type</span> <span class="o">==</span> <span class="n">DIG_TYPE_THRESH_HIGH</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_thresh</span> <span class="o">=</span> <span class="n">dm_value</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_type</span> <span class="o">==</span> <span class="n">DIG_TYPE_THRESH_LOW</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_low_thresh</span> <span class="o">=</span> <span class="n">dm_value</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_type</span> <span class="o">==</span> <span class="n">DIG_TYPE_THRESH_HIGHPWR_HIGH</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_power_highthresh</span> <span class="o">=</span> <span class="n">dm_value</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_type</span> <span class="o">==</span> <span class="n">DIG_TYPE_THRESH_HIGHPWR_HIGH</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_power_highthresh</span> <span class="o">=</span> <span class="n">dm_value</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_type</span> <span class="o">==</span> <span class="n">DIG_TYPE_ENABLE</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_state</span>		<span class="o">=</span> <span class="n">DM_STA_DIG_MAX</span><span class="p">;</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_enable_flag</span>	<span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_type</span> <span class="o">==</span> <span class="n">DIG_TYPE_DISABLE</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_state</span>		<span class="o">=</span> <span class="n">DM_STA_DIG_MAX</span><span class="p">;</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_enable_flag</span>	<span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_type</span> <span class="o">==</span> <span class="n">DIG_TYPE_DBG_MODE</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_value</span> <span class="o">&gt;=</span> <span class="n">DM_DBG_MAX</span><span class="p">)</span>
			<span class="n">dm_value</span> <span class="o">=</span> <span class="n">DM_DBG_OFF</span><span class="p">;</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dbg_mode</span>		<span class="o">=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">dm_value</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_type</span> <span class="o">==</span> <span class="n">DIG_TYPE_RSSI</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_value</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span>
			<span class="n">dm_value</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_val</span>			<span class="o">=</span> <span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="n">dm_value</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_type</span> <span class="o">==</span> <span class="n">DIG_TYPE_ALGORITHM</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_value</span> <span class="o">&gt;=</span> <span class="n">DIG_ALGO_MAX</span><span class="p">)</span>
			<span class="n">dm_value</span> <span class="o">=</span> <span class="n">DIG_ALGO_BY_FALSE_ALARM</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm</span> <span class="o">!=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">dm_value</span><span class="p">)</span>
			<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm_switch</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm</span>	<span class="o">=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">dm_value</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_type</span> <span class="o">==</span> <span class="n">DIG_TYPE_BACKOFF</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_value</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">)</span>
			<span class="n">dm_value</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">backoff_val</span>		<span class="o">=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">dm_value</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_type</span> <span class="o">==</span> <span class="n">DIG_TYPE_RX_GAIN_MIN</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
			<span class="n">dm_value</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">;</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rx_gain_range_min</span> <span class="o">=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">dm_value</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_type</span> <span class="o">==</span> <span class="n">DIG_TYPE_RX_GAIN_MAX</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_value</span> <span class="o">&gt;</span> <span class="mh">0x50</span><span class="p">)</span>
			<span class="n">dm_value</span> <span class="o">=</span> <span class="mh">0x50</span><span class="p">;</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rx_gain_range_max</span> <span class="o">=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">dm_value</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_dig_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_enable_flag</span>	<span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">Backoff_Enable_Flag</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm</span> <span class="o">=</span> <span class="n">DIG_ALGO_BY_RSSI</span><span class="p">;</span>

	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">Dig_TwoPort_Algorithm</span> <span class="o">=</span> <span class="n">DIG_TWO_PORT_ALGO_RSSI</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">Dig_Ext_Port_Stage</span> <span class="o">=</span> <span class="n">DIG_EXT_PORT_STAGE_MAX</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dbg_mode</span> <span class="o">=</span> <span class="n">DM_DBG_OFF</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm_switch</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_state</span>		<span class="o">=</span> <span class="n">DM_STA_DIG_MAX</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_highpwr_state</span>	<span class="o">=</span> <span class="n">DM_STA_DIG_MAX</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">CurSTAConnectState</span> <span class="o">=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">PreSTAConnectState</span> <span class="o">=</span> <span class="n">DIG_STA_DISCONNECT</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">CurAPConnectState</span> <span class="o">=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">PreAPConnectState</span> <span class="o">=</span> <span class="n">DIG_AP_DISCONNECT</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">initialgain_lowerbound_state</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_low_thresh</span>	<span class="o">=</span> <span class="n">DM_DIG_THRESH_LOW</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_thresh</span>	<span class="o">=</span> <span class="n">DM_DIG_THRESH_HIGH</span><span class="p">;</span>

	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">FALowThresh</span>	<span class="o">=</span> <span class="n">DM_FALSEALARM_THRESH_LOW</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">FAHighThresh</span>	<span class="o">=</span> <span class="n">DM_FALSEALARM_THRESH_HIGH</span><span class="p">;</span>

	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_power_lowthresh</span> <span class="o">=</span> <span class="n">DM_DIG_HIGH_PWR_THRESH_LOW</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_power_highthresh</span> <span class="o">=</span> <span class="n">DM_DIG_HIGH_PWR_THRESH_HIGH</span><span class="p">;</span>

	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_val</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">backoff_val</span> <span class="o">=</span> <span class="n">DM_DIG_BACKOFF</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rx_gain_range_max</span> <span class="o">=</span> <span class="n">DM_DIG_MAX</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CustomerID</span> <span class="o">==</span> <span class="n">RT_CID_819x_Netcore</span><span class="p">)</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rx_gain_range_min</span> <span class="o">=</span> <span class="n">DM_DIG_MIN_Netcore</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rx_gain_range_min</span> <span class="o">=</span> <span class="n">DM_DIG_MIN</span><span class="p">;</span>

	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">BackoffVal_range_max</span> <span class="o">=</span> <span class="n">DM_DIG_BACKOFF_MAX</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">BackoffVal_range_min</span> <span class="o">=</span> <span class="n">DM_DIG_BACKOFF_MIN</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_ctrl_initgain_byrssi</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_enable_flag</span> <span class="o">==</span> <span class="nb">false</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm</span> <span class="o">==</span> <span class="n">DIG_ALGO_BY_FALSE_ALARM</span><span class="p">)</span>
		<span class="n">dm_ctrl_initgain_byrssi_by_fwfalse_alarm</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm</span> <span class="o">==</span> <span class="n">DIG_ALGO_BY_RSSI</span><span class="p">)</span>
		<span class="n">dm_ctrl_initgain_byrssi_by_driverrssi</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*-----------------------------------------------------------------------------</span>
<span class="cm"> * Function:	dm_CtrlInitGainBeforeConnectByRssiAndFalseAlarm()</span>
<span class="cm"> *</span>
<span class="cm"> * Overview:	Driver monitor RSSI and False Alarm to change initial gain.</span>
<span class="cm">			Only change initial gain during link in progress.</span>
<span class="cm"> *</span>
<span class="cm"> * Input:		IN	PADAPTER	pAdapter</span>
<span class="cm"> *</span>
<span class="cm"> * Output:		NONE</span>
<span class="cm"> *</span>
<span class="cm"> * Return:		NONE</span>
<span class="cm"> *</span>
<span class="cm"> * Revised History:</span>
<span class="cm"> *	When		Who		Remark</span>
<span class="cm"> *	03/04/2009	hpfan	Create Version 0.</span>
<span class="cm"> *</span>
<span class="cm"> *---------------------------------------------------------------------------*/</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_ctrl_initgain_byrssi_by_driverrssi</span><span class="p">(</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">u8</span> <span class="n">i</span><span class="p">;</span>
	<span class="k">static</span> <span class="n">u8</span>	<span class="n">fw_dig</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_enable_flag</span> <span class="o">==</span> <span class="nb">false</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm_switch</span><span class="p">)</span>
		<span class="n">fw_dig</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">fw_dig</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
			<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">UFWP</span><span class="p">,</span> <span class="n">bMaskByte1</span><span class="p">,</span> <span class="mh">0x8</span><span class="p">);</span>
		<span class="n">fw_dig</span><span class="o">++</span><span class="p">;</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_state</span> <span class="o">=</span> <span class="n">DM_STA_DIG_OFF</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">==</span> <span class="n">RTLLIB_LINKED</span><span class="p">)</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">CurSTAConnectState</span> <span class="o">=</span> <span class="n">DIG_STA_CONNECT</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">CurSTAConnectState</span> <span class="o">=</span> <span class="n">DIG_STA_DISCONNECT</span><span class="p">;</span>


	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dbg_mode</span> <span class="o">==</span> <span class="n">DM_DBG_OFF</span><span class="p">)</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_val</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span><span class="p">;</span>
	<span class="n">dm_initial_gain</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_pd_th</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">dm_cs_ratio</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm_switch</span><span class="p">)</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm_switch</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">dm_digtable</span><span class="p">.</span><span class="n">PreSTAConnectState</span> <span class="o">=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">CurSTAConnectState</span><span class="p">;</span>

<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_ctrl_initgain_byrssi_by_fwfalse_alarm</span><span class="p">(</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">static</span> <span class="n">u32</span> <span class="n">reset_cnt</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">i</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_enable_flag</span> <span class="o">==</span> <span class="nb">false</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm_switch</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_state</span> <span class="o">=</span> <span class="n">DM_STA_DIG_MAX</span><span class="p">;</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
			<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">UFWP</span><span class="p">,</span> <span class="n">bMaskByte1</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm_switch</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">!=</span> <span class="n">RTLLIB_LINKED</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&gt;</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_low_thresh</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
		<span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&lt;</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_thresh</span><span class="p">))</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&lt;=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_low_thresh</span><span class="p">))</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_state</span> <span class="o">==</span> <span class="n">DM_STA_DIG_OFF</span> <span class="o">&amp;&amp;</span>
			<span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span> <span class="o">==</span> <span class="n">reset_cnt</span><span class="p">))</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="n">reset_cnt</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span><span class="p">;</span>

		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_highpwr_state</span> <span class="o">=</span> <span class="n">DM_STA_DIG_MAX</span><span class="p">;</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_state</span> <span class="o">=</span> <span class="n">DM_STA_DIG_OFF</span><span class="p">;</span>

		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">UFWP</span><span class="p">,</span> <span class="n">bMaskByte1</span><span class="p">,</span> <span class="mh">0x8</span><span class="p">);</span>

		<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XAAGCCore1</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">);</span>
		<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XBAGCCore1</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">);</span>
		<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XCAGCCore1</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">);</span>
		<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XDAGCCore1</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CurrentChannelBW</span> <span class="o">!=</span> <span class="n">HT_CHANNEL_WIDTH_20</span><span class="p">)</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="p">(</span><span class="n">rOFDM0_XATxAFE</span><span class="o">+</span><span class="mi">3</span><span class="p">),</span> <span class="mh">0x00</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector1</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">);</span>

		<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xa0a</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">);</span>

		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&gt;=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_thresh</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">reset_flag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_state</span> <span class="o">==</span> <span class="n">DM_STA_DIG_ON</span> <span class="o">&amp;&amp;</span>
		    <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span> <span class="o">==</span> <span class="n">reset_cnt</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">dm_ctrl_initgain_byrssi_highpwr</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span> <span class="o">!=</span> <span class="n">reset_cnt</span><span class="p">)</span>
				<span class="n">reset_flag</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

			<span class="n">reset_cnt</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_state</span> <span class="o">=</span> <span class="n">DM_STA_DIG_ON</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">reset_flag</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XAAGCCore1</span><span class="p">,</span> <span class="mh">0x2c</span><span class="p">);</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XBAGCCore1</span><span class="p">,</span> <span class="mh">0x2c</span><span class="p">);</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XCAGCCore1</span><span class="p">,</span> <span class="mh">0x2c</span><span class="p">);</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XDAGCCore1</span><span class="p">,</span> <span class="mh">0x2c</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XAAGCCore1</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XBAGCCore1</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XCAGCCore1</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XDAGCCore1</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CurrentChannelBW</span> <span class="o">!=</span> <span class="n">HT_CHANNEL_WIDTH_20</span><span class="p">)</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="p">(</span><span class="n">rOFDM0_XATxAFE</span><span class="o">+</span><span class="mi">3</span><span class="p">),</span> <span class="mh">0x20</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector1</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">);</span>

		<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xa0a</span><span class="p">,</span> <span class="mh">0xcd</span><span class="p">);</span>

		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">UFWP</span><span class="p">,</span> <span class="n">bMaskByte1</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">dm_ctrl_initgain_byrssi_highpwr</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
<span class="p">}</span>


<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_ctrl_initgain_byrssi_highpwr</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">static</span> <span class="n">u32</span> <span class="n">reset_cnt_highpwr</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&gt;</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_power_lowthresh</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
		<span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&lt;</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_power_highthresh</span><span class="p">))</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&gt;=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_power_highthresh</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_highpwr_state</span> <span class="o">==</span> <span class="n">DM_STA_DIG_ON</span> <span class="o">&amp;&amp;</span>
			<span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span> <span class="o">==</span> <span class="n">reset_cnt_highpwr</span><span class="p">))</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_highpwr_state</span> <span class="o">=</span> <span class="n">DM_STA_DIG_ON</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CurrentChannelBW</span> <span class="o">!=</span> <span class="n">HT_CHANNEL_WIDTH_20</span><span class="p">)</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="p">(</span><span class="n">rOFDM0_XATxAFE</span><span class="o">+</span><span class="mi">3</span><span class="p">),</span> <span class="mh">0x10</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector1</span><span class="p">,</span> <span class="mh">0x43</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_highpwr_state</span> <span class="o">==</span> <span class="n">DM_STA_DIG_OFF</span> <span class="o">&amp;&amp;</span>
			<span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span> <span class="o">==</span> <span class="n">reset_cnt_highpwr</span><span class="p">))</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_highpwr_state</span> <span class="o">=</span> <span class="n">DM_STA_DIG_OFF</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&lt;</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_power_lowthresh</span> <span class="o">&amp;&amp;</span>
			 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&gt;=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_thresh</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CurrentChannelBW</span> <span class="o">!=</span> <span class="n">HT_CHANNEL_WIDTH_20</span><span class="p">)</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="p">(</span><span class="n">rOFDM0_XATxAFE</span><span class="o">+</span><span class="mi">3</span><span class="p">),</span> <span class="mh">0x20</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector1</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">reset_cnt_highpwr</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_initial_gain</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">u8</span> <span class="n">initial_gain</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">static</span> <span class="n">u8</span> <span class="n">initialized</span><span class="p">,</span> <span class="n">force_write</span><span class="p">;</span>
	<span class="k">static</span> <span class="n">u32</span> <span class="n">reset_cnt</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm_switch</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">initialized</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">reset_cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">rtllib_act_scanning</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="p">,</span> <span class="nb">true</span><span class="p">)</span> <span class="o">==</span> <span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">force_write</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">PreSTAConnectState</span> <span class="o">==</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">CurSTAConnectState</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">CurSTAConnectState</span> <span class="o">==</span> <span class="n">DIG_STA_CONNECT</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">((</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_val</span><span class="o">+</span><span class="mi">10</span><span class="o">-</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">backoff_val</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rx_gain_range_max</span><span class="p">)</span>
				<span class="n">dm_digtable</span><span class="p">.</span><span class="n">cur_ig_value</span> <span class="o">=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rx_gain_range_max</span><span class="p">;</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_val</span><span class="o">+</span><span class="mi">10</span><span class="o">-</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">backoff_val</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rx_gain_range_min</span><span class="p">)</span>
				<span class="n">dm_digtable</span><span class="p">.</span><span class="n">cur_ig_value</span> <span class="o">=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rx_gain_range_min</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="n">dm_digtable</span><span class="p">.</span><span class="n">cur_ig_value</span> <span class="o">=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_val</span><span class="o">+</span><span class="mi">10</span><span class="o">-</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">backoff_val</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">cur_ig_value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
				<span class="n">dm_digtable</span><span class="p">.</span><span class="n">cur_ig_value</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">DefaultInitialGain</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
			<span class="k">else</span>
				<span class="n">dm_digtable</span><span class="p">.</span><span class="n">cur_ig_value</span> <span class="o">=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">pre_ig_value</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">cur_ig_value</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">DefaultInitialGain</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">pre_ig_value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span> <span class="o">!=</span> <span class="n">reset_cnt</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">force_write</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">reset_cnt</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">pre_ig_value</span> <span class="o">!=</span> <span class="n">read_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XAAGCCore1</span><span class="p">))</span>
		<span class="n">force_write</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">pre_ig_value</span> <span class="o">!=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">cur_ig_value</span><span class="p">)</span>
	    <span class="o">||</span> <span class="o">!</span><span class="n">initialized</span> <span class="o">||</span> <span class="n">force_write</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">initial_gain</span> <span class="o">=</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">cur_ig_value</span><span class="p">;</span>
		<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XAAGCCore1</span><span class="p">,</span> <span class="n">initial_gain</span><span class="p">);</span>
		<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XBAGCCore1</span><span class="p">,</span> <span class="n">initial_gain</span><span class="p">);</span>
		<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XCAGCCore1</span><span class="p">,</span> <span class="n">initial_gain</span><span class="p">);</span>
		<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_XDAGCCore1</span><span class="p">,</span> <span class="n">initial_gain</span><span class="p">);</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">pre_ig_value</span> <span class="o">=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">cur_ig_value</span><span class="p">;</span>
		<span class="n">initialized</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">force_write</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_pd_th</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">static</span> <span class="n">u8</span> <span class="n">initialized</span><span class="p">,</span> <span class="n">force_write</span><span class="p">;</span>
	<span class="k">static</span> <span class="n">u32</span> <span class="n">reset_cnt</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm_switch</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">initialized</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">reset_cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">PreSTAConnectState</span> <span class="o">==</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">CurSTAConnectState</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">CurSTAConnectState</span> <span class="o">==</span> <span class="n">DIG_STA_CONNECT</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_val</span> <span class="o">&gt;=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_power_highthresh</span><span class="p">)</span>
				<span class="n">dm_digtable</span><span class="p">.</span><span class="n">curpd_thstate</span> <span class="o">=</span> <span class="n">DIG_PD_AT_HIGH_POWER</span><span class="p">;</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_val</span> <span class="o">&lt;=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_low_thresh</span><span class="p">))</span>
				<span class="n">dm_digtable</span><span class="p">.</span><span class="n">curpd_thstate</span> <span class="o">=</span> <span class="n">DIG_PD_AT_LOW_POWER</span><span class="p">;</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_val</span> <span class="o">&gt;=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_thresh</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
					<span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_val</span> <span class="o">&lt;</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_power_lowthresh</span><span class="p">))</span>
				<span class="n">dm_digtable</span><span class="p">.</span><span class="n">curpd_thstate</span> <span class="o">=</span> <span class="n">DIG_PD_AT_NORMAL_POWER</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="n">dm_digtable</span><span class="p">.</span><span class="n">curpd_thstate</span> <span class="o">=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">prepd_thstate</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">dm_digtable</span><span class="p">.</span><span class="n">curpd_thstate</span> <span class="o">=</span> <span class="n">DIG_PD_AT_LOW_POWER</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">curpd_thstate</span> <span class="o">=</span> <span class="n">DIG_PD_AT_LOW_POWER</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span> <span class="o">!=</span> <span class="n">reset_cnt</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">force_write</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">reset_cnt</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">prepd_thstate</span> <span class="o">!=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">curpd_thstate</span><span class="p">)</span> <span class="o">||</span>
	    <span class="p">(</span><span class="n">initialized</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">)</span> <span class="o">||</span> <span class="n">force_write</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">curpd_thstate</span> <span class="o">==</span> <span class="n">DIG_PD_AT_LOW_POWER</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CurrentChannelBW</span> <span class="o">!=</span> <span class="n">HT_CHANNEL_WIDTH_20</span><span class="p">)</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="p">(</span><span class="n">rOFDM0_XATxAFE</span><span class="o">+</span><span class="mi">3</span><span class="p">),</span> <span class="mh">0x00</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector1</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">curpd_thstate</span> <span class="o">==</span> <span class="n">DIG_PD_AT_NORMAL_POWER</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CurrentChannelBW</span> <span class="o">!=</span> <span class="n">HT_CHANNEL_WIDTH_20</span><span class="p">)</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="p">(</span><span class="n">rOFDM0_XATxAFE</span><span class="o">+</span><span class="mi">3</span><span class="p">),</span> <span class="mh">0x20</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector1</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">curpd_thstate</span> <span class="o">==</span> <span class="n">DIG_PD_AT_HIGH_POWER</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CurrentChannelBW</span> <span class="o">!=</span> <span class="n">HT_CHANNEL_WIDTH_20</span><span class="p">)</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="p">(</span><span class="n">rOFDM0_XATxAFE</span><span class="o">+</span><span class="mi">3</span><span class="p">),</span> <span class="mh">0x10</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector1</span><span class="p">,</span> <span class="mh">0x43</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">prepd_thstate</span> <span class="o">=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">curpd_thstate</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">initialized</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">)</span>
			<span class="n">initialized</span><span class="o">++</span><span class="p">;</span>
		<span class="n">force_write</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span>	<span class="kt">void</span> <span class="nf">dm_cs_ratio</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">static</span> <span class="n">u8</span> <span class="n">initialized</span><span class="p">,</span> <span class="n">force_write</span><span class="p">;</span>
	<span class="k">static</span> <span class="n">u32</span> <span class="n">reset_cnt</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">dig_algorithm_switch</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">initialized</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">reset_cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">PreSTAConnectState</span> <span class="o">==</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">CurSTAConnectState</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">CurSTAConnectState</span> <span class="o">==</span> <span class="n">DIG_STA_CONNECT</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">((</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_val</span> <span class="o">&lt;=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_low_thresh</span><span class="p">))</span>
				<span class="n">dm_digtable</span><span class="p">.</span><span class="n">curcs_ratio_state</span> <span class="o">=</span> <span class="n">DIG_CS_RATIO_LOWER</span><span class="p">;</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_val</span> <span class="o">&gt;=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">rssi_high_thresh</span><span class="p">))</span>
				<span class="n">dm_digtable</span><span class="p">.</span><span class="n">curcs_ratio_state</span> <span class="o">=</span> <span class="n">DIG_CS_RATIO_HIGHER</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="n">dm_digtable</span><span class="p">.</span><span class="n">curcs_ratio_state</span> <span class="o">=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">precs_ratio_state</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">dm_digtable</span><span class="p">.</span><span class="n">curcs_ratio_state</span> <span class="o">=</span> <span class="n">DIG_CS_RATIO_LOWER</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">curcs_ratio_state</span> <span class="o">=</span> <span class="n">DIG_CS_RATIO_LOWER</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span> <span class="o">!=</span> <span class="n">reset_cnt</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">force_write</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">reset_cnt</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span><span class="p">;</span>
	<span class="p">}</span>


	<span class="k">if</span> <span class="p">((</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">precs_ratio_state</span> <span class="o">!=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">curcs_ratio_state</span><span class="p">)</span> <span class="o">||</span>
	    <span class="o">!</span><span class="n">initialized</span> <span class="o">||</span> <span class="n">force_write</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">curcs_ratio_state</span> <span class="o">==</span> <span class="n">DIG_CS_RATIO_LOWER</span><span class="p">)</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xa0a</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">);</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dm_digtable</span><span class="p">.</span><span class="n">curcs_ratio_state</span> <span class="o">==</span> <span class="n">DIG_CS_RATIO_HIGHER</span><span class="p">)</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xa0a</span><span class="p">,</span> <span class="mh">0xcd</span><span class="p">);</span>
		<span class="n">dm_digtable</span><span class="p">.</span><span class="n">precs_ratio_state</span> <span class="o">=</span> <span class="n">dm_digtable</span><span class="p">.</span><span class="n">curcs_ratio_state</span><span class="p">;</span>
		<span class="n">initialized</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">force_write</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">dm_init_edca_turbo</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcurrent_turbo_EDCA</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bis_any_nonbepkts</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bis_cur_rdlstate</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_check_edca_turbo</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">rt_hi_throughput</span> <span class="o">*</span><span class="n">pHTInfo</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">pHTInfo</span><span class="p">;</span>

	<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">lastTxOkCnt</span><span class="p">;</span>
	<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">lastRxOkCnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">curTxOkCnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">curRxOkCnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">iw_mode</span> <span class="o">==</span> <span class="n">IW_MODE_ADHOC</span><span class="p">)</span>
		<span class="k">goto</span> <span class="n">dm_CheckEdcaTurbo_EXIT</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">!=</span> <span class="n">RTLLIB_LINKED</span><span class="p">)</span>
		<span class="k">goto</span> <span class="n">dm_CheckEdcaTurbo_EXIT</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTAction</span> <span class="o">&amp;</span> <span class="n">HT_IOT_ACT_DISABLE_EDCA_TURBO</span><span class="p">)</span>
		<span class="k">goto</span> <span class="n">dm_CheckEdcaTurbo_EXIT</span><span class="p">;</span>

	<span class="p">{</span>
		<span class="n">u8</span> <span class="o">*</span><span class="n">peername</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;unknown&quot;</span><span class="p">,</span> <span class="s">&quot;realtek_90&quot;</span><span class="p">,</span> <span class="s">&quot;realtek_92se&quot;</span><span class="p">,</span> <span class="s">&quot;broadcom&quot;</span><span class="p">,</span>
			<span class="s">&quot;ralink&quot;</span><span class="p">,</span> <span class="s">&quot;atheros&quot;</span><span class="p">,</span> <span class="s">&quot;cisco&quot;</span><span class="p">,</span> <span class="s">&quot;marvell&quot;</span><span class="p">,</span> <span class="s">&quot;92u_softap&quot;</span><span class="p">,</span>
			<span class="s">&quot;self_softap&quot;</span>
		<span class="p">};</span>
		<span class="k">static</span> <span class="kt">int</span> <span class="n">wb_tmp</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">wb_tmp</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;%s():iot peer is %s, bssid:&quot;</span>
			       <span class="s">&quot; %pM</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">,</span>
			       <span class="n">peername</span><span class="p">[</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTPeer</span><span class="p">],</span>
			       <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">current_network</span><span class="p">.</span><span class="n">bssid</span><span class="p">);</span>
			<span class="n">wb_tmp</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bis_any_nonbepkts</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">curTxOkCnt</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">stats</span><span class="p">.</span><span class="n">txbytesunicast</span> <span class="o">-</span> <span class="n">lastTxOkCnt</span><span class="p">;</span>
		<span class="n">curRxOkCnt</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">stats</span><span class="p">.</span><span class="n">rxbytesunicast</span> <span class="o">-</span> <span class="n">lastRxOkCnt</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTAction</span> <span class="o">&amp;</span> <span class="n">HT_IOT_ACT_EDCA_BIAS_ON_RX</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">curTxOkCnt</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="o">*</span><span class="n">curRxOkCnt</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bis_cur_rdlstate</span> <span class="o">||</span>
				    <span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcurrent_turbo_EDCA</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">write_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EDCAPARA_BE</span><span class="p">,</span>
						 <span class="n">edca_setting_UL</span><span class="p">[</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTPeer</span><span class="p">]);</span>
					<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bis_cur_rdlstate</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bis_cur_rdlstate</span> <span class="o">||</span>
				    <span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcurrent_turbo_EDCA</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">mode</span> <span class="o">==</span> <span class="n">WIRELESS_MODE_G</span><span class="p">)</span>
						<span class="n">write_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EDCAPARA_BE</span><span class="p">,</span>
							 <span class="n">edca_setting_DL_GMode</span><span class="p">[</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTPeer</span><span class="p">]);</span>
					<span class="k">else</span>
						<span class="n">write_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EDCAPARA_BE</span><span class="p">,</span>
							 <span class="n">edca_setting_DL</span><span class="p">[</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTPeer</span><span class="p">]);</span>
					<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bis_cur_rdlstate</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcurrent_turbo_EDCA</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">curRxOkCnt</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="o">*</span><span class="n">curTxOkCnt</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bis_cur_rdlstate</span> <span class="o">||</span> <span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcurrent_turbo_EDCA</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">mode</span> <span class="o">==</span> <span class="n">WIRELESS_MODE_G</span><span class="p">)</span>
						<span class="n">write_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EDCAPARA_BE</span><span class="p">,</span>
							 <span class="n">edca_setting_DL_GMode</span><span class="p">[</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTPeer</span><span class="p">]);</span>
					<span class="k">else</span>
						<span class="n">write_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EDCAPARA_BE</span><span class="p">,</span>
							 <span class="n">edca_setting_DL</span><span class="p">[</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTPeer</span><span class="p">]);</span>
					<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bis_cur_rdlstate</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bis_cur_rdlstate</span> <span class="o">||</span>
				    <span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcurrent_turbo_EDCA</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">write_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">EDCAPARA_BE</span><span class="p">,</span>
							<span class="n">edca_setting_UL</span><span class="p">[</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTPeer</span><span class="p">]);</span>
					<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bis_cur_rdlstate</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
				<span class="p">}</span>

			<span class="p">}</span>

			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcurrent_turbo_EDCA</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		 <span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcurrent_turbo_EDCA</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">u8</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">AC0_BE</span><span class="p">;</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">SetHwRegHandler</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">HW_VAR_AC_PARAM</span><span class="p">,</span> <span class="p">(</span><span class="n">u8</span> <span class="o">*</span><span class="p">)(</span><span class="o">&amp;</span><span class="n">tmp</span><span class="p">));</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bcurrent_turbo_EDCA</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>


<span class="nl">dm_CheckEdcaTurbo_EXIT:</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bis_any_nonbepkts</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">lastTxOkCnt</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">stats</span><span class="p">.</span><span class="n">txbytesunicast</span><span class="p">;</span>
	<span class="n">lastRxOkCnt</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">stats</span><span class="p">.</span><span class="n">rxbytesunicast</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_init_ctstoself</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">((</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">)</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bCTSToSelfEnable</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">CTSToSelfTH</span> <span class="o">=</span> <span class="n">CTSToSelfTHVal</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_ctstoself</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">((</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">)</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">rt_hi_throughput</span> <span class="o">*</span><span class="n">pHTInfo</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">pHTInfo</span><span class="p">;</span>
	<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">lastTxOkCnt</span><span class="p">;</span>
	<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">lastRxOkCnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">curTxOkCnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">curRxOkCnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bCTSToSelfEnable</span> <span class="o">!=</span> <span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTAction</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">HT_IOT_ACT_FORCED_CTS2SELF</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTPeer</span> <span class="o">==</span> <span class="n">HT_IOT_PEER_BROADCOM</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">curTxOkCnt</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">stats</span><span class="p">.</span><span class="n">txbytesunicast</span> <span class="o">-</span> <span class="n">lastTxOkCnt</span><span class="p">;</span>
		<span class="n">curRxOkCnt</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">stats</span><span class="p">.</span><span class="n">rxbytesunicast</span> <span class="o">-</span> <span class="n">lastRxOkCnt</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">curRxOkCnt</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="o">*</span><span class="n">curTxOkCnt</span><span class="p">)</span>
			<span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTAction</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">HT_IOT_ACT_FORCED_CTS2SELF</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTAction</span> <span class="o">|=</span> <span class="n">HT_IOT_ACT_FORCED_CTS2SELF</span><span class="p">;</span>

		<span class="n">lastTxOkCnt</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">stats</span><span class="p">.</span><span class="n">txbytesunicast</span><span class="p">;</span>
		<span class="n">lastRxOkCnt</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">stats</span><span class="p">.</span><span class="n">rxbytesunicast</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>


<span class="k">static</span>	<span class="kt">void</span> <span class="nf">dm_Init_WA_Broadcom_IOT</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">((</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">)</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">rt_hi_throughput</span> <span class="o">*</span><span class="n">pHTInfo</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">pHTInfo</span><span class="p">;</span>

	<span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">bWAIotBroadcom</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">WAIotTH</span> <span class="o">=</span> <span class="n">WAIotTHVal</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span>	<span class="kt">void</span>	<span class="nf">dm_check_pbc_gpio</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">dm_CheckRfCtrlGPIO</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">container_of_dwork_rsl</span><span class="p">(</span><span class="n">data</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">r8192_priv</span><span class="p">,</span> <span class="n">gpio_change_rf_wq</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tmp1byte</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">rt_rf_power_state</span> <span class="n">eRfPowerStateToSet</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">bActuallySet</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="k">static</span> <span class="kt">char</span> <span class="o">*</span><span class="n">RadioPowerPath</span> <span class="o">=</span> <span class="s">&quot;/etc/acpi/events/RadioPower.sh&quot;</span><span class="p">;</span>
	<span class="k">static</span> <span class="kt">char</span> <span class="o">*</span><span class="n">envp</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;HOME=/&quot;</span><span class="p">,</span> <span class="s">&quot;TERM=linux&quot;</span><span class="p">,</span> <span class="s">&quot;PATH=/usr/bin:/bin&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">};</span>

	<span class="n">bActuallySet</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">up_first_time</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">being_init_adapter</span><span class="p">))</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bfirst_after_down</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bfirst_after_down</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">tmp1byte</span> <span class="o">=</span> <span class="n">read_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">GPI</span><span class="p">);</span>

	<span class="n">eRfPowerStateToSet</span> <span class="o">=</span> <span class="p">(</span><span class="n">tmp1byte</span><span class="o">&amp;</span><span class="n">BIT1</span><span class="p">)</span> <span class="o">?</span>  <span class="n">eRfOn</span> <span class="o">:</span> <span class="n">eRfOff</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bHwRadioOff</span> <span class="o">==</span> <span class="nb">true</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">eRfPowerStateToSet</span> <span class="o">==</span> <span class="n">eRfOn</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_RF</span><span class="p">,</span> <span class="s">&quot;gpiochangeRF  - HW Radio ON</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;gpiochangeRF  - HW Radio ON</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bHwRadioOff</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
		<span class="n">bActuallySet</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bHwRadioOff</span> <span class="o">==</span> <span class="nb">false</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">eRfPowerStateToSet</span> <span class="o">==</span> <span class="n">eRfOff</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_RF</span><span class="p">,</span> <span class="s">&quot;gpiochangeRF  - HW Radio OFF</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;gpiochangeRF  - HW Radio OFF</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bHwRadioOff</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
		<span class="n">bActuallySet</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">bActuallySet</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">mdelay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bHwRfOffAction</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">MgntActSet_RF_State</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">eRfPowerStateToSet</span><span class="p">,</span> <span class="n">RF_CHANGE_BY_HW</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bHwRadioOff</span> <span class="o">==</span> <span class="nb">true</span><span class="p">)</span>
			<span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;RFOFF&quot;</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;RFON&quot;</span><span class="p">;</span>

		<span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">RadioPowerPath</span><span class="p">;</span>
		<span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
		<span class="n">call_usermodehelper</span><span class="p">(</span><span class="n">RadioPowerPath</span><span class="p">,</span> <span class="n">argv</span><span class="p">,</span> <span class="n">envp</span><span class="p">,</span> <span class="n">UMH_WAIT_PROC</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span>	<span class="nf">dm_rf_pathcheck_workitemcallback</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">container_of_dwork_rsl</span><span class="p">(</span><span class="n">data</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">r8192_priv</span><span class="p">,</span>
				  <span class="n">rfpath_check_wq</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rfpath</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">;</span>

	<span class="n">rfpath</span> <span class="o">=</span> <span class="n">read_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xc04</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">RF90_PATH_MAX</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">rfpath</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mh">0x01</span><span class="o">&lt;&lt;</span><span class="n">i</span><span class="p">))</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">brfpath_rxenable</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">brfpath_rxenable</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">Enable</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="n">dm_rxpath_sel_byrssi</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_init_rxpath_selection</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u8</span> <span class="n">i</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">Enable</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">SS_TH_low</span> <span class="o">=</span> <span class="n">RxPathSelection_SS_TH_low</span><span class="p">;</span>
	<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">diff_TH</span> <span class="o">=</span> <span class="n">RxPathSelection_diff_TH</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">CustomerID</span> <span class="o">==</span> <span class="n">RT_CID_819x_Netcore</span><span class="p">)</span>
		<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">cck_method</span> <span class="o">=</span> <span class="n">CCK_Rx_Version_2</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">cck_method</span> <span class="o">=</span> <span class="n">CCK_Rx_Version_1</span><span class="p">;</span>
	<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">DbgMode</span> <span class="o">=</span> <span class="n">DM_DBG_OFF</span><span class="p">;</span>
	<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">disabledRF</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">rf_rssi</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
		<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">cck_pwdb_sta</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">64</span><span class="p">;</span>
		<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">rf_enable_rssi_th</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cp">#define PWDB_IN_RANGE	((cur_cck_pwdb &lt; tmp_cck_max_pwdb) &amp;&amp;	\</span>
<span class="cp">			(cur_cck_pwdb &gt; tmp_cck_sec_pwdb))</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_rxpath_sel_byrssi</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">u8</span> <span class="n">i</span><span class="p">,</span> <span class="n">max_rssi_index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">min_rssi_index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">sec_rssi_index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">rf_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tmp_max_rssi</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tmp_min_rssi</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tmp_sec_rssi</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cck_default_Rx</span> <span class="o">=</span> <span class="mh">0x2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cck_optional_Rx</span> <span class="o">=</span> <span class="mh">0x3</span><span class="p">;</span>
	<span class="kt">long</span> <span class="n">tmp_cck_max_pwdb</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tmp_cck_min_pwdb</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tmp_cck_sec_pwdb</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cck_rx_ver2_max_index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">cck_rx_ver2_min_index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cck_rx_ver2_sec_index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cur_rf_rssi</span><span class="p">;</span>
	<span class="kt">long</span> <span class="n">cur_cck_pwdb</span><span class="p">;</span>
	<span class="k">static</span> <span class="n">u8</span> <span class="n">disabled_rf_cnt</span><span class="p">,</span> <span class="n">cck_Rx_Path_initialized</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">update_cck_rx_path</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rf_type</span> <span class="o">!=</span> <span class="n">RF_2T4R</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">cck_Rx_Path_initialized</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">cck_Rx_path</span> <span class="o">=</span> <span class="p">(</span><span class="n">read_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xa07</span><span class="p">)</span><span class="o">&amp;</span><span class="mh">0xf</span><span class="p">);</span>
		<span class="n">cck_Rx_Path_initialized</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">disabledRF</span> <span class="o">=</span> <span class="mh">0xf</span><span class="p">;</span>
	<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">disabledRF</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="n">read_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xc04</span><span class="p">));</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">mode</span> <span class="o">==</span> <span class="n">WIRELESS_MODE_B</span><span class="p">)</span>
		<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">cck_method</span> <span class="o">=</span> <span class="n">CCK_Rx_Version_2</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">RF90_PATH_MAX</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">DbgMode</span><span class="p">)</span>
			<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">rf_rssi</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">stats</span><span class="p">.</span><span class="n">rx_rssi_percentage</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">brfpath_rxenable</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
			<span class="n">rf_num</span><span class="o">++</span><span class="p">;</span>
			<span class="n">cur_rf_rssi</span> <span class="o">=</span> <span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">rf_rssi</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">rf_num</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">max_rssi_index</span> <span class="o">=</span> <span class="n">min_rssi_index</span> <span class="o">=</span> <span class="n">sec_rssi_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
				<span class="n">tmp_max_rssi</span> <span class="o">=</span> <span class="n">tmp_min_rssi</span> <span class="o">=</span> <span class="n">tmp_sec_rssi</span> <span class="o">=</span> <span class="n">cur_rf_rssi</span><span class="p">;</span>
			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">rf_num</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">cur_rf_rssi</span> <span class="o">&gt;=</span> <span class="n">tmp_max_rssi</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">tmp_max_rssi</span> <span class="o">=</span> <span class="n">cur_rf_rssi</span><span class="p">;</span>
					<span class="n">max_rssi_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="n">tmp_sec_rssi</span> <span class="o">=</span> <span class="n">tmp_min_rssi</span> <span class="o">=</span> <span class="n">cur_rf_rssi</span><span class="p">;</span>
					<span class="n">sec_rssi_index</span> <span class="o">=</span> <span class="n">min_rssi_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">cur_rf_rssi</span> <span class="o">&gt;</span> <span class="n">tmp_max_rssi</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">tmp_sec_rssi</span> <span class="o">=</span> <span class="n">tmp_max_rssi</span><span class="p">;</span>
					<span class="n">sec_rssi_index</span> <span class="o">=</span> <span class="n">max_rssi_index</span><span class="p">;</span>
					<span class="n">tmp_max_rssi</span> <span class="o">=</span> <span class="n">cur_rf_rssi</span><span class="p">;</span>
					<span class="n">max_rssi_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">cur_rf_rssi</span> <span class="o">==</span> <span class="n">tmp_max_rssi</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">tmp_sec_rssi</span> <span class="o">=</span> <span class="n">cur_rf_rssi</span><span class="p">;</span>
					<span class="n">sec_rssi_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">cur_rf_rssi</span> <span class="o">&lt;</span> <span class="n">tmp_max_rssi</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
					   <span class="p">(</span><span class="n">cur_rf_rssi</span> <span class="o">&gt;</span> <span class="n">tmp_sec_rssi</span><span class="p">))</span> <span class="p">{</span>
					<span class="n">tmp_sec_rssi</span> <span class="o">=</span> <span class="n">cur_rf_rssi</span><span class="p">;</span>
					<span class="n">sec_rssi_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">cur_rf_rssi</span> <span class="o">==</span> <span class="n">tmp_sec_rssi</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">tmp_sec_rssi</span> <span class="o">==</span> <span class="n">tmp_min_rssi</span><span class="p">)</span> <span class="p">{</span>
						<span class="n">tmp_sec_rssi</span> <span class="o">=</span> <span class="n">cur_rf_rssi</span><span class="p">;</span>
						<span class="n">sec_rssi_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
					<span class="p">}</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">cur_rf_rssi</span> <span class="o">&lt;</span> <span class="n">tmp_sec_rssi</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
					   <span class="p">(</span><span class="n">cur_rf_rssi</span> <span class="o">&gt;</span> <span class="n">tmp_min_rssi</span><span class="p">))</span> <span class="p">{</span>
					<span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">cur_rf_rssi</span> <span class="o">==</span> <span class="n">tmp_min_rssi</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">tmp_sec_rssi</span> <span class="o">==</span> <span class="n">tmp_min_rssi</span><span class="p">)</span> <span class="p">{</span>
						<span class="n">tmp_min_rssi</span> <span class="o">=</span> <span class="n">cur_rf_rssi</span><span class="p">;</span>
						<span class="n">min_rssi_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
					<span class="p">}</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">cur_rf_rssi</span> <span class="o">&lt;</span> <span class="n">tmp_min_rssi</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">tmp_min_rssi</span> <span class="o">=</span> <span class="n">cur_rf_rssi</span><span class="p">;</span>
					<span class="n">min_rssi_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">rf_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">cck_method</span> <span class="o">==</span> <span class="n">CCK_Rx_Version_2</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">RF90_PATH_MAX</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">brfpath_rxenable</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
				<span class="n">rf_num</span><span class="o">++</span><span class="p">;</span>
				<span class="n">cur_cck_pwdb</span> <span class="o">=</span>
					 <span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">cck_pwdb_sta</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

				<span class="k">if</span> <span class="p">(</span><span class="n">rf_num</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">cck_rx_ver2_max_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
					<span class="n">cck_rx_ver2_min_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
					<span class="n">cck_rx_ver2_sec_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
					<span class="n">tmp_cck_max_pwdb</span> <span class="o">=</span> <span class="n">cur_cck_pwdb</span><span class="p">;</span>
					<span class="n">tmp_cck_min_pwdb</span> <span class="o">=</span> <span class="n">cur_cck_pwdb</span><span class="p">;</span>
					<span class="n">tmp_cck_sec_pwdb</span> <span class="o">=</span> <span class="n">cur_cck_pwdb</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">rf_num</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">cur_cck_pwdb</span> <span class="o">&gt;=</span> <span class="n">tmp_cck_max_pwdb</span><span class="p">)</span> <span class="p">{</span>
						<span class="n">tmp_cck_max_pwdb</span> <span class="o">=</span> <span class="n">cur_cck_pwdb</span><span class="p">;</span>
						<span class="n">cck_rx_ver2_max_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
					<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
						<span class="n">tmp_cck_sec_pwdb</span> <span class="o">=</span> <span class="n">cur_cck_pwdb</span><span class="p">;</span>
						<span class="n">tmp_cck_min_pwdb</span> <span class="o">=</span> <span class="n">cur_cck_pwdb</span><span class="p">;</span>
						<span class="n">cck_rx_ver2_sec_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
						<span class="n">cck_rx_ver2_min_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
					<span class="p">}</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">cur_cck_pwdb</span> <span class="o">&gt;</span> <span class="n">tmp_cck_max_pwdb</span><span class="p">)</span> <span class="p">{</span>
						<span class="n">tmp_cck_sec_pwdb</span> <span class="o">=</span>
							 <span class="n">tmp_cck_max_pwdb</span><span class="p">;</span>
						<span class="n">cck_rx_ver2_sec_index</span> <span class="o">=</span>
							 <span class="n">cck_rx_ver2_max_index</span><span class="p">;</span>
						<span class="n">tmp_cck_max_pwdb</span> <span class="o">=</span> <span class="n">cur_cck_pwdb</span><span class="p">;</span>
						<span class="n">cck_rx_ver2_max_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
					<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">cur_cck_pwdb</span> <span class="o">==</span>
						   <span class="n">tmp_cck_max_pwdb</span><span class="p">)</span> <span class="p">{</span>
						<span class="n">tmp_cck_sec_pwdb</span> <span class="o">=</span> <span class="n">cur_cck_pwdb</span><span class="p">;</span>
						<span class="n">cck_rx_ver2_sec_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
					<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">PWDB_IN_RANGE</span><span class="p">)</span> <span class="p">{</span>
						<span class="n">tmp_cck_sec_pwdb</span> <span class="o">=</span> <span class="n">cur_cck_pwdb</span><span class="p">;</span>
						<span class="n">cck_rx_ver2_sec_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
					<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">cur_cck_pwdb</span> <span class="o">==</span>
						   <span class="n">tmp_cck_sec_pwdb</span><span class="p">)</span> <span class="p">{</span>
						<span class="k">if</span> <span class="p">(</span><span class="n">tmp_cck_sec_pwdb</span> <span class="o">==</span>
						    <span class="n">tmp_cck_min_pwdb</span><span class="p">)</span> <span class="p">{</span>
							<span class="n">tmp_cck_sec_pwdb</span> <span class="o">=</span>
								 <span class="n">cur_cck_pwdb</span><span class="p">;</span>
							<span class="n">cck_rx_ver2_sec_index</span> <span class="o">=</span>
								 <span class="n">i</span><span class="p">;</span>
						<span class="p">}</span>
					<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">cur_cck_pwdb</span> <span class="o">&lt;</span> <span class="n">tmp_cck_sec_pwdb</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
						   <span class="p">(</span><span class="n">cur_cck_pwdb</span> <span class="o">&gt;</span> <span class="n">tmp_cck_min_pwdb</span><span class="p">))</span> <span class="p">{</span>
						<span class="p">;</span>
					<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">cur_cck_pwdb</span> <span class="o">==</span> <span class="n">tmp_cck_min_pwdb</span><span class="p">)</span> <span class="p">{</span>
						<span class="k">if</span> <span class="p">(</span><span class="n">tmp_cck_sec_pwdb</span> <span class="o">==</span> <span class="n">tmp_cck_min_pwdb</span><span class="p">)</span> <span class="p">{</span>
							<span class="n">tmp_cck_min_pwdb</span> <span class="o">=</span> <span class="n">cur_cck_pwdb</span><span class="p">;</span>
							<span class="n">cck_rx_ver2_min_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
						<span class="p">}</span>
					<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">cur_cck_pwdb</span> <span class="o">&lt;</span> <span class="n">tmp_cck_min_pwdb</span><span class="p">)</span> <span class="p">{</span>
						<span class="n">tmp_cck_min_pwdb</span> <span class="o">=</span> <span class="n">cur_cck_pwdb</span><span class="p">;</span>
						<span class="n">cck_rx_ver2_min_index</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
					<span class="p">}</span>
				<span class="p">}</span>

			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">update_cck_rx_path</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">cck_method</span> <span class="o">==</span> <span class="n">CCK_Rx_Version_2</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">cck_default_Rx</span> <span class="o">=</span> <span class="n">cck_rx_ver2_max_index</span><span class="p">;</span>
		<span class="n">cck_optional_Rx</span> <span class="o">=</span> <span class="n">cck_rx_ver2_sec_index</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">tmp_cck_max_pwdb</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">64</span><span class="p">)</span>
			<span class="n">update_cck_rx_path</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">tmp_min_rssi</span> <span class="o">&lt;</span> <span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">SS_TH_low</span> <span class="o">&amp;&amp;</span> <span class="n">disabled_rf_cnt</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">tmp_max_rssi</span> <span class="o">-</span> <span class="n">tmp_min_rssi</span><span class="p">)</span> <span class="o">&gt;=</span>
		     <span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">diff_TH</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">rf_enable_rssi_th</span><span class="p">[</span><span class="n">min_rssi_index</span><span class="p">]</span> <span class="o">=</span>
				 <span class="n">tmp_max_rssi</span><span class="o">+</span><span class="mi">5</span><span class="p">;</span>
			<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_TRxPathEnable</span><span class="p">,</span>
				 <span class="mh">0x1</span><span class="o">&lt;&lt;</span><span class="n">min_rssi_index</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">);</span>
			<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM1_TRxPathEnable</span><span class="p">,</span>
				 <span class="mh">0x1</span><span class="o">&lt;&lt;</span><span class="n">min_rssi_index</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">);</span>
			<span class="n">disabled_rf_cnt</span><span class="o">++</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">cck_method</span> <span class="o">==</span> <span class="n">CCK_Rx_Version_1</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">cck_default_Rx</span> <span class="o">=</span> <span class="n">max_rssi_index</span><span class="p">;</span>
			<span class="n">cck_optional_Rx</span> <span class="o">=</span> <span class="n">sec_rssi_index</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">tmp_max_rssi</span><span class="p">)</span>
				<span class="n">update_cck_rx_path</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">update_cck_rx_path</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">cck_Rx_path</span> <span class="o">=</span> <span class="p">(</span><span class="n">cck_default_Rx</span><span class="o">&lt;&lt;</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span>
						<span class="p">(</span><span class="n">cck_optional_Rx</span><span class="p">);</span>
		<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rCCK0_AFESetting</span><span class="p">,</span> <span class="mh">0x0f000000</span><span class="p">,</span>
				 <span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">cck_Rx_path</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">disabledRF</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">((</span><span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">disabledRF</span><span class="o">&gt;&gt;</span><span class="n">i</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x1</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">tmp_max_rssi</span> <span class="o">&gt;=</span>
				    <span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">rf_enable_rssi_th</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
					<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
						 <span class="n">rOFDM0_TRxPathEnable</span><span class="p">,</span> <span class="mh">0x1</span> <span class="o">&lt;&lt;</span> <span class="n">i</span><span class="p">,</span>
						 <span class="mh">0x1</span><span class="p">);</span>
					<span class="n">rtl8192_setBBreg</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
						 <span class="n">rOFDM1_TRxPathEnable</span><span class="p">,</span>
						 <span class="mh">0x1</span> <span class="o">&lt;&lt;</span> <span class="n">i</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
					<span class="n">DM_RxPathSelTable</span><span class="p">.</span><span class="n">rf_enable_rssi_th</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
						 <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
					<span class="n">disabled_rf_cnt</span><span class="o">--</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span>	<span class="kt">void</span>	<span class="nf">dm_check_rx_path_selection</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">queue_delayed_work_rsl</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">priv_wq</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rfpath_check_wq</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>


<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_init_fsync</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_time_interval</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_rate_bitmap</span> <span class="o">=</span> <span class="mh">0x0f000800</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_rssi_threshold</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bfsync_enable</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_multiple_timeinterval</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_firstdiff_ratethreshold</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_seconddiff_ratethreshold</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_state</span> <span class="o">=</span> <span class="n">Default_Fsync</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">framesyncMonitor</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

	<span class="n">init_timer</span><span class="p">(</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">);</span>
	<span class="n">setup_timer</span><span class="p">(</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">,</span> <span class="n">dm_fsync_timer_callback</span><span class="p">,</span>
		   <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span> <span class="n">dev</span><span class="p">);</span>
<span class="p">}</span>


<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_deInit_fsync</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">del_timer_sync</span><span class="p">(</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">dm_fsync_timer_callback</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">)</span><span class="n">data</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">((</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">)</span><span class="n">data</span><span class="p">);</span>
	<span class="n">u32</span> <span class="n">rate_index</span><span class="p">,</span> <span class="n">rate_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">rate_count_diff</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">bool</span>		<span class="n">bSwitchFromCountDiff</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">bool</span>		<span class="n">bDoubleTimeInterval</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">==</span> <span class="n">RTLLIB_LINKED</span> <span class="o">&amp;&amp;</span>
	    <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bfsync_enable</span> <span class="o">&amp;&amp;</span>
	    <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTAction</span> <span class="o">&amp;</span> <span class="n">HT_IOT_ACT_CDD_FSYNC</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">u32</span> <span class="n">rate_bitmap</span><span class="p">;</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">rate_index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">rate_index</span> <span class="o">&lt;=</span> <span class="mi">27</span><span class="p">;</span> <span class="n">rate_index</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">rate_bitmap</span>  <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">rate_index</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_rate_bitmap</span> <span class="o">&amp;</span>  <span class="n">rate_bitmap</span><span class="p">)</span>
				<span class="n">rate_count</span> <span class="o">+=</span>
				   <span class="n">priv</span><span class="o">-&gt;</span><span class="n">stats</span><span class="p">.</span><span class="n">received_rate_histogram</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
				   <span class="p">[</span><span class="n">rate_index</span><span class="p">];</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">rate_count</span> <span class="o">&lt;</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rate_record</span><span class="p">)</span>
			<span class="n">rate_count_diff</span> <span class="o">=</span> <span class="mh">0xffffffff</span> <span class="o">-</span> <span class="n">rate_count</span> <span class="o">+</span>
					  <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rate_record</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="n">rate_count_diff</span> <span class="o">=</span> <span class="n">rate_count</span> <span class="o">-</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rate_record</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">rate_count_diff</span> <span class="o">&lt;</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rateCountDiffRecord</span><span class="p">)</span> <span class="p">{</span>

			<span class="n">u32</span> <span class="n">DiffNum</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rateCountDiffRecord</span> <span class="o">-</span>
				      <span class="n">rate_count_diff</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">DiffNum</span> <span class="o">&gt;=</span>
			    <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_seconddiff_ratethreshold</span><span class="p">)</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">ContinueDiffCount</span><span class="o">++</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">ContinueDiffCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">ContinueDiffCount</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">bSwitchFromCountDiff</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">ContinueDiffCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">ContinueDiffCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">rate_count_diff</span> <span class="o">&lt;=</span>
		    <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_firstdiff_ratethreshold</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">bSwitchFromCountDiff</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">ContinueDiffCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rate_record</span> <span class="o">=</span> <span class="n">rate_count</span><span class="p">;</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rateCountDiffRecord</span> <span class="o">=</span> <span class="n">rate_count_diff</span><span class="p">;</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_HALDM</span><span class="p">,</span> <span class="s">&quot;rateRecord %d rateCount %d, rate&quot;</span>
			 <span class="s">&quot;Countdiff %d bSwitchFsync %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rate_record</span><span class="p">,</span>
			 <span class="n">rate_count</span><span class="p">,</span> <span class="n">rate_count_diff</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bswitch_fsync</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&gt;</span>
		    <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_rssi_threshold</span> <span class="o">&amp;&amp;</span>
		    <span class="n">bSwitchFromCountDiff</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">bDoubleTimeInterval</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bswitch_fsync</span> <span class="o">=</span> <span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bswitch_fsync</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bswitch_fsync</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xC36</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">);</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xC3e</span><span class="p">,</span> <span class="mh">0x90</span><span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xC36</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">);</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xC3e</span><span class="p">,</span> <span class="mh">0x96</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&lt;=</span>
			   <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_rssi_threshold</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bswitch_fsync</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bswitch_fsync</span>  <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xC36</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">);</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xC3e</span><span class="p">,</span> <span class="mh">0x96</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">bDoubleTimeInterval</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">timer_pending</span><span class="p">(</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">))</span>
				<span class="n">del_timer_sync</span><span class="p">(</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">);</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">.</span><span class="n">expires</span> <span class="o">=</span> <span class="n">jiffies</span> <span class="o">+</span>
				 <span class="n">MSECS</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_time_interval</span> <span class="o">*</span>
				 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_multiple_timeinterval</span><span class="p">);</span>
			<span class="n">add_timer</span><span class="p">(</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">timer_pending</span><span class="p">(</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">))</span>
				<span class="n">del_timer_sync</span><span class="p">(</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">);</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">.</span><span class="n">expires</span> <span class="o">=</span> <span class="n">jiffies</span> <span class="o">+</span>
				 <span class="n">MSECS</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_time_interval</span><span class="p">);</span>
			<span class="n">add_timer</span><span class="p">(</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bswitch_fsync</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bswitch_fsync</span>  <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xC36</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">);</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xC3e</span><span class="p">,</span> <span class="mh">0x96</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">ContinueDiffCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">write_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector2</span><span class="p">,</span> <span class="mh">0x465c52cd</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_HALDM</span><span class="p">,</span> <span class="s">&quot;ContinueDiffCount %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">ContinueDiffCount</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_HALDM</span><span class="p">,</span> <span class="s">&quot;rateRecord %d rateCount %d, rateCountdiff %d &quot;</span>
		 <span class="s">&quot;bSwitchFsync %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rate_record</span><span class="p">,</span> <span class="n">rate_count</span><span class="p">,</span>
		 <span class="n">rate_count_diff</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bswitch_fsync</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_StartHWFsync</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u8</span> <span class="n">rf_timing</span> <span class="o">=</span> <span class="mh">0x77</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_HALDM</span><span class="p">,</span> <span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">);</span>
	<span class="n">write_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector2</span><span class="p">,</span> <span class="mh">0x465c12cf</span><span class="p">);</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">SetHwRegHandler</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">HW_VAR_RF_TIMING</span><span class="p">,</span>
				      <span class="p">(</span><span class="n">u8</span> <span class="o">*</span><span class="p">)(</span><span class="o">&amp;</span><span class="n">rf_timing</span><span class="p">));</span>
	<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xc3b</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_EndHWFsync</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u8</span> <span class="n">rf_timing</span> <span class="o">=</span> <span class="mh">0xaa</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_HALDM</span><span class="p">,</span> <span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">);</span>
	<span class="n">write_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector2</span><span class="p">,</span> <span class="mh">0x465c52cd</span><span class="p">);</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">SetHwRegHandler</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">HW_VAR_RF_TIMING</span><span class="p">,</span> <span class="p">(</span><span class="n">u8</span> <span class="o">*</span><span class="p">)</span>
				     <span class="p">(</span><span class="o">&amp;</span><span class="n">rf_timing</span><span class="p">));</span>
	<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xc3b</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_EndSWFsync</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_HALDM</span><span class="p">,</span> <span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">);</span>
	<span class="n">del_timer_sync</span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">));</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bswitch_fsync</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bswitch_fsync</span>  <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

		<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xC36</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">);</span>

		<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0xC3e</span><span class="p">,</span> <span class="mh">0x96</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">ContinueDiffCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">write_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector2</span><span class="p">,</span> <span class="mh">0x465c52cd</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_StartSWFsync</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">u32</span>			<span class="n">rateIndex</span><span class="p">;</span>
	<span class="n">u32</span>			<span class="n">rateBitmap</span><span class="p">;</span>

	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_HALDM</span><span class="p">,</span> <span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">);</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rate_record</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">ContinueDiffCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rateCountDiffRecord</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bswitch_fsync</span>  <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">mode</span> <span class="o">==</span> <span class="n">WIRELESS_MODE_N_24G</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_firstdiff_ratethreshold</span> <span class="o">=</span> <span class="mi">600</span><span class="p">;</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_seconddiff_ratethreshold</span> <span class="o">=</span> <span class="mh">0xffff</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_firstdiff_ratethreshold</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_seconddiff_ratethreshold</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">rateIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">rateIndex</span> <span class="o">&lt;=</span> <span class="mi">27</span><span class="p">;</span> <span class="n">rateIndex</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">rateBitmap</span>  <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">rateIndex</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_rate_bitmap</span> <span class="o">&amp;</span> <span class="n">rateBitmap</span><span class="p">)</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rate_record</span> <span class="o">+=</span>
				 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">stats</span><span class="p">.</span><span class="n">received_rate_histogram</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
				<span class="p">[</span><span class="n">rateIndex</span><span class="p">];</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">timer_pending</span><span class="p">(</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">))</span>
		<span class="n">del_timer_sync</span><span class="p">(</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">);</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">.</span><span class="n">expires</span> <span class="o">=</span> <span class="n">jiffies</span> <span class="o">+</span>
				    <span class="n">MSECS</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_time_interval</span><span class="p">);</span>
	<span class="n">add_timer</span><span class="p">(</span><span class="o">&amp;</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">fsync_timer</span><span class="p">);</span>

	<span class="n">write_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector2</span><span class="p">,</span> <span class="mh">0x465c12cd</span><span class="p">);</span>

<span class="p">}</span>

<span class="kt">void</span> <span class="nf">dm_check_fsync</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#define	RegC38_Default			0</span>
<span class="cp">#define	RegC38_NonFsync_Other_AP	1</span>
<span class="cp">#define	RegC38_Fsync_AP_BCM		2</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">static</span> <span class="n">u8</span> <span class="n">reg_c38_State</span> <span class="o">=</span> <span class="n">RegC38_Default</span><span class="p">;</span>
	<span class="k">static</span> <span class="n">u32</span> <span class="n">reset_cnt</span><span class="p">;</span>

	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_HALDM</span><span class="p">,</span> <span class="s">&quot;RSSI %d TimeInterval %d MultipleTimeInterval &quot;</span>
		 <span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_rssi_threshold</span><span class="p">,</span>
		 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_time_interval</span><span class="p">,</span>
		 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_multiple_timeinterval</span><span class="p">);</span>
	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_HALDM</span><span class="p">,</span> <span class="s">&quot;RateBitmap 0x%x FirstDiffRateThreshold %d Second&quot;</span>
		 <span class="s">&quot;DiffRateThreshold %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_rate_bitmap</span><span class="p">,</span>
		 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_firstdiff_ratethreshold</span><span class="p">,</span>
		 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_seconddiff_ratethreshold</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">==</span> <span class="n">RTLLIB_LINKED</span> <span class="o">&amp;&amp;</span>
	    <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTPeer</span> <span class="o">==</span> <span class="n">HT_IOT_PEER_BROADCOM</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bfsync_enable</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">switch</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_state</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">case</span> <span class="n">Default_Fsync</span>:
				<span class="n">dm_StartHWFsync</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_state</span> <span class="o">=</span> <span class="n">HW_Fsync</span><span class="p">;</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="k">case</span> <span class="n">SW_Fsync</span>:
				<span class="n">dm_EndSWFsync</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
				<span class="n">dm_StartHWFsync</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_state</span> <span class="o">=</span> <span class="n">HW_Fsync</span><span class="p">;</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="k">case</span> <span class="n">HW_Fsync</span>:
			<span class="nl">default:</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">switch</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_state</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">case</span> <span class="n">Default_Fsync</span>:
				<span class="n">dm_StartSWFsync</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_state</span> <span class="o">=</span> <span class="n">SW_Fsync</span><span class="p">;</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="k">case</span> <span class="n">HW_Fsync</span>:
				<span class="n">dm_EndHWFsync</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
				<span class="n">dm_StartSWFsync</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_state</span> <span class="o">=</span> <span class="n">SW_Fsync</span><span class="p">;</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="k">case</span> <span class="n">SW_Fsync</span>:
			<span class="nl">default:</span>
				<span class="k">break</span><span class="p">;</span>

			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">framesyncMonitor</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">reg_c38_State</span> <span class="o">!=</span> <span class="n">RegC38_Fsync_AP_BCM</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector3</span><span class="p">,</span> <span class="mh">0x95</span><span class="p">);</span>

				<span class="n">reg_c38_State</span> <span class="o">=</span> <span class="n">RegC38_Fsync_AP_BCM</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_state</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="n">HW_Fsync</span>:
			<span class="n">dm_EndHWFsync</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_state</span> <span class="o">=</span> <span class="n">Default_Fsync</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">SW_Fsync</span>:
			<span class="n">dm_EndSWFsync</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">fsync_state</span> <span class="o">=</span> <span class="n">Default_Fsync</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">Default_Fsync</span>:
		<span class="nl">default:</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">framesyncMonitor</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">==</span> <span class="n">RTLLIB_LINKED</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&lt;=</span>
				    <span class="n">RegC38_TH</span><span class="p">)</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">reg_c38_State</span> <span class="o">!=</span>
					    <span class="n">RegC38_NonFsync_Other_AP</span><span class="p">)</span> <span class="p">{</span>
							<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
							    <span class="n">rOFDM0_RxDetector3</span><span class="p">,</span>
							    <span class="mh">0x90</span><span class="p">);</span>

						<span class="n">reg_c38_State</span> <span class="o">=</span>
						     <span class="n">RegC38_NonFsync_Other_AP</span><span class="p">;</span>
					<span class="p">}</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&gt;=</span>
					   <span class="p">(</span><span class="n">RegC38_TH</span><span class="o">+</span><span class="mi">5</span><span class="p">))</span> <span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">reg_c38_State</span><span class="p">)</span> <span class="p">{</span>
						<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
							<span class="n">rOFDM0_RxDetector3</span><span class="p">,</span>
							<span class="n">priv</span><span class="o">-&gt;</span><span class="n">framesync</span><span class="p">);</span>
						<span class="n">reg_c38_State</span> <span class="o">=</span> <span class="n">RegC38_Default</span><span class="p">;</span>
					<span class="p">}</span>
				<span class="p">}</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">reg_c38_State</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector3</span><span class="p">,</span>
						       <span class="n">priv</span><span class="o">-&gt;</span><span class="n">framesync</span><span class="p">);</span>
					<span class="n">reg_c38_State</span> <span class="o">=</span> <span class="n">RegC38_Default</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">framesyncMonitor</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span> <span class="o">!=</span> <span class="n">reset_cnt</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector3</span><span class="p">,</span>
				       <span class="n">priv</span><span class="o">-&gt;</span><span class="n">framesync</span><span class="p">);</span>
			<span class="n">reg_c38_State</span> <span class="o">=</span> <span class="n">RegC38_Default</span><span class="p">;</span>
			<span class="n">reset_cnt</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">reset_count</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">reg_c38_State</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">rOFDM0_RxDetector3</span><span class="p">,</span>
				       <span class="n">priv</span><span class="o">-&gt;</span><span class="n">framesync</span><span class="p">);</span>
			<span class="n">reg_c38_State</span> <span class="o">=</span> <span class="n">RegC38_Default</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">dm_shadow_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u8</span>	<span class="n">page</span><span class="p">;</span>
	<span class="n">u16</span>	<span class="n">offset</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">page</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">page</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">page</span><span class="o">++</span><span class="p">)</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">offset</span> <span class="o">&lt;</span> <span class="mi">256</span><span class="p">;</span> <span class="n">offset</span><span class="o">++</span><span class="p">)</span>
			<span class="n">dm_shadow</span><span class="p">[</span><span class="n">page</span><span class="p">][</span><span class="n">offset</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
						  <span class="n">offset</span><span class="o">+</span><span class="n">page</span> <span class="o">*</span> <span class="mi">256</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">page</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span> <span class="n">page</span> <span class="o">&lt;</span> <span class="mi">11</span><span class="p">;</span> <span class="n">page</span><span class="o">++</span><span class="p">)</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">offset</span> <span class="o">&lt;</span> <span class="mi">256</span><span class="p">;</span> <span class="n">offset</span><span class="o">++</span><span class="p">)</span>
			<span class="n">dm_shadow</span><span class="p">[</span><span class="n">page</span><span class="p">][</span><span class="n">offset</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
						  <span class="n">offset</span><span class="o">+</span><span class="n">page</span> <span class="o">*</span> <span class="mi">256</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">page</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span> <span class="n">page</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">;</span> <span class="n">page</span><span class="o">++</span><span class="p">)</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">offset</span> <span class="o">&lt;</span> <span class="mi">256</span><span class="p">;</span> <span class="n">offset</span><span class="o">++</span><span class="p">)</span>
			<span class="n">dm_shadow</span><span class="p">[</span><span class="n">page</span><span class="p">][</span><span class="n">offset</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
						  <span class="n">offset</span><span class="o">+</span><span class="n">page</span><span class="o">*</span><span class="mi">256</span><span class="p">);</span>

<span class="p">}</span>

<span class="cm">/*---------------------------Define function prototype------------------------*/</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_init_dynamic_txpower</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bdynamic_txpower_enable</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bLastDTPFlag_High</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bLastDTPFlag_Low</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxHighPower</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxLowPower</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_dynamic_txpower</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">txhipower_threshhold</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">txlowpower_threshold</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">bdynamic_txpower_enable</span> <span class="o">!=</span> <span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxHighPower</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxLowPower</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">pHTInfo</span><span class="o">-&gt;</span><span class="n">IOTPeer</span> <span class="o">==</span> <span class="n">HT_IOT_PEER_ATHEROS</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	    <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">mode</span> <span class="o">==</span> <span class="n">IEEE_G</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">txhipower_threshhold</span> <span class="o">=</span> <span class="n">TX_POWER_ATHEROAP_THRESH_HIGH</span><span class="p">;</span>
		<span class="n">txlowpower_threshold</span> <span class="o">=</span> <span class="n">TX_POWER_ATHEROAP_THRESH_LOW</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">txhipower_threshhold</span> <span class="o">=</span> <span class="n">TX_POWER_NEAR_FIELD_THRESH_HIGH</span><span class="p">;</span>
		<span class="n">txlowpower_threshold</span> <span class="o">=</span> <span class="n">TX_POWER_NEAR_FIELD_THRESH_LOW</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_TXAGC</span><span class="p">,</span> <span class="s">&quot;priv-&gt;undecorated_smoothed_pwdb = %ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">==</span> <span class="n">RTLLIB_LINKED</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&gt;=</span> <span class="n">txhipower_threshhold</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxHighPower</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxLowPower</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&lt;</span>
			    <span class="n">txlowpower_threshold</span> <span class="o">&amp;&amp;</span>
			    <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxHighPower</span> <span class="o">==</span> <span class="nb">true</span><span class="p">)</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxHighPower</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&lt;</span> <span class="mi">35</span><span class="p">)</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxLowPower</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span> <span class="o">&gt;=</span> <span class="mi">40</span><span class="p">)</span>
				<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxLowPower</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxHighPower</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxLowPower</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxHighPower</span> <span class="o">!=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bLastDTPFlag_High</span><span class="p">)</span> <span class="o">||</span>
	    <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxLowPower</span> <span class="o">!=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bLastDTPFlag_Low</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">COMP_TXAGC</span><span class="p">,</span> <span class="s">&quot;SetTxPowerLevel8190()  channel = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">current_network</span><span class="p">.</span><span class="n">channel</span><span class="p">);</span>

		<span class="n">rtl8192_phy_setTxPower</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
				 <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="o">-&gt;</span><span class="n">current_network</span><span class="p">.</span><span class="n">channel</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bLastDTPFlag_High</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxHighPower</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">bLastDTPFlag_Low</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">bDynamicTxLowPower</span><span class="p">;</span>

<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_check_txrateandretrycount</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">rtllib_device</span> <span class="o">*</span><span class="n">ieee</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">rtllib</span><span class="p">;</span>

	<span class="n">ieee</span><span class="o">-&gt;</span><span class="n">softmac_stats</span><span class="p">.</span><span class="n">CurrentShowTxate</span> <span class="o">=</span> <span class="n">read_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
						 <span class="n">Current_Tx_Rate_Reg</span><span class="p">);</span>

	<span class="n">ieee</span><span class="o">-&gt;</span><span class="n">softmac_stats</span><span class="p">.</span><span class="n">last_packet_rate</span> <span class="o">=</span> <span class="n">read_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
						 <span class="n">Initial_Tx_Rate_Reg</span><span class="p">);</span>

	<span class="n">ieee</span><span class="o">-&gt;</span><span class="n">softmac_stats</span><span class="p">.</span><span class="n">txretrycount</span> <span class="o">=</span> <span class="n">read_nic_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span>
						 <span class="n">Tx_Retry_Count_Reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">dm_send_rssi_tofw</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">r8192_priv</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">rtllib_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">write_nic_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">DRIVER_RSSI</span><span class="p">,</span> <span class="p">(</span><span class="n">u8</span><span class="p">)</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">undecorated_smoothed_pwdb</span><span class="p">);</span>
<span class="p">}</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
