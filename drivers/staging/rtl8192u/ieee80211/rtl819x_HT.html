<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › rtl8192u › ieee80211 › rtl819x_HT.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>rtl819x_HT.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _RTL819XU_HTTYPE_H_</span>
<span class="cp">#define _RTL819XU_HTTYPE_H_</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><hr />

<p>The HT Capability element is present in beacons, association request,</p>

<h2>reassociation request and probe response frames</h2></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>Operation mode value</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define HT_OPMODE_NO_PROTECT		0</span>
<span class="cp">#define HT_OPMODE_OPTIONAL		1</span>
<span class="cp">#define HT_OPMODE_40MHZ_PROTECT	2</span>
<span class="cp">#define HT_OPMODE_MIXED			3</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>MIMO Power Save Setings</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define MIMO_PS_STATIC				0</span>
<span class="cp">#define MIMO_PS_DYNAMIC			1</span>
<span class="cp">#define MIMO_PS_NOLIMIT			3</span></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><p>There should be 128 bits to cover all of the MCS rates. However, since
8190 does not support too much rates, one integer is quite enough.</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define sHTCLng	4</span>


<span class="cp">#define HT_SUPPORTED_MCS_1SS_BITMAP					0x000000ff</span>
<span class="cp">#define HT_SUPPORTED_MCS_2SS_BITMAP					0x0000ff00</span>
<span class="cp">#define HT_SUPPORTED_MCS_1SS_2SS_BITMAP			HT_MCS_1SS_BITMAP|HT_MCS_1SS_2SS_BITMAP</span>


<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_HT_MCS_RATE</span><span class="p">{</span>
	<span class="n">HT_MCS0</span>   <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
	<span class="n">HT_MCS1</span>   <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
	<span class="n">HT_MCS2</span>   <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
	<span class="n">HT_MCS3</span>   <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
	<span class="n">HT_MCS4</span>   <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
	<span class="n">HT_MCS5</span>   <span class="o">=</span> <span class="mh">0x00000020</span><span class="p">,</span>
	<span class="n">HT_MCS6</span>   <span class="o">=</span> <span class="mh">0x00000040</span><span class="p">,</span>
	<span class="n">HT_MCS7</span>   <span class="o">=</span> <span class="mh">0x00000080</span><span class="p">,</span>
	<span class="n">HT_MCS8</span>   <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
	<span class="n">HT_MCS9</span>   <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
	<span class="n">HT_MCS10</span> <span class="o">=</span> <span class="mh">0x00000400</span><span class="p">,</span>
	<span class="n">HT_MCS11</span> <span class="o">=</span> <span class="mh">0x00000800</span><span class="p">,</span>
	<span class="n">HT_MCS12</span> <span class="o">=</span> <span class="mh">0x00001000</span><span class="p">,</span>
	<span class="n">HT_MCS13</span> <span class="o">=</span> <span class="mh">0x00002000</span><span class="p">,</span>
	<span class="n">HT_MCS14</span> <span class="o">=</span> <span class="mh">0x00004000</span><span class="p">,</span>
	<span class="n">HT_MCS15</span> <span class="o">=</span> <span class="mh">0x00008000</span><span class="p">,</span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><p>Do not define MCS32 here although 8190 support MCS32</p></td><td class="code"><div class="highlight"><pre><span class="p">}</span><span class="n">HT_MCS_RATE</span><span class="p">,</span><span class="o">*</span><span class="n">PHT_MCS_RATE</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-7"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-7">&#182;</a></div><p>Represent Channel Width in HT Capabilities</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">enum</span> <span class="n">_HT_CHANNEL_WIDTH</span><span class="p">{</span>
	<span class="n">HT_CHANNEL_WIDTH_20</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">HT_CHANNEL_WIDTH_20_40</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">}</span><span class="n">HT_CHANNEL_WIDTH</span><span class="p">,</span> <span class="o">*</span><span class="n">PHT_CHANNEL_WIDTH</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-8"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-8">&#182;</a></div><p>Represent Extension Channel Offset in HT Capabilities
This is available only in 40Mhz mode.</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">enum</span> <span class="n">_HT_EXTCHNL_OFFSET</span><span class="p">{</span>
	<span class="n">HT_EXTCHNL_OFFSET_NO_EXT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">HT_EXTCHNL_OFFSET_UPPER</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">HT_EXTCHNL_OFFSET_NO_DEF</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">HT_EXTCHNL_OFFSET_LOWER</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">}</span><span class="n">HT_EXTCHNL_OFFSET</span><span class="p">,</span> <span class="o">*</span><span class="n">PHT_EXTCHNL_OFFSET</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_CHNLOP</span><span class="p">{</span>
	<span class="n">CHNLOP_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// No Action now</span>
	<span class="n">CHNLOP_SCAN</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// Scan in progress</span>
	<span class="n">CHNLOP_SWBW</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">// Bandwidth switching in progress</span>
	<span class="n">CHNLOP_SWCHNL</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="c1">// Software Channel switching in progress</span>
<span class="p">}</span> <span class="n">CHNLOP</span><span class="p">,</span> <span class="o">*</span><span class="n">PCHNLOP</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-9"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-9">&#182;</a></div><p>Determine if the Channel Operation is in progress</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define CHHLOP_IN_PROGRESS(_pHTInfo)	\</span>
<span class="cp">		((_pHTInfo)-&gt;ChnlOp &gt; CHNLOP_NONE) ? TRUE : FALSE</span>

<span class="cm">/*</span>
<span class="cm">typedef	union _HT_CAPABILITY{</span>
<span class="cm">	u16	ShortData;</span>
<span class="cm">	u8	CharData[2];</span>
<span class="cm">	struct</span>
<span class="cm">	{</span>
<span class="cm">		u16	AdvCoding:1;</span>
<span class="cm">		u16	ChlWidth:1;</span>
<span class="cm">		u16	MimoPwrSave:2;</span>
<span class="cm">		u16	GreenField:1;</span>
<span class="cm">		u16	ShortGI20Mhz:1;</span>
<span class="cm">		u16	ShortGI40Mhz:1;</span>
<span class="cm">		u16	STBC:1;</span>
<span class="cm">		u16	BeamForm:1;</span>
<span class="cm">		u16	DelayBA:1;</span>
<span class="cm">		u16	MaxAMSDUSize:1;</span>
<span class="cm">		u16	DssCCk:1;</span>
<span class="cm">		u16	PSMP:1;</span>
<span class="cm">		u16	Rsvd:3;</span>
<span class="cm">	}Field;</span>
<span class="cm">}HT_CAPABILITY, *PHT_CAPABILITY;</span>

<span class="cm">typedef	union _HT_CAPABILITY_MACPARA{</span>
<span class="cm">	u8	ShortData;</span>
<span class="cm">	u8	CharData[1];</span>
<span class="cm">	struct</span>
<span class="cm">	{</span>
<span class="cm">		u8	MaxRxAMPDU:2;</span>
<span class="cm">		u8	MPDUDensity:2;</span>
<span class="cm">		u8	Rsvd:4;</span>
<span class="cm">	}Field;</span>
<span class="cm">}HT_CAPABILITY_MACPARA, *PHT_CAPABILITY_MACPARA;</span>
<span class="cm">*/</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_HT_ACTION</span><span class="p">{</span>
	<span class="n">ACT_RECOMMAND_WIDTH</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">ACT_MIMO_PWR_SAVE</span> 		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">ACT_PSMP</span>					<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">ACT_SET_PCO_PHASE</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">ACT_MIMO_CHL_MEASURE</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">ACT_RECIPROCITY_CORRECT</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">ACT_MIMO_CSI_MATRICS</span>		<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">ACT_MIMO_NOCOMPR_STEER</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">ACT_MIMO_COMPR_STEER</span>		<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">ACT_ANTENNA_SELECT</span>		<span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
<span class="p">}</span> <span class="n">HT_ACTION</span><span class="p">,</span> <span class="o">*</span><span class="n">PHT_ACTION</span><span class="p">;</span>


<span class="cm">/* 2007/06/07 MH Define sub-carrier mode for 40MHZ. */</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_HT_Bandwidth_40MHZ_Sub_Carrier</span><span class="p">{</span>
	<span class="n">SC_MODE_DUPLICATE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">SC_MODE_LOWER</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">SC_MODE_UPPER</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">SC_MODE_FULL40MHZ</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">}</span><span class="n">HT_BW40_SC_E</span><span class="p">;</span>

<span class="k">typedef</span>	<span class="k">struct</span> <span class="n">_HT_CAPABILITY_ELE</span><span class="p">{</span></pre></div></td></tr>


<tr id="section-10"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-10">&#182;</a></div><p>HT capability info</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>	<span class="n">AdvCoding</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">ChlWidth</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">MimoPwrSave</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">GreenField</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">ShortGI20Mhz</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">ShortGI40Mhz</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">TxSTBC</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">RxSTBC</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">DelayBA</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">MaxAMSDUSize</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">DssCCk</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">PSMP</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">Rsvd1</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">LSigTxopProtect</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-11"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-11">&#182;</a></div><p>MAC HT parameters info</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>	<span class="n">MaxRxAMPDUFactor</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">MPDUDensity</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">Rsvd2</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-12"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-12">&#182;</a></div><p>Supported MCS set</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>	<span class="n">MCS</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span></pre></div></td></tr>


<tr id="section-13"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-13">&#182;</a></div><p>Extended HT Capability Info</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u16</span>	<span class="n">ExtHTCapInfo</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-14"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-14">&#182;</a></div><p>TXBF Capabilities</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>	<span class="n">TxBFCap</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span></pre></div></td></tr>


<tr id="section-15"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-15">&#182;</a></div><p>Antenna Selection Capabilities</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>	<span class="n">ASCap</span><span class="p">;</span>

<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">))</span> <span class="n">HT_CAPABILITY_ELE</span><span class="p">,</span> <span class="o">*</span><span class="n">PHT_CAPABILITY_ELE</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-16"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-16">&#182;</a></div><hr />

<p>The HT Information element is present in beacons</p>

<h2>Only AP is required to include this element</h2></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">_HT_INFORMATION_ELE</span><span class="p">{</span>
	<span class="n">u8</span>	<span class="n">ControlChl</span><span class="p">;</span>

	<span class="n">u8</span>	<span class="n">ExtChlOffset</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">RecommemdedTxWidth</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">RIFS</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">PSMPAccessOnly</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">SrvIntGranularity</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>

	<span class="n">u8</span>	<span class="n">OptMode</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">NonGFDevPresent</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">Revd1</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">Revd2</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>

	<span class="n">u8</span>	<span class="n">Rsvd3</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">DualBeacon</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">DualCTSProtect</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>

	<span class="n">u8</span>	<span class="n">SecondaryBeacon</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">LSigTxopProtectFull</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">PcoActive</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">PcoPhase</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">Rsvd4</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>

	<span class="n">u8</span>	<span class="n">BasicMSC</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">))</span> <span class="n">HT_INFORMATION_ELE</span><span class="p">,</span> <span class="o">*</span><span class="n">PHT_INFORMATION_ELE</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-17"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-17">&#182;</a></div><p>MIMO Power Save control field.
This is appear in MIMO Power Save Action Frame</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MIMOPS_CTRL</span><span class="p">{</span>
	<span class="n">u8</span>	<span class="n">MimoPsEnable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">MimoPsMode</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">Reserved</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
<span class="p">}</span> <span class="n">MIMOPS_CTRL</span><span class="p">,</span> <span class="o">*</span><span class="n">PMIMOPS_CTRL</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_HT_SPEC_VER</span><span class="p">{</span>
	<span class="n">HT_SPEC_VER_IEEE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">HT_SPEC_VER_EWC</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">}</span><span class="n">HT_SPEC_VER</span><span class="p">,</span> <span class="o">*</span><span class="n">PHT_SPEC_VER</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_HT_AGGRE_MODE_E</span><span class="p">{</span>
	<span class="n">HT_AGG_AUTO</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">HT_AGG_FORCE_ENABLE</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">HT_AGG_FORCE_DISABLE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span><span class="n">HT_AGGRE_MODE_E</span><span class="p">,</span> <span class="o">*</span><span class="n">PHT_AGGRE_MODE_E</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-18"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-18">&#182;</a></div><hr />

<p>The Data structure is used to keep HT related variables when card is
 configured as non-AP STA mode.  <strong>Note</strong>  Current_xxx should be set</p>

<h2>to default value in HTInitializeHTInfo()</h2></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">_RT_HIGH_THROUGHPUT</span><span class="p">{</span>
	<span class="n">u8</span>				<span class="n">bEnableHT</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">bCurrentHTSupport</span><span class="p">;</span>

	<span class="n">u8</span>				<span class="n">bRegBW40MHz</span><span class="p">;</span>				<span class="c1">// Tx 40MHz channel capablity</span>
	<span class="n">u8</span>				<span class="n">bCurBW40MHz</span><span class="p">;</span>				<span class="c1">// Tx 40MHz channel capability</span>

	<span class="n">u8</span>				<span class="n">bRegShortGI40MHz</span><span class="p">;</span>			<span class="c1">// Tx Short GI for 40Mhz</span>
	<span class="n">u8</span>				<span class="n">bCurShortGI40MHz</span><span class="p">;</span>			<span class="c1">// Tx Short GI for 40MHz</span>

	<span class="n">u8</span>				<span class="n">bRegShortGI20MHz</span><span class="p">;</span>			<span class="c1">// Tx Short GI for 20MHz</span>
	<span class="n">u8</span>				<span class="n">bCurShortGI20MHz</span><span class="p">;</span>			<span class="c1">// Tx Short GI for 20MHz</span>

	<span class="n">u8</span>				<span class="n">bRegSuppCCK</span><span class="p">;</span>				<span class="c1">// Tx CCK rate capability</span>
	<span class="n">u8</span>				<span class="n">bCurSuppCCK</span><span class="p">;</span>				<span class="c1">// Tx CCK rate capability</span></pre></div></td></tr>


<tr id="section-19"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-19">&#182;</a></div><p>802.11n spec version for "peer"</p></td><td class="code"><div class="highlight"><pre>	<span class="n">HT_SPEC_VER</span>			<span class="n">ePeerHTSpecVer</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-20"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-20">&#182;</a></div><p>HT related information for "Self"</p></td><td class="code"><div class="highlight"><pre>	<span class="n">HT_CAPABILITY_ELE</span>	<span class="n">SelfHTCap</span><span class="p">;</span>		<span class="c1">// This is HT cap element sent to peer STA, which also indicate HT Rx capabilities.</span>
	<span class="n">HT_INFORMATION_ELE</span>	<span class="n">SelfHTInfo</span><span class="p">;</span>		<span class="c1">// This is HT info element sent to peer STA, which also indicate HT Rx capabilities.</span></pre></div></td></tr>


<tr id="section-21"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-21">&#182;</a></div><p>HT related information for "Peer"</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>				<span class="n">PeerHTCapBuf</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="n">u8</span>				<span class="n">PeerHTInfoBuf</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span></pre></div></td></tr>


<tr id="section-22"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-22">&#182;</a></div><p>A-MSDU related</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>				<span class="n">bAMSDU_Support</span><span class="p">;</span>			<span class="c1">// This indicates Tx A-MSDU capability</span>
	<span class="n">u16</span>				<span class="n">nAMSDU_MaxSize</span><span class="p">;</span>			<span class="c1">// This indicates Tx A-MSDU capability</span>
	<span class="n">u8</span>				<span class="n">bCurrent_AMSDU_Support</span><span class="p">;</span>	<span class="c1">// This indicates Tx A-MSDU capability</span>
	<span class="n">u16</span>				<span class="n">nCurrent_AMSDU_MaxSize</span><span class="p">;</span>	<span class="c1">// This indicates Tx A-MSDU capability</span></pre></div></td></tr>


<tr id="section-23"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-23">&#182;</a></div><p>AMPDU  related &lt;2006.08.10 Emily></p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>				<span class="n">bAMPDUEnable</span><span class="p">;</span>				<span class="c1">// This indicate Tx A-MPDU capability</span>
	<span class="n">u8</span>				<span class="n">bCurrentAMPDUEnable</span><span class="p">;</span>		<span class="c1">// This indicate Tx A-MPDU capability</span>
	<span class="n">u8</span>				<span class="n">AMPDU_Factor</span><span class="p">;</span>				<span class="c1">// This indicate Tx A-MPDU capability</span>
	<span class="n">u8</span>				<span class="n">CurrentAMPDUFactor</span><span class="p">;</span>		<span class="c1">// This indicate Tx A-MPDU capability</span>
	<span class="n">u8</span>				<span class="n">MPDU_Density</span><span class="p">;</span>				<span class="c1">// This indicate Tx A-MPDU capability</span>
	<span class="n">u8</span>				<span class="n">CurrentMPDUDensity</span><span class="p">;</span>			<span class="c1">// This indicate Tx A-MPDU capability</span></pre></div></td></tr>


<tr id="section-24"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-24">&#182;</a></div><p>Forced A-MPDU enable</p></td><td class="code"><div class="highlight"><pre>	<span class="n">HT_AGGRE_MODE_E</span>	<span class="n">ForcedAMPDUMode</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">ForcedAMPDUFactor</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">ForcedMPDUDensity</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-25"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-25">&#182;</a></div><p>Forced A-MSDU enable</p></td><td class="code"><div class="highlight"><pre>	<span class="n">HT_AGGRE_MODE_E</span>	<span class="n">ForcedAMSDUMode</span><span class="p">;</span>
	<span class="n">u16</span>				<span class="n">ForcedAMSDUMaxSize</span><span class="p">;</span>

	<span class="n">u8</span>				<span class="n">bForcedShortGI</span><span class="p">;</span>

	<span class="n">u8</span>				<span class="n">CurrentOpMode</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-26"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-26">&#182;</a></div><p>MIMO PS related</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>				<span class="n">SelfMimoPs</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">PeerMimoPs</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-27"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-27">&#182;</a></div><p>40MHz Channel Offset settings.</p></td><td class="code"><div class="highlight"><pre>	<span class="n">HT_EXTCHNL_OFFSET</span>	<span class="n">CurSTAExtChnlOffset</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">bCurTxBW40MHz</span><span class="p">;</span>	<span class="c1">// If we use 40 MHz to Tx</span>
	<span class="n">u8</span>				<span class="n">PeerBandwidth</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-28"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-28">&#182;</a></div><p>For Bandwidth Switching</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>				<span class="n">bSwBwInProgress</span><span class="p">;</span>
	<span class="n">CHNLOP</span>				<span class="n">ChnlOp</span><span class="p">;</span> <span class="c1">// software switching channel in progress. By Bruce, 2008-02-15.</span>
	<span class="n">u8</span>				<span class="n">SwBwStep</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-29"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-29">&#182;</a></div><p>struct timer<em>list        SwBwTimer;  //moved to ieee80211</em>device. as timer_list need include some header file here.</p></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-30"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-30">&#182;</a></div><p>For Realtek proprietary A-MPDU factor for aggregation</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>				<span class="n">bRegRT2RTAggregation</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">bCurrentRT2RTAggregation</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">bCurrentRT2RTLongSlotTime</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">szRT2RTAggBuffer</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span></pre></div></td></tr>


<tr id="section-31"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-31">&#182;</a></div><p>Rx Reorder control</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>				<span class="n">bRegRxReorderEnable</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">bCurRxReorderEnable</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">RxReorderWinSize</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">RxReorderPendingTime</span><span class="p">;</span>
	<span class="n">u16</span>				<span class="n">RxReorderDropCounter</span><span class="p">;</span>

<span class="cp">#ifdef USB_TX_DRIVER_AGGREGATION_ENABLE</span>
	<span class="n">u8</span>				<span class="n">UsbTxAggrNum</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef USB_RX_AGGREGATION_SUPPORT</span>
	<span class="n">u8</span>				<span class="n">UsbRxFwAggrEn</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">UsbRxFwAggrPageNum</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">UsbRxFwAggrPacketNum</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">UsbRxFwAggrTimeout</span><span class="p">;</span>
<span class="cp">#endif</span></pre></div></td></tr>


<tr id="section-32"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-32">&#182;</a></div><p>Add for Broadcom(Linksys) IOT. Joseph</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>				<span class="n">bIsPeerBcm</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-33"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-33">&#182;</a></div><p>For IOT issue.</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>				<span class="n">IOTPeer</span><span class="p">;</span>
	<span class="n">u32</span>				<span class="n">IOTAction</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">))</span> <span class="n">RT_HIGH_THROUGHPUT</span><span class="p">,</span> <span class="o">*</span><span class="n">PRT_HIGH_THROUGHPUT</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-34"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-34">&#182;</a></div><hr />

<p>The Data structure is used to keep HT related variable for "each Sta"</p>

<h2>when card is configured as "AP mode"</h2></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">_RT_HTINFO_STA_ENTRY</span><span class="p">{</span>
	<span class="n">u8</span>			<span class="n">bEnableHT</span><span class="p">;</span>

	<span class="n">u8</span>			<span class="n">bSupportCck</span><span class="p">;</span>

	<span class="n">u16</span>			<span class="n">AMSDU_MaxSize</span><span class="p">;</span>

	<span class="n">u8</span>			<span class="n">AMPDU_Factor</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">MPDU_Density</span><span class="p">;</span>

	<span class="n">u8</span>			<span class="n">HTHighestOperaRate</span><span class="p">;</span>

	<span class="n">u8</span>			<span class="n">bBw40MHz</span><span class="p">;</span>

	<span class="n">u8</span>			<span class="n">MimoPs</span><span class="p">;</span>

	<span class="n">u8</span>			<span class="n">McsRateSet</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>


<span class="p">}</span><span class="n">RT_HTINFO_STA_ENTRY</span><span class="p">,</span> <span class="o">*</span><span class="n">PRT_HTINFO_STA_ENTRY</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-35"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-35">&#182;</a></div><hr />

<p>The Data structure is used to keep HT related variable for "each AP"</p>

<h2>when card is configured as "STA mode"</h2></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">_BSS_HT</span><span class="p">{</span>

	<span class="n">u8</span>				<span class="n">bdSupportHT</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-36"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-36">&#182;</a></div><p>HT related elements</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>					<span class="n">bdHTCapBuf</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="n">u16</span>					<span class="n">bdHTCapLen</span><span class="p">;</span>
	<span class="n">u8</span>					<span class="n">bdHTInfoBuf</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="n">u16</span>					<span class="n">bdHTInfoLen</span><span class="p">;</span>

	<span class="n">HT_SPEC_VER</span>				<span class="n">bdHTSpecVer</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-37"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-37">&#182;</a></div><p>HT<em>CAPABILITY</em>ELE            bdHTCapEle;
HT<em>INFORMATION</em>ELE        bdHTInfoEle;</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>					<span class="n">bdRT2RTAggregation</span><span class="p">;</span>
	<span class="n">u8</span>					<span class="n">bdRT2RTLongSlotTime</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">))</span> <span class="n">BSS_HT</span><span class="p">,</span> <span class="o">*</span><span class="n">PBSS_HT</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MIMO_RSSI</span><span class="p">{</span>
	<span class="n">u32</span>	<span class="n">EnableAntenna</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">AntennaA</span><span class="p">;</span>
	<span class="n">u32</span> 	<span class="n">AntennaB</span><span class="p">;</span>
	<span class="n">u32</span> 	<span class="n">AntennaC</span><span class="p">;</span>
	<span class="n">u32</span> 	<span class="n">AntennaD</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">Average</span><span class="p">;</span>
<span class="p">}</span><span class="n">MIMO_RSSI</span><span class="p">,</span> <span class="o">*</span><span class="n">PMIMO_RSSI</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_MIMO_EVM</span><span class="p">{</span>
	<span class="n">u32</span>	<span class="n">EVM1</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">EVM2</span><span class="p">;</span>
<span class="p">}</span><span class="n">MIMO_EVM</span><span class="p">,</span> <span class="o">*</span><span class="n">PMIMO_EVM</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_FALSE_ALARM_STATISTICS</span><span class="p">{</span>
	<span class="n">u32</span>	<span class="n">Cnt_Parity_Fail</span><span class="p">;</span>
	<span class="n">u32</span>    <span class="n">Cnt_Rate_Illegal</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">Cnt_Crc8_fail</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">Cnt_all</span><span class="p">;</span>
<span class="p">}</span><span class="n">FALSE_ALARM_STATISTICS</span><span class="p">,</span> <span class="o">*</span><span class="n">PFALSE_ALARM_STATISTICS</span><span class="p">;</span>


<span class="k">extern</span> <span class="n">u8</span> <span class="n">MCS_FILTER_ALL</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="k">extern</span> <span class="n">u8</span> <span class="n">MCS_FILTER_1SS</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

<span class="cm">/* 2007/07/11 MH Modify the macro. Becaus STA may link with a N-AP. If we set</span>
<span class="cm">   STA in A/B/G mode and AP is still in N mode. The macro will be wrong. We have</span>
<span class="cm">   to add a macro to judge wireless mode. */</span>
<span class="cp">#define PICK_RATE(_nLegacyRate, _nMcsRate)	\</span>
<span class="cp">		(_nMcsRate==0)?(_nLegacyRate&amp;0x7f):(_nMcsRate)</span>
<span class="cm">/* 2007/07/12 MH We only define legacy and HT wireless mode now. */</span>
<span class="cp">#define	LEGACY_WIRELESS_MODE	IEEE_MODE_MASK</span>

<span class="cp">#define CURRENT_RATE(WirelessMode, LegacyRate, HTRate)	\</span>
<span class="cp">					((WirelessMode &amp; (LEGACY_WIRELESS_MODE))!=0)?\</span>
<span class="cp">						(LegacyRate):\</span>
<span class="cp">						(PICK_RATE(LegacyRate, HTRate))</span></pre></div></td></tr>


<tr id="section-38"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-38">&#182;</a></div><p>MCS Bw 40 {1~7, 12~15,32}</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define	RATE_ADPT_1SS_MASK 		0xFF</span>
<span class="cp">#define	RATE_ADPT_2SS_MASK		0xF0 </span><span class="c1">//Skip MCS8~11 because mcs7 &gt; mcs6, 9, 10, 11. 2007.01.16 by Emily</span>
<span class="cp">#define	RATE_ADPT_MCS32_MASK		0x01</span>

<span class="cp">#define 	IS_11N_MCS_RATE(rate)		(rate&amp;0x80)</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_HT_AGGRE_SIZE</span><span class="p">{</span>
	<span class="n">HT_AGG_SIZE_8K</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">HT_AGG_SIZE_16K</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">HT_AGG_SIZE_32K</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">HT_AGG_SIZE_64K</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">}</span><span class="n">HT_AGGRE_SIZE_E</span><span class="p">,</span> <span class="o">*</span><span class="n">PHT_AGGRE_SIZE_E</span><span class="p">;</span>

<span class="cm">/* Indicate different AP vendor for IOT issue */</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_HT_IOT_PEER</span>
<span class="p">{</span>
	<span class="n">HT_IOT_PEER_UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">HT_IOT_PEER_REALTEK</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">HT_IOT_PEER_BROADCOM</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">HT_IOT_PEER_RALINK</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">HT_IOT_PEER_ATHEROS</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">HT_IOT_PEER_CISCO</span><span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">HT_IOT_PEER_MAX</span> <span class="o">=</span> <span class="mi">6</span>
<span class="p">}</span><span class="n">HT_IOT_PEER_E</span><span class="p">,</span> <span class="o">*</span><span class="n">PHTIOT_PEER_E</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-39"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-39">&#182;</a></div><p>IOT Action for different AP</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">enum</span> <span class="n">_HT_IOT_ACTION</span><span class="p">{</span>
	<span class="n">HT_IOT_ACT_TX_USE_AMSDU_4K</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
	<span class="n">HT_IOT_ACT_TX_USE_AMSDU_8K</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
	<span class="n">HT_IOT_ACT_DISABLE_MCS14</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
	<span class="n">HT_IOT_ACT_DISABLE_MCS15</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
	<span class="n">HT_IOT_ACT_DISABLE_ALL_2SS</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
	<span class="n">HT_IOT_ACT_DISABLE_EDCA_TURBO</span> <span class="o">=</span> <span class="mh">0x00000020</span><span class="p">,</span>
	<span class="n">HT_IOT_ACT_MGNT_USE_CCK_6M</span> <span class="o">=</span> <span class="mh">0x00000040</span><span class="p">,</span>
	<span class="n">HT_IOT_ACT_CDD_FSYNC</span> <span class="o">=</span> <span class="mh">0x00000080</span><span class="p">,</span>
	<span class="n">HT_IOT_ACT_PURE_N_MODE</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
	<span class="n">HT_IOT_ACT_FORCED_CTS2SELF</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
<span class="p">}</span><span class="n">HT_IOT_ACTION_E</span><span class="p">,</span> <span class="o">*</span><span class="n">PHT_IOT_ACTION_E</span><span class="p">;</span>

<span class="cp">#endif </span><span class="c1">//_RTL819XU_HTTYPE_H_</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
