<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › rtl8192u › r8192U.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>r8192U.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">   This is part of rtl8187 OpenSource driver.</span>
<span class="cm">   Copyright (C) Andrea Merello 2004-2005  &lt;andreamrl@tiscali.it&gt;</span>
<span class="cm">   Released under the terms of GPL (General Public Licence)</span>

<span class="cm">   Parts of this driver are based on the GPL part of the</span>
<span class="cm">   official realtek driver</span>

<span class="cm">   Parts of this driver are based on the rtl8192 driver skeleton</span>
<span class="cm">   from Patric Schenke &amp; Andres Salomon</span>

<span class="cm">   Parts of this driver are based on the Intel Pro Wireless 2100 GPL driver</span>

<span class="cm">   We want to thank the Authors of those projects and the Ndiswrapper</span>
<span class="cm">   project Authors.</span>
<span class="cm">*/</span>

<span class="cp">#ifndef R819xU_H</span>
<span class="cp">#define R819xU_H</span>

<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/kernel.h&gt;</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><h1>include <linux/config.h></h1></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/ioport.h&gt;</span>
<span class="cp">#include &lt;linux/sched.h&gt;</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/slab.h&gt;</span>
<span class="cp">#include &lt;linux/netdevice.h&gt;</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><h1>include <linux/pci.h></h1></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;linux/usb.h&gt;</span>
<span class="cp">#include &lt;linux/etherdevice.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;linux/rtnetlink.h&gt;	</span><span class="c1">//for rtnl_lock()</span>
<span class="cp">#include &lt;linux/wireless.h&gt;</span>
<span class="cp">#include &lt;linux/timer.h&gt;</span>
<span class="cp">#include &lt;linux/proc_fs.h&gt;	</span><span class="c1">// Necessary because we use the proc fs</span>
<span class="cp">#include &lt;linux/if_arp.h&gt;</span>
<span class="cp">#include &lt;linux/random.h&gt;</span>
<span class="cp">#include &lt;asm/io.h&gt;</span>
<span class="cp">#include &quot;ieee80211/ieee80211.h&quot;</span>

<span class="cp">#define RTL8192U</span>
<span class="cp">#define RTL819xU_MODULE_NAME &quot;rtl819xU&quot;</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>added for HW security, john.0629</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define FALSE 0</span>
<span class="cp">#define TRUE 1</span>
<span class="cp">#define MAX_KEY_LEN     61</span>
<span class="cp">#define KEY_BUF_SIZE    5</span>

<span class="cp">#define BIT0            0x00000001</span>
<span class="cp">#define BIT1            0x00000002</span>
<span class="cp">#define BIT2            0x00000004</span>
<span class="cp">#define BIT3            0x00000008</span>
<span class="cp">#define BIT4            0x00000010</span>
<span class="cp">#define BIT5            0x00000020</span>
<span class="cp">#define BIT6            0x00000040</span>
<span class="cp">#define BIT7            0x00000080</span>
<span class="cp">#define BIT8            0x00000100</span>
<span class="cp">#define BIT9            0x00000200</span>
<span class="cp">#define BIT10           0x00000400</span>
<span class="cp">#define BIT11           0x00000800</span>
<span class="cp">#define BIT12           0x00001000</span>
<span class="cp">#define BIT13           0x00002000</span>
<span class="cp">#define BIT14           0x00004000</span>
<span class="cp">#define BIT15           0x00008000</span>
<span class="cp">#define BIT16           0x00010000</span>
<span class="cp">#define BIT17           0x00020000</span>
<span class="cp">#define BIT18           0x00040000</span>
<span class="cp">#define BIT19           0x00080000</span>
<span class="cp">#define BIT20           0x00100000</span>
<span class="cp">#define BIT21           0x00200000</span>
<span class="cp">#define BIT22           0x00400000</span>
<span class="cp">#define BIT23           0x00800000</span>
<span class="cp">#define BIT24           0x01000000</span>
<span class="cp">#define BIT25           0x02000000</span>
<span class="cp">#define BIT26           0x04000000</span>
<span class="cp">#define BIT27           0x08000000</span>
<span class="cp">#define BIT28           0x10000000</span>
<span class="cp">#define BIT29           0x20000000</span>
<span class="cp">#define BIT30           0x40000000</span>
<span class="cp">#define BIT31           0x80000000</span></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><p>Rx smooth factor</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define	Rx_Smooth_Factor		20</span>
<span class="cp">#define DMESG(x,a...)</span>
<span class="cp">#define DMESGW(x,a...)</span>
<span class="cp">#define DMESGE(x,a...)</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">rt_global_debug_component</span><span class="p">;</span>
<span class="cp">#define RT_TRACE(component, x, args...) \</span>
<span class="cp">do { if(rt_global_debug_component &amp; component) \</span>
<span class="cp">	printk(KERN_DEBUG RTL819xU_MODULE_NAME &quot;:&quot; x &quot;\n&quot; , \</span>
<span class="cp">	       ##args);\</span>
<span class="cp">}while(0);</span>

<span class="cp">#define COMP_TRACE				BIT0		</span><span class="c1">// For function call tracing.</span>
<span class="cp">#define COMP_DBG				BIT1		</span><span class="c1">// Only for temporary debug message.</span>
<span class="cp">#define COMP_INIT				BIT2		</span><span class="c1">// during driver initialization / halt / reset.</span>


<span class="cp">#define COMP_RECV				BIT3		</span><span class="c1">// Receive data path.</span>
<span class="cp">#define COMP_SEND				BIT4		</span><span class="c1">// Send part path.</span>
<span class="cp">#define COMP_IO					BIT5		</span><span class="c1">// I/O Related. Added by Annie, 2006-03-02.</span>
<span class="cp">#define COMP_POWER				BIT6		</span><span class="c1">// 802.11 Power Save mode or System/Device Power state related.</span>
<span class="cp">#define COMP_EPROM				BIT7		</span><span class="c1">// 802.11 link related: join/start BSS, leave BSS.</span>
<span class="cp">#define COMP_SWBW				BIT8	</span><span class="c1">// For bandwidth switch.</span>
<span class="cp">#define COMP_POWER_TRACKING			BIT9	</span><span class="c1">//FOR 8190 TX POWER TRACKING</span>
<span class="cp">#define COMP_TURBO				BIT10	</span><span class="c1">// For Turbo Mode related. By Annie, 2005-10-21.</span>
<span class="cp">#define COMP_QOS				BIT11	</span><span class="c1">// For QoS.</span>
<span class="cp">#define COMP_RATE				BIT12	</span><span class="c1">// For Rate Adaptive mechanism, 2006.07.02, by rcnjko.</span>
<span class="cp">#define COMP_RM					BIT13	</span><span class="c1">// For Radio Measurement.</span>
<span class="cp">#define COMP_DIG				BIT14	</span><span class="c1">// For DIG, 2006.09.25, by rcnjko.</span>
<span class="cp">#define COMP_PHY	 			BIT15</span>
<span class="cp">#define COMP_CH					BIT16	</span><span class="c1">//channel setting debug</span>
<span class="cp">#define COMP_TXAGC				BIT17	</span><span class="c1">// For Tx power, 060928, by rcnjko.</span>
<span class="cp">#define COMP_HIPWR				BIT18	</span><span class="c1">// For High Power Mechanism, 060928, by rcnjko.</span>
<span class="cp">#define COMP_HALDM				BIT19	</span><span class="c1">// For HW Dynamic Mechanism, 061010, by rcnjko.</span>
<span class="cp">#define COMP_SEC			        BIT20	</span><span class="c1">// Event handling</span>
<span class="cp">#define COMP_LED				BIT21	</span><span class="c1">// For LED.</span>
<span class="cp">#define COMP_RF					BIT22	</span><span class="c1">// For RF.</span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><p>1!!!!!!!!!!!!!!!!!!!!!!!!!!!</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define COMP_RXDESC				BIT23	</span><span class="c1">// Show Rx desc information for SD3 debug. Added by Annie, 2006-07-15.</span></pre></div></td></tr>


<tr id="section-7"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-7">&#182;</a></div><p>1//1Attention Please!!!&lt;11n or 8190 specific code should be put below this line>
1!!!!!!!!!!!!!!!!!!!!!!!!!!!</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define COMP_FIRMWARE				BIT24	</span><span class="c1">//for firmware downloading</span>
<span class="cp">#define COMP_HT					BIT25	</span><span class="c1">// For 802.11n HT related information. by Emily 2006-8-11</span>
<span class="cp">#define COMP_AMSDU				BIT26	</span><span class="c1">// For A-MSDU Debugging</span>

<span class="cp">#define COMP_SCAN				BIT27</span></pre></div></td></tr>


<tr id="section-8"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-8">&#182;</a></div><h1>define COMP_RESET                BIT28</h1></td><td class="code"><div class="highlight"><pre><span class="cp">#define COMP_DOWN				BIT29  </span><span class="c1">//for rm driver module</span>
<span class="cp">#define COMP_RESET				BIT30  </span><span class="c1">//for silent reset</span>
<span class="cp">#define COMP_ERR				BIT31 </span><span class="c1">//for error out, always on</span>

<span class="cp">#define RTL819x_DEBUG</span>
<span class="cp">#ifdef RTL819x_DEBUG</span>
<span class="cp">#define assert(expr) \</span>
<span class="cp">        if (!(expr)) {                                  \</span>
<span class="cp">                printk( &quot;Assertion failed! %s,%s,%s,line=%d\n&quot;, \</span>
<span class="cp">                #expr,__FILE__,__FUNCTION__,__LINE__);          \</span>
<span class="cp">        }</span></pre></div></td></tr>


<tr id="section-9"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-9">&#182;</a></div><p>wb added to debug out data buf
if you want print DATA buffer related BA, please set ieee80211<em>debug</em>level to DATA|BA</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define RT_DEBUG_DATA(level, data, datalen)      \</span>
<span class="cp">        do{ if ((rt_global_debug_component &amp; (level)) == (level))   \</span>
<span class="cp">                {       \</span>
<span class="cp">                        int i;                                  \</span>
<span class="cp">                        u8* pdata = (u8*) data;                 \</span>
<span class="cp">                        printk(KERN_DEBUG RTL819xU_MODULE_NAME &quot;: %s()\n&quot;, __FUNCTION__);   \</span>
<span class="cp">                        for(i=0; i&lt;(int)(datalen); i++)                 \</span>
<span class="cp">                        {                                               \</span>
<span class="cp">                                printk(&quot;%2x &quot;, pdata[i]);               \</span>
<span class="cp">                                if ((i+1)%16 == 0) printk(&quot;\n&quot;);        \</span>
<span class="cp">                        }                               \</span>
<span class="cp">                        printk(&quot;\n&quot;);                   \</span>
<span class="cp">                }                                       \</span>
<span class="cp">        } while (0)</span>
<span class="cp">#else</span>
<span class="cp">#define assert(expr) do {} while (0)</span>
<span class="cp">#define RT_DEBUG_DATA(level, data, datalen) do {} while(0)</span>
<span class="cp">#endif </span><span class="cm">/* RTL8169_DEBUG */</span><span class="cp"></span></pre></div></td></tr>


<tr id="section-10"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-10">&#182;</a></div><p>Queue Select Value in TxDesc</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define QSLT_BK                                 0x1</span>
<span class="cp">#define QSLT_BE                                 0x0</span>
<span class="cp">#define QSLT_VI                                 0x4</span>
<span class="cp">#define QSLT_VO                                 0x6</span>
<span class="cp">#define QSLT_BEACON                             0x10</span>
<span class="cp">#define QSLT_HIGH                               0x11</span>
<span class="cp">#define QSLT_MGNT                               0x12</span>
<span class="cp">#define QSLT_CMD                                0x13</span>

<span class="cp">#define DESC90_RATE1M                           0x00</span>
<span class="cp">#define DESC90_RATE2M                           0x01</span>
<span class="cp">#define DESC90_RATE5_5M                         0x02</span>
<span class="cp">#define DESC90_RATE11M                          0x03</span>
<span class="cp">#define DESC90_RATE6M                           0x04</span>
<span class="cp">#define DESC90_RATE9M                           0x05</span>
<span class="cp">#define DESC90_RATE12M                          0x06</span>
<span class="cp">#define DESC90_RATE18M                          0x07</span>
<span class="cp">#define DESC90_RATE24M                          0x08</span>
<span class="cp">#define DESC90_RATE36M                          0x09</span>
<span class="cp">#define DESC90_RATE48M                          0x0a</span>
<span class="cp">#define DESC90_RATE54M                          0x0b</span>
<span class="cp">#define DESC90_RATEMCS0                         0x00</span>
<span class="cp">#define DESC90_RATEMCS1                         0x01</span>
<span class="cp">#define DESC90_RATEMCS2                         0x02</span>
<span class="cp">#define DESC90_RATEMCS3                         0x03</span>
<span class="cp">#define DESC90_RATEMCS4                         0x04</span>
<span class="cp">#define DESC90_RATEMCS5                         0x05</span>
<span class="cp">#define DESC90_RATEMCS6                         0x06</span>
<span class="cp">#define DESC90_RATEMCS7                         0x07</span>
<span class="cp">#define DESC90_RATEMCS8                         0x08</span>
<span class="cp">#define DESC90_RATEMCS9                         0x09</span>
<span class="cp">#define DESC90_RATEMCS10                        0x0a</span>
<span class="cp">#define DESC90_RATEMCS11                        0x0b</span>
<span class="cp">#define DESC90_RATEMCS12                        0x0c</span>
<span class="cp">#define DESC90_RATEMCS13                        0x0d</span>
<span class="cp">#define DESC90_RATEMCS14                        0x0e</span>
<span class="cp">#define DESC90_RATEMCS15                        0x0f</span>
<span class="cp">#define DESC90_RATEMCS32                        0x20</span>

<span class="cp">#define RTL819X_DEFAULT_RF_TYPE RF_1T2R</span>

<span class="cp">#define IEEE80211_WATCH_DOG_TIME    2000</span>
<span class="cp">#define		PHY_Beacon_RSSI_SLID_WIN_MAX		10</span></pre></div></td></tr>


<tr id="section-11"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-11">&#182;</a></div><p>for txpowertracking by amy</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define 	OFDM_Table_Length	19</span>
<span class="cp">#define	CCK_Table_length	12</span>

<span class="cm">/* for rtl819x */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_tx_desc_819x_usb</span> <span class="p">{</span></pre></div></td></tr>


<tr id="section-12"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-12">&#182;</a></div><p>DWORD 0</p></td><td class="code"><div class="highlight"><pre>        <span class="n">u16</span>	<span class="n">PktSize</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">Offset</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">Reserved0</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">CmdInit</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">LastSeg</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">FirstSeg</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">LINIP</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">OWN</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-13"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-13">&#182;</a></div><p>DWORD 1</p></td><td class="code"><div class="highlight"><pre>        <span class="n">u8</span>	<span class="n">TxFWInfoSize</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">RATid</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">DISFB</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">USERATE</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">MOREFRAG</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">NoEnc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">PIFS</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">QueueSelect</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">NoACM</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">Reserved1</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">SecCAMID</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">SecDescAssign</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">SecType</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-14"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-14">&#182;</a></div><p>DWORD 2</p></td><td class="code"><div class="highlight"><pre>        <span class="n">u16</span>	<span class="n">TxBufferSize</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-15"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-15">&#182;</a></div><p>u16 Reserved2;</p></td><td class="code"><div class="highlight"><pre>        <span class="n">u8</span>	<span class="n">ResvForPaddingLen</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">Reserved3</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>	<span class="n">Reserved4</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-16"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-16">&#182;</a></div><p>DWORD 3, 4, 5</p></td><td class="code"><div class="highlight"><pre>        <span class="n">u32</span>	<span class="n">Reserved5</span><span class="p">;</span>
        <span class="n">u32</span>	<span class="n">Reserved6</span><span class="p">;</span>
        <span class="n">u32</span>	<span class="n">Reserved7</span><span class="p">;</span>
<span class="p">}</span><span class="n">tx_desc_819x_usb</span><span class="p">,</span> <span class="o">*</span><span class="n">ptx_desc_819x_usb</span><span class="p">;</span>

<span class="cp">#ifdef USB_TX_DRIVER_AGGREGATION_ENABLE</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_tx_desc_819x_usb_aggr_subframe</span> <span class="p">{</span></pre></div></td></tr>


<tr id="section-17"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-17">&#182;</a></div><p>DWORD 0</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u16</span>	<span class="n">PktSize</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">Offset</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">TxFWInfoSize</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-18"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-18">&#182;</a></div><p>DWORD 1</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>	<span class="n">RATid</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">DISFB</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">USERATE</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">MOREFRAG</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">NoEnc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">PIFS</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">QueueSelect</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">NoACM</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">Reserved1</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">SecCAMID</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">SecDescAssign</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">SecType</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">PacketID</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">OWN</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span><span class="n">tx_desc_819x_usb_aggr_subframe</span><span class="p">,</span> <span class="o">*</span><span class="n">ptx_desc_819x_usb_aggr_subframe</span><span class="p">;</span>
<span class="cp">#endif</span>



<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_tx_desc_cmd_819x_usb</span> <span class="p">{</span></pre></div></td></tr>


<tr id="section-19"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-19">&#182;</a></div><p>DWORD 0</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u16</span>	<span class="n">Reserved0</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">Reserved1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">Reserved2</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">CmdInit</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">LastSeg</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">FirstSeg</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">LINIP</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">OWN</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-20"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-20">&#182;</a></div><p>DOWRD 1
u32    Reserved3;</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>	<span class="n">TxFWInfoSize</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">Reserved3</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">QueueSelect</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">Reserved4</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-21"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-21">&#182;</a></div><p>DOWRD 2</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u16</span> 	<span class="n">TxBufferSize</span><span class="p">;</span>
	<span class="n">u16</span>	<span class="n">Reserved5</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-22"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-22">&#182;</a></div><p>DWORD 3,4,5
u32    TxBufferAddr;
u32    NextDescAddress;</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u32</span>	<span class="n">Reserved6</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">Reserved7</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">Reserved8</span><span class="p">;</span>
<span class="p">}</span><span class="n">tx_desc_cmd_819x_usb</span><span class="p">,</span> <span class="o">*</span><span class="n">ptx_desc_cmd_819x_usb</span><span class="p">;</span>


<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_tx_fwinfo_819x_usb</span> <span class="p">{</span></pre></div></td></tr>


<tr id="section-23"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-23">&#182;</a></div><p>DOWRD 0</p></td><td class="code"><div class="highlight"><pre>        <span class="n">u8</span>		<span class="n">TxRate</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
        <span class="n">u8</span>		<span class="n">CtsEnable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>		<span class="n">RtsRate</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
        <span class="n">u8</span>		<span class="n">RtsEnable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>		<span class="n">TxHT</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>		<span class="n">Short</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>                <span class="c1">//Short PLCP for CCK, or short GI for 11n MCS</span>
        <span class="n">u8</span>		<span class="n">TxBandwidth</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>          <span class="c1">// This is used for HT MCS rate only.</span>
        <span class="n">u8</span>		<span class="n">TxSubCarrier</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>         <span class="c1">// This is used for legacy OFDM rate only.</span>
        <span class="n">u8</span>		<span class="n">STBC</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
        <span class="n">u8</span>		<span class="n">AllowAggregation</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u8</span>		<span class="n">RtsHT</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>                <span class="c1">//Interpret RtsRate field as high throughput data rate</span>
        <span class="n">u8</span>		<span class="n">RtsShort</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>             <span class="c1">//Short PLCP for CCK, or short GI for 11n MCS</span>
        <span class="n">u8</span>		<span class="n">RtsBandwidth</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>         <span class="c1">// This is used for HT MCS rate only.</span>
        <span class="n">u8</span>		<span class="n">RtsSubcarrier</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>        <span class="c1">// This is used for legacy OFDM rate only.</span>
        <span class="n">u8</span>		<span class="n">RtsSTBC</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
        <span class="n">u8</span>		<span class="n">EnableCPUDur</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>         <span class="c1">//Enable firmware to recalculate and assign packet duration</span></pre></div></td></tr>


<tr id="section-24"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-24">&#182;</a></div><p>DWORD 1</p></td><td class="code"><div class="highlight"><pre>        <span class="n">u32</span>		<span class="n">RxMF</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
        <span class="n">u32</span>		<span class="n">RxAMD</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
        <span class="n">u32</span>		<span class="n">TxPerPktInfoFeedback</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span><span class="c1">//1 indicate Tx info gathtered by firmware and returned by Rx Cmd</span>
        <span class="n">u32</span>		<span class="n">Reserved1</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
        <span class="n">u32</span>		<span class="n">TxAGCOffSet</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
        <span class="n">u32</span>		<span class="n">TxAGCSign</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
        <span class="n">u32</span>		<span class="n">Tx_INFO_RSVD</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="n">u32</span>		<span class="n">PacketID</span><span class="o">:</span><span class="mi">13</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-25"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-25">&#182;</a></div><p>u32                Reserved;</p></td><td class="code"><div class="highlight"><pre><span class="p">}</span><span class="n">tx_fwinfo_819x_usb</span><span class="p">,</span> <span class="o">*</span><span class="n">ptx_fwinfo_819x_usb</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">rtl8192_rx_info</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">urb</span> <span class="o">*</span><span class="n">urb</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">out_pipe</span><span class="p">;</span>
<span class="p">}</span><span class="n">rtl8192_rx_info</span> <span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">rx_desc_819x_usb</span><span class="p">{</span></pre></div></td></tr>


<tr id="section-26"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-26">&#182;</a></div><p>DOWRD 0</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u16</span>                 <span class="n">Length</span><span class="o">:</span><span class="mi">14</span><span class="p">;</span>
	<span class="n">u16</span>                 <span class="n">CRC32</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u16</span>                 <span class="n">ICV</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>                  <span class="n">RxDrvInfoSize</span><span class="p">;</span>
	<span class="n">u8</span>                  <span class="n">Shift</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span>                  <span class="n">PHYStatus</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>                  <span class="n">SWDec</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-27"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-27">&#182;</a></div><p>u8                LastSeg:1;
u8                FirstSeg:1;
u8                EOR:1;
u8                OWN:1;</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>                  <span class="n">Reserved1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-28"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-28">&#182;</a></div><p>DWORD 1</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u32</span>                 <span class="n">Reserved2</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-29"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-29">&#182;</a></div><p>DWORD 2
u32               Reserved3;</p></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-30"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-30">&#182;</a></div><p>DWORD 3
u32                BufferAddress;</p></td><td class="code"><div class="highlight"><pre><span class="p">}</span><span class="n">rx_desc_819x_usb</span><span class="p">,</span> <span class="o">*</span><span class="n">prx_desc_819x_usb</span><span class="p">;</span>

<span class="cp">#ifdef USB_RX_AGGREGATION_SUPPORT</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_rx_desc_819x_usb_aggr_subframe</span><span class="p">{</span></pre></div></td></tr>


<tr id="section-31"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-31">&#182;</a></div><p>DOWRD 0</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u16</span>			<span class="n">Length</span><span class="o">:</span><span class="mi">14</span><span class="p">;</span>
	<span class="n">u16</span>			<span class="n">CRC32</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u16</span>			<span class="n">ICV</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">Offset</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">RxDrvInfoSize</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-32"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-32">&#182;</a></div><p>DOWRD 1</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>			<span class="n">Shift</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">PHYStatus</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">SWDec</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">Reserved1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">Reserved2</span><span class="p">;</span>
	<span class="n">u16</span>			<span class="n">Reserved3</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-33"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-33">&#182;</a></div><p>DWORD 2
u4Byte        Reserved3;
DWORD 3
u4Byte               BufferAddress;</p></td><td class="code"><div class="highlight"><pre><span class="p">}</span><span class="n">rx_desc_819x_usb_aggr_subframe</span><span class="p">,</span> <span class="o">*</span><span class="n">prx_desc_819x_usb_aggr_subframe</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">rx_drvinfo_819x_usb</span><span class="p">{</span></pre></div></td></tr>


<tr id="section-34"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-34">&#182;</a></div><p>DWORD 0</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u16</span>                 <span class="n">Reserved1</span><span class="o">:</span><span class="mi">12</span><span class="p">;</span>
	<span class="n">u16</span>                 <span class="n">PartAggr</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u16</span>                 <span class="n">FirstAGGR</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u16</span>                 <span class="n">Reserved2</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>

	<span class="n">u8</span>                  <span class="n">RxRate</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
	<span class="n">u8</span>                  <span class="n">RxHT</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>

	<span class="n">u8</span>                  <span class="n">BW</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>                  <span class="n">SPLCP</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>                  <span class="n">Reserved3</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span>                  <span class="n">PAM</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>                  <span class="n">Mcast</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>                  <span class="n">Bcast</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>                  <span class="n">Reserved4</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-35"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-35">&#182;</a></div><p>DWORD 1</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u32</span>                  <span class="n">TSFL</span><span class="p">;</span>

<span class="p">}</span><span class="n">rx_drvinfo_819x_usb</span><span class="p">,</span> <span class="o">*</span><span class="n">prx_drvinfo_819x_usb</span><span class="p">;</span>


<span class="cp">#define MAX_DEV_ADDR_SIZE		8  </span><span class="cm">/* support till 64 bit bus width OS */</span><span class="cp"></span>
<span class="cp">#define MAX_FIRMWARE_INFORMATION_SIZE   32 </span><span class="cm">/*2006/04/30 by Emily forRTL8190*/</span><span class="cp"></span>
<span class="cp">#define MAX_802_11_HEADER_LENGTH        (40 + MAX_FIRMWARE_INFORMATION_SIZE)</span>
<span class="cp">#define ENCRYPTION_MAX_OVERHEAD		128</span>
<span class="cp">#define	USB_HWDESC_HEADER_LEN		sizeof(tx_desc_819x_usb)</span>
<span class="cp">#define TX_PACKET_SHIFT_BYTES 	  	(USB_HWDESC_HEADER_LEN + sizeof(tx_fwinfo_819x_usb))</span>
<span class="cp">#define MAX_FRAGMENT_COUNT		8</span>
<span class="cp">#ifdef RTL8192U</span>
<span class="cp">#ifdef USB_TX_DRIVER_AGGREGATION_ENABLE</span>
<span class="cp">#define MAX_TRANSMIT_BUFFER_SIZE			32000</span>
<span class="cp">#else</span>
<span class="cp">#define MAX_TRANSMIT_BUFFER_SIZE			8000</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="cp">#define MAX_TRANSMIT_BUFFER_SIZE  	(1600+(MAX_802_11_HEADER_LENGTH+ENCRYPTION_MAX_OVERHEAD)*MAX_FRAGMENT_COUNT)</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef USB_TX_DRIVER_AGGREGATION_ENABLE</span>
<span class="cp">#define TX_PACKET_DRVAGGR_SUBFRAME_SHIFT_BYTES (sizeof(tx_desc_819x_usb_aggr_subframe) + sizeof(tx_fwinfo_819x_usb))</span>
<span class="cp">#endif</span>
<span class="cp">#define scrclng					4		</span><span class="c1">// octets for crc32 (FCS, ICV)</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">rf_optype</span>
<span class="p">{</span>
	<span class="n">RF_OP_By_SW_3wire</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">RF_OP_By_FW</span><span class="p">,</span>
	<span class="n">RF_OP_MAX</span>
<span class="p">}</span><span class="n">rf_op_type</span><span class="p">;</span>
<span class="cm">/* 8190 Loopback Mode definition */</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_rtl819xUsb_loopback</span><span class="p">{</span>
	<span class="n">RTL819xU_NO_LOOPBACK</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">RTL819xU_MAC_LOOPBACK</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">RTL819xU_DMA_LOOPBACK</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">RTL819xU_CCK_LOOPBACK</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">}</span><span class="n">rtl819xUsb_loopback_e</span><span class="p">;</span>

<span class="cm">/* due to rtl8192 firmware */</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_desc_packet_type_e</span><span class="p">{</span>
	<span class="n">DESC_PACKET_TYPE_INIT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">DESC_PACKET_TYPE_NORMAL</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">}</span><span class="n">desc_packet_type_e</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_firmware_status</span><span class="p">{</span>
	<span class="n">FW_STATUS_0_INIT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">FW_STATUS_1_MOVE_BOOT_CODE</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">FW_STATUS_2_MOVE_MAIN_CODE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">FW_STATUS_3_TURNON_CPU</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">FW_STATUS_4_MOVE_DATA_CODE</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">FW_STATUS_5_READY</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">}</span><span class="n">firmware_status_e</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_rt_firmare_seg_container</span> <span class="p">{</span>
	<span class="n">u16</span>	<span class="n">seg_size</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="o">*</span><span class="n">seg_ptr</span><span class="p">;</span>
<span class="p">}</span><span class="n">fw_seg_container</span><span class="p">,</span> <span class="o">*</span><span class="n">pfw_seg_container</span><span class="p">;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_rt_firmware</span><span class="p">{</span>
	<span class="n">firmware_status_e</span> <span class="n">firmware_status</span><span class="p">;</span>
	<span class="n">u16</span>               <span class="n">cmdpacket_frag_thresold</span><span class="p">;</span>
<span class="cp">#define RTL8190_MAX_FIRMWARE_CODE_SIZE  64000   </span><span class="c1">//64k</span>
	<span class="n">u8</span>                <span class="n">firmware_buf</span><span class="p">[</span><span class="n">RTL8190_MAX_FIRMWARE_CODE_SIZE</span><span class="p">];</span>
	<span class="n">u16</span>               <span class="n">firmware_buf_size</span><span class="p">;</span>
<span class="p">}</span><span class="n">rt_firmware</span><span class="p">,</span> <span class="o">*</span><span class="n">prt_firmware</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-36"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-36">&#182;</a></div><p>+by amy 080507</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define MAX_RECEIVE_BUFFER_SIZE	9100	</span><span class="c1">// Add this to 9100 bytes to receive A-MSDU from RT-AP</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_rt_firmware_info_819xUsb</span><span class="p">{</span>
	<span class="n">u8</span>		<span class="n">sz_info</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">}</span><span class="n">rt_firmware_info_819xUsb</span><span class="p">,</span> <span class="o">*</span><span class="n">prt_firmware_info_819xUsb</span><span class="p">;</span>

<span class="cm">/* Firmware Queue Layout */</span>
<span class="cp">#define NUM_OF_FIRMWARE_QUEUE		10</span>
<span class="cp">#define NUM_OF_PAGES_IN_FW		0x100</span>

<span class="cp">#ifdef USE_ONE_PIPE</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_BE	0x000</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_BK	0x000</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_VI	0x0ff</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_VO	0x000</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_HCCA	0</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_CMD	0x0</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_MGNT	0x00</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_HIGH	0</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_BCN	0x0</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_PUB	0x00</span>
<span class="cp">#else</span>

<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_BE	0x020</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_BK	0x020</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_VI	0x040</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_VO	0x040</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_HCCA	0</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_CMD	0x4</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_MGNT	0x20</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_HIGH	0</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_BCN	0x4</span>
<span class="cp">#define NUM_OF_PAGE_IN_FW_QUEUE_PUB	0x18</span>

<span class="cp">#endif</span>

<span class="cp">#define APPLIED_RESERVED_QUEUE_IN_FW	0x80000000</span>
<span class="cp">#define RSVD_FW_QUEUE_PAGE_BK_SHIFT	0x00</span>
<span class="cp">#define RSVD_FW_QUEUE_PAGE_BE_SHIFT	0x08</span>
<span class="cp">#define RSVD_FW_QUEUE_PAGE_VI_SHIFT	0x10</span>
<span class="cp">#define RSVD_FW_QUEUE_PAGE_VO_SHIFT	0x18</span>
<span class="cp">#define RSVD_FW_QUEUE_PAGE_MGNT_SHIFT	0x10</span>
<span class="cp">#define RSVD_FW_QUEUE_PAGE_CMD_SHIFT	0x08</span>
<span class="cp">#define RSVD_FW_QUEUE_PAGE_BCN_SHIFT	0x00</span>
<span class="cp">#define RSVD_FW_QUEUE_PAGE_PUB_SHIFT	0x08</span></pre></div></td></tr>


<tr id="section-37"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-37">&#182;</a></div><h1>=================================================================</h1></td><td class="code"><div class="highlight"><pre><span class="cp">#define EPROM_93c46 0</span>
<span class="cp">#define EPROM_93c56 1</span>

<span class="cp">#define DEFAULT_FRAG_THRESHOLD 2342U</span>
<span class="cp">#define MIN_FRAG_THRESHOLD     256U</span>
<span class="cp">#define DEFAULT_BEACONINTERVAL 0x64U</span>
<span class="cp">#define DEFAULT_BEACON_ESSID &quot;Rtl819xU&quot;</span>

<span class="cp">#define DEFAULT_SSID &quot;&quot;</span>
<span class="cp">#define DEFAULT_RETRY_RTS 7</span>
<span class="cp">#define DEFAULT_RETRY_DATA 7</span>
<span class="cp">#define PRISM_HDR_SIZE 64</span>

<span class="cp">#define		PHY_RSSI_SLID_WIN_MAX				100</span>


<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_WIRELESS_MODE</span> <span class="p">{</span>
	<span class="n">WIRELESS_MODE_UNKNOWN</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">WIRELESS_MODE_A</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">WIRELESS_MODE_B</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">WIRELESS_MODE_G</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">WIRELESS_MODE_AUTO</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">WIRELESS_MODE_N_24G</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
	<span class="n">WIRELESS_MODE_N_5G</span> <span class="o">=</span> <span class="mh">0x20</span>
<span class="p">}</span> <span class="n">WIRELESS_MODE</span><span class="p">;</span>


<span class="cp">#define RTL_IOCTL_WPA_SUPPLICANT		SIOCIWFIRSTPRIV+30</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">buffer</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">buffer</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
	<span class="n">u32</span> <span class="o">*</span><span class="n">buf</span><span class="p">;</span>

<span class="p">}</span> <span class="n">buffer</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">rtl_reg_debug</span><span class="p">{</span>
        <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">cmd</span><span class="p">;</span>
        <span class="k">struct</span> <span class="p">{</span>
                <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">type</span><span class="p">;</span>
                <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">addr</span><span class="p">;</span>
                <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">page</span><span class="p">;</span>
                <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">length</span><span class="p">;</span>
        <span class="p">}</span> <span class="n">head</span><span class="p">;</span>
        <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
<span class="p">}</span><span class="n">rtl_reg_debug</span><span class="p">;</span>






<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_rt_9x_tx_rate_history</span> <span class="p">{</span>
	<span class="n">u32</span>             <span class="n">cck</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span>             <span class="n">ofdm</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span></pre></div></td></tr>


<tr id="section-38"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-38">&#182;</a></div><p>HT<em>MCS[0][]: BW=0 SG=0
HT</em>MCS[1][]: BW=1 SG=0
HT<em>MCS[2][]: BW=0 SG=1
HT</em>MCS[3][]: BW=1 SG=1</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u32</span>             <span class="n">ht_mcs</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">16</span><span class="p">];</span>
<span class="p">}</span><span class="n">rt_tx_rahis_t</span><span class="p">,</span> <span class="o">*</span><span class="n">prt_tx_rahis_t</span><span class="p">;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_RT_SMOOTH_DATA_4RF</span> <span class="p">{</span>
	<span class="kt">char</span>    <span class="n">elements</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">100</span><span class="p">];</span><span class="c1">//array to store values</span>
	<span class="n">u32</span>     <span class="n">index</span><span class="p">;</span>                  <span class="c1">//index to current array to store</span>
	<span class="n">u32</span>     <span class="n">TotalNum</span><span class="p">;</span>               <span class="c1">//num of valid elements</span>
	<span class="n">u32</span>     <span class="n">TotalVal</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>            <span class="c1">//sum of valid elements</span>
<span class="p">}</span><span class="n">RT_SMOOTH_DATA_4RF</span><span class="p">,</span> <span class="o">*</span><span class="n">PRT_SMOOTH_DATA_4RF</span><span class="p">;</span>

<span class="cp">#define MAX_8192U_RX_SIZE			8192    </span><span class="c1">// This maybe changed for D-cut larger aggregation size</span></pre></div></td></tr>


<tr id="section-39"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-39">&#182;</a></div><p>stats seems messed up, clean it ASAP</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">Stats</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txrdu</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-40"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-40">&#182;</a></div><p>unsigned long rxrdu;
unsigned long rxnolast;
unsigned long rxnodata;
unsigned long rxreset;
unsigned long rxnopointer;</p></td><td class="code"><div class="highlight"><pre>	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">rxok</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">rxframgment</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">rxurberr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">rxstaterr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">received_rate_histogram</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">32</span><span class="p">];</span>	<span class="c1">//0: Total, 1:OK, 2:CRC, 3:ICV, 2007 07 03 cosa</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">received_preamble_GI</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">32</span><span class="p">];</span>		<span class="c1">//0: Long preamble/GI, 1:Short preamble/GI</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">rx_AMPDUsize_histogram</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span> <span class="c1">// level: (&lt;4K), (4K~8K), (8K~16K), (16K~32K), (32K~64K)</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">rx_AMPDUnum_histogram</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span> <span class="c1">// level: (&lt;5), (5~10), (10~20), (20~40), (&gt;40)</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">numpacket_matchbssid</span><span class="p">;</span>	<span class="c1">// debug use only.</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">numpacket_toself</span><span class="p">;</span>		<span class="c1">// debug use only.</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">num_process_phyinfo</span><span class="p">;</span>		<span class="c1">// debug use only.</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">numqry_phystatus</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">numqry_phystatusCCK</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">numqry_phystatusHT</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">received_bwtype</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>              <span class="c1">//0: 20M, 1: funn40M, 2: upper20M, 3: lower20M, 4: duplicate</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txnperr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txnpdrop</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txresumed</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-41"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-41">&#182;</a></div><p>unsigned long rxerr;
unsigned long rxoverflow;
unsigned long rxint;</p></td><td class="code"><div class="highlight"><pre>	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txnpokint</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-42"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-42">&#182;</a></div><p>unsigned long txhpokint;
unsigned long txhperr;
unsigned long ints;
unsigned long shints;</p></td><td class="code"><div class="highlight"><pre>	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txoverflow</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-43"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-43">&#182;</a></div><p>unsigned long rxdmafail;
unsigned long txbeacon;
unsigned long txbeaconerr;</p></td><td class="code"><div class="highlight"><pre>	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txlpokint</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txlpdrop</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txlperr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txbeokint</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txbedrop</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txbeerr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txbkokint</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txbkdrop</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txbkerr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txviokint</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txvidrop</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txvierr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txvookint</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txvodrop</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txvoerr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txbeaconokint</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txbeacondrop</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txbeaconerr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txmanageokint</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txmanagedrop</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txmanageerr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txdatapkt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txfeedback</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txfeedbackok</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txoktotal</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txokbytestotal</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txokinperiod</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txmulticast</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txbytesmulticast</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txbroadcast</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txbytesbroadcast</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txunicast</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txbytesunicast</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">rxoktotal</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">rxbytesunicast</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txfeedbackfail</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txerrtotal</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txerrbytestotal</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txerrmulticast</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txerrbroadcast</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txerrunicast</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txretrycount</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">txfeedbackretry</span><span class="p">;</span>
	<span class="n">u8</span>	      <span class="n">last_packet_rate</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">slide_signal_strength</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">slide_evm</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">slide_rssi_total</span><span class="p">;</span>	<span class="c1">// For recording sliding window&#39;s RSSI value</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">slide_evm_total</span><span class="p">;</span>	<span class="c1">// For recording sliding window&#39;s EVM value</span>
	<span class="kt">long</span> <span class="n">signal_strength</span><span class="p">;</span> <span class="c1">// Transformed, in dbm. Beautified signal strength for UI, not correct.</span>
	<span class="kt">long</span> <span class="n">signal_quality</span><span class="p">;</span>
	<span class="kt">long</span> <span class="n">last_signal_strength_inpercent</span><span class="p">;</span>
	<span class="kt">long</span> <span class="n">recv_signal_power</span><span class="p">;</span>	<span class="c1">// Correct smoothed ss in Dbm, only used in driver to report real power now.</span>
	<span class="n">u8</span> <span class="n">rx_rssi_percentage</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">rx_evm_percentage</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">long</span> <span class="n">rxSNRdB</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">rt_tx_rahis_t</span> <span class="n">txrate</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">Slide_Beacon_pwdb</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>     <span class="c1">//cosa add for beacon rssi</span>
	<span class="n">u32</span> <span class="n">Slide_Beacon_Total</span><span class="p">;</span>         <span class="c1">//cosa add for beacon rssi</span>
	<span class="n">RT_SMOOTH_DATA_4RF</span>              <span class="n">cck_adc_pwdb</span><span class="p">;</span>

	<span class="n">u32</span>	<span class="n">CurrentShowTxate</span><span class="p">;</span>
<span class="p">}</span> <span class="n">Stats</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-44"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-44">&#182;</a></div><p>Bandwidth Offset</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define HAL_PRIME_CHNL_OFFSET_DONT_CARE		0</span>
<span class="cp">#define HAL_PRIME_CHNL_OFFSET_LOWER			1</span>
<span class="cp">#define HAL_PRIME_CHNL_OFFSET_UPPER			2</span></pre></div></td></tr>


<tr id="section-45"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-45">&#182;</a></div><p>+by amy 080507</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> 	<span class="n">ChnlAccessSetting</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">SIFS_Timer</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">DIFS_Timer</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">SlotTimeTimer</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">EIFS_Timer</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">CWminIndex</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">CWmaxIndex</span><span class="p">;</span>
<span class="p">}</span><span class="o">*</span><span class="n">PCHANNEL_ACCESS_SETTING</span><span class="p">,</span><span class="n">CHANNEL_ACCESS_SETTING</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_BB_REGISTER_DEFINITION</span><span class="p">{</span>
	<span class="n">u32</span> <span class="n">rfintfs</span><span class="p">;</span> 			<span class="c1">// set software control: //		0x870~0x877[8 bytes]</span>
	<span class="n">u32</span> <span class="n">rfintfi</span><span class="p">;</span> 			<span class="c1">// readback data: //		0x8e0~0x8e7[8 bytes]</span>
	<span class="n">u32</span> <span class="n">rfintfo</span><span class="p">;</span> 			<span class="c1">// output data: //		0x860~0x86f [16 bytes]</span>
	<span class="n">u32</span> <span class="n">rfintfe</span><span class="p">;</span> 			<span class="c1">// output enable: //		0x860~0x86f [16 bytes]</span>
	<span class="n">u32</span> <span class="n">rf3wireOffset</span><span class="p">;</span> 		<span class="c1">// LSSI data: //		0x840~0x84f [16 bytes]</span>
	<span class="n">u32</span> <span class="n">rfLSSI_Select</span><span class="p">;</span> 		<span class="c1">// BB Band Select: //		0x878~0x87f [8 bytes]</span>
	<span class="n">u32</span> <span class="n">rfTxGainStage</span><span class="p">;</span>		<span class="c1">// Tx gain stage: //		0x80c~0x80f [4 bytes]</span>
	<span class="n">u32</span> <span class="n">rfHSSIPara1</span><span class="p">;</span> 		<span class="c1">// wire parameter control1 : //		0x820~0x823,0x828~0x82b, 0x830~0x833, 0x838~0x83b [16 bytes]</span>
	<span class="n">u32</span> <span class="n">rfHSSIPara2</span><span class="p">;</span> 		<span class="c1">// wire parameter control2 : //		0x824~0x827,0x82c~0x82f, 0x834~0x837, 0x83c~0x83f [16 bytes]</span>
	<span class="n">u32</span> <span class="n">rfSwitchControl</span><span class="p">;</span> 	<span class="c1">//Tx Rx antenna control : //		0x858~0x85f [16 bytes]</span>
	<span class="n">u32</span> <span class="n">rfAGCControl1</span><span class="p">;</span> 	<span class="c1">//AGC parameter control1 : //		0xc50~0xc53,0xc58~0xc5b, 0xc60~0xc63, 0xc68~0xc6b [16 bytes]</span>
	<span class="n">u32</span> <span class="n">rfAGCControl2</span><span class="p">;</span> 	<span class="c1">//AGC parameter control2 : //		0xc54~0xc57,0xc5c~0xc5f, 0xc64~0xc67, 0xc6c~0xc6f [16 bytes]</span>
	<span class="n">u32</span> <span class="n">rfRxIQImbalance</span><span class="p">;</span> 	<span class="c1">//OFDM Rx IQ imbalance matrix : //		0xc14~0xc17,0xc1c~0xc1f, 0xc24~0xc27, 0xc2c~0xc2f [16 bytes]</span>
	<span class="n">u32</span> <span class="n">rfRxAFE</span><span class="p">;</span>  			<span class="c1">//Rx IQ DC ofset and Rx digital filter, Rx DC notch filter : //		0xc10~0xc13,0xc18~0xc1b, 0xc20~0xc23, 0xc28~0xc2b [16 bytes]</span>
	<span class="n">u32</span> <span class="n">rfTxIQImbalance</span><span class="p">;</span> 	<span class="c1">//OFDM Tx IQ imbalance matrix //		0xc80~0xc83,0xc88~0xc8b, 0xc90~0xc93, 0xc98~0xc9b [16 bytes]</span>
	<span class="n">u32</span> <span class="n">rfTxAFE</span><span class="p">;</span> 			<span class="c1">//Tx IQ DC Offset and Tx DFIR type //		0xc84~0xc87,0xc8c~0xc8f, 0xc94~0xc97, 0xc9c~0xc9f [16 bytes]</span>
	<span class="n">u32</span> <span class="n">rfLSSIReadBack</span><span class="p">;</span> 	<span class="c1">//LSSI RF readback data //		0x8a0~0x8af [16 bytes]</span>
<span class="p">}</span><span class="n">BB_REGISTER_DEFINITION_T</span><span class="p">,</span> <span class="o">*</span><span class="n">PBB_REGISTER_DEFINITION_T</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_RT_RF_TYPE_819xU</span><span class="p">{</span>
        <span class="n">RF_TYPE_MIN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">RF_8225</span><span class="p">,</span>
        <span class="n">RF_8256</span><span class="p">,</span>
        <span class="n">RF_8258</span><span class="p">,</span>
        <span class="n">RF_PSEUDO_11N</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<span class="p">}</span><span class="n">RT_RF_TYPE_819xU</span><span class="p">,</span> <span class="o">*</span><span class="n">PRT_RF_TYPE_819xU</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_rate_adaptive</span>
<span class="p">{</span>
	<span class="n">u8</span>				<span class="n">rate_adaptive_disabled</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">ratr_state</span><span class="p">;</span>
	<span class="n">u16</span>				<span class="n">reserve</span><span class="p">;</span>

	<span class="n">u32</span>				<span class="n">high_rssi_thresh_for_ra</span><span class="p">;</span>
	<span class="n">u32</span>				<span class="n">high2low_rssi_thresh_for_ra</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">low2high_rssi_thresh_for_ra40M</span><span class="p">;</span>
	<span class="n">u32</span>				<span class="n">low_rssi_thresh_for_ra40M</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">low2high_rssi_thresh_for_ra20M</span><span class="p">;</span>
	<span class="n">u32</span>				<span class="n">low_rssi_thresh_for_ra20M</span><span class="p">;</span>
	<span class="n">u32</span>				<span class="n">upper_rssi_threshold_ratr</span><span class="p">;</span>
	<span class="n">u32</span>				<span class="n">middle_rssi_threshold_ratr</span><span class="p">;</span>
	<span class="n">u32</span>				<span class="n">low_rssi_threshold_ratr</span><span class="p">;</span>
	<span class="n">u32</span>				<span class="n">low_rssi_threshold_ratr_40M</span><span class="p">;</span>
	<span class="n">u32</span>				<span class="n">low_rssi_threshold_ratr_20M</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">ping_rssi_enable</span><span class="p">;</span>	<span class="c1">//cosa add for test</span>
	<span class="n">u32</span>				<span class="n">ping_rssi_ratr</span><span class="p">;</span>	<span class="c1">//cosa add for test</span>
	<span class="n">u32</span>				<span class="n">ping_rssi_thresh_for_ra</span><span class="p">;</span><span class="c1">//cosa add for test</span>
	<span class="n">u32</span>				<span class="n">last_ratr</span><span class="p">;</span>

<span class="p">}</span> <span class="n">rate_adaptive</span><span class="p">,</span> <span class="o">*</span><span class="n">prate_adaptive</span><span class="p">;</span>

<span class="cp">#define TxBBGainTableLength 37</span>
<span class="cp">#define	CCKTxBBGainTableLength 23</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_txbbgain_struct</span>
<span class="p">{</span>
	<span class="kt">long</span>	<span class="n">txbb_iq_amplifygain</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">txbbgain_value</span><span class="p">;</span>
<span class="p">}</span> <span class="n">txbbgain_struct</span><span class="p">,</span> <span class="o">*</span><span class="n">ptxbbgain_struct</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_ccktxbbgain_struct</span>
<span class="p">{</span></pre></div></td></tr>


<tr id="section-46"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-46">&#182;</a></div><p>The Value is from a22 to a29 one Byte one time is much Safer</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>	<span class="n">ccktxbb_valuearray</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">ccktxbbgain_struct</span><span class="p">,</span><span class="o">*</span><span class="n">pccktxbbgain_struct</span><span class="p">;</span>


<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_init_gain</span>
<span class="p">{</span>
	<span class="n">u8</span>				<span class="n">xaagccore1</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">xbagccore1</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">xcagccore1</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">xdagccore1</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">cca</span><span class="p">;</span>

<span class="p">}</span> <span class="n">init_gain</span><span class="p">,</span> <span class="o">*</span><span class="n">pinit_gain</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-47"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-47">&#182;</a></div><p>by amy 0606</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">_phy_ofdm_rx_status_report_819xusb</span>
<span class="p">{</span>
	<span class="n">u8</span>	<span class="n">trsw_gain_X</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">pwdb_all</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">cfosho_X</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">cfotail_X</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">rxevm_X</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">rxsnr_X</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">pdsnr_X</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">csi_current_X</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">csi_target_X</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">sigevm</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">max_ex_pwr</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">sgi_en</span><span class="p">;</span>
	<span class="n">u8</span>  <span class="n">rxsc_sgien_exflg</span><span class="p">;</span>
<span class="p">}</span><span class="n">phy_sts_ofdm_819xusb_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_phy_cck_rx_status_report_819xusb</span>
<span class="p">{</span>
	<span class="cm">/* For CCK rate descriptor. This is a unsigned 8:1 variable. LSB bit presend</span>
<span class="cm">	   0.5. And MSB 7 bts presend a signed value. Range from -64~+63.5. */</span>
	<span class="n">u8</span>	<span class="n">adc_pwdb_X</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">sq_rpt</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">cck_agc_rpt</span><span class="p">;</span>
<span class="p">}</span><span class="n">phy_sts_cck_819xusb_t</span><span class="p">;</span>


<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_phy_ofdm_rx_status_rxsc_sgien_exintfflag</span><span class="p">{</span>
	<span class="n">u8</span>			<span class="n">reserved</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">rxsc</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">sgi_en</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>			<span class="n">ex_intf_flag</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span><span class="n">phy_ofdm_rx_status_rxsc_sgien_exintfflag</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_RT_CUSTOMER_ID</span>
<span class="p">{</span>
	<span class="n">RT_CID_DEFAULT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">RT_CID_8187_ALPHA0</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">RT_CID_8187_SERCOMM_PS</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">RT_CID_8187_HW_LED</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">RT_CID_8187_NETGEAR</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">RT_CID_WHQL</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">RT_CID_819x_CAMEO</span>  <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">RT_CID_819x_RUNTOP</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">RT_CID_819x_Senao</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">RT_CID_TOSHIBA</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>	<span class="c1">// Merge by Jacken, 2008/01/31.</span>
	<span class="n">RT_CID_819x_Netcore</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">RT_CID_Nettronix</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
	<span class="n">RT_CID_DLINK</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">RT_CID_PRONET</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
<span class="p">}</span><span class="n">RT_CUSTOMER_ID</span><span class="p">,</span> <span class="o">*</span><span class="n">PRT_CUSTOMER_ID</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-48"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-48">&#182;</a></div><p>================================================================================</p>

<h1>LED customization.</h1></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span>	<span class="k">enum</span> <span class="n">_LED_STRATEGY_8190</span><span class="p">{</span>
	<span class="n">SW_LED_MODE0</span><span class="p">,</span> <span class="c1">// SW control 1 LED via GPIO0. It is default option.</span>
	<span class="n">SW_LED_MODE1</span><span class="p">,</span> <span class="c1">// SW control for PCI Express</span>
	<span class="n">SW_LED_MODE2</span><span class="p">,</span> <span class="c1">// SW control for Cameo.</span>
	<span class="n">SW_LED_MODE3</span><span class="p">,</span> <span class="c1">// SW contorl for RunTop.</span>
	<span class="n">SW_LED_MODE4</span><span class="p">,</span> <span class="c1">// SW control for Netcore</span>
	<span class="n">HW_LED</span><span class="p">,</span> <span class="c1">// HW control 2 LEDs, LED0 and LED1 (there are 4 different control modes)</span>
<span class="p">}</span><span class="n">LED_STRATEGY_8190</span><span class="p">,</span> <span class="o">*</span><span class="n">PLED_STRATEGY_8190</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_RESET_TYPE</span> <span class="p">{</span>
	<span class="n">RESET_TYPE_NORESET</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">RESET_TYPE_NORMAL</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">RESET_TYPE_SILENT</span> <span class="o">=</span> <span class="mh">0x02</span>
<span class="p">}</span> <span class="n">RESET_TYPE</span><span class="p">;</span>

<span class="cm">/* The simple tx command OP code. */</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_tag_TxCmd_Config_Index</span><span class="p">{</span>
	<span class="n">TXCMD_TXRA_HISTORY_CTRL</span>				<span class="o">=</span> <span class="mh">0xFF900000</span><span class="p">,</span>
	<span class="n">TXCMD_RESET_TX_PKT_BUFF</span>				<span class="o">=</span> <span class="mh">0xFF900001</span><span class="p">,</span>
	<span class="n">TXCMD_RESET_RX_PKT_BUFF</span>				<span class="o">=</span> <span class="mh">0xFF900002</span><span class="p">,</span>
	<span class="n">TXCMD_SET_TX_DURATION</span>				<span class="o">=</span> <span class="mh">0xFF900003</span><span class="p">,</span>
	<span class="n">TXCMD_SET_RX_RSSI</span>						<span class="o">=</span> <span class="mh">0xFF900004</span><span class="p">,</span>
	<span class="n">TXCMD_SET_TX_PWR_TRACKING</span>			<span class="o">=</span> <span class="mh">0xFF900005</span><span class="p">,</span>
	<span class="n">TXCMD_XXXX_CTRL</span><span class="p">,</span>
<span class="p">}</span><span class="n">DCMD_TXCMD_OP</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">r8192_priv</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">usb_device</span> <span class="o">*</span><span class="n">udev</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-49"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-49">&#182;</a></div><p>added for maintain info from eeprom</p></td><td class="code"><div class="highlight"><pre>	<span class="kt">short</span> <span class="n">epromtype</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">eeprom_vid</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">eeprom_pid</span><span class="p">;</span>
	<span class="n">u8</span>  <span class="n">eeprom_CustomerID</span><span class="p">;</span>
	<span class="n">u8</span>  <span class="n">eeprom_ChannelPlan</span><span class="p">;</span>
	<span class="n">RT_CUSTOMER_ID</span> <span class="n">CustomerID</span><span class="p">;</span>
	<span class="n">LED_STRATEGY_8190</span>	<span class="n">LedStrategy</span><span class="p">;</span>
	<span class="n">u8</span>  <span class="n">txqueue_to_outpipemap</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">irq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ieee80211_device</span> <span class="o">*</span><span class="n">ieee80211</span><span class="p">;</span>

	<span class="kt">short</span> <span class="n">card_8192</span><span class="p">;</span> <span class="cm">/* O: rtl8192, 1:rtl8185 V B/C, 2:rtl8185 V D */</span>
	<span class="n">u8</span> <span class="n">card_8192_version</span><span class="p">;</span> <span class="cm">/* if TCR reports card V B/C this discriminates */</span></pre></div></td></tr>


<tr id="section-50"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-50">&#182;</a></div><p>short phy_ver; /* meaningful for rtl8225 1:A 2:B 3:C */</p></td><td class="code"><div class="highlight"><pre>	<span class="kt">short</span> <span class="n">enable_gpio0</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">card_type</span> <span class="p">{</span><span class="n">PCI</span><span class="p">,</span><span class="n">MINIPCI</span><span class="p">,</span><span class="n">CARDBUS</span><span class="p">,</span><span class="n">USB</span><span class="p">}</span><span class="n">card_type</span><span class="p">;</span>
	<span class="kt">short</span> <span class="n">hw_plcp_len</span><span class="p">;</span>
	<span class="kt">short</span> <span class="n">plcp_preamble_mode</span><span class="p">;</span>

	<span class="n">spinlock_t</span> <span class="n">irq_lock</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-51"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-51">&#182;</a></div><p>spinlock<em>t irq</em>th_lock;</p></td><td class="code"><div class="highlight"><pre>	<span class="n">spinlock_t</span> <span class="n">tx_lock</span><span class="p">;</span>
        <span class="k">struct</span> <span class="n">mutex</span> <span class="n">mutex</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-52"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-52">&#182;</a></div><p>spinlock<em>t rf</em>lock; //used to lock rf write operation added by wb</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u16</span> <span class="n">irq_mask</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-53"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-53">&#182;</a></div><p>short irq<em>enabled;
struct net</em>device *dev; //comment this out.</p></td><td class="code"><div class="highlight"><pre>	<span class="kt">short</span> <span class="n">chan</span><span class="p">;</span>
	<span class="kt">short</span> <span class="n">sens</span><span class="p">;</span>
	<span class="kt">short</span> <span class="n">max_sens</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-54"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-54">&#182;</a></div><p>u8 chtxpwr[15]; //channels from 1 to 14, 0 not used
u8 chtxpwr<em>ofdm[15]; //channels from 1 to 14, 0 not used
u8 cck</em>txpwr<em>base;
u8 ofdm</em>txpwr_base;
u8 challow[15]; //channels from 1 to 14, 0 not used</p></td><td class="code"><div class="highlight"><pre>	<span class="kt">short</span> <span class="n">up</span><span class="p">;</span>
	<span class="kt">short</span> <span class="n">crcmon</span><span class="p">;</span> <span class="c1">//if 1 allow bad crc frame reception in monitor mode</span></pre></div></td></tr>


<tr id="section-55"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-55">&#182;</a></div><p>short prism_hdr;</p></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-56"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-56">&#182;</a></div><p>struct timer<em>list scan</em>timer;</p></td><td class="code"><div class="highlight"><pre>	<span class="cm">/*short scanpending;</span>
<span class="cm">	short stopscan;*/</span></pre></div></td></tr>


<tr id="section-57"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-57">&#182;</a></div><p>spinlock<em>t scan</em>lock;
u8 active<em>probe;
u8 active</em>scan_num;</p></td><td class="code"><div class="highlight"><pre>	<span class="k">struct</span> <span class="n">semaphore</span> <span class="n">wx_sem</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">semaphore</span> <span class="n">rf_sem</span><span class="p">;</span> <span class="c1">//used to lock rf write operation added by wb, modified by david</span></pre></div></td></tr>


<tr id="section-58"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-58">&#182;</a></div><p>short hw_wep;</p></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-59"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-59">&#182;</a></div><p>short digphy;
short antb;
short diversity;
u8 cs<em>treshold;
short rcr</em>csense;</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span> <span class="n">rf_type</span><span class="p">;</span> <span class="c1">//0 means 1T2R, 1 means 2T4R</span>
	<span class="n">RT_RF_TYPE_819xU</span> <span class="n">rf_chip</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-60"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-60">&#182;</a></div><p>u32 key0[4];</p></td><td class="code"><div class="highlight"><pre>	<span class="kt">short</span> <span class="p">(</span><span class="o">*</span><span class="n">rf_set_sens</span><span class="p">)(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span><span class="kt">short</span> <span class="n">sens</span><span class="p">);</span>
	<span class="n">u8</span> <span class="p">(</span><span class="o">*</span><span class="n">rf_set_chan</span><span class="p">)(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span><span class="n">u8</span> <span class="n">ch</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">rf_close</span><span class="p">)(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">rf_init</span><span class="p">)(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span></pre></div></td></tr>


<tr id="section-61"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-61">&#182;</a></div><p>short rate;</p></td><td class="code"><div class="highlight"><pre>	<span class="kt">short</span> <span class="n">promisc</span><span class="p">;</span>
	<span class="cm">/*stats*/</span>
	<span class="k">struct</span> <span class="n">Stats</span> <span class="n">stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iw_statistics</span> <span class="n">wstats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">proc_dir_entry</span> <span class="o">*</span><span class="n">dir_dev</span><span class="p">;</span>

	<span class="cm">/*RX stuff*/</span></pre></div></td></tr>


<tr id="section-62"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-62">&#182;</a></div><p>u32 *rxring;
u32 *rxringtail;
dma<em>addr</em>t rxringdma;</p></td><td class="code"><div class="highlight"><pre>	<span class="k">struct</span> <span class="n">urb</span> <span class="o">**</span><span class="n">rx_urb</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">urb</span> <span class="o">**</span><span class="n">rx_cmd_urb</span><span class="p">;</span>
<span class="cp">#ifdef THOMAS_BEACON</span>
	<span class="n">u32</span> <span class="o">*</span><span class="n">oldaddr</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef THOMAS_TASKLET</span>
	<span class="n">atomic_t</span> <span class="n">irt_counter</span><span class="p">;</span><span class="c1">//count for irq_rx_tasklet</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef JACKSON_NEW_RX</span>
        <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">**</span><span class="n">pp_rxskb</span><span class="p">;</span>
        <span class="kt">int</span>     <span class="n">rx_inx</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cm">/* modified by davad for Rx process */</span>
       <span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="n">rx_queue</span><span class="p">;</span>
       <span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="n">skb_queue</span><span class="p">;</span>
       <span class="k">struct</span> <span class="n">work_struct</span> <span class="n">qos_activate</span><span class="p">;</span>
	<span class="kt">short</span>  <span class="n">tx_urb_index</span><span class="p">;</span>
	<span class="n">atomic_t</span> <span class="n">tx_pending</span><span class="p">[</span><span class="mh">0x10</span><span class="p">];</span><span class="c1">//UART_PRIORITY+1</span>


	<span class="k">struct</span> <span class="n">tasklet_struct</span> <span class="n">irq_rx_tasklet</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">urb</span> <span class="o">*</span><span class="n">rxurb_task</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-63"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-63">&#182;</a></div><p>2 Tx Related variables</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u16</span>	<span class="n">ShortRetryLimit</span><span class="p">;</span>
	<span class="n">u16</span>	<span class="n">LongRetryLimit</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">TransmitConfig</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">RegCWinMin</span><span class="p">;</span>		<span class="c1">// For turbo mode CW adaptive. Added by Annie, 2005-10-27.</span>

	<span class="n">u32</span>     <span class="n">LastRxDescTSFHigh</span><span class="p">;</span>
	<span class="n">u32</span>     <span class="n">LastRxDescTSFLow</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-64"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-64">&#182;</a></div><p>2 Rx Related variables</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u16</span>	<span class="n">EarlyRxThreshold</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ReceiveConfig</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">AcmControl</span><span class="p">;</span>

	<span class="n">u8</span>	<span class="n">RFProgType</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">retry_data</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">retry_rts</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rts</span><span class="p">;</span>

	<span class="k">struct</span> 	<span class="n">ChnlAccessSetting</span>  <span class="n">ChannelAccessSetting</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">reset_wq</span><span class="p">;</span>

<span class="cm">/**********************************************************/</span></pre></div></td></tr>


<tr id="section-65"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-65">&#182;</a></div><p>for rtl819xUsb</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u16</span>     <span class="n">basic_rate</span><span class="p">;</span>
	<span class="n">u8</span>      <span class="n">short_preamble</span><span class="p">;</span>
	<span class="n">u8</span>      <span class="n">slot_time</span><span class="p">;</span>
	<span class="n">bool</span> 	<span class="n">bDcut</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">bCurrentRxAggrEnable</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">Rf_Mode</span><span class="p">;</span> <span class="c1">//add for Firmware RF -R/W switch</span>
	<span class="n">prt_firmware</span>		<span class="n">pFirmware</span><span class="p">;</span>
	<span class="n">rtl819xUsb_loopback_e</span>	<span class="n">LoopbackMode</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">EEPROMTxPowerDiff</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">EEPROMThermalMeter</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">EEPROMPwDiff</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">EEPROMCrystalCap</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">EEPROM_Def_Ver</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">EEPROMTxPowerLevelCCK</span><span class="p">;</span><span class="c1">// CCK channel 1~14</span>
	<span class="n">u8</span> <span class="n">EEPROMTxPowerLevelCCK_V1</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">EEPROMTxPowerLevelOFDM24G</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span> <span class="c1">// OFDM 2.4G channel 1~14</span>
	<span class="n">u8</span> <span class="n">EEPROMTxPowerLevelOFDM5G</span><span class="p">[</span><span class="mi">24</span><span class="p">];</span>	<span class="c1">// OFDM 5G</span>

<span class="cm">/*PHY related*/</span>
	<span class="n">BB_REGISTER_DEFINITION_T</span>	<span class="n">PHYRegDef</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="c1">//Radio A/B/C/D</span></pre></div></td></tr>


<tr id="section-66"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-66">&#182;</a></div><p>Read/write are allow for following hardware information variables</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u32</span>	<span class="n">MCSTxPowerLevelOriginalOffset</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u32</span>	<span class="n">CCKTxPowerLevelOriginalOffset</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">TxPowerLevelCCK</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>			<span class="c1">// CCK channel 1~14</span>
	<span class="n">u8</span>	<span class="n">TxPowerLevelOFDM24G</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>		<span class="c1">// OFDM 2.4G channel 1~14</span>
	<span class="n">u8</span>	<span class="n">TxPowerLevelOFDM5G</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>			<span class="c1">// OFDM 5G</span>
	<span class="n">u32</span>	<span class="n">Pwr_Track</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">TxPowerDiff</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">AntennaTxPwDiff</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>				<span class="c1">// Antenna gain offset, index 0 for B, 1 for C, and 2 for D</span>
	<span class="n">u8</span>	<span class="n">CrystalCap</span><span class="p">;</span>						<span class="c1">// CrystalCap.</span>
	<span class="n">u8</span>	<span class="n">ThermalMeter</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>				<span class="c1">// ThermalMeter, index 0 for RFIC0, and 1 for RFIC1</span>

	<span class="n">u8</span>	<span class="n">CckPwEnl</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-67"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-67">&#182;</a></div><p>Use to calculate PWBD.</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>	<span class="n">bCckHighPower</span><span class="p">;</span>
	<span class="kt">long</span>	<span class="n">undecorated_smoothed_pwdb</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-68"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-68">&#182;</a></div><p>for set channel</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>	<span class="n">SwChnlInProgress</span><span class="p">;</span>
	<span class="n">u8</span> 	<span class="n">SwChnlStage</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">SwChnlStep</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">SetBWModeInProgress</span><span class="p">;</span>
	<span class="n">HT_CHANNEL_WIDTH</span>		<span class="n">CurrentChannelBW</span><span class="p">;</span>
	<span class="n">u8</span>      <span class="n">ChannelPlan</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-69"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-69">&#182;</a></div><p>8190 40MHz mode</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u8</span>	<span class="n">nCur40MhzPrimeSC</span><span class="p">;</span>	<span class="c1">// Control channel sub-carrier</span></pre></div></td></tr>


<tr id="section-70"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-70">&#182;</a></div><p>Joseph test for shorten RF configuration time.
We save RF reg0 in this variable to reduce RF reading.</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u32</span>					<span class="n">RfReg0Value</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u8</span> 					<span class="n">NumTotalRFPath</span><span class="p">;</span>
	<span class="n">bool</span> 				<span class="n">brfpath_rxenable</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span></pre></div></td></tr>


<tr id="section-71"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-71">&#182;</a></div><p>RF set related</p></td><td class="code"><div class="highlight"><pre>	<span class="n">bool</span>				<span class="n">SetRFPowerStateInProgress</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-72"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-72">&#182;</a></div><p>+by amy 080507</p></td><td class="code"><div class="highlight"><pre>	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">watch_dog_timer</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-73"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-73">&#182;</a></div><p>+by amy 080515 for dynamic mechenism
Add by amy Tx Power Control for Near/Far Range 2008/05/15</p></td><td class="code"><div class="highlight"><pre>	<span class="n">bool</span>	<span class="n">bdynamic_txpower</span><span class="p">;</span>  <span class="c1">//bDynamicTxPower</span>
	<span class="n">bool</span>	<span class="n">bDynamicTxHighPower</span><span class="p">;</span>  <span class="c1">// Tx high power state</span>
	<span class="n">bool</span>	<span class="n">bDynamicTxLowPower</span><span class="p">;</span>  <span class="c1">// Tx low power state</span>
	<span class="n">bool</span>	<span class="n">bLastDTPFlag_High</span><span class="p">;</span>
	<span class="n">bool</span>	<span class="n">bLastDTPFlag_Low</span><span class="p">;</span>

	<span class="n">bool</span>	<span class="n">bstore_last_dtpflag</span><span class="p">;</span>
	<span class="n">bool</span>	<span class="n">bstart_txctrl_bydtp</span><span class="p">;</span>   <span class="c1">//Define to discriminate on High power State or on sitesuvey to change Tx gain index</span></pre></div></td></tr>


<tr id="section-74"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-74">&#182;</a></div><p>Add by amy for Rate Adaptive</p></td><td class="code"><div class="highlight"><pre>	<span class="n">rate_adaptive</span> <span class="n">rate_adaptive</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-75"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-75">&#182;</a></div><p>Add by amy for TX power tracking
2008/05/15  Mars OPEN/CLOSE TX POWER TRACKING</p></td><td class="code"><div class="highlight"><pre>       <span class="n">txbbgain_struct</span> <span class="n">txbbgain_table</span><span class="p">[</span><span class="n">TxBBGainTableLength</span><span class="p">];</span>
	<span class="n">u8</span>			   <span class="n">txpower_count</span><span class="p">;</span><span class="c1">//For 6 sec do tracking again</span>
	<span class="n">bool</span>			   <span class="n">btxpower_trackingInit</span><span class="p">;</span>
	<span class="n">u8</span>			   <span class="n">OFDM_index</span><span class="p">;</span>
	<span class="n">u8</span>			   <span class="n">CCK_index</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-76"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-76">&#182;</a></div><p>2007/09/10 Mars Add CCK TX Power Tracking</p></td><td class="code"><div class="highlight"><pre>	<span class="n">ccktxbbgain_struct</span>	<span class="n">cck_txbbgain_table</span><span class="p">[</span><span class="n">CCKTxBBGainTableLength</span><span class="p">];</span>
	<span class="n">ccktxbbgain_struct</span>	<span class="n">cck_txbbgain_ch14_table</span><span class="p">[</span><span class="n">CCKTxBBGainTableLength</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">rfa_txpowertrackingindex</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rfa_txpowertrackingindex_real</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rfa_txpowertracking_default</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rfc_txpowertrackingindex</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rfc_txpowertrackingindex_real</span><span class="p">;</span>

	<span class="n">s8</span> <span class="n">cck_present_attentuation</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cck_present_attentuation_20Mdefault</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cck_present_attentuation_40Mdefault</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">cck_present_attentuation_difference</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">btxpower_tracking</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">bcck_in_ch14</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">btxpowerdata_readfromEEPORM</span><span class="p">;</span>
	<span class="n">u16</span> 	<span class="n">TSSI_13dBm</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-77"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-77">&#182;</a></div><p>For Backup Initial Gain</p></td><td class="code"><div class="highlight"><pre>	<span class="n">init_gain</span> <span class="n">initgain_backup</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">DefaultInitialGain</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span></pre></div></td></tr>


<tr id="section-78"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-78">&#182;</a></div><p>For EDCA Turbo mode, Added by amy 080515.</p></td><td class="code"><div class="highlight"><pre>	<span class="n">bool</span>		<span class="n">bis_any_nonbepkts</span><span class="p">;</span>
	<span class="n">bool</span>		<span class="n">bcurrent_turbo_EDCA</span><span class="p">;</span>
	<span class="n">bool</span>		<span class="n">bis_cur_rdlstate</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">fsync_timer</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">bfsync_processing</span><span class="p">;</span>	<span class="c1">// 500ms Fsync timer is active or not</span>
	<span class="n">u32</span> 	<span class="n">rate_record</span><span class="p">;</span>
	<span class="n">u32</span> 	<span class="n">rateCountDiffRecord</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ContinueDiffCount</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">bswitch_fsync</span><span class="p">;</span>

	<span class="n">u8</span>	<span class="n">framesync</span><span class="p">;</span>
	<span class="n">u32</span> 	<span class="n">framesyncC34</span><span class="p">;</span>
	<span class="n">u8</span>   	<span class="n">framesyncMonitor</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-79"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-79">&#182;</a></div><p>Added by amy 080516  for RX related</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u16</span> 	<span class="n">nrxAMPDU_size</span><span class="p">;</span>
	<span class="n">u8</span> 	<span class="n">nrxAMPDU_aggr_num</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-80"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-80">&#182;</a></div><p>by amy for gpio</p></td><td class="code"><div class="highlight"><pre>	 <span class="n">bool</span> <span class="n">bHwRadioOff</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-81"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-81">&#182;</a></div><p>by amy for reset_count</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u32</span> <span class="n">reset_count</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">bpbc_pressed</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-82"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-82">&#182;</a></div><p>by amy for debug</p></td><td class="code"><div class="highlight"><pre>	<span class="n">u32</span> <span class="n">txpower_checkcnt</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txpower_tracking_callback_cnt</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">thermal_read_val</span><span class="p">[</span><span class="mi">40</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">thermal_readback_index</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ccktxpower_adjustcnt_not_ch14</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ccktxpower_adjustcnt_ch14</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tx_fwinfo_force_subcarriermode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tx_fwinfo_force_subcarrierval</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-83"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-83">&#182;</a></div><p>by amy for silent reset</p></td><td class="code"><div class="highlight"><pre>	<span class="n">RESET_TYPE</span>	<span class="n">ResetProgress</span><span class="p">;</span>
	<span class="n">bool</span>		<span class="n">bForcedSilentReset</span><span class="p">;</span>
	<span class="n">bool</span>		<span class="n">bDisableNormalResetCheck</span><span class="p">;</span>
	<span class="n">u16</span>		<span class="n">TxCounter</span><span class="p">;</span>
	<span class="n">u16</span>		<span class="n">RxCounter</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">IrpPendingCount</span><span class="p">;</span>
	<span class="n">bool</span>		<span class="n">bResetInProgress</span><span class="p">;</span>
	<span class="n">bool</span>		<span class="n">force_reset</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">InitialGainOperateType</span><span class="p">;</span>

	<span class="n">u16</span>		<span class="n">SifsTime</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-84"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-84">&#182;</a></div><p>define work item by amy 080526</p></td><td class="code"><div class="highlight"><pre>	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">update_beacon_wq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">watch_dog_wq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">txpower_tracking_wq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">rfpath_check_wq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">gpio_change_rf_wq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">initialgain_operate_wq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">workqueue_struct</span> <span class="o">*</span><span class="n">priv_wq</span><span class="p">;</span>
<span class="p">}</span><span class="n">r8192_priv</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-85"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-85">&#182;</a></div><p>for rtl8187
now mirging to rtl8187B</p></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">typedef enum{</span>
<span class="cm">	LOW_PRIORITY = 0x02,</span>
<span class="cm">	NORM_PRIORITY</span>
<span class="cm">	} priority_t;</span>
<span class="cm">*/</span></pre></div></td></tr>


<tr id="section-86"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-86">&#182;</a></div><p>for rtl8187B</p></td><td class="code"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">enum</span><span class="p">{</span>
	<span class="n">BULK_PRIORITY</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span></pre></div></td></tr>


<tr id="section-87"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-87">&#182;</a></div><p>RSVD0,
RSVD1,</p></td><td class="code"><div class="highlight"><pre>	<span class="n">LOW_PRIORITY</span><span class="p">,</span>
	<span class="n">NORM_PRIORITY</span><span class="p">,</span>
	<span class="n">VO_PRIORITY</span><span class="p">,</span>
	<span class="n">VI_PRIORITY</span><span class="p">,</span> <span class="c1">//0x05</span>
	<span class="n">BE_PRIORITY</span><span class="p">,</span>
	<span class="n">BK_PRIORITY</span><span class="p">,</span>
	<span class="n">RSVD2</span><span class="p">,</span>
	<span class="n">RSVD3</span><span class="p">,</span>
	<span class="n">BEACON_PRIORITY</span><span class="p">,</span> <span class="c1">//0x0A</span>
	<span class="n">HIGH_PRIORITY</span><span class="p">,</span>
	<span class="n">MANAGE_PRIORITY</span><span class="p">,</span>
	<span class="n">RSVD4</span><span class="p">,</span>
	<span class="n">RSVD5</span><span class="p">,</span>
	<span class="n">UART_PRIORITY</span> <span class="c1">//0x0F</span>
<span class="p">}</span> <span class="n">priority_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">enum</span><span class="p">{</span>
	<span class="n">NIC_8192U</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">NIC_8190P</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">NIC_8192E</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="p">}</span> <span class="n">nic_t</span><span class="p">;</span>


<span class="cp">#ifdef JOHN_HWSEC</span>
<span class="k">struct</span> <span class="n">ssid_thread</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
       	<span class="n">u8</span> <span class="n">name</span><span class="p">[</span><span class="n">IW_ESSID_MAX_SIZE</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="n">bool</span> <span class="n">init_firmware</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">short</span> <span class="n">rtl819xU_tx_cmd</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">);</span>
<span class="kt">short</span> <span class="n">rtl8192_tx</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span><span class="o">*</span> <span class="n">skb</span><span class="p">);</span>

<span class="n">u32</span> <span class="n">read_cam</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u8</span> <span class="n">addr</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">write_cam</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u8</span> <span class="n">addr</span><span class="p">,</span> <span class="n">u32</span> <span class="n">data</span><span class="p">);</span>

<span class="n">u8</span> <span class="n">read_nic_byte</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">);</span>
<span class="n">u8</span> <span class="n">read_nic_byte_E</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">);</span>
<span class="n">u32</span> <span class="n">read_nic_dword</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">);</span>
<span class="n">u16</span> <span class="nf">read_nic_word</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">;</span>
<span class="kt">void</span> <span class="n">write_nic_byte</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span><span class="n">u8</span> <span class="n">y</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">write_nic_byte_E</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span><span class="n">u8</span> <span class="n">y</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">write_nic_word</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span><span class="n">u16</span> <span class="n">y</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">write_nic_dword</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span><span class="n">u32</span> <span class="n">y</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">force_pci_posting</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">rtl8192_rtx_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">rtl8192_rx_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">rtl8192_tx_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">rtl8192_disassociate</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span></pre></div></td></tr>


<tr id="section-88"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-88">&#182;</a></div><p>void fix<em>rx</em>fifo(struct net_device *dev);</p></td><td class="code"><div class="highlight"><pre><span class="kt">void</span> <span class="n">rtl8185_set_rf_pins_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span><span class="n">u32</span> <span class="n">a</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">rtl8192_set_anaparam</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span><span class="n">u32</span> <span class="n">a</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">rtl8185_set_anaparam2</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span><span class="n">u32</span> <span class="n">a</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">rtl8192_update_msr</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">rtl8192_down</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">rtl8192_up</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">rtl8192_commit</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">rtl8192_set_chan</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span><span class="kt">short</span> <span class="n">ch</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">write_phy</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u8</span> <span class="n">adr</span><span class="p">,</span> <span class="n">u8</span> <span class="n">data</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">write_phy_cck</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u8</span> <span class="n">adr</span><span class="p">,</span> <span class="n">u32</span> <span class="n">data</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">write_phy_ofdm</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u8</span> <span class="n">adr</span><span class="p">,</span> <span class="n">u32</span> <span class="n">data</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">rtl8185_tx_antenna</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u8</span> <span class="n">ant</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">rtl8192_set_rxconf</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span></pre></div></td></tr>


<tr id="section-89"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-89">&#182;</a></div><p>short check<em>nic</em>enough<em>desc(struct net</em>device *dev, priority_t priority);</p></td><td class="code"><div class="highlight"><pre><span class="k">extern</span> <span class="kt">void</span> <span class="n">rtl819xusb_beacon_tx</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span><span class="n">u16</span>  <span class="n">tx_rate</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">EnableHWSecurityConfig8192</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">setKey</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u8</span> <span class="n">EntryNo</span><span class="p">,</span> <span class="n">u8</span> <span class="n">KeyIndex</span><span class="p">,</span> <span class="n">u16</span> <span class="n">KeyType</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">MacAddr</span><span class="p">,</span> <span class="n">u8</span> <span class="n">DefaultKey</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">KeyContent</span> <span class="p">);</span>


<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
