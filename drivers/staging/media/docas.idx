d | easycap |  | 10 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1337880111 |  | Merge branch 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media  Pull media updates from Mauro Carvalho Chehab:  - some V4L2 API updates needed by embedded devices  - DVB API extensions for ATSC-MH delivery system, used in US for mobile    TV  - new tuners for fc0011/0012/0013 and tua9001  - a new dvb driver for af9033/9035  - a new ATSC-MH frontend (lg2160)  - new remote controller keymaps  - Removal of a few legacy webcam driver that got replaced by gspca on    several kernel versions ago  - a new driver for Exynos 4/5 webcams(s5pp fimc-lite)  - a new webcam sensor driver (smiapp)  - a new video input driver for embedded (sta2x1xx)  - several improvements, fixes, cleanups, etc inside the drivers.  Manually fix up conflicts due to err() -> dev_err() conversion in drivers/staging/media/easycap/easycap_main.c  * 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media: (484 commits)   [media] saa7134-cards: Remove a PCI entry added by mistake   [media] radio-sf16fmi: add support for SF16-FMD   [media] rc-loopback: remove duplicate line   [media] patch for Asus My Cinema PS3-100 (1043:48cd)   [media] au0828: Move the Kconfig knob under V4L_USB_DRIVERS   [media] em28xx: simple comment fix   [media] [resend] radio-sf16fmr2: add PnP support for SF16-FMD2   [media] smiapp: Use v4l2_ctrl_new_int_menu() instead of v4l2_ctrl_new_custom()   [media] smiapp: Add support for 8-bit uncompressed formats   [media] smiapp: Allow generic quirk registers   [media] smiapp: Use non-binning limits if the binning limit is zero   [media] smiapp: Initialise rval in smiapp_read_nvm()   [media] smiapp: Round minimum pre_pll up rather than down in ip_clk_freq check   [media] smiapp: Use 8-bit reads only before identifying the sensor   [media] smiapp: Quirk for sensors that only do 8-bit reads   [media] smiapp: Pass struct sensor to register writing commands instead of i2c_client   [media] smiapp: Allow using external clock from the clock framework   [media] zl10353: change .read_snr() to report SNR as a 0.1 dB   [media] media: add support to gspca/pac7302.c for 093a:2627 (Genius FaceCam 300)   [media] m88rs2000 - only flip bit 2 on reg 0x70 on 16th try   ...
d | solo6x10 |  | 19 items |  | Andrew Miller | amiller@amilx.com | 1332182640 |  | [media] Staging: media: solo6x10: core.c Fix some coding style issue  Replaced spaces with tabs  Signed-off-by: Andrew Miller <amiller@amilx.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
d | cxd2099 |  | 5 items |  | Mauro Carvalho Chehab | mchehab@redhat.com | 1320314343 |  | staging: Move media drivers to staging/media  In practice, it is being hard to distinguish when a patch should go to staging tree or to the media tree. Better to distinguish it, by putting the media drivers at a separate staging directory. Newer staging drivers that include anything with "dvb*.h", "v4l2*.h" or "videodev2.h" should go to the drivers/staging/media tree.  Acked-by: Greg Kroah-Hartman <gregkh@suse.de> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | Makefile | g | 260B |  | Mauro Carvalho Chehab | mchehab@redhat.com | 1320314343 |  | staging: Move media drivers to staging/media  In practice, it is being hard to distinguish when a patch should go to staging tree or to the media tree. Better to distinguish it, by putting the media drivers at a separate staging directory. Newer staging drivers that include anything with "dvb*.h", "v4l2*.h" or "videodev2.h" should go to the drivers/staging/media tree.  Acked-by: Greg Kroah-Hartman <gregkh@suse.de> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
d | lirc |  | 15 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1340661189 |  | Merge branch 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media  Pull media fixes from Mauro Carvalho Chehab.  Trivial conflict due to new USB HID ID's being added next to each other (Baanto vs Axentia).  * 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media: (44 commits)   [media] smia: Fix compile failures   [media]  Fix VIDIOC_DQEVENT docbook entry   [media] s5p-fimc: Fix control creation function   [media] s5p-mfc: Fix checkpatch error in s5p_mfc_shm.h file   [media] s5p-mfc: Fix setting controls   [media] v4l/s5p-mfc: added image size align in VIDIOC_TRY_FMT   [media] v4l/s5p-mfc: corrected encoder v4l control definitions   [media] v4l: mem2mem_testdev: Fix race conditions in driver   [media] s5p-mfc: Bug fix of timestamp/timecode copy mechanism   [media] cxd2820r: Fix an incorrect modulation type bitmask   [media] em28xx: Show a warning if the board does not support remote controls   [media] em28xx: Add remote control support for Terratec's Cinergy HTC Stick HD   [media] USB: Staging: media: lirc: initialize spinlocks before usage   [media] Revert "[media] media: mx2_camera: Fix mbus format handling"   [media] bw-qcam: driver and pixfmt documentation fixes   [media] cx88: fix firmware load on big-endian systems   [media] cx18: support big-endian systems   [media] ivtv: fix support for big-endian systems   [media] tuner-core: return the frequency range of the correct tuner   [media] v4l2-dev.c: fix g_parm regression in determine_valid_ioctls()   ...
d | as102 |  | 15 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1337880111 |  | Merge branch 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media  Pull media updates from Mauro Carvalho Chehab:  - some V4L2 API updates needed by embedded devices  - DVB API extensions for ATSC-MH delivery system, used in US for mobile    TV  - new tuners for fc0011/0012/0013 and tua9001  - a new dvb driver for af9033/9035  - a new ATSC-MH frontend (lg2160)  - new remote controller keymaps  - Removal of a few legacy webcam driver that got replaced by gspca on    several kernel versions ago  - a new driver for Exynos 4/5 webcams(s5pp fimc-lite)  - a new webcam sensor driver (smiapp)  - a new video input driver for embedded (sta2x1xx)  - several improvements, fixes, cleanups, etc inside the drivers.  Manually fix up conflicts due to err() -> dev_err() conversion in drivers/staging/media/easycap/easycap_main.c  * 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media: (484 commits)   [media] saa7134-cards: Remove a PCI entry added by mistake   [media] radio-sf16fmi: add support for SF16-FMD   [media] rc-loopback: remove duplicate line   [media] patch for Asus My Cinema PS3-100 (1043:48cd)   [media] au0828: Move the Kconfig knob under V4L_USB_DRIVERS   [media] em28xx: simple comment fix   [media] [resend] radio-sf16fmr2: add PnP support for SF16-FMD2   [media] smiapp: Use v4l2_ctrl_new_int_menu() instead of v4l2_ctrl_new_custom()   [media] smiapp: Add support for 8-bit uncompressed formats   [media] smiapp: Allow generic quirk registers   [media] smiapp: Use non-binning limits if the binning limit is zero   [media] smiapp: Initialise rval in smiapp_read_nvm()   [media] smiapp: Round minimum pre_pll up rather than down in ip_clk_freq check   [media] smiapp: Use 8-bit reads only before identifying the sensor   [media] smiapp: Quirk for sensors that only do 8-bit reads   [media] smiapp: Pass struct sensor to register writing commands instead of i2c_client   [media] smiapp: Allow using external clock from the clock framework   [media] zl10353: change .read_snr() to report SNR as a 0.1 dB   [media] media: add support to gspca/pac7302.c for 093a:2627 (Genius FaceCam 300)   [media] m88rs2000 - only flip bit 2 on reg 0x70 on 16th try   ...
d | go7007 |  | 24 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1337880111 |  | Merge branch 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media  Pull media updates from Mauro Carvalho Chehab:  - some V4L2 API updates needed by embedded devices  - DVB API extensions for ATSC-MH delivery system, used in US for mobile    TV  - new tuners for fc0011/0012/0013 and tua9001  - a new dvb driver for af9033/9035  - a new ATSC-MH frontend (lg2160)  - new remote controller keymaps  - Removal of a few legacy webcam driver that got replaced by gspca on    several kernel versions ago  - a new driver for Exynos 4/5 webcams(s5pp fimc-lite)  - a new webcam sensor driver (smiapp)  - a new video input driver for embedded (sta2x1xx)  - several improvements, fixes, cleanups, etc inside the drivers.  Manually fix up conflicts due to err() -> dev_err() conversion in drivers/staging/media/easycap/easycap_main.c  * 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media: (484 commits)   [media] saa7134-cards: Remove a PCI entry added by mistake   [media] radio-sf16fmi: add support for SF16-FMD   [media] rc-loopback: remove duplicate line   [media] patch for Asus My Cinema PS3-100 (1043:48cd)   [media] au0828: Move the Kconfig knob under V4L_USB_DRIVERS   [media] em28xx: simple comment fix   [media] [resend] radio-sf16fmr2: add PnP support for SF16-FMD2   [media] smiapp: Use v4l2_ctrl_new_int_menu() instead of v4l2_ctrl_new_custom()   [media] smiapp: Add support for 8-bit uncompressed formats   [media] smiapp: Allow generic quirk registers   [media] smiapp: Use non-binning limits if the binning limit is zero   [media] smiapp: Initialise rval in smiapp_read_nvm()   [media] smiapp: Round minimum pre_pll up rather than down in ip_clk_freq check   [media] smiapp: Use 8-bit reads only before identifying the sensor   [media] smiapp: Quirk for sensors that only do 8-bit reads   [media] smiapp: Pass struct sensor to register writing commands instead of i2c_client   [media] smiapp: Allow using external clock from the clock framework   [media] zl10353: change .read_snr() to report SNR as a 0.1 dB   [media] media: add support to gspca/pac7302.c for 093a:2627 (Genius FaceCam 300)   [media] m88rs2000 - only flip bit 2 on reg 0x70 on 16th try   ...
d | dt3155v4l |  | 4 items |  | Hans Verkuil | hans.verkuil@cisco.com | 1336997978 |  | [media] v4l2-dev: add flag to have the core lock all file operations  This used to be the default if the lock pointer was set, but now that lock is by default only used for ioctl serialization. Those drivers that already used core locking have this flag set explicitly, except for some drivers where it was obvious that there was no need to serialize any file operations other than ioctl.  The drivers that didn't need this flag were:  drivers/media/radio/dsbr100.c drivers/media/radio/radio-isa.c drivers/media/radio/radio-keene.c drivers/media/radio/radio-miropcm20.c drivers/media/radio/radio-mr800.c drivers/media/radio/radio-tea5764.c drivers/media/radio/radio-timb.c drivers/media/video/vivi.c sound/i2c/other/tea575x-tuner.c  The other drivers that use core locking and where it was not immediately obvious that this flag wasn't needed were changed so that the flag is set together with a comment that that driver needs work to avoid having to set that flag. This will often involve taking the core lock in the fops themselves.  Eventually this flag should go and it should not be used in new drivers.  There are a few reasons why we want to avoid core locking of non-ioctl fops: in the case of mmap this can lead to a deadlock in rare situations since when mmap is called the mmap_sem is held and it is possible for other parts of the code to take that lock as well (copy_from_user()/copy_to_user() perform a down_read(&mm->mmap_sem) when a page fault occurs).  It is very unlikely that that happens since the core lock serializes all fops, but the kernel warns about it if lock validation is turned on.  For poll it is also undesirable to take the core lock as that can introduce increased latency. The same is true for read/write.  While it was possible to make flags or something to turn on/off taking the core lock for each file operation, in practice it is much simpler to just not take it at all except for ioctl and leave it to the driver to take the lock. There are only a handful fops compared to the zillion ioctls we have.  I also wanted to make it obvious which drivers still take the lock for all fops, so that's why I chose to have drivers set it explicitly.  Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com> Acked-by: Hans de Goede <hdegoede@redhat.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | Kconfig | g | 1.1K |  | Justin P. Mattock | justinmattock@gmail.com | 1332177976 |  | [media] staging: Fix comments and some typos in staging/media/*  linux-next: I like to spend some time reading code, in doing so I have found some typos in some of the comments.  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
