<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › keucr › smil.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>smil.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*----- &lt; smil.h&gt; ----------------------------------------------------*/</span>
<span class="cp">#ifndef SMIL_INCD</span>
<span class="cp">#define SMIL_INCD</span>

<span class="cm">/***************************************************************************</span>
<span class="cm">Define Definition</span>
<span class="cm">***************************************************************************/</span>
<span class="cp">#define K_BYTE              1024   </span><span class="cm">/* Kilo Byte */</span><span class="cp"></span>
<span class="cp">#define SECTSIZE            512    </span><span class="cm">/* Sector buffer size */</span><span class="cp"></span>
<span class="cp">#define REDTSIZE            16     </span><span class="cm">/* Redundant buffer size */</span><span class="cp"></span>

<span class="cm">/***************************************************************************/</span>
<span class="cp">#define DUMMY_DATA          0xFF   </span><span class="cm">/* No Assign Sector Read Data */</span><span class="cp"></span>

<span class="cm">/***************************************************************************</span>
<span class="cm">Max Zone/Block/Sectors Data Definition</span>
<span class="cm">***************************************************************************/</span>
<span class="cp">#define MAX_ZONENUM         128    </span><span class="cm">/* Max Zone Numbers in a SmartMedia    */</span><span class="cp"></span>
<span class="cp">#define MAX_BLOCKNUM        0x0400 </span><span class="cm">/* Max Block Numbers in a Zone         */</span><span class="cp"></span>
<span class="cp">#define MAX_SECTNUM         0x20   </span><span class="cm">/* Max Sector Numbers in a Block       */</span><span class="cp"></span>
<span class="cp">#define MAX_LOGBLOCK        1000   </span><span class="cm">/* Max Logical Block Numbers in a Zone */</span><span class="cp"></span>

<span class="cm">/***************************************************************************/</span>
<span class="cp">#define CIS_SEARCH_SECT     0x08   </span><span class="cm">/* Max CIS Search Sector Number */</span><span class="cp"></span>

<span class="cm">/***************************************************************************</span>
<span class="cm">Logical to Physical Block Table Data Definition</span>
<span class="cm">***************************************************************************/</span>
<span class="cp">#define NO_ASSIGN           0xFFFF </span><span class="cm">/* No Assign Logical Block Address */</span><span class="cp"></span>

<span class="cm">/***************************************************************************</span>
<span class="cm">&#39;SectCopyMode&#39; Data</span>
<span class="cm">***************************************************************************/</span>
<span class="cp">#define COMPLETED           0      </span><span class="cm">/* Sector Copy Completed */</span><span class="cp"></span>
<span class="cp">#define REQ_ERASE           1      </span><span class="cm">/* Request Read Block Erase */</span><span class="cp"></span>
<span class="cp">#define REQ_FAIL            2      </span><span class="cm">/* Request Read Block Failed */</span><span class="cp"></span>

<span class="cm">/***************************************************************************</span>
<span class="cm">Retry Counter Definition</span>
<span class="cm">***************************************************************************/</span>
<span class="cp">#define RDERR_REASSIGN      1      </span><span class="cm">/* Reassign with Read Error */</span><span class="cp"></span>
<span class="cp">#define L2P_ERR_ERASE       1      </span><span class="cm">/* BlockErase for Contradicted L2P Table */</span><span class="cp"></span>

<span class="cm">/***************************************************************************</span>
<span class="cm">Hardware ECC Definition</span>
<span class="cm">***************************************************************************/</span>
<span class="cp">#define HW_ECC_SUPPORTED    1	   </span><span class="cm">/* Hardware ECC Supported */</span><span class="cp"></span>
<span class="cm">/* No difinition for Software ECC */</span>

<span class="cm">/***************************************************************************</span>
<span class="cm">SmartMedia Command &amp; Status Definition</span>
<span class="cm">***************************************************************************/</span>
<span class="cm">/* SmartMedia Command */</span>
<span class="cp">#define WRDATA        0x80</span>
<span class="cm">/* #define READ          0x00 */</span>
<span class="cp">#define READ_REDT     0x50</span>
<span class="cm">/* #define WRITE         0x10 */</span>
<span class="cp">#define RDSTATUS      0x70</span>

<span class="cp">#define READ1         0x00 </span><span class="cm">/* NO */</span><span class="cp"></span>
<span class="cp">#define READ2         0x01 </span><span class="cm">/* NO */</span><span class="cp"></span>
<span class="cp">#define READ3         0x50 </span><span class="cm">/* NO */</span><span class="cp"></span>
<span class="cp">#define RST_CHIP      0xFF</span>
<span class="cp">#define ERASE1        0x60</span>
<span class="cp">#define ERASE2        0xD0</span>
<span class="cp">#define READ_ID_1     0x90</span>
<span class="cp">#define READ_ID_2     0x91</span>
<span class="cp">#define READ_ID_3     0x9A</span>

<span class="cm">/* 712 SmartMedia Command */</span>
<span class="cp">#define SM_CMD_RESET                0x00    </span><span class="cm">/* 0xFF */</span><span class="cp"></span>
<span class="cp">#define SM_CMD_READ_ID_1            0x10    </span><span class="cm">/* 0x90 */</span><span class="cp"></span>
<span class="cp">#define SM_CMD_READ_ID_2            0x20    </span><span class="cm">/* 0x91 */</span><span class="cp"></span>
<span class="cp">#define SM_CMD_READ_STAT            0x30    </span><span class="cm">/* 0x70 */</span><span class="cp"></span>
<span class="cp">#define SM_CMD_RDMULTPL_STAT        0x40    </span><span class="cm">/* 0x71 */</span><span class="cp"></span>
<span class="cp">#define SM_CMD_READ_1               0x50    </span><span class="cm">/* 0x00 */</span><span class="cp"></span>
<span class="cp">#define SM_CMD_READ_2               0x60    </span><span class="cm">/* 0x01 */</span><span class="cp"></span>
<span class="cp">#define SM_CMD_READ_3               0x70    </span><span class="cm">/* 0x50 */</span><span class="cp"></span>
<span class="cp">#define SM_CMD_PAGPRGM_TRUE         0x80    </span><span class="cm">/* {0x80, 0x10} */</span><span class="cp"></span>
<span class="cp">#define SM_CMD_PAGPRGM_DUMY         0x90    </span><span class="cm">/* {0x80, 0x11} */</span><span class="cp"></span>
<span class="cp">#define SM_CMD_PAGPRGM_MBLK         0xA0    </span><span class="cm">/* {0x80, 0x15} */</span><span class="cp"></span>
<span class="cp">#define SM_CMD_BLKERASE             0xB0    </span><span class="cm">/* {0x60, 0xD0} */</span><span class="cp"></span>
<span class="cp">#define SM_CMD_BLKERASE_MULTPL      0xC0    </span><span class="cm">/* {0x60-0x60, 0xD0} */</span><span class="cp"></span>

<span class="cp">#define SM_CRADDTCT_DEBNCETIMER_EN  0x02</span>
<span class="cp">#define SM_CMD_START_BIT            0x01</span>

<span class="cp">#define SM_WaitCmdDone { while (!SM_CmdDone); }</span>
<span class="cp">#define SM_WaitDmaDone { while (!SM_DmaDone); }</span>

<span class="cm">/* SmartMedia Status */</span>
<span class="cp">#define WR_FAIL       0x01      </span><span class="cm">/* 0:Pass, 1:Fail */</span><span class="cp"></span>
<span class="cp">#define SUSPENDED     0x20      </span><span class="cm">/* 0:Not Suspended, 1:Suspended */</span><span class="cp"></span>
<span class="cp">#define READY         0x40      </span><span class="cm">/* 0:Busy, 1:Ready */</span><span class="cp"></span>
<span class="cp">#define WR_PRTCT      0x80      </span><span class="cm">/* 0:Protect, 1:Not Protect */</span><span class="cp"></span>

<span class="cm">/* SmartMedia Busy Time (1bit:0.1ms) */</span>
<span class="cp">#define BUSY_PROG 200 </span><span class="cm">/* tPROG   : 20ms  ----- Program Time old : 200 */</span><span class="cp"></span>
<span class="cp">#define BUSY_ERASE 4000 </span><span class="cm">/* tBERASE : 400ms ----- Block Erase Time old : 4000 */</span><span class="cp"></span>

<span class="cm">/*for 712 Test */</span>
<span class="cm">/* #define BUSY_READ 1 *//* tR : 100us ----- Data transfer Time   old : 1 */</span>
<span class="cm">/* #define BUSY_READ 10 *//* tR : 100us ----- Data transfer Time   old : 1 */</span>

<span class="cp">#define BUSY_READ 200 </span><span class="cm">/* tR : 20ms   ----- Data transfer Time   old : 1 */</span><span class="cp"></span>

<span class="cm">/* #define BUSY_RESET 60 *//* tRST : 6ms ----- Device Resetting Time old : 60 */</span>

<span class="cp">#define BUSY_RESET 600 </span><span class="cm">/* tRST : 60ms   ----- Device Resetting Time old : 60 */</span><span class="cp"></span>

<span class="cm">/* Hardware Timer (1bit:0.1ms) */</span>
<span class="cp">#define TIME_PON      3000      </span><span class="cm">/* 300ms ------ Power On Wait Time */</span><span class="cp"></span>
<span class="cp">#define TIME_CDCHK    200       </span><span class="cm">/* 20ms  ------ Card Check Interval Timer */</span><span class="cp"></span>
<span class="cp">#define TIME_WPCHK    50        </span><span class="cm">/* 5ms   ------ WP Check Interval Timer */</span><span class="cp"></span>
<span class="cp">#define TIME_5VCHK    10        </span><span class="cm">/* 1ms   ------ 5V Check Interval Timer */</span><span class="cp"></span>

<span class="cm">/***************************************************************************</span>
<span class="cm">Redundant Data</span>
<span class="cm">***************************************************************************/</span>
<span class="cp">#define REDT_DATA     0x04</span>
<span class="cp">#define REDT_BLOCK    0x05</span>
<span class="cp">#define REDT_ADDR1H   0x06</span>
<span class="cp">#define REDT_ADDR1L   0x07</span>
<span class="cp">#define REDT_ADDR2H   0x0B</span>
<span class="cp">#define REDT_ADDR2L   0x0C</span>
<span class="cp">#define REDT_ECC10    0x0D</span>
<span class="cp">#define REDT_ECC11    0x0E</span>
<span class="cp">#define REDT_ECC12    0x0F</span>
<span class="cp">#define REDT_ECC20    0x08</span>
<span class="cp">#define REDT_ECC21    0x09</span>
<span class="cp">#define REDT_ECC22    0x0A</span>

<span class="cm">/***************************************************************************</span>
<span class="cm">SmartMedia Model &amp; Attribute</span>
<span class="cm">***************************************************************************/</span>
<span class="cm">/* SmartMedia Attribute */</span>
<span class="cp">#define NOWP          0x00 </span><span class="cm">/* 0... .... No Write Protect */</span><span class="cp"></span>
<span class="cp">#define WP            0x80 </span><span class="cm">/* 1... .... Write Protected */</span><span class="cp"></span>
<span class="cp">#define MASK          0x00 </span><span class="cm">/* .00. .... NAND MASK ROM Model */</span><span class="cp"></span>
<span class="cp">#define FLASH         0x20 </span><span class="cm">/* .01. .... NAND Flash ROM Model */</span><span class="cp"></span>
<span class="cp">#define AD3CYC        0x00 </span><span class="cm">/* ...0 .... Address 3-cycle */</span><span class="cp"></span>
<span class="cp">#define AD4CYC        0x10 </span><span class="cm">/* ...1 .... Address 4-cycle */</span><span class="cp"></span>
<span class="cp">#define BS16          0x00 </span><span class="cm">/* .... 00.. 16page/block */</span><span class="cp"></span>
<span class="cp">#define BS32          0x04 </span><span class="cm">/* .... 01.. 32page/block */</span><span class="cp"></span>
<span class="cp">#define PS256         0x00 </span><span class="cm">/* .... ..00 256byte/page */</span><span class="cp"></span>
<span class="cp">#define PS512         0x01 </span><span class="cm">/* .... ..01 512byte/page */</span><span class="cp"></span>
<span class="cp">#define MWP           0x80 </span><span class="cm">/* WriteProtect mask */</span><span class="cp"></span>
<span class="cp">#define MFLASH        0x60 </span><span class="cm">/* Flash Rom mask */</span><span class="cp"></span>
<span class="cp">#define MADC          0x10 </span><span class="cm">/* Address Cycle */</span><span class="cp"></span>
<span class="cp">#define MBS           0x0C </span><span class="cm">/* BlockSize mask */</span><span class="cp"></span>
<span class="cp">#define MPS           0x03 </span><span class="cm">/* PageSize mask */</span><span class="cp"></span>

<span class="cm">/* SmartMedia Model */</span>
<span class="cp">#define NOSSFDC       0x00 </span><span class="cm">/* NO   SmartMedia */</span><span class="cp"></span>
<span class="cp">#define SSFDC1MB      0x01 </span><span class="cm">/* 1MB  SmartMedia */</span><span class="cp"></span>
<span class="cp">#define SSFDC2MB      0x02 </span><span class="cm">/* 2MB  SmartMedia */</span><span class="cp"></span>
<span class="cp">#define SSFDC4MB      0x03 </span><span class="cm">/* 4MB  SmartMedia */</span><span class="cp"></span>
<span class="cp">#define SSFDC8MB      0x04 </span><span class="cm">/* 8MB  SmartMedia */</span><span class="cp"></span>
<span class="cp">#define SSFDC16MB     0x05 </span><span class="cm">/* 16MB SmartMedia */</span><span class="cp"></span>
<span class="cp">#define SSFDC32MB     0x06 </span><span class="cm">/* 32MB SmartMedia */</span><span class="cp"></span>
<span class="cp">#define SSFDC64MB     0x07 </span><span class="cm">/* 64MB SmartMedia */</span><span class="cp"></span>
<span class="cp">#define SSFDC128MB    0x08 </span><span class="cm">/*128MB SmartMedia */</span><span class="cp"></span>
<span class="cp">#define SSFDC256MB    0x09</span>
<span class="cp">#define SSFDC512MB    0x0A</span>
<span class="cp">#define SSFDC1GB      0x0B</span>
<span class="cp">#define SSFDC2GB      0x0C</span>

<span class="cm">/***************************************************************************</span>
<span class="cm">Struct Definition</span>
<span class="cm">***************************************************************************/</span>
<span class="k">struct</span> <span class="n">SSFDCTYPE</span> <span class="p">{</span>
	<span class="n">BYTE</span> <span class="n">Model</span><span class="p">;</span>
	<span class="n">BYTE</span> <span class="n">Attribute</span><span class="p">;</span>
	<span class="n">BYTE</span> <span class="n">MaxZones</span><span class="p">;</span>
	<span class="n">BYTE</span> <span class="n">MaxSectors</span><span class="p">;</span>
	<span class="n">WORD</span> <span class="n">MaxBlocks</span><span class="p">;</span>
	<span class="n">WORD</span> <span class="n">MaxLogBlocks</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">SSFDCTYPE_T</span> <span class="p">{</span>
	<span class="n">BYTE</span> <span class="n">Model</span><span class="p">;</span>
	<span class="n">BYTE</span> <span class="n">Attribute</span><span class="p">;</span>
	<span class="n">BYTE</span> <span class="n">MaxZones</span><span class="p">;</span>
	<span class="n">BYTE</span> <span class="n">MaxSectors</span><span class="p">;</span>
	<span class="n">WORD</span> <span class="n">MaxBlocks</span><span class="p">;</span>
	<span class="n">WORD</span> <span class="n">MaxLogBlocks</span><span class="p">;</span>
<span class="p">}</span> <span class="o">*</span><span class="n">SSFDCTYPE_T</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ADDRESS</span> <span class="p">{</span>
	<span class="n">BYTE</span> <span class="n">Zone</span><span class="p">;</span>	<span class="cm">/* Zone Number */</span>
	<span class="n">BYTE</span> <span class="n">Sector</span><span class="p">;</span>	<span class="cm">/* Sector(512byte) Number on Block */</span>
	<span class="n">WORD</span> <span class="n">PhyBlock</span><span class="p">;</span>	<span class="cm">/* Physical Block Number on Zone */</span>
	<span class="n">WORD</span> <span class="n">LogBlock</span><span class="p">;</span>	<span class="cm">/* Logical Block Number of Zone */</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">ADDRESS_T</span> <span class="p">{</span>
	<span class="n">BYTE</span> <span class="n">Zone</span><span class="p">;</span>	<span class="cm">/* Zone Number */</span>
	<span class="n">BYTE</span> <span class="n">Sector</span><span class="p">;</span>	<span class="cm">/* Sector(512byte) Number on Block */</span>
	<span class="n">WORD</span> <span class="n">PhyBlock</span><span class="p">;</span>	<span class="cm">/* Physical Block Number on Zone */</span>
	<span class="n">WORD</span> <span class="n">LogBlock</span><span class="p">;</span>	<span class="cm">/* Logical Block Number of Zone */</span>
<span class="p">}</span> <span class="o">*</span><span class="n">ADDRESS_T</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">CIS_AREA</span> <span class="p">{</span>
	<span class="n">BYTE</span> <span class="n">Sector</span><span class="p">;</span>	<span class="cm">/* Sector(512byte) Number on Block */</span>
	<span class="n">WORD</span> <span class="n">PhyBlock</span><span class="p">;</span>	<span class="cm">/* Physical Block Number on Zone 0 */</span>
<span class="p">};</span>


<span class="k">extern</span> <span class="n">BYTE</span> <span class="n">IsSSFDCCompliance</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">BYTE</span> <span class="n">IsXDCompliance</span><span class="p">;</span>

<span class="k">extern</span> <span class="n">DWORD</span>	<span class="n">ErrXDCode</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">DWORD</span>	<span class="n">ErrCode</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">WORD</span>	<span class="n">ReadBlock</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">WORD</span>	<span class="n">WriteBlock</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">DWORD</span>	<span class="n">MediaChange</span><span class="p">;</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">SSFDCTYPE</span>  <span class="n">Ssfdc</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">ADDRESS</span>    <span class="n">Media</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">CIS_AREA</span>   <span class="n">CisArea</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * SMILMain.c</span>
<span class="cm"> */</span>
<span class="cm">/******************************************/</span>
<span class="kt">int</span>         <span class="n">Init_D_SmartMedia</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span>         <span class="n">Pwoff_D_SmartMedia</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span>         <span class="n">Check_D_SmartMedia</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span>         <span class="n">Check_D_Parameter</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">WORD</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>         <span class="n">Media_D_ReadSector</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">DWORD</span><span class="p">,</span> <span class="n">WORD</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>         <span class="n">Media_D_WriteSector</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">DWORD</span><span class="p">,</span> <span class="n">WORD</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>         <span class="n">Media_D_CopySector</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">DWORD</span><span class="p">,</span> <span class="n">WORD</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>         <span class="n">Media_D_EraseBlock</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">DWORD</span><span class="p">,</span> <span class="n">WORD</span><span class="p">);</span>
<span class="kt">int</span>         <span class="n">Media_D_EraseAll</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">);</span>
<span class="cm">/******************************************/</span>
<span class="kt">int</span>         <span class="n">Media_D_OneSectWriteStart</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">DWORD</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>         <span class="n">Media_D_OneSectWriteNext</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>         <span class="n">Media_D_OneSectWriteFlush</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/******************************************/</span>
<span class="k">extern</span> <span class="kt">int</span>	<span class="n">SM_FreeMem</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>	<span class="cm">/* ENE SM function */</span>
<span class="kt">void</span>        <span class="n">SM_EnableLED</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">BOOLEAN</span><span class="p">);</span>
<span class="kt">void</span>        <span class="n">Led_D_TernOn</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span>        <span class="n">Led_D_TernOff</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">int</span>         <span class="n">Media_D_EraseAllRedtData</span><span class="p">(</span><span class="n">DWORD</span> <span class="n">Index</span><span class="p">,</span> <span class="n">BOOLEAN</span> <span class="n">CheckBlock</span><span class="p">);</span>
<span class="cm">/*DWORD Media_D_GetMediaInfo(struct us_data * fdoExt,</span>
<span class="cm">	PIOCTL_MEDIA_INFO_IN pParamIn, PIOCTL_MEDIA_INFO_OUT pParamOut); */</span>

<span class="cm">/*</span>
<span class="cm"> * SMILSub.c</span>
<span class="cm"> */</span>
<span class="cm">/******************************************/</span>
<span class="kt">int</span>  <span class="n">Check_D_DataBlank</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Check_D_FailBlock</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Check_D_DataStatus</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Load_D_LogBlockAddr</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">Clr_D_RedundantData</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">Set_D_LogBlockAddr</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">Set_D_FailBlock</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">Set_D_DataStaus</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/******************************************/</span>
<span class="kt">void</span> <span class="n">Ssfdc_D_Reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Ssfdc_D_ReadCisSect</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">Ssfdc_D_WriteRedtMode</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">Ssfdc_D_ReadID</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Ssfdc_D_ReadSect</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Ssfdc_D_ReadBlock</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">WORD</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Ssfdc_D_WriteSect</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Ssfdc_D_WriteBlock</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">WORD</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Ssfdc_D_CopyBlock</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">WORD</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Ssfdc_D_WriteSectForCopy</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Ssfdc_D_EraseBlock</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Ssfdc_D_ReadRedtData</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Ssfdc_D_WriteRedtData</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Ssfdc_D_CheckStatus</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Set_D_SsfdcModel</span><span class="p">(</span><span class="n">BYTE</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">Cnt_D_Reset</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Cnt_D_PowerOn</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">Cnt_D_PowerOff</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">Cnt_D_LedOn</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">Cnt_D_LedOff</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Check_D_CntPower</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Check_D_CardExist</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Check_D_CardStsChg</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Check_D_SsfdcWP</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">SM_ReadBlock</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>

<span class="kt">int</span>  <span class="n">Ssfdc_D_ReadSect_DMA</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Ssfdc_D_ReadSect_PIO</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Ssfdc_D_WriteSect_DMA</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Ssfdc_D_WriteSect_PIO</span><span class="p">(</span><span class="k">struct</span> <span class="n">us_data</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/******************************************/</span>
<span class="kt">int</span>  <span class="n">Check_D_ReadError</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Check_D_Correct</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">Check_D_CISdata</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">Set_D_RightECC</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * SMILECC.c</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">calculate_ecc</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="n">BYTE</span> <span class="n">correct_data</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span><span class="p">,</span>   <span class="n">BYTE</span><span class="p">,</span>   <span class="n">BYTE</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">_Correct_D_SwECC</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">_Calculate_D_SwECC</span><span class="p">(</span><span class="n">BYTE</span> <span class="o">*</span><span class="p">,</span> <span class="n">BYTE</span> <span class="o">*</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">SM_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* already included */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
