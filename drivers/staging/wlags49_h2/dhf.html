<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › staging › wlags49_h2 › dhf.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>dhf.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*   vim:tw=110:ts=4: */</span>
<span class="cp">#ifndef DHF_H</span>
<span class="cp">#define DHF_H</span>

<span class="cm">/**************************************************************************************************************</span>
<span class="cm">*</span>
<span class="cm">* FILE   :	DHF.H</span>
<span class="cm">*</span>
<span class="cm">* DATE	:	$Date: 2004/07/19 08:16:14 $   $Revision: 1.2 $</span>
<span class="cm">* Original	:	2004/05/17 07:33:13    Revision: 1.25      Tag: hcf7_t20040602_01</span>
<span class="cm">* Original	:	2004/05/11 06:03:14    Revision: 1.24      Tag: hcf7_t7_20040513_01</span>
<span class="cm">* Original	:	2004/04/15 09:24:42    Revision: 1.22      Tag: hcf7_t7_20040415_01</span>
<span class="cm">* Original	:	2004/04/09 14:35:52    Revision: 1.21      Tag: t7_20040413_01</span>
<span class="cm">* Original	:	2004/04/01 15:32:55    Revision: 1.18      Tag: t7_20040401_01</span>
<span class="cm">* Original	:	2004/03/10 15:39:28    Revision: 1.15      Tag: t20040310_01</span>
<span class="cm">* Original	:	2004/03/04 11:03:38    Revision: 1.13      Tag: t20040304_01</span>
<span class="cm">* Original	:	2004/02/25 14:14:37    Revision: 1.11      Tag: t20040302_03</span>
<span class="cm">* Original	:	2004/02/24 13:00:28    Revision: 1.10      Tag: t20040224_01</span>
<span class="cm">* Original	:	2004/02/19 10:57:28    Revision: 1.8      Tag: t20040219_01</span>
<span class="cm">*</span>
<span class="cm">* AUTHOR :	John Meertens</span>
<span class="cm">*			Nico Valster</span>
<span class="cm">*</span>
<span class="cm">* SPECIFICATION: .........</span>
<span class="cm">*</span>
<span class="cm">* DESC   :	structure definitions and function prototypes for unit DHF.</span>
<span class="cm">*</span>
<span class="cm">*			Customizable via HCFCFG.H, which is included indirectly via HCF.H</span>
<span class="cm">*</span>
<span class="cm">***************************************************************************************************************</span>
<span class="cm">*</span>
<span class="cm">*</span>
<span class="cm">* SOFTWARE LICENSE</span>
<span class="cm">*</span>
<span class="cm">* This software is provided subject to the following terms and conditions,</span>
<span class="cm">* which you should read carefully before using the software.  Using this</span>
<span class="cm">* software indicates your acceptance of these terms and conditions.  If you do</span>
<span class="cm">* not agree with these terms and conditions, do not use the software.</span>
<span class="cm">*</span>
<span class="cm">* COPYRIGHT (C) 1994 - 1995	by AT&amp;T.				All Rights Reserved</span>
<span class="cm">* COPYRIGHT (C) 1999 - 2000 by Lucent Technologies.	All Rights Reserved</span>
<span class="cm">* COPYRIGHT (C) 2001 - 2004	by Agere Systems Inc.	All Rights Reserved</span>
<span class="cm">* All rights reserved.</span>
<span class="cm">*</span>
<span class="cm">* Redistribution and use in source or binary forms, with or without</span>
<span class="cm">* modifications, are permitted provided that the following conditions are met:</span>
<span class="cm">*</span>
<span class="cm">* . Redistributions of source code must retain the above copyright notice, this</span>
<span class="cm">*    list of conditions and the following Disclaimer as comments in the code as</span>
<span class="cm">*    well as in the documentation and/or other materials provided with the</span>
<span class="cm">*    distribution.</span>
<span class="cm">*</span>
<span class="cm">* . Redistributions in binary form must reproduce the above copyright notice,</span>
<span class="cm">*    this list of conditions and the following Disclaimer in the documentation</span>
<span class="cm">*    and/or other materials provided with the distribution.</span>
<span class="cm">*</span>
<span class="cm">* . Neither the name of Agere Systems Inc. nor the names of the contributors</span>
<span class="cm">*    may be used to endorse or promote products derived from this software</span>
<span class="cm">*    without specific prior written permission.</span>
<span class="cm">*</span>
<span class="cm">* Disclaimer</span>
<span class="cm">*</span>
<span class="cm">* THIS SOFTWARE IS PROVIDED &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES,</span>
<span class="cm">* INCLUDING, BUT NOT LIMITED TO, INFRINGEMENT AND THE IMPLIED WARRANTIES OF</span>
<span class="cm">* MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  ANY</span>
<span class="cm">* USE, MODIFICATION OR DISTRIBUTION OF THIS SOFTWARE IS SOLELY AT THE USERS OWN</span>
<span class="cm">* RISK. IN NO EVENT SHALL AGERE SYSTEMS INC. OR CONTRIBUTORS BE LIABLE FOR ANY</span>
<span class="cm">* DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span>
<span class="cm">* (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</span>
<span class="cm">* LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</span>
<span class="cm">* ON ANY THEORY OF LIABILITY, INCLUDING, BUT NOT LIMITED TO, CONTRACT, STRICT</span>
<span class="cm">* LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT</span>
<span class="cm">* OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH</span>
<span class="cm">* DAMAGE.</span>
<span class="cm">*</span>
<span class="cm">*</span>
<span class="cm">**************************************************************************************************************/</span>


<span class="cp">#ifdef _WIN32_WCE</span>
<span class="cp">#include &lt;windef.h&gt;</span>
<span class="cp">#endif</span>

<span class="cp">#include &quot;hcf.h&quot;   		 	</span><span class="cm">/* includes HCFCFG.H too */</span><span class="cp"></span>

<span class="cp">#ifdef DHF_UIL</span>
<span class="cp">#define GET_INFO(pp)  uil_get_info((LTVP)pp)</span>
<span class="cp">#define PUT_INFO(pp)  uil_put_info((LTVP)pp)</span>
<span class="cp">#else</span>
<span class="cp">#define GET_INFO(pp)  hcf_get_info(ifbp, (LTVP)pp)</span>
<span class="cp">#define PUT_INFO(pp)  hcf_put_info(ifbp, (LTVP)pp)</span>
<span class="cp">#endif</span>


<span class="cm">/*---- Defines --------------------------------------------------------------*/</span>
<span class="cp">#define CODEMASK				0x0000FFFFL    	</span><span class="cm">/* Codemask for plug records */</span><span class="cp"></span>

<span class="cm">/*---- Error numbers --------------------------------------------------------*/</span>

<span class="cp">#define DHF_ERR_INCOMP_FW		0x40	</span><span class="cm">/* Image not compatible with NIC */</span><span class="cp"></span>

<span class="cm">/*---- Type definitions -----------------------------------------------------*/</span>
<span class="cm">/* needed by dhf_wrap.c */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">LTVP</span> 	<span class="n">ltvp</span><span class="p">;</span>
	<span class="n">hcf_16</span>	<span class="n">len</span><span class="p">;</span>
<span class="p">}</span> <span class="n">LTV_INFO_STRUCT</span> <span class="p">,</span> <span class="o">*</span><span class="n">LTV_INFO_STRUCT_PTR</span><span class="p">;</span>


<span class="cm">/*</span>
<span class="cm"> * Type: 	plugrecord</span>
<span class="cm"> *</span>
<span class="cm"> * Abstract: This structure represents a Plug Data Record.</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * This structure is used to overlay the plug records in the firmware memory image.</span>
<span class="cm"> */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">hcf_32</span>	<span class="n">code</span><span class="p">;</span>      	<span class="cm">/* Code to plug */</span>
	<span class="n">hcf_32</span>	<span class="n">addr</span><span class="p">;</span>      	<span class="cm">/* Address within the memory image to plug it in */</span>
	<span class="n">hcf_32</span>	<span class="n">len</span><span class="p">;</span>       	<span class="cm">/* The # of bytes which are available to store it */</span>
<span class="p">}</span> <span class="n">plugrecord</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Type: 	stringrecord</span>
<span class="cm"> *</span>
<span class="cm"> * Abstract: This structure represents a Firmware debug/assert string</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * This structure is used to get assert and debug outputs in the driver and/or utility to be</span>
<span class="cm"> * able to get more visability of the FW.</span>
<span class="cm"> */</span>

<span class="cp">#define MAX_DEBUGSTRINGS 		1024</span>
<span class="cp">#define MAX_DEBUGSTRING_LEN 	  82</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">hcf_32</span>	<span class="n">id</span><span class="p">;</span>
	<span class="kt">char</span> 	<span class="n">str</span><span class="p">[</span><span class="n">MAX_DEBUGSTRING_LEN</span><span class="p">];</span>
<span class="p">}</span> <span class="n">stringrecord</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Type: 	exportrecord</span>
<span class="cm"> *</span>
<span class="cm"> * Abstract: This structure represents a Firmware export of a variable</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * This structure is used to get the address and name of a FW variable.</span>
<span class="cm"> */</span>

<span class="cp">#define MAX_DEBUGEXPORTS 		2048</span>
<span class="cp">#define MAX_DEBUGEXPORT_LEN 	  12</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">hcf_32</span>	<span class="n">id</span><span class="p">;</span>
	<span class="kt">char</span> 	<span class="n">str</span><span class="p">[</span><span class="n">MAX_DEBUGEXPORT_LEN</span><span class="p">];</span>
<span class="p">}</span> <span class="n">exportrecord</span><span class="p">;</span>

<span class="cm">/* Offsets in memimage array p[] */</span>
<span class="cp">#define FWSTRINGS_FUNCTION		0</span>
<span class="cp">#define FWEXPORTS_FUNCTION		1</span>

<span class="cm">/*</span>
<span class="cm"> * Type: memimage</span>
<span class="cm"> *</span>
<span class="cm"> * Abstract: The &quot;root&quot; description of a complete memory image</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * This type represents an entire memory image. The image is built up of several</span>
<span class="cm"> * segments. These segments need not be contiguous areas in memory, in other words</span>
<span class="cm"> * the image may contain &#39;holes&#39;.</span>
<span class="cm"> *</span>
<span class="cm"> * The &#39;codep&#39; field points to an array of segment_descriptor structures.</span>
<span class="cm"> * The end of the array is indicated by a segment_descriptor of which all fields are zero.</span>
<span class="cm"> * The &#39;execution&#39; field is a 32-bit address representing the execution address</span>
<span class="cm"> *	of the firmware within the memory image. This address is zero in case of non-volatile</span>
<span class="cm"> *	memory download.</span>
<span class="cm"> * The &#39;compat&#39; field points to an array of TODO</span>
<span class="cm"> * 	The end of the array is indicated by a plug record of which all fields are zero.</span>
<span class="cm"> * The &#39;identity&#39; field points to an array of TODO</span>
<span class="cm"> * 	The end of the array is indicated by a plug record of which all fields are zero.</span>
<span class="cm"> * The Hermes-I specific &#39;pdaplug&#39; field points to an array of Production Data Plug record structures.</span>
<span class="cm"> * 	The end of the array is indicated by a plug record of which all fields are zero.</span>
<span class="cm"> * The Hermes-I specific &#39;priplug&#39; field points to an array of Primary Information Plug record structures.</span>
<span class="cm"> * 	The end of the array is indicated by a plug record of which all fields are zero.</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">char</span>					<span class="n">signature</span><span class="p">[</span><span class="mi">14</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>	<span class="cm">/* signature (see DHF.C) + C/LE-Bin/BE-Bin-flag + format version */</span>
	<span class="n">CFG_PROG_STRCT</span> <span class="n">FAR</span> <span class="o">*</span><span class="n">codep</span><span class="p">;</span>				<span class="cm">/* */</span>
	<span class="n">hcf_32</span>           	 	<span class="n">execution</span><span class="p">;</span>    		<span class="cm">/* Execution address of the firmware */</span>
	<span class="kt">void</span> <span class="n">FAR</span> <span class="o">*</span><span class="n">place_holder_1</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">FAR</span>  		     	<span class="o">*</span><span class="n">place_holder_2</span><span class="p">;</span>
	<span class="n">CFG_RANGE20_STRCT</span> <span class="n">FAR</span>  	<span class="o">*</span><span class="n">compat</span><span class="p">;</span>      		<span class="cm">/* Pointer to the compatibility info records */</span>
	<span class="n">CFG_IDENTITY_STRCT</span> <span class="n">FAR</span> 	<span class="o">*</span><span class="n">identity</span><span class="p">;</span>    		<span class="cm">/* Pointer to the identity info records */</span>
	<span class="kt">void</span> <span class="n">FAR</span>				<span class="o">*</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>				<span class="cm">/* (Up to 9) pointers for (future) expansion</span>
<span class="cm">												 * currently in use:</span>
<span class="cm">												 *  - F/W printf information</span>
<span class="cm">												 */</span>
<span class="p">}</span> <span class="n">memimage</span><span class="p">;</span>



<span class="cm">/*-----------------------------------------------------------------------------</span>
<span class="cm"> *</span>
<span class="cm"> * DHF function prototypes</span>
<span class="cm"> *</span>
<span class="cm"> *---------------------------------------------------------------------------*/</span>

<span class="n">EXTERN_C</span> <span class="kt">int</span> <span class="n">dhf_download_fw</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">ifbp</span><span class="p">,</span> <span class="n">memimage</span> <span class="o">*</span><span class="n">fw</span><span class="p">);</span>	<span class="cm">/* ifbp, ignored when using the UIL */</span>
<span class="n">EXTERN_C</span> <span class="kt">int</span> <span class="n">dhf_download_binary</span><span class="p">(</span><span class="n">memimage</span> <span class="o">*</span><span class="n">fw</span><span class="p">);</span>


<span class="cm">/*-----------------------------------------------------------------------------</span>
<span class="cm"> *</span>
<span class="cm"> * Functions to be provided by the user of the DHF module.</span>
<span class="cm"> *</span>
<span class="cm"> *---------------------------------------------------------------------------*/</span>

<span class="cm">/* defined in DHF.C; see there for comments */</span>
<span class="n">EXTERN_C</span> <span class="n">hcf_16</span> <span class="o">*</span><span class="n">find_record_in_pda</span><span class="p">(</span><span class="n">hcf_16</span> <span class="o">*</span><span class="n">pdap</span><span class="p">,</span> <span class="n">hcf_16</span> <span class="n">code</span><span class="p">);</span>

<span class="cp">#endif  </span><span class="cm">/* DHF_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
