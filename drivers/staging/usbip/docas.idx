d | userspace |  | 11 items |  | Christopher Harvey | charvey@matrox.com | 1334076426 |  | staging: usbip: fix potential segfault because of unchecked return value of strchr.  This doesn't happen with the usbip virtual hci module, but another module wanting to interface with this user space code could cause a seg-fault by sending data without newlines.  Signed-off-by: Christopher Harvey <charvey@matrox.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | Makefile | g | 331B |  | matt mooney | mfm@muteddisk.com | 1305217077 |  | staging: usbip: edit Kconfig and rename CONFIG options  Change modules usbip_common_mod to usbip-core and usbip to usbip-host; edit configuration option help text; rename CONFIG options to use a USBIP prefix and change COMMON to CORE in both the Kconfig and Makefiles; edit the menu entries; and edit the driver descriptions.  Signed-off-by: matt mooney <mfm@muteddisk.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | usbip_event.c | s | 2.8K | 104 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103928 |  | staging: Add export.h for THIS_MODULE/EXPORT_SYMBOL to drivers/staging users.  Lots of drivers have in the past expected the presence of basic things like THIS_MODULE and EXPORT_SYMBOL.  With the header cleanup, they wont have these.  Call out the include explicitly.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | stub.h | s | 2.8K | 93 | Bart Westgeest | bart@elbrys.com | 1328809342 |  | staging: usbip: removed unused structure field  Signed-off-by: Bart Westgeest <bart@elbrys.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | vhci_hcd.c | s | 29K | 1004 | Oleg Nesterov | oleg@redhat.com | 1334075284 |  | staging: usbip: fix the usage of kthread_stop()  stub_shutdown_connection() and vhci_shutdown_connection() use task_is_dead() before kthread_stop(). This buys nothing and wrong. kthread_stop() is fine even if this thread is dead. However, if it is dead nothing protects this task_struct, we shouldn't touch this memory.  Change the code to do the necessary get_task_struct/put_task_struct.  This patch assumes that  	- xxx_shutdown_connection() is always called, so we can't 	  leak the task_struct.  	- kthread_stop_put() can't be called twice on the same task.  Signed-off-by: Oleg Nesterov <oleg@redhat.com> Cc: Tobias Klauser <tklauser@distanz.ch> Cc: Matt Mooney <mfm@muteddisk.com>, Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | usbip_common.h | s | 10K | 299 | Oleg Nesterov | oleg@redhat.com | 1334075284 |  | staging: usbip: fix the usage of kthread_stop()  stub_shutdown_connection() and vhci_shutdown_connection() use task_is_dead() before kthread_stop(). This buys nothing and wrong. kthread_stop() is fine even if this thread is dead. However, if it is dead nothing protects this task_struct, we shouldn't touch this memory.  Change the code to do the necessary get_task_struct/put_task_struct.  This patch assumes that  	- xxx_shutdown_connection() is always called, so we can't 	  leak the task_struct.  	- kthread_stop_put() can't be called twice on the same task.  Signed-off-by: Oleg Nesterov <oleg@redhat.com> Cc: Tobias Klauser <tklauser@distanz.ch> Cc: Matt Mooney <mfm@muteddisk.com>, Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | vhci_rx.c | s | 6.4K | 216 | Christopher Harvey | charvey@matrox.com | 1334076426 |  | staging: usbip: Fix typo in printed text  Signed-off-by: Christopher Harvey <charvey@matrox.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | stub_main.c | s | 6.4K | 240 | Bart Westgeest | bart@elbrys.com | 1328739255 |  | staging: usbip: fix to prevent potentially using uninitialized spinlock  The stub_probe function can be called as soon as the stub_driver is registered. This can lead to the busid_table_lock being used before it is initialized. Moved calling the init_busid_table function (which initalizes this spinlock) to be called earlier in the init function to prevent this from happening.  Signed-off-by: Bart Westgeest <bart@elbrys.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | usbip_common.c | s | 19K | 712 | Bart Westgeest | bart@elbrys.com | 1328809343 |  | staging: usbip: changed function return type to void  The function usbip_pad_iso never returns anything but 0 (success).  Signed-off-by: Bart Westgeest <bart@elbrys.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | vhci_tx.c | s | 5.6K | 174 | matt mooney | mfm@muteddisk.com | 1305849450 |  | staging: usbip: replace usbip_u{dbg,err,info} and printk with dev_ and pr_  This switches all of the usbip_u{dbg,err,info} and printk statements to dev_<level>, if possible, or pr_<level> macros. And removes a few unnecessary debug statements.  Signed-off-by: matt mooney <mfm@muteddisk.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | vhci_sysfs.c | s | 6.0K | 194 | Oleg Nesterov | oleg@redhat.com | 1334075284 |  | staging: usbip: fix the usage of kthread_stop()  stub_shutdown_connection() and vhci_shutdown_connection() use task_is_dead() before kthread_stop(). This buys nothing and wrong. kthread_stop() is fine even if this thread is dead. However, if it is dead nothing protects this task_struct, we shouldn't touch this memory.  Change the code to do the necessary get_task_struct/put_task_struct.  This patch assumes that  	- xxx_shutdown_connection() is always called, so we can't 	  leak the task_struct.  	- kthread_stop_put() can't be called twice on the same task.  Signed-off-by: Oleg Nesterov <oleg@redhat.com> Cc: Tobias Klauser <tklauser@distanz.ch> Cc: Matt Mooney <mfm@muteddisk.com>, Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | README | g | 191B |  | Greg Kroah-Hartman | gregkh@suse.de | 1307480931 |  | staging: usbip: README: we need to document the protocol  Document the protocol.  Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | stub_dev.c | s | 13K | 452 | Oleg Nesterov | oleg@redhat.com | 1334075284 |  | staging: usbip: fix the usage of kthread_stop()  stub_shutdown_connection() and vhci_shutdown_connection() use task_is_dead() before kthread_stop(). This buys nothing and wrong. kthread_stop() is fine even if this thread is dead. However, if it is dead nothing protects this task_struct, we shouldn't touch this memory.  Change the code to do the necessary get_task_struct/put_task_struct.  This patch assumes that  	- xxx_shutdown_connection() is always called, so we can't 	  leak the task_struct.  	- kthread_stop_put() can't be called twice on the same task.  Signed-off-by: Oleg Nesterov <oleg@redhat.com> Cc: Tobias Klauser <tklauser@distanz.ch> Cc: Matt Mooney <mfm@muteddisk.com>, Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | stub_tx.c | s | 10K | 330 | Randy Dunlap | randy.dunlap@oracle.com | 1310158795 |  | staging: fix usbip printk format warning  Fix usbip printk format warning for size_t:  drivers/staging/usbip/stub_tx.c:236: warning: format '%lu' expects type 'long unsigned int', but argument 4 has type 'size_t'  Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | Kconfig | g | 1.2K |  | matt mooney | mfm@muteddisk.com | 1305217077 |  | staging: usbip: edit Kconfig and rename CONFIG options  Change modules usbip_common_mod to usbip-core and usbip to usbip-host; edit configuration option help text; rename CONFIG options to use a USBIP prefix and change COMMON to CORE in both the Kconfig and Makefiles; edit the menu entries; and edit the driver descriptions.  Signed-off-by: matt mooney <mfm@muteddisk.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | vhci.h | s | 3.0K | 105 | Tobias Klauser | tklauser@distanz.ch | 1314135754 |  | staging: usbip: Add header guards to stub.h and vhci.h  stub.h and vhci.h are missing proper #ifndef/#define header guards, so add them.  Signed-off-by: Tobias Klauser <tklauser@distanz.ch> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | stub_rx.c | s | 15K | 498 | Bart Westgeest | bart@elbrys.com | 1328809343 |  | staging: usbip: removed #if 0'd out code  Signed-off-by: Bart Westgeest <bart@elbrys.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | usbip_protocol.txt | g | 22K |  | Masanari Iida | standby24x7@gmail.com | 1334079061 |  | staging: Fix typo in multiple files  Collect spelling typo in multiple files within staging directory.  Signed-off-by: Masanari Iida <standby24x7@gmail.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
