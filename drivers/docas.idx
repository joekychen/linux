d | message |  | 3 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338513018 |  | Merge branch 'akpm' (Andrew's patch-bomb)  Merge misc patches from Andrew Morton:   - the "misc" tree - stuff from all over the map   - checkpatch updates   - fatfs   - kmod changes   - procfs   - cpumask   - UML   - kexec   - mqueue   - rapidio   - pidns   - some checkpoint-restore feature work.  Reluctantly.  Most of it    delayed a release.  I'm still rather worried that we don't have a    clear roadmap to completion for this work.  * emailed from Andrew Morton <akpm@linux-foundation.org>: (78 patches)   kconfig: update compression algorithm info   c/r: prctl: add ability to set new mm_struct::exe_file   c/r: prctl: extend PR_SET_MM to set up more mm_struct entries   c/r: procfs: add arg_start/end, env_start/end and exit_code members to /proc/$pid/stat   syscalls, x86: add __NR_kcmp syscall   fs, proc: introduce /proc/<pid>/task/<tid>/children entry   sysctl: make kernel.ns_last_pid control dependent on CHECKPOINT_RESTORE   aio/vfs: cleanup of rw_copy_check_uvector() and compat_rw_copy_check_uvector()   eventfd: change int to __u64 in eventfd_signal()   fs/nls: add Apple NLS   pidns: make killed children autoreap   pidns: use task_active_pid_ns in do_notify_parent   rapidio/tsi721: add DMA engine support   rapidio: add DMA engine support for RIO data transfers   ipc/mqueue: add rbtree node caching support   tools/selftests: add mq_perf_tests   ipc/mqueue: strengthen checks on mqueue creation   ipc/mqueue: correct mq_attr_ok test   ipc/mqueue: improve performance of send/recv   selftests: add mq_open_tests   ...
d | net |  | 44 items |  | Bruce Allan | bruce.w.allan@intel.com | 1341127532 |  | e1000e: remove use of IP payload checksum  Currently only used when packet split mode is enabled with jumbo frames, IP payload checksum (for fragmented UDP packets) is mutually exclusive with receive hashing offload since the hardware uses the same space in the receive descriptor for the hardware-provided packet checksum and the RSS hash, respectively.  Users currently must disable jumbos when receive hashing offload is enabled, or vice versa, because of this incompatibility. Since testing has shown that IP payload checksum does not provide any real benefit, just remove it so that there is no longer a choice between jumbos or receive hashing offload but not both as done in other Intel GbE drivers (e.g. e1000, igb).  Also, add a missing check for IP checksum error reported by the hardware; let the stack verify the checksum when this happens.  CC: stable <stable@vger.kernel.org> [3.4] Signed-off-by: Bruce Allan <bruce.w.allan@intel.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com> Signed-off-by: David S. Miller <davem@davemloft.net>
d | virt |  | 3 items |  | Mihai Caraman | mihai.caraman@freescale.com | 1318578962 |  | drivers/virt: add ioctl for 32-bit compat on 64-bit to fsl-hv-manager  Add ioctl to Freescale hypervisor management driver for 32-bit user-space applications running on 64-bit guests.  Signed-off-by: Mihai Caraman <mihai.caraman@freescale.com> Acked-by: Timur Tabi <timur@freescale.com> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
d | sn |  | 3 items |  | Tejun Heo | tj@kernel.org | 1269954152 |  | include cleanup: Update gfp.h and slab.h includes to prepare for breaking implicit slab.h inclusion from percpu.h  percpu.h is included by sched.h and module.h and thus ends up being included when building most .c files.  percpu.h includes slab.h which in turn includes gfp.h making everything defined by the two files universally available and complicating inclusion dependencies.  percpu.h -> slab.h dependency is about to be removed.  Prepare for this change by updating users of gfp and slab facilities include those headers directly instead of assuming availability.  As this conversion needs to touch large number of source files, the following script is used as the basis of conversion.    http://userweb.kernel.org/~tj/misc/slabh-sweep.py  The script does the followings.  * Scan files for gfp and slab usages and update includes such that   only the necessary includes are there.  ie. if only gfp is used,   gfp.h, if slab is used, slab.h.  * When the script inserts a new include, it looks at the include   blocks and try to put the new include such that its order conforms   to its surrounding.  It's put in the include block which contains   core kernel includes, in the same order that the rest are ordered -   alphabetical, Christmas tree, rev-Xmas-tree or at the end if there   doesn't seem to be any matching order.  * If the script can't find a place to put a new include (mostly   because the file doesn't have fitting include block), it prints out   an error message indicating which .h file needs to be added to the   file.  The conversion was done in the following steps.  1. The initial automatic conversion of all .c files updated slightly    over 4000 files, deleting around 700 includes and adding ~480 gfp.h    and ~3000 slab.h inclusions.  The script emitted errors for ~400    files.  2. Each error was manually checked.  Some didn't need the inclusion,    some needed manual addition while adding it to implementation .h or    embedding .c file was more appropriate for others.  This step added    inclusions to around 150 files.  3. The script was run again and the output was compared to the edits    from #2 to make sure no file was left behind.  4. Several build tests were done and a couple of problems were fixed.    e.g. lib/decompress_*.c used malloc/free() wrappers around slab    APIs requiring slab.h to be added manually.  5. The script was run on all .h files but without automatically    editing them as sprinkling gfp.h and slab.h inclusions around .h    files could easily lead to inclusion dependency hell.  Most gfp.h    inclusion directives were ignored as stuff from gfp.h was usually    wildly available and often used in preprocessor macros.  Each    slab.h inclusion directive was examined and added manually as    necessary.  6. percpu.h was updated not to include slab.h.  7. Build test were done on the following configurations and failures    were fixed.  CONFIG_GCOV_KERNEL was turned off for all tests (as my    distributed build env didn't work with gcov compiles) and a few    more options had to be turned off depending on archs to make things    build (like ipr on powerpc/64 which failed due to missing writeq).     * x86 and x86_64 UP and SMP allmodconfig and a custom test config.    * powerpc and powerpc64 SMP allmodconfig    * sparc and sparc64 SMP allmodconfig    * ia64 SMP allmodconfig    * s390 SMP allmodconfig    * alpha SMP allmodconfig    * um on x86_64 SMP allmodconfig  8. percpu.h modifications were reverted so that it could be applied as    a separate patch and serve as bisection point.  Given the fact that I had only a couple of failures from tests on step 6, I'm fairly confident about the coverage of this conversion patch. If there is a breakage, it's likely to be something in one of the arch headers which should be easily discoverable easily on most builds of the specific arch.  Signed-off-by: Tejun Heo <tj@kernel.org> Guess-its-ok-by: Christoph Lameter <cl@linux-foundation.org> Cc: Ingo Molnar <mingo@redhat.com> Cc: Lee Schermerhorn <Lee.Schermerhorn@hp.com>
f | Makefile | g | 3.9K |  | Linus Torvalds | torvalds@linux-foundation.org | 1338060147 |  | 
d | dca |  | 4 items |  | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103903 |  | drivers/dca: Add export.h for THIS_MODULE to dca-sysfs.c  Ensure we have access to the THIS_MODLUE macro once we clean up the implicit module.h usage.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
d | rapidio |  | 10 items |  | Alexandre Bounine | alexandre.bounine@idt.com | 1338511771 |  | rapidio/tsi721: add DMA engine support  Adds support for DMA Engine API into Tsi721 mport driver.  Includes following changes for Tsi721 driver: - Modifies BDMA register offset definitions to support per-channel handling - Separates BDMA channel reserved for RIO Maintenance requests - Adds DMA Engine callback routines  Signed-off-by: Alexandre Bounine <alexandre.bounine@idt.com> Cc: Dan Williams <dan.j.williams@intel.com> Cc: Vinod Koul <vinod.koul@intel.com> Cc: Li Yang <leoli@freescale.com> Cc: Matt Porter <mporter@kernel.crashing.org> Cc: Paul Gortmaker <paul.gortmaker@windriver.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | ptp |  | 8 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1337739770 |  | Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/trivial  Pull trivial updates from Jiri Kosina:  "As usual, it's mostly typo fixes, redundant code elimination and some   documentation updates."  * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/trivial: (57 commits)   edac, mips: don't change code that has been removed in edac/mips tree   xtensa: Change mail addresses of Hannes Weiner and Oskar Schirmer   lib: Change mail address of Oskar Schirmer   net: Change mail address of Oskar Schirmer   arm/m68k: Change mail address of Sebastian Hess   i2c: Change mail address of Oskar Schirmer   net: Fix tcp_build_and_update_options comment in struct tcp_sock   atomic64_32.h: fix parameter naming mismatch   Kconfig: replace "--- help ---" with "---help---"   c2port: fix bogus Kconfig "default no"   edac: Fix spelling errors.   qla1280: Remove redundant NULL check before release_firmware() call   remoteproc: remove redundant NULL check before release_firmware()   qla2xxx: Remove redundant NULL check before release_firmware() call.   aic94xx: Get rid of redundant NULL check before release_firmware() call   tehuti: delete redundant NULL check before release_firmware()   qlogic: get rid of a redundant test for NULL before call to release_firmware()   bna: remove redundant NULL test before release_firmware()   tg3: remove redundant NULL test before release_firmware() call   typhoon: get rid of redundant conditional before all to release_firmware()   ...
d | uwb |  | 30 items |  | Oliver Neukum | oliver@neukum.org | 1334780151 |  | uwb: fix error handling  Fatal errors such as a device disconnect must not trigger error handling. The error returns must be checked.  Signed-off-by: Oliver Neukum <oneukum@suse.de> Cc: stable <stable@vger.kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | media |  | 10 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1340661189 |  | Merge branch 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media  Pull media fixes from Mauro Carvalho Chehab.  Trivial conflict due to new USB HID ID's being added next to each other (Baanto vs Axentia).  * 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media: (44 commits)   [media] smia: Fix compile failures   [media]  Fix VIDIOC_DQEVENT docbook entry   [media] s5p-fimc: Fix control creation function   [media] s5p-mfc: Fix checkpatch error in s5p_mfc_shm.h file   [media] s5p-mfc: Fix setting controls   [media] v4l/s5p-mfc: added image size align in VIDIOC_TRY_FMT   [media] v4l/s5p-mfc: corrected encoder v4l control definitions   [media] v4l: mem2mem_testdev: Fix race conditions in driver   [media] s5p-mfc: Bug fix of timestamp/timecode copy mechanism   [media] cxd2820r: Fix an incorrect modulation type bitmask   [media] em28xx: Show a warning if the board does not support remote controls   [media] em28xx: Add remote control support for Terratec's Cinergy HTC Stick HD   [media] USB: Staging: media: lirc: initialize spinlocks before usage   [media] Revert "[media] media: mx2_camera: Fix mbus format handling"   [media] bw-qcam: driver and pixfmt documentation fixes   [media] cx88: fix firmware load on big-endian systems   [media] cx18: support big-endian systems   [media] ivtv: fix support for big-endian systems   [media] tuner-core: return the frequency range of the correct tuner   [media] v4l2-dev.c: fix g_parm regression in determine_valid_ioctls()   ...
d | accessibility |  | 3 items |  | Alan Cox | alan@linux.intel.com | 1331232635 |  | vt:tackle kbd_table  Keyboard struct lifetime is easy, but the locking is not and is completely ignored by the existing code. Tackle this one head on  - Make the kbd_table private so we can run down all direct users - Hoick the relevant ioctl handlers into the keyboard layer - Lock them with the keyboard lock so they don't change mid keypress - Add helpers for things like console stop/start so we isolate the poking   around properly - Tweak the braille console so it still builds  There are a couple of FIXME locking cases left for ioctls that are so hideous they should be addressed in a later patch. After this patch the kbd_table is private and all the keyboard jiggery pokery is in one place.  This update fixes speakup and also a memory leak in the original.  Signed-off-by: Alan Cox <alan@linux.intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | vlynq |  | 3 items |  | Thomas Gleixner | tglx@linutronix.de | 1301333584 |  | vlynq: Convert irq functions  Convert to the new irq_chip functions and the new namespace.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Acked-by: Florian Fainelli <florian@openwrt.org> LKML-Reference: <alpine.LFD.2.00.1103252150180.31464@localhost6.localdomain6>
d | iommu |  | 22 items |  | Joerg Roedel | joerg.roedel@amd.com | 1338806864 |  | iommu/amd: Fix deadlock in ppr-handling error path  In the error path of the ppr_notifer it can happen that the iommu->lock is taken recursivly. This patch fixes the problem by releasing the iommu->lock before any notifier is invoked. This also requires to move the erratum workaround for the ppr-log (interrupt may be faster than data in the log) one function up.  Cc: stable@vger.kernel.org # v3.3, v3.4 Signed-off-by: Joerg Roedel <joerg.roedel@amd.com>
d | clk |  | 11 items |  | Rajendra Nayak | rnayak@ti.com | 1341342314 |  | clk: fix parent validation in __clk_set_parent()  The below commit introduced a bug in __clk_set_parent() which could cause it to *skip* the parent validation which makes sure the parent passed to the api is a valid one.      commit 7975059db572eb47f0fb272a62afeae272a4b209     Author: Rajendra Nayak <rnayak@ti.com>     Date:   Wed Jun 6 14:41:31 2012 +0530          clk: Allow late cache allocation for clk->parents  This was identified by the following compiler warning..      drivers/clk/clk.c: In function '__clk_set_parent':     drivers/clk/clk.c:1083:5: warning: 'i' may be used uninitialized in this function [-Wuninitialized]  .. as reported by Marc Kleine-Budde.  There were various options discussed on how to fix this, one being initing 'i' to clk->num_parents, but the below approach was found to be more appropriate as it also makes the 'parent validation' code simpler to read.  Reported-by: Marc Kleine-Budde <mkl@pengutronix.de> Signed-off-by: Rajendra Nayak <rnayak@ti.com> Signed-off-by: Mike Turquette <mturquette@linaro.org> Cc: stable@kernel.org
d | staging |  | 58 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1340661189 |  | Merge branch 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media  Pull media fixes from Mauro Carvalho Chehab.  Trivial conflict due to new USB HID ID's being added next to each other (Baanto vs Axentia).  * 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media: (44 commits)   [media] smia: Fix compile failures   [media]  Fix VIDIOC_DQEVENT docbook entry   [media] s5p-fimc: Fix control creation function   [media] s5p-mfc: Fix checkpatch error in s5p_mfc_shm.h file   [media] s5p-mfc: Fix setting controls   [media] v4l/s5p-mfc: added image size align in VIDIOC_TRY_FMT   [media] v4l/s5p-mfc: corrected encoder v4l control definitions   [media] v4l: mem2mem_testdev: Fix race conditions in driver   [media] s5p-mfc: Bug fix of timestamp/timecode copy mechanism   [media] cxd2820r: Fix an incorrect modulation type bitmask   [media] em28xx: Show a warning if the board does not support remote controls   [media] em28xx: Add remote control support for Terratec's Cinergy HTC Stick HD   [media] USB: Staging: media: lirc: initialize spinlocks before usage   [media] Revert "[media] media: mx2_camera: Fix mbus format handling"   [media] bw-qcam: driver and pixfmt documentation fixes   [media] cx88: fix firmware load on big-endian systems   [media] cx18: support big-endian systems   [media] ivtv: fix support for big-endian systems   [media] tuner-core: return the frequency range of the correct tuner   [media] v4l2-dev.c: fix g_parm regression in determine_valid_ioctls()   ...
d | sh |  | 8 items |  | Paul Mundt | lethal@linux-sh.org | 1337681275 |  | sh: intc: Kill off special reservation interface.  At present reserving the IRLs in the IRQ bitmap in addition to the dropping of the legacy IRQ pre-allocation prevent IRL IRQs from being allocated for the x3proto board.  The only reason to permit reservations was to lock down possible hardware vectors prior to dynamic IRQ scanning, but this doesn't matter much given that the hardware controller configuration is sorted before we get around to doing any dynamic IRQ allocation anyways. Beyond that, all of the tables are __init annotated, so quite a bit more work would need to be done to support reconfiguring things like IRL controllers on the fly, much more than would ever make it worth the hassle.  Signed-off-by: Paul Mundt <lethal@linux-sh.org>
d | usb |  | 24 items |  | Craig Shelley | craig@microtron.org.uk | 1340752474 |  | USB: CP210x Add 10 Device IDs  This patch adds 10 device IDs for CP210x based devices from the following manufacturers: Timewave Clipsal Festo Link Instruments  Signed-off-by: Craig Shelley <craig@microtron.org.uk> Cc: stable <stable@vger.kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | ata |  | 101 items |  | Viresh Kumar | viresh.linux@gmail.com | 1340228376 |  | Viresh has moved  viresh.kumar@st.com email-id doesn't exist anymore as I have left the company.  Replace ST's id with viresh.linux@gmail.com.  It also updates .mailmap file to fix address for 'git shortlog'  Signed-off-by: Viresh Kumar <viresh.linux@gmail.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | sbus |  | 2 items |  | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
d | virtio |  | 8 items |  | Pawel Moll | pawel.moll@arm.com | 1337654775 |  | virtio-mmio: Devices parameter parsing  This patch adds an option to instantiate guest virtio-mmio devices basing on a kernel command line (or module) parameter, for example:  	virtio_mmio.devices=0x100@0x100b0000:48  Signed-off-by: Pawel Moll <pawel.moll@arm.com> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
d | clocksource |  | 15 items |  | Paul Mundt | lethal@linux-sh.org | 1339402216 |  | clocksource: sh_tmu: Use clockevents_config_and_register().  This switches over to the now exported clockevents_config() and clockevents_config_and_register() helpers. This knocks off a long-standing TMU TODO item.  Signed-off-by: Paul Mundt <lethal@linux-sh.org>
d | regulator |  | 58 items |  | Graeme Gregory | gg@slimlogic.co.uk | 1340447848 |  | regulator: palmas: fix regmap offsets for enable/disable  I forgot to apply the offsets for the regmap helper functions for enable/disable on SMPS10 and the LDO regulators. This means regulators will not enable/disable correctly.  Signed-off-by: Graeme Gregory <gg@slimlogic.co.uk> Tested-by: Sebastien Guiriec <s-guiriec@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
d | xen |  | 27 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1339805835 |  | 
d | rtc |  | 106 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338779757 |  | Merge branch 'pm-acpi' of git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm  Pull some left-over PM patches from Rafael J. Wysocki.  * 'pm-acpi' of git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm:   ACPI / PM: Make acpi_pm_device_sleep_state() follow the specification   ACPI / PM: Make __acpi_bus_get_power() cover D3cold correctly   ACPI / PM: Fix error messages in drivers/acpi/bus.c   rtc-cmos / PM: report wakeup event on ACPI RTC alarm   ACPI / PM: Generate wakeup events on fixed power button
d | ide |  | 101 items |  | Julia Lawall | Julia.Lawall@lip6.fr | 1339541501 |  | drivers/ide/ide-cs.c: adjust suspicious bit operation  IO_DATA_PATH_WIDTH_8 is 0, so a bit-and with it is always false.  The value IO_DATA_PATH_WIDTH covers the bits of the IO_DATA_PATH constants, so first pick those bits and then make the test using !=.  This problem was found using Coccinelle (http://coccinelle.lip6.fr/).  Signed-off-by: Julia Lawall <Julia.Lawall@lip6.fr> Signed-off-by: David S. Miller <davem@davemloft.net>
d | watchdog |  | 114 items |  | Wim Van Sebroeck | wim@iguana.be | 1340908856 |  | watchdog: core: fix WDIOC_GETSTATUS return value  In commit 7a87982420e5e126bfefeb42232d1fd92052794e we added a wrapper for the WDIOC_GETSTATUS ioctl call. The code results however in a different behaviour: it returns an error if the driver doesn't support the status operation. This is not according to the API that says that when we don't support the status operation, that we just should return a 0 value. Only when the device isn't there anymore, we should return an error.  Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
d | bcma |  | 17 items |  | Hauke Mehrtens | hauke@hauke-m.de | 1339177627 |  | bcma: fix null pointer in bcma_core_pci_irq_ctl  pc could be null if hosttype != BCMA_HOSTTYPE_PCI. If we are on a device without a pci core this function is called with pc = null by b43 and brcmsmac. If the host type is PCI we have a pci core as well and pc can not be null.  Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de> Signed-off-by: John W. Linville <linville@tuxdriver.com>
d | dio |  | 4 items |  | Stephen Rothwell | sfr@canb.auug.org.au | 1260094708 |  | m68k: don't export static inline functions  These now cause errors due to changes present in linux-next:  (__ksymtab_sorted+0x1258): undefined reference to `dio_dev_driver' (__ksymtab_sorted+0x4d48): undefined reference to `zorro_dev_driver'  Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
d | power |  | 46 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338491415 |  | 
d | edac |  | 50 items |  | Chris Metcalf | cmetcalf@tilera.com | 1339429396 |  | edac: Do alignment logic properly in edac_align_ptr()  The logic was checking the sizeof the structure being allocated to determine whether an alignment fixup was required.  This isn't right; what we actually care about is the alignment of the actual pointer that's about to be returned.  This became an issue recently because struct edac_mc_layer has a size that is not zero modulo eight, so we were taking the correctly-aligned pointer and forcing it to be misaligned. On Tile this caused an alignment exception.  Signed-off-by: Chris Metcalf <cmetcalf@tilera.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
d | hid |  | 82 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1340735021 |  | Merge branch 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/hid  Pull HID fixes from Jiri Kosina:  "The most important one is a purification of Kconfig for CONFIG_HID;   the inclusion of HID groups and autoloading didn't leave the Kconfig   in a really consistent state.  Henrik's patch fixes that.  In addition   to that, there are two small fixes for logitech and magicmouse   drivers."  * 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/hid:   HID: Fix the generic Kconfig options   HID: magicmouse: Correct report range of major / minor axes   HID: logitech: don't use stack based dj_report structures
d | crypto |  | 26 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338061349 |  | 
d | tty |  | 38 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1340230393 |  | 
d | vme |  | 6 items |  | Martyn Welch | martyn.welch@ge.com | 1336518094 |  | VME: Move API documentation to Documentation folder  The documentation for the VME device driver API is currently in drivers/vme/vme_api.txt, move this to Documentation/vme_api.txt  Signed-of-by: Martyn Welch <martyn.welch@ge.com> Acked-by: Rob Landley <rob@landley.net>  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | macintosh |  | 50 items |  | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1336525101 |  | powerpc/windfarm: Fix crash on SMU based machine after i2c conversion  We no longer get the device node in platform_data but instead where it belongs in struct device, so get it from there instead of blowing up.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
d | pcmcia |  | 81 items |  | Paul Parsons | lost.distance@yahoo.com | 1336355799 |  | pcmcia: add driver for hx4700  This patch adds support for the HP iPAQ hx4700 to the existing pxa2xx-pcmcia driver.  Signed-off-by: Paul Parsons <lost.distance@yahoo.com> Cc: Philipp Zabel <philipp.zabel@gmail.com> Signed-off-by: Haojian Zhuang <haojian.zhuang@gmail.com>
d | hwmon |  | 124 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1340990994 |  | Merge branch 'x86-urgent-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip  Pull x86 fixes from Ingo Molnar.  * 'x86-urgent-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip:   x86, cpufeature: Remove stray %s, add -w to mkcapflags.pl   x86, cpufeature: Catch duplicate CPU feature strings   x86, cpufeature: Rename X86_FEATURE_DTS to X86_FEATURE_DTHERM   x86: Fix kernel-doc warnings   x86, compat: Use test_thread_flag(TIF_IA32) in compat signal delivery
d | misc |  | 54 items |  | Tomas Winkler | tomas.winkler@intel.com | 1339626871 |  | misc: mei: set WDIOF_ALARMONLY on mei watchdog  mei watchdog doesn't reboot the system it only produces event therefore mark it as WDIOF_ALARMONLY.  This patch depends on: commit 2bbeed016dd96045ec82c3a309afddcc3a0db1d2 Author: Alan Cox <alan@linux.intel.com> watchdog: Add a flag to indicate the watchdog doesn't reboot things  Signed-off-by: Tomas Winkler <tomas.winkler@intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | hsi |  | 6 items |  | Carlos Chinea | carlos.chinea@nokia.com | 1335180212 |  | HSI: hsi_char: Remove max_data_size from sysfs  Remove max_data_size sysfs entry. Otherwise is possible to have a buffer overrun if its value is increased after the device is open.  Signed-off-by: Carlos Chinea <carlos.chinea@nokia.com> Acked-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org> Acked-by: Linus Walleij <linus.walleij@linaro.org>
d | uio |  | 11 items |  | Benedikt Spranger | b.spranger@linutronix.de | 1337096698 |  | uio_pdrv_genirq: get irq through platform resource if not set otherwise  Platform devices are configured through platform resources. The interrupt in the driver uio_pdrv_genirq is instead configured through a side channel i.e. the platform data structure. Make it possible to use the generic configuration scheme via platform resource.  Signed-off-by: Benedikt Spranger <b.spranger@linutronix.de> Acked-by: Magnus Damm <damm@opensource.se> Signed-off-by: "Hans J. Koch" <hjk@hansjkoch.de> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | s390 |  | 8 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338486670 |  | Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/s390/linux  Pull s390 patches from Heiko Carstens:  "A couple of s390 patches for the 3.5 merge window.  Just a collection   of bug fixes and cleanups."  * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/s390/linux:   s390/uaccess: fix access_ok compile warnings   s390/cmpxchg: select HAVE_CMPXCHG_LOCAL option   s390/cmpxchg: fix sign extension bugs   s390/cmpxchg: fix 1 and 2 byte memory accesses   s390/cmpxchg: fix compile warnings specific to s390   s390/cmpxchg: add missing memory barrier to cmpxchg64   s390/cpu: remove cpu "capabilities" sysfs attribute   s390/kernel: Fix smp_call_ipl_cpu() for offline CPUs   s390/kernel: Introduce memcpy_absolute() function   s390/headers: replace __s390x__ with CONFIG_64BIT where possible   s390/headers: remove #ifdef __KERNEL__ from not exported headers   s390/irq: split irq stats for cpu-measurement alert facilities   s390/kexec: Move early_pgm_check_handler() to text section   s390/kdump: Use real mode for PSW restart and kexec   s390/kdump: Account /sys/kernel/kexec_crash_size changes in OS info   s390/kernel: Remove OS info init function call and diag 308 for kdump
d | oprofile |  | 15 items |  | Will Deacon | will.deacon@arm.com | 1340288111 |  | oprofile: perf: use NR_CPUS instead or nr_cpumask_bits for static array  The OProfile perf backend uses a static array to keep track of the perf events on the system. When compiling with CONFIG_CPUMASK_OFFSTACK=y && SMP, nr_cpumask_bits is not a compile-time constant and the build will fail with:  oprofile_perf.c:28: error: variably modified 'perf_events' at file scope  This patch uses NR_CPUs instead of nr_cpumask_bits for the array initialisation. If this causes space problems in the future, we can always move to dynamic allocation for the events array.  Cc: Matt Fleming <matt@console-pimps.org> Reported-by: Russell King - ARM Linux <linux@arm.linux.org.uk> Signed-off-by: Will Deacon <will.deacon@arm.com> Cc: <stable@vger.kernel.org> # v2.6.37+ Signed-off-by: Robert Richter <robert.richter@amd.com>
d | hv |  | 11 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1337727733 |  | 
d | ieee802154 |  | 4 items |  | alex.bluesman.smirnov@gmail.com | alex.bluesman.smirnov@gmail.com | 1337195828 |  | drivers/ieee802154: IEEE 802.15.4 loopback driver  Add support for IEEE 802.15.4 loopback driver - useful development and debugging tool.  Signed-off-by: Alexander Smirnov <alex.bluesman.smirnov@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
d | mmc |  | 5 items |  | Ming Lei | ming.lei@canonical.com | 1340741430 |  | Revert "mmc: omap_hsmmc: Enable Auto CMD12"  This patch reverts the commit dba3c29ea4a1d5d544.  After bisecting, this commit dba3c29 is found to ruin micro-SD card data (writing incorrect file, or fs is corrupt after several times mount) on the beagle-xm revB, and reverting the commit will fix the problem.  Also from TRM of OMAP3/OMAP4/DM37x, the below is mentioned about the Auto CMD12 Enable bit.         - SDIO does not support this feature.         - SD card only. Looks it is not suitable to always enable Auto CMD12 in host controller driver.  Considered that the commit is not mature enough, so ask to revert it first.  Cc: Balaji T K <balajitk@ti.com> Cc: Venkatraman S <svenkatr@ti.com> Buglink: https://lkml.org/lkml/2012/6/10/225 Reported-by: Paolo Pisati <p.pisati@gmail.com> Reported-bisected-and-tested-by: Ming Lei <ming.lei@canonical.com> Signed-off-by: Ming Lei <ming.lei@canonical.com> Acked-by: Venkatraman S <svenkatr@ti.com> Signed-off-by: Chris Ball <cjb@laptop.org>
d | input |  | 24 items |  | Mark Brown | broonie@opensource.wolfsonmicro.com | 1338368134 |  | i2c: Split I2C_M_NOSTART support out of I2C_FUNC_PROTOCOL_MANGLING  Since there are uses for I2C_M_NOSTART which are much more sensible and standard than most of the protocol mangling functionality (the main one being gather writes to devices where something like a register address needs to be inserted before a block of data) create a new I2C_FUNC_NOSTART for this feature and update all the users to use it.  Also strengthen the disrecommendation of the protocol mangling while we're at it.  In the case of regmap-i2c we remove the requirement for mangling as I2C_M_NOSTART is the only mangling feature which is being used.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
d | char |  | 55 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1340047236 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/herbert/crypto-2.6  Pull a crypto fix from Herbert Xu:  "This push fixes another bug in the atmel-rng that made it produce   completely useless output."  * git://git.kernel.org/pub/scm/linux/kernel/git/herbert/crypto-2.6:   hwrng: atmel-rng - fix data valid check
d | idle |  | 4 items |  | Stephen Boyd | sboyd@codeaurora.org | 1333664750 |  | simple_open: automatically convert to simple_open()  Many users of debugfs copy the implementation of default_open() when they want to support a custom read/write function op.  This leads to a proliferation of the default_open() implementation across the entire tree.  Now that the common implementation has been consolidated into libfs we can replace all the users of this function with simple_open().  This replacement was done with the following semantic patch:  <smpl> @ open @ identifier open_f != simple_open; identifier i, f; @@ -int open_f(struct inode *i, struct file *f) -{ ( -if (i->i_private) -f->private_data = i->i_private; || -f->private_data = i->i_private; ) -return 0; -}  @ has_open depends on open @ identifier fops; identifier open.open_f; @@ struct file_operations fops = { ... -.open = open_f, +.open = simple_open, ... }; </smpl>  [akpm@linux-foundation.org: checkpatch fixes] Signed-off-by: Stephen Boyd <sboyd@codeaurora.org> Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Cc: Julia Lawall <Julia.Lawall@lip6.fr> Acked-by: Ingo Molnar <mingo@elte.hu> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | extcon |  | 5 items |  | Axel Lin | axel.lin@gmail.com | 1340062242 |  | extcon: max8997: Add missing kfree for info->edev in max8997_muic_remove()  extcon_dev_unregister(info->edev) doest not free info->edev, we need to call kfree(info->edev) here.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | pinctrl |  | 37 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1340228517 |  | Merge branch 'akpm' (Andrew's patch-bomb)  * emailed from Andrew Morton <akpm@linux-foundation.org>: (21 patches)   mm/memblock: fix overlapping allocation when doubling reserved array   c/r: prctl: Move PR_GET_TID_ADDRESS to a proper place   pidns: find_new_reaper() can no longer switch to init_pid_ns.child_reaper   pidns: guarantee that the pidns init will be the last pidns process reaped   fault-inject: avoid call to random32() if fault injection is disabled   Viresh has moved   get_maintainer: Fix --help warning   mm/memory.c: fix kernel-doc warnings   mm: fix kernel-doc warnings   mm: correctly synchronize rss-counters at exit/exec   mm, thp: print useful information when mmap_sem is unlocked in zap_pmd_range   h8300: use the declarations provided by <asm/sections.h>   h8300: fix use of extinct _sbss and _ebss   xtensa: use the declarations provided by <asm/sections.h>   xtensa: use "test -e" instead of bashism "test -a"   xtensa: replace xtensa-specific _f{data,text} by _s{data,text}   memcg: fix use_hierarchy css_is_ancestor oops regression   mm, oom: fix and cleanup oom score calculations   nilfs2: ensure proper cache clearing for gc-inodes   thp: avoid atomic64_read in pmd_read_atomic for 32bit PAE   ...
d | pps |  | 9 items |  | Dan Carpenter | dan.carpenter@oracle.com | 1330991383 |  | pps: class_create() returns an ERR_PTR, not NULL  class_create() never returns NULLs only ERR_PTRs.  Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com> Cc: Rodolfo Giometti <giometti@enneenne.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | nubus |  | 3 items |  | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
d | leds |  | 56 items |  | Axel Lin | axel.lin@gmail.com | 1339469785 |  | leds: Make LEDS_ASIC3 and LEDS_RENESAS_TPU depend on LEDS_CLASS=y  Otherwise, I got below build error when CONFIG_LEDS_CLASS=m.    LD      init/built-in.o drivers/built-in.o: In function `asic3_led_probe': clkdev.c:(.devinit.text+0x4680): undefined reference to `led_classdev_register' drivers/built-in.o: In function `r_tpu_probe': clkdev.c:(.devinit.text+0x4838): undefined reference to `led_classdev_register' drivers/built-in.o: In function `asic3_led_remove': clkdev.c:(.devexit.text+0x564): undefined reference to `led_classdev_unregister' drivers/built-in.o: In function `r_tpu_remove': clkdev.c:(.devexit.text+0x5a0): undefined reference to `led_classdev_unregister' make: *** [vmlinux] Error 1  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Bryan Wu <bryan.wu@canonical.com>
d | dma |  | 42 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1340255572 |  | Merge branch 'fixes' of git://git.infradead.org/users/vkoul/slave-dma  Pull slave-dmaengine fixes from Vinod Koul:  "A few fixes in pl330 and imx-sdma drivers."  * 'fixes' of git://git.infradead.org/users/vkoul/slave-dma:   DMA: PL330: Fix racy mutex unlock   DMA: PL330: Add missing static storage class specifier   dma: imx-sdma: buf_tail should be initialize in prepare function   dmaengine: pl330: dont complete descriptor for cyclic dma
d | amba |  | 3 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338060147 |  | 
d | memstick |  | 4 items |  | Cong Wang | amwang@redhat.com | 1332251299 |  | memstick: remove the second argument of k[un]map_atomic()  Signed-off-by: Cong Wang <amwang@redhat.com>
d | w1 |  | 14 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338061349 |  | 
d | cpuidle |  | 8 items |  | Thomas Gleixner | tglx@linutronix.de | 1336473306 |  | cpuidle: Use kick_all_cpus_sync()  kick_all_cpus_sync() is the core implementation of cpu_idle_wait() which is copied all over the arch code.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Acked-by: Peter Zijlstra <peterz@infradead.org> Link: http://lkml.kernel.org/r/20120507175652.119842173@linutronix.de
d | thermal |  | 4 items |  | Amit Daniel Kachhap | amit.kachhap@linaro.org | 1332393018 |  | thermal: Fix for setting the thermal zone mode to enable/disable  Basically without this patch changing the mode of thermal zone is not possible as wrong string size is passed to strncmp.  Signed-off-by: Amit Daniel Kachhap <amit.kachhap@linaro.org> Acked-by: Jean Delvare <khali@linux-fr.org> Signed-off-by: Len Brown <len.brown@intel.com>
d | sfi |  | 5 items |  | Randy Dunlap | rdunlap@xenotime.net | 1320103917 |  | drivers/sfi: sfi_acpi.c needs sysfs.h  sfi_acpi.c needs to include linux/sysfs.h for data types.  drivers/sfi/sfi_core.h:66: error: field 'attr' has incomplete type drivers/sfi/sfi_acpi.c:179: warning: 'struct kobject' declared inside parameter list drivers/sfi/sfi_acpi.c:179: warning: its scope is only this definition or declaration, which is probably not what you want drivers/sfi/sfi_acpi.c:182: warning: type defaults to 'int' in declaration of '__mptr' drivers/sfi/sfi_acpi.c:182: warning: initialization from incompatible pointer type  Signed-off-by: Randy Dunlap <rdunlap@xenotime.net> Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
d | bluetooth |  | 25 items |  | Andrei Emeltchenko | andrei.emeltchenko@intel.com | 1340075951 |  | Bluetooth: btmrvl: Do not send vendor events to bluetooth stack  Vendor-specific events shall be processed in driver and not sent to bluetooth stack where they screw up HCI command countings.  Signed-off-by: Andrei Emeltchenko <andrei.emeltchenko@intel.com> Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
d | cpufreq |  | 46 items |  | Linus Walleij | linus.walleij@linaro.org | 1335911113 |  | ARM: ux500: core U9540 support  This adds support for the U9540 variant of the U8500 series. This is an application processor without internal modem. This is the most basic part with ASIC ID, CPU-related fixes, IRQ list, register ranges, timer, UART, and L2 cache setup. This is based on a patch by Michel Jaouen which was rewritten to fit with the latest 3.3 kernel.  ChangeLog v1->v2: deleted the irqs-db9540.h file since we expect to   migrate to using Device Tree for getting the IRQs to devices. ChangeLog v2->v3: introduced a fixed virtual offset for the ROM   as suggested by Arnd Bergmann.  Acked-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Sebastien Pasdeloup <sebastien.pasdeloup-nonst@stericsson.com> Signed-off-by: Michel Jaouen <michel.jaouen@stericsson.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
d | rpmsg |  | 3 items |  | Mark Asselstine | mark.asselstine@windriver.com | 1330861421 |  | rpmsg: fix build warning when dma_addr_t is 64-bit  dev_dbg() in rpmsg_probe() made use of the %x formatting that expects an 'unsigned int' which dma_addr_t is not in cases where dma_addr_t is 64-bit (CONFIG_ARCH_DMA_ADDR_T_64BIT). Casting to a 'unsigned long long' and using %llx will avoid this.  Signed-off-by: Mark Asselstine <mark.asselstine@windriver.com> CC: Ohad Ben-Cohen <ohad@wizery.com> CC: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Ohad Ben-Cohen <ohad@wizery.com>
d | hwspinlock |  | 6 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1320806056 |  | Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/paulg/linux  * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/paulg/linux:   drivers/media: video/a5k6aa is a module and so needs module.h   mfd: fix build failures in recently added ab5500 code   hwspinlock/u8500: include linux/module.h   MTD: MAPS: bcm963xx-flash.c: explicitly include module.h
d | target |  | 31 items |  | Roland Dreier | roland@purestorage.com | 1339557145 |  | target: Return error to initiator if SET TARGET PORT GROUPS emulation fails  The error paths in target_emulate_set_target_port_groups() are all essentially "rc = -EINVAL; goto out;" but the code at "out:" ignores rc and always returns success.  This means that even if eg explicit ALUA is turned off, the initiator will always see a good SCSI status for SET TARGET PORT GROUPS.  Fix this by returning rc as is intended.  It appears this bug was added by the following patch:  commit 05d1c7c0d0db4cc25548d9aadebb416888a82327 Author: Andy Grover <agrover@redhat.com> Date:   Wed Jul 20 19:13:28 2011 +0000      target: Make all control CDBs scatter-gather  Signed-off-by: Roland Dreier <roland@purestorage.com> Cc: Andy Grover <agrover@redhat.com> Cc: <stable@vger.kernel.org> Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
d | remoteproc |  | 8 items |  | Ohad Ben-Cohen | ohad@wizery.com | 1339918263 |  | remoteproc/omap: fix dev_err typo  For some reason one of the dev_err invocations is using a wrong device so fix that.  Signed-off-by: Ohad Ben-Cohen <ohad@wizery.com> Cc: stable@vger.kernel.org
d | iio |  | 12 items |  | Jiri Kosina | jkosina@suse.cz | 1339720126 |  | iio: drop wrong reference from Kconfig  The documentation lives in drivers/staging/iio/Documentation, but according to Jonathan it's obsolete and needs fixing.  Signed-off-by: Jiri Kosina <jkosina@suse.cz> Acked-by: Jonathan Cameron <jic23@kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | atm |  | 41 items |  | David Woodhouse | dwmw2@infradead.org | 1337890973 |  | solos-pci: Fix DMA support  DMA support has finally made its way to the top of the TODO list, having realised that a Geode using MMIO can't keep up with two ADSL2+ lines each running at 21Mb/s.  This patch fixes a couple of bugs in the DMA support in the driver, so once the corresponding FPGA update is complete and tested everything should work properly.  We weren't storing the currently-transmitting skb, so we were never unmapping it and never freeing/popping it when the TX was done. And the addition of pci_set_master() is fairly self-explanatory.  Signed-off-by: David Woodhouse <David.Woodhouse@intel.com> Cc: stable@kernel.org Signed-off-by: David S. Miller <davem@davemloft.net>
d | mfd |  | 124 items |  | Viresh Kumar | viresh.linux@gmail.com | 1340228376 |  | Viresh has moved  viresh.kumar@st.com email-id doesn't exist anymore as I have left the company.  Replace ST's id with viresh.linux@gmail.com.  It also updates .mailmap file to fix address for 'git shortlog'  Signed-off-by: Viresh Kumar <viresh.linux@gmail.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | i2c |  | 11 items |  | Stephen Warren | swarren@nvidia.com | 1338821383 |  | i2c: Add generic I2C multiplexer using pinctrl API  This is useful for SoCs whose I2C module's signals can be routed to different sets of pins at run-time, using the pinctrl API.                                   +-----+  +-----+                                  || dev ||  || dev ||     +------------------------+   +-----+  +-----+     || SoC                    ||      ||        ||     ||                   /----||------+--------+     ||   +---+   +------+     || child bus A, on first set of pins     ||   ||I2C||---||Pinmux||     ||     ||   +---+   +------+     || child bus B, on second set of pins     ||                   \----||------+--------+--------+     ||                        ||      ||        ||        ||     +------------------------+  +-----+  +-----+  +-----+                                 || dev ||  || dev ||  || dev ||                                 +-----+  +-----+  +-----+  Signed-off-by: Stephen Warren <swarren@nvidia.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Rob Herring <rob.herring@calxeda.com> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
d | gpu |  | 4 items |  | Daniel Vetter | daniel.vetter@ffwll.ch | 1341310728 |  | drm/i915: kick any firmware framebuffers before claiming the gtt  Especially vesafb likes to map everything as uc- (yikes), and if that mapping hangs around still while we try to map the gtt as wc the kernel will downgrade our request to uc-, resulting in abyssal performance.  Unfortunately we can't do this as early as readon does (i.e. as the first thing we do when initializing the hw) because our fb/mmio space region moves around on a per-gen basis. So I've had to move it below the gtt initialization, but that seems to work, too. The important thing is that we do this before we set up the gtt wc mapping.  Now an altogether different question is why people compile their kernels with vesafb enabled, but I guess making things just work isn't bad per se ...  v2: - s/radeondrmfb/inteldrmfb/ - fix up error handling  v3: Kill #ifdef X86, this is Intel after all. Noticed by Ben Widawsky.  v4: Jani Nikula complained about the pointless bool primary initialization.  v5: Don't oops if we can't allocate, noticed by Chris Wilson.  v6: Resolve conflicts with agp rework and fixup whitespace.  This is commit e188719a2891f01b3100d in drm-next.  Backport to 3.5 -fixes queue requested by Dave Airlie - due to grub using vesa on fedora their initrd seems to load vesafb before loading the real kms driver. So tons more people actually experience a dead-slow gpu. Hence also the Cc: stable.  Cc: stable@vger.kernel.org Reported-and-tested-by: "Kilarski, Bernard R" <bernard.r.kilarski@intel.com> Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk> Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch> Signed-off-by: Dave Airlie <airlied@redhat.com>
d | ssb |  | 18 items |  | Hauke Mehrtens | hauke@hauke-m.de | 1337186797 |  | ssb: add PCI IDs 0x4322 and 43222  The 0x4322 ID is found on the BCM4322 used on some SoCs like the Linksys WRT610N V1 connected to a BCM4705. The 43222 (0xa8d6) ID is found on the BCM43222 used on some other SoCs like the D-Link DSL-2760U connected to a BCM63xx.  Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de> Signed-off-by: John W. Linville <linville@tuxdriver.com>
d | block |  | 49 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1341355882 |  | floppy: cancel any pending fd_timeouts before adding a new one  In commit 070ad7e793dc ("floppy: convert to delayed work and single-thread wq") the 'fd_timeout' timer was converted to a delayed work.  However, the "del_timer(&fd_timeout)" was lost in the process, and any previous pending timeouts would stay active when we then re-queued the timeout.  This resulted in the floppy probe sequence having a (stale) 20s timeout rather than the intended 3s timeout, and thus made booting with the floppy driver (but no actual floppy controller) take much longer than it should.  Of course, there's little reason for most people to compile the floppy driver into the kernel at all, which is why most people never noticed.  Canceling the delayed work where we used to do the del_timer() fixes the issue, and makes the floppy probing use the proper new timeout instead. The three second timeout is still very wasteful, but better than the 20s one.  Reported-and-tested-by: Andi Kleen <ak@linux.intel.com> Reported-and-tested-by: Calvin Walton <calvin.walton@kepstin.ca> Cc: Jiri Kosina <jkosina@suse.cz> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | pci |  | 38 items |  | Alan Stern | stern@rowland.harvard.edu | 1339618299 |  | USB: add NO_D3_DURING_SLEEP flag and revert 151b61284776be2  This patch (as1558) fixes a problem affecting several ASUS computers: The machine crashes or corrupts memory when going into suspend if the ehci-hcd driver is bound to any controllers.  Users have been forced to unbind or unload ehci-hcd before putting their systems to sleep.  After extensive testing, it was determined that the machines don't like going into suspend when any EHCI controllers are in the PCI D3 power state.  Presumably this is a firmware bug, but there's nothing we can do about it except to avoid putting the controllers in D3 during system sleep.  The patch adds a new flag to indicate whether the problem is present, and avoids changing the controller's power state if the flag is set. Runtime suspend is unaffected; this matters only for system suspend. However as a side effect, the controller will not respond to remote wakeup requests while the system is asleep.  Hence USB wakeup is not functional -- but of course, this is already true in the current state of affairs.  A similar patch has already been applied as commit 151b61284776be2d6f02d48c23c3625678960b97 (USB: EHCI: fix crash during suspend on ASUS computers).  The patch supersedes that one and reverts it.  There are two differences:  	The old patch added the flag at the USB level; this patch 	adds it at the PCI level.  	The old patch applied to all chipsets with the same vendor, 	subsystem vendor, and product IDs; this patch makes an 	exception for a known-good system (based on DMI information).  Signed-off-by: Alan Stern <stern@rowland.harvard.edu> Tested-by: Dniel Fraga <fragabr@gmail.com> Tested-by: Andrey Rahmatullin <wrar@wrar.name> Tested-by: Steven Rostedt <rostedt@goodmis.org> Cc: stable <stable@vger.kernel.org> Reviewed-by: Rafael J. Wysocki <rjw@sisk.pl> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | gpio |  | 69 items |  | Kukjin Kim | kgene.kim@samsung.com | 1338783661 |  | gpio/samsung: fix the typo 'exynos5_xxx' instead of 'exonys5_xxx'  Should be 'exynos5_xxx' instead of 'exonys5_xxx'.  It happened at the commit 30b842889eea ("Merge tag 'soc2' of git://git.kernel.org/pub/scm/linux/kernel/git/arm/arm-soc") during v3.5 merge window.  Signed-off-by: Kukjin Kim <kgene.kim@samsung.com> [ My bad  - Linus ] Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | connector |  | 5 items |  | Vladimir Zapolskiy | vzapolskiy@gmail.com | 1317231710 |  | connector: add comm change event report to proc connector  Add an event to monitor comm value changes of tasks.  Such an event becomes vital, if someone desires to control threads of a process in different manner.  A natural characteristic of threads is its comm value, and helpfully application developers have an opportunity to change it in runtime. Reporting about such events via proc connector allows to fine-grain monitoring and control potentials, for instance a process control daemon listening to proc connector and following comm value policies can place specific threads to assigned cgroup partitions.  It might be possible to achieve a pale partial one-shot likeness without this update, if an application changes comm value of a thread generator task beforehand, then a new thread is cloned, and after that proc connector listener gets the fork event and reads new thread's comm value from procfs stat file, but this change visibly simplifies and extends the matter.  Signed-off-by: Vladimir Zapolskiy <vzapolskiy@gmail.com> Acked-by: Evgeniy Polyakov <zbr@ioremap.net> Cc: David Miller <davem@davemloft.net> Signed-off-by: Andrew Morton <akpm@google.com> Signed-off-by: David S. Miller <davem@davemloft.net>
d | parport |  | 22 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1337727733 |  | 
d | nfc |  | 6 items |  | Dan Carpenter | dan.carpenter@oracle.com | 1337958976 |  | NFC: potential integer overflow problem in check_crc()  If "buf[0]" is 255 then "len" gets set to 0.  The call to "crc_ccitt(0xffff, buf, len - 2);" casts the "len - 2" to a high positive number which is ugly.  Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
d | parisc |  | 24 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1337739770 |  | Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/trivial  Pull trivial updates from Jiri Kosina:  "As usual, it's mostly typo fixes, redundant code elimination and some   documentation updates."  * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/trivial: (57 commits)   edac, mips: don't change code that has been removed in edac/mips tree   xtensa: Change mail addresses of Hannes Weiner and Oskar Schirmer   lib: Change mail address of Oskar Schirmer   net: Change mail address of Oskar Schirmer   arm/m68k: Change mail address of Sebastian Hess   i2c: Change mail address of Oskar Schirmer   net: Fix tcp_build_and_update_options comment in struct tcp_sock   atomic64_32.h: fix parameter naming mismatch   Kconfig: replace "--- help ---" with "---help---"   c2port: fix bogus Kconfig "default no"   edac: Fix spelling errors.   qla1280: Remove redundant NULL check before release_firmware() call   remoteproc: remove redundant NULL check before release_firmware()   qla2xxx: Remove redundant NULL check before release_firmware() call.   aic94xx: Get rid of redundant NULL check before release_firmware() call   tehuti: delete redundant NULL check before release_firmware()   qlogic: get rid of a redundant test for NULL before call to release_firmware()   bna: remove redundant NULL test before release_firmware()   tg3: remove redundant NULL test before release_firmware() call   typhoon: get rid of redundant conditional before all to release_firmware()   ...
f | Kconfig | g | 2.4K |  | Linus Torvalds | torvalds@linux-foundation.org | 1337729661 |  | 
d | platform |  | 3 items |  | Borislav Petkov | bp@alien8.de | 1339105435 |  | drivers/platform/x86/acerhdf.c: correct Boris' mail address  Correct mail address reference to a mail account which I actually read.  Signed-off-by: Borislav Petkov <bp@alien8.de> Cc: Peter Feuerer <peter@piie.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | video |  | 198 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1339891145 |  | 
d | firewire |  | 17 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1337889467 |  | 
d | scsi |  | 238 items |  | Alan Stern | stern@rowland.harvard.edu | 1340427931 |  | SCSI & usb-storage: add try_rc_10_first flag  Several bug reports have been received recently for USB mass-storage devices that don't handle READ CAPACITY(16) commands properly.  They report bogus sizes, in some cases becoming unusable as a result.  The bugs were triggered by commit 09b6b51b0b6c1b9bb61815baf205e4d74c89ff04 (SCSI & usb-storage: add flags for VPD pages and REPORT LUNS), which caused usb-storage to stop overriding the SCSI level reported by devices.  By default, the sd driver will try READ CAPACITY(16) first for any device whose level is above SCSI_SPC_2.  It seems likely that any device large enough to require the use of READ CAPACITY(16) (i.e., 2 TB or more) would be able to handle READ CAPACITY(10) commands properly.  Indeed, I don't know of any devices that don't handle READ CAPACITY(10) properly.  Therefore this patch (as1559) adds a new flag telling the sd driver to try READ CAPACITY(10) before READ CAPACITY(16), and sets this flag for every USB mass-storage device.  If a device really is larger than 2 TB, sd will fall back to READ CAPACITY(16) just as it used to.  This fixes Bugzilla #43391.  Signed-off-by: Alan Stern <stern@rowland.harvard.edu> Acked-by: Hans de Goede <hdegoede@redhat.com> CC: "James E.J. Bottomley" <JBottomley@parallels.com> CC: Matthew Dharm <mdharm-usb@one-eyed-alien.net> Cc: stable <stable@vger.kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | acpi |  | 55 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1341079918 |  | Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux  Pull ACPI & Power Management patches from Len Brown.  * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux:   acpi_pad: fix power_saving thread deadlock   ACPI video: Still use ACPI backlight control if _DOS doesn't exist   ACPI, APEI, Avoid too much error reporting in runtime   ACPI: Add a quirk for "AMILO PRO V2030" to ignore the timer overriding   ACPI: Remove one board specific WARN when ignoring timer overriding   ACPI: Make acpi_skip_timer_override cover all source_irq==0 cases   ACPI, x86: fix Dell M6600 ACPI reboot regression via DMI   ACPI sysfs.c strlen fix
d | mtd |  | 36 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1340908903 |  | 
d | memory |  | 6 items |  | Hiroshi DOYU | hdoyu@nvidia.com | 1337025172 |  | memory: tegra{20,30}-mc: Remove empty *_remove()  Remove unnecessary empty functions.  Signed-off-by: Hiroshi DOYU <hdoyu@nvidia.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | of |  | 16 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338341239 |  | Merge branch 'upstream' of git://git.linux-mips.org/pub/scm/ralf/upstream-linus  Pull MIPS updates from Ralf Baechle:  "The whole series has been sitting in -next for quite a while with no   complaints.  The last change to the series was before the weekend the   removal of an SPI patch which Grant - even though previously acked by   himself - appeared to raise objections.  So I removed it until the   situation is clarified.  Other than that all the patches have the acks   from their respective maintainers, all MIPS and x86 defconfigs are   building fine and I'm not aware of any problems introduced by this   series.    Among the key features for this patch series is a sizable patchset for   Lantiq which among other things introduces support for Lantiq's   flagship product, the FALCON SOC.  It also means that the opensource   developers behind this patchset have overtaken Lantiq's competing   inhouse development team that was working behind closed doors.    Less noteworthy the ath79 patchset which adds support for a few more   chip variants, cleanups and fixes.  Finally the usual dose of tweaking   of generic code."  Fix up trivial conflicts in arch/mips/lantiq/xway/gpio_{ebu,stp}.c where printk spelling fixes clashed with file move and eventual removal of the printk.  * 'upstream' of git://git.linux-mips.org/pub/scm/ralf/upstream-linus: (81 commits)   MIPS: lantiq: remove orphaned code   MIPS: Remove all -Wall and almost all -Werror usage from arch/mips.   MIPS: lantiq: implement support for FALCON soc   MTD: MIPS: lantiq: verify that the NOR interface is available on falcon soc   MTD: MIPS: lantiq: implement OF support   watchdog: MIPS: lantiq: implement OF support and minor fixes   SERIAL: MIPS: lantiq: implement OF support   GPIO: MIPS: lantiq: convert gpio-stp-xway to OF   GPIO: MIPS: lantiq: convert gpio-mm-lantiq to OF and of_mm_gpio   GPIO: MIPS: lantiq: move gpio-stp and gpio-ebu to the subsystem folder   MIPS: pci: convert lantiq driver to OF   MIPS: lantiq: convert dma to platform driver   MIPS: lantiq: implement support for clkdev api   MIPS: lantiq: drop ltq_gpio_request() and gpio_to_irq()   OF: MIPS: lantiq: implement irq_domain support   OF: MIPS: lantiq: implement OF support   MIPS: lantiq: drop mips_machine support   OF: PCI: const usage needed by MIPS   MIPS: Cavium: Remove smp_reserve_lock.   MIPS: Move cache setup to setup_arch().   ...
d | base |  | 32 items |  | Mandeep Singh Baines | msb@chromium.org | 1340573469 |  | PM / Sleep: Prevent waiting forever on asynchronous suspend after abort  __device_suspend() must always send a completion. Otherwise, parent devices will wait forever.  Commit 1e2ef05b, "PM: Limit race conditions between runtime PM and system sleep (v2)", introduced a regression by short-circuiting the complete_all() for certain error cases.  This patch fixes the bug by always signalling a completion.  Addresses http://crosbug.com/31972  Tested by injecting an abort.  Signed-off-by: Mandeep Singh Baines <msb@chromium.org> Cc: stable@vger.kernel.org Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
d | devfreq |  | 9 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1337807226 |  | 
d | infiniband |  | 5 items |  | Roland Dreier | roland@purestorage.com | 1340539199 |  | Merge branches 'cma' and 'ocrdma' into for-linus
d | eisa |  | 7 items |  | Arnaud Lacombe | lacombar@gmail.com | 1312475571 |  | eisa/pci_eisa.c: fix BUG introduced by 005bdad7b80  While `pci_eisa_driver' still refer `pci_eisa_init', the .probe() function should not be called after init memory release, as pointed out by commit 74b9a297. The structure is still referenced in the drivers subsystem, and can be accesseed through sysfs, so the modpost warning is a false positive. Mark it as such.  In the same time, the warning referenced in 005bdad7b80 did only mention `pci_eisa_driver', not `pci_eisa_pci_tbl', so remove its marking.  Broken-by: Arnaud Lacombe <lacombar@gmail.com> (in 005bdad7b80) Reported-by: Tetsuo Handa <penguin-kernel@i-love.sakura.ne.jp> Signed-off-by: Arnaud Lacombe <lacombar@gmail.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | md |  | 62 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1341363935 |  | 
d | vhost |  | 7 items |  | Jens Freimann | jfrei@linux.vnet.ibm.com | 1340770256 |  | vhost: use USER_DS in vhost_worker thread  On some architectures address spaces are set up in a way that this is not necessary to work properly but on some others (like s390) it is. Make sure we operate on the user address space to allow copy_xxx_user() from the vhost_worker() thread by setting it explicitly before calling use_mm() and revert it after unuse_mm().  Signed-off-by: Jens Freimann <jfrei@linux.vnet.ibm.com> Signed-off-by: Christian Borntraeger <borntraeger@de.ibm.com> Acked-by: Michael S. Tsirkin <mst@redhat.com> Signed-off-by: David S. Miller <davem@davemloft.net>
d | isdn |  | 15 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1337885669 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/davem/net  Pull more networking updates from David Miller:  "Ok, everything from here on out will be bug fixes."  1) One final sync of wireless and bluetooth stuff from John Linville.    These changes have all been in his tree for more than a week, and    therefore have had the necessary -next exposure.  John was just away    on a trip and didn't have a change to send the pull request until a    day or two ago.  2) Put back some defines in user exposed header file areas that were    removed during the tokenring purge.  From Stephen Hemminger and Paul    Gortmaker.  3) A bug fix for UDP hash table allocation got lost in the pile due to    one of those "you got it..  no I've got it.." situations.  :-)     From Tim Bird.  4) SKB coalescing in TCP needs to have stricter checks, otherwise we'll    try to coalesce overlapping frags and crash.  Fix from Eric Dumazet.  5) RCU routing table lookups can race with free_fib_info(), causing    crashes when we deref the device pointers in the route.  Fix by    releasing the net device in the RCU callback.  From Yanmin Zhang.  * git://git.kernel.org/pub/scm/linux/kernel/git/davem/net: (293 commits)   tcp: take care of overlaps in tcp_try_coalesce()   ipv4: fix the rcu race between free_fib_info and ip_route_output_slow   mm: add a low limit to alloc_large_system_hash   ipx: restore token ring define to include/linux/ipx.h   if: restore token ring ARP type to header   xen: do not disable netfront in dom0   phy/micrel: Fix ID of KSZ9021   mISDN: Add X-Tensions USB ISDN TA XC-525   gianfar:don't add FCB length to hard_header_len   Bluetooth: Report proper error number in disconnection   Bluetooth: Create flags for bt_sk()   Bluetooth: report the right security level in getsockopt   Bluetooth: Lock the L2CAP channel when sending   Bluetooth: Restore locking semantics when looking up L2CAP channels   Bluetooth: Fix a redundant and problematic incoming MTU check   Bluetooth: Add support for Foxconn/Hon Hai AR5BBU22 0489:E03C   Bluetooth: Fix EIR data generation for mgmt_device_found   Bluetooth: Fix Inquiry with RSSI event mask   Bluetooth: improve readability of l2cap_seq_list code   Bluetooth: Fix skb length calculation   ...
d | zorro |  | 11 items |  | Al Viro | viro@zeniv.linux.org.uk | 1325505895 |  | misc latin1 to utf8 conversions  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
d | spi |  | 59 items |  | Russell King | rmk+kernel@arm.linux.org.uk | 1340015224 |  | SPI: fix over-eager devm_xxx() conversion  1a77b127ae (OMAP : SPI : use devm_* functions) converted the SPI device controller state to use devm_kzalloc().  Unfortunately, this is used against an unbound struct device, which results in the following when the device is bound to its driver:  ------------[ cut here ]------------ WARNING: at /home/rmk/git/linux-rmk/drivers/base/dd.c:257 driver_probe_device+0x78/0x21c() Modules linked in: Backtrace: [<c0017d0c>] (dump_backtrace+0x0/0x10c) from [<c033e208>] (dump_stack+0x18/0x1c) r7:00000000 r6:c01ff28c r5:c040050c r4:00000101 [<c033e1f0>] (dump_stack+0x0/0x1c) from [<c00337ec>] (warn_slowpath_common+0x58/0x70) [<c0033794>] (warn_slowpath_common+0x0/0x70) from [<c0033828>] (warn_slowpath_null+0x24/0x2c) [<c0033804>] (warn_slowpath_null+0x0/0x2c) from [<c01ff28c>] (driver_probe_device+0x78/0x21c) [<c01ff214>] (driver_probe_device+0x0/0x21c) from [<c01ff49c>] (__driver_attach+0x6c/0x90) [<c01ff430>] (__driver_attach+0x0/0x90) from [<c01fda70>] (bus_for_each_dev+0x58/0x98) [<c01fda18>] (bus_for_each_dev+0x0/0x98) from [<c01ff0f4>] (driver_attach+0x20/0x28) [<c01ff0d4>] (driver_attach+0x0/0x28) from [<c01fe2f4>] (bus_add_driver+0xb4/0x230) [<c01fe240>] (bus_add_driver+0x0/0x230) from [<c01ffb24>] (driver_register+0xac/0x138) [<c01ffa78>] (driver_register+0x0/0x138) from [<c0215d4c>] (spi_register_driver+0x4c/0x60) [<c0215d00>] (spi_register_driver+0x0/0x60) from [<c045414c>] (ks8851_init+0x14/0x1c) [<c0454138>] (ks8851_init+0x0/0x1c) from [<c0008770>] (do_one_initcall+0x9c/0x164) [<c00086d4>] (do_one_initcall+0x0/0x164) from [<c0436410>] (kernel_init+0x128/0x210) [<c04362e8>] (kernel_init+0x0/0x210) from [<c0038754>] (do_exit+0x0/0x72c) ---[ end trace 4dcda79f5e89dd84 ]--- ks8851 spi1.0: message enable is 0 ks8851 spi1.0: eth0: revision 0, MAC 08:00:28:01:4d:c6, IRQ 194, has EEPROM  Fix this by partially reverting the original commit.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
d | pnp |  | 15 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1333151139 |  | Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux  Pull ACPI & Power Management changes from Len Brown:  - ACPI 5.0 after-ripples, ACPICA/Linux divergence cleanup  - cpuidle evolving, more ARM use  - thermal sub-system evolving, ditto  - assorted other PM bits  Fix up conflicts in various cpuidle implementations due to ARM cpuidle cleanups (ARM at91 self-refresh and cpu idle code rewritten into "standby" in asm conflicting with the consolidation of cpuidle time keeping), trivial SH include file context conflict and RCU tracing fixes in generic code.  * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux: (77 commits)   ACPI throttling: fix endian bug in acpi_read_throttling_status()   Disable MCP limit exceeded messages from Intel IPS driver   ACPI video: Don't start video device until its associated input device has been allocated   ACPI video: Harden video bus adding.   ACPI: Add support for exposing BGRT data   ACPI: export acpi_kobj   ACPI: Fix logic for removing mappings in 'acpi_unmap'   CPER failed to handle generic error records with multiple sections   ACPI: Clean redundant codes in scan.c   ACPI: Fix unprotected smp_processor_id() in acpi_processor_cst_has_changed()   ACPI: consistently use should_use_kmap()   PNPACPI: Fix device ref leaking in acpi_pnp_match   ACPI: Fix use-after-free in acpi_map_lsapic   ACPI: processor_driver: add missing kfree   ACPI, APEI: Fix incorrect APEI register bit width check and usage   Update documentation for parameter *notrigger* in einj.txt   ACPI, APEI, EINJ, new parameter to control trigger action   ACPI, APEI, EINJ, limit the range of einj_param   ACPI, APEI, Fix ERST header length check   cpuidle: power_usage should be declared signed integer   ...
d | lguest |  | 12 items |  | Stratos Psomadakis | psomas@cslab.ece.ntua.gr | 1326345287 |  | lguest: Make sure interrupt is allocated ok by lguest_setup_irq  Make sure the interrupt is allocated correctly by lguest_setup_irq (check the return value of irq_alloc_desc_at for -ENOMEM)  Signed-off-by: Stratos Psomadakis <psomas@cslab.ece.ntua.gr> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au> (cleanups and commentry)
d | ps3 |  | 9 items |  | Valentin Ilie | valentin.ilie@gmail.com | 1335316681 |  | drivers/ps3: Fix checkpatch warnings in ps3av.c  Signed-off-by: Valentin Ilie <valentin.ilie@gmail.com> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Geoff Levand <geoff@infradead.org>
d | firmware |  | 16 items |  | Matthew Garrett | mjg@redhat.com | 1336090759 |  | efivars: Improve variable validation  Ben Hutchings pointed out that the validation in efivars was inadequate - most obviously, an entry with size 0 would server as a DoS against the kernel. Improve this based on his suggestions.  Signed-off-by: Matthew Garrett <mjg@redhat.com> Cc: stable@vger.kernel.org Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | cdrom |  | 3 items |  | Stephen Rothwell | sfr@canb.auug.org.au | 1331850485 |  | powerpc: Remove some of the legacy iSeries specific device drivers  These drivers are specific to the PowerPC legacy iSeries platform and their Kconfig is specified in arch/powerpc.  Legacy iSeries is being removed, so these drivers can no longer be selected.  Cc: Jens Axboe <axboe@kernel.dk> Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
d | auxdisplay |  | 5 items |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
d | tc |  | 3 items |  | Tejun Heo | tj@kernel.org | 1269954152 |  | include cleanup: Update gfp.h and slab.h includes to prepare for breaking implicit slab.h inclusion from percpu.h  percpu.h is included by sched.h and module.h and thus ends up being included when building most .c files.  percpu.h includes slab.h which in turn includes gfp.h making everything defined by the two files universally available and complicating inclusion dependencies.  percpu.h -> slab.h dependency is about to be removed.  Prepare for this change by updating users of gfp and slab facilities include those headers directly instead of assuming availability.  As this conversion needs to touch large number of source files, the following script is used as the basis of conversion.    http://userweb.kernel.org/~tj/misc/slabh-sweep.py  The script does the followings.  * Scan files for gfp and slab usages and update includes such that   only the necessary includes are there.  ie. if only gfp is used,   gfp.h, if slab is used, slab.h.  * When the script inserts a new include, it looks at the include   blocks and try to put the new include such that its order conforms   to its surrounding.  It's put in the include block which contains   core kernel includes, in the same order that the rest are ordered -   alphabetical, Christmas tree, rev-Xmas-tree or at the end if there   doesn't seem to be any matching order.  * If the script can't find a place to put a new include (mostly   because the file doesn't have fitting include block), it prints out   an error message indicating which .h file needs to be added to the   file.  The conversion was done in the following steps.  1. The initial automatic conversion of all .c files updated slightly    over 4000 files, deleting around 700 includes and adding ~480 gfp.h    and ~3000 slab.h inclusions.  The script emitted errors for ~400    files.  2. Each error was manually checked.  Some didn't need the inclusion,    some needed manual addition while adding it to implementation .h or    embedding .c file was more appropriate for others.  This step added    inclusions to around 150 files.  3. The script was run again and the output was compared to the edits    from #2 to make sure no file was left behind.  4. Several build tests were done and a couple of problems were fixed.    e.g. lib/decompress_*.c used malloc/free() wrappers around slab    APIs requiring slab.h to be added manually.  5. The script was run on all .h files but without automatically    editing them as sprinkling gfp.h and slab.h inclusions around .h    files could easily lead to inclusion dependency hell.  Most gfp.h    inclusion directives were ignored as stuff from gfp.h was usually    wildly available and often used in preprocessor macros.  Each    slab.h inclusion directive was examined and added manually as    necessary.  6. percpu.h was updated not to include slab.h.  7. Build test were done on the following configurations and failures    were fixed.  CONFIG_GCOV_KERNEL was turned off for all tests (as my    distributed build env didn't work with gcov compiles) and a few    more options had to be turned off depending on archs to make things    build (like ipr on powerpc/64 which failed due to missing writeq).     * x86 and x86_64 UP and SMP allmodconfig and a custom test config.    * powerpc and powerpc64 SMP allmodconfig    * sparc and sparc64 SMP allmodconfig    * ia64 SMP allmodconfig    * s390 SMP allmodconfig    * alpha SMP allmodconfig    * um on x86_64 SMP allmodconfig  8. percpu.h modifications were reverted so that it could be applied as    a separate patch and serve as bisection point.  Given the fact that I had only a couple of failures from tests on step 6, I'm fairly confident about the coverage of this conversion patch. If there is a breakage, it's likely to be something in one of the arch headers which should be easily discoverable easily on most builds of the specific arch.  Signed-off-by: Tejun Heo <tj@kernel.org> Guess-its-ok-by: Christoph Lameter <cl@linux-foundation.org> Cc: Ingo Molnar <mingo@redhat.com> Cc: Lee Schermerhorn <Lee.Schermerhorn@hp.com>
