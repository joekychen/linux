f | omap-rng.c | s | 4.6K | 175 | Herbert Xu | herbert@gondor.apana.org.au | 1337066486 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux  Merge mainline to add prerequisite for ARM ux500 crypto support.
f | Makefile | g | 995B |  | Kent Yoder | key@linux.vnet.ibm.com | 1336956552 |  | powerpc/pseries/hwrng: PFO-based hwrng driver  Adds support for the Platform Facilities Option (PFO)-based hardware random number generator for POWER hardware.  Signed-off-by: Michael Neuling <mikey@neuling.org> Signed-off-by: Robert Jennings <rcj@linux.vnet.ibm.com> Signed-off-by: Kent Yoder <key@linux.vnet.ibm.com> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | via-rng.c | s | 5.9K | 189 | Herbert Xu | herbert@gondor.apana.org.au | 1294372506 |  | hwrng: via_rng - Fix memory scribbling on some CPUs  It has been reported that on at least one Nano CPU the xstore instruction will write as many as 16 bytes of data to the output buffer.  This causes memory corruption as we use rng->priv which is only 4-8 bytes long.  This patch fixes this by using an intermediate buffer on the stack with at least 16 bytes and aligned to a 16-byte boundary.  The problem was observed on the following processor:  processor	: 0 vendor_id	: CentaurHauls cpu family	: 6 model		: 15 model name	: VIA Nano processor U2250 (1.6GHz Capable) stepping	: 3 cpu MHz		: 1600.000 cache size	: 1024 KB fdiv_bug	: no hlt_bug		: no f00f_bug	: no coma_bug	: no fpu		: yes fpu_exception	: yes cpuid level	: 10 wp		: yes flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat clflush acpi mmx fxsr sse sse2 ss tm syscall nx lm constant_tsc up rep_good pni monitor vmx est tm2 ssse3 cx16 xtpr rng rng_en ace ace_en ace2 phe phe_en lahf_lm bogomips	: 3192.08 clflush size	: 64 cache_alignment	: 128 address sizes	: 36 bits physical, 48 bits virtual power management:  Tested-by: Mario 'BitKoenig' Holbe <Mario.Holbe@TU-Ilmenau.DE> Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
f | tx4939-rng.c | s | 4.5K | 159 | Julia Lawall | julia@diku.dk | 1326433120 |  | hwrng: tx4939 - use devm_request_and_ioremap  Reimplement a call to devm_request_mem_region followed by a call to ioremap or ioremap_nocache by a call to devm_request_and_ioremap.  The semantic patch that makes this transformation is as follows: (http://coccinelle.lip6.fr/)  // <smpl> @nm@ expression myname; identifier i; @@  struct platform_driver i = { .driver = { .name = myname } };  @@ expression dev,res,size; expression nm.myname; @@  -if (!devm_request_mem_region(dev, res->start, size, -                              \(res->name\||dev_name(dev)\||myname\))) { -   ... -   return ...; -} ... when != res->start ( -devm_ioremap(dev,res->start,size) +devm_request_and_ioremap(dev,res) || -devm_ioremap_nocache(dev,res->start,size) +devm_request_and_ioremap(dev,res) ) ... when any     when != res->start // </smpl>  Signed-off-by: Julia Lawall <julia@diku.dk> Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
f | nomadik-rng.c | s | 2.4K | 96 | viresh kumar | viresh.kumar@st.com | 1331940755 |  | ARM: 7362/1: AMBA: Add module_amba_driver() helper macro for amba_driver  For simple modules that contain a single amba_driver without any additional setup code then ends up being a block of duplicated boilerplate. This patch adds a new macro, module_amba_driver(), which replaces the module_init()/module_exit() registrations with template functions.  Signed-off-by: Viresh Kumar <viresh.kumar@st.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | virtio-rng.c | s | 3.2K | 113 | Rusty Russell | rusty@rustcorp.com.au | 1326345282 |  | virtio: rename virtqueue_add_buf_gfp to virtqueue_add_buf  Remove wrapper functions. This makes the allocation type explicit in all callers; I used GPF_KERNEL where it seemed obvious, left it at GFP_ATOMIC otherwise.  Signed-off-by: Rusty Russell <rusty@rustcorp.com.au> Reviewed-by: Christoph Hellwig <hch@lst.de>
f | n2rng.h | s | 3.8K | 97 | David S. Miller | davem@davemloft.net | 1311841590 |  | n2rng: Attach on Niagara-T3.  And stop referring to Victoria Falls, as the attribute we're talking about is whether the rng is multi-unit capable which applies to several chip variants now.  Signed-off-by: David S. Miller <davem@davemloft.net>
f | mxc-rnga.c | s | 5.7K | 196 | Alan Carvalho de Assis | acassis@gmail.com | 1241705836 |  | i.MX31: Add hw-random for RNGA  This hw-random driver add support to RNGA hardware found on some i.MX processors.  Signed-off-by: Alan Carvalho de Assis <acassis@gmail.com> Acked-by: Matt Mackall <mpm@selenic.com> Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
f | atmel-rng.c | s | 3.3K | 122 | Peter Korsgaard | jacmet@sunsite.dk | 1339460824 |  | hwrng: atmel-rng - fix data valid check  Brown paper bag: Data valid is LSB of the ISR (status register), and NOT of ODATA (current random data word)!  With this, rngtest is a lot happier. Before:  rngtest 3 Copyright (c) 2004 by Henrique de Moraes Holschuh This is free software; see the source for copying conditions.  There is NO warr.  rngtest: starting FIPS tests... rngtest: bits received from input: 20000032 rngtest: FIPS 140-2 successes: 3 rngtest: FIPS 140-2 failures: 997 rngtest: FIPS 140-2(2001-10-10) Monobit: 604 rngtest: FIPS 140-2(2001-10-10) Poker: 996 rngtest: FIPS 140-2(2001-10-10) Runs: 36 rngtest: FIPS 140-2(2001-10-10) Long run: 0 rngtest: FIPS 140-2(2001-10-10) Continuous run: 117 rngtest: input channel speed: (min=622.371; avg=23682.481; max=28224.350)Kibitss rngtest: FIPS tests speed: (min=12.361; avg=12.718; max=12.861)Mibits/s rngtest: Program run time: 2331696 microsecondsx  After: rngtest 3 Copyright (c) 2004 by Henrique de Moraes Holschuh This is free software; see the source for copying conditions.  There is NO warr.  rngtest: starting FIPS tests... rngtest: bits received from input: 20000032 rngtest: FIPS 140-2 successes: 999 rngtest: FIPS 140-2 failures: 1 rngtest: FIPS 140-2(2001-10-10) Monobit: 0 rngtest: FIPS 140-2(2001-10-10) Poker: 0 rngtest: FIPS 140-2(2001-10-10) Runs: 1 rngtest: FIPS 140-2(2001-10-10) Long run: 0 rngtest: FIPS 140-2(2001-10-10) Continuous run: 0 rngtest: input channel speed: (min=777.363; avg=43588.270; max=47870.711)Kibitss rngtest: FIPS tests speed: (min=11.943; avg=12.716; max=12.844)Mibits/s rngtest: Program run time: 1955282 microseconds  Cc: stable@vger.kernel.org Signed-off-by: Peter Korsgaard <jacmet@sunsite.dk> Reported-by: George Pontis <GPontis@z9.com> Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com> Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
f | ppc4xx-rng.c | s | 3.1K | 117 | Axel Lin | axel.lin@gmail.com | 1322640767 |  | char: hw_random: convert drivers/char/hw_random/* to use module_platform_driver()  This patch converts the drivers in drivers/char/hw_random/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: David S. Miller <davem@davemloft.net> Cc: Josh Boyer <jwboyer@linux.vnet.ibm.com> Cc: Matt Mackall <mpm@selenic.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Jamie Iles <jamie@jamieiles.com> Acked-by: Alexander Clouter <alex@digriz.org.uk> Acked-by: Olof Johansson <olof@lixom.net> Acked-by: David Daney <david.daney@cavium.com> Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
f | octeon-rng.c | s | 3.0K | 111 | Axel Lin | axel.lin@gmail.com | 1322640767 |  | char: hw_random: convert drivers/char/hw_random/* to use module_platform_driver()  This patch converts the drivers in drivers/char/hw_random/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: David S. Miller <davem@davemloft.net> Cc: Josh Boyer <jwboyer@linux.vnet.ibm.com> Cc: Matt Mackall <mpm@selenic.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Jamie Iles <jamie@jamieiles.com> Acked-by: Alexander Clouter <alex@digriz.org.uk> Acked-by: Olof Johansson <olof@lixom.net> Acked-by: David Daney <david.daney@cavium.com> Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
f | pseries-rng.c | s | 2.6K | 83 | Kent Yoder | key@linux.vnet.ibm.com | 1336956552 |  | powerpc/pseries/hwrng: PFO-based hwrng driver  Adds support for the Platform Facilities Option (PFO)-based hardware random number generator for POWER hardware.  Signed-off-by: Michael Neuling <mikey@neuling.org> Signed-off-by: Robert Jennings <rcj@linux.vnet.ibm.com> Signed-off-by: Kent Yoder <key@linux.vnet.ibm.com> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | n2-drv.c | s | 18K | 647 | Axel Lin | axel.lin@gmail.com | 1322640767 |  | char: hw_random: convert drivers/char/hw_random/* to use module_platform_driver()  This patch converts the drivers in drivers/char/hw_random/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: David S. Miller <davem@davemloft.net> Cc: Josh Boyer <jwboyer@linux.vnet.ibm.com> Cc: Matt Mackall <mpm@selenic.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Jamie Iles <jamie@jamieiles.com> Acked-by: Alexander Clouter <alex@digriz.org.uk> Acked-by: Olof Johansson <olof@lixom.net> Acked-by: David Daney <david.daney@cavium.com> Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
f | timeriomem-rng.c | s | 3.8K | 122 | Axel Lin | axel.lin@gmail.com | 1322640767 |  | char: hw_random: convert drivers/char/hw_random/* to use module_platform_driver()  This patch converts the drivers in drivers/char/hw_random/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: David S. Miller <davem@davemloft.net> Cc: Josh Boyer <jwboyer@linux.vnet.ibm.com> Cc: Matt Mackall <mpm@selenic.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Jamie Iles <jamie@jamieiles.com> Acked-by: Alexander Clouter <alex@digriz.org.uk> Acked-by: Olof Johansson <olof@lixom.net> Acked-by: David Daney <david.daney@cavium.com> Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
f | ixp4xx-rng.c | s | 1.6K | 58 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1218099348 |  | [ARM] Move include/asm-arm/arch-* to arch/arm/*/include/mach  This just leaves include/asm-arm/plat-* to deal with.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | n2-asm.S | g | 1.5K |  | David S. Miller | davem@davemloft.net | 1216367169 |  | sparc64: Add Niagara2 RNG driver.  With feedback and suggestions from Sam Ravnborg.  Signed-off-by: David S. Miller <davem@davemloft.net>
f | Kconfig | g | 8.3K |  | Linus Torvalds | torvalds@linux-foundation.org | 1337813950 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/herbert/crypto-2.6  Pull crypto updates from Herbert Xu:  - New cipher/hash driver for ARM ux500.  - Code clean-up for aesni-intel.  - Misc fixes.  Fixed up conflicts in arch/arm/mach-ux500/devices-common.h, where quite frankly some of it made no sense at all (the pull brought in a declaration for the dbx500_add_platform_device_noirq() function, which neither exists nor is used anywhere).  Also some trivial add-add context conflicts in the Kconfig file in drivers/{char/hw_random,crypto}/  * git://git.kernel.org/pub/scm/linux/kernel/git/herbert/crypto-2.6:   crypto: aesni-intel - move more common code to ablk_init_common   crypto: aesni-intel - use crypto_[un]register_algs   crypto: ux500 - Cleanup hardware identification   crypto: ux500 - Update DMA handling for 3.4   mach-ux500: crypto - core support for CRYP/HASH module.   crypto: ux500 - Add driver for HASH hardware   crypto: ux500 - Add driver for CRYP hardware   hwrng: Kconfig - modify default state for atmel-rng driver   hwrng: omap - use devm_request_and_ioremap   crypto: crypto4xx - move up err_request_irq label   crypto, xor: Sanitize checksumming function selection output   crypto: caam - add backward compatible string sec4.0
f | intel-rng.c | s | 11K | 362 | Tejun Heo | tj@kernel.org | 1269954152 |  | include cleanup: Update gfp.h and slab.h includes to prepare for breaking implicit slab.h inclusion from percpu.h  percpu.h is included by sched.h and module.h and thus ends up being included when building most .c files.  percpu.h includes slab.h which in turn includes gfp.h making everything defined by the two files universally available and complicating inclusion dependencies.  percpu.h -> slab.h dependency is about to be removed.  Prepare for this change by updating users of gfp and slab facilities include those headers directly instead of assuming availability.  As this conversion needs to touch large number of source files, the following script is used as the basis of conversion.    http://userweb.kernel.org/~tj/misc/slabh-sweep.py  The script does the followings.  * Scan files for gfp and slab usages and update includes such that   only the necessary includes are there.  ie. if only gfp is used,   gfp.h, if slab is used, slab.h.  * When the script inserts a new include, it looks at the include   blocks and try to put the new include such that its order conforms   to its surrounding.  It's put in the include block which contains   core kernel includes, in the same order that the rest are ordered -   alphabetical, Christmas tree, rev-Xmas-tree or at the end if there   doesn't seem to be any matching order.  * If the script can't find a place to put a new include (mostly   because the file doesn't have fitting include block), it prints out   an error message indicating which .h file needs to be added to the   file.  The conversion was done in the following steps.  1. The initial automatic conversion of all .c files updated slightly    over 4000 files, deleting around 700 includes and adding ~480 gfp.h    and ~3000 slab.h inclusions.  The script emitted errors for ~400    files.  2. Each error was manually checked.  Some didn't need the inclusion,    some needed manual addition while adding it to implementation .h or    embedding .c file was more appropriate for others.  This step added    inclusions to around 150 files.  3. The script was run again and the output was compared to the edits    from #2 to make sure no file was left behind.  4. Several build tests were done and a couple of problems were fixed.    e.g. lib/decompress_*.c used malloc/free() wrappers around slab    APIs requiring slab.h to be added manually.  5. The script was run on all .h files but without automatically    editing them as sprinkling gfp.h and slab.h inclusions around .h    files could easily lead to inclusion dependency hell.  Most gfp.h    inclusion directives were ignored as stuff from gfp.h was usually    wildly available and often used in preprocessor macros.  Each    slab.h inclusion directive was examined and added manually as    necessary.  6. percpu.h was updated not to include slab.h.  7. Build test were done on the following configurations and failures    were fixed.  CONFIG_GCOV_KERNEL was turned off for all tests (as my    distributed build env didn't work with gcov compiles) and a few    more options had to be turned off depending on archs to make things    build (like ipr on powerpc/64 which failed due to missing writeq).     * x86 and x86_64 UP and SMP allmodconfig and a custom test config.    * powerpc and powerpc64 SMP allmodconfig    * sparc and sparc64 SMP allmodconfig    * ia64 SMP allmodconfig    * s390 SMP allmodconfig    * alpha SMP allmodconfig    * um on x86_64 SMP allmodconfig  8. percpu.h modifications were reverted so that it could be applied as    a separate patch and serve as bisection point.  Given the fact that I had only a couple of failures from tests on step 6, I'm fairly confident about the coverage of this conversion patch. If there is a breakage, it's likely to be something in one of the arch headers which should be easily discoverable easily on most builds of the specific arch.  Signed-off-by: Tejun Heo <tj@kernel.org> Guess-its-ok-by: Christoph Lameter <cl@linux-foundation.org> Cc: Ingo Molnar <mingo@redhat.com> Cc: Lee Schermerhorn <Lee.Schermerhorn@hp.com>
f | amd-rng.c | s | 3.6K | 141 | Dmitry Eremin-Solenikov | dbaryshkov@gmail.com | 1304485995 |  | hwrng: amd - manage resource allocation  As amd driver doesn't bind to PCI device, we'd better manage reource allocation on our own to disallow (possible) conflicts.  Signed-off-by: Dmitry Eremin-Solenikov <dbaryshkov@gmail.com> Acked-by: Matt Mackall <mpm@selenic.com> Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
f | geode-rng.c | s | 3.0K | 116 | Joe Perches | joe@perches.com | 1245909053 |  | hwrng: Use PCI_VDEVICE  Signed-off-by: Joe Perches <joe@perches.com> Acked-by: Matt Mackall <mpm@selenic.com> Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
f | picoxcell-rng.c | s | 4.7K | 164 | Axel Lin | axel.lin@gmail.com | 1322640767 |  | char: hw_random: convert drivers/char/hw_random/* to use module_platform_driver()  This patch converts the drivers in drivers/char/hw_random/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: David S. Miller <davem@davemloft.net> Cc: Josh Boyer <jwboyer@linux.vnet.ibm.com> Cc: Matt Mackall <mpm@selenic.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Jamie Iles <jamie@jamieiles.com> Acked-by: Alexander Clouter <alex@digriz.org.uk> Acked-by: Olof Johansson <olof@lixom.net> Acked-by: David Daney <david.daney@cavium.com> Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
f | pasemi-rng.c | s | 3.9K | 127 | Axel Lin | axel.lin@gmail.com | 1322640767 |  | char: hw_random: convert drivers/char/hw_random/* to use module_platform_driver()  This patch converts the drivers in drivers/char/hw_random/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: David S. Miller <davem@davemloft.net> Cc: Josh Boyer <jwboyer@linux.vnet.ibm.com> Cc: Matt Mackall <mpm@selenic.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Jamie Iles <jamie@jamieiles.com> Acked-by: Alexander Clouter <alex@digriz.org.uk> Acked-by: Olof Johansson <olof@lixom.net> Acked-by: David Daney <david.daney@cavium.com> Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
f | core.c | s | 7.5K | 307 | Michael Büsch | m@bues.ch | 1310044681 |  | Update my e-mail address  Signed-off-by: Michael Buesch <m@bues.ch> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
