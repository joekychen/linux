<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › char › mbcs.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>mbcs.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This file is subject to the terms and conditions of the GNU General Public</span>
<span class="cm"> * License.  See the file &quot;COPYING&quot; in the main directory of this archive</span>
<span class="cm"> * for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (c) 2005 Silicon Graphics, Inc.  All rights reserved.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __MBCS_H__</span>
<span class="cp">#define __MBCS_H__</span>

<span class="cm">/*</span>
<span class="cm"> * General macros</span>
<span class="cm"> */</span>
<span class="cp">#define MB	(1024*1024)</span>
<span class="cp">#define MB2	(2*MB)</span>
<span class="cp">#define MB4	(4*MB)</span>
<span class="cp">#define MB6	(6*MB)</span>

<span class="cm">/*</span>
<span class="cm"> * Offsets and masks</span>
<span class="cm"> */</span>
<span class="cp">#define MBCS_CM_ID		0x0000	</span><span class="cm">/* Identification */</span><span class="cp"></span>
<span class="cp">#define MBCS_CM_STATUS		0x0008	</span><span class="cm">/* Status */</span><span class="cp"></span>
<span class="cp">#define MBCS_CM_ERROR_DETAIL1	0x0010	</span><span class="cm">/* Error Detail1 */</span><span class="cp"></span>
<span class="cp">#define MBCS_CM_ERROR_DETAIL2	0x0018	</span><span class="cm">/* Error Detail2 */</span><span class="cp"></span>
<span class="cp">#define MBCS_CM_CONTROL		0x0020	</span><span class="cm">/* Control */</span><span class="cp"></span>
<span class="cp">#define MBCS_CM_REQ_TOUT	0x0028	</span><span class="cm">/* Request Time-out */</span><span class="cp"></span>
<span class="cp">#define MBCS_CM_ERR_INT_DEST	0x0038	</span><span class="cm">/* Error Interrupt Destination */</span><span class="cp"></span>
<span class="cp">#define MBCS_CM_TARG_FL		0x0050	</span><span class="cm">/* Target Flush */</span><span class="cp"></span>
<span class="cp">#define MBCS_CM_ERR_STAT	0x0060	</span><span class="cm">/* Error Status */</span><span class="cp"></span>
<span class="cp">#define MBCS_CM_CLR_ERR_STAT	0x0068	</span><span class="cm">/* Clear Error Status */</span><span class="cp"></span>
<span class="cp">#define MBCS_CM_ERR_INT_EN	0x0070	</span><span class="cm">/* Error Interrupt Enable */</span><span class="cp"></span>
<span class="cp">#define MBCS_RD_DMA_SYS_ADDR	0x0100	</span><span class="cm">/* Read DMA System Address */</span><span class="cp"></span>
<span class="cp">#define MBCS_RD_DMA_LOC_ADDR	0x0108	</span><span class="cm">/* Read DMA Local Address */</span><span class="cp"></span>
<span class="cp">#define MBCS_RD_DMA_CTRL	0x0110	</span><span class="cm">/* Read DMA Control */</span><span class="cp"></span>
<span class="cp">#define MBCS_RD_DMA_AMO_DEST	0x0118	</span><span class="cm">/* Read DMA AMO Destination */</span><span class="cp"></span>
<span class="cp">#define MBCS_RD_DMA_INT_DEST	0x0120	</span><span class="cm">/* Read DMA Interrupt Destination */</span><span class="cp"></span>
<span class="cp">#define MBCS_RD_DMA_AUX_STAT	0x0130	</span><span class="cm">/* Read DMA Auxiliary Status */</span><span class="cp"></span>
<span class="cp">#define MBCS_WR_DMA_SYS_ADDR	0x0200	</span><span class="cm">/* Write DMA System Address */</span><span class="cp"></span>
<span class="cp">#define MBCS_WR_DMA_LOC_ADDR	0x0208	</span><span class="cm">/* Write DMA Local Address */</span><span class="cp"></span>
<span class="cp">#define MBCS_WR_DMA_CTRL	0x0210	</span><span class="cm">/* Write DMA Control */</span><span class="cp"></span>
<span class="cp">#define MBCS_WR_DMA_AMO_DEST	0x0218	</span><span class="cm">/* Write DMA AMO Destination */</span><span class="cp"></span>
<span class="cp">#define MBCS_WR_DMA_INT_DEST	0x0220	</span><span class="cm">/* Write DMA Interrupt Destination */</span><span class="cp"></span>
<span class="cp">#define MBCS_WR_DMA_AUX_STAT	0x0230	</span><span class="cm">/* Write DMA Auxiliary Status */</span><span class="cp"></span>
<span class="cp">#define MBCS_ALG_AMO_DEST	0x0300	</span><span class="cm">/* Algorithm AMO Destination */</span><span class="cp"></span>
<span class="cp">#define MBCS_ALG_INT_DEST	0x0308	</span><span class="cm">/* Algorithm Interrupt Destination */</span><span class="cp"></span>
<span class="cp">#define MBCS_ALG_OFFSETS	0x0310</span>
<span class="cp">#define MBCS_ALG_STEP		0x0318	</span><span class="cm">/* Algorithm Step */</span><span class="cp"></span>

<span class="cp">#define MBCS_GSCR_START		0x0000000</span>
<span class="cp">#define MBCS_DEBUG_START	0x0100000</span>
<span class="cp">#define MBCS_RAM0_START		0x0200000</span>
<span class="cp">#define MBCS_RAM1_START		0x0400000</span>
<span class="cp">#define MBCS_RAM2_START		0x0600000</span>

<span class="cp">#define MBCS_CM_CONTROL_REQ_TOUT_MASK 0x0000000000ffffffUL</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><h1>define PIO<em>BASE</em>ADDR<em>BASE</em>OFFSET_MASK 0x00fffffffff00000UL</h1></td><td class="code"><div class="highlight"><pre><span class="cp">#define MBCS_SRAM_SIZE		(1024*1024)</span>
<span class="cp">#define MBCS_CACHELINE_SIZE	128</span>

<span class="cm">/*</span>
<span class="cm"> * MMR get&#39;s and put&#39;s</span>
<span class="cm"> */</span>
<span class="cp">#define MBCS_MMR_ADDR(mmr_base, offset)((uint64_t *)(mmr_base + offset))</span>
<span class="cp">#define MBCS_MMR_SET(mmr_base, offset, value) {			\</span>
<span class="cp">	uint64_t *mbcs_mmr_set_u64p, readback;				\</span>
<span class="cp">	mbcs_mmr_set_u64p = (uint64_t *)(mmr_base + offset);	\</span>
<span class="cp">	*mbcs_mmr_set_u64p = value;					\</span>
<span class="cp">	readback = *mbcs_mmr_set_u64p; \</span>
<span class="cp">}</span>
<span class="cp">#define MBCS_MMR_GET(mmr_base, offset) *(uint64_t *)(mmr_base + offset)</span>
<span class="cp">#define MBCS_MMR_ZERO(mmr_base, offset) MBCS_MMR_SET(mmr_base, offset, 0)</span>

<span class="cm">/*</span>
<span class="cm"> * MBCS mmr structures</span>
<span class="cm"> */</span>
<span class="k">union</span> <span class="n">cm_id</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">cm_id_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">always_one</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 0</span>
		 <span class="nl">mfg_id:</span><span class="mi">11</span><span class="p">,</span>	<span class="c1">// 11:1</span>
		 <span class="nl">part_num:</span><span class="mi">16</span><span class="p">,</span>	<span class="c1">// 27:12</span>
		 <span class="nl">bitstream_rev:</span><span class="mi">8</span><span class="p">,</span>	<span class="c1">// 35:28</span>
		<span class="o">:</span><span class="mi">28</span><span class="p">;</span>		<span class="c1">// 63:36</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">cm_status</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">cm_status_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">pending_reads</span><span class="o">:</span><span class="mi">8</span><span class="p">,</span>	<span class="c1">// 7:0</span>
		 <span class="nl">pending_writes:</span><span class="mi">8</span><span class="p">,</span>	<span class="c1">// 15:8</span>
		 <span class="nl">ice_rsp_credits:</span><span class="mi">8</span><span class="p">,</span>	<span class="c1">// 23:16</span>
		 <span class="nl">ice_req_credits:</span><span class="mi">8</span><span class="p">,</span>	<span class="c1">// 31:24</span>
		 <span class="nl">cm_req_credits:</span><span class="mi">8</span><span class="p">,</span>	<span class="c1">// 39:32</span>
		<span class="o">:</span><span class="mi">1</span><span class="p">,</span>		<span class="c1">// 40</span>
		 <span class="nl">rd_dma_in_progress:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 41</span>
		 <span class="nl">rd_dma_done:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 42</span>
		<span class="o">:</span><span class="mi">1</span><span class="p">,</span>		<span class="c1">// 43</span>
		 <span class="nl">wr_dma_in_progress:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 44</span>
		 <span class="nl">wr_dma_done:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 45</span>
		 <span class="nl">alg_waiting:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 46</span>
		 <span class="nl">alg_pipe_running:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 47</span>
		 <span class="nl">alg_done:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 48</span>
		<span class="o">:</span><span class="mi">3</span><span class="p">,</span>		<span class="c1">// 51:49</span>
		 <span class="nl">pending_int_reqs:</span><span class="mi">8</span><span class="p">,</span>	<span class="c1">// 59:52</span>
		<span class="o">:</span><span class="mi">3</span><span class="p">,</span>		<span class="c1">// 62:60</span>
		 <span class="nl">alg_half_speed_sel:</span><span class="mi">1</span><span class="p">;</span>	<span class="c1">// 63</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">cm_error_detail1</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">cm_error_detail1_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">packet_type</span><span class="o">:</span><span class="mi">4</span><span class="p">,</span>	<span class="c1">// 3:0</span>
		 <span class="nl">source_id:</span><span class="mi">2</span><span class="p">,</span>	<span class="c1">// 5:4</span>
		 <span class="nl">data_size:</span><span class="mi">2</span><span class="p">,</span>	<span class="c1">// 7:6</span>
		 <span class="nl">tnum:</span><span class="mi">8</span><span class="p">,</span>	<span class="c1">// 15:8</span>
		 <span class="nl">byte_enable:</span><span class="mi">8</span><span class="p">,</span>	<span class="c1">// 23:16</span>
		 <span class="nl">gfx_cred:</span><span class="mi">8</span><span class="p">,</span>	<span class="c1">// 31:24</span>
		 <span class="nl">read_type:</span><span class="mi">2</span><span class="p">,</span>	<span class="c1">// 33:32</span>
		 <span class="nl">pio_or_memory:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 34</span>
		 <span class="nl">head_cw_error:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 35</span>
		<span class="o">:</span><span class="mi">12</span><span class="p">,</span>		<span class="c1">// 47:36</span>
		 <span class="nl">head_error_bit:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 48</span>
		 <span class="nl">data_error_bit:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 49</span>
		<span class="o">:</span><span class="mi">13</span><span class="p">,</span>		<span class="c1">// 62:50</span>
		 <span class="nl">valid:</span><span class="mi">1</span><span class="p">;</span>	<span class="c1">// 63</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">cm_error_detail2</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">cm_error_detail2_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">address</span><span class="o">:</span><span class="mi">56</span><span class="p">,</span>	<span class="c1">// 55:0</span>
		<span class="o">:</span><span class="mi">8</span><span class="p">;</span>		<span class="c1">// 63:56</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">cm_control</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">cm_control_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">cm_id</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span>	<span class="c1">// 1:0</span>
		<span class="o">:</span><span class="mi">2</span><span class="p">,</span>		<span class="c1">// 3:2</span>
		 <span class="nl">max_trans:</span><span class="mi">5</span><span class="p">,</span>	<span class="c1">// 8:4</span>
		<span class="o">:</span><span class="mi">3</span><span class="p">,</span>		<span class="c1">// 11:9</span>
		 <span class="nl">address_mode:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 12</span>
		<span class="o">:</span><span class="mi">7</span><span class="p">,</span>		<span class="c1">// 19:13</span>
		 <span class="nl">credit_limit:</span><span class="mi">8</span><span class="p">,</span>	<span class="c1">// 27:20</span>
		<span class="o">:</span><span class="mi">5</span><span class="p">,</span>		<span class="c1">// 32:28</span>
		 <span class="nl">rearm_stat_regs:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 33</span>
		 <span class="nl">prescalar_byp:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 34</span>
		 <span class="nl">force_gap_war:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 35</span>
		 <span class="nl">rd_dma_go:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 36</span>
		 <span class="nl">wr_dma_go:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 37</span>
		 <span class="nl">alg_go:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 38</span>
		 <span class="nl">rd_dma_clr:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 39</span>
		 <span class="nl">wr_dma_clr:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 40</span>
		 <span class="nl">alg_clr:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 41</span>
		<span class="o">:</span><span class="mi">2</span><span class="p">,</span>		<span class="c1">// 43:42</span>
		 <span class="nl">alg_wait_step:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 44</span>
		 <span class="nl">alg_done_amo_en:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 45</span>
		 <span class="nl">alg_done_int_en:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 46</span>
		<span class="o">:</span><span class="mi">1</span><span class="p">,</span>		<span class="c1">// 47</span>
		 <span class="nl">alg_sram0_locked:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 48</span>
		 <span class="nl">alg_sram1_locked:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 49</span>
		 <span class="nl">alg_sram2_locked:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 50</span>
		 <span class="nl">alg_done_clr:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 51</span>
		<span class="o">:</span><span class="mi">12</span><span class="p">;</span>		<span class="c1">// 63:52</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">cm_req_timeout</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">cm_req_timeout_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">time_out</span><span class="o">:</span><span class="mi">24</span><span class="p">,</span>	<span class="c1">// 23:0</span>
		<span class="o">:</span><span class="mi">40</span><span class="p">;</span>		<span class="c1">// 63:24</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">intr_dest</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">intr_dest_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">address</span><span class="o">:</span><span class="mi">56</span><span class="p">,</span>	<span class="c1">// 55:0</span>
		 <span class="nl">int_vector:</span><span class="mi">8</span><span class="p">;</span>	<span class="c1">// 63:56</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">cm_error_status</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">cm_error_status_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">ecc_sbe</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 0</span>
		 <span class="nl">ecc_mbe:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 1</span>
		 <span class="nl">unsupported_req:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 2</span>
		 <span class="nl">unexpected_rsp:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 3</span>
		 <span class="nl">bad_length:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 4</span>
		 <span class="nl">bad_datavalid:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 5</span>
		 <span class="nl">buffer_overflow:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 6</span>
		 <span class="nl">request_timeout:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 7</span>
		<span class="o">:</span><span class="mi">8</span><span class="p">,</span>		<span class="c1">// 15:8</span>
		 <span class="nl">head_inv_data_size:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 16</span>
		 <span class="nl">rsp_pactype_inv:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 17</span>
		 <span class="nl">head_sb_err:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 18</span>
		 <span class="nl">missing_head:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 19</span>
		 <span class="nl">head_inv_rd_type:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 20</span>
		 <span class="nl">head_cmd_err_bit:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 21</span>
		 <span class="nl">req_addr_align_inv:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 22</span>
		 <span class="nl">pio_req_addr_inv:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 23</span>
		 <span class="nl">req_range_dsize_inv:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 24</span>
		 <span class="nl">early_term:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 25</span>
		 <span class="nl">early_tail:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 26</span>
		 <span class="nl">missing_tail:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 27</span>
		 <span class="nl">data_flit_sb_err:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 28</span>
		 <span class="nl">cm2hcm_req_cred_of:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 29</span>
		 <span class="nl">cm2hcm_rsp_cred_of:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 30</span>
		 <span class="nl">rx_bad_didn:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 31</span>
		 <span class="nl">rd_dma_err_rsp:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 32</span>
		 <span class="nl">rd_dma_tnum_tout:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 33</span>
		 <span class="nl">rd_dma_multi_tnum_tou:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 34</span>
		 <span class="nl">wr_dma_err_rsp:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 35</span>
		 <span class="nl">wr_dma_tnum_tout:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 36</span>
		 <span class="nl">wr_dma_multi_tnum_tou:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 37</span>
		 <span class="nl">alg_data_overflow:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 38</span>
		 <span class="nl">alg_data_underflow:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 39</span>
		 <span class="nl">ram0_access_conflict:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 40</span>
		 <span class="nl">ram1_access_conflict:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 41</span>
		 <span class="nl">ram2_access_conflict:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 42</span>
		 <span class="nl">ram0_perr:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 43</span>
		 <span class="nl">ram1_perr:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 44</span>
		 <span class="nl">ram2_perr:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 45</span>
		 <span class="nl">int_gen_rsp_err:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 46</span>
		 <span class="nl">int_gen_tnum_tout:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 47</span>
		 <span class="nl">rd_dma_prog_err:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 48</span>
		 <span class="nl">wr_dma_prog_err:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 49</span>
		<span class="o">:</span><span class="mi">14</span><span class="p">;</span>		<span class="c1">// 63:50</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">cm_clr_error_status</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">cm_clr_error_status_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">clr_ecc_sbe</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 0</span>
		 <span class="nl">clr_ecc_mbe:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 1</span>
		 <span class="nl">clr_unsupported_req:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 2</span>
		 <span class="nl">clr_unexpected_rsp:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 3</span>
		 <span class="nl">clr_bad_length:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 4</span>
		 <span class="nl">clr_bad_datavalid:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 5</span>
		 <span class="nl">clr_buffer_overflow:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 6</span>
		 <span class="nl">clr_request_timeout:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 7</span>
		<span class="o">:</span><span class="mi">8</span><span class="p">,</span>		<span class="c1">// 15:8</span>
		 <span class="nl">clr_head_inv_data_siz:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 16</span>
		 <span class="nl">clr_rsp_pactype_inv:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 17</span>
		 <span class="nl">clr_head_sb_err:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 18</span>
		 <span class="nl">clr_missing_head:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 19</span>
		 <span class="nl">clr_head_inv_rd_type:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 20</span>
		 <span class="nl">clr_head_cmd_err_bit:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 21</span>
		 <span class="nl">clr_req_addr_align_in:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 22</span>
		 <span class="nl">clr_pio_req_addr_inv:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 23</span>
		 <span class="nl">clr_req_range_dsize_i:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 24</span>
		 <span class="nl">clr_early_term:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 25</span>
		 <span class="nl">clr_early_tail:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 26</span>
		 <span class="nl">clr_missing_tail:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 27</span>
		 <span class="nl">clr_data_flit_sb_err:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 28</span>
		 <span class="nl">clr_cm2hcm_req_cred_o:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 29</span>
		 <span class="nl">clr_cm2hcm_rsp_cred_o:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 30</span>
		 <span class="nl">clr_rx_bad_didn:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 31</span>
		 <span class="nl">clr_rd_dma_err_rsp:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 32</span>
		 <span class="nl">clr_rd_dma_tnum_tout:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 33</span>
		 <span class="nl">clr_rd_dma_multi_tnum:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 34</span>
		 <span class="nl">clr_wr_dma_err_rsp:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 35</span>
		 <span class="nl">clr_wr_dma_tnum_tout:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 36</span>
		 <span class="nl">clr_wr_dma_multi_tnum:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 37</span>
		 <span class="nl">clr_alg_data_overflow:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 38</span>
		 <span class="nl">clr_alg_data_underflo:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 39</span>
		 <span class="nl">clr_ram0_access_confl:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 40</span>
		 <span class="nl">clr_ram1_access_confl:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 41</span>
		 <span class="nl">clr_ram2_access_confl:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 42</span>
		 <span class="nl">clr_ram0_perr:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 43</span>
		 <span class="nl">clr_ram1_perr:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 44</span>
		 <span class="nl">clr_ram2_perr:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 45</span>
		 <span class="nl">clr_int_gen_rsp_err:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 46</span>
		 <span class="nl">clr_int_gen_tnum_tout:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 47</span>
		 <span class="nl">clr_rd_dma_prog_err:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 48</span>
		 <span class="nl">clr_wr_dma_prog_err:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 49</span>
		<span class="o">:</span><span class="mi">14</span><span class="p">;</span>		<span class="c1">// 63:50</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">cm_error_intr_enable</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">cm_error_intr_enable_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">int_en_ecc_sbe</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 0</span>
		 <span class="nl">int_en_ecc_mbe:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 1</span>
		 <span class="nl">int_en_unsupported_re:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 2</span>
		 <span class="nl">int_en_unexpected_rsp:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 3</span>
		 <span class="nl">int_en_bad_length:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 4</span>
		 <span class="nl">int_en_bad_datavalid:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 5</span>
		 <span class="nl">int_en_buffer_overflo:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 6</span>
		 <span class="nl">int_en_request_timeou:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 7</span>
		<span class="o">:</span><span class="mi">8</span><span class="p">,</span>		<span class="c1">// 15:8</span>
		 <span class="nl">int_en_head_inv_data_:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 16</span>
		 <span class="nl">int_en_rsp_pactype_in:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 17</span>
		 <span class="nl">int_en_head_sb_err:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 18</span>
		 <span class="nl">int_en_missing_head:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 19</span>
		 <span class="nl">int_en_head_inv_rd_ty:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 20</span>
		 <span class="nl">int_en_head_cmd_err_b:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 21</span>
		 <span class="nl">int_en_req_addr_align:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 22</span>
		 <span class="nl">int_en_pio_req_addr_i:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 23</span>
		 <span class="nl">int_en_req_range_dsiz:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 24</span>
		 <span class="nl">int_en_early_term:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 25</span>
		 <span class="nl">int_en_early_tail:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 26</span>
		 <span class="nl">int_en_missing_tail:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 27</span>
		 <span class="nl">int_en_data_flit_sb_e:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 28</span>
		 <span class="nl">int_en_cm2hcm_req_cre:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 29</span>
		 <span class="nl">int_en_cm2hcm_rsp_cre:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 30</span>
		 <span class="nl">int_en_rx_bad_didn:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 31</span>
		 <span class="nl">int_en_rd_dma_err_rsp:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 32</span>
		 <span class="nl">int_en_rd_dma_tnum_to:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 33</span>
		 <span class="nl">int_en_rd_dma_multi_t:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 34</span>
		 <span class="nl">int_en_wr_dma_err_rsp:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 35</span>
		 <span class="nl">int_en_wr_dma_tnum_to:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 36</span>
		 <span class="nl">int_en_wr_dma_multi_t:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 37</span>
		 <span class="nl">int_en_alg_data_overf:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 38</span>
		 <span class="nl">int_en_alg_data_under:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 39</span>
		 <span class="nl">int_en_ram0_access_co:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 40</span>
		 <span class="nl">int_en_ram1_access_co:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 41</span>
		 <span class="nl">int_en_ram2_access_co:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 42</span>
		 <span class="nl">int_en_ram0_perr:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 43</span>
		 <span class="nl">int_en_ram1_perr:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 44</span>
		 <span class="nl">int_en_ram2_perr:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 45</span>
		 <span class="nl">int_en_int_gen_rsp_er:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 46</span>
		 <span class="nl">int_en_int_gen_tnum_t:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 47</span>
		 <span class="nl">int_en_rd_dma_prog_er:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 48</span>
		 <span class="nl">int_en_wr_dma_prog_er:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 49</span>
		<span class="o">:</span><span class="mi">14</span><span class="p">;</span>		<span class="c1">// 63:50</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cm_mmr</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">cm_id</span> <span class="n">id</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">cm_status</span> <span class="n">status</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">cm_error_detail1</span> <span class="n">err_detail1</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">cm_error_detail2</span> <span class="n">err_detail2</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">cm_control</span> <span class="n">control</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">cm_req_timeout</span> <span class="n">req_timeout</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">reserved1</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
	<span class="k">union</span> <span class="n">intr_dest</span> <span class="n">int_dest</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">reserved2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">uint64_t</span> <span class="n">targ_flush</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">reserved3</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
	<span class="k">union</span> <span class="n">cm_error_status</span> <span class="n">err_status</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">cm_clr_error_status</span> <span class="n">clr_err_status</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">cm_error_intr_enable</span> <span class="n">int_enable</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">dma_hostaddr</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">dma_hostaddr_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">dma_sys_addr</span><span class="o">:</span><span class="mi">56</span><span class="p">,</span>	<span class="c1">// 55:0</span>
		<span class="o">:</span><span class="mi">8</span><span class="p">;</span>		<span class="c1">// 63:56</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">dma_localaddr</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">dma_localaddr_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">dma_ram_addr</span><span class="o">:</span><span class="mi">21</span><span class="p">,</span>	<span class="c1">// 20:0</span>
		 <span class="nl">dma_ram_sel:</span><span class="mi">2</span><span class="p">,</span>	<span class="c1">// 22:21</span>
		<span class="o">:</span><span class="mi">41</span><span class="p">;</span>		<span class="c1">// 63:23</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">dma_control</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">dma_control_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">dma_op_length</span><span class="o">:</span><span class="mi">16</span><span class="p">,</span>	<span class="c1">// 15:0</span>
		<span class="o">:</span><span class="mi">18</span><span class="p">,</span>		<span class="c1">// 33:16</span>
		 <span class="nl">done_amo_en:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 34</span>
		 <span class="nl">done_int_en:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 35</span>
		<span class="o">:</span><span class="mi">1</span><span class="p">,</span>		<span class="c1">// 36</span>
		 <span class="nl">pio_mem_n:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 37</span>
		<span class="o">:</span><span class="mi">26</span><span class="p">;</span>		<span class="c1">// 63:38</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">dma_amo_dest</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">dma_amo_dest_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">dma_amo_sys_addr</span><span class="o">:</span><span class="mi">56</span><span class="p">,</span>	<span class="c1">// 55:0</span>
		 <span class="nl">dma_amo_mod_type:</span><span class="mi">3</span><span class="p">,</span>	<span class="c1">// 58:56</span>
		<span class="o">:</span><span class="mi">5</span><span class="p">;</span>		<span class="c1">// 63:59</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">rdma_aux_status</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">rdma_aux_status_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">op_num_pacs_left</span><span class="o">:</span><span class="mi">17</span><span class="p">,</span>	<span class="c1">// 16:0</span>
		<span class="o">:</span><span class="mi">5</span><span class="p">,</span>		<span class="c1">// 21:17</span>
		 <span class="nl">lrsp_buff_empty:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 22</span>
		<span class="o">:</span><span class="mi">17</span><span class="p">,</span>		<span class="c1">// 39:23</span>
		 <span class="nl">pending_reqs_left:</span><span class="mi">6</span><span class="p">,</span>	<span class="c1">// 45:40</span>
		<span class="o">:</span><span class="mi">18</span><span class="p">;</span>		<span class="c1">// 63:46</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rdma_mmr</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">dma_hostaddr</span> <span class="n">host_addr</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">dma_localaddr</span> <span class="n">local_addr</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">dma_control</span> <span class="n">control</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">dma_amo_dest</span> <span class="n">amo_dest</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">intr_dest</span> <span class="n">intr_dest</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">rdma_aux_status</span> <span class="n">aux_status</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">wdma_aux_status</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">wdma_aux_status_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">op_num_pacs_left</span><span class="o">:</span><span class="mi">17</span><span class="p">,</span>	<span class="c1">// 16:0</span>
		<span class="o">:</span><span class="mi">4</span><span class="p">,</span>		<span class="c1">// 20:17</span>
		 <span class="nl">lreq_buff_empty:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 21</span>
		<span class="o">:</span><span class="mi">18</span><span class="p">,</span>		<span class="c1">// 39:22</span>
		 <span class="nl">pending_reqs_left:</span><span class="mi">6</span><span class="p">,</span>	<span class="c1">// 45:40</span>
		<span class="o">:</span><span class="mi">18</span><span class="p">;</span>		<span class="c1">// 63:46</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">wdma_mmr</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">dma_hostaddr</span> <span class="n">host_addr</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">dma_localaddr</span> <span class="n">local_addr</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">dma_control</span> <span class="n">control</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">dma_amo_dest</span> <span class="n">amo_dest</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">intr_dest</span> <span class="n">intr_dest</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">wdma_aux_status</span> <span class="n">aux_status</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">algo_step</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">algo_step_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">alg_step_cnt</span><span class="o">:</span><span class="mi">16</span><span class="p">,</span>	<span class="c1">// 15:0</span>
		<span class="o">:</span><span class="mi">48</span><span class="p">;</span>		<span class="c1">// 63:16</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">algo_mmr</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">dma_amo_dest</span> <span class="n">amo_dest</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">intr_dest</span> <span class="n">intr_dest</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">uint64_t</span> <span class="n">algo_offset_reg</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="kt">uint64_t</span> <span class="n">sram0_offset</span><span class="o">:</span><span class="mi">7</span><span class="p">,</span>	<span class="c1">// 6:0</span>
			<span class="nl">reserved0:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 7</span>
			<span class="nl">sram1_offset:</span><span class="mi">7</span><span class="p">,</span>	<span class="c1">// 14:8</span>
			<span class="nl">reserved1:</span><span class="mi">1</span><span class="p">,</span>	<span class="c1">// 15</span>
			<span class="nl">sram2_offset:</span><span class="mi">7</span><span class="p">,</span>	<span class="c1">// 22:16</span>
			<span class="nl">reserved2:</span><span class="mi">14</span><span class="p">;</span>	<span class="c1">// 63:23</span>
		<span class="p">};</span>
	<span class="p">}</span> <span class="n">sram_offset</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">algo_step</span> <span class="n">step</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mbcs_mmr</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">cm_mmr</span> <span class="n">cm</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">reserved1</span><span class="p">[</span><span class="mi">17</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">rdma_mmr</span> <span class="n">rdDma</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">reserved2</span><span class="p">[</span><span class="mi">25</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">wdma_mmr</span> <span class="n">wrDma</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">reserved3</span><span class="p">[</span><span class="mi">25</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">algo_mmr</span> <span class="n">algo</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">reserved4</span><span class="p">[</span><span class="mi">156</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * defines</span>
<span class="cm"> */</span>
<span class="cp">#define DEVICE_NAME &quot;mbcs&quot;</span>
<span class="cp">#define MBCS_PART_NUM 0xfff0</span>
<span class="cp">#define MBCS_PART_NUM_ALG0 0xf001</span>
<span class="cp">#define MBCS_MFG_NUM  0x1</span>

<span class="k">struct</span> <span class="n">algoblock</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">amoHostDest</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">amoModType</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">intrHostDest</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">intrVector</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">algoStepCount</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">getdma</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">hostAddr</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">localAddr</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">bytes</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">DoneAmoEnable</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">DoneIntEnable</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">peerIO</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">amoHostDest</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">amoModType</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">intrHostDest</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">intrVector</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">putdma</span> <span class="p">{</span>
	<span class="kt">uint64_t</span> <span class="n">hostAddr</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">localAddr</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">bytes</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">DoneAmoEnable</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">DoneIntEnable</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">peerIO</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">amoHostDest</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">amoModType</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">intrHostDest</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">intrVector</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mbcs_soft</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cx_dev</span> <span class="o">*</span><span class="n">cxdev</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">major</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">nasid</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">mmr_base</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">dmawrite_queue</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">dmaread_queue</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">algo_queue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sn_irq_info</span> <span class="o">*</span><span class="n">get_sn_irq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sn_irq_info</span> <span class="o">*</span><span class="n">put_sn_irq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sn_irq_info</span> <span class="o">*</span><span class="n">algo_sn_irq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">getdma</span> <span class="n">getdma</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">putdma</span> <span class="n">putdma</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">algoblock</span> <span class="n">algo</span><span class="p">;</span>
	<span class="kt">uint64_t</span> <span class="n">gscr_addr</span><span class="p">;</span>	<span class="c1">// pio addr</span>
	<span class="kt">uint64_t</span> <span class="n">ram0_addr</span><span class="p">;</span>	<span class="c1">// pio addr</span>
	<span class="kt">uint64_t</span> <span class="n">ram1_addr</span><span class="p">;</span>	<span class="c1">// pio addr</span>
	<span class="kt">uint64_t</span> <span class="n">ram2_addr</span><span class="p">;</span>	<span class="c1">// pio addr</span>
	<span class="kt">uint64_t</span> <span class="n">debug_addr</span><span class="p">;</span>	<span class="c1">// pio addr</span>
	<span class="n">atomic_t</span> <span class="n">dmawrite_done</span><span class="p">;</span>
	<span class="n">atomic_t</span> <span class="n">dmaread_done</span><span class="p">;</span>
	<span class="n">atomic_t</span> <span class="n">algo_done</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span> <span class="n">dmawritelock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span> <span class="n">dmareadlock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span> <span class="n">algolock</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">mbcs_open</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">ip</span><span class="p">,</span> <span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="n">fp</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">ssize_t</span> <span class="n">mbcs_sram_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="n">fp</span><span class="p">,</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">,</span>
			      <span class="n">loff_t</span> <span class="o">*</span> <span class="n">off</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">ssize_t</span> <span class="n">mbcs_sram_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="n">fp</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">,</span>
			       <span class="n">loff_t</span> <span class="o">*</span> <span class="n">off</span><span class="p">);</span>
<span class="k">static</span> <span class="n">loff_t</span> <span class="n">mbcs_sram_llseek</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="n">filp</span><span class="p">,</span> <span class="n">loff_t</span> <span class="n">off</span><span class="p">,</span> <span class="kt">int</span> <span class="n">whence</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">mbcs_gscr_mmap</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="n">fp</span><span class="p">,</span> <span class="k">struct</span> <span class="n">vm_area_struct</span> <span class="o">*</span><span class="n">vma</span><span class="p">);</span>

<span class="cp">#endif				</span><span class="c1">// __MBCS_H__</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
