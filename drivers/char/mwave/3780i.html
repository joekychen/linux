<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › char › mwave › 3780i.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>3780i.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">*</span>
<span class="cm">* 3780i.h -- declarations for 3780i.c</span>
<span class="cm">*</span>
<span class="cm">*</span>
<span class="cm">* Written By: Mike Sullivan IBM Corporation</span>
<span class="cm">*</span>
<span class="cm">* Copyright (C) 1999 IBM Corporation</span>
<span class="cm">*</span>
<span class="cm">* This program is free software; you can redistribute it and/or modify</span>
<span class="cm">* it under the terms of the GNU General Public License as published by</span>
<span class="cm">* the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm">* (at your option) any later version.</span>
<span class="cm">*</span>
<span class="cm">* This program is distributed in the hope that it will be useful,</span>
<span class="cm">* but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm">* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm">* GNU General Public License for more details.</span>
<span class="cm">*</span>
<span class="cm">* NO WARRANTY</span>
<span class="cm">* THE PROGRAM IS PROVIDED ON AN &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR</span>
<span class="cm">* CONDITIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED INCLUDING, WITHOUT</span>
<span class="cm">* LIMITATION, ANY WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT,</span>
<span class="cm">* MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. Each Recipient is</span>
<span class="cm">* solely responsible for determining the appropriateness of using and</span>
<span class="cm">* distributing the Program and assumes all risks associated with its</span>
<span class="cm">* exercise of rights under this Agreement, including but not limited to</span>
<span class="cm">* the risks and costs of program errors, damage to or loss of data,</span>
<span class="cm">* programs or equipment, and unavailability or interruption of operations.</span>
<span class="cm">*</span>
<span class="cm">* DISCLAIMER OF LIABILITY</span>
<span class="cm">* NEITHER RECIPIENT NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR ANY</span>
<span class="cm">* DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span>
<span class="cm">* DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED AND</span>
<span class="cm">* ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR</span>
<span class="cm">* TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE</span>
<span class="cm">* USE OR DISTRIBUTION OF THE PROGRAM OR THE EXERCISE OF ANY RIGHTS GRANTED</span>
<span class="cm">* HEREUNDER, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES</span>
<span class="cm">*</span>
<span class="cm">* You should have received a copy of the GNU General Public License</span>
<span class="cm">* along with this program; if not, write to the Free Software</span>
<span class="cm">* Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
<span class="cm">*</span>
<span class="cm">*</span>
<span class="cm">* 10/23/2000 - Alpha Release</span>
<span class="cm">*	First release to the public</span>
<span class="cm">*/</span>

<span class="cp">#ifndef _LINUX_3780I_H</span>
<span class="cp">#define _LINUX_3780I_H</span>

<span class="cp">#include &lt;asm/io.h&gt;</span>

<span class="cm">/* DSP I/O port offsets and definitions */</span>
<span class="cp">#define DSP_IsaSlaveControl        0x0000	</span><span class="cm">/* ISA slave control register */</span><span class="cp"></span>
<span class="cp">#define DSP_IsaSlaveStatus         0x0001	</span><span class="cm">/* ISA slave status register */</span><span class="cp"></span>
<span class="cp">#define DSP_ConfigAddress          0x0002	</span><span class="cm">/* General config address register */</span><span class="cp"></span>
<span class="cp">#define DSP_ConfigData             0x0003	</span><span class="cm">/* General config data register */</span><span class="cp"></span>
<span class="cp">#define DSP_HBridgeControl         0x0002	</span><span class="cm">/* HBridge control register */</span><span class="cp"></span>
<span class="cp">#define DSP_MsaAddrLow             0x0004	</span><span class="cm">/* MSP System Address, low word */</span><span class="cp"></span>
<span class="cp">#define DSP_MsaAddrHigh            0x0006	</span><span class="cm">/* MSP System Address, high word */</span><span class="cp"></span>
<span class="cp">#define DSP_MsaDataDSISHigh        0x0008	</span><span class="cm">/* MSA data register: d-store word or high byte of i-store */</span><span class="cp"></span>
<span class="cp">#define DSP_MsaDataISLow           0x000A	</span><span class="cm">/* MSA data register: low word of i-store */</span><span class="cp"></span>
<span class="cp">#define DSP_ReadAndClear           0x000C	</span><span class="cm">/* MSA read and clear data register */</span><span class="cp"></span>
<span class="cp">#define DSP_Interrupt              0x000E	</span><span class="cm">/* Interrupt register (IPC source) */</span><span class="cp"></span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ClockControl</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Clock control: 0=normal, 1=stop 3780i clocks */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">SoftReset</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Soft reset 0=normal, 1=soft reset active */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ConfigMode</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Configuration mode, 0=normal, 1=config mode */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Reserved</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>	<span class="cm">/* 0: Reserved */</span>
<span class="p">}</span> <span class="n">DSP_ISA_SLAVE_CONTROL</span><span class="p">;</span>


<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">EnableDspInt</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Enable DSP to X86 ISA interrupt 0=mask it, 1=enable it */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">MemAutoInc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Memory address auto increment, 0=disable, 1=enable */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">IoAutoInc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: I/O address auto increment, 0=disable, 1=enable */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">DiagnosticMode</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Disgnostic mode 0=nromal, 1=diagnostic mode */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">IsaPacingTimer</span><span class="o">:</span><span class="mi">12</span><span class="p">;</span>	<span class="cm">/* R: ISA access pacing timer: count of core cycles stolen */</span>
<span class="p">}</span> <span class="n">DSP_HBRIDGE_CONTROL</span><span class="p">;</span>


<span class="cm">/* DSP register indexes used with the configuration register address (index) register */</span>
<span class="cp">#define DSP_UartCfg1Index          0x0003	</span><span class="cm">/* UART config register 1 */</span><span class="cp"></span>
<span class="cp">#define DSP_UartCfg2Index          0x0004	</span><span class="cm">/* UART config register 2 */</span><span class="cp"></span>
<span class="cp">#define DSP_HBridgeCfg1Index       0x0007	</span><span class="cm">/* HBridge config register 1 */</span><span class="cp"></span>
<span class="cp">#define DSP_HBridgeCfg2Index       0x0008	</span><span class="cm">/* HBridge config register 2 */</span><span class="cp"></span>
<span class="cp">#define DSP_BusMasterCfg1Index     0x0009	</span><span class="cm">/* ISA bus master config register 1 */</span><span class="cp"></span>
<span class="cp">#define DSP_BusMasterCfg2Index     0x000A	</span><span class="cm">/* ISA bus master config register 2 */</span><span class="cp"></span>
<span class="cp">#define DSP_IsaProtCfgIndex        0x000F	</span><span class="cm">/* ISA protocol control register */</span><span class="cp"></span>
<span class="cp">#define DSP_PowerMgCfgIndex        0x0010	</span><span class="cm">/* Low poser suspend/resume enable */</span><span class="cp"></span>
<span class="cp">#define DSP_HBusTimerCfgIndex      0x0011	</span><span class="cm">/* HBUS timer load value */</span><span class="cp"></span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">IrqActiveLow</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: IRQ active high or low: 0=high, 1=low */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">IrqPulse</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: IRQ pulse or level: 0=level, 1=pulse  */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Irq</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>	<span class="cm">/* RW: IRQ selection */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">BaseIO</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* RW: Base I/O selection */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Reserved</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* 0: Reserved */</span>
<span class="p">}</span> <span class="n">DSP_UART_CFG_1</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Enable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Enable I/O and IRQ: 0=FALSE, 1=TRUE */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Reserved</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>	<span class="cm">/* 0: Reserved */</span>
<span class="p">}</span> <span class="n">DSP_UART_CFG_2</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">IrqActiveLow</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: IRQ active high=0 or low=1 */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">IrqPulse</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: IRQ pulse=1 or level=0 */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Irq</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>	<span class="cm">/* RW: IRQ selection */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">AccessMode</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: 16-bit register access method 0=byte, 1=word */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Reserved</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* 0: Reserved */</span>
<span class="p">}</span> <span class="n">DSP_HBRIDGE_CFG_1</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Enable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: enable I/O and IRQ: 0=FALSE, 1=TRUE */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Reserved</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>	<span class="cm">/* 0: Reserved */</span>
<span class="p">}</span> <span class="n">DSP_HBRIDGE_CFG_2</span><span class="p">;</span>


<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Dma</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>	<span class="cm">/* RW: DMA channel selection */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">NumTransfers</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* RW: Maximum # of transfers once being granted the ISA bus */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ReRequest</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* RW: Minimum delay between releasing the ISA bus and requesting it again */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">MEMCS16</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: ISA signal MEMCS16: 0=disabled, 1=enabled */</span>
<span class="p">}</span> <span class="n">DSP_BUSMASTER_CFG_1</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">IsaMemCmdWidth</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* RW: ISA memory command width */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Reserved</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>	<span class="cm">/* 0: Reserved */</span>
<span class="p">}</span> <span class="n">DSP_BUSMASTER_CFG_2</span><span class="p">;</span>


<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">GateIOCHRDY</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Enable IOCHRDY gating: 0=FALSE, 1=TRUE */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Reserved</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>	<span class="cm">/* 0: Reserved */</span>
<span class="p">}</span> <span class="n">DSP_ISA_PROT_CFG</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Enable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Enable low power suspend/resume 0=FALSE, 1=TRUE */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Reserved</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>	<span class="cm">/* 0: Reserved */</span>
<span class="p">}</span> <span class="n">DSP_POWER_MGMT_CFG</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">LoadValue</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>	<span class="cm">/* RW: HBUS timer load value */</span>
<span class="p">}</span> <span class="n">DSP_HBUS_TIMER_CFG</span><span class="p">;</span>



<span class="cm">/* DSP registers that exist in MSA I/O space */</span>
<span class="cp">#define DSP_ChipID                 0x80000000</span>
<span class="cp">#define DSP_MspBootDomain          0x80000580</span>
<span class="cp">#define DSP_LBusTimeoutDisable     0x80000580</span>
<span class="cp">#define DSP_ClockControl_1         0x8000058A</span>
<span class="cp">#define DSP_ClockControl_2         0x8000058C</span>
<span class="cp">#define DSP_ChipReset              0x80000588</span>
<span class="cp">#define DSP_GpioModeControl_15_8   0x80000082</span>
<span class="cp">#define DSP_GpioDriverEnable_15_8  0x80000076</span>
<span class="cp">#define DSP_GpioOutputData_15_8    0x80000072</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">NMI</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: non maskable interrupt */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Halt</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Halt MSP clock */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ResetCore</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Reset MSP core interface */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Reserved</span><span class="o">:</span><span class="mi">13</span><span class="p">;</span>	<span class="cm">/* 0: Reserved */</span>
<span class="p">}</span> <span class="n">DSP_BOOT_DOMAIN</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">DisableTimeout</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Disable LBus timeout */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Reserved</span><span class="o">:</span><span class="mi">15</span><span class="p">;</span>	<span class="cm">/* 0: Reserved */</span>
<span class="p">}</span> <span class="n">DSP_LBUS_TIMEOUT_DISABLE</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Memory</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Reset memory interface */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">SerialPort1</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Reset serial port 1 interface */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">SerialPort2</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Reset serial port 2 interface */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">SerialPort3</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Reset serial port 3 interface */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Gpio</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Reset GPIO interface */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Dma</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Reset DMA interface */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">SoundBlaster</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Reset soundblaster interface */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Uart</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Reset UART interface */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Midi</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Reset MIDI interface */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">IsaMaster</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: Reset ISA master interface */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Reserved</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>	<span class="cm">/* 0: Reserved */</span>
<span class="p">}</span> <span class="n">DSP_CHIP_RESET</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">N_Divisor</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>	<span class="cm">/* RW: (N) PLL output clock divisor */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Reserved1</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* 0: reserved */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">M_Multiplier</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>	<span class="cm">/* RW: (M) PLL feedback clock multiplier */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Reserved2</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>	<span class="cm">/* 0: reserved */</span>
<span class="p">}</span> <span class="n">DSP_CLOCK_CONTROL_1</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">PllBypass</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* RW: PLL Bypass */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Reserved</span><span class="o">:</span><span class="mi">15</span><span class="p">;</span>	<span class="cm">/* 0: Reserved */</span>
<span class="p">}</span> <span class="n">DSP_CLOCK_CONTROL_2</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Latch8</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Latch9</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Latch10</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Latch11</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Latch12</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Latch13</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Latch14</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Latch15</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask8</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask9</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask10</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask11</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask12</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask13</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask14</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask15</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">DSP_GPIO_OUTPUT_DATA_15_8</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Enable8</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Enable9</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Enable10</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Enable11</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Enable12</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Enable13</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Enable14</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Enable15</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask8</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask9</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask10</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask11</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask12</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask13</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask14</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">Mask15</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">DSP_GPIO_DRIVER_ENABLE_15_8</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">GpioMode8</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">GpioMode9</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">GpioMode10</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">GpioMode11</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">GpioMode12</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">GpioMode13</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">GpioMode14</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">GpioMode15</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
<span class="p">}</span> <span class="n">DSP_GPIO_MODE_15_8</span><span class="p">;</span>

<span class="cm">/* Component masks that are defined in dspmgr.h */</span>
<span class="cp">#define MW_ADC_MASK    0x0001</span>
<span class="cp">#define MW_AIC2_MASK   0x0006</span>
<span class="cp">#define MW_MIDI_MASK   0x0008</span>
<span class="cp">#define MW_CDDAC_MASK  0x8001</span>
<span class="cp">#define MW_AIC1_MASK   0xE006</span>
<span class="cp">#define MW_UART_MASK   0xE00A</span>
<span class="cp">#define MW_ACI_MASK    0xE00B</span>

<span class="cm">/*</span>
<span class="cm">* Definition of 3780i configuration structure.  Unless otherwise stated,</span>
<span class="cm">* these values are provided as input to the 3780i support layer.  At present,</span>
<span class="cm">* the only values maintained by the 3780i support layer are the saved UART</span>
<span class="cm">* registers.</span>
<span class="cm">*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_DSP_3780I_CONFIG_SETTINGS</span> <span class="p">{</span>

	<span class="cm">/* Location of base configuration register */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usBaseConfigIO</span><span class="p">;</span>

	<span class="cm">/* Enables for various DSP components */</span>
	<span class="kt">int</span> <span class="n">bDSPEnabled</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">bModemEnabled</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">bInterruptClaimed</span><span class="p">;</span>

	<span class="cm">/* IRQ, DMA, and Base I/O addresses for various DSP components */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usDspIrq</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usDspDma</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usDspBaseIO</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usUartIrq</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usUartBaseIO</span><span class="p">;</span>

	<span class="cm">/* IRQ modes for various DSP components */</span>
	<span class="kt">int</span> <span class="n">bDspIrqActiveLow</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">bUartIrqActiveLow</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">bDspIrqPulse</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">bUartIrqPulse</span><span class="p">;</span>

	<span class="cm">/* Card abilities */</span>
	<span class="kt">unsigned</span> <span class="n">uIps</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">uDStoreSize</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">uIStoreSize</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">uDmaBandwidth</span><span class="p">;</span>

	<span class="cm">/* Adapter specific 3780i settings */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usNumTransfers</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usReRequest</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">bEnableMEMCS16</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usIsaMemCmdWidth</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">bGateIOCHRDY</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">bEnablePwrMgmt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usHBusTimerLoadValue</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">bDisableLBusTimeout</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usN_Divisor</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usM_Multiplier</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">bPllBypass</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usChipletEnable</span><span class="p">;</span>	<span class="cm">/* Used with the chip reset register to enable specific chiplets */</span>

	<span class="cm">/* Saved UART registers. These are maintained by the 3780i support layer. */</span>
	<span class="kt">int</span> <span class="n">bUartSaved</span><span class="p">;</span>		<span class="cm">/* True after a successful save of the UART registers */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ucIER</span><span class="p">;</span>	<span class="cm">/* Interrupt enable register */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ucFCR</span><span class="p">;</span>	<span class="cm">/* FIFO control register */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ucLCR</span><span class="p">;</span>	<span class="cm">/* Line control register */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ucMCR</span><span class="p">;</span>	<span class="cm">/* Modem control register */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ucSCR</span><span class="p">;</span>	<span class="cm">/* Scratch register */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ucDLL</span><span class="p">;</span>	<span class="cm">/* Divisor latch, low byte */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ucDLM</span><span class="p">;</span>	<span class="cm">/* Divisor latch, high byte */</span>
<span class="p">}</span> <span class="n">DSP_3780I_CONFIG_SETTINGS</span><span class="p">;</span>


<span class="cm">/* 3780i support functions */</span>
<span class="kt">int</span> <span class="n">dsp3780I_EnableDSP</span><span class="p">(</span><span class="n">DSP_3780I_CONFIG_SETTINGS</span> <span class="o">*</span> <span class="n">pSettings</span><span class="p">,</span>
                       <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">pIrqMap</span><span class="p">,</span>
                       <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">pDmaMap</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsp3780I_DisableDSP</span><span class="p">(</span><span class="n">DSP_3780I_CONFIG_SETTINGS</span> <span class="o">*</span> <span class="n">pSettings</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsp3780I_Reset</span><span class="p">(</span><span class="n">DSP_3780I_CONFIG_SETTINGS</span> <span class="o">*</span> <span class="n">pSettings</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsp3780I_Run</span><span class="p">(</span><span class="n">DSP_3780I_CONFIG_SETTINGS</span> <span class="o">*</span> <span class="n">pSettings</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsp3780I_ReadDStore</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usDspBaseIO</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">pvBuffer</span><span class="p">,</span>
                        <span class="kt">unsigned</span> <span class="n">uCount</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ulDSPAddr</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsp3780I_ReadAndClearDStore</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usDspBaseIO</span><span class="p">,</span>
                                <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">pvBuffer</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">uCount</span><span class="p">,</span>
                                <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ulDSPAddr</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsp3780I_WriteDStore</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usDspBaseIO</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">pvBuffer</span><span class="p">,</span>
                         <span class="kt">unsigned</span> <span class="n">uCount</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ulDSPAddr</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsp3780I_ReadIStore</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usDspBaseIO</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">pvBuffer</span><span class="p">,</span>
                        <span class="kt">unsigned</span> <span class="n">uCount</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ulDSPAddr</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsp3780I_WriteIStore</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usDspBaseIO</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">pvBuffer</span><span class="p">,</span>
                         <span class="kt">unsigned</span> <span class="n">uCount</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ulDSPAddr</span><span class="p">);</span>
<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">dsp3780I_ReadMsaCfg</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usDspBaseIO</span><span class="p">,</span>
                                   <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ulMsaAddr</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">dsp3780I_WriteMsaCfg</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usDspBaseIO</span><span class="p">,</span>
                          <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ulMsaAddr</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usValue</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsp3780I_GetIPCSource</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">usDspBaseIO</span><span class="p">,</span>
                          <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">pusIPCSource</span><span class="p">);</span>

<span class="cm">/* I/O port access macros */</span>
<span class="cp">#define MKWORD(var) (*((unsigned short *)(&amp;var)))</span>
<span class="cp">#define MKBYTE(var) (*((unsigned char *)(&amp;var)))</span>

<span class="cp">#define WriteMsaCfg(addr,value) dsp3780I_WriteMsaCfg(usDspBaseIO,addr,value)</span>
<span class="cp">#define ReadMsaCfg(addr) dsp3780I_ReadMsaCfg(usDspBaseIO,addr)</span>
<span class="cp">#define WriteGenCfg(index,value) dsp3780I_WriteGenCfg(usDspBaseIO,index,value)</span>
<span class="cp">#define ReadGenCfg(index) dsp3780I_ReadGenCfg(usDspBaseIO,index)</span>

<span class="cp">#define InWordDsp(index)          inw(usDspBaseIO+index)</span>
<span class="cp">#define InByteDsp(index)          inb(usDspBaseIO+index)</span>
<span class="cp">#define OutWordDsp(index,value)   outw(value,usDspBaseIO+index)</span>
<span class="cp">#define OutByteDsp(index,value)   outb(value,usDspBaseIO+index)</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
