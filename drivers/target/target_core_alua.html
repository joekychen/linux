<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › target › target_core_alua.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>target_core_alua.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef TARGET_CORE_ALUA_H</span>
<span class="cp">#define TARGET_CORE_ALUA_H</span>

<span class="cm">/*</span>
<span class="cm"> * INQUIRY response data, TPGS Field</span>
<span class="cm"> *</span>
<span class="cm"> * from spc4r17 section 6.4.2 Table 135</span>
<span class="cm"> */</span>
<span class="cp">#define TPGS_NO_ALUA				0x00</span>
<span class="cp">#define TPGS_IMPLICT_ALUA			0x10</span>
<span class="cp">#define TPGS_EXPLICT_ALUA			0x20</span>

<span class="cm">/*</span>
<span class="cm"> * ASYMMETRIC ACCESS STATE field</span>
<span class="cm"> *</span>
<span class="cm"> * from spc4r17 section 6.27 Table 245</span>
<span class="cm"> */</span>
<span class="cp">#define ALUA_ACCESS_STATE_ACTIVE_OPTMIZED	0x0</span>
<span class="cp">#define ALUA_ACCESS_STATE_ACTIVE_NON_OPTIMIZED	0x1</span>
<span class="cp">#define ALUA_ACCESS_STATE_STANDBY		0x2</span>
<span class="cp">#define ALUA_ACCESS_STATE_UNAVAILABLE		0x3</span>
<span class="cp">#define ALUA_ACCESS_STATE_OFFLINE		0xe</span>
<span class="cp">#define ALUA_ACCESS_STATE_TRANSITION		0xf</span>

<span class="cm">/*</span>
<span class="cm"> * REPORT_TARGET_PORT_GROUP STATUS CODE</span>
<span class="cm"> *</span>
<span class="cm"> * from spc4r17 section 6.27 Table 246</span>
<span class="cm"> */</span>
<span class="cp">#define ALUA_STATUS_NONE				0x00</span>
<span class="cp">#define ALUA_STATUS_ALTERED_BY_EXPLICT_STPG		0x01</span>
<span class="cp">#define ALUA_STATUS_ALTERED_BY_IMPLICT_ALUA		0x02</span>

<span class="cm">/*</span>
<span class="cm"> * From spc4r17, Table D.1: ASC and ASCQ Assignement</span>
<span class="cm"> */</span>
<span class="cp">#define ASCQ_04H_ALUA_STATE_TRANSITION			0x0a</span>
<span class="cp">#define ASCQ_04H_ALUA_TG_PT_STANDBY			0x0b</span>
<span class="cp">#define ASCQ_04H_ALUA_TG_PT_UNAVAILABLE			0x0c</span>
<span class="cp">#define ASCQ_04H_ALUA_OFFLINE				0x12</span>

<span class="cm">/*</span>
<span class="cm"> * Used as the default for Active/NonOptimized delay (in milliseconds)</span>
<span class="cm"> * This can also be changed via configfs on a per target port group basis..</span>
<span class="cm"> */</span>
<span class="cp">#define ALUA_DEFAULT_NONOP_DELAY_MSECS			100</span>
<span class="cp">#define ALUA_MAX_NONOP_DELAY_MSECS			10000 </span><span class="cm">/* 10 seconds */</span><span class="cp"></span>
<span class="cm">/*</span>
<span class="cm"> * Used for implict and explict ALUA transitional delay, that is disabled</span>
<span class="cm"> * by default, and is intended to be used for debugging client side ALUA code.</span>
<span class="cm"> */</span>
<span class="cp">#define ALUA_DEFAULT_TRANS_DELAY_MSECS			0</span>
<span class="cp">#define ALUA_MAX_TRANS_DELAY_MSECS			30000 </span><span class="cm">/* 30 seconds */</span><span class="cp"></span>
<span class="cm">/*</span>
<span class="cm"> * Used for the recommended application client implict transition timeout</span>
<span class="cm"> * in seconds, returned by the REPORT_TARGET_PORT_GROUPS w/ extended header.</span>
<span class="cm"> */</span>
<span class="cp">#define ALUA_DEFAULT_IMPLICT_TRANS_SECS			0</span>
<span class="cp">#define ALUA_MAX_IMPLICT_TRANS_SECS			255</span>
<span class="cm">/*</span>
<span class="cm"> * Used by core_alua_update_tpg_primary_metadata() and</span>
<span class="cm"> * core_alua_update_tpg_secondary_metadata()</span>
<span class="cm"> */</span>
<span class="cp">#define ALUA_METADATA_PATH_LEN				512</span>
<span class="cm">/*</span>
<span class="cm"> * Used by core_alua_update_tpg_secondary_metadata()</span>
<span class="cm"> */</span>
<span class="cp">#define ALUA_SECONDARY_METADATA_WWN_LEN			256</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">kmem_cache</span> <span class="o">*</span><span class="n">t10_alua_lu_gp_cache</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">kmem_cache</span> <span class="o">*</span><span class="n">t10_alua_lu_gp_mem_cache</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">kmem_cache</span> <span class="o">*</span><span class="n">t10_alua_tg_pt_gp_cache</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">kmem_cache</span> <span class="o">*</span><span class="n">t10_alua_tg_pt_gp_mem_cache</span><span class="p">;</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">target_emulate_report_target_port_groups</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_cmd</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">target_emulate_set_target_port_groups</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_cmd</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">core_alua_check_nonop_delay</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_cmd</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">core_alua_do_port_transition</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">se_device</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">se_port</span> <span class="o">*</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">se_node_acl</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span><span class="n">core_alua_dump_status</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">t10_alua_lu_gp</span> <span class="o">*</span><span class="n">core_alua_allocate_lu_gp</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">core_alua_set_lu_gp_id</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_lu_gp</span> <span class="o">*</span><span class="p">,</span> <span class="n">u16</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">core_alua_free_lu_gp</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_lu_gp</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">core_alua_free_lu_gp_mem</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">t10_alua_lu_gp</span> <span class="o">*</span><span class="n">core_alua_get_lu_gp_by_name</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">core_alua_put_lu_gp_from_name</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_lu_gp</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">__core_alua_attach_lu_gp_mem</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_lu_gp_member</span> <span class="o">*</span><span class="p">,</span>
					<span class="k">struct</span> <span class="n">t10_alua_lu_gp</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">__core_alua_drop_lu_gp_mem</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_lu_gp_member</span> <span class="o">*</span><span class="p">,</span>
					<span class="k">struct</span> <span class="n">t10_alua_lu_gp</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">core_alua_drop_lu_gp_dev</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="n">core_alua_allocate_tg_pt_gp</span><span class="p">(</span>
			<span class="k">struct</span> <span class="n">se_subsystem_dev</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">core_alua_set_tg_pt_gp_id</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="p">,</span> <span class="n">u16</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp_member</span> <span class="o">*</span><span class="n">core_alua_allocate_tg_pt_gp_mem</span><span class="p">(</span>
					<span class="k">struct</span> <span class="n">se_port</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">core_alua_free_tg_pt_gp</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">core_alua_free_tg_pt_gp_mem</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_port</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">__core_alua_attach_tg_pt_gp_mem</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp_member</span> <span class="o">*</span><span class="p">,</span>
					<span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_show_tg_pt_gp_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_port</span> <span class="o">*</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_store_tg_pt_gp_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_port</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span>
						<span class="kt">size_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_show_access_type</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_store_access_type</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="p">,</span>
					<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_show_nonop_delay_msecs</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="p">,</span>
						<span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_store_nonop_delay_msecs</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="p">,</span>
					<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_show_trans_delay_msecs</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="p">,</span>
					<span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_store_trans_delay_msecs</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="p">,</span>
					<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_show_implict_trans_secs</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="p">,</span>
					<span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_store_implict_trans_secs</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="p">,</span>
					<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_show_preferred_bit</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="p">,</span>
					<span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_store_preferred_bit</span><span class="p">(</span><span class="k">struct</span> <span class="n">t10_alua_tg_pt_gp</span> <span class="o">*</span><span class="p">,</span>
					<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_show_offline_bit</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_lun</span> <span class="o">*</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_store_offline_bit</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_lun</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span>
					<span class="kt">size_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_show_secondary_status</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_lun</span> <span class="o">*</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_store_secondary_status</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_lun</span> <span class="o">*</span><span class="p">,</span>
					<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_show_secondary_write_metadata</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_lun</span> <span class="o">*</span><span class="p">,</span>
					<span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">core_alua_store_secondary_write_metadata</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_lun</span> <span class="o">*</span><span class="p">,</span>
					<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">core_setup_alua</span><span class="p">(</span><span class="k">struct</span> <span class="n">se_device</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* TARGET_CORE_ALUA_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
