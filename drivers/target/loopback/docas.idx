f | tcm_loop.c | s | 38K | 1302 | Andy Grover | agrover@redhat.com | 1334450436 |  | target: Rename target_allocate_tasks to target_setup_cmd_from_cdb  This patch renames a horribly misnamed function that no longer allocate tasks to something more descriptive for it's modern use in target core.  (nab: Fix up ib_srpt to use this as well ahead of a target_submit_cmd conversion)  Signed-off-by: Andy Grover <agrover@redhat.com> Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
f | tcm_loop.h | s | 1.5K | 55 | Nicholas Bellinger | nab@linux-iscsi.org | 1331420117 |  | target: Bump core version to v4.1.0-rc2-ml + fabric versions  Bump core version to v4.1.0-rc2-ml, and for versions from the following mainline fabric modules:  loopback: v2.1-rc2 tcm_fc: v0.4 iscsi-target: v4.1.0-rc2  Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
f | Kconfig | g | 203B |  | Andy Grover | agrover@redhat.com | 1311327468 |  | target: Follow up core updates from AGrover and HCH (round 4)  This patch contains the squashed version of forth round series cleanups from Andy and Christoph following the post heavy lifting in the preceeding: 'Eliminate usage of struct se_mem' and 'Make all control CDBs scatter-gather' changes.  This also includes a conversion of target core and the v3.0 mainline fabric modules (loopback and tcm_fc) to use pr_debug and the CONFIG_DYNAMIC_DEBUG infrastructure!  These have been squashed into this third and final round for v3.1.  target: Remove ifdeffed code in t_g_process_write target: Remove direct ramdisk code target: Rename task_sg_num to task_sg_nents target: Remove custom debug macros for pr_debug. Use pr_err(). target: Remove custom debug macros in mainline fabrics target: Set WSNZ=1 in block limits VPD. Abort if WRITE_SAME sectors = 0 target: Remove transport do_se_mem_map callback target: Further simplify transport_free_pages target: Redo task allocation return value handling target: Remove extra parentheses target: change alloc_task call to take *cdb, not *cmd  (nab: Fix bogus struct file assignments in fd_do_readv and fd_do_writev)  Signed-off-by: Andy Grover <agrover@redhat.com> Reviewed-by: Christoph Hellwig <hch@lst.de> Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
f | Makefile | g | 44B |  | Nicholas Bellinger | nab@linux-iscsi.org | 1300903833 |  | [SCSI] tcm_loop: Add multi-fabric Linux/SCSI LLD fabric module  This patch adds the TCM_Loop Linux/SCSI LLD fabric module for accessing TCM device backstores as locally accessable SCSI LUNs in virtual SAS, FC, and iSCSI Target ports using the generic fabric TransportID and Target Port WWN naming handlers from TCM's target_core_fabric_lib.c The TCM_Loop module uses the generic fabric configfs infratructure provided by target_core_fabric_configfs.c and adds a module dependent attribute for the creation/release of the virtual I_T Nexus connected the TCM_Loop Target and Initiator Ports.  TCM_Loop can also be used with scsi-generic and BSG drivers so that STGT userspace fabric modules, QEMU-KVM and other hypervisor SCSI passthrough support can access TCM device backstore and control CDB emulation.  For more information please see:  http://linux-iscsi.org/wiki/Tcm_loop  [jejb: fixed up checkpatch stuff] Signed-off-by: Nicholas A. Bellinger <nab@linux-iscsi.org> Reviewed-by: Christoph Hellwig <hch@lst.de> Signed-off-by: James Bottomley <James.Bottomley@suse.de>
