f | map_rom.c | s | 2.7K | 95 | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1332804551 |  | mtd: remove R/O checking duplication  Many drivers check whether the partition is R/O and return -EROFS if yes. Let's stop having duplicated checks and move them to the API functions instead.  And again a bit of noise - deleted few too sparse newlines, sorry.  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | map_ram.c | s | 3.6K | 126 | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1332804551 |  | mtd: remove R/O checking duplication  Many drivers check whether the partition is R/O and return -EROFS if yes. Let's stop having duplicated checks and move them to the API functions instead.  And again a bit of noise - deleted few too sparse newlines, sorry.  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | map_absent.c | s | 2.8K | 94 | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1332804574 |  | mtd: remove retlen zeroing duplication  The MTD API function now zero the 'retlen' parameter before calling the driver's method — do not do this again in drivers. This removes duplicated '*retlen = 0' assignent from the following methods:      'mtd_point()'     'mtd_read()'     'mtd_write()'     'mtd_writev()'     'mtd_panic_write()'  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | Makefile | g | 499B |  | David Woodhouse | dwmw2@infradead.org | 1178714077 |  | [MTD] [CHIPS] Remove MTD_OBSOLETE_CHIPS (jedec, amd_flash, sharp)  Signed-off-by: David Woodhouse <dwmw2@infradead.org>
f | cfi_cmdset_0001.c | s | 72K | 2236 | Linus Torvalds | torvalds@linux-foundation.org | 1333153916 |  | 
f | chipreg.c | s | 2.3K | 81 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1330440913 |  | mtd: simplify return logic in do_map_probe()  Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | cfi_probe.c | s | 11K | 339 | Guillaume LECERF | glecerf@gmail.com | 1288089557 |  | mtd: cfi_cmdset_0002: make sector erase command variable  Some old SST chips use 0x50 as sector erase command, instead of 0x30. Make this value variable to handle such chips.  Signed-off-by: Guillaume LECERF <glecerf@gmail.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | Kconfig | g | 8.2K |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | cfi_cmdset_0002.c | s | 61K | 1888 | David Woodhouse | David.Woodhouse@intel.com | 1336970076 |  | mtd: cfi_cmdset_0002: Slight cleanup of fixup messages  These should be semicolons, not commas.  Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | cfi_cmdset_0020.c | s | 37K | 1181 | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1332804739 |  | mtd: move zero length verification to MTD API functions  In many places in drivers we verify for the zero length, but this is very inconsistent across drivers. This is obviously the right thing to do, though. This patch moves the check to the MTD API functions instead and removes a lot of duplication.  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Reviewed-by: Shmulik Ladkani <shmulik.ladkani@gmail.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | fwh_lock.h | s | 2.7K | 88 | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1332804001 |  | mtd: add leading underscore to all mtd functions  This patch renames all MTD functions by adding a "_" prefix:  mtd->erase -> mtd->_erase mtd->read_oob -> mtd->_read_oob ...  The reason is that we are re-working the MTD API and from now on it is an error to use MTD function pointers directly - we have a corresponding API call for every pointer. By adding a leading "_" we achieve the following:  1. Make sure we convert every direct pointer users 2. A leading "_" suggests that this interface is internal and it becomes    less likely that people will use them directly 3. Make sure all the out-of-tree modules stop compiling and the owners    spot the big API change and amend them.  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | cfi_util.c | s | 6.6K | 205 | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1332804498 |  | mtd: do not duplicate length and offset checks in drivers  We already verify that offset and length are within the MTD device size in the MTD API functions. Let's remove the duplicated checks in drivers. This patch only affects the following API's:  'mtd_erase()' 'mtd_point()' 'mtd_unpoint()' 'mtd_get_unmapped_area()' 'mtd_read()' 'mtd_write()' 'mtd_panic_write()' 'mtd_lock()' 'mtd_unlock()' 'mtd_is_locked()' 'mtd_block_isbad()' 'mtd_block_markbad()'  This patch adds a bit of noise by removing too sparse empty lines, but this is not too bad.  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | jedec_probe.c | s | 56K | 2183 | Brian Norris | computersforpeace@gmail.com | 1315742536 |  | mtd: replace DEBUG() with pr_debug()  Start moving away from the MTD_DEBUG_LEVEL messages. The dynamic debugging feature is a generic kernel feature that provides more flexibility.  (See Documentation/dynamic-debug-howto.txt)  Also fix some punctuation, indentation, and capitalization that went along with the affected lines.  Signed-off-by: Brian Norris <computersforpeace@gmail.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@intel.com>
f | gen_probe.c | s | 6.8K | 217 | Guillaume LECERF | glecerf@gmail.com | 1274371020 |  | mtd: cfi_cmdset_0002: use AMD standard command-set with Winbond flash chips  Tested with W19L320SBT9C [1].  [1] http://www.datasheetarchive.com/pdf-datasheets/Datasheets-40/DSA-795343.pdf  [dwmw2: Fix MODULE_ALIAS and linkage] Signed-off-by: Obinou <obconseil@gmail.com> Signed-off-by: Guillaume LECERF <glecerf@gmail.com> Acked-by: Florian Fainelli <florian@openwrt.org> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
