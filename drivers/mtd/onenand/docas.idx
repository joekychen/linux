f | onenand_base.c | s | 107K | 3536 | Mike Dunn | mikedunn@newsguy.com | 1336968863 |  | mtd: driver _read() returns max_bitflips; mtd_read() returns -EUCLEAN  The drivers' _read() method, absent an error, returns a non-negative integer indicating the maximum number of bit errors that were corrected in any one region comprising an ecc step.  MTD returns -EUCLEAN if this is >= bitflip_threshold, 0 otherwise.  If bitflip_threshold is zero, the comparison is not made since these devices lack ECC and always return zero in the non-error case (thanks Brian)ยน.  Note that this is a subtle change to the driver interface.  This and the preceding patches in this set were tested with ubi on top of the nandsim and docg4 devices, running the ubi test io_basic from mtd-utils.  ยน http://lists.infradead.org/pipermail/linux-mtd/2012-March/040468.html  Signed-off-by: Mike Dunn <mikedunn@newsguy.com> Acked-by: Robert Jarzmik <robert.jarzmik@free.fr> Acked-by: Brian Norris <computersforpeace@gmail.com> Ivan Djelic <ivan.djelic@parrot.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com>  Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | samsung.c | s | 28K | 948 | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1332806000 |  | mtd: do not use plain 0 as NULL  The first 3 arguments of 'mtd_device_parse_register()' are pointers, but many callers pass '0' instead of 'NULL'. Fix this globally. Thanks to coccinelle for making it easy to do with the following semantic patch:   @@  expression mtd, types, parser_data, parts, nr_parts;  @@  (  -mtd_device_parse_register(mtd, 0, parser_data, parts, nr_parts)  +mtd_device_parse_register(mtd, NULL, parser_data, parts, nr_parts)  ||  -mtd_device_parse_register(mtd, types, 0, parts, nr_parts)  +mtd_device_parse_register(mtd, types, NULL, parts, nr_parts)  ||  -mtd_device_parse_register(mtd, types, parser_data, 0, nr_parts)  +mtd_device_parse_register(mtd, types, parser_data, NULL, nr_parts)  )  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | generic.c | s | 3.0K | 101 | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1332806000 |  | mtd: do not use plain 0 as NULL  The first 3 arguments of 'mtd_device_parse_register()' are pointers, but many callers pass '0' instead of 'NULL'. Fix this globally. Thanks to coccinelle for making it easy to do with the following semantic patch:   @@  expression mtd, types, parser_data, parts, nr_parts;  @@  (  -mtd_device_parse_register(mtd, 0, parser_data, parts, nr_parts)  +mtd_device_parse_register(mtd, NULL, parser_data, parts, nr_parts)  ||  -mtd_device_parse_register(mtd, types, 0, parts, nr_parts)  +mtd_device_parse_register(mtd, types, NULL, parts, nr_parts)  ||  -mtd_device_parse_register(mtd, types, parser_data, 0, nr_parts)  +mtd_device_parse_register(mtd, types, parser_data, NULL, nr_parts)  )  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | Makefile | g | 367B |  | Kyungmin Park | kyungmin.park@samsung.com | 1273798280 |  | mtd: add Samsung SoC OneNAND driver  This patch adds a driver for OneNAND controller on Samsung SoCs. Following SoCs are supported: S3C6400, S3C6410, S5PC100 and S5PC110.  Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | onenand_sim.c | s | 13K | 475 | Jamie Iles | jamie@jamieiles.com | 1306286700 |  | mtd: convert remaining users to mtd_device_register()  The older add_mtd_device()/add_mtd_partitions() and their removal counterparts will soon be gone.  Replace uses with mtd_device_register() and mtd_device_unregister().  Signed-off-by: Jamie Iles <jamie@jamieiles.com> Signed-off-by: Artem Bityutskiy <Artem.Bityutskiy@nokia.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | onenand_bbt.c | s | 6.8K | 215 | Linus Torvalds | torvalds@linux-foundation.org | 1320685876 |  | Merge git://git.infradead.org/mtd-2.6  * git://git.infradead.org/mtd-2.6: (226 commits)   mtd: tests: annotate as DANGEROUS in Kconfig   mtd: tests: don't use mtd0 as a default   mtd: clean up usage of MTD_DOCPROBE_ADDRESS   jffs2: add compr=lzo and compr=zlib options   jffs2: implement mount option parsing and compression overriding   mtd: nand: initialize ops.mode   mtd: provide an alias for the redboot module name   mtd: m25p80: don't probe device which has status of 'disabled'   mtd: nand_h1900 never worked   mtd: Add DiskOnChip G3 support   mtd: m25p80: add EON flash EN25Q32B into spi flash id table   mtd: mark block device queue as non-rotational   mtd: r852: make r852_pm_ops static   mtd: m25p80: add support for at25df321a spi data flash   mtd: mxc_nand: preset_v1_v2: unlock all NAND flash blocks   mtd: nand: switch `check_pattern()' to standard `memcmp()'   mtd: nand: invalidate cache on unaligned reads   mtd: nand: do not scan bad blocks with NAND_BBT_NO_OOB set   mtd: nand: wait to set BBT version   mtd: nand: scrub BBT on ECC errors   ...  Fix up trivial conflicts:  - arch/arm/mach-at91/board-usb-a9260.c 	Merged into board-usb-a926x.c  - drivers/mtd/maps/lantiq-flash.c 	add_mtd_partitions -> mtd_device_register vs changed to use 	mtd_device_parse_register.
f | omap2.c | s | 21K | 705 | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1332806000 |  | mtd: do not use plain 0 as NULL  The first 3 arguments of 'mtd_device_parse_register()' are pointers, but many callers pass '0' instead of 'NULL'. Fix this globally. Thanks to coccinelle for making it easy to do with the following semantic patch:   @@  expression mtd, types, parser_data, parts, nr_parts;  @@  (  -mtd_device_parse_register(mtd, 0, parser_data, parts, nr_parts)  +mtd_device_parse_register(mtd, NULL, parser_data, parts, nr_parts)  ||  -mtd_device_parse_register(mtd, types, 0, parts, nr_parts)  +mtd_device_parse_register(mtd, types, NULL, parts, nr_parts)  ||  -mtd_device_parse_register(mtd, types, parser_data, 0, nr_parts)  +mtd_device_parse_register(mtd, types, parser_data, NULL, nr_parts)  )  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | Kconfig | g | 2.6K |  | Richard Weinberger | richard@nod.at | 1332631796 |  | MTD: Relax dependencies  CONFIG_GENERIC_IO is just enough for the basic MTD stuff.  Signed-off-by: Richard Weinberger <richard@nod.at> Acked-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com>
