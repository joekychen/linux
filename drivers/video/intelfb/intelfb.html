<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › video › intelfb › intelfb.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>intelfb.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _INTELFB_H</span>
<span class="cp">#define _INTELFB_H</span>

<span class="cm">/* $DHD: intelfb/intelfb.h,v 1.40 2003/06/27 15:06:25 dawes Exp $ */</span>

<span class="cp">#include &lt;linux/agp_backend.h&gt;</span>
<span class="cp">#include &lt;linux/fb.h&gt;</span>

<span class="cp">#ifdef CONFIG_FB_INTEL_I2C</span>
<span class="cp">#include &lt;linux/i2c.h&gt;</span>
<span class="cp">#include &lt;linux/i2c-algo-bit.h&gt;</span>
<span class="cp">#endif</span>

<span class="cm">/*** Version/name ***/</span>
<span class="cp">#define INTELFB_VERSION			&quot;0.9.6&quot;</span>
<span class="cp">#define INTELFB_MODULE_NAME		&quot;intelfb&quot;</span>
<span class="cp">#define SUPPORTED_CHIPSETS		&quot;830M/845G/852GM/855GM/865G/915G/915GM/945G/945GM/945GME/965G/965GM&quot;</span>


<span class="cm">/*** Debug/feature defines ***/</span>

<span class="cp">#ifndef DEBUG</span>
<span class="cp">#define DEBUG				0</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef VERBOSE</span>
<span class="cp">#define VERBOSE				0</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef REGDUMP</span>
<span class="cp">#define REGDUMP				0</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef DETECT_VGA_CLASS_ONLY</span>
<span class="cp">#define DETECT_VGA_CLASS_ONLY		1</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef ALLOCATE_FOR_PANNING</span>
<span class="cp">#define ALLOCATE_FOR_PANNING		1</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef PREFERRED_MODE</span>
<span class="cp">#define PREFERRED_MODE			&quot;1024x768-32@70&quot;</span>
<span class="cp">#endif</span>

<span class="cm">/*** hw-related values ***/</span>

<span class="cm">/* Resource Allocation */</span>
<span class="cp">#define INTELFB_FB_ACQUIRED                 1</span>
<span class="cp">#define INTELFB_MMIO_ACQUIRED               2</span>

<span class="cm">/* PCI ids for supported devices */</span>
<span class="cp">#define PCI_DEVICE_ID_INTEL_830M	0x3577</span>
<span class="cp">#define PCI_DEVICE_ID_INTEL_845G	0x2562</span>
<span class="cp">#define PCI_DEVICE_ID_INTEL_85XGM	0x3582</span>
<span class="cp">#define PCI_DEVICE_ID_INTEL_854		0x358E</span>
<span class="cp">#define PCI_DEVICE_ID_INTEL_865G	0x2572</span>
<span class="cp">#define PCI_DEVICE_ID_INTEL_915G	0x2582</span>
<span class="cp">#define PCI_DEVICE_ID_INTEL_915GM	0x2592</span>
<span class="cp">#define PCI_DEVICE_ID_INTEL_945G	0x2772</span>
<span class="cp">#define PCI_DEVICE_ID_INTEL_945GM	0x27A2</span>
<span class="cp">#define PCI_DEVICE_ID_INTEL_945GME	0x27AE</span>
<span class="cp">#define PCI_DEVICE_ID_INTEL_965G	0x29A2</span>
<span class="cp">#define PCI_DEVICE_ID_INTEL_965GM	0x2A02</span>

<span class="cm">/* Size of MMIO region */</span>
<span class="cp">#define INTEL_REG_SIZE			0x80000</span>

<span class="cp">#define STRIDE_ALIGNMENT		16</span>
<span class="cp">#define STRIDE_ALIGNMENT_I9XX		64</span>

<span class="cp">#define PALETTE_8_ENTRIES		256</span>


<span class="cm">/*** Macros ***/</span>

<span class="cm">/* basic arithmetic */</span>
<span class="cp">#define KB(x)			((x) * 1024)</span>
<span class="cp">#define MB(x)			((x) * 1024 * 1024)</span>
<span class="cp">#define BtoKB(x)		((x) / 1024)</span>
<span class="cp">#define BtoMB(x)		((x) / 1024 / 1024)</span>

<span class="cp">#define GTT_PAGE_SIZE           KB(4)</span>

<span class="cp">#define ROUND_UP_TO(x, y)	(((x) + (y) - 1) / (y) * (y))</span>
<span class="cp">#define ROUND_DOWN_TO(x, y)	((x) / (y) * (y))</span>
<span class="cp">#define ROUND_UP_TO_PAGE(x)	ROUND_UP_TO((x), GTT_PAGE_SIZE)</span>
<span class="cp">#define ROUND_DOWN_TO_PAGE(x)	ROUND_DOWN_TO((x), GTT_PAGE_SIZE)</span>

<span class="cm">/* messages */</span>
<span class="cp">#define PFX			INTELFB_MODULE_NAME &quot;: &quot;</span>

<span class="cp">#define ERR_MSG(fmt, args...)	printk(KERN_ERR PFX fmt, ## args)</span>
<span class="cp">#define WRN_MSG(fmt, args...)	printk(KERN_WARNING PFX fmt, ## args)</span>
<span class="cp">#define NOT_MSG(fmt, args...)	printk(KERN_NOTICE PFX fmt, ## args)</span>
<span class="cp">#define INF_MSG(fmt, args...)	printk(KERN_INFO PFX fmt, ## args)</span>
<span class="cp">#if DEBUG</span>
<span class="cp">#define DBG_MSG(fmt, args...)	printk(KERN_DEBUG PFX fmt, ## args)</span>
<span class="cp">#else</span>
<span class="cp">#define DBG_MSG(fmt, args...)	while (0) printk(fmt, ## args)</span>
<span class="cp">#endif</span>

<span class="cm">/* get commonly used pointers */</span>
<span class="cp">#define GET_DINFO(info)		(info)-&gt;par</span>

<span class="cm">/* misc macros */</span>
<span class="cp">#define ACCEL(d, i)                                                     \</span>
<span class="cp">	((d)-&gt;accel &amp;&amp; !(d)-&gt;ring_lockup &amp;&amp;                             \</span>
<span class="cp">	 ((i)-&gt;var.accel_flags &amp; FB_ACCELF_TEXT))</span>

<span class="cm">/*#define NOACCEL_CHIPSET(d)						\</span>
<span class="cm">	((d)-&gt;chipset != INTEL_865G)*/</span>
<span class="cp">#define NOACCEL_CHIPSET(d)						\</span>
<span class="cp">	(0)</span>

<span class="cp">#define FIXED_MODE(d) ((d)-&gt;fixed_mode)</span>

<span class="cm">/*** Driver parameters ***/</span>

<span class="cp">#define RINGBUFFER_SIZE		KB(64)</span>
<span class="cp">#define HW_CURSOR_SIZE		KB(4)</span>

<span class="cm">/* Intel agpgart driver */</span>
<span class="cp">#define AGP_PHYSICAL_MEMORY     2</span>

<span class="cm">/* store information about an Ixxx DVO */</span>
<span class="cm">/* The i830-&gt;i865 use multiple DVOs with multiple i2cs */</span>
<span class="cm">/* the i915, i945 have a single sDVO i2c bus - which is different */</span>
<span class="cp">#define MAX_OUTPUTS 6</span>

<span class="cm">/* these are outputs from the chip - integrated only</span>
<span class="cm">   external chips are via DVO or SDVO output */</span>
<span class="cp">#define INTELFB_OUTPUT_UNUSED 0</span>
<span class="cp">#define INTELFB_OUTPUT_ANALOG 1</span>
<span class="cp">#define INTELFB_OUTPUT_DVO 2</span>
<span class="cp">#define INTELFB_OUTPUT_SDVO 3</span>
<span class="cp">#define INTELFB_OUTPUT_LVDS 4</span>
<span class="cp">#define INTELFB_OUTPUT_TVOUT 5</span>

<span class="cp">#define INTELFB_DVO_CHIP_NONE 0</span>
<span class="cp">#define INTELFB_DVO_CHIP_LVDS 1</span>
<span class="cp">#define INTELFB_DVO_CHIP_TMDS 2</span>
<span class="cp">#define INTELFB_DVO_CHIP_TVOUT 4</span>

<span class="cp">#define INTELFB_OUTPUT_PIPE_NC  0</span>
<span class="cp">#define INTELFB_OUTPUT_PIPE_A   1</span>
<span class="cp">#define INTELFB_OUTPUT_PIPE_B   2</span>

<span class="cm">/*** Data Types ***/</span>

<span class="cm">/* supported chipsets */</span>
<span class="k">enum</span> <span class="n">intel_chips</span> <span class="p">{</span>
	<span class="n">INTEL_830M</span><span class="p">,</span>
	<span class="n">INTEL_845G</span><span class="p">,</span>
	<span class="n">INTEL_85XGM</span><span class="p">,</span>
	<span class="n">INTEL_852GM</span><span class="p">,</span>
	<span class="n">INTEL_852GME</span><span class="p">,</span>
	<span class="n">INTEL_854</span><span class="p">,</span>
	<span class="n">INTEL_855GM</span><span class="p">,</span>
	<span class="n">INTEL_855GME</span><span class="p">,</span>
	<span class="n">INTEL_865G</span><span class="p">,</span>
	<span class="n">INTEL_915G</span><span class="p">,</span>
	<span class="n">INTEL_915GM</span><span class="p">,</span>
	<span class="n">INTEL_945G</span><span class="p">,</span>
	<span class="n">INTEL_945GM</span><span class="p">,</span>
	<span class="n">INTEL_945GME</span><span class="p">,</span>
	<span class="n">INTEL_965G</span><span class="p">,</span>
	<span class="n">INTEL_965GM</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">intelfb_hwstate</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">vga0_divisor</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vga1_divisor</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vga_pd</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dpll_a</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dpll_b</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fpa0</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fpa1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fpb0</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fpb1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">palette_a</span><span class="p">[</span><span class="n">PALETTE_8_ENTRIES</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">palette_b</span><span class="p">[</span><span class="n">PALETTE_8_ENTRIES</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">htotal_a</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">hblank_a</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">hsync_a</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vtotal_a</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vblank_a</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vsync_a</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">src_size_a</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">bclrpat_a</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">htotal_b</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">hblank_b</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">hsync_b</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vtotal_b</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vblank_b</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vsync_b</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">src_size_b</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">bclrpat_b</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">adpa</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dvoa</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dvob</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dvoc</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dvoa_srcdim</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dvob_srcdim</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dvoc_srcdim</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">lvds</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pipe_a_conf</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pipe_b_conf</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">disp_arb</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cursor_a_control</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cursor_b_control</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cursor_a_base</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cursor_b_base</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cursor_size</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">disp_a_ctrl</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">disp_b_ctrl</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">disp_a_base</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">disp_b_base</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cursor_a_palette</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">cursor_b_palette</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">disp_a_stride</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">disp_b_stride</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vgacntrl</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">add_id</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">swf0x</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">swf1x</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">swf3x</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">fence</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">instpm</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">mem_mode</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fw_blc_0</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fw_blc_1</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">hwstam</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">ier</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">iir</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">imr</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">intelfb_heap_data</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">physical</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">__iomem</span> <span class="o">*</span><span class="k">virtual</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">offset</span><span class="p">;</span>		<span class="cm">/* in GATT pages */</span>
	<span class="n">u32</span> <span class="n">size</span><span class="p">;</span>		<span class="cm">/* in bytes */</span>
<span class="p">};</span>

<span class="cp">#ifdef CONFIG_FB_INTEL_I2C</span>
<span class="k">struct</span> <span class="n">intelfb_i2c_chan</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="n">intelfb_info</span> <span class="o">*</span><span class="n">dinfo</span><span class="p">;</span>
    <span class="n">u32</span> <span class="n">reg</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">i2c_adapter</span> <span class="n">adapter</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">i2c_algo_bit_data</span> <span class="n">algo</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="k">struct</span> <span class="n">intelfb_output_rec</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">type</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">pipe</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">flags</span><span class="p">;</span>

<span class="cp">#ifdef CONFIG_FB_INTEL_I2C</span>
    <span class="k">struct</span> <span class="n">intelfb_i2c_chan</span> <span class="n">i2c_bus</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">intelfb_i2c_chan</span> <span class="n">ddc_bus</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">intelfb_vsync</span> <span class="p">{</span>
	<span class="n">wait_queue_head_t</span> <span class="n">wait</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">count</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">pan_display</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pan_offset</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">intelfb_info</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">fb_info</span> <span class="o">*</span><span class="n">info</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">fb_ops</span>  <span class="o">*</span><span class="n">fbops</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pdev</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">intelfb_hwstate</span> <span class="n">save_state</span><span class="p">;</span>

	<span class="cm">/* agpgart structs */</span>
	<span class="k">struct</span> <span class="n">agp_memory</span> <span class="o">*</span><span class="n">gtt_fb_mem</span><span class="p">;</span>     <span class="cm">/* use all stolen memory or vram */</span>
	<span class="k">struct</span> <span class="n">agp_memory</span> <span class="o">*</span><span class="n">gtt_ring_mem</span><span class="p">;</span>   <span class="cm">/* ring buffer */</span>
	<span class="k">struct</span> <span class="n">agp_memory</span> <span class="o">*</span><span class="n">gtt_cursor_mem</span><span class="p">;</span> <span class="cm">/* hw cursor */</span>

	<span class="cm">/* use a gart reserved fb mem */</span>
	<span class="n">u8</span> <span class="n">fbmem_gart</span><span class="p">;</span>

	<span class="cm">/* mtrr support */</span>
	<span class="kt">int</span> <span class="n">mtrr_reg</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">has_mtrr</span><span class="p">;</span>

	<span class="cm">/* heap data */</span>
	<span class="k">struct</span> <span class="n">intelfb_heap_data</span> <span class="n">aperture</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">intelfb_heap_data</span> <span class="n">fb</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">intelfb_heap_data</span> <span class="n">ring</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">intelfb_heap_data</span> <span class="n">cursor</span><span class="p">;</span>

	<span class="cm">/* mmio regs */</span>
	<span class="n">u32</span> <span class="n">mmio_base_phys</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mmio_base</span><span class="p">;</span>

	<span class="cm">/* fb start offset (in bytes) */</span>
	<span class="n">u32</span> <span class="n">fb_start</span><span class="p">;</span>

	<span class="cm">/* ring buffer */</span>
	<span class="n">u32</span> <span class="n">ring_head</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ring_tail</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ring_tail_mask</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ring_space</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ring_lockup</span><span class="p">;</span>

	<span class="cm">/* palette */</span>
	<span class="n">u32</span> <span class="n">pseudo_palette</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="cm">/* chip info */</span>
	<span class="kt">int</span> <span class="n">pci_chipset</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">chipset</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mobile</span><span class="p">;</span>

	<span class="cm">/* current mode */</span>
	<span class="kt">int</span> <span class="n">bpp</span><span class="p">,</span> <span class="n">depth</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">visual</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">xres</span><span class="p">,</span> <span class="n">yres</span><span class="p">,</span> <span class="n">pitch</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">pixclock</span><span class="p">;</span>

	<span class="cm">/* current pipe */</span>
	<span class="kt">int</span> <span class="n">pipe</span><span class="p">;</span>

	<span class="cm">/* some flags */</span>
	<span class="kt">int</span> <span class="n">accel</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">hwcursor</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">fixed_mode</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ring_active</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">flag</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">irq_flags</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">open</span><span class="p">;</span>

	<span class="cm">/* vsync */</span>
	<span class="k">struct</span> <span class="n">intelfb_vsync</span> <span class="n">vsync</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">int_lock</span><span class="p">;</span>

	<span class="cm">/* hw cursor */</span>
	<span class="kt">int</span> <span class="n">cursor_on</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">cursor_blanked</span><span class="p">;</span>
	<span class="n">u8</span>  <span class="n">cursor_src</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>

	<span class="cm">/* initial parameters */</span>
	<span class="kt">int</span> <span class="n">initial_vga</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">fb_var_screeninfo</span> <span class="n">initial_var</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">initial_fb_base</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">initial_video_ram</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">initial_pitch</span><span class="p">;</span>

	<span class="cm">/* driver registered */</span>
	<span class="kt">int</span> <span class="n">registered</span><span class="p">;</span>

	<span class="cm">/* index into plls */</span>
	<span class="kt">int</span> <span class="n">pll_index</span><span class="p">;</span>

	<span class="cm">/* outputs */</span>
	<span class="kt">int</span> <span class="n">num_outputs</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">intelfb_output_rec</span> <span class="n">output</span><span class="p">[</span><span class="n">MAX_OUTPUTS</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define IS_I9XX(dinfo) (((dinfo)-&gt;chipset == INTEL_915G) ||	\</span>
<span class="cp">			((dinfo)-&gt;chipset == INTEL_915GM) ||	\</span>
<span class="cp">			((dinfo)-&gt;chipset == INTEL_945G) ||	\</span>
<span class="cp">			((dinfo)-&gt;chipset == INTEL_945GM) ||	\</span>
<span class="cp">			((dinfo)-&gt;chipset == INTEL_945GME) ||	\</span>
<span class="cp">			((dinfo)-&gt;chipset == INTEL_965G) ||	\</span>
<span class="cp">			((dinfo)-&gt;chipset == INTEL_965GM))</span>

<span class="cm">/*** function prototypes ***/</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">intelfb_var_to_depth</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">fb_var_screeninfo</span> <span class="o">*</span><span class="n">var</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_FB_INTEL_I2C</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intelfb_create_i2c_busses</span><span class="p">(</span><span class="k">struct</span> <span class="n">intelfb_info</span> <span class="o">*</span><span class="n">dinfo</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intelfb_delete_i2c_busses</span><span class="p">(</span><span class="k">struct</span> <span class="n">intelfb_info</span> <span class="o">*</span><span class="n">dinfo</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="cp">#endif </span><span class="cm">/* _INTELFB_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
