f | i810-i2c.c | s | 5.0K | 147 | Stefani Seibold | stefani@seibold.net | 1294296739 |  | drivers/video/i810/i810-i2c.c: fix i2c bus handling  These patch fix a longstanding bug in the i810 frame buffer driver.  The handling of the i2c bus is wrong: A 1 bit should not written to the i2c, these will be done by switch the i2c to input. Driving an 1 bit active is against the i2c spec.  An active driven of a 1 bit will result in very strange error, depending which side is the more powerful one. In my case it depends on the temperature of the Display-Controller-EEprom: With an cold eprom a got the correct EDID datas, with a warm one some of the 1 bits was 0 :-(  The same bug is also in the intelfb driver in the file drivers/video/intelfb/intelfb_i2c.c. The functions intelfb_gpio_setscl() and intelfb_gpio_setsda() do drive the 1 bit active to the i2c bus. But since i have no card which is used by the intelfb driver i cannot fix it.  Signed-off-by: Stefani Seibold <stefani@seibold.net> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Jean Delvare <khali@linux-fr.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | i810_main.h | s | 2.8K | 83 | Adrian Bunk | bunk@stusta.de | 1136908916 |  | [PATCH] drivers/video/: possible cleanups  This patch contains the possible cleanups including the following: - every file should #include the headers containing the prototypes for   it's global functions - make needlessly global functions static - kyro/STG4000Interface.h: #include video/kyro.h and linux/pci.h   instead of a manual "struct pci_dev" - i810_main.{c,h}: prototypes for static functions belong to the   C file  Signed-off-by: Adrian Bunk <bunk@stusta.de> Acked-by: "Antonino A. Daplas" <adaplas@hotpop.com> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
f | Makefile | g | 340B |  | Antonino A. Daplas | adaplas@gmail.com | 1126299821 |  | [PATCH] i810fb: Add i2c/DDC support  Add ddc/i2c support for i810fb.  This will allow the driver to get display information, especially for monitors with fickle timings.  The i2c support depends on CONFIG_FB_I810_GTF.  Changed __init* to __devinit*  Signed-off-by: Antonino Daplas <adaplas@pol.net> Signed-off-by: Alexander Nyberg <alexn@telia.com> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
f | i810_dvt.c | s | 11K | 265 | Krzysztof Helt | krzysztof.h1@wp.pl | 1260976802 |  | i810fb: fix stack exploding  Alan Cox has found that the i810fb function "uses a whopping 2.5K of stack".  Signed-off-by: Krzysztof Helt <krzysztof.h1@wp.pl> Reported-by: Alan Cox <alan@linux.intel.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | i810_main.c | s | 58K | 1913 | Rusty Russell | rusty@rustcorp.com.au | 1326410939 |  | module_param: make bool parameters really bool (drivers/video/i810)  module_param(bool) used to counter-intuitively take an int.  In fddd5201 (mid-2009) we allowed bool or int/unsigned int using a messy trick.  It's time to remove the int/unsigned int option.  For this version it'll simply give a warning, but it'll break next kernel version.  Signed-off-by: Rusty Russell <rusty@rustcorp.com.au> Signed-off-by: Florian Tobias Schandinat <FlorianSchandinat@gmx.de>
f | i810.h | s | 9.3K | 266 | Phil Carmody | ext-phil.2.carmody@nokia.com | 1311250200 |  | treewide: fix potentially dangerous trailing ';' in #defined values/expressions  All these are instances of   #define NAME value; or   #define NAME(params_opt) value;  These of course fail to build when used in contexts like   if(foo $OP NAME)   while(bar $OP NAME) and may silently generate the wrong code in contexts such as   foo = NAME + 1;    /* foo = value; + 1; */   bar = NAME - 1;    /* bar = value; - 1; */   baz = NAME & quux; /* baz = value; & quux; */  Reported on comp.lang.c, Message-ID: <ab0d55fe-25e5-482b-811e-c475aa6065c3@c29g2000yqd.googlegroups.com> Initial analysis of the dangers provided by Keith Thompson in that thread.  There are many more instances of more complicated macros having unnecessary trailing semicolons, but this pile seems to be all of the cases of simple values suffering from the problem. (Thus things that are likely to be found in one of the contexts above, more complicated ones aren't.)  Signed-off-by: Phil Carmody <ext-phil.2.carmody@nokia.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | i810_accel.c | s | 11K | 394 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | i810_gtf.c | s | 8.9K | 248 | Adrian Bunk | bunk@stusta.de | 1136908916 |  | [PATCH] drivers/video/: possible cleanups  This patch contains the possible cleanups including the following: - every file should #include the headers containing the prototypes for   it's global functions - make needlessly global functions static - kyro/STG4000Interface.h: #include video/kyro.h and linux/pci.h   instead of a manual "struct pci_dev" - i810_main.{c,h}: prototypes for static functions belong to the   C file  Signed-off-by: Adrian Bunk <bunk@stusta.de> Acked-by: "Antonino A. Daplas" <adaplas@hotpop.com> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
f | i810_regs.h | s | 8.7K | 243 | Antonino A. Daplas | adaplas@gmail.com | 1131378832 |  | [PATCH] i810fb: Cleanup I2C code  - The functions for reading the 1st and 2nd bus are essentially the same,   except for the register.  Consolidate them all.  - According to Nicolas Boichat, there is an undocumented 3rd i2c bus for   attaching daughter cards.  Add support for this.  Signed-off-by: Antonino Daplas <adaplas@pol.net> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
