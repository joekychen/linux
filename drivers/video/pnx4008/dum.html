<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › video › pnx4008 › dum.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>dum.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * linux/drivers/video/pnx4008/dum.h</span>
<span class="cm"> *</span>
<span class="cm"> * Internal header for SDUM</span>
<span class="cm"> *</span>
<span class="cm"> * 2005 (c) Koninklijke Philips N.V. This file is licensed under</span>
<span class="cm"> * the terms of the GNU General Public License version 2. This program</span>
<span class="cm"> * is licensed &quot;as is&quot; without any warranty of any kind, whether express</span>
<span class="cm"> * or implied.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __PNX008_DUM_H__</span>
<span class="cp">#define __PNX008_DUM_H__</span>

<span class="cp">#include &lt;mach/platform.h&gt;</span>

<span class="cp">#define PNX4008_DUMCONF_VA_BASE		IO_ADDRESS(PNX4008_DUMCONF_BASE)</span>
<span class="cp">#define PNX4008_DUM_MAIN_VA_BASE	IO_ADDRESS(PNX4008_DUM_MAINCFG_BASE)</span>

<span class="cm">/* DUM CFG ADDRESSES */</span>
<span class="cp">#define DUM_CH_BASE_ADR		(PNX4008_DUMCONF_VA_BASE + 0x00)</span>
<span class="cp">#define DUM_CH_MIN_ADR		(PNX4008_DUMCONF_VA_BASE + 0x00)</span>
<span class="cp">#define DUM_CH_MAX_ADR		(PNX4008_DUMCONF_VA_BASE + 0x04)</span>
<span class="cp">#define DUM_CH_CONF_ADR		(PNX4008_DUMCONF_VA_BASE + 0x08)</span>
<span class="cp">#define DUM_CH_STAT_ADR		(PNX4008_DUMCONF_VA_BASE + 0x0C)</span>
<span class="cp">#define DUM_CH_CTRL_ADR		(PNX4008_DUMCONF_VA_BASE + 0x10)</span>

<span class="cp">#define CH_MARG		(0x100 / sizeof(u32))</span>
<span class="cp">#define DUM_CH_MIN(i)	(*((volatile u32 *)DUM_CH_MIN_ADR + (i) * CH_MARG))</span>
<span class="cp">#define DUM_CH_MAX(i)	(*((volatile u32 *)DUM_CH_MAX_ADR + (i) * CH_MARG))</span>
<span class="cp">#define DUM_CH_CONF(i)	(*((volatile u32 *)DUM_CH_CONF_ADR + (i) * CH_MARG))</span>
<span class="cp">#define DUM_CH_STAT(i)	(*((volatile u32 *)DUM_CH_STAT_ADR + (i) * CH_MARG))</span>
<span class="cp">#define DUM_CH_CTRL(i)	(*((volatile u32 *)DUM_CH_CTRL_ADR + (i) * CH_MARG))</span>

<span class="cp">#define DUM_CONF_ADR          (PNX4008_DUM_MAIN_VA_BASE + 0x00)</span>
<span class="cp">#define DUM_CTRL_ADR          (PNX4008_DUM_MAIN_VA_BASE + 0x04)</span>
<span class="cp">#define DUM_STAT_ADR          (PNX4008_DUM_MAIN_VA_BASE + 0x08)</span>
<span class="cp">#define DUM_DECODE_ADR        (PNX4008_DUM_MAIN_VA_BASE + 0x0C)</span>
<span class="cp">#define DUM_COM_BASE_ADR      (PNX4008_DUM_MAIN_VA_BASE + 0x10)</span>
<span class="cp">#define DUM_SYNC_C_ADR        (PNX4008_DUM_MAIN_VA_BASE + 0x14)</span>
<span class="cp">#define DUM_CLK_DIV_ADR       (PNX4008_DUM_MAIN_VA_BASE + 0x18)</span>
<span class="cp">#define DUM_DIRTY_LOW_ADR     (PNX4008_DUM_MAIN_VA_BASE + 0x20)</span>
<span class="cp">#define DUM_DIRTY_HIGH_ADR    (PNX4008_DUM_MAIN_VA_BASE + 0x24)</span>
<span class="cp">#define DUM_FORMAT_ADR        (PNX4008_DUM_MAIN_VA_BASE + 0x28)</span>
<span class="cp">#define DUM_WTCFG1_ADR        (PNX4008_DUM_MAIN_VA_BASE + 0x30)</span>
<span class="cp">#define DUM_RTCFG1_ADR        (PNX4008_DUM_MAIN_VA_BASE + 0x34)</span>
<span class="cp">#define DUM_WTCFG2_ADR        (PNX4008_DUM_MAIN_VA_BASE + 0x38)</span>
<span class="cp">#define DUM_RTCFG2_ADR        (PNX4008_DUM_MAIN_VA_BASE + 0x3C)</span>
<span class="cp">#define DUM_TCFG_ADR          (PNX4008_DUM_MAIN_VA_BASE + 0x40)</span>
<span class="cp">#define DUM_OUTP_FORMAT1_ADR  (PNX4008_DUM_MAIN_VA_BASE + 0x44)</span>
<span class="cp">#define DUM_OUTP_FORMAT2_ADR  (PNX4008_DUM_MAIN_VA_BASE + 0x48)</span>
<span class="cp">#define DUM_SYNC_MODE_ADR     (PNX4008_DUM_MAIN_VA_BASE + 0x4C)</span>
<span class="cp">#define DUM_SYNC_OUT_C_ADR    (PNX4008_DUM_MAIN_VA_BASE + 0x50)</span>

<span class="cp">#define DUM_CONF              (*(volatile u32 *)(DUM_CONF_ADR))</span>
<span class="cp">#define DUM_CTRL              (*(volatile u32 *)(DUM_CTRL_ADR))</span>
<span class="cp">#define DUM_STAT              (*(volatile u32 *)(DUM_STAT_ADR))</span>
<span class="cp">#define DUM_DECODE            (*(volatile u32 *)(DUM_DECODE_ADR))</span>
<span class="cp">#define DUM_COM_BASE          (*(volatile u32 *)(DUM_COM_BASE_ADR))</span>
<span class="cp">#define DUM_SYNC_C            (*(volatile u32 *)(DUM_SYNC_C_ADR))</span>
<span class="cp">#define DUM_CLK_DIV           (*(volatile u32 *)(DUM_CLK_DIV_ADR))</span>
<span class="cp">#define DUM_DIRTY_LOW         (*(volatile u32 *)(DUM_DIRTY_LOW_ADR))</span>
<span class="cp">#define DUM_DIRTY_HIGH        (*(volatile u32 *)(DUM_DIRTY_HIGH_ADR))</span>
<span class="cp">#define DUM_FORMAT            (*(volatile u32 *)(DUM_FORMAT_ADR))</span>
<span class="cp">#define DUM_WTCFG1            (*(volatile u32 *)(DUM_WTCFG1_ADR))</span>
<span class="cp">#define DUM_RTCFG1            (*(volatile u32 *)(DUM_RTCFG1_ADR))</span>
<span class="cp">#define DUM_WTCFG2            (*(volatile u32 *)(DUM_WTCFG2_ADR))</span>
<span class="cp">#define DUM_RTCFG2            (*(volatile u32 *)(DUM_RTCFG2_ADR))</span>
<span class="cp">#define DUM_TCFG              (*(volatile u32 *)(DUM_TCFG_ADR))</span>
<span class="cp">#define DUM_OUTP_FORMAT1      (*(volatile u32 *)(DUM_OUTP_FORMAT1_ADR))</span>
<span class="cp">#define DUM_OUTP_FORMAT2      (*(volatile u32 *)(DUM_OUTP_FORMAT2_ADR))</span>
<span class="cp">#define DUM_SYNC_MODE         (*(volatile u32 *)(DUM_SYNC_MODE_ADR))</span>
<span class="cp">#define DUM_SYNC_OUT_C        (*(volatile u32 *)(DUM_SYNC_OUT_C_ADR))</span>

<span class="cm">/* DUM SLAVE ADDRESSES */</span>
<span class="cp">#define DUM_SLAVE_WRITE_ADR      (PNX4008_DUM_MAINCFG_BASE + 0x0000000)</span>
<span class="cp">#define DUM_SLAVE_READ1_I_ADR    (PNX4008_DUM_MAINCFG_BASE + 0x1000000)</span>
<span class="cp">#define DUM_SLAVE_READ1_R_ADR    (PNX4008_DUM_MAINCFG_BASE + 0x1000004)</span>
<span class="cp">#define DUM_SLAVE_READ2_I_ADR    (PNX4008_DUM_MAINCFG_BASE + 0x1000008)</span>
<span class="cp">#define DUM_SLAVE_READ2_R_ADR    (PNX4008_DUM_MAINCFG_BASE + 0x100000C)</span>

<span class="cp">#define DUM_SLAVE_WRITE_W  ((volatile u32 *)(DUM_SLAVE_WRITE_ADR))</span>
<span class="cp">#define DUM_SLAVE_WRITE_HW ((volatile u16 *)(DUM_SLAVE_WRITE_ADR))</span>
<span class="cp">#define DUM_SLAVE_READ1_I  ((volatile u8 *)(DUM_SLAVE_READ1_I_ADR))</span>
<span class="cp">#define DUM_SLAVE_READ1_R  ((volatile u16 *)(DUM_SLAVE_READ1_R_ADR))</span>
<span class="cp">#define DUM_SLAVE_READ2_I  ((volatile u8 *)(DUM_SLAVE_READ2_I_ADR))</span>
<span class="cp">#define DUM_SLAVE_READ2_R  ((volatile u16 *)(DUM_SLAVE_READ2_R_ADR))</span>

<span class="cm">/* Sony display register addresses */</span>
<span class="cp">#define DISP_0_REG            (0x00)</span>
<span class="cp">#define DISP_1_REG            (0x01)</span>
<span class="cp">#define DISP_CAL_REG          (0x20)</span>
<span class="cp">#define DISP_ID_REG           (0x2A)</span>
<span class="cp">#define DISP_XMIN_L_REG       (0x30)</span>
<span class="cp">#define DISP_XMIN_H_REG       (0x31)</span>
<span class="cp">#define DISP_YMIN_REG         (0x32)</span>
<span class="cp">#define DISP_XMAX_L_REG       (0x34)</span>
<span class="cp">#define DISP_XMAX_H_REG       (0x35)</span>
<span class="cp">#define DISP_YMAX_REG         (0x36)</span>
<span class="cp">#define DISP_SYNC_EN_REG      (0x38)</span>
<span class="cp">#define DISP_SYNC_RISE_L_REG  (0x3C)</span>
<span class="cp">#define DISP_SYNC_RISE_H_REG  (0x3D)</span>
<span class="cp">#define DISP_SYNC_FALL_L_REG  (0x3E)</span>
<span class="cp">#define DISP_SYNC_FALL_H_REG  (0x3F)</span>
<span class="cp">#define DISP_PIXEL_REG        (0x0B)</span>
<span class="cp">#define DISP_DUMMY1_REG       (0x28)</span>
<span class="cp">#define DISP_DUMMY2_REG       (0x29)</span>
<span class="cp">#define DISP_TIMING_REG       (0x98)</span>
<span class="cp">#define DISP_DUMP_REG         (0x99)</span>

<span class="cm">/* Sony display constants */</span>
<span class="cp">#define SONY_ID1              (0x22)</span>
<span class="cp">#define SONY_ID2              (0x23)</span>

<span class="cm">/* Philips display register addresses */</span>
<span class="cp">#define PH_DISP_ORIENT_REG    (0x003)</span>
<span class="cp">#define PH_DISP_YPOINT_REG    (0x200)</span>
<span class="cp">#define PH_DISP_XPOINT_REG    (0x201)</span>
<span class="cp">#define PH_DISP_PIXEL_REG     (0x202)</span>
<span class="cp">#define PH_DISP_YMIN_REG      (0x406)</span>
<span class="cp">#define PH_DISP_YMAX_REG      (0x407)</span>
<span class="cp">#define PH_DISP_XMIN_REG      (0x408)</span>
<span class="cp">#define PH_DISP_XMAX_REG      (0x409)</span>

<span class="cm">/* Misc constants */</span>
<span class="cp">#define NO_VALID_DISPLAY_FOUND      (0)</span>
<span class="cp">#define DISPLAY2_IS_NOT_CONNECTED   (0)</span>

<span class="cm">/* register values */</span>
<span class="cp">#define V_BAC_ENABLE		(BIT(0))</span>
<span class="cp">#define V_BAC_DISABLE_IDLE	(BIT(1))</span>
<span class="cp">#define V_BAC_DISABLE_TRIG	(BIT(2))</span>
<span class="cp">#define V_DUM_RESET		(BIT(3))</span>
<span class="cp">#define V_MUX_RESET		(BIT(4))</span>
<span class="cp">#define BAC_ENABLED		(BIT(0))</span>
<span class="cp">#define BAC_DISABLED		0</span>

<span class="cm">/* Sony LCD commands */</span>
<span class="cp">#define V_LCD_STANDBY_OFF	((BIT(25)) | (0 &lt;&lt; 16) | DISP_0_REG)</span>
<span class="cp">#define V_LCD_USE_9BIT_BUS	((BIT(25)) | (2 &lt;&lt; 16) | DISP_1_REG)</span>
<span class="cp">#define V_LCD_SYNC_RISE_L	((BIT(25)) | (0 &lt;&lt; 16) | DISP_SYNC_RISE_L_REG)</span>
<span class="cp">#define V_LCD_SYNC_RISE_H	((BIT(25)) | (0 &lt;&lt; 16) | DISP_SYNC_RISE_H_REG)</span>
<span class="cp">#define V_LCD_SYNC_FALL_L	((BIT(25)) | (160 &lt;&lt; 16) | DISP_SYNC_FALL_L_REG)</span>
<span class="cp">#define V_LCD_SYNC_FALL_H	((BIT(25)) | (0 &lt;&lt; 16) | DISP_SYNC_FALL_H_REG)</span>
<span class="cp">#define V_LCD_SYNC_ENABLE	((BIT(25)) | (128 &lt;&lt; 16) | DISP_SYNC_EN_REG)</span>
<span class="cp">#define V_LCD_DISPLAY_ON	((BIT(25)) | (64 &lt;&lt; 16) | DISP_0_REG)</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">PAD_NONE</span><span class="p">,</span>
	<span class="n">PAD_512</span><span class="p">,</span>
	<span class="n">PAD_1024</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">RGB888</span><span class="p">,</span>
	<span class="n">RGB666</span><span class="p">,</span>
	<span class="n">RGB565</span><span class="p">,</span>
	<span class="n">BGR565</span><span class="p">,</span>
	<span class="n">ARGB1555</span><span class="p">,</span>
	<span class="n">ABGR1555</span><span class="p">,</span>
	<span class="n">ARGB4444</span><span class="p">,</span>
	<span class="n">ABGR4444</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">dum_setup</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">sync_neg_edge</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">round_robin</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mux_int</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">synced_dirty_flag_int</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">dirty_flag_int</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">error_int</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">pf_empty_int</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">sf_empty_int</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">bac_dis_int</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dirty_base_adr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">command_base_adr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">sync_clk_div</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">sync_output</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">sync_restart_val</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">set_sync_high</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">set_sync_low</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">dum_ch_setup</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">disp_no</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">xmin</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ymin</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">xmax</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ymax</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">xmirror</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ymirror</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rotate</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">minadr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">maxadr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dirtybuffer</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">pad</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">format</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">hwdirty</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">slave_trans</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">disp_window</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">xmin_l</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">xmin_h</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ymin</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">xmax_l</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">xmax_h</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ymax</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#endif				</span><span class="cm">/* #ifndef __PNX008_DUM_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
