<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › video › via › hw.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>hw.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright 1998-2008 VIA Technologies, Inc. All Rights Reserved.</span>
<span class="cm"> * Copyright 2001-2008 S3 Graphics, Inc. All Rights Reserved.</span>

<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Public</span>
<span class="cm"> * License as published by the Free Software Foundation;</span>
<span class="cm"> * either version 2, or (at your option) any later version.</span>

<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTIES OR REPRESENTATIONS; without even</span>
<span class="cm"> * the implied warranty of MERCHANTABILITY or FITNESS FOR</span>
<span class="cm"> * A PARTICULAR PURPOSE.See the GNU General Public License</span>
<span class="cm"> * for more details.</span>

<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc.,</span>
<span class="cm"> * 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __HW_H__</span>
<span class="cp">#define __HW_H__</span>

<span class="cp">#include &lt;linux/seq_file.h&gt;</span>

<span class="cp">#include &quot;viamode.h&quot;</span>
<span class="cp">#include &quot;global.h&quot;</span>
<span class="cp">#include &quot;via_modesetting.h&quot;</span>

<span class="cp">#define viafb_read_reg(p, i)			via_read_reg(p, i)</span>
<span class="cp">#define viafb_write_reg(i, p, d)		via_write_reg(p, i, d)</span>
<span class="cp">#define viafb_write_reg_mask(i, p, d, m)	via_write_reg_mask(p, i, d, m)</span>

<span class="cm">/* VIA output devices */</span>
<span class="cp">#define VIA_LDVP0	0x00000001</span>
<span class="cp">#define VIA_LDVP1	0x00000002</span>
<span class="cp">#define VIA_DVP0	0x00000004</span>
<span class="cp">#define VIA_CRT		0x00000010</span>
<span class="cp">#define VIA_DVP1	0x00000020</span>
<span class="cp">#define VIA_LVDS1	0x00000040</span>
<span class="cp">#define VIA_LVDS2	0x00000080</span>

<span class="cm">/* VIA output device power states */</span>
<span class="cp">#define VIA_STATE_ON		0</span>
<span class="cp">#define VIA_STATE_STANDBY	1</span>
<span class="cp">#define VIA_STATE_SUSPEND	2</span>
<span class="cp">#define VIA_STATE_OFF		3</span>

<span class="cm">/* VIA output device sync polarity */</span>
<span class="cp">#define VIA_HSYNC_NEGATIVE	0x01</span>
<span class="cp">#define VIA_VSYNC_NEGATIVE	0x02</span>

<span class="cm">/**********************************************************/</span>
<span class="cm">/* Definition IGA2 Design Method of CRTC Shadow Registers */</span>
<span class="cm">/**********************************************************/</span>
<span class="cp">#define IGA2_HOR_TOTAL_SHADOW_FORMULA(x)           ((x/8)-5)</span>
<span class="cp">#define IGA2_HOR_BLANK_END_SHADOW_FORMULA(x, y)     (((x+y)/8)-1)</span>
<span class="cp">#define IGA2_VER_TOTAL_SHADOW_FORMULA(x)           ((x)-2)</span>
<span class="cp">#define IGA2_VER_ADDR_SHADOW_FORMULA(x)            ((x)-1)</span>
<span class="cp">#define IGA2_VER_BLANK_START_SHADOW_FORMULA(x)     ((x)-1)</span>
<span class="cp">#define IGA2_VER_BLANK_END_SHADOW_FORMULA(x, y)     ((x+y)-1)</span>
<span class="cp">#define IGA2_VER_SYNC_START_SHADOW_FORMULA(x)      (x)</span>
<span class="cp">#define IGA2_VER_SYNC_END_SHADOW_FORMULA(x, y)      (x+y)</span>

<span class="cm">/* Define Register Number for IGA2 Shadow CRTC Timing */</span>

<span class="cm">/* location: {CR6D,0,7},{CR71,3,3} */</span>
<span class="cp">#define IGA2_SHADOW_HOR_TOTAL_REG_NUM       2</span>
<span class="cm">/* location: {CR6E,0,7} */</span>
<span class="cp">#define IGA2_SHADOW_HOR_BLANK_END_REG_NUM   1</span>
<span class="cm">/* location: {CR6F,0,7},{CR71,0,2} */</span>
<span class="cp">#define IGA2_SHADOW_VER_TOTAL_REG_NUM       2</span>
<span class="cm">/* location: {CR70,0,7},{CR71,4,6} */</span>
<span class="cp">#define IGA2_SHADOW_VER_ADDR_REG_NUM        2</span>
<span class="cm">/* location: {CR72,0,7},{CR74,4,6} */</span>
<span class="cp">#define IGA2_SHADOW_VER_BLANK_START_REG_NUM 2</span>
<span class="cm">/* location: {CR73,0,7},{CR74,0,2} */</span>
<span class="cp">#define IGA2_SHADOW_VER_BLANK_END_REG_NUM   2</span>
<span class="cm">/* location: {CR75,0,7},{CR76,4,6} */</span>
<span class="cp">#define IGA2_SHADOW_VER_SYNC_START_REG_NUM  2</span>
<span class="cm">/* location: {CR76,0,3} */</span>
<span class="cp">#define IGA2_SHADOW_VER_SYNC_END_REG_NUM    1</span>

<span class="cm">/* Define Fetch Count Register*/</span>

<span class="cm">/* location: {SR1C,0,7},{SR1D,0,1} */</span>
<span class="cp">#define IGA1_FETCH_COUNT_REG_NUM        2</span>
<span class="cm">/* 16 bytes alignment. */</span>
<span class="cp">#define IGA1_FETCH_COUNT_ALIGN_BYTE     16</span>
<span class="cm">/* x: H resolution, y: color depth */</span>
<span class="cp">#define IGA1_FETCH_COUNT_PATCH_VALUE    4</span>
<span class="cp">#define IGA1_FETCH_COUNT_FORMULA(x, y)   \</span>
<span class="cp">	(((x*y)/IGA1_FETCH_COUNT_ALIGN_BYTE) + IGA1_FETCH_COUNT_PATCH_VALUE)</span>

<span class="cm">/* location: {CR65,0,7},{CR67,2,3} */</span>
<span class="cp">#define IGA2_FETCH_COUNT_REG_NUM        2</span>
<span class="cp">#define IGA2_FETCH_COUNT_ALIGN_BYTE     16</span>
<span class="cp">#define IGA2_FETCH_COUNT_PATCH_VALUE    0</span>
<span class="cp">#define IGA2_FETCH_COUNT_FORMULA(x, y)   \</span>
<span class="cp">	(((x*y)/IGA2_FETCH_COUNT_ALIGN_BYTE) + IGA2_FETCH_COUNT_PATCH_VALUE)</span>

<span class="cm">/* Staring Address*/</span>

<span class="cm">/* location: {CR0C,0,7},{CR0D,0,7},{CR34,0,7},{CR48,0,1} */</span>
<span class="cp">#define IGA1_STARTING_ADDR_REG_NUM      4</span>
<span class="cm">/* location: {CR62,1,7},{CR63,0,7},{CR64,0,7} */</span>
<span class="cp">#define IGA2_STARTING_ADDR_REG_NUM      3</span>

<span class="cm">/* Define Display OFFSET*/</span>
<span class="cm">/* These value are by HW suggested value*/</span>
<span class="cm">/* location: {SR17,0,7} */</span>
<span class="cp">#define K800_IGA1_FIFO_MAX_DEPTH                384</span>
<span class="cm">/* location: {SR16,0,5},{SR16,7,7} */</span>
<span class="cp">#define K800_IGA1_FIFO_THRESHOLD                328</span>
<span class="cm">/* location: {SR18,0,5},{SR18,7,7} */</span>
<span class="cp">#define K800_IGA1_FIFO_HIGH_THRESHOLD           296</span>
<span class="cm">/* location: {SR22,0,4}. (128/4) =64, K800 must be set zero, */</span>
				<span class="cm">/* because HW only 5 bits */</span>
<span class="cp">#define K800_IGA1_DISPLAY_QUEUE_EXPIRE_NUM      0</span>

<span class="cm">/* location: {CR68,4,7},{CR94,7,7},{CR95,7,7} */</span>
<span class="cp">#define K800_IGA2_FIFO_MAX_DEPTH                384</span>
<span class="cm">/* location: {CR68,0,3},{CR95,4,6} */</span>
<span class="cp">#define K800_IGA2_FIFO_THRESHOLD                328</span>
<span class="cm">/* location: {CR92,0,3},{CR95,0,2} */</span>
<span class="cp">#define K800_IGA2_FIFO_HIGH_THRESHOLD           296</span>
<span class="cm">/* location: {CR94,0,6} */</span>
<span class="cp">#define K800_IGA2_DISPLAY_QUEUE_EXPIRE_NUM      128</span>

<span class="cm">/* location: {SR17,0,7} */</span>
<span class="cp">#define P880_IGA1_FIFO_MAX_DEPTH                192</span>
<span class="cm">/* location: {SR16,0,5},{SR16,7,7} */</span>
<span class="cp">#define P880_IGA1_FIFO_THRESHOLD                128</span>
<span class="cm">/* location: {SR18,0,5},{SR18,7,7} */</span>
<span class="cp">#define P880_IGA1_FIFO_HIGH_THRESHOLD           64</span>
<span class="cm">/* location: {SR22,0,4}. (128/4) =64, K800 must be set zero, */</span>
				<span class="cm">/* because HW only 5 bits */</span>
<span class="cp">#define P880_IGA1_DISPLAY_QUEUE_EXPIRE_NUM      0</span>

<span class="cm">/* location: {CR68,4,7},{CR94,7,7},{CR95,7,7} */</span>
<span class="cp">#define P880_IGA2_FIFO_MAX_DEPTH                96</span>
<span class="cm">/* location: {CR68,0,3},{CR95,4,6} */</span>
<span class="cp">#define P880_IGA2_FIFO_THRESHOLD                64</span>
<span class="cm">/* location: {CR92,0,3},{CR95,0,2} */</span>
<span class="cp">#define P880_IGA2_FIFO_HIGH_THRESHOLD           32</span>
<span class="cm">/* location: {CR94,0,6} */</span>
<span class="cp">#define P880_IGA2_DISPLAY_QUEUE_EXPIRE_NUM      128</span>

<span class="cm">/* VT3314 chipset*/</span>

<span class="cm">/* location: {SR17,0,7} */</span>
<span class="cp">#define CN700_IGA1_FIFO_MAX_DEPTH               96</span>
<span class="cm">/* location: {SR16,0,5},{SR16,7,7} */</span>
<span class="cp">#define CN700_IGA1_FIFO_THRESHOLD               80</span>
<span class="cm">/* location: {SR18,0,5},{SR18,7,7} */</span>
<span class="cp">#define CN700_IGA1_FIFO_HIGH_THRESHOLD          64</span>
<span class="cm">/* location: {SR22,0,4}. (128/4) =64, P800 must be set zero,</span>
<span class="cm">				because HW only 5 bits */</span>
<span class="cp">#define CN700_IGA1_DISPLAY_QUEUE_EXPIRE_NUM     0</span>
<span class="cm">/* location: {CR68,4,7},{CR94,7,7},{CR95,7,7} */</span>
<span class="cp">#define CN700_IGA2_FIFO_MAX_DEPTH               96</span>
<span class="cm">/* location: {CR68,0,3},{CR95,4,6} */</span>
<span class="cp">#define CN700_IGA2_FIFO_THRESHOLD               80</span>
<span class="cm">/* location: {CR92,0,3},{CR95,0,2} */</span>
<span class="cp">#define CN700_IGA2_FIFO_HIGH_THRESHOLD          32</span>
<span class="cm">/* location: {CR94,0,6} */</span>
<span class="cp">#define CN700_IGA2_DISPLAY_QUEUE_EXPIRE_NUM     128</span>

<span class="cm">/* For VT3324, these values are suggested by HW */</span>
<span class="cm">/* location: {SR17,0,7} */</span>
<span class="cp">#define CX700_IGA1_FIFO_MAX_DEPTH               192</span>
<span class="cm">/* location: {SR16,0,5},{SR16,7,7} */</span>
<span class="cp">#define CX700_IGA1_FIFO_THRESHOLD               128</span>
<span class="cm">/* location: {SR18,0,5},{SR18,7,7} */</span>
<span class="cp">#define CX700_IGA1_FIFO_HIGH_THRESHOLD          128</span>
<span class="cm">/* location: {SR22,0,4} */</span>
<span class="cp">#define CX700_IGA1_DISPLAY_QUEUE_EXPIRE_NUM     124</span>

<span class="cm">/* location: {CR68,4,7},{CR94,7,7},{CR95,7,7} */</span>
<span class="cp">#define CX700_IGA2_FIFO_MAX_DEPTH               96</span>
<span class="cm">/* location: {CR68,0,3},{CR95,4,6} */</span>
<span class="cp">#define CX700_IGA2_FIFO_THRESHOLD               64</span>
<span class="cm">/* location: {CR92,0,3},{CR95,0,2} */</span>
<span class="cp">#define CX700_IGA2_FIFO_HIGH_THRESHOLD          32</span>
<span class="cm">/* location: {CR94,0,6} */</span>
<span class="cp">#define CX700_IGA2_DISPLAY_QUEUE_EXPIRE_NUM     128</span>

<span class="cm">/* VT3336 chipset*/</span>
<span class="cm">/* location: {SR17,0,7} */</span>
<span class="cp">#define K8M890_IGA1_FIFO_MAX_DEPTH               360</span>
<span class="cm">/* location: {SR16,0,5},{SR16,7,7} */</span>
<span class="cp">#define K8M890_IGA1_FIFO_THRESHOLD               328</span>
<span class="cm">/* location: {SR18,0,5},{SR18,7,7} */</span>
<span class="cp">#define K8M890_IGA1_FIFO_HIGH_THRESHOLD          296</span>
<span class="cm">/* location: {SR22,0,4}. */</span>
<span class="cp">#define K8M890_IGA1_DISPLAY_QUEUE_EXPIRE_NUM     124</span>

<span class="cm">/* location: {CR68,4,7},{CR94,7,7},{CR95,7,7} */</span>
<span class="cp">#define K8M890_IGA2_FIFO_MAX_DEPTH               360</span>
<span class="cm">/* location: {CR68,0,3},{CR95,4,6} */</span>
<span class="cp">#define K8M890_IGA2_FIFO_THRESHOLD               328</span>
<span class="cm">/* location: {CR92,0,3},{CR95,0,2} */</span>
<span class="cp">#define K8M890_IGA2_FIFO_HIGH_THRESHOLD          296</span>
<span class="cm">/* location: {CR94,0,6} */</span>
<span class="cp">#define K8M890_IGA2_DISPLAY_QUEUE_EXPIRE_NUM     124</span>

<span class="cm">/* VT3327 chipset*/</span>
<span class="cm">/* location: {SR17,0,7} */</span>
<span class="cp">#define P4M890_IGA1_FIFO_MAX_DEPTH               96</span>
<span class="cm">/* location: {SR16,0,5},{SR16,7,7} */</span>
<span class="cp">#define P4M890_IGA1_FIFO_THRESHOLD               76</span>
<span class="cm">/* location: {SR18,0,5},{SR18,7,7} */</span>
<span class="cp">#define P4M890_IGA1_FIFO_HIGH_THRESHOLD          64</span>
<span class="cm">/* location: {SR22,0,4}. (32/4) =8 */</span>
<span class="cp">#define P4M890_IGA1_DISPLAY_QUEUE_EXPIRE_NUM     32</span>
<span class="cm">/* location: {CR68,4,7},{CR94,7,7},{CR95,7,7} */</span>
<span class="cp">#define P4M890_IGA2_FIFO_MAX_DEPTH               96</span>
<span class="cm">/* location: {CR68,0,3},{CR95,4,6} */</span>
<span class="cp">#define P4M890_IGA2_FIFO_THRESHOLD               76</span>
<span class="cm">/* location: {CR92,0,3},{CR95,0,2} */</span>
<span class="cp">#define P4M890_IGA2_FIFO_HIGH_THRESHOLD          64</span>
<span class="cm">/* location: {CR94,0,6} */</span>
<span class="cp">#define P4M890_IGA2_DISPLAY_QUEUE_EXPIRE_NUM     32</span>

<span class="cm">/* VT3364 chipset*/</span>
<span class="cm">/* location: {SR17,0,7} */</span>
<span class="cp">#define P4M900_IGA1_FIFO_MAX_DEPTH               96</span>
<span class="cm">/* location: {SR16,0,5},{SR16,7,7} */</span>
<span class="cp">#define P4M900_IGA1_FIFO_THRESHOLD               76</span>
<span class="cm">/* location: {SR18,0,5},{SR18,7,7} */</span>
<span class="cp">#define P4M900_IGA1_FIFO_HIGH_THRESHOLD          76</span>
<span class="cm">/* location: {SR22,0,4}. */</span>
<span class="cp">#define P4M900_IGA1_DISPLAY_QUEUE_EXPIRE_NUM     32</span>
<span class="cm">/* location: {CR68,4,7},{CR94,7,7},{CR95,7,7} */</span>
<span class="cp">#define P4M900_IGA2_FIFO_MAX_DEPTH               96</span>
<span class="cm">/* location: {CR68,0,3},{CR95,4,6} */</span>
<span class="cp">#define P4M900_IGA2_FIFO_THRESHOLD               76</span>
<span class="cm">/* location: {CR92,0,3},{CR95,0,2} */</span>
<span class="cp">#define P4M900_IGA2_FIFO_HIGH_THRESHOLD          76</span>
<span class="cm">/* location: {CR94,0,6} */</span>
<span class="cp">#define P4M900_IGA2_DISPLAY_QUEUE_EXPIRE_NUM     32</span>

<span class="cm">/* For VT3353, these values are suggested by HW */</span>
<span class="cm">/* location: {SR17,0,7} */</span>
<span class="cp">#define VX800_IGA1_FIFO_MAX_DEPTH               192</span>
<span class="cm">/* location: {SR16,0,5},{SR16,7,7} */</span>
<span class="cp">#define VX800_IGA1_FIFO_THRESHOLD               152</span>
<span class="cm">/* location: {SR18,0,5},{SR18,7,7} */</span>
<span class="cp">#define VX800_IGA1_FIFO_HIGH_THRESHOLD          152</span>
<span class="cm">/* location: {SR22,0,4} */</span>
<span class="cp">#define VX800_IGA1_DISPLAY_QUEUE_EXPIRE_NUM      64</span>
<span class="cm">/* location: {CR68,4,7},{CR94,7,7},{CR95,7,7} */</span>
<span class="cp">#define VX800_IGA2_FIFO_MAX_DEPTH               96</span>
<span class="cm">/* location: {CR68,0,3},{CR95,4,6} */</span>
<span class="cp">#define VX800_IGA2_FIFO_THRESHOLD               64</span>
<span class="cm">/* location: {CR92,0,3},{CR95,0,2} */</span>
<span class="cp">#define VX800_IGA2_FIFO_HIGH_THRESHOLD          32</span>
<span class="cm">/* location: {CR94,0,6} */</span>
<span class="cp">#define VX800_IGA2_DISPLAY_QUEUE_EXPIRE_NUM     128</span>

<span class="cm">/* For VT3409 */</span>
<span class="cp">#define VX855_IGA1_FIFO_MAX_DEPTH               400</span>
<span class="cp">#define VX855_IGA1_FIFO_THRESHOLD               320</span>
<span class="cp">#define VX855_IGA1_FIFO_HIGH_THRESHOLD          320</span>
<span class="cp">#define VX855_IGA1_DISPLAY_QUEUE_EXPIRE_NUM     160</span>

<span class="cp">#define VX855_IGA2_FIFO_MAX_DEPTH               200</span>
<span class="cp">#define VX855_IGA2_FIFO_THRESHOLD               160</span>
<span class="cp">#define VX855_IGA2_FIFO_HIGH_THRESHOLD          160</span>
<span class="cp">#define VX855_IGA2_DISPLAY_QUEUE_EXPIRE_NUM     320</span>

<span class="cm">/* For VT3410 */</span>
<span class="cp">#define VX900_IGA1_FIFO_MAX_DEPTH               400</span>
<span class="cp">#define VX900_IGA1_FIFO_THRESHOLD               320</span>
<span class="cp">#define VX900_IGA1_FIFO_HIGH_THRESHOLD          320</span>
<span class="cp">#define VX900_IGA1_DISPLAY_QUEUE_EXPIRE_NUM     160</span>

<span class="cp">#define VX900_IGA2_FIFO_MAX_DEPTH               192</span>
<span class="cp">#define VX900_IGA2_FIFO_THRESHOLD               160</span>
<span class="cp">#define VX900_IGA2_FIFO_HIGH_THRESHOLD          160</span>
<span class="cp">#define VX900_IGA2_DISPLAY_QUEUE_EXPIRE_NUM     320</span>

<span class="cp">#define IGA1_FIFO_DEPTH_SELECT_REG_NUM          1</span>
<span class="cp">#define IGA1_FIFO_THRESHOLD_REG_NUM             2</span>
<span class="cp">#define IGA1_FIFO_HIGH_THRESHOLD_REG_NUM        2</span>
<span class="cp">#define IGA1_DISPLAY_QUEUE_EXPIRE_NUM_REG_NUM   1</span>

<span class="cp">#define IGA2_FIFO_DEPTH_SELECT_REG_NUM          3</span>
<span class="cp">#define IGA2_FIFO_THRESHOLD_REG_NUM             2</span>
<span class="cp">#define IGA2_FIFO_HIGH_THRESHOLD_REG_NUM        2</span>
<span class="cp">#define IGA2_DISPLAY_QUEUE_EXPIRE_NUM_REG_NUM   1</span>

<span class="cp">#define IGA1_FIFO_DEPTH_SELECT_FORMULA(x)                   ((x/2)-1)</span>
<span class="cp">#define IGA1_FIFO_THRESHOLD_FORMULA(x)                      (x/4)</span>
<span class="cp">#define IGA1_DISPLAY_QUEUE_EXPIRE_NUM_FORMULA(x)            (x/4)</span>
<span class="cp">#define IGA1_FIFO_HIGH_THRESHOLD_FORMULA(x)                 (x/4)</span>
<span class="cp">#define IGA2_FIFO_DEPTH_SELECT_FORMULA(x)                   (((x/2)/4)-1)</span>
<span class="cp">#define IGA2_FIFO_THRESHOLD_FORMULA(x)                      (x/4)</span>
<span class="cp">#define IGA2_DISPLAY_QUEUE_EXPIRE_NUM_FORMULA(x)            (x/4)</span>
<span class="cp">#define IGA2_FIFO_HIGH_THRESHOLD_FORMULA(x)                 (x/4)</span>

<span class="cm">/************************************************************************/</span>
<span class="cm">/*  LCD Timing                                                          */</span>
<span class="cm">/************************************************************************/</span>

<span class="cm">/* 500 ms = 500000 us */</span>
<span class="cp">#define LCD_POWER_SEQ_TD0               500000</span>
<span class="cm">/* 50 ms = 50000 us */</span>
<span class="cp">#define LCD_POWER_SEQ_TD1               50000</span>
<span class="cm">/* 0 us */</span>
<span class="cp">#define LCD_POWER_SEQ_TD2               0</span>
<span class="cm">/* 210 ms = 210000 us */</span>
<span class="cp">#define LCD_POWER_SEQ_TD3               210000</span>
<span class="cm">/* 2^10 * (1/14.31818M) = 71.475 us (K400.revA) */</span>
<span class="cp">#define CLE266_POWER_SEQ_UNIT           71</span>
<span class="cm">/* 2^11 * (1/14.31818M) = 142.95 us (K400.revB) */</span>
<span class="cp">#define K800_POWER_SEQ_UNIT             142</span>
<span class="cm">/* 2^13 * (1/14.31818M) = 572.1 us */</span>
<span class="cp">#define P880_POWER_SEQ_UNIT             572</span>

<span class="cp">#define CLE266_POWER_SEQ_FORMULA(x)     ((x)/CLE266_POWER_SEQ_UNIT)</span>
<span class="cp">#define K800_POWER_SEQ_FORMULA(x)       ((x)/K800_POWER_SEQ_UNIT)</span>
<span class="cp">#define P880_POWER_SEQ_FORMULA(x)       ((x)/P880_POWER_SEQ_UNIT)</span>

<span class="cm">/* location: {CR8B,0,7},{CR8F,0,3} */</span>
<span class="cp">#define LCD_POWER_SEQ_TD0_REG_NUM       2</span>
<span class="cm">/* location: {CR8C,0,7},{CR8F,4,7} */</span>
<span class="cp">#define LCD_POWER_SEQ_TD1_REG_NUM       2</span>
<span class="cm">/* location: {CR8D,0,7},{CR90,0,3} */</span>
<span class="cp">#define LCD_POWER_SEQ_TD2_REG_NUM       2</span>
<span class="cm">/* location: {CR8E,0,7},{CR90,4,7} */</span>
<span class="cp">#define LCD_POWER_SEQ_TD3_REG_NUM       2</span>

<span class="cm">/* LCD Scaling factor*/</span>
<span class="cm">/* x: indicate setting horizontal size*/</span>
<span class="cm">/* y: indicate panel horizontal size*/</span>

<span class="cm">/* Horizontal scaling factor 10 bits (2^10) */</span>
<span class="cp">#define CLE266_LCD_HOR_SCF_FORMULA(x, y)   (((x-1)*1024)/(y-1))</span>
<span class="cm">/* Vertical scaling factor 10 bits (2^10) */</span>
<span class="cp">#define CLE266_LCD_VER_SCF_FORMULA(x, y)   (((x-1)*1024)/(y-1))</span>
<span class="cm">/* Horizontal scaling factor 10 bits (2^12) */</span>
<span class="cp">#define K800_LCD_HOR_SCF_FORMULA(x, y)     (((x-1)*4096)/(y-1))</span>
<span class="cm">/* Vertical scaling factor 10 bits (2^11) */</span>
<span class="cp">#define K800_LCD_VER_SCF_FORMULA(x, y)     (((x-1)*2048)/(y-1))</span>

<span class="cm">/* location: {CR9F,0,1},{CR77,0,7},{CR79,4,5} */</span>
<span class="cp">#define LCD_HOR_SCALING_FACTOR_REG_NUM  3</span>
<span class="cm">/* location: {CR79,3,3},{CR78,0,7},{CR79,6,7} */</span>
<span class="cp">#define LCD_VER_SCALING_FACTOR_REG_NUM  3</span>
<span class="cm">/* location: {CR77,0,7},{CR79,4,5} */</span>
<span class="cp">#define LCD_HOR_SCALING_FACTOR_REG_NUM_CLE  2</span>
<span class="cm">/* location: {CR78,0,7},{CR79,6,7} */</span>
<span class="cp">#define LCD_VER_SCALING_FACTOR_REG_NUM_CLE  2</span>

<span class="k">struct</span> <span class="n">io_register</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">io_addr</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">start_bit</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">end_bit</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*****************************************************</span>
<span class="cm">**      Define IGA2 Shadow Display Timing         ****</span>
<span class="cm">*****************************************************/</span>

<span class="cm">/* IGA2 Shadow Horizontal Total */</span>
<span class="k">struct</span> <span class="n">iga2_shadow_hor_total</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA2_SHADOW_HOR_TOTAL_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* IGA2 Shadow Horizontal Blank End */</span>
<span class="k">struct</span> <span class="n">iga2_shadow_hor_blank_end</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA2_SHADOW_HOR_BLANK_END_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* IGA2 Shadow Vertical Total */</span>
<span class="k">struct</span> <span class="n">iga2_shadow_ver_total</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA2_SHADOW_VER_TOTAL_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* IGA2 Shadow Vertical Addressable Video */</span>
<span class="k">struct</span> <span class="n">iga2_shadow_ver_addr</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA2_SHADOW_VER_ADDR_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* IGA2 Shadow Vertical Blank Start */</span>
<span class="k">struct</span> <span class="n">iga2_shadow_ver_blank_start</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA2_SHADOW_VER_BLANK_START_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* IGA2 Shadow Vertical Blank End */</span>
<span class="k">struct</span> <span class="n">iga2_shadow_ver_blank_end</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA2_SHADOW_VER_BLANK_END_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* IGA2 Shadow Vertical Sync Start */</span>
<span class="k">struct</span> <span class="n">iga2_shadow_ver_sync_start</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA2_SHADOW_VER_SYNC_START_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* IGA2 Shadow Vertical Sync End */</span>
<span class="k">struct</span> <span class="n">iga2_shadow_ver_sync_end</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA2_SHADOW_VER_SYNC_END_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* IGA1 Fetch Count Register */</span>
<span class="k">struct</span> <span class="n">iga1_fetch_count</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA1_FETCH_COUNT_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* IGA2 Fetch Count Register */</span>
<span class="k">struct</span> <span class="n">iga2_fetch_count</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA2_FETCH_COUNT_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">fetch_count</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">iga1_fetch_count</span> <span class="n">iga1_fetch_count_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iga2_fetch_count</span> <span class="n">iga2_fetch_count_reg</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Starting Address Register */</span>
<span class="k">struct</span> <span class="n">iga1_starting_addr</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA1_STARTING_ADDR_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">iga2_starting_addr</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA2_STARTING_ADDR_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">starting_addr</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">iga1_starting_addr</span> <span class="n">iga1_starting_addr_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iga2_starting_addr</span> <span class="n">iga2_starting_addr_reg</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* LCD Power Sequence Timer */</span>
<span class="k">struct</span> <span class="n">lcd_pwd_seq_td0</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">LCD_POWER_SEQ_TD0_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">lcd_pwd_seq_td1</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">LCD_POWER_SEQ_TD1_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">lcd_pwd_seq_td2</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">LCD_POWER_SEQ_TD2_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">lcd_pwd_seq_td3</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">LCD_POWER_SEQ_TD3_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">_lcd_pwd_seq_timer</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">lcd_pwd_seq_td0</span> <span class="n">td0</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lcd_pwd_seq_td1</span> <span class="n">td1</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lcd_pwd_seq_td2</span> <span class="n">td2</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lcd_pwd_seq_td3</span> <span class="n">td3</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* LCD Scaling Factor */</span>
<span class="k">struct</span> <span class="n">_lcd_hor_scaling_factor</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">LCD_HOR_SCALING_FACTOR_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">_lcd_ver_scaling_factor</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">LCD_VER_SCALING_FACTOR_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">_lcd_scaling_factor</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">_lcd_hor_scaling_factor</span> <span class="n">lcd_hor_scaling_factor</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">_lcd_ver_scaling_factor</span> <span class="n">lcd_ver_scaling_factor</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">pll_limit</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">multiplier_min</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">multiplier_max</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">divisor</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rshift</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rgbLUT</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">red</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">green</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">blue</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">lcd_pwd_seq_timer</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">td0</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">td1</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">td2</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">td3</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Display FIFO Relation Registers*/</span>
<span class="k">struct</span> <span class="n">iga1_fifo_depth_select</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA1_FIFO_DEPTH_SELECT_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">iga1_fifo_threshold_select</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA1_FIFO_THRESHOLD_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">iga1_fifo_high_threshold_select</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA1_FIFO_HIGH_THRESHOLD_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">iga1_display_queue_expire_num</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA1_DISPLAY_QUEUE_EXPIRE_NUM_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">iga2_fifo_depth_select</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA2_FIFO_DEPTH_SELECT_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">iga2_fifo_threshold_select</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA2_FIFO_THRESHOLD_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">iga2_fifo_high_threshold_select</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA2_FIFO_HIGH_THRESHOLD_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">iga2_display_queue_expire_num</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">reg_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="n">reg</span><span class="p">[</span><span class="n">IGA2_DISPLAY_QUEUE_EXPIRE_NUM_REG_NUM</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">fifo_depth_select</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">iga1_fifo_depth_select</span> <span class="n">iga1_fifo_depth_select_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iga2_fifo_depth_select</span> <span class="n">iga2_fifo_depth_select_reg</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">fifo_threshold_select</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">iga1_fifo_threshold_select</span> <span class="n">iga1_fifo_threshold_select_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iga2_fifo_threshold_select</span> <span class="n">iga2_fifo_threshold_select_reg</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">fifo_high_threshold_select</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">iga1_fifo_high_threshold_select</span>
	 <span class="n">iga1_fifo_high_threshold_select_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iga2_fifo_high_threshold_select</span>
	 <span class="n">iga2_fifo_high_threshold_select_reg</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">display_queue_expire_num</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">iga1_display_queue_expire_num</span>
	 <span class="n">iga1_display_queue_expire_num_reg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iga2_display_queue_expire_num</span>
	 <span class="n">iga2_display_queue_expire_num_reg</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">iga2_shadow_crtc_timing</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">iga2_shadow_hor_total</span> <span class="n">hor_total_shadow</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iga2_shadow_hor_blank_end</span> <span class="n">hor_blank_end_shadow</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iga2_shadow_ver_total</span> <span class="n">ver_total_shadow</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iga2_shadow_ver_addr</span> <span class="n">ver_addr_shadow</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iga2_shadow_ver_blank_start</span> <span class="n">ver_blank_start_shadow</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iga2_shadow_ver_blank_end</span> <span class="n">ver_blank_end_shadow</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iga2_shadow_ver_sync_start</span> <span class="n">ver_sync_start_shadow</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iga2_shadow_ver_sync_end</span> <span class="n">ver_sync_end_shadow</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* device ID */</span>
<span class="cp">#define CLE266_FUNCTION3    0x3123</span>
<span class="cp">#define KM400_FUNCTION3     0x3205</span>
<span class="cp">#define CN400_FUNCTION2     0x2259</span>
<span class="cp">#define CN400_FUNCTION3     0x3259</span>
<span class="cm">/* support VT3314 chipset */</span>
<span class="cp">#define CN700_FUNCTION2     0x2314</span>
<span class="cp">#define CN700_FUNCTION3     0x3208</span>
<span class="cm">/* VT3324 chipset */</span>
<span class="cp">#define CX700_FUNCTION2     0x2324</span>
<span class="cp">#define CX700_FUNCTION3     0x3324</span>
<span class="cm">/* VT3204 chipset*/</span>
<span class="cp">#define KM800_FUNCTION3      0x3204</span>
<span class="cm">/* VT3336 chipset*/</span>
<span class="cp">#define KM890_FUNCTION3      0x3336</span>
<span class="cm">/* VT3327 chipset*/</span>
<span class="cp">#define P4M890_FUNCTION3     0x3327</span>
<span class="cm">/* VT3293 chipset*/</span>
<span class="cp">#define CN750_FUNCTION3     0x3208</span>
<span class="cm">/* VT3364 chipset*/</span>
<span class="cp">#define P4M900_FUNCTION3    0x3364</span>
<span class="cm">/* VT3353 chipset*/</span>
<span class="cp">#define VX800_FUNCTION3     0x3353</span>
<span class="cm">/* VT3409 chipset*/</span>
<span class="cp">#define VX855_FUNCTION3     0x3409</span>
<span class="cm">/* VT3410 chipset*/</span>
<span class="cp">#define VX900_FUNCTION3     0x3410</span>

<span class="k">struct</span> <span class="n">IODATA</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">Index</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">Mask</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">Data</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">pci_device_id_info</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">vendor</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">device</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">chip_index</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">via_device_mapping</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">device</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">viafb_SAMM_ON</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">viafb_dual_fb</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">viafb_LCD2_ON</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">viafb_LCD_ON</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">viafb_DVI_ON</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">viafb_hotplug</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">display_timing</span> <span class="n">var_to_timing</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">fb_var_screeninfo</span> <span class="o">*</span><span class="n">var</span><span class="p">,</span>
	<span class="n">u16</span> <span class="n">cxres</span><span class="p">,</span> <span class="n">u16</span> <span class="n">cyres</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_fill_crtc_timing</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">fb_var_screeninfo</span> <span class="o">*</span><span class="n">var</span><span class="p">,</span>
	<span class="n">u16</span> <span class="n">cxres</span><span class="p">,</span> <span class="n">u16</span> <span class="n">cyres</span><span class="p">,</span> <span class="kt">int</span> <span class="n">iga</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_set_vclock</span><span class="p">(</span><span class="n">u32</span> <span class="n">CLK</span><span class="p">,</span> <span class="kt">int</span> <span class="n">set_iga</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_load_reg</span><span class="p">(</span><span class="kt">int</span> <span class="n">timing_value</span><span class="p">,</span> <span class="kt">int</span> <span class="n">viafb_load_reg_num</span><span class="p">,</span>
	<span class="k">struct</span> <span class="n">io_register</span> <span class="o">*</span><span class="n">reg</span><span class="p">,</span>
	      <span class="kt">int</span> <span class="n">io_type</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">via_set_source</span><span class="p">(</span><span class="n">u32</span> <span class="n">devices</span><span class="p">,</span> <span class="n">u8</span> <span class="n">iga</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">via_set_state</span><span class="p">(</span><span class="n">u32</span> <span class="n">devices</span><span class="p">,</span> <span class="n">u8</span> <span class="n">state</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">via_set_sync_polarity</span><span class="p">(</span><span class="n">u32</span> <span class="n">devices</span><span class="p">,</span> <span class="n">u8</span> <span class="n">polarity</span><span class="p">);</span>
<span class="n">u32</span> <span class="n">via_parse_odev</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">input</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">end</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">via_odev_to_seq</span><span class="p">(</span><span class="k">struct</span> <span class="n">seq_file</span> <span class="o">*</span><span class="n">m</span><span class="p">,</span> <span class="n">u32</span> <span class="n">odev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">init_ad9389</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="cm">/* Access I/O Function */</span>
<span class="kt">void</span> <span class="n">viafb_lock_crt</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_unlock_crt</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_load_fetch_count_reg</span><span class="p">(</span><span class="kt">int</span> <span class="n">h_addr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">bpp_byte</span><span class="p">,</span> <span class="kt">int</span> <span class="n">set_iga</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_write_regx</span><span class="p">(</span><span class="k">struct</span> <span class="n">io_reg</span> <span class="n">RegTable</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">ItemNum</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_load_FIFO_reg</span><span class="p">(</span><span class="kt">int</span> <span class="n">set_iga</span><span class="p">,</span> <span class="kt">int</span> <span class="n">hor_active</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ver_active</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_set_dpa_gfx</span><span class="p">(</span><span class="kt">int</span> <span class="n">output_interface</span><span class="p">,</span> <span class="k">struct</span> <span class="n">GFX_DPA_SETTING</span>\
					<span class="o">*</span><span class="n">p_gfx_dpa_setting</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">viafb_setmode</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_fill_var_timing_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">fb_var_screeninfo</span> <span class="o">*</span><span class="n">var</span><span class="p">,</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">fb_videomode</span> <span class="o">*</span><span class="n">mode</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">__devinit</span> <span class="n">viafb_init_chip_info</span><span class="p">(</span><span class="kt">int</span> <span class="n">chip_type</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">__devinit</span> <span class="n">viafb_init_dac</span><span class="p">(</span><span class="kt">int</span> <span class="n">set_iga</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">viafb_get_refresh</span><span class="p">(</span><span class="kt">int</span> <span class="n">hres</span><span class="p">,</span> <span class="kt">int</span> <span class="n">vres</span><span class="p">,</span> <span class="n">u32</span> <span class="n">float_refresh</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_update_device_setting</span><span class="p">(</span><span class="kt">int</span> <span class="n">hres</span><span class="p">,</span> <span class="kt">int</span> <span class="n">vres</span><span class="p">,</span> <span class="kt">int</span> <span class="n">bpp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flag</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">viafb_set_iga_path</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_set_primary_color_register</span><span class="p">(</span><span class="n">u8</span> <span class="n">index</span><span class="p">,</span> <span class="n">u8</span> <span class="n">red</span><span class="p">,</span> <span class="n">u8</span> <span class="n">green</span><span class="p">,</span> <span class="n">u8</span> <span class="n">blue</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_set_secondary_color_register</span><span class="p">(</span><span class="n">u8</span> <span class="n">index</span><span class="p">,</span> <span class="n">u8</span> <span class="n">red</span><span class="p">,</span> <span class="n">u8</span> <span class="n">green</span><span class="p">,</span> <span class="n">u8</span> <span class="n">blue</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_get_fb_info</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">fb_base</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">fb_len</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __HW_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
