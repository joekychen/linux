<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › video › via › accel.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>accel.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright 1998-2008 VIA Technologies, Inc. All Rights Reserved.</span>
<span class="cm"> * Copyright 2001-2008 S3 Graphics, Inc. All Rights Reserved.</span>

<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Public</span>
<span class="cm"> * License as published by the Free Software Foundation;</span>
<span class="cm"> * either version 2, or (at your option) any later version.</span>

<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTIES OR REPRESENTATIONS; without even</span>
<span class="cm"> * the implied warranty of MERCHANTABILITY or FITNESS FOR</span>
<span class="cm"> * A PARTICULAR PURPOSE.See the GNU General Public License</span>
<span class="cm"> * for more details.</span>

<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc.,</span>
<span class="cm"> * 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __ACCEL_H__</span>
<span class="cp">#define __ACCEL_H__</span>

<span class="cp">#define FB_ACCEL_VIA_UNICHROME  50</span>

<span class="cm">/* MMIO Base Address Definition */</span>
<span class="cp">#define MMIO_VGABASE                0x8000</span>
<span class="cp">#define MMIO_CR_READ                (MMIO_VGABASE + 0x3D4)</span>
<span class="cp">#define MMIO_CR_WRITE               (MMIO_VGABASE + 0x3D5)</span>
<span class="cp">#define MMIO_SR_READ                (MMIO_VGABASE + 0x3C4)</span>
<span class="cp">#define MMIO_SR_WRITE               (MMIO_VGABASE + 0x3C5)</span>

<span class="cm">/* HW Cursor Status Define */</span>
<span class="cp">#define HW_Cursor_ON    0</span>
<span class="cp">#define HW_Cursor_OFF   1</span>

<span class="cp">#define CURSOR_SIZE     (8 * 1024)</span>
<span class="cp">#define VQ_SIZE         (256 * 1024)</span>

<span class="cp">#define VIA_MMIO_BLTBASE        0x200000</span>
<span class="cp">#define VIA_MMIO_BLTSIZE        0x200000</span>

<span class="cm">/* Defines for 2D registers */</span>
<span class="cp">#define VIA_REG_GECMD           0x000</span>
<span class="cp">#define VIA_REG_GEMODE          0x004</span>
<span class="cp">#define VIA_REG_SRCPOS          0x008</span>
<span class="cp">#define VIA_REG_DSTPOS          0x00C</span>
<span class="cm">/* width and height */</span>
<span class="cp">#define VIA_REG_DIMENSION       0x010</span>
<span class="cp">#define VIA_REG_PATADDR         0x014</span>
<span class="cp">#define VIA_REG_FGCOLOR         0x018</span>
<span class="cp">#define VIA_REG_BGCOLOR         0x01C</span>
<span class="cm">/* top and left of clipping */</span>
<span class="cp">#define VIA_REG_CLIPTL          0x020</span>
<span class="cm">/* bottom and right of clipping */</span>
<span class="cp">#define VIA_REG_CLIPBR          0x024</span>
<span class="cp">#define VIA_REG_OFFSET          0x028</span>
<span class="cm">/* color key control */</span>
<span class="cp">#define VIA_REG_KEYCONTROL      0x02C</span>
<span class="cp">#define VIA_REG_SRCBASE         0x030</span>
<span class="cp">#define VIA_REG_DSTBASE         0x034</span>
<span class="cm">/* pitch of src and dst */</span>
<span class="cp">#define VIA_REG_PITCH           0x038</span>
<span class="cp">#define VIA_REG_MONOPAT0        0x03C</span>
<span class="cp">#define VIA_REG_MONOPAT1        0x040</span>
<span class="cm">/* from 0x100 to 0x1ff */</span>
<span class="cp">#define VIA_REG_COLORPAT        0x100</span>

<span class="cm">/* defines for VIA 2D registers for vt3353/3409 (M1 engine)*/</span>
<span class="cp">#define VIA_REG_GECMD_M1        0x000</span>
<span class="cp">#define VIA_REG_GEMODE_M1       0x004</span>
<span class="cp">#define VIA_REG_GESTATUS_M1     0x004       </span><span class="cm">/* as same as VIA_REG_GEMODE */</span><span class="cp"></span>
<span class="cp">#define VIA_REG_PITCH_M1        0x008       </span><span class="cm">/* pitch of src and dst */</span><span class="cp"></span>
<span class="cp">#define VIA_REG_DIMENSION_M1    0x00C       </span><span class="cm">/* width and height */</span><span class="cp"></span>
<span class="cp">#define VIA_REG_DSTPOS_M1       0x010</span>
<span class="cp">#define VIA_REG_LINE_XY_M1      0x010</span>
<span class="cp">#define VIA_REG_DSTBASE_M1      0x014</span>
<span class="cp">#define VIA_REG_SRCPOS_M1       0x018</span>
<span class="cp">#define VIA_REG_LINE_K1K2_M1    0x018</span>
<span class="cp">#define VIA_REG_SRCBASE_M1      0x01C</span>
<span class="cp">#define VIA_REG_PATADDR_M1      0x020</span>
<span class="cp">#define VIA_REG_MONOPAT0_M1     0x024</span>
<span class="cp">#define VIA_REG_MONOPAT1_M1     0x028</span>
<span class="cp">#define VIA_REG_OFFSET_M1       0x02C</span>
<span class="cp">#define VIA_REG_LINE_ERROR_M1   0x02C</span>
<span class="cp">#define VIA_REG_CLIPTL_M1       0x040       </span><span class="cm">/* top and left of clipping */</span><span class="cp"></span>
<span class="cp">#define VIA_REG_CLIPBR_M1       0x044       </span><span class="cm">/* bottom and right of clipping */</span><span class="cp"></span>
<span class="cp">#define VIA_REG_KEYCONTROL_M1   0x048       </span><span class="cm">/* color key control */</span><span class="cp"></span>
<span class="cp">#define VIA_REG_FGCOLOR_M1      0x04C</span>
<span class="cp">#define VIA_REG_DSTCOLORKEY_M1  0x04C       </span><span class="cm">/* as same as VIA_REG_FG */</span><span class="cp"></span>
<span class="cp">#define VIA_REG_BGCOLOR_M1      0x050</span>
<span class="cp">#define VIA_REG_SRCCOLORKEY_M1  0x050       </span><span class="cm">/* as same as VIA_REG_BG */</span><span class="cp"></span>
<span class="cp">#define VIA_REG_MONOPATFGC_M1   0x058       </span><span class="cm">/* Add BG color of Pattern. */</span><span class="cp"></span>
<span class="cp">#define VIA_REG_MONOPATBGC_M1   0x05C       </span><span class="cm">/* Add FG color of Pattern. */</span><span class="cp"></span>
<span class="cp">#define VIA_REG_COLORPAT_M1     0x100       </span><span class="cm">/* from 0x100 to 0x1ff */</span><span class="cp"></span>

<span class="cm">/* VIA_REG_PITCH(0x38): Pitch Setting */</span>
<span class="cp">#define VIA_PITCH_ENABLE        0x80000000</span>

<span class="cm">/* defines for VIA HW cursor registers */</span>
<span class="cp">#define VIA_REG_CURSOR_MODE     0x2D0</span>
<span class="cp">#define VIA_REG_CURSOR_POS      0x2D4</span>
<span class="cp">#define VIA_REG_CURSOR_ORG      0x2D8</span>
<span class="cp">#define VIA_REG_CURSOR_BG       0x2DC</span>
<span class="cp">#define VIA_REG_CURSOR_FG       0x2E0</span>

<span class="cm">/* VIA_REG_GEMODE(0x04): GE mode */</span>
<span class="cp">#define VIA_GEM_8bpp            0x00000000</span>
<span class="cp">#define VIA_GEM_16bpp           0x00000100</span>
<span class="cp">#define VIA_GEM_32bpp           0x00000300</span>

<span class="cm">/* VIA_REG_GECMD(0x00): 2D Engine Command  */</span>
<span class="cp">#define VIA_GEC_NOOP            0x00000000</span>
<span class="cp">#define VIA_GEC_BLT             0x00000001</span>
<span class="cp">#define VIA_GEC_LINE            0x00000005</span>

<span class="cm">/* Rotate Command */</span>
<span class="cp">#define VIA_GEC_ROT             0x00000008</span>

<span class="cp">#define VIA_GEC_SRC_XY          0x00000000</span>
<span class="cp">#define VIA_GEC_SRC_LINEAR      0x00000010</span>
<span class="cp">#define VIA_GEC_DST_XY          0x00000000</span>
<span class="cp">#define VIA_GEC_DST_LINRAT      0x00000020</span>

<span class="cp">#define VIA_GEC_SRC_FB          0x00000000</span>
<span class="cp">#define VIA_GEC_SRC_SYS         0x00000040</span>
<span class="cp">#define VIA_GEC_DST_FB          0x00000000</span>
<span class="cp">#define VIA_GEC_DST_SYS         0x00000080</span>

<span class="cm">/* source is mono */</span>
<span class="cp">#define VIA_GEC_SRC_MONO        0x00000100</span>
<span class="cm">/* pattern is mono */</span>
<span class="cp">#define VIA_GEC_PAT_MONO        0x00000200</span>
<span class="cm">/* mono src is opaque */</span>
<span class="cp">#define VIA_GEC_MSRC_OPAQUE     0x00000000</span>
<span class="cm">/* mono src is transparent */</span>
<span class="cp">#define VIA_GEC_MSRC_TRANS      0x00000400</span>
<span class="cm">/* pattern is in frame buffer */</span>
<span class="cp">#define VIA_GEC_PAT_FB          0x00000000</span>
<span class="cm">/* pattern is from reg setting */</span>
<span class="cp">#define VIA_GEC_PAT_REG         0x00000800</span>

<span class="cp">#define VIA_GEC_CLIP_DISABLE    0x00000000</span>
<span class="cp">#define VIA_GEC_CLIP_ENABLE     0x00001000</span>

<span class="cp">#define VIA_GEC_FIXCOLOR_PAT    0x00002000</span>

<span class="cp">#define VIA_GEC_INCX            0x00000000</span>
<span class="cp">#define VIA_GEC_DECY            0x00004000</span>
<span class="cp">#define VIA_GEC_INCY            0x00000000</span>
<span class="cp">#define VIA_GEC_DECX            0x00008000</span>
<span class="cm">/* mono pattern is opaque */</span>
<span class="cp">#define VIA_GEC_MPAT_OPAQUE     0x00000000</span>
<span class="cm">/* mono pattern is transparent */</span>
<span class="cp">#define VIA_GEC_MPAT_TRANS      0x00010000</span>

<span class="cp">#define VIA_GEC_MONO_UNPACK     0x00000000</span>
<span class="cp">#define VIA_GEC_MONO_PACK       0x00020000</span>
<span class="cp">#define VIA_GEC_MONO_DWORD      0x00000000</span>
<span class="cp">#define VIA_GEC_MONO_WORD       0x00040000</span>
<span class="cp">#define VIA_GEC_MONO_BYTE       0x00080000</span>

<span class="cp">#define VIA_GEC_LASTPIXEL_ON    0x00000000</span>
<span class="cp">#define VIA_GEC_LASTPIXEL_OFF   0x00100000</span>
<span class="cp">#define VIA_GEC_X_MAJOR         0x00000000</span>
<span class="cp">#define VIA_GEC_Y_MAJOR         0x00200000</span>
<span class="cp">#define VIA_GEC_QUICK_START     0x00800000</span>

<span class="cm">/* defines for VIA 3D registers */</span>
<span class="cp">#define VIA_REG_STATUS          0x400</span>
<span class="cp">#define VIA_REG_CR_TRANSET      0x41C</span>
<span class="cp">#define VIA_REG_CR_TRANSPACE	0x420</span>
<span class="cp">#define VIA_REG_TRANSET         0x43C</span>
<span class="cp">#define VIA_REG_TRANSPACE       0x440</span>

<span class="cm">/* VIA_REG_STATUS(0x400): Engine Status */</span>

<span class="cm">/* Command Regulator is busy */</span>
<span class="cp">#define VIA_CMD_RGTR_BUSY       0x00000080</span>
<span class="cm">/* 2D Engine is busy */</span>
<span class="cp">#define VIA_2D_ENG_BUSY         0x00000002</span>
<span class="cm">/* 3D Engine is busy */</span>
<span class="cp">#define VIA_3D_ENG_BUSY         0x00000001</span>
<span class="cm">/* Virtual Queue is busy */</span>
<span class="cp">#define VIA_VR_QUEUE_BUSY       0x00020000</span>

<span class="cm">/* VIA_REG_STATUS(0x400): Engine Status for H5 */</span>
<span class="cp">#define VIA_CMD_RGTR_BUSY_H5   0x00000010  </span><span class="cm">/* Command Regulator is busy */</span><span class="cp"></span>
<span class="cp">#define VIA_2D_ENG_BUSY_H5     0x00000002  </span><span class="cm">/* 2D Engine is busy */</span><span class="cp"></span>
<span class="cp">#define VIA_3D_ENG_BUSY_H5     0x00001FE1  </span><span class="cm">/* 3D Engine is busy */</span><span class="cp"></span>
<span class="cp">#define VIA_VR_QUEUE_BUSY_H5   0x00000004  </span><span class="cm">/* Virtual Queue is busy */</span><span class="cp"></span>

<span class="cm">/* VIA_REG_STATUS(0x400): Engine Status for VT3353/3409 */</span>
<span class="cp">#define VIA_CMD_RGTR_BUSY_M1   0x00000010  </span><span class="cm">/* Command Regulator is busy */</span><span class="cp"></span>
<span class="cp">#define VIA_2D_ENG_BUSY_M1     0x00000002  </span><span class="cm">/* 2D Engine is busy */</span><span class="cp"></span>
<span class="cp">#define VIA_3D_ENG_BUSY_M1     0x00001FE1  </span><span class="cm">/* 3D Engine is busy */</span><span class="cp"></span>
<span class="cp">#define VIA_VR_QUEUE_BUSY_M1   0x00000004  </span><span class="cm">/* Virtual Queue is busy */</span><span class="cp"></span>

<span class="cp">#define MAXLOOP                 0xFFFFFF</span>

<span class="cp">#define VIA_BITBLT_COLOR	1</span>
<span class="cp">#define VIA_BITBLT_MONO		2</span>
<span class="cp">#define VIA_BITBLT_FILL		3</span>

<span class="kt">int</span> <span class="n">viafb_setup_engine</span><span class="p">(</span><span class="k">struct</span> <span class="n">fb_info</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_reset_engine</span><span class="p">(</span><span class="k">struct</span> <span class="n">viafb_par</span> <span class="o">*</span><span class="n">viapar</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_show_hw_cursor</span><span class="p">(</span><span class="k">struct</span> <span class="n">fb_info</span> <span class="o">*</span><span class="n">info</span><span class="p">,</span> <span class="kt">int</span> <span class="n">Status</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">viafb_wait_engine_idle</span><span class="p">(</span><span class="k">struct</span> <span class="n">fb_info</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __ACCEL_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
