<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › video › au1100fb.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>au1100fb.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * BRIEF MODULE DESCRIPTION</span>
<span class="cm"> *	Hardware definitions for the Au1100 LCD controller</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2002 MontaVista Software</span>
<span class="cm"> * Copyright 2002 Alchemy Semiconductor</span>
<span class="cm"> * Author:	Alchemy Semiconductor, MontaVista Software</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute	 it and/or modify it</span>
<span class="cm"> *  under  the terms of	 the GNU General  Public License as published by the</span>
<span class="cm"> *  Free Software Foundation;  either version 2 of the	License, or (at your</span>
<span class="cm"> *  option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *  THIS  SOFTWARE  IS PROVIDED	  ``AS	IS&#39;&#39; AND   ANY	EXPRESS OR IMPLIED</span>
<span class="cm"> *  WARRANTIES,	  INCLUDING, BUT NOT  LIMITED  TO, THE IMPLIED WARRANTIES OF</span>
<span class="cm"> *  MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN</span>
<span class="cm"> *  NO	EVENT  SHALL   THE AUTHOR  BE	 LIABLE FOR ANY	  DIRECT, INDIRECT,</span>
<span class="cm"> *  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT</span>
<span class="cm"> *  NOT LIMITED	  TO, PROCUREMENT OF  SUBSTITUTE GOODS	OR SERVICES; LOSS OF</span>
<span class="cm"> *  USE, DATA,	OR PROFITS; OR	BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON</span>
<span class="cm"> *  ANY THEORY OF LIABILITY, WHETHER IN	 CONTRACT, STRICT LIABILITY, OR TORT</span>
<span class="cm"> *  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF</span>
<span class="cm"> *  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="cm"> *</span>
<span class="cm"> *  You should have received a copy of the  GNU General Public License along</span>
<span class="cm"> *  with this program; if not, write  to the Free Software Foundation, Inc.,</span>
<span class="cm"> *  675 Mass Ave, Cambridge, MA 02139, USA.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _AU1100LCD_H</span>
<span class="cp">#define _AU1100LCD_H</span>

<span class="cp">#include &lt;asm/mach-au1x00/au1000.h&gt;</span>

<span class="cp">#define print_err(f, arg...) printk(KERN_ERR DRIVER_NAME &quot;: &quot; f &quot;\n&quot;, ## arg)</span>
<span class="cp">#define print_warn(f, arg...) printk(KERN_WARNING DRIVER_NAME &quot;: &quot; f &quot;\n&quot;, ## arg)</span>
<span class="cp">#define print_info(f, arg...) printk(KERN_INFO DRIVER_NAME &quot;: &quot; f &quot;\n&quot;, ## arg)</span>

<span class="cp">#if DEBUG</span>
<span class="cp">#define print_dbg(f, arg...) printk(__FILE__ &quot;: &quot; f &quot;\n&quot;, ## arg)</span>
<span class="cp">#else</span>
<span class="cp">#define print_dbg(f, arg...) do {} while (0)</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(__BIG_ENDIAN)</span>
<span class="cp">#define LCD_CONTROL_DEFAULT_PO LCD_CONTROL_PO_11</span>
<span class="cp">#else</span>
<span class="cp">#define LCD_CONTROL_DEFAULT_PO LCD_CONTROL_PO_00</span>
<span class="cp">#endif</span>
<span class="cp">#define LCD_CONTROL_DEFAULT_SBPPF LCD_CONTROL_SBPPF_565</span>

<span class="cm">/********************************************************************/</span>

<span class="cm">/* LCD controller restrictions */</span>
<span class="cp">#define AU1100_LCD_MAX_XRES	800</span>
<span class="cp">#define AU1100_LCD_MAX_YRES	600</span>
<span class="cp">#define AU1100_LCD_MAX_BPP	16</span>
<span class="cp">#define AU1100_LCD_MAX_CLK	48000000</span>
<span class="cp">#define AU1100_LCD_NBR_PALETTE_ENTRIES 256</span>

<span class="cm">/* Default number of visible screen buffer to allocate */</span>
<span class="cp">#define AU1100FB_NBR_VIDEO_BUFFERS 4</span>

<span class="cm">/********************************************************************/</span>

<span class="k">struct</span> <span class="n">au1100fb_panel</span>
<span class="p">{</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">25</span><span class="p">];</span>		<span class="cm">/* Full name &lt;vendor&gt;_&lt;model&gt; */</span>

	<span class="n">u32</span>   	<span class="n">control_base</span><span class="p">;</span>		<span class="cm">/* Mode-independent control values */</span>
	<span class="n">u32</span>	<span class="n">clkcontrol_base</span><span class="p">;</span>	<span class="cm">/* Panel pixclock preferences */</span>

	<span class="n">u32</span>	<span class="n">horztiming</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">verttiming</span><span class="p">;</span>

	<span class="n">u32</span>	<span class="n">xres</span><span class="p">;</span>		<span class="cm">/* Maximum horizontal resolution */</span>
	<span class="n">u32</span> 	<span class="n">yres</span><span class="p">;</span>		<span class="cm">/* Maximum vertical resolution */</span>
	<span class="n">u32</span> 	<span class="n">bpp</span><span class="p">;</span>		<span class="cm">/* Maximum depth supported */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">au1100fb_regs</span>
<span class="p">{</span>
	<span class="n">u32</span>  <span class="n">lcd_control</span><span class="p">;</span>
	<span class="n">u32</span>  <span class="n">lcd_intstatus</span><span class="p">;</span>
	<span class="n">u32</span>  <span class="n">lcd_intenable</span><span class="p">;</span>
	<span class="n">u32</span>  <span class="n">lcd_horztiming</span><span class="p">;</span>
	<span class="n">u32</span>  <span class="n">lcd_verttiming</span><span class="p">;</span>
	<span class="n">u32</span>  <span class="n">lcd_clkcontrol</span><span class="p">;</span>
	<span class="n">u32</span>  <span class="n">lcd_dmaaddr0</span><span class="p">;</span>
	<span class="n">u32</span>  <span class="n">lcd_dmaaddr1</span><span class="p">;</span>
	<span class="n">u32</span>  <span class="n">lcd_words</span><span class="p">;</span>
	<span class="n">u32</span>  <span class="n">lcd_pwmdiv</span><span class="p">;</span>
	<span class="n">u32</span>  <span class="n">lcd_pwmhi</span><span class="p">;</span>
	<span class="n">u32</span>  <span class="n">reserved</span><span class="p">[(</span><span class="mh">0x0400</span><span class="o">-</span><span class="mh">0x002C</span><span class="p">)</span><span class="o">/</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span>  <span class="n">lcd_pallettebase</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">au1100fb_device</span> <span class="p">{</span>

	<span class="k">struct</span> <span class="n">fb_info</span> <span class="n">info</span><span class="p">;</span>			<span class="cm">/* FB driver info record */</span>

	<span class="k">struct</span> <span class="n">au1100fb_panel</span> 	<span class="o">*</span><span class="n">panel</span><span class="p">;</span>		<span class="cm">/* Panel connected to this device */</span>

	<span class="k">struct</span> <span class="n">au1100fb_regs</span><span class="o">*</span> 	<span class="n">regs</span><span class="p">;</span>		<span class="cm">/* Registers memory map */</span>
	<span class="kt">size_t</span>       		<span class="n">regs_len</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> 		<span class="n">regs_phys</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">char</span><span class="o">*</span> 		<span class="n">fb_mem</span><span class="p">;</span>		<span class="cm">/* FrameBuffer memory map */</span>
	<span class="kt">size_t</span>	      		<span class="n">fb_len</span><span class="p">;</span>
	<span class="n">dma_addr_t</span>    		<span class="n">fb_phys</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">panel_idx</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/********************************************************************/</span>

<span class="cp">#define LCD_CONTROL                (AU1100_LCD_BASE + 0x0)</span>
  <span class="cp">#define LCD_CONTROL_SBB_BIT      21</span>
  <span class="cp">#define LCD_CONTROL_SBB_MASK     (0x3 &lt;&lt; LCD_CONTROL_SBB_BIT)</span>
    <span class="cp">#define LCD_CONTROL_SBB_1        (0 &lt;&lt; LCD_CONTROL_SBB_BIT)</span>
    <span class="cp">#define LCD_CONTROL_SBB_2        (1 &lt;&lt; LCD_CONTROL_SBB_BIT)</span>
    <span class="cp">#define LCD_CONTROL_SBB_3        (2 &lt;&lt; LCD_CONTROL_SBB_BIT)</span>
    <span class="cp">#define LCD_CONTROL_SBB_4        (3 &lt;&lt; LCD_CONTROL_SBB_BIT)</span>
  <span class="cp">#define LCD_CONTROL_SBPPF_BIT    18</span>
  <span class="cp">#define LCD_CONTROL_SBPPF_MASK   (0x7 &lt;&lt; LCD_CONTROL_SBPPF_BIT)</span>
    <span class="cp">#define LCD_CONTROL_SBPPF_655    (0 &lt;&lt; LCD_CONTROL_SBPPF_BIT)</span>
    <span class="cp">#define LCD_CONTROL_SBPPF_565    (1 &lt;&lt; LCD_CONTROL_SBPPF_BIT)</span>
    <span class="cp">#define LCD_CONTROL_SBPPF_556    (2 &lt;&lt; LCD_CONTROL_SBPPF_BIT)</span>
    <span class="cp">#define LCD_CONTROL_SBPPF_1555   (3 &lt;&lt; LCD_CONTROL_SBPPF_BIT)</span>
    <span class="cp">#define LCD_CONTROL_SBPPF_5551   (4 &lt;&lt; LCD_CONTROL_SBPPF_BIT)</span>
  <span class="cp">#define LCD_CONTROL_WP           (1&lt;&lt;17)</span>
  <span class="cp">#define LCD_CONTROL_WD           (1&lt;&lt;16)</span>
  <span class="cp">#define LCD_CONTROL_C            (1&lt;&lt;15)</span>
  <span class="cp">#define LCD_CONTROL_SM_BIT       13</span>
  <span class="cp">#define LCD_CONTROL_SM_MASK      (0x3 &lt;&lt; LCD_CONTROL_SM_BIT)</span>
    <span class="cp">#define LCD_CONTROL_SM_0         (0 &lt;&lt; LCD_CONTROL_SM_BIT)</span>
    <span class="cp">#define LCD_CONTROL_SM_90        (1 &lt;&lt; LCD_CONTROL_SM_BIT)</span>
    <span class="cp">#define LCD_CONTROL_SM_180       (2 &lt;&lt; LCD_CONTROL_SM_BIT)</span>
    <span class="cp">#define LCD_CONTROL_SM_270       (3 &lt;&lt; LCD_CONTROL_SM_BIT)</span>
  <span class="cp">#define LCD_CONTROL_DB           (1&lt;&lt;12)</span>
  <span class="cp">#define LCD_CONTROL_CCO          (1&lt;&lt;11)</span>
  <span class="cp">#define LCD_CONTROL_DP           (1&lt;&lt;10)</span>
  <span class="cp">#define LCD_CONTROL_PO_BIT       8</span>
  <span class="cp">#define LCD_CONTROL_PO_MASK      (0x3 &lt;&lt; LCD_CONTROL_PO_BIT)</span>
    <span class="cp">#define LCD_CONTROL_PO_00        (0 &lt;&lt; LCD_CONTROL_PO_BIT)</span>
    <span class="cp">#define LCD_CONTROL_PO_01        (1 &lt;&lt; LCD_CONTROL_PO_BIT)</span>
    <span class="cp">#define LCD_CONTROL_PO_10        (2 &lt;&lt; LCD_CONTROL_PO_BIT)</span>
    <span class="cp">#define LCD_CONTROL_PO_11        (3 &lt;&lt; LCD_CONTROL_PO_BIT)</span>
  <span class="cp">#define LCD_CONTROL_MPI          (1&lt;&lt;7)</span>
  <span class="cp">#define LCD_CONTROL_PT           (1&lt;&lt;6)</span>
  <span class="cp">#define LCD_CONTROL_PC           (1&lt;&lt;5)</span>
  <span class="cp">#define LCD_CONTROL_BPP_BIT      1</span>
  <span class="cp">#define LCD_CONTROL_BPP_MASK     (0x7 &lt;&lt; LCD_CONTROL_BPP_BIT)</span>
    <span class="cp">#define LCD_CONTROL_BPP_1        (0 &lt;&lt; LCD_CONTROL_BPP_BIT)</span>
    <span class="cp">#define LCD_CONTROL_BPP_2        (1 &lt;&lt; LCD_CONTROL_BPP_BIT)</span>
    <span class="cp">#define LCD_CONTROL_BPP_4        (2 &lt;&lt; LCD_CONTROL_BPP_BIT)</span>
    <span class="cp">#define LCD_CONTROL_BPP_8        (3 &lt;&lt; LCD_CONTROL_BPP_BIT)</span>
    <span class="cp">#define LCD_CONTROL_BPP_12       (4 &lt;&lt; LCD_CONTROL_BPP_BIT)</span>
    <span class="cp">#define LCD_CONTROL_BPP_16       (5 &lt;&lt; LCD_CONTROL_BPP_BIT)</span>
  <span class="cp">#define LCD_CONTROL_GO           (1&lt;&lt;0)</span>

<span class="cp">#define LCD_INTSTATUS              (AU1100_LCD_BASE + 0x4)</span>
<span class="cp">#define LCD_INTENABLE              (AU1100_LCD_BASE + 0x8)</span>
  <span class="cp">#define LCD_INT_SD               (1&lt;&lt;7)</span>
  <span class="cp">#define LCD_INT_OF               (1&lt;&lt;6)</span>
  <span class="cp">#define LCD_INT_UF               (1&lt;&lt;5)</span>
  <span class="cp">#define LCD_INT_SA               (1&lt;&lt;3)</span>
  <span class="cp">#define LCD_INT_SS               (1&lt;&lt;2)</span>
  <span class="cp">#define LCD_INT_S1               (1&lt;&lt;1)</span>
  <span class="cp">#define LCD_INT_S0               (1&lt;&lt;0)</span>

<span class="cp">#define LCD_HORZTIMING             (AU1100_LCD_BASE + 0xC)</span>
  <span class="cp">#define LCD_HORZTIMING_HN2_BIT   24</span>
  <span class="cp">#define LCD_HORZTIMING_HN2_MASK  (0xFF &lt;&lt; LCD_HORZTIMING_HN2_BIT)</span>
  <span class="cp">#define LCD_HORZTIMING_HN2_N(N)  ((((N)-1) &lt;&lt; LCD_HORZTIMING_HN2_BIT) &amp; LCD_HORZTIMING_HN2_MASK)</span>
  <span class="cp">#define LCD_HORZTIMING_HN1_BIT   16</span>
  <span class="cp">#define LCD_HORZTIMING_HN1_MASK  (0xFF &lt;&lt; LCD_HORZTIMING_HN1_BIT)</span>
  <span class="cp">#define LCD_HORZTIMING_HN1_N(N)  ((((N)-1) &lt;&lt; LCD_HORZTIMING_HN1_BIT) &amp; LCD_HORZTIMING_HN1_MASK)</span>
  <span class="cp">#define LCD_HORZTIMING_HPW_BIT   10</span>
  <span class="cp">#define LCD_HORZTIMING_HPW_MASK  (0x3F &lt;&lt; LCD_HORZTIMING_HPW_BIT)</span>
  <span class="cp">#define LCD_HORZTIMING_HPW_N(N)  ((((N)-1) &lt;&lt; LCD_HORZTIMING_HPW_BIT) &amp; LCD_HORZTIMING_HPW_MASK)</span>
  <span class="cp">#define LCD_HORZTIMING_PPL_BIT   0</span>
  <span class="cp">#define LCD_HORZTIMING_PPL_MASK  (0x3FF &lt;&lt; LCD_HORZTIMING_PPL_BIT)</span>
  <span class="cp">#define LCD_HORZTIMING_PPL_N(N)  ((((N)-1) &lt;&lt; LCD_HORZTIMING_PPL_BIT) &amp; LCD_HORZTIMING_PPL_MASK)</span>

<span class="cp">#define LCD_VERTTIMING             (AU1100_LCD_BASE + 0x10)</span>
  <span class="cp">#define LCD_VERTTIMING_VN2_BIT   24</span>
  <span class="cp">#define LCD_VERTTIMING_VN2_MASK  (0xFF &lt;&lt; LCD_VERTTIMING_VN2_BIT)</span>
  <span class="cp">#define LCD_VERTTIMING_VN2_N(N)  ((((N)-1) &lt;&lt; LCD_VERTTIMING_VN2_BIT) &amp; LCD_VERTTIMING_VN2_MASK)</span>
  <span class="cp">#define LCD_VERTTIMING_VN1_BIT   16</span>
  <span class="cp">#define LCD_VERTTIMING_VN1_MASK  (0xFF &lt;&lt; LCD_VERTTIMING_VN1_BIT)</span>
  <span class="cp">#define LCD_VERTTIMING_VN1_N(N)  ((((N)-1) &lt;&lt; LCD_VERTTIMING_VN1_BIT) &amp; LCD_VERTTIMING_VN1_MASK)</span>
  <span class="cp">#define LCD_VERTTIMING_VPW_BIT   10</span>
  <span class="cp">#define LCD_VERTTIMING_VPW_MASK  (0x3F &lt;&lt; LCD_VERTTIMING_VPW_BIT)</span>
  <span class="cp">#define LCD_VERTTIMING_VPW_N(N)  ((((N)-1) &lt;&lt; LCD_VERTTIMING_VPW_BIT) &amp; LCD_VERTTIMING_VPW_MASK)</span>
  <span class="cp">#define LCD_VERTTIMING_LPP_BIT   0</span>
  <span class="cp">#define LCD_VERTTIMING_LPP_MASK  (0x3FF &lt;&lt; LCD_VERTTIMING_LPP_BIT)</span>
  <span class="cp">#define LCD_VERTTIMING_LPP_N(N)  ((((N)-1) &lt;&lt; LCD_VERTTIMING_LPP_BIT) &amp; LCD_VERTTIMING_LPP_MASK)</span>

<span class="cp">#define LCD_CLKCONTROL             (AU1100_LCD_BASE + 0x14)</span>
  <span class="cp">#define LCD_CLKCONTROL_IB        (1&lt;&lt;18)</span>
  <span class="cp">#define LCD_CLKCONTROL_IC        (1&lt;&lt;17)</span>
  <span class="cp">#define LCD_CLKCONTROL_IH        (1&lt;&lt;16)</span>
  <span class="cp">#define LCD_CLKCONTROL_IV        (1&lt;&lt;15)</span>
  <span class="cp">#define LCD_CLKCONTROL_BF_BIT    10</span>
  <span class="cp">#define LCD_CLKCONTROL_BF_MASK   (0x1F &lt;&lt; LCD_CLKCONTROL_BF_BIT)</span>
  <span class="cp">#define LCD_CLKCONTROL_BF_N(N)   ((((N)-1) &lt;&lt; LCD_CLKCONTROL_BF_BIT) &amp; LCD_CLKCONTROL_BF_MASK)</span>
  <span class="cp">#define LCD_CLKCONTROL_PCD_BIT   0</span>
  <span class="cp">#define LCD_CLKCONTROL_PCD_MASK  (0x3FF &lt;&lt; LCD_CLKCONTROL_PCD_BIT)</span>
  <span class="cp">#define LCD_CLKCONTROL_PCD_N(N)  (((N) &lt;&lt; LCD_CLKCONTROL_PCD_BIT) &amp; LCD_CLKCONTROL_PCD_MASK)</span>

<span class="cp">#define LCD_DMAADDR0               (AU1100_LCD_BASE + 0x18)</span>
<span class="cp">#define LCD_DMAADDR1               (AU1100_LCD_BASE + 0x1C)</span>
  <span class="cp">#define LCD_DMA_SA_BIT           5</span>
  <span class="cp">#define LCD_DMA_SA_MASK          (0x7FFFFFF &lt;&lt; LCD_DMA_SA_BIT)</span>
  <span class="cp">#define LCD_DMA_SA_N(N)          ((N) &amp; LCD_DMA_SA_MASK)</span>

<span class="cp">#define LCD_WORDS                  (AU1100_LCD_BASE + 0x20)</span>
  <span class="cp">#define LCD_WRD_WRDS_BIT         0</span>
  <span class="cp">#define LCD_WRD_WRDS_MASK        (0xFFFFFFFF &lt;&lt; LCD_WRD_WRDS_BIT)</span>
  <span class="cp">#define LCD_WRD_WRDS_N(N)        ((((N)-1) &lt;&lt; LCD_WRD_WRDS_BIT) &amp; LCD_WRD_WRDS_MASK)</span>

<span class="cp">#define LCD_PWMDIV                 (AU1100_LCD_BASE + 0x24)</span>
  <span class="cp">#define LCD_PWMDIV_EN            (1&lt;&lt;12)</span>
  <span class="cp">#define LCD_PWMDIV_PWMDIV_BIT    0</span>
  <span class="cp">#define LCD_PWMDIV_PWMDIV_MASK   (0xFFF &lt;&lt; LCD_PWMDIV_PWMDIV_BIT)</span>
  <span class="cp">#define LCD_PWMDIV_PWMDIV_N(N)   ((((N)-1) &lt;&lt; LCD_PWMDIV_PWMDIV_BIT) &amp; LCD_PWMDIV_PWMDIV_MASK)</span>

<span class="cp">#define LCD_PWMHI                  (AU1100_LCD_BASE + 0x28)</span>
  <span class="cp">#define LCD_PWMHI_PWMHI1_BIT     12</span>
  <span class="cp">#define LCD_PWMHI_PWMHI1_MASK    (0xFFF &lt;&lt; LCD_PWMHI_PWMHI1_BIT)</span>
  <span class="cp">#define LCD_PWMHI_PWMHI1_N(N)    (((N) &lt;&lt; LCD_PWMHI_PWMHI1_BIT) &amp; LCD_PWMHI_PWMHI1_MASK)</span>
  <span class="cp">#define LCD_PWMHI_PWMHI0_BIT     0</span>
  <span class="cp">#define LCD_PWMHI_PWMHI0_MASK    (0xFFF &lt;&lt; LCD_PWMHI_PWMHI0_BIT)</span>
  <span class="cp">#define LCD_PWMHI_PWMHI0_N(N)    (((N) &lt;&lt; LCD_PWMHI_PWMHI0_BIT) &amp; LCD_PWMHI_PWMHI0_MASK)</span>

<span class="cp">#define LCD_PALLETTEBASE                (AU1100_LCD_BASE + 0x400)</span>
  <span class="cp">#define LCD_PALLETTE_MONO_MI_BIT      0</span>
  <span class="cp">#define LCD_PALLETTE_MONO_MI_MASK     (0xF &lt;&lt; LCD_PALLETTE_MONO_MI_BIT)</span>
  <span class="cp">#define LCD_PALLETTE_MONO_MI_N(N)     (((N)&lt;&lt; LCD_PALLETTE_MONO_MI_BIT) &amp; LCD_PALLETTE_MONO_MI_MASK)</span>

  <span class="cp">#define LCD_PALLETTE_COLOR_RI_BIT     8</span>
  <span class="cp">#define LCD_PALLETTE_COLOR_RI_MASK    (0xF &lt;&lt; LCD_PALLETTE_COLOR_RI_BIT)</span>
  <span class="cp">#define LCD_PALLETTE_COLOR_RI_N(N)    (((N)&lt;&lt; LCD_PALLETTE_COLOR_RI_BIT) &amp; LCD_PALLETTE_COLOR_RI_MASK)</span>
  <span class="cp">#define LCD_PALLETTE_COLOR_GI_BIT     4</span>
  <span class="cp">#define LCD_PALLETTE_COLOR_GI_MASK    (0xF &lt;&lt; LCD_PALLETTE_COLOR_GI_BIT)</span>
  <span class="cp">#define LCD_PALLETTE_COLOR_GI_N(N)    (((N)&lt;&lt; LCD_PALLETTE_COLOR_GI_BIT) &amp; LCD_PALLETTE_COLOR_GI_MASK)</span>
  <span class="cp">#define LCD_PALLETTE_COLOR_BI_BIT     0</span>
  <span class="cp">#define LCD_PALLETTE_COLOR_BI_MASK    (0xF &lt;&lt; LCD_PALLETTE_COLOR_BI_BIT)</span>
  <span class="cp">#define LCD_PALLETTE_COLOR_BI_N(N)    (((N)&lt;&lt; LCD_PALLETTE_COLOR_BI_BIT) &amp; LCD_PALLETTE_COLOR_BI_MASK)</span>

  <span class="cp">#define LCD_PALLETTE_TFT_DC_BIT       0</span>
  <span class="cp">#define LCD_PALLETTE_TFT_DC_MASK      (0xFFFF &lt;&lt; LCD_PALLETTE_TFT_DC_BIT)</span>
  <span class="cp">#define LCD_PALLETTE_TFT_DC_N(N)      (((N)&lt;&lt; LCD_PALLETTE_TFT_DC_BIT) &amp; LCD_PALLETTE_TFT_DC_MASK)</span>

<span class="cm">/********************************************************************/</span>

<span class="cm">/* List of panels known to work with the AU1100 LCD controller.</span>
<span class="cm"> * To add a new panel, enter the same specifications as the</span>
<span class="cm"> * Generic_TFT one, and MAKE SURE that it doesn&#39;t conflicts</span>
<span class="cm"> * with the controller restrictions. Restrictions are:</span>
<span class="cm"> *</span>
<span class="cm"> * STN color panels: max_bpp &lt;= 12</span>
<span class="cm"> * STN mono panels: max_bpp &lt;= 4</span>
<span class="cm"> * TFT panels: max_bpp &lt;= 16</span>
<span class="cm"> * max_xres &lt;= 800</span>
<span class="cm"> * max_yres &lt;= 600</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">au1100fb_panel</span> <span class="n">known_lcd_panels</span><span class="p">[]</span> <span class="o">=</span>
<span class="p">{</span>
	<span class="cm">/* 800x600x16bpp CRT */</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;CRT_800x600_16&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xres</span> <span class="o">=</span> <span class="mi">800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">yres</span> <span class="o">=</span> <span class="mi">600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bpp</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">.</span><span class="n">control_base</span> <span class="o">=</span>	<span class="mh">0x0004886A</span> <span class="o">|</span>
			<span class="n">LCD_CONTROL_DEFAULT_PO</span> <span class="o">|</span> <span class="n">LCD_CONTROL_DEFAULT_SBPPF</span> <span class="o">|</span>
			<span class="n">LCD_CONTROL_BPP_16</span> <span class="o">|</span> <span class="n">LCD_CONTROL_SBB_4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">clkcontrol_base</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">horztiming</span> <span class="o">=</span> <span class="mh">0x005aff1f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">verttiming</span> <span class="o">=</span> <span class="mh">0x16000e57</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/* just the standard LCD */</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;WWPC LCD&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xres</span> <span class="o">=</span> <span class="mi">240</span><span class="p">,</span>
		<span class="p">.</span><span class="n">yres</span> <span class="o">=</span> <span class="mi">320</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bpp</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">.</span><span class="n">control_base</span> <span class="o">=</span> <span class="mh">0x0006806A</span><span class="p">,</span>
		<span class="p">.</span><span class="n">horztiming</span> <span class="o">=</span> <span class="mh">0x0A1010EF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">verttiming</span> <span class="o">=</span> <span class="mh">0x0301013F</span><span class="p">,</span>
		<span class="p">.</span><span class="n">clkcontrol_base</span> <span class="o">=</span> <span class="mh">0x00018001</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/* Sharp 320x240 TFT panel */</span>
	<span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Sharp_LQ038Q5DR01&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xres</span> <span class="o">=</span> <span class="mi">320</span><span class="p">,</span>
		<span class="p">.</span><span class="n">yres</span> <span class="o">=</span> <span class="mi">240</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bpp</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">.</span><span class="n">control_base</span> <span class="o">=</span>
		<span class="p">(</span> <span class="n">LCD_CONTROL_SBPPF_565</span>
		<span class="o">|</span> <span class="n">LCD_CONTROL_C</span>
		<span class="o">|</span> <span class="n">LCD_CONTROL_SM_0</span>
			<span class="o">|</span> <span class="n">LCD_CONTROL_DEFAULT_PO</span>
		<span class="o">|</span> <span class="n">LCD_CONTROL_PT</span>
		<span class="o">|</span> <span class="n">LCD_CONTROL_PC</span>
		<span class="o">|</span> <span class="n">LCD_CONTROL_BPP_16</span> <span class="p">),</span>
		<span class="p">.</span><span class="n">horztiming</span> <span class="o">=</span>
		<span class="p">(</span> <span class="n">LCD_HORZTIMING_HN2_N</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
		<span class="o">|</span> <span class="n">LCD_HORZTIMING_HN1_N</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
		<span class="o">|</span> <span class="n">LCD_HORZTIMING_HPW_N</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
		<span class="o">|</span> <span class="n">LCD_HORZTIMING_PPL_N</span><span class="p">(</span><span class="mi">320</span><span class="p">)</span> <span class="p">),</span>
		<span class="p">.</span><span class="n">verttiming</span> <span class="o">=</span>
		<span class="p">(</span> <span class="n">LCD_VERTTIMING_VN2_N</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
		<span class="o">|</span> <span class="n">LCD_VERTTIMING_VN1_N</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
		<span class="o">|</span> <span class="n">LCD_VERTTIMING_VPW_N</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
		<span class="o">|</span> <span class="n">LCD_VERTTIMING_LPP_N</span><span class="p">(</span><span class="mi">240</span><span class="p">)</span> <span class="p">),</span>
		<span class="p">.</span><span class="n">clkcontrol_base</span> <span class="o">=</span> <span class="n">LCD_CLKCONTROL_PCD_N</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
	<span class="p">},</span>

	<span class="cm">/* Hitachi SP14Q005 and possibly others */</span>
	<span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Hitachi_SP14Qxxx&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xres</span> <span class="o">=</span> <span class="mi">320</span><span class="p">,</span>
		<span class="p">.</span><span class="n">yres</span> <span class="o">=</span> <span class="mi">240</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bpp</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">control_base</span> <span class="o">=</span>
			<span class="p">(</span> <span class="n">LCD_CONTROL_C</span>
			<span class="o">|</span> <span class="n">LCD_CONTROL_BPP_4</span> <span class="p">),</span>
		<span class="p">.</span><span class="n">horztiming</span> <span class="o">=</span>
			<span class="p">(</span> <span class="n">LCD_HORZTIMING_HN2_N</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
			<span class="o">|</span> <span class="n">LCD_HORZTIMING_HN1_N</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
			<span class="o">|</span> <span class="n">LCD_HORZTIMING_HPW_N</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
			<span class="o">|</span> <span class="n">LCD_HORZTIMING_PPL_N</span><span class="p">(</span><span class="mi">320</span><span class="p">)</span> <span class="p">),</span>
		<span class="p">.</span><span class="n">verttiming</span> <span class="o">=</span>
			<span class="p">(</span> <span class="n">LCD_VERTTIMING_VN2_N</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
			<span class="o">|</span> <span class="n">LCD_VERTTIMING_VN1_N</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
			<span class="o">|</span> <span class="n">LCD_VERTTIMING_VPW_N</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
			<span class="o">|</span> <span class="n">LCD_VERTTIMING_LPP_N</span><span class="p">(</span><span class="mi">240</span><span class="p">)</span> <span class="p">),</span>
		<span class="p">.</span><span class="n">clkcontrol_base</span> <span class="o">=</span> <span class="n">LCD_CLKCONTROL_PCD_N</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
	<span class="p">},</span>

	<span class="cm">/* Generic 640x480 TFT panel */</span>
	<span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;TFT_640x480_16&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xres</span> <span class="o">=</span> <span class="mi">640</span><span class="p">,</span>
		<span class="p">.</span><span class="n">yres</span> <span class="o">=</span> <span class="mi">480</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bpp</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">.</span><span class="n">control_base</span> <span class="o">=</span> <span class="mh">0x004806a</span> <span class="o">|</span> <span class="n">LCD_CONTROL_DEFAULT_PO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">horztiming</span> <span class="o">=</span> <span class="mh">0x3434d67f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">verttiming</span> <span class="o">=</span> <span class="mh">0x0e0e39df</span><span class="p">,</span>
		<span class="p">.</span><span class="n">clkcontrol_base</span> <span class="o">=</span> <span class="n">LCD_CLKCONTROL_PCD_N</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
	<span class="p">},</span>

	 <span class="cm">/* Pb1100 LCDB 640x480 PrimeView TFT panel */</span>
	<span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;PrimeView_640x480_16&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">xres</span> <span class="o">=</span> <span class="mi">640</span><span class="p">,</span>
		<span class="p">.</span><span class="n">yres</span> <span class="o">=</span> <span class="mi">480</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bpp</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">.</span><span class="n">control_base</span> <span class="o">=</span> <span class="mh">0x0004886a</span> <span class="o">|</span> <span class="n">LCD_CONTROL_DEFAULT_PO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">horztiming</span> <span class="o">=</span> <span class="mh">0x0e4bfe7f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">verttiming</span> <span class="o">=</span> <span class="mh">0x210805df</span><span class="p">,</span>
		<span class="p">.</span><span class="n">clkcontrol_base</span> <span class="o">=</span> <span class="mh">0x00038001</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cm">/********************************************************************/</span>

<span class="cm">/* Inline helpers */</span>

<span class="cp">#define panel_is_dual(panel)  (panel-&gt;control_base &amp; LCD_CONTROL_DP)</span>
<span class="cp">#define panel_is_active(panel)(panel-&gt;control_base &amp; LCD_CONTROL_PT)</span>
<span class="cp">#define panel_is_color(panel) (panel-&gt;control_base &amp; LCD_CONTROL_PC)</span>
<span class="cp">#define panel_swap_rgb(panel) (panel-&gt;control_base &amp; LCD_CONTROL_CCO)</span>

<span class="cp">#endif </span><span class="cm">/* _AU1100LCD_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
