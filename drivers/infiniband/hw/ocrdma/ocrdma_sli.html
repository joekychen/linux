<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › infiniband › hw › ocrdma › ocrdma_sli.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>ocrdma_sli.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*******************************************************************</span>
<span class="cm"> * This file is part of the Emulex RoCE Device Driver for          *</span>
<span class="cm"> * RoCE (RDMA over Converged Ethernet) adapters.                   *</span>
<span class="cm"> * Copyright (C) 2008-2012 Emulex. All rights reserved.            *</span>
<span class="cm"> * EMULEX and SLI are trademarks of Emulex.                        *</span>
<span class="cm"> * www.emulex.com                                                  *</span>
<span class="cm"> *                                                                 *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or   *</span>
<span class="cm"> * modify it under the terms of version 2 of the GNU General       *</span>
<span class="cm"> * Public License as published by the Free Software Foundation.    *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful. *</span>
<span class="cm"> * ALL EXPRESS OR IMPLIED CONDITIONS, REPRESENTATIONS AND          *</span>
<span class="cm"> * WARRANTIES, INCLUDING ANY IMPLIED WARRANTY OF MERCHANTABILITY,  *</span>
<span class="cm"> * FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT, ARE      *</span>
<span class="cm"> * DISCLAIMED, EXCEPT TO THE EXTENT THAT SUCH DISCLAIMERS ARE HELD *</span>
<span class="cm"> * TO BE LEGALLY INVALID.  See the GNU General Public License for  *</span>
<span class="cm"> * more details, a copy of which can be found in the file COPYING  *</span>
<span class="cm"> * included with this package.                                     *</span>
<span class="cm"> *</span>
<span class="cm"> * Contact Information:</span>
<span class="cm"> * linux-drivers@emulex.com</span>
<span class="cm"> *</span>
<span class="cm"> * Emulex</span>
<span class="cm"> * 3333 Susan Street</span>
<span class="cm"> * Costa Mesa, CA 92626</span>
<span class="cm"> *******************************************************************/</span>

<span class="cp">#ifndef __OCRDMA_SLI_H__</span>
<span class="cp">#define __OCRDMA_SLI_H__</span>

<span class="cp">#define Bit(_b) (1 &lt;&lt; (_b))</span>

<span class="cp">#define OCRDMA_GEN1_FAMILY	0xB</span>
<span class="cp">#define OCRDMA_GEN2_FAMILY	0x2</span>

<span class="cp">#define OCRDMA_SUBSYS_ROCE 10</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_CMD_QUERY_CONFIG</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_ALLOC_PD</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_DEALLOC_PD</span><span class="p">,</span>

	<span class="n">OCRDMA_CMD_CREATE_AH_TBL</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_DELETE_AH_TBL</span><span class="p">,</span>

	<span class="n">OCRDMA_CMD_CREATE_QP</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_QUERY_QP</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_MODIFY_QP</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_DELETE_QP</span><span class="p">,</span>

	<span class="n">OCRDMA_CMD_RSVD1</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_ALLOC_LKEY</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_DEALLOC_LKEY</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_REGISTER_NSMR</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_REREGISTER_NSMR</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_REGISTER_NSMR_CONT</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_QUERY_NSMR</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_ALLOC_MW</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_QUERY_MW</span><span class="p">,</span>

	<span class="n">OCRDMA_CMD_CREATE_SRQ</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_QUERY_SRQ</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_MODIFY_SRQ</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_DELETE_SRQ</span><span class="p">,</span>

	<span class="n">OCRDMA_CMD_ATTACH_MCAST</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_DETACH_MCAST</span><span class="p">,</span>

	<span class="n">OCRDMA_CMD_MAX</span>
<span class="p">};</span>

<span class="cp">#define OCRDMA_SUBSYS_COMMON 1</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_CMD_CREATE_CQ</span>		<span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_CREATE_EQ</span>		<span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_CREATE_MQ</span>		<span class="o">=</span> <span class="mi">21</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_GET_FW_VER</span>		<span class="o">=</span> <span class="mi">35</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_DELETE_MQ</span>		<span class="o">=</span> <span class="mi">53</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_DELETE_CQ</span>		<span class="o">=</span> <span class="mi">54</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_DELETE_EQ</span>		<span class="o">=</span> <span class="mi">55</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_GET_FW_CONFIG</span>	<span class="o">=</span> <span class="mi">58</span><span class="p">,</span>
	<span class="n">OCRDMA_CMD_CREATE_MQ_EXT</span>	<span class="o">=</span> <span class="mi">90</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">QTYPE_EQ</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">QTYPE_CQ</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">QTYPE_MCCQ</span>	<span class="o">=</span> <span class="mi">3</span>
<span class="p">};</span>

<span class="cp">#define OCRDMA_MAX_SGID (8)</span>

<span class="cp">#define OCRDMA_MAX_QP    2048</span>
<span class="cp">#define OCRDMA_MAX_CQ    2048</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_DB_RQ_OFFSET</span>		<span class="o">=</span> <span class="mh">0xE0</span><span class="p">,</span>
	<span class="n">OCRDMA_DB_GEN2_RQ1_OFFSET</span>	<span class="o">=</span> <span class="mh">0x100</span><span class="p">,</span>
	<span class="n">OCRDMA_DB_GEN2_RQ2_OFFSET</span>	<span class="o">=</span> <span class="mh">0xC0</span><span class="p">,</span>
	<span class="n">OCRDMA_DB_SQ_OFFSET</span>		<span class="o">=</span> <span class="mh">0x60</span><span class="p">,</span>
	<span class="n">OCRDMA_DB_GEN2_SQ_OFFSET</span>	<span class="o">=</span> <span class="mh">0x1C0</span><span class="p">,</span>
	<span class="n">OCRDMA_DB_SRQ_OFFSET</span>		<span class="o">=</span> <span class="n">OCRDMA_DB_RQ_OFFSET</span><span class="p">,</span>
	<span class="n">OCRDMA_DB_GEN2_SRQ_OFFSET</span>	<span class="o">=</span> <span class="n">OCRDMA_DB_GEN2_RQ1_OFFSET</span><span class="p">,</span>
	<span class="n">OCRDMA_DB_CQ_OFFSET</span>		<span class="o">=</span> <span class="mh">0x120</span><span class="p">,</span>
	<span class="n">OCRDMA_DB_EQ_OFFSET</span>		<span class="o">=</span> <span class="n">OCRDMA_DB_CQ_OFFSET</span><span class="p">,</span>
	<span class="n">OCRDMA_DB_MQ_OFFSET</span>		<span class="o">=</span> <span class="mh">0x140</span>
<span class="p">};</span>

<span class="cp">#define OCRDMA_DB_CQ_RING_ID_MASK       0x3FF	</span><span class="cm">/* bits 0 - 9 */</span><span class="cp"></span>
<span class="cp">#define OCRDMA_DB_CQ_RING_ID_EXT_MASK  0x0C00	</span><span class="cm">/* bits 10-11 of qid at 12-11 */</span><span class="cp"></span>
<span class="cm">/* qid #2 msbits at 12-11 */</span>
<span class="cp">#define OCRDMA_DB_CQ_RING_ID_EXT_MASK_SHIFT  0x1</span>
<span class="cp">#define OCRDMA_DB_CQ_NUM_POPPED_SHIFT       (16)	</span><span class="cm">/* bits 16 - 28 */</span><span class="cp"></span>
<span class="cm">/* Rearm bit */</span>
<span class="cp">#define OCRDMA_DB_CQ_REARM_SHIFT        (29)	</span><span class="cm">/* bit 29 */</span><span class="cp"></span>
<span class="cm">/* solicited bit */</span>
<span class="cp">#define OCRDMA_DB_CQ_SOLICIT_SHIFT   (31)	</span><span class="cm">/* bit 31 */</span><span class="cp"></span>

<span class="cp">#define OCRDMA_EQ_ID_MASK		0x1FF	</span><span class="cm">/* bits 0 - 8 */</span><span class="cp"></span>
<span class="cp">#define OCRDMA_EQ_ID_EXT_MASK		0x3e00	</span><span class="cm">/* bits 9-13 */</span><span class="cp"></span>
<span class="cp">#define OCRDMA_EQ_ID_EXT_MASK_SHIFT	(2)	</span><span class="cm">/* qid bits 9-13 at 11-15 */</span><span class="cp"></span>

<span class="cm">/* Clear the interrupt for this eq */</span>
<span class="cp">#define OCRDMA_EQ_CLR_SHIFT			(9)	</span><span class="cm">/* bit 9 */</span><span class="cp"></span>
<span class="cm">/* Must be 1 */</span>
<span class="cp">#define OCRDMA_EQ_TYPE_SHIFT		(10)	</span><span class="cm">/* bit 10 */</span><span class="cp"></span>
<span class="cm">/* Number of event entries processed */</span>
<span class="cp">#define OCRDMA_NUM_EQE_SHIFT		(16)	</span><span class="cm">/* bits 16 - 28 */</span><span class="cp"></span>
<span class="cm">/* Rearm bit */</span>
<span class="cp">#define OCRDMA_REARM_SHIFT		(29)	</span><span class="cm">/* bit 29 */</span><span class="cp"></span>

<span class="cp">#define OCRDMA_MQ_ID_MASK		0x7FF	</span><span class="cm">/* bits 0 - 10 */</span><span class="cp"></span>
<span class="cm">/* Number of entries posted */</span>
<span class="cp">#define OCRDMA_MQ_NUM_MQE_SHIFT	(16)	</span><span class="cm">/* bits 16 - 29 */</span><span class="cp"></span>

<span class="cp">#define OCRDMA_MIN_HPAGE_SIZE (4096)</span>

<span class="cp">#define OCRDMA_MIN_Q_PAGE_SIZE (4096)</span>
<span class="cp">#define OCRDMA_MAX_Q_PAGES     (8)</span>

<span class="cm">/*</span>
<span class="cm"># 0: 4K Bytes</span>
<span class="cm"># 1: 8K Bytes</span>
<span class="cm"># 2: 16K Bytes</span>
<span class="cm"># 3: 32K Bytes</span>
<span class="cm"># 4: 64K Bytes</span>
<span class="cm">*/</span>
<span class="cp">#define OCRDMA_MAX_Q_PAGE_SIZE_CNT (5)</span>
<span class="cp">#define OCRDMA_Q_PAGE_BASE_SIZE (OCRDMA_MIN_Q_PAGE_SIZE * OCRDMA_MAX_Q_PAGES)</span>

<span class="cp">#define MAX_OCRDMA_QP_PAGES      (8)</span>
<span class="cp">#define OCRDMA_MAX_WQE_MEM_SIZE (MAX_OCRDMA_QP_PAGES * OCRDMA_MIN_HQ_PAGE_SIZE)</span>

<span class="cp">#define OCRDMA_CREATE_CQ_MAX_PAGES (4)</span>
<span class="cp">#define OCRDMA_DPP_CQE_SIZE (4)</span>

<span class="cp">#define OCRDMA_GEN2_MAX_CQE 1024</span>
<span class="cp">#define OCRDMA_GEN2_CQ_PAGE_SIZE 4096</span>
<span class="cp">#define OCRDMA_GEN2_WQE_SIZE 256</span>
<span class="cp">#define OCRDMA_MAX_CQE  4095</span>
<span class="cp">#define OCRDMA_CQ_PAGE_SIZE 16384</span>
<span class="cp">#define OCRDMA_WQE_SIZE 128</span>
<span class="cp">#define OCRDMA_WQE_STRIDE 8</span>
<span class="cp">#define OCRDMA_WQE_ALIGN_BYTES 16</span>

<span class="cp">#define MAX_OCRDMA_SRQ_PAGES MAX_OCRDMA_QP_PAGES</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_MCH_OPCODE_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MCH_OPCODE_MASK</span>	<span class="o">=</span> <span class="mh">0xFF</span><span class="p">,</span>
	<span class="n">OCRDMA_MCH_SUBSYS_SHIFT</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">OCRDMA_MCH_SUBSYS_MASK</span>	<span class="o">=</span> <span class="mh">0xFF00</span>
<span class="p">};</span>

<span class="cm">/* mailbox cmd header */</span>
<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">subsys_op</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">timeout</span><span class="p">;</span>		<span class="cm">/* in seconds */</span>
	<span class="n">u32</span> <span class="n">cmd_len</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rsvd_version</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_MBX_RSP_OPCODE_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_RSP_OPCODE_MASK</span>	<span class="o">=</span> <span class="mh">0xFF</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_RSP_SUBSYS_SHIFT</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_RSP_SUBSYS_MASK</span>	<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span> <span class="n">OCRDMA_MBX_RSP_SUBSYS_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_MBX_RSP_STATUS_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_RSP_STATUS_MASK</span>	<span class="o">=</span> <span class="mh">0xFF</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_RSP_ASTATUS_SHIFT</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_RSP_ASTATUS_MASK</span>	<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span> <span class="n">OCRDMA_MBX_RSP_ASTATUS_SHIFT</span>
<span class="p">};</span>

<span class="cm">/* mailbox cmd response */</span>
<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">subsys_op</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rsp_len</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">add_rsp_len</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_MQE_EMBEDDED</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OCRDMA_MQE_NONEMBEDDED</span>	<span class="o">=</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_mqe_sge</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">pa_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pa_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">len</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_MQE_HDR_EMB_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MQE_HDR_EMB_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
	<span class="n">OCRDMA_MQE_HDR_SGE_CNT_SHIFT</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">OCRDMA_MQE_HDR_SGE_CNT_MASK</span>	<span class="o">=</span> <span class="mh">0x1F</span> <span class="o">&lt;&lt;</span> <span class="n">OCRDMA_MQE_HDR_SGE_CNT_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_MQE_HDR_SPECIAL_SHIFT</span>	<span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
	<span class="n">OCRDMA_MQE_HDR_SPECIAL_MASK</span>	<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span> <span class="n">OCRDMA_MQE_HDR_SPECIAL_SHIFT</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">spcl_sge_cnt_emb</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pyld_len</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tag_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tag_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rsvd3</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_mqe_emb_cmd</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">mch</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">pyld</span><span class="p">[</span><span class="mi">220</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_mqe</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">ocrdma_mqe_emb_cmd</span> <span class="n">emb_req</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="k">struct</span> <span class="n">ocrdma_mqe_sge</span> <span class="n">sge</span><span class="p">[</span><span class="mi">19</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">nonemb_req</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">cmd</span><span class="p">[</span><span class="mi">236</span><span class="p">];</span>
		<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">u</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define OCRDMA_EQ_LEN       4096</span>
<span class="cp">#define OCRDMA_MQ_CQ_LEN    256</span>
<span class="cp">#define OCRDMA_MQ_LEN       128</span>

<span class="cp">#define PAGE_SHIFT_4K		12</span>
<span class="cp">#define PAGE_SIZE_4K		(1 &lt;&lt; PAGE_SHIFT_4K)</span>

<span class="cm">/* Returns number of pages spanned by the data starting at the given addr */</span>
<span class="cp">#define PAGES_4K_SPANNED(_address, size) \</span>
<span class="cp">	((u32)((((size_t)(_address) &amp; (PAGE_SIZE_4K - 1)) +	\</span>
<span class="cp">			(size) + (PAGE_SIZE_4K - 1)) &gt;&gt; PAGE_SHIFT_4K))</span>

<span class="k">struct</span> <span class="n">ocrdma_delete_q_req</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">id</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_pa</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">hi</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define MAX_OCRDMA_EQ_PAGES (8)</span>
<span class="k">struct</span> <span class="n">ocrdma_create_eq_req</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_pages</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">valid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cnt</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">delay</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rsvd</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_pa</span> <span class="n">pa</span><span class="p">[</span><span class="n">MAX_OCRDMA_EQ_PAGES</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_CREATE_EQ_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">29</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_EQ_CNT_SHIFT</span>	<span class="o">=</span> <span class="mi">26</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_CQ_DELAY_SHIFT</span>	<span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_create_eq_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vector_eqid</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define OCRDMA_EQ_MINOR_OTHER (0x1)</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_MCQE_STATUS_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MCQE_STATUS_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_MCQE_ESTATUS_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_MCQE_ESTATUS_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span> <span class="n">OCRDMA_MCQE_ESTATUS_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_MCQE_CONS_SHIFT</span>		<span class="o">=</span> <span class="mi">27</span><span class="p">,</span>
	<span class="n">OCRDMA_MCQE_CONS_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">27</span><span class="p">),</span>
	<span class="n">OCRDMA_MCQE_CMPL_SHIFT</span>		<span class="o">=</span> <span class="mi">28</span><span class="p">,</span>
	<span class="n">OCRDMA_MCQE_CMPL_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">28</span><span class="p">),</span>
	<span class="n">OCRDMA_MCQE_AE_SHIFT</span>		<span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
	<span class="n">OCRDMA_MCQE_AE_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
	<span class="n">OCRDMA_MCQE_VALID_SHIFT</span>		<span class="o">=</span> <span class="mi">31</span><span class="p">,</span>
	<span class="n">OCRDMA_MCQE_VALID_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_mcqe</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tag_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tag_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">valid_ae_cmpl_cons</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_AE_MCQE_QPVALID</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">31</span><span class="p">),</span>
	<span class="n">OCRDMA_AE_MCQE_QPID_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>

	<span class="n">OCRDMA_AE_MCQE_CQVALID</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">31</span><span class="p">),</span>
	<span class="n">OCRDMA_AE_MCQE_CQID_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_MCQE_VALID</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">31</span><span class="p">),</span>
	<span class="n">OCRDMA_AE_MCQE_AE</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
	<span class="n">OCRDMA_AE_MCQE_EVENT_TYPE_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_MCQE_EVENT_TYPE_MASK</span>	<span class="o">=</span>
					<span class="mh">0xFF</span> <span class="o">&lt;&lt;</span> <span class="n">OCRDMA_AE_MCQE_EVENT_TYPE_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_MCQE_EVENT_CODE_SHIFT</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_MCQE_EVENT_CODE_MASK</span>	<span class="o">=</span>
					<span class="mh">0xFF</span> <span class="o">&lt;&lt;</span> <span class="n">OCRDMA_AE_MCQE_EVENT_CODE_SHIFT</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">ocrdma_ae_mcqe</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">qpvalid_qpid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cqvalid_cqid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">evt_tag</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">valid_ae_event</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_AE_MPA_MCQE_REQ_ID_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_MPA_MCQE_REQ_ID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_AE_MPA_MCQE_REQ_ID_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_AE_MPA_MCQE_EVENT_CODE_SHIFT</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_MPA_MCQE_EVENT_CODE_MASK</span>	<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_AE_MPA_MCQE_EVENT_CODE_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_MPA_MCQE_EVENT_TYPE_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_MPA_MCQE_EVENT_TYPE_MASK</span>	<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_AE_MPA_MCQE_EVENT_TYPE_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_MPA_MCQE_EVENT_AE_SHIFT</span>	<span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_MPA_MCQE_EVENT_AE_MASK</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
	<span class="n">OCRDMA_AE_MPA_MCQE_EVENT_VALID_SHIFT</span>	<span class="o">=</span> <span class="mi">31</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_MPA_MCQE_EVENT_VALID_MASK</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_ae_mpa_mcqe</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">req_id</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">w1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">w2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">valid_ae_event</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_AE_QP_MCQE_NEW_QP_STATE_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_QP_MCQE_NEW_QP_STATE_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_QP_MCQE_QP_ID_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_QP_MCQE_QP_ID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
						<span class="n">OCRDMA_AE_QP_MCQE_QP_ID_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_AE_QP_MCQE_EVENT_CODE_SHIFT</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_QP_MCQE_EVENT_CODE_MASK</span>	<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_AE_QP_MCQE_EVENT_CODE_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_QP_MCQE_EVENT_TYPE_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_QP_MCQE_EVENT_TYPE_MASK</span>	<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_AE_QP_MCQE_EVENT_TYPE_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_QP_MCQE_EVENT_AE_SHIFT</span>	<span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_QP_MCQE_EVENT_AE_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
	<span class="n">OCRDMA_AE_QP_MCQE_EVENT_VALID_SHIFT</span>	<span class="o">=</span> <span class="mi">31</span><span class="p">,</span>
	<span class="n">OCRDMA_AE_QP_MCQE_EVENT_VALID_MASK</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_ae_qp_mcqe</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">qp_id_state</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">w1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">w2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">valid_ae_event</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define OCRDMA_ASYNC_EVE_CODE 0x14</span>

<span class="k">enum</span> <span class="n">OCRDMA_ASYNC_EVENT_TYPE</span> <span class="p">{</span>
	<span class="n">OCRDMA_CQ_ERROR</span>			<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">OCRDMA_CQ_OVERRUN_ERROR</span>		<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">OCRDMA_CQ_QPCAT_ERROR</span>		<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_ACCESS_ERROR</span>		<span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_COMM_EST_EVENT</span>	<span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">OCRDMA_SQ_DRAINED_EVENT</span>		<span class="o">=</span> <span class="mh">0x05</span><span class="p">,</span>
	<span class="n">OCRDMA_DEVICE_FATAL_EVENT</span>	<span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">OCRDMA_SRQCAT_ERROR</span>		<span class="o">=</span> <span class="mh">0x0E</span><span class="p">,</span>
	<span class="n">OCRDMA_SRQ_LIMIT_EVENT</span>		<span class="o">=</span> <span class="mh">0x0F</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_LAST_WQE_EVENT</span>	<span class="o">=</span> <span class="mh">0x10</span>
<span class="p">};</span>

<span class="cm">/* mailbox command request and responses */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_CQ_OVERFLOW_SHIFT</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_CQ_OVERFLOW_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_SRQ_SUPPORTED_SHIFT</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_SRQ_SUPPORTED_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_QP_SHIFT</span>		<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_QP_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_QP_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_PD_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_PD_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_PD_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_CA_ACK_DELAY_SHIFT</span>		<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_CA_ACK_DELAY_MASK</span>		<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_CA_ACK_DELAY_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_SEND_SGE_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_SEND_SGE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_WRITE_SGE_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_WRITE_SGE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_WRITE_SGE_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_ORD_PER_QP_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_ORD_PER_QP_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_IRD_PER_QP_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_IRD_PER_QP_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_IRD_PER_QP_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_WQE_SIZE_OFFSET</span>	<span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_WQE_SIZE_MASK</span>		<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_WQE_SIZE_OFFSET</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_RQE_SIZE_OFFSET</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_RQE_SIZE_MASK</span>		<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_RQE_SIZE_OFFSET</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_DPP_CQES_OFFSET</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_DPP_CQES_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_DPP_CQES_OFFSET</span><span class="p">,</span>

	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_SRQ_OFFSET</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_SRQ_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_SRQ_OFFSET</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_RPIR_QPS_OFFSET</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_RPIR_QPS_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_RPIR_QPS_OFFSET</span><span class="p">,</span>

	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_DPP_PDS_OFFSET</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_DPP_PDS_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_DPP_PDS_OFFSET</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_DPP_CREDITS_OFFSET</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_DPP_CREDITS_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_DPP_CREDITS_OFFSET</span><span class="p">,</span>

	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_DPP_QPS_OFFSET</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_DPP_QPS_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_DPP_QPS_OFFSET</span><span class="p">,</span>

	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_WQES_PER_WQ_OFFSET</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_WQES_PER_WQ_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_WQES_PER_WQ_OFFSET</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_RQES_PER_RQ_OFFSET</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_RQES_PER_RQ_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_RQES_PER_RQ_OFFSET</span><span class="p">,</span>

	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_CQ_OFFSET</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_CQ_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_CQ_OFFSET</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_CQES_PER_CQ_OFFSET</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_CQES_PER_CQ_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_CQES_PER_CQ_OFFSET</span><span class="p">,</span>

	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_SRQ_RQE_OFFSET</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_SRQ_RQE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_SRQ_RQE_OFFSET</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_SRQ_SGE_OFFSET</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_SRQ_SGE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_MBX_QUERY_CFG_MAX_SRQ_SGE_OFFSET</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_mbx_query_config</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">qp_srq_cq_ird_ord</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_pd_ca_ack_delay</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_write_send_sge</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_ird_ord_per_qp</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_shared_ird_ord</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_mr</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">max_mr_size</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_num_mr_pbl</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_mw</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_fmr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_pages_per_frmr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_mcast_group</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_mcast_qp_attach</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_total_mcast_qp_attach</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">wqe_rqe_stride_max_dpp_cqs</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_srq_rpir_qps</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_dpp_pds_credits</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_dpp_credits_pds_per_pd</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_wqes_rqes_per_q</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_cq_cqes_per_cq</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_srq_rqe_sge</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_fw_ver_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">running_ver</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_fw_conf_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">config_num</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">asic_revision</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">phy_port</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fn_mode</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u32</span> <span class="n">mode</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">nic_wqid_base</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">nic_wq_tot</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">prot_wqid_base</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">prot_wq_tot</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">prot_rqid_base</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">prot_rqid_tot</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">ulp</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">fn_capabilities</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rsvd2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">base_eqid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_eq</span><span class="p">;</span>

<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_FN_MODE_RDMA</span>	<span class="o">=</span> <span class="mh">0x4</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_CREATE_CQ_VER2</span>			<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_CQ_PAGE_CNT_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_CQ_PAGE_SIZE_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_CQ_PAGE_SIZE_MASK</span>		<span class="o">=</span> <span class="mh">0xFF</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_CQ_COALESCWM_SHIFT</span>	<span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_CQ_COALESCWM_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span> <span class="o">|</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_CQ_FLAGS_NODELAY</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">14</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_CQ_FLAGS_AUTO_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>

	<span class="n">OCRDMA_CREATE_CQ_EQ_ID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_CQ_CQE_COUNT_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_CREATE_CQ_VER0</span>			<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_CQ_DPP</span>			<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_CQ_TYPE_SHIFT</span>		<span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_CQ_EQID_SHIFT</span>		<span class="o">=</span> <span class="mi">22</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_CQ_CNT_SHIFT</span>		<span class="o">=</span> <span class="mi">27</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_CQ_FLAGS_VALID</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">29</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_CQ_FLAGS_EVENTABLE</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">31</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_CQ_DEF_FLAGS</span>		<span class="o">=</span> <span class="n">OCRDMA_CREATE_CQ_FLAGS_VALID</span> <span class="o">|</span>
					<span class="n">OCRDMA_CREATE_CQ_FLAGS_EVENTABLE</span> <span class="o">|</span>
					<span class="n">OCRDMA_CREATE_CQ_FLAGS_NODELAY</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_create_cq_cmd</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pgsz_pgcnt</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ev_cnt_flags</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">eqn</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cqe_count</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rsvd6</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_pa</span> <span class="n">pa</span><span class="p">[</span><span class="n">OCRDMA_CREATE_CQ_MAX_PAGES</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_create_cq</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_create_cq_cmd</span> <span class="n">cmd</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_CREATE_CQ_RSP_CQ_ID_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_create_cq_cmd_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cq_id</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_create_cq_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_create_cq_cmd_rsp</span> <span class="n">rsp</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_CREATE_MQ_V0_CQ_ID_SHIFT</span>		<span class="o">=</span> <span class="mi">22</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_MQ_CQ_ID_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_MQ_RING_SIZE_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_MQ_VALID</span>			<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">31</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_MQ_ASYNC_CQ_VALID</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_create_mq_v0</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">pages</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cqid_ringsize</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">valid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">async_cqid_valid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rsvd</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_pa</span> <span class="n">pa</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_create_mq_v1</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">cqid_pages</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">async_event_bitmap</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">async_cqid_ringsize</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">valid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">async_cqid_valid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rsvd</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_pa</span> <span class="n">pa</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_create_mq_req</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">ocrdma_create_mq_v0</span> <span class="n">v0</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">ocrdma_create_mq_v1</span> <span class="n">v1</span><span class="p">;</span>
	<span class="p">};</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_create_mq_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">id</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_DESTROY_CQ_QID_SHIFT</span>			<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_DESTROY_CQ_QID_MASK</span>			<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_DESTROY_CQ_QID_BYPASS_FLUSH_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_DESTROY_CQ_QID_BYPASS_FLUSH_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_DESTROY_CQ_QID_BYPASS_FLUSH_SHIFT</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_destroy_cq</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">bypass_flush_qid</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_destroy_cq_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_QPT_GSI</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OCRDMA_QPT_RC</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">OCRDMA_QPT_UD</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_PD_ID_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_PD_ID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_SQ_PAGE_SIZE_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_RQ_PAGE_SIZE_SHIFT</span>	<span class="o">=</span> <span class="mi">19</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_QPT_SHIFT</span>		<span class="o">=</span> <span class="mi">29</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_QPT_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span> <span class="o">|</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="o">|</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">29</span><span class="p">),</span>

	<span class="n">OCRDMA_CREATE_QP_REQ_MAX_RQE_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_MAX_RQE_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_MAX_WQE_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_MAX_WQE_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_CREATE_QP_REQ_MAX_WQE_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_QP_REQ_MAX_SGE_WRITE_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_MAX_SGE_WRITE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_MAX_SGE_SEND_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_MAX_SGE_SEND_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_CREATE_QP_REQ_MAX_SGE_SEND_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_QP_REQ_FMR_EN_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_FMR_EN_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_ZERO_LKEYEN_SHIFT</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_ZERO_LKEYEN_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_BIND_MEMWIN_SHIFT</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_BIND_MEMWIN_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_INB_WREN_SHIFT</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_INB_WREN_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_INB_RDEN_SHIFT</span>		<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_INB_RDEN_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_USE_SRQ_SHIFT</span>		<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_USE_SRQ_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_ENABLE_RPIR_SHIFT</span>		<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_ENABLE_RPIR_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_ENABLE_DPP_SHIFT</span>		<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_ENABLE_DPP_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_ENABLE_DPP_CQ_SHIFT</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_ENABLE_DPP_CQ_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_MAX_SGE_RECV_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_MAX_SGE_RECV_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_CREATE_QP_REQ_MAX_SGE_RECV_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_QP_REQ_MAX_IRD_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_MAX_IRD_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_MAX_ORD_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_MAX_ORD_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_CREATE_QP_REQ_MAX_ORD_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_QP_REQ_NUM_RQ_PAGES_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_NUM_RQ_PAGES_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_NUM_WQ_PAGES_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_NUM_WQ_PAGES_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_CREATE_QP_REQ_NUM_WQ_PAGES_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_QP_REQ_RQE_SIZE_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_RQE_SIZE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_WQE_SIZE_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_WQE_SIZE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_CREATE_QP_REQ_WQE_SIZE_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_QP_REQ_RQ_CQID_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_RQ_CQID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_WQ_CQID_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_WQ_CQID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_CREATE_QP_REQ_WQ_CQID_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_QP_REQ_DPP_CQPID_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_DPP_CQPID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_DPP_CREDIT_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_DPP_CREDIT_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_CREATE_QP_REQ_DPP_CREDIT_SHIFT</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_CREATE_QP_REQ_DPP_CREDIT_LIMIT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_DPP_PAGE_SHIFT</span>	<span class="o">=</span> <span class="mi">1</span>
<span class="p">};</span>

<span class="cp">#define MAX_OCRDMA_IRD_PAGES 4</span>

<span class="k">enum</span> <span class="n">ocrdma_qp_flags</span> <span class="p">{</span>
	<span class="n">OCRDMA_QP_MW_BIND</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_LKEY0</span>		<span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_FAST_REG</span>	<span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_INB_RD</span>	<span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_INB_WR</span>	<span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">ocrdma_qp_state</span> <span class="p">{</span>
	<span class="n">OCRDMA_QPS_RST</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QPS_INIT</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OCRDMA_QPS_RTR</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">OCRDMA_QPS_RTS</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">OCRDMA_QPS_SQE</span>		<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">OCRDMA_QPS_SQ_DRAINING</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">OCRDMA_QPS_ERR</span>		<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">OCRDMA_QPS_SQD</span>		<span class="o">=</span> <span class="mi">7</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_create_qp_req</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">type_pgsz_pdn</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_wqe_rqe</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_sge_send_write</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_sge_recv_flags</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_ord_ird</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_wq_rq_pages</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">wqe_rqe_size</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">wq_rq_cqid</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_pa</span> <span class="n">wq_addr</span><span class="p">[</span><span class="n">MAX_OCRDMA_QP_PAGES</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">ocrdma_pa</span> <span class="n">rq_addr</span><span class="p">[</span><span class="n">MAX_OCRDMA_QP_PAGES</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">dpp_credits_cqid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rpir_lkey</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_pa</span> <span class="n">ird_addr</span><span class="p">[</span><span class="n">MAX_OCRDMA_IRD_PAGES</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_QP_ID_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_QP_ID_MASK</span>			<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_QP_RSP_MAX_RQE_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_MAX_RQE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_MAX_WQE_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_MAX_WQE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_CREATE_QP_RSP_MAX_WQE_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_QP_RSP_MAX_SGE_WRITE_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_MAX_SGE_WRITE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_MAX_SGE_SEND_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_MAX_SGE_SEND_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_CREATE_QP_RSP_MAX_SGE_SEND_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_QP_RSP_MAX_SGE_RECV_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_MAX_SGE_RECV_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_CREATE_QP_RSP_MAX_SGE_RECV_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_QP_RSP_MAX_IRD_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_MAX_IRD_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_MAX_ORD_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_MAX_ORD_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_CREATE_QP_RSP_MAX_ORD_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_QP_RSP_RQ_ID_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_RQ_ID_MASK</span>			<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_SQ_ID_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_SQ_ID_MASK</span>			<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_CREATE_QP_RSP_SQ_ID_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_QP_RSP_DPP_ENABLED_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_DPP_PAGE_OFFSET_SHIFT</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_DPP_PAGE_OFFSET_MASK</span>	<span class="o">=</span> <span class="mh">0x7FFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_CREATE_QP_RSP_DPP_PAGE_OFFSET_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_DPP_CREDITS_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_QP_RSP_DPP_CREDITS_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_CREATE_QP_RSP_DPP_CREDITS_SHIFT</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_create_qp_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">qp_id</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_wqe_rqe</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_sge_send_write</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_sge_recv</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_ord_ird</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">sq_rq_id</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dpp_response</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_destroy_qp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">qp_id</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_destroy_qp_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_MODIFY_QP_ID_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MODIFY_QP_ID_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>

	<span class="n">OCRDMA_QP_PARA_QPS_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_SQD_ASYNC_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_PKEY_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_QKEY_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_PMTU_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_ACK_TO_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_RETRY_CNT_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_RRC_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_RQPSN_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_MAX_IRD_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">9</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_MAX_ORD_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_RNT_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_SQPSN_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_DST_QPN_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">13</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_MAX_WQE_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">14</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_MAX_RQE_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_SGE_SEND_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_SGE_RECV_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">17</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_SGE_WR_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">18</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_INB_RDEN_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">19</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_INB_WREN_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_FLOW_LBL_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">21</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_BIND_EN_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">22</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_ZLKEY_EN_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">23</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_FMR_EN_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_INBAT_EN_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">25</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARA_VLAN_EN_VALID</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">26</span><span class="p">),</span>

	<span class="n">OCRDMA_MODIFY_QP_FLAGS_RD</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
	<span class="n">OCRDMA_MODIFY_QP_FLAGS_WR</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
	<span class="n">OCRDMA_MODIFY_QP_FLAGS_SEND</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="n">OCRDMA_MODIFY_QP_FLAGS_ATOMIC</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_QP_PARAMS_SRQ_ID_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_SRQ_ID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>

	<span class="n">OCRDMA_QP_PARAMS_MAX_RQE_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_MAX_RQE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_MAX_WQE_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_MAX_WQE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
	    <span class="n">OCRDMA_QP_PARAMS_MAX_WQE_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_QP_PARAMS_MAX_SGE_WRITE_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_MAX_SGE_WRITE_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_MAX_SGE_SEND_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_MAX_SGE_SEND_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QP_PARAMS_MAX_SGE_SEND_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_QP_PARAMS_FLAGS_FMR_EN</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARAMS_FLAGS_LKEY_0_EN</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARAMS_FLAGS_BIND_MW_EN</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARAMS_FLAGS_INBWR_EN</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARAMS_FLAGS_INBRD_EN</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARAMS_STATE_SHIFT</span>		<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_STATE_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARAMS_FLAGS_SQD_ASYNC</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARAMS_FLAGS_INB_ATEN</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">9</span><span class="p">),</span>
	<span class="n">OCRDMA_QP_PARAMS_MAX_SGE_RECV_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_MAX_SGE_RECV_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QP_PARAMS_MAX_SGE_RECV_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_QP_PARAMS_MAX_IRD_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_MAX_IRD_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_MAX_ORD_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_MAX_ORD_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QP_PARAMS_MAX_ORD_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_QP_PARAMS_RQ_CQID_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_RQ_CQID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_WQ_CQID_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_WQ_CQID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QP_PARAMS_WQ_CQID_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_QP_PARAMS_RQ_PSN_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_RQ_PSN_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_HOP_LMT_SHIFT</span>		<span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_HOP_LMT_MASK</span>		<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QP_PARAMS_HOP_LMT_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_QP_PARAMS_SQ_PSN_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_SQ_PSN_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_TCLASS_SHIFT</span>		<span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_TCLASS_MASK</span>		<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QP_PARAMS_TCLASS_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_QP_PARAMS_DEST_QPN_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_DEST_QPN_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_RNR_RETRY_CNT_SHIFT</span>	<span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_RNR_RETRY_CNT_MASK</span>	<span class="o">=</span> <span class="mh">0x7</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QP_PARAMS_RNR_RETRY_CNT_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_ACK_TIMEOUT_SHIFT</span>	<span class="o">=</span> <span class="mi">27</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_ACK_TIMEOUT_MASK</span>	<span class="o">=</span> <span class="mh">0x1F</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QP_PARAMS_ACK_TIMEOUT_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_QP_PARAMS_PKEY_IDNEX_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_PKEY_INDEX_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_PATH_MTU_SHIFT</span>		<span class="o">=</span> <span class="mi">18</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_PATH_MTU_MASK</span>		<span class="o">=</span> <span class="mh">0x3FFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QP_PARAMS_PATH_MTU_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_QP_PARAMS_FLOW_LABEL_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_FLOW_LABEL_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_SL_SHIFT</span>		<span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_SL_MASK</span>		<span class="o">=</span> <span class="mh">0xF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QP_PARAMS_SL_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_RETRY_CNT_SHIFT</span>	<span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_RETRY_CNT_MASK</span>		<span class="o">=</span> <span class="mh">0x7</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QP_PARAMS_RETRY_CNT_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_RNR_NAK_TIMER_SHIFT</span>	<span class="o">=</span> <span class="mi">27</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_RNR_NAK_TIMER_MASK</span>	<span class="o">=</span> <span class="mh">0x1F</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QP_PARAMS_RNR_NAK_TIMER_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_QP_PARAMS_DMAC_B4_TO_B5_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_DMAC_B4_TO_B5_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_VLAN_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_QP_PARAMS_VLAN_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QP_PARAMS_VLAN_SHIFT</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_qp_params</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">id</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_wqe_rqe</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_sge_send_write</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_sge_recv_flags</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_ord_ird</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">wq_rq_cqid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">hop_lmt_rq_psn</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tclass_sq_psn</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ack_to_rnr_rtc_dest_qpn</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">path_mtu_pkey_indx</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rnt_rc_sl_fl</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">sgid</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">dgid</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">dmac_b0_to_b3</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vlan_dmac_b4_to_b5</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">qkey</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>


<span class="k">struct</span> <span class="n">ocrdma_modify_qp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">ocrdma_qp_params</span> <span class="n">params</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rdma_flags</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_outstanding_atomic_rd</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_MODIFY_QP_RSP_MAX_RQE_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MODIFY_QP_RSP_MAX_RQE_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_MODIFY_QP_RSP_MAX_WQE_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_MODIFY_QP_RSP_MAX_WQE_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_MODIFY_QP_RSP_MAX_WQE_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_MODIFY_QP_RSP_MAX_IRD_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MODIFY_QP_RSP_MAX_IRD_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_MODIFY_QP_RSP_MAX_ORD_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_MODIFY_QP_RSP_MAX_ORD_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_MODIFY_QP_RSP_MAX_ORD_SHIFT</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">ocrdma_modify_qp_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">max_wqe_rqe</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_ord_ird</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_query_qp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>

<span class="cp">#define OCRDMA_QUERY_UP_QP_ID_SHIFT 0</span>
<span class="cp">#define OCRDMA_QUERY_UP_QP_ID_MASK   0xFFFFFF</span>
	<span class="n">u32</span> <span class="n">qp_id</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_query_qp_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_qp_params</span> <span class="n">params</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_CREATE_SRQ_PD_ID_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_SRQ_PD_ID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_SRQ_PG_SZ_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_SRQ_PG_SZ_MASK</span>		<span class="o">=</span> <span class="mh">0x3</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_CREATE_SRQ_PG_SZ_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_SRQ_MAX_RQE_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_SRQ_MAX_SGE_RECV_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_SRQ_MAX_SGE_RECV_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_CREATE_SRQ_MAX_SGE_RECV_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_SRQ_RQE_SIZE_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_SRQ_RQE_SIZE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_SRQ_NUM_RQ_PAGES_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_SRQ_NUM_RQ_PAGES_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_CREATE_SRQ_NUM_RQ_PAGES_SHIFT</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_create_srq</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">pgsz_pdid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_sge_rqe</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pages_rqe_sz</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_pa</span> <span class="n">rq_addr</span><span class="p">[</span><span class="n">MAX_OCRDMA_SRQ_PAGES</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_CREATE_SRQ_RSP_SRQ_ID_SHIFT</span>			<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_SRQ_RSP_SRQ_ID_MASK</span>			<span class="o">=</span> <span class="mh">0xFFFFFF</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_SRQ_RSP_MAX_RQE_ALLOCATED_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_SRQ_RSP_MAX_RQE_ALLOCATED_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_SRQ_RSP_MAX_SGE_RECV_ALLOCATED_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_SRQ_RSP_MAX_SGE_RECV_ALLOCATED_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
			<span class="n">OCRDMA_CREATE_SRQ_RSP_MAX_SGE_RECV_ALLOCATED_SHIFT</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_create_srq_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">id</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_sge_rqe_allocated</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_MODIFY_SRQ_ID_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MODIFY_SRQ_ID_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFFFF</span><span class="p">,</span>

	<span class="n">OCRDMA_MODIFY_SRQ_MAX_RQE_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_MODIFY_SRQ_MAX_RQE_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_MODIFY_SRQ_LIMIT_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_MODIFY_SRQ__LIMIT_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_MODIFY_SRQ_LIMIT_SHIFT</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_modify_srq</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rep</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">id</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">limit_max_rqe</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_QUERY_SRQ_ID_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QUERY_SRQ_ID_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFFFF</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_query_srq</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">req</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">id</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_QUERY_SRQ_RSP_PD_ID_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QUERY_SRQ_RSP_PD_ID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_QUERY_SRQ_RSP_MAX_RQE_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_QUERY_SRQ_RSP_MAX_RQE_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QUERY_SRQ_RSP_MAX_RQE_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_QUERY_SRQ_RSP_MAX_SGE_RECV_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_QUERY_SRQ_RSP_MAX_SGE_RECV_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_QUERY_SRQ_RSP_SRQ_LIMIT_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_QUERY_SRQ_RSP_SRQ_LIMIT_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_QUERY_SRQ_RSP_SRQ_LIMIT_SHIFT</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_query_srq_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">req</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">max_rqe_pdid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">srq_lmt_max_sge</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_DESTROY_SRQ_ID_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_DESTROY_SRQ_ID_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFFFF</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_destroy_srq</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">req</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">id</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_ALLOC_PD_ENABLE_DPP</span>	<span class="o">=</span> <span class="n">BIT</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>
	<span class="n">OCRDMA_PD_MAX_DPP_ENABLED_QP</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">OCRDMA_DPP_PAGE_SIZE</span>		<span class="o">=</span> <span class="mi">4096</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_alloc_pd</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">enable_dpp_rsvd</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_ALLOC_PD_RSP_DPP</span>			<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>
	<span class="n">OCRDMA_ALLOC_PD_RSP_DPP_PAGE_SHIFT</span>	<span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
	<span class="n">OCRDMA_ALLOC_PD_RSP_PDID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_alloc_pd_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dpp_page_pdid</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_dealloc_pd</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">id</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_dealloc_pd_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_ADDR_CHECK_ENABLE</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OCRDMA_ADDR_CHECK_DISABLE</span>	<span class="o">=</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_ALLOC_LKEY_PD_ID_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_ALLOC_LKEY_PD_ID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>

	<span class="n">OCRDMA_ALLOC_LKEY_ADDR_CHECK_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_ALLOC_LKEY_ADDR_CHECK_MASK</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
	<span class="n">OCRDMA_ALLOC_LKEY_FMR_SHIFT</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OCRDMA_ALLOC_LKEY_FMR_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
	<span class="n">OCRDMA_ALLOC_LKEY_REMOTE_INV_SHIFT</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">OCRDMA_ALLOC_LKEY_REMOTE_INV_MASK</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="n">OCRDMA_ALLOC_LKEY_REMOTE_WR_SHIFT</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">OCRDMA_ALLOC_LKEY_REMOTE_WR_MASK</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
	<span class="n">OCRDMA_ALLOC_LKEY_REMOTE_RD_SHIFT</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">OCRDMA_ALLOC_LKEY_REMOTE_RD_MASK</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
	<span class="n">OCRDMA_ALLOC_LKEY_LOCAL_WR_SHIFT</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">OCRDMA_ALLOC_LKEY_LOCAL_WR_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
	<span class="n">OCRDMA_ALLOC_LKEY_REMOTE_ATOMIC_MASK</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span>
	<span class="n">OCRDMA_ALLOC_LKEY_REMOTE_ATOMIC_SHIFT</span>	<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">OCRDMA_ALLOC_LKEY_PBL_SIZE_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_ALLOC_LKEY_PBL_SIZE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
						<span class="n">OCRDMA_ALLOC_LKEY_PBL_SIZE_SHIFT</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_alloc_lkey</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">pdid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pbl_sz_flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_alloc_lkey_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">lrkey</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_pbl_rsvd</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_dealloc_lkey</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">lkey</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rsvd_frmr</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_dealloc_lkey_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define MAX_OCRDMA_NSMR_PBL    (u32)22</span>
<span class="cp">#define MAX_OCRDMA_PBL_SIZE     65536</span>
<span class="cp">#define MAX_OCRDMA_PBL_PER_LKEY	32767</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_REG_NSMR_LRKEY_INDEX_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_LRKEY_INDEX_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_LRKEY_SHIFT</span>		<span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_LRKEY_MASK</span>		<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_REG_NSMR_LRKEY_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_REG_NSMR_PD_ID_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_PD_ID_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_NUM_PBL_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_NUM_PBL_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_REG_NSMR_NUM_PBL_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_REG_NSMR_PBE_SIZE_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_PBE_SIZE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_HPAGE_SIZE_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_HPAGE_SIZE_MASK</span>		<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_REG_NSMR_HPAGE_SIZE_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_BIND_MEMWIN_SHIFT</span>	<span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_BIND_MEMWIN_MASK</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span>
	<span class="n">OCRDMA_REG_NSMR_ZB_SHIFT</span>		<span class="o">=</span> <span class="mi">25</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_ZB_SHIFT_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">25</span><span class="p">),</span>
	<span class="n">OCRDMA_REG_NSMR_REMOTE_INV_SHIFT</span>	<span class="o">=</span> <span class="mi">26</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_REMOTE_INV_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">26</span><span class="p">),</span>
	<span class="n">OCRDMA_REG_NSMR_REMOTE_WR_SHIFT</span>		<span class="o">=</span> <span class="mi">27</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_REMOTE_WR_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">27</span><span class="p">),</span>
	<span class="n">OCRDMA_REG_NSMR_REMOTE_RD_SHIFT</span>		<span class="o">=</span> <span class="mi">28</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_REMOTE_RD_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">28</span><span class="p">),</span>
	<span class="n">OCRDMA_REG_NSMR_LOCAL_WR_SHIFT</span>		<span class="o">=</span> <span class="mi">29</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_LOCAL_WR_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">29</span><span class="p">),</span>
	<span class="n">OCRDMA_REG_NSMR_REMOTE_ATOMIC_SHIFT</span>	<span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_REMOTE_ATOMIC_MASK</span>	<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
	<span class="n">OCRDMA_REG_NSMR_LAST_SHIFT</span>		<span class="o">=</span> <span class="mi">31</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_LAST_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_reg_nsmr</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">cmd</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">lrkey_key_index</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_pbl_pdid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">flags_hpage_pbe_sz</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">totlen_low</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">totlen_high</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fbo_low</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fbo_high</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">va_loaddr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">va_hiaddr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_pa</span> <span class="n">pbl</span><span class="p">[</span><span class="n">MAX_OCRDMA_NSMR_PBL</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_REG_NSMR_CONT_PBL_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_CONT_PBL_SHIFT_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_CONT_NUM_PBL_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_CONT_NUM_PBL_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_REG_NSMR_CONT_NUM_PBL_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_REG_NSMR_CONT_LAST_SHIFT</span>		<span class="o">=</span> <span class="mi">31</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_CONT_LAST_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_reg_nsmr_cont</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">cmd</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">lrkey</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_pbl_offset</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">last</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">ocrdma_pa</span> <span class="n">pbl</span><span class="p">[</span><span class="n">MAX_OCRDMA_NSMR_PBL</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_pbe</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">pa_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pa_lo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_REG_NSMR_RSP_NUM_PBL_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_RSP_NUM_PBL_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF0000</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">ocrdma_reg_nsmr_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">lrkey</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_pbl</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_REG_NSMR_CONT_RSP_LRKEY_INDEX_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_CONT_RSP_LRKEY_INDEX_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFFFF</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_CONT_RSP_LRKEY_SHIFT</span>		<span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_CONT_RSP_LRKEY_MASK</span>		<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_REG_NSMR_CONT_RSP_LRKEY_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_REG_NSMR_CONT_RSP_NUM_PBL_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_REG_NSMR_CONT_RSP_NUM_PBL_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_REG_NSMR_CONT_RSP_NUM_PBL_SHIFT</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_reg_nsmr_cont_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">lrkey_key_index</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_pbl</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_ALLOC_MW_PD_ID_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_ALLOC_MW_PD_ID_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_alloc_mw</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">pdid</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_ALLOC_MW_RSP_LRKEY_INDEX_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_ALLOC_MW_RSP_LRKEY_INDEX_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFFFF</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_alloc_mw_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">lrkey_index</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_attach_mcast</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">qp_id</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">mgid</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">mac_b0_to_b3</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vlan_mac_b4_to_b5</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_attach_mcast_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_detach_mcast</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">qp_id</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">mgid</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">mac_b0_to_b3</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vlan_mac_b4_to_b5</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_detach_mcast_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_CREATE_AH_NUM_PAGES_SHIFT</span>	<span class="o">=</span> <span class="mi">19</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_AH_NUM_PAGES_MASK</span>		<span class="o">=</span> <span class="mh">0xF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_CREATE_AH_NUM_PAGES_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_AH_PAGE_SIZE_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_AH_PAGE_SIZE_MASK</span>		<span class="o">=</span> <span class="mh">0x7</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_CREATE_AH_PAGE_SIZE_SHIFT</span><span class="p">,</span>

	<span class="n">OCRDMA_CREATE_AH_ENTRY_SIZE_SHIFT</span>	<span class="o">=</span> <span class="mi">23</span><span class="p">,</span>
	<span class="n">OCRDMA_CREATE_AH_ENTRY_SIZE_MASK</span>	<span class="o">=</span> <span class="mh">0x1FF</span> <span class="o">&lt;&lt;</span>
					<span class="n">OCRDMA_CREATE_AH_ENTRY_SIZE_SHIFT</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define OCRDMA_AH_TBL_PAGES 8</span>

<span class="k">struct</span> <span class="n">ocrdma_create_ah_tbl</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">ah_conf</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_pa</span> <span class="n">tbl_addr</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_create_ah_tbl_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ahid</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_delete_ah_tbl</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_hdr</span> <span class="n">req</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ahid</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_delete_ah_tbl_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_mqe_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_mbx_rsp</span> <span class="n">rsp</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_EQE_VALID_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_EQE_VALID_MASK</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
	<span class="n">OCRDMA_EQE_FOR_CQE_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFE</span><span class="p">,</span>
	<span class="n">OCRDMA_EQE_RESOURCE_ID_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_EQE_RESOURCE_ID_MASK</span>	<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span>
				<span class="n">OCRDMA_EQE_RESOURCE_ID_SHIFT</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_eqe</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">id_valid</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="n">OCRDMA_CQE_STATUS</span> <span class="p">{</span>
	<span class="n">OCRDMA_CQE_SUCCESS</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_LOC_LEN_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_LOC_QP_OP_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_LOC_EEC_OP_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_LOC_PROT_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_WR_FLUSH_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_MW_BIND_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_BAD_RESP_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_LOC_ACCESS_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_REM_INV_REQ_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_REM_ACCESS_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_REM_OP_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_RETRY_EXC_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_RNR_RETRY_EXC_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_LOC_RDD_VIOL_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_REM_INV_RD_REQ_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_REM_ABORT_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_INV_EECN_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_INV_EEC_STATE_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_FATAL_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_RESP_TIMEOUT_ERR</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_GENERAL_ERR</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="cm">/* w0 */</span>
	<span class="n">OCRDMA_CQE_WQEIDX_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_WQEIDX_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>

	<span class="cm">/* w1 */</span>
	<span class="n">OCRDMA_CQE_UD_XFER_LEN_SHIFT</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_PKEY_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_PKEY_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span><span class="p">,</span>

	<span class="cm">/* w2 */</span>
	<span class="n">OCRDMA_CQE_QPN_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_QPN_MASK</span>		<span class="o">=</span> <span class="mh">0x0000FFFF</span><span class="p">,</span>

	<span class="n">OCRDMA_CQE_BUFTAG_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_BUFTAG_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span> <span class="n">OCRDMA_CQE_BUFTAG_SHIFT</span><span class="p">,</span>

	<span class="cm">/* w3 */</span>
	<span class="n">OCRDMA_CQE_UD_STATUS_SHIFT</span>	<span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_UD_STATUS_MASK</span>	<span class="o">=</span> <span class="mh">0x7</span> <span class="o">&lt;&lt;</span> <span class="n">OCRDMA_CQE_UD_STATUS_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_STATUS_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_STATUS_MASK</span>		<span class="o">=</span> <span class="mh">0xFF</span> <span class="o">&lt;&lt;</span> <span class="n">OCRDMA_CQE_STATUS_SHIFT</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_VALID</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">31</span><span class="p">),</span>
	<span class="n">OCRDMA_CQE_INVALIDATE</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
	<span class="n">OCRDMA_CQE_QTYPE</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">29</span><span class="p">),</span>
	<span class="n">OCRDMA_CQE_IMM</span>			<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">28</span><span class="p">),</span>
	<span class="n">OCRDMA_CQE_WRITE_IMM</span>		<span class="o">=</span> <span class="n">Bit</span><span class="p">(</span><span class="mi">27</span><span class="p">),</span>
	<span class="n">OCRDMA_CQE_QTYPE_SQ</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_QTYPE_RQ</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OCRDMA_CQE_SRCQP_MASK</span>		<span class="o">=</span> <span class="mh">0xFFFFFF</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ocrdma_cqe</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="cm">/* w0 to w2 */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u32</span> <span class="n">wqeidx</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">bytes_xfered</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">qpn</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">wq</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u32</span> <span class="n">lkey_immdt</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">rxlen</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">buftag_qpn</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">rq</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u32</span> <span class="n">lkey_immdt</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">rxlen_pkey</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">buftag_qpn</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">ud</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u32</span> <span class="n">word_0</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">word_1</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">qpn</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">cmn</span><span class="p">;</span>
	<span class="p">};</span>
	<span class="n">u32</span> <span class="n">flags_status_srcqpn</span><span class="p">;</span>	<span class="cm">/* w3 */</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define is_cqe_valid(cq, cqe) \</span>
<span class="cp">	(((le32_to_cpu(cqe-&gt;flags_status_srcqpn) &amp; OCRDMA_CQE_VALID)\</span>
<span class="cp">	== cq-&gt;phase) ? 1 : 0)</span>
<span class="cp">#define is_cqe_for_sq(cqe) \</span>
<span class="cp">	((le32_to_cpu(cqe-&gt;flags_status_srcqpn) &amp; OCRDMA_CQE_QTYPE) ? 0 : 1)</span>
<span class="cp">#define is_cqe_for_rq(cqe) \</span>
<span class="cp">	((le32_to_cpu(cqe-&gt;flags_status_srcqpn) &amp; OCRDMA_CQE_QTYPE) ? 1 : 0)</span>
<span class="cp">#define is_cqe_invalidated(cqe) \</span>
<span class="cp">	((le32_to_cpu(cqe-&gt;flags_status_srcqpn) &amp; OCRDMA_CQE_INVALIDATE) ? \</span>
<span class="cp">	1 : 0)</span>
<span class="cp">#define is_cqe_imm(cqe) \</span>
<span class="cp">	((le32_to_cpu(cqe-&gt;flags_status_srcqpn) &amp; OCRDMA_CQE_IMM) ? 1 : 0)</span>
<span class="cp">#define is_cqe_wr_imm(cqe) \</span>
<span class="cp">	((le32_to_cpu(cqe-&gt;flags_status_srcqpn) &amp; OCRDMA_CQE_WRITE_IMM) ? 1 : 0)</span>

<span class="k">struct</span> <span class="n">ocrdma_sge</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">addr_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">addr_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">lrkey</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">len</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_FLAG_SIG</span>		<span class="o">=</span> <span class="mh">0x1</span><span class="p">,</span>
	<span class="n">OCRDMA_FLAG_INV</span>		<span class="o">=</span> <span class="mh">0x2</span><span class="p">,</span>
	<span class="n">OCRDMA_FLAG_FENCE_L</span>	<span class="o">=</span> <span class="mh">0x4</span><span class="p">,</span>
	<span class="n">OCRDMA_FLAG_FENCE_R</span>	<span class="o">=</span> <span class="mh">0x8</span><span class="p">,</span>
	<span class="n">OCRDMA_FLAG_SOLICIT</span>	<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
	<span class="n">OCRDMA_FLAG_IMM</span>		<span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span>

	<span class="cm">/* Stag flags */</span>
	<span class="n">OCRDMA_LKEY_FLAG_LOCAL_WR</span>	<span class="o">=</span> <span class="mh">0x1</span><span class="p">,</span>
	<span class="n">OCRDMA_LKEY_FLAG_REMOTE_RD</span>	<span class="o">=</span> <span class="mh">0x2</span><span class="p">,</span>
	<span class="n">OCRDMA_LKEY_FLAG_REMOTE_WR</span>	<span class="o">=</span> <span class="mh">0x4</span><span class="p">,</span>
	<span class="n">OCRDMA_LKEY_FLAG_VATO</span>		<span class="o">=</span> <span class="mh">0x8</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">OCRDMA_WQE_OPCODE</span> <span class="p">{</span>
	<span class="n">OCRDMA_WRITE</span>		<span class="o">=</span> <span class="mh">0x06</span><span class="p">,</span>
	<span class="n">OCRDMA_READ</span>		<span class="o">=</span> <span class="mh">0x0C</span><span class="p">,</span>
	<span class="n">OCRDMA_RESV0</span>		<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">OCRDMA_SEND</span>		<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">OCRDMA_CMP_SWP</span>		<span class="o">=</span> <span class="mh">0x14</span><span class="p">,</span>
	<span class="n">OCRDMA_BIND_MW</span>		<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
	<span class="n">OCRDMA_RESV1</span>		<span class="o">=</span> <span class="mh">0x0A</span><span class="p">,</span>
	<span class="n">OCRDMA_LKEY_INV</span>		<span class="o">=</span> <span class="mh">0x15</span><span class="p">,</span>
	<span class="n">OCRDMA_FETCH_ADD</span>	<span class="o">=</span> <span class="mh">0x13</span><span class="p">,</span>
	<span class="n">OCRDMA_POST_RQ</span>		<span class="o">=</span> <span class="mh">0x12</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_TYPE_INLINE</span>	<span class="o">=</span> <span class="mh">0x0</span><span class="p">,</span>
	<span class="n">OCRDMA_TYPE_LKEY</span>	<span class="o">=</span> <span class="mh">0x1</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">OCRDMA_WQE_OPCODE_SHIFT</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_WQE_OPCODE_MASK</span>		<span class="o">=</span> <span class="mh">0x0000001F</span><span class="p">,</span>
	<span class="n">OCRDMA_WQE_FLAGS_SHIFT</span>		<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">OCRDMA_WQE_TYPE_SHIFT</span>		<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">OCRDMA_WQE_TYPE_MASK</span>		<span class="o">=</span> <span class="mh">0x00030000</span><span class="p">,</span>
	<span class="n">OCRDMA_WQE_SIZE_SHIFT</span>		<span class="o">=</span> <span class="mi">18</span><span class="p">,</span>
	<span class="n">OCRDMA_WQE_SIZE_MASK</span>		<span class="o">=</span> <span class="mh">0xFF</span><span class="p">,</span>
	<span class="n">OCRDMA_WQE_NXT_WQE_SIZE_SHIFT</span>	<span class="o">=</span> <span class="mi">25</span><span class="p">,</span>

	<span class="n">OCRDMA_WQE_LKEY_FLAGS_SHIFT</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OCRDMA_WQE_LKEY_FLAGS_MASK</span>	<span class="o">=</span> <span class="mh">0xF</span>
<span class="p">};</span>

<span class="cm">/* header WQE for all the SQ and RQ operations */</span>
<span class="k">struct</span> <span class="n">ocrdma_hdr_wqe</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">cw</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="n">u32</span> <span class="n">rsvd_tag</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">rsvd_lkey_flags</span><span class="p">;</span>
	<span class="p">};</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="n">u32</span> <span class="n">immdt</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">lkey</span><span class="p">;</span>
	<span class="p">};</span>
	<span class="n">u32</span> <span class="n">total_len</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_ewqe_ud_hdr</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">rsvd_dest_qpn</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">qkey</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rsvd_ahid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rsvd</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_eth_basic</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">dmac</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">smac</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">__be16</span> <span class="n">eth_type</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_eth_vlan</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">dmac</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">smac</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">__be16</span> <span class="n">eth_type</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">vlan_tag</span><span class="p">;</span>
<span class="cp">#define OCRDMA_ROCE_ETH_TYPE 0x8915</span>
	<span class="n">__be16</span> <span class="n">roce_eth_type</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ocrdma_grh</span> <span class="p">{</span>
	<span class="n">__be32</span>	<span class="n">tclass_flow</span><span class="p">;</span>
	<span class="n">__be32</span>	<span class="n">pdid_hoplimit</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">sgid</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">dgid</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">u16</span>	<span class="n">rsvd</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define OCRDMA_AV_VALID		Bit(0)</span>
<span class="cp">#define OCRDMA_AV_VLAN_VALID	Bit(1)</span>

<span class="k">struct</span> <span class="n">ocrdma_av</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ocrdma_eth_vlan</span> <span class="n">eth_hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ocrdma_grh</span> <span class="n">grh</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">valid</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#endif				</span><span class="cm">/* __OCRDMA_SLI_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
