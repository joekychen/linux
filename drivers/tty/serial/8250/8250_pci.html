<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › tty › serial › 8250 › 8250_pci.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>8250_pci.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  Probe module for 8250/16550-type PCI serial ports.</span>
<span class="cm"> *</span>
<span class="cm"> *  Based on drivers/char/serial.c, by Linus Torvalds, Theodore Ts&#39;o.</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright (C) 2001 Russell King, All Rights Reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License.</span>
<span class="cm"> */</span>
<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/pci.h&gt;</span>
<span class="cp">#include &lt;linux/string.h&gt;</span>
<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/slab.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;linux/tty.h&gt;</span>
<span class="cp">#include &lt;linux/serial_reg.h&gt;</span>
<span class="cp">#include &lt;linux/serial_core.h&gt;</span>
<span class="cp">#include &lt;linux/8250_pci.h&gt;</span>
<span class="cp">#include &lt;linux/bitops.h&gt;</span>

<span class="cp">#include &lt;asm/byteorder.h&gt;</span>
<span class="cp">#include &lt;asm/io.h&gt;</span>

<span class="cp">#include &quot;8250.h&quot;</span>

<span class="cp">#undef SERIAL_DEBUG_PCI</span>

<span class="cm">/*</span>
<span class="cm"> * init function returns:</span>
<span class="cm"> *  &gt; 0 - number of ports</span>
<span class="cm"> *  = 0 - use board-&gt;num_ports</span>
<span class="cm"> *  &lt; 0 - error</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">pci_serial_quirk</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">vendor</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">device</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">subvendor</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">subdevice</span><span class="p">;</span>
	<span class="kt">int</span>	<span class="p">(</span><span class="o">*</span><span class="n">probe</span><span class="p">)(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
	<span class="kt">int</span>	<span class="p">(</span><span class="o">*</span><span class="n">init</span><span class="p">)(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
	<span class="kt">int</span>	<span class="p">(</span><span class="o">*</span><span class="n">setup</span><span class="p">)(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="p">,</span>
			 <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="p">,</span>
			 <span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
	<span class="kt">void</span>	<span class="p">(</span><span class="o">*</span><span class="n">exit</span><span class="p">)(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#define PCI_NUM_BAR_RESOURCES	6</span>

<span class="k">struct</span> <span class="n">serial_private</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">pci_dev</span>		<span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">nr</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span>		<span class="o">*</span><span class="n">remapped_bar</span><span class="p">[</span><span class="n">PCI_NUM_BAR_RESOURCES</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">pci_serial_quirk</span>	<span class="o">*</span><span class="n">quirk</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">pci_default_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span><span class="o">*</span><span class="p">,</span>
	  <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span><span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">uart_port</span><span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">moan_device</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">,</span> <span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_WARNING</span>
	       <span class="s">&quot;%s: %s</span><span class="se">\n</span><span class="s">&quot;</span>
	       <span class="s">&quot;Please send the output of lspci -vv, this</span><span class="se">\n</span><span class="s">&quot;</span>
	       <span class="s">&quot;message (0x%04x,0x%04x,0x%04x,0x%04x), the</span><span class="se">\n</span><span class="s">&quot;</span>
	       <span class="s">&quot;manufacturer and name of serial board or</span><span class="se">\n</span><span class="s">&quot;</span>
	       <span class="s">&quot;modem board to rmk+serial@arm.linux.org.uk.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
	       <span class="n">pci_name</span><span class="p">(</span><span class="n">dev</span><span class="p">),</span> <span class="n">str</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">vendor</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">device</span><span class="p">,</span>
	       <span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_vendor</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_device</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span>
<span class="nf">setup_port</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span>
	   <span class="kt">int</span> <span class="n">bar</span><span class="p">,</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">,</span> <span class="kt">int</span> <span class="n">regshift</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">base</span><span class="p">,</span> <span class="n">len</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">bar</span> <span class="o">&gt;=</span> <span class="n">PCI_NUM_BAR_RESOURCES</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="n">base</span> <span class="o">=</span> <span class="n">pci_resource_start</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">pci_resource_flags</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">IORESOURCE_MEM</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">len</span> <span class="o">=</span>  <span class="n">pci_resource_len</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">remapped_bar</span><span class="p">[</span><span class="n">bar</span><span class="p">])</span>
			<span class="n">priv</span><span class="o">-&gt;</span><span class="n">remapped_bar</span><span class="p">[</span><span class="n">bar</span><span class="p">]</span> <span class="o">=</span> <span class="n">ioremap_nocache</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">remapped_bar</span><span class="p">[</span><span class="n">bar</span><span class="p">])</span>
			<span class="k">return</span> <span class="o">-</span><span class="n">ENOMEM</span><span class="p">;</span>

		<span class="n">port</span><span class="o">-&gt;</span><span class="n">iotype</span> <span class="o">=</span> <span class="n">UPIO_MEM</span><span class="p">;</span>
		<span class="n">port</span><span class="o">-&gt;</span><span class="n">iobase</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">port</span><span class="o">-&gt;</span><span class="n">mapbase</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="n">offset</span><span class="p">;</span>
		<span class="n">port</span><span class="o">-&gt;</span><span class="n">membase</span> <span class="o">=</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">remapped_bar</span><span class="p">[</span><span class="n">bar</span><span class="p">]</span> <span class="o">+</span> <span class="n">offset</span><span class="p">;</span>
		<span class="n">port</span><span class="o">-&gt;</span><span class="n">regshift</span> <span class="o">=</span> <span class="n">regshift</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">port</span><span class="o">-&gt;</span><span class="n">iotype</span> <span class="o">=</span> <span class="n">UPIO_PORT</span><span class="p">;</span>
		<span class="n">port</span><span class="o">-&gt;</span><span class="n">iobase</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="n">offset</span><span class="p">;</span>
		<span class="n">port</span><span class="o">-&gt;</span><span class="n">mapbase</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">port</span><span class="o">-&gt;</span><span class="n">membase</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
		<span class="n">port</span><span class="o">-&gt;</span><span class="n">regshift</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * ADDI-DATA GmbH communication cards &lt;info@addi-data.com&gt;</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">addidata_apci7800_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
				<span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">offset</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">first_offset</span><span class="p">;</span>
	<span class="n">bar</span> <span class="o">=</span> <span class="n">FL_GET_BASE</span><span class="p">(</span><span class="n">board</span><span class="o">-&gt;</span><span class="n">flags</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">offset</span> <span class="o">+=</span> <span class="n">idx</span> <span class="o">*</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">uart_offset</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">idx</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">bar</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">offset</span> <span class="o">+=</span> <span class="p">((</span><span class="n">idx</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">uart_offset</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">idx</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">bar</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span>
		<span class="n">offset</span> <span class="o">+=</span> <span class="p">((</span><span class="n">idx</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">uart_offset</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&gt;=</span> <span class="mi">6</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">bar</span> <span class="o">+=</span> <span class="mi">3</span><span class="p">;</span>
		<span class="n">offset</span> <span class="o">+=</span> <span class="p">((</span><span class="n">idx</span> <span class="o">-</span> <span class="mi">6</span><span class="p">)</span> <span class="o">*</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">uart_offset</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">setup_port</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">reg_shift</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * AFAVLAB uses a different mixture of BARs and offsets</span>
<span class="cm"> * Not that ugly ;) -- HW</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span>
<span class="nf">afavlab_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
	      <span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bar</span><span class="p">,</span> <span class="n">offset</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">first_offset</span><span class="p">;</span>

	<span class="n">bar</span> <span class="o">=</span> <span class="n">FL_GET_BASE</span><span class="p">(</span><span class="n">board</span><span class="o">-&gt;</span><span class="n">flags</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">)</span>
		<span class="n">bar</span> <span class="o">+=</span> <span class="n">idx</span><span class="p">;</span>
	<span class="k">else</span> <span class="p">{</span>
		<span class="n">bar</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
		<span class="n">offset</span> <span class="o">+=</span> <span class="p">(</span><span class="n">idx</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">uart_offset</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">setup_port</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">reg_shift</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * HP&#39;s Remote Management Console.  The Diva chip came in several</span>
<span class="cm"> * different versions.  N-class, L2000 and A500 have two Diva chips, each</span>
<span class="cm"> * with 3 UARTs (the third UART on the second chip is unused).  Superdome</span>
<span class="cm"> * and Keystone have one Diva chip with 3 UARTs.  Some later machines have</span>
<span class="cm"> * one Diva chip, but it has been expanded to 5 UARTs.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_hp_diva_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">rc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_device</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">PCI_DEVICE_ID_HP_DIVA_TOSCA1</span>:
	<span class="k">case</span> <span class="n">PCI_DEVICE_ID_HP_DIVA_HALFDOME</span>:
	<span class="k">case</span> <span class="n">PCI_DEVICE_ID_HP_DIVA_KEYSTONE</span>:
	<span class="k">case</span> <span class="n">PCI_DEVICE_ID_HP_DIVA_EVEREST</span>:
		<span class="n">rc</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">PCI_DEVICE_ID_HP_DIVA_TOSCA2</span>:
		<span class="n">rc</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">PCI_DEVICE_ID_HP_DIVA_MAESTRO</span>:
		<span class="n">rc</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">PCI_DEVICE_ID_HP_DIVA_POWERBAR</span>:
	<span class="k">case</span> <span class="n">PCI_DEVICE_ID_HP_DIVA_HURRICANE</span>:
		<span class="n">rc</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">rc</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * HP&#39;s Diva chip puts the 4th/5th serial port further out, and</span>
<span class="cm"> * some serial ports are supposed to be hidden on certain models.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span>
<span class="nf">pci_hp_diva_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
		<span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">first_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bar</span> <span class="o">=</span> <span class="n">FL_GET_BASE</span><span class="p">(</span><span class="n">board</span><span class="o">-&gt;</span><span class="n">flags</span><span class="p">);</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_device</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">PCI_DEVICE_ID_HP_DIVA_MAESTRO</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span>
			<span class="n">idx</span><span class="o">++</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">PCI_DEVICE_ID_HP_DIVA_EVEREST</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
			<span class="n">idx</span><span class="o">++</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span>
			<span class="n">idx</span><span class="o">++</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span>
		<span class="n">offset</span> <span class="o">=</span> <span class="mh">0x18</span><span class="p">;</span>

	<span class="n">offset</span> <span class="o">+=</span> <span class="n">idx</span> <span class="o">*</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">uart_offset</span><span class="p">;</span>

	<span class="k">return</span> <span class="n">setup_port</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">reg_shift</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Added for EKF Intel i960 serial boards</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_inteli960ni_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">oldval</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_device</span> <span class="o">&amp;</span> <span class="mh">0x1000</span><span class="p">))</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>

	<span class="cm">/* is firmware started? */</span>
	<span class="n">pci_read_config_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">oldval</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">oldval</span> <span class="o">==</span> <span class="mh">0x00001000L</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* RESET value */</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_DEBUG</span> <span class="s">&quot;Local i960 firmware missing&quot;</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Some PCI serial cards using the PLX 9050 PCI interface chip require</span>
<span class="cm"> * that the card interrupt be explicitly enabled or disabled.  This</span>
<span class="cm"> * seems to be mainly needed on card using the PLX which also use I/O</span>
<span class="cm"> * mapped memory.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_plx9050_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u8</span> <span class="n">irq_config</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">pci_resource_flags</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">IORESOURCE_MEM</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">moan_device</span><span class="p">(</span><span class="s">&quot;no memory in bar 0&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="p">);</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">irq_config</span> <span class="o">=</span> <span class="mh">0x41</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">vendor</span> <span class="o">==</span> <span class="n">PCI_VENDOR_ID_PANACOM</span> <span class="o">||</span>
	    <span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_vendor</span> <span class="o">==</span> <span class="n">PCI_SUBVENDOR_ID_EXSYS</span><span class="p">)</span>
		<span class="n">irq_config</span> <span class="o">=</span> <span class="mh">0x43</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">vendor</span> <span class="o">==</span> <span class="n">PCI_VENDOR_ID_PLX</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	    <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">device</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_PLX_ROMULUS</span><span class="p">))</span>
		<span class="cm">/*</span>
<span class="cm">		 * As the megawolf cards have the int pins active</span>
<span class="cm">		 * high, and have 2 UART chips, both ints must be</span>
<span class="cm">		 * enabled on the 9050. Also, the UARTS are set in</span>
<span class="cm">		 * 16450 mode by default, so we have to enable the</span>
<span class="cm">		 * 16C950 &#39;enhanced&#39; mode so that we can use the</span>
<span class="cm">		 * deep FIFOs</span>
<span class="cm">		 */</span>
		<span class="n">irq_config</span> <span class="o">=</span> <span class="mh">0x5b</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * enable/disable interrupts</span>
<span class="cm">	 */</span>
	<span class="n">p</span> <span class="o">=</span> <span class="n">ioremap_nocache</span><span class="p">(</span><span class="n">pci_resource_start</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mh">0x80</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENOMEM</span><span class="p">;</span>
	<span class="n">writel</span><span class="p">(</span><span class="n">irq_config</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="mh">0x4c</span><span class="p">);</span>

	<span class="cm">/*</span>
<span class="cm">	 * Read the register back to ensure that it took effect.</span>
<span class="cm">	 */</span>
	<span class="n">readl</span><span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="mh">0x4c</span><span class="p">);</span>
	<span class="n">iounmap</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__devexit</span> <span class="nf">pci_plx9050_exit</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u8</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">pci_resource_flags</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">IORESOURCE_MEM</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * disable interrupts</span>
<span class="cm">	 */</span>
	<span class="n">p</span> <span class="o">=</span> <span class="n">ioremap_nocache</span><span class="p">(</span><span class="n">pci_resource_start</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mh">0x80</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">writel</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="mh">0x4c</span><span class="p">);</span>

		<span class="cm">/*</span>
<span class="cm">		 * Read the register back to ensure that it took effect.</span>
<span class="cm">		 */</span>
		<span class="n">readl</span><span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="mh">0x4c</span><span class="p">);</span>
		<span class="n">iounmap</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cp">#define NI8420_INT_ENABLE_REG	0x38</span>
<span class="cp">#define NI8420_INT_ENABLE_BIT	0x2000</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__devexit</span> <span class="nf">pci_ni8420_exit</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">base</span><span class="p">,</span> <span class="n">len</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">pci_resource_flags</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">IORESOURCE_MEM</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">moan_device</span><span class="p">(</span><span class="s">&quot;no memory in bar&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">base</span> <span class="o">=</span> <span class="n">pci_resource_start</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">);</span>
	<span class="n">len</span> <span class="o">=</span>  <span class="n">pci_resource_len</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">);</span>
	<span class="n">p</span> <span class="o">=</span> <span class="n">ioremap_nocache</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="cm">/* Disable the CPU Interrupt */</span>
	<span class="n">writel</span><span class="p">(</span><span class="n">readl</span><span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="n">NI8420_INT_ENABLE_REG</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">~</span><span class="p">(</span><span class="n">NI8420_INT_ENABLE_BIT</span><span class="p">),</span>
	       <span class="n">p</span> <span class="o">+</span> <span class="n">NI8420_INT_ENABLE_REG</span><span class="p">);</span>
	<span class="n">iounmap</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<span class="p">}</span>


<span class="cm">/* MITE registers */</span>
<span class="cp">#define MITE_IOWBSR1	0xc4</span>
<span class="cp">#define MITE_IOWCR1	0xf4</span>
<span class="cp">#define MITE_LCIMR1	0x08</span>
<span class="cp">#define MITE_LCIMR2	0x10</span>

<span class="cp">#define MITE_LCIMR2_CLR_CPU_IE	(1 &lt;&lt; 30)</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__devexit</span> <span class="nf">pci_ni8430_exit</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">base</span><span class="p">,</span> <span class="n">len</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">pci_resource_flags</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">IORESOURCE_MEM</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">moan_device</span><span class="p">(</span><span class="s">&quot;no memory in bar&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">base</span> <span class="o">=</span> <span class="n">pci_resource_start</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">);</span>
	<span class="n">len</span> <span class="o">=</span>  <span class="n">pci_resource_len</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">);</span>
	<span class="n">p</span> <span class="o">=</span> <span class="n">ioremap_nocache</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="cm">/* Disable the CPU Interrupt */</span>
	<span class="n">writel</span><span class="p">(</span><span class="n">MITE_LCIMR2_CLR_CPU_IE</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="n">MITE_LCIMR2</span><span class="p">);</span>
	<span class="n">iounmap</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* SBS Technologies Inc. PMC-OCTPRO and P-OCTAL cards */</span>
<span class="k">static</span> <span class="kt">int</span>
<span class="nf">sbs_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bar</span><span class="p">,</span> <span class="n">offset</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">first_offset</span><span class="p">;</span>

	<span class="n">bar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* first four channels map to 0, 0x100, 0x200, 0x300 */</span>
		<span class="n">offset</span> <span class="o">+=</span> <span class="n">idx</span> <span class="o">*</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">uart_offset</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* last four channels map to 0x1000, 0x1100, 0x1200, 0x1300 */</span>
		<span class="n">offset</span> <span class="o">+=</span> <span class="n">idx</span> <span class="o">*</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">uart_offset</span> <span class="o">+</span> <span class="mh">0xC00</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="cm">/* we have only 8 ports on PMC-OCTALPRO */</span>
		<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>

	<span class="k">return</span> <span class="n">setup_port</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">reg_shift</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">* This does initialization for PMC OCTALPRO cards:</span>
<span class="cm">* maps the device memory, resets the UARTs (needed, bc</span>
<span class="cm">* if the module is removed and inserted again, the card</span>
<span class="cm">* is in the sleep mode) and enables global interrupt.</span>
<span class="cm">*/</span>

<span class="cm">/* global control register offset for SBS PMC-OctalPro */</span>
<span class="cp">#define OCT_REG_CR_OFF		0x500</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">sbs_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u8</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>

	<span class="n">p</span> <span class="o">=</span> <span class="n">pci_ioremap_bar</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENOMEM</span><span class="p">;</span>
	<span class="cm">/* Set bit-4 Control Register (UART RESET) in to reset the uarts */</span>
	<span class="n">writeb</span><span class="p">(</span><span class="mh">0x10</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="n">OCT_REG_CR_OFF</span><span class="p">);</span>
	<span class="n">udelay</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
	<span class="n">writeb</span><span class="p">(</span><span class="mh">0x0</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="n">OCT_REG_CR_OFF</span><span class="p">);</span>

	<span class="cm">/* Set bit-2 (INTENABLE) of Control Register */</span>
	<span class="n">writeb</span><span class="p">(</span><span class="mh">0x4</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="n">OCT_REG_CR_OFF</span><span class="p">);</span>
	<span class="n">iounmap</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Disables the global interrupt of PMC-OctalPro</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__devexit</span> <span class="nf">sbs_exit</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u8</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>

	<span class="n">p</span> <span class="o">=</span> <span class="n">pci_ioremap_bar</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* FIXME: What if resource_len &lt; OCT_REG_CR_OFF */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
		<span class="n">writeb</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="n">OCT_REG_CR_OFF</span><span class="p">);</span>
	<span class="n">iounmap</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * SIIG serial cards have an PCI interface chip which also controls</span>
<span class="cm"> * the UART clocking frequency. Each UART can be clocked independently</span>
<span class="cm"> * (except cards equipped with 4 UARTs) and initial clocking settings</span>
<span class="cm"> * are stored in the EEPROM chip. It can cause problems because this</span>
<span class="cm"> * version of serial driver doesn&#39;t support differently clocked UART&#39;s</span>
<span class="cm"> * on single PCI card. To prevent this, initialization functions set</span>
<span class="cm"> * high frequency clocking for all UART&#39;s on given card. It is safe (I</span>
<span class="cm"> * hope) because it doesn&#39;t touch EEPROM settings to prevent conflicts</span>
<span class="cm"> * with other OSes (like M$ DOS).</span>
<span class="cm"> *</span>
<span class="cm"> *  SIIG support added by Andrey Panin &lt;pazke@donpac.ru&gt;, 10/1999</span>
<span class="cm"> *</span>
<span class="cm"> * There is two family of SIIG serial cards with different PCI</span>
<span class="cm"> * interface chip and different configuration methods:</span>
<span class="cm"> *     - 10x cards have control registers in IO and/or memory space;</span>
<span class="cm"> *     - 20x cards have control registers in standard PCI configuration space.</span>
<span class="cm"> *</span>
<span class="cm"> * Note: all 10x cards have PCI device ids 0x10..</span>
<span class="cm"> *       all 20x cards have PCI device ids 0x20..</span>
<span class="cm"> *</span>
<span class="cm"> * There are also Quartet Serial cards which use Oxford Semiconductor</span>
<span class="cm"> * 16954 quad UART PCI chip clocked by 18.432 MHz quartz.</span>
<span class="cm"> *</span>
<span class="cm"> * Note: some SIIG cards are probed by the parport_serial object.</span>
<span class="cm"> */</span>

<span class="cp">#define PCI_DEVICE_ID_SIIG_1S_10x (PCI_DEVICE_ID_SIIG_1S_10x_550 &amp; 0xfffc)</span>
<span class="cp">#define PCI_DEVICE_ID_SIIG_2S_10x (PCI_DEVICE_ID_SIIG_2S_10x_550 &amp; 0xfff8)</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_siig10x_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u16</span> <span class="n">data</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">device</span> <span class="o">&amp;</span> <span class="mh">0xfff8</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">PCI_DEVICE_ID_SIIG_1S_10x</span>:	<span class="cm">/* 1S */</span>
		<span class="n">data</span> <span class="o">=</span> <span class="mh">0xffdf</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">PCI_DEVICE_ID_SIIG_2S_10x</span>:	<span class="cm">/* 2S, 2S1P */</span>
		<span class="n">data</span> <span class="o">=</span> <span class="mh">0xf7ff</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>			<span class="cm">/* 1S1P, 4S */</span>
		<span class="n">data</span> <span class="o">=</span> <span class="mh">0xfffb</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">p</span> <span class="o">=</span> <span class="n">ioremap_nocache</span><span class="p">(</span><span class="n">pci_resource_start</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mh">0x80</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENOMEM</span><span class="p">;</span>

	<span class="n">writew</span><span class="p">(</span><span class="n">readw</span><span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="mh">0x28</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">data</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="mh">0x28</span><span class="p">);</span>
	<span class="n">readw</span><span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="mh">0x28</span><span class="p">);</span>
	<span class="n">iounmap</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#define PCI_DEVICE_ID_SIIG_2S_20x (PCI_DEVICE_ID_SIIG_2S_20x_550 &amp; 0xfffc)</span>
<span class="cp">#define PCI_DEVICE_ID_SIIG_2S1P_20x (PCI_DEVICE_ID_SIIG_2S1P_20x_550 &amp; 0xfffc)</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_siig20x_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u8</span> <span class="n">data</span><span class="p">;</span>

	<span class="cm">/* Change clock frequency for the first UART. */</span>
	<span class="n">pci_read_config_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">data</span><span class="p">);</span>
	<span class="n">pci_write_config_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x6f</span><span class="p">,</span> <span class="n">data</span> <span class="o">&amp;</span> <span class="mh">0xef</span><span class="p">);</span>

	<span class="cm">/* If this card has 2 UART, we have to do the same with second UART. */</span>
	<span class="k">if</span> <span class="p">(((</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">device</span> <span class="o">&amp;</span> <span class="mh">0xfffc</span><span class="p">)</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_SIIG_2S_20x</span><span class="p">)</span> <span class="o">||</span>
	    <span class="p">((</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">device</span> <span class="o">&amp;</span> <span class="mh">0xfffc</span><span class="p">)</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_SIIG_2S1P_20x</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">pci_read_config_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">data</span><span class="p">);</span>
		<span class="n">pci_write_config_byte</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="n">data</span> <span class="o">&amp;</span> <span class="mh">0xef</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_siig_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">type</span> <span class="o">=</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">device</span> <span class="o">&amp;</span> <span class="mh">0xff00</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">type</span> <span class="o">==</span> <span class="mh">0x1000</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">pci_siig10x_init</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">type</span> <span class="o">==</span> <span class="mh">0x2000</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">pci_siig20x_init</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">moan_device</span><span class="p">(</span><span class="s">&quot;Unknown SIIG card&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="p">);</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_siig_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			  <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
			  <span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bar</span> <span class="o">=</span> <span class="n">FL_GET_BASE</span><span class="p">(</span><span class="n">board</span><span class="o">-&gt;</span><span class="n">flags</span><span class="p">)</span> <span class="o">+</span> <span class="n">idx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">bar</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
		<span class="n">offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">idx</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="mi">8</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">setup_port</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Timedia has an explosion of boards, and to avoid the PCI table from</span>
<span class="cm"> * growing *huge*, we use this function to collapse some 70 entries</span>
<span class="cm"> * in the PCI table into one, for sanity&#39;s and compactness&#39;s sake.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">timedia_single_port</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x4025</span><span class="p">,</span> <span class="mh">0x4027</span><span class="p">,</span> <span class="mh">0x4028</span><span class="p">,</span> <span class="mh">0x5025</span><span class="p">,</span> <span class="mh">0x5027</span><span class="p">,</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">timedia_dual_port</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x0002</span><span class="p">,</span> <span class="mh">0x4036</span><span class="p">,</span> <span class="mh">0x4037</span><span class="p">,</span> <span class="mh">0x4038</span><span class="p">,</span> <span class="mh">0x4078</span><span class="p">,</span> <span class="mh">0x4079</span><span class="p">,</span> <span class="mh">0x4085</span><span class="p">,</span>
	<span class="mh">0x4088</span><span class="p">,</span> <span class="mh">0x4089</span><span class="p">,</span> <span class="mh">0x5037</span><span class="p">,</span> <span class="mh">0x5078</span><span class="p">,</span> <span class="mh">0x5079</span><span class="p">,</span> <span class="mh">0x5085</span><span class="p">,</span> <span class="mh">0x6079</span><span class="p">,</span>
	<span class="mh">0x7079</span><span class="p">,</span> <span class="mh">0x8079</span><span class="p">,</span> <span class="mh">0x8137</span><span class="p">,</span> <span class="mh">0x8138</span><span class="p">,</span> <span class="mh">0x8237</span><span class="p">,</span> <span class="mh">0x8238</span><span class="p">,</span> <span class="mh">0x9079</span><span class="p">,</span>
	<span class="mh">0x9137</span><span class="p">,</span> <span class="mh">0x9138</span><span class="p">,</span> <span class="mh">0x9237</span><span class="p">,</span> <span class="mh">0x9238</span><span class="p">,</span> <span class="mh">0xA079</span><span class="p">,</span> <span class="mh">0xB079</span><span class="p">,</span> <span class="mh">0xC079</span><span class="p">,</span>
	<span class="mh">0xD079</span><span class="p">,</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">timedia_quad_port</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x4055</span><span class="p">,</span> <span class="mh">0x4056</span><span class="p">,</span> <span class="mh">0x4095</span><span class="p">,</span> <span class="mh">0x4096</span><span class="p">,</span> <span class="mh">0x5056</span><span class="p">,</span> <span class="mh">0x8156</span><span class="p">,</span> <span class="mh">0x8157</span><span class="p">,</span>
	<span class="mh">0x8256</span><span class="p">,</span> <span class="mh">0x8257</span><span class="p">,</span> <span class="mh">0x9056</span><span class="p">,</span> <span class="mh">0x9156</span><span class="p">,</span> <span class="mh">0x9157</span><span class="p">,</span> <span class="mh">0x9158</span><span class="p">,</span> <span class="mh">0x9159</span><span class="p">,</span>
	<span class="mh">0x9256</span><span class="p">,</span> <span class="mh">0x9257</span><span class="p">,</span> <span class="mh">0xA056</span><span class="p">,</span> <span class="mh">0xA157</span><span class="p">,</span> <span class="mh">0xA158</span><span class="p">,</span> <span class="mh">0xA159</span><span class="p">,</span> <span class="mh">0xB056</span><span class="p">,</span>
	<span class="mh">0xB157</span><span class="p">,</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">timedia_eight_port</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x4065</span><span class="p">,</span> <span class="mh">0x4066</span><span class="p">,</span> <span class="mh">0x5065</span><span class="p">,</span> <span class="mh">0x5066</span><span class="p">,</span> <span class="mh">0x8166</span><span class="p">,</span> <span class="mh">0x9066</span><span class="p">,</span> <span class="mh">0x9166</span><span class="p">,</span>
	<span class="mh">0x9167</span><span class="p">,</span> <span class="mh">0x9168</span><span class="p">,</span> <span class="mh">0xA066</span><span class="p">,</span> <span class="mh">0xA167</span><span class="p">,</span> <span class="mh">0xA168</span><span class="p">,</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">timedia_struct</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">num</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">ids</span><span class="p">;</span>
<span class="p">}</span> <span class="n">timedia_data</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="n">timedia_single_port</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mi">2</span><span class="p">,</span> <span class="n">timedia_dual_port</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mi">4</span><span class="p">,</span> <span class="n">timedia_quad_port</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mi">8</span><span class="p">,</span> <span class="n">timedia_eight_port</span> <span class="p">}</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * There are nearly 70 different Timedia/SUNIX PCI serial devices.  Instead of</span>
<span class="cm"> * listing them individually, this driver merely grabs them all with</span>
<span class="cm"> * PCI_ANY_ID.  Some of these devices, however, also feature a parallel port,</span>
<span class="cm"> * and should be left free to be claimed by parport_serial instead.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_timedia_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * Check the third digit of the subdevice ID</span>
<span class="cm">	 * (0,2,3,5,6: serial only -- 7,8,9: serial + parallel)</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_device</span> <span class="o">&amp;</span> <span class="mh">0x00f0</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mh">0x70</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dev_info</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span>
			<span class="s">&quot;ignoring Timedia subdevice %04x for parport_serial</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_device</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_timedia_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">ids</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">timedia_data</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">ids</span> <span class="o">=</span> <span class="n">timedia_data</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ids</span><span class="p">;</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">ids</span><span class="p">[</span><span class="n">j</span><span class="p">];</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_device</span> <span class="o">==</span> <span class="n">ids</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
				<span class="k">return</span> <span class="n">timedia_data</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">num</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Timedia/SUNIX uses a mixture of BARs and offsets</span>
<span class="cm"> * Ugh, this is ugly as all hell --- TYT</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span>
<span class="nf">pci_timedia_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
		  <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
		  <span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">offset</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">first_offset</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mi">0</span>:
		<span class="n">bar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">1</span>:
		<span class="n">offset</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">uart_offset</span><span class="p">;</span>
		<span class="n">bar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">2</span>:
		<span class="n">bar</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">3</span>:
		<span class="n">offset</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">uart_offset</span><span class="p">;</span>
		<span class="cm">/* FALLTHROUGH */</span>
	<span class="k">case</span> <span class="mi">4</span>: <span class="cm">/* BAR 2 */</span>
	<span class="k">case</span> <span class="mi">5</span>: <span class="cm">/* BAR 3 */</span>
	<span class="k">case</span> <span class="mi">6</span>: <span class="cm">/* BAR 4 */</span>
	<span class="k">case</span> <span class="mi">7</span>: <span class="cm">/* BAR 5 */</span>
		<span class="n">bar</span> <span class="o">=</span> <span class="n">idx</span> <span class="o">-</span> <span class="mi">2</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">setup_port</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">reg_shift</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Some Titan cards are also a little weird</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span>
<span class="nf">titan_400l_800l_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
		      <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
		      <span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bar</span><span class="p">,</span> <span class="n">offset</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">first_offset</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mi">0</span>:
		<span class="n">bar</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">1</span>:
		<span class="n">bar</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">bar</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
		<span class="n">offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">idx</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">uart_offset</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">setup_port</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">reg_shift</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_xircom_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_ni8420_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">base</span><span class="p">,</span> <span class="n">len</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">pci_resource_flags</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">IORESOURCE_MEM</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">moan_device</span><span class="p">(</span><span class="s">&quot;no memory in bar&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="p">);</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">base</span> <span class="o">=</span> <span class="n">pci_resource_start</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">);</span>
	<span class="n">len</span> <span class="o">=</span>  <span class="n">pci_resource_len</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">);</span>
	<span class="n">p</span> <span class="o">=</span> <span class="n">ioremap_nocache</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENOMEM</span><span class="p">;</span>

	<span class="cm">/* Enable CPU Interrupt */</span>
	<span class="n">writel</span><span class="p">(</span><span class="n">readl</span><span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="n">NI8420_INT_ENABLE_REG</span><span class="p">)</span> <span class="o">|</span> <span class="n">NI8420_INT_ENABLE_BIT</span><span class="p">,</span>
	       <span class="n">p</span> <span class="o">+</span> <span class="n">NI8420_INT_ENABLE_REG</span><span class="p">);</span>

	<span class="n">iounmap</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#define MITE_IOWBSR1_WSIZE	0xa</span>
<span class="cp">#define MITE_IOWBSR1_WIN_OFFSET	0x800</span>
<span class="cp">#define MITE_IOWBSR1_WENAB	(1 &lt;&lt; 7)</span>
<span class="cp">#define MITE_LCIMR1_IO_IE_0	(1 &lt;&lt; 24)</span>
<span class="cp">#define MITE_LCIMR2_SET_CPU_IE	(1 &lt;&lt; 31)</span>
<span class="cp">#define MITE_IOWCR1_RAMSEL_MASK	0xfffffffe</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_ni8430_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">base</span><span class="p">,</span> <span class="n">len</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">device_window</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">pci_resource_flags</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">IORESOURCE_MEM</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">moan_device</span><span class="p">(</span><span class="s">&quot;no memory in bar&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="p">);</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">base</span> <span class="o">=</span> <span class="n">pci_resource_start</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">);</span>
	<span class="n">len</span> <span class="o">=</span>  <span class="n">pci_resource_len</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">);</span>
	<span class="n">p</span> <span class="o">=</span> <span class="n">ioremap_nocache</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENOMEM</span><span class="p">;</span>

	<span class="cm">/* Set device window address and size in BAR0 */</span>
	<span class="n">device_window</span> <span class="o">=</span> <span class="p">((</span><span class="n">base</span> <span class="o">+</span> <span class="n">MITE_IOWBSR1_WIN_OFFSET</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xffffff00</span><span class="p">)</span>
	                <span class="o">|</span> <span class="n">MITE_IOWBSR1_WENAB</span> <span class="o">|</span> <span class="n">MITE_IOWBSR1_WSIZE</span><span class="p">;</span>
	<span class="n">writel</span><span class="p">(</span><span class="n">device_window</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="n">MITE_IOWBSR1</span><span class="p">);</span>

	<span class="cm">/* Set window access to go to RAMSEL IO address space */</span>
	<span class="n">writel</span><span class="p">((</span><span class="n">readl</span><span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="n">MITE_IOWCR1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">MITE_IOWCR1_RAMSEL_MASK</span><span class="p">),</span>
	       <span class="n">p</span> <span class="o">+</span> <span class="n">MITE_IOWCR1</span><span class="p">);</span>

	<span class="cm">/* Enable IO Bus Interrupt 0 */</span>
	<span class="n">writel</span><span class="p">(</span><span class="n">MITE_LCIMR1_IO_IE_0</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="n">MITE_LCIMR1</span><span class="p">);</span>

	<span class="cm">/* Enable CPU Interrupt */</span>
	<span class="n">writel</span><span class="p">(</span><span class="n">MITE_LCIMR2_SET_CPU_IE</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="n">MITE_LCIMR2</span><span class="p">);</span>

	<span class="n">iounmap</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* UART Port Control Register */</span>
<span class="cp">#define NI8430_PORTCON	0x0f</span>
<span class="cp">#define NI8430_PORTCON_TXVR_ENABLE	(1 &lt;&lt; 3)</span>

<span class="k">static</span> <span class="kt">int</span>
<span class="nf">pci_ni8430_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
		 <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
		 <span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">base</span><span class="p">,</span> <span class="n">len</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bar</span><span class="p">,</span> <span class="n">offset</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">first_offset</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&gt;=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">num_ports</span><span class="p">)</span>
		<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>

	<span class="n">bar</span> <span class="o">=</span> <span class="n">FL_GET_BASE</span><span class="p">(</span><span class="n">board</span><span class="o">-&gt;</span><span class="n">flags</span><span class="p">);</span>
	<span class="n">offset</span> <span class="o">+=</span> <span class="n">idx</span> <span class="o">*</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">uart_offset</span><span class="p">;</span>

	<span class="n">base</span> <span class="o">=</span> <span class="n">pci_resource_start</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">);</span>
	<span class="n">len</span> <span class="o">=</span>  <span class="n">pci_resource_len</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">);</span>
	<span class="n">p</span> <span class="o">=</span> <span class="n">ioremap_nocache</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>

	<span class="cm">/* enable the transceiver */</span>
	<span class="n">writeb</span><span class="p">(</span><span class="n">readb</span><span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">NI8430_PORTCON</span><span class="p">)</span> <span class="o">|</span> <span class="n">NI8430_PORTCON_TXVR_ENABLE</span><span class="p">,</span>
	       <span class="n">p</span> <span class="o">+</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">NI8430_PORTCON</span><span class="p">);</span>

	<span class="n">iounmap</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">setup_port</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">reg_shift</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_netmos_9900_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
				<span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bar</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_device</span> <span class="o">&amp;</span> <span class="mh">0xff00</span><span class="p">)</span> <span class="o">==</span> <span class="mh">0x3000</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* netmos apparently orders BARs by datasheet layout, so serial</span>
<span class="cm">		 * ports get BARs 0 and 3 (or 1 and 4 for memmapped)</span>
<span class="cm">		 */</span>
		<span class="n">bar</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">idx</span><span class="p">;</span>

		<span class="k">return</span> <span class="n">setup_port</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">reg_shift</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">return</span> <span class="n">pci_default_setup</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* the 99xx series comes with a range of device IDs and a variety</span>
<span class="cm"> * of capabilities:</span>
<span class="cm"> *</span>
<span class="cm"> * 9900 has varying capabilities and can cascade to sub-controllers</span>
<span class="cm"> *   (cascading should be purely internal)</span>
<span class="cm"> * 9904 is hardwired with 4 serial ports</span>
<span class="cm"> * 9912 and 9922 are hardwired with 2 serial ports</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_netmos_9900_numports</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">class</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pi</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">sub_serports</span><span class="p">;</span>

	<span class="n">pi</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">pi</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">pi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
			   <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">device</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_NETMOS_9900</span><span class="p">))</span> <span class="p">{</span>
		<span class="cm">/* two possibilities: 0x30ps encodes number of parallel and</span>
<span class="cm">		 * serial ports, or 0x1000 indicates *something*. This is not</span>
<span class="cm">		 * immediately obvious, since the 2s1p+4s configuration seems</span>
<span class="cm">		 * to offer all functionality on functions 0..2, while still</span>
<span class="cm">		 * advertising the same function 3 as the 4s+2s1p config.</span>
<span class="cm">		 */</span>
		<span class="n">sub_serports</span> <span class="o">=</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_device</span> <span class="o">&amp;</span> <span class="mh">0xf</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">sub_serports</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="n">sub_serports</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;NetMos/Mostech serial driver ignoring port on ambiguous config.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">moan_device</span><span class="p">(</span><span class="s">&quot;unknown NetMos/Mostech program interface&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_netmos_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* subdevice 0x00PS means &lt;P&gt; parallel, &lt;S&gt; serial */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">num_serial</span> <span class="o">=</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_device</span> <span class="o">&amp;</span> <span class="mh">0xf</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">device</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_NETMOS_9901</span><span class="p">)</span> <span class="o">||</span>
		<span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">device</span> <span class="o">==</span> <span class="n">PCI_DEVICE_ID_NETMOS_9865</span><span class="p">))</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_vendor</span> <span class="o">==</span> <span class="n">PCI_VENDOR_ID_IBM</span> <span class="o">&amp;&amp;</span>
			<span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_device</span> <span class="o">==</span> <span class="mh">0x0299</span><span class="p">)</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">device</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* FALLTHROUGH on all */</span>
		<span class="k">case</span> <span class="n">PCI_DEVICE_ID_NETMOS_9904</span>:
		<span class="k">case</span> <span class="n">PCI_DEVICE_ID_NETMOS_9912</span>:
		<span class="k">case</span> <span class="n">PCI_DEVICE_ID_NETMOS_9922</span>:
		<span class="k">case</span> <span class="n">PCI_DEVICE_ID_NETMOS_9900</span>:
			<span class="n">num_serial</span> <span class="o">=</span> <span class="n">pci_netmos_9900_numports</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>

		<span class="nl">default:</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">num_serial</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
				<span class="n">moan_device</span><span class="p">(</span><span class="s">&quot;unknown NetMos/Mostech device&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="p">);</span>
			<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">num_serial</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>

	<span class="k">return</span> <span class="n">num_serial</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * These chips are available with optionally one parallel port and up to</span>
<span class="cm"> * two serial ports. Unfortunately they all have the same product id.</span>
<span class="cm"> *</span>
<span class="cm"> * Basic configuration is done over a region of 32 I/O ports. The base</span>
<span class="cm"> * ioport is called INTA or INTC, depending on docs/other drivers.</span>
<span class="cm"> *</span>
<span class="cm"> * The region of the 32 I/O ports is configured in POSIO0R...</span>
<span class="cm"> */</span>

<span class="cm">/* registers */</span>
<span class="cp">#define ITE_887x_MISCR		0x9c</span>
<span class="cp">#define ITE_887x_INTCBAR	0x78</span>
<span class="cp">#define ITE_887x_UARTBAR	0x7c</span>
<span class="cp">#define ITE_887x_PS0BAR		0x10</span>
<span class="cp">#define ITE_887x_POSIO0		0x60</span>

<span class="cm">/* I/O space size */</span>
<span class="cp">#define ITE_887x_IOSIZE		32</span>
<span class="cm">/* I/O space size (bits 26-24; 8 bytes = 011b) */</span>
<span class="cp">#define ITE_887x_POSIO_IOSIZE_8		(3 &lt;&lt; 24)</span>
<span class="cm">/* I/O space size (bits 26-24; 32 bytes = 101b) */</span>
<span class="cp">#define ITE_887x_POSIO_IOSIZE_32	(5 &lt;&lt; 24)</span>
<span class="cm">/* Decoding speed (1 = slow, 2 = medium, 3 = fast) */</span>
<span class="cp">#define ITE_887x_POSIO_SPEED		(3 &lt;&lt; 29)</span>
<span class="cm">/* enable IO_Space bit */</span>
<span class="cp">#define ITE_887x_POSIO_ENABLE		(1 &lt;&lt; 31)</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_ite887x_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* inta_addr are the configuration addresses of the ITE */</span>
	<span class="k">static</span> <span class="k">const</span> <span class="kt">short</span> <span class="n">inta_addr</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mh">0x2a0</span><span class="p">,</span> <span class="mh">0x2c0</span><span class="p">,</span> <span class="mh">0x220</span><span class="p">,</span> <span class="mh">0x240</span><span class="p">,</span> <span class="mh">0x1e0</span><span class="p">,</span>
							<span class="mh">0x200</span><span class="p">,</span> <span class="mh">0x280</span><span class="p">,</span> <span class="mi">0</span> <span class="p">};</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">type</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">iobase</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">miscr</span><span class="p">,</span> <span class="n">uartbar</span><span class="p">,</span> <span class="n">ioport</span><span class="p">;</span>

	<span class="cm">/* search for the base-ioport */</span>
	<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">while</span> <span class="p">(</span><span class="n">inta_addr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">iobase</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">iobase</span> <span class="o">=</span> <span class="n">request_region</span><span class="p">(</span><span class="n">inta_addr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ITE_887x_IOSIZE</span><span class="p">,</span>
								<span class="s">&quot;ite887x&quot;</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">iobase</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
			<span class="cm">/* write POSIO0R - speed | size | ioport */</span>
			<span class="n">pci_write_config_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">ITE_887x_POSIO0</span><span class="p">,</span>
				<span class="n">ITE_887x_POSIO_ENABLE</span> <span class="o">|</span> <span class="n">ITE_887x_POSIO_SPEED</span> <span class="o">|</span>
				<span class="n">ITE_887x_POSIO_IOSIZE_32</span> <span class="o">|</span> <span class="n">inta_addr</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
			<span class="cm">/* write INTCBAR - ioport */</span>
			<span class="n">pci_write_config_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">ITE_887x_INTCBAR</span><span class="p">,</span>
								<span class="n">inta_addr</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
			<span class="n">ret</span> <span class="o">=</span> <span class="n">inb</span><span class="p">(</span><span class="n">inta_addr</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mh">0xff</span><span class="p">)</span> <span class="p">{</span>
				<span class="cm">/* ioport connected */</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="n">release_region</span><span class="p">(</span><span class="n">iobase</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">,</span> <span class="n">ITE_887x_IOSIZE</span><span class="p">);</span>
			<span class="n">iobase</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">i</span><span class="o">++</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">inta_addr</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_ERR</span> <span class="s">&quot;ite887x: could not find iobase</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* start of undocumented type checking (see parport_pc.c) */</span>
	<span class="n">type</span> <span class="o">=</span> <span class="n">inb</span><span class="p">(</span><span class="n">iobase</span><span class="o">-&gt;</span><span class="n">start</span> <span class="o">+</span> <span class="mh">0x18</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mh">0x2</span>:	<span class="cm">/* ITE8871 (1P) */</span>
	<span class="k">case</span> <span class="mh">0xa</span>:	<span class="cm">/* ITE8875 (1P) */</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0xe</span>:	<span class="cm">/* ITE8872 (2S1P) */</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x6</span>:	<span class="cm">/* ITE8873 (1S) */</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x8</span>:	<span class="cm">/* ITE8874 (2S) */</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">moan_device</span><span class="p">(</span><span class="s">&quot;Unknown ITE887x&quot;</span><span class="p">,</span> <span class="n">dev</span><span class="p">);</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* configure all serial ports */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ret</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* read the I/O port from the device */</span>
		<span class="n">pci_read_config_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">ITE_887x_PS0BAR</span> <span class="o">+</span> <span class="p">(</span><span class="mh">0x4</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)),</span>
								<span class="o">&amp;</span><span class="n">ioport</span><span class="p">);</span>
		<span class="n">ioport</span> <span class="o">&amp;=</span> <span class="mh">0x0000FF00</span><span class="p">;</span>	<span class="cm">/* the actual base address */</span>
		<span class="n">pci_write_config_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">ITE_887x_POSIO0</span> <span class="o">+</span> <span class="p">(</span><span class="mh">0x4</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)),</span>
			<span class="n">ITE_887x_POSIO_ENABLE</span> <span class="o">|</span> <span class="n">ITE_887x_POSIO_SPEED</span> <span class="o">|</span>
			<span class="n">ITE_887x_POSIO_IOSIZE_8</span> <span class="o">|</span> <span class="n">ioport</span><span class="p">);</span>

		<span class="cm">/* write the ioport to the UARTBAR */</span>
		<span class="n">pci_read_config_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">ITE_887x_UARTBAR</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">uartbar</span><span class="p">);</span>
		<span class="n">uartbar</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0xffff</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">16</span> <span class="o">*</span> <span class="n">i</span><span class="p">));</span>	<span class="cm">/* clear half the reg */</span>
		<span class="n">uartbar</span> <span class="o">|=</span> <span class="p">(</span><span class="n">ioport</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">16</span> <span class="o">*</span> <span class="n">i</span><span class="p">));</span>	<span class="cm">/* set the ioport */</span>
		<span class="n">pci_write_config_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">ITE_887x_UARTBAR</span><span class="p">,</span> <span class="n">uartbar</span><span class="p">);</span>

		<span class="cm">/* get current config */</span>
		<span class="n">pci_read_config_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">ITE_887x_MISCR</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">miscr</span><span class="p">);</span>
		<span class="cm">/* disable interrupts (UARTx_Routing[3:0]) */</span>
		<span class="n">miscr</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0xf</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">12</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">i</span><span class="p">));</span>
		<span class="cm">/* activate the UART (UARTx_En) */</span>
		<span class="n">miscr</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">23</span> <span class="o">-</span> <span class="n">i</span><span class="p">);</span>
		<span class="cm">/* write new config with activated UART */</span>
		<span class="n">pci_write_config_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">ITE_887x_MISCR</span><span class="p">,</span> <span class="n">miscr</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* the device has no UARTs if we get here */</span>
		<span class="n">release_region</span><span class="p">(</span><span class="n">iobase</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">,</span> <span class="n">ITE_887x_IOSIZE</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__devexit</span> <span class="nf">pci_ite887x_exit</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u32</span> <span class="n">ioport</span><span class="p">;</span>
	<span class="cm">/* the ioport is bit 0-15 in POSIO0R */</span>
	<span class="n">pci_read_config_dword</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">ITE_887x_POSIO0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ioport</span><span class="p">);</span>
	<span class="n">ioport</span> <span class="o">&amp;=</span> <span class="mh">0xffff</span><span class="p">;</span>
	<span class="n">release_region</span><span class="p">(</span><span class="n">ioport</span><span class="p">,</span> <span class="n">ITE_887x_IOSIZE</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Oxford Semiconductor Inc.</span>
<span class="cm"> * Check that device is part of the Tornado range of devices, then determine</span>
<span class="cm"> * the number of ports available on the device.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_oxsemi_tornado_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u8</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">deviceID</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">number_uarts</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="cm">/* OxSemi Tornado devices are all 0xCxxx */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">vendor</span> <span class="o">==</span> <span class="n">PCI_VENDOR_ID_OXSEMI</span> <span class="o">&amp;&amp;</span>
	    <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">device</span> <span class="o">&amp;</span> <span class="mh">0xF000</span><span class="p">)</span> <span class="o">!=</span> <span class="mh">0xC000</span><span class="p">)</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

	<span class="n">p</span> <span class="o">=</span> <span class="n">pci_iomap</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENOMEM</span><span class="p">;</span>

	<span class="n">deviceID</span> <span class="o">=</span> <span class="n">ioread32</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
	<span class="cm">/* Tornado device */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">deviceID</span> <span class="o">==</span> <span class="mh">0x07000200</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">number_uarts</span> <span class="o">=</span> <span class="n">ioread8</span><span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="mi">4</span><span class="p">);</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_DEBUG</span>
			<span class="s">&quot;%d ports detected on Oxford PCI Express device</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
								<span class="n">number_uarts</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">pci_iounmap</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">number_uarts</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span>
<span class="nf">pci_default_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
		  <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
		  <span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bar</span><span class="p">,</span> <span class="n">offset</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">first_offset</span><span class="p">,</span> <span class="n">maxnr</span><span class="p">;</span>

	<span class="n">bar</span> <span class="o">=</span> <span class="n">FL_GET_BASE</span><span class="p">(</span><span class="n">board</span><span class="o">-&gt;</span><span class="n">flags</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">board</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="n">FL_BASE_BARS</span><span class="p">)</span>
		<span class="n">bar</span> <span class="o">+=</span> <span class="n">idx</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">offset</span> <span class="o">+=</span> <span class="n">idx</span> <span class="o">*</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">uart_offset</span><span class="p">;</span>

	<span class="n">maxnr</span> <span class="o">=</span> <span class="p">(</span><span class="n">pci_resource_len</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span> <span class="o">-</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">first_offset</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
		<span class="p">(</span><span class="n">board</span><span class="o">-&gt;</span><span class="n">reg_shift</span> <span class="o">+</span> <span class="mi">3</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">board</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="n">FL_REGION_SZ_CAP</span> <span class="o">&amp;&amp;</span> <span class="n">idx</span> <span class="o">&gt;=</span> <span class="n">maxnr</span><span class="p">)</span>
		<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>

	<span class="k">return</span> <span class="n">setup_port</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">reg_shift</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span>
<span class="nf">ce4100_serial_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
		  <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
		  <span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="n">ret</span> <span class="o">=</span> <span class="n">setup_port</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">reg_shift</span><span class="p">);</span>
	<span class="n">port</span><span class="o">-&gt;</span><span class="n">iotype</span> <span class="o">=</span> <span class="n">UPIO_MEM32</span><span class="p">;</span>
	<span class="n">port</span><span class="o">-&gt;</span><span class="n">type</span> <span class="o">=</span> <span class="n">PORT_XSCALE</span><span class="p">;</span>
	<span class="n">port</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">=</span> <span class="p">(</span><span class="n">port</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">|</span> <span class="n">UPF_FIXED_PORT</span> <span class="o">|</span> <span class="n">UPF_FIXED_TYPE</span><span class="p">);</span>
	<span class="n">port</span><span class="o">-&gt;</span><span class="n">regshift</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span>
<span class="nf">pci_omegapci_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
		      <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
		      <span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">setup_port</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">idx</span> <span class="o">*</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">skip_tx_en_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">port</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">|=</span> <span class="n">UPF_NO_TXEN_TEST</span><span class="p">;</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_DEBUG</span> <span class="s">&quot;serial8250: skipping TxEn test for device &quot;</span>
			  <span class="s">&quot;[%04x:%04x] subsystem [%04x:%04x]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			  <span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">vendor</span><span class="p">,</span>
			  <span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">device</span><span class="p">,</span>
			  <span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_vendor</span><span class="p">,</span>
			  <span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_device</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">pci_default_setup</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">kt_handle_break</span><span class="p">(</span><span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">uart_8250_port</span> <span class="o">*</span><span class="n">up</span> <span class="o">=</span>
		<span class="n">container_of</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="k">struct</span> <span class="n">uart_8250_port</span><span class="p">,</span> <span class="n">port</span><span class="p">);</span>
	<span class="cm">/*</span>
<span class="cm">	 * On receipt of a BI, serial device in Intel ME (Intel</span>
<span class="cm">	 * management engine) needs to have its fifos cleared for sane</span>
<span class="cm">	 * SOL (Serial Over Lan) output.</span>
<span class="cm">	 */</span>
	<span class="n">serial8250_clear_and_reinit_fifos</span><span class="p">(</span><span class="n">up</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">kt_serial_in</span><span class="p">(</span><span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">uart_8250_port</span> <span class="o">*</span><span class="n">up</span> <span class="o">=</span>
		<span class="n">container_of</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="k">struct</span> <span class="n">uart_8250_port</span><span class="p">,</span> <span class="n">port</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">val</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * When the Intel ME (management engine) gets reset its serial</span>
<span class="cm">	 * port registers could return 0 momentarily.  Functions like</span>
<span class="cm">	 * serial8250_console_write, read and save the IER, perform</span>
<span class="cm">	 * some operation and then restore it.  In order to avoid</span>
<span class="cm">	 * setting IER register inadvertently to 0, if the value read</span>
<span class="cm">	 * is 0, double check with ier value in uart_8250_port and use</span>
<span class="cm">	 * that instead.  up-&gt;ier should be the same value as what is</span>
<span class="cm">	 * currently configured.</span>
<span class="cm">	 */</span>
	<span class="n">val</span> <span class="o">=</span> <span class="n">inb</span><span class="p">(</span><span class="n">p</span><span class="o">-&gt;</span><span class="n">iobase</span> <span class="o">+</span> <span class="n">offset</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">offset</span> <span class="o">==</span> <span class="n">UART_IER</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
			<span class="n">val</span> <span class="o">=</span> <span class="n">up</span><span class="o">-&gt;</span><span class="n">ier</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">val</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">kt_serial_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			   <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
			   <span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">port</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">|=</span> <span class="n">UPF_BUG_THRE</span><span class="p">;</span>
	<span class="n">port</span><span class="o">-&gt;</span><span class="n">serial_in</span> <span class="o">=</span> <span class="n">kt_serial_in</span><span class="p">;</span>
	<span class="n">port</span><span class="o">-&gt;</span><span class="n">handle_break</span> <span class="o">=</span> <span class="n">kt_handle_break</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">skip_tx_en_setup</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pci_eg20t_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#if defined(CONFIG_SERIAL_PCH_UART) || defined(CONFIG_SERIAL_PCH_UART_MODULE)</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
<span class="cp">#else</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span>
<span class="nf">pci_xr17c154_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
		  <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
		  <span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">port</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">|=</span> <span class="n">UPF_EXAR_EFR</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">pci_default_setup</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">idx</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#define PCI_VENDOR_ID_SBSMODULARIO	0x124B</span>
<span class="cp">#define PCI_SUBVENDOR_ID_SBSMODULARIO	0x124B</span>
<span class="cp">#define PCI_DEVICE_ID_OCTPRO		0x0001</span>
<span class="cp">#define PCI_SUBDEVICE_ID_OCTPRO232	0x0108</span>
<span class="cp">#define PCI_SUBDEVICE_ID_OCTPRO422	0x0208</span>
<span class="cp">#define PCI_SUBDEVICE_ID_POCTAL232	0x0308</span>
<span class="cp">#define PCI_SUBDEVICE_ID_POCTAL422	0x0408</span>
<span class="cp">#define PCI_VENDOR_ID_ADVANTECH		0x13fe</span>
<span class="cp">#define PCI_DEVICE_ID_INTEL_CE4100_UART 0x2e66</span>
<span class="cp">#define PCI_DEVICE_ID_ADVANTECH_PCI3620	0x3620</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_200I	0x8028</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_400I	0x8048</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_800I	0x8088</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_800EH	0xA007</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_800EHB	0xA008</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_400EH	0xA009</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_100E	0xA010</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_200E	0xA012</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_400E	0xA013</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_800E	0xA014</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_200EI	0xA016</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_200EISI	0xA017</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_400V3	0xA310</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_410V3	0xA312</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_800V3	0xA314</span>
<span class="cp">#define PCI_DEVICE_ID_TITAN_800V3B	0xA315</span>
<span class="cp">#define PCI_DEVICE_ID_OXSEMI_16PCI958	0x9538</span>
<span class="cp">#define PCIE_DEVICE_ID_NEO_2_OX_IBM	0x00F6</span>
<span class="cp">#define PCI_DEVICE_ID_PLX_CRONYX_OMEGA	0xc001</span>
<span class="cp">#define PCI_DEVICE_ID_INTEL_PATSBURG_KT 0x1d3d</span>

<span class="cm">/* Unknown vendors/cards - this should not be in linux/pci_ids.h */</span>
<span class="cp">#define PCI_SUBDEVICE_ID_UNKNOWN_0x1584	0x1584</span>

<span class="cm">/*</span>
<span class="cm"> * Master list of serial port init/setup/exit quirks.</span>
<span class="cm"> * This does not describe the general nature of the port.</span>
<span class="cm"> * (ie, baud base, number and location of ports, etc)</span>
<span class="cm"> *</span>
<span class="cm"> * This list is ordered alphabetically by vendor then device.</span>
<span class="cm"> * Specific entries must come before more generic entries.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">pci_serial_quirk</span> <span class="n">pci_serial_quirks</span><span class="p">[]</span> <span class="n">__refdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	* ADDI-DATA GmbH communication cards &lt;info@addi-data.com&gt;</span>
<span class="cm">	*/</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>         <span class="o">=</span> <span class="n">PCI_VENDOR_ID_ADDIDATA_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>         <span class="o">=</span> <span class="n">PCI_DEVICE_ID_ADDIDATA_APCI7800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>      <span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>      <span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>          <span class="o">=</span> <span class="n">addidata_apci7800_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * AFAVLAB cards - these may be called via parport_serial</span>
<span class="cm">	 *  It is not clear whether this applies to all products.</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_AFAVLAB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">afavlab_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * HP Diva</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_HP</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_HP_DIVA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_hp_diva_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_hp_diva_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Intel</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_INTEL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_INTEL_80960_RP</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="mh">0xe4bf</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_inteli960ni_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_INTEL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_INTEL_8257X_SOL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">skip_tx_en_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_INTEL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_INTEL_82573L_SOL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">skip_tx_en_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_INTEL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_INTEL_82573E_SOL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">skip_tx_en_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_INTEL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_INTEL_CE4100_UART</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">ce4100_serial_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_INTEL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_INTEL_PATSBURG_KT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">kt_serial_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * ITE</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_ITE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_ITE_8872</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_ite887x_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_ite887x_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * National Instruments</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_NI_PCI23216</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_ni8420_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_ni8420_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_NI_PCI2328</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_ni8420_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_ni8420_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_NI_PCI2324</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_ni8420_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_ni8420_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_NI_PCI2322</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_ni8420_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_ni8420_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_NI_PCI2324I</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_ni8420_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_ni8420_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_NI_PCI2322I</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_ni8420_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_ni8420_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_NI_PXI8420_23216</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_ni8420_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_ni8420_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_NI_PXI8420_2328</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_ni8420_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_ni8420_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_NI_PXI8420_2324</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_ni8420_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_ni8420_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_NI_PXI8420_2322</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_ni8420_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_ni8420_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_NI_PXI8422_2324</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_ni8420_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_ni8420_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_NI_PXI8422_2322</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_ni8420_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_ni8420_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_ni8430_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_ni8430_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_ni8430_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Panacom</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_PANACOM</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_PANACOM_QUADMODEM</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_plx9050_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_plx9050_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_PANACOM</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_PANACOM_DUALMODEM</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_plx9050_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_plx9050_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * PLX</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_PLX_9030</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_SUBVENDOR_ID_PERLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_PLX_9050</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_SUBVENDOR_ID_EXSYS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_SUBDEVICE_ID_EXSYS_4055</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_plx9050_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_plx9050_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_PLX_9050</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_SUBVENDOR_ID_KEYSPAN</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_SUBDEVICE_ID_KEYSPAN_SX2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_plx9050_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_plx9050_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_PLX_9050</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_SUBDEVICE_ID_UNKNOWN_0x1584</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_plx9050_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_plx9050_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_PLX_ROMULUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_DEVICE_ID_PLX_ROMULUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_plx9050_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pci_plx9050_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * SBS Technologies, Inc., PMC-OCTALPRO 232</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_SBSMODULARIO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_OCTPRO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_SUBVENDOR_ID_SBSMODULARIO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_SUBDEVICE_ID_OCTPRO232</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">sbs_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">sbs_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">sbs_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * SBS Technologies, Inc., PMC-OCTALPRO 422</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_SBSMODULARIO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_OCTPRO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_SUBVENDOR_ID_SBSMODULARIO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_SUBDEVICE_ID_OCTPRO422</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">sbs_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">sbs_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">sbs_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * SBS Technologies, Inc., P-Octal 232</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_SBSMODULARIO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_OCTPRO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_SUBVENDOR_ID_SBSMODULARIO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_SUBDEVICE_ID_POCTAL232</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">sbs_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">sbs_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">sbs_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * SBS Technologies, Inc., P-Octal 422</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_SBSMODULARIO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_OCTPRO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_SUBVENDOR_ID_SBSMODULARIO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_SUBDEVICE_ID_POCTAL422</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">sbs_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">sbs_setup</span><span class="p">,</span>
		<span class="p">.</span><span class="n">exit</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">sbs_exit</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * SIIG cards - these may be called via parport_serial</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_siig_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_siig_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Titan cards</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_TITAN_400L</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">titan_400l_800l_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_TITAN_800L</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">titan_400l_800l_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Timedia cards</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_TIMEDIA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_TIMEDIA_1889</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_VENDOR_ID_TIMEDIA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">probe</span>		<span class="o">=</span> <span class="n">pci_timedia_probe</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_timedia_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_timedia_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_TIMEDIA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_timedia_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Exar cards</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span> <span class="o">=</span> <span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span> <span class="o">=</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C152</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_xr17c154_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span> <span class="o">=</span> <span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span> <span class="o">=</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C154</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_xr17c154_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span> <span class="o">=</span> <span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span> <span class="o">=</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C158</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_xr17c154_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Xircom cards</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_XIRCOM</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_XIRCOM_X3201_MDM</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_xircom_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Netmos cards - these may be called via parport_serial</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_NETMOS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_netmos_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_netmos_9900_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * For Oxford Semiconductor Tornado based devices</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_oxsemi_tornado_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_oxsemi_tornado_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_DIGI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCIE_DEVICE_ID_NEO_2_OX_IBM</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>		<span class="o">=</span> <span class="n">PCI_SUBVENDOR_ID_IBM</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>		<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>			<span class="o">=</span> <span class="n">pci_oxsemi_tornado_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>         <span class="o">=</span> <span class="n">PCI_VENDOR_ID_INTEL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>         <span class="o">=</span> <span class="mh">0x8811</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_eg20t_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>         <span class="o">=</span> <span class="n">PCI_VENDOR_ID_INTEL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>         <span class="o">=</span> <span class="mh">0x8812</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_eg20t_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>         <span class="o">=</span> <span class="n">PCI_VENDOR_ID_INTEL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>         <span class="o">=</span> <span class="mh">0x8813</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_eg20t_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>         <span class="o">=</span> <span class="n">PCI_VENDOR_ID_INTEL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>         <span class="o">=</span> <span class="mh">0x8814</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_eg20t_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>         <span class="o">=</span> <span class="mh">0x10DB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>         <span class="o">=</span> <span class="mh">0x8027</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_eg20t_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>         <span class="o">=</span> <span class="mh">0x10DB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>         <span class="o">=</span> <span class="mh">0x8028</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_eg20t_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>         <span class="o">=</span> <span class="mh">0x10DB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>         <span class="o">=</span> <span class="mh">0x8029</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_eg20t_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>         <span class="o">=</span> <span class="mh">0x10DB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>         <span class="o">=</span> <span class="mh">0x800C</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_eg20t_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>         <span class="o">=</span> <span class="mh">0x10DB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>         <span class="o">=</span> <span class="mh">0x800D</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">init</span>		<span class="o">=</span> <span class="n">pci_eg20t_init</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Cronyx Omega PCI (PLX-chip based)</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_DEVICE_ID_PLX_CRONYX_OMEGA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_omegapci_setup</span><span class="p">,</span>
	 <span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Default &quot;match everything&quot; terminator entry</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">vendor</span>		<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">device</span>		<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subvendor</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">subdevice</span>	<span class="o">=</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>		<span class="o">=</span> <span class="n">pci_default_setup</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">quirk_id_matches</span><span class="p">(</span><span class="n">u32</span> <span class="n">quirk_id</span><span class="p">,</span> <span class="n">u32</span> <span class="n">dev_id</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">quirk_id</span> <span class="o">==</span> <span class="n">PCI_ANY_ID</span> <span class="o">||</span> <span class="n">quirk_id</span> <span class="o">==</span> <span class="n">dev_id</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pci_serial_quirk</span> <span class="o">*</span><span class="nf">find_quirk</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">pci_serial_quirk</span> <span class="o">*</span><span class="n">quirk</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">quirk</span> <span class="o">=</span> <span class="n">pci_serial_quirks</span><span class="p">;</span> <span class="p">;</span> <span class="n">quirk</span><span class="o">++</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">quirk_id_matches</span><span class="p">(</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">vendor</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">vendor</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
		    <span class="n">quirk_id_matches</span><span class="p">(</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">device</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">device</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
		    <span class="n">quirk_id_matches</span><span class="p">(</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">subvendor</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_vendor</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
		    <span class="n">quirk_id_matches</span><span class="p">(</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">subdevice</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">subsystem_device</span><span class="p">))</span>
			<span class="k">break</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">quirk</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">get_pci_irq</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>
				<span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">board</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="n">FL_NOIRQ</span><span class="p">)</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">irq</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * This is the configuration table for all of the PCI serial boards</span>
<span class="cm"> * which we support.  It is directly indexed by the pci_board_num_t enum</span>
<span class="cm"> * value, which is encoded in the pci_device_id PCI probe table&#39;s</span>
<span class="cm"> * driver_data member.</span>
<span class="cm"> *</span>
<span class="cm"> * The makeup of these names are:</span>
<span class="cm"> *  pbn_bn{_bt}_n_baud{_offsetinhex}</span>
<span class="cm"> *</span>
<span class="cm"> *  bn		= PCI BAR number</span>
<span class="cm"> *  bt		= Index using PCI BARs</span>
<span class="cm"> *  n		= number of serial ports</span>
<span class="cm"> *  baud	= baud rate</span>
<span class="cm"> *  offsetinhex	= offset for each sequential port (in hex)</span>
<span class="cm"> *</span>
<span class="cm"> * This table is sorted by (in order): bn, bt, baud, offsetindex, n.</span>
<span class="cm"> *</span>
<span class="cm"> * Please note: in theory if n = 1, _bt infix should make no difference.</span>
<span class="cm"> * ie, pbn_b0_1_115200 is the same as pbn_b0_bt_1_115200</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">pci_board_num_t</span> <span class="p">{</span>
	<span class="n">pbn_default</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

	<span class="n">pbn_b0_1_115200</span><span class="p">,</span>
	<span class="n">pbn_b0_2_115200</span><span class="p">,</span>
	<span class="n">pbn_b0_4_115200</span><span class="p">,</span>
	<span class="n">pbn_b0_5_115200</span><span class="p">,</span>
	<span class="n">pbn_b0_8_115200</span><span class="p">,</span>

	<span class="n">pbn_b0_1_921600</span><span class="p">,</span>
	<span class="n">pbn_b0_2_921600</span><span class="p">,</span>
	<span class="n">pbn_b0_4_921600</span><span class="p">,</span>

	<span class="n">pbn_b0_2_1130000</span><span class="p">,</span>

	<span class="n">pbn_b0_4_1152000</span><span class="p">,</span>

	<span class="n">pbn_b0_2_1843200</span><span class="p">,</span>
	<span class="n">pbn_b0_4_1843200</span><span class="p">,</span>

	<span class="n">pbn_b0_2_1843200_200</span><span class="p">,</span>
	<span class="n">pbn_b0_4_1843200_200</span><span class="p">,</span>
	<span class="n">pbn_b0_8_1843200_200</span><span class="p">,</span>

	<span class="n">pbn_b0_1_4000000</span><span class="p">,</span>

	<span class="n">pbn_b0_bt_1_115200</span><span class="p">,</span>
	<span class="n">pbn_b0_bt_2_115200</span><span class="p">,</span>
	<span class="n">pbn_b0_bt_4_115200</span><span class="p">,</span>
	<span class="n">pbn_b0_bt_8_115200</span><span class="p">,</span>

	<span class="n">pbn_b0_bt_1_460800</span><span class="p">,</span>
	<span class="n">pbn_b0_bt_2_460800</span><span class="p">,</span>
	<span class="n">pbn_b0_bt_4_460800</span><span class="p">,</span>

	<span class="n">pbn_b0_bt_1_921600</span><span class="p">,</span>
	<span class="n">pbn_b0_bt_2_921600</span><span class="p">,</span>
	<span class="n">pbn_b0_bt_4_921600</span><span class="p">,</span>
	<span class="n">pbn_b0_bt_8_921600</span><span class="p">,</span>

	<span class="n">pbn_b1_1_115200</span><span class="p">,</span>
	<span class="n">pbn_b1_2_115200</span><span class="p">,</span>
	<span class="n">pbn_b1_4_115200</span><span class="p">,</span>
	<span class="n">pbn_b1_8_115200</span><span class="p">,</span>
	<span class="n">pbn_b1_16_115200</span><span class="p">,</span>

	<span class="n">pbn_b1_1_921600</span><span class="p">,</span>
	<span class="n">pbn_b1_2_921600</span><span class="p">,</span>
	<span class="n">pbn_b1_4_921600</span><span class="p">,</span>
	<span class="n">pbn_b1_8_921600</span><span class="p">,</span>

	<span class="n">pbn_b1_2_1250000</span><span class="p">,</span>

	<span class="n">pbn_b1_bt_1_115200</span><span class="p">,</span>
	<span class="n">pbn_b1_bt_2_115200</span><span class="p">,</span>
	<span class="n">pbn_b1_bt_4_115200</span><span class="p">,</span>

	<span class="n">pbn_b1_bt_2_921600</span><span class="p">,</span>

	<span class="n">pbn_b1_1_1382400</span><span class="p">,</span>
	<span class="n">pbn_b1_2_1382400</span><span class="p">,</span>
	<span class="n">pbn_b1_4_1382400</span><span class="p">,</span>
	<span class="n">pbn_b1_8_1382400</span><span class="p">,</span>

	<span class="n">pbn_b2_1_115200</span><span class="p">,</span>
	<span class="n">pbn_b2_2_115200</span><span class="p">,</span>
	<span class="n">pbn_b2_4_115200</span><span class="p">,</span>
	<span class="n">pbn_b2_8_115200</span><span class="p">,</span>

	<span class="n">pbn_b2_1_460800</span><span class="p">,</span>
	<span class="n">pbn_b2_4_460800</span><span class="p">,</span>
	<span class="n">pbn_b2_8_460800</span><span class="p">,</span>
	<span class="n">pbn_b2_16_460800</span><span class="p">,</span>

	<span class="n">pbn_b2_1_921600</span><span class="p">,</span>
	<span class="n">pbn_b2_4_921600</span><span class="p">,</span>
	<span class="n">pbn_b2_8_921600</span><span class="p">,</span>

	<span class="n">pbn_b2_8_1152000</span><span class="p">,</span>

	<span class="n">pbn_b2_bt_1_115200</span><span class="p">,</span>
	<span class="n">pbn_b2_bt_2_115200</span><span class="p">,</span>
	<span class="n">pbn_b2_bt_4_115200</span><span class="p">,</span>

	<span class="n">pbn_b2_bt_2_921600</span><span class="p">,</span>
	<span class="n">pbn_b2_bt_4_921600</span><span class="p">,</span>

	<span class="n">pbn_b3_2_115200</span><span class="p">,</span>
	<span class="n">pbn_b3_4_115200</span><span class="p">,</span>
	<span class="n">pbn_b3_8_115200</span><span class="p">,</span>

	<span class="n">pbn_b4_bt_2_921600</span><span class="p">,</span>
	<span class="n">pbn_b4_bt_4_921600</span><span class="p">,</span>
	<span class="n">pbn_b4_bt_8_921600</span><span class="p">,</span>

	<span class="cm">/*</span>
<span class="cm">	 * Board-specific versions.</span>
<span class="cm">	 */</span>
	<span class="n">pbn_panacom</span><span class="p">,</span>
	<span class="n">pbn_panacom2</span><span class="p">,</span>
	<span class="n">pbn_panacom4</span><span class="p">,</span>
	<span class="n">pbn_exsys_4055</span><span class="p">,</span>
	<span class="n">pbn_plx_romulus</span><span class="p">,</span>
	<span class="n">pbn_oxsemi</span><span class="p">,</span>
	<span class="n">pbn_oxsemi_1_4000000</span><span class="p">,</span>
	<span class="n">pbn_oxsemi_2_4000000</span><span class="p">,</span>
	<span class="n">pbn_oxsemi_4_4000000</span><span class="p">,</span>
	<span class="n">pbn_oxsemi_8_4000000</span><span class="p">,</span>
	<span class="n">pbn_intel_i960</span><span class="p">,</span>
	<span class="n">pbn_sgi_ioc3</span><span class="p">,</span>
	<span class="n">pbn_computone_4</span><span class="p">,</span>
	<span class="n">pbn_computone_6</span><span class="p">,</span>
	<span class="n">pbn_computone_8</span><span class="p">,</span>
	<span class="n">pbn_sbsxrsio</span><span class="p">,</span>
	<span class="n">pbn_exar_XR17C152</span><span class="p">,</span>
	<span class="n">pbn_exar_XR17C154</span><span class="p">,</span>
	<span class="n">pbn_exar_XR17C158</span><span class="p">,</span>
	<span class="n">pbn_exar_ibm_saturn</span><span class="p">,</span>
	<span class="n">pbn_pasemi_1682M</span><span class="p">,</span>
	<span class="n">pbn_ni8430_2</span><span class="p">,</span>
	<span class="n">pbn_ni8430_4</span><span class="p">,</span>
	<span class="n">pbn_ni8430_8</span><span class="p">,</span>
	<span class="n">pbn_ni8430_16</span><span class="p">,</span>
	<span class="n">pbn_ADDIDATA_PCIe_1_3906250</span><span class="p">,</span>
	<span class="n">pbn_ADDIDATA_PCIe_2_3906250</span><span class="p">,</span>
	<span class="n">pbn_ADDIDATA_PCIe_4_3906250</span><span class="p">,</span>
	<span class="n">pbn_ADDIDATA_PCIe_8_3906250</span><span class="p">,</span>
	<span class="n">pbn_ce4100_1_115200</span><span class="p">,</span>
	<span class="n">pbn_omegapci</span><span class="p">,</span>
	<span class="n">pbn_NETMOS9900_2s_115200</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * uart_offset - the space between channels</span>
<span class="cm"> * reg_shift   - describes how the UART registers are mapped</span>
<span class="cm"> *               to PCI memory by the card.</span>
<span class="cm"> * For example IER register on SBS, Inc. PMC-OctPro is located at</span>
<span class="cm"> * offset 0x10 from the UART base, while UART_IER is defined as 1</span>
<span class="cm"> * in include/linux/serial_reg.h,</span>
<span class="cm"> * see first lines of serial_in() and serial_out() in 8250.c</span>
<span class="cm">*/</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="n">pci_boards</span><span class="p">[]</span> <span class="n">__devinitdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="n">pbn_default</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_1_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_2_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_4_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_5_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_8_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_1_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_2_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_4_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b0_2_1130000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>          <span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>      <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>      <span class="o">=</span> <span class="mi">1130000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>    <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b0_4_1152000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">1152000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b0_2_1843200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">1843200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_4_1843200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">1843200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b0_2_1843200_200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">1843200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_4_1843200_200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">1843200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_8_1843200_200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">1843200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_1_4000000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">4000000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b0_bt_1_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_bt_2_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_bt_4_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_bt_8_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b0_bt_1_460800</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">460800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_bt_2_460800</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">460800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_bt_4_460800</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">460800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b0_bt_1_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_bt_2_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_bt_4_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b0_bt_8_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b1_1_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b1_2_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b1_4_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b1_8_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b1_16_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b1_1_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b1_2_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b1_4_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b1_8_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b1_2_1250000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">1250000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b1_bt_1_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b1_bt_2_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b1_bt_4_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b1_bt_2_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b1_1_1382400</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">1382400</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b1_2_1382400</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">1382400</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b1_4_1382400</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">1382400</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b1_8_1382400</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">1382400</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b2_1_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b2_2_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b2_4_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>          <span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>      <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>      <span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>    <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b2_8_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b2_1_460800</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">460800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b2_4_460800</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">460800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b2_8_460800</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">460800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b2_16_460800</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">460800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	 <span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b2_1_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b2_4_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b2_8_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b2_8_1152000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">1152000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b2_bt_1_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b2_bt_2_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b2_bt_4_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b2_bt_2_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b2_bt_4_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b3_2_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b3_4_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b3_8_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_b4_bt_2_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b4_bt_4_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_b4_bt_8_921600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Entries following this are board-specific.</span>
<span class="cm">	 */</span>

	<span class="cm">/*</span>
<span class="cm">	 * Panacom - IOMEM</span>
<span class="cm">	 */</span>
	<span class="p">[</span><span class="n">pbn_panacom</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x400</span><span class="p">,</span>
		<span class="p">.</span><span class="n">reg_shift</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_panacom2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x400</span><span class="p">,</span>
		<span class="p">.</span><span class="n">reg_shift</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_panacom4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="o">|</span><span class="n">FL_BASE_BARS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x400</span><span class="p">,</span>
		<span class="p">.</span><span class="n">reg_shift</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="p">[</span><span class="n">pbn_exsys_4055</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/* I think this entry is broken - the first_offset looks wrong --rmk */</span>
	<span class="p">[</span><span class="n">pbn_plx_romulus</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">reg_shift</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * This board uses the size of PCI Base region 0 to</span>
<span class="cm">	 * signal now many ports are available</span>
<span class="cm">	 */</span>
	<span class="p">[</span><span class="n">pbn_oxsemi</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="o">|</span><span class="n">FL_REGION_SZ_CAP</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_oxsemi_1_4000000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">4000000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x1000</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_oxsemi_2_4000000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">4000000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x1000</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_oxsemi_4_4000000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">4000000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x1000</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_oxsemi_8_4000000</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">4000000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x1000</span><span class="p">,</span>
	<span class="p">},</span>


	<span class="cm">/*</span>
<span class="cm">	 * EKF addition for i960 Boards form EKF with serial port.</span>
<span class="cm">	 * Max 256 ports.</span>
<span class="cm">	 */</span>
	<span class="p">[</span><span class="n">pbn_intel_i960</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">reg_shift</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x10000</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_sgi_ioc3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="o">|</span><span class="n">FL_NOIRQ</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">458333</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">reg_shift</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x20178</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Computone - uses IOMEM.</span>
<span class="cm">	 */</span>
	<span class="p">[</span><span class="n">pbn_computone_4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x40</span><span class="p">,</span>
		<span class="p">.</span><span class="n">reg_shift</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_computone_6</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x40</span><span class="p">,</span>
		<span class="p">.</span><span class="n">reg_shift</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_computone_8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x40</span><span class="p">,</span>
		<span class="p">.</span><span class="n">reg_shift</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_sbsxrsio</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">460800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
		<span class="p">.</span><span class="n">reg_shift</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Exar Corp. XR17C15[248] Dual/Quad/Octal UART</span>
<span class="cm">	 *  Only basic 16550A support.</span>
<span class="cm">	 *  XR17C15[24] are not tested, but they should work.</span>
<span class="cm">	 */</span>
	<span class="p">[</span><span class="n">pbn_exar_XR17C152</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_exar_XR17C154</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_exar_XR17C158</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_exar_ibm_saturn</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * PA Semi PWRficient PA6T-1682M on-chip UART</span>
<span class="cm">	 */</span>
	<span class="p">[</span><span class="n">pbn_pasemi_1682M</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">8333333</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * National Instruments 843x</span>
<span class="cm">	 */</span>
	<span class="p">[</span><span class="n">pbn_ni8430_16</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">3686400</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x800</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_ni8430_8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">3686400</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x800</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_ni8430_4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">3686400</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x800</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_ni8430_2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">3686400</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x800</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * ADDI-DATA GmbH PCI-Express communication cards &lt;info@addi-data.com&gt;</span>
<span class="cm">	 */</span>
	<span class="p">[</span><span class="n">pbn_ADDIDATA_PCIe_1_3906250</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">3906250</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x1000</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_ADDIDATA_PCIe_2_3906250</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">3906250</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x1000</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_ADDIDATA_PCIe_4_3906250</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">3906250</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x1000</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_ADDIDATA_PCIe_8_3906250</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">3906250</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">first_offset</span>	<span class="o">=</span> <span class="mh">0x1000</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_ce4100_1_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">921600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">reg_shift</span>      <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_omegapci</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">uart_offset</span>	<span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="n">pbn_NETMOS9900_2s_115200</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">FL_BASE0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">num_ports</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">base_baud</span>	<span class="o">=</span> <span class="mi">115200</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">pci_device_id</span> <span class="n">softmodem_blacklist</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">PCI_VDEVICE</span><span class="p">(</span><span class="n">AL</span><span class="p">,</span> <span class="mh">0x5457</span><span class="p">),</span> <span class="p">},</span> <span class="cm">/* ALi Corporation M5457 AC&#39;97 Modem */</span>
	<span class="p">{</span> <span class="n">PCI_VDEVICE</span><span class="p">(</span><span class="n">MOTOROLA</span><span class="p">,</span> <span class="mh">0x3052</span><span class="p">),</span> <span class="p">},</span> <span class="cm">/* Motorola Si3052-based modem */</span>
	<span class="p">{</span> <span class="n">PCI_DEVICE</span><span class="p">(</span><span class="mh">0x1543</span><span class="p">,</span> <span class="mh">0x3052</span><span class="p">),</span> <span class="p">},</span> <span class="cm">/* Si3052-based modem, default IDs */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Given a complete unknown PCI device, try to use some heuristics to</span>
<span class="cm"> * guess what the configuration might be, based on the pitiful PCI</span>
<span class="cm"> * serial specs.  Returns 0 on success, 1 on failure.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">__devinit</span>
<span class="nf">serial_pci_guess_board</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">pci_device_id</span> <span class="o">*</span><span class="n">blacklist</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">num_iomem</span><span class="p">,</span> <span class="n">num_port</span><span class="p">,</span> <span class="n">first_port</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * If it is not a communications device or the programming</span>
<span class="cm">	 * interface is greater than 6, give up.</span>
<span class="cm">	 *</span>
<span class="cm">	 * (Should we try to make guesses for multiport serial devices</span>
<span class="cm">	 * later?)</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">((((</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">class</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">!=</span> <span class="n">PCI_CLASS_COMMUNICATION_SERIAL</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	     <span class="p">((</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">class</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">!=</span> <span class="n">PCI_CLASS_COMMUNICATION_MODEM</span><span class="p">))</span> <span class="o">||</span>
	    <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">class</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * Do not access blacklisted devices that are known not to</span>
<span class="cm">	 * feature serial ports.</span>
<span class="cm">	 */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">blacklist</span> <span class="o">=</span> <span class="n">softmodem_blacklist</span><span class="p">;</span>
	     <span class="n">blacklist</span> <span class="o">&lt;</span> <span class="n">softmodem_blacklist</span> <span class="o">+</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">softmodem_blacklist</span><span class="p">);</span>
	     <span class="n">blacklist</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">vendor</span> <span class="o">==</span> <span class="n">blacklist</span><span class="o">-&gt;</span><span class="n">vendor</span> <span class="o">&amp;&amp;</span>
		    <span class="n">dev</span><span class="o">-&gt;</span><span class="n">device</span> <span class="o">==</span> <span class="n">blacklist</span><span class="o">-&gt;</span><span class="n">device</span><span class="p">)</span>
			<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">num_iomem</span> <span class="o">=</span> <span class="n">num_port</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">PCI_NUM_BAR_RESOURCES</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">pci_resource_flags</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">IORESOURCE_IO</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">num_port</span><span class="o">++</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">first_port</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
				<span class="n">first_port</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">pci_resource_flags</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">IORESOURCE_MEM</span><span class="p">)</span>
			<span class="n">num_iomem</span><span class="o">++</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/*</span>
<span class="cm">	 * If there is 1 or 0 iomem regions, and exactly one port,</span>
<span class="cm">	 * use it.  We guess the number of ports based on the IO</span>
<span class="cm">	 * region size.</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">num_iomem</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">num_port</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">board</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">=</span> <span class="n">first_port</span><span class="p">;</span>
		<span class="n">board</span><span class="o">-&gt;</span><span class="n">num_ports</span> <span class="o">=</span> <span class="n">pci_resource_len</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">first_port</span><span class="p">)</span> <span class="o">/</span> <span class="mi">8</span><span class="p">;</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/*</span>
<span class="cm">	 * Now guess if we&#39;ve got a board which indexes by BARs.</span>
<span class="cm">	 * Each IO BAR should be 8 bytes, and they should follow</span>
<span class="cm">	 * consecutively.</span>
<span class="cm">	 */</span>
	<span class="n">first_port</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">num_port</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">PCI_NUM_BAR_RESOURCES</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">pci_resource_flags</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">IORESOURCE_IO</span> <span class="o">&amp;&amp;</span>
		    <span class="n">pci_resource_len</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span> <span class="o">&amp;&amp;</span>
		    <span class="p">(</span><span class="n">first_port</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="p">(</span><span class="n">first_port</span> <span class="o">+</span> <span class="n">num_port</span><span class="p">)</span> <span class="o">==</span> <span class="n">i</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">num_port</span><span class="o">++</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">first_port</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
				<span class="n">first_port</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">num_port</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">board</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">=</span> <span class="n">first_port</span> <span class="o">|</span> <span class="n">FL_BASE_BARS</span><span class="p">;</span>
		<span class="n">board</span><span class="o">-&gt;</span><span class="n">num_ports</span> <span class="o">=</span> <span class="n">num_port</span><span class="p">;</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span>
<span class="nf">serial_pci_matches</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">,</span>
		   <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">guessed</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span>
	    <span class="n">board</span><span class="o">-&gt;</span><span class="n">num_ports</span> <span class="o">==</span> <span class="n">guessed</span><span class="o">-&gt;</span><span class="n">num_ports</span> <span class="o">&amp;&amp;</span>
	    <span class="n">board</span><span class="o">-&gt;</span><span class="n">base_baud</span> <span class="o">==</span> <span class="n">guessed</span><span class="o">-&gt;</span><span class="n">base_baud</span> <span class="o">&amp;&amp;</span>
	    <span class="n">board</span><span class="o">-&gt;</span><span class="n">uart_offset</span> <span class="o">==</span> <span class="n">guessed</span><span class="o">-&gt;</span><span class="n">uart_offset</span> <span class="o">&amp;&amp;</span>
	    <span class="n">board</span><span class="o">-&gt;</span><span class="n">reg_shift</span> <span class="o">==</span> <span class="n">guessed</span><span class="o">-&gt;</span><span class="n">reg_shift</span> <span class="o">&amp;&amp;</span>
	    <span class="n">board</span><span class="o">-&gt;</span><span class="n">first_offset</span> <span class="o">==</span> <span class="n">guessed</span><span class="o">-&gt;</span><span class="n">first_offset</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span>
<span class="nf">pciserial_init_ports</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">uart_port</span> <span class="n">serial_port</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_serial_quirk</span> <span class="o">*</span><span class="n">quirk</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rc</span><span class="p">,</span> <span class="n">nr_ports</span><span class="p">,</span> <span class="n">i</span><span class="p">;</span>

	<span class="n">nr_ports</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">num_ports</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * Find an init and setup quirks.</span>
<span class="cm">	 */</span>
	<span class="n">quirk</span> <span class="o">=</span> <span class="n">find_quirk</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="cm">/*</span>
<span class="cm">	 * Run the new-style initialization function.</span>
<span class="cm">	 * The initialization function returns:</span>
<span class="cm">	 *  &lt;0  - error</span>
<span class="cm">	 *   0  - use board-&gt;num_ports</span>
<span class="cm">	 *  &gt;0  - number of ports</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">rc</span> <span class="o">=</span> <span class="n">quirk</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">rc</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">priv</span> <span class="o">=</span> <span class="n">ERR_PTR</span><span class="p">(</span><span class="n">rc</span><span class="p">);</span>
			<span class="k">goto</span> <span class="n">err_out</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">rc</span><span class="p">)</span>
			<span class="n">nr_ports</span> <span class="o">=</span> <span class="n">rc</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">priv</span> <span class="o">=</span> <span class="n">kzalloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span><span class="p">)</span> <span class="o">+</span>
		       <span class="k">sizeof</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span> <span class="o">*</span> <span class="n">nr_ports</span><span class="p">,</span>
		       <span class="n">GFP_KERNEL</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">priv</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">priv</span> <span class="o">=</span> <span class="n">ERR_PTR</span><span class="p">(</span><span class="o">-</span><span class="n">ENOMEM</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">err_deinit</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span> <span class="o">=</span> <span class="n">dev</span><span class="p">;</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">quirk</span> <span class="o">=</span> <span class="n">quirk</span><span class="p">;</span>

	<span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">serial_port</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">uart_port</span><span class="p">));</span>
	<span class="n">serial_port</span><span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">UPF_SKIP_TEST</span> <span class="o">|</span> <span class="n">UPF_BOOT_AUTOCONF</span> <span class="o">|</span> <span class="n">UPF_SHARE_IRQ</span><span class="p">;</span>
	<span class="n">serial_port</span><span class="p">.</span><span class="n">uartclk</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">base_baud</span> <span class="o">*</span> <span class="mi">16</span><span class="p">;</span>
	<span class="n">serial_port</span><span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">get_pci_irq</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">board</span><span class="p">);</span>
	<span class="n">serial_port</span><span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nr_ports</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">setup</span><span class="p">(</span><span class="n">priv</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">serial_port</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
			<span class="k">break</span><span class="p">;</span>

<span class="cp">#ifdef SERIAL_DEBUG_PCI</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_DEBUG</span> <span class="s">&quot;Setup PCI port: port %lx, irq %d, type %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		       <span class="n">serial_port</span><span class="p">.</span><span class="n">iobase</span><span class="p">,</span> <span class="n">serial_port</span><span class="p">.</span><span class="n">irq</span><span class="p">,</span> <span class="n">serial_port</span><span class="p">.</span><span class="n">iotype</span><span class="p">);</span>
<span class="cp">#endif</span>

		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">serial8250_register_port</span><span class="p">(</span><span class="o">&amp;</span><span class="n">serial_port</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">printk</span><span class="p">(</span><span class="n">KERN_WARNING</span> <span class="s">&quot;Couldn&#39;t register serial port %s: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">pci_name</span><span class="p">(</span><span class="n">dev</span><span class="p">),</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">priv</span><span class="o">-&gt;</span><span class="n">nr</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">priv</span><span class="p">;</span>

<span class="nl">err_deinit:</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">exit</span><span class="p">)</span>
		<span class="n">quirk</span><span class="o">-&gt;</span><span class="n">exit</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
<span class="nl">err_out:</span>
	<span class="k">return</span> <span class="n">priv</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL_GPL</span><span class="p">(</span><span class="n">pciserial_init_ports</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">pciserial_remove_ports</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">pci_serial_quirk</span> <span class="o">*</span><span class="n">quirk</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">nr</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="n">serial8250_unregister_port</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">PCI_NUM_BAR_RESOURCES</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">remapped_bar</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
			<span class="n">iounmap</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">remapped_bar</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">remapped_bar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/*</span>
<span class="cm">	 * Find the exit quirks.</span>
<span class="cm">	 */</span>
	<span class="n">quirk</span> <span class="o">=</span> <span class="n">find_quirk</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">exit</span><span class="p">)</span>
		<span class="n">quirk</span><span class="o">-&gt;</span><span class="n">exit</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">kfree</span><span class="p">(</span><span class="n">priv</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL_GPL</span><span class="p">(</span><span class="n">pciserial_remove_ports</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">pciserial_suspend_ports</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">nr</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
			<span class="n">serial8250_suspend_port</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>

	<span class="cm">/*</span>
<span class="cm">	 * Ensure that every init quirk is properly torn down</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">exit</span><span class="p">)</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">exit</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL_GPL</span><span class="p">(</span><span class="n">pciserial_suspend_ports</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">pciserial_resume_ports</span><span class="p">(</span><span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * Ensure that the board is correctly configured.</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">)</span>
		<span class="n">priv</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">priv</span><span class="o">-&gt;</span><span class="n">nr</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
			<span class="n">serial8250_resume_port</span><span class="p">(</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL_GPL</span><span class="p">(</span><span class="n">pciserial_resume_ports</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * Probe one serial board.  Unfortunately, there is no rhyme nor reason</span>
<span class="cm"> * to the arrangement of serial ports on a PCI card.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">__devinit</span>
<span class="nf">pciserial_init_one</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">pci_device_id</span> <span class="o">*</span><span class="n">ent</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">pci_serial_quirk</span> <span class="o">*</span><span class="n">quirk</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">;</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">pciserial_board</span> <span class="o">*</span><span class="n">board</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pciserial_board</span> <span class="n">tmp</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rc</span><span class="p">;</span>

	<span class="n">quirk</span> <span class="o">=</span> <span class="n">find_quirk</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">probe</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">rc</span> <span class="o">=</span> <span class="n">quirk</span><span class="o">-&gt;</span><span class="n">probe</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">rc</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">rc</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">ent</span><span class="o">-&gt;</span><span class="n">driver_data</span> <span class="o">&gt;=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">pci_boards</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_ERR</span> <span class="s">&quot;pci_init_one: invalid driver_data: %ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">ent</span><span class="o">-&gt;</span><span class="n">driver_data</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">board</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pci_boards</span><span class="p">[</span><span class="n">ent</span><span class="o">-&gt;</span><span class="n">driver_data</span><span class="p">];</span>

	<span class="n">rc</span> <span class="o">=</span> <span class="n">pci_enable_device</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">pci_save_state</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">rc</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">rc</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">ent</span><span class="o">-&gt;</span><span class="n">driver_data</span> <span class="o">==</span> <span class="n">pbn_default</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/*</span>
<span class="cm">		 * Use a copy of the pci_board entry for this;</span>
<span class="cm">		 * avoid changing entries in the table.</span>
<span class="cm">		 */</span>
		<span class="n">memcpy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tmp</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pciserial_board</span><span class="p">));</span>
		<span class="n">board</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">tmp</span><span class="p">;</span>

		<span class="cm">/*</span>
<span class="cm">		 * We matched one of our class entries.  Try to</span>
<span class="cm">		 * determine the parameters of this board.</span>
<span class="cm">		 */</span>
		<span class="n">rc</span> <span class="o">=</span> <span class="n">serial_pci_guess_board</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tmp</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">rc</span><span class="p">)</span>
			<span class="k">goto</span> <span class="n">disable</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="cm">/*</span>
<span class="cm">		 * We matched an explicit entry.  If we are able to</span>
<span class="cm">		 * detect this boards settings with our heuristic,</span>
<span class="cm">		 * then we no longer need this entry.</span>
<span class="cm">		 */</span>
		<span class="n">memcpy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tmp</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pci_boards</span><span class="p">[</span><span class="n">pbn_default</span><span class="p">],</span>
		       <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pciserial_board</span><span class="p">));</span>
		<span class="n">rc</span> <span class="o">=</span> <span class="n">serial_pci_guess_board</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tmp</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">rc</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">serial_pci_matches</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tmp</span><span class="p">))</span>
			<span class="n">moan_device</span><span class="p">(</span><span class="s">&quot;Redundant entry in serial pci_table.&quot;</span><span class="p">,</span>
				    <span class="n">dev</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">priv</span> <span class="o">=</span> <span class="n">pciserial_init_ports</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">board</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IS_ERR</span><span class="p">(</span><span class="n">priv</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">pci_set_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">priv</span><span class="p">);</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">rc</span> <span class="o">=</span> <span class="n">PTR_ERR</span><span class="p">(</span><span class="n">priv</span><span class="p">);</span>

 <span class="nl">disable:</span>
	<span class="n">pci_disable_device</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">rc</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__devexit</span> <span class="nf">pciserial_remove_one</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">pci_get_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">pci_set_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">pciserial_remove_ports</span><span class="p">(</span><span class="n">priv</span><span class="p">);</span>

	<span class="n">pci_disable_device</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#ifdef CONFIG_PM</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">pciserial_suspend_one</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">pm_message_t</span> <span class="n">state</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">pci_get_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="p">)</span>
		<span class="n">pciserial_suspend_ports</span><span class="p">(</span><span class="n">priv</span><span class="p">);</span>

	<span class="n">pci_save_state</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">pci_set_power_state</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">pci_choose_state</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">state</span><span class="p">));</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pciserial_resume_one</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">err</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">pci_get_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="n">pci_set_power_state</span><span class="p">(</span><span class="n">dev</span><span class="p">,</span> <span class="n">PCI_D0</span><span class="p">);</span>
	<span class="n">pci_restore_state</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/*</span>
<span class="cm">		 * The device may have been disabled.  Re-enable it.</span>
<span class="cm">		 */</span>
		<span class="n">err</span> <span class="o">=</span> <span class="n">pci_enable_device</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
		<span class="cm">/* FIXME: We cannot simply error out here */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span>
			<span class="n">printk</span><span class="p">(</span><span class="n">KERN_ERR</span> <span class="s">&quot;pciserial: Unable to re-enable ports, trying to continue.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">pciserial_resume_ports</span><span class="p">(</span><span class="n">priv</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pci_device_id</span> <span class="n">serial_pci_tbl</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* Advantech use PCI_DEVICE_ID_ADVANTECH_PCI3620 (0x3620) as &#39;PCI_SUBVENDOR_ID&#39; */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADVANTECH</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_ADVANTECH_PCI3620</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADVANTECH_PCI3620</span><span class="p">,</span> <span class="mh">0x0001</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_8_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V960</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH8_232</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_8_1382400</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V960</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH4_232</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_4_1382400</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V960</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH2_232</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_2_1382400</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V351</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH8_232</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_8_1382400</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V351</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH4_232</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_4_1382400</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V351</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH2_232</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_2_1382400</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V351</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH8_485</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_8_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V351</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH8_485_4_4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_8_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V351</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH4_485</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V351</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH4_485_2_2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V351</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH2_485</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_2_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V351</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH8_485_2_6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_8_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V351</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH081101V1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_8_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V351</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH041101V1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_V3</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_V3_V351</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_BH2_20MHZ</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_2_1250000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_OXSEMI_16PCI954</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_TITAN_2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_2_1843200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_OXSEMI_16PCI954</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_TITAN_4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_1843200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_OXSEMI_16PCI954</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_AFAVLAB</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_AFAVLAB_P061</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_1152000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C152</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_PCI_UART_2_232</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_2_1843200_200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C154</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_PCI_UART_4_232</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_1843200_200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C158</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_PCI_UART_8_232</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_8_1843200_200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C152</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_PCI_UART_1_1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_2_1843200_200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C154</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_PCI_UART_2_2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_1843200_200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C158</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_PCI_UART_4_4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_8_1843200_200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C152</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_PCI_UART_2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_2_1843200_200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C154</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_PCI_UART_4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_1843200_200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C158</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_PCI_UART_8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_8_1843200_200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C152</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_PCI_UART_2_485</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_2_1843200_200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C154</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_PCI_UART_4_485</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_1843200_200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C158</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CONNECT_TECH</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CONNECT_TECH_PCI_UART_8_485</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_8_1843200_200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C152</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_IBM</span><span class="p">,</span> <span class="n">PCI_SUBDEVICE_ID_IBM_SATURN_SERIAL_ONE_PORT</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_exar_ibm_saturn</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SEALEVEL</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SEALEVEL_U530</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_bt_1_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SEALEVEL</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SEALEVEL_UCOMM2</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_bt_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SEALEVEL</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SEALEVEL_UCOMM422</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_bt_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SEALEVEL</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SEALEVEL_UCOMM232</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_bt_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SEALEVEL</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SEALEVEL_COMM4</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_bt_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SEALEVEL</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SEALEVEL_COMM8</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_8_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SEALEVEL</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SEALEVEL_7803</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_8_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SEALEVEL</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SEALEVEL_UCOMM8</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_8_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_GTEK_SERIAL2</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_bt_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_SPCOM200</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_bt_2_921600</span> <span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * VScom SPCOM800, from sl@s.pl</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_SPCOM800</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_8_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_1077</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_4_921600</span> <span class="p">},</span>
	<span class="cm">/* Unknown card - subdevice 0x1584 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_9050</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_UNKNOWN_0x1584</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_9050</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_KEYSPAN</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_KEYSPAN_SX2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_panacom</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PANACOM</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PANACOM_QUADMODEM</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_panacom4</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PANACOM</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PANACOM_DUALMODEM</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_panacom2</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_9030</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_ESDGMBH</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ESDGMBH_CPCIASIO4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_9050</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CHASE_PCIFAST</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CHASE_PCIFAST4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_4_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_9050</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CHASE_PCIFAST</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CHASE_PCIFAST8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_8_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_9050</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CHASE_PCIFAST</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CHASE_PCIFAST16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_16_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_9050</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CHASE_PCIFAST</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CHASE_PCIFAST16FMC</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_16_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_9050</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CHASE_PCIRAS</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CHASE_PCIRAS4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_4_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_9050</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_CHASE_PCIRAS</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_CHASE_PCIRAS8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_8_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_9050</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_EXSYS</span><span class="p">,</span>
		<span class="n">PCI_SUBDEVICE_ID_EXSYS_4055</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_exsys_4055</span> <span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Megawolf Romulus PCI Serial Card, from Mike Hudson</span>
<span class="cm">	 * (Exoray@isys.ca)</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_ROMULUS</span><span class="p">,</span>
		<span class="mh">0x10b5</span><span class="p">,</span> <span class="mh">0x106a</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_plx_romulus</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_QUATECH</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_QUATECH_QSC100</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_QUATECH</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_QUATECH_DSC100</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_QUATECH</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_QUATECH_ESC100D</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_8_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_QUATECH</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_QUATECH_ESC100M</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_8_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SPECIALIX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_OXSEMI_16PCI954</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_SPECIALIX</span><span class="p">,</span> <span class="n">PCI_SUBDEVICE_ID_SPECIALIX_SPEED4</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_OXSEMI_16PCI954</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_SUBDEVICE_ID_SIIG_QUARTET_SERIAL</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_1152000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0x9505</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_2_921600</span> <span class="p">},</span>

		<span class="cm">/*</span>
<span class="cm">		 * The below card is a little controversial since it is the</span>
<span class="cm">		 * subject of a PCI vendor/device ID clash.  (See</span>
<span class="cm">		 * www.ussg.iu.edu/hypermail/linux/kernel/0303.1/0516.html).</span>
<span class="cm">		 * For now just used the hex ID 0x950a.</span>
<span class="cm">		 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0x950a</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_SUBDEVICE_ID_SIIG_DUAL_SERIAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0x950a</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_2_1130000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_OXSEMI_C950</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="n">PCI_SUBDEVICE_ID_OXSEMI_C950</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_OXSEMI_16PCI954</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_OXSEMI_16PCI952</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_2_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_OXSEMI_16PCI958</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span> <span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_8_1152000</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Oxford Semiconductor Inc. Tornado PCI express device range.</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc101</span><span class="p">,</span>    <span class="cm">/* OXPCIe952 1 Legacy UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc105</span><span class="p">,</span>    <span class="cm">/* OXPCIe952 1 Legacy UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc11b</span><span class="p">,</span>    <span class="cm">/* OXPCIe952 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc11f</span><span class="p">,</span>    <span class="cm">/* OXPCIe952 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc120</span><span class="p">,</span>    <span class="cm">/* OXPCIe952 1 Legacy UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc124</span><span class="p">,</span>    <span class="cm">/* OXPCIe952 1 Legacy UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc138</span><span class="p">,</span>    <span class="cm">/* OXPCIe952 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc13d</span><span class="p">,</span>    <span class="cm">/* OXPCIe952 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc140</span><span class="p">,</span>    <span class="cm">/* OXPCIe952 1 Legacy UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc141</span><span class="p">,</span>    <span class="cm">/* OXPCIe952 1 Legacy UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc144</span><span class="p">,</span>    <span class="cm">/* OXPCIe952 1 Legacy UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc145</span><span class="p">,</span>    <span class="cm">/* OXPCIe952 1 Legacy UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc158</span><span class="p">,</span>    <span class="cm">/* OXPCIe952 2 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_2_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc15d</span><span class="p">,</span>    <span class="cm">/* OXPCIe952 2 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_2_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc208</span><span class="p">,</span>    <span class="cm">/* OXPCIe954 4 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_4_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc20d</span><span class="p">,</span>    <span class="cm">/* OXPCIe954 4 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_4_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc308</span><span class="p">,</span>    <span class="cm">/* OXPCIe958 8 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_8_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc30d</span><span class="p">,</span>    <span class="cm">/* OXPCIe958 8 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_8_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc40b</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc40f</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc41b</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc41f</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc42b</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc42f</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc43b</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc43f</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc44b</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc44f</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc45b</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc45f</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc46b</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc46f</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc47b</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc47f</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc48b</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc48f</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc49b</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc49f</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc4ab</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc4af</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc4bb</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc4bf</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc4cb</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="mh">0xc4cf</span><span class="p">,</span>    <span class="cm">/* OXPCIe200 1 Native UART */</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Mainpine Inc. IQ Express &quot;Rev3&quot; utilizing OxSemi Tornado</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x4000</span><span class="p">,</span>	<span class="cm">/* IQ Express 1 Port V.34 Super-G3 Fax */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x4001</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x4000</span><span class="p">,</span>	<span class="cm">/* IQ Express 2 Port V.34 Super-G3 Fax */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x4002</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_2_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x4000</span><span class="p">,</span>	<span class="cm">/* IQ Express 4 Port V.34 Super-G3 Fax */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x4004</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_4_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x4000</span><span class="p">,</span>	<span class="cm">/* IQ Express 8 Port V.34 Super-G3 Fax */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x4008</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_8_4000000</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Digi/IBM PCIe 2-port Async EIA-232 Adapter utilizing OxSemi Tornado</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_DIGI</span><span class="p">,</span> <span class="n">PCIE_DEVICE_ID_NEO_2_OX_IBM</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_IBM</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_2_4000000</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * SBS Technologies, Inc. P-Octal and PMC-OCTPRO cards,</span>
<span class="cm">	 * from skokodyn@yahoo.com</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SBSMODULARIO</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_OCTPRO</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_SBSMODULARIO</span><span class="p">,</span> <span class="n">PCI_SUBDEVICE_ID_OCTPRO232</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_sbsxrsio</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SBSMODULARIO</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_OCTPRO</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_SBSMODULARIO</span><span class="p">,</span> <span class="n">PCI_SUBDEVICE_ID_OCTPRO422</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_sbsxrsio</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SBSMODULARIO</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_OCTPRO</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_SBSMODULARIO</span><span class="p">,</span> <span class="n">PCI_SUBDEVICE_ID_POCTAL232</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_sbsxrsio</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SBSMODULARIO</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_OCTPRO</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_SBSMODULARIO</span><span class="p">,</span> <span class="n">PCI_SUBDEVICE_ID_POCTAL422</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_sbsxrsio</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Digitan DS560-558, from jimd@esoft.com</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ATT</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_ATT_VENUS_MODEM</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_1_115200</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Titan Electronic cards</span>
<span class="cm">	 *  The 400L and 800L have a custom setup quirk.</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_100</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_200</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_2_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_400</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_800B</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_100L</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_1_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_200L</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_bt_2_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_400L</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_800L</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_8_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_200I</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b4_bt_2_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_400I</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b4_bt_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_800I</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b4_bt_8_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_400EH</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_800EH</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_800EHB</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_100E</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_1_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_200E</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_2_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_400E</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_4_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_800E</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_8_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_200EI</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_2_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_200EISI</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi_2_4000000</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_400V3</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_410V3</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_800V3</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TITAN</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TITAN_800V3B</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_1S_10x_550</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_1_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_1S_10x_650</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_1_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_1S_10x_850</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_1_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_2S_10x_550</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_bt_2_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_2S_10x_650</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_bt_2_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_2S_10x_850</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_bt_2_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_4S_10x_550</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_bt_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_4S_10x_650</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_bt_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_4S_10x_850</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_bt_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_1S_20x_550</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_1S_20x_650</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_1S_20x_850</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_2S_20x_550</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_2_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_2S_20x_650</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_2_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_2S_20x_850</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_2_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_4S_20x_550</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_4S_20x_650</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_4S_20x_850</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_8S_20x_550</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_8_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_8S_20x_650</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_8_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SIIG</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SIIG_8S_20x_850</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_8_921600</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Computone devices submitted by Doug McNash dmcnash@computone.com</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_COMPUTONE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_COMPUTONE_PG</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_COMPUTONE</span><span class="p">,</span> <span class="n">PCI_SUBDEVICE_ID_COMPUTONE_PG4</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_computone_4</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_COMPUTONE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_COMPUTONE_PG</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_COMPUTONE</span><span class="p">,</span> <span class="n">PCI_SUBDEVICE_ID_COMPUTONE_PG8</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_computone_8</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_COMPUTONE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_COMPUTONE_PG</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_COMPUTONE</span><span class="p">,</span> <span class="n">PCI_SUBDEVICE_ID_COMPUTONE_PG6</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_computone_6</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_OXSEMI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_OXSEMI_16PCI95N</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_oxsemi</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TIMEDIA</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TIMEDIA_1889</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_TIMEDIA</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_1_921600</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * AFAVLAB serial card, from Harald Welte &lt;laforge@gnumonks.org&gt;</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_AFAVLAB</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_AFAVLAB_P028</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_8_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_AFAVLAB</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_AFAVLAB_P030</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_8_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_LAVA</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_LAVA_DSERIAL</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_LAVA</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_LAVA_QUATRO_A</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_LAVA</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_LAVA_QUATRO_B</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_LAVA</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_LAVA_QUATTRO_A</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_LAVA</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_LAVA_QUATTRO_B</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_LAVA</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_LAVA_OCTO_A</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_4_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_LAVA</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_LAVA_OCTO_B</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_4_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_LAVA</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_LAVA_PORT_PLUS</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_2_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_LAVA</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_LAVA_QUAD_A</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_2_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_LAVA</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_LAVA_QUAD_B</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_2_460800</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_LAVA</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_LAVA_SSERIAL</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_1_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_LAVA</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_LAVA_PORT_650</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_bt_1_460800</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Korenix Jetcard F0/F1 cards (JC1204, JC1208, JC1404, JC1408).</span>
<span class="cm">	 * Cards are identified by their subsystem vendor IDs, which</span>
<span class="cm">	 * (in hex) match the model number.</span>
<span class="cm">	 *</span>
<span class="cm">	 * Note that JC140x are RS422/485 cards which require ox950</span>
<span class="cm">	 * ACR = 0x10, and as such are not currently fully supported.</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_KORENIX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_KORENIX_JETCARDF0</span><span class="p">,</span>
		<span class="mh">0x1204</span><span class="p">,</span> <span class="mh">0x0004</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_KORENIX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_KORENIX_JETCARDF0</span><span class="p">,</span>
		<span class="mh">0x1208</span><span class="p">,</span> <span class="mh">0x0004</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>
<span class="cm">/*	{	PCI_VENDOR_ID_KORENIX, PCI_DEVICE_ID_KORENIX_JETCARDF0,</span>
<span class="cm">		0x1402, 0x0002, 0, 0,</span>
<span class="cm">		pbn_b0_2_921600 }, */</span>
<span class="cm">/*	{	PCI_VENDOR_ID_KORENIX, PCI_DEVICE_ID_KORENIX_JETCARDF0,</span>
<span class="cm">		0x1404, 0x0004, 0, 0,</span>
<span class="cm">		pbn_b0_4_921600 }, */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_KORENIX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_KORENIX_JETCARDF1</span><span class="p">,</span>
		<span class="mh">0x1208</span><span class="p">,</span> <span class="mh">0x0004</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_KORENIX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_KORENIX_JETCARDF2</span><span class="p">,</span>
		<span class="mh">0x1204</span><span class="p">,</span> <span class="mh">0x0004</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_KORENIX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_KORENIX_JETCARDF2</span><span class="p">,</span>
		<span class="mh">0x1208</span><span class="p">,</span> <span class="mh">0x0004</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_KORENIX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_KORENIX_JETCARDF3</span><span class="p">,</span>
		<span class="mh">0x1208</span><span class="p">,</span> <span class="mh">0x0004</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_921600</span> <span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Dell Remote Access Card 4 - Tim_T_Murphy@Dell.com</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_DELL</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_DELL_RAC4</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_1_1382400</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Dell Remote Access Card III - Tim_T_Murphy@Dell.com</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_DELL</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_DELL_RACIII</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_1_1382400</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * RAStel 2 port modem, gerg@moreton.com.au</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_MORETON</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_RASTEL_2PORT</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_bt_2_115200</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * EKF addition for i960 Boards form EKF with serial port</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_INTEL</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_INTEL_80960_RP</span><span class="p">,</span>
		<span class="mh">0xE4BF</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_intel_i960</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Xircom Cardbus/Ethernet combos</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_XIRCOM</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_XIRCOM_X3201_MDM</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_115200</span> <span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Xircom RBM56G cardbus modem - Dirk Arnold (temp entry)</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_XIRCOM</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_XIRCOM_RBM56G</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_115200</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Untested PCI modems, sent in from various folks...</span>
<span class="cm">	 */</span>

	<span class="cm">/*</span>
<span class="cm">	 * Elsa Model 56K PCI Modem, from Andreas Rath &lt;arh@01019freenet.de&gt;</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ROCKWELL</span><span class="p">,</span> <span class="mh">0x1004</span><span class="p">,</span>
		<span class="mh">0x1048</span><span class="p">,</span> <span class="mh">0x1500</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_1_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_SGI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_SGI_IOC3</span><span class="p">,</span>
		<span class="mh">0xFF00</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_sgi_ioc3</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * HP Diva card</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_HP</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_HP_DIVA</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_HP</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_HP_DIVA_RMP3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_1_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_HP</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_HP_DIVA</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_5_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_HP</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_HP_DIVA_AUX</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b2_1_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_DCI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_DCI_PCCOM2</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b3_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_DCI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_DCI_PCCOM4</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b3_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_DCI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_DCI_PCCOM8</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b3_8_115200</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Exar Corp. XR17C15[248] Dual/Quad/Octal UART</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C152</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="n">pbn_exar_XR17C152</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C154</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="n">pbn_exar_XR17C154</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_EXAR</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_EXAR_XR17C158</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="n">pbn_exar_XR17C158</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Topic TP560 Data/Fax/Voice 56k modem (reported by Evan Clarke)</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_TOPIC</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_TOPIC_TP560</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_115200</span> <span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * ITE</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ITE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_ITE_8872</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_bt_1_115200</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * IntaShield IS-200</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_INTASHIELD</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_INTASHIELD_IS200</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/* 135a.0811 */</span>
		<span class="n">pbn_b2_2_115200</span> <span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * IntaShield IS-400</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_INTASHIELD</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_INTASHIELD_IS400</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>    <span class="cm">/* 135a.0dc0 */</span>
		<span class="n">pbn_b2_4_115200</span> <span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Perle PCI-RAS cards</span>
<span class="cm">	 */</span>
	<span class="p">{</span>       <span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_9030</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_PERLE</span><span class="p">,</span> <span class="n">PCI_SUBDEVICE_ID_PCI_RAS4</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b2_4_921600</span> <span class="p">},</span>
	<span class="p">{</span>       <span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_9030</span><span class="p">,</span>
		<span class="n">PCI_SUBVENDOR_ID_PERLE</span><span class="p">,</span> <span class="n">PCI_SUBDEVICE_ID_PCI_RAS8</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b2_8_921600</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Mainpine series cards: Fairly standard layout but fools</span>
<span class="cm">	 * parts of the autodetect in some cases and uses otherwise</span>
<span class="cm">	 * unmatched communications subclasses in the PCI Express case</span>
<span class="cm">	 */</span>

	<span class="p">{</span>	<span class="cm">/* RockForceDUO */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x0200</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceQUATRO */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x0300</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceDUO+ */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x0400</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceQUATRO+ */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x0500</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForce+ */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x0600</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForce+ */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x0700</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceOCTO+ */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x0800</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_8_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceDUO+ */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x0C00</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceQUARTRO+ */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x0D00</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceOCTO+ */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x1D00</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_8_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceD1 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x2000</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_1_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceF1 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x2100</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_1_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceD2 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x2200</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceF2 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x2300</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceD4 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x2400</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceF4 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x2500</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceD8 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x2600</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_8_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RockForceF8 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x2700</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_8_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* IQ Express D1 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x3000</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_1_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* IQ Express F1 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x3100</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_1_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* IQ Express D2 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x3200</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* IQ Express F2 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x3300</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* IQ Express D4 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x3400</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* IQ Express F4 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x3500</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* IQ Express D8 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x3C00</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_8_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* IQ Express F8 */</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_MAINPINE_PBRIDGE</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_MAINPINE</span><span class="p">,</span> <span class="mh">0x3D00</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_8_115200</span> <span class="p">},</span>


	<span class="cm">/*</span>
<span class="cm">	 * PA Semi PA6T-1682M on-chip UART</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PASEMI</span><span class="p">,</span> <span class="mh">0xa004</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_pasemi_1682M</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * National Instruments</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PCI23216</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_16_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PCI2328</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_8_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PCI2324</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_bt_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PCI2322</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_bt_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PCI2324I</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_bt_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PCI2322I</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_bt_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PXI8420_23216</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_16_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PXI8420_2328</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_8_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PXI8420_2324</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_bt_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PXI8420_2322</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_bt_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PXI8422_2324</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_bt_4_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PXI8422_2322</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_bt_2_115200</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PXI8430_2322</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ni8430_2</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PCI8430_2322</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ni8430_2</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PXI8430_2324</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ni8430_4</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PCI8430_2324</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ni8430_4</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PXI8430_2328</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ni8430_8</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PCI8430_2328</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ni8430_8</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PXI8430_23216</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ni8430_16</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PCI8430_23216</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ni8430_16</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PXI8432_2322</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ni8430_2</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PCI8432_2322</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ni8430_2</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PXI8432_2324</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ni8430_4</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NI</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NI_PCI8432_2324</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ni8430_4</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	* ADDI-DATA GmbH communication cards &lt;info@addi-data.com&gt;</span>
<span class="cm">	*/</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCI7500</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCI7420</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_2_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCI7300</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA_OLD</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCI7800</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b1_8_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCI7500_2</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCI7420_2</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_2_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCI7300_2</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCI7500_3</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_4_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCI7420_3</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_2_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCI7300_3</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_1_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCI7800_3</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_b0_8_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCIe7500</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ADDIDATA_PCIe_4_3906250</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCIe7420</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ADDIDATA_PCIe_2_3906250</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCIe7300</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ADDIDATA_PCIe_1_3906250</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_ADDIDATA</span><span class="p">,</span>
		<span class="n">PCI_DEVICE_ID_ADDIDATA_APCIe7800</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ADDIDATA_PCIe_8_3906250</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NETMOS</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NETMOS_9835</span><span class="p">,</span>
		<span class="n">PCI_VENDOR_ID_IBM</span><span class="p">,</span> <span class="mh">0x0299</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_bt_2_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NETMOS</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NETMOS_9901</span><span class="p">,</span>
		<span class="mh">0xA000</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_1_115200</span> <span class="p">},</span>

	<span class="cm">/* the 9901 is a rebranded 9912 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NETMOS</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NETMOS_9912</span><span class="p">,</span>
		<span class="mh">0xA000</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_1_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NETMOS</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NETMOS_9922</span><span class="p">,</span>
		<span class="mh">0xA000</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_1_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NETMOS</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NETMOS_9904</span><span class="p">,</span>
		<span class="mh">0xA000</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_1_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NETMOS</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NETMOS_9900</span><span class="p">,</span>
		<span class="mh">0xA000</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_1_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NETMOS</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NETMOS_9900</span><span class="p">,</span>
		<span class="mh">0xA000</span><span class="p">,</span> <span class="mh">0x3002</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_NETMOS9900_2s_115200</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Best Connectivity and Rosewill PCI Multi I/O cards</span>
<span class="cm">	 */</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NETMOS</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NETMOS_9865</span><span class="p">,</span>
		<span class="mh">0xA000</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_1_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NETMOS</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NETMOS_9865</span><span class="p">,</span>
		<span class="mh">0xA000</span><span class="p">,</span> <span class="mh">0x3002</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_bt_2_115200</span> <span class="p">},</span>

	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_NETMOS</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_NETMOS_9865</span><span class="p">,</span>
		<span class="mh">0xA000</span><span class="p">,</span> <span class="mh">0x3004</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pbn_b0_bt_4_115200</span> <span class="p">},</span>
	<span class="cm">/* Intel CE4100 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_INTEL</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_INTEL_CE4100_UART</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span>  <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_ce4100_1_115200</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Cronyx Omega PCI</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_VENDOR_ID_PLX</span><span class="p">,</span> <span class="n">PCI_DEVICE_ID_PLX_CRONYX_OMEGA</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">pbn_omegapci</span> <span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * These entries match devices with class COMMUNICATION_SERIAL,</span>
<span class="cm">	 * COMMUNICATION_MODEM or COMMUNICATION_MULTISERIAL</span>
<span class="cm">	 */</span>
	<span class="p">{</span>	<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_CLASS_COMMUNICATION_SERIAL</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">,</span>
		<span class="mh">0xffff00</span><span class="p">,</span> <span class="n">pbn_default</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_CLASS_COMMUNICATION_MODEM</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">,</span>
		<span class="mh">0xffff00</span><span class="p">,</span> <span class="n">pbn_default</span> <span class="p">},</span>
	<span class="p">{</span>	<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_ANY_ID</span><span class="p">,</span> <span class="n">PCI_ANY_ID</span><span class="p">,</span>
		<span class="n">PCI_CLASS_COMMUNICATION_MULTISERIAL</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">,</span>
		<span class="mh">0xffff00</span><span class="p">,</span> <span class="n">pbn_default</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">pci_ers_result_t</span> <span class="nf">serial8250_io_error_detected</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>
						<span class="n">pci_channel_state_t</span> <span class="n">state</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">pci_get_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">state</span> <span class="o">==</span> <span class="n">pci_channel_io_perm_failure</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">PCI_ERS_RESULT_DISCONNECT</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="p">)</span>
		<span class="n">pciserial_suspend_ports</span><span class="p">(</span><span class="n">priv</span><span class="p">);</span>

	<span class="n">pci_disable_device</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">PCI_ERS_RESULT_NEED_RESET</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">pci_ers_result_t</span> <span class="nf">serial8250_io_slot_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">rc</span><span class="p">;</span>

	<span class="n">rc</span> <span class="o">=</span> <span class="n">pci_enable_device</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">rc</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">PCI_ERS_RESULT_DISCONNECT</span><span class="p">;</span>

	<span class="n">pci_restore_state</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">pci_save_state</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">PCI_ERS_RESULT_RECOVERED</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">serial8250_io_resume</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_private</span> <span class="o">*</span><span class="n">priv</span> <span class="o">=</span> <span class="n">pci_get_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">priv</span><span class="p">)</span>
		<span class="n">pciserial_resume_ports</span><span class="p">(</span><span class="n">priv</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pci_error_handlers</span> <span class="n">serial8250_err_handler</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">error_detected</span> <span class="o">=</span> <span class="n">serial8250_io_error_detected</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slot_reset</span> <span class="o">=</span> <span class="n">serial8250_io_slot_reset</span><span class="p">,</span>
	<span class="p">.</span><span class="n">resume</span> <span class="o">=</span> <span class="n">serial8250_io_resume</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pci_driver</span> <span class="n">serial_pci_driver</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;serial&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">probe</span>		<span class="o">=</span> <span class="n">pciserial_init_one</span><span class="p">,</span>
	<span class="p">.</span><span class="n">remove</span>		<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pciserial_remove_one</span><span class="p">),</span>
<span class="cp">#ifdef CONFIG_PM</span>
	<span class="p">.</span><span class="n">suspend</span>	<span class="o">=</span> <span class="n">pciserial_suspend_one</span><span class="p">,</span>
	<span class="p">.</span><span class="n">resume</span>		<span class="o">=</span> <span class="n">pciserial_resume_one</span><span class="p">,</span>
<span class="cp">#endif</span>
	<span class="p">.</span><span class="n">id_table</span>	<span class="o">=</span> <span class="n">serial_pci_tbl</span><span class="p">,</span>
	<span class="p">.</span><span class="n">err_handler</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">serial8250_err_handler</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__init</span> <span class="nf">serial8250_pci_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">pci_register_driver</span><span class="p">(</span><span class="o">&amp;</span><span class="n">serial_pci_driver</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__exit</span> <span class="nf">serial8250_pci_exit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">pci_unregister_driver</span><span class="p">(</span><span class="o">&amp;</span><span class="n">serial_pci_driver</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">module_init</span><span class="p">(</span><span class="n">serial8250_pci_init</span><span class="p">);</span>
<span class="n">module_exit</span><span class="p">(</span><span class="n">serial8250_pci_exit</span><span class="p">);</span>

<span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span>
<span class="n">MODULE_DESCRIPTION</span><span class="p">(</span><span class="s">&quot;Generic 8250/16x50 PCI serial probe module&quot;</span><span class="p">);</span>
<span class="n">MODULE_DEVICE_TABLE</span><span class="p">(</span><span class="n">pci</span><span class="p">,</span> <span class="n">serial_pci_tbl</span><span class="p">);</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
