<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › tty › serial › 8250 › serial_cs.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>serial_cs.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*======================================================================</span>

<span class="cm">    A driver for PCMCIA serial devices</span>

<span class="cm">    serial_cs.c 1.134 2002/05/04 05:48:53</span>

<span class="cm">    The contents of this file are subject to the Mozilla Public</span>
<span class="cm">    License Version 1.1 (the &quot;License&quot;); you may not use this file</span>
<span class="cm">    except in compliance with the License. You may obtain a copy of</span>
<span class="cm">    the License at http://www.mozilla.org/MPL/</span>

<span class="cm">    Software distributed under the License is distributed on an &quot;AS</span>
<span class="cm">    IS&quot; basis, WITHOUT WARRANTY OF ANY KIND, either express or</span>
<span class="cm">    implied. See the License for the specific language governing</span>
<span class="cm">    rights and limitations under the License.</span>

<span class="cm">    The initial developer of the original code is David A. Hinds</span>
<span class="cm">    &lt;dahinds@users.sourceforge.net&gt;.  Portions created by David A. Hinds</span>
<span class="cm">    are Copyright (C) 1999 David A. Hinds.  All Rights Reserved.</span>

<span class="cm">    Alternatively, the contents of this file may be used under the</span>
<span class="cm">    terms of the GNU General Public License version 2 (the &quot;GPL&quot;), in which</span>
<span class="cm">    case the provisions of the GPL are applicable instead of the</span>
<span class="cm">    above.  If you wish to allow the use of your version of this file</span>
<span class="cm">    only under the terms of the GPL and not to allow others to use</span>
<span class="cm">    your version of this file under the MPL, indicate your decision</span>
<span class="cm">    by deleting the provisions above and replace them with the notice</span>
<span class="cm">    and other provisions required by the GPL.  If you do not delete</span>
<span class="cm">    the provisions above, a recipient may use your version of this</span>
<span class="cm">    file under either the MPL or the GPL.</span>
<span class="cm">    </span>
<span class="cm">======================================================================*/</span>

<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/moduleparam.h&gt;</span>
<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/ptrace.h&gt;</span>
<span class="cp">#include &lt;linux/slab.h&gt;</span>
<span class="cp">#include &lt;linux/string.h&gt;</span>
<span class="cp">#include &lt;linux/timer.h&gt;</span>
<span class="cp">#include &lt;linux/serial_core.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;linux/major.h&gt;</span>
<span class="cp">#include &lt;asm/io.h&gt;</span>

<span class="cp">#include &lt;pcmcia/cistpl.h&gt;</span>
<span class="cp">#include &lt;pcmcia/ciscode.h&gt;</span>
<span class="cp">#include &lt;pcmcia/ds.h&gt;</span>
<span class="cp">#include &lt;pcmcia/cisreg.h&gt;</span>

<span class="cp">#include &quot;8250.h&quot;</span>


<span class="cm">/*====================================================================*/</span>

<span class="cm">/* Parameters that can be set with &#39;insmod&#39; */</span>

<span class="cm">/* Enable the speaker? */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">do_sound</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="cm">/* Skip strict UART tests? */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">buggy_uart</span><span class="p">;</span>

<span class="n">module_param</span><span class="p">(</span><span class="n">do_sound</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param</span><span class="p">(</span><span class="n">buggy_uart</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>

<span class="cm">/*====================================================================*/</span>

<span class="cm">/* Table of multi-port card ID&#39;s */</span>

<span class="k">struct</span> <span class="n">serial_quirk</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">manfid</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">prodid</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">multi</span><span class="p">;</span>		<span class="cm">/* 1 = multifunction, &gt; 1 = # ports */</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">config</span><span class="p">)(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">setup</span><span class="p">)(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">wakeup</span><span class="p">)(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">post</span><span class="p">)(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">serial_info</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">pcmcia_device</span>	<span class="o">*</span><span class="n">p_dev</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">ndev</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">multi</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">slave</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">manfid</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">prodid</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">c950ctrl</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">line</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">serial_quirk</span> <span class="o">*</span><span class="n">quirk</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">serial_cfg_mem</span> <span class="p">{</span>
	<span class="n">tuple_t</span> <span class="n">tuple</span><span class="p">;</span>
	<span class="n">cisparse_t</span> <span class="n">parse</span><span class="p">;</span>
	<span class="n">u_char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * vers_1 5.0, &quot;Brain Boxes&quot;, &quot;2-Port RS232 card&quot;, &quot;r6&quot;</span>
<span class="cm"> * manfid 0x0160, 0x0104</span>
<span class="cm"> * This card appears to have a 14.7456MHz clock.</span>
<span class="cm"> */</span>
<span class="cm">/* Generic Modem: MD55x (GPRS/EDGE) have</span>
<span class="cm"> * Elan VPU16551 UART with 14.7456MHz oscillator</span>
<span class="cm"> * manfid 0x015D, 0x4C45</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">quirk_setup_brainboxes_0104</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">link</span><span class="p">,</span> <span class="k">struct</span> <span class="n">uart_port</span> <span class="o">*</span><span class="n">port</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">port</span><span class="o">-&gt;</span><span class="n">uartclk</span> <span class="o">=</span> <span class="mi">14745600</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">quirk_post_ibm</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">link</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u8</span> <span class="n">val</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="n">ret</span> <span class="o">=</span> <span class="n">pcmcia_read_config_byte</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="mh">0x800</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">val</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span><span class="p">)</span>
		<span class="k">goto</span> <span class="n">failed</span><span class="p">;</span>

	<span class="n">ret</span> <span class="o">=</span> <span class="n">pcmcia_write_config_byte</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="mh">0x800</span><span class="p">,</span> <span class="n">val</span> <span class="o">|</span> <span class="mi">1</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span><span class="p">)</span>
		<span class="k">goto</span> <span class="n">failed</span><span class="p">;</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

 <span class="nl">failed:</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Nokia cards are not really multiport cards.  Shouldn&#39;t this</span>
<span class="cm"> * be handled by setting the quirk entry .multi = 0 | 1 ?</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">quirk_config_nokia</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">link</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">multi</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">info</span><span class="o">-&gt;</span><span class="n">multi</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">quirk_wakeup_oxsemi</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">link</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">c950ctrl</span><span class="p">)</span>
		<span class="n">outb</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">c950ctrl</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* request_region? oxsemi branch does no request_region too... */</span>
<span class="cm">/*</span>
<span class="cm"> * This sequence is needed to properly initialize MC45 attached to OXCF950.</span>
<span class="cm"> * I tried decreasing these msleep()s, but it worked properly (survived</span>
<span class="cm"> * 1000 stop/start operations) with these timeouts (or bigger).</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">quirk_wakeup_possio_gcc</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">link</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ctrl</span> <span class="o">=</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">c950ctrl</span><span class="p">;</span>

	<span class="n">outb</span><span class="p">(</span><span class="mh">0xA</span><span class="p">,</span> <span class="n">ctrl</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
	<span class="n">outb</span><span class="p">(</span><span class="mh">0xE</span><span class="p">,</span> <span class="n">ctrl</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
	<span class="n">outb</span><span class="p">(</span><span class="mh">0xC</span><span class="p">,</span> <span class="n">ctrl</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
	<span class="n">outb</span><span class="p">(</span><span class="mh">0xE</span><span class="p">,</span> <span class="n">ctrl</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
	<span class="n">outb</span><span class="p">(</span><span class="mh">0xF</span><span class="p">,</span> <span class="n">ctrl</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
	<span class="n">outb</span><span class="p">(</span><span class="mh">0xE</span><span class="p">,</span> <span class="n">ctrl</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
	<span class="n">outb</span><span class="p">(</span><span class="mh">0xC</span><span class="p">,</span> <span class="n">ctrl</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Socket Dual IO: this enables irq&#39;s for second port</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">quirk_config_socket</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">link</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">multi</span><span class="p">)</span>
		<span class="n">link</span><span class="o">-&gt;</span><span class="n">config_flags</span> <span class="o">|=</span> <span class="n">CONF_ENABLE_ESR</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">serial_quirk</span> <span class="n">quirks</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="mh">0x0160</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="mh">0x0104</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>	<span class="o">=</span> <span class="n">quirk_setup_brainboxes_0104</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="mh">0x015D</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="mh">0x4C45</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">setup</span>	<span class="o">=</span> <span class="n">quirk_setup_brainboxes_0104</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="n">MANFID_IBM</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="o">~</span><span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">post</span>	<span class="o">=</span> <span class="n">quirk_post_ibm</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="n">MANFID_INTEL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="n">PRODID_INTEL_DUAL_RS232</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="n">MANFID_NATINST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="n">PRODID_NATINST_QUAD_RS232</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="n">MANFID_NOKIA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="o">~</span><span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="n">quirk_config_nokia</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="n">MANFID_OMEGA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="n">PRODID_OMEGA_QSP_100</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="n">MANFID_OXSEMI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="o">~</span><span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">wakeup</span>	<span class="o">=</span> <span class="n">quirk_wakeup_oxsemi</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="n">MANFID_POSSIO</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="n">PRODID_POSSIO_GCC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">wakeup</span>	<span class="o">=</span> <span class="n">quirk_wakeup_possio_gcc</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="n">MANFID_QUATECH</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="n">PRODID_QUATECH_DUAL_RS232</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="n">MANFID_QUATECH</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="n">PRODID_QUATECH_DUAL_RS232_D1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="n">MANFID_QUATECH</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="n">PRODID_QUATECH_DUAL_RS232_G</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="n">MANFID_QUATECH</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="n">PRODID_QUATECH_QUAD_RS232</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="n">MANFID_SOCKET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="n">PRODID_SOCKET_DUAL_RS232</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="n">quirk_config_socket</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">manfid</span>	<span class="o">=</span> <span class="n">MANFID_SOCKET</span><span class="p">,</span>
		<span class="p">.</span><span class="n">prodid</span>	<span class="o">=</span> <span class="o">~</span><span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">multi</span>	<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="n">quirk_config_socket</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>


<span class="k">static</span> <span class="kt">int</span> <span class="n">serial_config</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span> <span class="n">link</span><span class="p">);</span>


<span class="k">static</span> <span class="kt">void</span> <span class="nf">serial_remove</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">link</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="n">dev_dbg</span><span class="p">(</span><span class="o">&amp;</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;serial_release</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

	<span class="cm">/*</span>
<span class="cm">	 * Recheck to see if the device is still configured.</span>
<span class="cm">	 */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">ndev</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="n">serial8250_unregister_port</span><span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">slave</span><span class="p">)</span>
		<span class="n">pcmcia_disable_device</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">serial_suspend</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">link</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">ndev</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="n">serial8250_suspend_port</span><span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">serial_resume</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">link</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">ndev</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="n">serial8250_resume_port</span><span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span> <span class="o">&amp;&amp;</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">wakeup</span><span class="p">)</span>
		<span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">wakeup</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">serial_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">link</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span><span class="n">info</span><span class="p">;</span>

	<span class="n">dev_dbg</span><span class="p">(</span><span class="o">&amp;</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;serial_attach()</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

	<span class="cm">/* Create new serial device */</span>
	<span class="n">info</span> <span class="o">=</span> <span class="n">kzalloc</span><span class="p">(</span><span class="k">sizeof</span> <span class="p">(</span><span class="o">*</span><span class="n">info</span><span class="p">),</span> <span class="n">GFP_KERNEL</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">info</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENOMEM</span><span class="p">;</span>
	<span class="n">info</span><span class="o">-&gt;</span><span class="n">p_dev</span> <span class="o">=</span> <span class="n">link</span><span class="p">;</span>
	<span class="n">link</span><span class="o">-&gt;</span><span class="n">priv</span> <span class="o">=</span> <span class="n">info</span><span class="p">;</span>

	<span class="n">link</span><span class="o">-&gt;</span><span class="n">config_flags</span> <span class="o">|=</span> <span class="n">CONF_ENABLE_IRQ</span> <span class="o">|</span> <span class="n">CONF_AUTO_SET_IO</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">do_sound</span><span class="p">)</span>
		<span class="n">link</span><span class="o">-&gt;</span><span class="n">config_flags</span> <span class="o">|=</span> <span class="n">CONF_ENABLE_SPKR</span><span class="p">;</span>

	<span class="k">return</span> <span class="n">serial_config</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">serial_detach</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">link</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">;</span>

	<span class="n">dev_dbg</span><span class="p">(</span><span class="o">&amp;</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;serial_detach</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

	<span class="cm">/*</span>
<span class="cm">	 * Ensure that the ports have been released.</span>
<span class="cm">	 */</span>
	<span class="n">serial_remove</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>

	<span class="cm">/* free bits */</span>
	<span class="n">kfree</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*====================================================================*/</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">setup_serial</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">handle</span><span class="p">,</span> <span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span> <span class="n">info</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">iobase</span><span class="p">,</span> <span class="kt">int</span> <span class="n">irq</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">uart_port</span> <span class="n">port</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">line</span><span class="p">;</span>

	<span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">port</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span> <span class="p">(</span><span class="k">struct</span> <span class="n">uart_port</span><span class="p">));</span>
	<span class="n">port</span><span class="p">.</span><span class="n">iobase</span> <span class="o">=</span> <span class="n">iobase</span><span class="p">;</span>
	<span class="n">port</span><span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">irq</span><span class="p">;</span>
	<span class="n">port</span><span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">UPF_BOOT_AUTOCONF</span> <span class="o">|</span> <span class="n">UPF_SKIP_TEST</span> <span class="o">|</span> <span class="n">UPF_SHARE_IRQ</span><span class="p">;</span>
	<span class="n">port</span><span class="p">.</span><span class="n">uartclk</span> <span class="o">=</span> <span class="mi">1843200</span><span class="p">;</span>
	<span class="n">port</span><span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">handle</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">buggy_uart</span><span class="p">)</span>
		<span class="n">port</span><span class="p">.</span><span class="n">flags</span> <span class="o">|=</span> <span class="n">UPF_BUGGY_UART</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span> <span class="o">&amp;&amp;</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">setup</span><span class="p">)</span>
		<span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">setup</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">port</span><span class="p">);</span>

	<span class="n">line</span> <span class="o">=</span> <span class="n">serial8250_register_port</span><span class="p">(</span><span class="o">&amp;</span><span class="n">port</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">line</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;serial_cs: serial8250_register_port() at &quot;</span>
		       <span class="s">&quot;0x%04lx, irq %d failed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">u_long</span><span class="p">)</span><span class="n">iobase</span><span class="p">,</span> <span class="n">irq</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">info</span><span class="o">-&gt;</span><span class="n">line</span><span class="p">[</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">ndev</span><span class="p">]</span> <span class="o">=</span> <span class="n">line</span><span class="p">;</span>
	<span class="n">info</span><span class="o">-&gt;</span><span class="n">ndev</span><span class="o">++</span><span class="p">;</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*====================================================================*/</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pfc_config</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">p_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
		<span class="p">(</span><span class="n">resource_size</span><span class="p">(</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">8</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">port</span> <span class="o">=</span> <span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">;</span>
		<span class="n">info</span><span class="o">-&gt;</span><span class="n">slave</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">manfid</span> <span class="o">==</span> <span class="n">MANFID_OSITECH</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
		<span class="p">(</span><span class="n">resource_size</span><span class="p">(</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mh">0x40</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">port</span> <span class="o">=</span> <span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">start</span> <span class="o">+</span> <span class="mh">0x28</span><span class="p">;</span>
		<span class="n">info</span><span class="o">-&gt;</span><span class="n">slave</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">slave</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">setup_serial</span><span class="p">(</span><span class="n">p_dev</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">irq</span><span class="p">);</span>

	<span class="n">dev_warn</span><span class="p">(</span><span class="o">&amp;</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;no usable port range found, giving up</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">simple_config_check</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">p_dev</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">priv_data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">size_table</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span> <span class="p">};</span>
	<span class="kt">int</span> <span class="o">*</span><span class="n">try</span> <span class="o">=</span> <span class="n">priv_data</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">start</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="o">*</span><span class="n">try</span> <span class="o">&amp;</span> <span class="mh">0x1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">io_lines</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">!=</span> <span class="n">size_table</span><span class="p">[(</span><span class="o">*</span><span class="n">try</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)])</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>

	<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
	<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">IO_DATA_PATH_WIDTH</span><span class="p">;</span>
	<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">|=</span> <span class="n">IO_DATA_PATH_WIDTH_8</span><span class="p">;</span>

	<span class="k">return</span> <span class="n">pcmcia_request_io</span><span class="p">(</span><span class="n">p_dev</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">simple_config_check_notpicky</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">p_dev</span><span class="p">,</span>
					<span class="kt">void</span> <span class="o">*</span><span class="n">priv_data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">base</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mh">0x3f8</span><span class="p">,</span> <span class="mh">0x2f8</span><span class="p">,</span> <span class="mh">0x3e8</span><span class="p">,</span> <span class="mh">0x2e8</span><span class="p">,</span> <span class="mh">0x0</span> <span class="p">};</span>
	<span class="kt">int</span> <span class="n">j</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">io_lines</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>

	<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">IO_DATA_PATH_WIDTH</span><span class="p">;</span>
	<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">|=</span> <span class="n">IO_DATA_PATH_WIDTH_8</span><span class="p">;</span>
	<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">start</span> <span class="o">=</span> <span class="n">base</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
		<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">io_lines</span> <span class="o">=</span> <span class="n">base</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">?</span> <span class="mi">16</span> <span class="o">:</span> <span class="mi">3</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">pcmcia_request_io</span><span class="p">(</span><span class="n">p_dev</span><span class="p">))</span>
			<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">simple_config</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">link</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">,</span> <span class="n">try</span><span class="p">;</span>

	<span class="cm">/* First pass: look for a config entry that looks normal.</span>
<span class="cm">	 * Two tries: without IO aliases, then with aliases */</span>
	<span class="n">link</span><span class="o">-&gt;</span><span class="n">config_flags</span> <span class="o">|=</span> <span class="n">CONF_AUTO_SET_VPP</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">try</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">try</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">try</span><span class="o">++</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">pcmcia_loop_config</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">simple_config_check</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">try</span><span class="p">))</span>
			<span class="k">goto</span> <span class="n">found_port</span><span class="p">;</span>

	<span class="cm">/* Second pass: try to find an entry that isn&#39;t picky about</span>
<span class="cm">	   its base address, then try to grab any standard serial port</span>
<span class="cm">	   address, and finally try to get any free port. */</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">pcmcia_loop_config</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">simple_config_check_notpicky</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">))</span>
		<span class="k">goto</span> <span class="n">found_port</span><span class="p">;</span>

	<span class="n">dev_warn</span><span class="p">(</span><span class="o">&amp;</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;no usable port range found, giving up</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

<span class="nl">found_port:</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">multi</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">manfid</span> <span class="o">==</span> <span class="n">MANFID_3COM</span><span class="p">))</span>
		<span class="n">link</span><span class="o">-&gt;</span><span class="n">config_index</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0x08</span><span class="p">);</span>

	<span class="cm">/*</span>
<span class="cm">	 * Apply any configuration quirks.</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span> <span class="o">&amp;&amp;</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span>
		<span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>

	<span class="n">i</span> <span class="o">=</span> <span class="n">pcmcia_enable_device</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">setup_serial</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">,</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">irq</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">multi_config_check</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">p_dev</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">priv_data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="o">*</span><span class="n">multi</span> <span class="o">=</span> <span class="n">priv_data</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="cm">/* The quad port cards have bad CIS&#39;s, so just look for a</span>
<span class="cm">	   window larger than 8 ports and assume it will be right */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">&lt;=</span> <span class="mi">8</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">IO_DATA_PATH_WIDTH</span><span class="p">;</span>
	<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">|=</span> <span class="n">IO_DATA_PATH_WIDTH_8</span><span class="p">;</span>
	<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">=</span> <span class="o">*</span><span class="n">multi</span> <span class="o">*</span> <span class="mi">8</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">pcmcia_request_io</span><span class="p">(</span><span class="n">p_dev</span><span class="p">))</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">multi_config_check_notpicky</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">p_dev</span><span class="p">,</span>
				       <span class="kt">void</span> <span class="o">*</span><span class="n">priv_data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="o">*</span><span class="n">base2</span> <span class="o">=</span> <span class="n">priv_data</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">||</span> <span class="o">!</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">||</span>
		<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">start</span> <span class="o">+</span> <span class="mi">8</span> <span class="o">!=</span> <span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>

	<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">=</span> <span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
	<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">IO_DATA_PATH_WIDTH</span><span class="p">;</span>
	<span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">|=</span> <span class="n">IO_DATA_PATH_WIDTH_8</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">pcmcia_request_io</span><span class="p">(</span><span class="n">p_dev</span><span class="p">))</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>

	<span class="o">*</span><span class="n">base2</span> <span class="o">=</span> <span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">start</span> <span class="o">+</span> <span class="mi">8</span><span class="p">;</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">multi_config</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">link</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">base2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="cm">/* First, look for a generic full-sized window */</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">pcmcia_loop_config</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">multi_config_check</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">multi</span><span class="p">))</span>
		<span class="n">base2</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">start</span> <span class="o">+</span> <span class="mi">8</span><span class="p">;</span>
	<span class="k">else</span> <span class="p">{</span>
		<span class="cm">/* If that didn&#39;t work, look for two windows */</span>
		<span class="n">info</span><span class="o">-&gt;</span><span class="n">multi</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">pcmcia_loop_config</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">multi_config_check_notpicky</span><span class="p">,</span>
				       <span class="o">&amp;</span><span class="n">base2</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">dev_warn</span><span class="p">(</span><span class="o">&amp;</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;no usable port range &quot;</span>
			       <span class="s">&quot;found, giving up</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">irq</span><span class="p">)</span>
		<span class="n">dev_warn</span><span class="p">(</span><span class="o">&amp;</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;no usable IRQ found, continuing...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

	<span class="cm">/*</span>
<span class="cm">	 * Apply any configuration quirks.</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span> <span class="o">&amp;&amp;</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span>
		<span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>

	<span class="n">i</span> <span class="o">=</span> <span class="n">pcmcia_enable_device</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>

	<span class="cm">/* The Oxford Semiconductor OXCF950 cards are in fact single-port:</span>
<span class="cm">	 * 8 registers are for the UART, the others are extra registers.</span>
<span class="cm">	 * Siemen&#39;s MC45 PCMCIA (Possio&#39;s GCC) is OXCF950 based too.</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">manfid</span> <span class="o">==</span> <span class="n">MANFID_OXSEMI</span> <span class="o">||</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">manfid</span> <span class="o">==</span> <span class="n">MANFID_POSSIO</span> <span class="o">&amp;&amp;</span>
				<span class="n">info</span><span class="o">-&gt;</span><span class="n">prodid</span> <span class="o">==</span> <span class="n">PRODID_POSSIO_GCC</span><span class="p">))</span> <span class="p">{</span>
		<span class="kt">int</span> <span class="n">err</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">config_index</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">||</span>
		    <span class="n">link</span><span class="o">-&gt;</span><span class="n">config_index</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">err</span> <span class="o">=</span> <span class="n">setup_serial</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">base2</span><span class="p">,</span>
					<span class="n">link</span><span class="o">-&gt;</span><span class="n">irq</span><span class="p">);</span>
			<span class="n">base2</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">err</span> <span class="o">=</span> <span class="n">setup_serial</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">,</span>
					<span class="n">link</span><span class="o">-&gt;</span><span class="n">irq</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="n">info</span><span class="o">-&gt;</span><span class="n">c950ctrl</span> <span class="o">=</span> <span class="n">base2</span><span class="p">;</span>

		<span class="cm">/*</span>
<span class="cm">		 * FIXME: We really should wake up the port prior to</span>
<span class="cm">		 * handing it over to the serial layer.</span>
<span class="cm">		 */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span> <span class="o">&amp;&amp;</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">wakeup</span><span class="p">)</span>
			<span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">wakeup</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>

		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">setup_serial</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">,</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">irq</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">multi</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="n">setup_serial</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">base2</span> <span class="o">+</span> <span class="p">(</span><span class="mi">8</span> <span class="o">*</span> <span class="n">i</span><span class="p">),</span>
				<span class="n">link</span><span class="o">-&gt;</span><span class="n">irq</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">serial_check_for_multi</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span><span class="n">p_dev</span><span class="p">,</span>  <span class="kt">void</span> <span class="o">*</span><span class="n">priv_data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="o">!</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">))</span>
		<span class="n">info</span><span class="o">-&gt;</span><span class="n">multi</span> <span class="o">=</span> <span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">==</span> <span class="mi">8</span><span class="p">)</span>
		<span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">p_dev</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">==</span> <span class="mi">8</span><span class="p">))</span>
		<span class="n">info</span><span class="o">-&gt;</span><span class="n">multi</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="cm">/* break */</span>
<span class="p">}</span>


<span class="k">static</span> <span class="kt">int</span> <span class="nf">serial_config</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcmcia_device</span> <span class="o">*</span> <span class="n">link</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">serial_info</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="n">dev_dbg</span><span class="p">(</span><span class="o">&amp;</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;serial_config</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

	<span class="cm">/* Is this a compliant multifunction card? */</span>
	<span class="n">info</span><span class="o">-&gt;</span><span class="n">multi</span> <span class="o">=</span> <span class="p">(</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">socket</span><span class="o">-&gt;</span><span class="n">functions</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">);</span>

	<span class="cm">/* Is this a multiport card? */</span>
	<span class="n">info</span><span class="o">-&gt;</span><span class="n">manfid</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">manf_id</span><span class="p">;</span>
	<span class="n">info</span><span class="o">-&gt;</span><span class="n">prodid</span> <span class="o">=</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">card_id</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">quirks</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">quirks</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">manfid</span> <span class="o">==</span> <span class="o">~</span><span class="mi">0</span> <span class="o">||</span>
		     <span class="n">quirks</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">manfid</span> <span class="o">==</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">manfid</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
		    <span class="p">(</span><span class="n">quirks</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">prodid</span> <span class="o">==</span> <span class="o">~</span><span class="mi">0</span> <span class="o">||</span>
		     <span class="n">quirks</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">prodid</span> <span class="o">==</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">prodid</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">quirks</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>

	<span class="cm">/* Another check for dual-serial cards: look for either serial or</span>
<span class="cm">	   multifunction cards that ask for appropriate IO port ranges */</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">multi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	    <span class="p">(</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">has_func_id</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	    <span class="p">(</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">socket</span><span class="o">-&gt;</span><span class="n">pcmcia_pfc</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	    <span class="p">((</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">func_id</span> <span class="o">==</span> <span class="n">CISTPL_FUNCID_MULTI</span><span class="p">)</span> <span class="o">||</span>
	     <span class="p">(</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">func_id</span> <span class="o">==</span> <span class="n">CISTPL_FUNCID_SERIAL</span><span class="p">)))</span>
		<span class="n">pcmcia_loop_config</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">serial_check_for_multi</span><span class="p">,</span> <span class="n">info</span><span class="p">);</span>

	<span class="cm">/*</span>
<span class="cm">	 * Apply any multi-port quirk.</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span> <span class="o">&amp;&amp;</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">multi</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
		<span class="n">info</span><span class="o">-&gt;</span><span class="n">multi</span> <span class="o">=</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">multi</span><span class="p">;</span>

	<span class="n">dev_info</span><span class="p">(</span><span class="o">&amp;</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span>
		<span class="s">&quot;trying to set up [0x%04x:0x%04x] (pfc: %d, multi: %d, quirk: %p)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">link</span><span class="o">-&gt;</span><span class="n">manf_id</span><span class="p">,</span> <span class="n">link</span><span class="o">-&gt;</span><span class="n">card_id</span><span class="p">,</span>
		<span class="n">link</span><span class="o">-&gt;</span><span class="n">socket</span><span class="o">-&gt;</span><span class="n">pcmcia_pfc</span><span class="p">,</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">multi</span><span class="p">,</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">socket</span><span class="o">-&gt;</span><span class="n">pcmcia_pfc</span><span class="p">)</span>
		<span class="n">i</span> <span class="o">=</span> <span class="n">pfc_config</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">multi</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">i</span> <span class="o">=</span> <span class="n">multi_config</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">i</span> <span class="o">=</span> <span class="n">simple_config</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">||</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">ndev</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">goto</span> <span class="n">failed</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * Apply any post-init quirk.  FIXME: This should really happen</span>
<span class="cm">	 * before we register the port, since it might already be in use.</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span> <span class="o">&amp;&amp;</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">post</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">quirk</span><span class="o">-&gt;</span><span class="n">post</span><span class="p">(</span><span class="n">link</span><span class="p">))</span>
			<span class="k">goto</span> <span class="n">failed</span><span class="p">;</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

<span class="nl">failed:</span>
	<span class="n">dev_warn</span><span class="p">(</span><span class="o">&amp;</span><span class="n">link</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;failed to initialize</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">serial_remove</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">pcmcia_device_id</span> <span class="n">serial_ids</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0057</span><span class="p">,</span> <span class="mh">0x0021</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0089</span><span class="p">,</span> <span class="mh">0x110a</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0104</span><span class="p">,</span> <span class="mh">0x000a</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0105</span><span class="p">,</span> <span class="mh">0x0d0a</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0105</span><span class="p">,</span> <span class="mh">0x0e0a</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0105</span><span class="p">,</span> <span class="mh">0xea15</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0109</span><span class="p">,</span> <span class="mh">0x0501</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0138</span><span class="p">,</span> <span class="mh">0x110a</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0140</span><span class="p">,</span> <span class="mh">0x000a</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0143</span><span class="p">,</span> <span class="mh">0x3341</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0143</span><span class="p">,</span> <span class="mh">0xc0ab</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x016c</span><span class="p">,</span> <span class="mh">0x0081</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x021b</span><span class="p">,</span> <span class="mh">0x0101</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x08a1</span><span class="p">,</span> <span class="mh">0xc0ab</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID123</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;MEGAHERTZ&quot;</span><span class="p">,</span> <span class="s">&quot;CC/XJEM3288&quot;</span><span class="p">,</span> <span class="s">&quot;DATA/FAX/CELL ETHERNET MODEM&quot;</span><span class="p">,</span> <span class="mh">0xf510db04</span><span class="p">,</span> <span class="mh">0x04cd2988</span><span class="p">,</span> <span class="mh">0x46a52d63</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID123</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;MEGAHERTZ&quot;</span><span class="p">,</span> <span class="s">&quot;CC/XJEM3336&quot;</span><span class="p">,</span> <span class="s">&quot;DATA/FAX/CELL ETHERNET MODEM&quot;</span><span class="p">,</span> <span class="mh">0xf510db04</span><span class="p">,</span> <span class="mh">0x0143b773</span><span class="p">,</span> <span class="mh">0x46a52d63</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID123</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;MEGAHERTZ&quot;</span><span class="p">,</span> <span class="s">&quot;EM1144T&quot;</span><span class="p">,</span> <span class="s">&quot;PCMCIA MODEM&quot;</span><span class="p">,</span> <span class="mh">0xf510db04</span><span class="p">,</span> <span class="mh">0x856d66c8</span><span class="p">,</span> <span class="mh">0xbd6c43ef</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID123</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;MEGAHERTZ&quot;</span><span class="p">,</span> <span class="s">&quot;XJEM1144/CCEM1144&quot;</span><span class="p">,</span> <span class="s">&quot;PCMCIA MODEM&quot;</span><span class="p">,</span> <span class="mh">0xf510db04</span><span class="p">,</span> <span class="mh">0x52d21e1e</span><span class="p">,</span> <span class="mh">0xbd6c43ef</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID13</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Xircom&quot;</span><span class="p">,</span> <span class="s">&quot;CEM28&quot;</span><span class="p">,</span> <span class="mh">0x2e3ee845</span><span class="p">,</span> <span class="mh">0x0ea978ea</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID13</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Xircom&quot;</span><span class="p">,</span> <span class="s">&quot;CEM33&quot;</span><span class="p">,</span> <span class="mh">0x2e3ee845</span><span class="p">,</span> <span class="mh">0x80609023</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID13</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Xircom&quot;</span><span class="p">,</span> <span class="s">&quot;CEM56&quot;</span><span class="p">,</span> <span class="mh">0x2e3ee845</span><span class="p">,</span> <span class="mh">0xa650c32a</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID13</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Xircom&quot;</span><span class="p">,</span> <span class="s">&quot;REM10&quot;</span><span class="p">,</span> <span class="mh">0x2e3ee845</span><span class="p">,</span> <span class="mh">0x76df1d29</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID13</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Xircom&quot;</span><span class="p">,</span> <span class="s">&quot;XEM5600&quot;</span><span class="p">,</span> <span class="mh">0x2e3ee845</span><span class="p">,</span> <span class="mh">0xf1403719</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;AnyCom&quot;</span><span class="p">,</span> <span class="s">&quot;Fast Ethernet + 56K COMBO&quot;</span><span class="p">,</span> <span class="mh">0x578ba6e7</span><span class="p">,</span> <span class="mh">0xb0ac62c4</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;ATKK&quot;</span><span class="p">,</span> <span class="s">&quot;LM33-PCM-T&quot;</span><span class="p">,</span> <span class="mh">0xba9eb7e2</span><span class="p">,</span> <span class="mh">0x077c174e</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;D-Link&quot;</span><span class="p">,</span> <span class="s">&quot;DME336T&quot;</span><span class="p">,</span> <span class="mh">0x1a424a1c</span><span class="p">,</span> <span class="mh">0xb23897ff</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Gateway 2000&quot;</span><span class="p">,</span> <span class="s">&quot;XJEM3336&quot;</span><span class="p">,</span> <span class="mh">0xdd9989be</span><span class="p">,</span> <span class="mh">0x662c394c</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Grey Cell&quot;</span><span class="p">,</span> <span class="s">&quot;GCS3000&quot;</span><span class="p">,</span> <span class="mh">0x2a151fac</span><span class="p">,</span> <span class="mh">0x48b932ae</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Linksys&quot;</span><span class="p">,</span> <span class="s">&quot;EtherFast 10&amp;100 + 56K PC Card (PCMLM56)&quot;</span><span class="p">,</span> <span class="mh">0x0733cc81</span><span class="p">,</span> <span class="mh">0xb3765033</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;LINKSYS&quot;</span><span class="p">,</span> <span class="s">&quot;PCMLM336&quot;</span><span class="p">,</span> <span class="mh">0xf7cb0b07</span><span class="p">,</span> <span class="mh">0x7a821b58</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;MEGAHERTZ&quot;</span><span class="p">,</span> <span class="s">&quot;XJEM1144/CCEM1144&quot;</span><span class="p">,</span> <span class="mh">0xf510db04</span><span class="p">,</span> <span class="mh">0x52d21e1e</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;MICRO RESEARCH&quot;</span><span class="p">,</span> <span class="s">&quot;COMBO-L/M-336&quot;</span><span class="p">,</span> <span class="mh">0xb2ced065</span><span class="p">,</span> <span class="mh">0x3ced0555</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;NEC&quot;</span><span class="p">,</span> <span class="s">&quot;PK-UG-J001&quot;</span> <span class="p">,</span><span class="mh">0x18df0ba0</span> <span class="p">,</span><span class="mh">0x831b1064</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Ositech&quot;</span><span class="p">,</span> <span class="s">&quot;Trumpcard:Jack of Diamonds Modem+Ethernet&quot;</span><span class="p">,</span> <span class="mh">0xc2f80cd</span><span class="p">,</span> <span class="mh">0x656947b9</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Ositech&quot;</span><span class="p">,</span> <span class="s">&quot;Trumpcard:Jack of Hearts Modem+Ethernet&quot;</span><span class="p">,</span> <span class="mh">0xc2f80cd</span><span class="p">,</span> <span class="mh">0xdc9ba5ed</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;PCMCIAs&quot;</span><span class="p">,</span> <span class="s">&quot;ComboCard&quot;</span><span class="p">,</span> <span class="mh">0xdcfe12d3</span><span class="p">,</span> <span class="mh">0xcd8906cc</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;PCMCIAs&quot;</span><span class="p">,</span> <span class="s">&quot;LanModem&quot;</span><span class="p">,</span> <span class="mh">0xdcfe12d3</span><span class="p">,</span> <span class="mh">0xc67c648f</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;TDK&quot;</span><span class="p">,</span> <span class="s">&quot;GlobalNetworker 3410/3412&quot;</span><span class="p">,</span> <span class="mh">0x1eae9475</span><span class="p">,</span> <span class="mh">0xd9a93bed</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Xircom&quot;</span><span class="p">,</span> <span class="s">&quot;CreditCard Ethernet+Modem II&quot;</span><span class="p">,</span> <span class="mh">0x2e3ee845</span><span class="p">,</span> <span class="mh">0xeca401bf</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0032</span><span class="p">,</span> <span class="mh">0x0e01</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0032</span><span class="p">,</span> <span class="mh">0x0a05</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0032</span><span class="p">,</span> <span class="mh">0x0b05</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0032</span><span class="p">,</span> <span class="mh">0x1101</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mh">0x0104</span><span class="p">,</span> <span class="mh">0x0070</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0101</span><span class="p">,</span> <span class="mh">0x0562</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0104</span><span class="p">,</span> <span class="mh">0x0070</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x016c</span><span class="p">,</span> <span class="mh">0x0020</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID123</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;APEX DATA&quot;</span><span class="p">,</span> <span class="s">&quot;MULTICARD&quot;</span><span class="p">,</span> <span class="s">&quot;ETHERNET-MODEM&quot;</span><span class="p">,</span> <span class="mh">0x11c2da09</span><span class="p">,</span> <span class="mh">0x7289dc5d</span><span class="p">,</span> <span class="mh">0xaad95e1f</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;IBM&quot;</span><span class="p">,</span> <span class="s">&quot;Home and Away 28.8 PC Card       &quot;</span><span class="p">,</span> <span class="mh">0xb569a6e5</span><span class="p">,</span> <span class="mh">0x5bd4ff2c</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;IBM&quot;</span><span class="p">,</span> <span class="s">&quot;Home and Away Credit Card Adapter&quot;</span><span class="p">,</span> <span class="mh">0xb569a6e5</span><span class="p">,</span> <span class="mh">0x4bdf15c3</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;IBM&quot;</span><span class="p">,</span> <span class="s">&quot;w95 Home and Away Credit Card &quot;</span><span class="p">,</span> <span class="mh">0xb569a6e5</span><span class="p">,</span> <span class="mh">0xae911c15</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Motorola MARQUIS&quot;</span><span class="p">,</span> <span class="mh">0xf03e4e77</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID2</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;FAX/Modem/Ethernet Combo Card &quot;</span><span class="p">,</span> <span class="mh">0x1ed59302</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0089</span><span class="p">,</span> <span class="mh">0x0301</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x00a4</span><span class="p">,</span> <span class="mh">0x0276</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0101</span><span class="p">,</span> <span class="mh">0x0039</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0104</span><span class="p">,</span> <span class="mh">0x0006</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0105</span><span class="p">,</span> <span class="mh">0x0101</span><span class="p">),</span> <span class="cm">/* TDK DF2814 */</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0105</span><span class="p">,</span> <span class="mh">0x100a</span><span class="p">),</span> <span class="cm">/* Xircom CM-56G */</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0105</span><span class="p">,</span> <span class="mh">0x3e0a</span><span class="p">),</span> <span class="cm">/* TDK DF5660 */</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0105</span><span class="p">,</span> <span class="mh">0x410a</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0107</span><span class="p">,</span> <span class="mh">0x0002</span><span class="p">),</span> <span class="cm">/* USRobotics 14,400 */</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x010b</span><span class="p">,</span> <span class="mh">0x0d50</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x010b</span><span class="p">,</span> <span class="mh">0x0d51</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x010b</span><span class="p">,</span> <span class="mh">0x0d52</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x010b</span><span class="p">,</span> <span class="mh">0x0d53</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x010b</span><span class="p">,</span> <span class="mh">0xd180</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0115</span><span class="p">,</span> <span class="mh">0x3330</span><span class="p">),</span> <span class="cm">/* USRobotics/SUN 14,400 */</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0124</span><span class="p">,</span> <span class="mh">0x0100</span><span class="p">),</span> <span class="cm">/* Nokia DTP-2 ver II */</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0134</span><span class="p">,</span> <span class="mh">0x5600</span><span class="p">),</span> <span class="cm">/* LASAT COMMUNICATIONS A/S */</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0137</span><span class="p">,</span> <span class="mh">0x000e</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0137</span><span class="p">,</span> <span class="mh">0x001b</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0137</span><span class="p">,</span> <span class="mh">0x0025</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0137</span><span class="p">,</span> <span class="mh">0x0045</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0137</span><span class="p">,</span> <span class="mh">0x0052</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x016c</span><span class="p">,</span> <span class="mh">0x0006</span><span class="p">),</span> <span class="cm">/* Psion 56K+Fax */</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0200</span><span class="p">,</span> <span class="mh">0x0001</span><span class="p">),</span> <span class="cm">/* MultiMobile */</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID134</span><span class="p">(</span><span class="s">&quot;ADV&quot;</span><span class="p">,</span> <span class="s">&quot;TECH&quot;</span><span class="p">,</span> <span class="s">&quot;COMpad-32/85&quot;</span><span class="p">,</span> <span class="mh">0x67459937</span><span class="p">,</span> <span class="mh">0x916d02ba</span><span class="p">,</span> <span class="mh">0x8fbe92ae</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID124</span><span class="p">(</span><span class="s">&quot;GATEWAY2000&quot;</span><span class="p">,</span> <span class="s">&quot;CC3144&quot;</span><span class="p">,</span> <span class="s">&quot;PCMCIA MODEM&quot;</span><span class="p">,</span> <span class="mh">0x506bccae</span><span class="p">,</span> <span class="mh">0xcb3685f1</span><span class="p">,</span> <span class="mh">0xbd6c43ef</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID14</span><span class="p">(</span><span class="s">&quot;MEGAHERTZ&quot;</span><span class="p">,</span> <span class="s">&quot;PCMCIA MODEM&quot;</span><span class="p">,</span> <span class="mh">0xf510db04</span><span class="p">,</span> <span class="mh">0xbd6c43ef</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID124</span><span class="p">(</span><span class="s">&quot;TOSHIBA&quot;</span><span class="p">,</span> <span class="s">&quot;T144PF&quot;</span><span class="p">,</span> <span class="s">&quot;PCMCIA MODEM&quot;</span><span class="p">,</span> <span class="mh">0xb4585a1a</span><span class="p">,</span> <span class="mh">0x7271409c</span><span class="p">,</span> <span class="mh">0xbd6c43ef</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID123</span><span class="p">(</span><span class="s">&quot;FUJITSU&quot;</span><span class="p">,</span> <span class="s">&quot;FC14F &quot;</span><span class="p">,</span> <span class="s">&quot;MBH10213&quot;</span><span class="p">,</span> <span class="mh">0x6ee5a3d8</span><span class="p">,</span> <span class="mh">0x30ead12b</span><span class="p">,</span> <span class="mh">0xb00f05a0</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID123</span><span class="p">(</span><span class="s">&quot;Novatel Wireless&quot;</span><span class="p">,</span> <span class="s">&quot;Merlin UMTS Modem&quot;</span><span class="p">,</span> <span class="s">&quot;U630&quot;</span><span class="p">,</span> <span class="mh">0x32607776</span><span class="p">,</span> <span class="mh">0xd9e73b13</span><span class="p">,</span> <span class="mh">0xe87332e</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID13</span><span class="p">(</span><span class="s">&quot;MEGAHERTZ&quot;</span><span class="p">,</span> <span class="s">&quot;V.34 PCMCIA MODEM&quot;</span><span class="p">,</span> <span class="mh">0xf510db04</span><span class="p">,</span> <span class="mh">0xbb2cce4a</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Brain Boxes&quot;</span><span class="p">,</span> <span class="s">&quot;Bluetooth PC Card&quot;</span><span class="p">,</span> <span class="mh">0xee138382</span><span class="p">,</span> <span class="mh">0xd4ce9b02</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;CIRRUS LOGIC&quot;</span><span class="p">,</span> <span class="s">&quot;FAX MODEM&quot;</span><span class="p">,</span> <span class="mh">0xe625f451</span><span class="p">,</span> <span class="mh">0xcecd6dfa</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;COMPAQ&quot;</span><span class="p">,</span> <span class="s">&quot;PCMCIA 28800 FAX/DATA MODEM&quot;</span><span class="p">,</span> <span class="mh">0xa3a3062c</span><span class="p">,</span> <span class="mh">0x8cbd7c76</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;COMPAQ&quot;</span><span class="p">,</span> <span class="s">&quot;PCMCIA 33600 FAX/DATA MODEM&quot;</span><span class="p">,</span> <span class="mh">0xa3a3062c</span><span class="p">,</span> <span class="mh">0x5a00ce95</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Computerboards, Inc.&quot;</span><span class="p">,</span> <span class="s">&quot;PCM-COM422&quot;</span><span class="p">,</span> <span class="mh">0xd0b78f51</span><span class="p">,</span> <span class="mh">0x7e2d49ed</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Dr. Neuhaus&quot;</span><span class="p">,</span> <span class="s">&quot;FURY CARD 14K4&quot;</span><span class="p">,</span> <span class="mh">0x76942813</span><span class="p">,</span> <span class="mh">0x8b96ce65</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;IBM&quot;</span><span class="p">,</span> <span class="s">&quot;ISDN/56K/GSM&quot;</span><span class="p">,</span> <span class="mh">0xb569a6e5</span><span class="p">,</span> <span class="mh">0xfee5297b</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Intelligent&quot;</span><span class="p">,</span> <span class="s">&quot;ANGIA FAX/MODEM&quot;</span><span class="p">,</span> <span class="mh">0xb496e65e</span><span class="p">,</span> <span class="mh">0xf31602a6</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Intel&quot;</span><span class="p">,</span> <span class="s">&quot;MODEM 2400+&quot;</span><span class="p">,</span> <span class="mh">0x816cc815</span><span class="p">,</span> <span class="mh">0x412729fb</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Intertex&quot;</span><span class="p">,</span> <span class="s">&quot;IX34-PCMCIA&quot;</span><span class="p">,</span> <span class="mh">0xf8a097e3</span><span class="p">,</span> <span class="mh">0x97880447</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;IOTech Inc &quot;</span><span class="p">,</span> <span class="s">&quot;PCMCIA Dual RS-232 Serial Port Card&quot;</span><span class="p">,</span> <span class="mh">0x3bd2d898</span><span class="p">,</span> <span class="mh">0x92abc92f</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;MACRONIX&quot;</span><span class="p">,</span> <span class="s">&quot;FAX/MODEM&quot;</span><span class="p">,</span> <span class="mh">0x668388b3</span><span class="p">,</span> <span class="mh">0x3f9bdf2f</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Multi-Tech&quot;</span><span class="p">,</span> <span class="s">&quot;MT1432LT&quot;</span><span class="p">,</span> <span class="mh">0x5f73be51</span><span class="p">,</span> <span class="mh">0x0b3e2383</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Multi-Tech&quot;</span><span class="p">,</span> <span class="s">&quot;MT2834LT&quot;</span><span class="p">,</span> <span class="mh">0x5f73be51</span><span class="p">,</span> <span class="mh">0x4cd7c09e</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;OEM      &quot;</span><span class="p">,</span> <span class="s">&quot;C288MX     &quot;</span><span class="p">,</span> <span class="mh">0xb572d360</span><span class="p">,</span> <span class="mh">0xd2385b7a</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Option International&quot;</span><span class="p">,</span> <span class="s">&quot;V34bis GSM/PSTN Data/Fax Modem&quot;</span><span class="p">,</span> <span class="mh">0x9d7cd6f5</span><span class="p">,</span> <span class="mh">0x5cb8bf41</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;PCMCIA   &quot;</span><span class="p">,</span> <span class="s">&quot;C336MX     &quot;</span><span class="p">,</span> <span class="mh">0x99bcafe9</span><span class="p">,</span> <span class="mh">0xaa25bcab</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Quatech Inc&quot;</span><span class="p">,</span> <span class="s">&quot;PCMCIA Dual RS-232 Serial Port Card&quot;</span><span class="p">,</span> <span class="mh">0xc4420b35</span><span class="p">,</span> <span class="mh">0x92abc92f</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Quatech Inc&quot;</span><span class="p">,</span> <span class="s">&quot;Dual RS-232 Serial Port PC Card&quot;</span><span class="p">,</span> <span class="mh">0xc4420b35</span><span class="p">,</span> <span class="mh">0x031a380d</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Telia&quot;</span><span class="p">,</span> <span class="s">&quot;SurfinBird 560P/A+&quot;</span><span class="p">,</span> <span class="mh">0xe2cdd5e</span><span class="p">,</span> <span class="mh">0xc9314b38</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID1</span><span class="p">(</span><span class="s">&quot;Smart Serial Port&quot;</span><span class="p">,</span> <span class="mh">0x2d8ce292</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_CIS_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;PCMCIA&quot;</span><span class="p">,</span> <span class="s">&quot;EN2218-LAN/MODEM&quot;</span><span class="p">,</span> <span class="mh">0x281f1c5d</span><span class="p">,</span> <span class="mh">0x570f348e</span><span class="p">,</span> <span class="s">&quot;cis/PCMLM28.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_CIS_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;PCMCIA&quot;</span><span class="p">,</span> <span class="s">&quot;UE2218-LAN/MODEM&quot;</span><span class="p">,</span> <span class="mh">0x281f1c5d</span><span class="p">,</span> <span class="mh">0x6fdcacee</span><span class="p">,</span> <span class="s">&quot;cis/PCMLM28.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_CIS_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Psion Dacom&quot;</span><span class="p">,</span> <span class="s">&quot;Gold Card V34 Ethernet&quot;</span><span class="p">,</span> <span class="mh">0xf5f025c2</span><span class="p">,</span> <span class="mh">0x338e8155</span><span class="p">,</span> <span class="s">&quot;cis/PCMLM28.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_CIS_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Psion Dacom&quot;</span><span class="p">,</span> <span class="s">&quot;Gold Card V34 Ethernet GSM&quot;</span><span class="p">,</span> <span class="mh">0xf5f025c2</span><span class="p">,</span> <span class="mh">0x4ae85d35</span><span class="p">,</span> <span class="s">&quot;cis/PCMLM28.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_CIS_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;LINKSYS&quot;</span><span class="p">,</span> <span class="s">&quot;PCMLM28&quot;</span><span class="p">,</span> <span class="mh">0xf7cb0b07</span><span class="p">,</span> <span class="mh">0x66881874</span><span class="p">,</span> <span class="s">&quot;cis/PCMLM28.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_PFC_DEVICE_CIS_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;TOSHIBA&quot;</span><span class="p">,</span> <span class="s">&quot;Modem/LAN Card&quot;</span><span class="p">,</span> <span class="mh">0xb4585a1a</span><span class="p">,</span> <span class="mh">0x53f922f8</span><span class="p">,</span> <span class="s">&quot;cis/PCMLM28.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_CIS_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;DAYNA COMMUNICATIONS&quot;</span><span class="p">,</span> <span class="s">&quot;LAN AND MODEM MULTIFUNCTION&quot;</span><span class="p">,</span> <span class="mh">0x8fdf8f89</span><span class="p">,</span> <span class="mh">0xdd5ed9e8</span><span class="p">,</span> <span class="s">&quot;cis/DP83903.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_CIS_PROD_ID4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;NSC MF LAN/Modem&quot;</span><span class="p">,</span> <span class="mh">0x58fc6056</span><span class="p">,</span> <span class="s">&quot;cis/DP83903.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_CIS_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0101</span><span class="p">,</span> <span class="mh">0x0556</span><span class="p">,</span> <span class="s">&quot;cis/3CCFEM556.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_CIS_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0175</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="s">&quot;cis/DP83903.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_CIS_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0101</span><span class="p">,</span> <span class="mh">0x0035</span><span class="p">,</span> <span class="s">&quot;cis/3CXEM556.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_CIS_MANF_CARD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mh">0x0101</span><span class="p">,</span> <span class="mh">0x003d</span><span class="p">,</span> <span class="s">&quot;cis/3CXEM556.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_CIS_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Sierra Wireless&quot;</span><span class="p">,</span> <span class="s">&quot;AC850&quot;</span><span class="p">,</span> <span class="mh">0xd85f6206</span><span class="p">,</span> <span class="mh">0x42a2c018</span><span class="p">,</span> <span class="s">&quot;cis/SW_8xx_SER.cis&quot;</span><span class="p">),</span> <span class="cm">/* Sierra Wireless AC850 3G Network Adapter R1 */</span>
	<span class="n">PCMCIA_DEVICE_CIS_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Sierra Wireless&quot;</span><span class="p">,</span> <span class="s">&quot;AC860&quot;</span><span class="p">,</span> <span class="mh">0xd85f6206</span><span class="p">,</span> <span class="mh">0x698f93db</span><span class="p">,</span> <span class="s">&quot;cis/SW_8xx_SER.cis&quot;</span><span class="p">),</span> <span class="cm">/* Sierra Wireless AC860 3G Network Adapter R1 */</span>
	<span class="n">PCMCIA_DEVICE_CIS_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Sierra Wireless&quot;</span><span class="p">,</span> <span class="s">&quot;AC710/AC750&quot;</span><span class="p">,</span> <span class="mh">0xd85f6206</span><span class="p">,</span> <span class="mh">0x761b11e0</span><span class="p">,</span> <span class="s">&quot;cis/SW_7xx_SER.cis&quot;</span><span class="p">),</span>  <span class="cm">/* Sierra Wireless AC710/AC750 GPRS Network Adapter R1 */</span>
	<span class="n">PCMCIA_DEVICE_CIS_MANF_CARD</span><span class="p">(</span><span class="mh">0x0192</span><span class="p">,</span> <span class="mh">0xa555</span><span class="p">,</span> <span class="s">&quot;cis/SW_555_SER.cis&quot;</span><span class="p">),</span>  <span class="cm">/* Sierra Aircard 555 CDMA 1xrtt Modem -- pre update */</span>
	<span class="n">PCMCIA_DEVICE_CIS_MANF_CARD</span><span class="p">(</span><span class="mh">0x013f</span><span class="p">,</span> <span class="mh">0xa555</span><span class="p">,</span> <span class="s">&quot;cis/SW_555_SER.cis&quot;</span><span class="p">),</span>  <span class="cm">/* Sierra Aircard 555 CDMA 1xrtt Modem -- post update */</span>
	<span class="n">PCMCIA_DEVICE_CIS_PROD_ID12</span><span class="p">(</span><span class="s">&quot;MultiTech&quot;</span><span class="p">,</span> <span class="s">&quot;PCMCIA 56K DataFax&quot;</span><span class="p">,</span> <span class="mh">0x842047ee</span><span class="p">,</span> <span class="mh">0xc2efcf03</span><span class="p">,</span> <span class="s">&quot;cis/MT5634ZLX.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_CIS_PROD_ID12</span><span class="p">(</span><span class="s">&quot;ADVANTECH&quot;</span><span class="p">,</span> <span class="s">&quot;COMpad-32/85B-2&quot;</span><span class="p">,</span> <span class="mh">0x96913a85</span><span class="p">,</span> <span class="mh">0x27ab5437</span><span class="p">,</span> <span class="s">&quot;cis/COMpad2.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_CIS_PROD_ID12</span><span class="p">(</span><span class="s">&quot;ADVANTECH&quot;</span><span class="p">,</span> <span class="s">&quot;COMpad-32/85B-4&quot;</span><span class="p">,</span> <span class="mh">0x96913a85</span><span class="p">,</span> <span class="mh">0xcec8f102</span><span class="p">,</span> <span class="s">&quot;cis/COMpad4.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_CIS_PROD_ID123</span><span class="p">(</span><span class="s">&quot;ADVANTECH&quot;</span><span class="p">,</span> <span class="s">&quot;COMpad-32/85&quot;</span><span class="p">,</span> <span class="s">&quot;1.0&quot;</span><span class="p">,</span> <span class="mh">0x96913a85</span><span class="p">,</span> <span class="mh">0x8fbe92ae</span><span class="p">,</span> <span class="mh">0x0877b627</span><span class="p">,</span> <span class="s">&quot;cis/COMpad2.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_CIS_PROD_ID2</span><span class="p">(</span><span class="s">&quot;RS-COM 2P&quot;</span><span class="p">,</span> <span class="mh">0xad20b156</span><span class="p">,</span> <span class="s">&quot;cis/RS-COM-2P.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_CIS_MANF_CARD</span><span class="p">(</span><span class="mh">0x0013</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="s">&quot;cis/GLOBETROTTER.cis&quot;</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;ELAN DIGITAL SYSTEMS LTD, c1997.&quot;</span><span class="p">,</span><span class="s">&quot;SERIAL CARD: SL100  1.00.&quot;</span><span class="p">,</span><span class="mh">0x19ca78af</span><span class="p">,</span><span class="mh">0xf964f42b</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;ELAN DIGITAL SYSTEMS LTD, c1997.&quot;</span><span class="p">,</span><span class="s">&quot;SERIAL CARD: SL100&quot;</span><span class="p">,</span><span class="mh">0x19ca78af</span><span class="p">,</span><span class="mh">0x71d98e83</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;ELAN DIGITAL SYSTEMS LTD, c1997.&quot;</span><span class="p">,</span><span class="s">&quot;SERIAL CARD: SL232  1.00.&quot;</span><span class="p">,</span><span class="mh">0x19ca78af</span><span class="p">,</span><span class="mh">0x69fb7490</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;ELAN DIGITAL SYSTEMS LTD, c1997.&quot;</span><span class="p">,</span><span class="s">&quot;SERIAL CARD: SL232&quot;</span><span class="p">,</span><span class="mh">0x19ca78af</span><span class="p">,</span><span class="mh">0xb6bc0235</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;ELAN DIGITAL SYSTEMS LTD, c2000.&quot;</span><span class="p">,</span><span class="s">&quot;SERIAL CARD: CF232&quot;</span><span class="p">,</span><span class="mh">0x63f2e0bd</span><span class="p">,</span><span class="mh">0xb9e175d3</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;ELAN DIGITAL SYSTEMS LTD, c2000.&quot;</span><span class="p">,</span><span class="s">&quot;SERIAL CARD: CF232-5&quot;</span><span class="p">,</span><span class="mh">0x63f2e0bd</span><span class="p">,</span><span class="mh">0xfce33442</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: CF232&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x171e7190</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: CF232-5&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x20da4262</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: CF428&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0xea5dd57d</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: CF500&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0xd77255fa</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: IC232&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x6a709903</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: SL232&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x18430676</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_PROD_ID12</span><span class="p">(</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: XL232&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x6f933767</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: CF332&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x16dc1ba7</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: SL332&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x19816c41</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: SL385&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x64112029</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: SL432&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x1cce7ac4</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial+Parallel Port: SP230&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0xdb9e58bc</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: CF332&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x16dc1ba7</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: SL332&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x19816c41</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: SL385&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x64112029</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: SL432&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x1cce7ac4</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: SL432&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x1cce7ac4</span><span class="p">),</span>
	<span class="n">PCMCIA_MFC_DEVICE_PROD_ID12</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="s">&quot;Elan&quot;</span><span class="p">,</span><span class="s">&quot;Serial Port: SL432&quot;</span><span class="p">,</span><span class="mh">0x3beb8cf2</span><span class="p">,</span><span class="mh">0x1cce7ac4</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_MANF_CARD</span><span class="p">(</span><span class="mh">0x0279</span><span class="p">,</span> <span class="mh">0x950b</span><span class="p">),</span>
	<span class="cm">/* too generic */</span>
	<span class="cm">/* PCMCIA_MFC_DEVICE_MANF_CARD(0, 0x0160, 0x0002), */</span>
	<span class="cm">/* PCMCIA_MFC_DEVICE_MANF_CARD(1, 0x0160, 0x0002), */</span>
	<span class="n">PCMCIA_DEVICE_FUNC_ID</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="n">PCMCIA_DEVICE_NULL</span><span class="p">,</span>
<span class="p">};</span>
<span class="n">MODULE_DEVICE_TABLE</span><span class="p">(</span><span class="n">pcmcia</span><span class="p">,</span> <span class="n">serial_ids</span><span class="p">);</span>

<span class="n">MODULE_FIRMWARE</span><span class="p">(</span><span class="s">&quot;cis/PCMLM28.cis&quot;</span><span class="p">);</span>
<span class="n">MODULE_FIRMWARE</span><span class="p">(</span><span class="s">&quot;cis/DP83903.cis&quot;</span><span class="p">);</span>
<span class="n">MODULE_FIRMWARE</span><span class="p">(</span><span class="s">&quot;cis/3CCFEM556.cis&quot;</span><span class="p">);</span>
<span class="n">MODULE_FIRMWARE</span><span class="p">(</span><span class="s">&quot;cis/3CXEM556.cis&quot;</span><span class="p">);</span>
<span class="n">MODULE_FIRMWARE</span><span class="p">(</span><span class="s">&quot;cis/SW_8xx_SER.cis&quot;</span><span class="p">);</span>
<span class="n">MODULE_FIRMWARE</span><span class="p">(</span><span class="s">&quot;cis/SW_7xx_SER.cis&quot;</span><span class="p">);</span>
<span class="n">MODULE_FIRMWARE</span><span class="p">(</span><span class="s">&quot;cis/SW_555_SER.cis&quot;</span><span class="p">);</span>
<span class="n">MODULE_FIRMWARE</span><span class="p">(</span><span class="s">&quot;cis/MT5634ZLX.cis&quot;</span><span class="p">);</span>
<span class="n">MODULE_FIRMWARE</span><span class="p">(</span><span class="s">&quot;cis/COMpad2.cis&quot;</span><span class="p">);</span>
<span class="n">MODULE_FIRMWARE</span><span class="p">(</span><span class="s">&quot;cis/COMpad4.cis&quot;</span><span class="p">);</span>
<span class="n">MODULE_FIRMWARE</span><span class="p">(</span><span class="s">&quot;cis/RS-COM-2P.cis&quot;</span><span class="p">);</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pcmcia_driver</span> <span class="n">serial_cs_driver</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">owner</span>		<span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;serial_cs&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">probe</span>		<span class="o">=</span> <span class="n">serial_probe</span><span class="p">,</span>
	<span class="p">.</span><span class="n">remove</span>		<span class="o">=</span> <span class="n">serial_detach</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id_table</span>	<span class="o">=</span> <span class="n">serial_ids</span><span class="p">,</span>
	<span class="p">.</span><span class="n">suspend</span>	<span class="o">=</span> <span class="n">serial_suspend</span><span class="p">,</span>
	<span class="p">.</span><span class="n">resume</span>		<span class="o">=</span> <span class="n">serial_resume</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__init</span> <span class="nf">init_serial_cs</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">pcmcia_register_driver</span><span class="p">(</span><span class="o">&amp;</span><span class="n">serial_cs_driver</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__exit</span> <span class="nf">exit_serial_cs</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">pcmcia_unregister_driver</span><span class="p">(</span><span class="o">&amp;</span><span class="n">serial_cs_driver</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">module_init</span><span class="p">(</span><span class="n">init_serial_cs</span><span class="p">);</span>
<span class="n">module_exit</span><span class="p">(</span><span class="n">exit_serial_cs</span><span class="p">);</span>

<span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
