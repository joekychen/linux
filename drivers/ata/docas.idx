f | pata_artop.c | s | 12K | 403 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318613574 |  | pata_artop: add Power Management support  Fixes IDE -> libata regression.  There shouldn't be any problems with it as corresponding IDE's host driver (aec62xx) has been supporting PCI Power Management since Oct 10 2008 (commit feb22b7f "ide: add proper PCI PM support (v2)") and IDE PM since Jun 14 2003 (patch v2.5.73 "ide: Power Management").  Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_pcmcia.c | s | 13K | 349 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Convert ata_<foo>_printk(KERN_<LEVEL> to ata_<foo>_<level>  Saves text by removing nearly duplicated text format strings by creating ata_<foo>_printk functions and printf extension %pV.  ata defconfig size shrinks ~5% (~8KB), allyesconfig ~2.5% (~13KB)  Format string duplication comes from:   #define ata_link_printk(link, lv, fmt, args...) do { \        if (sata_pmp_attached((link)->ap) |||| (link)->ap->slave_link)    \                printk("%sata%u.%02u: "fmt, lv, (link)->ap->print_id,   \                       (link)->pmp , ##args); \        else \                printk("%sata%u: "fmt, lv, (link)->ap->print_id , ##args); \        } while(0)  Coalesce long formats.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  558429	  73893	 117864	 750186	  b726a	drivers/ata/built-in.allyesconfig.dev_level.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  149567	  14689	   4220	 168476	  2921c	drivers/ata/built-in.defconfig.dev_level.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_pxa.c | s | 9.7K | 330 | Axel Lin | axel.lin@gmail.com | 1326068098 |  | SATA/PATA: convert drivers/ata/* to use module_platform_driver()  This patch converts the drivers in drivers/ata/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Viresh Kumar <viresh.kumar@st.com> Cc: Jeff Garzik <jgarzik@pobox.com> Cc: Arnaud Patard <arnaud.patard@rtp-net.org> Cc: Alessandro Zummo <a.zummo@towertech.it> Cc: Sylvain Munaut <tnt@246tNt.com> Cc: Anton Vorontsov <avorontsov@ru.mvista.com> Cc: Marek Vasut <marek.vasut@gmail.com> Cc: Florian Fainelli <florian@openwrt.org> Cc: Mark Miesfeld <mmiesfeld@amcc.com> Cc: Ashish Kalra <ashish.kalra@freescale.com> Cc: Paul Mundt <lethal@linux-sh.org> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sis.h | s | 97B | 3 | Uwe Koziolek | uwe.koziolek@gmx.net | 1183385862 |  | libata: PATA-mode fixes for sis_sata  Changed PATA handler for PATA-ports used by sata_sis. This patch was originally submitted by Jeff Garzik.  Added PCI-ID 1180 for SiS966 Controller in pata_sis. The 1180 mode is fully compatible to other SiS PATA-controller.  The PCI-ID 1183 is SATA in PATA-emulation, but not fully compatible to SiS5513/5518. sata_sis.c is forwarding this ID to pata_sis. 1183 is not working if simply added to pata_sis. This handling fixes issues with SiS968.  Signed-off-by: Uwe Koziolek <uwe.koziolek@gmx.net> Signed-off-by: Jeff Garzik <jeff@garzik.org>
f | pata_of_platform.c | s | 2.7K | 91 | Rob Herring | rob.herring@calxeda.com | 1326068098 |  | pata_of_platform: remove direct dependency on OF_IRQ  CONFIG_OF_IRQ is not available on some platforms and using of_irq_* breaks the build. Since resources are already populated in the platform device, get the irq from there instead.  Reported-by: David S. Miller <davem@davemloft.net> Signed-off-by: Rob Herring <rob.herring@calxeda.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | Makefile | g | 4.0K |  | Rafal Prylowski | prylowski@metasoft.pl | 1337716954 |  | PATA host controller driver for ep93xx  Add PATA host controller driver for ep93xx.  Signed-off-by: Rafal Prylowski <prylowski@metasoft.pl> Cc: Joao Ramos <joao.ramos@inov.pt> Cc: H Hartley Sweeten <hsweeten@visionengravers.com> Cc: Ryan Mallon <rmallon@gmail.com> Cc: Sergei Shtylyov <sshtylyov@mvista.com> Cc: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_legacy.c | s | 33K | 1101 | Sergei Shtylyov | sshtylyov@ru.mvista.com | 1331656993 |  | pata_legacy: correctly mask recovery field for HT6560B  According to the HT6560H datasheet, the recovery timing field is 4-bit wide, with a value of 0 meaning 16 cycles. Correct obvious thinko in the recovery field mask.  Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com> Cc: stable@kernel.org Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_cmd640.c | s | 6.7K | 242 | Sergei Shtylyov | sshtylyov@ru.mvista.com | 1287706865 |  | pata_cmd640: implement sff_irq_check() method  Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sata_mv.c | s | 120K | 3873 | Andrew Lunn | andrew@lunn.ch | 1336520038 |  | ARM: Orion: SATA: Add per channel clk/clkdev support.  The Orion kirkwood chips have a gatable clock per SATA channel. Add code to get and enable this clk if it exists.  Signed-off-by: Andrew Lunn <andrew@lunn.ch> Tested-by: Jamie Lentin <jm@lentin.co.uk> Signed-off-by: Mike Turquette <mturquette@linaro.org>
f | pata_rz1000.c | s | 4.0K | 134 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_marvell.c | s | 4.4K | 164 | Paweł Drewniak | czajernia@gmail.com | 1308895655 |  | pata_marvell: Add support for 88SE91A0, 88SE91A4  This patch enables support for Marvell IDE PATA controllers found on Asus P8P67LE motherboard.  The formatting has been corrected and I also received a report from two users of this motherboard that the patch works.  Signed-off-by: Paweł Drewniak <czajernia@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sata_promise.h | s | 3.7K | 124 | Al Viro | viro@ZenIV.linux.org.uk | 1201083855 |  | libata annotations and fixes  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Jeff Garzik <jeff@garzik.org>
f | libata-transport.c | s | 19K | 663 | Lin Ming | ming.m.lin@intel.com | 1334774005 |  | libata: forbid port runtime pm by default, fixing regression  Forbid port runtime pm by default because it has known hotplug issue. User can allow it by, for example  echo auto > /sys/devices/pci0000:00/0000:00:1f.2/ata2/power/control  Signed-off-by: Lin Ming <ming.m.lin@intel.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sata_sil24.c | s | 37K | 1187 | Rusty Russell | rusty@rustcorp.com.au | 1326409340 |  | module_param: make bool parameters really bool (drivers & misc)  module_param(bool) used to counter-intuitively take an int.  In fddd5201 (mid-2009) we allowed bool or int/unsigned int using a messy trick.  It's time to remove the int/unsigned int option.  For this version it'll simply give a warning, but it'll break next kernel version.  Acked-by: Mauro Carvalho Chehab <mchehab@redhat.com> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | pata_radisys.c | s | 6.8K | 219 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_netcell.c | s | 2.8K | 99 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_efar.c | s | 8.2K | 267 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318613920 |  | pata_efar: fix register naming used in efar_set_piomode()  Rename 'idetm_port' and 'idetm_data' variables to 'master_port' and 'master_data' respectively to match register naming used in efar_set_dmamode() and in ata_piix.c.  Fix efar_set_piomode() documentation while at it.  Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sata_sil.c | s | 21K | 711 | Jeff Garzik | jeff@garzik.org | 1313725956 |  | [libata] sata_sil: fix used-uninit warning  Init 'serror' to silence the following warning:  drivers/ata/sata_sil.c: In function ‘sil_interrupt’: drivers/ata/sata_sil.c:453:14: warning: ‘serror’ may be used uninitialized in this function [-Wuninitialized]  This is not a 'can never happen' but is nonetheless extremely unlikely. The easiest and cleanest warning fix is simply to init the var, rather than worry about marking the var uninit-ok.  Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | libata-acpi.c | s | 24K | 878 | Linus Torvalds | torvalds@linux-foundation.org | 1312355822 |  | Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6  * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6: (28 commits)   ACPI:  delete stale reference in kernel-parameters.txt   ACPI: add missing _OSI strings   ACPI: remove NID_INVAL   thermal: make THERMAL_HWMON implementation fully internal   thermal: split hwmon lookup to a separate function   thermal: hide CONFIG_THERMAL_HWMON   ACPI print OSI(Linux) warning only once   ACPI: DMI workaround for Asus A8N-SLI Premium and Asus A8N-SLI DELUX   ACPI / Battery: propagate sysfs error in acpi_battery_add()   ACPI / Battery: avoid acpi_battery_add() use-after-free   ACPI: introduce "acpi_rsdp=" parameter for kdump   ACPI: constify ops structs   ACPI: fix CONFIG_X86_REROUTE_FOR_BROKEN_BOOT_IRQS   ACPI: fix 80 char overflow   ACPI / Battery: Resolve the race condition in the sysfs_remove_battery()   ACPI / Battery: Add the check before refresh sysfs in the battery_notify()   ACPI / Battery: Add the hibernation process in the battery_notify()   ACPI / Battery: Rename acpi_battery_quirks2 with acpi_battery_quirks   ACPI / Battery: Change 16-bit signed negative battery current into correct value   ACPI / Battery: Add the power unit macro   ...
f | sata_sx4.c | s | 39K | 1254 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | libata-pmp.c | s | 25K | 946 | Gwendal Grignou | gwendal@google.com | 1320820680 |  | [libata] Issue SRST to Sil3726 PMP  Reenable sending SRST to devices connected behind a Sil3726 PMP. This allow staggered spinups and handles drives that spins up slowly.  While the drives spin up, the PMP will not accept SRST. Most controller reissues the reset until the drive is ready, while some [Sil3124] returns an error. In ata_eh_error, wait 10s before reset the ATA port and try again.  Signed-off-by: Gwendal Grignou <gwendal@google.com> Acked-by: Tejun Heo <tj@kernel.org> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_scc.c | s | 29K | 948 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318612791 |  | pata_scc: add proper cable detection method  Use standard ata_cable_80wire() method for the cable detection, as a bonus this allows us to use the default ->prereset method.  Acked-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp> Acked-by: Akira Iguchi <akira2.iguchi@toshiba.co.jp> Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sata_uli.c | s | 6.8K | 211 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_isapnp.c | s | 3.4K | 118 | Alan Cox | alan@redhat.com | 1237949559 |  | [libata] Improve timeout handling  On a timeout call a device specific handler early in the recovery so that we can complete and process successful commands which timed out due to IRQ loss or the like rather more elegantly.  [Revised to exclude the timeout handling on a few devices that inherit from  SFF but are not SFF enough to use the default timeout handler]  Signed-off-by: Alan Cox <alan@redhat.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_icside.c | s | 16K | 510 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Convert ata_<foo>_printk(KERN_<LEVEL> to ata_<foo>_<level>  Saves text by removing nearly duplicated text format strings by creating ata_<foo>_printk functions and printf extension %pV.  ata defconfig size shrinks ~5% (~8KB), allyesconfig ~2.5% (~13KB)  Format string duplication comes from:   #define ata_link_printk(link, lv, fmt, args...) do { \        if (sata_pmp_attached((link)->ap) |||| (link)->ap->slave_link)    \                printk("%sata%u.%02u: "fmt, lv, (link)->ap->print_id,   \                       (link)->pmp , ##args); \        else \                printk("%sata%u: "fmt, lv, (link)->ap->print_id , ##args); \        } while(0)  Coalesce long formats.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  558429	  73893	 117864	 750186	  b726a	drivers/ata/built-in.allyesconfig.dev_level.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  149567	  14689	   4220	 168476	  2921c	drivers/ata/built-in.defconfig.dev_level.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_it8213.c | s | 8.1K | 265 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318613117 |  | pata_it8213: fix register naming used in it8213_set_piomode()  Rename 'idetm_port' and 'idetm_data' variables to 'master_port' and 'master_data' respectively to match register naming used in it8213_set_dmamode() and in ata_piix.c.  Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_pdc2027x.c | s | 21K | 680 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318613572 |  | pata_pdc2027x: add Power Management support  Fixes IDE -> libata regression.  There shouldn't be any problems with it as corresponding IDE's host driver (pdc202xx_new) has been supporting PCI Power Management since Oct 10 2008 (commit feb22b7f "ide: add proper PCI PM support (v2)") and IDE PM since Jun 14 2003 (patch v2.5.73 "ide: Power Management").  Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_hpt3x2n.c | s | 15K | 546 | Joe Perches | joe@perches.com | 1300085791 |  | ata: pata: Convert pr_*(DRV_NAME ...) to pr_fmt/pr_<level>  Commit 40d69ba029c8d5de51aaeb5358999266c482d00a ("pata_hpt{37x||3x2n}: use pr_*(DRV_NAME ...) instead of printk(KERN_* ...)") used pr_<level>.  Add #define pr_fmt and remove DRV_NAME. Increment driver version numbers.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | libata-eh.c | s | 106K | 3522 | Mark Lord | kernel@teksavvy.com | 1336419634 |  | libata-eh don't waste time retrying media errors (v3)  ATA and SATA drives have had built-in retries for media errors for as long as they've been commonplace in computers (early 1990s).  When libata stumbles across a bad sector, it can waste minutes sitting there doing retry after retry before finally giving up and letting the higher layers deal with it.  This patch removes retries for media errors only.  Signed-off-by: Mark Lord <mlord@pobox.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | libata.h | s | 9.1K | 208 | Dan Williams | dan.j.williams@intel.com | 1334260671 |  | libata: make ata_print_id atomic  This variable is incremented from multiple contexts (module_init via libata-lldds and the libsas discovery thread).  Make it atomic to head off any chance of libsas and libata creating duplicate ids.  Acked-by: Jacek Danecki <jacek.danecki@intel.com> Signed-off-by: Dan Williams <dan.j.williams@intel.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sata_promise.c | s | 33K | 1071 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_hpt3x3.c | s | 7.4K | 259 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_macio.c | s | 39K | 1214 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Convert ata_<foo>_printk(KERN_<LEVEL> to ata_<foo>_<level>  Saves text by removing nearly duplicated text format strings by creating ata_<foo>_printk functions and printf extension %pV.  ata defconfig size shrinks ~5% (~8KB), allyesconfig ~2.5% (~13KB)  Format string duplication comes from:   #define ata_link_printk(link, lv, fmt, args...) do { \        if (sata_pmp_attached((link)->ap) |||| (link)->ap->slave_link)    \                printk("%sata%u.%02u: "fmt, lv, (link)->ap->print_id,   \                       (link)->pmp , ##args); \        else \                printk("%sata%u: "fmt, lv, (link)->ap->print_id , ##args); \        } while(0)  Coalesce long formats.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  558429	  73893	 117864	 750186	  b726a	drivers/ata/built-in.allyesconfig.dev_level.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  149567	  14689	   4220	 168476	  2921c	drivers/ata/built-in.defconfig.dev_level.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_sl82c105.c | s | 9.5K | 334 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318613573 |  | pata_sl82c105: add Power Management support  Fixes IDE -> libata regression.  There shouldn't be any problems with it as corresponding IDE's host driver (sl82c105) has been supporting PCI Power Management since Oct 10 2008 (commit feb22b7f "ide: add proper PCI PM support (v2)") and IDE PM since Jun 14 2003 (patch v2.5.73 "ide: Power Management").  Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sata_nv.c | s | 68K | 2097 | Rusty Russell | rusty@rustcorp.com.au | 1326409340 |  | module_param: make bool parameters really bool (drivers & misc)  module_param(bool) used to counter-intuitively take an int.  In fddd5201 (mid-2009) we allowed bool or int/unsigned int using a messy trick.  It's time to remove the int/unsigned int option.  For this version it'll simply give a warning, but it'll break next kernel version.  Acked-by: Mauro Carvalho Chehab <mchehab@redhat.com> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | pata_palmld.c | s | 3.2K | 115 | Axel Lin | axel.lin@gmail.com | 1326068098 |  | SATA/PATA: convert drivers/ata/* to use module_platform_driver()  This patch converts the drivers in drivers/ata/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Viresh Kumar <viresh.kumar@st.com> Cc: Jeff Garzik <jgarzik@pobox.com> Cc: Arnaud Patard <arnaud.patard@rtp-net.org> Cc: Alessandro Zummo <a.zummo@towertech.it> Cc: Sylvain Munaut <tnt@246tNt.com> Cc: Anton Vorontsov <avorontsov@ru.mvista.com> Cc: Marek Vasut <marek.vasut@gmail.com> Cc: Florian Fainelli <florian@openwrt.org> Cc: Mark Miesfeld <mmiesfeld@amcc.com> Cc: Ashish Kalra <ashish.kalra@freescale.com> Cc: Paul Mundt <lethal@linux-sh.org> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_bf54x.c | s | 45K | 1447 | Sonic Zhang | sonic.zhang@analog.com | 1326851368 |  | [libata] pata_bf54x: Support sg list in bmdma transfer.  BF54x on-chip ATAPI controller allows maximum 0x1fffe bytes to be transfered in one ATAPI transfer. So, set the max sg_tablesize to 4.  Signed-off-by: Sonic Zhang <sonic.zhang@analog.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | acard-ahci.c | s | 12K | 435 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_atiixp.c | s | 8.3K | 261 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318612609 |  | pata_atiixp: add proper ->prereset method  Fixes PCI access before PCI resources are allocated.  Acked-by: Alan Cox <alan@linux.intel.com> Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_ns87410.c | s | 4.9K | 157 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Convert dev_printk(KERN_<LEVEL> to dev_<level>(  Saves a bit of text as the call takes fewer args.  Coalesce a few formats. Convert a few bare printks to pr_cont.  $ size drivers/ata/built-in.o*    text	   data	    bss	    dec	    hex	filename  558429	  73893	 117864	 750186	  b726a	drivers/ata/built-in.o.allyesconfig.new  559574	  73893	 117888	 751355	  b76fb	drivers/ata/built-in.o.allyesconfig.old  149567	  14689	   4220	 168476	  2921c	drivers/ata/built-in.o.defconfig.new  149851	  14689	   4220	 168760	  29338	drivers/ata/built-in.o.defconfig.old  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_cmd64x.c | s | 13K | 469 | Sergei Shtylyov | sshtylyov@ru.mvista.com | 1331671391 |  | pata_cmd64x: implement sff_irq_check() method  Implement sff_irq_check() method for both old and new chips.  Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sata_fsl.c | s | 41K | 1276 | Qiang Liu | qiang.liu@freescale.com | 1331656993 |  | sata_fsl: add support for interrupt coalsecing feature  Adds support for interrupt coalescing feature to reduce interrupt events. Provides a mechanism of adjusting coalescing count and timeout tick by sysfs at runtime, so that tradeoff of latency and CPU load can be made depending on different applications.  Signed-off-by: Qiang Liu <qiang.liu@freescale.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_at91.c | s | 11K | 377 | Jean-Christophe PLAGNIOL-VILLARD | plagnioj@jcrosoft.com | 1329154297 |  | pata/at91: use newly introduced SMC accessors  pata_at91 driver is broken since faee0cc: "make smc register base soc independent" Fix it with newly introduced SMC accessors.  The overall action of removal of at91_sys_read/write will allow to use the pata_at91 on a single zImage kernel.  Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com> Acked-by: Nicolas Ferre <nicolas.ferre@atmel.com> Cc: linux-ide@vger.kernel.org
f | sata_sis.c | s | 8.2K | 270 | Chris Dunlop | chris@onthe.net.au | 1320820609 |  | sata_sis.c: trivial spelling fix  Trivial spelling fix.  Signed-off-by: Chris Dunlop <chris@onthe.net.au> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | libata-sff.c | s | 83K | 2909 | Cong Wang | amwang@redhat.com | 1332251296 |  | ata: remove the second argument of k[un]map_atomic()  Acked-by: Jeff Garzik <jgarzik@redhat.com> Signed-off-by: Cong Wang <amwang@redhat.com>
f | ahci.h | s | 13K | 323 | Brian Norris | computersforpeace@gmail.com | 1331670947 |  | ahci: move AHCI_HFLAGS() macro to ahci.h  We will need this macro in both ahci.c and ahci_platform.c, so just move it to the header.  Signed-off-by: Brian Norris <computersforpeace@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com> Cc: stable@kernel.org
f | pata_ns87415.c | s | 11K | 372 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | libata-transport.h | s | 536B | 12 | Gwendal Grignou | gwendal@google.com | 1287706863 |  | [libata] Add ATA transport class  This is a scheleton for libata transport class. All information is read only, exporting information from libata: - ata_port class: one per ATA port - ata_link class: one per ATA port or 15 for SATA Port Multiplier - ata_device class: up to 2 for PATA link, usually one for SATA.  Signed-off-by: Gwendal Grignou <gwendal@google.com> Reviewed-by: Grant Grundler <grundler@google.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | libahci.c | s | 57K | 1847 | Brian Norris | computersforpeace@gmail.com | 1331670937 |  | ahci: add AHCI_HFLAG_DELAY_ENGINE host flag  The following commit was intended to fix problems with specific AHCI controller(s) that would become bricks if the AHCI specification was not followed strictly (that is, if ahci_start_engine() was called while the controller was in the wrong state):      commit 7faa33da9b7add01db9f1ad92c6a5d9145e940a7     ahci: start engine only during soft/hard resets  However, some devices currently have issues with that fix, so we must implement a flag that delays the ahci_start_engine() call only for specific controllers.  This commit simply introduces the flag, without enabling it in any driver.  Note that even when AHCI_HFLAG_DELAY_ENGINE is not enabled, this patch does not constitue a full revert to commit 7faa33da; there is still a change in behavior to the ahci_port_suspend() failure path.  Signed-off-by: Brian Norris <computersforpeace@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com> Cc: stable@kernel.org
f | pata_rb532_cf.c | s | 5.0K | 164 | Axel Lin | axel.lin@gmail.com | 1326068098 |  | SATA/PATA: convert drivers/ata/* to use module_platform_driver()  This patch converts the drivers in drivers/ata/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Viresh Kumar <viresh.kumar@st.com> Cc: Jeff Garzik <jgarzik@pobox.com> Cc: Arnaud Patard <arnaud.patard@rtp-net.org> Cc: Alessandro Zummo <a.zummo@towertech.it> Cc: Sylvain Munaut <tnt@246tNt.com> Cc: Anton Vorontsov <avorontsov@ru.mvista.com> Cc: Marek Vasut <marek.vasut@gmail.com> Cc: Florian Fainelli <florian@openwrt.org> Cc: Mark Miesfeld <mmiesfeld@amcc.com> Cc: Ashish Kalra <ashish.kalra@freescale.com> Cc: Paul Mundt <lethal@linux-sh.org> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sata_svw.c | s | 14K | 470 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_ep93xx.c | s | 28K | 894 | Rafal Prylowski | prylowski@metasoft.pl | 1337716954 |  | PATA host controller driver for ep93xx  Add PATA host controller driver for ep93xx.  Signed-off-by: Rafal Prylowski <prylowski@metasoft.pl> Cc: Joao Ramos <joao.ramos@inov.pt> Cc: H Hartley Sweeten <hsweeten@visionengravers.com> Cc: Ryan Mallon <rmallon@gmail.com> Cc: Sergei Shtylyov <sshtylyov@mvista.com> Cc: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_imx.c | s | 6.2K | 198 | Axel Lin | axel.lin@gmail.com | 1326068098 |  | SATA/PATA: convert drivers/ata/* to use module_platform_driver()  This patch converts the drivers in drivers/ata/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Viresh Kumar <viresh.kumar@st.com> Cc: Jeff Garzik <jgarzik@pobox.com> Cc: Arnaud Patard <arnaud.patard@rtp-net.org> Cc: Alessandro Zummo <a.zummo@towertech.it> Cc: Sylvain Munaut <tnt@246tNt.com> Cc: Anton Vorontsov <avorontsov@ru.mvista.com> Cc: Marek Vasut <marek.vasut@gmail.com> Cc: Florian Fainelli <florian@openwrt.org> Cc: Mark Miesfeld <mmiesfeld@amcc.com> Cc: Ashish Kalra <ashish.kalra@freescale.com> Cc: Paul Mundt <lethal@linux-sh.org> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pdc_adma.c | s | 16K | 561 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_acpi.c | s | 6.8K | 245 | Greg Dietsche | Gregory.Dietsche@cuw.edu | 1311458847 |  | ata: remove unnecessary code  Compile tested. remove unnecessary code that matches this coccinelle pattern 	if (...) 		return ret; 	return ret;  Signed-off-by: Greg Dietsche <Gregory.Dietsche@cuw.edu> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_optidma.c | s | 12K | 404 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | ata_generic.c | s | 8.4K | 244 | Andi Kleen | ak@linux.intel.com | 1337716453 |  | ata_generic: Skip is_intel_ider() check when ata_generic=1 is set  When ata_generic_ide=1 is set don't do the is_intel_ider() magic check. We found at least one box who needed that.  Cc: alan@linux.intel.com Signed-off-by: Andi Kleen <ak@linux.intel.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_platform.c | s | 7.0K | 235 | Axel Lin | axel.lin@gmail.com | 1326068098 |  | SATA/PATA: convert drivers/ata/* to use module_platform_driver()  This patch converts the drivers in drivers/ata/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Viresh Kumar <viresh.kumar@st.com> Cc: Jeff Garzik <jgarzik@pobox.com> Cc: Arnaud Patard <arnaud.patard@rtp-net.org> Cc: Alessandro Zummo <a.zummo@towertech.it> Cc: Sylvain Munaut <tnt@246tNt.com> Cc: Anton Vorontsov <avorontsov@ru.mvista.com> Cc: Marek Vasut <marek.vasut@gmail.com> Cc: Florian Fainelli <florian@openwrt.org> Cc: Mark Miesfeld <mmiesfeld@amcc.com> Cc: Ashish Kalra <ashish.kalra@freescale.com> Cc: Paul Mundt <lethal@linux-sh.org> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sata_via.c | s | 17K | 568 | Joe Perches | joe@perches.com | 1311458256 |  | ata: sata_via: Use dev_dbg  Use normal debugging path for dynamic debug capability.  Convert dev_printk(KERN_DEBUG to dev_dbg(  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_oldpiix.c | s | 7.4K | 241 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | libata-scsi.c | s | 99K | 3402 | Dan Williams | dan.j.williams@intel.com | 1335179507 |  | [SCSI] libsas, libata: fix start of life for a sas ata_port  This changes the ordering of initialization and probing events from:   1/ allocate rphy in PORTE_BYTES_DMAED, DISCE_REVALIDATE_DOMAIN   2/ allocate ata_port and schedule port probe in DISCE_PROBE ...to:   1/ allocate ata_port in PORTE_BYTES_DMAED, DISCE_REVALIDATE_DOMAIN   2/ allocate rphy in PORTE_BYTES_DMAED, DISCE_REVALIDATE_DOMAIN   3/ schedule port probe in DISCE_PROBE  This ordering prevents PHYE_SIGNAL_LOSS_EVENTS from sneaking in to destrory ata devices before they have been fully initialized:    BUG: unable to handle kernel paging request at 0000000000003b10   IP: [<ffffffffa0053d7e>] sas_ata_end_eh+0x12/0x5e [libsas]   ...   [<ffffffffa004d1af>] sas_unregister_common_dev+0x78/0xc9 [libsas]   [<ffffffffa004d4d4>] sas_unregister_dev+0x4f/0xad [libsas]   [<ffffffffa004d5b1>] sas_unregister_domain_devices+0x7f/0xbf [libsas]   [<ffffffffa004c487>] sas_deform_port+0x61/0x1b8 [libsas]   [<ffffffffa004bed0>] sas_phye_loss_of_signal+0x29/0x2b [libsas]  ...and kills the awkward "sata domain_device briefly existing in the domain without an ata_port" state.  Reported-by: Michal Kosciowski <michal.kosciowski@intel.com> Signed-off-by: Dan Williams <dan.j.williams@intel.com> Acked-by: Jeff Garzik <jgarzik@redhat.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | pata_ali.c | s | 17K | 575 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318612242 |  | pata_ali: fix "Satelite" typo  Cosmetic fix but thanks to it pata_ali's DMI table now matches alim15x3's one.  Acked-by: Alan Cox <alan@linux.intel.com> Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sata_qstor.c | s | 17K | 547 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_ninja32.c | s | 5.4K | 184 | Jeff Garzik | jeff@garzik.org | 1299051405 |  | [libata] trivial: trim trailing whitespace for drivers/ata/*.[ch]
f | pata_serverworks.c | s | 13K | 432 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318612595 |  | pata_serverworks: add serverworks_fixup()  Factor out common code from serverworks_[re]init_one() to serverworks_fixup().  Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_it821x.c | s | 27K | 867 | Jean Delvare | khali@linux-fr.org | 1311458665 |  | pata_it821x: Fix RAID type display, by adding missing comma  The missing comma causes the wrong RAID type to be displayed. Introduced by commit 963e4975c6f93c148ca809d986d412201df9af89 three years ago, odd that nobody noticed before.  Signed-off-by: Jean Delvare <khali@linux-fr.org> Cc: Jeff Garzik <jgarzik@pobox.com> Cc: Alan Cox <alan@lxorguk.ukuu.org.uk> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_cs5530.c | s | 9.5K | 324 | Tejun Heo | tj@kernel.org | 1274830830 |  | libata-sff: separate out BMDMA init  Separate out ata_pci_bmdma_prepare_host() and ata_pci_bmdma_init_one() from their SFF counterparts.  SFF ones no longer try to initialize BMDMA or set PCI master.  Signed-off-by: Tejun Heo <tj@kernel.org> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_piccolo.c | s | 3.8K | 120 | Tejun Heo | tj@kernel.org | 1274830830 |  | libata-sff: separate out BMDMA init  Separate out ata_pci_bmdma_prepare_host() and ata_pci_bmdma_init_one() from their SFF counterparts.  SFF ones no longer try to initialize BMDMA or set PCI master.  Signed-off-by: Tejun Heo <tj@kernel.org> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | ata_piix.c | s | 48K | 1537 | Andy Whitcroft | apw@canonical.com | 1336419178 |  | ata_piix: defer disks to the Hyper-V drivers by default  When we are hosted on a Microsoft Hyper-V hypervisor the guest disks are exposed both via the Hyper-V paravirtualised drivers and via an emulated SATA disk drive.  In this case we want to use the paravirtualised drivers if we can as they are much more efficient.  Note that the Hyper-V paravirtualised drivers only expose the virtual hard disk devices, the CDROM/DVD devices must still be enumerated.  Mark the host controller ATA_HOST_IGNORE_ATA to prevent enumeration of disk devices.  BugLink: http://bugs.launchpad.net/bugs/929545 BugLink: http://bugs.launchpad.net/bugs/942316 Signed-off-by: Andy Whitcroft <apw@canonical.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | ahci.c | s | 38K | 1111 | Matt Johnson | johnso87@illinois.edu | 1336068460 |  | ahci: Detect Marvell 88SE9172 SATA controller  The Marvell 88SE9172 SATA controller (PCI ID 1b4b 917a) already worked once it was detected, but was missing an ahci_pci_tbl entry.  Boot tested on a Gigabyte Z68X-UD3H-B3 motherboard.  Signed-off-by: Matt Johnson <johnso87@illinois.edu> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_amd.c | s | 17K | 557 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_cs5520.c | s | 8.1K | 272 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Convert dev_printk(KERN_<LEVEL> to dev_<level>(  Saves a bit of text as the call takes fewer args.  Coalesce a few formats. Convert a few bare printks to pr_cont.  $ size drivers/ata/built-in.o*    text	   data	    bss	    dec	    hex	filename  558429	  73893	 117864	 750186	  b726a	drivers/ata/built-in.o.allyesconfig.new  559574	  73893	 117888	 751355	  b76fb	drivers/ata/built-in.o.allyesconfig.old  149567	  14689	   4220	 168476	  2921c	drivers/ata/built-in.o.defconfig.new  149851	  14689	   4220	 168760	  29338	drivers/ata/built-in.o.defconfig.old  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | libata-core.c | s | 173K | 5892 | Prarit Bhargava | prarit@redhat.com | 1337716934 |  | [libata] Add " 2GB ATA Flash Disk"/"ADMA428M" to DMA blacklist  A user has several systems with a couple of models of flash disks with IDE connectors.  These disks work fine in 2.6.18-ish kernels but corrupt data on new kernels.  The difference appears to be with the default I/O method used by the IDE controller driver between the kernels.  In the older kernels, the configuration is very conservative and the driver stays in PIO mode.  With new kernels, the ata driver (pata_serverworks) attempts to use UDMA/66 which the drive claims to support.  This mode, however, does not appear to work in DMA mode.  The drive does work correctly and no corruption is seen if the kernel parameter "libata.force=5:pio0,6:pio0" is used to force the driver to use PIO instead of DMA mode.  Blacklist these drives.  Unfortunately the model name of the drive is very generic, " 2GB ATA Flash Disk", but the revision is specific, "ADMA428M".  Signed-off-by: Prarit Bhargava <prarit@redhat.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_mpc52xx.c | s | 25K | 741 | Julia Lawall | Julia.Lawall@lip6.fr | 1331671268 |  | drivers/ata/pata_mpc52xx.c: clean up error handling code  This patch makes a number of changes with respect to the error-handling code:  * Remove cleanup calls for the devm functions in both the error handling   code and the remove function.  This cleanup is done automatically.  * The previous change simplifies the cleanup code at the end of the   function such that there is nothing to do on the failure of the call to   devm_ioremap.  So it is changed to just return directly.  * There is no need for the ifs in the cleanup code at the end of the   function, because in each case the cleanup needed is statically   known.  Drop the ifs, add new err labels, and drop the initializations of   the tested variables to NULL.  * Change the call to request_irq to a call to devm_request_irq, so that it   is cleaned up on exit.  * Cause the return value of devm_request_irq to go into the returned   variable rv rather than the unused variable ret.  Drop ret.  Signed-off-by: Julia Lawall <Julia.Lawall@lip6.fr> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_sc1200.c | s | 7.3K | 242 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318611702 |  | pata_sc1200: do not use c99 style comments  Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_jmicron.c | s | 4.6K | 160 | Tejun Heo | tj@kernel.org | 1274830830 |  | libata-sff: separate out BMDMA init  Separate out ata_pci_bmdma_prepare_host() and ata_pci_bmdma_init_one() from their SFF counterparts.  SFF ones no longer try to initialize BMDMA or set PCI master.  Signed-off-by: Tejun Heo <tj@kernel.org> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_rdc.c | s | 10K | 352 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318613916 |  | pata_rdc: add Power Management support  Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | Kconfig | g | 22K |  | Rafal Prylowski | prylowski@metasoft.pl | 1337716954 |  | PATA host controller driver for ep93xx  Add PATA host controller driver for ep93xx.  Signed-off-by: Rafal Prylowski <prylowski@metasoft.pl> Cc: Joao Ramos <joao.ramos@inov.pt> Cc: H Hartley Sweeten <hsweeten@visionengravers.com> Cc: Ryan Mallon <rmallon@gmail.com> Cc: Sergei Shtylyov <sshtylyov@mvista.com> Cc: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_triflex.c | s | 6.6K | 223 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_cs5536.c | s | 7.1K | 241 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1326068098 |  | pata_cs5536: forward port changes from cs5536  * Fix cable detection to also account for the slave device cable bit.  * Disable UDMA when programming MWDMA in cs5536_set_dmamode().  * Don't change UDMA settings in cs5536_set_piomode().  * Add cs5536_program_dtc() helper.  * Cleanup and uninline cs5536_[read,write]() methods.  Cc: Martin K. Petersen <mkp@mkp.net> Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_ixp4xx_cf.c | s | 5.6K | 173 | Axel Lin | axel.lin@gmail.com | 1326068098 |  | SATA/PATA: convert drivers/ata/* to use module_platform_driver()  This patch converts the drivers in drivers/ata/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Viresh Kumar <viresh.kumar@st.com> Cc: Jeff Garzik <jgarzik@pobox.com> Cc: Arnaud Patard <arnaud.patard@rtp-net.org> Cc: Alessandro Zummo <a.zummo@towertech.it> Cc: Sylvain Munaut <tnt@246tNt.com> Cc: Anton Vorontsov <avorontsov@ru.mvista.com> Cc: Marek Vasut <marek.vasut@gmail.com> Cc: Florian Fainelli <florian@openwrt.org> Cc: Mark Miesfeld <mmiesfeld@amcc.com> Cc: Ashish Kalra <ashish.kalra@freescale.com> Cc: Paul Mundt <lethal@linux-sh.org> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sata_vsc.c | s | 12K | 384 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_hpt37x.c | s | 25K | 942 | Joe Perches | joe@perches.com | 1300085791 |  | ata: pata: Convert pr_*(DRV_NAME ...) to pr_fmt/pr_<level>  Commit 40d69ba029c8d5de51aaeb5358999266c482d00a ("pata_hpt{37x||3x2n}: use pr_*(DRV_NAME ...) instead of printk(KERN_* ...)") used pr_<level>.  Add #define pr_fmt and remove DRV_NAME. Increment driver version numbers.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_sis.c | s | 23K | 795 | Dan McGee | dpmcgee@gmail.com | 1318046836 |  | pata_sis: code style cleanups for consistency  Remove a lot of '  ' (double spaces) as well as ensuring use of tabs vs. spaces is appropriate and consistent.  Signed-off-by: Dan McGee <dpmcgee@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_arasan_cf.c | s | 25K | 822 | Viresh Kumar | viresh.linux@gmail.com | 1340228376 |  | Viresh has moved  viresh.kumar@st.com email-id doesn't exist anymore as I have left the company.  Replace ST's id with viresh.linux@gmail.com.  It also updates .mailmap file to fix address for 'git shortlog'  Signed-off-by: Viresh Kumar <viresh.linux@gmail.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | pata_cs5535.c | s | 6.4K | 198 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318612085 |  | pata_cs5535: no need to program PIO0 timings during device init  Core libata code takes care of it nowadays.  Acked-by: Alan Cox <alan@linux.intel.com> Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_sil680.c | s | 11K | 393 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318610805 |  | pata_sil680: minor CodingStyle fixups  Acked-by: Alan Cox <alan@linux.intel.com> Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_at32.c | s | 10K | 335 | Sergei Shtylyov | sshtylyov@ru.mvista.com | 1299051406 |  | libata: remove ATA_FLAG_MMIO  Commit 0d5ff566779f894ca9937231a181eb31e4adff0e (libata: convert to iomap) removed all checks of ATA_FLAG_MMIO but neglected to remove the flag itself. Do it now, at last...  Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_mpiix.c | s | 7.1K | 210 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_hpt366.c | s | 10K | 379 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318612038 |  | pata_hpt366: add hpt36x_find_mode() helper  Factor out code for finding the register programming information from hpt366_set_mode() to hpt36x_find_mode().  This makes pata_hpt366 driver more similar to pata_{37x,3x2n} ones.  Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_sch.c | s | 5.2K | 169 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_pdc202xx_old.c | s | 10K | 345 | Sergei Shtylyov | sshtylyov@ru.mvista.com | 1287706866 |  | pata_pdc202xx_old: implement sff_irq_check() method  Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sata_dwc_460ex.c | s | 50K | 1539 | Axel Lin | axel.lin@gmail.com | 1326068098 |  | SATA/PATA: convert drivers/ata/* to use module_platform_driver()  This patch converts the drivers in drivers/ata/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Viresh Kumar <viresh.kumar@st.com> Cc: Jeff Garzik <jgarzik@pobox.com> Cc: Arnaud Patard <arnaud.patard@rtp-net.org> Cc: Alessandro Zummo <a.zummo@towertech.it> Cc: Sylvain Munaut <tnt@246tNt.com> Cc: Anton Vorontsov <avorontsov@ru.mvista.com> Cc: Marek Vasut <marek.vasut@gmail.com> Cc: Florian Fainelli <florian@openwrt.org> Cc: Mark Miesfeld <mmiesfeld@amcc.com> Cc: Ashish Kalra <ashish.kalra@freescale.com> Cc: Paul Mundt <lethal@linux-sh.org> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_atp867x.c | s | 14K | 495 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_samsung_cf.c | s | 17K | 567 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Convert ata_<foo>_printk(KERN_<LEVEL> to ata_<foo>_<level>  Saves text by removing nearly duplicated text format strings by creating ata_<foo>_printk functions and printf extension %pV.  ata defconfig size shrinks ~5% (~8KB), allyesconfig ~2.5% (~13KB)  Format string duplication comes from:   #define ata_link_printk(link, lv, fmt, args...) do { \        if (sata_pmp_attached((link)->ap) |||| (link)->ap->slave_link)    \                printk("%sata%u.%02u: "fmt, lv, (link)->ap->print_id,   \                       (link)->pmp , ##args); \        else \                printk("%sata%u: "fmt, lv, (link)->ap->print_id , ##args); \        } while(0)  Coalesce long formats.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  558429	  73893	 117864	 750186	  b726a	drivers/ata/built-in.allyesconfig.dev_level.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  149567	  14689	   4220	 168476	  2921c	drivers/ata/built-in.defconfig.dev_level.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_cypress.c | s | 4.5K | 146 | Tejun Heo | tj@kernel.org | 1274830830 |  | libata-sff: separate out BMDMA init  Separate out ata_pci_bmdma_prepare_host() and ata_pci_bmdma_init_one() from their SFF counterparts.  SFF ones no longer try to initialize BMDMA or set PCI master.  Signed-off-by: Tejun Heo <tj@kernel.org> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_octeon_cf.c | s | 23K | 796 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | ahci_platform.c | s | 7.1K | 264 | Viresh Kumar | viresh.linux@gmail.com | 1336068533 |  | ata: ahci_platform: Add synopsys ahci controller in DT's compatible list  SPEAr13xx series of SoCs contain Synopsys AHCI SATA Controller which shares ahci_platform driver with other controller versions.  This patch updates DT compatible list for ahci_platform. It also updates and renames binding documentation to more generic name.  Signed-off-by: Viresh Kumar <viresh.kumar@st.com> Cc: Rob Herring <rob.herring@calxeda.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | pata_via.c | s | 20K | 641 | Bartlomiej Zolnierkiewicz | bzolnier@gmail.com | 1318612974 |  | pata_via: add via_fixup()  * Fix via_init_one() to enable clock on 66 MHz devices   (bug introduced in commit 460f531 "pata_via: store UDMA masks    in via_isa_bridges table").  * Factor out common code from via_[re]init_one() to via_fixup().  Acked-by: Alan Cox <alan@linux.intel.com> Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com> Signed-off-by: Jeff Garzik <jgarzik@redhat.com>
f | sata_inic162x.c | s | 23K | 747 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
f | pata_opti.c | s | 5.4K | 179 | Joe Perches | joe@perches.com | 1311458256 |  | ata: Add and use ata_print_version_once  Use a single mechanism to show driver version. Reduces text a tiny bit too.  Remove uses of static int printed_version Add and use ata_print_version(const struct device *, const char *ver) and ata_print_version_once.  $ size drivers/ata/built-in.*    text	   data	    bss	    dec	    hex	filename  544969	  73893	 116584	 735446	  b38d6	drivers/ata/built-in.allyesconfig.ata.o  543870	  73893	 116592	 734355	  b34ad	drivers/ata/built-in.allyesconfig.print_once.o  141328	  14689	   4220	 160237	  271ed	drivers/ata/built-in.defconfig.ata.o  141212	  14689	   4220	 160121	  27179	drivers/ata/built-in.defconfig.print_once.o  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
