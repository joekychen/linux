<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › gpio › gpio-samsung.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>gpio-samsung.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2009-2011 Samsung Electronics Co., Ltd.</span>
<span class="cm"> *		http://www.samsung.com/</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2008 Openmoko, Inc.</span>
<span class="cm"> * Copyright 2008 Simtec Electronics</span>
<span class="cm"> *      Ben Dooks &lt;ben@simtec.co.uk&gt;</span>
<span class="cm"> *      http://armlinux.simtec.co.uk/</span>
<span class="cm"> *</span>
<span class="cm"> * SAMSUNG - GPIOlib support</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/irq.h&gt;</span>
<span class="cp">#include &lt;linux/io.h&gt;</span>
<span class="cp">#include &lt;linux/gpio.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/spinlock.h&gt;</span>
<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/interrupt.h&gt;</span>
<span class="cp">#include &lt;linux/device.h&gt;</span>
<span class="cp">#include &lt;linux/ioport.h&gt;</span>
<span class="cp">#include &lt;linux/of.h&gt;</span>
<span class="cp">#include &lt;linux/slab.h&gt;</span>
<span class="cp">#include &lt;linux/of_address.h&gt;</span>

<span class="cp">#include &lt;asm/irq.h&gt;</span>

<span class="cp">#include &lt;mach/hardware.h&gt;</span>
<span class="cp">#include &lt;mach/map.h&gt;</span>
<span class="cp">#include &lt;mach/regs-clock.h&gt;</span>
<span class="cp">#include &lt;mach/regs-gpio.h&gt;</span>

<span class="cp">#include &lt;plat/cpu.h&gt;</span>
<span class="cp">#include &lt;plat/gpio-core.h&gt;</span>
<span class="cp">#include &lt;plat/gpio-cfg.h&gt;</span>
<span class="cp">#include &lt;plat/gpio-cfg-helpers.h&gt;</span>
<span class="cp">#include &lt;plat/gpio-fns.h&gt;</span>
<span class="cp">#include &lt;plat/pm.h&gt;</span>

<span class="cp">#ifndef DEBUG_GPIO</span>
<span class="cp">#define gpio_dbg(x...) do { } while (0)</span>
<span class="cp">#else</span>
<span class="cp">#define gpio_dbg(x...) printk(KERN_DEBUG x)</span>
<span class="cp">#endif</span>

<span class="kt">int</span> <span class="nf">samsung_gpio_setpull_updown</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
				<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">,</span> <span class="n">samsung_gpio_pull_t</span> <span class="n">pull</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">reg</span> <span class="o">=</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">+</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">shift</span> <span class="o">=</span> <span class="n">off</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pup</span><span class="p">;</span>

	<span class="n">pup</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">reg</span><span class="p">);</span>
	<span class="n">pup</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">3</span> <span class="o">&lt;&lt;</span> <span class="n">shift</span><span class="p">);</span>
	<span class="n">pup</span> <span class="o">|=</span> <span class="n">pull</span> <span class="o">&lt;&lt;</span> <span class="n">shift</span><span class="p">;</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">pup</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">samsung_gpio_pull_t</span> <span class="nf">samsung_gpio_getpull_updown</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
						<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">reg</span> <span class="o">=</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">+</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">shift</span> <span class="o">=</span> <span class="n">off</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pup</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">reg</span><span class="p">);</span>

	<span class="n">pup</span> <span class="o">&gt;&gt;=</span> <span class="n">shift</span><span class="p">;</span>
	<span class="n">pup</span> <span class="o">&amp;=</span> <span class="mh">0x3</span><span class="p">;</span>

	<span class="k">return</span> <span class="p">(</span><span class="n">__force</span> <span class="n">samsung_gpio_pull_t</span><span class="p">)</span><span class="n">pup</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">s3c2443_gpio_setpull</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
			 <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">,</span> <span class="n">samsung_gpio_pull_t</span> <span class="n">pull</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">pull</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">S3C_GPIO_PULL_NONE</span>:
		<span class="n">pull</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">S3C_GPIO_PULL_UP</span>:
		<span class="n">pull</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">S3C_GPIO_PULL_DOWN</span>:
		<span class="n">pull</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">samsung_gpio_setpull_updown</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">off</span><span class="p">,</span> <span class="n">pull</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">samsung_gpio_pull_t</span> <span class="nf">s3c2443_gpio_getpull</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
					 <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">samsung_gpio_pull_t</span> <span class="n">pull</span><span class="p">;</span>

	<span class="n">pull</span> <span class="o">=</span> <span class="n">samsung_gpio_getpull_updown</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">off</span><span class="p">);</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">pull</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mh">0x00</span>:
		<span class="n">pull</span> <span class="o">=</span> <span class="n">S3C_GPIO_PULL_UP</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x01</span>:
	<span class="k">case</span> <span class="mh">0x03</span>:
		<span class="n">pull</span> <span class="o">=</span> <span class="n">S3C_GPIO_PULL_NONE</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x02</span>:
		<span class="n">pull</span> <span class="o">=</span> <span class="n">S3C_GPIO_PULL_DOWN</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">pull</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">s3c24xx_gpio_setpull_1</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
				  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">,</span> <span class="n">samsung_gpio_pull_t</span> <span class="n">pull</span><span class="p">,</span>
				  <span class="n">samsung_gpio_pull_t</span> <span class="n">updown</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">reg</span> <span class="o">=</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">+</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pup</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">reg</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">pull</span> <span class="o">==</span> <span class="n">updown</span><span class="p">)</span>
		<span class="n">pup</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">off</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">pull</span> <span class="o">==</span> <span class="n">S3C_GPIO_PULL_NONE</span><span class="p">)</span>
		<span class="n">pup</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">off</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">pup</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">samsung_gpio_pull_t</span> <span class="nf">s3c24xx_gpio_getpull_1</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
						  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">,</span>
						  <span class="n">samsung_gpio_pull_t</span> <span class="n">updown</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">reg</span> <span class="o">=</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">+</span> <span class="mh">0x08</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pup</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">reg</span><span class="p">);</span>

	<span class="n">pup</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">off</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">pup</span> <span class="o">?</span> <span class="n">S3C_GPIO_PULL_NONE</span> <span class="o">:</span> <span class="n">updown</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">samsung_gpio_pull_t</span> <span class="nf">s3c24xx_gpio_getpull_1up</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
					     <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">s3c24xx_gpio_getpull_1</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">off</span><span class="p">,</span> <span class="n">S3C_GPIO_PULL_UP</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">s3c24xx_gpio_setpull_1up</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
			     <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">,</span> <span class="n">samsung_gpio_pull_t</span> <span class="n">pull</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">s3c24xx_gpio_setpull_1</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">off</span><span class="p">,</span> <span class="n">pull</span><span class="p">,</span> <span class="n">S3C_GPIO_PULL_UP</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">samsung_gpio_pull_t</span> <span class="nf">s3c24xx_gpio_getpull_1down</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
					       <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">s3c24xx_gpio_getpull_1</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">off</span><span class="p">,</span> <span class="n">S3C_GPIO_PULL_DOWN</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">s3c24xx_gpio_setpull_1down</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
			       <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">,</span> <span class="n">samsung_gpio_pull_t</span> <span class="n">pull</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">s3c24xx_gpio_setpull_1</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">off</span><span class="p">,</span> <span class="n">pull</span><span class="p">,</span> <span class="n">S3C_GPIO_PULL_DOWN</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">exynos_gpio_setpull</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
				<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">,</span> <span class="n">samsung_gpio_pull_t</span> <span class="n">pull</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">pull</span> <span class="o">==</span> <span class="n">S3C_GPIO_PULL_UP</span><span class="p">)</span>
		<span class="n">pull</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

	<span class="k">return</span> <span class="n">samsung_gpio_setpull_updown</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">off</span><span class="p">,</span> <span class="n">pull</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">samsung_gpio_pull_t</span> <span class="nf">exynos_gpio_getpull</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
						<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">samsung_gpio_pull_t</span> <span class="n">pull</span><span class="p">;</span>

	<span class="n">pull</span> <span class="o">=</span> <span class="n">samsung_gpio_getpull_updown</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">off</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">pull</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span>
		<span class="n">pull</span> <span class="o">=</span> <span class="n">S3C_GPIO_PULL_UP</span><span class="p">;</span>

	<span class="k">return</span> <span class="n">pull</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * samsung_gpio_setcfg_2bit - Samsung 2bit style GPIO configuration.</span>
<span class="cm"> * @chip: The gpio chip that is being configured.</span>
<span class="cm"> * @off: The offset for the GPIO being configured.</span>
<span class="cm"> * @cfg: The configuration value to set.</span>
<span class="cm"> *</span>
<span class="cm"> * This helper deal with the GPIO cases where the control register</span>
<span class="cm"> * has two bits of configuration per gpio, which have the following</span>
<span class="cm"> * functions:</span>
<span class="cm"> *	00 = input</span>
<span class="cm"> *	01 = output</span>
<span class="cm"> *	1x = special function</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">samsung_gpio_setcfg_2bit</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
				    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">reg</span> <span class="o">=</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">shift</span> <span class="o">=</span> <span class="n">off</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">con</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">samsung_gpio_is_cfg_special</span><span class="p">(</span><span class="n">cfg</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">cfg</span> <span class="o">&amp;=</span> <span class="mh">0xf</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">cfg</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">)</span>
			<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

		<span class="n">cfg</span> <span class="o">&lt;&lt;=</span> <span class="n">shift</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">reg</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0x3</span> <span class="o">&lt;&lt;</span> <span class="n">shift</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">|=</span> <span class="n">cfg</span><span class="p">;</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * samsung_gpio_getcfg_2bit - Samsung 2bit style GPIO configuration read.</span>
<span class="cm"> * @chip: The gpio chip that is being configured.</span>
<span class="cm"> * @off: The offset for the GPIO being configured.</span>
<span class="cm"> *</span>
<span class="cm"> * The reverse of samsung_gpio_setcfg_2bit(). Will return a value which</span>
<span class="cm"> * could be directly passed back to samsung_gpio_setcfg_2bit(), from the</span>
<span class="cm"> * S3C_GPIO_SPECIAL() macro.</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">samsung_gpio_getcfg_2bit</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
					     <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u32</span> <span class="n">con</span><span class="p">;</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&gt;&gt;=</span> <span class="n">off</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="mi">3</span><span class="p">;</span>

	<span class="cm">/* this conversion works for IN and OUT as well as special mode */</span>
	<span class="k">return</span> <span class="n">S3C_GPIO_SPECIAL</span><span class="p">(</span><span class="n">con</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * samsung_gpio_setcfg_4bit - Samsung 4bit single register GPIO config.</span>
<span class="cm"> * @chip: The gpio chip that is being configured.</span>
<span class="cm"> * @off: The offset for the GPIO being configured.</span>
<span class="cm"> * @cfg: The configuration value to set.</span>
<span class="cm"> *</span>
<span class="cm"> * This helper deal with the GPIO cases where the control register has 4 bits</span>
<span class="cm"> * of control per GPIO, generally in the form of:</span>
<span class="cm"> *	0000 = Input</span>
<span class="cm"> *	0001 = Output</span>
<span class="cm"> *	others = Special functions (dependent on bank)</span>
<span class="cm"> *</span>
<span class="cm"> * Note, since the code to deal with the case where there are two control</span>
<span class="cm"> * registers instead of one, we do not have a separate set of functions for</span>
<span class="cm"> * each case.</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">samsung_gpio_setcfg_4bit</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
				    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">reg</span> <span class="o">=</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">shift</span> <span class="o">=</span> <span class="p">(</span><span class="n">off</span> <span class="o">&amp;</span> <span class="mi">7</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">con</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">off</span> <span class="o">&lt;</span> <span class="mi">8</span> <span class="o">&amp;&amp;</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">ngpio</span> <span class="o">&gt;</span> <span class="mi">8</span><span class="p">)</span>
		<span class="n">reg</span> <span class="o">-=</span> <span class="mi">4</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">samsung_gpio_is_cfg_special</span><span class="p">(</span><span class="n">cfg</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">cfg</span> <span class="o">&amp;=</span> <span class="mh">0xf</span><span class="p">;</span>
		<span class="n">cfg</span> <span class="o">&lt;&lt;=</span> <span class="n">shift</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">reg</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0xf</span> <span class="o">&lt;&lt;</span> <span class="n">shift</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">|=</span> <span class="n">cfg</span><span class="p">;</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * samsung_gpio_getcfg_4bit - Samsung 4bit single register GPIO config read.</span>
<span class="cm"> * @chip: The gpio chip that is being configured.</span>
<span class="cm"> * @off: The offset for the GPIO being configured.</span>
<span class="cm"> *</span>
<span class="cm"> * The reverse of samsung_gpio_setcfg_4bit(), turning a gpio configuration</span>
<span class="cm"> * register setting into a value the software can use, such as could be passed</span>
<span class="cm"> * to samsung_gpio_setcfg_4bit().</span>
<span class="cm"> *</span>
<span class="cm"> * @sa samsung_gpio_getcfg_2bit</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="nf">samsung_gpio_getcfg_4bit</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
					 <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">reg</span> <span class="o">=</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">shift</span> <span class="o">=</span> <span class="p">(</span><span class="n">off</span> <span class="o">&amp;</span> <span class="mi">7</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">con</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">off</span> <span class="o">&lt;</span> <span class="mi">8</span> <span class="o">&amp;&amp;</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">ngpio</span> <span class="o">&gt;</span> <span class="mi">8</span><span class="p">)</span>
		<span class="n">reg</span> <span class="o">-=</span> <span class="mi">4</span><span class="p">;</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">reg</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&gt;&gt;=</span> <span class="n">shift</span><span class="p">;</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="mh">0xf</span><span class="p">;</span>

	<span class="cm">/* this conversion works for IN and OUT as well as special mode */</span>
	<span class="k">return</span> <span class="n">S3C_GPIO_SPECIAL</span><span class="p">(</span><span class="n">con</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#ifdef CONFIG_PLAT_S3C24XX</span>
<span class="cm">/*</span>
<span class="cm"> * s3c24xx_gpio_setcfg_abank - S3C24XX style GPIO configuration (Bank A)</span>
<span class="cm"> * @chip: The gpio chip that is being configured.</span>
<span class="cm"> * @off: The offset for the GPIO being configured.</span>
<span class="cm"> * @cfg: The configuration value to set.</span>
<span class="cm"> *</span>
<span class="cm"> * This helper deal with the GPIO cases where the control register</span>
<span class="cm"> * has one bit of configuration for the gpio, where setting the bit</span>
<span class="cm"> * means the pin is in special function mode and unset means output.</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">s3c24xx_gpio_setcfg_abank</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
				     <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">reg</span> <span class="o">=</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">shift</span> <span class="o">=</span> <span class="n">off</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">con</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">samsung_gpio_is_cfg_special</span><span class="p">(</span><span class="n">cfg</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">cfg</span> <span class="o">&amp;=</span> <span class="mh">0xf</span><span class="p">;</span>

		<span class="cm">/* Map output to 0, and SFN2 to 1 */</span>
		<span class="n">cfg</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">cfg</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
			<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

		<span class="n">cfg</span> <span class="o">&lt;&lt;=</span> <span class="n">shift</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">reg</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0x1</span> <span class="o">&lt;&lt;</span> <span class="n">shift</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">|=</span> <span class="n">cfg</span><span class="p">;</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * s3c24xx_gpio_getcfg_abank - S3C24XX style GPIO configuration read (Bank A)</span>
<span class="cm"> * @chip: The gpio chip that is being configured.</span>
<span class="cm"> * @off: The offset for the GPIO being configured.</span>
<span class="cm"> *</span>
<span class="cm"> * The reverse of s3c24xx_gpio_setcfg_abank() turning an GPIO into a usable</span>
<span class="cm"> * GPIO configuration value.</span>
<span class="cm"> *</span>
<span class="cm"> * @sa samsung_gpio_getcfg_2bit</span>
<span class="cm"> * @sa samsung_gpio_getcfg_4bit</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="nf">s3c24xx_gpio_getcfg_abank</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
					  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u32</span> <span class="n">con</span><span class="p">;</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&gt;&gt;=</span> <span class="n">off</span><span class="p">;</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">con</span><span class="o">++</span><span class="p">;</span>

	<span class="k">return</span> <span class="n">S3C_GPIO_SFN</span><span class="p">(</span><span class="n">con</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_CPU_S5P6440) || defined(CONFIG_CPU_S5P6450)</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">s5p64x0_gpio_setcfg_rbank</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
				     <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">reg</span> <span class="o">=</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">shift</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">con</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">off</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mi">0</span>:
	<span class="k">case</span> <span class="mi">1</span>:
	<span class="k">case</span> <span class="mi">2</span>:
	<span class="k">case</span> <span class="mi">3</span>:
	<span class="k">case</span> <span class="mi">4</span>:
	<span class="k">case</span> <span class="mi">5</span>:
		<span class="n">shift</span> <span class="o">=</span> <span class="p">(</span><span class="n">off</span> <span class="o">&amp;</span> <span class="mi">7</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
		<span class="n">reg</span> <span class="o">-=</span> <span class="mi">4</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">6</span>:
		<span class="n">shift</span> <span class="o">=</span> <span class="p">((</span><span class="n">off</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">7</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
		<span class="n">reg</span> <span class="o">-=</span> <span class="mi">4</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">shift</span> <span class="o">=</span> <span class="p">((</span><span class="n">off</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">7</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">samsung_gpio_is_cfg_special</span><span class="p">(</span><span class="n">cfg</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">cfg</span> <span class="o">&amp;=</span> <span class="mh">0xf</span><span class="p">;</span>
		<span class="n">cfg</span> <span class="o">&lt;&lt;=</span> <span class="n">shift</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">reg</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0xf</span> <span class="o">&lt;&lt;</span> <span class="n">shift</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">|=</span> <span class="n">cfg</span><span class="p">;</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">samsung_gpiolib_set_cfg</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_cfg</span> <span class="o">*</span><span class="n">chipcfg</span><span class="p">,</span>
					   <span class="kt">int</span> <span class="n">nr_chips</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">for</span> <span class="p">(;</span> <span class="n">nr_chips</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="n">nr_chips</span><span class="o">--</span><span class="p">,</span> <span class="n">chipcfg</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chipcfg</span><span class="o">-&gt;</span><span class="n">set_config</span><span class="p">)</span>
			<span class="n">chipcfg</span><span class="o">-&gt;</span><span class="n">set_config</span> <span class="o">=</span> <span class="n">samsung_gpio_setcfg_4bit</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chipcfg</span><span class="o">-&gt;</span><span class="n">get_config</span><span class="p">)</span>
			<span class="n">chipcfg</span><span class="o">-&gt;</span><span class="n">get_config</span> <span class="o">=</span> <span class="n">samsung_gpio_getcfg_4bit</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chipcfg</span><span class="o">-&gt;</span><span class="n">set_pull</span><span class="p">)</span>
			<span class="n">chipcfg</span><span class="o">-&gt;</span><span class="n">set_pull</span> <span class="o">=</span> <span class="n">samsung_gpio_setpull_updown</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chipcfg</span><span class="o">-&gt;</span><span class="n">get_pull</span><span class="p">)</span>
			<span class="n">chipcfg</span><span class="o">-&gt;</span><span class="n">get_pull</span> <span class="o">=</span> <span class="n">samsung_gpio_getpull_updown</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">samsung_gpio_cfg</span> <span class="n">s3c24xx_gpiocfg_default</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">set_config</span>	<span class="o">=</span> <span class="n">samsung_gpio_setcfg_2bit</span><span class="p">,</span>
	<span class="p">.</span><span class="n">get_config</span>	<span class="o">=</span> <span class="n">samsung_gpio_getcfg_2bit</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#ifdef CONFIG_PLAT_S3C24XX</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_cfg</span> <span class="n">s3c24xx_gpiocfg_banka</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">set_config</span>	<span class="o">=</span> <span class="n">s3c24xx_gpio_setcfg_abank</span><span class="p">,</span>
	<span class="p">.</span><span class="n">get_config</span>	<span class="o">=</span> <span class="n">s3c24xx_gpio_getcfg_abank</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_ARCH_EXYNOS4) || defined(CONFIG_ARCH_EXYNOS5)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_cfg</span> <span class="n">exynos_gpio_cfg</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">set_pull</span>	<span class="o">=</span> <span class="n">exynos_gpio_setpull</span><span class="p">,</span>
	<span class="p">.</span><span class="n">get_pull</span>	<span class="o">=</span> <span class="n">exynos_gpio_getpull</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_config</span>	<span class="o">=</span> <span class="n">samsung_gpio_setcfg_4bit</span><span class="p">,</span>
	<span class="p">.</span><span class="n">get_config</span>	<span class="o">=</span> <span class="n">samsung_gpio_getcfg_4bit</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_CPU_S5P6440) || defined(CONFIG_CPU_S5P6450)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_cfg</span> <span class="n">s5p64x0_gpio_cfg_rbank</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">cfg_eint</span>	<span class="o">=</span> <span class="mh">0x3</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_config</span>	<span class="o">=</span> <span class="n">s5p64x0_gpio_setcfg_rbank</span><span class="p">,</span>
	<span class="p">.</span><span class="n">get_config</span>	<span class="o">=</span> <span class="n">samsung_gpio_getcfg_4bit</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_pull</span>	<span class="o">=</span> <span class="n">samsung_gpio_setpull_updown</span><span class="p">,</span>
	<span class="p">.</span><span class="n">get_pull</span>	<span class="o">=</span> <span class="n">samsung_gpio_getpull_updown</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_cfg</span> <span class="n">samsung_gpio_cfgs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">cfg_eint</span>	<span class="o">=</span> <span class="mh">0x0</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">cfg_eint</span>	<span class="o">=</span> <span class="mh">0x3</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">cfg_eint</span>	<span class="o">=</span> <span class="mh">0x7</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">cfg_eint</span>	<span class="o">=</span> <span class="mh">0xF</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">cfg_eint</span>	<span class="o">=</span> <span class="mh">0x0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">set_config</span>	<span class="o">=</span> <span class="n">samsung_gpio_setcfg_2bit</span><span class="p">,</span>
		<span class="p">.</span><span class="n">get_config</span>	<span class="o">=</span> <span class="n">samsung_gpio_getcfg_2bit</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">cfg_eint</span>	<span class="o">=</span> <span class="mh">0x2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">set_config</span>	<span class="o">=</span> <span class="n">samsung_gpio_setcfg_2bit</span><span class="p">,</span>
		<span class="p">.</span><span class="n">get_config</span>	<span class="o">=</span> <span class="n">samsung_gpio_getcfg_2bit</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">cfg_eint</span>	<span class="o">=</span> <span class="mh">0x3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">set_config</span>	<span class="o">=</span> <span class="n">samsung_gpio_setcfg_2bit</span><span class="p">,</span>
		<span class="p">.</span><span class="n">get_config</span>	<span class="o">=</span> <span class="n">samsung_gpio_getcfg_2bit</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">set_config</span>	<span class="o">=</span> <span class="n">samsung_gpio_setcfg_2bit</span><span class="p">,</span>
		<span class="p">.</span><span class="n">get_config</span>	<span class="o">=</span> <span class="n">samsung_gpio_getcfg_2bit</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">set_pull</span>	<span class="o">=</span> <span class="n">exynos_gpio_setpull</span><span class="p">,</span>
		<span class="p">.</span><span class="n">get_pull</span>	<span class="o">=</span> <span class="n">exynos_gpio_getpull</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">cfg_eint</span>	<span class="o">=</span> <span class="mh">0x3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">set_pull</span>	<span class="o">=</span> <span class="n">exynos_gpio_setpull</span><span class="p">,</span>
		<span class="p">.</span><span class="n">get_pull</span>	<span class="o">=</span> <span class="n">exynos_gpio_getpull</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Default routines for controlling GPIO, based on the original S3C24XX</span>
<span class="cm"> * GPIO functions which deal with the case where each gpio bank of the</span>
<span class="cm"> * chip is as following:</span>
<span class="cm"> *</span>
<span class="cm"> * base + 0x00: Control register, 2 bits per gpio</span>
<span class="cm"> *	        gpio n: 2 bits starting at (2*n)</span>
<span class="cm"> *		00 = input, 01 = output, others mean special-function</span>
<span class="cm"> * base + 0x04: Data register, 1 bit per gpio</span>
<span class="cm"> *		bit n: data bit n</span>
<span class="cm">*/</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">samsung_gpiolib_2bit_input</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">ourchip</span> <span class="o">=</span> <span class="n">to_samsung_gpio</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span> <span class="o">=</span> <span class="n">ourchip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">con</span><span class="p">;</span>

	<span class="n">samsung_gpio_lock</span><span class="p">(</span><span class="n">ourchip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">base</span> <span class="o">+</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">3</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">offset</span> <span class="o">*</span> <span class="mi">2</span><span class="p">));</span>

	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x00</span><span class="p">);</span>

	<span class="n">samsung_gpio_unlock</span><span class="p">(</span><span class="n">ourchip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">samsung_gpiolib_2bit_output</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
				       <span class="kt">unsigned</span> <span class="n">offset</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">ourchip</span> <span class="o">=</span> <span class="n">to_samsung_gpio</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span> <span class="o">=</span> <span class="n">ourchip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dat</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">con</span><span class="p">;</span>

	<span class="n">samsung_gpio_lock</span><span class="p">(</span><span class="n">ourchip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>

	<span class="n">dat</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">base</span> <span class="o">+</span> <span class="mh">0x04</span><span class="p">);</span>
	<span class="n">dat</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">offset</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">)</span>
		<span class="n">dat</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">offset</span><span class="p">;</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x04</span><span class="p">);</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">base</span> <span class="o">+</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">3</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">offset</span> <span class="o">*</span> <span class="mi">2</span><span class="p">));</span>
	<span class="n">con</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">offset</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>

	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x04</span><span class="p">);</span>

	<span class="n">samsung_gpio_unlock</span><span class="p">(</span><span class="n">ourchip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * The samsung_gpiolib_4bit routines are to control the gpio banks where</span>
<span class="cm"> * the gpio configuration register (GPxCON) has 4 bits per GPIO, as the</span>
<span class="cm"> * following example:</span>
<span class="cm"> *</span>
<span class="cm"> * base + 0x00: Control register, 4 bits per gpio</span>
<span class="cm"> *		gpio n: 4 bits starting at (4*n)</span>
<span class="cm"> *		0000 = input, 0001 = output, others mean special-function</span>
<span class="cm"> * base + 0x04: Data register, 1 bit per gpio</span>
<span class="cm"> *		bit n: data bit n</span>
<span class="cm"> *</span>
<span class="cm"> * Note, since the data register is one bit per gpio and is at base + 0x4</span>
<span class="cm"> * we can use samsung_gpiolib_get and samsung_gpiolib_set to change the</span>
<span class="cm"> * state of the output.</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">samsung_gpiolib_4bit_input</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
				      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">ourchip</span> <span class="o">=</span> <span class="n">to_samsung_gpio</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span> <span class="o">=</span> <span class="n">ourchip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">con</span><span class="p">;</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">base</span> <span class="o">+</span> <span class="n">GPIOCON_OFF</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0xf</span> <span class="o">&lt;&lt;</span> <span class="n">con_4bit_shift</span><span class="p">(</span><span class="n">offset</span><span class="p">));</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="n">GPIOCON_OFF</span><span class="p">);</span>

	<span class="n">gpio_dbg</span><span class="p">(</span><span class="s">&quot;%s: %p: CON now %08lx</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">con</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">samsung_gpiolib_4bit_output</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
				       <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">ourchip</span> <span class="o">=</span> <span class="n">to_samsung_gpio</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span> <span class="o">=</span> <span class="n">ourchip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">con</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dat</span><span class="p">;</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">base</span> <span class="o">+</span> <span class="n">GPIOCON_OFF</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0xf</span> <span class="o">&lt;&lt;</span> <span class="n">con_4bit_shift</span><span class="p">(</span><span class="n">offset</span><span class="p">));</span>
	<span class="n">con</span> <span class="o">|=</span> <span class="mh">0x1</span> <span class="o">&lt;&lt;</span> <span class="n">con_4bit_shift</span><span class="p">(</span><span class="n">offset</span><span class="p">);</span>

	<span class="n">dat</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">base</span> <span class="o">+</span> <span class="n">GPIODAT_OFF</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">)</span>
		<span class="n">dat</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">offset</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">dat</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">offset</span><span class="p">);</span>

	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="n">GPIODAT_OFF</span><span class="p">);</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="n">GPIOCON_OFF</span><span class="p">);</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="n">GPIODAT_OFF</span><span class="p">);</span>

	<span class="n">gpio_dbg</span><span class="p">(</span><span class="s">&quot;%s: %p: CON %08lx, DAT %08lx</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="n">dat</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * The next set of routines are for the case where the GPIO configuration</span>
<span class="cm"> * registers are 4 bits per GPIO but there is more than one register (the</span>
<span class="cm"> * bank has more than 8 GPIOs.</span>
<span class="cm"> *</span>
<span class="cm"> * This case is the similar to the 4 bit case, but the registers are as</span>
<span class="cm"> * follows:</span>
<span class="cm"> *</span>
<span class="cm"> * base + 0x00: Control register, 4 bits per gpio (lower 8 GPIOs)</span>
<span class="cm"> *		gpio n: 4 bits starting at (4*n)</span>
<span class="cm"> *		0000 = input, 0001 = output, others mean special-function</span>
<span class="cm"> * base + 0x04: Control register, 4 bits per gpio (up to 8 additions GPIOs)</span>
<span class="cm"> *		gpio n: 4 bits starting at (4*n)</span>
<span class="cm"> *		0000 = input, 0001 = output, others mean special-function</span>
<span class="cm"> * base + 0x08: Data register, 1 bit per gpio</span>
<span class="cm"> *		bit n: data bit n</span>
<span class="cm"> *</span>
<span class="cm"> * To allow us to use the samsung_gpiolib_get and samsung_gpiolib_set</span>
<span class="cm"> * routines we store the &#39;base + 0x4&#39; address so that these routines see</span>
<span class="cm"> * the data register at ourchip-&gt;base + 0x04.</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">samsung_gpiolib_4bit2_input</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
				       <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">ourchip</span> <span class="o">=</span> <span class="n">to_samsung_gpio</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span> <span class="o">=</span> <span class="n">ourchip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regcon</span> <span class="o">=</span> <span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">con</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">offset</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">)</span>
		<span class="n">offset</span> <span class="o">-=</span> <span class="mi">8</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">regcon</span> <span class="o">-=</span> <span class="mi">4</span><span class="p">;</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">regcon</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0xf</span> <span class="o">&lt;&lt;</span> <span class="n">con_4bit_shift</span><span class="p">(</span><span class="n">offset</span><span class="p">));</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">regcon</span><span class="p">);</span>

	<span class="n">gpio_dbg</span><span class="p">(</span><span class="s">&quot;%s: %p: CON %08lx</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">con</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">samsung_gpiolib_4bit2_output</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
					<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">ourchip</span> <span class="o">=</span> <span class="n">to_samsung_gpio</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span> <span class="o">=</span> <span class="n">ourchip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regcon</span> <span class="o">=</span> <span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">con</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dat</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">con_offset</span> <span class="o">=</span> <span class="n">offset</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">con_offset</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">)</span>
		<span class="n">con_offset</span> <span class="o">-=</span> <span class="mi">8</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">regcon</span> <span class="o">-=</span> <span class="mi">4</span><span class="p">;</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">regcon</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0xf</span> <span class="o">&lt;&lt;</span> <span class="n">con_4bit_shift</span><span class="p">(</span><span class="n">con_offset</span><span class="p">));</span>
	<span class="n">con</span> <span class="o">|=</span> <span class="mh">0x1</span> <span class="o">&lt;&lt;</span> <span class="n">con_4bit_shift</span><span class="p">(</span><span class="n">con_offset</span><span class="p">);</span>

	<span class="n">dat</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">base</span> <span class="o">+</span> <span class="n">GPIODAT_OFF</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">)</span>
		<span class="n">dat</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">offset</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">dat</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">offset</span><span class="p">);</span>

	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="n">GPIODAT_OFF</span><span class="p">);</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">regcon</span><span class="p">);</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="n">GPIODAT_OFF</span><span class="p">);</span>

	<span class="n">gpio_dbg</span><span class="p">(</span><span class="s">&quot;%s: %p: CON %08lx, DAT %08lx</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="n">dat</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#ifdef CONFIG_PLAT_S3C24XX</span>
<span class="cm">/* The next set of routines are for the case of s3c24xx bank a */</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">s3c24xx_gpiolib_banka_input</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">s3c24xx_gpiolib_banka_output</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
					<span class="kt">unsigned</span> <span class="n">offset</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">ourchip</span> <span class="o">=</span> <span class="n">to_samsung_gpio</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span> <span class="o">=</span> <span class="n">ourchip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dat</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">con</span><span class="p">;</span>

	<span class="n">local_irq_save</span><span class="p">(</span><span class="n">flags</span><span class="p">);</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">base</span> <span class="o">+</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">dat</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">base</span> <span class="o">+</span> <span class="mh">0x04</span><span class="p">);</span>

	<span class="n">dat</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">offset</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">)</span>
		<span class="n">dat</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">offset</span><span class="p">;</span>

	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x04</span><span class="p">);</span>

	<span class="n">con</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">offset</span><span class="p">);</span>

	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x00</span><span class="p">);</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x04</span><span class="p">);</span>

	<span class="n">local_irq_restore</span><span class="p">(</span><span class="n">flags</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cm">/* The next set of routines are for the case of s5p64x0 bank r */</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">s5p64x0_gpiolib_rbank_input</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
				       <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">ourchip</span> <span class="o">=</span> <span class="n">to_samsung_gpio</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span> <span class="o">=</span> <span class="n">ourchip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regcon</span> <span class="o">=</span> <span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">con</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">offset</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mi">6</span>:
		<span class="n">offset</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">0</span>:
	<span class="k">case</span> <span class="mi">1</span>:
	<span class="k">case</span> <span class="mi">2</span>:
	<span class="k">case</span> <span class="mi">3</span>:
	<span class="k">case</span> <span class="mi">4</span>:
	<span class="k">case</span> <span class="mi">5</span>:
		<span class="n">regcon</span> <span class="o">-=</span> <span class="mi">4</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">offset</span> <span class="o">-=</span> <span class="mi">7</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">samsung_gpio_lock</span><span class="p">(</span><span class="n">ourchip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">regcon</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0xf</span> <span class="o">&lt;&lt;</span> <span class="n">con_4bit_shift</span><span class="p">(</span><span class="n">offset</span><span class="p">));</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">regcon</span><span class="p">);</span>

	<span class="n">samsung_gpio_unlock</span><span class="p">(</span><span class="n">ourchip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">s5p64x0_gpiolib_rbank_output</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
					<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">ourchip</span> <span class="o">=</span> <span class="n">to_samsung_gpio</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span> <span class="o">=</span> <span class="n">ourchip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regcon</span> <span class="o">=</span> <span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">con</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dat</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">con_offset</span>  <span class="o">=</span> <span class="n">offset</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">con_offset</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mi">6</span>:
		<span class="n">con_offset</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">0</span>:
	<span class="k">case</span> <span class="mi">1</span>:
	<span class="k">case</span> <span class="mi">2</span>:
	<span class="k">case</span> <span class="mi">3</span>:
	<span class="k">case</span> <span class="mi">4</span>:
	<span class="k">case</span> <span class="mi">5</span>:
		<span class="n">regcon</span> <span class="o">-=</span> <span class="mi">4</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">con_offset</span> <span class="o">-=</span> <span class="mi">7</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">samsung_gpio_lock</span><span class="p">(</span><span class="n">ourchip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>

	<span class="n">con</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">regcon</span><span class="p">);</span>
	<span class="n">con</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0xf</span> <span class="o">&lt;&lt;</span> <span class="n">con_4bit_shift</span><span class="p">(</span><span class="n">con_offset</span><span class="p">));</span>
	<span class="n">con</span> <span class="o">|=</span> <span class="mh">0x1</span> <span class="o">&lt;&lt;</span> <span class="n">con_4bit_shift</span><span class="p">(</span><span class="n">con_offset</span><span class="p">);</span>

	<span class="n">dat</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">base</span> <span class="o">+</span> <span class="n">GPIODAT_OFF</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">)</span>
		<span class="n">dat</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">offset</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">dat</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">offset</span><span class="p">);</span>

	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">regcon</span><span class="p">);</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="n">GPIODAT_OFF</span><span class="p">);</span>

	<span class="n">samsung_gpio_unlock</span><span class="p">(</span><span class="n">ourchip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">samsung_gpiolib_set</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
				<span class="kt">unsigned</span> <span class="n">offset</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">ourchip</span> <span class="o">=</span> <span class="n">to_samsung_gpio</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span> <span class="o">=</span> <span class="n">ourchip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dat</span><span class="p">;</span>

	<span class="n">samsung_gpio_lock</span><span class="p">(</span><span class="n">ourchip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>

	<span class="n">dat</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">base</span> <span class="o">+</span> <span class="mh">0x04</span><span class="p">);</span>
	<span class="n">dat</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">offset</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">)</span>
		<span class="n">dat</span> <span class="o">|=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">offset</span><span class="p">;</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x04</span><span class="p">);</span>

	<span class="n">samsung_gpio_unlock</span><span class="p">(</span><span class="n">ourchip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">samsung_gpiolib_get</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">ourchip</span> <span class="o">=</span> <span class="n">to_samsung_gpio</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">val</span><span class="p">;</span>

	<span class="n">val</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">ourchip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">+</span> <span class="mh">0x04</span><span class="p">);</span>
	<span class="n">val</span> <span class="o">&gt;&gt;=</span> <span class="n">offset</span><span class="p">;</span>
	<span class="n">val</span> <span class="o">&amp;=</span> <span class="mi">1</span><span class="p">;</span>

	<span class="k">return</span> <span class="n">val</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * CONFIG_S3C_GPIO_TRACK enables the tracking of the s3c specific gpios</span>
<span class="cm"> * for use with the configuration calls, and other parts of the s3c gpiolib</span>
<span class="cm"> * support code.</span>
<span class="cm"> *</span>
<span class="cm"> * Not all s3c support code will need this, as some configurations of cpu</span>
<span class="cm"> * may only support one or two different configuration options and have an</span>
<span class="cm"> * easy gpio to samsung_gpio_chip mapping function. If this is the case, then</span>
<span class="cm"> * the machine support file should provide its own samsung_gpiolib_getchip()</span>
<span class="cm"> * and any other necessary functions.</span>
<span class="cm"> */</span>

<span class="cp">#ifdef CONFIG_S3C_GPIO_TRACK</span>
<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">s3c_gpios</span><span class="p">[</span><span class="n">S3C_GPIO_END</span><span class="p">];</span>

<span class="k">static</span> <span class="n">__init</span> <span class="kt">void</span> <span class="nf">s3c_gpiolib_track</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">gpn</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="n">gpn</span> <span class="o">=</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">base</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">ngpio</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">gpn</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">BUG_ON</span><span class="p">(</span><span class="n">gpn</span> <span class="o">&gt;=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s3c_gpios</span><span class="p">));</span>
		<span class="n">s3c_gpios</span><span class="p">[</span><span class="n">gpn</span><span class="p">]</span> <span class="o">=</span> <span class="n">chip</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_S3C_GPIO_TRACK */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * samsung_gpiolib_add() - add the Samsung gpio_chip.</span>
<span class="cm"> * @chip: The chip to register</span>
<span class="cm"> *</span>
<span class="cm"> * This is a wrapper to gpiochip_add() that takes our specific gpio chip</span>
<span class="cm"> * information and makes the necessary alterations for the platform and</span>
<span class="cm"> * notes the information for use with the configuration systems and any</span>
<span class="cm"> * other parts of the system.</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">samsung_gpiolib_add</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">gc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="n">BUG_ON</span><span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span><span class="p">);</span>
	<span class="n">BUG_ON</span><span class="p">(</span><span class="o">!</span><span class="n">gc</span><span class="o">-&gt;</span><span class="n">label</span><span class="p">);</span>
	<span class="n">BUG_ON</span><span class="p">(</span><span class="o">!</span><span class="n">gc</span><span class="o">-&gt;</span><span class="n">ngpio</span><span class="p">);</span>

	<span class="n">spin_lock_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">lock</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">gc</span><span class="o">-&gt;</span><span class="n">direction_input</span><span class="p">)</span>
		<span class="n">gc</span><span class="o">-&gt;</span><span class="n">direction_input</span> <span class="o">=</span> <span class="n">samsung_gpiolib_2bit_input</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">gc</span><span class="o">-&gt;</span><span class="n">direction_output</span><span class="p">)</span>
		<span class="n">gc</span><span class="o">-&gt;</span><span class="n">direction_output</span> <span class="o">=</span> <span class="n">samsung_gpiolib_2bit_output</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">gc</span><span class="o">-&gt;</span><span class="n">set</span><span class="p">)</span>
		<span class="n">gc</span><span class="o">-&gt;</span><span class="n">set</span> <span class="o">=</span> <span class="n">samsung_gpiolib_set</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">gc</span><span class="o">-&gt;</span><span class="n">get</span><span class="p">)</span>
		<span class="n">gc</span><span class="o">-&gt;</span><span class="n">get</span> <span class="o">=</span> <span class="n">samsung_gpiolib_get</span><span class="p">;</span>

<span class="cp">#ifdef CONFIG_PM</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">pm</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">pm</span><span class="o">-&gt;</span><span class="n">save</span> <span class="o">||</span> <span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">pm</span><span class="o">-&gt;</span><span class="n">resume</span><span class="p">)</span>
			<span class="n">printk</span><span class="p">(</span><span class="n">KERN_ERR</span> <span class="s">&quot;gpio: %s has missing PM functions</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			       <span class="n">gc</span><span class="o">-&gt;</span><span class="n">label</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_ERR</span> <span class="s">&quot;gpio: %s has no PM function</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">gc</span><span class="o">-&gt;</span><span class="n">label</span><span class="p">);</span>
<span class="cp">#endif</span>

	<span class="cm">/* gpiochip_add() prints own failure message on error. */</span>
	<span class="n">ret</span> <span class="o">=</span> <span class="n">gpiochip_add</span><span class="p">(</span><span class="n">gc</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">s3c_gpiolib_track</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">s3c24xx_gpiolib_add_chips</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
					     <span class="kt">int</span> <span class="n">nr_chips</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">gc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nr_chips</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* skip banks not present on SoC */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">base</span> <span class="o">&gt;=</span> <span class="n">S3C_GPIO_END</span><span class="p">)</span>
			<span class="k">continue</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">s3c24xx_gpiocfg_default</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">pm</span><span class="p">)</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">pm</span> <span class="o">=</span> <span class="n">__gpio_pm</span><span class="p">(</span><span class="o">&amp;</span><span class="n">samsung_gpio_pm_2bit</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">base</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">))</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="p">((</span><span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="mh">0x10</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">gc</span><span class="o">-&gt;</span><span class="n">direction_input</span><span class="p">)</span>
			<span class="n">gc</span><span class="o">-&gt;</span><span class="n">direction_input</span> <span class="o">=</span> <span class="n">samsung_gpiolib_2bit_input</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">gc</span><span class="o">-&gt;</span><span class="n">direction_output</span><span class="p">)</span>
			<span class="n">gc</span><span class="o">-&gt;</span><span class="n">direction_output</span> <span class="o">=</span> <span class="n">samsung_gpiolib_2bit_output</span><span class="p">;</span>

		<span class="n">samsung_gpiolib_add</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">samsung_gpiolib_add_2bit_chips</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
						  <span class="kt">int</span> <span class="n">nr_chips</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span><span class="p">,</span>
						  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nr_chips</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">direction_input</span> <span class="o">=</span> <span class="n">samsung_gpiolib_2bit_input</span><span class="p">;</span>
		<span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">direction_output</span> <span class="o">=</span> <span class="n">samsung_gpiolib_2bit_output</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">pm</span><span class="p">)</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">pm</span> <span class="o">=</span> <span class="n">__gpio_pm</span><span class="p">(</span><span class="o">&amp;</span><span class="n">samsung_gpio_pm_2bit</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">base</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">))</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="p">((</span><span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">offset</span><span class="p">);</span>

		<span class="n">samsung_gpiolib_add</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * samsung_gpiolib_add_4bit_chips - 4bit single register GPIO config.</span>
<span class="cm"> * @chip: The gpio chip that is being configured.</span>
<span class="cm"> * @nr_chips: The no of chips (gpio ports) for the GPIO being configured.</span>
<span class="cm"> *</span>
<span class="cm"> * This helper deal with the GPIO cases where the control register has 4 bits</span>
<span class="cm"> * of control per GPIO, generally in the form of:</span>
<span class="cm"> * 0000 = Input</span>
<span class="cm"> * 0001 = Output</span>
<span class="cm"> * others = Special functions (dependent on bank)</span>
<span class="cm"> *</span>
<span class="cm"> * Note, since the code to deal with the case where there are two control</span>
<span class="cm"> * registers instead of one, we do not have a separate set of function</span>
<span class="cm"> * (samsung_gpiolib_add_4bit2_chips)for each case.</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">samsung_gpiolib_add_4bit_chips</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
						  <span class="kt">int</span> <span class="n">nr_chips</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nr_chips</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">direction_input</span> <span class="o">=</span> <span class="n">samsung_gpiolib_4bit_input</span><span class="p">;</span>
		<span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">direction_output</span> <span class="o">=</span> <span class="n">samsung_gpiolib_4bit_output</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">pm</span><span class="p">)</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">pm</span> <span class="o">=</span> <span class="n">__gpio_pm</span><span class="p">(</span><span class="o">&amp;</span><span class="n">samsung_gpio_pm_4bit</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">base</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">))</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="p">((</span><span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="mh">0x20</span><span class="p">);</span>

		<span class="n">samsung_gpiolib_add</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">samsung_gpiolib_add_4bit2_chips</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
						   <span class="kt">int</span> <span class="n">nr_chips</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">for</span> <span class="p">(;</span> <span class="n">nr_chips</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="n">nr_chips</span><span class="o">--</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">direction_input</span> <span class="o">=</span> <span class="n">samsung_gpiolib_4bit2_input</span><span class="p">;</span>
		<span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">direction_output</span> <span class="o">=</span> <span class="n">samsung_gpiolib_4bit2_output</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">pm</span><span class="p">)</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">pm</span> <span class="o">=</span> <span class="n">__gpio_pm</span><span class="p">(</span><span class="o">&amp;</span><span class="n">samsung_gpio_pm_4bit</span><span class="p">);</span>

		<span class="n">samsung_gpiolib_add</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">s5p64x0_gpiolib_add_rbank</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
					     <span class="kt">int</span> <span class="n">nr_chips</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">for</span> <span class="p">(;</span> <span class="n">nr_chips</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="n">nr_chips</span><span class="o">--</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">direction_input</span> <span class="o">=</span> <span class="n">s5p64x0_gpiolib_rbank_input</span><span class="p">;</span>
		<span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">direction_output</span> <span class="o">=</span> <span class="n">s5p64x0_gpiolib_rbank_output</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">pm</span><span class="p">)</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">pm</span> <span class="o">=</span> <span class="n">__gpio_pm</span><span class="p">(</span><span class="o">&amp;</span><span class="n">samsung_gpio_pm_4bit</span><span class="p">);</span>

		<span class="n">samsung_gpiolib_add</span><span class="p">(</span><span class="n">chip</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">samsung_gpiolib_to_irq</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">samsung_chip</span> <span class="o">=</span> <span class="n">container_of</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span><span class="p">,</span> <span class="n">chip</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">samsung_chip</span><span class="o">-&gt;</span><span class="n">irq_base</span> <span class="o">+</span> <span class="n">offset</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#ifdef CONFIG_PLAT_S3C24XX</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">s3c24xx_gpiolib_fbank_to_irq</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">offset</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">IRQ_EINT0</span> <span class="o">+</span> <span class="n">offset</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">offset</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">IRQ_EINT4</span> <span class="o">+</span> <span class="n">offset</span> <span class="o">-</span> <span class="mi">4</span><span class="p">;</span>

	<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_PLAT_S3C64XX</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">s3c64xx_gpiolib_mbank_to_irq</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">pin</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">pin</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="o">?</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span> <span class="o">+</span> <span class="n">pin</span> <span class="o">:</span> <span class="o">-</span><span class="n">ENXIO</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">s3c64xx_gpiolib_lbank_to_irq</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">pin</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">pin</span> <span class="o">&gt;=</span> <span class="mi">8</span> <span class="o">?</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="o">+</span> <span class="n">pin</span> <span class="o">-</span> <span class="mi">8</span> <span class="o">:</span> <span class="o">-</span><span class="n">ENXIO</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">s3c24xx_gpios</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_PLAT_S3C24XX</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">s3c24xx_gpiocfg_banka</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>			<span class="o">=</span> <span class="n">S3C2410_GPA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">owner</span>			<span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>			<span class="o">=</span> <span class="s">&quot;GPIOA&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">ngpio</span>			<span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
			<span class="p">.</span><span class="n">direction_input</span>	<span class="o">=</span> <span class="n">s3c24xx_gpiolib_banka_input</span><span class="p">,</span>
			<span class="p">.</span><span class="n">direction_output</span>	<span class="o">=</span> <span class="n">s3c24xx_gpiolib_banka_output</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2410_GPB</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">owner</span>	<span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPIOB&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2410_GPC</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">owner</span>	<span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPIOC&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2410_GPD</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">owner</span>	<span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPIOD&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2410_GPE</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPIOE&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">owner</span>	<span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2410_GPF</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">owner</span>	<span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPIOF&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span>	<span class="o">=</span> <span class="n">s3c24xx_gpiolib_fbank_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2410_GPG</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">owner</span>	<span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPIOG&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span>	<span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2410_GPH</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">owner</span>	<span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPIOH&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
		<span class="cm">/* GPIOS for the S3C2443 and later devices. */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2440_GPJCON</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2410_GPJ</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">owner</span>	<span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPIOJ&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2443_GPKCON</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2410_GPK</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">owner</span>	<span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPIOK&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2443_GPLCON</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2410_GPL</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">owner</span>	<span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPIOL&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2443_GPMCON</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C2410_GPM</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">owner</span>	<span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPIOM&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * GPIO bank summary:</span>
<span class="cm"> *</span>
<span class="cm"> * Bank	GPIOs	Style	SlpCon	ExtInt Group</span>
<span class="cm"> * A	8	4Bit	Yes	1</span>
<span class="cm"> * B	7	4Bit	Yes	1</span>
<span class="cm"> * C	8	4Bit	Yes	2</span>
<span class="cm"> * D	5	4Bit	Yes	3</span>
<span class="cm"> * E	5	4Bit	Yes	None</span>
<span class="cm"> * F	16	2Bit	Yes	4 [1]</span>
<span class="cm"> * G	7	4Bit	Yes	5</span>
<span class="cm"> * H	10	4Bit[2]	Yes	6</span>
<span class="cm"> * I	16	2Bit	Yes	None</span>
<span class="cm"> * J	12	2Bit	Yes	None</span>
<span class="cm"> * K	16	4Bit[2]	No	None</span>
<span class="cm"> * L	15	4Bit[2] No	None</span>
<span class="cm"> * M	6	4Bit	No	IRQ_EINT</span>
<span class="cm"> * N	16	2Bit	No	IRQ_EINT</span>
<span class="cm"> * O	16	2Bit	Yes	7</span>
<span class="cm"> * P	15	2Bit	Yes	8</span>
<span class="cm"> * Q	9	2Bit	Yes	9</span>
<span class="cm"> *</span>
<span class="cm"> * [1] BANKF pins 14,15 do not form part of the external interrupt sources</span>
<span class="cm"> * [2] BANK has two control registers, GPxCON0 and GPxCON1</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">s3c64xx_gpios_4bit</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_PLAT_S3C64XX</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_A_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPA&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPB</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_B_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPB&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPC</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_C_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPC&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPD</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_D_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPD&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPE</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_E_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPE&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPG_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPG</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_G_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPG&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPM_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPM</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_M_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPM&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span> <span class="o">=</span> <span class="n">s3c64xx_gpiolib_mbank_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">s3c64xx_gpios_4bit2</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_PLAT_S3C64XX</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPH_BASE</span> <span class="o">+</span> <span class="mh">0x4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPH</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_H_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPH&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPK_BASE</span> <span class="o">+</span> <span class="mh">0x4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPK</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_K_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPK&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPL_BASE</span> <span class="o">+</span> <span class="mh">0x4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPL</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_L_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPL&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span> <span class="o">=</span> <span class="n">s3c64xx_gpiolib_lbank_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">s3c64xx_gpios_2bit</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_PLAT_S3C64XX</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPF_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPF</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_F_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPI</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_I_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPI&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPJ</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_J_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPO</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_O_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPO&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPP</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_P_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPP&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPQ</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_Q_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPQ&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPN_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S3C64XX_GPN</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S3C64XX_GPIO_N_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPN&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span> <span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * S5P6440 GPIO bank summary:</span>
<span class="cm"> *</span>
<span class="cm"> * Bank	GPIOs	Style	SlpCon	ExtInt Group</span>
<span class="cm"> * A	6	4Bit	Yes	1</span>
<span class="cm"> * B	7	4Bit	Yes	1</span>
<span class="cm"> * C	8	4Bit	Yes	2</span>
<span class="cm"> * F	2	2Bit	Yes	4 [1]</span>
<span class="cm"> * G	7	4Bit	Yes	5</span>
<span class="cm"> * H	10	4Bit[2]	Yes	6</span>
<span class="cm"> * I	16	2Bit	Yes	None</span>
<span class="cm"> * J	12	2Bit	Yes	None</span>
<span class="cm"> * N	16	2Bit	No	IRQ_EINT</span>
<span class="cm"> * P	8	2Bit	Yes	8</span>
<span class="cm"> * R	15	4Bit[2]	Yes	8</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">s5p6440_gpios_4bit</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_CPU_S5P6440</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6440_GPA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6440_GPIO_A_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPA&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6440_GPB</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6440_GPIO_B_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPB&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6440_GPC</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6440_GPIO_C_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPC&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPG_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6440_GPG</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6440_GPIO_G_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPG&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">s5p6440_gpios_4bit2</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_CPU_S5P6440</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPH_BASE</span> <span class="o">+</span> <span class="mh">0x4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6440_GPH</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6440_GPIO_H_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPH&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">s5p6440_gpios_rbank</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_CPU_S5P6440</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPR_BASE</span> <span class="o">+</span> <span class="mh">0x4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">s5p64x0_gpio_cfg_rbank</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6440_GPR</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6440_GPIO_R_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPR&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">s5p6440_gpios_2bit</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_CPU_S5P6440</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPF_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6440_GPF</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6440_GPIO_F_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPI_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6440_GPI</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6440_GPIO_I_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPI&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPJ_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6440_GPJ</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6440_GPIO_J_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPN_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6440_GPN</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6440_GPIO_N_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPN&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPP_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6440_GPP</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6440_GPIO_P_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPP&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * S5P6450 GPIO bank summary:</span>
<span class="cm"> *</span>
<span class="cm"> * Bank	GPIOs	Style	SlpCon	ExtInt Group</span>
<span class="cm"> * A	6	4Bit	Yes	1</span>
<span class="cm"> * B	7	4Bit	Yes	1</span>
<span class="cm"> * C	8	4Bit	Yes	2</span>
<span class="cm"> * D	8	4Bit	Yes	None</span>
<span class="cm"> * F	2	2Bit	Yes	None</span>
<span class="cm"> * G	14	4Bit[2]	Yes	5</span>
<span class="cm"> * H	10	4Bit[2]	Yes	6</span>
<span class="cm"> * I	16	2Bit	Yes	None</span>
<span class="cm"> * J	12	2Bit	Yes	None</span>
<span class="cm"> * K	5	4Bit	Yes	None</span>
<span class="cm"> * N	16	2Bit	No	IRQ_EINT</span>
<span class="cm"> * P	11	2Bit	Yes	8</span>
<span class="cm"> * Q	14	2Bit	Yes	None</span>
<span class="cm"> * R	15	4Bit[2]	Yes	None</span>
<span class="cm"> * S	8	2Bit	Yes	None</span>
<span class="cm"> *</span>
<span class="cm"> * [1] BANKF pins 14,15 do not form part of the external interrupt sources</span>
<span class="cm"> * [2] BANK has two control registers, GPxCON0 and GPxCON1</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">s5p6450_gpios_4bit</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_CPU_S5P6450</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_A_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPA&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPB</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_B_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPB&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPC</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_C_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPC&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPD</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_D_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPD&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPK_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPK</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_K_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPK&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">s5p6450_gpios_4bit2</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_CPU_S5P6450</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPG_BASE</span> <span class="o">+</span> <span class="mh">0x4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPG</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_G_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPG&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPH_BASE</span> <span class="o">+</span> <span class="mh">0x4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPH</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_H_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPH&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">s5p6450_gpios_rbank</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_CPU_S5P6450</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPR_BASE</span> <span class="o">+</span> <span class="mh">0x4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">s5p64x0_gpio_cfg_rbank</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPR</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_R_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPR&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">s5p6450_gpios_2bit</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_CPU_S5P6450</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPF_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPF</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_F_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPI_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPI</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_I_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPI&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPJ_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPJ</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_J_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPN_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPN</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_N_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPN&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P64X0_GPP_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPP</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_P_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPP&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPQ_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPQ</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_Q_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPQ&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPS_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5P6450_GPS</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5P6450_GPIO_S_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPS&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * S5PC100 GPIO bank summary:</span>
<span class="cm"> *</span>
<span class="cm"> * Bank	GPIOs	Style	INT Type</span>
<span class="cm"> * A0	8	4Bit	GPIO_INT0</span>
<span class="cm"> * A1	5	4Bit	GPIO_INT1</span>
<span class="cm"> * B	8	4Bit	GPIO_INT2</span>
<span class="cm"> * C	5	4Bit	GPIO_INT3</span>
<span class="cm"> * D	7	4Bit	GPIO_INT4</span>
<span class="cm"> * E0	8	4Bit	GPIO_INT5</span>
<span class="cm"> * E1	6	4Bit	GPIO_INT6</span>
<span class="cm"> * F0	8	4Bit	GPIO_INT7</span>
<span class="cm"> * F1	8	4Bit	GPIO_INT8</span>
<span class="cm"> * F2	8	4Bit	GPIO_INT9</span>
<span class="cm"> * F3	4	4Bit	GPIO_INT10</span>
<span class="cm"> * G0	8	4Bit	GPIO_INT11</span>
<span class="cm"> * G1	3	4Bit	GPIO_INT12</span>
<span class="cm"> * G2	7	4Bit	GPIO_INT13</span>
<span class="cm"> * G3	7	4Bit	GPIO_INT14</span>
<span class="cm"> * H0	8	4Bit	WKUP_INT</span>
<span class="cm"> * H1	8	4Bit	WKUP_INT</span>
<span class="cm"> * H2	8	4Bit	WKUP_INT</span>
<span class="cm"> * H3	8	4Bit	WKUP_INT</span>
<span class="cm"> * I	8	4Bit	GPIO_INT15</span>
<span class="cm"> * J0	8	4Bit	GPIO_INT16</span>
<span class="cm"> * J1	5	4Bit	GPIO_INT17</span>
<span class="cm"> * J2	8	4Bit	GPIO_INT18</span>
<span class="cm"> * J3	8	4Bit	GPIO_INT19</span>
<span class="cm"> * J4	4	4Bit	GPIO_INT20</span>
<span class="cm"> * K0	8	4Bit	None</span>
<span class="cm"> * K1	6	4Bit	None</span>
<span class="cm"> * K2	8	4Bit	None</span>
<span class="cm"> * K3	8	4Bit	None</span>
<span class="cm"> * L0	8	4Bit	None</span>
<span class="cm"> * L1	8	4Bit	None</span>
<span class="cm"> * L2	8	4Bit	None</span>
<span class="cm"> * L3	8	4Bit	None</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">s5pc100_gpios_4bit</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_CPU_S5PC100</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPA0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_A0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPA0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPA1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_A1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPA1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPB</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_B_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPB&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPC</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_C_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPC&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPD</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_D_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPD&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPE0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_E0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPE0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPE1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_E1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPE1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPF0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_F0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPF1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_F1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPF2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_F2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPF3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_F3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPG0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_G0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPG0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPG1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_G1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPG1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPG2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_G2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPG2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPG3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_G3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPG3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPI</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_I_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPI&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPJ0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_J0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPJ1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_J1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPJ2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_J2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPJ3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_J3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPJ4</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_J4_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ4&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPK0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_K0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPK0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPK1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_K1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPK1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPK2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_K2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPK2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPK3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_K3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPK3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPL0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_L0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPL0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPL1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_L1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPL1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPL2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_L2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPL2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPL3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_L3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPL3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPL4</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_L4_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPL4&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="p">(</span><span class="n">S5P_VA_GPIO</span> <span class="o">+</span> <span class="mh">0xC00</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPH0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_H0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPH0&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span> <span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="p">(</span><span class="n">S5P_VA_GPIO</span> <span class="o">+</span> <span class="mh">0xC20</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPH1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_H1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPH1&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span> <span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="p">(</span><span class="n">S5P_VA_GPIO</span> <span class="o">+</span> <span class="mh">0xC40</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPH2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_H2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPH2&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span> <span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="p">(</span><span class="n">S5P_VA_GPIO</span> <span class="o">+</span> <span class="mh">0xC60</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PC100_GPH3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PC100_GPIO_H3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPH3&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span> <span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Followings are the gpio banks in S5PV210/S5PC110</span>
<span class="cm"> *</span>
<span class="cm"> * The &#39;config&#39; member when left to NULL, is initialized to the default</span>
<span class="cm"> * structure samsung_gpio_cfgs[3] in the init function below.</span>
<span class="cm"> *</span>
<span class="cm"> * The &#39;base&#39; member is also initialized in the init function below.</span>
<span class="cm"> * Note: The initialization of &#39;base&#39; member of samsung_gpio_chip structure</span>
<span class="cm"> * uses the above macro and depends on the banks being listed in order here.</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">s5pv210_gpios_4bit</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_CPU_S5PV210</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPA0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_A0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPA0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPA1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_A1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPA1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPB</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_B_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPB&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPC0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_C0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPC0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPC1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_C1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPC1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPD0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_D0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPD0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPD1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_D1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPD1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPE0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_E0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPE0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPE1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_E1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPE1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPF0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_F0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPF1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_F1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPF2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_F2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPF3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_F3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPG0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_G0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPG0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPG1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_G1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPG1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPG2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_G2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPG2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPG3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_G3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPG3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPI</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_I_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPI&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPJ0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_J0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPJ1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_J1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPJ2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_J2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPJ3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_J3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPJ4</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_J4_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ4&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_MP01</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_MP01_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;MP01&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_MP02</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_MP02_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;MP02&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_MP03</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_MP03_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;MP03&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_MP04</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_MP04_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;MP04&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_MP05</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_MP05_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;MP05&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="p">(</span><span class="n">S5P_VA_GPIO</span> <span class="o">+</span> <span class="mh">0xC00</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPH0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_H0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPH0&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span> <span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="p">(</span><span class="n">S5P_VA_GPIO</span> <span class="o">+</span> <span class="mh">0xC20</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPH1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_H1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPH1&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span> <span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="p">(</span><span class="n">S5P_VA_GPIO</span> <span class="o">+</span> <span class="mh">0xC40</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPH2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_H2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPH2&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span> <span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="p">(</span><span class="n">S5P_VA_GPIO</span> <span class="o">+</span> <span class="mh">0xC60</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">S5PV210_GPH3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">S5PV210_GPIO_H3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPH3&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span> <span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Followings are the gpio banks in EXYNOS SoCs</span>
<span class="cm"> *</span>
<span class="cm"> * The &#39;config&#39; member when left to NULL, is initialized to the default</span>
<span class="cm"> * structure exynos_gpio_cfg in the init function below.</span>
<span class="cm"> *</span>
<span class="cm"> * The &#39;base&#39; member is also initialized in the init function below.</span>
<span class="cm"> * Note: The initialization of &#39;base&#39; member of samsung_gpio_chip structure</span>
<span class="cm"> * uses the above macro and depends on the banks being listed in order here.</span>
<span class="cm"> */</span>

<span class="cp">#ifdef CONFIG_ARCH_EXYNOS4</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">exynos4_gpios_1</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPA0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_A0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPA0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPA1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_A1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPA1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPB</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_B_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPB&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPC0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_C0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPC0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPC1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_C1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPC1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPD0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_D0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPD0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPD1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_D1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPD1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPE0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_E0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPE0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPE1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_E1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPE1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPE2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_E2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPE2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPE3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_E3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPE3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPE4</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_E4_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPE4&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPF0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_F0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPF1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_F1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPF2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_F2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPF3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_F3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_ARCH_EXYNOS4</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">exynos4_gpios_2</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPJ0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_J0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPJ1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_J1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPJ1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPK0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_K0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPK0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPK1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_K1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPK1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPK2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_K2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPK2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPK3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_K3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPK3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPL0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_L0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPL0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPL1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_L1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPL1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPL2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_L2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPL2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPY0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_Y0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPY0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPY1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_Y1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPY1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPY2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_Y2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPY2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPY3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_Y3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPY3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPY4</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_Y4_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPY4&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPY5</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_Y5_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPY5&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPY6</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_Y6_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPY6&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPX0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_X0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPX0&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span>	<span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPX1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_X1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPX1&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span>	<span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPX2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_X2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPX2&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span>	<span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPX3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_X3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPX3&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span>	<span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_ARCH_EXYNOS4</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">exynos4_gpios_3</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPZ</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS4_GPIO_Z_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPZ&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_ARCH_EXYNOS5</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">exynos5_gpios_1</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPA0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_A0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPA0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPA1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_A1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPA1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPA2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_A2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPA2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPB0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_B0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPB0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPB1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_B1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPB1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPB2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_B2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPB2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPB3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_B3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPB3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPC0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_C0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPC0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPC1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_C1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPC1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPC2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_C2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPC2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPC3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_C3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPC3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPC4</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_C4_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPC4&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPD0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_D0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPD0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPD1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_D1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPD1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPY0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_Y0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPY0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPY1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_Y1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPY1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPY2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_Y2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPY2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPY3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_Y3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPY3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPY4</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_Y4_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPY4&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPY5</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_Y5_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPY5&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPY6</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_Y6_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPY6&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPX0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_X0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPX0&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span>	<span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPX1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_X1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPX1&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span>	<span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPX2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_X2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPX2&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span>	<span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">config</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span>
		<span class="p">.</span><span class="n">irq_base</span> <span class="o">=</span> <span class="n">IRQ_EINT</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPX3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_X3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPX3&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">to_irq</span>	<span class="o">=</span> <span class="n">samsung_gpiolib_to_irq</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_ARCH_EXYNOS5</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">exynos5_gpios_2</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPE0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_E0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPE0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPE1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_E1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPE1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPF0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_F0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPF1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_F1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPF1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPG0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_G0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPG0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPG1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_G1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPG1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPG2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_G2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPG2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPH0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_H0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPH0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPH1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_H1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPH1&quot;</span><span class="p">,</span>

		<span class="p">},</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_ARCH_EXYNOS5</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">exynos5_gpios_3</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPV0</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_V0_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPV0&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPV1</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_V1_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPV1&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPV2</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_V2_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPV2&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPV3</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_V3_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPV3&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPV4</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_V4_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPV4&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_ARCH_EXYNOS5</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="n">exynos5_gpios_4</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chip</span>	<span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">base</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPZ</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
			<span class="p">.</span><span class="n">ngpio</span>	<span class="o">=</span> <span class="n">EXYNOS5_GPIO_Z_NR</span><span class="p">,</span>
			<span class="p">.</span><span class="n">label</span>	<span class="o">=</span> <span class="s">&quot;GPZ&quot;</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>


<span class="cp">#if defined(CONFIG_ARCH_EXYNOS) &amp;&amp; defined(CONFIG_OF)</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">exynos_gpio_xlate</span><span class="p">(</span><span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">gc</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">of_phandle_args</span> <span class="o">*</span><span class="n">gpiospec</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">flags</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pin</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">WARN_ON</span><span class="p">(</span><span class="n">gc</span><span class="o">-&gt;</span><span class="n">of_gpio_n_cells</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">))</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">WARN_ON</span><span class="p">(</span><span class="n">gpiospec</span><span class="o">-&gt;</span><span class="n">args_count</span> <span class="o">&lt;</span> <span class="n">gc</span><span class="o">-&gt;</span><span class="n">of_gpio_n_cells</span><span class="p">))</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">gpiospec</span><span class="o">-&gt;</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">gc</span><span class="o">-&gt;</span><span class="n">ngpio</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="n">pin</span> <span class="o">=</span> <span class="n">gc</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">+</span> <span class="n">gpiospec</span><span class="o">-&gt;</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">s3c_gpio_cfgpin</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="n">S3C_GPIO_SFN</span><span class="p">(</span><span class="n">gpiospec</span><span class="o">-&gt;</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
		<span class="n">pr_warn</span><span class="p">(</span><span class="s">&quot;gpio_xlate: failed to set pin function</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">s3c_gpio_setpull</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="n">gpiospec</span><span class="o">-&gt;</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
		<span class="n">pr_warn</span><span class="p">(</span><span class="s">&quot;gpio_xlate: failed to set pin pull up/down</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">s5p_gpio_set_drvstr</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="n">gpiospec</span><span class="o">-&gt;</span><span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
		<span class="n">pr_warn</span><span class="p">(</span><span class="s">&quot;gpio_xlate: failed to set pin drive strength</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">gpiospec</span><span class="o">-&gt;</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">of_device_id</span> <span class="n">exynos_gpio_dt_match</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">compatible</span> <span class="o">=</span> <span class="s">&quot;samsung,exynos4-gpio&quot;</span><span class="p">,</span> <span class="p">},</span>
	<span class="p">{}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">__init</span> <span class="kt">void</span> <span class="nf">exynos_gpiolib_attach_ofnode</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
						<span class="n">u64</span> <span class="n">base</span><span class="p">,</span> <span class="n">u64</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">gpio_chip</span> <span class="o">*</span><span class="n">gc</span> <span class="o">=</span>  <span class="o">&amp;</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">address</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">of_have_populated_dt</span><span class="p">())</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="n">address</span> <span class="o">=</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">?</span> <span class="n">base</span> <span class="o">+</span> <span class="p">((</span><span class="n">u32</span><span class="p">)</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">&amp;</span> <span class="mh">0xfff</span><span class="p">)</span> <span class="o">:</span> <span class="n">base</span> <span class="o">+</span> <span class="n">offset</span><span class="p">;</span>
	<span class="n">gc</span><span class="o">-&gt;</span><span class="n">of_node</span> <span class="o">=</span> <span class="n">of_find_matching_node_by_address</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span>
			<span class="n">exynos_gpio_dt_match</span><span class="p">,</span> <span class="n">address</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">gc</span><span class="o">-&gt;</span><span class="n">of_node</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;gpio: device tree node not found for gpio controller&quot;</span>
			<span class="s">&quot; with base address %08llx</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">address</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">gc</span><span class="o">-&gt;</span><span class="n">of_gpio_n_cells</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
	<span class="n">gc</span><span class="o">-&gt;</span><span class="n">of_xlate</span> <span class="o">=</span> <span class="n">exynos_gpio_xlate</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#elif defined(CONFIG_ARCH_EXYNOS)</span>
<span class="k">static</span> <span class="n">__init</span> <span class="kt">void</span> <span class="nf">exynos_gpiolib_attach_ofnode</span><span class="p">(</span><span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">,</span>
						<span class="n">u64</span> <span class="n">base</span><span class="p">,</span> <span class="n">u64</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif </span><span class="cm">/* defined(CONFIG_ARCH_EXYNOS) &amp;&amp; defined(CONFIG_OF) */</span><span class="cp"></span>

<span class="k">static</span> <span class="n">__init</span> <span class="kt">void</span> <span class="nf">exynos4_gpiolib_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#ifdef CONFIG_CPU_EXYNOS4210</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">nr_chips</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">gpio_base1</span><span class="p">,</span> <span class="o">*</span><span class="n">gpio_base2</span><span class="p">,</span> <span class="o">*</span><span class="n">gpio_base3</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">group</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">gpx_base</span><span class="p">;</span>

	<span class="cm">/* gpio part1 */</span>
	<span class="n">gpio_base1</span> <span class="o">=</span> <span class="n">ioremap</span><span class="p">(</span><span class="n">EXYNOS4_PA_GPIO1</span><span class="p">,</span> <span class="n">SZ_4K</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gpio_base1</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;unable to ioremap for gpio_base1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">err_ioremap1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">chip</span> <span class="o">=</span> <span class="n">exynos4_gpios_1</span><span class="p">;</span>
	<span class="n">nr_chips</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">exynos4_gpios_1</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nr_chips</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">exynos_gpio_cfg</span><span class="p">;</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span><span class="o">++</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">exynos_gpiolib_attach_ofnode</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span>
				<span class="n">EXYNOS4_PA_GPIO1</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="mh">0x20</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">samsung_gpiolib_add_4bit_chips</span><span class="p">(</span><span class="n">exynos4_gpios_1</span><span class="p">,</span>
				       <span class="n">nr_chips</span><span class="p">,</span> <span class="n">gpio_base1</span><span class="p">);</span>

	<span class="cm">/* gpio part2 */</span>
	<span class="n">gpio_base2</span> <span class="o">=</span> <span class="n">ioremap</span><span class="p">(</span><span class="n">EXYNOS4_PA_GPIO2</span><span class="p">,</span> <span class="n">SZ_4K</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gpio_base2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;unable to ioremap for gpio_base2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">err_ioremap2</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* need to set base address for gpx */</span>
	<span class="n">chip</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">exynos4_gpios_2</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">gpx_base</span> <span class="o">=</span> <span class="n">gpio_base2</span> <span class="o">+</span> <span class="mh">0xC00</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">,</span> <span class="n">gpx_base</span> <span class="o">+=</span> <span class="mh">0x20</span><span class="p">)</span>
		<span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">=</span> <span class="n">gpx_base</span><span class="p">;</span>

	<span class="n">chip</span> <span class="o">=</span> <span class="n">exynos4_gpios_2</span><span class="p">;</span>
	<span class="n">nr_chips</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">exynos4_gpios_2</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nr_chips</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">exynos_gpio_cfg</span><span class="p">;</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span><span class="o">++</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">exynos_gpiolib_attach_ofnode</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span>
				<span class="n">EXYNOS4_PA_GPIO2</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="mh">0x20</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">samsung_gpiolib_add_4bit_chips</span><span class="p">(</span><span class="n">exynos4_gpios_2</span><span class="p">,</span>
				       <span class="n">nr_chips</span><span class="p">,</span> <span class="n">gpio_base2</span><span class="p">);</span>

	<span class="cm">/* gpio part3 */</span>
	<span class="n">gpio_base3</span> <span class="o">=</span> <span class="n">ioremap</span><span class="p">(</span><span class="n">EXYNOS4_PA_GPIO3</span><span class="p">,</span> <span class="n">SZ_256</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gpio_base3</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;unable to ioremap for gpio_base3</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">err_ioremap3</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">chip</span> <span class="o">=</span> <span class="n">exynos4_gpios_3</span><span class="p">;</span>
	<span class="n">nr_chips</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">exynos4_gpios_3</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nr_chips</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">exynos_gpio_cfg</span><span class="p">;</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span><span class="o">++</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">exynos_gpiolib_attach_ofnode</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span>
				<span class="n">EXYNOS4_PA_GPIO3</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="mh">0x20</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">samsung_gpiolib_add_4bit_chips</span><span class="p">(</span><span class="n">exynos4_gpios_3</span><span class="p">,</span>
				       <span class="n">nr_chips</span><span class="p">,</span> <span class="n">gpio_base3</span><span class="p">);</span>

<span class="cp">#if defined(CONFIG_CPU_EXYNOS4210) &amp;&amp; defined(CONFIG_S5P_GPIO_INT)</span>
	<span class="n">s5p_register_gpioint_bank</span><span class="p">(</span><span class="n">IRQ_GPIO_XA</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">IRQ_GPIO1_NR_GROUPS</span><span class="p">);</span>
	<span class="n">s5p_register_gpioint_bank</span><span class="p">(</span><span class="n">IRQ_GPIO_XB</span><span class="p">,</span> <span class="n">IRQ_GPIO1_NR_GROUPS</span><span class="p">,</span> <span class="n">IRQ_GPIO2_NR_GROUPS</span><span class="p">);</span>
<span class="cp">#endif</span>

	<span class="k">return</span><span class="p">;</span>

<span class="nl">err_ioremap3:</span>
	<span class="n">iounmap</span><span class="p">(</span><span class="n">gpio_base2</span><span class="p">);</span>
<span class="nl">err_ioremap2:</span>
	<span class="n">iounmap</span><span class="p">(</span><span class="n">gpio_base1</span><span class="p">);</span>
<span class="nl">err_ioremap1:</span>
	<span class="k">return</span><span class="p">;</span>
<span class="cp">#endif	</span><span class="cm">/* CONFIG_CPU_EXYNOS4210 */</span><span class="cp"></span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">__init</span> <span class="kt">void</span> <span class="nf">exynos5_gpiolib_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#ifdef CONFIG_SOC_EXYNOS5250</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">nr_chips</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">gpio_base1</span><span class="p">,</span> <span class="o">*</span><span class="n">gpio_base2</span><span class="p">,</span> <span class="o">*</span><span class="n">gpio_base3</span><span class="p">,</span> <span class="o">*</span><span class="n">gpio_base4</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">group</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">gpx_base</span><span class="p">;</span>

	<span class="cm">/* gpio part1 */</span>
	<span class="n">gpio_base1</span> <span class="o">=</span> <span class="n">ioremap</span><span class="p">(</span><span class="n">EXYNOS5_PA_GPIO1</span><span class="p">,</span> <span class="n">SZ_4K</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gpio_base1</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;unable to ioremap for gpio_base1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">err_ioremap1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* need to set base address for gpc4 */</span>
	<span class="n">exynos5_gpios_1</span><span class="p">[</span><span class="mi">11</span><span class="p">].</span><span class="n">base</span> <span class="o">=</span> <span class="n">gpio_base1</span> <span class="o">+</span> <span class="mh">0x2E0</span><span class="p">;</span>

	<span class="cm">/* need to set base address for gpx */</span>
	<span class="n">chip</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">exynos5_gpios_1</span><span class="p">[</span><span class="mi">21</span><span class="p">];</span>
	<span class="n">gpx_base</span> <span class="o">=</span> <span class="n">gpio_base1</span> <span class="o">+</span> <span class="mh">0xC00</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">,</span> <span class="n">gpx_base</span> <span class="o">+=</span> <span class="mh">0x20</span><span class="p">)</span>
		<span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">=</span> <span class="n">gpx_base</span><span class="p">;</span>

	<span class="n">chip</span> <span class="o">=</span> <span class="n">exynos5_gpios_1</span><span class="p">;</span>
	<span class="n">nr_chips</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">exynos5_gpios_1</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nr_chips</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">exynos_gpio_cfg</span><span class="p">;</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span><span class="o">++</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">exynos_gpiolib_attach_ofnode</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span>
				<span class="n">EXYNOS5_PA_GPIO1</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="mh">0x20</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">samsung_gpiolib_add_4bit_chips</span><span class="p">(</span><span class="n">exynos5_gpios_1</span><span class="p">,</span>
				       <span class="n">nr_chips</span><span class="p">,</span> <span class="n">gpio_base1</span><span class="p">);</span>

	<span class="cm">/* gpio part2 */</span>
	<span class="n">gpio_base2</span> <span class="o">=</span> <span class="n">ioremap</span><span class="p">(</span><span class="n">EXYNOS5_PA_GPIO2</span><span class="p">,</span> <span class="n">SZ_4K</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gpio_base2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;unable to ioremap for gpio_base2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">err_ioremap2</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">chip</span> <span class="o">=</span> <span class="n">exynos5_gpios_2</span><span class="p">;</span>
	<span class="n">nr_chips</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">exynos5_gpios_2</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nr_chips</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">exynos_gpio_cfg</span><span class="p">;</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span><span class="o">++</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">exynos_gpiolib_attach_ofnode</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span>
				<span class="n">EXYNOS5_PA_GPIO2</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="mh">0x20</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">samsung_gpiolib_add_4bit_chips</span><span class="p">(</span><span class="n">exynos5_gpios_2</span><span class="p">,</span>
				       <span class="n">nr_chips</span><span class="p">,</span> <span class="n">gpio_base2</span><span class="p">);</span>

	<span class="cm">/* gpio part3 */</span>
	<span class="n">gpio_base3</span> <span class="o">=</span> <span class="n">ioremap</span><span class="p">(</span><span class="n">EXYNOS5_PA_GPIO3</span><span class="p">,</span> <span class="n">SZ_4K</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gpio_base3</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;unable to ioremap for gpio_base3</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">err_ioremap3</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* need to set base address for gpv */</span>
	<span class="n">exynos5_gpios_3</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">base</span> <span class="o">=</span> <span class="n">gpio_base3</span><span class="p">;</span>
	<span class="n">exynos5_gpios_3</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">base</span> <span class="o">=</span> <span class="n">gpio_base3</span> <span class="o">+</span> <span class="mh">0x20</span><span class="p">;</span>
	<span class="n">exynos5_gpios_3</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">base</span> <span class="o">=</span> <span class="n">gpio_base3</span> <span class="o">+</span> <span class="mh">0x60</span><span class="p">;</span>
	<span class="n">exynos5_gpios_3</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">base</span> <span class="o">=</span> <span class="n">gpio_base3</span> <span class="o">+</span> <span class="mh">0x80</span><span class="p">;</span>
	<span class="n">exynos5_gpios_3</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">base</span> <span class="o">=</span> <span class="n">gpio_base3</span> <span class="o">+</span> <span class="mh">0xC0</span><span class="p">;</span>

	<span class="n">chip</span> <span class="o">=</span> <span class="n">exynos5_gpios_3</span><span class="p">;</span>
	<span class="n">nr_chips</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">exynos5_gpios_3</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nr_chips</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">exynos_gpio_cfg</span><span class="p">;</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span><span class="o">++</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">exynos_gpiolib_attach_ofnode</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span>
				<span class="n">EXYNOS5_PA_GPIO3</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="mh">0x20</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">samsung_gpiolib_add_4bit_chips</span><span class="p">(</span><span class="n">exynos5_gpios_3</span><span class="p">,</span>
				       <span class="n">nr_chips</span><span class="p">,</span> <span class="n">gpio_base3</span><span class="p">);</span>

	<span class="cm">/* gpio part4 */</span>
	<span class="n">gpio_base4</span> <span class="o">=</span> <span class="n">ioremap</span><span class="p">(</span><span class="n">EXYNOS5_PA_GPIO4</span><span class="p">,</span> <span class="n">SZ_4K</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">gpio_base4</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;unable to ioremap for gpio_base4</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">err_ioremap4</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">chip</span> <span class="o">=</span> <span class="n">exynos5_gpios_4</span><span class="p">;</span>
	<span class="n">nr_chips</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">exynos5_gpios_4</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nr_chips</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">exynos_gpio_cfg</span><span class="p">;</span>
			<span class="n">chip</span><span class="o">-&gt;</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span><span class="o">++</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">exynos_gpiolib_attach_ofnode</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span>
				<span class="n">EXYNOS5_PA_GPIO4</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="mh">0x20</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">samsung_gpiolib_add_4bit_chips</span><span class="p">(</span><span class="n">exynos5_gpios_4</span><span class="p">,</span>
				       <span class="n">nr_chips</span><span class="p">,</span> <span class="n">gpio_base4</span><span class="p">);</span>
	<span class="k">return</span><span class="p">;</span>

<span class="nl">err_ioremap4:</span>
	<span class="n">iounmap</span><span class="p">(</span><span class="n">gpio_base3</span><span class="p">);</span>
<span class="nl">err_ioremap3:</span>
	<span class="n">iounmap</span><span class="p">(</span><span class="n">gpio_base2</span><span class="p">);</span>
<span class="nl">err_ioremap2:</span>
	<span class="n">iounmap</span><span class="p">(</span><span class="n">gpio_base1</span><span class="p">);</span>
<span class="nl">err_ioremap1:</span>
	<span class="k">return</span><span class="p">;</span>

<span class="cp">#endif	</span><span class="cm">/* CONFIG_SOC_EXYNOS5250 */</span><span class="cp"></span>
<span class="p">}</span>

<span class="cm">/* TODO: cleanup soc_is_* */</span>
<span class="k">static</span> <span class="n">__init</span> <span class="kt">int</span> <span class="nf">samsung_gpiolib_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">nr_chips</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">group</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="n">samsung_gpiolib_set_cfg</span><span class="p">(</span><span class="n">samsung_gpio_cfgs</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">samsung_gpio_cfgs</span><span class="p">));</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">soc_is_s3c24xx</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">s3c24xx_gpiolib_add_chips</span><span class="p">(</span><span class="n">s3c24xx_gpios</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s3c24xx_gpios</span><span class="p">),</span> <span class="n">S3C24XX_VA_GPIO</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">soc_is_s3c64xx</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">samsung_gpiolib_add_2bit_chips</span><span class="p">(</span><span class="n">s3c64xx_gpios_2bit</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s3c64xx_gpios_2bit</span><span class="p">),</span>
				<span class="n">S3C64XX_VA_GPIO</span> <span class="o">+</span> <span class="mh">0xE0</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>
		<span class="n">samsung_gpiolib_add_4bit_chips</span><span class="p">(</span><span class="n">s3c64xx_gpios_4bit</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s3c64xx_gpios_4bit</span><span class="p">),</span>
				<span class="n">S3C64XX_VA_GPIO</span><span class="p">);</span>
		<span class="n">samsung_gpiolib_add_4bit2_chips</span><span class="p">(</span><span class="n">s3c64xx_gpios_4bit2</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s3c64xx_gpios_4bit2</span><span class="p">));</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">soc_is_s5p6440</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">samsung_gpiolib_add_2bit_chips</span><span class="p">(</span><span class="n">s5p6440_gpios_2bit</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s5p6440_gpios_2bit</span><span class="p">),</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">);</span>
		<span class="n">samsung_gpiolib_add_4bit_chips</span><span class="p">(</span><span class="n">s5p6440_gpios_4bit</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s5p6440_gpios_4bit</span><span class="p">),</span> <span class="n">S5P_VA_GPIO</span><span class="p">);</span>
		<span class="n">samsung_gpiolib_add_4bit2_chips</span><span class="p">(</span><span class="n">s5p6440_gpios_4bit2</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s5p6440_gpios_4bit2</span><span class="p">));</span>
		<span class="n">s5p64x0_gpiolib_add_rbank</span><span class="p">(</span><span class="n">s5p6440_gpios_rbank</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s5p6440_gpios_rbank</span><span class="p">));</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">soc_is_s5p6450</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">samsung_gpiolib_add_2bit_chips</span><span class="p">(</span><span class="n">s5p6450_gpios_2bit</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s5p6450_gpios_2bit</span><span class="p">),</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">);</span>
		<span class="n">samsung_gpiolib_add_4bit_chips</span><span class="p">(</span><span class="n">s5p6450_gpios_4bit</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s5p6450_gpios_4bit</span><span class="p">),</span> <span class="n">S5P_VA_GPIO</span><span class="p">);</span>
		<span class="n">samsung_gpiolib_add_4bit2_chips</span><span class="p">(</span><span class="n">s5p6450_gpios_4bit2</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s5p6450_gpios_4bit2</span><span class="p">));</span>
		<span class="n">s5p64x0_gpiolib_add_rbank</span><span class="p">(</span><span class="n">s5p6450_gpios_rbank</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s5p6450_gpios_rbank</span><span class="p">));</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">soc_is_s5pc100</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">group</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">chip</span> <span class="o">=</span> <span class="n">s5pc100_gpios_4bit</span><span class="p">;</span>
		<span class="n">nr_chips</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s5pc100_gpios_4bit</span><span class="p">);</span>

		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nr_chips</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
				<span class="n">chip</span><span class="o">-&gt;</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span><span class="o">++</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="n">samsung_gpiolib_add_4bit_chips</span><span class="p">(</span><span class="n">s5pc100_gpios_4bit</span><span class="p">,</span> <span class="n">nr_chips</span><span class="p">,</span> <span class="n">S5P_VA_GPIO</span><span class="p">);</span>
<span class="cp">#if defined(CONFIG_CPU_S5PC100) &amp;&amp; defined(CONFIG_S5P_GPIO_INT)</span>
		<span class="n">s5p_register_gpioint_bank</span><span class="p">(</span><span class="n">IRQ_GPIOINT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">S5P_GPIOINT_GROUP_MAXNR</span><span class="p">);</span>
<span class="cp">#endif</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">soc_is_s5pv210</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">group</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">chip</span> <span class="o">=</span> <span class="n">s5pv210_gpios_4bit</span><span class="p">;</span>
		<span class="n">nr_chips</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">s5pv210_gpios_4bit</span><span class="p">);</span>

		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nr_chips</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">chip</span><span class="o">-&gt;</span><span class="n">config</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">samsung_gpio_cfgs</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
				<span class="n">chip</span><span class="o">-&gt;</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span><span class="o">++</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="n">samsung_gpiolib_add_4bit_chips</span><span class="p">(</span><span class="n">s5pv210_gpios_4bit</span><span class="p">,</span> <span class="n">nr_chips</span><span class="p">,</span> <span class="n">S5P_VA_GPIO</span><span class="p">);</span>
<span class="cp">#if defined(CONFIG_CPU_S5PV210) &amp;&amp; defined(CONFIG_S5P_GPIO_INT)</span>
		<span class="n">s5p_register_gpioint_bank</span><span class="p">(</span><span class="n">IRQ_GPIOINT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">S5P_GPIOINT_GROUP_MAXNR</span><span class="p">);</span>
<span class="cp">#endif</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">soc_is_exynos4210</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">exynos4_gpiolib_init</span><span class="p">();</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">soc_is_exynos5250</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">exynos5_gpiolib_init</span><span class="p">();</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">WARN</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;Unknown SoC in gpio-samsung, no GPIOs added</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">core_initcall</span><span class="p">(</span><span class="n">samsung_gpiolib_init</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">s3c_gpio_cfgpin</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pin</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">config</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span> <span class="o">=</span> <span class="n">samsung_gpiolib_getchip</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="n">offset</span> <span class="o">=</span> <span class="n">pin</span> <span class="o">-</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">base</span><span class="p">;</span>

	<span class="n">samsung_gpio_lock</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="n">ret</span> <span class="o">=</span> <span class="n">samsung_gpio_do_setcfg</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">config</span><span class="p">);</span>
	<span class="n">samsung_gpio_unlock</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">s3c_gpio_cfgpin</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">s3c_gpio_cfgpin_range</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nr</span><span class="p">,</span>
			  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(;</span> <span class="n">nr</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="n">nr</span><span class="o">--</span><span class="p">,</span> <span class="n">start</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="n">s3c_gpio_cfgpin</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">cfg</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL_GPL</span><span class="p">(</span><span class="n">s3c_gpio_cfgpin_range</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">s3c_gpio_cfgall_range</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nr</span><span class="p">,</span>
			  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">samsung_gpio_pull_t</span> <span class="n">pull</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(;</span> <span class="n">nr</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="n">nr</span><span class="o">--</span><span class="p">,</span> <span class="n">start</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">s3c_gpio_setpull</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">pull</span><span class="p">);</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="n">s3c_gpio_cfgpin</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">cfg</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL_GPL</span><span class="p">(</span><span class="n">s3c_gpio_cfgall_range</span><span class="p">);</span>

<span class="kt">unsigned</span> <span class="nf">s3c_gpio_getcfg</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pin</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span> <span class="o">=</span> <span class="n">samsung_gpiolib_getchip</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">chip</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">offset</span> <span class="o">=</span> <span class="n">pin</span> <span class="o">-</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">base</span><span class="p">;</span>

		<span class="n">samsung_gpio_lock</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="n">samsung_gpio_do_getcfg</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">offset</span><span class="p">);</span>
		<span class="n">samsung_gpio_unlock</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">s3c_gpio_getcfg</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">s3c_gpio_setpull</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pin</span><span class="p">,</span> <span class="n">samsung_gpio_pull_t</span> <span class="n">pull</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span> <span class="o">=</span> <span class="n">samsung_gpiolib_getchip</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">offset</span><span class="p">,</span> <span class="n">ret</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="n">offset</span> <span class="o">=</span> <span class="n">pin</span> <span class="o">-</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">base</span><span class="p">;</span>

	<span class="n">samsung_gpio_lock</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="n">ret</span> <span class="o">=</span> <span class="n">samsung_gpio_do_setpull</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">pull</span><span class="p">);</span>
	<span class="n">samsung_gpio_unlock</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">s3c_gpio_setpull</span><span class="p">);</span>

<span class="n">samsung_gpio_pull_t</span> <span class="nf">s3c_gpio_getpull</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pin</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span> <span class="o">=</span> <span class="n">samsung_gpiolib_getchip</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pup</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">chip</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">offset</span> <span class="o">=</span> <span class="n">pin</span> <span class="o">-</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">base</span><span class="p">;</span>

		<span class="n">samsung_gpio_lock</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
		<span class="n">pup</span> <span class="o">=</span> <span class="n">samsung_gpio_do_getpull</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">offset</span><span class="p">);</span>
		<span class="n">samsung_gpio_unlock</span><span class="p">(</span><span class="n">chip</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="p">(</span><span class="n">__force</span> <span class="n">samsung_gpio_pull_t</span><span class="p">)</span><span class="n">pup</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">s3c_gpio_getpull</span><span class="p">);</span>

<span class="cm">/* gpiolib wrappers until these are totally eliminated */</span>

<span class="kt">void</span> <span class="nf">s3c2410_gpio_pullup</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pin</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">to</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="n">WARN_ON</span><span class="p">(</span><span class="n">to</span><span class="p">);</span>	<span class="cm">/* should be none of these left */</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">to</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* if pull is enabled, try first with up, and if that</span>
<span class="cm">		 * fails, try using down */</span>

		<span class="n">ret</span> <span class="o">=</span> <span class="n">s3c_gpio_setpull</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="n">S3C_GPIO_PULL_UP</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">ret</span><span class="p">)</span>
			<span class="n">s3c_gpio_setpull</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="n">S3C_GPIO_PULL_DOWN</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">s3c_gpio_setpull</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="n">S3C_GPIO_PULL_NONE</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">s3c2410_gpio_pullup</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">s3c2410_gpio_setpin</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pin</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">to</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* do this via gpiolib until all users removed */</span>

	<span class="n">gpio_request</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="s">&quot;temporary&quot;</span><span class="p">);</span>
	<span class="n">gpio_set_value</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="n">to</span><span class="p">);</span>
	<span class="n">gpio_free</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">s3c2410_gpio_setpin</span><span class="p">);</span>

<span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">s3c2410_gpio_getpin</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pin</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span> <span class="o">=</span> <span class="n">samsung_gpiolib_getchip</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">offs</span> <span class="o">=</span> <span class="n">pin</span> <span class="o">-</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">base</span><span class="p">;</span>

	<span class="k">return</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">+</span> <span class="mh">0x04</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">offs</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">s3c2410_gpio_getpin</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_S5P_GPIO_DRVSTR</span>
<span class="n">s5p_gpio_drvstr_t</span> <span class="nf">s5p_gpio_get_drvstr</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pin</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span> <span class="o">=</span> <span class="n">samsung_gpiolib_getchip</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">reg</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">shift</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">drvstr</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="n">off</span> <span class="o">=</span> <span class="n">pin</span> <span class="o">-</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">base</span><span class="p">;</span>
	<span class="n">shift</span> <span class="o">=</span> <span class="n">off</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
	<span class="n">reg</span> <span class="o">=</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">+</span> <span class="mh">0x0C</span><span class="p">;</span>

	<span class="n">drvstr</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">reg</span><span class="p">);</span>
	<span class="n">drvstr</span> <span class="o">=</span> <span class="n">drvstr</span> <span class="o">&gt;&gt;</span> <span class="n">shift</span><span class="p">;</span>
	<span class="n">drvstr</span> <span class="o">&amp;=</span> <span class="mh">0x3</span><span class="p">;</span>

	<span class="k">return</span> <span class="p">(</span><span class="n">__force</span> <span class="n">s5p_gpio_drvstr_t</span><span class="p">)</span><span class="n">drvstr</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">s5p_gpio_get_drvstr</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">s5p_gpio_set_drvstr</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pin</span><span class="p">,</span> <span class="n">s5p_gpio_drvstr_t</span> <span class="n">drvstr</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">samsung_gpio_chip</span> <span class="o">*</span><span class="n">chip</span> <span class="o">=</span> <span class="n">samsung_gpiolib_getchip</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">reg</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">shift</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tmp</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chip</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="n">off</span> <span class="o">=</span> <span class="n">pin</span> <span class="o">-</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">chip</span><span class="p">.</span><span class="n">base</span><span class="p">;</span>
	<span class="n">shift</span> <span class="o">=</span> <span class="n">off</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
	<span class="n">reg</span> <span class="o">=</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">base</span> <span class="o">+</span> <span class="mh">0x0C</span><span class="p">;</span>

	<span class="n">tmp</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">reg</span><span class="p">);</span>
	<span class="n">tmp</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0x3</span> <span class="o">&lt;&lt;</span> <span class="n">shift</span><span class="p">);</span>
	<span class="n">tmp</span> <span class="o">|=</span> <span class="n">drvstr</span> <span class="o">&lt;&lt;</span> <span class="n">shift</span><span class="p">;</span>

	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">s5p_gpio_set_drvstr</span><span class="p">);</span>
<span class="cp">#endif	</span><span class="cm">/* CONFIG_S5P_GPIO_DRVSTR */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_PLAT_S3C24XX</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">s3c2410_modify_misccr</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">clear</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">change</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">misccr</span><span class="p">;</span>

	<span class="n">local_irq_save</span><span class="p">(</span><span class="n">flags</span><span class="p">);</span>
	<span class="n">misccr</span> <span class="o">=</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">S3C24XX_MISCCR</span><span class="p">);</span>
	<span class="n">misccr</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">clear</span><span class="p">;</span>
	<span class="n">misccr</span> <span class="o">^=</span> <span class="n">change</span><span class="p">;</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">misccr</span><span class="p">,</span> <span class="n">S3C24XX_MISCCR</span><span class="p">);</span>
	<span class="n">local_irq_restore</span><span class="p">(</span><span class="n">flags</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">misccr</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">s3c2410_modify_misccr</span><span class="p">);</span>
<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
