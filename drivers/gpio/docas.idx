f | gpio-adp5588.c | s | 11K | 404 | Axel Lin | axel.lin@gmail.com | 1334089255 |  | gpio: Fix uninitialized variable bit in adp5588_irq_handler  The variable 'bit' is uninitialized in the first iteration of for loop. Fix it.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-sodaville.c | s | 6.4K | 238 | Shawn Guo | shawn.guo@linaro.org | 1337451455 |  | gpio/generic: initialize basic_mmio_gpio shadow variables properly  It fixes the issue in gpio-generic that commit fb14921 (gpio/mxc: add missing initialization of basic_mmio_gpio shadow variables) manged to fix in gpio-mxc driver, so that other platform specific drivers do not suffer from the same problem over and over again.  Changes since v1: * Turn the last parameter of bgpio_init() "bool big_endian" into   "unsigned long flags" and give those really quirky hardwares a   chance to tell that reg_set and reg_dir are unreadable.  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> [grant.likely: Fix big-endian usage to explicitly set BBGPIOF_BIG_ENDIAN] Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-wm8994.c | s | 7.4K | 269 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1325489221 |  | gpio: Add decode of WM8994 GPIO configuration  For the human reader.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-it8761e.c | s | 4.8K | 180 | Grant Likely | grant.likely@secretlab.ca | 1307376611 |  | gpio: reorganize drivers  Sort the gpio makefile and enforce the naming convention gpio-*.c for gpio drivers.  v2: cleaned up filenames in Kconfig and comment blocks v3: fixup use of BASIC_MMIO to GENERIC_GPIO for mxc  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | Makefile | g | 3.0K |  | Linus Torvalds | torvalds@linux-foundation.org | 1338341239 |  | Merge branch 'upstream' of git://git.linux-mips.org/pub/scm/ralf/upstream-linus  Pull MIPS updates from Ralf Baechle:  "The whole series has been sitting in -next for quite a while with no   complaints.  The last change to the series was before the weekend the   removal of an SPI patch which Grant - even though previously acked by   himself - appeared to raise objections.  So I removed it until the   situation is clarified.  Other than that all the patches have the acks   from their respective maintainers, all MIPS and x86 defconfigs are   building fine and I'm not aware of any problems introduced by this   series.    Among the key features for this patch series is a sizable patchset for   Lantiq which among other things introduces support for Lantiq's   flagship product, the FALCON SOC.  It also means that the opensource   developers behind this patchset have overtaken Lantiq's competing   inhouse development team that was working behind closed doors.    Less noteworthy the ath79 patchset which adds support for a few more   chip variants, cleanups and fixes.  Finally the usual dose of tweaking   of generic code."  Fix up trivial conflicts in arch/mips/lantiq/xway/gpio_{ebu,stp}.c where printk spelling fixes clashed with file move and eventual removal of the printk.  * 'upstream' of git://git.linux-mips.org/pub/scm/ralf/upstream-linus: (81 commits)   MIPS: lantiq: remove orphaned code   MIPS: Remove all -Wall and almost all -Werror usage from arch/mips.   MIPS: lantiq: implement support for FALCON soc   MTD: MIPS: lantiq: verify that the NOR interface is available on falcon soc   MTD: MIPS: lantiq: implement OF support   watchdog: MIPS: lantiq: implement OF support and minor fixes   SERIAL: MIPS: lantiq: implement OF support   GPIO: MIPS: lantiq: convert gpio-stp-xway to OF   GPIO: MIPS: lantiq: convert gpio-mm-lantiq to OF and of_mm_gpio   GPIO: MIPS: lantiq: move gpio-stp and gpio-ebu to the subsystem folder   MIPS: pci: convert lantiq driver to OF   MIPS: lantiq: convert dma to platform driver   MIPS: lantiq: implement support for clkdev api   MIPS: lantiq: drop ltq_gpio_request() and gpio_to_irq()   OF: MIPS: lantiq: implement irq_domain support   OF: MIPS: lantiq: implement OF support   MIPS: lantiq: drop mips_machine support   OF: PCI: const usage needed by MIPS   MIPS: Cavium: Remove smp_reserve_lock.   MIPS: Move cache setup to setup_arch().   ...
f | devres.c | s | 2.9K | 100 | Linus Torvalds | torvalds@linux-foundation.org | 1337893306 |  | 
f | gpio-sch.c | s | 6.7K | 240 | Seth Heasley | seth.heasley@intel.com | 1337722754 |  | gpio: Add Intel Centerton support to gpio-sch  This patch adds the Intel Centerton processor device ID for GPIO. The device ID is defined in include/linux/pci_ids.h  Signed-off-by: Seth Heasley <seth.heasley@intel.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Samuel Ortiz <sameo@linux.intel.com>
f | gpio-pl061.c | s | 9.3K | 322 | Viresh Kumar | viresh.kumar@st.com | 1329399471 |  | gpio/gpio-pl061: No need of thaw and poweroff routines for hibernate  pl061 uses same routines for suspend/freeze/poweroff and resume/thaw/restore. We are only saving and restoring register values on these routines.  During hibernation, in freeze() we take a snapshot of gpio registers. In thaw() we don't actually need to restore these registers, as power was never shut down till now. Similarly, in poweroff() we don't need to take snapshot of these registers again, as it was done during freeze() and by now the image is already saved on disk.  This patch passes poweroff() and thaw() routines as NULL to avoid this extra work done.  Signed-off-by: Viresh Kumar <viresh.kumar@st.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-omap.c | s | 38K | 1240 | Kevin Hilman | khilman@ti.com | 1337349906 |  | gpio/omap: (re)fix wakeups on level-triggered GPIOs  commit 1b1287032 (gpio/omap: fix missing check in *_runtime_suspend()) broke wakeups on level-triggered GPIOs by adding the enabled non-wakeup GPIO check before the workaround that enables wakeups on level-triggered IRQs, effectively disabling that workaround.  To fix, move the enabled non-wakeup GPIO check after the level-triggered IRQ workaround.  Reported-by: Tony Lindgren <tony@atomide.com> Tested-by: Tony Lindgren <tony@atomide.com> Acked-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Acked-by: Tarun Kanti DebBarma <tarun.kanti@ti.com> Tested-by: Tarun Kanti DebBarma <tarun.kanti@ti.com> Signed-off-by: Kevin Hilman <khilman@ti.com>
f | gpio-lpc32xx.c | s | 13K | 444 | Roland Stigge | stigge@antcom.de | 1337381316 |  | gpio/lpc32xx: Add device tree support  This patch adds device tree support for gpio-lpc32xx.c.  To register the various GPIO banks as (struct) gpio_chips via the same DT gpio-controller, we utilize the adjusted of_xlate API to manipulate the actually used struct gpio_chip.  Signed-off-by: Roland Stigge <stigge@antcom.de> Reviewed-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-ks8695.c | s | 7.4K | 250 | Linus Walleij | linus.walleij@linaro.org | 1314000774 |  | ARM: 7036/1: mach-ks8695: break out GPIO driver specifics  The <mach/gpio.h> file is included from upper directories and deal with generic GPIO and gpiolib stuff. Break out the platform and driver specific defines and functions into its own header file.  Cc: zeal <zealcook@gmail.com> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Daniel Silverstone <dsilvers@simtec.co.uk> Acked-by: Simtec Linux Team <linux@simtec.co.uk> Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | gpio-ab8500.c | s | 12K | 461 | Axel Lin | axel.lin@gmail.com | 1311891563 |  | gpio: ab8500: fix MODULE_ALIAS for ab8500  Since 43cc71eed1250755986da4c0f9898f9a635cb3bf (platform: prefix MODALIAS with "platform:"), the platform modalias is prefixed with "platform:".  This patch changes the MODULE_ALIAS to "platform:ab8500-gpio".  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-samsung.c | s | 68K | 2930 | Kukjin Kim | kgene.kim@samsung.com | 1338783661 |  | gpio/samsung: fix the typo 'exynos5_xxx' instead of 'exonys5_xxx'  Should be 'exynos5_xxx' instead of 'exonys5_xxx'.  It happened at the commit 30b842889eea ("Merge tag 'soc2' of git://git.kernel.org/pub/scm/linux/kernel/git/arm/arm-soc") during v3.5 merge window.  Signed-off-by: Kukjin Kim <kgene.kim@samsung.com> [ My bad  - Linus ] Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | gpio-tegra.c | s | 13K | 459 | Stephen Warren | swarren@nvidia.com | 1334766398 |  | gpio: tegra: Hide tegra_gpio_enable/disable()  Recent pinctrl discussions concluded that gpiolib APIs should in fact do whatever is required to mux a GPIO onto pins, by calling pinctrl APIs if required. This change implements this for the Tegra GPIO driver, and removes calls to the Tegra-specific APIs from drivers and board files.  Cc: Chris Ball <cjb@laptop.org> Cc: linux-mmc@vger.kernel.org Signed-off-by: Stephen Warren <swarren@nvidia.com> Acked-by: Chris Ball <cjb@laptop.org> # for sdhci-tegra.c Acked-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Olof Johansson <olof@lixom.net>
f | gpio-ge.c | s | 5.2K | 162 | Martyn Welch | martyn.welch@ge.com | 1331914548 |  | powerpc/85xx: Board support for GE IMP3A  Initial board support for the GE IMP3A, a 3U compactPCI card with a p2020 processor.  Signed-off-by: Martyn Welch <martyn.welch@ge.com> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | gpio-rdc321x.c | s | 6.2K | 195 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1325489166 |  | gpio: Convert GPIO drivers to module_platform_driver  Where appropriate factor out some boilerplate code for platform device registration into module_platform_driver. Drivers that don't use the standard module_init initcall haven't been converted.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-langwell.c | s | 12K | 443 | Mika Westerberg | mika.westerberg@linux.intel.com | 1336689328 |  | gpio/langwell: re-read the IRQ status register after each iteration  The IRQ status register should be re-read after each iteration. Otherwise the loop misses the interrupt if it gets raised immediately after handled.  Reported-by: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Mika Westerberg <mika.westerberg@linux.intel.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-mpc8xxx.c | s | 10.0K | 307 | Thomas Gleixner | tglx@linutronix.de | 1337381316 |  | gpio: mpc8xxx: Prevent NULL pointer deref in demux handler  commit cfadd838(powerpc/8xxx: Fix interrupt handling in MPC8xxx GPIO driver) added an unconditional call of chip->irq_eoi() to the demux handler.  This leads to a NULL pointer derefernce on MPC512x platforms which use this driver as well.  Make it conditional.  Reported-by: Thomas Wucher <thwucher@linutronix.de> Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Cc: Felix Radensky <felix@embedded-sol.com> Cc: Kumar Gala <galak@kernel.crashing.org> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: stable@vger.kernel.org Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-janz-ttl.c | s | 5.3K | 203 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1325489166 |  | gpio: Convert GPIO drivers to module_platform_driver  Where appropriate factor out some boilerplate code for platform device registration into module_platform_driver. Drivers that don't use the standard module_init initcall haven't been converted.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-timberdale.c | s | 8.8K | 300 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1325489166 |  | gpio: Convert GPIO drivers to module_platform_driver  Where appropriate factor out some boilerplate code for platform device registration into module_platform_driver. Drivers that don't use the standard module_init initcall haven't been converted.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-tps65910.c | s | 5.9K | 182 | Laxman Dewangan | ldewangan@nvidia.com | 1337723413 |  | gpio: tps65910: dt: process gpio specific device node info  Parse the gpio specific device node information locally.  Signed-off-by: Laxman Dewangan <ldewangan@nvidia.com> Acked-by: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Samuel Ortiz <sameo@linux.intel.com>
f | gpio-wm831x.c | s | 7.4K | 265 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1337527627 |  | mfd: Convert wm831x to irq_domain  The modern idiom is to use irq_domain to allocate interrupts. This is useful partly to allow further infrastructure to be based on the domains and partly because it makes it much easier to allocate virtual interrupts to devices as we don't need to allocate a contiguous range of interrupt numbers.  Convert the wm831x driver over to this infrastructure, using a legacy IRQ mapping if an irq_base is specified in platform data and otherwise using a linear mapping, always registering the interrupts even if they won't ever be used. Only boards which need to use the GPIOs as interrupts should need to use an irq_base.  This means that we can't use the MFD irq_base management since the unless we're using an explicit irq_base from platform data we can't rely on a linear mapping of interrupts.  Instead we need to map things via the irq_domain - provide a conveniencem function wm831x_irq() to save a small amount of typing when doing so. Looking at this I couldn't clearly see anything the MFD core could do to make this nicer.  Since we're not supporting device tree yet there's no meaningful advantage if we don't do this conversion in one, the fact that the interrupt resources are used for repeated IP blocks makes accessor functions for the irq_domain more trouble to do than they're worth.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Samuel Ortiz <sameo@linux.intel.com>
f | gpio-cs5535.c | s | 9.6K | 318 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1325489166 |  | gpio: Convert GPIO drivers to module_platform_driver  Where appropriate factor out some boilerplate code for platform device registration into module_platform_driver. Drivers that don't use the standard module_init initcall haven't been converted.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-mc33880.c | s | 4.3K | 158 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103907 |  | drivers/gpio: Fix drivers who are implicit users of module.h  A pending cleanup will mean that module.h won't be implicitly everywhere anymore.  Make sure the modular drivers in gpio are actually calling out for <module.h> explicitly in advance.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | gpiolib.c | s | 44K | 1533 | Grant Likely | grant.likely@secretlab.ca | 1337403665 |  | gpiolib: Remove 'const' from data argument of gpiochip_find()  Commit 3d0f7cf0 "gpio: Adjust of_xlate API to support multiple GPIO chips" changed the api of gpiochip_find to drop const from the data parameter of the match hook, but didn't also drop const from data causing a build warning.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-pch.c | s | 13K | 464 | Linus Torvalds | torvalds@linux-foundation.org | 1337893306 |  | 
f | gpio-mxc.c | s | 12K | 412 | Shawn Guo | shawn.guo@linaro.org | 1337451455 |  | gpio/generic: initialize basic_mmio_gpio shadow variables properly  It fixes the issue in gpio-generic that commit fb14921 (gpio/mxc: add missing initialization of basic_mmio_gpio shadow variables) manged to fix in gpio-mxc driver, so that other platform specific drivers do not suffer from the same problem over and over again.  Changes since v1: * Turn the last parameter of bgpio_init() "bool big_endian" into   "unsigned long flags" and give those really quirky hardwares a   chance to tell that reg_set and reg_dir are unreadable.  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> [grant.likely: Fix big-endian usage to explicitly set BBGPIOF_BIG_ENDIAN] Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-sx150x.c | s | 15K | 573 | Grant Likely | grant.likely@secretlab.ca | 1307376611 |  | gpio: reorganize drivers  Sort the gpio makefile and enforce the naming convention gpio-*.c for gpio drivers.  v2: cleaned up filenames in Kconfig and comment blocks v3: fixup use of BASIC_MMIO to GENERIC_GPIO for mxc  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-bt8xx.c | s | 8.0K | 256 | Axel Lin | axel.lin@gmail.com | 1333830635 |  | gpio: Convert drivers to use module_pci_driver()  This patch converts the drivers in drivers/gpio/* to use module_pci_driver() macro which makes the code smaller and a bit simpler by having less boilerplate.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-twl4030.c | s | 12K | 440 | Benoit Cousson | b-cousson@ti.com | 1332417955 |  | gpio/twl: Add DT support to gpio-twl4030 driver  Add the DT support for the I2C GPIO expander inside the twl4030.  Note: The pdata parameters still have to be properly adapted using dedicated bindings.  Signed-off-by: Benoit Cousson <b-cousson@ti.com> Acked-by: Felipe Balbi <balbi@ti.com> Acked-by: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Samuel Ortiz <sameo@linux.intel.com>
f | gpio-pca953x.c | s | 17K | 650 | Andreas Schallenberg | Andreas.Schallenberg@3alitytechnica.com | 1337381314 |  | Add support for TCA6424A  This patch extends the PCA953x driver to support TI's TCA6424A 24 bit I2C I/O expander. The patch is based on code by Michele Bevilacqua.  Changes in v2: - Compare ngpio against 24 in both places, not >16 - Larger datatype now u32 instead of uint.   Bit fields not used for struct members since their address is taken. - Be precise: TCA6424A (untested for older TCA6424)  Signed-off-by: Andreas Schallenberg<Andreas.Schallenberg@3alitytechnica.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-mc9s08dz60.c | s | 3.6K | 127 | wu guoxing | b39297@freescale.com | 1327934948 |  | ARM/mx35/3ds: gpio: add mc9s08dz60 gpio function  we only use the gpio function of mc9s08dz60 mcu chip, so just add the gpio driver, as this mcu will never be used in other board.  Signed-off-by: Wu Guoxing <b39297@freescale.com> Reviewed-by: Sascha Hauer <s.hauer@pengutronix.de> Acked-by: Marc Kleine-Budde <mkl@pengutronix.de> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-pxa.c | s | 17K | 608 | Haojian Zhuang | haojian.zhuang@gmail.com | 1336207007 |  | gpio: pxa: parse gpio from DTS file  Parse GPIO numbers from DTS file. Allocate interrupt according to GPIO numbers.  Signed-off-by: Haojian Zhuang <haojian.zhuang@gmail.com> Acked-by: Arnd Bergmann <arnd@arndb.de>
f | gpio-msic.c | s | 8.6K | 280 | Mathias Nyman | mathias.nyman@linux.intel.com | 1336763694 |  | gpio: add MSIC gpio driver  Add gpio support for Intel MSIC chips found in Intel Medfield platforms. MSIC supports totally 24 GPIOs with 16 low voltage and 8 high voltage pins. Driver uses MSIC mfd interface for MSIC access.  (Updated comment to indicate why locking is actually safe)  Signed-off-by: Mathias Nyman <mathias.nyman@linux.intel.com> Signed-off-by: Alan Cox <alan@linux.intel.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-tps65912.c | s | 3.9K | 127 | Margarita Olaya | magi@slimlogic.co.uk | 1312147702 |  | tps65912: gpio: add gpio driver  TPS65912 has five GPIOs that can be configured for different purposes.  Signed-off-by: Margarita Olaya Cabrera <magi@slimlogic.co.uk> Acked-by: Grant Likely <grant.likely@secretlab.ca> Acked-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Samuel Ortiz <sameo@linux.intel.com>
f | gpio-rc5t583.c | s | 5.3K | 152 | Laxman Dewangan | ldewangan@nvidia.com | 1337403568 |  | gpio/rc5t583: add gpio driver for RICOH PMIC RC5T583  The PMIC device RC5T583 from RICOH supports 8 gpios. Adding gpio driver for this device to access the pins control through gpio library.  Signed-off-by: Laxman Dewangan <ldewangan@nvidia.com> [grant.likely: slight cosmetic changes] Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-mm-lantiq.c | s | 4.1K | 134 | John Crispin | blogic@openwrt.org | 1337607113 |  | GPIO: MIPS: lantiq: convert gpio-mm-lantiq to OF and of_mm_gpio  Implements OF support and convert to of_mm_gpio.  By attaching hardware latches to the External Bus Unit (EBU) on Lantiq SoC, it is possible to create output only gpios. This driver configures a special memory address, which when written to, outputs 16 bit to the latches.  Signed-off-by: John Crispin <blogic@openwrt.org> Cc: linux-kernel@vger.kernel.org Cc: linux-mips@linux-mips.org Acked-by: Grant Likely <grant.likely@secretlab.ca> Patchwork: https://patchwork.linux-mips.org/patch/3840/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | gpio-sa1100.c | s | 1.6K | 60 | Rob Herring | rob.herring@calxeda.com | 1332716240 |  | ARM: 7342/2: sa1100: prepare for sparse irq conversion  In preparation to convert SA1100 to sparse irq, set .nr_irqs for each machine and explicitly include mach/irqs.h as needed.  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | gpio-max730x.c | s | 6.1K | 204 | Grant Likely | grant.likely@secretlab.ca | 1307376611 |  | gpio: reorganize drivers  Sort the gpio makefile and enforce the naming convention gpio-*.c for gpio drivers.  v2: cleaned up filenames in Kconfig and comment blocks v3: fixup use of BASIC_MMIO to GENERIC_GPIO for mxc  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-max7300.c | s | 2.0K | 77 | Grant Likely | grant.likely@secretlab.ca | 1307376611 |  | gpio: reorganize drivers  Sort the gpio makefile and enforce the naming convention gpio-*.c for gpio drivers.  v2: cleaned up filenames in Kconfig and comment blocks v3: fixup use of BASIC_MMIO to GENERIC_GPIO for mxc  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-mxs.c | s | 8.8K | 277 | Linus Torvalds | torvalds@linux-foundation.org | 1338062267 |  | 
f | gpio-da9052.c | s | 6.4K | 221 | Linus Torvalds | torvalds@linux-foundation.org | 1325967336 |  | 
f | gpio-vx855.c | s | 8.3K | 276 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1325489166 |  | gpio: Convert GPIO drivers to module_platform_driver  Where appropriate factor out some boilerplate code for platform device registration into module_platform_driver. Drivers that don't use the standard module_init initcall haven't been converted.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-74x164.c | s | 4.0K | 145 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103907 |  | drivers/gpio: Fix drivers who are implicit users of module.h  A pending cleanup will mean that module.h won't be implicitly everywhere anymore.  Make sure the modular drivers in gpio are actually calling out for <module.h> explicitly in advance.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | gpio-stp-xway.c | s | 8.3K | 256 | John Crispin | blogic@openwrt.org | 1337607113 |  | GPIO: MIPS: lantiq: convert gpio-stp-xway to OF  Implements OF support and add code to load custom properties from the DT.  The Serial To Parallel (STP) is found on MIPS based Lantiq socs. It is a peripheral controller used to drive external shift register cascades. At most 3 groups of 8 bits can be driven. The hardware is able to allow the DSL modem to drive the 2 LSBs of the cascade automatically. Newer socs are also able to automatically drive some pins via the internal PHYs. The driver currently only supports output functionality. Patches for the input feature found on newer generations of the soc will be provided in a later series.  Signed-off-by: John Crispin <blogic@openwrt.org> Cc: linux-kernel@vger.kernel.org Cc: linux-mips@linux-mips.org Acked-by: Grant Likely <grant.likely@secretlab.ca> Patchwork: https://patchwork.linux-mips.org/patch/3839/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | gpiolib-of.c | s | 5.9K | 202 | Grant Likely | grant.likely@secretlab.ca | 1337381316 |  | gpio: Adjust of_xlate API to support multiple GPIO chips  This patch changes the of_xlate API to make it possible for multiple gpio_chips to refer to the same device tree node.  This is useful for banked GPIO controllers that use multiple gpio_chips for a single device.  With this change the core code will try calling of_xlate on each gpio_chip that references the device_node and will return the gpio number for the first one to return 'true'.  Tested-by: Roland Stigge <stigge@antcom.de> Acked-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-ucb1400.c | s | 2.6K | 92 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1325489166 |  | gpio: Convert GPIO drivers to module_platform_driver  Where appropriate factor out some boilerplate code for platform device registration into module_platform_driver. Drivers that don't use the standard module_init initcall haven't been converted.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-max732x.c | s | 16K | 582 | Grant Likely | grant.likely@secretlab.ca | 1307376611 |  | gpio: reorganize drivers  Sort the gpio makefile and enforce the naming convention gpio-*.c for gpio drivers.  v2: cleaned up filenames in Kconfig and comment blocks v3: fixup use of BASIC_MMIO to GENERIC_GPIO for mxc  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | Kconfig | g | 17K |  | Linus Torvalds | torvalds@linux-foundation.org | 1338341239 |  | Merge branch 'upstream' of git://git.linux-mips.org/pub/scm/ralf/upstream-linus  Pull MIPS updates from Ralf Baechle:  "The whole series has been sitting in -next for quite a while with no   complaints.  The last change to the series was before the weekend the   removal of an SPI patch which Grant - even though previously acked by   himself - appeared to raise objections.  So I removed it until the   situation is clarified.  Other than that all the patches have the acks   from their respective maintainers, all MIPS and x86 defconfigs are   building fine and I'm not aware of any problems introduced by this   series.    Among the key features for this patch series is a sizable patchset for   Lantiq which among other things introduces support for Lantiq's   flagship product, the FALCON SOC.  It also means that the opensource   developers behind this patchset have overtaken Lantiq's competing   inhouse development team that was working behind closed doors.    Less noteworthy the ath79 patchset which adds support for a few more   chip variants, cleanups and fixes.  Finally the usual dose of tweaking   of generic code."  Fix up trivial conflicts in arch/mips/lantiq/xway/gpio_{ebu,stp}.c where printk spelling fixes clashed with file move and eventual removal of the printk.  * 'upstream' of git://git.linux-mips.org/pub/scm/ralf/upstream-linus: (81 commits)   MIPS: lantiq: remove orphaned code   MIPS: Remove all -Wall and almost all -Werror usage from arch/mips.   MIPS: lantiq: implement support for FALCON soc   MTD: MIPS: lantiq: verify that the NOR interface is available on falcon soc   MTD: MIPS: lantiq: implement OF support   watchdog: MIPS: lantiq: implement OF support and minor fixes   SERIAL: MIPS: lantiq: implement OF support   GPIO: MIPS: lantiq: convert gpio-stp-xway to OF   GPIO: MIPS: lantiq: convert gpio-mm-lantiq to OF and of_mm_gpio   GPIO: MIPS: lantiq: move gpio-stp and gpio-ebu to the subsystem folder   MIPS: pci: convert lantiq driver to OF   MIPS: lantiq: convert dma to platform driver   MIPS: lantiq: implement support for clkdev api   MIPS: lantiq: drop ltq_gpio_request() and gpio_to_irq()   OF: MIPS: lantiq: implement irq_domain support   OF: MIPS: lantiq: implement OF support   MIPS: lantiq: drop mips_machine support   OF: PCI: const usage needed by MIPS   MIPS: Cavium: Remove smp_reserve_lock.   MIPS: Move cache setup to setup_arch().   ...
f | gpio-ep93xx.c | s | 10K | 341 | Shawn Guo | shawn.guo@linaro.org | 1337451455 |  | gpio/generic: initialize basic_mmio_gpio shadow variables properly  It fixes the issue in gpio-generic that commit fb14921 (gpio/mxc: add missing initialization of basic_mmio_gpio shadow variables) manged to fix in gpio-mxc driver, so that other platform specific drivers do not suffer from the same problem over and over again.  Changes since v1: * Turn the last parameter of bgpio_init() "bool big_endian" into   "unsigned long flags" and give those really quirky hardwares a   chance to tell that reg_set and reg_dir are unreadable.  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> [grant.likely: Fix big-endian usage to explicitly set BBGPIOF_BIG_ENDIAN] Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-msm-v2.c | s | 12K | 366 | David Brown | davidb@codeaurora.org | 1312199880 |  | gpio_msm: Move Qualcomm MSM v2 gpio driver into drivers  Migrate the driver for the v7-based MSM chips into drivers/gpio.  The driver is unchanged, only moved.  Change-Id: I810db5b50b71cdca4e869aa0d0310f7f48781a55 Signed-off-by: David Brown <davidb@codeaurora.org> Acked-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Nicolas Pitre <nicolas.pitre@linaro.org>
f | gpio-ich.c | s | 10K | 344 | Peter Tyser | ptyser@xes-inc.com | 1335866421 |  | gpio: Add support for Intel ICHx/3100/Series[56] GPIO  This driver works on many Intel chipsets, including the ICH6, ICH7, ICH8, ICH9, ICH10, 3100, Series 5/3400 (Ibex Peak), Series 6/C200 (Cougar Point), and NM10 (Tiger Point).  Additional Intel chipsets should be easily supported if needed, eg the ICH1-5, EP80579, etc.  Tested on QM67 (Cougar Point), QM57 (Ibex Peak), 3100 (Whitmore Lake), and NM10 (Tiger Point).  Includes work from Jean Delvare:         - Resource leak removal during module load/unload         - GPIO API bit value enforcement  Also includes code cleanup from Guenter Roeck and Grant Likely.  Signed-off-by: Peter Tyser <ptyser@xes-inc.com> Signed-off-by: Aaron Sierra <asierra@xes-inc.com> Acked-by: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Samuel Ortiz <sameo@linux.intel.com>
f | gpio-generic.c | s | 13K | 437 | Shawn Guo | shawn.guo@linaro.org | 1337451455 |  | gpio/generic: initialize basic_mmio_gpio shadow variables properly  It fixes the issue in gpio-generic that commit fb14921 (gpio/mxc: add missing initialization of basic_mmio_gpio shadow variables) manged to fix in gpio-mxc driver, so that other platform specific drivers do not suffer from the same problem over and over again.  Changes since v1: * Turn the last parameter of bgpio_init() "bool big_endian" into   "unsigned long flags" and give those really quirky hardwares a   chance to tell that reg_set and reg_dir are unreadable.  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> [grant.likely: Fix big-endian usage to explicitly set BBGPIOF_BIG_ENDIAN] Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-mpc5200.c | s | 9.6K | 296 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103907 |  | drivers/gpio: Fix drivers who are implicit users of module.h  A pending cleanup will mean that module.h won't be implicitly everywhere anymore.  Make sure the modular drivers in gpio are actually calling out for <module.h> explicitly in advance.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | gpio-adp5520.c | s | 4.4K | 159 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1325489166 |  | gpio: Convert GPIO drivers to module_platform_driver  Where appropriate factor out some boilerplate code for platform device registration into module_platform_driver. Drivers that don't use the standard module_init initcall haven't been converted.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-tnetv107x.c | s | 5.3K | 156 | Linus Walleij | linus.walleij@linaro.org | 1314000775 |  | ARM: 7039/1: mach-davinci: move DaVinci TNET GPIO driver to GPIO subsystem  As per example from the other ARM boards, push the DaVinci TNET GPIO driver down to the GPIO subsystem so it can be consolidated.  Cc: Sekhar Nori <nsekhar@ti.com> Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | gpio-davinci.c | s | 12K | 382 | Sekhar Nori | nsekhar@ti.com | 1331574813 |  | gpio/davinci: fix enabling unbanked GPIO IRQs  Unbanked GPIO IRQ handling code made a copy of just the irq_chip structure for GPIO IRQ lines which caused problems after the generic IRQ chip conversion because there was no valid irq_chip_type structure with the right "regs" populated. irq_gc_mask_set_bit() was therefore accessing random addresses.  Fix it by making a copy of irq_chip_type structure instead. This will ensure sane register offsets.  Cc: <stable@vger.kernel.org> # v3.0.x+ Reported-by: Jon Povey <Jon.Povey@racelogic.co.uk> Tested-by: Jon Povey <Jon.Povey@racelogic.co.uk> Signed-off-by: Sekhar Nori <nsekhar@ti.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-vr41xx.c | s | 12K | 485 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1325489166 |  | gpio: Convert GPIO drivers to module_platform_driver  Where appropriate factor out some boilerplate code for platform device registration into module_platform_driver. Drivers that don't use the standard module_init initcall haven't been converted.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-sta2x11.c | s | 11K | 380 | Alessandro Rubini | rubini@gnudd.com | 1336570719 |  | gpio: Add STA2X11 GPIO block  This introduces 128 gpio bits (for each PCI device installed) with working interrupt support.  Signed-off-by: Alessandro Rubini <rubini@gnudd.com> Acked-by: Giancarlo Asnaghi <giancarlo.asnaghi@st.com> Cc: Alan Cox <alan@linux.intel.com> Signed-off-by: Samuel Ortiz <sameo@linux.intel.com>
f | gpio-max7301.c | s | 2.7K | 99 | Grant Likely | grant.likely@secretlab.ca | 1307376611 |  | gpio: reorganize drivers  Sort the gpio makefile and enforce the naming convention gpio-*.c for gpio drivers.  v2: cleaned up filenames in Kconfig and comment blocks v3: fixup use of BASIC_MMIO to GENERIC_GPIO for mxc  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-stmpe.c | s | 10K | 350 | Linus Torvalds | torvalds@linux-foundation.org | 1332968926 |  | 
f | gpio-mcp23s08.c | s | 15K | 589 | Peter Korsgaard | jacmet@sunsite.dk | 1337381315 |  | gpio-mcp23s08: dbg_show: fix pullup configuration display  Pullups are enabled when bits are set, not when cleared.  Signed-off-by: Peter Korsgaard <jacmet@sunsite.dk> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-pcf857x.c | s | 9.7K | 306 | Grant Likely | grant.likely@secretlab.ca | 1323722416 |  | gpiolib: output basic details and consolidate gpio device drivers  This patch adds a kernel message, containing GPIO range and device name on successful device registration, and removes duplicate messages from the following drivers: 	* gpio-adp5588 	* gpio-bt8xx 	* gpio-cs5535 	* gpio-janz-ttl 	* gpio-nomadik 	* gpio-pcf857x 	* gpio-xilinx 	* drivers/of/gpio.c  Signed-off-by: Hartmut Knaack <knaack.h@gmx.de> [grant.likely@secretlab.ca: squashed 2 patches together] Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-em.c | s | 10K | 351 | Magnus Damm | damm@opensource.se | 1337292045 |  | gpio: Emma Mobile GPIO driver V2  This patch is V2 of the Emma Mobile GPIO driver. This driver is designed to be reusable between multiple SoCs that share the same basic building block, but so far it has only been used on Emma Mobile EV2.  Each driver instance handles 32 GPIOs with individually maskable IRQs. The driver operates on two I/O memory ranges and the 32 GPIOs are hooked up to two interrupts.  In the case of Emma Mobile EV2 this GPIO building block is used as main external interrupt controller hooking up 159 GPIOS as 159 interrupts via 5 driver instances and 10 interrupts to the GIC and the Cortex-A9 Dual.  Signed-off-by: Magnus Damm <damm@opensource.se> Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
f | gpio-ml-ioh.c | s | 14K | 531 | Axel Lin | axel.lin@gmail.com | 1333830635 |  | gpio: Convert drivers to use module_pci_driver()  This patch converts the drivers in drivers/gpio/* to use module_pci_driver() macro which makes the code smaller and a bit simpler by having less boilerplate.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-xilinx.c | s | 7.0K | 196 | Grant Likely | grant.likely@secretlab.ca | 1323722416 |  | gpiolib: output basic details and consolidate gpio device drivers  This patch adds a kernel message, containing GPIO range and device name on successful device registration, and removes duplicate messages from the following drivers: 	* gpio-adp5588 	* gpio-bt8xx 	* gpio-cs5535 	* gpio-janz-ttl 	* gpio-nomadik 	* gpio-pcf857x 	* gpio-xilinx 	* drivers/of/gpio.c  Signed-off-by: Hartmut Knaack <knaack.h@gmx.de> [grant.likely@secretlab.ca: squashed 2 patches together] Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-wm8350.c | s | 4.5K | 149 | Grant Likely | grant.likely@secretlab.ca | 1307376611 |  | gpio: reorganize drivers  Sort the gpio makefile and enforce the naming convention gpio-*.c for gpio drivers.  v2: cleaned up filenames in Kconfig and comment blocks v3: fixup use of BASIC_MMIO to GENERIC_GPIO for mxc  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-tc3589x.c | s | 9.6K | 313 | Grant Likely | grant.likely@secretlab.ca | 1307376611 |  | gpio: reorganize drivers  Sort the gpio makefile and enforce the naming convention gpio-*.c for gpio drivers.  v2: cleaned up filenames in Kconfig and comment blocks v3: fixup use of BASIC_MMIO to GENERIC_GPIO for mxc  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gpio-msm-v1.c | s | 22K | 564 | David Brown | davidb@codeaurora.org | 1312199880 |  | gpio_msm: Move Qualcomm v6 MSM driver into drivers  Migrate the driver for the v6-based MSM chips into drivers/gpio.  The driver is unchanged, only moved.  Change-Id: I03ba597b95b4d62b42da112a8efac88d67aa40f9 Signed-off-by: David Brown <davidb@codeaurora.org> Acked-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Nicolas Pitre <nicolas.pitre@linaro.org>
