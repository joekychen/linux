f | i2c-imx.c | s | 17K | 560 | Linus Torvalds | torvalds@linux-foundation.org | 1338064503 |  | Merge branch 'i2c-embedded/for-next' of git://git.pengutronix.de/git/wsa/linux  Pull i2c-embedded changes from Wolfram Sang:  "Major changes:     - lots of devicetree additions for existing drivers.  I tried hard to      make sure the bindings are proper.  In more complicated cases, I      requested acks from people having more experience with them than      me.  That took a bit of extra time and also some time went into      discussions with developers about what bindings are and what not.      I have the feeling that the workflow with bindings should be      improved to scale better.  I will spend some more thought on      this...     - i2c-muxes are succesfully used meanwhile, so we dropped      EXPERIMENTAL for them and renamed the drivers to a standard pattern      to match the rest of the subsystem.  They can also be used with      devicetree now.     - ixp2000 was removed since the whole platform goes away.     - cleanups (strlcpy instead of strcpy, NULL instead of 0)     - The rest is typical driver fixes I assume.    All patches have been in linux-next at least since v3.4-rc6."  Fixed up trivial conflict in arch/arm/mach-lpc32xx/common.c due to the same patch already having come in through the arm/soc trees, with additional patches on top of it.  * 'i2c-embedded/for-next' of git://git.pengutronix.de/git/wsa/linux: (35 commits)   i2c: davinci: Free requested IRQ in remove   i2c: ocores: register OF i2c devices   i2c: tegra: notify transfer-complete after clearing status.   I2C: xiic: Add OF binding support   i2c: Rename last mux driver to standard pattern   i2c: tegra: fix 10bit address configuration   i2c: muxes: rename first set of drivers to a standard pattern   of/i2c: implement of_find_i2c_adapter_by_node   i2c: implement i2c_verify_adapter   i2c-s3c2410: Add HDMIPHY quirk for S3C2440   i2c-s3c2410: Rework device type handling   i2c: muxes are not EXPERIMENTAL anymore   i2c/of: Automatically populate i2c mux busses from device tree data.   i2c: Add a struct device * parameter to i2c_add_mux_adapter()   of/i2c: call i2c_verify_client from of_find_i2c_device_by_node   i2c: designware: Add clk_{un}prepare() support   i2c: designware: add PM support   i2c: ixp2000: remove driver   i2c: pnx: add device tree support   i2c: imx: don't use strcpy but strlcpy   ...
f | i2c-intel-mid.c | s | 29K | 976 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c: Convert to DEFINE_PCI_DEVICE_TABLE  Convert static struct pci_device_id *[] to static DEFINE_PCI_DEVICE_TABLE tables.  Use DEFINE_PCI_DEVICE_TABLE ensures we make the pci_device_id table const and marked as __devinitconst.  This also fixes some warnings from checkpatch: e.g. WARNING: Use DEFINE_PCI_DEVICE_TABLE for struct pci_device_id #1096: FILE: i2c/busses/i2c-intel-mid.c:1096: +static struct pci_device_id intel_mid_i2c_ids[] = {  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Rudolf Marek <r.marek@assembler.cz> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Olof Johansson <olof@lixom.net> Cc: "Mark M. Hoffman" <mhoffman@lightlink.com> Acked-by: Dirk Brandewie <dirk.brandewie@gmail.com> Cc: Tomoya MORINAGA <tomoya-linux@dsn.lapis-semi.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Feng Tang <feng.tang@intel.com> Cc: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-davinci.c | s | 20K | 710 | Marcus Folkesson | marcus.folkesson@gmail.com | 1336847784 |  | i2c: davinci: Free requested IRQ in remove  The freed IRQ is not necessary the one requested in probe. Even if it was, with two or more i2c-controllers it will fails anyway.  Signed-off-by: Marcus Folkesson <marcus.folkesson@gmail.com> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de> Cc: stable@kernel.org
f | i2c-octeon.c | s | 15K | 542 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c/busses: Use module_platform_driver()  Convert the drivers in drivers/i2c/busses/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Jochen Friedrich <jochen@scram.de> Acked-by: Peter Korsgaard <jacmet@sunsite.dk> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Manuel Lauss <manuel.lauss@googlemail.com> Cc: Barry Song <21cnbao@gmail.com> Cc: Linus Walleij <linus.walleij@linaro.org> Cc: Yong Zhang <yong.zhang0@gmail.com> Cc: Lucas De Marchi <lucas.demarchi@profusion.mobi> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Samuel Ortiz <sameo@linux.intel.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-ali1535.c | s | 16K | 479 | corentin.labbe | corentin.labbe@geomatys.fr | 1326396724 |  | i2c-ali1535: enable SPARC support  The i2c-ali1535 driver doesn't work on SPARC, because it assumes that ioport address are 16-bit wide (address stored in an unsigned short). But on SPARC arch, ioports are mapped in memory and so must be stored in an unsigned long.  Use pci_resource_start for getting IOMEM base address, then read the SMBBA of the i2c bus and use these together for I/O access.  I would like to thank Jean DELVARE for reviewing my patch.  Signed-off-by: LABBE Corentin <corentin.labbe@geomatys.fr> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-versatile.c | s | 3.7K | 138 | Karol Lewandowski | k.lewandowsk@samsung.com | 1336825691 |  | i2c: Dynamically assign adapter id if it wasn't explictly specified  Commit 488bf314b ("i2c: Allow i2c_add_numbered_adapter() to assign a bus id") reworked i2c_add_numbered_adapter() to call i2c_add_adapter() if requested bus was -1.  This allows to simplify driver's initialization procedure by using just one function for static and dynamic adapter id registration.  This patch updates few more drivers (missed out in original patch) to use this functionality.  Signed-off-by: Karol Lewandowski <k.lewandowsk@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | i2c-taos-evm.c | s | 8.0K | 282 | Jean Delvare | khali@linux-fr.org | 1309340170 |  | i2c-taos-evm: Fix log messages  * Print all error and information messages even when debugging is   disabled. * Don't use adapter device to log messages before it is ready.  Signed-off-by: Jean Delvare <khali@linux-fr.org> Cc: stable@kernel.org
f | i2c-s6000.h | s | 2.3K | 76 | Oskar Schirmer | oskar@scara.com | 1337260556 |  | i2c: Change mail address of Oskar Schirmer  That old mail address doesnt exist any more. This changes all occurences to my new address.  Signed-off-by: Oskar Schirmer <oskar@scara.com> Cc: Jean Delvare <khali@linux-fr.org> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | Makefile | g | 3.4K |  | Rob Herring | rob.herring@calxeda.com | 1336825694 |  | i2c: ixp2000: remove driver  The platform is removed, so there are no users of this driver.  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | i2c-parport.c | s | 8.5K | 254 | Jean Delvare | khali@linux-fr.org | 1306263529 |  | i2c-parport: Various cleanups  * Fix white space. * Rename labels to something meaningful. * Prefix defines with PORT_ to avoid collision with macros from   <linux/parport.h>. * Add const markers where possible.  Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-cpm.c | s | 17K | 606 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c/busses: Use module_platform_driver()  Convert the drivers in drivers/i2c/busses/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Jochen Friedrich <jochen@scram.de> Acked-by: Peter Korsgaard <jacmet@sunsite.dk> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Manuel Lauss <manuel.lauss@googlemail.com> Cc: Barry Song <21cnbao@gmail.com> Cc: Linus Walleij <linus.walleij@linaro.org> Cc: Yong Zhang <yong.zhang0@gmail.com> Cc: Lucas De Marchi <lucas.demarchi@profusion.mobi> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Samuel Ortiz <sameo@linux.intel.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-iop3xx.c | s | 12K | 438 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c/busses: Use module_platform_driver()  Convert the drivers in drivers/i2c/busses/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Jochen Friedrich <jochen@scram.de> Acked-by: Peter Korsgaard <jacmet@sunsite.dk> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Manuel Lauss <manuel.lauss@googlemail.com> Cc: Barry Song <21cnbao@gmail.com> Cc: Linus Walleij <linus.walleij@linaro.org> Cc: Yong Zhang <yong.zhang0@gmail.com> Cc: Lucas De Marchi <lucas.demarchi@profusion.mobi> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Samuel Ortiz <sameo@linux.intel.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-isch.c | s | 8.6K | 277 | Olivier Sobrie | olivier@sobrie.be | 1332791238 |  | i2c-isch: Decrease delay in command completion check loop  Generally it is not needed to wait for 1 msec, the SMBus get often ready in less than 200 usecs.  msleep(1) can wait up to 20 msecs... It has a significant impact when there is a burst of transactions on the bus.  Signed-off-by: Olivier Sobrie <olivier@sobrie.be> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-pxa-pci.c | s | 3.9K | 151 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c: Convert to DEFINE_PCI_DEVICE_TABLE  Convert static struct pci_device_id *[] to static DEFINE_PCI_DEVICE_TABLE tables.  Use DEFINE_PCI_DEVICE_TABLE ensures we make the pci_device_id table const and marked as __devinitconst.  This also fixes some warnings from checkpatch: e.g. WARNING: Use DEFINE_PCI_DEVICE_TABLE for struct pci_device_id #1096: FILE: i2c/busses/i2c-intel-mid.c:1096: +static struct pci_device_id intel_mid_i2c_ids[] = {  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Rudolf Marek <r.marek@assembler.cz> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Olof Johansson <olof@lixom.net> Cc: "Mark M. Hoffman" <mhoffman@lightlink.com> Acked-by: Dirk Brandewie <dirk.brandewie@gmail.com> Cc: Tomoya MORINAGA <tomoya-linux@dsn.lapis-semi.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Feng Tang <feng.tang@intel.com> Cc: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-pasemi.c | s | 10K | 365 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c: Convert to DEFINE_PCI_DEVICE_TABLE  Convert static struct pci_device_id *[] to static DEFINE_PCI_DEVICE_TABLE tables.  Use DEFINE_PCI_DEVICE_TABLE ensures we make the pci_device_id table const and marked as __devinitconst.  This also fixes some warnings from checkpatch: e.g. WARNING: Use DEFINE_PCI_DEVICE_TABLE for struct pci_device_id #1096: FILE: i2c/busses/i2c-intel-mid.c:1096: +static struct pci_device_id intel_mid_i2c_ids[] = {  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Rudolf Marek <r.marek@assembler.cz> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Olof Johansson <olof@lixom.net> Cc: "Mark M. Hoffman" <mhoffman@lightlink.com> Acked-by: Dirk Brandewie <dirk.brandewie@gmail.com> Cc: Tomoya MORINAGA <tomoya-linux@dsn.lapis-semi.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Feng Tang <feng.tang@intel.com> Cc: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-acorn.c | s | 1.9K | 78 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | i2c-tegra.c | s | 21K | 673 | Laxman Dewangan | ldewangan@nvidia.com | 1336831812 |  | i2c: tegra: notify transfer-complete after clearing status.  The notification of the transfer complete by calling complete() should be done after clearing all interrupt status. This avoids the race condition of misconfigure the i2c controller in multi-core environment.  Signed-off-by: Laxman Dewangan <ldewangan@nvidia.com> Acked-by: Stephen Warren <swarren@wwwdotorg.org> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de> Cc: stable@kernel.org
f | i2c-mpc.c | s | 19K | 670 | Zhao Chenhui | chenhui.zhao@freescale.com | 1336825692 |  | i2c-mpc: avoid I2C abnormal after resuming from deep sleep  When entering deep sleep, the value in the registers I2CFDR and I2CDFSRR are lost. This causes I2C access to fail after resuming.  Add suspend/resume routines to save/restore the registers I2CFDR and I2CDFSRR.  Signed-off-by: Zhao Chenhui <chenhui.zhao@freescale.com> Signed-off-by: Li Yang <leoli@freescale.com> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | i2c-piix4.c | s | 15K | 486 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c: Convert to DEFINE_PCI_DEVICE_TABLE  Convert static struct pci_device_id *[] to static DEFINE_PCI_DEVICE_TABLE tables.  Use DEFINE_PCI_DEVICE_TABLE ensures we make the pci_device_id table const and marked as __devinitconst.  This also fixes some warnings from checkpatch: e.g. WARNING: Use DEFINE_PCI_DEVICE_TABLE for struct pci_device_id #1096: FILE: i2c/busses/i2c-intel-mid.c:1096: +static struct pci_device_id intel_mid_i2c_ids[] = {  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Rudolf Marek <r.marek@assembler.cz> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Olof Johansson <olof@lixom.net> Cc: "Mark M. Hoffman" <mhoffman@lightlink.com> Acked-by: Dirk Brandewie <dirk.brandewie@gmail.com> Cc: Tomoya MORINAGA <tomoya-linux@dsn.lapis-semi.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Feng Tang <feng.tang@intel.com> Cc: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-at91.c | s | 7.4K | 252 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c/busses: Use module_platform_driver()  Convert the drivers in drivers/i2c/busses/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Jochen Friedrich <jochen@scram.de> Acked-by: Peter Korsgaard <jacmet@sunsite.dk> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Manuel Lauss <manuel.lauss@googlemail.com> Cc: Barry Song <21cnbao@gmail.com> Cc: Linus Walleij <linus.walleij@linaro.org> Cc: Yong Zhang <yong.zhang0@gmail.com> Cc: Lucas De Marchi <lucas.demarchi@profusion.mobi> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Samuel Ortiz <sameo@linux.intel.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-elektor.c | s | 8.8K | 292 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | i2c-sis96x.c | s | 8.8K | 281 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c: Convert to DEFINE_PCI_DEVICE_TABLE  Convert static struct pci_device_id *[] to static DEFINE_PCI_DEVICE_TABLE tables.  Use DEFINE_PCI_DEVICE_TABLE ensures we make the pci_device_id table const and marked as __devinitconst.  This also fixes some warnings from checkpatch: e.g. WARNING: Use DEFINE_PCI_DEVICE_TABLE for struct pci_device_id #1096: FILE: i2c/busses/i2c-intel-mid.c:1096: +static struct pci_device_id intel_mid_i2c_ids[] = {  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Rudolf Marek <r.marek@assembler.cz> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Olof Johansson <olof@lixom.net> Cc: "Mark M. Hoffman" <mhoffman@lightlink.com> Acked-by: Dirk Brandewie <dirk.brandewie@gmail.com> Cc: Tomoya MORINAGA <tomoya-linux@dsn.lapis-semi.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Feng Tang <feng.tang@intel.com> Cc: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-stub.c | s | 5.6K | 184 | Jean Delvare | khali@linux-fr.org | 1274460056 |  | i2c-stub: Expose the default functionality flags  It is easier to adjust the flags when you know their default value.  Signed-off-by: Jean Delvare <khali@linux-fr.org> Cc: Mark M. Hoffman <mhoffman@lightlink.com>
f | scx200_i2c.c | s | 3.4K | 102 | H Hartley Sweeten | hartleys@visionengravers.com | 1274460061 |  | i2c: Use <linux/io.h> instead of <asm/io.h>  As warned by checkpatch.pl, <linux/io.h> should be used instead of <asm/io.h>.  Signed-off-by: H Hartley Sweeten <hsweeten@visionengravers.com> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-ocores.c | s | 9.7K | 349 | Ganesan Ramalingam | ganesanr@broadcom.com | 1336834194 |  | i2c: ocores: register OF i2c devices  Call of_i2c_register_devices() in probe function to register i2c devices specified in the device tree or OF.  Signed-off-by: Ganesan Ramalingam <ganesanr@broadcom.com> Signed-off-by: Jayachandran C <jayachandranc@netlogicmicro.com>  [wsa: add proper braces]  Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | i2c-au1550.c | s | 9.7K | 356 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c/busses: Use module_platform_driver()  Convert the drivers in drivers/i2c/busses/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Jochen Friedrich <jochen@scram.de> Acked-by: Peter Korsgaard <jacmet@sunsite.dk> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Manuel Lauss <manuel.lauss@googlemail.com> Cc: Barry Song <21cnbao@gmail.com> Cc: Linus Walleij <linus.walleij@linaro.org> Cc: Yong Zhang <yong.zhang0@gmail.com> Cc: Lucas De Marchi <lucas.demarchi@profusion.mobi> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Samuel Ortiz <sameo@linux.intel.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-amd756-s4882.c | s | 7.5K | 226 | Jean Delvare | khali@linux-fr.org | 1231334958 |  | i2c: Use snprintf to set adapter names  Use snprintf instead of sprintf to set adapter names, it's safer.  Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-nforce2-s4985.c | s | 7.3K | 224 | Jean Delvare | khali@linux-fr.org | 1218401775 |  | i2c: Fix oops on bus multiplexer driver loading  The two I2C bus multiplexer drivers (i2c-amd756-s4882 and i2c-nforce2-s4985) make use of the bus they want to multiplex before checking if it is really present. Swap the instructions to test for presence first. This fixes a oops reported by Ingo Molnar.  Signed-off-by: Jean Delvare <khali@linux-fr.org> Cc: Ingo Molnar <mingo@elte.hu>
f | i2c-ibm_iic.c | s | 19K | 680 | Linus Torvalds | torvalds@linux-foundation.org | 1326573136 |  | 
f | scx200_acb.c | s | 13K | 493 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c: Convert to DEFINE_PCI_DEVICE_TABLE  Convert static struct pci_device_id *[] to static DEFINE_PCI_DEVICE_TABLE tables.  Use DEFINE_PCI_DEVICE_TABLE ensures we make the pci_device_id table const and marked as __devinitconst.  This also fixes some warnings from checkpatch: e.g. WARNING: Use DEFINE_PCI_DEVICE_TABLE for struct pci_device_id #1096: FILE: i2c/busses/i2c-intel-mid.c:1096: +static struct pci_device_id intel_mid_i2c_ids[] = {  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Rudolf Marek <r.marek@assembler.cz> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Olof Johansson <olof@lixom.net> Cc: "Mark M. Hoffman" <mhoffman@lightlink.com> Acked-by: Dirk Brandewie <dirk.brandewie@gmail.com> Cc: Tomoya MORINAGA <tomoya-linux@dsn.lapis-semi.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Feng Tang <feng.tang@intel.com> Cc: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-ibm_iic.h | s | 2.6K | 110 | Stefan Roese | sr@denx.de | 1201454085 |  | i2c-ibm_iic: Whitespace cleanup  Signed-off-by: Stefan Roese <sr@denx.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-xlr.c | s | 6.9K | 235 | Ganesan Ramalingam | ganesanr@netlogicmicro.com | 1330118757 |  | i2c: Support for Netlogic XLR/XLS I2C controller.  Add support for the intergrated I2C controller on Netlogic XLR/XLS MIPS SoC.  The changes are to add a new file i2c/buses/i2c-xlr.c, containing the i2c bus implementation, and to update i2c/buses/{Kconfig,Makefile} to add the CONFIG_I2C_XLR option.  Signed-off-by: Ganesan Ramalingam <ganesanr@netlogicmicro.com> Signed-off-by: Jayachandran C <jayachandranc@netlogicmicro.com> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | i2c-omap.c | s | 32K | 1059 | Cousson, Benoit | b-cousson@ti.com | 1327076662 |  | i2c: OMAP: Fix OMAP1 build error  CONFIG_OF is not defined for OMAP1 yet and thus the omap1_defconfig build generate an error for 3.3-rc1.  drivers/i2c/busses/i2c-omap.c: In function 'omap_i2c_probe': drivers/i2c/busses/i2c-omap.c:1021:26: error: 'omap_i2c_of_match' undeclared (first use in this function) drivers/i2c/busses/i2c-omap.c:1021:26: note: each undeclared identifier is reported only once for each function it appears in  Wrap omap_i2c_of_match with of_match_ptr() to prevent compilation error in case of OMAP1 build.  Signed-off-by: Benoit Cousson <b-cousson@ti.com> Cc: Ben Dooks <ben-linux@fluff.org> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | i2c-sh_mobile.c | s | 20K | 632 | Magnus Damm | damm@opensource.se | 1336825692 |  | i2c: sh_mobile: add device tree support  This patch enables DT support for the IIC driver used on SH-based SoCs such as sh7722 and sh7724 among others as well as SH-Mobile SoCs such as sh7367, sh7377, sh7372, sh73a0 and r8a7740.  Tested with out-of-tree DT support code on the sh7372 Mackerel board.  Signed-off-by: Magnus Damm <damm@opensource.se> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | i2c-designware-core.h | s | 3.7K | 102 | Stefan Roese | sr@denx.de | 1336825691 |  | i2c: designware: Add support for 16bit register access  The STM SPEAr platform can only access the i2c controller register via 16bit read/write functions. This patch adds support to automatically detect this 16bit access mode.  Signed-off-by: Stefan Roese <sr@denx.de> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | i2c-tiny-usb.c | s | 7.3K | 215 | Greg Kroah-Hartman | gregkh@suse.de | 1321638730 |  | USB: convert some miscellanies drivers to use module_usb_driver()  This converts the remaining USB drivers in the kernel to use the module_usb_driver() macro which makes the code smaller and a bit simpler.  Added bonus is that it removes some unneeded kernel log messages about drivers loading and/or unloading.  Cc: Guenter Roeck <guenter.roeck@ericsson.com> Cc: Jean Delvare <khali@linux-fr.org> Cc: Ben Dooks <ben-linux@fluff.org> Cc: Till Harbaum <till@harbaum.org> Cc: Karsten Keil <isdn@linux-pingi.de> Cc: Chris Ball <cjb@laptop.org> Cc: David Woodhouse <dwmw2@infradead.org> Cc: Lauro Ramos Venancio <lauro.venancio@openbossa.org> Cc: Aloisio Almeida Jr <aloisio.almeida@openbossa.org> Cc: Samuel Ortiz <sameo@linux.intel.com> Cc: Steve Glendinning <steve.glendinning@smsc.com> Cc: Florian Tobias Schandinat <FlorianSchandinat@gmx.de> Cc: Evgeniy Polyakov <zbr@ioremap.net> Cc: Wim Van Sebroeck <wim@iguana.be> Cc: "David S. Miller" <davem@davemloft.net> Cc: Jesper Juhl <jj@chaosbits.net> Cc: Artem Bityutskiy <Artem.Bityutskiy@nokia.com> Cc: Jamie Iles <jamie@jamieiles.com> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | i2c-s3c2410.c | s | 26K | 914 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1338368134 |  | i2c: Split I2C_M_NOSTART support out of I2C_FUNC_PROTOCOL_MANGLING  Since there are uses for I2C_M_NOSTART which are much more sensible and standard than most of the protocol mangling functionality (the main one being gather writes to devices where something like a register address needs to be inserted before a block of data) create a new I2C_FUNC_NOSTART for this feature and update all the users to use it.  Also strengthen the disrecommendation of the protocol mangling while we're at it.  In the case of regmap-i2c we remove the requirement for mangling as I2C_M_NOSTART is the only mangling feature which is being used.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-pxa.c | s | 29K | 1075 | Karol Lewandowski | k.lewandowsk@samsung.com | 1336825691 |  | i2c-pxa: Drop leftover comment  Commit 488bf314b ("i2c: Allow i2c_add_numbered_adapter() to assign a bus id") reworked i2c-pxa driver leaving obsolete comment.  This commit simply drops it.  Signed-off-by: Karol Lewandowski <k.lewandowsk@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | i2c-highlander.c | s | 10K | 391 | Linus Torvalds | torvalds@linux-foundation.org | 1326573136 |  | 
f | i2c-iop3xx.h | s | 4.1K | 87 | Aaro Koskinen | aaro.koskinen@iki.fi | 1294102417 |  | i2c-iop3xx: add iomem annotation  Eliminate unnecessary casts and the following sparse warnings:  	drivers/i2c/busses/i2c-iop3xx.c:65:9: warning: incorrect type in argument 1 (different base types) 	drivers/i2c/busses/i2c-iop3xx.c:65:9:    expected void const volatile [noderef] <asn:2>*<noident> 	drivers/i2c/busses/i2c-iop3xx.c:65:9:    got unsigned int  	[ the previous warning is repeated 18 times ]  	drivers/i2c/busses/i2c-iop3xx.c:456:33: warning: cast removes address space of expression  Signed-off-by: Aaro Koskinen <aaro.koskinen@iki.fi> Signed-off-by: Ben Dooks <ben-linux@fluff.org>
f | i2c-bfin-twi.c | s | 19K | 706 | Yong Zhang | yong.zhang0@gmail.com | 1319878545 |  | i2c: irq: Remove IRQF_DISABLED  Since commit [c58543c8: genirq: Run irq handlers with interrupts disabled], We run all interrupt handlers with interrupts disabled and we even check and yell when an interrupt handler returns with interrupts enabled (see commit [b738a50a: genirq: Warn when handler enables interrupts]).  So now this flag is a NOOP and can be removed.  Signed-off-by: Yong Zhang <yong.zhang0@gmail.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Acked-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Barry Song <21cnbao@gmail.com> Signed-off-by: Ben Dooks <ben-linux@fluff.org>
f | i2c-pmcmsp.c | s | 17K | 555 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c/busses: Use module_platform_driver()  Convert the drivers in drivers/i2c/busses/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Jochen Friedrich <jochen@scram.de> Acked-by: Peter Korsgaard <jacmet@sunsite.dk> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Manuel Lauss <manuel.lauss@googlemail.com> Cc: Barry Song <21cnbao@gmail.com> Cc: Linus Walleij <linus.walleij@linaro.org> Cc: Yong Zhang <yong.zhang0@gmail.com> Cc: Lucas De Marchi <lucas.demarchi@profusion.mobi> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Samuel Ortiz <sameo@linux.intel.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-diolan-u2c.c | s | 12K | 445 | Greg Kroah-Hartman | gregkh@suse.de | 1321638730 |  | USB: convert some miscellanies drivers to use module_usb_driver()  This converts the remaining USB drivers in the kernel to use the module_usb_driver() macro which makes the code smaller and a bit simpler.  Added bonus is that it removes some unneeded kernel log messages about drivers loading and/or unloading.  Cc: Guenter Roeck <guenter.roeck@ericsson.com> Cc: Jean Delvare <khali@linux-fr.org> Cc: Ben Dooks <ben-linux@fluff.org> Cc: Till Harbaum <till@harbaum.org> Cc: Karsten Keil <isdn@linux-pingi.de> Cc: Chris Ball <cjb@laptop.org> Cc: David Woodhouse <dwmw2@infradead.org> Cc: Lauro Ramos Venancio <lauro.venancio@openbossa.org> Cc: Aloisio Almeida Jr <aloisio.almeida@openbossa.org> Cc: Samuel Ortiz <sameo@linux.intel.com> Cc: Steve Glendinning <steve.glendinning@smsc.com> Cc: Florian Tobias Schandinat <FlorianSchandinat@gmx.de> Cc: Evgeniy Polyakov <zbr@ioremap.net> Cc: Wim Van Sebroeck <wim@iguana.be> Cc: "David S. Miller" <davem@davemloft.net> Cc: Jesper Juhl <jj@chaosbits.net> Cc: Artem Bityutskiy <Artem.Bityutskiy@nokia.com> Cc: Jamie Iles <jamie@jamieiles.com> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | i2c-scmi.c | s | 11K | 382 | Darrick J. Wong | djwong@us.ibm.com | 1269437919 |  | i2c-scmi: Provide module aliases for automatic loading  Provide module aliases for automatic loading.  Signed-off-by: Darrick J. Wong <djwong@us.ibm.com> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-mxs.c | s | 10K | 350 | Linus Torvalds | torvalds@linux-foundation.org | 1338062267 |  | 
f | i2c-designware-pcidrv.c | s | 9.2K | 341 | Kristen Carlson Accardi | kristen@linux.intel.com | 1334070543 |  | i2c: prevent spurious interrupt on Designware controllers  Don't call i2c_enable on resume because it causes a spurious interrupt.  Signed-off-by:  Kristen Carlson Accardi <kristen@linux.intel.com> Signed-off-by: Kirill A. Shutemov <kirill.shutemov@linux.intel.com> Signed-off-by: Alan Cox <alan@linux.intel.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | i2c-designware-core.c | s | 18K | 623 | Stefan Roese | sr@denx.de | 1336825691 |  | i2c: designware: Add support for 16bit register access  The STM SPEAr platform can only access the i2c controller register via 16bit read/write functions. This patch adds support to automatically detect this 16bit access mode.  Signed-off-by: Stefan Roese <sr@denx.de> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | i2c-mv64xxx.c | s | 17K | 545 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c/busses: Use module_platform_driver()  Convert the drivers in drivers/i2c/busses/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Jochen Friedrich <jochen@scram.de> Acked-by: Peter Korsgaard <jacmet@sunsite.dk> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Manuel Lauss <manuel.lauss@googlemail.com> Cc: Barry Song <21cnbao@gmail.com> Cc: Linus Walleij <linus.walleij@linaro.org> Cc: Yong Zhang <yong.zhang0@gmail.com> Cc: Lucas De Marchi <lucas.demarchi@profusion.mobi> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Samuel Ortiz <sameo@linux.intel.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-i801.c | s | 27K | 820 | Jean Delvare | khali@linux-fr.org | 1332791239 |  | i2c-i801: Use usleep_range to wait for command completion  Use usleep_range instead of msleep when waiting for command completion. Most SMBus commands complete in less than 2 jiffies so this brings a pleasant performance boost.  Strongly inspired from a similar change by Olivier Sobrie to the i2c-isch driver.  Signed-off-by: Jean Delvare <khali@linux-fr.org> Cc: Olivier Sobrie <olivier@sobrie.be>
f | i2c-nforce2.c | s | 12K | 393 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c: Convert to DEFINE_PCI_DEVICE_TABLE  Convert static struct pci_device_id *[] to static DEFINE_PCI_DEVICE_TABLE tables.  Use DEFINE_PCI_DEVICE_TABLE ensures we make the pci_device_id table const and marked as __devinitconst.  This also fixes some warnings from checkpatch: e.g. WARNING: Use DEFINE_PCI_DEVICE_TABLE for struct pci_device_id #1096: FILE: i2c/busses/i2c-intel-mid.c:1096: +static struct pci_device_id intel_mid_i2c_ids[] = {  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Rudolf Marek <r.marek@assembler.cz> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Olof Johansson <olof@lixom.net> Cc: "Mark M. Hoffman" <mhoffman@lightlink.com> Acked-by: Dirk Brandewie <dirk.brandewie@gmail.com> Cc: Tomoya MORINAGA <tomoya-linux@dsn.lapis-semi.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Feng Tang <feng.tang@intel.com> Cc: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-sh7760.c | s | 13K | 481 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c/busses: Use module_platform_driver()  Convert the drivers in drivers/i2c/busses/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Jochen Friedrich <jochen@scram.de> Acked-by: Peter Korsgaard <jacmet@sunsite.dk> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Manuel Lauss <manuel.lauss@googlemail.com> Cc: Barry Song <21cnbao@gmail.com> Cc: Linus Walleij <linus.walleij@linaro.org> Cc: Yong Zhang <yong.zhang0@gmail.com> Cc: Lucas De Marchi <lucas.demarchi@profusion.mobi> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Samuel Ortiz <sameo@linux.intel.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-hydra.c | s | 4.3K | 143 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c: Convert to DEFINE_PCI_DEVICE_TABLE  Convert static struct pci_device_id *[] to static DEFINE_PCI_DEVICE_TABLE tables.  Use DEFINE_PCI_DEVICE_TABLE ensures we make the pci_device_id table const and marked as __devinitconst.  This also fixes some warnings from checkpatch: e.g. WARNING: Use DEFINE_PCI_DEVICE_TABLE for struct pci_device_id #1096: FILE: i2c/busses/i2c-intel-mid.c:1096: +static struct pci_device_id intel_mid_i2c_ids[] = {  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Rudolf Marek <r.marek@assembler.cz> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Olof Johansson <olof@lixom.net> Cc: "Mark M. Hoffman" <mhoffman@lightlink.com> Acked-by: Dirk Brandewie <dirk.brandewie@gmail.com> Cc: Tomoya MORINAGA <tomoya-linux@dsn.lapis-semi.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Feng Tang <feng.tang@intel.com> Cc: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-xiic.c | s | 22K | 672 | Lars-Peter Clausen | lars@metafoo.de | 1336825698 |  | I2C: xiic: Add OF binding support  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | i2c-viapro.c | s | 14K | 438 | Linus Torvalds | torvalds@linux-foundation.org | 1326573136 |  | 
f | i2c-sis5595.c | s | 11K | 373 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c: Convert to DEFINE_PCI_DEVICE_TABLE  Convert static struct pci_device_id *[] to static DEFINE_PCI_DEVICE_TABLE tables.  Use DEFINE_PCI_DEVICE_TABLE ensures we make the pci_device_id table const and marked as __devinitconst.  This also fixes some warnings from checkpatch: e.g. WARNING: Use DEFINE_PCI_DEVICE_TABLE for struct pci_device_id #1096: FILE: i2c/busses/i2c-intel-mid.c:1096: +static struct pci_device_id intel_mid_i2c_ids[] = {  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Rudolf Marek <r.marek@assembler.cz> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Olof Johansson <olof@lixom.net> Cc: "Mark M. Hoffman" <mhoffman@lightlink.com> Acked-by: Dirk Brandewie <dirk.brandewie@gmail.com> Cc: Tomoya MORINAGA <tomoya-linux@dsn.lapis-semi.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Feng Tang <feng.tang@intel.com> Cc: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-via.c | s | 4.4K | 143 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c: Convert to DEFINE_PCI_DEVICE_TABLE  Convert static struct pci_device_id *[] to static DEFINE_PCI_DEVICE_TABLE tables.  Use DEFINE_PCI_DEVICE_TABLE ensures we make the pci_device_id table const and marked as __devinitconst.  This also fixes some warnings from checkpatch: e.g. WARNING: Use DEFINE_PCI_DEVICE_TABLE for struct pci_device_id #1096: FILE: i2c/busses/i2c-intel-mid.c:1096: +static struct pci_device_id intel_mid_i2c_ids[] = {  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Rudolf Marek <r.marek@assembler.cz> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Olof Johansson <olof@lixom.net> Cc: "Mark M. Hoffman" <mhoffman@lightlink.com> Acked-by: Dirk Brandewie <dirk.brandewie@gmail.com> Cc: Tomoya MORINAGA <tomoya-linux@dsn.lapis-semi.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Feng Tang <feng.tang@intel.com> Cc: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | Kconfig | g | 26K |  | Linus Torvalds | torvalds@linux-foundation.org | 1338064503 |  | Merge branch 'i2c-embedded/for-next' of git://git.pengutronix.de/git/wsa/linux  Pull i2c-embedded changes from Wolfram Sang:  "Major changes:     - lots of devicetree additions for existing drivers.  I tried hard to      make sure the bindings are proper.  In more complicated cases, I      requested acks from people having more experience with them than      me.  That took a bit of extra time and also some time went into      discussions with developers about what bindings are and what not.      I have the feeling that the workflow with bindings should be      improved to scale better.  I will spend some more thought on      this...     - i2c-muxes are succesfully used meanwhile, so we dropped      EXPERIMENTAL for them and renamed the drivers to a standard pattern      to match the rest of the subsystem.  They can also be used with      devicetree now.     - ixp2000 was removed since the whole platform goes away.     - cleanups (strlcpy instead of strcpy, NULL instead of 0)     - The rest is typical driver fixes I assume.    All patches have been in linux-next at least since v3.4-rc6."  Fixed up trivial conflict in arch/arm/mach-lpc32xx/common.c due to the same patch already having come in through the arm/soc trees, with additional patches on top of it.  * 'i2c-embedded/for-next' of git://git.pengutronix.de/git/wsa/linux: (35 commits)   i2c: davinci: Free requested IRQ in remove   i2c: ocores: register OF i2c devices   i2c: tegra: notify transfer-complete after clearing status.   I2C: xiic: Add OF binding support   i2c: Rename last mux driver to standard pattern   i2c: tegra: fix 10bit address configuration   i2c: muxes: rename first set of drivers to a standard pattern   of/i2c: implement of_find_i2c_adapter_by_node   i2c: implement i2c_verify_adapter   i2c-s3c2410: Add HDMIPHY quirk for S3C2440   i2c-s3c2410: Rework device type handling   i2c: muxes are not EXPERIMENTAL anymore   i2c/of: Automatically populate i2c mux busses from device tree data.   i2c: Add a struct device * parameter to i2c_add_mux_adapter()   of/i2c: call i2c_verify_client from of_find_i2c_device_by_node   i2c: designware: Add clk_{un}prepare() support   i2c: designware: add PM support   i2c: ixp2000: remove driver   i2c: pnx: add device tree support   i2c: imx: don't use strcpy but strlcpy   ...
f | i2c-gpio.c | s | 6.6K | 224 | Karol Lewandowski | k.lewandowsk@samsung.com | 1336825691 |  | i2c: Dynamically assign adapter id if it wasn't explictly specified  Commit 488bf314b ("i2c: Allow i2c_add_numbered_adapter() to assign a bus id") reworked i2c_add_numbered_adapter() to call i2c_add_adapter() if requested bus was -1.  This allows to simplify driver's initialization procedure by using just one function for static and dynamic adapter id registration.  This patch updates few more drivers (missed out in original patch) to use this functionality.  Signed-off-by: Karol Lewandowski <k.lewandowsk@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | i2c-amd8111.c | s | 12K | 425 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c: Convert to DEFINE_PCI_DEVICE_TABLE  Convert static struct pci_device_id *[] to static DEFINE_PCI_DEVICE_TABLE tables.  Use DEFINE_PCI_DEVICE_TABLE ensures we make the pci_device_id table const and marked as __devinitconst.  This also fixes some warnings from checkpatch: e.g. WARNING: Use DEFINE_PCI_DEVICE_TABLE for struct pci_device_id #1096: FILE: i2c/busses/i2c-intel-mid.c:1096: +static struct pci_device_id intel_mid_i2c_ids[] = {  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Rudolf Marek <r.marek@assembler.cz> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Olof Johansson <olof@lixom.net> Cc: "Mark M. Hoffman" <mhoffman@lightlink.com> Acked-by: Dirk Brandewie <dirk.brandewie@gmail.com> Cc: Tomoya MORINAGA <tomoya-linux@dsn.lapis-semi.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Feng Tang <feng.tang@intel.com> Cc: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-amd756.c | s | 11K | 359 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c: Convert to DEFINE_PCI_DEVICE_TABLE  Convert static struct pci_device_id *[] to static DEFINE_PCI_DEVICE_TABLE tables.  Use DEFINE_PCI_DEVICE_TABLE ensures we make the pci_device_id table const and marked as __devinitconst.  This also fixes some warnings from checkpatch: e.g. WARNING: Use DEFINE_PCI_DEVICE_TABLE for struct pci_device_id #1096: FILE: i2c/busses/i2c-intel-mid.c:1096: +static struct pci_device_id intel_mid_i2c_ids[] = {  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Rudolf Marek <r.marek@assembler.cz> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Olof Johansson <olof@lixom.net> Cc: "Mark M. Hoffman" <mhoffman@lightlink.com> Acked-by: Dirk Brandewie <dirk.brandewie@gmail.com> Cc: Tomoya MORINAGA <tomoya-linux@dsn.lapis-semi.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Feng Tang <feng.tang@intel.com> Cc: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-pca-platform.c | s | 6.5K | 243 | Karol Lewandowski | k.lewandowsk@samsung.com | 1336825691 |  | i2c: Dynamically assign adapter id if it wasn't explictly specified  Commit 488bf314b ("i2c: Allow i2c_add_numbered_adapter() to assign a bus id") reworked i2c_add_numbered_adapter() to call i2c_add_adapter() if requested bus was -1.  This allows to simplify driver's initialization procedure by using just one function for static and dynamic adapter id registration.  This patch updates few more drivers (missed out in original patch) to use this functionality.  Signed-off-by: Karol Lewandowski <k.lewandowsk@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | i2c-nuc900.c | s | 14K | 542 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1338368134 |  | i2c: Split I2C_M_NOSTART support out of I2C_FUNC_PROTOCOL_MANGLING  Since there are uses for I2C_M_NOSTART which are much more sensible and standard than most of the protocol mangling functionality (the main one being gather writes to devices where something like a register address needs to be inserted before a block of data) create a new I2C_FUNC_NOSTART for this feature and update all the users to use it.  Also strengthen the disrecommendation of the protocol mangling while we're at it.  In the case of regmap-i2c we remove the requirement for mangling as I2C_M_NOSTART is the only mangling feature which is being used.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-stu300.c | s | 26K | 917 | Yong Zhang | yong.zhang0@gmail.com | 1319878545 |  | i2c: irq: Remove IRQF_DISABLED  Since commit [c58543c8: genirq: Run irq handlers with interrupts disabled], We run all interrupt handlers with interrupts disabled and we even check and yell when an interrupt handler returns with interrupts enabled (see commit [b738a50a: genirq: Warn when handler enables interrupts]).  So now this flag is a NOOP and can be removed.  Signed-off-by: Yong Zhang <yong.zhang0@gmail.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Acked-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Barry Song <21cnbao@gmail.com> Signed-off-by: Ben Dooks <ben-linux@fluff.org>
f | i2c-ali15x3.c | s | 15K | 465 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c: Convert to DEFINE_PCI_DEVICE_TABLE  Convert static struct pci_device_id *[] to static DEFINE_PCI_DEVICE_TABLE tables.  Use DEFINE_PCI_DEVICE_TABLE ensures we make the pci_device_id table const and marked as __devinitconst.  This also fixes some warnings from checkpatch: e.g. WARNING: Use DEFINE_PCI_DEVICE_TABLE for struct pci_device_id #1096: FILE: i2c/busses/i2c-intel-mid.c:1096: +static struct pci_device_id intel_mid_i2c_ids[] = {  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Rudolf Marek <r.marek@assembler.cz> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Olof Johansson <olof@lixom.net> Cc: "Mark M. Hoffman" <mhoffman@lightlink.com> Acked-by: Dirk Brandewie <dirk.brandewie@gmail.com> Cc: Tomoya MORINAGA <tomoya-linux@dsn.lapis-semi.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Feng Tang <feng.tang@intel.com> Cc: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-parport-light.c | s | 6.9K | 227 | Jean Delvare | khali@linux-fr.org | 1306263529 |  | i2c-parport: Various cleanups  * Fix white space. * Rename labels to something meaningful. * Prefix defines with PORT_ to avoid collision with macros from   <linux/parport.h>. * Add const markers where possible.  Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-pca-isa.c | s | 5.5K | 193 | Yegor Yefremov | yegor_sub1@visionsystems.de | 1285848862 |  | i2c-pca: Fix waitforcompletion() return value  ret is still -1, if during the polling read_byte() returns at once with I2C_PCA_CON_SI set. So ret > 0 would lead *_waitforcompletion() to return 0, in spite of the proper behavior.  The routine was rewritten, so that ret has always a proper value, before returning.  Signed-off-by: Yegor Yefremov <yegorslists@googlemail.com> Reviewed-by: Wolfram Sang <w.sang@pengutronix.de> Cc: stable@kernel.org Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-simtec.c | s | 3.8K | 140 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c/busses: Use module_platform_driver()  Convert the drivers in drivers/i2c/busses/* to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Jochen Friedrich <jochen@scram.de> Acked-by: Peter Korsgaard <jacmet@sunsite.dk> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Manuel Lauss <manuel.lauss@googlemail.com> Cc: Barry Song <21cnbao@gmail.com> Cc: Linus Walleij <linus.walleij@linaro.org> Cc: Yong Zhang <yong.zhang0@gmail.com> Cc: Lucas De Marchi <lucas.demarchi@profusion.mobi> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Samuel Ortiz <sameo@linux.intel.com> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-sibyte.c | s | 5.6K | 171 | Guenter Roeck | guenter.roeck@ericsson.com | 1278747767 |  | i2c/mips: Fix error return codes from Sibyte i2c bus driver  Sibyte i2c bus driver returns non-descriptive error values. Update to return error values as defined in Documentation/i2c/fault-codes.  Signed-off-by: Guenter Roeck <guenter.roeck@ericsson.com> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-eg20t.c | s | 25K | 810 | Wolfram Sang | wolfram@the-dreams.de | 1336825694 |  | i2c: eg20t: don't use strcpy but strlcpy  Signed-off-by: Wolfram Sang <wolfram@the-dreams.de> Cc: Tomoya MORINAGA <tomoya.rohm@gmail.com>
f | i2c-pnx.c | s | 21K | 682 | Roland Stigge | stigge@antcom.de | 1335088787 |  | i2c: Add device tree support to i2c-pnx.c  This patch adds device tree support to the pnx-i2c driver by using platform resources for memory region and irq and removing dependency on mach includes.  The following platforms are affected:  * PNX * LPC31xx (WIP) * LPC32xx  The patch is based on a patch by Jon Smirl, working on lpc31xx integration  Signed-off-by: Roland Stigge <stigge@antcom.de> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | i2c-s6000.c | s | 10K | 370 | Oskar Schirmer | oskar@scara.com | 1337260556 |  | i2c: Change mail address of Oskar Schirmer  That old mail address doesnt exist any more. This changes all occurences to my new address.  Signed-off-by: Oskar Schirmer <oskar@scara.com> Cc: Jean Delvare <khali@linux-fr.org> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | i2c-ali1563.c | s | 11K | 379 | Axel Lin | axel.lin@gmail.com | 1326396724 |  | i2c: Convert to DEFINE_PCI_DEVICE_TABLE  Convert static struct pci_device_id *[] to static DEFINE_PCI_DEVICE_TABLE tables.  Use DEFINE_PCI_DEVICE_TABLE ensures we make the pci_device_id table const and marked as __devinitconst.  This also fixes some warnings from checkpatch: e.g. WARNING: Use DEFINE_PCI_DEVICE_TABLE for struct pci_device_id #1096: FILE: i2c/busses/i2c-intel-mid.c:1096: +static struct pci_device_id intel_mid_i2c_ids[] = {  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Rudolf Marek <r.marek@assembler.cz> Cc: Ben Dooks <ben-linux@fluff.org> Acked-by: Olof Johansson <olof@lixom.net> Cc: "Mark M. Hoffman" <mhoffman@lightlink.com> Acked-by: Dirk Brandewie <dirk.brandewie@gmail.com> Cc: Tomoya MORINAGA <tomoya-linux@dsn.lapis-semi.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Cc: Feng Tang <feng.tang@intel.com> Cc: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-designware-platdrv.c | s | 6.3K | 218 | Viresh Kumar | viresh.kumar@st.com | 1336825695 |  | i2c: designware: Add clk_{un}prepare() support  clk_{un}prepare is mandatory for platforms using common clock framework. Since this driver is used by SPEAr platform, which supports common clock framework, add clk_{un}prepare() support for designware i2c.  Signed-off-by: Viresh Kumar <viresh.kumar@st.com> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | i2c-powermac.c | s | 9.8K | 325 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764237 |  | i2c/powermac: Register i2c devices from device-tree  This causes i2c-powermac to register i2c devices exposed in the device-tree, enabling new-style probing of devices.  Note that we prefix the IDs with "MAC," in order to prevent the generic drivers from matching. This is done on purpose as we only want drivers specifically tested/designed to operate on powermacs to match.  This removes the special case we had for the AMS driver, and updates the driver's match table instead.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | i2c-sis630.c | s | 13K | 447 | Linus Torvalds | torvalds@linux-foundation.org | 1326573136 |  | 
f | i2c-nomadik.c | s | 26K | 910 | Ben Dooks | ben-linux@fluff.org | 1320108857 |  | Merge branches 'for-32/i2c/nomadik', 'for-32/i2c/s3c2410-dt' and 'for-32/i2c/tegra-iomem' into for-linus/i2c-3.2
f | i2c-puv3.c | s | 6.3K | 240 | Guan Xuetao | gxt@mprc.pku.edu.cn | 1326162581 |  | i2c-puv3: using module_platform_driver()  This patch converts the driver to use the module_platform_driver() macro which makes the code smaller and a bit simpler.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
f | i2c-parport.h | s | 3.2K | 102 | Jean Delvare | khali@linux-fr.org | 1306263529 |  | i2c-parport: Various cleanups  * Fix white space. * Rename labels to something meaningful. * Prefix defines with PORT_ to avoid collision with macros from   <linux/parport.h>. * Add const markers where possible.  Signed-off-by: Jean Delvare <khali@linux-fr.org>
f | i2c-sirf.c | s | 11K | 378 | Zhiwu Song | Zhiwu.Song@csr.com | 1331143504 |  | i2c: add CSR SiRFprimaII on-chip I2C controllers driver  SiRFprimaII is the latest generation application processor from CSRs multi-function SoC product family. The SoC support codes are in arch/arm/mach-prima2 from Linux mainline 3.0. There are two I2C controllers on primaII, features include: * Two I2C controller modules are on chip * RISC I/O bus read write register * Up to 16 bytes data buffer for issuing commands and writing data   at the same time * Up to 16 commands, and receiving read data 16 bytes at a time * Error INT report (ACK check) * No-ACK bus protocols (SCCB bus protocols)  Signed-off-by: Zhiwu Song <Zhiwu.Song@csr.com> Signed-off-by: Xiangzhen Ye <Xiangzhen.Ye@csr.com> Signed-off-by: Yuping Luo <Yuping.Luo@csr.com> Signed-off-by: Barry Song <Baohua.Song@csr.com> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
