<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › clk › spear › spear6xx_clock.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>spear6xx_clock.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * SPEAr6xx machines clock framework source file</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2012 ST Microelectronics</span>
<span class="cm"> * Viresh Kumar &lt;viresh.linux@gmail.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This file is licensed under the terms of the GNU General Public</span>
<span class="cm"> * License version 2. This program is licensed &quot;as is&quot; without any</span>
<span class="cm"> * warranty of any kind, whether express or implied.</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/clk.h&gt;</span>
<span class="cp">#include &lt;linux/clkdev.h&gt;</span>
<span class="cp">#include &lt;linux/io.h&gt;</span>
<span class="cp">#include &lt;linux/spinlock_types.h&gt;</span>
<span class="cp">#include &lt;mach/misc_regs.h&gt;</span>
<span class="cp">#include &quot;clk.h&quot;</span>

<span class="k">static</span> <span class="n">DEFINE_SPINLOCK</span><span class="p">(</span><span class="n">_lock</span><span class="p">);</span>

<span class="cp">#define PLL1_CTR			(MISC_BASE + 0x008)</span>
<span class="cp">#define PLL1_FRQ			(MISC_BASE + 0x00C)</span>
<span class="cp">#define PLL2_CTR			(MISC_BASE + 0x014)</span>
<span class="cp">#define PLL2_FRQ			(MISC_BASE + 0x018)</span>
<span class="cp">#define PLL_CLK_CFG			(MISC_BASE + 0x020)</span>
	<span class="cm">/* PLL_CLK_CFG register masks */</span>
	<span class="cp">#define MCTR_CLK_SHIFT		28</span>
	<span class="cp">#define MCTR_CLK_MASK		3</span>

<span class="cp">#define CORE_CLK_CFG			(MISC_BASE + 0x024)</span>
	<span class="cm">/* CORE CLK CFG register masks */</span>
	<span class="cp">#define HCLK_RATIO_SHIFT	10</span>
	<span class="cp">#define HCLK_RATIO_MASK		2</span>
	<span class="cp">#define PCLK_RATIO_SHIFT	8</span>
	<span class="cp">#define PCLK_RATIO_MASK		2</span>

<span class="cp">#define PERIP_CLK_CFG			(MISC_BASE + 0x028)</span>
	<span class="cm">/* PERIP_CLK_CFG register masks */</span>
	<span class="cp">#define CLCD_CLK_SHIFT		2</span>
	<span class="cp">#define CLCD_CLK_MASK		2</span>
	<span class="cp">#define UART_CLK_SHIFT		4</span>
	<span class="cp">#define UART_CLK_MASK		1</span>
	<span class="cp">#define FIRDA_CLK_SHIFT		5</span>
	<span class="cp">#define FIRDA_CLK_MASK		2</span>
	<span class="cp">#define GPT0_CLK_SHIFT		8</span>
	<span class="cp">#define GPT1_CLK_SHIFT		10</span>
	<span class="cp">#define GPT2_CLK_SHIFT		11</span>
	<span class="cp">#define GPT3_CLK_SHIFT		12</span>
	<span class="cp">#define GPT_CLK_MASK		1</span>

<span class="cp">#define PERIP1_CLK_ENB			(MISC_BASE + 0x02C)</span>
	<span class="cm">/* PERIP1_CLK_ENB register masks */</span>
	<span class="cp">#define UART0_CLK_ENB		3</span>
	<span class="cp">#define UART1_CLK_ENB		4</span>
	<span class="cp">#define SSP0_CLK_ENB		5</span>
	<span class="cp">#define SSP1_CLK_ENB		6</span>
	<span class="cp">#define I2C_CLK_ENB		7</span>
	<span class="cp">#define JPEG_CLK_ENB		8</span>
	<span class="cp">#define FSMC_CLK_ENB		9</span>
	<span class="cp">#define FIRDA_CLK_ENB		10</span>
	<span class="cp">#define GPT2_CLK_ENB		11</span>
	<span class="cp">#define GPT3_CLK_ENB		12</span>
	<span class="cp">#define GPIO2_CLK_ENB		13</span>
	<span class="cp">#define SSP2_CLK_ENB		14</span>
	<span class="cp">#define ADC_CLK_ENB		15</span>
	<span class="cp">#define GPT1_CLK_ENB		11</span>
	<span class="cp">#define RTC_CLK_ENB		17</span>
	<span class="cp">#define GPIO1_CLK_ENB		18</span>
	<span class="cp">#define DMA_CLK_ENB		19</span>
	<span class="cp">#define SMI_CLK_ENB		21</span>
	<span class="cp">#define CLCD_CLK_ENB		22</span>
	<span class="cp">#define GMAC_CLK_ENB		23</span>
	<span class="cp">#define USBD_CLK_ENB		24</span>
	<span class="cp">#define USBH0_CLK_ENB		25</span>
	<span class="cp">#define USBH1_CLK_ENB		26</span>

<span class="cp">#define PRSC0_CLK_CFG			(MISC_BASE + 0x044)</span>
<span class="cp">#define PRSC1_CLK_CFG			(MISC_BASE + 0x048)</span>
<span class="cp">#define PRSC2_CLK_CFG			(MISC_BASE + 0x04C)</span>

<span class="cp">#define CLCD_CLK_SYNT			(MISC_BASE + 0x05C)</span>
<span class="cp">#define FIRDA_CLK_SYNT			(MISC_BASE + 0x060)</span>
<span class="cp">#define UART_CLK_SYNT			(MISC_BASE + 0x064)</span>

<span class="cm">/* vco rate configuration table, in ascending order of rates */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">pll_rate_tbl</span> <span class="n">pll_rtbl</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{.</span><span class="n">mode</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="p">.</span><span class="n">m</span> <span class="o">=</span> <span class="mh">0x53</span><span class="p">,</span> <span class="p">.</span><span class="n">n</span> <span class="o">=</span> <span class="mh">0x0F</span><span class="p">,</span> <span class="p">.</span><span class="n">p</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">},</span> <span class="cm">/* vco 332 &amp; pll 166 MHz */</span>
	<span class="p">{.</span><span class="n">mode</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="p">.</span><span class="n">m</span> <span class="o">=</span> <span class="mh">0x85</span><span class="p">,</span> <span class="p">.</span><span class="n">n</span> <span class="o">=</span> <span class="mh">0x0F</span><span class="p">,</span> <span class="p">.</span><span class="n">p</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">},</span> <span class="cm">/* vco 532 &amp; pll 266 MHz */</span>
	<span class="p">{.</span><span class="n">mode</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="p">.</span><span class="n">m</span> <span class="o">=</span> <span class="mh">0xA6</span><span class="p">,</span> <span class="p">.</span><span class="n">n</span> <span class="o">=</span> <span class="mh">0x0F</span><span class="p">,</span> <span class="p">.</span><span class="n">p</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">},</span> <span class="cm">/* vco 664 &amp; pll 332 MHz */</span>
<span class="p">};</span>

<span class="cm">/* aux rate configuration table, in ascending order of rates */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">aux_rate_tbl</span> <span class="n">aux_rtbl</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* For PLL1 = 332 MHz */</span>
	<span class="p">{.</span><span class="n">xscale</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="p">.</span><span class="n">yscale</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span> <span class="p">.</span><span class="n">eq</span> <span class="o">=</span> <span class="mi">0</span><span class="p">},</span> <span class="cm">/* 41.5 MHz */</span>
	<span class="p">{.</span><span class="n">xscale</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="p">.</span><span class="n">yscale</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="p">.</span><span class="n">eq</span> <span class="o">=</span> <span class="mi">0</span><span class="p">},</span> <span class="cm">/* 83 MHz */</span>
	<span class="p">{.</span><span class="n">xscale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="p">.</span><span class="n">yscale</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="p">.</span><span class="n">eq</span> <span class="o">=</span> <span class="mi">1</span><span class="p">},</span> <span class="cm">/* 166 MHz */</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">clcd_parents</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;pll3_48m_clk&quot;</span><span class="p">,</span> <span class="s">&quot;clcd_synth_gate_clk&quot;</span><span class="p">,</span> <span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">firda_parents</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;pll3_48m_clk&quot;</span><span class="p">,</span> <span class="s">&quot;firda_synth_gate_clk&quot;</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">uart_parents</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;pll3_48m_clk&quot;</span><span class="p">,</span> <span class="s">&quot;uart_synth_gate_clk&quot;</span><span class="p">,</span> <span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">gpt0_1_parents</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;pll3_48m_clk&quot;</span><span class="p">,</span> <span class="s">&quot;gpt0_1_synth_clk&quot;</span><span class="p">,</span> <span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">gpt2_parents</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;pll3_48m_clk&quot;</span><span class="p">,</span> <span class="s">&quot;gpt2_synth_clk&quot;</span><span class="p">,</span> <span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">gpt3_parents</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;pll3_48m_clk&quot;</span><span class="p">,</span> <span class="s">&quot;gpt3_synth_clk&quot;</span><span class="p">,</span> <span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">ddr_parents</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;ahb_clk&quot;</span><span class="p">,</span> <span class="s">&quot;ahbmult2_clk&quot;</span><span class="p">,</span> <span class="s">&quot;none&quot;</span><span class="p">,</span>
	<span class="s">&quot;pll2_clk&quot;</span><span class="p">,</span> <span class="p">};</span>

<span class="cm">/* gpt rate configuration table, in ascending order of rates */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">gpt_rate_tbl</span> <span class="n">gpt_rtbl</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* For pll1 = 332 MHz */</span>
	<span class="p">{.</span><span class="n">mscale</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="p">.</span><span class="n">nscale</span> <span class="o">=</span> <span class="mi">0</span><span class="p">},</span> <span class="cm">/* 41.5 MHz */</span>
	<span class="p">{.</span><span class="n">mscale</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="p">.</span><span class="n">nscale</span> <span class="o">=</span> <span class="mi">0</span><span class="p">},</span> <span class="cm">/* 55.3 MHz */</span>
	<span class="p">{.</span><span class="n">mscale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="p">.</span><span class="n">nscale</span> <span class="o">=</span> <span class="mi">0</span><span class="p">},</span> <span class="cm">/* 83 MHz */</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">__init</span> <span class="nf">spear6xx_clk_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">clk</span> <span class="o">*</span><span class="n">clk</span><span class="p">,</span> <span class="o">*</span><span class="n">clk1</span><span class="p">;</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_fixed_rate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;apb_pclk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">CLK_IS_ROOT</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;apb_pclk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_fixed_rate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;osc_32k_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">CLK_IS_ROOT</span><span class="p">,</span>
			<span class="mi">32000</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;osc_32k_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_fixed_rate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;osc_30m_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">CLK_IS_ROOT</span><span class="p">,</span>
			<span class="mi">30000000</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;osc_30m_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="cm">/* clock derived from 32 KHz osc clk */</span>
	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;rtc_spear&quot;</span><span class="p">,</span> <span class="s">&quot;osc_32k_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">PERIP1_CLK_ENB</span><span class="p">,</span> <span class="n">RTC_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;rtc-spear&quot;</span><span class="p">);</span>

	<span class="cm">/* clock derived from 30 MHz osc clk */</span>
	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_fixed_rate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;pll3_48m_clk&quot;</span><span class="p">,</span> <span class="s">&quot;osc_24m_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="mi">48000000</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;pll3_48m_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_vco_pll</span><span class="p">(</span><span class="s">&quot;vco1_clk&quot;</span><span class="p">,</span> <span class="s">&quot;pll1_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;osc_30m_clk&quot;</span><span class="p">,</span>
			<span class="mi">0</span><span class="p">,</span> <span class="n">PLL1_CTR</span><span class="p">,</span> <span class="n">PLL1_FRQ</span><span class="p">,</span> <span class="n">pll_rtbl</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">pll_rtbl</span><span class="p">),</span>
			<span class="o">&amp;</span><span class="n">_lock</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">clk1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;vco1_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk1</span><span class="p">,</span> <span class="s">&quot;pll1_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_vco_pll</span><span class="p">(</span><span class="s">&quot;vco2_clk&quot;</span><span class="p">,</span> <span class="s">&quot;pll2_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span>
			<span class="s">&quot;osc_30m_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PLL2_CTR</span><span class="p">,</span> <span class="n">PLL2_FRQ</span><span class="p">,</span> <span class="n">pll_rtbl</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">pll_rtbl</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">clk1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;vco2_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk1</span><span class="p">,</span> <span class="s">&quot;pll2_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_fixed_factor</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;wdt_clk&quot;</span><span class="p">,</span> <span class="s">&quot;osc_30m_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
			<span class="mi">1</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;wdt&quot;</span><span class="p">);</span>

	<span class="cm">/* clock derived from pll1 clk */</span>
	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_fixed_factor</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;cpu_clk&quot;</span><span class="p">,</span> <span class="s">&quot;pll1_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;cpu_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_divider</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;ahb_clk&quot;</span><span class="p">,</span> <span class="s">&quot;pll1_clk&quot;</span><span class="p">,</span>
			<span class="n">CLK_SET_RATE_PARENT</span><span class="p">,</span> <span class="n">CORE_CLK_CFG</span><span class="p">,</span> <span class="n">HCLK_RATIO_SHIFT</span><span class="p">,</span>
			<span class="n">HCLK_RATIO_MASK</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;ahb_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_aux</span><span class="p">(</span><span class="s">&quot;uart_synth_clk&quot;</span><span class="p">,</span> <span class="s">&quot;uart_synth_gate_clk&quot;</span><span class="p">,</span>
			<span class="s">&quot;pll1_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">UART_CLK_SYNT</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">aux_rtbl</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">aux_rtbl</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">clk1</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;uart_synth_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk1</span><span class="p">,</span> <span class="s">&quot;uart_synth_gate_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_mux</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;uart_mux_clk&quot;</span><span class="p">,</span> <span class="n">uart_parents</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">uart_parents</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP_CLK_CFG</span><span class="p">,</span>
			<span class="n">UART_CLK_SHIFT</span><span class="p">,</span> <span class="n">UART_CLK_MASK</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;uart_mux_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;uart0&quot;</span><span class="p">,</span> <span class="s">&quot;uart_mux_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">PERIP1_CLK_ENB</span><span class="p">,</span> <span class="n">UART0_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;d0000000.serial&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;uart1&quot;</span><span class="p">,</span> <span class="s">&quot;uart_mux_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">PERIP1_CLK_ENB</span><span class="p">,</span> <span class="n">UART1_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;d0080000.serial&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_aux</span><span class="p">(</span><span class="s">&quot;firda_synth_clk&quot;</span><span class="p">,</span> <span class="s">&quot;firda_synth_gate_clk&quot;</span><span class="p">,</span>
			<span class="s">&quot;pll1_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">FIRDA_CLK_SYNT</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">aux_rtbl</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">aux_rtbl</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">clk1</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;firda_synth_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk1</span><span class="p">,</span> <span class="s">&quot;firda_synth_gate_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_mux</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;firda_mux_clk&quot;</span><span class="p">,</span> <span class="n">firda_parents</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">firda_parents</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP_CLK_CFG</span><span class="p">,</span>
			<span class="n">FIRDA_CLK_SHIFT</span><span class="p">,</span> <span class="n">FIRDA_CLK_MASK</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;firda_mux_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;firda_clk&quot;</span><span class="p">,</span> <span class="s">&quot;firda_mux_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">PERIP1_CLK_ENB</span><span class="p">,</span> <span class="n">FIRDA_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;firda&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_aux</span><span class="p">(</span><span class="s">&quot;clcd_synth_clk&quot;</span><span class="p">,</span> <span class="s">&quot;clcd_synth_gate_clk&quot;</span><span class="p">,</span>
			<span class="s">&quot;pll1_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">CLCD_CLK_SYNT</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">aux_rtbl</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">aux_rtbl</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">clk1</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;clcd_synth_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk1</span><span class="p">,</span> <span class="s">&quot;clcd_synth_gate_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_mux</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;clcd_mux_clk&quot;</span><span class="p">,</span> <span class="n">clcd_parents</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">clcd_parents</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP_CLK_CFG</span><span class="p">,</span>
			<span class="n">CLCD_CLK_SHIFT</span><span class="p">,</span> <span class="n">CLCD_CLK_MASK</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;clcd_mux_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;clcd_clk&quot;</span><span class="p">,</span> <span class="s">&quot;clcd_mux_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">PERIP1_CLK_ENB</span><span class="p">,</span> <span class="n">CLCD_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;clcd&quot;</span><span class="p">);</span>

	<span class="cm">/* gpt clocks */</span>
	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gpt</span><span class="p">(</span><span class="s">&quot;gpt0_1_synth_clk&quot;</span><span class="p">,</span> <span class="s">&quot;pll1_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PRSC0_CLK_CFG</span><span class="p">,</span>
			<span class="n">gpt_rtbl</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">gpt_rtbl</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;gpt0_1_synth_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_mux</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gpt0_mux_clk&quot;</span><span class="p">,</span> <span class="n">gpt0_1_parents</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">gpt0_1_parents</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP_CLK_CFG</span><span class="p">,</span>
			<span class="n">GPT0_CLK_SHIFT</span><span class="p">,</span> <span class="n">GPT_CLK_MASK</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gpt0&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_mux</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gpt1_mux_clk&quot;</span><span class="p">,</span> <span class="n">gpt0_1_parents</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">gpt0_1_parents</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP_CLK_CFG</span><span class="p">,</span>
			<span class="n">GPT1_CLK_SHIFT</span><span class="p">,</span> <span class="n">GPT_CLK_MASK</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;gpt1_mux_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gpt1_clk&quot;</span><span class="p">,</span> <span class="s">&quot;gpt1_mux_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">PERIP1_CLK_ENB</span><span class="p">,</span> <span class="n">GPT1_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gpt1&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gpt</span><span class="p">(</span><span class="s">&quot;gpt2_synth_clk&quot;</span><span class="p">,</span> <span class="s">&quot;pll1_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PRSC1_CLK_CFG</span><span class="p">,</span>
			<span class="n">gpt_rtbl</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">gpt_rtbl</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;gpt2_synth_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_mux</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gpt2_mux_clk&quot;</span><span class="p">,</span> <span class="n">gpt2_parents</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">gpt2_parents</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP_CLK_CFG</span><span class="p">,</span>
			<span class="n">GPT2_CLK_SHIFT</span><span class="p">,</span> <span class="n">GPT_CLK_MASK</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;gpt2_mux_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gpt2_clk&quot;</span><span class="p">,</span> <span class="s">&quot;gpt2_mux_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">PERIP1_CLK_ENB</span><span class="p">,</span> <span class="n">GPT2_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gpt2&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gpt</span><span class="p">(</span><span class="s">&quot;gpt3_synth_clk&quot;</span><span class="p">,</span> <span class="s">&quot;pll1_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PRSC2_CLK_CFG</span><span class="p">,</span>
			<span class="n">gpt_rtbl</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">gpt_rtbl</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;gpt3_synth_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_mux</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gpt3_mux_clk&quot;</span><span class="p">,</span> <span class="n">gpt3_parents</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">gpt3_parents</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP_CLK_CFG</span><span class="p">,</span>
			<span class="n">GPT3_CLK_SHIFT</span><span class="p">,</span> <span class="n">GPT_CLK_MASK</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;gpt3_mux_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gpt3_clk&quot;</span><span class="p">,</span> <span class="s">&quot;gpt3_mux_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">PERIP1_CLK_ENB</span><span class="p">,</span> <span class="n">GPT3_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gpt3&quot;</span><span class="p">);</span>

	<span class="cm">/* clock derived from pll3 clk */</span>
	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;usbh0_clk&quot;</span><span class="p">,</span> <span class="s">&quot;pll3_48m_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">PERIP1_CLK_ENB</span><span class="p">,</span> <span class="n">USBH0_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;usbh.0_clk&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;usbh1_clk&quot;</span><span class="p">,</span> <span class="s">&quot;pll3_48m_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">PERIP1_CLK_ENB</span><span class="p">,</span> <span class="n">USBH1_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;usbh.1_clk&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;usbd_clk&quot;</span><span class="p">,</span> <span class="s">&quot;pll3_48m_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">PERIP1_CLK_ENB</span><span class="p">,</span> <span class="n">USBD_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;designware_udc&quot;</span><span class="p">);</span>

	<span class="cm">/* clock derived from ahb clk */</span>
	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_fixed_factor</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;ahbmult2_clk&quot;</span><span class="p">,</span> <span class="s">&quot;ahb_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span>
			<span class="mi">1</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;ahbmult2_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_mux</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;ddr_clk&quot;</span><span class="p">,</span> <span class="n">ddr_parents</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ddr_parents</span><span class="p">),</span>
			<span class="mi">0</span><span class="p">,</span> <span class="n">PLL_CLK_CFG</span><span class="p">,</span> <span class="n">MCTR_CLK_SHIFT</span><span class="p">,</span> <span class="n">MCTR_CLK_MASK</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;ddr_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_divider</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;apb_clk&quot;</span><span class="p">,</span> <span class="s">&quot;ahb_clk&quot;</span><span class="p">,</span>
			<span class="n">CLK_SET_RATE_PARENT</span><span class="p">,</span> <span class="n">CORE_CLK_CFG</span><span class="p">,</span> <span class="n">PCLK_RATIO_SHIFT</span><span class="p">,</span>
			<span class="n">PCLK_RATIO_MASK</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="s">&quot;apb_clk&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;dma_clk&quot;</span><span class="p">,</span> <span class="s">&quot;ahb_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP1_CLK_ENB</span><span class="p">,</span>
			<span class="n">DMA_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;fc400000.dma&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;fsmc_clk&quot;</span><span class="p">,</span> <span class="s">&quot;ahb_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP1_CLK_ENB</span><span class="p">,</span>
			<span class="n">FSMC_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;d1800000.flash&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gmac_clk&quot;</span><span class="p">,</span> <span class="s">&quot;ahb_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP1_CLK_ENB</span><span class="p">,</span>
			<span class="n">GMAC_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;e0800000.ethernet&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;i2c_clk&quot;</span><span class="p">,</span> <span class="s">&quot;ahb_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP1_CLK_ENB</span><span class="p">,</span>
			<span class="n">I2C_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;d0200000.i2c&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;jpeg_clk&quot;</span><span class="p">,</span> <span class="s">&quot;ahb_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP1_CLK_ENB</span><span class="p">,</span>
			<span class="n">JPEG_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;jpeg&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;smi_clk&quot;</span><span class="p">,</span> <span class="s">&quot;ahb_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP1_CLK_ENB</span><span class="p">,</span>
			<span class="n">SMI_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;fc000000.flash&quot;</span><span class="p">);</span>

	<span class="cm">/* clock derived from apb clk */</span>
	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;adc_clk&quot;</span><span class="p">,</span> <span class="s">&quot;apb_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP1_CLK_ENB</span><span class="p">,</span>
			<span class="n">ADC_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;adc&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_fixed_factor</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gpio0_clk&quot;</span><span class="p">,</span> <span class="s">&quot;apb_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;f0100000.gpio&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gpio1_clk&quot;</span><span class="p">,</span> <span class="s">&quot;apb_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP1_CLK_ENB</span><span class="p">,</span>
			<span class="n">GPIO1_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;fc980000.gpio&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;gpio2_clk&quot;</span><span class="p">,</span> <span class="s">&quot;apb_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP1_CLK_ENB</span><span class="p">,</span>
			<span class="n">GPIO2_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;d8100000.gpio&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;ssp0_clk&quot;</span><span class="p">,</span> <span class="s">&quot;apb_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP1_CLK_ENB</span><span class="p">,</span>
			<span class="n">SSP0_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;ssp-pl022.0&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;ssp1_clk&quot;</span><span class="p">,</span> <span class="s">&quot;apb_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP1_CLK_ENB</span><span class="p">,</span>
			<span class="n">SSP1_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;ssp-pl022.1&quot;</span><span class="p">);</span>

	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_register_gate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;ssp2_clk&quot;</span><span class="p">,</span> <span class="s">&quot;apb_clk&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PERIP1_CLK_ENB</span><span class="p">,</span>
			<span class="n">SSP2_CLK_ENB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_lock</span><span class="p">);</span>
	<span class="n">clk_register_clkdev</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;ssp-pl022.2&quot;</span><span class="p">);</span>
<span class="p">}</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
