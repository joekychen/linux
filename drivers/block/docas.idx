f | cciss.h | s | 11K | 390 | Joseph Handzik | joseph.t.handzik@beardog.cce.hp.com | 1312796415 |  | cciss: Adds simple mode functionality  Signed-off-by: Joseph Handzik <joseph.t.handzik@beardog.cce.hp.com> Acked-by: Stephen M. Cameron <scameron@beardog.cce.hp.com> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | swim3.c | s | 31K | 1138 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1323690132 |  | block/swim3: Locking fixes  The old PowerMac swim3 driver has some "interesting" locking issues, using a private lock and failing to lock the queue before completing requests, which triggered WARN_ONs among others.  This rips out the private lock, makes everything operate under the block queue lock, and generally makes things simpler.  We used to also share a queue between the two possible instances which was problematic since we might pick the wrong controller in some cases, so make the queue and the current request per-instance and use queuedata to point to our private data which is a lot cleaner.  We still share the queue lock but then, it's nearly impossible to actually use 2 swim3's simultaneously: one would need to have a Wallstreet PowerBook, the only machine afaik with two of these on the motherboard, and populate both hotswap bays with a floppy drive (the machine ships only with one), so nobody cares...  While at it, add a little fix to clear up stale interrupts when loading the driver or plugging a floppy drive in a bay.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Signed-off-by: Jens Axboe <axboe@kernel.dk>
f | Makefile | g | 1.5K |  | Linus Torvalds | torvalds@linux-foundation.org | 1326918849 |  | Merge git://git.infradead.org/users/willy/linux-nvme  * git://git.infradead.org/users/willy/linux-nvme: (105 commits)   NVMe: Set number of queues correctly   NVMe: Version 0.8   NVMe: Set queue flags correctly   NVMe: Simplify nvme_unmap_user_pages   NVMe: Mark the end of the sg list   NVMe: Fix DMA mapping for admin commands   NVMe: Rename IO_TIMEOUT to NVME_IO_TIMEOUT   NVMe: Merge the nvme_bio and nvme_prp data structures   NVMe: Change nvme_completion_fn to take a dev   NVMe: Change get_nvmeq to take a dev instead of a namespace   NVMe: Simplify completion handling   NVMe: Update Identify Controller data structure   NVMe: Implement doorbell stride capability   NVMe: Version 0.7   NVMe: Don't probe namespace 0   Fix calculation of number of pages in a PRP List   NVMe: Create nvme_identify and nvme_get_features functions   NVMe: Fix memory leak in nvme_dev_add()   NVMe: Fix calls to dma_unmap_sg   NVMe: Correct sg list setup in nvme_map_user_pages   ...
f | swim.c | s | 19K | 794 | Finn Thain | fthain@telegraphics.com.au | 1323543166 |  | m68k/mac: cleanup forward declarations  Move some forward declarations into header files and adjust includes.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
d | mtip32xx |  | 4 items |  | Asai Thambi S P | asamymuthupa@micron.com | 1338880429 |  | mtip32xx: Create debugfs entries for troubleshooting  On module load, creates a debugfs parent 'rssd' in debugfs root. Then for each device, create a new node with corresponding disk name. Under the new node, two entries 'registers' and 'flags' are created.  NOTE: These entries were removed from sysfs in the previous patch  Signed-off-by: Asai Thambi S P <asamymuthupa@micron.com> Signed-off-by: Jens Axboe <axboe@kernel.dk>
f | pktcdvd.c | s | 76K | 2667 | Cong Wang | amwang@redhat.com | 1332251296 |  | block: remove the second argument of k[un]map_atomic()  Signed-off-by: Cong Wang <amwang@redhat.com>
f | xsysace.c | s | 32K | 1063 | Michal Simek | monstr@monstr.eu | 1325748869 |  | block: xsysace: Don't use NO_IRQ  Drivers shouldn't use NO_IRQ. Microblaze and PPC define NO_IRQ as 0 and this reference will be removed in near future.  Signed-off-by: Michal Simek <monstr@monstr.eu> Reviewed-by: Ryan Mallon <rmallon@gmail.com> Acked-by: Grant Likely <grant.likely@secretlab.ca> CC: Rob Herring <rob.herring@calxeda.com>
f | ataflop.c | s | 51K | 1737 | Tejun Heo | tj@kernel.org | 1303414385 |  | block: unexport DISK_EVENT_MEDIA_CHANGE for legacy/fringe drivers  In-kernel disk event polling doesn't matter for legacy/fringe drivers and may lead to infinite event loop if ->check_events() implementation generates events on level condition instead of edge.  Now that block layer supports suppressing exporting unlisted events, simply leaving disk->events cleared allows these drivers to keep the internal revalidation behavior intact while avoiding weird interactions with userland event handler.  Signed-off-by: Tejun Heo <tj@kernel.org> Cc: Kay Sievers <kay.sievers@vrfy.org> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | xd.c | s | 34K | 976 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | cciss_scsi.h | s | 3.0K | 69 | Stephen M. Cameron | scameron@beardog.cce.hp.com | 1304691839 |  | cciss: add cciss_tape_cmds module paramter  This is to allow number of commands reserved for use by SCSI tape drives and medium changers to be adjusted at driver load time via the kernel parameter cciss_tape_cmds, with a default value of 6, and a range of 2 - 16 inclusive.  Previously, the driver limited the number of commands which could be queued to the SCSI half of the the driver to only 2.  This is to fix the problem that if you had more than two tape drives, you couldn't, for example, erase or rewind them all at the same time.  Signed-off-by: Stephen M. Cameron <scameron@beardog.cce.hp.com> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | xd.h | s | 5.7K | 116 | Al Viro | viro@zeniv.linux.org.uk | 1224589691 |  | [PATCH] switch xd  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | DAC960.h | s | 148K | 3888 | Matthew Wilcox | matthew@wil.cx | 1189556479 |  | Fix DAC960 driver on machines which don't support 64-bit DMA  Addresses http://bugzilla.kernel.org/show_bug.cgi?id=8942  Use PCI_DMA_* constants instead of own private definitions Fall back to 32-bit DMA mask if a 64-bit one fails  Signed-off-by: Matthew Wilcox <matthew@wil.cx> Acked-by: Jeff Garzik <jeff@garzik.org> Tested-by: Lars <polynomial-c@gmx.de> Cc: Alessandro Polverini <alex@nibbles.it> Cc: <dac@conglom-o.org> Cc: <stable@kernel.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | virtio_blk.c | s | 17K | 593 | Asias He | asias@redhat.com | 1337654774 |  | virtio_blk: Drop unused request tracking list  Benchmark shows small performance improvement on fusion io device.  Before:   seq-read : io=1,024MB, bw=19,982KB/s, iops=39,964, runt= 52475msec   seq-write: io=1,024MB, bw=20,321KB/s, iops=40,641, runt= 51601msec   rnd-read : io=1,024MB, bw=15,404KB/s, iops=30,808, runt= 68070msec   rnd-write: io=1,024MB, bw=14,776KB/s, iops=29,552, runt= 70963msec  After:   seq-read : io=1,024MB, bw=20,343KB/s, iops=40,685, runt= 51546msec   seq-write: io=1,024MB, bw=20,803KB/s, iops=41,606, runt= 50404msec   rnd-read : io=1,024MB, bw=16,221KB/s, iops=32,442, runt= 64642msec   rnd-write: io=1,024MB, bw=15,199KB/s, iops=30,397, runt= 68991msec  Signed-off-by: Asias He <asias@redhat.com> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
d | paride |  | 28 items |  | Rusty Russell | rusty@rustcorp.com.au | 1326409346 |  | paride/pcd: fix bool verbose module parameter.  Dan Carpenter points out that it's an int, not a bool:  pcd.c:427:				if (verbose > 1) pcd.c:433:				if (verbose > 1) pcd.c:437:				if (verbose < 2) pcd.c:506:#define DBMSG(msg)	((verbose>1)?(msg):NULL)  Signed-off-by: Rusty Russell <rusty@rustcorp.com.au> Cc: Dan Carpenter <dan.carpenter@oracle.com>
f | loop.c | s | 46K | 1650 | Cong Wang | amwang@redhat.com | 1332251296 |  | block: remove the second argument of k[un]map_atomic()  Signed-off-by: Cong Wang <amwang@redhat.com>
f | ida_ioctl.h | s | 2.6K | 79 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
d | drbd |  | 15 items |  | Jens Axboe | axboe@kernel.dk | 1339615182 |  | Merge branch 'for-jens' of git://git.drbd.org/linux-drbd into for-linus
d | aoe |  | 8 items |  | Al Viro | viro@zeniv.linux.org.uk | 1325649295 |  | switch device_get_devnode() and ->devnode() to umode_t *  both callers of device_get_devnode() are only interested in lower 16bits and nobody tries to return anything wider than 16bit anyway.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | cciss_cmd.h | s | 7.3K | 231 | Stephen M. Cameron | scameron@beardog.cce.hp.com | 1304691835 |  | cciss: use new doorbell-bit-5 reset method  The bit-2-doorbell reset method seemed to cause (survivable) NMIs on some systems and (unsurvivable) IOCK NMIs on some G7 servers. Firmware guys implemented a new doorbell method to alleviate these problems triggered by bit 5 of the doorbell register.  We want to use it if it's available.  Signed-off-by: Stephen M. Cameron <scameron@beardog.cce.hp.com> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | umem.c | s | 30K | 971 | Tao Guo | glorioustao@gmail.com | 1339615041 |  | umem: fix up unplugging  Fix a regression introduced by 7eaceaccab5f40 ("block: remove per-queue plugging").  In that patch, Jens removed the whole mm_unplug_device() function, which used to be the trigger to make umem start to work.  We need to implement unplugging to make umem start to work, or I/O will never be triggered.  Signed-off-by: Tao Guo <Tao.Guo@emc.com> Cc: Neil Brown <neilb@suse.de> Cc: Jens Axboe <axboe@kernel.dk> Cc: Shaohua Li <shli@kernel.org> Cc: <stable@vger.kernel.org> Acked-by: NeilBrown <neilb@suse.de> Signed-off-by: Jens Axboe <axboe@kernel.dk>
d | xen-blkback |  | 4 items |  | Jens Axboe | axboe@kernel.dk | 1339615146 |  | Merge branch 'stable/for-jens-3.5' of git://git.kernel.org/pub/scm/linux/kernel/git/konrad/xen into for-linus
f | nvme.c | s | 42K | 1490 | Linus Torvalds | torvalds@linux-foundation.org | 1332303170 |  | Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/trivial  Pull trivial tree from Jiri Kosina:  "It's indeed trivial -- mostly documentation updates and a bunch of   typo fixes from Masanari.    There are also several linux/version.h include removals from Jesper."  * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/trivial: (101 commits)   kcore: fix spelling in read_kcore() comment   constify struct pci_dev * in obvious cases   Revert "char: Fix typo in viotape.c"   init: fix wording error in mm_init comment   usb: gadget: Kconfig: fix typo for 'different'   Revert "power, max8998: Include linux/module.h just once in drivers/power/max8998_charger.c"   writeback: fix fn name in writeback_inodes_sb_nr_if_idle() comment header   writeback: fix typo in the writeback_control comment   Documentation: Fix multiple typo in Documentation   tpm_tis: fix tis_lock with respect to RCU   Revert "media: Fix typo in mixer_drv.c and hdmi_drv.c"   Doc: Update numastat.txt   qla4xxx: Add missing spaces to error messages   compiler.h: Fix typo   security: struct security_operations kerneldoc fix   Documentation: broken URL in libata.tmpl   Documentation: broken URL in filesystems.tmpl   mtd: simplify return logic in do_map_probe()   mm: fix comment typo of truncate_inode_pages_range   power: bq27x00: Fix typos in comment   ...
f | nbd.c | s | 20K | 740 | Linus Torvalds | torvalds@linux-foundation.org | 1332980368 |  | Merge branch 'akpm' (Andrew's patch-bomb)  Merge third batch of patches from Andrew Morton:  - Some MM stragglers  - core SMP library cleanups (on_each_cpu_mask)  - Some IPI optimisations  - kexec  - kdump  - IPMI  - the radix-tree iterator work  - various other misc bits.   "That'll do for -rc1.  I still have ~10 patches for 3.4, will send   those along when they've baked a little more."  * emailed from Andrew Morton <akpm@linux-foundation.org>: (35 commits)   backlight: fix typo in tosa_lcd.c   crc32: add help text for the algorithm select option   mm: move hugepage test examples to tools/testing/selftests/vm   mm: move slabinfo.c to tools/vm   mm: move page-types.c from Documentation to tools/vm   selftests/Makefile: make `run_tests' depend on `all'   selftests: launch individual selftests from the main Makefile   radix-tree: use iterators in find_get_pages* functions   radix-tree: rewrite gang lookup using iterator   radix-tree: introduce bit-optimized iterator   fs/proc/namespaces.c: prevent crash when ns_entries[] is empty   nbd: rename the nbd_device variable from lo to nbd   pidns: add reboot_pid_ns() to handle the reboot syscall   sysctl: use bitmap library functions   ipmi: use locks on watchdog timeout set on reboot   ipmi: simplify locking   ipmi: fix message handling during panics   ipmi: use a tasklet for handling received messages   ipmi: increase KCS timeouts   ipmi: decrease the IPMI message transaction time in interrupt mode   ...
f | sunvdc.c | s | 19K | 704 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1332894804 |  | powerpc+sparc/vio: Modernize driver registration  This makes vio_register_driver() get the module owner & name at compile time like PCI drivers do, and adds a name pointer directly in struct vio_driver to avoid having to explicitly initialize the embedded struct device.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Acked-by: David S. Miller <davem@davemloft.net>
f | cpqarray.c | s | 47K | 1602 | Sergei Shtylyov | sshtylyov@ru.mvista.com | 1316592133 |  | drivers/block/cpqarray.c: use pci_dev->revision  This driver uses PCI_CLASS_REVISION instead of PCI_REVISION_ID, so it wasn't converted by commit 44c10138fd4bbc4b6 ("PCI: Change all drivers to use pci_device->revision").  Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com> Acked-by: Mike Miller <mike.miller@hp.com> Cc: Chirag Kantharia <chirag.kantharia@hp.com> Cc: Jens Axboe <axboe@kernel.dk> Signed-off-by: Andrew Morton <akpm@google.com> Signed-off-by: Jens Axboe <axboe@kernel.dk>
f | hd.c | s | 18K | 712 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | cryptoloop.c | s | 4.9K | 175 | Matthew Wilcox | matthew@wil.cx | 1208571392 |  | drivers: Remove unnecessary inclusions of asm/semaphore.h  None of these files use any of the functionality promised by asm/semaphore.h.  It's possible that they rely on it dragging in some unrelated header file, but I can't build all these files, so we'll have fix any build failures as they come up.  Signed-off-by: Matthew Wilcox <willy@linux.intel.com>
f | ida_cmd.h | s | 6.8K | 317 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | xen-blkfront.c | s | 38K | 1284 | Konrad Rzeszutek Wilk | konrad.wilk@oracle.com | 1339504144 |  | xen/blkfront: Add WARN to deal with misbehaving backends.  Part of the ring structure is the 'id' field which is under control of the frontend. The frontend stamps it with "some" value (this some in this implementation being a value less than BLK_RING_SIZE), and when it gets a response expects said value to be in the response structure. We have a check for the id field when spolling new requests but not when de-spolling responses.  We also add an extra check in add_id_to_freelist to make sure that the 'struct request' was not NULL - as we cannot pass a NULL to __blk_end_request_all, otherwise that crashes (and all the operations that the response is dealing with end up with __blk_end_request_all).  Lastly we also print the name of the operation that failed.  [v1: s/BUG/WARN/ suggested by Stefano] [v2: Add extra check in add_id_to_freelist] [v3: Redid op_name per Jan's suggestion] [v4: add const * and add WARN on failure returns] Acked-by: Jan Beulich <jbeulich@suse.com> Acked-by: Stefano Stabellini <stefano.stabellini@eu.citrix.com> Signed-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>
f | sx8.c | s | 39K | 1452 | Dan Carpenter | dan.carpenter@oracle.com | 1330800279 |  | block, sx8: fix pointer math issue getting fw version  "mem" is type u8.  We need parenthesis here or it screws up the pointer math probably leading to an oops.  Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com> Cc: stable@kernel.org Acked-by: Jeff Garzik <jgarzik@redhat.com> Signed-off-by: Jens Axboe <axboe@kernel.dk>
f | cpqarray.h | s | 3.0K | 104 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | swim_asm.S | g | 4.6K |  | Laurent Vivier | laurent@lvivier.info | 1238098527 |  | m68k: mac - Add SWIM floppy support  It allows to read data from a floppy, but not to write to, and to eject the floppy (useful on our Mac without eject button).  Signed-off-by: Laurent Vivier <Laurent@lvivier.info> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | floppy.c | s | 116K | 4017 | Linus Torvalds | torvalds@linux-foundation.org | 1341355882 |  | floppy: cancel any pending fd_timeouts before adding a new one  In commit 070ad7e793dc ("floppy: convert to delayed work and single-thread wq") the 'fd_timeout' timer was converted to a delayed work.  However, the "del_timer(&fd_timeout)" was lost in the process, and any previous pending timeouts would stay active when we then re-queued the timeout.  This resulted in the floppy probe sequence having a (stale) 20s timeout rather than the intended 3s timeout, and thus made booting with the floppy driver (but no actual floppy controller) take much longer than it should.  Of course, there's little reason for most people to compile the floppy driver into the kernel at all, which is why most people never noticed.  Canceling the delayed work where we used to do the del_timer() fixes the issue, and makes the floppy probing use the proper new timeout instead. The three second timeout is still very wasteful, but better than the 20s one.  Reported-and-tested-by: Andi Kleen <ak@linux.intel.com> Reported-and-tested-by: Calvin Walton <calvin.walton@kepstin.ca> Cc: Jiri Kosina <jkosina@suse.cz> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ub.c | s | 61K | 2097 | Sebastian Andrzej Siewior | sebastian@breakpoint.cc | 1331929810 |  | usb/ub: deprecate & schedule for removal the "Low Performance USB Block" driver  Deprecate this driver. All devices which can be handled by this driver can also be handled by the usb-storage driver.  Acked-By: Pete Zaitcev <zaitcev@redhat.com> Cc: Jens Axboe <jaxboe@fusionio.com> Signed-off-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | z2ram.c | s | 9.2K | 347 | Geert Uytterhoeven | geert@linux-m68k.org | 1288268126 |  | drivers/block/z2ram.c: correct printing of sector_t  If CONFIG_LBDAF=y, `sector_t' becomes `u64' instead of `unsigned long':  drivers/block/z2ram.c: In function ¡do_z2_request¢: drivers/block/z2ram.c:83: warning: format %lu expects type `long unsigned int', but argument 2 has type `sector_t'  Hence always cast it to `unsigned long long' for printing.  Also do the pr_err() dance, while we're at it.  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | osdblk.c | s | 15K | 541 | Tejun Heo | tj@kernel.org | 1284114936 |  | block: remove spurious uses of REQ_HARDBARRIER  REQ_HARDBARRIER is deprecated.  Remove spurious uses in the following users.  Please note that other than osdblk, all other uses were already spurious before deprecation.  * osdblk: osdblk_rq_fn() won't receive any request with   REQ_HARDBARRIER set.  Remove the test for it.  * pktcdvd: use of REQ_HARDBARRIER in pkt_generic_packet() doesn't mean   anything.  Removed.  * aic7xxx_old: Setting MSG_ORDERED_Q_TAG on REQ_HARDBARRIER is   spurious.  Removed.  * sas_scsi_host: Setting TASK_ATTR_ORDERED on REQ_HARDBARRIER is   spurious.  Removed.  * scsi_tcq: The ordered tag path wasn't being used anyway.  Removed.  Signed-off-by: Tejun Heo <tj@kernel.org> Acked-by: Boaz Harrosh <bharrosh@panasas.com> Cc: James Bottomley <James.Bottomley@suse.de> Cc: Peter Osterlund <petero2@telia.com> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | cciss_scsi.c | s | 48K | 1526 | Stephen M. Cameron | scameron@beardog.cce.hp.com | 1332448809 |  | cciss: Fix scsi tape io with more than 255 scatter gather elements  The total number of scatter gather elements in the CISS command used by the scsi tape code was being cast to a u8, which can hold at most 255 scatter gather elements.  It should have been cast to a u16.  Without this patch the command gets rejected by the controller since the total scatter gather count did not add up to the right value resulting in an i/o error.  Signed-off-by: Stephen M. Cameron <scameron@beardog.cce.hp.com> Cc: stable@vger.kernel.org Signed-off-by: Jens Axboe <axboe@kernel.dk>
f | mg_disk.c | s | 25K | 925 | Jens Axboe | jaxboe@fusionio.com | 1282564964 |  | block: switch s390 tape_block and mg_disk to elevator_change()  Now that we have this API, switch the two in-kernel users to it. Resolves an oops introduced by commit 1abec4fdbb142e3ccb6ce99832fae42129134a96.  Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | rbd_types.h | s | 1.5K | 57 | Alex Elder | elder@dreamhost.com | 1332431270 |  | rbd: small changes  Here is another set of small code tidy-ups:     - Define SECTOR_SHIFT and SECTOR_SIZE, and use these symbolic       names throughout.  Tell the blk_queue system our physical       block size, in the (unlikely) event we want to use something       other than the default.     - Delete the definition of struct rbd_info, which is never used.     - Move the definition of dev_to_rbd() down in its source file,       just above where it gets first used, and change its name to       dev_to_rbd_dev().     - Replace an open-coded operation in rbd_dev_release() to use       dev_to_rbd_dev() instead.     - Calculate the segment size for a given rbd_device just once in       rbd_init_disk().     - Use the '%zd' conversion specifier in rbd_snap_size_show(),       since the value formatted is a size_t.     - Switch to the '%llu' conversion specifier in rbd_snap_id_show().       since the value formatted is unsigned.  Signed-off-by: Alex Elder <elder@dreamhost.com>
f | umem.h | s | 3.6K | 111 | Jeff Garzik | jeff@garzik.org | 1192001159 |  | drivers/block/umem: trim trailing whitespace  Signed-off-by: Jeff Garzik <jeff@garzik.org>
f | Kconfig | g | 19K |  | Sebastian Andrzej Siewior | sebastian@breakpoint.cc | 1331929810 |  | usb/ub: deprecate & schedule for removal the "Low Performance USB Block" driver  Deprecate this driver. All devices which can be handled by this driver can also be handled by the usb-storage driver.  Acked-By: Pete Zaitcev <zaitcev@redhat.com> Cc: Jens Axboe <jaxboe@fusionio.com> Signed-off-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | brd.c | s | 15K | 557 | Cong Wang | amwang@redhat.com | 1332251296 |  | block: remove the second argument of k[un]map_atomic()  Signed-off-by: Cong Wang <amwang@redhat.com>
f | ps3vram.c | s | 22K | 710 | Linus Torvalds | torvalds@linux-foundation.org | 1320637487 |  | Merge branch 'modsplit-Oct31_2011' of git://git.kernel.org/pub/scm/linux/kernel/git/paulg/linux  * 'modsplit-Oct31_2011' of git://git.kernel.org/pub/scm/linux/kernel/git/paulg/linux: (230 commits)   Revert "tracing: Include module.h in define_trace.h"   irq: don't put module.h into irq.h for tracking irqgen modules.   bluetooth: macroize two small inlines to avoid module.h   ip_vs.h: fix implicit use of module_get/module_put from module.h   nf_conntrack.h: fix up fallout from implicit moduleparam.h presence   include: replace linux/module.h with "struct module" wherever possible   include: convert various register fcns to macros to avoid include chaining   crypto.h: remove unused crypto_tfm_alg_modname() inline   uwb.h: fix implicit use of asm/page.h for PAGE_SIZE   pm_runtime.h: explicitly requires notifier.h   linux/dmaengine.h: fix implicit use of bitmap.h and asm/page.h   miscdevice.h: fix up implicit use of lists and types   stop_machine.h: fix implicit use of smp.h for smp_processor_id   of: fix implicit use of errno.h in include/linux/of.h   of_platform.h: delete needless include <linux/module.h>   acpi: remove module.h include from platform/aclinux.h   miscdevice.h: delete unnecessary inclusion of module.h   device_cgroup.h: delete needless include <linux/module.h>   net: sch_generic remove redundant use of <linux/module.h>   net: inet_timewait_sock doesnt need <linux/module.h>   ...  Fix up trivial conflicts (other header files, and  removal of the ab3550 mfd driver) in  - drivers/media/dvb/frontends/dibx000_common.c  - drivers/media/video/{mt9m111.c,ov6650.c}  - drivers/mfd/ab3550-core.c  - include/linux/dmaengine.h
f | amiflop.c | s | 46K | 1640 | Al Viro | viro@zeniv.linux.org.uk | 1325649247 |  | fs: move code out of buffer.c  Move invalidate_bdev, block_sync_page into fs/block_dev.c.  Export kill_bdev as well, so brd doesn't have to open code it.  Reduce buffer_head.h requirement accordingly.  Removed a rather large comment from invalidate_bdev, as it looked a bit obsolete to bother moving.  The small comment replacing it says enough.  Signed-off-by: Nick Piggin <npiggin@suse.de> Cc: Al Viro <viro@ZenIV.linux.org.uk> Cc: Christoph Hellwig <hch@lst.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | rbd.c | s | 58K | 2165 | Josh Durgin | josh.durgin@dreamhost.com | 1337015589 |  | rbd: rename __rbd_update_snaps to __rbd_refresh_header  This function rereads the entire header and handles any changes in it, not just changes in snapshots.  Signed-off-by: Josh Durgin <josh.durgin@dreamhost.com> Reviewed-by: Alex Elder <elder@dreamhost.com> Reviewed-by: Yehuda Sadeh <yehuda@hq.newdream.net>
f | cciss.c | s | 148K | 4763 | Paolo Bonzini | pbonzini@redhat.com | 1326582444 |  | block: add and use scsi_blk_cmd_ioctl  Introduce a wrapper around scsi_cmd_ioctl that takes a block device.  The function will then be enhanced to detect partition block devices and, in that case, subject the ioctls to whitelisting.  Cc: linux-scsi@vger.kernel.org Cc: Jens Axboe <axboe@kernel.dk> Cc: James Bottomley <JBottomley@parallels.com> Signed-off-by: Paolo Bonzini <pbonzini@redhat.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ps3disk.c | s | 13K | 487 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103873 |  | block: Fix files that are modules and hence need module.h  We want to remove the implicit everywhere presence of module.h so fix up the people relying on that implicit presence in advance.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | smart1,2.h | s | 7.1K | 239 | Justin P. Mattock | justinmattock@gmail.com | 1296642681 |  | fix typos 'comamnd' -> 'command' in comments  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com>
f | DAC960.c | s | 259K | 6715 | Jesper Juhl | jj@chaosbits.net | 1336747334 |  | dac960: Remove unused variables from DAC960_CreateProcEntries()  The variables 'StatusProcEntry' and 'UserCommandProcEntry' are assigned to once and then never used. This patch gets rid of the variables.  While I was there I also fixed the indentation of the function to use tabs rather than spaces for the lines that did not already do so.  Signed-off-by: Jesper Juhl <jj@chaosbits.net> Signed-off-by: Jens Axboe <axboe@kernel.dk>
