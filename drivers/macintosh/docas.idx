f | therm_adt746x.c | s | 16K | 524 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764238 |  | powerpc/pmac: Convert therm_adt746x to new i2c probing  This simplifies the driver to stop using the deprecated attach interface,  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | via-pmu.c | s | 61K | 2262 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | via-pmu68k.c | s | 19K | 728 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | apm_emu.c | s | 3.1K | 104 | Johannes Berg | johannes@sipsolutions.net | 1178088139 |  | [POWERPC] apm_emu: Use generic apm-emulation  This patch removes a huge amount of code that is now in common code in drivers/char/apm-emulation.c  Signed-off-by: Johannes Berg <johannes@sipsolutions.net> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | windfarm_max6690_sensor.c | s | 3.3K | 121 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764244 |  | powerpc/windfarm: Updates to lm75 and max6690 sensors  This allows those modules to load on PowerMac7,2 PowerMac7,3 and RackMac3,1 and add the sensor name conversion for those machines.  This will be used by the corresponding new windfarm modules for those machines.  Note that since therm_pm72 is linked first, it will still take priority on those i2c devices if built-in. If using modules it will depend which is loaded first, but you should avoid building therm_pm72 if you are using the new windfarm drivers  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | windfarm_fcu_controls.c | s | 14K | 525 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764245 |  | powerpc/powermac: New windfarm driver for PowerMac G5 (AGP) and Xserve G5  This replaces the old therm_pm72 using the same windfarm infrastructure that was used for other PowerMac G5 models. The fan speeds and sensors should now be visible in the same location in sysfs.  The driver is split into separate core modules for PowerMac7,2 (and 7,3) and RackMac3,1, with a lot of the shared code now in the separate sensor and control modules.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
d | ams |  | 6 items |  | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764237 |  | i2c/powermac: Register i2c devices from device-tree  This causes i2c-powermac to register i2c devices exposed in the device-tree, enabling new-style probing of devices.  Note that we prefix the IDs with "MAC," in order to prevent the generic drivers from matching. This is done on purpose as we only want drivers specifically tested/designed to operate on powermacs to match.  This removes the special case we had for the AMS driver, and updates the driver's match table instead.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | Makefile | g | 2.3K |  | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764245 |  | powerpc/powermac: New windfarm driver for PowerMac G5 (AGP) and Xserve G5  This replaces the old therm_pm72 using the same windfarm infrastructure that was used for other PowerMac G5 models. The fan speeds and sensors should now be visible in the same location in sysfs.  The driver is split into separate core modules for PowerMac7,2 (and 7,3) and RackMac3,1, with a lot of the shared code now in the separate sensor and control modules.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | windfarm_smu_sat.c | s | 8.4K | 329 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1336525101 |  | powerpc/windfarm: Fix crash on SMU based machine after i2c conversion  We no longer get the device node in platform_data but instead where it belongs in struct device, so get it from there instead of blowing up.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | windfarm_pm91.c | s | 18K | 613 | Stephen Rothwell | sfr@canb.auug.org.au | 1336028093 |  | powerpc/windfarm: fix compiler warning  Fixes this warning:  drivers/macintosh/windfarm_pm91.c: In function 'wf_smu_cpu_fans_tick': drivers/macintosh/windfarm_pm91.c:237:2: warning: passing argument 1 of 'wf_sensor_get' from incompatible pointer type drivers/macintosh/windfarm.h:124:19: note: expected 'struct wf_sensor *' but argument is of type 'struct wf_sensor **'  Introduced by commit 33e6820b767a ("powerpc/windfarm: Add useful accessors").  Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | via-macii.c | s | 14K | 461 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | via-pmu-event.c | s | 2.1K | 67 | Johannes Berg | johannes@sipsolutions.net | 1151300995 |  | Input: via-pmu - add input device support  Add an input device for the button and lid switch so that userspace gets notified about the user pressing them via the standard input layer.  Signed-off-by: Johannes Berg <johannes@sipsolutions.net> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
f | windfarm_core.c | s | 11K | 424 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764245 |  | powerpc/powermac: New windfarm driver for PowerMac G5 (AGP) and Xserve G5  This replaces the old therm_pm72 using the same windfarm infrastructure that was used for other PowerMac G5 models. The fan speeds and sensors should now be visible in the same location in sysfs.  The driver is split into separate core modules for PowerMac7,2 (and 7,3) and RackMac3,1, with a lot of the shared code now in the separate sensor and control modules.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | macio_sysfs.c | s | 1.5K | 59 | Grant Likely | grant.likely@secretlab.ca | 1281108350 |  | of/device: Replace struct of_device with struct platform_device  of_device is just an alias for platform_device, so remove it entirely.  Also replace to_of_device() with to_platform_device() and update comment blocks.  This patch was initially generated from the following semantic patch, and then edited by hand to pick up the bits that coccinelle didn't catch.  @@ @@ -struct of_device +struct platform_device  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Reviewed-by: David S. Miller <davem@davemloft.net>
f | windfarm_pm112.c | s | 18K | 621 | Grant Likely | grant.likely@secretlab.ca | 1265729580 |  | of: add 'of_' prefix to machine_is_compatible()  machine is compatible is an OF-specific call.  It should have the of_ prefix to protect the global namespace.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Acked-by: Michal Simek <monstr@monstr.eu>
f | adb-iop.c | s | 6.2K | 237 | Geert Uytterhoeven | geert@linux-m68k.org | 1289577330 |  | drivers/macintosh/adb-iop.c: flags should be unsigned long  Fix these warnings:    drivers/macintosh/adb-iop.c: In function `adb_iop_complete':   drivers/macintosh/adb-iop.c:85: warning: comparison of distinct pointer types lacks a cast   drivers/macintosh/adb-iop.c:92: warning: comparison of distinct pointer types lacks a cast   drivers/macintosh/adb-iop.c: In function ¡adb_iop_listen¢:   drivers/macintosh/adb-iop.c:111: warning: comparison of distinct pointer types lacks a cast   drivers/macintosh/adb-iop.c:151: warning: comparison of distinct pointer types lacks a cast  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | therm_pm72.c | s | 62K | 1965 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | nvram.c | s | 2.5K | 112 | Josef Bacik | josef@redhat.com | 1311209278 |  | drivers: fix up various ->llseek() implementations  Fix up a few ->llseek() implementations that won't deal with SEEK_HOLE/SEEK_DATA properly.  Make them future proof so that if we ever add new options they will return -EINVAL.  Thanks,  Signed-off-by: Josef Bacik <josef@redhat.com> Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | windfarm_smu_sensors.c | s | 11K | 403 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | windfarm_pm72.c | s | 20K | 714 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764245 |  | powerpc/powermac: New windfarm driver for PowerMac G5 (AGP) and Xserve G5  This replaces the old therm_pm72 using the same windfarm infrastructure that was used for other PowerMac G5 models. The fan speeds and sensors should now be visible in the same location in sysfs.  The driver is split into separate core modules for PowerMac7,2 (and 7,3) and RackMac3,1, with a lot of the shared code now in the separate sensor and control modules.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | windfarm_lm75_sensor.c | s | 4.2K | 156 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764244 |  | powerpc/windfarm: Updates to lm75 and max6690 sensors  This allows those modules to load on PowerMac7,2 PowerMac7,3 and RackMac3,1 and add the sensor name conversion for those machines.  This will be used by the corresponding new windfarm modules for those machines.  Note that since therm_pm72 is linked first, it will still take priority on those i2c devices if built-in. If using modules it will depend which is loaded first, but you should avoid building therm_pm72 if you are using the new windfarm drivers  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | windfarm_smu_controls.c | s | 8.0K | 275 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764240 |  | powerpc/windfarm: Remove spurrious sysfs_attr_init()  The windfarm core will do it, so this is a duplicate.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | windfarm_cpufreq_clamp.c | s | 2.1K | 85 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764245 |  | powerpc/powermac: New windfarm driver for PowerMac G5 (AGP) and Xserve G5  This replaces the old therm_pm72 using the same windfarm infrastructure that was used for other PowerMac G5 models. The fan speeds and sensors should now be visible in the same location in sysfs.  The driver is split into separate core modules for PowerMac7,2 (and 7,3) and RackMac3,1, with a lot of the shared code now in the separate sensor and control modules.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | windfarm_mpu.h | s | 3.7K | 98 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764245 |  | powerpc/powermac: New windfarm driver for PowerMac G5 (AGP) and Xserve G5  This replaces the old therm_pm72 using the same windfarm infrastructure that was used for other PowerMac G5 models. The fan speeds and sensors should now be visible in the same location in sysfs.  The driver is split into separate core modules for PowerMac7,2 (and 7,3) and RackMac3,1, with a lot of the shared code now in the separate sensor and control modules.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | windfarm.h | s | 4.3K | 134 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764245 |  | powerpc/powermac: New windfarm driver for PowerMac G5 (AGP) and Xserve G5  This replaces the old therm_pm72 using the same windfarm infrastructure that was used for other PowerMac G5 models. The fan speeds and sensors should now be visible in the same location in sysfs.  The driver is split into separate core modules for PowerMac7,2 (and 7,3) and RackMac3,1, with a lot of the shared code now in the separate sensor and control modules.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | ans-lcd.c | s | 4.0K | 173 | Arnd Bergmann | arnd@arndb.de | 1287150807 |  | llseek: automatically add .llseek fop  All file_operations should get a .llseek operation so we can make nonseekable_open the default for future file operations without a .llseek pointer.  The three cases that we can automatically detect are no_llseek, seq_lseek and default_llseek. For cases where we can we can automatically prove that the file offset is always ignored, we use noop_llseek, which maintains the current behavior of not returning an error from a seek.  New drivers should normally not use noop_llseek but instead use no_llseek and call nonseekable_open at open time.  Existing drivers can be converted to do the same when the maintainer knows for certain that no user code relies on calling seek on the device file.  The generated code is often incorrectly indented and right now contains comments that clarify for each added line why a specific variant was chosen. In the version that gets submitted upstream, the comments will be gone and I will manually fix the indentation, because there does not seem to be a way to do that using coccinelle.  Some amount of new code is currently sitting in linux-next that should get the same modifications, which I will do at the end of the merge window.  Many thanks to Julia Lawall for helping me learn to write a semantic patch that does all this.  ===== begin semantic patch ===== // This adds an llseek= method to all file operations, // as a preparation for making no_llseek the default. // // The rules are // - use no_llseek explicitly if we do nonseekable_open // - use seq_lseek for sequential files // - use default_llseek if we know we access f_pos // - use noop_llseek if we know we don't access f_pos, //   but we still want to allow users to call lseek // @ open1 exists @ identifier nested_open; @@ nested_open(...) { <+... nonseekable_open(...) ...+> }  @ open exists@ identifier open_f; identifier i, f; identifier open1.nested_open; @@ int open_f(struct inode *i, struct file *f) { <+... ( nonseekable_open(...) || nested_open(...) ) ...+> }  @ read disable optional_qualifier exists @ identifier read_f; identifier f, p, s, off; type ssize_t, size_t, loff_t; expression E; identifier func; @@ ssize_t read_f(struct file *f, char *p, size_t s, loff_t *off) { <+... (    *off = E ||    *off += E ||    func(..., off, ...) ||    E = *off ) ...+> }  @ read_no_fpos disable optional_qualifier exists @ identifier read_f; identifier f, p, s, off; type ssize_t, size_t, loff_t; @@ ssize_t read_f(struct file *f, char *p, size_t s, loff_t *off) { ... when != off }  @ write @ identifier write_f; identifier f, p, s, off; type ssize_t, size_t, loff_t; expression E; identifier func; @@ ssize_t write_f(struct file *f, const char *p, size_t s, loff_t *off) { <+... (   *off = E ||   *off += E ||   func(..., off, ...) ||   E = *off ) ...+> }  @ write_no_fpos @ identifier write_f; identifier f, p, s, off; type ssize_t, size_t, loff_t; @@ ssize_t write_f(struct file *f, const char *p, size_t s, loff_t *off) { ... when != off }  @ fops0 @ identifier fops; @@ struct file_operations fops = {  ... };  @ has_llseek depends on fops0 @ identifier fops0.fops; identifier llseek_f; @@ struct file_operations fops = { ...  .llseek = llseek_f, ... };  @ has_read depends on fops0 @ identifier fops0.fops; identifier read_f; @@ struct file_operations fops = { ...  .read = read_f, ... };  @ has_write depends on fops0 @ identifier fops0.fops; identifier write_f; @@ struct file_operations fops = { ...  .write = write_f, ... };  @ has_open depends on fops0 @ identifier fops0.fops; identifier open_f; @@ struct file_operations fops = { ...  .open = open_f, ... };  // use no_llseek if we call nonseekable_open //////////////////////////////////////////// @ nonseekable1 depends on !has_llseek && has_open @ identifier fops0.fops; identifier nso ~= "nonseekable_open"; @@ struct file_operations fops = { ...  .open = nso, ... +.llseek = no_llseek, /* nonseekable */ };  @ nonseekable2 depends on !has_llseek @ identifier fops0.fops; identifier open.open_f; @@ struct file_operations fops = { ...  .open = open_f, ... +.llseek = no_llseek, /* open uses nonseekable */ };  // use seq_lseek for sequential files ///////////////////////////////////// @ seq depends on !has_llseek @ identifier fops0.fops; identifier sr ~= "seq_read"; @@ struct file_operations fops = { ...  .read = sr, ... +.llseek = seq_lseek, /* we have seq_read */ };  // use default_llseek if there is a readdir /////////////////////////////////////////// @ fops1 depends on !has_llseek && !nonseekable1 && !nonseekable2 && !seq @ identifier fops0.fops; identifier readdir_e; @@ // any other fop is used that changes pos struct file_operations fops = { ... .readdir = readdir_e, ... +.llseek = default_llseek, /* readdir is present */ };  // use default_llseek if at least one of read/write touches f_pos ///////////////////////////////////////////////////////////////// @ fops2 depends on !fops1 && !has_llseek && !nonseekable1 && !nonseekable2 && !seq @ identifier fops0.fops; identifier read.read_f; @@ // read fops use offset struct file_operations fops = { ... .read = read_f, ... +.llseek = default_llseek, /* read accesses f_pos */ };  @ fops3 depends on !fops1 && !fops2 && !has_llseek && !nonseekable1 && !nonseekable2 && !seq @ identifier fops0.fops; identifier write.write_f; @@ // write fops use offset struct file_operations fops = { ... .write = write_f, ... +	.llseek = default_llseek, /* write accesses f_pos */ };  // Use noop_llseek if neither read nor write accesses f_pos ///////////////////////////////////////////////////////////  @ fops4 depends on !fops1 && !fops2 && !fops3 && !has_llseek && !nonseekable1 && !nonseekable2 && !seq @ identifier fops0.fops; identifier read_no_fpos.read_f; identifier write_no_fpos.write_f; @@ // write fops use offset struct file_operations fops = { ...  .write = write_f,  .read = read_f, ... +.llseek = noop_llseek, /* read and write both use no f_pos */ };  @ depends on has_write && !has_read && !fops1 && !fops2 && !has_llseek && !nonseekable1 && !nonseekable2 && !seq @ identifier fops0.fops; identifier write_no_fpos.write_f; @@ struct file_operations fops = { ... .write = write_f, ... +.llseek = noop_llseek, /* write uses no f_pos */ };  @ depends on has_read && !has_write && !fops1 && !fops2 && !has_llseek && !nonseekable1 && !nonseekable2 && !seq @ identifier fops0.fops; identifier read_no_fpos.read_f; @@ struct file_operations fops = { ... .read = read_f, ... +.llseek = noop_llseek, /* read uses no f_pos */ };  @ depends on !has_read && !has_write && !fops1 && !fops2 && !has_llseek && !nonseekable1 && !nonseekable2 && !seq @ identifier fops0.fops; @@ struct file_operations fops = { ... +.llseek = noop_llseek, /* no read or write fn */ }; ===== End semantic patch =====  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Cc: Julia Lawall <julia@diku.dk> Cc: Christoph Hellwig <hch@infradead.org>
f | mediabay.c | s | 18K | 668 | Masanari Iida | standby24x7@gmail.com | 1328305726 |  | macintosh: fix string typo in mediabay.c  Fix typo "unsuported" to "unsupported" in drivers/machintosh/mediabay.c  Signed-off-by: Masanari Iida<standby24x7@gmail.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | macio-adb.c | s | 6.4K | 248 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | adb.c | s | 19K | 757 | majianpeng | majianpeng@gmail.com | 1329369312 |  | powerpc/adb: Use set_current_state()  Signed-off-by: majianpeng <majianpeng@gmail.com> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | adbhid.c | s | 34K | 1117 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | windfarm_pid.h | s | 2.7K | 72 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1139378714 |  | [PATCH] powerpc: Thermal control for dual core G5s  This patch adds a windfarm module, windfarm_pm112, for the dual core G5s (both 2 and 4 core models), keeping the machine from getting into vacuum-cleaner mode ;) For proper credits, the patch was initially written by Paul Mackerras, and slightly reworked by me to add overtemp handling among others. The patch also removes the sysfs attributes from windfarm_pm81 and windfarm_pm91 and instead adds code to the windfarm core to automagically expose attributes for sensor & controls.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
f | windfarm_rm31.c | s | 17K | 623 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764245 |  | powerpc/powermac: New windfarm driver for PowerMac G5 (AGP) and Xserve G5  This replaces the old therm_pm72 using the same windfarm infrastructure that was used for other PowerMac G5 models. The fan speeds and sensors should now be visible in the same location in sysfs.  The driver is split into separate core modules for PowerMac7,2 (and 7,3) and RackMac3,1, with a lot of the shared code now in the separate sensor and control modules.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | rack-meter.c | s | 15K | 517 | Martin Schwidefsky | schwidefsky@de.ibm.com | 1324318995 |  | Merge branch 'sched/core' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip into cputime-tip  Conflicts: 	drivers/cpufreq/cpufreq_conservative.c 	drivers/cpufreq/cpufreq_ondemand.c 	drivers/macintosh/rack-meter.c 	fs/proc/stat.c 	fs/proc/uptime.c 	kernel/sched/core.c
f | windfarm_pm121.c | s | 24K | 901 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | via-pmu-event.h | s | 177B | 6 | Johannes Berg | johannes@sipsolutions.net | 1151300995 |  | Input: via-pmu - add input device support  Add an input device for the button and lid switch so that userspace gets notified about the user pressing them via the standard input layer.  Signed-off-by: Johannes Berg <johannes@sipsolutions.net> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
f | windfarm_ad7417_sensor.c | s | 7.6K | 291 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764241 |  | powerpc/windfarm: Add ad7417 sensor  For user by the upcoming windfarm_pm72 and windfarm_rm31  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | Kconfig | g | 10K |  | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764245 |  | powerpc/powermac: New windfarm driver for PowerMac G5 (AGP) and Xserve G5  This replaces the old therm_pm72 using the same windfarm infrastructure that was used for other PowerMac G5 models. The fan speeds and sensors should now be visible in the same location in sysfs.  The driver is split into separate core modules for PowerMac7,2 (and 7,3) and RackMac3,1, with a lot of the shared code now in the separate sensor and control modules.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | mac_hid.c | s | 6.0K | 233 | Dmitry Torokhov | dmitry.torokhov@gmail.com | 1289542939 |  | Input: mac mouse emulation - add locking  We need to add appropriate locking when toggling mac mouse emulation on and off to ensure that input device and handler are in consistent state.  Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
f | therm_pm72.h | s | 9.3K | 292 | Josh Boyer | jwboyer@gmail.com | 1268096127 |  | powerpc: Fix G5 thermal shutdown  This changes the thresholds for the liquid cooled G5 thermal shutdown mechanism to prevent an errant shutdown with some models.  Signed-off-by: David Woodhouse <David.Woodhouse@intel.com> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | ans-lcd.h | s | 206B | 8 | Kumar Gala | galak@kernel.crashing.org | 1187840609 |  | [POWERPC] Copy over headers from arch/ppc to arch/powerpc that we need  To build arch/powerpc without including asm-ppc/ we need these files in asm-powerpc/  Moved some headers under arch/powerpc/platforms if they were only used by platform or driver files and fixed up the source file includes to match the new locations  Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | macio_asic.c | s | 20K | 673 | Grant Likely | grant.likely@secretlab.ca | 1328131590 |  | drivercore: Output common devicetree information in uevent  When userspace needs to find a specific device, it currently isn't easy to resolve a /sys/devices/ path from a specific device tree node.  Nor is it easy to obtain the compatible list for devices.  This patch generalizes the code that inserts OF_* values into the uevent device attribute so that any device that is attached to an OF node will have that information exported to userspace.  Without this patch only platform devices and some powerpc-specific busses have access to this data.  The original function also creates a MODALIAS property for the compatible list, but that code has not been generalized into the common case because it has the potential to break module loading on a lot of bus types.  Bus types are still responsible for their own MODALIAS properties.  Boot tested on ARM and compile tested on PowerPC and SPARC.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Acked-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org> Cc: Tobias Klauser <tklauser@distanz.ch> Cc: Frederic Lambert <frdrc66@gmail.com> Cc: Rob Herring <rob.herring@calxeda.com> Cc: Mark Brown <broonie@sirena.org.uk> Cc: "David S. Miller" <davem@davemloft.net> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | via-pmu-led.c | s | 3.1K | 105 | Julia Lawall | julia@diku.dk | 1283400453 |  | powerpc/via-pmu-led.c: Add of_node_put to avoid memory leak  Add a call to of_node_put in the error handling code following a call to of_find_node_by_path.  The semantic match that finds this problem is as follows: (http://coccinelle.lip6.fr/)  // <smpl> @r exists@ local idexpression x; expression E,E1; statement S; @@  *x = (of_find_node_by_path ||of_find_node_by_name ||of_find_node_by_phandle ||of_get_parent ||of_get_next_parent ||of_get_next_child ||of_find_compatible_node ||of_match_node )(...); ... if (x == NULL) S <... when != x = E *if (...) {   ... when != of_node_put(x)       when != if (...) { ... of_node_put(x); ... } (   return <+...x...+>; || *  return ...; ) } ...> of_node_put(x); // </smpl>  Signed-off-by: Julia Lawall <julia@diku.dk> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | windfarm_lm87_sensor.c | s | 4.0K | 165 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764241 |  | powerpc/windfarm: Add lm87 sensor  For use by the upcoming windfarm_rm31  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | windfarm_pid.c | s | 3.7K | 125 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1141699245 |  | [PATCH] windfarm license fix  The Windfarm PID module lacks a licence, it should be GPL, here it is  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Paul Mackerras <paulus@samba.org> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
f | windfarm_pm81.c | s | 21K | 688 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1335764240 |  | powerpc/windfarm: Add useful accessors  Makes the code more readable  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | therm_windtunnel.c | s | 11K | 435 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | via-cuda.c | s | 15K | 561 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | via-maciisi.c | s | 15K | 594 | Geert Uytterhoeven | geert@linux-m68k.org | 1320788148 |  | m68k/irq: Remove obsolete IRQ_FLG_* users  The m68k core irq code stopped honoring these flags during the irq restructuring in 2006.  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | smu.c | s | 30K | 1112 | Kay Sievers | kay.sievers@vrfy.org | 1324513563 |  | driver-core: remove sysdev.h usage.  The sysdev.h file should not be needed by any in-kernel code, so remove the .h file from these random files that seem to still want to include it.  The sysdev code will be going away soon, so this include needs to be removed no matter what.  Cc: Jiandong Zheng <jdzheng@broadcom.com> Cc: Scott Branden <sbranden@broadcom.com> Cc: Russell King <linux@arm.linux.org.uk> Cc: Kukjin Kim <kgene.kim@samsung.com> Cc: David Brown <davidb@codeaurora.org> Cc: Daniel Walker <dwalker@fifo99.com> Cc: Bryan Huntsman <bryanh@codeaurora.org> Cc: Ben Dooks <ben-linux@fluff.org> Cc: Wan ZongShun <mcuos.com@gmail.com> Cc: Haavard Skinnemoen <hskinnemoen@gmail.com> Cc: Hans-Christian Egtvedt <egtvedt@samfundet.no> Cc: Guan Xuetao <gxt@mprc.pku.edu.cn> Cc: "Venkatesh Pallipadi Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Ingo Molnar <mingo@redhat.com> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Matthew Garrett <mjg@redhat.com> Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
f | via-pmu-backlight.c | s | 4.6K | 156 | Matthew Garrett | mjg@redhat.com | 1300841039 |  | backlight: add backlight type  There may be multiple ways of controlling the backlight on a given machine.  Allow drivers to expose the type of interface they are providing, making it possible for userspace to make appropriate policy decisions.  Signed-off-by: Matthew Garrett <mjg@redhat.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Chris Wilson <chris@chris-wilson.co.uk> Cc: David Airlie <airlied@linux.ie> Cc: Alex Deucher <alexdeucher@gmail.com> Cc: Ben Skeggs <bskeggs@redhat.com> Cc: Zhang Rui <rui.zhang@intel.com> Cc: Len Brown <lenb@kernel.org> Cc: Jesse Barnes <jbarnes@virtuousgeek.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
