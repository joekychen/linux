f | cdrom.c | s | 98K | 3139 | Paolo Bonzini | pbonzini@redhat.com | 1328727794 |  | cdrom: move shared static to cdrom_device_info  The keeplocked variable in the cdrom driver is shared across multiple drives, but set in per-device ioctls.  Move it to the per-device struct, avoiding that the setting on one drive affects the driver's behavior when closing another.  [ Impact: limit udev's confusion to one drive when a CD burning program   unlocks the CD door at the end of burning. ]  Signed-off-by: Paolo Bonzini <pbonzini@redhat.com> Signed-off-by: Jens Axboe <axboe@kernel.dk>
f | gdrom.c | s | 22K | 811 | Tejun Heo | tj@kernel.org | 1303414385 |  | block: unexport DISK_EVENT_MEDIA_CHANGE for legacy/fringe drivers  In-kernel disk event polling doesn't matter for legacy/fringe drivers and may lead to infinite event loop if ->check_events() implementation generates events on level condition instead of edge.  Now that block layer supports suppressing exporting unlisted events, simply leaving disk->events cleared allows these drivers to keep the internal revalidation behavior intact while avoiding weird interactions with userland event handler.  Signed-off-by: Tejun Heo <tj@kernel.org> Cc: Kay Sievers <kay.sievers@vrfy.org> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | Makefile | g | 491B |  | Adrian McMenamin | adrian@mcmen.demon.co.uk | 1201493944 |  | cdrom: Add support for Sega Dreamcast GD-ROM.  This patch adds support for the GD-Rom drive, SEGA's proprietary implementation of an IDE CD Rom for the SEGA Dreamcast. This driver implements Sega's Packet Interface (SPI) - at least partially. It will also read disks in SEGA's propreitary GD format.  Unlike previous drivers (which were never in mainline) this uses DMA and not PIO to read disks. It is a new driver, not a refactoring of old drivers.  Signed-off by: Adrian McMenamin <adrian@mcmen.demon.co.uk> Acked-by: Jens Axboe <jens.axboe@oracle.com> Signed-off-by: Paul Mundt <lethal@linux-sh.org>
