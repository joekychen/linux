<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › fddi › skfp › h › osdef1st.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>osdef1st.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/******************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> *	(C)Copyright 1998,1999 SysKonnect,</span>
<span class="cm"> *	a business unit of Schneider &amp; Koch &amp; Co. Datensysteme GmbH.</span>
<span class="cm"> *</span>
<span class="cm"> *	This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *	it under the terms of the GNU General Public License as published by</span>
<span class="cm"> *	the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> *	(at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *	The information in this file is provided &quot;AS IS&quot; without warranty.</span>
<span class="cm"> *</span>
<span class="cm"> ******************************************************************************/</span>

<span class="cm">/* </span>
<span class="cm"> * Operating system-dependent definitions that have to be defined</span>
<span class="cm"> * before any other header files are included.</span>
<span class="cm"> */</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><h2>HWM (HardWare Module) Definitions</h2></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;asm/byteorder.h&gt;</span>

<span class="cp">#ifdef __LITTLE_ENDIAN</span>
<span class="cp">#define LITTLE_ENDIAN</span>
<span class="cp">#else</span>
<span class="cp">#define BIG_ENDIAN</span>
<span class="cp">#endif</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>this is set in the makefile</p>

<h1>define PCI            /* only PCI adapters supported by this driver */</h1>

<h1>define MEM<em>MAPPED</em>IO    /* use memory mapped I/O */</h1></td><td class="code"><div class="highlight"><pre><span class="cp">#define USE_CAN_ADDR		</span><span class="cm">/* DA and SA in MAC header are canonical. */</span><span class="cp"></span>

<span class="cp">#define MB_OUTSIDE_SMC		</span><span class="cm">/* SMT Mbufs outside of smc struct. */</span><span class="cp"></span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><hr /></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><h2>SMT Definitions </h2></td><td class="code"><div class="highlight"><pre><span class="cp">#define SYNC	       		</span><span class="cm">/* allow synchronous frames */</span><span class="cp"></span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><h1>define SBA            /* Synchronous Bandwidth Allocator support */</h1></td><td class="code"><div class="highlight"><pre>				<span class="cm">/* not available as free source */</span>

<span class="cp">#define ESS			</span><span class="cm">/* SBA End Station Support */</span><span class="cp"></span>

<span class="cp">#define	SMT_PANIC(smc, nr, msg)	printk(KERN_INFO &quot;SMT PANIC: code: %d, msg: %s\n&quot;,nr,msg)</span>


<span class="cp">#ifdef DEBUG</span>
<span class="cp">#define printf(s,args...) printk(KERN_INFO s, ## args)</span>
<span class="cp">#endif</span></pre></div></td></tr>


<tr id="section-7"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-7">&#182;</a></div><h2>#define HW<em>PTR    u</em>long</h2></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-8"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-8">&#182;</a></div><h2>HWM and OS-specific buffer definitions</h2></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-9"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-9">&#182;</a></div><p>default number of receive buffers.</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define NUM_RECEIVE_BUFFERS		10</span></pre></div></td></tr>


<tr id="section-10"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-10">&#182;</a></div><p>default number of transmit buffers.</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define NUM_TRANSMIT_BUFFERS		10</span></pre></div></td></tr>


<tr id="section-11"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-11">&#182;</a></div><p>Number of SMT buffers (Mbufs).</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define NUM_SMT_BUF	4</span></pre></div></td></tr>


<tr id="section-12"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-12">&#182;</a></div><p>Number of TXDs for asynchronous transmit queue.</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define HWM_ASYNC_TXD_COUNT	(NUM_TRANSMIT_BUFFERS + NUM_SMT_BUF)</span></pre></div></td></tr>


<tr id="section-13"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-13">&#182;</a></div><p>Number of TXDs for synchronous transmit queue.</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define HWM_SYNC_TXD_COUNT	HWM_ASYNC_TXD_COUNT</span></pre></div></td></tr>


<tr id="section-14"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-14">&#182;</a></div><p>Number of RXDs for receive queue #1.
Note: Workaround for ASIC Errata #7: One extra RXD is required.</p></td><td class="code"><div class="highlight"><pre><span class="cp">#if (NUM_RECEIVE_BUFFERS &gt; 100)</span>
<span class="cp">#define SMT_R1_RXD_COUNT	(1 + 100)</span>
<span class="cp">#else</span>
<span class="cp">#define SMT_R1_RXD_COUNT	(1 + NUM_RECEIVE_BUFFERS)</span>
<span class="cp">#endif</span></pre></div></td></tr>


<tr id="section-15"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-15">&#182;</a></div><p>Number of RXDs for receive queue #2.</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define SMT_R2_RXD_COUNT	0	</span><span class="c1">// Not used.</span></pre></div></td></tr>


<tr id="section-16"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-16">&#182;</a></div><hr /></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * OS-specific part of the transmit/receive descriptor structure (TXD/RXD).</span>
<span class="cm"> *</span>
<span class="cm"> * Note: The size of these structures must follow this rule:</span>
<span class="cm"> *</span>
<span class="cm"> *	sizeof(struct) + 2*sizeof(void*) == n * 16, n &gt;= 1</span>
<span class="cm"> *</span>
<span class="cm"> * We use the dma_addr fields under Linux to keep track of the</span>
<span class="cm"> * DMA address of the packet data, for later pci_unmap_single. -DaveM</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">s_txd_os</span> <span class="p">{</span>	<span class="c1">// os-specific part of transmit descriptor</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">dma_addr</span><span class="p">;</span>
<span class="p">}</span> <span class="p">;</span>

<span class="k">struct</span> <span class="n">s_rxd_os</span> <span class="p">{</span>	<span class="c1">// os-specific part of receive descriptor</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">dma_addr</span><span class="p">;</span>
<span class="p">}</span> <span class="p">;</span>


<span class="cm">/*</span>
<span class="cm"> * So we do not need to make too many modifications to the generic driver</span>
<span class="cm"> * parts, we take advantage of the AIX byte swapping macro interface.</span>
<span class="cm"> */</span>

<span class="cp">#define AIX_REVERSE(x)		((u32)le32_to_cpu((u32)(x)))</span>
<span class="cp">#define MDR_REVERSE(x)		((u32)le32_to_cpu((u32)(x)))</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
