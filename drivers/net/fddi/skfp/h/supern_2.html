<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › fddi › skfp › h › supern_2.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>supern_2.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/******************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> *	(C)Copyright 1998,1999 SysKonnect,</span>
<span class="cm"> *	a business unit of Schneider &amp; Koch &amp; Co. Datensysteme GmbH.</span>
<span class="cm"> *</span>
<span class="cm"> *	This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *	it under the terms of the GNU General Public License as published by</span>
<span class="cm"> *	the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> *	(at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *	The information in this file is provided &quot;AS IS&quot; without warranty.</span>
<span class="cm"> *</span>
<span class="cm"> ******************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm">	defines for AMD Supernet II chip set</span>
<span class="cm">	the chips are referred to as</span>
<span class="cm">		FPLUS	Formac Plus</span>
<span class="cm">		PLC	Physical Layer</span>

<span class="cm">	added defines for AMD Supernet III chip set</span>
<span class="cm">	added comments on differences between Supernet II and Supernet III</span>
<span class="cm">	added defines for the Motorola ELM (MOT_ELM)</span>
<span class="cm">*/</span>

<span class="cp">#ifndef	_SUPERNET_</span>
<span class="cp">#define _SUPERNET_</span>

<span class="cm">/*</span>
<span class="cm"> * Define Supernet 3 when used</span>
<span class="cm"> */</span>
<span class="cp">#ifdef	PCI</span>
<span class="cp">#ifndef	SUPERNET_3</span>
<span class="cp">#define	SUPERNET_3</span>
<span class="cp">#endif</span>
<span class="cp">#define TAG</span>
<span class="cp">#endif</span>

<span class="cp">#define	MB	0xff</span>
<span class="cp">#define	MW	0xffff</span>
<span class="cp">#define	MD	0xffffffff</span>

<span class="cm">/*</span>
<span class="cm"> * FORMAC frame status (rx_msext)</span>
<span class="cm"> */</span>
<span class="cp">#define	FS_EI		(1&lt;&lt;2)</span>
<span class="cp">#define	FS_AI		(1&lt;&lt;1)</span>
<span class="cp">#define	FS_CI		(1&lt;&lt;0)</span>

<span class="cp">#define FS_MSVALID	(1&lt;&lt;15)		</span><span class="cm">/* end of queue */</span><span class="cp"></span>
<span class="cp">#define FS_MSRABT	(1&lt;&lt;14)		</span><span class="cm">/* frame was aborted during reception*/</span><span class="cp"></span>
<span class="cp">#define FS_SSRCRTG	(1&lt;&lt;12)		</span><span class="cm">/* if SA has set MSB (source-routing)*/</span><span class="cp"></span>
<span class="cp">#define FS_SEAC2	(FS_EI&lt;&lt;9)	</span><span class="cm">/* error indicator */</span><span class="cp"></span>
<span class="cp">#define FS_SEAC1	(FS_AI&lt;&lt;9)	</span><span class="cm">/* address indicator */</span><span class="cp"></span>
<span class="cp">#define FS_SEAC0	(FS_CI&lt;&lt;9)	</span><span class="cm">/* copy indicator */</span><span class="cp"></span>
<span class="cp">#define FS_SFRMERR	(1&lt;&lt;8)		</span><span class="cm">/* error detected (CRC or length) */</span><span class="cp"></span>
<span class="cp">#define FS_SADRRG	(1&lt;&lt;7)		</span><span class="cm">/* address recognized */</span><span class="cp"></span>
<span class="cp">#define FS_SFRMTY2	(1&lt;&lt;6)		</span><span class="cm">/* frame-class bit */</span><span class="cp"></span>
<span class="cp">#define FS_SFRMTY1	(1&lt;&lt;5)		</span><span class="cm">/* frame-type bit (impementor) */</span><span class="cp"></span>
<span class="cp">#define FS_SFRMTY0	(1&lt;&lt;4)		</span><span class="cm">/* frame-type bit (LLC) */</span><span class="cp"></span>
<span class="cp">#define FS_ERFBB1	(1&lt;&lt;1)		</span><span class="cm">/* byte offset (depends on LSB bit) */</span><span class="cp"></span>
<span class="cp">#define FS_ERFBB0	(1&lt;&lt;0)		</span><span class="cm">/*  - &quot; - */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * status frame type</span>
<span class="cm"> */</span>
<span class="cp">#define	FRM_SMT		(0)	</span><span class="cm">/* asynchr. frames */</span><span class="cp"></span>
<span class="cp">#define	FRM_LLCA	(1)</span>
<span class="cp">#define	FRM_IMPA	(2)	</span>
<span class="cp">#define	FRM_MAC		(4)	</span><span class="cm">/* synchr. frames */</span><span class="cp"></span>
<span class="cp">#define	FRM_LLCS	(5)</span>
<span class="cp">#define	FRM_IMPS	(6)</span>

<span class="cm">/*</span>
<span class="cm"> * bits in rx_descr.i	(receive frame status word)</span>
<span class="cm"> */</span>
<span class="cp">#define RX_MSVALID	((long)1&lt;&lt;31)	</span><span class="cm">/* memory status valid */</span><span class="cp"></span>
<span class="cp">#define RX_MSRABT	((long)1&lt;&lt;30)	</span><span class="cm">/* memory status receive abort */</span><span class="cp"></span>
<span class="cp">#define RX_FS_E		((long)FS_SEAC2&lt;&lt;16)	</span><span class="cm">/* error indicator */</span><span class="cp"></span>
<span class="cp">#define RX_FS_A		((long)FS_SEAC1&lt;&lt;16)	</span><span class="cm">/* address indicator */</span><span class="cp"></span>
<span class="cp">#define RX_FS_C		((long)FS_SEAC0&lt;&lt;16)	</span><span class="cm">/* copy indicator */</span><span class="cp"></span>
<span class="cp">#define RX_FS_CRC	((long)FS_SFRMERR&lt;&lt;16)</span><span class="cm">/* error detected */</span><span class="cp"></span>
<span class="cp">#define RX_FS_ADDRESS	((long)FS_SADRRG&lt;&lt;16)	</span><span class="cm">/* address recognized */</span><span class="cp"></span>
<span class="cp">#define RX_FS_MAC	((long)FS_SFRMTY2&lt;&lt;16)</span><span class="cm">/* MAC frame */</span><span class="cp"></span>
<span class="cp">#define RX_FS_SMT	((long)0&lt;&lt;16)		</span><span class="cm">/* SMT frame */</span><span class="cp"></span>
<span class="cp">#define RX_FS_IMPL	((long)FS_SFRMTY1&lt;&lt;16)</span><span class="cm">/* implementer frame */</span><span class="cp"></span>
<span class="cp">#define RX_FS_LLC	((long)FS_SFRMTY0&lt;&lt;16)</span><span class="cm">/* LLC frame */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * receive frame descriptor</span>
<span class="cm"> */</span>
<span class="k">union</span> <span class="n">rx_descr</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef	LITTLE_ENDIAN</span>
	<span class="kt">unsigned</span>	<span class="n">rx_length</span> <span class="o">:</span><span class="mi">16</span> <span class="p">;</span>	<span class="cm">/* frame length lower/upper byte */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_erfbb</span>  <span class="o">:</span><span class="mi">2</span> <span class="p">;</span>	<span class="cm">/* received frame byte boundary */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_reserv2</span><span class="o">:</span><span class="mi">2</span> <span class="p">;</span>	<span class="cm">/* reserved */</span>	
	<span class="kt">unsigned</span>	<span class="n">rx_sfrmty</span> <span class="o">:</span><span class="mi">3</span> <span class="p">;</span>	<span class="cm">/* frame type bits */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_sadrrg</span> <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* DA == MA or broad-/multicast */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_sfrmerr</span><span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* received frame not valid */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_seac0</span>  <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* frame-copied  C-indicator */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_seac1</span>  <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* address-match A-indicator */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_seac2</span>  <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* frame-error   E-indicator */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_ssrcrtg</span><span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* == 1 SA has MSB set */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_reserv1</span><span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* reserved */</span>	
	<span class="kt">unsigned</span>	<span class="n">rx_msrabt</span> <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* memory status receive abort */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_msvalid</span><span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* memory status valid */</span>
<span class="cp">#else</span>
	<span class="kt">unsigned</span>	<span class="n">rx_msvalid</span><span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* memory status valid */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_msrabt</span> <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* memory status receive abort */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_reserv1</span><span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* reserved */</span>	
	<span class="kt">unsigned</span>	<span class="n">rx_ssrcrtg</span><span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* == 1 SA has MSB set */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_seac2</span>  <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* frame-error   E-indicator */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_seac1</span>  <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* address-match A-indicator */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_seac0</span>  <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* frame-copied  C-indicator */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_sfrmerr</span><span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* received frame not valid */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_sadrrg</span> <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* DA == MA or broad-/multicast */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_sfrmty</span> <span class="o">:</span><span class="mi">3</span> <span class="p">;</span>	<span class="cm">/* frame type bits */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_erfbb</span>  <span class="o">:</span><span class="mi">2</span> <span class="p">;</span>	<span class="cm">/* received frame byte boundary */</span>
	<span class="kt">unsigned</span>	<span class="n">rx_reserv2</span><span class="o">:</span><span class="mi">2</span> <span class="p">;</span>	<span class="cm">/* reserved */</span>	
	<span class="kt">unsigned</span>	<span class="n">rx_length</span> <span class="o">:</span><span class="mi">16</span> <span class="p">;</span>	<span class="cm">/* frame length lower/upper byte */</span>
<span class="cp">#endif</span>
	<span class="p">}</span> <span class="n">r</span> <span class="p">;</span>
	<span class="kt">long</span>	<span class="n">i</span> <span class="p">;</span>
<span class="p">}</span> <span class="p">;</span>

<span class="cm">/* defines for Receive Frame Descriptor access */</span>
<span class="cp">#define RD_S_ERFBB	0x00030000L	</span><span class="cm">/* received frame byte boundary */</span><span class="cp"></span>
<span class="cp">#define RD_S_RES2	0x000c0000L	</span><span class="cm">/* reserved */</span><span class="cp"></span>
<span class="cp">#define RD_S_SFRMTY	0x00700000L	</span><span class="cm">/* frame type bits */</span><span class="cp"></span>
<span class="cp">#define RD_S_SADRRG	0x00800000L	</span><span class="cm">/* DA == MA or broad-/multicast */</span><span class="cp"></span>
<span class="cp">#define RD_S_SFRMERR	0x01000000L	</span><span class="cm">/* received frame not valid */</span><span class="cp"></span>
<span class="cp">#define	RD_S_SEAC	0x0e000000L	</span><span class="cm">/* frame status indicators */</span><span class="cp"></span>
<span class="cp">#define RD_S_SEAC0	0x02000000L	</span><span class="cm">/* frame-copied  case-indicator */</span><span class="cp"></span>
<span class="cp">#define RD_S_SEAC1	0x04000000L	</span><span class="cm">/* address-match A-indicator */</span><span class="cp"></span>
<span class="cp">#define RD_S_SEAC2	0x08000000L	</span><span class="cm">/* frame-error   E-indicator */</span><span class="cp"></span>
<span class="cp">#define RD_S_SSRCRTG	0x10000000L	</span><span class="cm">/* == 1 SA has MSB set */</span><span class="cp"></span>
<span class="cp">#define RD_S_RES1	0x20000000L	</span><span class="cm">/* reserved */</span><span class="cp"></span>
<span class="cp">#define RD_S_MSRABT	0x40000000L	</span><span class="cm">/* memory status receive abort */</span><span class="cp"></span>
<span class="cp">#define RD_S_MSVALID	0x80000000L	</span><span class="cm">/* memory status valid */</span><span class="cp"></span>

<span class="cp">#define	RD_STATUS	0xffff0000L</span>
<span class="cp">#define	RD_LENGTH	0x0000ffffL</span>

<span class="cm">/* defines for Receive Frames Status Word values */</span>
<span class="cm">/*RD_S_SFRMTY*/</span>
<span class="cp">#define RD_FRM_SMT	(unsigned long)(0&lt;&lt;20)     </span><span class="cm">/* asynchr. frames */</span><span class="cp"></span>
<span class="cp">#define RD_FRM_LLCA	(unsigned long)(1&lt;&lt;20)</span>
<span class="cp">#define RD_FRM_IMPA	(unsigned long)(2&lt;&lt;20)</span>
<span class="cp">#define RD_FRM_MAC	(unsigned long)(4&lt;&lt;20)     </span><span class="cm">/* synchr. frames */</span><span class="cp"></span>
<span class="cp">#define RD_FRM_LLCS	(unsigned long)(5&lt;&lt;20)</span>
<span class="cp">#define RD_FRM_IMPS	(unsigned long)(6&lt;&lt;20)</span>

<span class="cp">#define TX_DESCRIPTOR	0x40000000L</span>
<span class="cp">#define TX_OFFSET_3	0x18000000L</span>

<span class="cp">#define TXP1	2</span>

<span class="cm">/*</span>
<span class="cm"> * transmit frame descriptor</span>
<span class="cm"> */</span>
<span class="k">union</span> <span class="n">tx_descr</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
<span class="cp">#ifdef	LITTLE_ENDIAN</span>
	<span class="kt">unsigned</span>	<span class="n">tx_length</span><span class="o">:</span><span class="mi">16</span> <span class="p">;</span>	<span class="cm">/* frame length lower/upper byte */</span>
	<span class="kt">unsigned</span>	<span class="n">tx_res</span>	 <span class="o">:</span><span class="mi">8</span> <span class="p">;</span>	<span class="cm">/* reserved 	 (bit 16..23) */</span>
	<span class="kt">unsigned</span>	<span class="n">tx_xmtabt</span><span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* transmit abort */</span>
	<span class="kt">unsigned</span>	<span class="n">tx_nfcs</span>  <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* no frame check sequence */</span>
	<span class="kt">unsigned</span>	<span class="n">tx_xdone</span> <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* give up token */</span>
	<span class="kt">unsigned</span>	<span class="n">tx_rpxm</span>  <span class="o">:</span><span class="mi">2</span> <span class="p">;</span>	<span class="cm">/* byte offset */</span>
	<span class="kt">unsigned</span>	<span class="n">tx_pat1</span>  <span class="o">:</span><span class="mi">2</span> <span class="p">;</span>	<span class="cm">/* must be TXP1 */</span>
	<span class="kt">unsigned</span>	<span class="n">tx_more</span>	 <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* more frame in chain */</span>
<span class="cp">#else</span>
	<span class="kt">unsigned</span>	<span class="n">tx_more</span>	 <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* more frame in chain */</span>
	<span class="kt">unsigned</span>	<span class="n">tx_pat1</span>  <span class="o">:</span><span class="mi">2</span> <span class="p">;</span>	<span class="cm">/* must be TXP1 */</span>
	<span class="kt">unsigned</span>	<span class="n">tx_rpxm</span>  <span class="o">:</span><span class="mi">2</span> <span class="p">;</span>	<span class="cm">/* byte offset */</span>
	<span class="kt">unsigned</span>	<span class="n">tx_xdone</span> <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* give up token */</span>
	<span class="kt">unsigned</span>	<span class="n">tx_nfcs</span>  <span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* no frame check sequence */</span>
	<span class="kt">unsigned</span>	<span class="n">tx_xmtabt</span><span class="o">:</span><span class="mi">1</span> <span class="p">;</span>	<span class="cm">/* transmit abort */</span>
	<span class="kt">unsigned</span>	<span class="n">tx_res</span>	 <span class="o">:</span><span class="mi">8</span> <span class="p">;</span>	<span class="cm">/* reserved 	 (bit 16..23) */</span>
	<span class="kt">unsigned</span>	<span class="n">tx_length</span><span class="o">:</span><span class="mi">16</span> <span class="p">;</span>	<span class="cm">/* frame length lower/upper byte */</span>
<span class="cp">#endif</span>
	<span class="p">}</span> <span class="n">t</span> <span class="p">;</span>
	<span class="kt">long</span>	<span class="n">i</span> <span class="p">;</span>
<span class="p">}</span> <span class="p">;</span>

<span class="cm">/* defines for Transmit Descriptor access */</span>
<span class="cp">#define	TD_C_MORE	0x80000000L	</span><span class="cm">/* more frame in chain */</span><span class="cp"></span>
<span class="cp">#define	TD_C_DESCR	0x60000000L	</span><span class="cm">/* must be TXP1 */</span><span class="cp"></span>
<span class="cp">#define	TD_C_TXFBB	0x18000000L	</span><span class="cm">/* byte offset */</span><span class="cp"></span>
<span class="cp">#define	TD_C_XDONE	0x04000000L	</span><span class="cm">/* give up token */</span><span class="cp"></span>
<span class="cp">#define TD_C_NFCS	0x02000000L	</span><span class="cm">/* no frame check sequence */</span><span class="cp"></span>
<span class="cp">#define TD_C_XMTABT	0x01000000L	</span><span class="cm">/* transmit abort */</span><span class="cp"></span>

<span class="cp">#define	TD_C_LNCNU	0x0000ff00L	</span>
<span class="cp">#define TD_C_LNCNL	0x000000ffL</span>
<span class="cp">#define TD_C_LNCN	0x0000ffffL	</span><span class="cm">/* frame length lower/upper byte */</span><span class="cp"></span>
 
<span class="cm">/*</span>
<span class="cm"> * transmit pointer</span>
<span class="cm"> */</span>
<span class="k">union</span> <span class="n">tx_pointer</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">t</span> <span class="p">{</span>
<span class="cp">#ifdef	LITTLE_ENDIAN</span>
	<span class="kt">unsigned</span>	<span class="n">tp_pointer</span><span class="o">:</span><span class="mi">16</span> <span class="p">;</span>	<span class="cm">/* pointer to tx_descr (low/high) */</span>
	<span class="kt">unsigned</span>	<span class="n">tp_res</span>	  <span class="o">:</span><span class="mi">8</span> <span class="p">;</span>	<span class="cm">/* reserved 	 (bit 16..23) */</span>
	<span class="kt">unsigned</span>	<span class="n">tp_pattern</span><span class="o">:</span><span class="mi">8</span> <span class="p">;</span>	<span class="cm">/* fixed pattern (bit 24..31) */</span>
<span class="cp">#else</span>
	<span class="kt">unsigned</span>	<span class="n">tp_pattern</span><span class="o">:</span><span class="mi">8</span> <span class="p">;</span>	<span class="cm">/* fixed pattern (bit 24..31) */</span>
	<span class="kt">unsigned</span>	<span class="n">tp_res</span>	  <span class="o">:</span><span class="mi">8</span> <span class="p">;</span>	<span class="cm">/* reserved 	 (bit 16..23) */</span>
	<span class="kt">unsigned</span>	<span class="n">tp_pointer</span><span class="o">:</span><span class="mi">16</span> <span class="p">;</span>	<span class="cm">/* pointer to tx_descr (low/high) */</span>
<span class="cp">#endif</span>
	<span class="p">}</span> <span class="n">t</span> <span class="p">;</span>
	<span class="kt">long</span>	<span class="n">i</span> <span class="p">;</span>
<span class="p">}</span> <span class="p">;</span>

<span class="cm">/* defines for Nontag Mode Pointer access */</span>
<span class="cp">#define	TD_P_CNTRL	0xff000000L</span>
<span class="cp">#define TD_P_RPXU	0x0000ff00L</span>
<span class="cp">#define TD_P_RPXL	0x000000ffL</span>
<span class="cp">#define TD_P_RPX	0x0000ffffL</span>


<span class="cp">#define TX_PATTERN	0xa0</span>
<span class="cp">#define TX_POINTER_END	0xa0000000L</span>
<span class="cp">#define TX_INT_PATTERN	0xa0000000L</span>

<span class="k">struct</span> <span class="n">tx_queue</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">tx_queue</span> <span class="o">*</span><span class="n">tq_next</span> <span class="p">;</span>
	<span class="n">u_short</span> <span class="n">tq_pack_offset</span> <span class="p">;</span>	<span class="cm">/* offset buffer memory */</span>
	<span class="n">u_char</span>  <span class="n">tq_pad</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">;</span>
<span class="p">}</span> <span class="p">;</span>

<span class="cm">/*</span>
<span class="cm">	defines for FORMAC Plus (Am79C830)</span>
<span class="cm">*/</span>

<span class="cm">/*</span>
<span class="cm"> *  FORMAC+ read/write (r/w) registers</span>
<span class="cm"> */</span>
<span class="cp">#define FM_CMDREG1	0x00		</span><span class="cm">/* write command reg 1 instruction */</span><span class="cp"></span>
<span class="cp">#define FM_CMDREG2	0x01		</span><span class="cm">/* write command reg 2 instruction */</span><span class="cp"></span>
<span class="cp">#define FM_ST1U		0x00		</span><span class="cm">/* read upper 16-bit of status reg 1 */</span><span class="cp"></span>
<span class="cp">#define FM_ST1L		0x01		</span><span class="cm">/* read lower 16-bit of status reg 1 */</span><span class="cp"></span>
<span class="cp">#define FM_ST2U		0x02		</span><span class="cm">/* read upper 16-bit of status reg 2 */</span><span class="cp"></span>
<span class="cp">#define FM_ST2L		0x03		</span><span class="cm">/* read lower 16-bit of status reg 2 */</span><span class="cp"></span>
<span class="cp">#define FM_IMSK1U	0x04		</span><span class="cm">/* r/w upper 16-bit of IMSK 1 */</span><span class="cp"></span>
<span class="cp">#define FM_IMSK1L	0x05		</span><span class="cm">/* r/w lower 16-bit of IMSK 1 */</span><span class="cp"></span>
<span class="cp">#define FM_IMSK2U	0x06		</span><span class="cm">/* r/w upper 16-bit of IMSK 2 */</span><span class="cp"></span>
<span class="cp">#define FM_IMSK2L	0x07		</span><span class="cm">/* r/w lower 16-bit of IMSK 2 */</span><span class="cp"></span>
<span class="cp">#define FM_SAID		0x08		</span><span class="cm">/* r/w short addr.-individual */</span><span class="cp"></span>
<span class="cp">#define FM_LAIM		0x09		</span><span class="cm">/* r/w long addr.-ind. (MSW of LAID) */</span><span class="cp"></span>
<span class="cp">#define FM_LAIC		0x0a		</span><span class="cm">/* r/w long addr.-ind. (middle)*/</span><span class="cp"></span>
<span class="cp">#define FM_LAIL		0x0b		</span><span class="cm">/* r/w long addr.-ind. (LSW) */</span><span class="cp"></span>
<span class="cp">#define FM_SAGP		0x0c		</span><span class="cm">/* r/w short address-group */</span><span class="cp"></span>
<span class="cp">#define FM_LAGM		0x0d		</span><span class="cm">/* r/w long addr.-gr. (MSW of LAGP) */</span><span class="cp"></span>
<span class="cp">#define FM_LAGC		0x0e		</span><span class="cm">/* r/w long addr.-gr. (middle) */</span><span class="cp"></span>
<span class="cp">#define FM_LAGL		0x0f		</span><span class="cm">/* r/w long addr.-gr. (LSW) */</span><span class="cp"></span>
<span class="cp">#define FM_MDREG1	0x10		</span><span class="cm">/* r/w 16-bit mode reg 1 */</span><span class="cp"></span>
<span class="cp">#define FM_STMCHN	0x11		</span><span class="cm">/* read state-machine reg */</span><span class="cp"></span>
<span class="cp">#define FM_MIR1		0x12		</span><span class="cm">/* read upper 16-bit of MAC Info Reg */</span><span class="cp"></span>
<span class="cp">#define FM_MIR0		0x13		</span><span class="cm">/* read lower 16-bit of MAC Info Reg */</span><span class="cp"></span>
<span class="cp">#define FM_TMAX		0x14		</span><span class="cm">/* r/w 16-bit TMAX reg */</span><span class="cp"></span>
<span class="cp">#define FM_TVX		0x15		</span><span class="cm">/* write 8-bit TVX reg with NP7-0</span>
<span class="cm">					   read TVX on NP7-0, timer on NP15-8*/</span><span class="cp"></span>
<span class="cp">#define FM_TRT		0x16		</span><span class="cm">/* r/w upper 16-bit of TRT timer */</span><span class="cp"></span>
<span class="cp">#define FM_THT		0x17		</span><span class="cm">/* r/w upper 16-bit of THT timer */</span><span class="cp"></span>
<span class="cp">#define FM_TNEG		0x18		</span><span class="cm">/* read upper 16-bit of TNEG (TTRT) */</span><span class="cp"></span>
<span class="cp">#define FM_TMRS		0x19		</span><span class="cm">/* read lower 5-bit of TNEG,TRT,THT */</span><span class="cp"></span>
			<span class="cm">/* F E D C  B A 9 8  7 6 5 4  3 2 1 0</span>
<span class="cm">			   x |-TNEG4-0| |-TRT4-0-| |-THT4-0-| (x-late count) */</span>
<span class="cp">#define FM_TREQ0	0x1a		</span><span class="cm">/* r/w 16-bit TREQ0 reg (LSW of TRT) */</span><span class="cp"></span>
<span class="cp">#define FM_TREQ1	0x1b		</span><span class="cm">/* r/w 16-bit TREQ1 reg (MSW of TRT) */</span><span class="cp"></span>
<span class="cp">#define FM_PRI0		0x1c		</span><span class="cm">/* r/w priority r. for asyn.-queue 0 */</span><span class="cp"></span>
<span class="cp">#define FM_PRI1		0x1d		</span><span class="cm">/* r/w priority r. for asyn.-queue 1 */</span><span class="cp"></span>
<span class="cp">#define FM_PRI2		0x1e		</span><span class="cm">/* r/w priority r. for asyn.-queue 2 */</span><span class="cp"></span>
<span class="cp">#define FM_TSYNC	0x1f		</span><span class="cm">/* r/w 16-bit of the TSYNC register */</span><span class="cp"></span>
<span class="cp">#define FM_MDREG2	0x20		</span><span class="cm">/* r/w 16-bit mode reg 2 */</span><span class="cp"></span>
<span class="cp">#define FM_FRMTHR	0x21		</span><span class="cm">/* r/w the frame threshold register */</span><span class="cp"></span>
<span class="cp">#define FM_EACB		0x22		</span><span class="cm">/* r/w end addr of claim/beacon area */</span><span class="cp"></span>
<span class="cp">#define FM_EARV		0x23		</span><span class="cm">/* r/w end addr of receive queue */</span><span class="cp"></span>
<span class="cm">/* Supernet 3 */</span>
<span class="cp">#define	FM_EARV1	FM_EARV</span>

<span class="cp">#define FM_EAS		0x24		</span><span class="cm">/* r/w end addr of synchr. queue */</span><span class="cp"></span>
<span class="cp">#define FM_EAA0		0x25		</span><span class="cm">/* r/w end addr of asyn. queue 0 */</span><span class="cp"></span>
<span class="cp">#define FM_EAA1		0x26		</span><span class="cm">/* r/w end addr of asyn. queue 1 */</span><span class="cp"></span>
<span class="cp">#define FM_EAA2		0x27		</span><span class="cm">/* r/w end addr of asyn. queue 2 */</span><span class="cp"></span>
<span class="cp">#define FM_SACL		0x28		</span><span class="cm">/* r/w start addr of claim frame */</span><span class="cp"></span>
<span class="cp">#define FM_SABC		0x29		</span><span class="cm">/* r/w start addr of beacon frame */</span><span class="cp"></span>
<span class="cp">#define FM_WPXSF	0x2a		</span><span class="cm">/* r/w the write ptr. for special fr.*/</span><span class="cp"></span>
<span class="cp">#define FM_RPXSF	0x2b		</span><span class="cm">/* r/w the read ptr. for special fr. */</span><span class="cp"></span>
<span class="cp">#define FM_RPR		0x2d		</span><span class="cm">/* r/w the read ptr. for receive qu. */</span><span class="cp"></span>
<span class="cp">#define FM_WPR		0x2e		</span><span class="cm">/* r/w the write ptr. for receive qu.*/</span><span class="cp"></span>
<span class="cp">#define FM_SWPR		0x2f		</span><span class="cm">/* r/w the shadow wr.-ptr. for rec.q.*/</span><span class="cp"></span>
<span class="cm">/* Supernet 3 */</span> 
<span class="cp">#define FM_RPR1         FM_RPR   </span>
<span class="cp">#define FM_WPR1         FM_WPR </span>
<span class="cp">#define FM_SWPR1        FM_SWPR</span>

<span class="cp">#define FM_WPXS		0x30		</span><span class="cm">/* r/w the write ptr. for synchr. qu.*/</span><span class="cp"></span>
<span class="cp">#define FM_WPXA0	0x31		</span><span class="cm">/* r/w the write ptr. for asyn. qu.0 */</span><span class="cp"></span>
<span class="cp">#define FM_WPXA1	0x32		</span><span class="cm">/* r/w the write ptr. for asyn. qu.1 */</span><span class="cp"></span>
<span class="cp">#define FM_WPXA2	0x33		</span><span class="cm">/* r/w the write ptr. for asyn. qu.2 */</span><span class="cp"></span>
<span class="cp">#define FM_SWPXS	0x34		</span><span class="cm">/* r/w the shadow wr.-ptr. for syn.q.*/</span><span class="cp"></span>
<span class="cp">#define FM_SWPXA0	0x35		</span><span class="cm">/* r/w the shad. wr.-ptr. for asyn.q0*/</span><span class="cp"></span>
<span class="cp">#define FM_SWPXA1	0x36		</span><span class="cm">/* r/w the shad. wr.-ptr. for asyn.q1*/</span><span class="cp"></span>
<span class="cp">#define FM_SWPXA2	0x37		</span><span class="cm">/* r/w the shad. wr.-ptr. for asyn.q2*/</span><span class="cp"></span>
<span class="cp">#define FM_RPXS		0x38		</span><span class="cm">/* r/w the read ptr. for synchr. qu. */</span><span class="cp"></span>
<span class="cp">#define FM_RPXA0	0x39		</span><span class="cm">/* r/w the read ptr. for asyn. qu. 0 */</span><span class="cp"></span>
<span class="cp">#define FM_RPXA1	0x3a		</span><span class="cm">/* r/w the read ptr. for asyn. qu. 1 */</span><span class="cp"></span>
<span class="cp">#define FM_RPXA2	0x3b		</span><span class="cm">/* r/w the read ptr. for asyn. qu. 2 */</span><span class="cp"></span>
<span class="cp">#define FM_MARR		0x3c		</span><span class="cm">/* r/w the memory read addr register */</span><span class="cp"></span>
<span class="cp">#define FM_MARW		0x3d		</span><span class="cm">/* r/w the memory write addr register*/</span><span class="cp"></span>
<span class="cp">#define FM_MDRU		0x3e		</span><span class="cm">/* r/w upper 16-bit of mem. data reg */</span><span class="cp"></span>
<span class="cp">#define FM_MDRL		0x3f		</span><span class="cm">/* r/w lower 16-bit of mem. data reg */</span><span class="cp"></span>

<span class="cm">/* following instructions relate to MAC counters and timer */</span>
<span class="cp">#define FM_TMSYNC	0x40		</span><span class="cm">/* r/w upper 16 bits of TMSYNC timer */</span><span class="cp"></span>
<span class="cp">#define FM_FCNTR	0x41		</span><span class="cm">/* r/w the 16-bit frame counter */</span><span class="cp"></span>
<span class="cp">#define FM_LCNTR	0x42		</span><span class="cm">/* r/w the 16-bit lost counter */</span><span class="cp"></span>
<span class="cp">#define FM_ECNTR	0x43		</span><span class="cm">/* r/w the 16-bit error counter */</span><span class="cp"></span>

<span class="cm">/* Supernet 3:	extensions to old register block */</span>
<span class="cp">#define	FM_FSCNTR	0x44		</span><span class="cm">/* r/? Frame Strip Counter */</span><span class="cp"></span>
<span class="cp">#define	FM_FRSELREG	0x45		</span><span class="cm">/* r/w Frame Selection Register */</span><span class="cp"></span>

<span class="cm">/* Supernet 3:	extensions for 2. receive queue etc. */</span>
<span class="cp">#define	FM_MDREG3	0x60		</span><span class="cm">/* r/w Mode Register 3 */</span><span class="cp"></span>
<span class="cp">#define	FM_ST3U		0x61		</span><span class="cm">/* read upper 16-bit of status reg 3 */</span><span class="cp"></span>
<span class="cp">#define	FM_ST3L		0x62		</span><span class="cm">/* read lower 16-bit of status reg 3 */</span><span class="cp"></span>
<span class="cp">#define	FM_IMSK3U	0x63		</span><span class="cm">/* r/w upper 16-bit of IMSK reg 3 */</span><span class="cp"></span>
<span class="cp">#define	FM_IMSK3L	0x64		</span><span class="cm">/* r/w lower 16-bit of IMSK reg 3 */</span><span class="cp"></span>
<span class="cp">#define	FM_IVR		0x65		</span><span class="cm">/* read Interrupt Vector register */</span><span class="cp"></span>
<span class="cp">#define	FM_IMR		0x66		</span><span class="cm">/* r/w Interrupt mask register */</span><span class="cp"></span>
<span class="cm">/* 0x67	Hidden */</span>
<span class="cp">#define	FM_RPR2		0x68		</span><span class="cm">/* r/w the read ptr. for rec. qu. 2 */</span><span class="cp"></span>
<span class="cp">#define	FM_WPR2		0x69		</span><span class="cm">/* r/w the write ptr. for rec. qu. 2 */</span><span class="cp"></span>
<span class="cp">#define	FM_SWPR2	0x6a		</span><span class="cm">/* r/w the shadow wptr. for rec. q. 2 */</span><span class="cp"></span>
<span class="cp">#define	FM_EARV2	0x6b		</span><span class="cm">/* r/w end addr of rec. qu. 2 */</span><span class="cp"></span>
<span class="cp">#define	FM_UNLCKDLY	0x6c		</span><span class="cm">/* r/w Auto Unlock Delay register */</span><span class="cp"></span>
					<span class="cm">/* Bit 15-8: RECV2 unlock threshold */</span>
					<span class="cm">/* Bit  7-0: RECV1 unlock threshold */</span>
<span class="cm">/* 0x6f-0x73	Hidden */</span>
<span class="cp">#define	FM_LTDPA1	0x79		</span><span class="cm">/* r/w Last Trans desc ptr for A1 qu. */</span><span class="cp"></span>
<span class="cm">/* 0x80-0x9a	PLCS registers of built-in PLCS  (Supernet 3 only) */</span>

<span class="cm">/* Supernet 3: Adderss Filter Registers */</span>
<span class="cp">#define	FM_AFCMD	0xb0		</span><span class="cm">/* r/w Address Filter Command Reg */</span><span class="cp"></span>
<span class="cp">#define	FM_AFSTAT	0xb2		</span><span class="cm">/* r/w Address Filter Status Reg */</span><span class="cp"></span>
<span class="cp">#define	FM_AFBIST	0xb4		</span><span class="cm">/* r/w Address Filter BIST signature */</span><span class="cp"></span>
<span class="cp">#define	FM_AFCOMP2	0xb6		</span><span class="cm">/* r/w Address Filter Comparand 2 */</span><span class="cp"></span>
<span class="cp">#define	FM_AFCOMP1	0xb8		</span><span class="cm">/* r/w Address Filter Comparand 1 */</span><span class="cp"></span>
<span class="cp">#define	FM_AFCOMP0	0xba		</span><span class="cm">/* r/w Address Filter Comparand 0 */</span><span class="cp"></span>
<span class="cp">#define	FM_AFMASK2	0xbc		</span><span class="cm">/* r/w Address Filter Mask 2 */</span><span class="cp"></span>
<span class="cp">#define	FM_AFMASK1	0xbe		</span><span class="cm">/* r/w Address Filter Mask 1 */</span><span class="cp"></span>
<span class="cp">#define	FM_AFMASK0	0xc0		</span><span class="cm">/* r/w Address Filter Mask 0 */</span><span class="cp"></span>
<span class="cp">#define	FM_AFPERS	0xc2		</span><span class="cm">/* r/w Address Filter Personality Reg */</span><span class="cp"></span>

<span class="cm">/* Supernet 3: Orion (PDX?) Registers */</span>
<span class="cp">#define	FM_ORBIST	0xd0		</span><span class="cm">/* r/w Orion BIST signature */</span><span class="cp"></span>
<span class="cp">#define	FM_ORSTAT	0xd2		</span><span class="cm">/* r/w Orion Status Register */</span><span class="cp"></span>


<span class="cm">/*</span>
<span class="cm"> * Mode Register 1 (MDREG1)</span>
<span class="cm"> */</span>
<span class="cp">#define FM_RES0		0x0001		</span><span class="cm">/* reserved */</span><span class="cp"></span>
					<span class="cm">/* SN3: other definition */</span>
<span class="cp">#define	FM_XMTINH_HOLD	0x0002		</span><span class="cm">/* transmit-inhibit/hold bit */</span><span class="cp"></span>
					<span class="cm">/* SN3: other definition */</span>
<span class="cp">#define	FM_HOFLXI	0x0003		</span><span class="cm">/* SN3: Hold / Flush / Inhibit */</span><span class="cp"></span>
<span class="cp">#define	FM_FULL_HALF	0x0004		</span><span class="cm">/* full-duplex/half-duplex bit */</span><span class="cp"></span>
<span class="cp">#define	FM_LOCKTX	0x0008		</span><span class="cm">/* lock-transmit-asynchr.-queues bit */</span><span class="cp"></span>
<span class="cp">#define FM_EXGPA0	0x0010		</span><span class="cm">/* extended-group-addressing bit 0 */</span><span class="cp"></span>
<span class="cp">#define FM_EXGPA1	0x0020		</span><span class="cm">/* extended-group-addressing bit 1 */</span><span class="cp"></span>
<span class="cp">#define FM_DISCRY	0x0040		</span><span class="cm">/* disable-carry bit */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_SELRA	0x0080		</span><span class="cm">/* select input from PHY (1=RA,0=RB) */</span><span class="cp"></span>

<span class="cp">#define FM_ADDET	0x0700		</span><span class="cm">/* address detection */</span><span class="cp"></span>
<span class="cp">#define FM_MDAMA	(0&lt;&lt;8)		</span><span class="cm">/* address detection : DA = MA */</span><span class="cp"></span>
<span class="cp">#define FM_MDASAMA	(1&lt;&lt;8)		</span><span class="cm">/* address detection : DA=MA||SA=MA */</span><span class="cp"></span>
<span class="cp">#define	FM_MRNNSAFNMA	(2&lt;&lt;8)		</span><span class="cm">/* rec. non-NSA frames DA=MA&amp;&amp;SA!=MA */</span><span class="cp"></span>
<span class="cp">#define	FM_MRNNSAF	(3&lt;&lt;8)		</span><span class="cm">/* rec. non-NSA frames DA = MA */</span><span class="cp"></span>
<span class="cp">#define	FM_MDISRCV	(4&lt;&lt;8)		</span><span class="cm">/* disable receive function */</span><span class="cp"></span>
<span class="cp">#define	FM_MRES0	(5&lt;&lt;8)		</span><span class="cm">/* reserve */</span><span class="cp"></span>
<span class="cp">#define	FM_MLIMPROM	(6&lt;&lt;8)		</span><span class="cm">/* limited-promiscuous mode */</span><span class="cp"></span>
<span class="cp">#define FM_MPROMISCOUS	(7&lt;&lt;8)		</span><span class="cm">/* address detection : promiscuous */</span><span class="cp"></span>

<span class="cp">#define FM_SELSA	0x0800		</span><span class="cm">/* select-short-address bit */</span><span class="cp"></span>

<span class="cp">#define FM_MMODE	0x7000		</span><span class="cm">/* mode select */</span><span class="cp"></span>
<span class="cp">#define FM_MINIT	(0&lt;&lt;12)		</span><span class="cm">/* initialize */</span><span class="cp"></span>
<span class="cp">#define FM_MMEMACT	(1&lt;&lt;12)		</span><span class="cm">/* memory activate */</span><span class="cp"></span>
<span class="cp">#define FM_MONLINESP	(2&lt;&lt;12)		</span><span class="cm">/* on-line special */</span><span class="cp"></span>
<span class="cp">#define FM_MONLINE	(3&lt;&lt;12)		</span><span class="cm">/* on-line (FDDI operational mode) */</span><span class="cp"></span>
<span class="cp">#define FM_MILOOP	(4&lt;&lt;12)		</span><span class="cm">/* internal loopback */</span><span class="cp"></span>
<span class="cp">#define FM_MRES1	(5&lt;&lt;12)		</span><span class="cm">/* reserved */</span><span class="cp"></span>
<span class="cp">#define FM_MRES2	(6&lt;&lt;12)		</span><span class="cm">/* reserved */</span><span class="cp"></span>
<span class="cp">#define FM_MELOOP	(7&lt;&lt;12)		</span><span class="cm">/* external loopback */</span><span class="cp"></span>

<span class="cp">#define	FM_SNGLFRM	0x8000		</span><span class="cm">/* single-frame-receive mode */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>

<span class="cp">#define	MDR1INIT	(FM_MINIT | FM_MDAMA)</span>

<span class="cm">/*</span>
<span class="cm"> * Mode Register 2 (MDREG2)</span>
<span class="cm"> */</span>
<span class="cp">#define	FM_AFULL	0x000f		</span><span class="cm">/* 4-bit value (empty loc.in txqueue)*/</span><span class="cp"></span>
<span class="cp">#define	FM_RCVERR	0x0010		</span><span class="cm">/* rec.-errored-frames bit */</span><span class="cp"></span>
<span class="cp">#define	FM_SYMCTL	0x0020		</span><span class="cm">/* sysmbol-control bit */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define	FM_SYNPRQ	0x0040		</span><span class="cm">/* synchron.-NP-DMA-request bit */</span><span class="cp"></span>
<span class="cp">#define	FM_ENNPRQ	0x0080		</span><span class="cm">/* enable-NP-DMA-request bit */</span><span class="cp"></span>
<span class="cp">#define	FM_ENHSRQ	0x0100		</span><span class="cm">/* enable-host-request bit */</span><span class="cp"></span>
<span class="cp">#define	FM_RXFBB01	0x0600		</span><span class="cm">/* rec. frame byte boundary bit0 &amp; 1 */</span><span class="cp"></span>
<span class="cp">#define	FM_LSB		0x0800		</span><span class="cm">/* determ. ordering of bytes in buffer*/</span><span class="cp"></span>
<span class="cp">#define	FM_PARITY	0x1000		</span><span class="cm">/* 1 = even, 0 = odd */</span><span class="cp"></span>
<span class="cp">#define	FM_CHKPAR	0x2000		</span><span class="cm">/* 1 = parity of 32-bit buffer BD-bus*/</span><span class="cp"></span>
<span class="cp">#define	FM_STRPFCS	0x4000		</span><span class="cm">/* 1 = strips FCS field of rec.frame */</span><span class="cp"></span>
<span class="cp">#define	FM_BMMODE	0x8000		</span><span class="cm">/* Buffer-Memory-Mode (1 = tag mode) */</span><span class="cp"></span>
					<span class="cm">/* SN3: 1 = tag, 0 = modified tag */</span>

<span class="cm">/*</span>
<span class="cm"> * Status Register 1, Upper 16 Bits (ST1U)</span>
<span class="cm"> */</span>
<span class="cp">#define FM_STEFRMS	0x0001		</span><span class="cm">/* transmit end of frame: synchr. qu.*/</span><span class="cp"></span>
<span class="cp">#define FM_STEFRMA0	0x0002		</span><span class="cm">/* transmit end of frame: asyn. qu.0 */</span><span class="cp"></span>
<span class="cp">#define FM_STEFRMA1	0x0004		</span><span class="cm">/* transmit end of frame: asyn. qu.1 */</span><span class="cp"></span>
<span class="cp">#define FM_STEFRMA2	0x0008		</span><span class="cm">/* transmit end of frame: asyn. qu.2 */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_STECFRMS	0x0010		</span><span class="cm">/* transmit end of chain of syn. qu. */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_STECFRMA0	0x0020		</span><span class="cm">/* transmit end of chain of asyn. q0 */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_STECFRMA1	0x0040		</span><span class="cm">/* transmit end of chain of asyn. q1 */</span><span class="cp"></span>
					<span class="cm">/* SN3: STECMDA1 */</span>
<span class="cp">#define FM_STECMDA1	0x0040		</span><span class="cm">/* SN3: &#39;no description&#39; */</span><span class="cp"></span>
<span class="cp">#define FM_STECFRMA2	0x0080		</span><span class="cm">/* transmit end of chain of asyn. q2 */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define	FM_STEXDONS	0x0100		</span><span class="cm">/* transmit until XDONE in syn. qu. */</span><span class="cp"></span>
<span class="cp">#define	FM_STBFLA	0x0200		</span><span class="cm">/* asynchr.-queue trans. buffer full */</span><span class="cp"></span>
<span class="cp">#define	FM_STBFLS	0x0400		</span><span class="cm">/* synchr.-queue transm. buffer full */</span><span class="cp"></span>
<span class="cp">#define	FM_STXABRS	0x0800		</span><span class="cm">/* synchr. queue transmit-abort */</span><span class="cp"></span>
<span class="cp">#define	FM_STXABRA0	0x1000		</span><span class="cm">/* asynchr. queue 0 transmit-abort */</span><span class="cp"></span>
<span class="cp">#define	FM_STXABRA1	0x2000		</span><span class="cm">/* asynchr. queue 1 transmit-abort */</span><span class="cp"></span>
<span class="cp">#define	FM_STXABRA2	0x4000		</span><span class="cm">/* asynchr. queue 2 transmit-abort */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define	FM_SXMTABT	0x8000		</span><span class="cm">/* transmit abort */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Status Register 1, Lower 16 Bits (ST1L)</span>
<span class="cm"> */</span>
<span class="cp">#define FM_SQLCKS	0x0001		</span><span class="cm">/* queue lock for synchr. queue */</span><span class="cp"></span>
<span class="cp">#define FM_SQLCKA0	0x0002		</span><span class="cm">/* queue lock for asynchr. queue 0 */</span><span class="cp"></span>
<span class="cp">#define FM_SQLCKA1	0x0004		</span><span class="cm">/* queue lock for asynchr. queue 1 */</span><span class="cp"></span>
<span class="cp">#define FM_SQLCKA2	0x0008		</span><span class="cm">/* queue lock for asynchr. queue 2 */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_STXINFLS	0x0010		</span><span class="cm">/* transmit instruction full: syn. */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_STXINFLA0	0x0020		</span><span class="cm">/* transmit instruction full: asyn.0 */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_STXINFLA1	0x0040		</span><span class="cm">/* transmit instruction full: asyn.1 */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_STXINFLA2	0x0080		</span><span class="cm">/* transmit instruction full: asyn.2 */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_SPCEPDS	0x0100		</span><span class="cm">/* parity/coding error: syn. queue */</span><span class="cp"></span>
<span class="cp">#define FM_SPCEPDA0	0x0200		</span><span class="cm">/* parity/coding error: asyn. queue0 */</span><span class="cp"></span>
<span class="cp">#define FM_SPCEPDA1	0x0400		</span><span class="cm">/* parity/coding error: asyn. queue1 */</span><span class="cp"></span>
<span class="cp">#define FM_SPCEPDA2	0x0800		</span><span class="cm">/* parity/coding error: asyn. queue2 */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_STBURS	0x1000		</span><span class="cm">/* transmit buffer underrun: syn. q. */</span><span class="cp"></span>
<span class="cp">#define FM_STBURA0	0x2000		</span><span class="cm">/* transmit buffer underrun: asyn.0 */</span><span class="cp"></span>
<span class="cp">#define FM_STBURA1	0x4000		</span><span class="cm">/* transmit buffer underrun: asyn.1 */</span><span class="cp"></span>
<span class="cp">#define FM_STBURA2	0x8000		</span><span class="cm">/* transmit buffer underrun: asyn.2 */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>

<span class="cm">/*</span>
<span class="cm"> * Status Register 2, Upper 16 Bits (ST2U)</span>
<span class="cm"> */</span>
<span class="cp">#define FM_SOTRBEC	0x0001		</span><span class="cm">/* other beacon received */</span><span class="cp"></span>
<span class="cp">#define FM_SMYBEC	0x0002		</span><span class="cm">/* my beacon received */</span><span class="cp"></span>
<span class="cp">#define FM_SBEC		0x0004		</span><span class="cm">/* beacon state entered */</span><span class="cp"></span>
<span class="cp">#define FM_SLOCLM	0x0008		</span><span class="cm">/* low claim received */</span><span class="cp"></span>
<span class="cp">#define FM_SHICLM	0x0010		</span><span class="cm">/* high claim received */</span><span class="cp"></span>
<span class="cp">#define FM_SMYCLM	0x0020		</span><span class="cm">/* my claim received */</span><span class="cp"></span>
<span class="cp">#define FM_SCLM		0x0040		</span><span class="cm">/* claim state entered */</span><span class="cp"></span>
<span class="cp">#define FM_SERRSF	0x0080		</span><span class="cm">/* error in special frame */</span><span class="cp"></span>
<span class="cp">#define FM_SNFSLD	0x0100		</span><span class="cm">/* NP and FORMAC+ simultaneous load */</span><span class="cp"></span>
<span class="cp">#define FM_SRFRCTOV	0x0200		</span><span class="cm">/* receive frame counter overflow */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_SRCVFRM	0x0400		</span><span class="cm">/* receive frame */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_SRCVOVR	0x0800		</span><span class="cm">/* receive FIFO overflow */</span><span class="cp"></span>
<span class="cp">#define FM_SRBFL	0x1000		</span><span class="cm">/* receive buffer full */</span><span class="cp"></span>
<span class="cp">#define FM_SRABT	0x2000		</span><span class="cm">/* receive abort */</span><span class="cp"></span>
<span class="cp">#define FM_SRBMT	0x4000		</span><span class="cm">/* receive buffer empty */</span><span class="cp"></span>
<span class="cp">#define FM_SRCOMP	0x8000		</span><span class="cm">/* receive complete. Nontag mode */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Status Register 2, Lower 16 Bits (ST2L)</span>
<span class="cm"> * Attention: SN3 docu shows these bits the other way around</span>
<span class="cm"> */</span>
<span class="cp">#define FM_SRES0	0x0001		</span><span class="cm">/* reserved */</span><span class="cp"></span>
<span class="cp">#define FM_SESTRIPTK	0x0001		</span><span class="cm">/* SN3: &#39;no description&#39; */</span><span class="cp"></span>
<span class="cp">#define FM_STRTEXR	0x0002		</span><span class="cm">/* TRT expired in claim | beacon st. */</span><span class="cp"></span>
<span class="cp">#define FM_SDUPCLM	0x0004		</span><span class="cm">/* duplicate claim received */</span><span class="cp"></span>
<span class="cp">#define FM_SSIFG	0x0008		</span><span class="cm">/* short interframe gap */</span><span class="cp"></span>
<span class="cp">#define FM_SFRMCTR	0x0010		</span><span class="cm">/* frame counter overflow */</span><span class="cp"></span>
<span class="cp">#define FM_SERRCTR	0x0020		</span><span class="cm">/* error counter overflow */</span><span class="cp"></span>
<span class="cp">#define FM_SLSTCTR	0x0040		</span><span class="cm">/* lost counter overflow */</span><span class="cp"></span>
<span class="cp">#define FM_SPHINV	0x0080		</span><span class="cm">/* PHY invalid */</span><span class="cp"></span>
<span class="cp">#define FM_SADET	0x0100		</span><span class="cm">/* address detect */</span><span class="cp"></span>
<span class="cp">#define FM_SMISFRM	0x0200		</span><span class="cm">/* missed frame */</span><span class="cp"></span>
<span class="cp">#define FM_STRTEXP	0x0400		</span><span class="cm">/* TRT expired and late count &gt; 0 */</span><span class="cp"></span>
<span class="cp">#define FM_STVXEXP	0x0800		</span><span class="cm">/* TVX expired */</span><span class="cp"></span>
<span class="cp">#define FM_STKISS	0x1000		</span><span class="cm">/* token issued */</span><span class="cp"></span>
<span class="cp">#define FM_STKERR	0x2000		</span><span class="cm">/* token error */</span><span class="cp"></span>
<span class="cp">#define FM_SMULTDA	0x4000		</span><span class="cm">/* multiple destination address */</span><span class="cp"></span>
<span class="cp">#define FM_SRNGOP	0x8000		</span><span class="cm">/* ring operational */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Supernet 3:</span>
<span class="cm"> * Status Register 3, Upper 16 Bits (ST3U)</span>
<span class="cm"> */</span>
<span class="cp">#define	FM_SRQUNLCK1	0x0001		</span><span class="cm">/* receive queue unlocked queue 1 */</span><span class="cp"></span>
<span class="cp">#define	FM_SRQUNLCK2	0x0002		</span><span class="cm">/* receive queue unlocked queue 2 */</span><span class="cp"></span>
<span class="cp">#define	FM_SRPERRQ1	0x0004		</span><span class="cm">/* receive parity error rx queue 1 */</span><span class="cp"></span>
<span class="cp">#define	FM_SRPERRQ2	0x0008		</span><span class="cm">/* receive parity error rx queue 2 */</span><span class="cp"></span>
					<span class="cm">/* Bit 4-10: reserved */</span>
<span class="cp">#define	FM_SRCVOVR2	0x0800		</span><span class="cm">/* receive FIFO overfull rx queue 2 */</span><span class="cp"></span>
<span class="cp">#define	FM_SRBFL2	0x1000		</span><span class="cm">/* receive buffer full rx queue 2 */</span><span class="cp"></span>
<span class="cp">#define	FM_SRABT2	0x2000		</span><span class="cm">/* receive abort rx queue 2 */</span><span class="cp"></span>
<span class="cp">#define	FM_SRBMT2	0x4000		</span><span class="cm">/* receive buf empty rx queue 2 */</span><span class="cp"></span>
<span class="cp">#define	FM_SRCOMP2	0x8000		</span><span class="cm">/* receive comp rx queue 2 */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Supernet 3:</span>
<span class="cm"> * Status Register 3, Lower 16 Bits (ST3L)</span>
<span class="cm"> */</span>
<span class="cp">#define	FM_AF_BIST_DONE		0x0001	</span><span class="cm">/* Address Filter BIST is done */</span><span class="cp"></span>
<span class="cp">#define	FM_PLC_BIST_DONE	0x0002	</span><span class="cm">/* internal PLC Bist is done */</span><span class="cp"></span>
<span class="cp">#define	FM_PDX_BIST_DONE	0x0004	</span><span class="cm">/* PDX BIST is done */</span><span class="cp"></span>
					<span class="cm">/* Bit  3: reserved */</span>
<span class="cp">#define	FM_SICAMDAMAT		0x0010	</span><span class="cm">/* Status internal CAM DA match */</span><span class="cp"></span>
<span class="cp">#define	FM_SICAMDAXACT		0x0020	</span><span class="cm">/* Status internal CAM DA exact match */</span><span class="cp"></span>
<span class="cp">#define	FM_SICAMSAMAT		0x0040	</span><span class="cm">/* Status internal CAM SA match */</span><span class="cp"></span>
<span class="cp">#define	FM_SICAMSAXACT		0x0080	</span><span class="cm">/* Status internal CAM SA exact match */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * MAC State-Machine Register FM_STMCHN</span>
<span class="cm"> */</span>
<span class="cp">#define	FM_MDRTAG	0x0004		</span><span class="cm">/* tag bit of long word read */</span><span class="cp"></span>
<span class="cp">#define	FM_SNPPND	0x0008		</span><span class="cm">/* r/w from buffer mem. is pending */</span><span class="cp"></span>
<span class="cp">#define	FM_TXSTAT	0x0070		</span><span class="cm">/* transmitter state machine state */</span><span class="cp"></span>
<span class="cp">#define	FM_RCSTAT	0x0380		</span><span class="cm">/* receiver state machine state */</span><span class="cp"></span>
<span class="cp">#define	FM_TM01		0x0c00		</span><span class="cm">/* indicate token mode */</span><span class="cp"></span>
<span class="cp">#define	FM_SIM		0x1000		</span><span class="cm">/* indicate send immediate-mode */</span><span class="cp"></span>
<span class="cp">#define	FM_REV		0xe000		</span><span class="cm">/* FORMAC Plus revision number */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Supernet 3</span>
<span class="cm"> * Mode Register 3</span>
<span class="cm"> */</span>
<span class="cp">#define	FM_MENRS	0x0001		</span><span class="cm">/* Ena enhanced rec status encoding */</span><span class="cp"></span>
<span class="cp">#define	FM_MENXS	0x0002		</span><span class="cm">/* Ena enhanced xmit status encoding */</span><span class="cp"></span>
<span class="cp">#define	FM_MENXCT	0x0004		</span><span class="cm">/* Ena EXACT/INEXACT matching */</span><span class="cp"></span>
<span class="cp">#define	FM_MENAFULL	0x0008		</span><span class="cm">/* Ena enh QCTRL encoding for AFULL */</span><span class="cp"></span>
<span class="cp">#define	FM_MEIND	0x0030		</span><span class="cm">/* Ena enh A,C indicator settings */</span><span class="cp"></span>
<span class="cp">#define	FM_MENQCTRL	0x0040		</span><span class="cm">/* Ena enh QCTRL encoding */</span><span class="cp"></span>
<span class="cp">#define	FM_MENRQAUNLCK	0x0080		</span><span class="cm">/* Ena rec q auto unlock */</span><span class="cp"></span>
<span class="cp">#define	FM_MENDAS	0x0100		</span><span class="cm">/* Ena DAS connections by cntr MUX */</span><span class="cp"></span>
<span class="cp">#define	FM_MENPLCCST	0x0200		</span><span class="cm">/* Ena Counter Segm test in PLC blck */</span><span class="cp"></span>
<span class="cp">#define	FM_MENSGLINT	0x0400		</span><span class="cm">/* Ena Vectored Interrupt reading */</span><span class="cp"></span>
<span class="cp">#define	FM_MENDRCV	0x0800		</span><span class="cm">/* Ena dual receive queue operation */</span><span class="cp"></span>
<span class="cp">#define	FM_MENFCLOC	0x3000		</span><span class="cm">/* Ena FC location within frm data */</span><span class="cp"></span>
<span class="cp">#define	FM_MENTRCMD	0x4000		</span><span class="cm">/* Ena ASYNC1 xmit only after command */</span><span class="cp"></span>
<span class="cp">#define	FM_MENTDLPBK	0x8000		</span><span class="cm">/* Ena TDAT to RDAT lkoopback */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Supernet 3</span>
<span class="cm"> * Frame Selection Register</span>
<span class="cm"> */</span>
<span class="cp">#define	FM_RECV1	0x000f		</span><span class="cm">/* options for receive queue 1 */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV1_ALL	(0&lt;&lt;0)		</span><span class="cm">/* receive all frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV1_LLC	(1&lt;&lt;0)		</span><span class="cm">/* rec all LLC frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV1_SMT	(2&lt;&lt;0)		</span><span class="cm">/* rec all SMT frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV1_NSMT	(3&lt;&lt;0)		</span><span class="cm">/* rec non-SMT frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV1_IMP	(4&lt;&lt;0)		</span><span class="cm">/* rec Implementor frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV1_MAC	(5&lt;&lt;0)		</span><span class="cm">/* rec all MAC frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV1_SLLC	(6&lt;&lt;0)		</span><span class="cm">/* rec all sync LLC frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV1_ALLC	(7&lt;&lt;0)		</span><span class="cm">/* rec all async LLC frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV1_VOID	(8&lt;&lt;0)		</span><span class="cm">/* rec all void frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV1_ALSMT	(9&lt;&lt;0)		</span><span class="cm">/* rec all async LLC &amp; SMT frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RECV2	0x00f0		</span><span class="cm">/* options for receive queue 2 */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV2_ALL	(0&lt;&lt;4)		</span><span class="cm">/* receive all other frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV2_LLC	(1&lt;&lt;4)		</span><span class="cm">/* rec all LLC frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV2_SMT	(2&lt;&lt;4)		</span><span class="cm">/* rec all SMT frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV2_NSMT	(3&lt;&lt;4)		</span><span class="cm">/* rec non-SMT frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV2_IMP	(4&lt;&lt;4)		</span><span class="cm">/* rec Implementor frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV2_MAC	(5&lt;&lt;4)		</span><span class="cm">/* rec all MAC frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV2_SLLC	(6&lt;&lt;4)		</span><span class="cm">/* rec all sync LLC frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV2_ALLC	(7&lt;&lt;4)		</span><span class="cm">/* rec all async LLC frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV2_VOID	(8&lt;&lt;4)		</span><span class="cm">/* rec all void frames */</span><span class="cp"></span>
<span class="cp">#define	FM_RCV2_ALSMT	(9&lt;&lt;4)		</span><span class="cm">/* rec all async LLC &amp; SMT frames */</span><span class="cp"></span>
<span class="cp">#define	FM_ENXMTADSWAP	0x4000		</span><span class="cm">/* enh rec addr swap (phys -&gt; can) */</span><span class="cp"></span>
<span class="cp">#define	FM_ENRCVADSWAP	0x8000		</span><span class="cm">/* enh tx addr swap (can -&gt; phys) */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Supernet 3:</span>
<span class="cm"> * Address Filter Command Register (AFCMD)</span>
<span class="cm"> */</span>
<span class="cp">#define	FM_INST		0x0007		</span><span class="cm">/* Address Filter Operation */</span><span class="cp"></span>
<span class="cp">#define FM_IINV_CAM	(0&lt;&lt;0)		</span><span class="cm">/* Invalidate CAM */</span><span class="cp"></span>
<span class="cp">#define FM_IWRITE_CAM	(1&lt;&lt;0)		</span><span class="cm">/* Write CAM */</span><span class="cp"></span>
<span class="cp">#define FM_IREAD_CAM	(2&lt;&lt;0)		</span><span class="cm">/* Read CAM */</span><span class="cp"></span>
<span class="cp">#define FM_IRUN_BIST	(3&lt;&lt;0)		</span><span class="cm">/* Run BIST */</span><span class="cp"></span>
<span class="cp">#define FM_IFIND	(4&lt;&lt;0)		</span><span class="cm">/* Find */</span><span class="cp"></span>
<span class="cp">#define FM_IINV		(5&lt;&lt;0)		</span><span class="cm">/* Invalidate */</span><span class="cp"></span>
<span class="cp">#define FM_ISKIP	(6&lt;&lt;0)		</span><span class="cm">/* Skip */</span><span class="cp"></span>
<span class="cp">#define FM_ICL_SKIP	(7&lt;&lt;0)		</span><span class="cm">/* Clear all SKIP bits */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Supernet 3:</span>
<span class="cm"> * Address Filter Status Register (AFSTAT)</span>
<span class="cm"> */</span>
					<span class="cm">/* Bit  0-4: reserved */</span>
<span class="cp">#define	FM_REV_NO	0x00e0		</span><span class="cm">/* Revision Number of Address Filter */</span><span class="cp"></span>
<span class="cp">#define	FM_BIST_DONE	0x0100		</span><span class="cm">/* BIST complete */</span><span class="cp"></span>
<span class="cp">#define	FM_EMPTY	0x0200		</span><span class="cm">/* CAM empty */</span><span class="cp"></span>
<span class="cp">#define	FM_ERROR	0x0400		</span><span class="cm">/* Error (improper operation) */</span><span class="cp"></span>
<span class="cp">#define	FM_MULT		0x0800		</span><span class="cm">/* Multiple Match */</span><span class="cp"></span>
<span class="cp">#define	FM_EXACT	0x1000		</span><span class="cm">/* Exact Match */</span><span class="cp"></span>
<span class="cp">#define	FM_FOUND	0x2000		</span><span class="cm">/* Comparand found in CAM */</span><span class="cp"></span>
<span class="cp">#define	FM_FULL		0x4000		</span><span class="cm">/* CAM full */</span><span class="cp"></span>
<span class="cp">#define	FM_DONE		0x8000		</span><span class="cm">/* DONE indicator */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Supernet 3:</span>
<span class="cm"> * BIST Signature Register (AFBIST)</span>
<span class="cm"> */</span>
<span class="cp">#define	AF_BIST_SIGNAT	0x0553		</span><span class="cm">/* Address Filter BIST Signature */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Supernet 3:</span>
<span class="cm"> * Personality Register (AFPERS)</span>
<span class="cm"> */</span>
<span class="cp">#define	FM_VALID	0x0001		</span><span class="cm">/* CAM Entry Valid */</span><span class="cp"></span>
<span class="cp">#define	FM_DA		0x0002		</span><span class="cm">/* Destination Address */</span><span class="cp"></span>
<span class="cp">#define	FM_DAX		0x0004		</span><span class="cm">/* Destination Address Exact */</span><span class="cp"></span>
<span class="cp">#define	FM_SA		0x0008		</span><span class="cm">/* Source Address */</span><span class="cp"></span>
<span class="cp">#define	FM_SAX		0x0010		</span><span class="cm">/* Source Address Exact */</span><span class="cp"></span>
<span class="cp">#define	FM_SKIP		0x0020		</span><span class="cm">/* Skip this entry */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * instruction set for command register 1 (NPADDR6-0 = 0x00)</span>
<span class="cm"> */</span>
<span class="cp">#define FM_IRESET	0x01		</span><span class="cm">/* software reset */</span><span class="cp"></span>
<span class="cp">#define FM_IRMEMWI	0x02		</span><span class="cm">/* load Memory Data Reg., inc MARR */</span><span class="cp"></span>
<span class="cp">#define FM_IRMEMWO	0x03		</span><span class="cm">/* load MDR from buffer memory, n.i. */</span><span class="cp"></span>
<span class="cp">#define FM_IIL		0x04		</span><span class="cm">/* idle/listen */</span><span class="cp"></span>
<span class="cp">#define FM_ICL		0x05		</span><span class="cm">/* claim/listen */</span><span class="cp"></span>
<span class="cp">#define FM_IBL		0x06		</span><span class="cm">/* beacon/listen */</span><span class="cp"></span>
<span class="cp">#define FM_ILTVX	0x07		</span><span class="cm">/* load TVX timer from TVX reg */</span><span class="cp"></span>
<span class="cp">#define FM_INRTM	0x08		</span><span class="cm">/* nonrestricted token mode */</span><span class="cp"></span>
<span class="cp">#define FM_IENTM	0x09		</span><span class="cm">/* enter nonrestricted token mode */</span><span class="cp"></span>
<span class="cp">#define FM_IERTM	0x0a		</span><span class="cm">/* enter restricted token mode */</span><span class="cp"></span>
<span class="cp">#define FM_IRTM		0x0b		</span><span class="cm">/* restricted token mode */</span><span class="cp"></span>
<span class="cp">#define FM_ISURT	0x0c		</span><span class="cm">/* send unrestricted token */</span><span class="cp"></span>
<span class="cp">#define FM_ISRT		0x0d		</span><span class="cm">/* send restricted token */</span><span class="cp"></span>
<span class="cp">#define FM_ISIM		0x0e		</span><span class="cm">/* enter send-immediate mode */</span><span class="cp"></span>
<span class="cp">#define FM_IESIM	0x0f		</span><span class="cm">/* exit send-immediate mode */</span><span class="cp"></span>
<span class="cp">#define FM_ICLLS	0x11		</span><span class="cm">/* clear synchronous queue lock */</span><span class="cp"></span>
<span class="cp">#define FM_ICLLA0	0x12		</span><span class="cm">/* clear asynchronous queue 0 lock */</span><span class="cp"></span>
<span class="cp">#define FM_ICLLA1	0x14		</span><span class="cm">/* clear asynchronous queue 1 lock */</span><span class="cp"></span>
<span class="cp">#define FM_ICLLA2	0x18		</span><span class="cm">/* clear asynchronous queue 2 lock */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_ICLLR	0x20		</span><span class="cm">/* clear receive queue (SN3:1) lock */</span><span class="cp"></span>
<span class="cp">#define FM_ICLLR2	0x21		</span><span class="cm">/* SN3: clear receive queue 2 lock */</span><span class="cp"></span>
<span class="cp">#define FM_ITRXBUS	0x22		</span><span class="cm">/* SN3: Tristate X-Bus (SAS only) */</span><span class="cp"></span>
<span class="cp">#define FM_IDRXBUS	0x23		</span><span class="cm">/* SN3: drive X-Bus */</span><span class="cp"></span>
<span class="cp">#define FM_ICLLAL	0x3f		</span><span class="cm">/* clear all queue locks */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * instruction set for command register 2 (NPADDR6-0 = 0x01)</span>
<span class="cm"> */</span>
<span class="cp">#define FM_ITRS		0x01		</span><span class="cm">/* transmit synchronous queue */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_ITRA0	0x02		</span><span class="cm">/* transmit asynchronous queue 0 */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_ITRA1	0x04		</span><span class="cm">/* transmit asynchronous queue 1 */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_ITRA2	0x08		</span><span class="cm">/* transmit asynchronous queue 2 */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define FM_IACTR	0x10		</span><span class="cm">/* abort current transmit activity */</span><span class="cp"></span>
<span class="cp">#define FM_IRSTQ	0x20		</span><span class="cm">/* reset transmit queues */</span><span class="cp"></span>
<span class="cp">#define FM_ISTTB	0x30		</span><span class="cm">/* set tag bit */</span><span class="cp"></span>
<span class="cp">#define FM_IERSF	0x40		</span><span class="cm">/* enable receive single frame */</span><span class="cp"></span>
					<span class="cm">/* SN3: reserved */</span>
<span class="cp">#define	FM_ITR		0x50		</span><span class="cm">/* SN3: Transmit Command */</span><span class="cp"></span>


<span class="cm">/*</span>
<span class="cm"> *	defines for PLC (Am79C864)</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> *  PLC read/write (r/w) registers</span>
<span class="cm"> */</span>
<span class="cp">#define PL_CNTRL_A	0x00		</span><span class="cm">/* control register A (r/w) */</span><span class="cp"></span>
<span class="cp">#define PL_CNTRL_B	0x01		</span><span class="cm">/* control register B (r/w) */</span><span class="cp"></span>
<span class="cp">#define PL_INTR_MASK	0x02		</span><span class="cm">/* interrupt mask (r/w) */</span><span class="cp"></span>
<span class="cp">#define PL_XMIT_VECTOR	0x03		</span><span class="cm">/* transmit vector register (r/w) */</span><span class="cp"></span>
<span class="cp">#define PL_VECTOR_LEN	0x04		</span><span class="cm">/* transmit vector length (r/w) */</span><span class="cp"></span>
<span class="cp">#define PL_LE_THRESHOLD	0x05		</span><span class="cm">/* link error event threshold (r/w) */</span><span class="cp"></span>
<span class="cp">#define PL_C_MIN	0x06		</span><span class="cm">/* minimum connect state time (r/w) */</span><span class="cp"></span>
<span class="cp">#define PL_TL_MIN	0x07		</span><span class="cm">/* min. line state transmit t. (r/w) */</span><span class="cp"></span>
<span class="cp">#define PL_TB_MIN	0x08		</span><span class="cm">/* minimum break time (r/w) */</span><span class="cp"></span>
<span class="cp">#define PL_T_OUT	0x09		</span><span class="cm">/* signal timeout (r/w) */</span><span class="cp"></span>
<span class="cp">#define PL_CNTRL_C	0x0a		</span><span class="cm">/* control register C (r/w) */</span><span class="cp"></span>
<span class="cp">#define PL_LC_LENGTH	0x0b		</span><span class="cm">/* link confidence test time (r/w) */</span><span class="cp"></span>
<span class="cp">#define PL_T_SCRUB	0x0c		</span><span class="cm">/* scrub time = MAC TVX (r/w) */</span><span class="cp"></span>
<span class="cp">#define PL_NS_MAX	0x0d		</span><span class="cm">/* max. noise time before break (r/w)*/</span><span class="cp"></span>
<span class="cp">#define PL_TPC_LOAD_V	0x0e		</span><span class="cm">/* TPC timer load value (write only) */</span><span class="cp"></span>
<span class="cp">#define PL_TNE_LOAD_V	0x0f		</span><span class="cm">/* TNE timer load value (write only) */</span><span class="cp"></span>
<span class="cp">#define PL_STATUS_A	0x10		</span><span class="cm">/* status register A (read only) */</span><span class="cp"></span>
<span class="cp">#define PL_STATUS_B	0x11		</span><span class="cm">/* status register B (read only) */</span><span class="cp"></span>
<span class="cp">#define PL_TPC		0x12		</span><span class="cm">/* timer for PCM (ro) [20.48 us] */</span><span class="cp"></span>
<span class="cp">#define PL_TNE		0x13		</span><span class="cm">/* time of noise event [0.32 us] */</span><span class="cp"></span>
<span class="cp">#define PL_CLK_DIV	0x14		</span><span class="cm">/* TNE clock divider (read only) */</span><span class="cp"></span>
<span class="cp">#define PL_BIST_SIGNAT	0x15		</span><span class="cm">/* built in self test signature (ro)*/</span><span class="cp"></span>
<span class="cp">#define PL_RCV_VECTOR	0x16		</span><span class="cm">/* receive vector reg. (read only) */</span><span class="cp"></span>
<span class="cp">#define PL_INTR_EVENT	0x17		</span><span class="cm">/* interrupt event reg. (read only) */</span><span class="cp"></span>
<span class="cp">#define PL_VIOL_SYM_CTR	0x18		</span><span class="cm">/* violation symbol count. (read o) */</span><span class="cp"></span>
<span class="cp">#define PL_MIN_IDLE_CTR	0x19		</span><span class="cm">/* minimum idle counter (read only) */</span><span class="cp"></span>
<span class="cp">#define PL_LINK_ERR_CTR	0x1a		</span><span class="cm">/* link error event ctr.(read only) */</span><span class="cp"></span>
<span class="cp">#ifdef	MOT_ELM</span>
<span class="cp">#define	PL_T_FOT_ASS	0x1e		</span><span class="cm">/* FOTOFF Assert Timer */</span><span class="cp"></span>
<span class="cp">#define	PL_T_FOT_DEASS	0x1f		</span><span class="cm">/* FOTOFF Deassert Timer */</span><span class="cp"></span>
<span class="cp">#endif	</span><span class="cm">/* MOT_ELM */</span><span class="cp"></span>

<span class="cp">#ifdef	MOT_ELM</span>
<span class="cm">/*</span>
<span class="cm"> * Special Quad-Elm Registers.</span>
<span class="cm"> * A Quad-ELM consists of for ELMs and these additional registers.</span>
<span class="cm"> */</span>
<span class="cp">#define	QELM_XBAR_W	0x80		</span><span class="cm">/* Crossbar Control ELM W */</span><span class="cp"></span>
<span class="cp">#define	QELM_XBAR_X	0x81		</span><span class="cm">/* Crossbar Control ELM X */</span><span class="cp"></span>
<span class="cp">#define	QELM_XBAR_Y	0x82		</span><span class="cm">/* Crossbar Control ELM Y */</span><span class="cp"></span>
<span class="cp">#define	QELM_XBAR_Z	0x83		</span><span class="cm">/* Crossbar Control ELM Z */</span><span class="cp"></span>
<span class="cp">#define	QELM_XBAR_P	0x84		</span><span class="cm">/* Crossbar Control Bus P */</span><span class="cp"></span>
<span class="cp">#define	QELM_XBAR_S	0x85		</span><span class="cm">/* Crossbar Control Bus S */</span><span class="cp"></span>
<span class="cp">#define	QELM_XBAR_R	0x86		</span><span class="cm">/* Crossbar Control Bus R */</span><span class="cp"></span>
<span class="cp">#define	QELM_WR_XBAR	0x87		</span><span class="cm">/* Write the Crossbar now (write) */</span><span class="cp"></span>
<span class="cp">#define	QELM_CTR_W	0x88		</span><span class="cm">/* Counter W */</span><span class="cp"></span>
<span class="cp">#define	QELM_CTR_X	0x89		</span><span class="cm">/* Counter X */</span><span class="cp"></span>
<span class="cp">#define	QELM_CTR_Y	0x8a		</span><span class="cm">/* Counter Y */</span><span class="cp"></span>
<span class="cp">#define	QELM_CTR_Z	0x8b		</span><span class="cm">/* Counter Z */</span><span class="cp"></span>
<span class="cp">#define	QELM_INT_MASK	0x8c		</span><span class="cm">/* Interrupt mask register */</span><span class="cp"></span>
<span class="cp">#define	QELM_INT_DATA	0x8d		</span><span class="cm">/* Interrupt data (event) register */</span><span class="cp"></span>
<span class="cp">#define	QELM_ELMB	0x00		</span><span class="cm">/* Elm base */</span><span class="cp"></span>
<span class="cp">#define	QELM_ELM_SIZE	0x20		</span><span class="cm">/* ELM size */</span><span class="cp"></span>
<span class="cp">#endif	</span><span class="cm">/* MOT_ELM */</span><span class="cp"></span>
<span class="cm">/*</span>
<span class="cm"> * PLC control register A (PL_CNTRL_A: log. addr. 0x00)</span>
<span class="cm"> * It is used for timer configuration, specification of PCM MAINT state option,</span>
<span class="cm"> * counter interrupt frequency, PLC data path config. and Built In Self Test.</span>
<span class="cm"> */</span>
<span class="cp">#define	PL_RUN_BIST	0x0001		</span><span class="cm">/* begin running its Built In Self T.*/</span><span class="cp"></span>
<span class="cp">#define	PL_RF_DISABLE	0x0002		</span><span class="cm">/* disable the Repeat Filter state m.*/</span><span class="cp"></span>
<span class="cp">#define	PL_SC_REM_LOOP	0x0004		</span><span class="cm">/* remote loopback path */</span><span class="cp"></span>
<span class="cp">#define	PL_SC_BYPASS	0x0008		</span><span class="cm">/* by providing a physical bypass */</span><span class="cp"></span>
<span class="cp">#define	PL_LM_LOC_LOOP	0x0010		</span><span class="cm">/* loop path just after elastic buff.*/</span><span class="cp"></span>
<span class="cp">#define	PL_EB_LOC_LOOP	0x0020		</span><span class="cm">/* loop path just prior to PDT/PDR IF*/</span><span class="cp"></span>
<span class="cp">#define	PL_FOT_OFF	0x0040		</span><span class="cm">/* assertion of /FOTOFF pin of PLC */</span><span class="cp"></span>
<span class="cp">#define	PL_LOOPBACK	0x0080		</span><span class="cm">/* it cause the /LPBCK pin ass. low */</span><span class="cp"></span>
<span class="cp">#define	PL_MINI_CTR_INT 0x0100		</span><span class="cm">/* partially contr. when bit is ass. */</span><span class="cp"></span>
<span class="cp">#define	PL_VSYM_CTR_INT	0x0200		</span><span class="cm">/* controls when int bit is asserted */</span><span class="cp"></span>
<span class="cp">#define	PL_ENA_PAR_CHK	0x0400		</span><span class="cm">/* enable parity check */</span><span class="cp"></span>
<span class="cp">#define	PL_REQ_SCRUB	0x0800		</span><span class="cm">/* limited access to scrub capability*/</span><span class="cp"></span>
<span class="cp">#define	PL_TPC_16BIT	0x1000		</span><span class="cm">/* causes the TPC as a 16 bit timer */</span><span class="cp"></span>
<span class="cp">#define	PL_TNE_16BIT	0x2000		</span><span class="cm">/* causes the TNE as a 16 bit timer */</span><span class="cp"></span>
<span class="cp">#define	PL_NOISE_TIMER	0x4000		</span><span class="cm">/* allows the noise timing function */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * PLC control register B (PL_CNTRL_B: log. addr. 0x01)</span>
<span class="cm"> * It contains signals and requeste to direct the process of PCM and it is also</span>
<span class="cm"> * used to control the Line State Match interrupt.</span>
<span class="cm"> */</span>
<span class="cp">#define	PL_PCM_CNTRL	0x0003		</span><span class="cm">/* control PCM state machine */</span><span class="cp"></span>
<span class="cp">#define	PL_PCM_NAF	(0)		</span><span class="cm">/* state is not affected */</span><span class="cp"></span>
<span class="cp">#define	PL_PCM_START	(1)		</span><span class="cm">/* goes to the BREAK state */</span><span class="cp"></span>
<span class="cp">#define	PL_PCM_TRACE	(2)		</span><span class="cm">/* goes to the TRACE state */</span><span class="cp"></span>
<span class="cp">#define	PL_PCM_STOP	(3)		</span><span class="cm">/* goes to the OFF state */</span><span class="cp"></span>

<span class="cp">#define	PL_MAINT	0x0004		</span><span class="cm">/* if OFF state --&gt; MAINT state */</span><span class="cp"></span>
<span class="cp">#define	PL_LONG		0x0008		</span><span class="cm">/* perf. a long Link Confid.Test(LCT)*/</span><span class="cp"></span>
<span class="cp">#define	PL_PC_JOIN	0x0010		</span><span class="cm">/* if NEXT state --&gt; JOIN state */</span><span class="cp"></span>

<span class="cp">#define	PL_PC_LOOP	0x0060		</span><span class="cm">/* loopback used in the LCT */</span><span class="cp"></span>
<span class="cp">#define	PL_NOLCT	(0&lt;&lt;5)		</span><span class="cm">/* no LCT is performed */</span><span class="cp"></span>
<span class="cp">#define	PL_TPDR		(1&lt;&lt;5)		</span><span class="cm">/* PCM asserts transmit PDR */</span><span class="cp"></span>
<span class="cp">#define	PL_TIDLE	(2&lt;&lt;5)		</span><span class="cm">/* PCM asserts transmit idle */</span><span class="cp"></span>
<span class="cp">#define	PL_RLBP		(3&lt;&lt;5)		</span><span class="cm">/* trans. PDR &amp; remote loopb. path */</span><span class="cp"></span>

<span class="cp">#define	PL_CLASS_S	0x0080		</span><span class="cm">/* signif. that single att. station */</span><span class="cp"></span>

<span class="cp">#define	PL_MAINT_LS	0x0700		</span><span class="cm">/* line state while in the MAINT st. */</span><span class="cp"></span>
<span class="cp">#define	PL_M_QUI0	(0&lt;&lt;8)		</span><span class="cm">/* transmit QUIET line state */</span><span class="cp"></span>
<span class="cp">#define	PL_M_IDLE	(1&lt;&lt;8)		</span><span class="cm">/* transmit IDLE line state */</span><span class="cp"></span>
<span class="cp">#define	PL_M_HALT	(2&lt;&lt;8)		</span><span class="cm">/* transmit HALT line state */</span><span class="cp"></span>
<span class="cp">#define	PL_M_MASTR	(3&lt;&lt;8)		</span><span class="cm">/* transmit MASTER line state */</span><span class="cp"></span>
<span class="cp">#define	PL_M_QUI1	(4&lt;&lt;8)		</span><span class="cm">/* transmit QUIET line state */</span><span class="cp"></span>
<span class="cp">#define	PL_M_QUI2	(5&lt;&lt;8)		</span><span class="cm">/* transmit QUIET line state */</span><span class="cp"></span>
<span class="cp">#define	PL_M_TPDR	(6&lt;&lt;8)		</span><span class="cm">/* tr. PHY_DATA requ.-symbol is tr.ed*/</span><span class="cp"></span>
<span class="cp">#define	PL_M_QUI3	(7&lt;&lt;8)		</span><span class="cm">/* transmit QUIET line state */</span><span class="cp"></span>

<span class="cp">#define	PL_MATCH_LS	0x7800		</span><span class="cm">/* line state to be comp. with curr.*/</span><span class="cp"></span>
<span class="cp">#define	PL_I_ANY	(0&lt;&lt;11)		</span><span class="cm">/* Int. on any change in *_LINE_ST */</span><span class="cp"></span>
<span class="cp">#define	PL_I_IDLE	(1&lt;&lt;11)		</span><span class="cm">/* Interrupt on IDLE line state */</span><span class="cp"></span>
<span class="cp">#define	PL_I_HALT	(2&lt;&lt;11)		</span><span class="cm">/* Interrupt on HALT line state */</span><span class="cp"></span>
<span class="cp">#define	PL_I_MASTR	(4&lt;&lt;11)		</span><span class="cm">/* Interrupt on MASTER line state */</span><span class="cp"></span>
<span class="cp">#define	PL_I_QUIET	(8&lt;&lt;11)		</span><span class="cm">/* Interrupt on QUIET line state */</span><span class="cp"></span>

<span class="cp">#define	PL_CONFIG_CNTRL	0x8000		</span><span class="cm">/* control over scrub, byp. &amp; loopb.*/</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * PLC control register C (PL_CNTRL_C: log. addr. 0x0a)</span>
<span class="cm"> * It contains the scrambling control registers (PLC-S only)</span>
<span class="cm"> */</span>
<span class="cp">#define PL_C_CIPHER_ENABLE	(1&lt;&lt;0)	</span><span class="cm">/* enable scrambler */</span><span class="cp"></span>
<span class="cp">#define PL_C_CIPHER_LPBCK	(1&lt;&lt;1)	</span><span class="cm">/* loopback scrambler */</span><span class="cp"></span>
<span class="cp">#define PL_C_SDOFF_ENABLE	(1&lt;&lt;6)	</span><span class="cm">/* enable SDOFF timer */</span><span class="cp"></span>
<span class="cp">#define PL_C_SDON_ENABLE	(1&lt;&lt;7)	</span><span class="cm">/* enable SDON timer */</span><span class="cp"></span>
<span class="cp">#ifdef	MOT_ELM</span>
<span class="cp">#define PL_C_FOTOFF_CTRL	(3&lt;&lt;2)	</span><span class="cm">/* FOTOFF timer control */</span><span class="cp"></span>
<span class="cp">#define PL_C_FOTOFF_TIM		(0&lt;&lt;2)	</span><span class="cm">/* FOTOFF use timer for (de)-assert */</span><span class="cp"></span>
<span class="cp">#define PL_C_FOTOFF_INA		(2&lt;&lt;2)	</span><span class="cm">/* FOTOFF forced inactive */</span><span class="cp"></span>
<span class="cp">#define PL_C_FOTOFF_ACT		(3&lt;&lt;2)	</span><span class="cm">/* FOTOFF forced active */</span><span class="cp"></span>
<span class="cp">#define PL_C_FOTOFF_SRCE	(1&lt;&lt;4)	</span><span class="cm">/* FOTOFF source is PCM state != OFF */</span><span class="cp"></span>
<span class="cp">#define	PL_C_RXDATA_EN		(1&lt;&lt;5)	</span><span class="cm">/* Rec scr data forced to 0 */</span><span class="cp"></span>
<span class="cp">#define	PL_C_SDNRZEN		(1&lt;&lt;8)	</span><span class="cm">/* Monitor rec descr. data for act */</span><span class="cp"></span>
<span class="cp">#else	</span><span class="cm">/* nMOT_ELM */</span><span class="cp"></span>
<span class="cp">#define PL_C_FOTOFF_CTRL	(3&lt;&lt;8)	</span><span class="cm">/* FOTOFF timer control */</span><span class="cp"></span>
<span class="cp">#define PL_C_FOTOFF_0		(0&lt;&lt;8)	</span><span class="cm">/* timer off */</span><span class="cp"></span>
<span class="cp">#define PL_C_FOTOFF_30		(1&lt;&lt;8)	</span><span class="cm">/* 30uS */</span><span class="cp"></span>
<span class="cp">#define PL_C_FOTOFF_50		(2&lt;&lt;8)	</span><span class="cm">/* 50uS */</span><span class="cp"></span>
<span class="cp">#define PL_C_FOTOFF_NEVER	(3&lt;&lt;8)	</span><span class="cm">/* never */</span><span class="cp"></span>
<span class="cp">#define PL_C_SDON_TIMER		(3&lt;&lt;10)	</span><span class="cm">/* SDON timer control */</span><span class="cp"></span>
<span class="cp">#define PL_C_SDON_084		(0&lt;&lt;10)	</span><span class="cm">/* 0.84 uS */</span><span class="cp"></span>
<span class="cp">#define PL_C_SDON_132		(1&lt;&lt;10)	</span><span class="cm">/* 1.32 uS */</span><span class="cp"></span>
<span class="cp">#define PL_C_SDON_252		(2&lt;&lt;10)	</span><span class="cm">/* 2.52 uS */</span><span class="cp"></span>
<span class="cp">#define PL_C_SDON_512		(3&lt;&lt;10)	</span><span class="cm">/* 5.12 uS */</span><span class="cp"></span>
<span class="cp">#define PL_C_SOFF_TIMER		(3&lt;&lt;12)	</span><span class="cm">/* SDOFF timer control */</span><span class="cp"></span>
<span class="cp">#define PL_C_SOFF_076		(0&lt;&lt;12)	</span><span class="cm">/* 0.76 uS */</span><span class="cp"></span>
<span class="cp">#define PL_C_SOFF_132		(1&lt;&lt;12)	</span><span class="cm">/* 1.32 uS */</span><span class="cp"></span>
<span class="cp">#define PL_C_SOFF_252		(2&lt;&lt;12)	</span><span class="cm">/* 2.52 uS */</span><span class="cp"></span>
<span class="cp">#define PL_C_SOFF_512		(3&lt;&lt;12)	</span><span class="cm">/* 5.12 uS */</span><span class="cp"></span>
<span class="cp">#define PL_C_TSEL		(3&lt;&lt;14)	</span><span class="cm">/* scrambler path select */</span><span class="cp"></span>
<span class="cp">#endif	</span><span class="cm">/* nMOT_ELM */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * PLC status register A (PL_STATUS_A: log. addr. 0x10)</span>
<span class="cm"> * It is used to report status information to the Node Processor about the </span>
<span class="cm"> * Line State Machine (LSM).</span>
<span class="cm"> */</span>
<span class="cp">#ifdef	MOT_ELM</span>
<span class="cp">#define PLC_INT_MASK	0xc000		</span><span class="cm">/* ELM integration bits in status A */</span><span class="cp"></span>
<span class="cp">#define PLC_INT_C	0x0000		</span><span class="cm">/* ELM Revision Band C */</span><span class="cp"></span>
<span class="cp">#define PLC_INT_CAMEL	0x4000		</span><span class="cm">/* ELM integrated into CAMEL */</span><span class="cp"></span>
<span class="cp">#define PLC_INT_QE	0x8000		</span><span class="cm">/* ELM integrated into Quad ELM */</span><span class="cp"></span>
<span class="cp">#define PLC_REV_MASK	0x3800		</span><span class="cm">/* revision bits in status A */</span><span class="cp"></span>
<span class="cp">#define PLC_REVISION_B	0x0000		</span><span class="cm">/* rev bits for ELM Rev B */</span><span class="cp"></span>
<span class="cp">#define PLC_REVISION_QA	0x0800		</span><span class="cm">/* rev bits for ELM core in QELM-A */</span><span class="cp"></span>
<span class="cp">#else	</span><span class="cm">/* nMOT_ELM */</span><span class="cp"></span>
<span class="cp">#define PLC_REV_MASK	0xf800		</span><span class="cm">/* revision bits in status A */</span><span class="cp"></span>
<span class="cp">#define PLC_REVISION_A	0x0000		</span><span class="cm">/* revision bits for PLC */</span><span class="cp"></span>
<span class="cp">#define PLC_REVISION_S	0xf800		</span><span class="cm">/* revision bits for PLC-S */</span><span class="cp"></span>
<span class="cp">#define PLC_REV_SN3	0x7800		</span><span class="cm">/* revision bits for PLC-S in IFCP */</span><span class="cp"></span>
<span class="cp">#endif	</span><span class="cm">/* nMOT_ELM */</span><span class="cp"></span>
<span class="cp">#define	PL_SYM_PR_CTR	0x0007		</span><span class="cm">/* contains the LSM symbol pair Ctr. */</span><span class="cp"></span>
<span class="cp">#define	PL_UNKN_LINE_ST	0x0008		</span><span class="cm">/* unknown line state bit from LSM */</span><span class="cp"></span>
<span class="cp">#define	PL_LSM_STATE	0x0010		</span><span class="cm">/* state bit of LSM */</span><span class="cp"></span>

<span class="cp">#define	PL_LINE_ST	0x00e0		</span><span class="cm">/* contains recogn. line state of LSM*/</span><span class="cp"></span>
<span class="cp">#define	PL_L_NLS	(0&lt;&lt;5)		</span><span class="cm">/* noise line state */</span><span class="cp"></span>
<span class="cp">#define	PL_L_ALS	(1&lt;&lt;5)		</span><span class="cm">/* activ line state */</span><span class="cp"></span>
<span class="cp">#define	PL_L_UND	(2&lt;&lt;5)		</span><span class="cm">/* undefined */</span><span class="cp"></span>
<span class="cp">#define	PL_L_ILS4	(3&lt;&lt;5)		</span><span class="cm">/* idle l. s. (after 4 idle symbols) */</span><span class="cp"></span>
<span class="cp">#define	PL_L_QLS	(4&lt;&lt;5)		</span><span class="cm">/* quiet line state */</span><span class="cp"></span>
<span class="cp">#define	PL_L_MLS	(5&lt;&lt;5)		</span><span class="cm">/* master line state */</span><span class="cp"></span>
<span class="cp">#define	PL_L_HLS	(6&lt;&lt;5)		</span><span class="cm">/* halt line state */</span><span class="cp"></span>
<span class="cp">#define	PL_L_ILS16	(7&lt;&lt;5)		</span><span class="cm">/* idle line state (after 16 idle s.)*/</span><span class="cp"></span>

<span class="cp">#define	PL_PREV_LINE_ST	0x0300		</span><span class="cm">/* value of previous line state */</span><span class="cp"></span>
<span class="cp">#define	PL_P_QLS	(0&lt;&lt;8)		</span><span class="cm">/* quiet line state */</span><span class="cp"></span>
<span class="cp">#define	PL_P_MLS	(1&lt;&lt;8)		</span><span class="cm">/* master line state */</span><span class="cp"></span>
<span class="cp">#define	PL_P_HLS	(2&lt;&lt;8)		</span><span class="cm">/* halt line state */</span><span class="cp"></span>
<span class="cp">#define	PL_P_ILS16	(3&lt;&lt;8)		</span><span class="cm">/* idle line state (after 16 idle s.)*/</span><span class="cp"></span>

<span class="cp">#define	PL_SIGNAL_DET	0x0400		</span><span class="cm">/* 1=that signal detect is deasserted*/</span><span class="cp"></span>


<span class="cm">/*</span>
<span class="cm"> * PLC status register B (PL_STATUS_B: log. addr. 0x11)</span>
<span class="cm"> * It contains signals and status from the repeat filter and PCM state machine.</span>
<span class="cm"> */</span>
<span class="cp">#define	PL_BREAK_REASON	0x0007		</span><span class="cm">/* reason for PCM state mach.s to br.*/</span><span class="cp"></span>
<span class="cp">#define	PL_B_NOT	(0)		</span><span class="cm">/* PCM SM has not gone to BREAK state*/</span><span class="cp"></span>
<span class="cp">#define	PL_B_PCS	(1)		</span><span class="cm">/* PC_Start issued */</span><span class="cp"></span>
<span class="cp">#define	PL_B_TPC	(2)		</span><span class="cm">/* TPC timer expired after T_OUT */</span><span class="cp"></span>
<span class="cp">#define	PL_B_TNE	(3)		</span><span class="cm">/* TNE timer expired after NS_MAX */</span><span class="cp"></span>
<span class="cp">#define	PL_B_QLS	(4)		</span><span class="cm">/* quit line state detected */</span><span class="cp"></span>
<span class="cp">#define	PL_B_ILS	(5)		</span><span class="cm">/* idle line state detected */</span><span class="cp"></span>
<span class="cp">#define	PL_B_HLS	(6)		</span><span class="cm">/* halt line state detected */</span><span class="cp"></span>

<span class="cp">#define	PL_TCF		0x0008		</span><span class="cm">/* transmit code flag (start exec.) */</span><span class="cp"></span>
<span class="cp">#define	PL_RCF		0x0010		</span><span class="cm">/* receive code flag (start exec.) */</span><span class="cp"></span>
<span class="cp">#define	PL_LSF		0x0020		</span><span class="cm">/* line state flag (l.s. has been r.)*/</span><span class="cp"></span>
<span class="cp">#define	PL_PCM_SIGNAL	0x0040		</span><span class="cm">/* indic. that XMIT_VECTOR hb.written*/</span><span class="cp"></span>

<span class="cp">#define	PL_PCM_STATE	0x0780		</span><span class="cm">/* state bits of PCM state machine */</span><span class="cp"></span>
<span class="cp">#define	PL_PC0		(0&lt;&lt;7)		</span><span class="cm">/* OFF	   - when /RST or PCM_CNTRL */</span><span class="cp"></span>
<span class="cp">#define	PL_PC1		(1&lt;&lt;7)		</span><span class="cm">/* BREAK   - entry point in start PCM*/</span><span class="cp"></span>
<span class="cp">#define	PL_PC2		(2&lt;&lt;7)		</span><span class="cm">/* TRACE   - to localize stuck Beacon*/</span><span class="cp"></span>
<span class="cp">#define	PL_PC3		(3&lt;&lt;7)		</span><span class="cm">/* CONNECT - synchronize ends of conn*/</span><span class="cp"></span>
<span class="cp">#define	PL_PC4		(4&lt;&lt;7)		</span><span class="cm">/* NEXT	   - to separate the signalng*/</span><span class="cp"></span>
<span class="cp">#define	PL_PC5		(5&lt;&lt;7)		</span><span class="cm">/* SIGNAL  - PCM trans/rec. bit infos*/</span><span class="cp"></span>
<span class="cp">#define	PL_PC6		(6&lt;&lt;7)		</span><span class="cm">/* JOIN	   - 1. state to activ conn. */</span><span class="cp"></span>
<span class="cp">#define	PL_PC7		(7&lt;&lt;7)		</span><span class="cm">/* VERIFY  - 2. - &quot; - (3. ACTIVE) */</span><span class="cp"></span>
<span class="cp">#define	PL_PC8		(8&lt;&lt;7)		</span><span class="cm">/* ACTIVE  - PHY has been incorporated*/</span><span class="cp"></span>
<span class="cp">#define	PL_PC9		(9&lt;&lt;7)		</span><span class="cm">/* MAINT   - for test purposes or so </span>
<span class="cm">					   that PCM op. completely in softw. */</span><span class="cp"></span>

<span class="cp">#define	PL_PCI_SCRUB	0x0800		</span><span class="cm">/* scrubbing function is being exec. */</span><span class="cp"></span>

<span class="cp">#define	PL_PCI_STATE	0x3000		</span><span class="cm">/* Physical Connect. Insertion SM */</span><span class="cp"></span>
<span class="cp">#define	PL_CI_REMV	(0&lt;&lt;12)		</span><span class="cm">/* REMOVED */</span><span class="cp"></span>
<span class="cp">#define	PL_CI_ISCR	(1&lt;&lt;12)		</span><span class="cm">/* INSERT_SCRUB */</span><span class="cp"></span>
<span class="cp">#define	PL_CI_RSCR	(2&lt;&lt;12)		</span><span class="cm">/* REMOVE_SCRUB */</span><span class="cp"></span>
<span class="cp">#define	PL_CI_INS	(3&lt;&lt;12)		</span><span class="cm">/* INSERTED */</span><span class="cp"></span>

<span class="cp">#define	PL_RF_STATE	0xc000		</span><span class="cm">/* state bit of repeate filter SM */</span><span class="cp"></span>
<span class="cp">#define	PL_RF_REPT	(0&lt;&lt;14)		</span><span class="cm">/* REPEAT */</span><span class="cp"></span>
<span class="cp">#define	PL_RF_IDLE	(1&lt;&lt;14)		</span><span class="cm">/* IDLE */</span><span class="cp"></span>
<span class="cp">#define	PL_RF_HALT1	(2&lt;&lt;14)		</span><span class="cm">/* HALT1 */</span><span class="cp"></span>
<span class="cp">#define	PL_RF_HALT2	(3&lt;&lt;14)		</span><span class="cm">/* HALT2 */</span><span class="cp"></span>


<span class="cm">/*</span>
<span class="cm"> * PLC interrupt event register (PL_INTR_EVENT: log. addr. 0x17)</span>
<span class="cm"> * It is read only and is clearde whenever it is read!</span>
<span class="cm"> * It is used by the PLC to report events to the node processor.</span>
<span class="cm"> */</span>
<span class="cp">#define	PL_PARITY_ERR	0x0001		</span><span class="cm">/* p. error h.b.detected on TX9-0 inp*/</span><span class="cp"></span>
<span class="cp">#define	PL_LS_MATCH	0x0002		</span><span class="cm">/* l.s.== l.s. PLC_CNTRL_B&#39;s MATCH_LS*/</span><span class="cp"></span>
<span class="cp">#define	PL_PCM_CODE	0x0004		</span><span class="cm">/* transmit&amp;receive | LCT complete */</span><span class="cp"></span>
<span class="cp">#define	PL_TRACE_PROP	0x0008		</span><span class="cm">/* master l.s. while PCM ACTIV|TRACE */</span><span class="cp"></span>
<span class="cp">#define	PL_SELF_TEST	0x0010		</span><span class="cm">/* QUIET|HALT while PCM in TRACE st. */</span><span class="cp"></span>
<span class="cp">#define	PL_PCM_BREAK	0x0020		</span><span class="cm">/* PCM has entered the BREAK state */</span><span class="cp"></span>
<span class="cp">#define	PL_PCM_ENABLED	0x0040		</span><span class="cm">/* asserted SC_JOIN, scrub. &amp; ACTIV */</span><span class="cp"></span>
<span class="cp">#define	PL_TPC_EXPIRED	0x0080		</span><span class="cm">/* TPC timer reached zero */</span><span class="cp"></span>
<span class="cp">#define	PL_TNE_EXPIRED	0x0100		</span><span class="cm">/* TNE timer reached zero */</span><span class="cp"></span>
<span class="cp">#define	PL_EBUF_ERR	0x0200		</span><span class="cm">/* elastic buff. det. over-|underflow*/</span><span class="cp"></span>
<span class="cp">#define	PL_PHYINV	0x0400		</span><span class="cm">/* physical layer invalid signal */</span><span class="cp"></span>
<span class="cp">#define	PL_VSYM_CTR	0x0800		</span><span class="cm">/* violation symbol counter has incr.*/</span><span class="cp"></span>
<span class="cp">#define	PL_MINI_CTR	0x1000		</span><span class="cm">/* dep. on PLC_CNTRL_A&#39;s MINI_CTR_INT*/</span><span class="cp"></span>
<span class="cp">#define	PL_LE_CTR	0x2000		</span><span class="cm">/* link error event counter */</span><span class="cp"></span>
<span class="cp">#define	PL_LSDO		0x4000		</span><span class="cm">/* SDO input pin changed to a 1 */</span><span class="cp"></span>
<span class="cp">#define	PL_NP_ERR	0x8000		</span><span class="cm">/* NP has requested to r/w an inv. r.*/</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * The PLC interrupt mask register (PL_INTR_MASK: log. addr. 0x02) constr. is</span>
<span class="cm"> * equal PL_INTR_EVENT register.</span>
<span class="cm"> * For each set bit, the setting of corresponding bit generate an int to NP. </span>
<span class="cm"> */</span>

<span class="cp">#ifdef	MOT_ELM</span>
<span class="cm">/*</span>
<span class="cm"> * Quad ELM Crosbar Control register values (QELM_XBAR_?)</span>
<span class="cm"> */</span>
<span class="cp">#define	QELM_XOUT_IDLE	0x0000		</span><span class="cm">/* Idles/Passthrough */</span><span class="cp"></span>
<span class="cp">#define	QELM_XOUT_P	0x0001		</span><span class="cm">/* Output to: Bus P */</span><span class="cp"></span>
<span class="cp">#define	QELM_XOUT_S	0x0002		</span><span class="cm">/* Output to: Bus S */</span><span class="cp"></span>
<span class="cp">#define	QELM_XOUT_R	0x0003		</span><span class="cm">/* Output to: Bus R */</span><span class="cp"></span>
<span class="cp">#define	QELM_XOUT_W	0x0004		</span><span class="cm">/* Output to: ELM W */</span><span class="cp"></span>
<span class="cp">#define	QELM_XOUT_X	0x0005		</span><span class="cm">/* Output to: ELM X */</span><span class="cp"></span>
<span class="cp">#define	QELM_XOUT_Y	0x0006		</span><span class="cm">/* Output to: ELM Y */</span><span class="cp"></span>
<span class="cp">#define	QELM_XOUT_Z	0x0007		</span><span class="cm">/* Output to: ELM Z */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Quad ELM Interrupt data and event registers.</span>
<span class="cm"> */</span>
<span class="cp">#define	QELM_NP_ERR	(1&lt;&lt;15)		</span><span class="cm">/* Node Processor Error */</span><span class="cp"></span>
<span class="cp">#define	QELM_COUNT_Z	(1&lt;&lt;7)		</span><span class="cm">/* Counter Z Interrupt */</span><span class="cp"></span>
<span class="cp">#define	QELM_COUNT_Y	(1&lt;&lt;6)		</span><span class="cm">/* Counter Y Interrupt */</span><span class="cp"></span>
<span class="cp">#define	QELM_COUNT_X	(1&lt;&lt;5)		</span><span class="cm">/* Counter X Interrupt */</span><span class="cp"></span>
<span class="cp">#define	QELM_COUNT_W	(1&lt;&lt;4)		</span><span class="cm">/* Counter W Interrupt */</span><span class="cp"></span>
<span class="cp">#define	QELM_ELM_Z	(1&lt;&lt;3)		</span><span class="cm">/* ELM Z Interrupt */</span><span class="cp"></span>
<span class="cp">#define	QELM_ELM_Y	(1&lt;&lt;2)		</span><span class="cm">/* ELM Y Interrupt */</span><span class="cp"></span>
<span class="cp">#define	QELM_ELM_X	(1&lt;&lt;1)		</span><span class="cm">/* ELM X Interrupt */</span><span class="cp"></span>
<span class="cp">#define	QELM_ELM_W	(1&lt;&lt;0)		</span><span class="cm">/* ELM W Interrupt */</span><span class="cp"></span>
<span class="cp">#endif	</span><span class="cm">/* MOT_ELM */</span><span class="cp"></span>
<span class="cm">/*</span>
<span class="cm"> * PLC Timing Parameters</span>
<span class="cm"> */</span>
<span class="cp">#define	TP_C_MIN	0xff9c	</span><span class="cm">/*   2    ms */</span><span class="cp"></span>
<span class="cp">#define	TP_TL_MIN	0xfff0	</span><span class="cm">/*   0.3  ms */</span><span class="cp"></span>
<span class="cp">#define	TP_TB_MIN	0xff10	</span><span class="cm">/*   5    ms */</span><span class="cp"></span>
<span class="cp">#define	TP_T_OUT	0xd9db	</span><span class="cm">/* 200    ms */</span><span class="cp"></span>
<span class="cp">#define	TP_LC_LENGTH	0xf676	</span><span class="cm">/*  50    ms */</span><span class="cp"></span>
<span class="cp">#define	TP_LC_LONGLN	0xa0a2	</span><span class="cm">/* 500    ms */</span><span class="cp"></span>
<span class="cp">#define	TP_T_SCRUB	0xff6d	</span><span class="cm">/*   3.5  ms */</span><span class="cp"></span>
<span class="cp">#define	TP_NS_MAX	0xf021	</span><span class="cm">/*   1.3   ms */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * BIST values</span>
<span class="cm"> */</span>
<span class="cp">#define PLC_BIST	0x6ecd		</span><span class="cm">/* BIST signature for PLC */</span><span class="cp"></span>
<span class="cp">#define PLCS_BIST	0x5b6b 		</span><span class="cm">/* BIST signature for PLC-S */</span><span class="cp"></span>
<span class="cp">#define	PLC_ELM_B_BIST	0x6ecd		</span><span class="cm">/* BIST signature of ELM Rev. B */</span><span class="cp"></span>
<span class="cp">#define	PLC_ELM_D_BIST	0x5b6b		</span><span class="cm">/* BIST signature of ELM Rev. D */</span><span class="cp"></span>
<span class="cp">#define	PLC_CAM_A_BIST	0x9e75		</span><span class="cm">/* BIST signature of CAMEL Rev. A */</span><span class="cp"></span>
<span class="cp">#define	PLC_CAM_B_BIST	0x5b6b		</span><span class="cm">/* BIST signature of CAMEL Rev. B */</span><span class="cp"></span>
<span class="cp">#define	PLC_IFD_A_BIST	0x9e75		</span><span class="cm">/* BIST signature of IFDDI Rev. A */</span><span class="cp"></span>
<span class="cp">#define	PLC_IFD_B_BIST	0x5b6b		</span><span class="cm">/* BIST signature of IFDDI Rev. B */</span><span class="cp"></span>
<span class="cp">#define	PLC_QELM_A_BIST	0x5b6b		</span><span class="cm">/* BIST signature of QELM Rev. A */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> 	FDDI board recources	</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * request register array (log. addr: RQA_A + a&lt;&lt;1 {a=0..7}) write only.</span>
<span class="cm"> * It specifies to FORMAC+ the type of buffer memory access the host requires.</span>
<span class="cm"> */</span>
<span class="cp">#define	RQ_NOT		0		</span><span class="cm">/* not request */</span><span class="cp"></span>
<span class="cp">#define	RQ_RES		1		</span><span class="cm">/* reserved */</span><span class="cp"></span>
<span class="cp">#define	RQ_SFW		2		</span><span class="cm">/* special frame write */</span><span class="cp"></span>
<span class="cp">#define	RQ_RRQ		3		</span><span class="cm">/* read request: receive queue */</span><span class="cp"></span>
<span class="cp">#define	RQ_WSQ		4		</span><span class="cm">/* write request: synchronous queue */</span><span class="cp"></span>
<span class="cp">#define	RQ_WA0		5		</span><span class="cm">/* write requ.: asynchronous queue 0 */</span><span class="cp"></span>
<span class="cp">#define	RQ_WA1		6		</span><span class="cm">/* write requ.: asynchronous queue 1 */</span><span class="cp"></span>
<span class="cp">#define	RQ_WA2		7		</span><span class="cm">/* write requ.: asynchronous queue 2 */</span><span class="cp"></span>

<span class="cp">#define	SZ_LONG		(sizeof(long))</span>

<span class="cm">/*</span>
<span class="cm"> * FDDI defaults</span>
<span class="cm"> * NOTE : In the ANSI docs, times are specified in units of &quot;symbol time&quot;.</span>
<span class="cm"> * 	  AMD chips use BCLK as unit. 1 BCKL == 2 symbols</span>
<span class="cm"> */</span>
<span class="cp">#define	COMPLREF	((u_long)32*256*256)	</span><span class="cm">/* two&#39;s complement 21 bit */</span><span class="cp"></span>
<span class="cp">#define MSTOBCLK(x)	((u_long)(x)*12500L)</span>
<span class="cp">#define MSTOTVX(x)	(((u_long)(x)*1000L)/80/255)</span>

<span class="cp">#endif	</span><span class="cm">/* _SUPERNET_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
