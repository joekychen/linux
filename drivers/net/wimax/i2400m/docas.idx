f | driver.c | s | 29K | 928 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | sdio-tx.c | s | 5.5K | 155 | Cindy H Kao | cindy.h.kao@intel.com | 1273611939 |  | wimax/i2400m: add the error recovery mechanism on TX path  This patch adds an error recovery mechanism on TX path. The intention is to bring back the device to some known state whenever TX sees -110 (-ETIMEOUT) on copying the data to the HW FIFO.  The TX failure could mean a device bus stuck or function stuck, so the current error recovery implementation is to trigger a bus reset and expect this can bring back the device.  Since the TX work is done in a thread context, there may be a queue of TX works already that all hit the -ETIMEOUT error condition because the device has somewhat stuck already. We don't want any consecutive bus resets simply because multiple TX works in the queue all hit the same device erratum, the flag "error_recovery" is introduced to denote if we are ready for taking any error recovery. See @error_recovery doc in i2400m.h.  Signed-off-by: Cindy H Kao <cindy.h.kao@intel.com>
f | Makefile | g | 446B |  | Inaky Perez-Gonzalez | inaky@linux.intel.com | 1235992225 |  | wimax/i2400m: allow control of the base-station idle mode timeout  For power saving reasons, WiMAX links can be put in idle mode while connected after a certain time of the link not being used for tx or rx. In this mode, the device pages the base-station regularly and when data is ready to be transmitted, the link is revived.  This patch allows the user to control the time the device has to be idle before it decides to go to idle mode from a sysfs interace.  It also updates the initialization code to acknowledge the module variable 'idle_mode_disabled' when the firmware is a newer version (upcoming 1.4 vs 2.6.29's v1.3).  The method for setting the idle mode timeout in the older firmwares is much more limited and can be only done at initialization time. Thus, the sysfs file will return -ENOSYS on older ones.  Signed-off-by: Inaky Perez-Gonzalez <inaky@linux.intel.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | usb-debug-levels.h | s | 1.3K | 37 | Inaky Perez-Gonzalez | inaky@linux.intel.com | 1231351221 |  | i2400m/USB: header for the USB bus driver  This contains the common function declaration and constants for the USB driver for the 2400m Wireless WiMAX Connection, as well as it's debug level settings.  Signed-off-by: Inaky Perez-Gonzalez <inaky@linux.intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | tx.c | s | 37K | 974 | Rusty Russell | rusty@rustcorp.com.au | 1324351649 |  | net: fix assignment of 0/1 to bool variables.  DaveM said:    Please, this kind of stuff rots forever and not using bool properly    drives me crazy.  Joe Perches <joe@perches.com> gave me the spatch script:  	@@ 	bool b; 	@@ 	-b = 0 	+b = false 	@@ 	bool b; 	@@ 	-b = 1 	+b = true  I merely installed coccinelle, read the documentation and took credit.  Signed-off-by: Rusty Russell <rusty@rustcorp.com.au> Signed-off-by: David S. Miller <davem@davemloft.net>
f | control.c | s | 42K | 1328 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103869 |  | drivers/net: Add moduleparam.h to drivers as required.  These files were using moduleparam infrastructure, but were not including anything for it -- which is fine when module.h is being implicitly included in all files, but that is going away.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | usb-rx.c | s | 14K | 437 | Alexander Duyck | alexander.h.duyck@intel.com | 1336324399 |  | skb: Add inline helper for getting the skb end offset from head  With the recent changes for how we compute the skb truesize it occurs to me we are probably going to have a lot of calls to skb_end_pointer - skb->head.  Instead of running all over the place doing that it would make more sense to just make it a separate inline skb_end_offset(skb) that way we can return the correct value without having gcc having to do all the optimization to cancel out skb->head - skb->head.  Signed-off-by: Alexander Duyck <alexander.h.duyck@intel.com> Acked-by: Eric Dumazet <edumazet@google.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | usb-fw.c | s | 10K | 347 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | fw.c | s | 49K | 1538 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103868 |  | drivers/net: Add export.h to files using EXPORT_SYMBOL/THIS_MODULE  These were getting the macros from an implicit module.h include via device.h, but we are planning to clean that up.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>  drivers/net: Add export.h to wireless/brcm80211/brcmfmac/bcmsdh.c  This relatively recently added file uses EXPORT_SYMBOL and hence needs export.h included so that it is compatible with the module.h split up work.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | usb-notif.c | s | 8.0K | 241 | Joe Perches | joe@perches.com | 1273821568 |  | drivers/net: Remove unnecessary returns from void function()s  This patch removes from drivers/net/ all the unnecessary return; statements that precede the last closing brace of void functions.  It does not remove the returns that are immediately preceded by a label as gcc doesn't like that.  It also does not remove null void functions with return.  Done via: $ grep -rP --include=*.[ch] -l "return;\n}" net/ || \   xargs perl -i -e 'local $/ ; while (<>) { s/\n[ \t\n]+return;\n}/\n}/g; print; }'  with some cleanups by hand.  Compile tested x86 allmodconfig only.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | sdio-fw.c | s | 7.0K | 196 | Inaky Perez-Gonzalez | inaky@linux.intel.com | 1255935346 |  | wimax/i2400m: be smarter about copying command buffer to bm_cmd_buf  Because some underlying bus APIs (like USB) don't like data buffers in the stack or vmalloced areas, the i2400m driver provides a scratch buffer (i2400m->bm_cmd_buf) for said low-level drivers to copy command data to before passing it to said API. This is only used during boot mode.  However, at some the code was copying the buffer even when the command was already specified in said buffer. This is ok, but it needs to be more careful. As thus, change so that:  (a) the copy happens only if command buffer is not the scratch buffer  (b) use memmove() in case there is overlapping  Signed-off-by: Inaky Perez-Gonzalez <inaky@linux.intel.com>
f | debug-levels.h | s | 1.4K | 41 | Inaky Perez-Gonzalez | inaky@linux.intel.com | 1235992225 |  | wimax/i2400m: allow control of the base-station idle mode timeout  For power saving reasons, WiMAX links can be put in idle mode while connected after a certain time of the link not being used for tx or rx. In this mode, the device pages the base-station regularly and when data is ready to be transmitted, the link is revived.  This patch allows the user to control the time the device has to be idle before it decides to go to idle mode from a sysfs interace.  It also updates the initialization code to acknowledge the module variable 'idle_mode_disabled' when the firmware is a newer version (upcoming 1.4 vs 2.6.29's v1.3).  The method for setting the idle mode timeout in the older firmwares is much more limited and can be only done at initialization time. Thus, the sysfs file will return -ENOSYS on older ones.  Signed-off-by: Inaky Perez-Gonzalez <inaky@linux.intel.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | rx.c | s | 42K | 1297 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103869 |  | drivers/net: Add moduleparam.h to drivers as required.  These files were using moduleparam infrastructure, but were not including anything for it -- which is fine when module.h is being implicitly included in all files, but that is going away.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | i2400m.h | s | 34K | 896 | Justin P. Mattock | justinmattock@gmail.com | 1322834251 |  | treewide: Fix typos in various parts of the kernel, and fix some comments.  The below patch fixes some typos in various parts of the kernel, as well as fixes some comments. Please let me know if I missed anything, and I will try to get it changed and resent.  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Acked-by: Randy Dunlap <rdunlap@xenotime.net> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | sdio.c | s | 16K | 537 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103867 |  | drivers/net: Add module.h to drivers who were implicitly using it  The device.h header was including module.h, making it present for most of these drivers.  But we want to clean that up.  Call out the include of module.h in the modular network drivers.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | sdio-rx.c | s | 8.5K | 279 | stephen hemminger | shemminger@vyatta.com | 1286264858 |  | wimax: make functions local  Make wimax variables and functions local if possible. Compile tested only.  This also removes a couple of unused EXPORT_SYMBOL. If this breaks some out of tree code, please fix that by putting the code in the kernel tree.  Signed-off-by: Stephen Hemminger <shemminger@vyatta.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | netdev.c | s | 19K | 585 | Phil Sutter | phil.sutter@viprinet.com | 1332901809 |  | wimax: i2400m - prevent a possible kernel bug due to missing fw_name string  This happened on a machine with a custom hotplug script calling nameif, probably due to slow firmware loading. At the time nameif uses ethtool to gather interface information, i2400m->fw_name is zero and so a null pointer dereference occurs from within i2400m_get_drvinfo().  Signed-off-by: Phil Sutter <phil.sutter@viprinet.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | op-rfkill.c | s | 6.4K | 195 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | Kconfig | g | 1.6K |  | Arnd Bergmann | arnd@arndb.de | 1335036527 |  | drivers/net: iwmc3200 depends on EXPERIMENTAL  The iwmc3200 driver selects other code in Kconfig that depends on EXPERIMENTAL. Kconfig warns about this when CONFIG_EXPERIMENTAL is not already set, so logically, these options should also be marked experimental or promoted to stable.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Mathieu Poirier <mathieu.poirier@linaro.org> Signed-off-by: David S. Miller <davem@davemloft.net>
f | i2400m-usb.h | s | 9.1K | 250 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | debugfs.c | s | 9.7K | 330 | Stephen Boyd | sboyd@codeaurora.org | 1333664750 |  | simple_open: automatically convert to simple_open()  Many users of debugfs copy the implementation of default_open() when they want to support a custom read/write function op.  This leads to a proliferation of the default_open() implementation across the entire tree.  Now that the common implementation has been consolidated into libfs we can replace all the users of this function with simple_open().  This replacement was done with the following semantic patch:  <smpl> @ open @ identifier open_f != simple_open; identifier i, f; @@ -int open_f(struct inode *i, struct file *f) -{ ( -if (i->i_private) -f->private_data = i->i_private; || -f->private_data = i->i_private; ) -return 0; -}  @ has_open depends on open @ identifier fops; identifier open.open_f; @@ struct file_operations fops = { ... -.open = open_f, +.open = simple_open, ... }; </smpl>  [akpm@linux-foundation.org: checkpatch fixes] Signed-off-by: Stephen Boyd <sboyd@codeaurora.org> Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Cc: Julia Lawall <Julia.Lawall@lip6.fr> Acked-by: Ingo Molnar <mingo@elte.hu> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | usb-tx.c | s | 8.7K | 253 | Dan Carpenter | dan.carpenter@oracle.com | 1324069023 |  | wimax/i2400m: remove an unused variable  "result" isn't used.  We ignore errors here because there is not much we can do about them.  Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | i2400m-sdio.h | s | 5.5K | 140 | stephen hemminger | shemminger@vyatta.com | 1286264858 |  | wimax: make functions local  Make wimax variables and functions local if possible. Compile tested only.  This also removes a couple of unused EXPORT_SYMBOL. If this breaks some out of tree code, please fix that by putting the code in the kernel tree.  Signed-off-by: Stephen Hemminger <shemminger@vyatta.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | sysfs.c | s | 2.2K | 71 | Inaky Perez-Gonzalez | inaky@linux.intel.com | 1235992225 |  | wimax/i2400m: allow control of the base-station idle mode timeout  For power saving reasons, WiMAX links can be put in idle mode while connected after a certain time of the link not being used for tx or rx. In this mode, the device pages the base-station regularly and when data is ready to be transmitted, the link is revived.  This patch allows the user to control the time the device has to be idle before it decides to go to idle mode from a sysfs interace.  It also updates the initialization code to acknowledge the module variable 'idle_mode_disabled' when the firmware is a newer version (upcoming 1.4 vs 2.6.29's v1.3).  The method for setting the idle mode timeout in the older firmwares is much more limited and can be only done at initialization time. Thus, the sysfs file will return -ENOSYS on older ones.  Signed-off-by: Inaky Perez-Gonzalez <inaky@linux.intel.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | usb.c | s | 23K | 741 | Masanari Iida | standby24x7@gmail.com | 1334431742 |  | net: Fix spelling typo in net  Correct spelling typo within drivers/net.  Signed-off-by: Masanari Iida <standby24x7@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | sdio-debug-levels.h | s | 503B | 17 | Inaky Perez-Gonzalez | inaky@linux.intel.com | 1231351222 |  | i2400m/SDIO: header for the SDIO subdriver  This contains the common function declaration and constants for the SDIO driver for the 2400m Wireless WiMAX Connection and it's debug level settings.  Signed-off-by: Inaky Perez-Gonzalez <inaky@linux.intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
