<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › wan › lmc › lmc_ioctl.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>lmc_ioctl.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _LMC_IOCTL_H_</span>
<span class="cp">#define _LMC_IOCTL_H_</span>
<span class="cm">/*	$Id: lmc_ioctl.h,v 1.15 2000/04/06 12:16:43 asj Exp $	*/</span>

 <span class="cm">/*</span>
<span class="cm">  * Copyright (c) 1997-2000 LAN Media Corporation (LMC)</span>
<span class="cm">  * All rights reserved.  www.lanmedia.com</span>
<span class="cm">  *</span>
<span class="cm">  * This code is written by:</span>
<span class="cm">  * Andrew Stanley-Jones (asj@cban.com)</span>
<span class="cm">  * Rob Braun (bbraun@vix.com),</span>
<span class="cm">  * Michael Graff (explorer@vix.com) and</span>
<span class="cm">  * Matt Thomas (matt@3am-software.com).</span>
<span class="cm">  *</span>
<span class="cm">  * This software may be used and distributed according to the terms</span>
<span class="cm">  * of the GNU General Public License version 2, incorporated herein by reference.</span>
<span class="cm">  */</span>

<span class="cp">#define LMCIOCGINFO             SIOCDEVPRIVATE+3 </span><span class="cm">/* get current state */</span><span class="cp"></span>
<span class="cp">#define LMCIOCSINFO             SIOCDEVPRIVATE+4 </span><span class="cm">/* set state to user values */</span><span class="cp"></span>
<span class="cp">#define LMCIOCGETLMCSTATS       SIOCDEVPRIVATE+5</span>
<span class="cp">#define LMCIOCCLEARLMCSTATS     SIOCDEVPRIVATE+6</span>
<span class="cp">#define LMCIOCDUMPEVENTLOG      SIOCDEVPRIVATE+7</span>
<span class="cp">#define LMCIOCGETXINFO          SIOCDEVPRIVATE+8</span>
<span class="cp">#define LMCIOCSETCIRCUIT        SIOCDEVPRIVATE+9</span>
<span class="cp">#define LMCIOCUNUSEDATM         SIOCDEVPRIVATE+10</span>
<span class="cp">#define LMCIOCRESET             SIOCDEVPRIVATE+11</span>
<span class="cp">#define LMCIOCT1CONTROL         SIOCDEVPRIVATE+12</span>
<span class="cp">#define LMCIOCIFTYPE            SIOCDEVPRIVATE+13</span>
<span class="cp">#define LMCIOCXILINX            SIOCDEVPRIVATE+14</span>

<span class="cp">#define LMC_CARDTYPE_UNKNOWN            -1</span>
<span class="cp">#define LMC_CARDTYPE_HSSI               1       </span><span class="cm">/* probed card is a HSSI card */</span><span class="cp"></span>
<span class="cp">#define LMC_CARDTYPE_DS3                2       </span><span class="cm">/* probed card is a DS3 card */</span><span class="cp"></span>
<span class="cp">#define LMC_CARDTYPE_SSI                3       </span><span class="cm">/* probed card is a SSI card */</span><span class="cp"></span>
<span class="cp">#define LMC_CARDTYPE_T1                 4       </span><span class="cm">/* probed card is a T1 card */</span><span class="cp"></span>

<span class="cp">#define LMC_CTL_CARDTYPE_LMC5200	0	</span><span class="cm">/* HSSI */</span><span class="cp"></span>
<span class="cp">#define LMC_CTL_CARDTYPE_LMC5245	1	</span><span class="cm">/* DS3 */</span><span class="cp"></span>
<span class="cp">#define LMC_CTL_CARDTYPE_LMC1000	2	</span><span class="cm">/* SSI, V.35 */</span><span class="cp"></span>
<span class="cp">#define LMC_CTL_CARDTYPE_LMC1200        3       </span><span class="cm">/* DS1 */</span><span class="cp"></span>

<span class="cp">#define LMC_CTL_OFF			0	</span><span class="cm">/* generic OFF value */</span><span class="cp"></span>
<span class="cp">#define LMC_CTL_ON			1	</span><span class="cm">/* generic ON value */</span><span class="cp"></span>

<span class="cp">#define LMC_CTL_CLOCK_SOURCE_EXT	0	</span><span class="cm">/* clock off line */</span><span class="cp"></span>
<span class="cp">#define LMC_CTL_CLOCK_SOURCE_INT	1	</span><span class="cm">/* internal clock */</span><span class="cp"></span>

<span class="cp">#define LMC_CTL_CRC_LENGTH_16		16</span>
<span class="cp">#define LMC_CTL_CRC_LENGTH_32		32</span>
<span class="cp">#define LMC_CTL_CRC_BYTESIZE_2          2</span>
<span class="cp">#define LMC_CTL_CRC_BYTESIZE_4          4</span>


<span class="cp">#define LMC_CTL_CABLE_LENGTH_LT_100FT	0	</span><span class="cm">/* DS3 cable &lt; 100 feet */</span><span class="cp"></span>
<span class="cp">#define LMC_CTL_CABLE_LENGTH_GT_100FT	1	</span><span class="cm">/* DS3 cable &gt;= 100 feet */</span><span class="cp"></span>

<span class="cp">#define LMC_CTL_CIRCUIT_TYPE_E1 0</span>
<span class="cp">#define LMC_CTL_CIRCUIT_TYPE_T1 1</span>

<span class="cm">/*</span>
<span class="cm"> * IFTYPE defines</span>
<span class="cm"> */</span>
<span class="cp">#define LMC_PPP         1               </span><span class="cm">/* use generic HDLC interface */</span><span class="cp"></span>
<span class="cp">#define LMC_NET         2               </span><span class="cm">/* use direct net interface */</span><span class="cp"></span>
<span class="cp">#define LMC_RAW         3               </span><span class="cm">/* use direct net interface */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * These are not in the least IOCTL related, but I want them common.</span>
<span class="cm"> */</span>
<span class="cm">/*</span>
<span class="cm"> * assignments for the GPIO register on the DEC chip (common)</span>
<span class="cm"> */</span>
<span class="cp">#define LMC_GEP_INIT		0x01 </span><span class="cm">/* 0: */</span><span class="cp"></span>
<span class="cp">#define LMC_GEP_RESET		0x02 </span><span class="cm">/* 1: */</span><span class="cp"></span>
<span class="cp">#define LMC_GEP_MODE		0x10 </span><span class="cm">/* 4: */</span><span class="cp"></span>
<span class="cp">#define LMC_GEP_DP		0x20 </span><span class="cm">/* 5: */</span><span class="cp"></span>
<span class="cp">#define LMC_GEP_DATA		0x40 </span><span class="cm">/* 6: serial out */</span><span class="cp"></span>
<span class="cp">#define LMC_GEP_CLK	        0x80 </span><span class="cm">/* 7: serial clock */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * HSSI GPIO assignments</span>
<span class="cm"> */</span>
<span class="cp">#define LMC_GEP_HSSI_ST		0x04 </span><span class="cm">/* 2: receive timing sense (deprecated) */</span><span class="cp"></span>
<span class="cp">#define LMC_GEP_HSSI_CLOCK	0x08 </span><span class="cm">/* 3: clock source */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * T1 GPIO assignments</span>
<span class="cm"> */</span>
<span class="cp">#define LMC_GEP_SSI_GENERATOR	0x04 </span><span class="cm">/* 2: enable prog freq gen serial i/f */</span><span class="cp"></span>
<span class="cp">#define LMC_GEP_SSI_TXCLOCK	0x08 </span><span class="cm">/* 3: provide clock on TXCLOCK output */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Common MII16 bits</span>
<span class="cm"> */</span>
<span class="cp">#define LMC_MII16_LED0         0x0080</span>
<span class="cp">#define LMC_MII16_LED1         0x0100</span>
<span class="cp">#define LMC_MII16_LED2         0x0200</span>
<span class="cp">#define LMC_MII16_LED3         0x0400  </span><span class="cm">/* Error, and the red one */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_LED_ALL      0x0780  </span><span class="cm">/* LED bit mask */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_FIFO_RESET   0x0800</span>

<span class="cm">/*</span>
<span class="cm"> * definitions for HSSI</span>
<span class="cm"> */</span>
<span class="cp">#define LMC_MII16_HSSI_TA      0x0001</span>
<span class="cp">#define LMC_MII16_HSSI_CA      0x0002</span>
<span class="cp">#define LMC_MII16_HSSI_LA      0x0004</span>
<span class="cp">#define LMC_MII16_HSSI_LB      0x0008</span>
<span class="cp">#define LMC_MII16_HSSI_LC      0x0010</span>
<span class="cp">#define LMC_MII16_HSSI_TM      0x0020</span>
<span class="cp">#define LMC_MII16_HSSI_CRC     0x0040</span>

<span class="cm">/*</span>
<span class="cm"> * assignments for the MII register 16 (DS3)</span>
<span class="cm"> */</span>
<span class="cp">#define LMC_MII16_DS3_ZERO	0x0001</span>
<span class="cp">#define LMC_MII16_DS3_TRLBK	0x0002</span>
<span class="cp">#define LMC_MII16_DS3_LNLBK	0x0004</span>
<span class="cp">#define LMC_MII16_DS3_RAIS	0x0008</span>
<span class="cp">#define LMC_MII16_DS3_TAIS	0x0010</span>
<span class="cp">#define LMC_MII16_DS3_BIST	0x0020</span>
<span class="cp">#define LMC_MII16_DS3_DLOS	0x0040</span>
<span class="cp">#define LMC_MII16_DS3_CRC	0x1000</span>
<span class="cp">#define LMC_MII16_DS3_SCRAM	0x2000</span>
<span class="cp">#define LMC_MII16_DS3_SCRAM_LARS 0x4000</span>

<span class="cm">/* Note: 2 pairs of LEDs where swapped by mistake</span>
<span class="cm"> * in Xilinx code for DS3 &amp; DS1 adapters */</span>
<span class="cp">#define LMC_DS3_LED0    0x0100          </span><span class="cm">/* bit 08  yellow */</span><span class="cp"></span>
<span class="cp">#define LMC_DS3_LED1    0x0080          </span><span class="cm">/* bit 07  blue   */</span><span class="cp"></span>
<span class="cp">#define LMC_DS3_LED2    0x0400          </span><span class="cm">/* bit 10  green  */</span><span class="cp"></span>
<span class="cp">#define LMC_DS3_LED3    0x0200          </span><span class="cm">/* bit 09  red    */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * framer register 0 and 7 (7 is latched and reset on read)</span>
<span class="cm"> */</span>
<span class="cp">#define LMC_FRAMER_REG0_DLOS            0x80    </span><span class="cm">/* digital loss of service */</span><span class="cp"></span>
<span class="cp">#define LMC_FRAMER_REG0_OOFS            0x40    </span><span class="cm">/* out of frame sync */</span><span class="cp"></span>
<span class="cp">#define LMC_FRAMER_REG0_AIS             0x20    </span><span class="cm">/* alarm indication signal */</span><span class="cp"></span>
<span class="cp">#define LMC_FRAMER_REG0_CIS             0x10    </span><span class="cm">/* channel idle */</span><span class="cp"></span>
<span class="cp">#define LMC_FRAMER_REG0_LOC             0x08    </span><span class="cm">/* loss of clock */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Framer register 9 contains the blue alarm signal</span>
<span class="cm"> */</span>
<span class="cp">#define LMC_FRAMER_REG9_RBLUE          0x02     </span><span class="cm">/* Blue alarm failure */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Framer register 0x10 contains xbit error</span>
<span class="cm"> */</span>
<span class="cp">#define LMC_FRAMER_REG10_XBIT          0x01     </span><span class="cm">/* X bit error alarm failure */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * And SSI, LMC1000</span>
<span class="cm"> */</span>
<span class="cp">#define LMC_MII16_SSI_DTR	0x0001	</span><span class="cm">/* DTR output RW */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_SSI_DSR	0x0002	</span><span class="cm">/* DSR input RO */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_SSI_RTS	0x0004	</span><span class="cm">/* RTS output RW */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_SSI_CTS	0x0008	</span><span class="cm">/* CTS input RO */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_SSI_DCD	0x0010	</span><span class="cm">/* DCD input RO */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_SSI_RI		0x0020	</span><span class="cm">/* RI input RO */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_SSI_CRC                0x1000  </span><span class="cm">/* CRC select - RW */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * bits 0x0080 through 0x0800 are generic, and described</span>
<span class="cm"> * above with LMC_MII16_LED[0123] _LED_ALL, and _FIFO_RESET</span>
<span class="cm"> */</span>
<span class="cp">#define LMC_MII16_SSI_LL		0x1000	</span><span class="cm">/* LL output RW */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_SSI_RL		0x2000	</span><span class="cm">/* RL output RW */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_SSI_TM		0x4000	</span><span class="cm">/* TM input RO */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_SSI_LOOP	0x8000	</span><span class="cm">/* loopback enable RW */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Some of the MII16 bits are mirrored in the MII17 register as well,</span>
<span class="cm"> * but let&#39;s keep thing separate for now, and get only the cable from</span>
<span class="cm"> * the MII17.</span>
<span class="cm"> */</span>
<span class="cp">#define LMC_MII17_SSI_CABLE_MASK	0x0038	</span><span class="cm">/* mask to extract the cable type */</span><span class="cp"></span>
<span class="cp">#define LMC_MII17_SSI_CABLE_SHIFT 3	</span><span class="cm">/* shift to extract the cable type */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * And T1, LMC1200</span>
<span class="cm"> */</span>
<span class="cp">#define LMC_MII16_T1_UNUSED1    0x0003</span>
<span class="cp">#define LMC_MII16_T1_XOE                0x0004</span>
<span class="cp">#define LMC_MII16_T1_RST                0x0008  </span><span class="cm">/* T1 chip reset - RW */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_T1_Z                  0x0010  </span><span class="cm">/* output impedance T1=1, E1=0 output - RW */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_T1_INTR               0x0020  </span><span class="cm">/* interrupt from 8370 - RO */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_T1_ONESEC             0x0040  </span><span class="cm">/* one second square wave - ro */</span><span class="cp"></span>

<span class="cp">#define LMC_MII16_T1_LED0               0x0100</span>
<span class="cp">#define LMC_MII16_T1_LED1               0x0080</span>
<span class="cp">#define LMC_MII16_T1_LED2               0x0400</span>
<span class="cp">#define LMC_MII16_T1_LED3               0x0200</span>
<span class="cp">#define LMC_MII16_T1_FIFO_RESET 0x0800</span>

<span class="cp">#define LMC_MII16_T1_CRC                0x1000  </span><span class="cm">/* CRC select - RW */</span><span class="cp"></span>
<span class="cp">#define LMC_MII16_T1_UNUSED2    0xe000</span>


<span class="cm">/* 8370 framer registers  */</span>

<span class="cp">#define T1FRAMER_ALARM1_STATUS  0x47</span>
<span class="cp">#define T1FRAMER_ALARM2_STATUS  0x48</span>
<span class="cp">#define T1FRAMER_FERR_LSB               0x50</span>
<span class="cp">#define T1FRAMER_FERR_MSB               0x51    </span><span class="cm">/* framing bit error counter */</span><span class="cp"></span>
<span class="cp">#define T1FRAMER_LCV_LSB                0x54</span>
<span class="cp">#define T1FRAMER_LCV_MSB                0x55    </span><span class="cm">/* line code violation counter */</span><span class="cp"></span>
<span class="cp">#define T1FRAMER_AERR                   0x5A</span>

<span class="cm">/* mask for the above AERR register */</span>
<span class="cp">#define T1FRAMER_LOF_MASK               (0x0f0) </span><span class="cm">/* receive loss of frame */</span><span class="cp"></span>
<span class="cp">#define T1FRAMER_COFA_MASK              (0x0c0) </span><span class="cm">/* change of frame alignment */</span><span class="cp"></span>
<span class="cp">#define T1FRAMER_SEF_MASK               (0x03)  </span><span class="cm">/* severely errored frame  */</span><span class="cp"></span>

<span class="cm">/* 8370 framer register ALM1 (0x47) values</span>
<span class="cm"> * used to determine link status</span>
<span class="cm"> */</span>

<span class="cp">#define T1F_SIGFRZ      0x01    </span><span class="cm">/* signaling freeze */</span><span class="cp"></span>
<span class="cp">#define T1F_RLOF        0x02    </span><span class="cm">/* receive loss of frame alignment */</span><span class="cp"></span>
<span class="cp">#define T1F_RLOS        0x04    </span><span class="cm">/* receive loss of signal */</span><span class="cp"></span>
<span class="cp">#define T1F_RALOS       0x08    </span><span class="cm">/* receive analog loss of signal or RCKI loss of clock */</span><span class="cp"></span>
<span class="cp">#define T1F_RAIS        0x10    </span><span class="cm">/* receive alarm indication signal */</span><span class="cp"></span>
<span class="cp">#define T1F_UNUSED      0x20</span>
<span class="cp">#define T1F_RYEL        0x40    </span><span class="cm">/* receive yellow alarm */</span><span class="cp"></span>
<span class="cp">#define T1F_RMYEL       0x80    </span><span class="cm">/* receive multiframe yellow alarm */</span><span class="cp"></span>

<span class="cp">#define LMC_T1F_WRITE       0</span>
<span class="cp">#define LMC_T1F_READ        1</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">lmc_st1f_control</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">command</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">address</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
<span class="p">}</span> <span class="n">lmc_t1f_control</span><span class="p">;</span>

<span class="k">enum</span> <span class="n">lmc_xilinx_c</span> <span class="p">{</span>
    <span class="n">lmc_xilinx_reset</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">lmc_xilinx_load_prom</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">lmc_xilinx_load</span> <span class="o">=</span> <span class="mi">3</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">lmc_xilinx_control</span> <span class="p">{</span>
    <span class="k">enum</span> <span class="n">lmc_xilinx_c</span> <span class="n">command</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">len</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* ------------------ end T1 defs ------------------- */</span>

<span class="cp">#define LMC_MII_LedMask                 0x0780</span>
<span class="cp">#define LMC_MII_LedBitPos               7</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
