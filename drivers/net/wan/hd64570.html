<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › wan › hd64570.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>hd64570.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __HD64570_H</span>
<span class="cp">#define __HD64570_H</span>

<span class="cm">/* SCA HD64570 register definitions - all addresses for mode 0 (8086 MPU)</span>
<span class="cm">   and 1 (64180 MPU). For modes 2 and 3, XOR the address with 0x01.</span>

<span class="cm">   Source: HD64570 SCA User&#39;s Manual</span>
<span class="cm">*/</span>



<span class="cm">/* SCA Control Registers */</span>
<span class="cp">#define LPR    0x00		</span><span class="cm">/* Low Power */</span><span class="cp"></span>

<span class="cm">/* Wait controller registers */</span>
<span class="cp">#define PABR0  0x02		</span><span class="cm">/* Physical Address Boundary 0 */</span><span class="cp"></span>
<span class="cp">#define PABR1  0x03		</span><span class="cm">/* Physical Address Boundary 1 */</span><span class="cp"></span>
<span class="cp">#define WCRL   0x04		</span><span class="cm">/* Wait Control L */</span><span class="cp"></span>
<span class="cp">#define WCRM   0x05		</span><span class="cm">/* Wait Control M */</span><span class="cp"></span>
<span class="cp">#define WCRH   0x06		</span><span class="cm">/* Wait Control H */</span><span class="cp"></span>

<span class="cp">#define PCR    0x08		</span><span class="cm">/* DMA Priority Control */</span><span class="cp"></span>
<span class="cp">#define DMER   0x09		</span><span class="cm">/* DMA Master Enable */</span><span class="cp"></span>


<span class="cm">/* Interrupt registers */</span>
<span class="cp">#define ISR0   0x10		</span><span class="cm">/* Interrupt Status 0  */</span><span class="cp"></span>
<span class="cp">#define ISR1   0x11		</span><span class="cm">/* Interrupt Status 1  */</span><span class="cp"></span>
<span class="cp">#define ISR2   0x12		</span><span class="cm">/* Interrupt Status 2  */</span><span class="cp"></span>

<span class="cp">#define IER0   0x14		</span><span class="cm">/* Interrupt Enable 0  */</span><span class="cp"></span>
<span class="cp">#define IER1   0x15		</span><span class="cm">/* Interrupt Enable 1  */</span><span class="cp"></span>
<span class="cp">#define IER2   0x16		</span><span class="cm">/* Interrupt Enable 2  */</span><span class="cp"></span>

<span class="cp">#define ITCR   0x18		</span><span class="cm">/* Interrupt Control */</span><span class="cp"></span>
<span class="cp">#define IVR    0x1A		</span><span class="cm">/* Interrupt Vector */</span><span class="cp"></span>
<span class="cp">#define IMVR   0x1C		</span><span class="cm">/* Interrupt Modified Vector */</span><span class="cp"></span>



<span class="cm">/* MSCI channel (port) 0 registers - offset 0x20</span>
<span class="cm">   MSCI channel (port) 1 registers - offset 0x40 */</span>

<span class="cp">#define MSCI0_OFFSET 0x20</span>
<span class="cp">#define MSCI1_OFFSET 0x40</span>

<span class="cp">#define TRBL   0x00		</span><span class="cm">/* TX/RX buffer L */</span><span class="cp"> </span>
<span class="cp">#define TRBH   0x01		</span><span class="cm">/* TX/RX buffer H */</span><span class="cp"> </span>
<span class="cp">#define ST0    0x02		</span><span class="cm">/* Status 0 */</span><span class="cp"></span>
<span class="cp">#define ST1    0x03		</span><span class="cm">/* Status 1 */</span><span class="cp"></span>
<span class="cp">#define ST2    0x04		</span><span class="cm">/* Status 2 */</span><span class="cp"></span>
<span class="cp">#define ST3    0x05		</span><span class="cm">/* Status 3 */</span><span class="cp"></span>
<span class="cp">#define FST    0x06		</span><span class="cm">/* Frame Status  */</span><span class="cp"></span>
<span class="cp">#define IE0    0x08		</span><span class="cm">/* Interrupt Enable 0 */</span><span class="cp"></span>
<span class="cp">#define IE1    0x09		</span><span class="cm">/* Interrupt Enable 1 */</span><span class="cp"></span>
<span class="cp">#define IE2    0x0A		</span><span class="cm">/* Interrupt Enable 2 */</span><span class="cp"></span>
<span class="cp">#define FIE    0x0B		</span><span class="cm">/* Frame Interrupt Enable  */</span><span class="cp"></span>
<span class="cp">#define CMD    0x0C		</span><span class="cm">/* Command */</span><span class="cp"></span>
<span class="cp">#define MD0    0x0E		</span><span class="cm">/* Mode 0 */</span><span class="cp"></span>
<span class="cp">#define MD1    0x0F		</span><span class="cm">/* Mode 1 */</span><span class="cp"></span>
<span class="cp">#define MD2    0x10		</span><span class="cm">/* Mode 2 */</span><span class="cp"></span>
<span class="cp">#define CTL    0x11		</span><span class="cm">/* Control */</span><span class="cp"></span>
<span class="cp">#define SA0    0x12		</span><span class="cm">/* Sync/Address 0 */</span><span class="cp"></span>
<span class="cp">#define SA1    0x13		</span><span class="cm">/* Sync/Address 1 */</span><span class="cp"></span>
<span class="cp">#define IDL    0x14		</span><span class="cm">/* Idle Pattern */</span><span class="cp"></span>
<span class="cp">#define TMC    0x15		</span><span class="cm">/* Time Constant */</span><span class="cp"></span>
<span class="cp">#define RXS    0x16		</span><span class="cm">/* RX Clock Source */</span><span class="cp"></span>
<span class="cp">#define TXS    0x17		</span><span class="cm">/* TX Clock Source */</span><span class="cp"></span>
<span class="cp">#define TRC0   0x18		</span><span class="cm">/* TX Ready Control 0 */</span><span class="cp"> </span>
<span class="cp">#define TRC1   0x19		</span><span class="cm">/* TX Ready Control 1 */</span><span class="cp"> </span>
<span class="cp">#define RRC    0x1A		</span><span class="cm">/* RX Ready Control */</span><span class="cp"> </span>
<span class="cp">#define CST0   0x1C		</span><span class="cm">/* Current Status 0 */</span><span class="cp"></span>
<span class="cp">#define CST1   0x1D		</span><span class="cm">/* Current Status 1 */</span><span class="cp"></span>


<span class="cm">/* Timer channel 0 (port 0 RX) registers - offset 0x60</span>
<span class="cm">   Timer channel 1 (port 0 TX) registers - offset 0x68</span>
<span class="cm">   Timer channel 2 (port 1 RX) registers - offset 0x70</span>
<span class="cm">   Timer channel 3 (port 1 TX) registers - offset 0x78</span>
<span class="cm">*/</span>

<span class="cp">#define TIMER0RX_OFFSET 0x60</span>
<span class="cp">#define TIMER0TX_OFFSET 0x68</span>
<span class="cp">#define TIMER1RX_OFFSET 0x70</span>
<span class="cp">#define TIMER1TX_OFFSET 0x78</span>

<span class="cp">#define TCNTL  0x00		</span><span class="cm">/* Up-counter L */</span><span class="cp"></span>
<span class="cp">#define TCNTH  0x01		</span><span class="cm">/* Up-counter H */</span><span class="cp"></span>
<span class="cp">#define TCONRL 0x02		</span><span class="cm">/* Constant L */</span><span class="cp"></span>
<span class="cp">#define TCONRH 0x03		</span><span class="cm">/* Constant H */</span><span class="cp"></span>
<span class="cp">#define TCSR   0x04		</span><span class="cm">/* Control/Status */</span><span class="cp"></span>
<span class="cp">#define TEPR   0x05		</span><span class="cm">/* Expand Prescale */</span><span class="cp"></span>



<span class="cm">/* DMA channel 0 (port 0 RX) registers - offset 0x80</span>
<span class="cm">   DMA channel 1 (port 0 TX) registers - offset 0xA0</span>
<span class="cm">   DMA channel 2 (port 1 RX) registers - offset 0xC0</span>
<span class="cm">   DMA channel 3 (port 1 TX) registers - offset 0xE0</span>
<span class="cm">*/</span>

<span class="cp">#define DMAC0RX_OFFSET 0x80</span>
<span class="cp">#define DMAC0TX_OFFSET 0xA0</span>
<span class="cp">#define DMAC1RX_OFFSET 0xC0</span>
<span class="cp">#define DMAC1TX_OFFSET 0xE0</span>

<span class="cp">#define BARL   0x00		</span><span class="cm">/* Buffer Address L (chained block) */</span><span class="cp"></span>
<span class="cp">#define BARH   0x01		</span><span class="cm">/* Buffer Address H (chained block) */</span><span class="cp"></span>
<span class="cp">#define BARB   0x02		</span><span class="cm">/* Buffer Address B (chained block) */</span><span class="cp"></span>

<span class="cp">#define DARL   0x00		</span><span class="cm">/* RX Destination Addr L (single block) */</span><span class="cp"></span>
<span class="cp">#define DARH   0x01		</span><span class="cm">/* RX Destination Addr H (single block) */</span><span class="cp"></span>
<span class="cp">#define DARB   0x02		</span><span class="cm">/* RX Destination Addr B (single block) */</span><span class="cp"></span>

<span class="cp">#define SARL   0x04		</span><span class="cm">/* TX Source Address L (single block) */</span><span class="cp"></span>
<span class="cp">#define SARH   0x05		</span><span class="cm">/* TX Source Address H (single block) */</span><span class="cp"></span>
<span class="cp">#define SARB   0x06		</span><span class="cm">/* TX Source Address B (single block) */</span><span class="cp"></span>

<span class="cp">#define CPB    0x06		</span><span class="cm">/* Chain Pointer Base (chained block) */</span><span class="cp"></span>

<span class="cp">#define CDAL   0x08		</span><span class="cm">/* Current Descriptor Addr L (chained block) */</span><span class="cp"></span>
<span class="cp">#define CDAH   0x09		</span><span class="cm">/* Current Descriptor Addr H (chained block) */</span><span class="cp"></span>
<span class="cp">#define EDAL   0x0A		</span><span class="cm">/* Error Descriptor Addr L (chained block) */</span><span class="cp"></span>
<span class="cp">#define EDAH   0x0B		</span><span class="cm">/* Error Descriptor Addr H (chained block) */</span><span class="cp"></span>
<span class="cp">#define BFLL   0x0C		</span><span class="cm">/* RX Receive Buffer Length L (chained block)*/</span><span class="cp"></span>
<span class="cp">#define BFLH   0x0D		</span><span class="cm">/* RX Receive Buffer Length H (chained block)*/</span><span class="cp"></span>
<span class="cp">#define BCRL   0x0E		</span><span class="cm">/* Byte Count L */</span><span class="cp"></span>
<span class="cp">#define BCRH   0x0F		</span><span class="cm">/* Byte Count H */</span><span class="cp"></span>
<span class="cp">#define DSR    0x10		</span><span class="cm">/* DMA Status */</span><span class="cp"></span>
<span class="cp">#define DSR_RX(node) (DSR + (node ? DMAC1RX_OFFSET : DMAC0RX_OFFSET))</span>
<span class="cp">#define DSR_TX(node) (DSR + (node ? DMAC1TX_OFFSET : DMAC0TX_OFFSET))</span>
<span class="cp">#define DMR    0x11		</span><span class="cm">/* DMA Mode */</span><span class="cp"></span>
<span class="cp">#define DMR_RX(node) (DMR + (node ? DMAC1RX_OFFSET : DMAC0RX_OFFSET))</span>
<span class="cp">#define DMR_TX(node) (DMR + (node ? DMAC1TX_OFFSET : DMAC0TX_OFFSET))</span>
<span class="cp">#define FCT    0x13		</span><span class="cm">/* Frame End Interrupt Counter */</span><span class="cp"></span>
<span class="cp">#define FCT_RX(node) (FCT + (node ? DMAC1RX_OFFSET : DMAC0RX_OFFSET))</span>
<span class="cp">#define FCT_TX(node) (FCT + (node ? DMAC1TX_OFFSET : DMAC0TX_OFFSET))</span>
<span class="cp">#define DIR    0x14		</span><span class="cm">/* DMA Interrupt Enable */</span><span class="cp"></span>
<span class="cp">#define DIR_RX(node) (DIR + (node ? DMAC1RX_OFFSET : DMAC0RX_OFFSET))</span>
<span class="cp">#define DIR_TX(node) (DIR + (node ? DMAC1TX_OFFSET : DMAC0TX_OFFSET))</span>
<span class="cp">#define DCR    0x15		</span><span class="cm">/* DMA Command  */</span><span class="cp"></span>
<span class="cp">#define DCR_RX(node) (DCR + (node ? DMAC1RX_OFFSET : DMAC0RX_OFFSET))</span>
<span class="cp">#define DCR_TX(node) (DCR + (node ? DMAC1TX_OFFSET : DMAC0TX_OFFSET))</span>




<span class="cm">/* Descriptor Structure */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">cp</span><span class="p">;</span>			<span class="cm">/* Chain Pointer */</span>
	<span class="n">u32</span> <span class="n">bp</span><span class="p">;</span>			<span class="cm">/* Buffer Pointer (24 bits) */</span>
	<span class="n">u16</span> <span class="n">len</span><span class="p">;</span>		<span class="cm">/* Data Length */</span>
	<span class="n">u8</span> <span class="n">stat</span><span class="p">;</span>		<span class="cm">/* Status */</span>
	<span class="n">u8</span> <span class="n">unused</span><span class="p">;</span>		<span class="cm">/* pads to 2-byte boundary */</span>
<span class="p">}</span><span class="n">__packed</span> <span class="n">pkt_desc</span><span class="p">;</span>


<span class="cm">/* Packet Descriptor Status bits */</span>

<span class="cp">#define ST_TX_EOM     0x80	</span><span class="cm">/* End of frame */</span><span class="cp"></span>
<span class="cp">#define ST_TX_EOT     0x01	</span><span class="cm">/* End of transmition */</span><span class="cp"></span>

<span class="cp">#define ST_RX_EOM     0x80	</span><span class="cm">/* End of frame */</span><span class="cp"></span>
<span class="cp">#define ST_RX_SHORT   0x40	</span><span class="cm">/* Short frame */</span><span class="cp"></span>
<span class="cp">#define ST_RX_ABORT   0x20	</span><span class="cm">/* Abort */</span><span class="cp"></span>
<span class="cp">#define ST_RX_RESBIT  0x10	</span><span class="cm">/* Residual bit */</span><span class="cp"></span>
<span class="cp">#define ST_RX_OVERRUN 0x08	</span><span class="cm">/* Overrun */</span><span class="cp"></span>
<span class="cp">#define ST_RX_CRC     0x04	</span><span class="cm">/* CRC */</span><span class="cp"></span>

<span class="cp">#define ST_ERROR_MASK 0x7C</span>

<span class="cp">#define DIR_EOTE      0x80      </span><span class="cm">/* Transfer completed */</span><span class="cp"></span>
<span class="cp">#define DIR_EOME      0x40      </span><span class="cm">/* Frame Transfer Completed (chained-block) */</span><span class="cp"></span>
<span class="cp">#define DIR_BOFE      0x20      </span><span class="cm">/* Buffer Overflow/Underflow (chained-block)*/</span><span class="cp"></span>
<span class="cp">#define DIR_COFE      0x10      </span><span class="cm">/* Counter Overflow (chained-block) */</span><span class="cp"></span>


<span class="cp">#define DSR_EOT       0x80      </span><span class="cm">/* Transfer completed */</span><span class="cp"></span>
<span class="cp">#define DSR_EOM       0x40      </span><span class="cm">/* Frame Transfer Completed (chained-block) */</span><span class="cp"></span>
<span class="cp">#define DSR_BOF       0x20      </span><span class="cm">/* Buffer Overflow/Underflow (chained-block)*/</span><span class="cp"></span>
<span class="cp">#define DSR_COF       0x10      </span><span class="cm">/* Counter Overflow (chained-block) */</span><span class="cp"></span>
<span class="cp">#define DSR_DE        0x02	</span><span class="cm">/* DMA Enable */</span><span class="cp"></span>
<span class="cp">#define DSR_DWE       0x01      </span><span class="cm">/* DMA Write Disable */</span><span class="cp"></span>

<span class="cm">/* DMA Master Enable Register (DMER) bits */</span>
<span class="cp">#define DMER_DME      0x80	</span><span class="cm">/* DMA Master Enable */</span><span class="cp"></span>


<span class="cp">#define CMD_RESET     0x21	</span><span class="cm">/* Reset Channel */</span><span class="cp"></span>
<span class="cp">#define CMD_TX_ENABLE 0x02	</span><span class="cm">/* Start transmitter */</span><span class="cp"></span>
<span class="cp">#define CMD_RX_ENABLE 0x12	</span><span class="cm">/* Start receiver */</span><span class="cp"></span>

<span class="cp">#define MD0_HDLC      0x80	</span><span class="cm">/* Bit-sync HDLC mode */</span><span class="cp"></span>
<span class="cp">#define MD0_CRC_ENA   0x04	</span><span class="cm">/* Enable CRC code calculation */</span><span class="cp"></span>
<span class="cp">#define MD0_CRC_CCITT 0x02	</span><span class="cm">/* CCITT CRC instead of CRC-16 */</span><span class="cp"></span>
<span class="cp">#define MD0_CRC_PR1   0x01	</span><span class="cm">/* Initial all-ones instead of all-zeros */</span><span class="cp"></span>

<span class="cp">#define MD0_CRC_NONE  0x00</span>
<span class="cp">#define MD0_CRC_16_0  0x04</span>
<span class="cp">#define MD0_CRC_16    0x05</span>
<span class="cp">#define MD0_CRC_ITU_0 0x06</span>
<span class="cp">#define MD0_CRC_ITU   0x07</span>

<span class="cp">#define MD2_NRZ	      0x00</span>
<span class="cp">#define MD2_NRZI      0x20</span>
<span class="cp">#define MD2_MANCHESTER 0x80</span>
<span class="cp">#define MD2_FM_MARK   0xA0</span>
<span class="cp">#define MD2_FM_SPACE  0xC0</span>
<span class="cp">#define MD2_LOOPBACK  0x03      </span><span class="cm">/* Local data Loopback */</span><span class="cp"></span>

<span class="cp">#define CTL_NORTS     0x01</span>
<span class="cp">#define CTL_IDLE      0x10	</span><span class="cm">/* Transmit an idle pattern */</span><span class="cp"></span>
<span class="cp">#define CTL_UDRNC     0x20	</span><span class="cm">/* Idle after CRC or FCS+flag transmition */</span><span class="cp"></span>

<span class="cp">#define ST0_TXRDY     0x02	</span><span class="cm">/* TX ready */</span><span class="cp"></span>
<span class="cp">#define ST0_RXRDY     0x01	</span><span class="cm">/* RX ready */</span><span class="cp"></span>

<span class="cp">#define ST1_UDRN      0x80	</span><span class="cm">/* MSCI TX underrun */</span><span class="cp"></span>
<span class="cp">#define ST1_CDCD      0x04	</span><span class="cm">/* DCD level changed */</span><span class="cp"></span>

<span class="cp">#define ST3_CTS       0x08	</span><span class="cm">/* modem input - /CTS */</span><span class="cp"></span>
<span class="cp">#define ST3_DCD       0x04	</span><span class="cm">/* modem input - /DCD */</span><span class="cp"></span>

<span class="cp">#define IE0_TXINT     0x80	</span><span class="cm">/* TX INT MSCI interrupt enable */</span><span class="cp"></span>
<span class="cp">#define IE0_RXINTA    0x40	</span><span class="cm">/* RX INT A MSCI interrupt enable */</span><span class="cp"></span>
<span class="cp">#define IE1_UDRN      0x80	</span><span class="cm">/* TX underrun MSCI interrupt enable */</span><span class="cp"></span>
<span class="cp">#define IE1_CDCD      0x04	</span><span class="cm">/* DCD level changed */</span><span class="cp"></span>

<span class="cp">#define DCR_ABORT     0x01	</span><span class="cm">/* Software abort command */</span><span class="cp"></span>
<span class="cp">#define DCR_CLEAR_EOF 0x02	</span><span class="cm">/* Clear EOF interrupt */</span><span class="cp"></span>

<span class="cm">/* TX and RX Clock Source - RXS and TXS */</span>
<span class="cp">#define CLK_BRG_MASK  0x0F</span>
<span class="cp">#define CLK_LINE_RX   0x00	</span><span class="cm">/* TX/RX clock line input */</span><span class="cp"></span>
<span class="cp">#define CLK_LINE_TX   0x00	</span><span class="cm">/* TX/RX line input */</span><span class="cp"></span>
<span class="cp">#define CLK_BRG_RX    0x40	</span><span class="cm">/* internal baud rate generator */</span><span class="cp"></span>
<span class="cp">#define CLK_BRG_TX    0x40	</span><span class="cm">/* internal baud rate generator */</span><span class="cp"></span>
<span class="cp">#define CLK_RXCLK_TX  0x60	</span><span class="cm">/* TX clock from RX clock */</span><span class="cp"></span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
