<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › wireless › b43 › phy_a.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>phy_a.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef LINUX_B43_PHY_A_H_</span>
<span class="cp">#define LINUX_B43_PHY_A_H_</span>

<span class="cp">#include &quot;phy_common.h&quot;</span>


<span class="cm">/* OFDM (A) PHY Registers */</span>
<span class="cp">#define B43_PHY_VERSION_OFDM		B43_PHY_OFDM(0x00)	</span><span class="cm">/* Versioning register for A-PHY */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_BBANDCFG		B43_PHY_OFDM(0x01)	</span><span class="cm">/* Baseband config */</span><span class="cp"></span>
<span class="cp">#define  B43_PHY_BBANDCFG_RXANT		0x180	</span><span class="cm">/* RX Antenna selection */</span><span class="cp"></span>
<span class="cp">#define  B43_PHY_BBANDCFG_RXANT_SHIFT	7</span>
<span class="cp">#define B43_PHY_PWRDOWN			B43_PHY_OFDM(0x03)	</span><span class="cm">/* Powerdown */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_CRSTHRES1_R1		B43_PHY_OFDM(0x06)	</span><span class="cm">/* CRS Threshold 1 (phy.rev 1 only) */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_LNAHPFCTL		B43_PHY_OFDM(0x1C)	</span><span class="cm">/* LNA/HPF control */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_LPFGAINCTL		B43_PHY_OFDM(0x20)	</span><span class="cm">/* LPF Gain control */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_ADIVRELATED		B43_PHY_OFDM(0x27)	</span><span class="cm">/* FIXME rename */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_CRS0			B43_PHY_OFDM(0x29)</span>
<span class="cp">#define  B43_PHY_CRS0_EN		0x4000</span>
<span class="cp">#define B43_PHY_PEAK_COUNT		B43_PHY_OFDM(0x30)</span>
<span class="cp">#define B43_PHY_ANTDWELL		B43_PHY_OFDM(0x2B)	</span><span class="cm">/* Antenna dwell */</span><span class="cp"></span>
<span class="cp">#define  B43_PHY_ANTDWELL_AUTODIV1	0x0100	</span><span class="cm">/* Automatic RX diversity start antenna */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_ENCORE			B43_PHY_OFDM(0x49)	</span><span class="cm">/* &quot;Encore&quot; (RangeMax / BroadRange) */</span><span class="cp"></span>
<span class="cp">#define  B43_PHY_ENCORE_EN		0x0200	</span><span class="cm">/* Encore enable */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_LMS			B43_PHY_OFDM(0x55)</span>
<span class="cp">#define B43_PHY_OFDM61			B43_PHY_OFDM(0x61)	</span><span class="cm">/* FIXME rename */</span><span class="cp"></span>
<span class="cp">#define  B43_PHY_OFDM61_10		0x0010	</span><span class="cm">/* FIXME rename */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_IQBAL			B43_PHY_OFDM(0x69)	</span><span class="cm">/* I/Q balance */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_BBTXDC_BIAS		B43_PHY_OFDM(0x6B)	</span><span class="cm">/* Baseband TX DC bias */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_OTABLECTL		B43_PHY_OFDM(0x72)	</span><span class="cm">/* OFDM table control (see below) */</span><span class="cp"></span>
<span class="cp">#define  B43_PHY_OTABLEOFF		0x03FF	</span><span class="cm">/* OFDM table offset (see below) */</span><span class="cp"></span>
<span class="cp">#define  B43_PHY_OTABLENR		0xFC00	</span><span class="cm">/* OFDM table number (see below) */</span><span class="cp"></span>
<span class="cp">#define  B43_PHY_OTABLENR_SHIFT		10</span>
<span class="cp">#define B43_PHY_OTABLEI			B43_PHY_OFDM(0x73)	</span><span class="cm">/* OFDM table data I */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_OTABLEQ			B43_PHY_OFDM(0x74)	</span><span class="cm">/* OFDM table data Q */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_HPWR_TSSICTL		B43_PHY_OFDM(0x78)	</span><span class="cm">/* Hardware power TSSI control */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_ADCCTL			B43_PHY_OFDM(0x7A)	</span><span class="cm">/* ADC control */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_IDLE_TSSI		B43_PHY_OFDM(0x7B)</span>
<span class="cp">#define B43_PHY_A_TEMP_SENSE		B43_PHY_OFDM(0x7C)	</span><span class="cm">/* A PHY temperature sense */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_NRSSITHRES		B43_PHY_OFDM(0x8A)	</span><span class="cm">/* NRSSI threshold */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_ANTWRSETT		B43_PHY_OFDM(0x8C)	</span><span class="cm">/* Antenna WR settle */</span><span class="cp"></span>
<span class="cp">#define  B43_PHY_ANTWRSETT_ARXDIV	0x2000	</span><span class="cm">/* Automatic RX diversity enabled */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_CLIPPWRDOWNT		B43_PHY_OFDM(0x93)	</span><span class="cm">/* Clip powerdown threshold */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_OFDM9B			B43_PHY_OFDM(0x9B)	</span><span class="cm">/* FIXME rename */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_N1P1GAIN		B43_PHY_OFDM(0xA0)</span>
<span class="cp">#define B43_PHY_P1P2GAIN		B43_PHY_OFDM(0xA1)</span>
<span class="cp">#define B43_PHY_N1N2GAIN		B43_PHY_OFDM(0xA2)</span>
<span class="cp">#define B43_PHY_CLIPTHRES		B43_PHY_OFDM(0xA3)</span>
<span class="cp">#define B43_PHY_CLIPN1P2THRES		B43_PHY_OFDM(0xA4)</span>
<span class="cp">#define B43_PHY_CCKSHIFTBITS_WA		B43_PHY_OFDM(0xA5)	</span><span class="cm">/* CCK shiftbits workaround, FIXME rename */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_CCKSHIFTBITS		B43_PHY_OFDM(0xA7)	</span><span class="cm">/* FIXME rename */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_DIVSRCHIDX		B43_PHY_OFDM(0xA8)	</span><span class="cm">/* Divider search gain/index */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_CLIPP2THRES		B43_PHY_OFDM(0xA9)</span>
<span class="cp">#define B43_PHY_CLIPP3THRES		B43_PHY_OFDM(0xAA)</span>
<span class="cp">#define B43_PHY_DIVP1P2GAIN		B43_PHY_OFDM(0xAB)</span>
<span class="cp">#define B43_PHY_DIVSRCHGAINBACK		B43_PHY_OFDM(0xAD)	</span><span class="cm">/* Divider search gain back */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_DIVSRCHGAINCHNG		B43_PHY_OFDM(0xAE)	</span><span class="cm">/* Divider search gain change */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_CRSTHRES1		B43_PHY_OFDM(0xC0)	</span><span class="cm">/* CRS Threshold 1 (phy.rev &gt;= 2 only) */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_CRSTHRES2		B43_PHY_OFDM(0xC1)	</span><span class="cm">/* CRS Threshold 2 (phy.rev &gt;= 2 only) */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_TSSIP_LTBASE		B43_PHY_OFDM(0x380)	</span><span class="cm">/* TSSI power lookup table base */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_DC_LTBASE		B43_PHY_OFDM(0x3A0)	</span><span class="cm">/* DC lookup table base */</span><span class="cp"></span>
<span class="cp">#define B43_PHY_GAIN_LTBASE		B43_PHY_OFDM(0x3C0)	</span><span class="cm">/* Gain lookup table base */</span><span class="cp"></span>

<span class="cm">/*** OFDM table numbers ***/</span>
<span class="cp">#define B43_OFDMTAB(number, offset)	(((number) &lt;&lt; B43_PHY_OTABLENR_SHIFT) | (offset))</span>
<span class="cp">#define B43_OFDMTAB_AGC1		B43_OFDMTAB(0x00, 0)</span>
<span class="cp">#define B43_OFDMTAB_GAIN0		B43_OFDMTAB(0x00, 0)</span>
<span class="cp">#define B43_OFDMTAB_GAINX		B43_OFDMTAB(0x01, 0)	</span><span class="c1">//TODO rename</span>
<span class="cp">#define B43_OFDMTAB_GAIN1		B43_OFDMTAB(0x01, 4)</span>
<span class="cp">#define B43_OFDMTAB_AGC3		B43_OFDMTAB(0x02, 0)</span>
<span class="cp">#define B43_OFDMTAB_GAIN2		B43_OFDMTAB(0x02, 3)</span>
<span class="cp">#define B43_OFDMTAB_LNAHPFGAIN1		B43_OFDMTAB(0x03, 0)</span>
<span class="cp">#define B43_OFDMTAB_WRSSI		B43_OFDMTAB(0x04, 0)</span>
<span class="cp">#define B43_OFDMTAB_LNAHPFGAIN2		B43_OFDMTAB(0x04, 0)</span>
<span class="cp">#define B43_OFDMTAB_NOISESCALE		B43_OFDMTAB(0x05, 0)</span>
<span class="cp">#define B43_OFDMTAB_AGC2		B43_OFDMTAB(0x06, 0)</span>
<span class="cp">#define B43_OFDMTAB_ROTOR		B43_OFDMTAB(0x08, 0)</span>
<span class="cp">#define B43_OFDMTAB_ADVRETARD		B43_OFDMTAB(0x09, 0)</span>
<span class="cp">#define B43_OFDMTAB_DAC			B43_OFDMTAB(0x0C, 0)</span>
<span class="cp">#define B43_OFDMTAB_DC			B43_OFDMTAB(0x0E, 7)</span>
<span class="cp">#define B43_OFDMTAB_PWRDYN2		B43_OFDMTAB(0x0E, 12)</span>
<span class="cp">#define B43_OFDMTAB_LNAGAIN		B43_OFDMTAB(0x0E, 13)</span>
<span class="cp">#define B43_OFDMTAB_UNKNOWN_0F		B43_OFDMTAB(0x0F, 0)	</span><span class="c1">//TODO rename</span>
<span class="cp">#define B43_OFDMTAB_UNKNOWN_APHY	B43_OFDMTAB(0x0F, 7)	</span><span class="c1">//TODO rename</span>
<span class="cp">#define B43_OFDMTAB_LPFGAIN		B43_OFDMTAB(0x0F, 12)</span>
<span class="cp">#define B43_OFDMTAB_RSSI		B43_OFDMTAB(0x10, 0)</span>
<span class="cp">#define B43_OFDMTAB_UNKNOWN_11		B43_OFDMTAB(0x11, 4)	</span><span class="c1">//TODO rename</span>
<span class="cp">#define B43_OFDMTAB_AGC1_R1		B43_OFDMTAB(0x13, 0)</span>
<span class="cp">#define B43_OFDMTAB_GAINX_R1		B43_OFDMTAB(0x14, 0)	</span><span class="c1">//TODO remove!</span>
<span class="cp">#define B43_OFDMTAB_MINSIGSQ		B43_OFDMTAB(0x14, 0)</span>
<span class="cp">#define B43_OFDMTAB_AGC3_R1		B43_OFDMTAB(0x15, 0)</span>
<span class="cp">#define B43_OFDMTAB_WRSSI_R1		B43_OFDMTAB(0x15, 4)</span>
<span class="cp">#define B43_OFDMTAB_TSSI		B43_OFDMTAB(0x15, 0)</span>
<span class="cp">#define B43_OFDMTAB_DACRFPABB		B43_OFDMTAB(0x16, 0)</span>
<span class="cp">#define B43_OFDMTAB_DACOFF		B43_OFDMTAB(0x17, 0)</span>
<span class="cp">#define B43_OFDMTAB_DCBIAS		B43_OFDMTAB(0x18, 0)</span>

<span class="n">u16</span> <span class="n">b43_ofdmtab_read16</span><span class="p">(</span><span class="k">struct</span> <span class="n">b43_wldev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u16</span> <span class="n">table</span><span class="p">,</span> <span class="n">u16</span> <span class="n">offset</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">b43_ofdmtab_write16</span><span class="p">(</span><span class="k">struct</span> <span class="n">b43_wldev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u16</span> <span class="n">table</span><span class="p">,</span>
			 <span class="n">u16</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">value</span><span class="p">);</span>
<span class="n">u32</span> <span class="n">b43_ofdmtab_read32</span><span class="p">(</span><span class="k">struct</span> <span class="n">b43_wldev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u16</span> <span class="n">table</span><span class="p">,</span> <span class="n">u16</span> <span class="n">offset</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">b43_ofdmtab_write32</span><span class="p">(</span><span class="k">struct</span> <span class="n">b43_wldev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u16</span> <span class="n">table</span><span class="p">,</span>
			 <span class="n">u16</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u32</span> <span class="n">value</span><span class="p">);</span>


<span class="k">struct</span> <span class="n">b43_phy_a</span> <span class="p">{</span>
	<span class="cm">/* Pointer to the table used to convert a</span>
<span class="cm">	 * TSSI value to dBm-Q5.2 */</span>
	<span class="k">const</span> <span class="n">s8</span> <span class="o">*</span><span class="n">tssi2dbm</span><span class="p">;</span>
	<span class="cm">/* Target idle TSSI */</span>
	<span class="kt">int</span> <span class="n">tgt_idle_tssi</span><span class="p">;</span>
	<span class="cm">/* Current idle TSSI */</span>
	<span class="kt">int</span> <span class="n">cur_idle_tssi</span><span class="p">;</span><span class="c1">//FIXME value currently not set</span>

	<span class="cm">/* A-PHY TX Power control value. */</span>
	<span class="n">u16</span> <span class="n">txpwr_offset</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>TODO lots of missing stuff</p></td><td class="code"><div class="highlight"><pre><span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * b43_phy_inita - Lowlevel A-PHY init routine.</span>
<span class="cm"> * This is _only_ used by the G-PHY code.</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">b43_phy_inita</span><span class="p">(</span><span class="k">struct</span> <span class="n">b43_wldev</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>


<span class="k">struct</span> <span class="n">b43_phy_operations</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">b43_phy_operations</span> <span class="n">b43_phyops_a</span><span class="p">;</span>

<span class="cp">#endif </span><span class="cm">/* LINUX_B43_PHY_A_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
