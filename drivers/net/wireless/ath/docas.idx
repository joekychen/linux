d | ath5k |  | 32 items |  | Bob Copeland | me@bobcopeland.com | 1340132185 |  | ath5k: remove _bh from inner locks  spin_unlock_bh(&txq->lock) already disables softirqs so we don't want to do it here.  Fixes smatch warnings:     drivers/net/wireless/ath/ath5k/base.c:1048 ath5k_drain_tx_buffs() error: double lock 'bottom_half:'    drivers/net/wireless/ath/ath5k/base.c:1056 ath5k_drain_tx_buffs() error: double unlock 'bottom_half:'  Reported-by: Johannes Berg <johannes.berg@intel.com> Signed-off-by: Bob Copeland <me@bobcopeland.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | debug.c | s | 1.4K | 45 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103868 |  | drivers/net: Add export.h to files using EXPORT_SYMBOL/THIS_MODULE  These were getting the macros from an implicit module.h include via device.h, but we are planning to clean that up.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>  drivers/net: Add export.h to wireless/brcm80211/brcmfmac/bcmsdh.c  This relatively recently added file uses EXPORT_SYMBOL and hence needs export.h included so that it is compatible with the module.h split up work.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | reg.h | s | 2.3K | 55 | Felix Fietkau | nbd@openwrt.org | 1286823860 |  | ath9k_hw: move the cycle counter tracking to ath  Instead of keeping track of wraparound, clear the counters on every access and keep separate deltas for ANI and later survey use. Also moves the function for calculating the 'listen time' for ANI  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: Bruno Randolf <br1@einfach.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | Makefile | g | 288B |  | Luis R. Rodriguez | mcgrof@qca.qualcomm.com | 1324497972 |  | atheros: force endian checks on atheros wireless drivers  Please NACK nasty patches.  Cc: Kalle Valo <kvalo@qca.qualcomm.com> Signed-off-by: Luis R. Rodriguez <mcgrof@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
d | carl9170 |  | 22 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1337727046 |  | 
f | regd.c | s | 17K | 578 | Joe Perches | joe@perches.com | 1334083933 |  | ath: Add and use pr_fmt, convert printks to pr_<level>  Use a more current logging style. Make sure all output is prefixed appropriately.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | key.c | s | 16K | 514 | Felix Fietkau | nbd@openwrt.org | 1340651653 |  | ath9k: fix dynamic WEP related regression  commit 7a532fe7131216a02c81a6c1b1f8632da1195a58 ath9k_hw: fix interpretation of the rx KeyMiss flag  This commit used the rx key miss indication to detect packets that were passed from the hardware without being decrypted, however it seems that this bit is not only undefined in the static WEP case, but also for dynamically allocated WEP keys. This caused a regression when using WEP-LEAP.  This patch fixes the regression by keeping track of which key indexes refer to CCMP keys and only using the key miss indication for those.  Reported-by: Stanislaw Gruszka <sgruszka@redhat.com> Signed-off-by: Felix Fietkau <nbd@openwrt.org> Cc: stable@vger.kernel.org Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | regd_common.h | s | 13K | 433 | Pavel Roskin | proski@gnu.org | 1312833853 |  | ath: fix spelling of Grenada  Signed-off-by: Pavel Roskin <proski@gnu.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
d | ath9k |  | 87 items |  | Tom Hughes | tom@compton.nu | 1340822893 |  | ath9k: fix panic caused by returning a descriptor we have queued for reuse  Commit 3a2923e83c introduced a bug when a corrupt descriptor is encountered - although the following descriptor is discarded and returned to the queue for reuse the associated frame is also returned for processing. This leads to a panic:  BUG: unable to handle kernel NULL pointer dereference at 000000000000003a IP: [<ffffffffa02599a5>] ath_rx_tasklet+0x165/0x1b00 [ath9k] Call Trace: <IRQ> [<ffffffff812d7fa0>] ? map_single+0x60/0x60 [<ffffffffa028f044>] ? ath9k_ioread32+0x34/0x90 [ath9k] [<ffffffffa0292eec>] athk9k_tasklet+0xdc/0x160 [ath9k] [<ffffffff8105e133>] tasklet_action+0x63/0xd0 [<ffffffff8105dbc0>] __do_softirq+0xc0/0x1e0 [<ffffffff8101a873>] ? native_sched_clock+0x13/0x80 [<ffffffff815f9d5c>] call_softirq+0x1c/0x30 [<ffffffff810151f5>] do_softirq+0x75/0xb0 [<ffffffff8105df95>] irq_exit+0xb5/0xc0 [<ffffffff815fa5b3>] do_IRQ+0x63/0xe0 [<ffffffff815f0cea>] common_interrupt+0x6a/0x6a <EOI> [<ffffffff8131840a>] ? intel_idle+0xea/0x150 [<ffffffff813183eb>] ? intel_idle+0xcb/0x150 [<ffffffff814a1db9>] cpuidle_enter+0x19/0x20 [<ffffffff814a23d9>] cpuidle_idle_call+0xa9/0x240 [<ffffffff8101c4bf>] cpu_idle+0xaf/0x120 [<ffffffff815cda8e>] rest_init+0x72/0x74 [<ffffffff81cf4c1a>] start_kernel+0x3b7/0x3c4 [<ffffffff81cf4662>] ? repair_env_string+0x5e/0x5e [<ffffffff81cf4346>] x86_64_start_reservations+0x131/0x135 [<ffffffff81cf444a>] x86_64_start_kernel+0x100/0x10f  Making sure bf is cleared to NULL in this case restores the old behaviour.  Signed-off-by: Tom Hughes <tom@compton.nu> Signed-off-by: John W. Linville <linville@tuxdriver.com>
d | ath6kl |  | 28 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1337885669 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/davem/net  Pull more networking updates from David Miller:  "Ok, everything from here on out will be bug fixes."  1) One final sync of wireless and bluetooth stuff from John Linville.    These changes have all been in his tree for more than a week, and    therefore have had the necessary -next exposure.  John was just away    on a trip and didn't have a change to send the pull request until a    day or two ago.  2) Put back some defines in user exposed header file areas that were    removed during the tokenring purge.  From Stephen Hemminger and Paul    Gortmaker.  3) A bug fix for UDP hash table allocation got lost in the pile due to    one of those "you got it..  no I've got it.." situations.  :-)     From Tim Bird.  4) SKB coalescing in TCP needs to have stricter checks, otherwise we'll    try to coalesce overlapping frags and crash.  Fix from Eric Dumazet.  5) RCU routing table lookups can race with free_fib_info(), causing    crashes when we deref the device pointers in the route.  Fix by    releasing the net device in the RCU callback.  From Yanmin Zhang.  * git://git.kernel.org/pub/scm/linux/kernel/git/davem/net: (293 commits)   tcp: take care of overlaps in tcp_try_coalesce()   ipv4: fix the rcu race between free_fib_info and ip_route_output_slow   mm: add a low limit to alloc_large_system_hash   ipx: restore token ring define to include/linux/ipx.h   if: restore token ring ARP type to header   xen: do not disable netfront in dom0   phy/micrel: Fix ID of KSZ9021   mISDN: Add X-Tensions USB ISDN TA XC-525   gianfar:don't add FCB length to hard_header_len   Bluetooth: Report proper error number in disconnection   Bluetooth: Create flags for bt_sk()   Bluetooth: report the right security level in getsockopt   Bluetooth: Lock the L2CAP channel when sending   Bluetooth: Restore locking semantics when looking up L2CAP channels   Bluetooth: Fix a redundant and problematic incoming MTU check   Bluetooth: Add support for Foxconn/Hon Hai AR5BBU22 0489:E03C   Bluetooth: Fix EIR data generation for mgmt_device_found   Bluetooth: Fix Inquiry with RSSI event mask   Bluetooth: improve readability of l2cap_seq_list code   Bluetooth: Fix skb length calculation   ...
f | Kconfig | g | 947B |  | Linus Torvalds | torvalds@linux-foundation.org | 1320252339 |  | Merge branch 'for-linus' of git://github.com/richardweinberger/linux  * 'for-linus' of git://github.com/richardweinberger/linux: (90 commits)   um: fix ubd cow size   um: Fix kmalloc argument order in um/vdso/vma.c   um: switch to use of drivers/Kconfig   UserModeLinux-HOWTO.txt: fix a typo   UserModeLinux-HOWTO.txt: remove ^H characters   um: we need sys/user.h only on i386   um: merge delay_{32,64}.c   um: distribute exports to where exported stuff is defined   um: kill system-um.h   um: generic ftrace.h will do...   um: segment.h is x86-only and needed only there   um: asm/pda.h is not needed anymore   um: hw_irq.h can go generic as well   um: switch to generic-y   um: clean Kconfig up a bit   um: a couple of missing dependencies...   um: kill useless argument of free_chan() and free_one_chan()   um: unify ptrace_user.h   um: unify KSTK_...   um: fix gcov build breakage   ...
f | hw.c | s | 6.1K | 167 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103868 |  | drivers/net: Add export.h to files using EXPORT_SYMBOL/THIS_MODULE  These were getting the macros from an implicit module.h include via device.h, but we are planning to clean that up.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>  drivers/net: Add export.h to wireless/brcm80211/brcmfmac/bcmsdh.c  This relatively recently added file uses EXPORT_SYMBOL and hence needs export.h included so that it is compatible with the module.h split up work.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | ath.h | s | 8.1K | 251 | Felix Fietkau | nbd@openwrt.org | 1340651653 |  | ath9k: fix dynamic WEP related regression  commit 7a532fe7131216a02c81a6c1b1f8632da1195a58 ath9k_hw: fix interpretation of the rx KeyMiss flag  This commit used the rx key miss indication to detect packets that were passed from the hardware without being decrypted, however it seems that this bit is not only undefined in the static WEP case, but also for dynamically allocated WEP keys. This caused a regression when using WEP-LEAP.  This patch fixes the regression by keeping track of which key indexes refer to CCMP keys and only using the key miss indication for those.  Reported-by: Stanislaw Gruszka <sgruszka@redhat.com> Signed-off-by: Felix Fietkau <nbd@openwrt.org> Cc: stable@vger.kernel.org Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | main.c | s | 2.4K | 68 | Joe Perches | joe@perches.com | 1334083933 |  | ath: Add and use pr_fmt, convert printks to pr_<level>  Use a more current logging style. Make sure all output is prefixed appropriately.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | regd.h | s | 6.1K | 249 | Pavel Roskin | proski@gnu.org | 1312833853 |  | ath: fix spelling of Grenada  Signed-off-by: Pavel Roskin <proski@gnu.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
