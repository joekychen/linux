<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › wireless › ath › ath6kl › target.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>target.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2004-2010 Atheros Communications Inc.</span>
<span class="cm"> * Copyright (c) 2011 Qualcomm Atheros, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> * Permission to use, copy, modify, and/or distribute this software for any</span>
<span class="cm"> * purpose with or without fee is hereby granted, provided that the above</span>
<span class="cm"> * copyright notice and this permission notice appear in all copies.</span>
<span class="cm"> *</span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span>
<span class="cm"> * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</span>
<span class="cm"> * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR</span>
<span class="cm"> * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span>
<span class="cm"> * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN</span>
<span class="cm"> * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF</span>
<span class="cm"> * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef TARGET_H</span>
<span class="cp">#define TARGET_H</span>

<span class="cp">#define AR6003_BOARD_DATA_SZ		1024</span>
<span class="cp">#define AR6003_BOARD_EXT_DATA_SZ	768</span>
<span class="cp">#define AR6003_BOARD_EXT_DATA_SZ_V2	1024</span>

<span class="cp">#define AR6004_BOARD_DATA_SZ     6144</span>
<span class="cp">#define AR6004_BOARD_EXT_DATA_SZ 0</span>

<span class="cp">#define RESET_CONTROL_ADDRESS		0x00000000</span>
<span class="cp">#define RESET_CONTROL_COLD_RST		0x00000100</span>
<span class="cp">#define RESET_CONTROL_MBOX_RST		0x00000004</span>

<span class="cp">#define CPU_CLOCK_STANDARD_S		0</span>
<span class="cp">#define CPU_CLOCK_STANDARD		0x00000003</span>
<span class="cp">#define CPU_CLOCK_ADDRESS		0x00000020</span>

<span class="cp">#define CLOCK_CONTROL_ADDRESS		0x00000028</span>
<span class="cp">#define CLOCK_CONTROL_LF_CLK32_S	2</span>
<span class="cp">#define CLOCK_CONTROL_LF_CLK32		0x00000004</span>

<span class="cp">#define SYSTEM_SLEEP_ADDRESS		0x000000c4</span>
<span class="cp">#define SYSTEM_SLEEP_DISABLE_S		0</span>
<span class="cp">#define SYSTEM_SLEEP_DISABLE		0x00000001</span>

<span class="cp">#define LPO_CAL_ADDRESS			0x000000e0</span>
<span class="cp">#define LPO_CAL_ENABLE_S		20</span>
<span class="cp">#define LPO_CAL_ENABLE			0x00100000</span>

<span class="cp">#define GPIO_PIN10_ADDRESS		0x00000050</span>
<span class="cp">#define GPIO_PIN11_ADDRESS		0x00000054</span>
<span class="cp">#define GPIO_PIN12_ADDRESS		0x00000058</span>
<span class="cp">#define GPIO_PIN13_ADDRESS		0x0000005c</span>

<span class="cp">#define HOST_INT_STATUS_ADDRESS		0x00000400</span>
<span class="cp">#define HOST_INT_STATUS_ERROR_S		7</span>
<span class="cp">#define HOST_INT_STATUS_ERROR		0x00000080</span>

<span class="cp">#define HOST_INT_STATUS_CPU_S		6</span>
<span class="cp">#define HOST_INT_STATUS_CPU		0x00000040</span>

<span class="cp">#define HOST_INT_STATUS_COUNTER_S	4</span>
<span class="cp">#define HOST_INT_STATUS_COUNTER		0x00000010</span>

<span class="cp">#define CPU_INT_STATUS_ADDRESS		0x00000401</span>

<span class="cp">#define ERROR_INT_STATUS_ADDRESS	0x00000402</span>
<span class="cp">#define ERROR_INT_STATUS_WAKEUP_S	2</span>
<span class="cp">#define ERROR_INT_STATUS_WAKEUP		0x00000004</span>

<span class="cp">#define ERROR_INT_STATUS_RX_UNDERFLOW_S	1</span>
<span class="cp">#define ERROR_INT_STATUS_RX_UNDERFLOW	0x00000002</span>

<span class="cp">#define ERROR_INT_STATUS_TX_OVERFLOW_S	0</span>
<span class="cp">#define ERROR_INT_STATUS_TX_OVERFLOW	0x00000001</span>

<span class="cp">#define COUNTER_INT_STATUS_ADDRESS	0x00000403</span>
<span class="cp">#define COUNTER_INT_STATUS_COUNTER_S	0</span>
<span class="cp">#define COUNTER_INT_STATUS_COUNTER	0x000000ff</span>

<span class="cp">#define RX_LOOKAHEAD_VALID_ADDRESS	0x00000405</span>

<span class="cp">#define INT_STATUS_ENABLE_ADDRESS	0x00000418</span>
<span class="cp">#define INT_STATUS_ENABLE_ERROR_S	7</span>
<span class="cp">#define INT_STATUS_ENABLE_ERROR		0x00000080</span>

<span class="cp">#define INT_STATUS_ENABLE_CPU_S		6</span>
<span class="cp">#define INT_STATUS_ENABLE_CPU		0x00000040</span>

<span class="cp">#define INT_STATUS_ENABLE_INT_S		5</span>
<span class="cp">#define INT_STATUS_ENABLE_INT		0x00000020</span>
<span class="cp">#define INT_STATUS_ENABLE_COUNTER_S	4</span>
<span class="cp">#define INT_STATUS_ENABLE_COUNTER	0x00000010</span>

<span class="cp">#define INT_STATUS_ENABLE_MBOX_DATA_S	0</span>
<span class="cp">#define INT_STATUS_ENABLE_MBOX_DATA	0x0000000f</span>

<span class="cp">#define CPU_INT_STATUS_ENABLE_ADDRESS	0x00000419</span>
<span class="cp">#define CPU_INT_STATUS_ENABLE_BIT_S	0</span>
<span class="cp">#define CPU_INT_STATUS_ENABLE_BIT	0x000000ff</span>

<span class="cp">#define ERROR_STATUS_ENABLE_ADDRESS		0x0000041a</span>
<span class="cp">#define ERROR_STATUS_ENABLE_RX_UNDERFLOW_S	1</span>
<span class="cp">#define ERROR_STATUS_ENABLE_RX_UNDERFLOW	0x00000002</span>

<span class="cp">#define ERROR_STATUS_ENABLE_TX_OVERFLOW_S	0</span>
<span class="cp">#define ERROR_STATUS_ENABLE_TX_OVERFLOW		0x00000001</span>

<span class="cp">#define COUNTER_INT_STATUS_ENABLE_ADDRESS	0x0000041b</span>
<span class="cp">#define COUNTER_INT_STATUS_ENABLE_BIT_S		0</span>
<span class="cp">#define COUNTER_INT_STATUS_ENABLE_BIT		0x000000ff</span>

<span class="cp">#define COUNT_ADDRESS			0x00000420</span>

<span class="cp">#define COUNT_DEC_ADDRESS		0x00000440</span>

<span class="cp">#define WINDOW_DATA_ADDRESS		0x00000474</span>
<span class="cp">#define WINDOW_WRITE_ADDR_ADDRESS	0x00000478</span>
<span class="cp">#define WINDOW_READ_ADDR_ADDRESS	0x0000047c</span>
<span class="cp">#define CPU_DBG_SEL_ADDRESS		0x00000483</span>
<span class="cp">#define CPU_DBG_ADDRESS			0x00000484</span>

<span class="cp">#define LOCAL_SCRATCH_ADDRESS		0x000000c0</span>
<span class="cp">#define ATH6KL_OPTION_SLEEP_DISABLE	0x08</span>

<span class="cp">#define RTC_BASE_ADDRESS		0x00004000</span>
<span class="cp">#define GPIO_BASE_ADDRESS		0x00014000</span>
<span class="cp">#define MBOX_BASE_ADDRESS		0x00018000</span>
<span class="cp">#define ANALOG_INTF_BASE_ADDRESS	0x0001c000</span>

<span class="cm">/* real name of the register is unknown */</span>
<span class="cp">#define ATH6KL_ANALOG_PLL_REGISTER	(ANALOG_INTF_BASE_ADDRESS + 0x284)</span>

<span class="cp">#define SM(f, v)	(((v) &lt;&lt; f##_S) &amp; f)</span>
<span class="cp">#define MS(f, v)	(((v) &amp; f) &gt;&gt; f##_S)</span>

<span class="cm">/*</span>
<span class="cm"> * xxx_HOST_INTEREST_ADDRESS is the address in Target RAM of the</span>
<span class="cm"> * host_interest structure.</span>
<span class="cm"> *</span>
<span class="cm"> * Host Interest is shared between Host and Target in order to coordinate</span>
<span class="cm"> * between the two, and is intended to remain constant (with additions only</span>
<span class="cm"> * at the end).</span>
<span class="cm"> */</span>
<span class="cp">#define ATH6KL_AR6003_HI_START_ADDR           0x00540600</span>
<span class="cp">#define ATH6KL_AR6004_HI_START_ADDR           0x00400800</span>

<span class="cm">/*</span>
<span class="cm"> * These are items that the Host may need to access</span>
<span class="cm"> * via BMI or via the Diagnostic Window. The position</span>
<span class="cm"> * of items in this structure must remain constant.</span>
<span class="cm"> * across firmware revisions!</span>
<span class="cm"> *</span>
<span class="cm"> * Types for each item must be fixed size across target and host platforms.</span>
<span class="cm"> * The structure is used only to calculate offset for each register with</span>
<span class="cm"> * HI_ITEM() macro, no values are stored to it.</span>
<span class="cm"> *</span>
<span class="cm"> * More items may be added at the end.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">host_interest</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * Pointer to application-defined area, if any.</span>
<span class="cm">	 * Set by Target application during startup.</span>
<span class="cm">	 */</span>
	<span class="n">u32</span> <span class="n">hi_app_host_interest</span><span class="p">;</span>                      <span class="cm">/* 0x00 */</span>

	<span class="cm">/* Pointer to register dump area, valid after Target crash. */</span>
	<span class="n">u32</span> <span class="n">hi_failure_state</span><span class="p">;</span>                          <span class="cm">/* 0x04 */</span>

	<span class="cm">/* Pointer to debug logging header */</span>
	<span class="n">u32</span> <span class="n">hi_dbglog_hdr</span><span class="p">;</span>                             <span class="cm">/* 0x08 */</span>

	<span class="n">u32</span> <span class="n">hi_unused1</span><span class="p">;</span>                       <span class="cm">/* 0x0c */</span>

	<span class="cm">/*</span>
<span class="cm">	 * General-purpose flag bits, similar to ATH6KL_OPTION_* flags.</span>
<span class="cm">	 * Can be used by application rather than by OS.</span>
<span class="cm">	 */</span>
	<span class="n">u32</span> <span class="n">hi_option_flag</span><span class="p">;</span>                            <span class="cm">/* 0x10 */</span>

	<span class="cm">/*</span>
<span class="cm">	 * Boolean that determines whether or not to</span>
<span class="cm">	 * display messages on the serial port.</span>
<span class="cm">	 */</span>
	<span class="n">u32</span> <span class="n">hi_serial_enable</span><span class="p">;</span>                          <span class="cm">/* 0x14 */</span>

	<span class="cm">/* Start address of DataSet index, if any */</span>
	<span class="n">u32</span> <span class="n">hi_dset_list_head</span><span class="p">;</span>                         <span class="cm">/* 0x18 */</span>

	<span class="cm">/* Override Target application start address */</span>
	<span class="n">u32</span> <span class="n">hi_app_start</span><span class="p">;</span>                              <span class="cm">/* 0x1c */</span>

	<span class="cm">/* Clock and voltage tuning */</span>
	<span class="n">u32</span> <span class="n">hi_skip_clock_init</span><span class="p">;</span>                        <span class="cm">/* 0x20 */</span>
	<span class="n">u32</span> <span class="n">hi_core_clock_setting</span><span class="p">;</span>                     <span class="cm">/* 0x24 */</span>
	<span class="n">u32</span> <span class="n">hi_cpu_clock_setting</span><span class="p">;</span>                      <span class="cm">/* 0x28 */</span>
	<span class="n">u32</span> <span class="n">hi_system_sleep_setting</span><span class="p">;</span>                   <span class="cm">/* 0x2c */</span>
	<span class="n">u32</span> <span class="n">hi_xtal_control_setting</span><span class="p">;</span>                   <span class="cm">/* 0x30 */</span>
	<span class="n">u32</span> <span class="n">hi_pll_ctrl_setting_24ghz</span><span class="p">;</span>                 <span class="cm">/* 0x34 */</span>
	<span class="n">u32</span> <span class="n">hi_pll_ctrl_setting_5ghz</span><span class="p">;</span>                  <span class="cm">/* 0x38 */</span>
	<span class="n">u32</span> <span class="n">hi_ref_voltage_trim_setting</span><span class="p">;</span>               <span class="cm">/* 0x3c */</span>
	<span class="n">u32</span> <span class="n">hi_clock_info</span><span class="p">;</span>                             <span class="cm">/* 0x40 */</span>

	<span class="cm">/*</span>
<span class="cm">	 * Flash configuration overrides, used only</span>
<span class="cm">	 * when firmware is not executing from flash.</span>
<span class="cm">	 * (When using flash, modify the global variables</span>
<span class="cm">	 * with equivalent names.)</span>
<span class="cm">	 */</span>
	<span class="n">u32</span> <span class="n">hi_bank0_addr_value</span><span class="p">;</span>                       <span class="cm">/* 0x44 */</span>
	<span class="n">u32</span> <span class="n">hi_bank0_read_value</span><span class="p">;</span>                       <span class="cm">/* 0x48 */</span>
	<span class="n">u32</span> <span class="n">hi_bank0_write_value</span><span class="p">;</span>                      <span class="cm">/* 0x4c */</span>
	<span class="n">u32</span> <span class="n">hi_bank0_config_value</span><span class="p">;</span>                     <span class="cm">/* 0x50 */</span>

	<span class="cm">/* Pointer to Board Data  */</span>
	<span class="n">u32</span> <span class="n">hi_board_data</span><span class="p">;</span>                             <span class="cm">/* 0x54 */</span>
	<span class="n">u32</span> <span class="n">hi_board_data_initialized</span><span class="p">;</span>                 <span class="cm">/* 0x58 */</span>

	<span class="n">u32</span> <span class="n">hi_dset_ram_index_tbl</span><span class="p">;</span>                     <span class="cm">/* 0x5c */</span>

	<span class="n">u32</span> <span class="n">hi_desired_baud_rate</span><span class="p">;</span>                      <span class="cm">/* 0x60 */</span>
	<span class="n">u32</span> <span class="n">hi_dbglog_config</span><span class="p">;</span>                          <span class="cm">/* 0x64 */</span>
	<span class="n">u32</span> <span class="n">hi_end_ram_reserve_sz</span><span class="p">;</span>                     <span class="cm">/* 0x68 */</span>
	<span class="n">u32</span> <span class="n">hi_mbox_io_block_sz</span><span class="p">;</span>                       <span class="cm">/* 0x6c */</span>

	<span class="n">u32</span> <span class="n">hi_num_bpatch_streams</span><span class="p">;</span>                     <span class="cm">/* 0x70 -- unused */</span>
	<span class="n">u32</span> <span class="n">hi_mbox_isr_yield_limit</span><span class="p">;</span>                   <span class="cm">/* 0x74 */</span>

	<span class="n">u32</span> <span class="n">hi_refclk_hz</span><span class="p">;</span>                              <span class="cm">/* 0x78 */</span>
	<span class="n">u32</span> <span class="n">hi_ext_clk_detected</span><span class="p">;</span>                       <span class="cm">/* 0x7c */</span>
	<span class="n">u32</span> <span class="n">hi_dbg_uart_txpin</span><span class="p">;</span>                         <span class="cm">/* 0x80 */</span>
	<span class="n">u32</span> <span class="n">hi_dbg_uart_rxpin</span><span class="p">;</span>                         <span class="cm">/* 0x84 */</span>
	<span class="n">u32</span> <span class="n">hi_hci_uart_baud</span><span class="p">;</span>                          <span class="cm">/* 0x88 */</span>
	<span class="n">u32</span> <span class="n">hi_hci_uart_pin_assignments</span><span class="p">;</span>               <span class="cm">/* 0x8C */</span>
	<span class="cm">/*</span>
<span class="cm">	 * NOTE: byte [0] = tx pin, [1] = rx pin, [2] = rts pin, [3] = cts</span>
<span class="cm">	 * pin</span>
<span class="cm">	 */</span>
	<span class="n">u32</span> <span class="n">hi_hci_uart_baud_scale_val</span><span class="p">;</span>                <span class="cm">/* 0x90 */</span>
	<span class="n">u32</span> <span class="n">hi_hci_uart_baud_step_val</span><span class="p">;</span>                 <span class="cm">/* 0x94 */</span>

	<span class="n">u32</span> <span class="n">hi_allocram_start</span><span class="p">;</span>                         <span class="cm">/* 0x98 */</span>
	<span class="n">u32</span> <span class="n">hi_allocram_sz</span><span class="p">;</span>                            <span class="cm">/* 0x9c */</span>
	<span class="n">u32</span> <span class="n">hi_hci_bridge_flags</span><span class="p">;</span>                       <span class="cm">/* 0xa0 */</span>
	<span class="n">u32</span> <span class="n">hi_hci_uart_support_pins</span><span class="p">;</span>                  <span class="cm">/* 0xa4 */</span>
	<span class="cm">/*</span>
<span class="cm">	 * NOTE: byte [0] = RESET pin (bit 7 is polarity),</span>
<span class="cm">	 * bytes[1]..bytes[3] are for future use</span>
<span class="cm">	 */</span>
	<span class="n">u32</span> <span class="n">hi_hci_uart_pwr_mgmt_params</span><span class="p">;</span>               <span class="cm">/* 0xa8 */</span>
	<span class="cm">/*</span>
<span class="cm">	 * 0xa8   - [1]: 0 = UART FC active low, 1 = UART FC active high</span>
<span class="cm">	 *      [31:16]: wakeup timeout in ms</span>
<span class="cm">	 */</span>

	<span class="cm">/* Pointer to extended board data */</span>
	<span class="n">u32</span> <span class="n">hi_board_ext_data</span><span class="p">;</span>                <span class="cm">/* 0xac */</span>
	<span class="n">u32</span> <span class="n">hi_board_ext_data_config</span><span class="p">;</span>         <span class="cm">/* 0xb0 */</span>

	<span class="cm">/*</span>
<span class="cm">	 * Bit [0]  :   valid</span>
<span class="cm">	 * Bit[31:16:   size</span>
<span class="cm">	 */</span>
	<span class="cm">/*</span>
<span class="cm">	 * hi_reset_flag is used to do some stuff when target reset.</span>
<span class="cm">	 * such as restore app_start after warm reset or</span>
<span class="cm">	 * preserve host Interest area, or preserve ROM data, literals etc.</span>
<span class="cm">	 */</span>
	<span class="n">u32</span> <span class="n">hi_reset_flag</span><span class="p">;</span>                            <span class="cm">/* 0xb4 */</span>
	<span class="cm">/* indicate hi_reset_flag is valid */</span>
	<span class="n">u32</span> <span class="n">hi_reset_flag_valid</span><span class="p">;</span>                      <span class="cm">/* 0xb8 */</span>
	<span class="n">u32</span> <span class="n">hi_hci_uart_pwr_mgmt_params_ext</span><span class="p">;</span>           <span class="cm">/* 0xbc */</span>
	<span class="cm">/*</span>
<span class="cm">	 * 0xbc - [31:0]: idle timeout in ms</span>
<span class="cm">	 */</span>
	<span class="cm">/* ACS flags */</span>
	<span class="n">u32</span> <span class="n">hi_acs_flags</span><span class="p">;</span>                              <span class="cm">/* 0xc0 */</span>
	<span class="n">u32</span> <span class="n">hi_console_flags</span><span class="p">;</span>                          <span class="cm">/* 0xc4 */</span>
	<span class="n">u32</span> <span class="n">hi_nvram_state</span><span class="p">;</span>                            <span class="cm">/* 0xc8 */</span>
	<span class="n">u32</span> <span class="n">hi_option_flag2</span><span class="p">;</span>                           <span class="cm">/* 0xcc */</span>

	<span class="cm">/* If non-zero, override values sent to Host in WMI_READY event. */</span>
	<span class="n">u32</span> <span class="n">hi_sw_version_override</span><span class="p">;</span>                    <span class="cm">/* 0xd0 */</span>
	<span class="n">u32</span> <span class="n">hi_abi_version_override</span><span class="p">;</span>                   <span class="cm">/* 0xd4 */</span>

	<span class="cm">/*</span>
<span class="cm">	 * Percentage of high priority RX traffic to total expected RX traffic -</span>
<span class="cm">	 * applicable only to ar6004</span>
<span class="cm">	 */</span>
	<span class="n">u32</span> <span class="n">hi_hp_rx_traffic_ratio</span><span class="p">;</span>                    <span class="cm">/* 0xd8 */</span>

	<span class="cm">/* test applications flags */</span>
	<span class="n">u32</span> <span class="n">hi_test_apps_related</span>    <span class="p">;</span>                  <span class="cm">/* 0xdc */</span>
	<span class="cm">/* location of test script */</span>
	<span class="n">u32</span> <span class="n">hi_ota_testscript</span><span class="p">;</span>                         <span class="cm">/* 0xe0 */</span>
	<span class="cm">/* location of CAL data */</span>
	<span class="n">u32</span> <span class="n">hi_cal_data</span><span class="p">;</span>                               <span class="cm">/* 0xe4 */</span>
	<span class="cm">/* Number of packet log buffers */</span>
	<span class="n">u32</span> <span class="n">hi_pktlog_num_buffers</span><span class="p">;</span>                     <span class="cm">/* 0xe8 */</span>

<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define HI_ITEM(item)  offsetof(struct host_interest, item)</span>

<span class="cp">#define HI_OPTION_MAC_ADDR_METHOD_SHIFT	3</span>

<span class="cp">#define HI_OPTION_FW_MODE_IBSS    0x0</span>
<span class="cp">#define HI_OPTION_FW_MODE_BSS_STA 0x1</span>
<span class="cp">#define HI_OPTION_FW_MODE_AP      0x2</span>

<span class="cp">#define HI_OPTION_FW_SUBMODE_NONE      0x0</span>
<span class="cp">#define HI_OPTION_FW_SUBMODE_P2PDEV    0x1</span>
<span class="cp">#define HI_OPTION_FW_SUBMODE_P2PCLIENT 0x2</span>
<span class="cp">#define HI_OPTION_FW_SUBMODE_P2PGO     0x3</span>

<span class="cp">#define HI_OPTION_NUM_DEV_SHIFT   0x9</span>

<span class="cp">#define HI_OPTION_FW_BRIDGE_SHIFT 0x04</span>

<span class="cm">/* Fw Mode/SubMode Mask</span>
<span class="cm">|------------------------------------------------------------------------------|</span>
<span class="cm">|   SUB   |   SUB   |   SUB   |  SUB    |         |         |         |</span>
<span class="cm">| MODE[3] | MODE[2] | MODE[1] | MODE[0] | MODE[3] | MODE[2] | MODE[1] | MODE[0|</span>
<span class="cm">|   (2)   |   (2)   |   (2)   |   (2)   |   (2)   |   (2)   |   (2)   |   (2)</span>
<span class="cm">|------------------------------------------------------------------------------|</span>
<span class="cm">*/</span>
<span class="cp">#define HI_OPTION_FW_MODE_BITS	       0x2</span>
<span class="cp">#define HI_OPTION_FW_MODE_SHIFT        0xC</span>

<span class="cp">#define HI_OPTION_FW_SUBMODE_BITS      0x2</span>
<span class="cp">#define HI_OPTION_FW_SUBMODE_SHIFT     0x14</span>

<span class="cm">/* Convert a Target virtual address into a Target physical address */</span>
<span class="cp">#define AR6003_VTOP(vaddr) ((vaddr) &amp; 0x001fffff)</span>
<span class="cp">#define AR6004_VTOP(vaddr) (vaddr)</span>

<span class="cp">#define TARG_VTOP(target_type, vaddr) \</span>
<span class="cp">	(((target_type) == TARGET_TYPE_AR6003) ? AR6003_VTOP(vaddr) : \</span>
<span class="cp">	(((target_type) == TARGET_TYPE_AR6004) ? AR6004_VTOP(vaddr) : 0))</span>

<span class="cp">#define ATH6KL_FWLOG_PAYLOAD_SIZE		1500</span>

<span class="k">struct</span> <span class="n">ath6kl_dbglog_buf</span> <span class="p">{</span>
	<span class="n">__le32</span> <span class="n">next</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">buffer_addr</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">bufsize</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">length</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">count</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">free</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ath6kl_dbglog_hdr</span> <span class="p">{</span>
	<span class="n">__le32</span> <span class="n">dbuf_addr</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">dropped</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
