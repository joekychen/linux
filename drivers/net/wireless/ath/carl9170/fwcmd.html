<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › wireless › ath › carl9170 › fwcmd.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>fwcmd.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Shared Atheros AR9170 Header</span>
<span class="cm"> *</span>
<span class="cm"> * Firmware command interface definitions</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2008, Johannes Berg &lt;johannes@sipsolutions.net&gt;</span>
<span class="cm"> * Copyright 2009-2011 Christian Lamparter &lt;chunkeey@googlemail.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; see the file COPYING.  If not, see</span>
<span class="cm"> * http://www.gnu.org/licenses/.</span>
<span class="cm"> *</span>
<span class="cm"> * This file incorporates work covered by the following copyright and</span>
<span class="cm"> * permission notice:</span>
<span class="cm"> *    Copyright (c) 2007-2008 Atheros Communications, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> *    Permission to use, copy, modify, and/or distribute this software for any</span>
<span class="cm"> *    purpose with or without fee is hereby granted, provided that the above</span>
<span class="cm"> *    copyright notice and this permission notice appear in all copies.</span>
<span class="cm"> *</span>
<span class="cm"> *    THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span>
<span class="cm"> *    WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</span>
<span class="cm"> *    MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR</span>
<span class="cm"> *    ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span>
<span class="cm"> *    WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN</span>
<span class="cm"> *    ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF</span>
<span class="cm"> *    OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __CARL9170_SHARED_FWCMD_H</span>
<span class="cp">#define __CARL9170_SHARED_FWCMD_H</span>

<span class="cp">#define	CARL9170_MAX_CMD_LEN		64</span>
<span class="cp">#define	CARL9170_MAX_CMD_PAYLOAD_LEN	60</span>

<span class="cp">#define CARL9170FW_API_MIN_VER		1</span>
<span class="cp">#define CARL9170FW_API_MAX_VER		1</span>

<span class="k">enum</span> <span class="n">carl9170_cmd_oids</span> <span class="p">{</span>
	<span class="n">CARL9170_CMD_RREG</span>		<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_WREG</span>		<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_ECHO</span>		<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_SWRST</span>		<span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_REBOOT</span>		<span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_BCN_CTRL</span>		<span class="o">=</span> <span class="mh">0x05</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_READ_TSF</span>		<span class="o">=</span> <span class="mh">0x06</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_RX_FILTER</span>		<span class="o">=</span> <span class="mh">0x07</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_WOL</span>		<span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_TALLY</span>		<span class="o">=</span> <span class="mh">0x09</span><span class="p">,</span>

	<span class="cm">/* CAM */</span>
	<span class="n">CARL9170_CMD_EKEY</span>		<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_DKEY</span>		<span class="o">=</span> <span class="mh">0x11</span><span class="p">,</span>

	<span class="cm">/* RF / PHY */</span>
	<span class="n">CARL9170_CMD_FREQUENCY</span>		<span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_RF_INIT</span>		<span class="o">=</span> <span class="mh">0x21</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_SYNTH</span>		<span class="o">=</span> <span class="mh">0x22</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_FREQ_START</span>		<span class="o">=</span> <span class="mh">0x23</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_PSM</span>		<span class="o">=</span> <span class="mh">0x24</span><span class="p">,</span>

	<span class="cm">/* Asychronous command flag */</span>
	<span class="n">CARL9170_CMD_ASYNC_FLAG</span>		<span class="o">=</span> <span class="mh">0x40</span><span class="p">,</span>
	<span class="n">CARL9170_CMD_WREG_ASYNC</span>		<span class="o">=</span> <span class="p">(</span><span class="n">CARL9170_CMD_WREG</span> <span class="o">|</span>
					   <span class="n">CARL9170_CMD_ASYNC_FLAG</span><span class="p">),</span>
	<span class="n">CARL9170_CMD_REBOOT_ASYNC</span>	<span class="o">=</span> <span class="p">(</span><span class="n">CARL9170_CMD_REBOOT</span> <span class="o">|</span>
					   <span class="n">CARL9170_CMD_ASYNC_FLAG</span><span class="p">),</span>
	<span class="n">CARL9170_CMD_BCN_CTRL_ASYNC</span>	<span class="o">=</span> <span class="p">(</span><span class="n">CARL9170_CMD_BCN_CTRL</span> <span class="o">|</span>
					   <span class="n">CARL9170_CMD_ASYNC_FLAG</span><span class="p">),</span>
	<span class="n">CARL9170_CMD_PSM_ASYNC</span>		<span class="o">=</span> <span class="p">(</span><span class="n">CARL9170_CMD_PSM</span> <span class="o">|</span>
					   <span class="n">CARL9170_CMD_ASYNC_FLAG</span><span class="p">),</span>

	<span class="cm">/* responses and traps */</span>
	<span class="n">CARL9170_RSP_FLAG</span>		<span class="o">=</span> <span class="mh">0xc0</span><span class="p">,</span>
	<span class="n">CARL9170_RSP_PRETBTT</span>		<span class="o">=</span> <span class="mh">0xc0</span><span class="p">,</span>
	<span class="n">CARL9170_RSP_TXCOMP</span>		<span class="o">=</span> <span class="mh">0xc1</span><span class="p">,</span>
	<span class="n">CARL9170_RSP_BEACON_CONFIG</span>	<span class="o">=</span> <span class="mh">0xc2</span><span class="p">,</span>
	<span class="n">CARL9170_RSP_ATIM</span>		<span class="o">=</span> <span class="mh">0xc3</span><span class="p">,</span>
	<span class="n">CARL9170_RSP_WATCHDOG</span>		<span class="o">=</span> <span class="mh">0xc6</span><span class="p">,</span>
	<span class="n">CARL9170_RSP_TEXT</span>		<span class="o">=</span> <span class="mh">0xca</span><span class="p">,</span>
	<span class="n">CARL9170_RSP_HEXDUMP</span>		<span class="o">=</span> <span class="mh">0xcc</span><span class="p">,</span>
	<span class="n">CARL9170_RSP_RADAR</span>		<span class="o">=</span> <span class="mh">0xcd</span><span class="p">,</span>
	<span class="n">CARL9170_RSP_GPIO</span>		<span class="o">=</span> <span class="mh">0xce</span><span class="p">,</span>
	<span class="n">CARL9170_RSP_BOOT</span>		<span class="o">=</span> <span class="mh">0xcf</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">carl9170_set_key_cmd</span> <span class="p">{</span>
	<span class="n">__le16</span>		<span class="n">user</span><span class="p">;</span>
	<span class="n">__le16</span>		<span class="n">keyId</span><span class="p">;</span>
	<span class="n">__le16</span>		<span class="n">type</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">macAddr</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u32</span>		<span class="n">key</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">__aligned</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
<span class="cp">#define CARL9170_SET_KEY_CMD_SIZE		28</span>

<span class="k">struct</span> <span class="n">carl9170_disable_key_cmd</span> <span class="p">{</span>
	<span class="n">__le16</span>		<span class="n">user</span><span class="p">;</span>
	<span class="n">__le16</span>		<span class="n">padding</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">__aligned</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
<span class="cp">#define CARL9170_DISABLE_KEY_CMD_SIZE		4</span>

<span class="k">struct</span> <span class="n">carl9170_u32_list</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">carl9170_reg_list</span> <span class="p">{</span>
	<span class="n">__le32</span>		<span class="n">regs</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">carl9170_write_reg</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">__le32</span>		<span class="n">addr</span><span class="p">;</span>
		<span class="n">__le32</span>		<span class="n">val</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">regs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="n">__packed</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define	CARL9170FW_PHY_HT_ENABLE		0x4</span>
<span class="cp">#define	CARL9170FW_PHY_HT_DYN2040		0x8</span>
<span class="cp">#define	CARL9170FW_PHY_HT_EXT_CHAN_OFF		0x3</span>
<span class="cp">#define	CARL9170FW_PHY_HT_EXT_CHAN_OFF_S	2</span>

<span class="k">struct</span> <span class="n">carl9170_rf_init</span> <span class="p">{</span>
	<span class="n">__le32</span>		<span class="n">freq</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">ht_settings</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">padding2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">__le32</span>		<span class="n">delta_slope_coeff_exp</span><span class="p">;</span>
	<span class="n">__le32</span>		<span class="n">delta_slope_coeff_man</span><span class="p">;</span>
	<span class="n">__le32</span>		<span class="n">delta_slope_coeff_exp_shgi</span><span class="p">;</span>
	<span class="n">__le32</span>		<span class="n">delta_slope_coeff_man_shgi</span><span class="p">;</span>
	<span class="n">__le32</span>		<span class="n">finiteLoopCount</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="cp">#define CARL9170_RF_INIT_SIZE		28</span>

<span class="k">struct</span> <span class="n">carl9170_rf_init_result</span> <span class="p">{</span>
	<span class="n">__le32</span>		<span class="n">ret</span><span class="p">;</span>		<span class="cm">/* AR9170_PHY_REG_AGC_CONTROL */</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="cp">#define	CARL9170_RF_INIT_RESULT_SIZE	4</span>

<span class="cp">#define	CARL9170_PSM_SLEEP		0x1000</span>
<span class="cp">#define	CARL9170_PSM_SOFTWARE		0</span>
<span class="cp">#define	CARL9170_PSM_WAKE		0 </span><span class="cm">/* internally used. */</span><span class="cp"></span>
<span class="cp">#define	CARL9170_PSM_COUNTER		0xfff</span>
<span class="cp">#define	CARL9170_PSM_COUNTER_S		0</span>

<span class="k">struct</span> <span class="n">carl9170_psm</span> <span class="p">{</span>
	<span class="n">__le32</span>		<span class="n">state</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="cp">#define CARL9170_PSM_SIZE		4</span>

<span class="k">struct</span> <span class="n">carl9170_rx_filter_cmd</span> <span class="p">{</span>
	<span class="n">__le32</span>		<span class="n">rx_filter</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="cp">#define CARL9170_RX_FILTER_CMD_SIZE	4</span>

<span class="cp">#define CARL9170_RX_FILTER_BAD		0x01</span>
<span class="cp">#define CARL9170_RX_FILTER_OTHER_RA	0x02</span>
<span class="cp">#define CARL9170_RX_FILTER_DECRY_FAIL	0x04</span>
<span class="cp">#define CARL9170_RX_FILTER_CTL_OTHER	0x08</span>
<span class="cp">#define CARL9170_RX_FILTER_CTL_PSPOLL	0x10</span>
<span class="cp">#define CARL9170_RX_FILTER_CTL_BACKR	0x20</span>
<span class="cp">#define CARL9170_RX_FILTER_MGMT		0x40</span>
<span class="cp">#define CARL9170_RX_FILTER_DATA		0x80</span>
<span class="cp">#define CARL9170_RX_FILTER_EVERYTHING	(~0)</span>

<span class="k">struct</span> <span class="n">carl9170_bcn_ctrl_cmd</span> <span class="p">{</span>
	<span class="n">__le32</span>		<span class="n">vif_id</span><span class="p">;</span>
	<span class="n">__le32</span>		<span class="n">mode</span><span class="p">;</span>
	<span class="n">__le32</span>		<span class="n">bcn_addr</span><span class="p">;</span>
	<span class="n">__le32</span>		<span class="n">bcn_len</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="cp">#define CARL9170_BCN_CTRL_CMD_SIZE	16</span>

<span class="cp">#define CARL9170_BCN_CTRL_DRAIN	0</span>
<span class="cp">#define CARL9170_BCN_CTRL_CAB_TRIGGER	1</span>

<span class="k">struct</span> <span class="n">carl9170_wol_cmd</span> <span class="p">{</span>
	<span class="n">__le32</span>		<span class="n">flags</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">mac</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span>		<span class="n">bssid</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">__le32</span>		<span class="n">null_interval</span><span class="p">;</span>
	<span class="n">__le32</span>		<span class="n">free_for_use2</span><span class="p">;</span>
	<span class="n">__le32</span>		<span class="n">mask</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">pattern</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define CARL9170_WOL_CMD_SIZE		60</span>

<span class="cp">#define CARL9170_WOL_DISCONNECT		1</span>
<span class="cp">#define CARL9170_WOL_MAGIC_PKT		2</span>

<span class="k">struct</span> <span class="n">carl9170_cmd_head</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u8</span>	<span class="n">len</span><span class="p">;</span>
			<span class="n">u8</span>	<span class="n">cmd</span><span class="p">;</span>
			<span class="n">u8</span>	<span class="n">seq</span><span class="p">;</span>
			<span class="n">u8</span>	<span class="n">ext</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

		<span class="n">u32</span> <span class="n">hdr_data</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">carl9170_cmd</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">carl9170_cmd_head</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">carl9170_set_key_cmd</span>	<span class="n">setkey</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">carl9170_disable_key_cmd</span>	<span class="n">disablekey</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">carl9170_u32_list</span>	<span class="n">echo</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">carl9170_reg_list</span>	<span class="n">rreg</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">carl9170_write_reg</span>	<span class="n">wreg</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">carl9170_rf_init</span>		<span class="n">rf_init</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">carl9170_psm</span>		<span class="n">psm</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">carl9170_wol_cmd</span>		<span class="n">wol</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">carl9170_bcn_ctrl_cmd</span>	<span class="n">bcn_ctrl</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">carl9170_rx_filter_cmd</span>	<span class="n">rx_filter</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">data</span><span class="p">[</span><span class="n">CARL9170_MAX_CMD_PAYLOAD_LEN</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">__aligned</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="cp">#define	CARL9170_TX_STATUS_QUEUE	3</span>
<span class="cp">#define	CARL9170_TX_STATUS_QUEUE_S	0</span>
<span class="cp">#define	CARL9170_TX_STATUS_RIX_S	2</span>
<span class="cp">#define	CARL9170_TX_STATUS_RIX		(3 &lt;&lt; CARL9170_TX_STATUS_RIX_S)</span>
<span class="cp">#define	CARL9170_TX_STATUS_TRIES_S	4</span>
<span class="cp">#define	CARL9170_TX_STATUS_TRIES	(7 &lt;&lt; CARL9170_TX_STATUS_TRIES_S)</span>
<span class="cp">#define	CARL9170_TX_STATUS_SUCCESS	0x80</span>

<span class="cp">#ifdef __CARL9170FW__</span>
<span class="cm">/*</span>
<span class="cm"> * NOTE:</span>
<span class="cm"> * Both structs [carl9170_tx_status and _carl9170_tx_status]</span>
<span class="cm"> * need to be &quot;bit for bit&quot; in sync.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">carl9170_tx_status</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * Beware of compiler bugs in all gcc pre 4.4!</span>
<span class="cm">	 */</span>

	<span class="n">u8</span> <span class="n">cookie</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">queue</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rix</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tries</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">success</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="cp">#endif </span><span class="cm">/* __CARL9170FW__ */</span><span class="cp"></span>

<span class="k">struct</span> <span class="n">_carl9170_tx_status</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * This version should be immune to all alignment bugs.</span>
<span class="cm">	 */</span>

	<span class="n">u8</span> <span class="n">cookie</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">info</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="cp">#define CARL9170_TX_STATUS_SIZE		2</span>

<span class="cp">#define	CARL9170_RSP_TX_STATUS_NUM	(CARL9170_MAX_CMD_PAYLOAD_LEN /	\</span>
<span class="cp">					 sizeof(struct _carl9170_tx_status))</span>

<span class="cp">#define	CARL9170_TX_MAX_RATE_TRIES	7</span>

<span class="cp">#define	CARL9170_TX_MAX_RATES		4</span>
<span class="cp">#define	CARL9170_TX_MAX_RETRY_RATES	(CARL9170_TX_MAX_RATES - 1)</span>
<span class="cp">#define	CARL9170_ERR_MAGIC		&quot;ERR:&quot;</span>
<span class="cp">#define	CARL9170_BUG_MAGIC		&quot;BUG:&quot;</span>

<span class="k">struct</span> <span class="n">carl9170_gpio</span> <span class="p">{</span>
	<span class="n">__le32</span> <span class="n">gpio</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="cp">#define CARL9170_GPIO_SIZE		4</span>

<span class="k">struct</span> <span class="n">carl9170_tsf_rsp</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="n">__le32</span> <span class="n">tsf</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
		<span class="n">__le64</span> <span class="n">tsf_64</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="cp">#define CARL9170_TSF_RSP_SIZE		8</span>

<span class="k">struct</span> <span class="n">carl9170_tally_rsp</span> <span class="p">{</span>
	<span class="n">__le32</span> <span class="n">active</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">cca</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">tx_time</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">rx_total</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">rx_overrun</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">tick</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">carl9170_rsp</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">carl9170_cmd_head</span> <span class="n">hdr</span><span class="p">;</span>

	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">carl9170_rf_init_result</span>	<span class="n">rf_init_res</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">carl9170_u32_list</span>	<span class="n">rreg_res</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">carl9170_u32_list</span>	<span class="n">echo</span><span class="p">;</span>
<span class="cp">#ifdef __CARL9170FW__</span>
		<span class="k">struct</span> <span class="n">carl9170_tx_status</span>	<span class="n">tx_status</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="cp">#endif </span><span class="cm">/* __CARL9170FW__ */</span><span class="cp"></span>
		<span class="k">struct</span> <span class="n">_carl9170_tx_status</span>	<span class="n">_tx_status</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
		<span class="k">struct</span> <span class="n">carl9170_gpio</span>		<span class="n">gpio</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">carl9170_tsf_rsp</span>		<span class="n">tsf</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">carl9170_psm</span>		<span class="n">psm</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">carl9170_tally_rsp</span>	<span class="n">tally</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">data</span><span class="p">[</span><span class="n">CARL9170_MAX_CMD_PAYLOAD_LEN</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">__aligned</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __CARL9170_SHARED_FWCMD_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
