f | ar9003_eeprom.c | s | 145K | 4728 | Felix Fietkau | nbd@openwrt.org | 1338313523 |  | ath9k_hw: apply internal regulator settings on AR933x  On AR933x, the internal regulator settings need to be applied before the PLL init to avoid stability issues.  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | reg.h | s | 82K | 1910 | Mohammed Shafi Shajakhan | mohammed@qca.qualcomm.com | 1331576377 |  | ath9k_hw: Fix enabling of MCI and RTT  tested in AR9462 Rev:2, both hardware capability flag are set  Signed-off-by: Mohammed Shafi Shajakhan <mohammed@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | hw-ops.h | s | 5.8K | 181 | Joe Perches | joe@perches.com | 1329112060 |  | drivers/net: Remove boolean comparisons to true/false  Booleans should not be compared to true or false but be directly tested or tested with !.  Done via cocci script:  @@ bool t; @@ - t == true + t @@ bool t; @@ - t != true + !t @@ bool t; @@ - t == false + !t @@ bool t; @@ - t != false + t  Signed-off-by: Joe Perches <joe@perches.com> Reviewed-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | htc_hst.h | s | 5.6K | 184 | Sujith Manoharan | Sujith.Manoharan@atheros.com | 1305827645 |  | ath9k: Drag the driver to the year 2011  The Times They Are a-Changin'.  Signed-off-by: Sujith Manoharan <Sujith.Manoharan@atheros.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | init.c | s | 25K | 776 | Felix Fietkau | nbd@openwrt.org | 1335209313 |  | ath9k: add possible wiphy interface combinations  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9003_eeprom.h | s | 9.6K | 306 | Felix Fietkau | nbd@openwrt.org | 1338313523 |  | ath9k_hw: apply internal regulator settings on AR933x  On AR933x, the internal regulator settings need to be applied before the PLL init to avoid stability issues.  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | debug.h | s | 8.4K | 301 | Ben Greear | greearb@candelatech.com | 1334600218 |  | ath9k: Gather and report IRQ sync_cause errors.  Report all defined sync_cause errors in debugfs to aid with debugging.  Use a macro to print out the interrupts file contents to decrease code duplication.  Signed-off-by: Ben Greear <greearb@candelatech.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | htc_drv_gpio.c | s | 10K | 330 | Sujith Manoharan | c_manoha@qca.qualcomm.com | 1330369598 |  | ath9k: Remove ATH_BTCOEX_CFG_NONE checks  Since BTCOEX code can be compiled out cleanly now, remove these checks.  Signed-off-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | Makefile | g | 1.2K |  | Zefir Kurtisi | zefir.kurtisi@neratec.com | 1334175832 |  | ath9k: add DFS pattern detector  This adds a DFS pattern detector to ath9k. It is fed with pulse events by the radar pulse detector and reports in place whether a pattern was detected. On detection, the result is reported as radar event to the DFS management component in the upper layer.  Currently the ETSI DFS domain is supported with detector lines for the patterns defined by EN-301-893 v1.5.1. Support for FCC and JP will be added gradually.  To include the pattern detector, ath9k must be built with support for DFS certified config flag set (CONFIG_ATH9K_DFS_CERTIFIED).  Signed-off-by: Zefir Kurtisi <zefir.kurtisi@neratec.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ani.c | s | 25K | 774 | Rajkumar Manoharan | rmanohar@qca.qualcomm.com | 1334601524 |  | ath9k: reset noiseimmunity level to default  After the chip reset, the noise immunity levels are restored with history values. If the immunity levels are lower than the defaults, lets start with the optimal values.  Signed-off-by: Rajkumar Manoharan <rmanohar@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9003_phy.h | s | 51K | 1073 | Felix Fietkau | nbd@openwrt.org | 1335209731 |  | ath9k_hw: increase symbol overlap window for half/quarter channels  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | common.c | s | 5.1K | 181 | Felix Fietkau | nbd@openwrt.org | 1318365686 |  | ath9k_hw: clean up tx power handling  The code for handling various restrictions concerning regulatory limits, antenna gain, etc. is very convoluted and duplicated across various EEPROM parsing implementations, making it hard to review.  This patch partially cleans up the mess by unifying regulatory limit handling in one function and simplifying handling of antenna gain. It also removes unused transmit power scaling arrays from the EEPROM code, which belonged to an unimplemented API that isn't supposed to be in the driver anyway.  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9002_initvals.h | s | 143K | 3152 | Felix Fietkau | nbd@openwrt.org | 1331833508 |  | ath9k: inline AR9271 1.0 INI overrides  Makes them more readable and reduces code size  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | rc.h | s | 7.4K | 210 | Mohammed Shafi Shajakhan | mohammed@qca.qualcomm.com | 1330978994 |  | ath9k: completely zero intialize valid_phy_rate_idx  its better to zero initialize the 'valid_phy_rate_idx' array completely  Signed-off-by: Mohammed Shafi Shajakhan <mohammed@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | pci.c | s | 9.7K | 310 | Joe Perches | joe@perches.com | 1334083933 |  | ath: Add and use pr_fmt, convert printks to pr_<level>  Use a more current logging style. Make sure all output is prefixed appropriately.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | eeprom_4k.c | s | 32K | 964 | Joe Perches | joe@perches.com | 1324323331 |  | ath: Convert ath_dbg(bar, ATH_DBG_<FOO>, to ath_dbg(bar, FOO  Add ATH_DBG_ to macros to shorten the uses and reduce the line count.  Coalesce ath_dbg formats. Add missing spaces to coalesced formats. Add missing newline terminations to ath_dbg formats. Align ath_dbg arguments where appropriate. Standardize ath_dbg formats without periods.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | gpio.c | s | 11K | 342 | Rajkumar Manoharan | rmanohar@qca.qualcomm.com | 1335209730 |  | ath9k_hw: remove ATH_BTCOEX_CFG_MCI  AR9462 uses modified version of 3-Wire hw scheme for btcoex. MCI itself is not a separate hw scheme but it aids to manage multiple bt profiles. In ar9462, bt priority traffic is identified by the number of bt profile types instead of gpio. So that this patch removes MCI hw scheme.  Signed-off-by: Rajkumar Manoharan <rmanohar@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | eeprom_def.c | s | 41K | 1223 | Gabor Juhos | juhosg@openwrt.org | 1334601533 |  | ath9k: introduce ath9k_hw_get_scaled_power helper  The computation of the scaled power value in various eeprom files uses identical code. Move that code into a helper function and use that instead of code duplication.  Signed-off-by: Gabor Juhos <juhosg@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9003_hw.c | s | 23K | 708 | Sujith Manoharan | c_manoha@qca.qualcomm.com | 1334341970 |  | ath9k_hw: Remove BTCOEX initvals  The MAX_TXPWR table for BTCOEX is not needed for AR9462. Programming these values to the HW results in undesirable behavior - for example, large number of delimiter/data underruns are seen in AES-CCMP mode. Also, registers like AR_PCU_MISC_MODE2 return 0xdeadbeef after the BTCOEX_MAX power table is programmed to the HW, and frames being transmitted end up being looped back to the RX engine, an example being beacon frames in IBSS mode.  Remove this table for now - this fixes CCMP performance and general IBSS usage.  Signed-off-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9002_calib.c | s | 28K | 853 | Joe Perches | joe@perches.com | 1324323331 |  | ath: Convert ath_dbg(bar, ATH_DBG_<FOO>, to ath_dbg(bar, FOO  Add ATH_DBG_ to macros to shorten the uses and reduce the line count.  Coalesce ath_dbg formats. Add missing spaces to coalesced formats. Add missing newline terminations to ath_dbg formats. Align ath_dbg arguments where appropriate. Standardize ath_dbg formats without periods.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | eeprom_9287.c | s | 31K | 894 | David S. Miller | davem@davemloft.net | 1336448140 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/davem/net  Conflicts: 	drivers/net/ethernet/intel/e1000e/param.c 	drivers/net/wireless/iwlwifi/iwl-agn-rx.c 	drivers/net/wireless/iwlwifi/iwl-trans-pcie-rx.c 	drivers/net/wireless/iwlwifi/iwl-trans.h  Resolved the iwlwifi conflict with mainline using 3-way diff posted by John Linville and Stephen Rothwell.  In 'net' we added a bug fix to make iwlwifi report a more accurate skb->truesize but this conflicted with RX path changes that happened meanwhile in net-next.  In e1000e a conflict arose in the validation code for settings of adapter->itr.  'net-next' had more sophisticated logic so that logic was used.  Signed-off-by: David S. Miller <davem@davemloft.net>
f | ath9k.h | s | 20K | 632 | Felix Fietkau | nbd@openwrt.org | 1340132184 |  | ath9k: fix invalid pointer access in the tx path  After setup_frame_info has been called, only info->control.rates is still valid, other control fields have been overwritten by the ath_frame_info data. Move the access to info->control.vif for checking short preamble to setup_frame_info before it gets overwritten.  This regression was introduced in commit d47a61aa "ath9k: Fix multi-VIF BSS handling"  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Reported-by: Thomas Hühn <thomas@net.t-labs.tu-berlin.de> Acked-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Cc: stable@vger.kernel.org [3.4] Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | hw.h | s | 31K | 941 | Sujith Manoharan | c_manoha@qca.qualcomm.com | 1337117275 |  | ath9k_hw: Fix RTT calibration  This patch fixes multiple issues with the current RTT implementation in ath9k.  * The data that is obtained from the RTT interface registers   are stored in 31:5 - mask out the extra bits when reading them.  * A history buffer is maintained which is not needed at all.   Remove this array and just store the baseband data for each   chain (or bank).  * A 'num_readings' variable was being used to handle the   last entry. But it was being used in an improper manner, with   the result that the RTT values were never being written   to the RTT Interface registers. Fix this by using a simple   flag.  * Stop baseband operations before programming the calibration values   to the HW.  * Do not restore RX gain settings as part of RTT.  Signed-off-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9340_initvals.h | s | 57K | 1505 | Vasanthakumar Thiagarajan | vasanth@atheros.com | 1303757409 |  | ath9k_hw: Add initvals.h for ar9340  Signed-off-by: Vasanthakumar Thiagarajan <vasanth@atheros.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | debug.c | s | 46K | 1375 | Ben Greear | greearb@candelatech.com | 1334600218 |  | ath9k: Gather and report IRQ sync_cause errors.  Report all defined sync_cause errors in debugfs to aid with debugging.  Use a macro to print out the interrupts file contents to decrease code duplication.  Signed-off-by: Ben Greear <greearb@candelatech.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | eeprom.c | s | 14K | 492 | Gabor Juhos | juhosg@openwrt.org | 1334689033 |  | ath9k: move ath9k_hw_fbin2freq function to eeprom.h  Both eeprom.c and ar9003_eeprom.c has an indentical 'ath9k_hw_fbin2freq' function. Move the function to a common place and remove the duplicates.  Signed-off-by: Gabor Juhos <juhosg@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | mac.c | s | 25K | 774 | Felix Fietkau | nbd@openwrt.org | 1335209732 |  | ath9k_hw: increase tx abort timeout for half/quarter channels  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | hif_usb.h | s | 2.9K | 94 | Sujith Manoharan | c_manoha@qca.qualcomm.com | 1327956522 |  | ath9k_htc: Load firmware asynchronously  This patch modifies ath9k_htc to load the needed firmware in an asynchronous manner, fixing timeouts that were introduced with the new udev changes.  Signed-off-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | recv.c | s | 53K | 1764 | Tom Hughes | tom@compton.nu | 1340822893 |  | ath9k: fix panic caused by returning a descriptor we have queued for reuse  Commit 3a2923e83c introduced a bug when a corrupt descriptor is encountered - although the following descriptor is discarded and returned to the queue for reuse the associated frame is also returned for processing. This leads to a panic:  BUG: unable to handle kernel NULL pointer dereference at 000000000000003a IP: [<ffffffffa02599a5>] ath_rx_tasklet+0x165/0x1b00 [ath9k] Call Trace: <IRQ> [<ffffffff812d7fa0>] ? map_single+0x60/0x60 [<ffffffffa028f044>] ? ath9k_ioread32+0x34/0x90 [ath9k] [<ffffffffa0292eec>] athk9k_tasklet+0xdc/0x160 [ath9k] [<ffffffff8105e133>] tasklet_action+0x63/0xd0 [<ffffffff8105dbc0>] __do_softirq+0xc0/0x1e0 [<ffffffff8101a873>] ? native_sched_clock+0x13/0x80 [<ffffffff815f9d5c>] call_softirq+0x1c/0x30 [<ffffffff810151f5>] do_softirq+0x75/0xb0 [<ffffffff8105df95>] irq_exit+0xb5/0xc0 [<ffffffff815fa5b3>] do_IRQ+0x63/0xe0 [<ffffffff815f0cea>] common_interrupt+0x6a/0x6a <EOI> [<ffffffff8131840a>] ? intel_idle+0xea/0x150 [<ffffffff813183eb>] ? intel_idle+0xcb/0x150 [<ffffffff814a1db9>] cpuidle_enter+0x19/0x20 [<ffffffff814a23d9>] cpuidle_idle_call+0xa9/0x240 [<ffffffff8101c4bf>] cpu_idle+0xaf/0x120 [<ffffffff815cda8e>] rest_init+0x72/0x74 [<ffffffff81cf4c1a>] start_kernel+0x3b7/0x3c4 [<ffffffff81cf4662>] ? repair_env_string+0x5e/0x5e [<ffffffff81cf4346>] x86_64_start_reservations+0x131/0x135 [<ffffffff81cf444a>] x86_64_start_kernel+0x100/0x10f  Making sure bf is cleared to NULL in this case restores the old behaviour.  Signed-off-by: Tom Hughes <tom@compton.nu> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | hif_usb.c | s | 30K | 1110 | Linus Torvalds | torvalds@linux-foundation.org | 1337727046 |  | 
f | mci.c | s | 14K | 449 | Sujith Manoharan | c_manoha@qca.qualcomm.com | 1330369600 |  | ath9k: Cleanup mci.c  Cleanup whitespace, fix indentation and coding style. Also remove debug messages that were flooding the log.  Signed-off-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | htc_drv_main.c | s | 44K | 1463 | Rajkumar Manoharan | rmanohar@qca.qualcomm.com | 1340215826 |  | ath9k_htc: configure bssid on ASSOC/IBSS change  After the change "mac80211: remove spurious BSSID change flag", BSS_CHANGED_BSSID will not be passed on association or IBSS status changes. So it could be better to program bssid on ASSOC or IBSS change notification. Not doing so, is affecting the packet transmission.  Cc: stable@vger.kernel.org [3.4+] Reported-by: Michael Leun <lkml20120218@newton.leun.net> Signed-off-by: Rajkumar Manoharan <rmanohar@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar5008_phy.c | s | 43K | 1334 | David S. Miller | davem@davemloft.net | 1336448140 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/davem/net  Conflicts: 	drivers/net/ethernet/intel/e1000e/param.c 	drivers/net/wireless/iwlwifi/iwl-agn-rx.c 	drivers/net/wireless/iwlwifi/iwl-trans-pcie-rx.c 	drivers/net/wireless/iwlwifi/iwl-trans.h  Resolved the iwlwifi conflict with mainline using 3-way diff posted by John Linville and Stephen Rothwell.  In 'net' we added a bug fix to make iwlwifi report a more accurate skb->truesize but this conflicted with RX path changes that happened meanwhile in net-next.  In e1000e a conflict arose in the validation code for settings of adapter->itr.  'net-next' had more sophisticated logic so that logic was used.  Signed-off-by: David S. Miller <davem@davemloft.net>
f | ar9002_hw.c | s | 15K | 462 | Felix Fietkau | nbd@openwrt.org | 1331833508 |  | ath9k: inline AR9271 1.0 INI overrides  Makes them more readable and reduces code size  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9002_mac.c | s | 9.8K | 310 | Ben Greear | greearb@candelatech.com | 1334600218 |  | ath9k: Gather and report IRQ sync_cause errors.  Report all defined sync_cause errors in debugfs to aid with debugging.  Use a macro to print out the interrupts file contents to decrease code duplication.  Signed-off-by: Ben Greear <greearb@candelatech.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | dfs_debug.h | s | 2.7K | 73 | Zefir Kurtisi | zefir.kurtisi@neratec.com | 1335209861 |  | ath9k: extend DFS detector stats in dfs_debugfs  Extend debugfs entry for dfs_stats with DFS detection events and shared pool statistics.  Signed-off-by: Zefir Kurtisi <zefir.kurtisi@neratec.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | eeprom.h | s | 20K | 651 | Gabor Juhos | juhosg@openwrt.org | 1334689033 |  | ath9k: move ath9k_hw_fbin2freq function to eeprom.h  Both eeprom.c and ar9003_eeprom.c has an indentical 'ath9k_hw_fbin2freq' function. Move the function to a common place and remove the duplicates.  Signed-off-by: Gabor Juhos <juhosg@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ani.h | s | 4.4K | 140 | Rajkumar Manoharan | rmanohar@qca.qualcomm.com | 1334001952 |  | ath9k_hw: improve ANI processing and rx desensitizing parameters  This patch improves ANI operations by switching among the immunity levels based on PHY errors and beacon rssi which will adjust receiver desensitizing parameters. The changes are  * Configure the Weak Signal Detection based on current immunity value. * At highest OFDM immunity level poor performance was observed with   strong interference. By tuning the FIR step and spur immunity levels   and not changing any weak signal detection thresholds at any level   helped to improve the performance. * ANI took long time to recover back to lower immunity levels on heavy   data load. As the listen time got reset to zero before reaching to   the 5x of aniperiod, the immunity level is not lowering back even   without any interference. This patch fix that.  Cc: Paul Stewart <pstew@google.com> Cc: Susinder Gulasekaran <susinder@qca.qualcomm.com> Signed-off-by: Suresh Chandrasekaran <csuresh@qca.qualcomm.com> Signed-off-by: Rajkumar Manoharan <rmanohar@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9485_initvals.h | s | 44K | 1137 | Rajkumar Manoharan | rmanohar@qca.qualcomm.com | 1320261792 |  | ath9k_hw: Update AR9485 initvals to fix system hang issue  This patch fixes system hang when resuming from S3 state and lower rate sens failure issue.  Cc: stable@kernel.org Signed-off-by: Rajkumar Manoharan <rmanohar@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9002_phy.c | s | 16K | 501 | Zefir Kurtisi | zefir.kurtisi@neratec.com | 1334257832 |  | ath9k: remove dead code  Clean up some orphaned code lines containing * unused variables (not referenced / write-only) * non-implemented function prototypes  Signed-off-by: Zefir Kurtisi <zefir.kurtisi@neratec.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9003_mac.c | s | 15K | 465 | Ben Greear | greearb@candelatech.com | 1334600218 |  | ath9k: Gather and report IRQ sync_cause errors.  Report all defined sync_cause errors in debugfs to aid with debugging.  Use a macro to print out the interrupts file contents to decrease code duplication.  Signed-off-by: Ben Greear <greearb@candelatech.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar5008_initvals.h | s | 21K | 662 | Felix Fietkau | nbd@openwrt.org | 1315942951 |  | ath9k_hw: fix the last register write for ar5416 addac  The previous register used in these initvals was probably accidentally copied over from the AR9100 values.  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9330_1p1_initvals.h | s | 44K | 1128 | Felix Fietkau | nbd@openwrt.org | 1338313522 |  | ath9k_hw: update AR933x initvals to fix issues with high power devices  "> Can you provide more information about the issues with high power devices? Tx being flakey and Rx not working at all."  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | phy.h | s | 1.7K | 42 | Sujith Manoharan | Sujith.Manoharan@atheros.com | 1305827645 |  | ath9k: Drag the driver to the year 2011  The Times They Are a-Changin'.  Signed-off-by: Sujith Manoharan <Sujith.Manoharan@atheros.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9003_phy.c | s | 41K | 1257 | David S. Miller | davem@davemloft.net | 1336448140 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/davem/net  Conflicts: 	drivers/net/ethernet/intel/e1000e/param.c 	drivers/net/wireless/iwlwifi/iwl-agn-rx.c 	drivers/net/wireless/iwlwifi/iwl-trans-pcie-rx.c 	drivers/net/wireless/iwlwifi/iwl-trans.h  Resolved the iwlwifi conflict with mainline using 3-way diff posted by John Linville and Stephen Rothwell.  In 'net' we added a bug fix to make iwlwifi report a more accurate skb->truesize but this conflicted with RX path changes that happened meanwhile in net-next.  In e1000e a conflict arose in the validation code for settings of adapter->itr.  'net-next' had more sophisticated logic so that logic was used.  Signed-off-by: David S. Miller <davem@davemloft.net>
f | htc_drv_init.c | s | 25K | 813 | Johannes Berg | johannes.berg@intel.com | 1334084044 |  | mac80211: don't always advertise remain-on-channel  Not all devices are really capable of implementing remain-on-channel, even if it is implemented in SW, as they can't necessarily deal with channel changes while associated.  Remove the WIPHY_FLAG_HAS_REMAIN_ON_CHANNEL and add it only if either the driver has remain_on_channel implemented in the driver/device.  Also add it to all drivers that advertise P2P right now since those definitely have to have it working.  Signed-off-by: Johannes Berg <johannes.berg@intel.com> Acked-by: Luciano Coelho <coelho@ti.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | calib.c | s | 11K | 375 | Rajkumar Manoharan | rmanohar@qca.qualcomm.com | 1332788843 |  | ath9k: fix max noise floor threshold  Currently the maximum noise floor limit is set as too high (-60dB). The assumption of having a higher threshold limit is that it would help de-sensitize the receiver (reduce phy errors) from continuous interference. But when we have a bursty interference where there are collisions and then free air time and if the receiver is desensitized too much, it will miss the normal packets too. Lets make use of chips specific min, nom and max limits always. This patch helps to improve the connection stability in congested networks.  Cc: stable@vger.kernel.org Cc: Paul Stewart <pstew@google.com> Tested-by: Gary Morain <gmorain@google.com> Signed-off-by: Madhan Jaganathan <madhanj@qca.qualcomm.com> Signed-off-by: Rajkumar Manoharan <rmanohar@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ahb.c | s | 4.7K | 169 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103867 |  | drivers/net: Add module.h to drivers who were implicitly using it  The device.h header was including module.h, making it present for most of these drivers.  But we want to clean that up.  Call out the include of module.h in the modular network drivers.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | xmit.c | s | 64K | 2056 | Felix Fietkau | nbd@openwrt.org | 1340132184 |  | ath9k: fix invalid pointer access in the tx path  After setup_frame_info has been called, only info->control.rates is still valid, other control fields have been overwritten by the ath_frame_info data. Move the access to info->control.vif for checking short preamble to setup_frame_info before it gets overwritten.  This regression was introduced in commit d47a61aa "ath9k: Fix multi-VIF BSS handling"  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Reported-by: Thomas Hühn <thomas@net.t-labs.tu-berlin.de> Acked-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Cc: stable@vger.kernel.org [3.4] Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | dfs_pri_detector.c | s | 11K | 402 | Zefir Kurtisi | zefir.kurtisi@neratec.com | 1335209861 |  | ath9k: extend DFS detector stats in dfs_debugfs  Extend debugfs entry for dfs_stats with DFS detection events and shared pool statistics.  Signed-off-by: Zefir Kurtisi <zefir.kurtisi@neratec.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | mci.h | s | 3.5K | 120 | Sujith Manoharan | c_manoha@qca.qualcomm.com | 1330369596 |  | ath9k_hw: Cleanup MCI bits from hw.h  This patch moves all the MCI-specific declarations that have been dumped unceremoniously in hw.h to ar9003_mci.h  Signed-off-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | htc_drv_debug.c | s | 29K | 808 | Stephen Boyd | sboyd@codeaurora.org | 1333664750 |  | simple_open: automatically convert to simple_open()  Many users of debugfs copy the implementation of default_open() when they want to support a custom read/write function op.  This leads to a proliferation of the default_open() implementation across the entire tree.  Now that the common implementation has been consolidated into libfs we can replace all the users of this function with simple_open().  This replacement was done with the following semantic patch:  <smpl> @ open @ identifier open_f != simple_open; identifier i, f; @@ -int open_f(struct inode *i, struct file *f) -{ ( -if (i->i_private) -f->private_data = i->i_private; || -f->private_data = i->i_private; ) -return 0; -}  @ has_open depends on open @ identifier fops; identifier open.open_f; @@ struct file_operations fops = { ... -.open = open_f, +.open = simple_open, ... }; </smpl>  [akpm@linux-foundation.org: checkpatch fixes] Signed-off-by: Stephen Boyd <sboyd@codeaurora.org> Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Cc: Julia Lawall <Julia.Lawall@lip6.fr> Acked-by: Ingo Molnar <mingo@elte.hu> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ar9003_2p2_initvals.h | s | 58K | 1539 | Rajkumar Manoharan | rmanohar@qca.qualcomm.com | 1334001956 |  | ath9k_hw: Update rx gain initval to improve rx sensitivity  Signed-off-by: Rajkumar Manoharan <rmanohar@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9003_mci.h | s | 10K | 298 | Sujith Manoharan | c_manoha@qca.qualcomm.com | 1330369597 |  | ath9k_hw: Use CONFIG_ATH9K_BTCOEX_SUPPORT  Make use of CONFIG_ATH9K_BTCOEX_SUPPORT in ath9k_hw to provide a clean way of compilation without BTCOEX support.  Signed-off-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | wmi.c | s | 8.7K | 293 | Joe Perches | joe@perches.com | 1324323331 |  | ath: Convert ath_dbg(bar, ATH_DBG_<FOO>, to ath_dbg(bar, FOO  Add ATH_DBG_ to macros to shorten the uses and reduce the line count.  Coalesce ath_dbg formats. Add missing spaces to coalesced formats. Add missing newline terminations to ath_dbg formats. Align ath_dbg arguments where appropriate. Standardize ath_dbg formats without periods.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | dfs_pattern_detector.c | s | 8.2K | 264 | Zefir Kurtisi | zefir.kurtisi@neratec.com | 1334175832 |  | ath9k: add DFS pattern detector  This adds a DFS pattern detector to ath9k. It is fed with pulse events by the radar pulse detector and reports in place whether a pattern was detected. On detection, the result is reported as radar event to the DFS management component in the upper layer.  Currently the ETSI DFS domain is supported with detector lines for the patterns defined by EN-301-893 v1.5.1. Support for FCC and JP will be added gradually.  To include the pattern detector, ath9k must be built with support for DFS certified config flag set (CONFIG_ATH9K_DFS_CERTIFIED).  Signed-off-by: Zefir Kurtisi <zefir.kurtisi@neratec.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | dfs.c | s | 5.4K | 181 | Zefir Kurtisi | zefir.kurtisi@neratec.com | 1335209861 |  | ath9k: extend DFS detector stats in dfs_debugfs  Extend debugfs entry for dfs_stats with DFS detection events and shared pool statistics.  Signed-off-by: Zefir Kurtisi <zefir.kurtisi@neratec.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | mac.h | s | 21K | 659 | Felix Fietkau | nbd@openwrt.org | 1331833504 |  | ath9k_hw: remove ath9k_hw_gettxintrtxqs  The driver can just check the mask directly  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | rc.c | s | 50K | 1408 | John W. Linville | linville@tuxdriver.com | 1334252968 |  | Merge branch 'master' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless
f | dfs_pri_detector.h | s | 1.9K | 46 | Zefir Kurtisi | zefir.kurtisi@neratec.com | 1334175832 |  | ath9k: add DFS pattern detector  This adds a DFS pattern detector to ath9k. It is fed with pulse events by the radar pulse detector and reports in place whether a pattern was detected. On detection, the result is reported as radar event to the DFS management component in the upper layer.  Currently the ETSI DFS domain is supported with detector lines for the patterns defined by EN-301-893 v1.5.1. Support for FCC and JP will be added gradually.  To include the pattern detector, ath9k must be built with support for DFS certified config flag set (CONFIG_ATH9K_DFS_CERTIFIED).  Signed-off-by: Zefir Kurtisi <zefir.kurtisi@neratec.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | htc_hst.c | s | 11K | 393 | Joe Perches | joe@perches.com | 1334083933 |  | ath: Add and use pr_fmt, convert printks to pr_<level>  Use a more current logging style. Make sure all output is prefixed appropriately.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | htc_drv_beacon.c | s | 17K | 553 | Joe Perches | joe@perches.com | 1324323331 |  | ath: Convert ath_dbg(bar, ATH_DBG_<FOO>, to ath_dbg(bar, FOO  Add ATH_DBG_ to macros to shorten the uses and reduce the line count.  Coalesce ath_dbg formats. Add missing spaces to coalesced formats. Add missing newline terminations to ath_dbg formats. Align ath_dbg arguments where appropriate. Standardize ath_dbg formats without periods.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | dfs_pattern_detector.h | s | 3.4K | 95 | Zefir Kurtisi | zefir.kurtisi@neratec.com | 1334175832 |  | ath9k: add DFS pattern detector  This adds a DFS pattern detector to ath9k. It is fed with pulse events by the radar pulse detector and reports in place whether a pattern was detected. On detection, the result is reported as radar event to the DFS management component in the upper layer.  Currently the ETSI DFS domain is supported with detector lines for the patterns defined by EN-301-893 v1.5.1. Support for FCC and JP will be added gradually.  To include the pattern detector, ath9k must be built with support for DFS certified config flag set (CONFIG_ATH9K_DFS_CERTIFIED).  Signed-off-by: Zefir Kurtisi <zefir.kurtisi@neratec.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9330_1p2_initvals.h | s | 41K | 1062 | Gabor Juhos | juhosg@openwrt.org | 1308773389 |  | ath9k: add AR9330 initvals  Signed-off-by: Gabor Juhos <juhosg@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9462_2p0_initvals.h | s | 45K | 1429 | Rajkumar Manoharan | rmanohar@qca.qualcomm.com | 1334601521 |  | ath9k: fix ibss fair beacon distribution for AR9462  Update AR9462 initval to fix unbalance beacon distribution in Ad-Hoc network.  Signed-off-by: Rajkumar Manoharan <rmanohar@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | dfs_debug.c | s | 4.2K | 103 | Zefir Kurtisi | zefir.kurtisi@neratec.com | 1335209861 |  | ath9k: extend DFS detector stats in dfs_debugfs  Extend debugfs entry for dfs_stats with DFS detection events and shared pool statistics.  Signed-off-by: Zefir Kurtisi <zefir.kurtisi@neratec.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9003_rtt.c | s | 5.5K | 168 | Sujith Manoharan | c_manoha@qca.qualcomm.com | 1337117275 |  | ath9k_hw: Fix RTT calibration  This patch fixes multiple issues with the current RTT implementation in ath9k.  * The data that is obtained from the RTT interface registers   are stored in 31:5 - mask out the extra bits when reading them.  * A history buffer is maintained which is not needed at all.   Remove this array and just store the baseband data for each   chain (or bank).  * A 'num_readings' variable was being used to handle the   last entry. But it was being used in an improper manner, with   the result that the RTT values were never being written   to the RTT Interface registers. Fix this by using a simple   flag.  * Stop baseband operations before programming the calibration values   to the HW.  * Do not restore RX gain settings as part of RTT.  Signed-off-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | htc_drv_txrx.c | s | 30K | 1010 | Joe Perches | joe@perches.com | 1324323331 |  | ath: Convert ath_dbg(bar, ATH_DBG_<FOO>, to ath_dbg(bar, FOO  Add ATH_DBG_ to macros to shorten the uses and reduce the line count.  Coalesce ath_dbg formats. Add missing spaces to coalesced formats. Add missing newline terminations to ath_dbg formats. Align ath_dbg arguments where appropriate. Standardize ath_dbg formats without periods.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | hw.c | s | 81K | 2650 | Panayiotis Karabassis | panayk@gmail.com | 1340822892 |  | ath9k: enable serialize_regmode for non-PCIE AR9287  https://bugzilla.kernel.org/show_bug.cgi?id=42903  Based on the work of <fynivx@gmail.com>  Signed-off-by: Panayiotis Karabassis <panayk@gmail.com> Cc: stable@vger.kernel.org Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | Kconfig | g | 3.5K |  | Felix Fietkau | nbd@openwrt.org | 1331146298 |  | ath9k: make MAC sample statistics optional  They're more expensive than some of the other debug options and only used in very rare situations, so it sometimes makes sense to disable them while leaving in debugfs support.  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | btcoex.h | s | 3.1K | 99 | Rajkumar Manoharan | rmanohar@qca.qualcomm.com | 1335209730 |  | ath9k_hw: remove ATH_BTCOEX_CFG_MCI  AR9462 uses modified version of 3-Wire hw scheme for btcoex. MCI itself is not a separate hw scheme but it aids to manage multiple bt profiles. In ar9462, bt priority traffic is identified by the number of bt profile types instead of gpio. So that this patch removes MCI hw scheme.  Signed-off-by: Rajkumar Manoharan <rmanohar@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | calib.h | s | 3.3K | 95 | Mohammed Shafi Shajakhan | mohammed@qca.qualcomm.com | 1326228399 |  | ath9k_hw: fix a comment  also remove an unused macro and a function declaration  Signed-off-by: Mohammed Shafi Shajakhan <mohammed@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | dfs.h | s | 1.7K | 42 | Zefir Kurtisi | zefir.kurtisi@neratec.com | 1334175834 |  | ath9k: update to DFS pattern detector interface  Follow updates in DFS pattern detector interface: a) use given pulse event structure b) adapt to boolean return value of add_pulse()  Signed-off-by: Zefir Kurtisi <zefir.kurtisi@neratec.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | btcoex.c | s | 11K | 321 | Rajkumar Manoharan | rmanohar@qca.qualcomm.com | 1335209730 |  | ath9k_hw: remove ATH_BTCOEX_CFG_MCI  AR9462 uses modified version of 3-Wire hw scheme for btcoex. MCI itself is not a separate hw scheme but it aids to manage multiple bt profiles. In ar9462, bt priority traffic is identified by the number of bt profile types instead of gpio. So that this patch removes MCI hw scheme.  Signed-off-by: Rajkumar Manoharan <rmanohar@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | htc.h | s | 14K | 518 | Sujith Manoharan | c_manoha@qca.qualcomm.com | 1330369598 |  | ath9k_htc: Use CONFIG_ATH9K_BTCOEX_SUPPORT  ath9k_htc can also make use of CONFIG_ATH9K_BTCOEX_SUPPORT to be compiled without BTCOEX support.  Signed-off-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9002_phy.h | s | 23K | 509 | Felix Fietkau | nbd@openwrt.org | 1331833508 |  | ath9k: inline AR9271 1.0 INI overrides  Makes them more readable and reduces code size  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | beacon.c | s | 23K | 716 | Rajkumar Manoharan | rmanohar@qca.qualcomm.com | 1335209730 |  | ath9k: simplify beacon configuration for beaconing vifs  As of now beacon configuration is being called multiple times in bss info change notification. This patch avoids multiple configuration and make it simpler.  Signed-off-by: Rajkumar Manoharan <rmanohar@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9003_mci.c | s | 38K | 1164 | Sujith Manoharan | c_manoha@qca.qualcomm.com | 1337117275 |  | ath9k_hw: Fix RTT calibration  This patch fixes multiple issues with the current RTT implementation in ath9k.  * The data that is obtained from the RTT interface registers   are stored in 31:5 - mask out the extra bits when reading them.  * A history buffer is maintained which is not needed at all.   Remove this array and just store the baseband data for each   chain (or bank).  * A 'num_readings' variable was being used to handle the   last entry. But it was being used in an improper manner, with   the result that the RTT values were never being written   to the RTT Interface registers. Fix this by using a simple   flag.  * Stop baseband operations before programming the calibration values   to the HW.  * Do not restore RX gain settings as part of RTT.  Signed-off-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9003_paprd.c | s | 24K | 736 | Gabor Juhos | juhosg@openwrt.org | 1335207371 |  | ath9k: add an extra boolean parameter to ath9k_hw_apply_txpower  In order to unifying regulatory limit handling commit ca2c68cc7bc80fc4504fb420df04cce99c9ee6ec (ath9k_hw: clean up tx power handling) introduced a new helper function 'ath9k_hw_apply_txpower', and the direct calls of 'ah->eep_ops->set_txpower' has been replaced by a call of the helper function.  This caused a change in the behaviour of the 'ath9k_hw_set_txpowerlimit' function. The purpose of that function is to calculate and store the rate txpower table and the regulatory limit without touching the hardware registers. Before the commit, the 'test' parameter of the function was passed to the 'ah->eep_ops->set_txpower'. Now the calling of the 'set_txpower' function happens indirectly through 'ath9k_hw_apply_txpower', so the 'test' argument of the 'set_txpower' is always 'false'.  This patch restores the original behaviour of 'ath9k_hw_set_txpowerlimit' by adding a new argument to 'ath9k_hw_apply_txpower.'  Signed-off-by: Gabor Juhos <juhosg@openwrt.org> Acked-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9003_rtt.h | s | 1.2K | 26 | Sujith Manoharan | c_manoha@qca.qualcomm.com | 1337117275 |  | ath9k_hw: Fix RTT calibration  This patch fixes multiple issues with the current RTT implementation in ath9k.  * The data that is obtained from the RTT interface registers   are stored in 31:5 - mask out the extra bits when reading them.  * A history buffer is maintained which is not needed at all.   Remove this array and just store the baseband data for each   chain (or bank).  * A 'num_readings' variable was being used to handle the   last entry. But it was being used in an improper manner, with   the result that the RTT values were never being written   to the RTT Interface registers. Fix this by using a simple   flag.  * Stop baseband operations before programming the calibration values   to the HW.  * Do not restore RX gain settings as part of RTT.  Signed-off-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | main.c | s | 58K | 1971 | Mohammed Shafi Shajakhan | mohammed@qca.qualcomm.com | 1339610988 |  | ath9k: Fix softlockup in AR9485  steps to recreate: load latest ath9k driver with AR9485 stop the network-manager and wpa_supplicant bring the interface up  	Call Trace: 	[<ffffffffa0517490>] ? ath_hw_check+0xe0/0xe0 [ath9k] 	[<ffffffff812cd1e8>] __const_udelay+0x28/0x30 	[<ffffffffa03bae7a>] ar9003_get_pll_sqsum_dvc+0x4a/0x80 [ath9k_hw] 	[<ffffffffa05174eb>] ath_hw_pll_work+0x5b/0xe0 [ath9k] 	[<ffffffff810744fe>] process_one_work+0x11e/0x470 	[<ffffffff8107530f>] worker_thread+0x15f/0x360 	[<ffffffff810751b0>] ? manage_workers+0x230/0x230 	[<ffffffff81079af3>] kthread+0x93/0xa0 	[<ffffffff815fd3a4>] kernel_thread_helper+0x4/0x10 	[<ffffffff81079a60>] ? kthread_freezable_should_stop+0x70/0x70 	[<ffffffff815fd3a0>] ? gs_change+0x13/0x13  ensure that the PLL-WAR for AR9485/AR9340 is executed only if the STA is associated (or) IBSS/AP mode had started beaconing. Ideally this WAR is needed to recover from some rare beacon stuck during stress testing. Before the STA is associated/IBSS had started beaconing, PLL4(0x1618c) always seem to have zero even though we had configured PLL3(0x16188) to query about PLL's locking status. When we keep on polling infinitely PLL4's 8th bit(ie check for PLL locking measurements is done), machine hangs due to softlockup.  fixes https://bugzilla.redhat.com/show_bug.cgi?id=811142  Reported-by: Rolf Offermanns <rolf.offermanns@gmx.net> Cc: stable@vger.kernel.org [3.0+] Tested-by: Mohammed Shafi Shajakhan <mohammed@qca.qualcomm.com> Signed-off-by: Mohammed Shafi Shajakhan <mohammed@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9003_calib.c | s | 29K | 919 | Sujith Manoharan | c_manoha@qca.qualcomm.com | 1337117275 |  | ath9k_hw: Fix RTT calibration  This patch fixes multiple issues with the current RTT implementation in ath9k.  * The data that is obtained from the RTT interface registers   are stored in 31:5 - mask out the extra bits when reading them.  * A history buffer is maintained which is not needed at all.   Remove this array and just store the baseband data for each   chain (or bank).  * A 'num_readings' variable was being used to handle the   last entry. But it was being used in an improper manner, with   the result that the RTT values were never being written   to the RTT Interface registers. Fix this by using a simple   flag.  * Stop baseband operations before programming the calibration values   to the HW.  * Do not restore RX gain settings as part of RTT.  Signed-off-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9001_initvals.h | s | 34K | 1079 | Felix Fietkau | nbd@openwrt.org | 1330369541 |  | ath9k_hw: remove duplicate initvals  Comparing SHA1 checksums of the initval tables has shown that there are many tables that are 100% identical.  iniBank{0,1,2,3,7} and iniBB_RfGain are shared by AR5416, AR913x, AR9160 iniBank6 is shared between AR5416 and AR9160 iniBank6TPC is shared between AR913x and AR9160  iniPcieSerdes is the same for all AR9002 based devices  The CCK FIR coefficients are shared between AR9271 and AR9287  Getting rid of those duplicates saves about 7.5k uncompressed (on MIPS).  For AR9003 and later there are some duplicates as well, but I've decided to leave them in for now, as the initvals for those chips are still actively maintained by QCA.  Signed-off-by: Felix Fietkau <nbd@openwrt.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | common.h | s | 2.6K | 57 | Rajkumar Manoharan | rmanohar@qca.qualcomm.com | 1314208785 |  | ath9k: Move ath9k_init_crypto to common  Signed-off-by: Rajkumar Manoharan <rmanohar@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9003_mac.h | s | 3.5K | 109 | Sujith Manoharan | c_manoha@qca.qualcomm.com | 1330369544 |  | ath9k: Fix descriptor length for AR9462  Change the descriptor length to 24 and explicitly set the control field 23 to zero. Not doing so would result in dropping of frames.  Signed-off-by: Sujith Manoharan <c_manoha@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | wmi.h | s | 4.6K | 165 | Sujith Manoharan | Sujith.Manoharan@atheros.com | 1305827645 |  | ath9k: Drag the driver to the year 2011  The Times They Are a-Changin'.  Signed-off-by: Sujith Manoharan <Sujith.Manoharan@atheros.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ar9580_1p0_initvals.h | s | 64K | 1650 | Luis R. Rodriguez | mcgrof@qca.qualcomm.com | 1314370078 |  | ath9k_hw: add AR9580 support  Here are the AR9580 1.0 initvals checksums using the Atheros initvals-tools [1]. This is useful for when we udate the initvals again with other values. It ensures that we match the same initvals used internally. The tool is documented on the wiki [2].  $ ./initvals -f ar9580-1p0 0x00000000e912711f        ar9580_1p0_modes_fast_clock 0x000000004a488fc7        ar9580_1p0_radio_postamble 0x00000000f3888b02        ar9580_1p0_baseband_core 0x0000000003f783bb        ar9580_1p0_mac_postamble 0x0000000094be244a        ar9580_1p0_low_ob_db_tx_gain_table 0x0000000094be244a        ar9580_1p0_high_power_tx_gain_table 0x0000000090be244a        ar9580_1p0_lowest_ob_db_tx_gain_table 0x00000000ed9eaac6        ar9580_1p0_baseband_core_txfir_coeff_japan_2484 0x00000000c4d66d1b        ar9580_1p0_mac_core 0x00000000e8e9043a        ar9580_1p0_mixed_ob_db_tx_gain_table 0x000000003521a300        ar9580_1p0_wo_xlna_rx_gain_table 0x00000000301fc841        ar9580_1p0_soc_postamble 0x00000000a9a06b3a        ar9580_1p0_high_ob_db_tx_gain_table 0x00000000a15ccf1b        ar9580_1p0_soc_preamble 0x0000000029495000        ar9580_1p0_rx_gain_table 0x0000000037ac0ee8        ar9580_1p0_radio_core 0x00000000603a1b80        ar9580_1p0_baseband_postamble 0x000000003d8b4396        ar9580_1p0_pcie_phy_clkreq_enable_L1 0x00000000398b4396        ar9580_1p0_pcie_phy_clkreq_disable_L1 0x00000000397b4396        ar9580_1p0_pcie_phy_pll_on_clkreq  [1] git://git.kernel.org/pub/scm/linux/kernel/git/mcgrof/initvals-tool.git [2] http://wireless.kernel.org/en/users/Drivers/ath9k_hw/initvals-tool  Cc: David Quan <dquan@qca.qualcomm.com> Cc: Kathy Giori <kgiori@qca.qualcomm.com> Cc: Senthil Balasubramanian <senthilb@qca.qualcomm.com> Tested-by: Florian Fainelli <florian@openwrt.org> Signed-off-by: Luis R. Rodriguez <mcgrof@qca.qualcomm.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
