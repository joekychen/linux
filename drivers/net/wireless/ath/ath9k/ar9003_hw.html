<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › wireless › ath › ath9k › ar9003_hw.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>ar9003_hw.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2008-2011 Atheros Communications Inc.</span>
<span class="cm"> *</span>
<span class="cm"> * Permission to use, copy, modify, and/or distribute this software for any</span>
<span class="cm"> * purpose with or without fee is hereby granted, provided that the above</span>
<span class="cm"> * copyright notice and this permission notice appear in all copies.</span>
<span class="cm"> *</span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span>
<span class="cm"> * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</span>
<span class="cm"> * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR</span>
<span class="cm"> * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span>
<span class="cm"> * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN</span>
<span class="cm"> * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF</span>
<span class="cm"> * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span>
<span class="cm"> */</span>

<span class="cp">#include &quot;hw.h&quot;</span>
<span class="cp">#include &quot;ar9003_mac.h&quot;</span>
<span class="cp">#include &quot;ar9003_2p2_initvals.h&quot;</span>
<span class="cp">#include &quot;ar9485_initvals.h&quot;</span>
<span class="cp">#include &quot;ar9340_initvals.h&quot;</span>
<span class="cp">#include &quot;ar9330_1p1_initvals.h&quot;</span>
<span class="cp">#include &quot;ar9330_1p2_initvals.h&quot;</span>
<span class="cp">#include &quot;ar9580_1p0_initvals.h&quot;</span>
<span class="cp">#include &quot;ar9462_2p0_initvals.h&quot;</span>

<span class="cm">/* General hardware code for the AR9003 hadware family */</span>

<span class="cm">/*</span>
<span class="cm"> * The AR9003 family uses a new INI format (pre, core, post</span>
<span class="cm"> * arrays per subsystem). This provides support for the</span>
<span class="cm"> * AR9003 2.2 chipsets.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">ar9003_hw_init_mode_regs</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#define PCIE_PLL_ON_CREQ_DIS_L1_2P0 \</span>
<span class="cp">		ar9462_pciephy_pll_on_clkreq_disable_L1_2p0</span>

<span class="cp">#define AR9462_BB_CTX_COEFJ(x)	\</span>
<span class="cp">		ar9462_##x##_baseband_core_txfir_coeff_japan_2484</span>

<span class="cp">#define AR9462_BBC_TXIFR_COEFFJ \</span>
<span class="cp">		ar9462_2p0_baseband_core_txfir_coeff_japan_2484</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9330_11</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span> <span class="p">{</span>
		<span class="cm">/* mac */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9331_1p1_mac_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p1_mac_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9331_1p1_mac_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p1_mac_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* bb */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9331_1p1_baseband_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p1_baseband_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9331_1p1_baseband_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p1_baseband_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* radio */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9331_1p1_radio_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p1_radio_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

		<span class="cm">/* soc */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span>
				<span class="n">ar9331_1p1_soc_preamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p1_soc_preamble</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9331_1p1_soc_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p1_soc_postamble</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>

		<span class="cm">/* rx/tx gain */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
				<span class="n">ar9331_common_rx_gain_1p1</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_common_rx_gain_1p1</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9331_modes_lowest_ob_db_tx_gain_1p1</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_modes_lowest_ob_db_tx_gain_1p1</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* additional clock settings */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">is_clk_25mhz</span><span class="p">)</span>
			<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniAdditional</span><span class="p">,</span>
					<span class="n">ar9331_1p1_xtal_25M</span><span class="p">,</span>
					<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p1_xtal_25M</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniAdditional</span><span class="p">,</span>
					<span class="n">ar9331_1p1_xtal_40M</span><span class="p">,</span>
					<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p1_xtal_40M</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9330_12</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span> <span class="p">{</span>
		<span class="cm">/* mac */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9331_1p2_mac_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p2_mac_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9331_1p2_mac_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p2_mac_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* bb */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9331_1p2_baseband_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p2_baseband_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9331_1p2_baseband_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p2_baseband_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* radio */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9331_1p2_radio_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p2_radio_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

		<span class="cm">/* soc */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span>
				<span class="n">ar9331_1p2_soc_preamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p2_soc_preamble</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9331_1p2_soc_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p2_soc_postamble</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>

		<span class="cm">/* rx/tx gain */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
				<span class="n">ar9331_common_rx_gain_1p2</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_common_rx_gain_1p2</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9331_modes_lowest_ob_db_tx_gain_1p2</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_modes_lowest_ob_db_tx_gain_1p2</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* additional clock settings */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">is_clk_25mhz</span><span class="p">)</span>
			<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniAdditional</span><span class="p">,</span>
					<span class="n">ar9331_1p2_xtal_25M</span><span class="p">,</span>
					<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p2_xtal_25M</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniAdditional</span><span class="p">,</span>
					<span class="n">ar9331_1p2_xtal_40M</span><span class="p">,</span>
					<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_1p2_xtal_40M</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9340</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span> <span class="p">{</span>
		<span class="cm">/* mac */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9340_1p0_mac_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340_1p0_mac_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9340_1p0_mac_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340_1p0_mac_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* bb */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9340_1p0_baseband_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340_1p0_baseband_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9340_1p0_baseband_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340_1p0_baseband_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* radio */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9340_1p0_radio_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340_1p0_radio_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9340_1p0_radio_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340_1p0_radio_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* soc */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span>
				<span class="n">ar9340_1p0_soc_preamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340_1p0_soc_preamble</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9340_1p0_soc_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340_1p0_soc_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* rx/tx gain */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
				<span class="n">ar9340Common_wo_xlna_rx_gain_table_1p0</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340Common_wo_xlna_rx_gain_table_1p0</span><span class="p">),</span>
				<span class="mi">5</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
				<span class="n">ar9340Modes_high_ob_db_tx_gain_table_1p0</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340Modes_high_ob_db_tx_gain_table_1p0</span><span class="p">),</span>
				<span class="mi">5</span><span class="p">);</span>

		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesFastClock</span><span class="p">,</span>
				<span class="n">ar9340Modes_fast_clock_1p0</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340Modes_fast_clock_1p0</span><span class="p">),</span>
				<span class="mi">3</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">is_clk_25mhz</span><span class="p">)</span>
			<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniAdditional</span><span class="p">,</span>
				       <span class="n">ar9340_1p0_radio_core_40M</span><span class="p">,</span>
				       <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340_1p0_radio_core_40M</span><span class="p">),</span>
				       <span class="mi">2</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9485_11</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span> <span class="p">{</span>
		<span class="cm">/* mac */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9485_1_1_mac_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485_1_1_mac_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9485_1_1_mac_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485_1_1_mac_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* bb */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="n">ar9485_1_1</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485_1_1</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9485_1_1_baseband_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485_1_1_baseband_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9485_1_1_baseband_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485_1_1_baseband_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* radio */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9485_1_1_radio_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485_1_1_radio_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9485_1_1_radio_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485_1_1_radio_postamble</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>

		<span class="cm">/* soc */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span>
				<span class="n">ar9485_1_1_soc_preamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485_1_1_soc_preamble</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

		<span class="cm">/* rx/tx gain */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
				<span class="n">ar9485Common_wo_xlna_rx_gain_1_1</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485Common_wo_xlna_rx_gain_1_1</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
				<span class="n">ar9485_modes_lowest_ob_db_tx_gain_1_1</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485_modes_lowest_ob_db_tx_gain_1_1</span><span class="p">),</span>
				<span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* Load PCIE SERDES settings from INI */</span>

		<span class="cm">/* Awake Setting */</span>

		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniPcieSerdes</span><span class="p">,</span>
				<span class="n">ar9485_1_1_pcie_phy_clkreq_disable_L1</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485_1_1_pcie_phy_clkreq_disable_L1</span><span class="p">),</span>
				<span class="mi">2</span><span class="p">);</span>

		<span class="cm">/* Sleep Setting */</span>

		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniPcieSerdesLowPower</span><span class="p">,</span>
				<span class="n">ar9485_1_1_pcie_phy_clkreq_disable_L1</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485_1_1_pcie_phy_clkreq_disable_L1</span><span class="p">),</span>
				<span class="mi">2</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9462_20</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span> <span class="p">{</span>

		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span> <span class="n">ar9462_2p0_mac_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_2p0_mac_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9462_2p0_mac_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_2p0_mac_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9462_2p0_baseband_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_2p0_baseband_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9462_2p0_baseband_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_2p0_baseband_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9462_2p0_radio_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_2p0_radio_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9462_2p0_radio_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_2p0_radio_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">ini_radio_post_sys2ant</span><span class="p">,</span>
				<span class="n">ar9462_2p0_radio_postamble_sys2ant</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_2p0_radio_postamble_sys2ant</span><span class="p">),</span>
				<span class="mi">5</span><span class="p">);</span>

		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span>
				<span class="n">ar9462_2p0_soc_preamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_2p0_soc_preamble</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9462_2p0_soc_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_2p0_soc_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
				<span class="n">ar9462_common_rx_gain_table_2p0</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_common_rx_gain_table_2p0</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>

		<span class="cm">/* Awake -&gt; Sleep Setting */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniPcieSerdes</span><span class="p">,</span>
				<span class="n">PCIE_PLL_ON_CREQ_DIS_L1_2P0</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">PCIE_PLL_ON_CREQ_DIS_L1_2P0</span><span class="p">),</span>
				<span class="mi">2</span><span class="p">);</span>
		<span class="cm">/* Sleep -&gt; Awake Setting */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniPcieSerdesLowPower</span><span class="p">,</span>
				<span class="n">PCIE_PLL_ON_CREQ_DIS_L1_2P0</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">PCIE_PLL_ON_CREQ_DIS_L1_2P0</span><span class="p">),</span>
				<span class="mi">2</span><span class="p">);</span>

		<span class="cm">/* Fast clock modal settings */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesFastClock</span><span class="p">,</span>
				<span class="n">ar9462_modes_fast_clock_2p0</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_modes_fast_clock_2p0</span><span class="p">),</span> <span class="mi">3</span><span class="p">);</span>

		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniCckfirJapan2484</span><span class="p">,</span>
				<span class="n">AR9462_BB_CTX_COEFJ</span><span class="p">(</span><span class="mi">2</span><span class="n">p0</span><span class="p">),</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">AR9462_BB_CTX_COEFJ</span><span class="p">(</span><span class="mi">2</span><span class="n">p0</span><span class="p">)),</span> <span class="mi">2</span><span class="p">);</span>

		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">ini_japan2484</span><span class="p">,</span> <span class="n">AR9462_BBC_TXIFR_COEFFJ</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">AR9462_BBC_TXIFR_COEFFJ</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>

	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9580</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span> <span class="p">{</span>
		<span class="cm">/* mac */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9580_1p0_mac_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_mac_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9580_1p0_mac_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_mac_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* bb */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9580_1p0_baseband_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_baseband_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9580_1p0_baseband_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_baseband_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* radio */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9580_1p0_radio_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_radio_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9580_1p0_radio_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_radio_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* soc */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span>
				<span class="n">ar9580_1p0_soc_preamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_soc_preamble</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9580_1p0_soc_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_soc_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* rx/tx gain */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
				<span class="n">ar9580_1p0_rx_gain_table</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_rx_gain_table</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
				<span class="n">ar9580_1p0_low_ob_db_tx_gain_table</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_low_ob_db_tx_gain_table</span><span class="p">),</span>
				<span class="mi">5</span><span class="p">);</span>

		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesFastClock</span><span class="p">,</span>
				<span class="n">ar9580_1p0_modes_fast_clock</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_modes_fast_clock</span><span class="p">),</span>
				<span class="mi">3</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="cm">/* mac */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9300_2p2_mac_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300_2p2_mac_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniMac</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9300_2p2_mac_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300_2p2_mac_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* bb */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9300_2p2_baseband_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300_2p2_baseband_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniBB</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9300_2p2_baseband_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300_2p2_baseband_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* radio */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span>
				<span class="n">ar9300_2p2_radio_core</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300_2p2_radio_core</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniRadio</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9300_2p2_radio_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300_2p2_radio_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* soc */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_PRE</span><span class="p">],</span>
				<span class="n">ar9300_2p2_soc_preamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300_2p2_soc_preamble</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_CORE</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniSOC</span><span class="p">[</span><span class="n">ATH_INI_POST</span><span class="p">],</span>
				<span class="n">ar9300_2p2_soc_postamble</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300_2p2_soc_postamble</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* rx/tx gain */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
				<span class="n">ar9300Common_rx_gain_table_2p2</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300Common_rx_gain_table_2p2</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
				<span class="n">ar9300Modes_lowest_ob_db_tx_gain_table_2p2</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300Modes_lowest_ob_db_tx_gain_table_2p2</span><span class="p">),</span>
				<span class="mi">5</span><span class="p">);</span>

		<span class="cm">/* Load PCIE SERDES settings from INI */</span>

		<span class="cm">/* Awake Setting */</span>

		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniPcieSerdes</span><span class="p">,</span>
				<span class="n">ar9300PciePhy_pll_on_clkreq_disable_L1_2p2</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300PciePhy_pll_on_clkreq_disable_L1_2p2</span><span class="p">),</span>
				<span class="mi">2</span><span class="p">);</span>

		<span class="cm">/* Sleep Setting */</span>

		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniPcieSerdesLowPower</span><span class="p">,</span>
				<span class="n">ar9300PciePhy_pll_on_clkreq_disable_L1_2p2</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300PciePhy_pll_on_clkreq_disable_L1_2p2</span><span class="p">),</span>
				<span class="mi">2</span><span class="p">);</span>

		<span class="cm">/* Fast clock modal settings */</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesFastClock</span><span class="p">,</span>
				<span class="n">ar9300Modes_fast_clock_2p2</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300Modes_fast_clock_2p2</span><span class="p">),</span>
				<span class="mi">3</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">ar9003_tx_gain_table_mode0</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9330_12</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9331_modes_lowest_ob_db_tx_gain_1p2</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_modes_lowest_ob_db_tx_gain_1p2</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9330_11</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9331_modes_lowest_ob_db_tx_gain_1p1</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_modes_lowest_ob_db_tx_gain_1p1</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9340</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9340Modes_lowest_ob_db_tx_gain_table_1p0</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340Modes_lowest_ob_db_tx_gain_table_1p0</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9485_11</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9485_modes_lowest_ob_db_tx_gain_1_1</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485_modes_lowest_ob_db_tx_gain_1_1</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9580</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9580_1p0_lowest_ob_db_tx_gain_table</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_lowest_ob_db_tx_gain_table</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9462_20</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9462_modes_low_ob_db_tx_gain_table_2p0</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_modes_low_ob_db_tx_gain_table_2p0</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9300Modes_lowest_ob_db_tx_gain_table_2p2</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300Modes_lowest_ob_db_tx_gain_table_2p2</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">ar9003_tx_gain_table_mode1</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9330_12</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9331_modes_high_ob_db_tx_gain_1p2</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_modes_high_ob_db_tx_gain_1p2</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9330_11</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9331_modes_high_ob_db_tx_gain_1p1</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_modes_high_ob_db_tx_gain_1p1</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9340</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9340Modes_lowest_ob_db_tx_gain_table_1p0</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340Modes_lowest_ob_db_tx_gain_table_1p0</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9485_11</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9485Modes_high_ob_db_tx_gain_1_1</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485Modes_high_ob_db_tx_gain_1_1</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9580</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9580_1p0_high_ob_db_tx_gain_table</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_high_ob_db_tx_gain_table</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9462_20</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9462_modes_high_ob_db_tx_gain_table_2p0</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_modes_high_ob_db_tx_gain_table_2p0</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9300Modes_high_ob_db_tx_gain_table_2p2</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300Modes_high_ob_db_tx_gain_table_2p2</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">ar9003_tx_gain_table_mode2</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9330_12</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9331_modes_low_ob_db_tx_gain_1p2</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_modes_low_ob_db_tx_gain_1p2</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9330_11</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9331_modes_low_ob_db_tx_gain_1p1</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_modes_low_ob_db_tx_gain_1p1</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9340</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9340Modes_lowest_ob_db_tx_gain_table_1p0</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340Modes_lowest_ob_db_tx_gain_table_1p0</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9485_11</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9485Modes_low_ob_db_tx_gain_1_1</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485Modes_low_ob_db_tx_gain_1_1</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9580</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9580_1p0_low_ob_db_tx_gain_table</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_low_ob_db_tx_gain_table</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9300Modes_low_ob_db_tx_gain_table_2p2</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300Modes_low_ob_db_tx_gain_table_2p2</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">ar9003_tx_gain_table_mode3</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9330_12</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9331_modes_high_power_tx_gain_1p2</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_modes_high_power_tx_gain_1p2</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9330_11</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9331_modes_high_power_tx_gain_1p1</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_modes_high_power_tx_gain_1p1</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9340</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9340Modes_lowest_ob_db_tx_gain_table_1p0</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340Modes_lowest_ob_db_tx_gain_table_1p0</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9485_11</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9485Modes_high_power_tx_gain_1_1</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485Modes_high_power_tx_gain_1_1</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9580</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9580_1p0_high_power_tx_gain_table</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_high_power_tx_gain_table</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesTxGain</span><span class="p">,</span>
			<span class="n">ar9300Modes_high_power_tx_gain_table_2p2</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300Modes_high_power_tx_gain_table_2p2</span><span class="p">),</span>
			<span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">ar9003_tx_gain_table_apply</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">ar9003_hw_get_tx_gain_idx</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mi">0</span>:
	<span class="nl">default:</span>
		<span class="n">ar9003_tx_gain_table_mode0</span><span class="p">(</span><span class="n">ah</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">1</span>:
		<span class="n">ar9003_tx_gain_table_mode1</span><span class="p">(</span><span class="n">ah</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">2</span>:
		<span class="n">ar9003_tx_gain_table_mode2</span><span class="p">(</span><span class="n">ah</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">3</span>:
		<span class="n">ar9003_tx_gain_table_mode3</span><span class="p">(</span><span class="n">ah</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">ar9003_rx_gain_table_mode0</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9330_12</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
				<span class="n">ar9331_common_rx_gain_1p2</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_common_rx_gain_1p2</span><span class="p">),</span>
				<span class="mi">2</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9330_11</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
				<span class="n">ar9331_common_rx_gain_1p1</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_common_rx_gain_1p1</span><span class="p">),</span>
				<span class="mi">2</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9340</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
				<span class="n">ar9340Common_rx_gain_table_1p0</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340Common_rx_gain_table_1p0</span><span class="p">),</span>
				<span class="mi">2</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9485_11</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
				<span class="n">ar9485Common_wo_xlna_rx_gain_1_1</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485Common_wo_xlna_rx_gain_1_1</span><span class="p">),</span>
				<span class="mi">2</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9580</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
				<span class="n">ar9580_1p0_rx_gain_table</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_rx_gain_table</span><span class="p">),</span>
				<span class="mi">2</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9462_20</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
				<span class="n">ar9462_common_rx_gain_table_2p0</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_common_rx_gain_table_2p0</span><span class="p">),</span>
				<span class="mi">2</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
				<span class="n">ar9300Common_rx_gain_table_2p2</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300Common_rx_gain_table_2p2</span><span class="p">),</span>
				<span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">ar9003_rx_gain_table_mode1</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9330_12</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
			<span class="n">ar9331_common_wo_xlna_rx_gain_1p2</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_common_wo_xlna_rx_gain_1p2</span><span class="p">),</span>
			<span class="mi">2</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9330_11</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
			<span class="n">ar9331_common_wo_xlna_rx_gain_1p1</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9331_common_wo_xlna_rx_gain_1p1</span><span class="p">),</span>
			<span class="mi">2</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9340</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
			<span class="n">ar9340Common_wo_xlna_rx_gain_table_1p0</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9340Common_wo_xlna_rx_gain_table_1p0</span><span class="p">),</span>
			<span class="mi">2</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9485_11</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
			<span class="n">ar9485Common_wo_xlna_rx_gain_1_1</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9485Common_wo_xlna_rx_gain_1_1</span><span class="p">),</span>
			<span class="mi">2</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9462_20</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
			<span class="n">ar9462_common_wo_xlna_rx_gain_table_2p0</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_common_wo_xlna_rx_gain_table_2p0</span><span class="p">),</span>
			<span class="mi">2</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9580</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
			<span class="n">ar9580_1p0_wo_xlna_rx_gain_table</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9580_1p0_wo_xlna_rx_gain_table</span><span class="p">),</span>
			<span class="mi">2</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
			<span class="n">ar9300Common_wo_xlna_rx_gain_table_2p2</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9300Common_wo_xlna_rx_gain_table_2p2</span><span class="p">),</span>
			<span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">ar9003_rx_gain_table_mode2</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">AR_SREV_9462_20</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span>
		<span class="n">INIT_INI_ARRAY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniModesRxGain</span><span class="p">,</span>
			       <span class="n">ar9462_common_mixed_rx_gain_table_2p0</span><span class="p">,</span>
			       <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ar9462_common_mixed_rx_gain_table_2p0</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">ar9003_rx_gain_table_apply</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">ar9003_hw_get_rx_gain_idx</span><span class="p">(</span><span class="n">ah</span><span class="p">))</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mi">0</span>:
	<span class="nl">default:</span>
		<span class="n">ar9003_rx_gain_table_mode0</span><span class="p">(</span><span class="n">ah</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">1</span>:
		<span class="n">ar9003_rx_gain_table_mode1</span><span class="p">(</span><span class="n">ah</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">2</span>:
		<span class="n">ar9003_rx_gain_table_mode2</span><span class="p">(</span><span class="n">ah</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* set gain table pointers according to values read from the eeprom */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">ar9003_hw_init_mode_gain_regs</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">ar9003_tx_gain_table_apply</span><span class="p">(</span><span class="n">ah</span><span class="p">);</span>
	<span class="n">ar9003_rx_gain_table_apply</span><span class="p">(</span><span class="n">ah</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Helper for ASPM support.</span>
<span class="cm"> *</span>
<span class="cm"> * Disable PLL when in L0s as well as receiver clock when in L1.</span>
<span class="cm"> * This power saving option must be enabled through the SerDes.</span>
<span class="cm"> *</span>
<span class="cm"> * Programming the SerDes must go through the same 288 bit serial shift</span>
<span class="cm"> * register as the other analog registers.  Hence the 9 writes.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">ar9003_hw_configpcipowersave</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span>
					 <span class="n">bool</span> <span class="n">power_off</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Nothing to do on restore for 11N */</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">power_off</span> <span class="cm">/* !restore */</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* set bit 19 to allow forcing of pcie core into L1 state */</span>
		<span class="n">REG_SET_BIT</span><span class="p">(</span><span class="n">ah</span><span class="p">,</span> <span class="n">AR_PCIE_PM_CTRL</span><span class="p">,</span> <span class="n">AR_PCIE_PM_CTRL_ENA</span><span class="p">);</span>

		<span class="cm">/* Several PCIe massages to ensure proper behaviour */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">.</span><span class="n">pcie_waen</span><span class="p">)</span>
			<span class="n">REG_WRITE</span><span class="p">(</span><span class="n">ah</span><span class="p">,</span> <span class="n">AR_WA</span><span class="p">,</span> <span class="n">ah</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">.</span><span class="n">pcie_waen</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="n">REG_WRITE</span><span class="p">(</span><span class="n">ah</span><span class="p">,</span> <span class="n">AR_WA</span><span class="p">,</span> <span class="n">ah</span><span class="o">-&gt;</span><span class="n">WARegVal</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="cm">/*</span>
<span class="cm">	 * Configire PCIE after Ini init. SERDES values now come from ini file</span>
<span class="cm">	 * This enables PCIe low power mode.</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">.</span><span class="n">pcieSerDesWrite</span><span class="p">)</span> <span class="p">{</span>
		<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">ar5416IniArray</span> <span class="o">*</span><span class="n">array</span><span class="p">;</span>

		<span class="n">array</span> <span class="o">=</span> <span class="n">power_off</span> <span class="o">?</span> <span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniPcieSerdes</span> <span class="o">:</span>
				    <span class="o">&amp;</span><span class="n">ah</span><span class="o">-&gt;</span><span class="n">iniPcieSerdesLowPower</span><span class="p">;</span>

		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">array</span><span class="o">-&gt;</span><span class="n">ia_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">REG_WRITE</span><span class="p">(</span><span class="n">ah</span><span class="p">,</span>
				  <span class="n">INI_RA</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
				  <span class="n">INI_RA</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* Sets up the AR9003 hardware familiy callbacks */</span>
<span class="kt">void</span> <span class="nf">ar9003_hw_attach_ops</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">ath_hw_private_ops</span> <span class="o">*</span><span class="n">priv_ops</span> <span class="o">=</span> <span class="n">ath9k_hw_private_ops</span><span class="p">(</span><span class="n">ah</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">ath_hw_ops</span> <span class="o">*</span><span class="n">ops</span> <span class="o">=</span> <span class="n">ath9k_hw_ops</span><span class="p">(</span><span class="n">ah</span><span class="p">);</span>

	<span class="n">priv_ops</span><span class="o">-&gt;</span><span class="n">init_mode_regs</span> <span class="o">=</span> <span class="n">ar9003_hw_init_mode_regs</span><span class="p">;</span>
	<span class="n">priv_ops</span><span class="o">-&gt;</span><span class="n">init_mode_gain_regs</span> <span class="o">=</span> <span class="n">ar9003_hw_init_mode_gain_regs</span><span class="p">;</span>

	<span class="n">ops</span><span class="o">-&gt;</span><span class="n">config_pci_powersave</span> <span class="o">=</span> <span class="n">ar9003_hw_configpcipowersave</span><span class="p">;</span>

	<span class="n">ar9003_hw_attach_phy_ops</span><span class="p">(</span><span class="n">ah</span><span class="p">);</span>
	<span class="n">ar9003_hw_attach_calib_ops</span><span class="p">(</span><span class="n">ah</span><span class="p">);</span>
	<span class="n">ar9003_hw_attach_mac_ops</span><span class="p">(</span><span class="n">ah</span><span class="p">);</span>
<span class="p">}</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
