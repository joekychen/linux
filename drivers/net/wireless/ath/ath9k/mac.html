<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › wireless › ath › ath9k › mac.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>mac.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2008-2011 Atheros Communications Inc.</span>
<span class="cm"> *</span>
<span class="cm"> * Permission to use, copy, modify, and/or distribute this software for any</span>
<span class="cm"> * purpose with or without fee is hereby granted, provided that the above</span>
<span class="cm"> * copyright notice and this permission notice appear in all copies.</span>
<span class="cm"> *</span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span>
<span class="cm"> * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</span>
<span class="cm"> * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR</span>
<span class="cm"> * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span>
<span class="cm"> * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN</span>
<span class="cm"> * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF</span>
<span class="cm"> * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef MAC_H</span>
<span class="cp">#define MAC_H</span>

<span class="cp">#define set11nTries(_series, _index) \</span>
<span class="cp">	(SM((_series)[_index].Tries, AR_XmitDataTries##_index))</span>

<span class="cp">#define set11nRate(_series, _index) \</span>
<span class="cp">	(SM((_series)[_index].Rate, AR_XmitRate##_index))</span>

<span class="cp">#define set11nPktDurRTSCTS(_series, _index)				\</span>
<span class="cp">	(SM((_series)[_index].PktDuration, AR_PacketDur##_index) |	\</span>
<span class="cp">	 ((_series)[_index].RateFlags &amp; ATH9K_RATESERIES_RTS_CTS   ?	\</span>
<span class="cp">	  AR_RTSCTSQual##_index : 0))</span>

<span class="cp">#define set11nRateFlags(_series, _index)				\</span>
<span class="cp">	(((_series)[_index].RateFlags &amp; ATH9K_RATESERIES_2040 ?		\</span>
<span class="cp">	  AR_2040_##_index : 0)						\</span>
<span class="cp">	 |((_series)[_index].RateFlags &amp; ATH9K_RATESERIES_HALFGI ?	\</span>
<span class="cp">	   AR_GI##_index : 0)						\</span>
<span class="cp">	 |((_series)[_index].RateFlags &amp; ATH9K_RATESERIES_STBC ?	\</span>
<span class="cp">	   AR_STBC##_index : 0)						\</span>
<span class="cp">	 |SM((_series)[_index].ChSel, AR_ChainSel##_index))</span>

<span class="cp">#define CCK_SIFS_TIME        10</span>
<span class="cp">#define CCK_PREAMBLE_BITS   144</span>
<span class="cp">#define CCK_PLCP_BITS        48</span>

<span class="cp">#define OFDM_SIFS_TIME        16</span>
<span class="cp">#define OFDM_PREAMBLE_TIME    20</span>
<span class="cp">#define OFDM_PLCP_BITS        22</span>
<span class="cp">#define OFDM_SYMBOL_TIME      4</span>

<span class="cp">#define OFDM_SIFS_TIME_HALF     32</span>
<span class="cp">#define OFDM_PREAMBLE_TIME_HALF 40</span>
<span class="cp">#define OFDM_PLCP_BITS_HALF     22</span>
<span class="cp">#define OFDM_SYMBOL_TIME_HALF   8</span>

<span class="cp">#define OFDM_SIFS_TIME_QUARTER      64</span>
<span class="cp">#define OFDM_PREAMBLE_TIME_QUARTER  80</span>
<span class="cp">#define OFDM_PLCP_BITS_QUARTER      22</span>
<span class="cp">#define OFDM_SYMBOL_TIME_QUARTER    16</span>

<span class="cp">#define INIT_AIFS       2</span>
<span class="cp">#define INIT_CWMIN      15</span>
<span class="cp">#define INIT_CWMIN_11B  31</span>
<span class="cp">#define INIT_CWMAX      1023</span>
<span class="cp">#define INIT_SH_RETRY   10</span>
<span class="cp">#define INIT_LG_RETRY   10</span>
<span class="cp">#define INIT_SSH_RETRY  32</span>
<span class="cp">#define INIT_SLG_RETRY  32</span>

<span class="cp">#define ATH9K_SLOT_TIME_6 6</span>
<span class="cp">#define ATH9K_SLOT_TIME_9 9</span>
<span class="cp">#define ATH9K_SLOT_TIME_20 20</span>

<span class="cp">#define ATH9K_TXERR_XRETRY         0x01</span>
<span class="cp">#define ATH9K_TXERR_FILT           0x02</span>
<span class="cp">#define ATH9K_TXERR_FIFO           0x04</span>
<span class="cp">#define ATH9K_TXERR_XTXOP          0x08</span>
<span class="cp">#define ATH9K_TXERR_TIMER_EXPIRED  0x10</span>
<span class="cp">#define ATH9K_TX_ACKED		   0x20</span>
<span class="cp">#define ATH9K_TX_FLUSH		   0x40</span>
<span class="cp">#define ATH9K_TXERR_MASK						\</span>
<span class="cp">	(ATH9K_TXERR_XRETRY | ATH9K_TXERR_FILT | ATH9K_TXERR_FIFO |	\</span>
<span class="cp">	 ATH9K_TXERR_XTXOP | ATH9K_TXERR_TIMER_EXPIRED | ATH9K_TX_FLUSH)</span>

<span class="cp">#define ATH9K_TX_BA                0x01</span>
<span class="cp">#define ATH9K_TX_PWRMGMT           0x02</span>
<span class="cp">#define ATH9K_TX_DESC_CFG_ERR      0x04</span>
<span class="cp">#define ATH9K_TX_DATA_UNDERRUN     0x08</span>
<span class="cp">#define ATH9K_TX_DELIM_UNDERRUN    0x10</span>
<span class="cp">#define ATH9K_TX_SW_FILTERED       0x80</span>

<span class="cm">/* 64 bytes */</span>
<span class="cp">#define MIN_TX_FIFO_THRESHOLD   0x1</span>

<span class="cm">/*</span>
<span class="cm"> * Single stream device AR9285 and AR9271 require 2 KB</span>
<span class="cm"> * to work around a hardware issue, all other devices</span>
<span class="cm"> * have can use the max 4 KB limit.</span>
<span class="cm"> */</span>
<span class="cp">#define MAX_TX_FIFO_THRESHOLD   ((4096 / 64) - 1)</span>

<span class="k">struct</span> <span class="n">ath_tx_status</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">ts_tstamp</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">ts_seqnum</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ts_status</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ts_rateindex</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">ts_rssi</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ts_shortretry</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ts_longretry</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ts_virtcol</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ts_flags</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">ts_rssi_ctl0</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">ts_rssi_ctl1</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">ts_rssi_ctl2</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">ts_rssi_ext0</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">ts_rssi_ext1</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">ts_rssi_ext2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">qid</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">desc_id</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ba_low</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ba_high</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">evm0</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">evm1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">evm2</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ath_rx_status</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">rs_tstamp</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rs_datalen</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_status</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_phyerr</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">rs_rssi</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_keyix</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_rate</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_antenna</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_more</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">rs_rssi_ctl0</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">rs_rssi_ctl1</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">rs_rssi_ctl2</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">rs_rssi_ext0</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">rs_rssi_ext1</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">rs_rssi_ext2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_isaggr</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_moreaggr</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_num_delims</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_flags</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">is_mybeacon</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">evm0</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">evm1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">evm2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">evm3</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">evm4</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ath_htc_rx_status</span> <span class="p">{</span>
	<span class="n">__be64</span> <span class="n">rs_tstamp</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">rs_datalen</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_status</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_phyerr</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">rs_rssi</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">rs_rssi_ctl0</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">rs_rssi_ctl1</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">rs_rssi_ctl2</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">rs_rssi_ext0</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">rs_rssi_ext1</span><span class="p">;</span>
	<span class="kt">int8_t</span> <span class="n">rs_rssi_ext2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_keyix</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_rate</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_antenna</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_more</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_isaggr</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_moreaggr</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_num_delims</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_flags</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rs_dummy</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">evm0</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">evm1</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">evm2</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define ATH9K_RXERR_CRC           0x01</span>
<span class="cp">#define ATH9K_RXERR_PHY           0x02</span>
<span class="cp">#define ATH9K_RXERR_FIFO          0x04</span>
<span class="cp">#define ATH9K_RXERR_DECRYPT       0x08</span>
<span class="cp">#define ATH9K_RXERR_MIC           0x10</span>
<span class="cp">#define ATH9K_RXERR_KEYMISS       0x20</span>

<span class="cp">#define ATH9K_RX_MORE             0x01</span>
<span class="cp">#define ATH9K_RX_MORE_AGGR        0x02</span>
<span class="cp">#define ATH9K_RX_GI               0x04</span>
<span class="cp">#define ATH9K_RX_2040             0x08</span>
<span class="cp">#define ATH9K_RX_DELIM_CRC_PRE    0x10</span>
<span class="cp">#define ATH9K_RX_DELIM_CRC_POST   0x20</span>
<span class="cp">#define ATH9K_RX_DECRYPT_BUSY     0x40</span>

<span class="cp">#define ATH9K_RXKEYIX_INVALID	((u8)-1)</span>
<span class="cp">#define ATH9K_TXKEYIX_INVALID	((u8)-1)</span>

<span class="k">enum</span> <span class="n">ath9k_phyerr</span> <span class="p">{</span>
	<span class="n">ATH9K_PHYERR_UNDERRUN</span>             <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>  <span class="cm">/* Transmit underrun */</span>
	<span class="n">ATH9K_PHYERR_TIMING</span>               <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>  <span class="cm">/* Timing error */</span>
	<span class="n">ATH9K_PHYERR_PARITY</span>               <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>  <span class="cm">/* Illegal parity */</span>
	<span class="n">ATH9K_PHYERR_RATE</span>                 <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>  <span class="cm">/* Illegal rate */</span>
	<span class="n">ATH9K_PHYERR_LENGTH</span>               <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>  <span class="cm">/* Illegal length */</span>
	<span class="n">ATH9K_PHYERR_RADAR</span>                <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>  <span class="cm">/* Radar detect */</span>
	<span class="n">ATH9K_PHYERR_SERVICE</span>              <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>  <span class="cm">/* Illegal service */</span>
	<span class="n">ATH9K_PHYERR_TOR</span>                  <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>  <span class="cm">/* Transmit override receive */</span>

	<span class="n">ATH9K_PHYERR_OFDM_TIMING</span>          <span class="o">=</span> <span class="mi">17</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_OFDM_SIGNAL_PARITY</span>   <span class="o">=</span> <span class="mi">18</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_OFDM_RATE_ILLEGAL</span>    <span class="o">=</span> <span class="mi">19</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_OFDM_LENGTH_ILLEGAL</span>  <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_OFDM_POWER_DROP</span>      <span class="o">=</span> <span class="mi">21</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_OFDM_SERVICE</span>         <span class="o">=</span> <span class="mi">22</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_OFDM_RESTART</span>         <span class="o">=</span> <span class="mi">23</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_FALSE_RADAR_EXT</span>      <span class="o">=</span> <span class="mi">24</span><span class="p">,</span>

	<span class="n">ATH9K_PHYERR_CCK_TIMING</span>           <span class="o">=</span> <span class="mi">25</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_CCK_HEADER_CRC</span>       <span class="o">=</span> <span class="mi">26</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_CCK_RATE_ILLEGAL</span>     <span class="o">=</span> <span class="mi">27</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_CCK_SERVICE</span>          <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_CCK_RESTART</span>          <span class="o">=</span> <span class="mi">31</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_CCK_LENGTH_ILLEGAL</span>   <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_CCK_POWER_DROP</span>       <span class="o">=</span> <span class="mi">33</span><span class="p">,</span>

	<span class="n">ATH9K_PHYERR_HT_CRC_ERROR</span>         <span class="o">=</span> <span class="mi">34</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_HT_LENGTH_ILLEGAL</span>    <span class="o">=</span> <span class="mi">35</span><span class="p">,</span>
	<span class="n">ATH9K_PHYERR_HT_RATE_ILLEGAL</span>      <span class="o">=</span> <span class="mi">36</span><span class="p">,</span>

	<span class="n">ATH9K_PHYERR_MAX</span>                  <span class="o">=</span> <span class="mi">37</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ath_desc</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">ds_link</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ds_data</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ds_ctl0</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ds_ctl1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ds_hw</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">ds_vdata</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">__aligned</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="cp">#define ATH9K_TXDESC_NOACK		0x0002</span>
<span class="cp">#define ATH9K_TXDESC_RTSENA		0x0004</span>
<span class="cp">#define ATH9K_TXDESC_CTSENA		0x0008</span>
<span class="cm">/* ATH9K_TXDESC_INTREQ forces a tx interrupt to be generated for</span>
<span class="cm"> * the descriptor its marked on.  We take a tx interrupt to reap</span>
<span class="cm"> * descriptors when the h/w hits an EOL condition or</span>
<span class="cm"> * when the descriptor is specifically marked to generate</span>
<span class="cm"> * an interrupt with this flag. Descriptors should be</span>
<span class="cm"> * marked periodically to insure timely replenishing of the</span>
<span class="cm"> * supply needed for sending frames. Defering interrupts</span>
<span class="cm"> * reduces system load and potentially allows more concurrent</span>
<span class="cm"> * work to be done but if done to aggressively can cause</span>
<span class="cm"> * senders to backup. When the hardware queue is left too</span>
<span class="cm"> * large rate control information may also be too out of</span>
<span class="cm"> * date. An Alternative for this is TX interrupt mitigation</span>
<span class="cm"> * but this needs more testing. */</span>
<span class="cp">#define ATH9K_TXDESC_INTREQ		0x0010</span>
<span class="cp">#define ATH9K_TXDESC_VEOL		0x0020</span>
<span class="cp">#define ATH9K_TXDESC_EXT_ONLY		0x0040</span>
<span class="cp">#define ATH9K_TXDESC_EXT_AND_CTL	0x0080</span>
<span class="cp">#define ATH9K_TXDESC_VMF		0x0100</span>
<span class="cp">#define ATH9K_TXDESC_FRAG_IS_ON 	0x0200</span>
<span class="cp">#define ATH9K_TXDESC_LOWRXCHAIN		0x0400</span>
<span class="cp">#define ATH9K_TXDESC_LDPC		0x0800</span>
<span class="cp">#define ATH9K_TXDESC_CLRDMASK		0x1000</span>

<span class="cp">#define ATH9K_TXDESC_PAPRD		0x70000</span>
<span class="cp">#define ATH9K_TXDESC_PAPRD_S		16</span>

<span class="cp">#define ATH9K_RXDESC_INTREQ		0x0020</span>

<span class="k">struct</span> <span class="n">ar5416_desc</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">ds_link</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ds_data</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ds_ctl0</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ds_ctl1</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u32</span> <span class="n">ctl2</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">ctl3</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">ctl4</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">ctl5</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">ctl6</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">ctl7</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">ctl8</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">ctl9</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">ctl10</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">ctl11</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status0</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status1</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status2</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status3</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status4</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status5</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status6</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status7</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status8</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status9</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">tx</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u32</span> <span class="n">status0</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status1</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status2</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status3</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status4</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status5</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status6</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status7</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">status8</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">rx</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">u</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span> <span class="n">__aligned</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="cp">#define AR5416DESC(_ds)         ((struct ar5416_desc *)(_ds))</span>
<span class="cp">#define AR5416DESC_CONST(_ds)   ((const struct ar5416_desc *)(_ds))</span>

<span class="cp">#define ds_ctl2     u.tx.ctl2</span>
<span class="cp">#define ds_ctl3     u.tx.ctl3</span>
<span class="cp">#define ds_ctl4     u.tx.ctl4</span>
<span class="cp">#define ds_ctl5     u.tx.ctl5</span>
<span class="cp">#define ds_ctl6     u.tx.ctl6</span>
<span class="cp">#define ds_ctl7     u.tx.ctl7</span>
<span class="cp">#define ds_ctl8     u.tx.ctl8</span>
<span class="cp">#define ds_ctl9     u.tx.ctl9</span>
<span class="cp">#define ds_ctl10    u.tx.ctl10</span>
<span class="cp">#define ds_ctl11    u.tx.ctl11</span>

<span class="cp">#define ds_txstatus0    u.tx.status0</span>
<span class="cp">#define ds_txstatus1    u.tx.status1</span>
<span class="cp">#define ds_txstatus2    u.tx.status2</span>
<span class="cp">#define ds_txstatus3    u.tx.status3</span>
<span class="cp">#define ds_txstatus4    u.tx.status4</span>
<span class="cp">#define ds_txstatus5    u.tx.status5</span>
<span class="cp">#define ds_txstatus6    u.tx.status6</span>
<span class="cp">#define ds_txstatus7    u.tx.status7</span>
<span class="cp">#define ds_txstatus8    u.tx.status8</span>
<span class="cp">#define ds_txstatus9    u.tx.status9</span>

<span class="cp">#define ds_rxstatus0    u.rx.status0</span>
<span class="cp">#define ds_rxstatus1    u.rx.status1</span>
<span class="cp">#define ds_rxstatus2    u.rx.status2</span>
<span class="cp">#define ds_rxstatus3    u.rx.status3</span>
<span class="cp">#define ds_rxstatus4    u.rx.status4</span>
<span class="cp">#define ds_rxstatus5    u.rx.status5</span>
<span class="cp">#define ds_rxstatus6    u.rx.status6</span>
<span class="cp">#define ds_rxstatus7    u.rx.status7</span>
<span class="cp">#define ds_rxstatus8    u.rx.status8</span>

<span class="cp">#define AR_FrameLen         0x00000fff</span>
<span class="cp">#define AR_VirtMoreFrag     0x00001000</span>
<span class="cp">#define AR_TxCtlRsvd00      0x0000e000</span>
<span class="cp">#define AR_XmitPower        0x003f0000</span>
<span class="cp">#define AR_XmitPower_S      16</span>
<span class="cp">#define AR_RTSEnable        0x00400000</span>
<span class="cp">#define AR_VEOL             0x00800000</span>
<span class="cp">#define AR_ClrDestMask      0x01000000</span>
<span class="cp">#define AR_TxCtlRsvd01      0x1e000000</span>
<span class="cp">#define AR_TxIntrReq        0x20000000</span>
<span class="cp">#define AR_DestIdxValid     0x40000000</span>
<span class="cp">#define AR_CTSEnable        0x80000000</span>

<span class="cp">#define AR_TxMore           0x00001000</span>
<span class="cp">#define AR_DestIdx          0x000fe000</span>
<span class="cp">#define AR_DestIdx_S        13</span>
<span class="cp">#define AR_FrameType        0x00f00000</span>
<span class="cp">#define AR_FrameType_S      20</span>
<span class="cp">#define AR_NoAck            0x01000000</span>
<span class="cp">#define AR_InsertTS         0x02000000</span>
<span class="cp">#define AR_CorruptFCS       0x04000000</span>
<span class="cp">#define AR_ExtOnly          0x08000000</span>
<span class="cp">#define AR_ExtAndCtl        0x10000000</span>
<span class="cp">#define AR_MoreAggr         0x20000000</span>
<span class="cp">#define AR_IsAggr           0x40000000</span>

<span class="cp">#define AR_BurstDur         0x00007fff</span>
<span class="cp">#define AR_BurstDur_S       0</span>
<span class="cp">#define AR_DurUpdateEna     0x00008000</span>
<span class="cp">#define AR_XmitDataTries0   0x000f0000</span>
<span class="cp">#define AR_XmitDataTries0_S 16</span>
<span class="cp">#define AR_XmitDataTries1   0x00f00000</span>
<span class="cp">#define AR_XmitDataTries1_S 20</span>
<span class="cp">#define AR_XmitDataTries2   0x0f000000</span>
<span class="cp">#define AR_XmitDataTries2_S 24</span>
<span class="cp">#define AR_XmitDataTries3   0xf0000000</span>
<span class="cp">#define AR_XmitDataTries3_S 28</span>

<span class="cp">#define AR_XmitRate0        0x000000ff</span>
<span class="cp">#define AR_XmitRate0_S      0</span>
<span class="cp">#define AR_XmitRate1        0x0000ff00</span>
<span class="cp">#define AR_XmitRate1_S      8</span>
<span class="cp">#define AR_XmitRate2        0x00ff0000</span>
<span class="cp">#define AR_XmitRate2_S      16</span>
<span class="cp">#define AR_XmitRate3        0xff000000</span>
<span class="cp">#define AR_XmitRate3_S      24</span>

<span class="cp">#define AR_PacketDur0       0x00007fff</span>
<span class="cp">#define AR_PacketDur0_S     0</span>
<span class="cp">#define AR_RTSCTSQual0      0x00008000</span>
<span class="cp">#define AR_PacketDur1       0x7fff0000</span>
<span class="cp">#define AR_PacketDur1_S     16</span>
<span class="cp">#define AR_RTSCTSQual1      0x80000000</span>

<span class="cp">#define AR_PacketDur2       0x00007fff</span>
<span class="cp">#define AR_PacketDur2_S     0</span>
<span class="cp">#define AR_RTSCTSQual2      0x00008000</span>
<span class="cp">#define AR_PacketDur3       0x7fff0000</span>
<span class="cp">#define AR_PacketDur3_S     16</span>
<span class="cp">#define AR_RTSCTSQual3      0x80000000</span>

<span class="cp">#define AR_AggrLen          0x0000ffff</span>
<span class="cp">#define AR_AggrLen_S        0</span>
<span class="cp">#define AR_TxCtlRsvd60      0x00030000</span>
<span class="cp">#define AR_PadDelim         0x03fc0000</span>
<span class="cp">#define AR_PadDelim_S       18</span>
<span class="cp">#define AR_EncrType         0x0c000000</span>
<span class="cp">#define AR_EncrType_S       26</span>
<span class="cp">#define AR_TxCtlRsvd61      0xf0000000</span>
<span class="cp">#define AR_LDPC             0x80000000</span>

<span class="cp">#define AR_2040_0           0x00000001</span>
<span class="cp">#define AR_GI0              0x00000002</span>
<span class="cp">#define AR_ChainSel0        0x0000001c</span>
<span class="cp">#define AR_ChainSel0_S      2</span>
<span class="cp">#define AR_2040_1           0x00000020</span>
<span class="cp">#define AR_GI1              0x00000040</span>
<span class="cp">#define AR_ChainSel1        0x00000380</span>
<span class="cp">#define AR_ChainSel1_S      7</span>
<span class="cp">#define AR_2040_2           0x00000400</span>
<span class="cp">#define AR_GI2              0x00000800</span>
<span class="cp">#define AR_ChainSel2        0x00007000</span>
<span class="cp">#define AR_ChainSel2_S      12</span>
<span class="cp">#define AR_2040_3           0x00008000</span>
<span class="cp">#define AR_GI3              0x00010000</span>
<span class="cp">#define AR_ChainSel3        0x000e0000</span>
<span class="cp">#define AR_ChainSel3_S      17</span>
<span class="cp">#define AR_RTSCTSRate       0x0ff00000</span>
<span class="cp">#define AR_RTSCTSRate_S     20</span>
<span class="cp">#define AR_STBC0            0x10000000</span>
<span class="cp">#define AR_STBC1            0x20000000</span>
<span class="cp">#define AR_STBC2            0x40000000</span>
<span class="cp">#define AR_STBC3            0x80000000</span>

<span class="cp">#define AR_TxRSSIAnt00      0x000000ff</span>
<span class="cp">#define AR_TxRSSIAnt00_S    0</span>
<span class="cp">#define AR_TxRSSIAnt01      0x0000ff00</span>
<span class="cp">#define AR_TxRSSIAnt01_S    8</span>
<span class="cp">#define AR_TxRSSIAnt02      0x00ff0000</span>
<span class="cp">#define AR_TxRSSIAnt02_S    16</span>
<span class="cp">#define AR_TxStatusRsvd00   0x3f000000</span>
<span class="cp">#define AR_TxBaStatus       0x40000000</span>
<span class="cp">#define AR_TxStatusRsvd01   0x80000000</span>

<span class="cm">/*</span>
<span class="cm"> * AR_FrmXmitOK - Frame transmission success flag. If set, the frame was</span>
<span class="cm"> * transmitted successfully. If clear, no ACK or BA was received to indicate</span>
<span class="cm"> * successful transmission when we were expecting an ACK or BA.</span>
<span class="cm"> */</span>
<span class="cp">#define AR_FrmXmitOK            0x00000001</span>
<span class="cp">#define AR_ExcessiveRetries     0x00000002</span>
<span class="cp">#define AR_FIFOUnderrun         0x00000004</span>
<span class="cp">#define AR_Filtered             0x00000008</span>
<span class="cp">#define AR_RTSFailCnt           0x000000f0</span>
<span class="cp">#define AR_RTSFailCnt_S         4</span>
<span class="cp">#define AR_DataFailCnt          0x00000f00</span>
<span class="cp">#define AR_DataFailCnt_S        8</span>
<span class="cp">#define AR_VirtRetryCnt         0x0000f000</span>
<span class="cp">#define AR_VirtRetryCnt_S       12</span>
<span class="cp">#define AR_TxDelimUnderrun      0x00010000</span>
<span class="cp">#define AR_TxDataUnderrun       0x00020000</span>
<span class="cp">#define AR_DescCfgErr           0x00040000</span>
<span class="cp">#define AR_TxTimerExpired       0x00080000</span>
<span class="cp">#define AR_TxStatusRsvd10       0xfff00000</span>

<span class="cp">#define AR_SendTimestamp    ds_txstatus2</span>
<span class="cp">#define AR_BaBitmapLow      ds_txstatus3</span>
<span class="cp">#define AR_BaBitmapHigh     ds_txstatus4</span>

<span class="cp">#define AR_TxRSSIAnt10      0x000000ff</span>
<span class="cp">#define AR_TxRSSIAnt10_S    0</span>
<span class="cp">#define AR_TxRSSIAnt11      0x0000ff00</span>
<span class="cp">#define AR_TxRSSIAnt11_S    8</span>
<span class="cp">#define AR_TxRSSIAnt12      0x00ff0000</span>
<span class="cp">#define AR_TxRSSIAnt12_S    16</span>
<span class="cp">#define AR_TxRSSICombined   0xff000000</span>
<span class="cp">#define AR_TxRSSICombined_S 24</span>

<span class="cp">#define AR_TxTid	0xf0000000</span>
<span class="cp">#define AR_TxTid_S	28</span>

<span class="cp">#define AR_TxEVM0           ds_txstatus5</span>
<span class="cp">#define AR_TxEVM1           ds_txstatus6</span>
<span class="cp">#define AR_TxEVM2           ds_txstatus7</span>

<span class="cp">#define AR_TxDone           0x00000001</span>
<span class="cp">#define AR_SeqNum           0x00001ffe</span>
<span class="cp">#define AR_SeqNum_S         1</span>
<span class="cp">#define AR_TxStatusRsvd80   0x0001e000</span>
<span class="cp">#define AR_TxOpExceeded     0x00020000</span>
<span class="cp">#define AR_TxStatusRsvd81   0x001c0000</span>
<span class="cp">#define AR_FinalTxIdx       0x00600000</span>
<span class="cp">#define AR_FinalTxIdx_S     21</span>
<span class="cp">#define AR_TxStatusRsvd82   0x01800000</span>
<span class="cp">#define AR_PowerMgmt        0x02000000</span>
<span class="cp">#define AR_TxStatusRsvd83   0xfc000000</span>

<span class="cp">#define AR_RxCTLRsvd00  0xffffffff</span>

<span class="cp">#define AR_RxCtlRsvd00  0x00001000</span>
<span class="cp">#define AR_RxIntrReq    0x00002000</span>
<span class="cp">#define AR_RxCtlRsvd01  0xffffc000</span>

<span class="cp">#define AR_RxRSSIAnt00      0x000000ff</span>
<span class="cp">#define AR_RxRSSIAnt00_S    0</span>
<span class="cp">#define AR_RxRSSIAnt01      0x0000ff00</span>
<span class="cp">#define AR_RxRSSIAnt01_S    8</span>
<span class="cp">#define AR_RxRSSIAnt02      0x00ff0000</span>
<span class="cp">#define AR_RxRSSIAnt02_S    16</span>
<span class="cp">#define AR_RxRate           0xff000000</span>
<span class="cp">#define AR_RxRate_S         24</span>
<span class="cp">#define AR_RxStatusRsvd00   0xff000000</span>

<span class="cp">#define AR_DataLen          0x00000fff</span>
<span class="cp">#define AR_RxMore           0x00001000</span>
<span class="cp">#define AR_NumDelim         0x003fc000</span>
<span class="cp">#define AR_NumDelim_S       14</span>
<span class="cp">#define AR_RxStatusRsvd10   0xff800000</span>

<span class="cp">#define AR_RcvTimestamp     ds_rxstatus2</span>

<span class="cp">#define AR_GI               0x00000001</span>
<span class="cp">#define AR_2040             0x00000002</span>
<span class="cp">#define AR_Parallel40       0x00000004</span>
<span class="cp">#define AR_Parallel40_S     2</span>
<span class="cp">#define AR_RxStatusRsvd30   0x000000f8</span>
<span class="cp">#define AR_RxAntenna	    0xffffff00</span>
<span class="cp">#define AR_RxAntenna_S	    8</span>

<span class="cp">#define AR_RxRSSIAnt10            0x000000ff</span>
<span class="cp">#define AR_RxRSSIAnt10_S          0</span>
<span class="cp">#define AR_RxRSSIAnt11            0x0000ff00</span>
<span class="cp">#define AR_RxRSSIAnt11_S          8</span>
<span class="cp">#define AR_RxRSSIAnt12            0x00ff0000</span>
<span class="cp">#define AR_RxRSSIAnt12_S          16</span>
<span class="cp">#define AR_RxRSSICombined         0xff000000</span>
<span class="cp">#define AR_RxRSSICombined_S       24</span>

<span class="cp">#define AR_RxEVM0           ds_rxstatus4</span>
<span class="cp">#define AR_RxEVM1           ds_rxstatus5</span>
<span class="cp">#define AR_RxEVM2           ds_rxstatus6</span>

<span class="cp">#define AR_RxDone           0x00000001</span>
<span class="cp">#define AR_RxFrameOK        0x00000002</span>
<span class="cp">#define AR_CRCErr           0x00000004</span>
<span class="cp">#define AR_DecryptCRCErr    0x00000008</span>
<span class="cp">#define AR_PHYErr           0x00000010</span>
<span class="cp">#define AR_MichaelErr       0x00000020</span>
<span class="cp">#define AR_PreDelimCRCErr   0x00000040</span>
<span class="cp">#define AR_RxStatusRsvd70   0x00000080</span>
<span class="cp">#define AR_RxKeyIdxValid    0x00000100</span>
<span class="cp">#define AR_KeyIdx           0x0000fe00</span>
<span class="cp">#define AR_KeyIdx_S         9</span>
<span class="cp">#define AR_PHYErrCode       0x0000ff00</span>
<span class="cp">#define AR_PHYErrCode_S     8</span>
<span class="cp">#define AR_RxMoreAggr       0x00010000</span>
<span class="cp">#define AR_RxAggr           0x00020000</span>
<span class="cp">#define AR_PostDelimCRCErr  0x00040000</span>
<span class="cp">#define AR_RxStatusRsvd71   0x3ff80000</span>
<span class="cp">#define AR_DecryptBusyErr   0x40000000</span>
<span class="cp">#define AR_KeyMiss          0x80000000</span>

<span class="k">enum</span> <span class="n">ath9k_tx_queue</span> <span class="p">{</span>
	<span class="n">ATH9K_TX_QUEUE_INACTIVE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">ATH9K_TX_QUEUE_DATA</span><span class="p">,</span>
	<span class="n">ATH9K_TX_QUEUE_BEACON</span><span class="p">,</span>
	<span class="n">ATH9K_TX_QUEUE_CAB</span><span class="p">,</span>
	<span class="n">ATH9K_TX_QUEUE_UAPSD</span><span class="p">,</span>
	<span class="n">ATH9K_TX_QUEUE_PSPOLL</span>
<span class="p">};</span>

<span class="cp">#define	ATH9K_NUM_TX_QUEUES 10</span>

<span class="cm">/* Used as a queue subtype instead of a WMM AC */</span>
<span class="cp">#define ATH9K_WME_UPSD	4</span>

<span class="k">enum</span> <span class="n">ath9k_tx_queue_flags</span> <span class="p">{</span>
	<span class="n">TXQ_FLAG_TXINT_ENABLE</span> <span class="o">=</span> <span class="mh">0x0001</span><span class="p">,</span>
	<span class="n">TXQ_FLAG_TXDESCINT_ENABLE</span> <span class="o">=</span> <span class="mh">0x0002</span><span class="p">,</span>
	<span class="n">TXQ_FLAG_TXEOLINT_ENABLE</span> <span class="o">=</span> <span class="mh">0x0004</span><span class="p">,</span>
	<span class="n">TXQ_FLAG_TXURNINT_ENABLE</span> <span class="o">=</span> <span class="mh">0x0008</span><span class="p">,</span>
	<span class="n">TXQ_FLAG_BACKOFF_DISABLE</span> <span class="o">=</span> <span class="mh">0x0010</span><span class="p">,</span>
	<span class="n">TXQ_FLAG_COMPRESSION_ENABLE</span> <span class="o">=</span> <span class="mh">0x0020</span><span class="p">,</span>
	<span class="n">TXQ_FLAG_RDYTIME_EXP_POLICY_ENABLE</span> <span class="o">=</span> <span class="mh">0x0040</span><span class="p">,</span>
	<span class="n">TXQ_FLAG_FRAG_BURST_BACKOFF_ENABLE</span> <span class="o">=</span> <span class="mh">0x0080</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define ATH9K_TXQ_USEDEFAULT ((u32) -1)</span>
<span class="cp">#define ATH9K_TXQ_USE_LOCKOUT_BKOFF_DIS 0x00000001</span>

<span class="cp">#define ATH9K_DECOMP_MASK_SIZE     128</span>
<span class="cp">#define ATH9K_READY_TIME_LO_BOUND  50</span>
<span class="cp">#define ATH9K_READY_TIME_HI_BOUND  96</span>

<span class="k">enum</span> <span class="n">ath9k_pkt_type</span> <span class="p">{</span>
	<span class="n">ATH9K_PKT_TYPE_NORMAL</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">ATH9K_PKT_TYPE_ATIM</span><span class="p">,</span>
	<span class="n">ATH9K_PKT_TYPE_PSPOLL</span><span class="p">,</span>
	<span class="n">ATH9K_PKT_TYPE_BEACON</span><span class="p">,</span>
	<span class="n">ATH9K_PKT_TYPE_PROBE_RESP</span><span class="p">,</span>
	<span class="n">ATH9K_PKT_TYPE_CHIRP</span><span class="p">,</span>
	<span class="n">ATH9K_PKT_TYPE_GRP_POLL</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ath9k_tx_queue_info</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">tqi_ver</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">ath9k_tx_queue</span> <span class="n">tqi_type</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">tqi_subtype</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">ath9k_tx_queue_flags</span> <span class="n">tqi_qflags</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tqi_priority</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tqi_aifs</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tqi_cwmin</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tqi_cwmax</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">tqi_shretry</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">tqi_lgretry</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tqi_cbrPeriod</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tqi_cbrOverflowLimit</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tqi_burstTime</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tqi_readyTime</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tqi_physCompBuf</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tqi_intFlags</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">ath9k_rx_filter</span> <span class="p">{</span>
	<span class="n">ATH9K_RX_FILTER_UCAST</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_MCAST</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_BCAST</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_CONTROL</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_BEACON</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_PROM</span> <span class="o">=</span> <span class="mh">0x00000020</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_PROBEREQ</span> <span class="o">=</span> <span class="mh">0x00000080</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_PHYERR</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_MYBEACON</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_COMP_BAR</span> <span class="o">=</span> <span class="mh">0x00000400</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_COMP_BA</span> <span class="o">=</span> <span class="mh">0x00000800</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_UNCOMP_BA_BAR</span> <span class="o">=</span> <span class="mh">0x00001000</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_PSPOLL</span> <span class="o">=</span> <span class="mh">0x00004000</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_PHYRADAR</span> <span class="o">=</span> <span class="mh">0x00002000</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_MCAST_BCAST_ALL</span> <span class="o">=</span> <span class="mh">0x00008000</span><span class="p">,</span>
	<span class="n">ATH9K_RX_FILTER_CONTROL_WRAPPER</span> <span class="o">=</span> <span class="mh">0x00080000</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define ATH9K_RATESERIES_RTS_CTS  0x0001</span>
<span class="cp">#define ATH9K_RATESERIES_2040     0x0002</span>
<span class="cp">#define ATH9K_RATESERIES_HALFGI   0x0004</span>
<span class="cp">#define ATH9K_RATESERIES_STBC     0x0008</span>

<span class="k">struct</span> <span class="n">ath9k_11n_rate_series</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">Tries</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">Rate</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">PktDuration</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ChSel</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">RateFlags</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">aggr_type</span> <span class="p">{</span>
	<span class="n">AGGR_BUF_NONE</span><span class="p">,</span>
	<span class="n">AGGR_BUF_FIRST</span><span class="p">,</span>
	<span class="n">AGGR_BUF_MIDDLE</span><span class="p">,</span>
	<span class="n">AGGR_BUF_LAST</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">ath9k_key_type</span> <span class="p">{</span>
	<span class="n">ATH9K_KEY_TYPE_CLEAR</span><span class="p">,</span>
	<span class="n">ATH9K_KEY_TYPE_WEP</span><span class="p">,</span>
	<span class="n">ATH9K_KEY_TYPE_AES</span><span class="p">,</span>
	<span class="n">ATH9K_KEY_TYPE_TKIP</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ath_tx_info</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">qcu</span><span class="p">;</span>

	<span class="n">bool</span> <span class="n">is_first</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">is_last</span><span class="p">;</span>

	<span class="k">enum</span> <span class="n">aggr_type</span> <span class="n">aggr</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ndelim</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">aggr_len</span><span class="p">;</span>

	<span class="n">dma_addr_t</span> <span class="n">link</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">pkt_len</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">flags</span><span class="p">;</span>

	<span class="n">dma_addr_t</span> <span class="n">buf_addr</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">buf_len</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>

	<span class="k">struct</span> <span class="n">ath9k_11n_rate_series</span> <span class="n">rates</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">rtscts_rate</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">dur_update</span><span class="p">;</span>

	<span class="k">enum</span> <span class="n">ath9k_pkt_type</span> <span class="n">type</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">ath9k_key_type</span> <span class="n">keytype</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">keyix</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">txpower</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ath_hw</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">ath9k_channel</span><span class="p">;</span>
<span class="k">enum</span> <span class="n">ath9k_int</span><span class="p">;</span>

<span class="n">u32</span> <span class="n">ath9k_hw_gettxbuf</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="n">u32</span> <span class="n">q</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ath9k_hw_puttxbuf</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="n">u32</span> <span class="n">q</span><span class="p">,</span> <span class="n">u32</span> <span class="n">txdp</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ath9k_hw_txstart</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="n">u32</span> <span class="n">q</span><span class="p">);</span>
<span class="n">u32</span> <span class="n">ath9k_hw_numtxpending</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="n">u32</span> <span class="n">q</span><span class="p">);</span>
<span class="n">bool</span> <span class="n">ath9k_hw_updatetxtriglevel</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="n">bool</span> <span class="n">bIncTrigLevel</span><span class="p">);</span>
<span class="n">bool</span> <span class="n">ath9k_hw_stop_dma_queue</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="n">u32</span> <span class="n">q</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ath9k_hw_abort_tx_dma</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">);</span>
<span class="n">bool</span> <span class="n">ath9k_hw_set_txq_props</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="kt">int</span> <span class="n">q</span><span class="p">,</span>
			    <span class="k">const</span> <span class="k">struct</span> <span class="n">ath9k_tx_queue_info</span> <span class="o">*</span><span class="n">qinfo</span><span class="p">);</span>
<span class="n">bool</span> <span class="n">ath9k_hw_get_txq_props</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="kt">int</span> <span class="n">q</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">ath9k_tx_queue_info</span> <span class="o">*</span><span class="n">qinfo</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ath9k_hw_setuptxqueue</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="k">enum</span> <span class="n">ath9k_tx_queue</span> <span class="n">type</span><span class="p">,</span>
			  <span class="k">const</span> <span class="k">struct</span> <span class="n">ath9k_tx_queue_info</span> <span class="o">*</span><span class="n">qinfo</span><span class="p">);</span>
<span class="n">bool</span> <span class="n">ath9k_hw_releasetxqueue</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="n">u32</span> <span class="n">q</span><span class="p">);</span>
<span class="n">bool</span> <span class="n">ath9k_hw_resettxqueue</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="n">u32</span> <span class="n">q</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ath9k_hw_rxprocdesc</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="k">struct</span> <span class="n">ath_desc</span> <span class="o">*</span><span class="n">ds</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">ath_rx_status</span> <span class="o">*</span><span class="n">rs</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ath9k_hw_setuprxdesc</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="k">struct</span> <span class="n">ath_desc</span> <span class="o">*</span><span class="n">ds</span><span class="p">,</span>
			  <span class="n">u32</span> <span class="n">size</span><span class="p">,</span> <span class="n">u32</span> <span class="n">flags</span><span class="p">);</span>
<span class="n">bool</span> <span class="n">ath9k_hw_setrxabort</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="n">bool</span> <span class="n">set</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ath9k_hw_putrxbuf</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="n">u32</span> <span class="n">rxdp</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ath9k_hw_startpcureceive</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="n">bool</span> <span class="n">is_scanning</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ath9k_hw_abortpcurecv</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">);</span>
<span class="n">bool</span> <span class="n">ath9k_hw_stopdmarecv</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">,</span> <span class="n">bool</span> <span class="o">*</span><span class="n">reset</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ath9k_hw_beaconq_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">);</span>

<span class="cm">/* Interrupt Handling */</span>
<span class="n">bool</span> <span class="n">ath9k_hw_intrpend</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ath9k_hw_set_interrupts</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ath9k_hw_enable_interrupts</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ath9k_hw_disable_interrupts</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">ar9002_hw_attach_mac_ops</span><span class="p">(</span><span class="k">struct</span> <span class="n">ath_hw</span> <span class="o">*</span><span class="n">ah</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* MAC_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
