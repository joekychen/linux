<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › wireless › rtlwifi › rtl8192ce › sw.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>sw.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/******************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright(c) 2009-2012  Realtek Corporation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify it</span>
<span class="cm"> * under the terms of version 2 of the GNU General Public License as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="cm"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<span class="cm"> * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for</span>
<span class="cm"> * more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License along with</span>
<span class="cm"> * this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="cm"> * 51 Franklin Street, Fifth Floor, Boston, MA 02110, USA</span>
<span class="cm"> *</span>
<span class="cm"> * The full GNU General Public License is included in this distribution in the</span>
<span class="cm"> * file called LICENSE.</span>
<span class="cm"> *</span>
<span class="cm"> * Contact Information:</span>
<span class="cm"> * wlanfae &lt;wlanfae@realtek.com&gt;</span>
<span class="cm"> * Realtek Corporation, No. 2, Innovation Road II, Hsinchu Science Park,</span>
<span class="cm"> * Hsinchu 300, Taiwan.</span>
<span class="cm"> *</span>
<span class="cm"> * Larry Finger &lt;Larry.Finger@lwfinger.net&gt;</span>
<span class="cm"> *</span>
<span class="cm"> *****************************************************************************/</span>

<span class="cp">#include &quot;../wifi.h&quot;</span>
<span class="cp">#include &quot;../core.h&quot;</span>
<span class="cp">#include &quot;../pci.h&quot;</span>
<span class="cp">#include &quot;reg.h&quot;</span>
<span class="cp">#include &quot;def.h&quot;</span>
<span class="cp">#include &quot;phy.h&quot;</span>
<span class="cp">#include &quot;dm.h&quot;</span>
<span class="cp">#include &quot;hw.h&quot;</span>
<span class="cp">#include &quot;rf.h&quot;</span>
<span class="cp">#include &quot;sw.h&quot;</span>
<span class="cp">#include &quot;trx.h&quot;</span>
<span class="cp">#include &quot;led.h&quot;</span>

<span class="cp">#include &lt;linux/module.h&gt;</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">rtl92c_init_aspm_vars</span><span class="p">(</span><span class="k">struct</span> <span class="n">ieee80211_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">rtl_pci</span> <span class="o">*</span><span class="n">rtlpci</span> <span class="o">=</span> <span class="n">rtl_pcidev</span><span class="p">(</span><span class="n">rtl_pcipriv</span><span class="p">(</span><span class="n">hw</span><span class="p">));</span>

	<span class="cm">/*close ASPM for AMD defaultly */</span>
	<span class="n">rtlpci</span><span class="o">-&gt;</span><span class="n">const_amdpci_aspm</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * ASPM PS mode.</span>
<span class="cm">	 * 0 - Disable ASPM,</span>
<span class="cm">	 * 1 - Enable ASPM without Clock Req,</span>
<span class="cm">	 * 2 - Enable ASPM with Clock Req,</span>
<span class="cm">	 * 3 - Alwyas Enable ASPM with Clock Req,</span>
<span class="cm">	 * 4 - Always Enable ASPM without Clock Req.</span>
<span class="cm">	 * set defult to RTL8192CE:3 RTL8192E:2</span>
<span class="cm">	 * */</span>
	<span class="n">rtlpci</span><span class="o">-&gt;</span><span class="n">const_pci_aspm</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

	<span class="cm">/*Setting for PCI-E device */</span>
	<span class="n">rtlpci</span><span class="o">-&gt;</span><span class="n">const_devicepci_aspm_setting</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>

	<span class="cm">/*Setting for PCI-E bridge */</span>
	<span class="n">rtlpci</span><span class="o">-&gt;</span><span class="n">const_hostpci_aspm_setting</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * In Hw/Sw Radio Off situation.</span>
<span class="cm">	 * 0 - Default,</span>
<span class="cm">	 * 1 - From ASPM setting without low Mac Pwr,</span>
<span class="cm">	 * 2 - From ASPM setting with low Mac Pwr,</span>
<span class="cm">	 * 3 - Bus D3</span>
<span class="cm">	 * set default to RTL8192CE:0 RTL8192SE:2</span>
<span class="cm">	 */</span>
	<span class="n">rtlpci</span><span class="o">-&gt;</span><span class="n">const_hwsw_rfoff_d3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * This setting works for those device with</span>
<span class="cm">	 * backdoor ASPM setting such as EPHY setting.</span>
<span class="cm">	 * 0 - Not support ASPM,</span>
<span class="cm">	 * 1 - Support ASPM,</span>
<span class="cm">	 * 2 - According to chipset.</span>
<span class="cm">	 */</span>
	<span class="n">rtlpci</span><span class="o">-&gt;</span><span class="n">const_support_pciaspm</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">rtl92c_init_sw_vars</span><span class="p">(</span><span class="k">struct</span> <span class="n">ieee80211_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">err</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">rtl_priv</span> <span class="o">*</span><span class="n">rtlpriv</span> <span class="o">=</span> <span class="n">rtl_priv</span><span class="p">(</span><span class="n">hw</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">rtl_pci</span> <span class="o">*</span><span class="n">rtlpci</span> <span class="o">=</span> <span class="n">rtl_pcidev</span><span class="p">(</span><span class="n">rtl_pcipriv</span><span class="p">(</span><span class="n">hw</span><span class="p">));</span>
	<span class="k">struct</span> <span class="n">rtl_hal</span> <span class="o">*</span><span class="n">rtlhal</span> <span class="o">=</span> <span class="n">rtl_hal</span><span class="p">(</span><span class="n">rtl_priv</span><span class="p">(</span><span class="n">hw</span><span class="p">));</span>

	<span class="n">rtl8192ce_bt_reg_init</span><span class="p">(</span><span class="n">hw</span><span class="p">);</span>

	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">dm</span><span class="p">.</span><span class="n">dm_initialgain_enable</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">dm</span><span class="p">.</span><span class="n">dm_flag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">dm</span><span class="p">.</span><span class="n">disable_framebursting</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">dm</span><span class="p">.</span><span class="n">thermalvalue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">rtlpci</span><span class="o">-&gt;</span><span class="n">transmit_config</span> <span class="o">=</span> <span class="n">CFENDFORM</span> <span class="o">|</span> <span class="n">BIT</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="o">|</span> <span class="n">BIT</span><span class="p">(</span><span class="mi">13</span><span class="p">);</span>

	<span class="cm">/* compatible 5G band 88ce just 2.4G band &amp; smsp */</span>
	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">rtlhal</span><span class="p">.</span><span class="n">current_bandtype</span> <span class="o">=</span> <span class="n">BAND_ON_2_4G</span><span class="p">;</span>
	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">rtlhal</span><span class="p">.</span><span class="n">bandset</span> <span class="o">=</span> <span class="n">BAND_ON_2_4G</span><span class="p">;</span>
	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">rtlhal</span><span class="p">.</span><span class="n">macphymode</span> <span class="o">=</span> <span class="n">SINGLEMAC_SINGLEPHY</span><span class="p">;</span>

	<span class="n">rtlpci</span><span class="o">-&gt;</span><span class="n">receive_config</span> <span class="o">=</span> <span class="p">(</span><span class="n">RCR_APPFCS</span> <span class="o">|</span>
				  <span class="n">RCR_AMF</span> <span class="o">|</span>
				  <span class="n">RCR_ADF</span> <span class="o">|</span>
				  <span class="n">RCR_APP_MIC</span> <span class="o">|</span>
				  <span class="n">RCR_APP_ICV</span> <span class="o">|</span>
				  <span class="n">RCR_AICV</span> <span class="o">|</span>
				  <span class="n">RCR_ACRC32</span> <span class="o">|</span>
				  <span class="n">RCR_AB</span> <span class="o">|</span>
				  <span class="n">RCR_AM</span> <span class="o">|</span>
				  <span class="n">RCR_APM</span> <span class="o">|</span>
				  <span class="n">RCR_APP_PHYST_RXFF</span> <span class="o">|</span> <span class="n">RCR_HTC_LOC_CTRL</span> <span class="o">|</span> <span class="mi">0</span><span class="p">);</span>

	<span class="n">rtlpci</span><span class="o">-&gt;</span><span class="n">irq_mask</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span>
	    <span class="p">(</span><span class="n">u32</span><span class="p">)</span> <span class="p">(</span><span class="n">IMR_ROK</span> <span class="o">|</span>
		   <span class="n">IMR_VODOK</span> <span class="o">|</span>
		   <span class="n">IMR_VIDOK</span> <span class="o">|</span>
		   <span class="n">IMR_BEDOK</span> <span class="o">|</span>
		   <span class="n">IMR_BKDOK</span> <span class="o">|</span>
		   <span class="n">IMR_MGNTDOK</span> <span class="o">|</span>
		   <span class="n">IMR_HIGHDOK</span> <span class="o">|</span> <span class="n">IMR_BDOK</span> <span class="o">|</span> <span class="n">IMR_RDU</span> <span class="o">|</span> <span class="n">IMR_RXFOVW</span> <span class="o">|</span> <span class="mi">0</span><span class="p">);</span>

	<span class="n">rtlpci</span><span class="o">-&gt;</span><span class="n">irq_mask</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">u32</span><span class="p">)</span> <span class="p">(</span><span class="n">IMR_CPWM</span> <span class="o">|</span> <span class="n">IMR_C2HCMD</span> <span class="o">|</span> <span class="mi">0</span><span class="p">);</span>

	<span class="cm">/* for debug level */</span>
	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">dbg</span><span class="p">.</span><span class="n">global_debuglevel</span> <span class="o">=</span> <span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">cfg</span><span class="o">-&gt;</span><span class="n">mod_params</span><span class="o">-&gt;</span><span class="n">debug</span><span class="p">;</span>
	<span class="cm">/* for LPS &amp; IPS */</span>
	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">psc</span><span class="p">.</span><span class="n">inactiveps</span> <span class="o">=</span> <span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">cfg</span><span class="o">-&gt;</span><span class="n">mod_params</span><span class="o">-&gt;</span><span class="n">inactiveps</span><span class="p">;</span>
	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">psc</span><span class="p">.</span><span class="n">swctrl_lps</span> <span class="o">=</span> <span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">cfg</span><span class="o">-&gt;</span><span class="n">mod_params</span><span class="o">-&gt;</span><span class="n">swctrl_lps</span><span class="p">;</span>
	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">psc</span><span class="p">.</span><span class="n">fwctrl_lps</span> <span class="o">=</span> <span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">cfg</span><span class="o">-&gt;</span><span class="n">mod_params</span><span class="o">-&gt;</span><span class="n">fwctrl_lps</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">psc</span><span class="p">.</span><span class="n">inactiveps</span><span class="p">)</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;rtl8192ce: Power Save off (module option)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">psc</span><span class="p">.</span><span class="n">fwctrl_lps</span><span class="p">)</span>
		<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;rtl8192ce: FW Power Save off (module option)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">psc</span><span class="p">.</span><span class="n">reg_fwctrl_lps</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">psc</span><span class="p">.</span><span class="n">reg_max_lps_awakeintvl</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
	<span class="cm">/* for ASPM, you can close aspm through</span>
<span class="cm">	 * set const_support_pciaspm = 0 */</span>
	<span class="n">rtl92c_init_aspm_vars</span><span class="p">(</span><span class="n">hw</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">psc</span><span class="p">.</span><span class="n">reg_fwctrl_lps</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">psc</span><span class="p">.</span><span class="n">fwctrl_psmode</span> <span class="o">=</span> <span class="n">FW_PS_MIN_MODE</span><span class="p">;</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">psc</span><span class="p">.</span><span class="n">reg_fwctrl_lps</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
		<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">psc</span><span class="p">.</span><span class="n">fwctrl_psmode</span> <span class="o">=</span> <span class="n">FW_PS_MAX_MODE</span><span class="p">;</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">psc</span><span class="p">.</span><span class="n">reg_fwctrl_lps</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span>
		<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">psc</span><span class="p">.</span><span class="n">fwctrl_psmode</span> <span class="o">=</span> <span class="n">FW_PS_DTIM_MODE</span><span class="p">;</span>

	<span class="cm">/* for firmware buf */</span>
	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">rtlhal</span><span class="p">.</span><span class="n">pfirmware</span> <span class="o">=</span> <span class="n">vzalloc</span><span class="p">(</span><span class="mh">0x4000</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">rtlhal</span><span class="p">.</span><span class="n">pfirmware</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">rtlpriv</span><span class="p">,</span> <span class="n">COMP_ERR</span><span class="p">,</span> <span class="n">DBG_EMERG</span><span class="p">,</span>
			 <span class="s">&quot;Can&#39;t alloc buffer for fw</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* request fw */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_VENDOR_UMC_A_CUT</span><span class="p">(</span><span class="n">rtlhal</span><span class="o">-&gt;</span><span class="n">version</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	    <span class="o">!</span><span class="n">IS_92C_SERIAL</span><span class="p">(</span><span class="n">rtlhal</span><span class="o">-&gt;</span><span class="n">version</span><span class="p">))</span>
		<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">cfg</span><span class="o">-&gt;</span><span class="n">fw_name</span> <span class="o">=</span> <span class="s">&quot;rtlwifi/rtl8192cfwU.bin&quot;</span><span class="p">;</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">IS_81xxC_VENDOR_UMC_B_CUT</span><span class="p">(</span><span class="n">rtlhal</span><span class="o">-&gt;</span><span class="n">version</span><span class="p">))</span>
		<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">cfg</span><span class="o">-&gt;</span><span class="n">fw_name</span> <span class="o">=</span> <span class="s">&quot;rtlwifi/rtl8192cfwU_B.bin&quot;</span><span class="p">;</span>

	<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">max_fw_size</span> <span class="o">=</span> <span class="mh">0x4000</span><span class="p">;</span>
	<span class="n">pr_info</span><span class="p">(</span><span class="s">&quot;Using firmware %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">cfg</span><span class="o">-&gt;</span><span class="n">fw_name</span><span class="p">);</span>
	<span class="n">err</span> <span class="o">=</span> <span class="n">request_firmware_nowait</span><span class="p">(</span><span class="n">THIS_MODULE</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">cfg</span><span class="o">-&gt;</span><span class="n">fw_name</span><span class="p">,</span>
				      <span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">io</span><span class="p">.</span><span class="n">dev</span><span class="p">,</span> <span class="n">GFP_KERNEL</span><span class="p">,</span> <span class="n">hw</span><span class="p">,</span>
				      <span class="n">rtl_fw_cb</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">RT_TRACE</span><span class="p">(</span><span class="n">rtlpriv</span><span class="p">,</span> <span class="n">COMP_ERR</span><span class="p">,</span> <span class="n">DBG_EMERG</span><span class="p">,</span>
			 <span class="s">&quot;Failed to request firmware!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">rtl92c_deinit_sw_vars</span><span class="p">(</span><span class="k">struct</span> <span class="n">ieee80211_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">rtl_priv</span> <span class="o">*</span><span class="n">rtlpriv</span> <span class="o">=</span> <span class="n">rtl_priv</span><span class="p">(</span><span class="n">hw</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">rtlhal</span><span class="p">.</span><span class="n">pfirmware</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">vfree</span><span class="p">(</span><span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">rtlhal</span><span class="p">.</span><span class="n">pfirmware</span><span class="p">);</span>
		<span class="n">rtlpriv</span><span class="o">-&gt;</span><span class="n">rtlhal</span><span class="p">.</span><span class="n">pfirmware</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">rtl_hal_ops</span> <span class="n">rtl8192ce_hal_ops</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">init_sw_vars</span> <span class="o">=</span> <span class="n">rtl92c_init_sw_vars</span><span class="p">,</span>
	<span class="p">.</span><span class="n">deinit_sw_vars</span> <span class="o">=</span> <span class="n">rtl92c_deinit_sw_vars</span><span class="p">,</span>
	<span class="p">.</span><span class="n">read_eeprom_info</span> <span class="o">=</span> <span class="n">rtl92ce_read_eeprom_info</span><span class="p">,</span>
	<span class="p">.</span><span class="n">interrupt_recognized</span> <span class="o">=</span> <span class="n">rtl92ce_interrupt_recognized</span><span class="p">,</span>
	<span class="p">.</span><span class="n">hw_init</span> <span class="o">=</span> <span class="n">rtl92ce_hw_init</span><span class="p">,</span>
	<span class="p">.</span><span class="n">hw_disable</span> <span class="o">=</span> <span class="n">rtl92ce_card_disable</span><span class="p">,</span>
	<span class="p">.</span><span class="n">hw_suspend</span> <span class="o">=</span> <span class="n">rtl92ce_suspend</span><span class="p">,</span>
	<span class="p">.</span><span class="n">hw_resume</span> <span class="o">=</span> <span class="n">rtl92ce_resume</span><span class="p">,</span>
	<span class="p">.</span><span class="n">enable_interrupt</span> <span class="o">=</span> <span class="n">rtl92ce_enable_interrupt</span><span class="p">,</span>
	<span class="p">.</span><span class="n">disable_interrupt</span> <span class="o">=</span> <span class="n">rtl92ce_disable_interrupt</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_network_type</span> <span class="o">=</span> <span class="n">rtl92ce_set_network_type</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_chk_bssid</span> <span class="o">=</span> <span class="n">rtl92ce_set_check_bssid</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_qos</span> <span class="o">=</span> <span class="n">rtl92ce_set_qos</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_bcn_reg</span> <span class="o">=</span> <span class="n">rtl92ce_set_beacon_related_registers</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_bcn_intv</span> <span class="o">=</span> <span class="n">rtl92ce_set_beacon_interval</span><span class="p">,</span>
	<span class="p">.</span><span class="n">update_interrupt_mask</span> <span class="o">=</span> <span class="n">rtl92ce_update_interrupt_mask</span><span class="p">,</span>
	<span class="p">.</span><span class="n">get_hw_reg</span> <span class="o">=</span> <span class="n">rtl92ce_get_hw_reg</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_hw_reg</span> <span class="o">=</span> <span class="n">rtl92ce_set_hw_reg</span><span class="p">,</span>
	<span class="p">.</span><span class="n">update_rate_tbl</span> <span class="o">=</span> <span class="n">rtl92ce_update_hal_rate_tbl</span><span class="p">,</span>
	<span class="p">.</span><span class="n">fill_tx_desc</span> <span class="o">=</span> <span class="n">rtl92ce_tx_fill_desc</span><span class="p">,</span>
	<span class="p">.</span><span class="n">fill_tx_cmddesc</span> <span class="o">=</span> <span class="n">rtl92ce_tx_fill_cmddesc</span><span class="p">,</span>
	<span class="p">.</span><span class="n">query_rx_desc</span> <span class="o">=</span> <span class="n">rtl92ce_rx_query_desc</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_channel_access</span> <span class="o">=</span> <span class="n">rtl92ce_update_channel_access_setting</span><span class="p">,</span>
	<span class="p">.</span><span class="n">radio_onoff_checking</span> <span class="o">=</span> <span class="n">rtl92ce_gpio_radio_on_off_checking</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_bw_mode</span> <span class="o">=</span> <span class="n">rtl92c_phy_set_bw_mode</span><span class="p">,</span>
	<span class="p">.</span><span class="n">switch_channel</span> <span class="o">=</span> <span class="n">rtl92c_phy_sw_chnl</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dm_watchdog</span> <span class="o">=</span> <span class="n">rtl92c_dm_watchdog</span><span class="p">,</span>
	<span class="p">.</span><span class="n">scan_operation_backup</span> <span class="o">=</span> <span class="n">rtl92c_phy_scan_operation_backup</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_rf_power_state</span> <span class="o">=</span> <span class="n">rtl92c_phy_set_rf_power_state</span><span class="p">,</span>
	<span class="p">.</span><span class="n">led_control</span> <span class="o">=</span> <span class="n">rtl92ce_led_control</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_desc</span> <span class="o">=</span> <span class="n">rtl92ce_set_desc</span><span class="p">,</span>
	<span class="p">.</span><span class="n">get_desc</span> <span class="o">=</span> <span class="n">rtl92ce_get_desc</span><span class="p">,</span>
	<span class="p">.</span><span class="n">tx_polling</span> <span class="o">=</span> <span class="n">rtl92ce_tx_polling</span><span class="p">,</span>
	<span class="p">.</span><span class="n">enable_hw_sec</span> <span class="o">=</span> <span class="n">rtl92ce_enable_hw_security_config</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_key</span> <span class="o">=</span> <span class="n">rtl92ce_set_key</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_sw_leds</span> <span class="o">=</span> <span class="n">rtl92ce_init_sw_leds</span><span class="p">,</span>
	<span class="p">.</span><span class="n">get_bbreg</span> <span class="o">=</span> <span class="n">rtl92c_phy_query_bb_reg</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_bbreg</span> <span class="o">=</span> <span class="n">rtl92c_phy_set_bb_reg</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_rfreg</span> <span class="o">=</span> <span class="n">rtl92ce_phy_set_rf_reg</span><span class="p">,</span>
	<span class="p">.</span><span class="n">get_rfreg</span> <span class="o">=</span> <span class="n">rtl92c_phy_query_rf_reg</span><span class="p">,</span>
	<span class="p">.</span><span class="n">phy_rf6052_config</span> <span class="o">=</span> <span class="n">rtl92ce_phy_rf6052_config</span><span class="p">,</span>
	<span class="p">.</span><span class="n">phy_rf6052_set_cck_txpower</span> <span class="o">=</span> <span class="n">rtl92ce_phy_rf6052_set_cck_txpower</span><span class="p">,</span>
	<span class="p">.</span><span class="n">phy_rf6052_set_ofdm_txpower</span> <span class="o">=</span> <span class="n">rtl92ce_phy_rf6052_set_ofdm_txpower</span><span class="p">,</span>
	<span class="p">.</span><span class="n">config_bb_with_headerfile</span> <span class="o">=</span> <span class="n">_rtl92ce_phy_config_bb_with_headerfile</span><span class="p">,</span>
	<span class="p">.</span><span class="n">config_bb_with_pgheaderfile</span> <span class="o">=</span> <span class="n">_rtl92ce_phy_config_bb_with_pgheaderfile</span><span class="p">,</span>
	<span class="p">.</span><span class="n">phy_lc_calibrate</span> <span class="o">=</span> <span class="n">_rtl92ce_phy_lc_calibrate</span><span class="p">,</span>
	<span class="p">.</span><span class="n">phy_set_bw_mode_callback</span> <span class="o">=</span> <span class="n">rtl92ce_phy_set_bw_mode_callback</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dm_dynamic_txpower</span> <span class="o">=</span> <span class="n">rtl92ce_dm_dynamic_txpower</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">rtl_mod_params</span> <span class="n">rtl92ce_mod_params</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">sw_crypto</span> <span class="o">=</span> <span class="nb">false</span><span class="p">,</span>
	<span class="p">.</span><span class="n">inactiveps</span> <span class="o">=</span> <span class="nb">true</span><span class="p">,</span>
	<span class="p">.</span><span class="n">swctrl_lps</span> <span class="o">=</span> <span class="nb">false</span><span class="p">,</span>
	<span class="p">.</span><span class="n">fwctrl_lps</span> <span class="o">=</span> <span class="nb">true</span><span class="p">,</span>
	<span class="p">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">DBG_EMERG</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">rtl_hal_cfg</span> <span class="n">rtl92ce_hal_cfg</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">bar_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="p">.</span><span class="n">write_readback</span> <span class="o">=</span> <span class="nb">true</span><span class="p">,</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;rtl92c_pci&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">fw_name</span> <span class="o">=</span> <span class="s">&quot;rtlwifi/rtl8192cfw.bin&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">ops</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">rtl8192ce_hal_ops</span><span class="p">,</span>
	<span class="p">.</span><span class="n">mod_params</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">rtl92ce_mod_params</span><span class="p">,</span>

	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">SYS_ISO_CTRL</span><span class="p">]</span> <span class="o">=</span> <span class="n">REG_SYS_ISO_CTRL</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">SYS_FUNC_EN</span><span class="p">]</span> <span class="o">=</span> <span class="n">REG_SYS_FUNC_EN</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">SYS_CLK</span><span class="p">]</span> <span class="o">=</span> <span class="n">REG_SYS_CLKR</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">MAC_RCR_AM</span><span class="p">]</span> <span class="o">=</span> <span class="n">AM</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">MAC_RCR_AB</span><span class="p">]</span> <span class="o">=</span> <span class="n">AB</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">MAC_RCR_ACRC32</span><span class="p">]</span> <span class="o">=</span> <span class="n">ACRC32</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">MAC_RCR_ACF</span><span class="p">]</span> <span class="o">=</span> <span class="n">ACF</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">MAC_RCR_AAP</span><span class="p">]</span> <span class="o">=</span> <span class="n">AAP</span><span class="p">,</span>

	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">EFUSE_TEST</span><span class="p">]</span> <span class="o">=</span> <span class="n">REG_EFUSE_TEST</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">EFUSE_CTRL</span><span class="p">]</span> <span class="o">=</span> <span class="n">REG_EFUSE_CTRL</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">EFUSE_CLK</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">EFUSE_CLK_CTRL</span><span class="p">]</span> <span class="o">=</span> <span class="n">REG_EFUSE_CTRL</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">EFUSE_PWC_EV12V</span><span class="p">]</span> <span class="o">=</span> <span class="n">PWC_EV12V</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">EFUSE_FEN_ELDR</span><span class="p">]</span> <span class="o">=</span> <span class="n">FEN_ELDR</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">EFUSE_LOADER_CLK_EN</span><span class="p">]</span> <span class="o">=</span> <span class="n">LOADER_CLK_EN</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">EFUSE_ANA8M</span><span class="p">]</span> <span class="o">=</span> <span class="n">EFUSE_ANA8M</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">EFUSE_HWSET_MAX_SIZE</span><span class="p">]</span> <span class="o">=</span> <span class="n">HWSET_MAX_SIZE</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">EFUSE_MAX_SECTION_MAP</span><span class="p">]</span> <span class="o">=</span> <span class="n">EFUSE_MAX_SECTION</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">EFUSE_REAL_CONTENT_SIZE</span><span class="p">]</span> <span class="o">=</span> <span class="n">EFUSE_REAL_CONTENT_LEN</span><span class="p">,</span>

	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RWCAM</span><span class="p">]</span> <span class="o">=</span> <span class="n">REG_CAMCMD</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">WCAMI</span><span class="p">]</span> <span class="o">=</span> <span class="n">REG_CAMWRITE</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RCAMO</span><span class="p">]</span> <span class="o">=</span> <span class="n">REG_CAMREAD</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">CAMDBG</span><span class="p">]</span> <span class="o">=</span> <span class="n">REG_CAMDBG</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">SECR</span><span class="p">]</span> <span class="o">=</span> <span class="n">REG_SECCFG</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">SEC_CAM_NONE</span><span class="p">]</span> <span class="o">=</span> <span class="n">CAM_NONE</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">SEC_CAM_WEP40</span><span class="p">]</span> <span class="o">=</span> <span class="n">CAM_WEP40</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">SEC_CAM_TKIP</span><span class="p">]</span> <span class="o">=</span> <span class="n">CAM_TKIP</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">SEC_CAM_AES</span><span class="p">]</span> <span class="o">=</span> <span class="n">CAM_AES</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">SEC_CAM_WEP104</span><span class="p">]</span> <span class="o">=</span> <span class="n">CAM_WEP104</span><span class="p">,</span>

	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BCNDMAINT6</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNDMAINT6</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BCNDMAINT5</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNDMAINT5</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BCNDMAINT4</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNDMAINT4</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BCNDMAINT3</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNDMAINT3</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BCNDMAINT2</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNDMAINT2</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BCNDMAINT1</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNDMAINT1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BCNDOK8</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNDOK8</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BCNDOK7</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNDOK7</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BCNDOK6</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNDOK6</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BCNDOK5</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNDOK5</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BCNDOK4</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNDOK4</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BCNDOK3</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNDOK3</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BCNDOK2</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNDOK2</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BCNDOK1</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNDOK1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_TIMEOUT2</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_TIMEOUT2</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_TIMEOUT1</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_TIMEOUT1</span><span class="p">,</span>

	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_TXFOVW</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_TXFOVW</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_PSTIMEOUT</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_PSTIMEOUT</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BcnInt</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BCNINT</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_RXFOVW</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_RXFOVW</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_RDU</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_RDU</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_ATIMEND</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_ATIMEND</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BDOK</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BDOK</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_MGNTDOK</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_MGNTDOK</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_TBDER</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_TBDER</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_HIGHDOK</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_HIGHDOK</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_TBDOK</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_TBDOK</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BKDOK</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BKDOK</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_BEDOK</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_BEDOK</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_VIDOK</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_VIDOK</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_VODOK</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_VODOK</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IMR_ROK</span><span class="p">]</span> <span class="o">=</span> <span class="n">IMR_ROK</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_IBSS_INT_MASKS</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">IMR_BCNINT</span> <span class="o">|</span> <span class="n">IMR_TBDOK</span> <span class="o">|</span> <span class="n">IMR_TBDER</span><span class="p">),</span>

	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_RC_CCK_RATE1M</span><span class="p">]</span> <span class="o">=</span> <span class="n">DESC92_RATE1M</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_RC_CCK_RATE2M</span><span class="p">]</span> <span class="o">=</span> <span class="n">DESC92_RATE2M</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_RC_CCK_RATE5_5M</span><span class="p">]</span> <span class="o">=</span> <span class="n">DESC92_RATE5_5M</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_RC_CCK_RATE11M</span><span class="p">]</span> <span class="o">=</span> <span class="n">DESC92_RATE11M</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_RC_OFDM_RATE6M</span><span class="p">]</span> <span class="o">=</span> <span class="n">DESC92_RATE6M</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_RC_OFDM_RATE9M</span><span class="p">]</span> <span class="o">=</span> <span class="n">DESC92_RATE9M</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_RC_OFDM_RATE12M</span><span class="p">]</span> <span class="o">=</span> <span class="n">DESC92_RATE12M</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_RC_OFDM_RATE18M</span><span class="p">]</span> <span class="o">=</span> <span class="n">DESC92_RATE18M</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_RC_OFDM_RATE24M</span><span class="p">]</span> <span class="o">=</span> <span class="n">DESC92_RATE24M</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_RC_OFDM_RATE36M</span><span class="p">]</span> <span class="o">=</span> <span class="n">DESC92_RATE36M</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_RC_OFDM_RATE48M</span><span class="p">]</span> <span class="o">=</span> <span class="n">DESC92_RATE48M</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_RC_OFDM_RATE54M</span><span class="p">]</span> <span class="o">=</span> <span class="n">DESC92_RATE54M</span><span class="p">,</span>

	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_RC_HT_RATEMCS7</span><span class="p">]</span> <span class="o">=</span> <span class="n">DESC92_RATEMCS7</span><span class="p">,</span>
	<span class="p">.</span><span class="n">maps</span><span class="p">[</span><span class="n">RTL_RC_HT_RATEMCS15</span><span class="p">]</span> <span class="o">=</span> <span class="n">DESC92_RATEMCS15</span><span class="p">,</span>
<span class="p">};</span>

<span class="n">DEFINE_PCI_DEVICE_TABLE</span><span class="p">(</span><span class="n">rtl92ce_pci_ids</span><span class="p">)</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">RTL_PCI_DEVICE</span><span class="p">(</span><span class="n">PCI_VENDOR_ID_REALTEK</span><span class="p">,</span> <span class="mh">0x8191</span><span class="p">,</span> <span class="n">rtl92ce_hal_cfg</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">RTL_PCI_DEVICE</span><span class="p">(</span><span class="n">PCI_VENDOR_ID_REALTEK</span><span class="p">,</span> <span class="mh">0x8178</span><span class="p">,</span> <span class="n">rtl92ce_hal_cfg</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">RTL_PCI_DEVICE</span><span class="p">(</span><span class="n">PCI_VENDOR_ID_REALTEK</span><span class="p">,</span> <span class="mh">0x8177</span><span class="p">,</span> <span class="n">rtl92ce_hal_cfg</span><span class="p">)},</span>
	<span class="p">{</span><span class="n">RTL_PCI_DEVICE</span><span class="p">(</span><span class="n">PCI_VENDOR_ID_REALTEK</span><span class="p">,</span> <span class="mh">0x8176</span><span class="p">,</span> <span class="n">rtl92ce_hal_cfg</span><span class="p">)},</span>
	<span class="p">{},</span>
<span class="p">};</span>

<span class="n">MODULE_DEVICE_TABLE</span><span class="p">(</span><span class="n">pci</span><span class="p">,</span> <span class="n">rtl92ce_pci_ids</span><span class="p">);</span>

<span class="n">MODULE_AUTHOR</span><span class="p">(</span><span class="s">&quot;lizhaoming	&lt;chaoming_li@realsil.com.cn&gt;&quot;</span><span class="p">);</span>
<span class="n">MODULE_AUTHOR</span><span class="p">(</span><span class="s">&quot;Realtek WlanFAE	&lt;wlanfae@realtek.com&gt;&quot;</span><span class="p">);</span>
<span class="n">MODULE_AUTHOR</span><span class="p">(</span><span class="s">&quot;Larry Finger	&lt;Larry.Finger@lwfinger.net&gt;&quot;</span><span class="p">);</span>
<span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span>
<span class="n">MODULE_DESCRIPTION</span><span class="p">(</span><span class="s">&quot;Realtek 8192C/8188C 802.11n PCI wireless&quot;</span><span class="p">);</span>
<span class="n">MODULE_FIRMWARE</span><span class="p">(</span><span class="s">&quot;rtlwifi/rtl8192cfw.bin&quot;</span><span class="p">);</span>
<span class="n">MODULE_FIRMWARE</span><span class="p">(</span><span class="s">&quot;rtlwifi/rtl8192cfwU.bin&quot;</span><span class="p">);</span>
<span class="n">MODULE_FIRMWARE</span><span class="p">(</span><span class="s">&quot;rtlwifi/rtl8192cfwU_B.bin&quot;</span><span class="p">);</span>

<span class="n">module_param_named</span><span class="p">(</span><span class="n">swenc</span><span class="p">,</span> <span class="n">rtl92ce_mod_params</span><span class="p">.</span><span class="n">sw_crypto</span><span class="p">,</span> <span class="n">bool</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param_named</span><span class="p">(</span><span class="n">debug</span><span class="p">,</span> <span class="n">rtl92ce_mod_params</span><span class="p">.</span><span class="n">debug</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param_named</span><span class="p">(</span><span class="n">ips</span><span class="p">,</span> <span class="n">rtl92ce_mod_params</span><span class="p">.</span><span class="n">inactiveps</span><span class="p">,</span> <span class="n">bool</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param_named</span><span class="p">(</span><span class="n">swlps</span><span class="p">,</span> <span class="n">rtl92ce_mod_params</span><span class="p">.</span><span class="n">swctrl_lps</span><span class="p">,</span> <span class="n">bool</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">module_param_named</span><span class="p">(</span><span class="n">fwlps</span><span class="p">,</span> <span class="n">rtl92ce_mod_params</span><span class="p">.</span><span class="n">fwctrl_lps</span><span class="p">,</span> <span class="n">bool</span><span class="p">,</span> <span class="mo">0444</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">swenc</span><span class="p">,</span> <span class="s">&quot;Set to 1 for software crypto (default 0)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">ips</span><span class="p">,</span> <span class="s">&quot;Set to 0 to not use link power save (default 1)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">swlps</span><span class="p">,</span> <span class="s">&quot;Set to 1 to use SW control power save (default 0)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">fwlps</span><span class="p">,</span> <span class="s">&quot;Set to 1 to use FW control power save (default 1)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">MODULE_PARM_DESC</span><span class="p">(</span><span class="n">debug</span><span class="p">,</span> <span class="s">&quot;Set debug level (0-5) (default 0)&quot;</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">dev_pm_ops</span> <span class="n">rtlwifi_pm_ops</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">suspend</span> <span class="o">=</span> <span class="n">rtl_pci_suspend</span><span class="p">,</span>
	<span class="p">.</span><span class="n">resume</span> <span class="o">=</span> <span class="n">rtl_pci_resume</span><span class="p">,</span>
	<span class="p">.</span><span class="n">freeze</span> <span class="o">=</span> <span class="n">rtl_pci_suspend</span><span class="p">,</span>
	<span class="p">.</span><span class="n">thaw</span> <span class="o">=</span> <span class="n">rtl_pci_resume</span><span class="p">,</span>
	<span class="p">.</span><span class="n">poweroff</span> <span class="o">=</span> <span class="n">rtl_pci_suspend</span><span class="p">,</span>
	<span class="p">.</span><span class="n">restore</span> <span class="o">=</span> <span class="n">rtl_pci_resume</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pci_driver</span> <span class="n">rtl92ce_driver</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">KBUILD_MODNAME</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id_table</span> <span class="o">=</span> <span class="n">rtl92ce_pci_ids</span><span class="p">,</span>
	<span class="p">.</span><span class="n">probe</span> <span class="o">=</span> <span class="n">rtl_pci_probe</span><span class="p">,</span>
	<span class="p">.</span><span class="n">remove</span> <span class="o">=</span> <span class="n">rtl_pci_disconnect</span><span class="p">,</span>
	<span class="p">.</span><span class="n">driver</span><span class="p">.</span><span class="n">pm</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">rtlwifi_pm_ops</span><span class="p">,</span>
<span class="p">};</span>

<span class="n">module_pci_driver</span><span class="p">(</span><span class="n">rtl92ce_driver</span><span class="p">);</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
