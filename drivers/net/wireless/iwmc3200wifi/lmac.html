<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › wireless › iwmc3200wifi › lmac.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>lmac.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Intel Wireless Multicomm 3200 WiFi driver</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2009 Intel Corporation. All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * Redistribution and use in source and binary forms, with or without</span>
<span class="cm"> * modification, are permitted provided that the following conditions</span>
<span class="cm"> * are met:</span>
<span class="cm"> *</span>
<span class="cm"> *   * Redistributions of source code must retain the above copyright</span>
<span class="cm"> *     notice, this list of conditions and the following disclaimer.</span>
<span class="cm"> *   * Redistributions in binary form must reproduce the above copyright</span>
<span class="cm"> *     notice, this list of conditions and the following disclaimer in</span>
<span class="cm"> *     the documentation and/or other materials provided with the</span>
<span class="cm"> *     distribution.</span>
<span class="cm"> *   * Neither the name of Intel Corporation nor the names of its</span>
<span class="cm"> *     contributors may be used to endorse or promote products derived</span>
<span class="cm"> *     from this software without specific prior written permission.</span>
<span class="cm"> *</span>
<span class="cm"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<span class="cm"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<span class="cm"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<span class="cm"> * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<span class="cm"> * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<span class="cm"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<span class="cm"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<span class="cm"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<span class="cm"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<span class="cm"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<span class="cm"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> * Intel Corporation &lt;ilw@linux.intel.com&gt;</span>
<span class="cm"> * Samuel Ortiz &lt;samuel.ortiz@intel.com&gt;</span>
<span class="cm"> * Zhu Yi &lt;yi.zhu@intel.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __IWM_LMAC_H__</span>
<span class="cp">#define __IWM_LMAC_H__</span>

<span class="k">struct</span> <span class="n">iwm_lmac_hdr</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">id</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">seq_num</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cm">/* LMAC commands */</span>
<span class="cp">#define CALIB_CFG_FLAG_SEND_COMPLETE_NTFY_AFTER_MSK  0x1</span>

<span class="k">struct</span> <span class="n">iwm_lmac_cal_cfg_elt</span> <span class="p">{</span>
	<span class="n">__le32</span> <span class="n">enable</span><span class="p">;</span> <span class="cm">/* 1 means LMAC needs to do something */</span>
	<span class="n">__le32</span> <span class="n">start</span><span class="p">;</span>  <span class="cm">/* 1 to start calibration, 0 to stop */</span>
	<span class="n">__le32</span> <span class="n">send_res</span><span class="p">;</span> <span class="cm">/* 1 for sending back results */</span>
	<span class="n">__le32</span> <span class="n">apply_res</span><span class="p">;</span> <span class="cm">/* 1 for applying calibration results to HW */</span>
	<span class="n">__le32</span> <span class="n">reserved</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">iwm_lmac_cal_cfg_status</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">iwm_lmac_cal_cfg_elt</span> <span class="n">init</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iwm_lmac_cal_cfg_elt</span> <span class="n">periodic</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">flags</span><span class="p">;</span> <span class="cm">/* CALIB_CFG_FLAG_SEND_COMPLETE_NTFY_AFTER_MSK */</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">iwm_lmac_cal_cfg_cmd</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">iwm_lmac_cal_cfg_status</span> <span class="n">ucode_cfg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iwm_lmac_cal_cfg_status</span> <span class="n">driver_cfg</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">reserved</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">iwm_lmac_cal_cfg_resp</span> <span class="p">{</span>
	<span class="n">__le32</span> <span class="n">status</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define IWM_CARD_STATE_SW_HW_ENABLED	0x00</span>
<span class="cp">#define IWM_CARD_STATE_HW_DISABLED	0x01</span>
<span class="cp">#define IWM_CARD_STATE_SW_DISABLED	0x02</span>
<span class="cp">#define IWM_CARD_STATE_CTKILL_DISABLED	0x04</span>
<span class="cp">#define IWM_CARD_STATE_IS_RXON		0x10</span>

<span class="k">struct</span> <span class="n">iwm_lmac_card_state</span> <span class="p">{</span>
	<span class="n">__le32</span> <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * COEX_PRIORITY_TABLE_CMD</span>
<span class="cm"> *</span>
<span class="cm"> * Priority entry for each state</span>
<span class="cm"> * Will keep two tables, for STA and WIPAN</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="cm">/* UN-ASSOCIATION PART */</span>
	<span class="n">COEX_UNASSOC_IDLE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">COEX_UNASSOC_MANUAL_SCAN</span><span class="p">,</span>
	<span class="n">COEX_UNASSOC_AUTO_SCAN</span><span class="p">,</span>

	<span class="cm">/* CALIBRATION */</span>
	<span class="n">COEX_CALIBRATION</span><span class="p">,</span>
	<span class="n">COEX_PERIODIC_CALIBRATION</span><span class="p">,</span>

	<span class="cm">/* CONNECTION */</span>
	<span class="n">COEX_CONNECTION_ESTAB</span><span class="p">,</span>

	<span class="cm">/* ASSOCIATION PART */</span>
	<span class="n">COEX_ASSOCIATED_IDLE</span><span class="p">,</span>
	<span class="n">COEX_ASSOC_MANUAL_SCAN</span><span class="p">,</span>
	<span class="n">COEX_ASSOC_AUTO_SCAN</span><span class="p">,</span>
	<span class="n">COEX_ASSOC_ACTIVE_LEVEL</span><span class="p">,</span>

	<span class="cm">/* RF ON/OFF */</span>
	<span class="n">COEX_RF_ON</span><span class="p">,</span>
	<span class="n">COEX_RF_OFF</span><span class="p">,</span>
	<span class="n">COEX_STAND_ALONE_DEBUG</span><span class="p">,</span>

	<span class="cm">/* IPNN */</span>
	<span class="n">COEX_IPAN_ASSOC_LEVEL</span><span class="p">,</span>

	<span class="cm">/* RESERVED */</span>
	<span class="n">COEX_RSRVD1</span><span class="p">,</span>
	<span class="n">COEX_RSRVD2</span><span class="p">,</span>

	<span class="n">COEX_EVENTS_NUM</span>
<span class="p">};</span>

<span class="cp">#define COEX_EVT_FLAG_MEDIUM_FREE_NTFY_MSK	0x1</span>
<span class="cp">#define COEX_EVT_FLAG_MEDIUM_ACTV_NTFY_MSK	0x2</span>
<span class="cp">#define COEX_EVT_FLAG_DELAY_MEDIUM_FREE_NTFY_MSK	0x4</span>

<span class="k">struct</span> <span class="n">coex_event</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">req_prio</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">win_med_prio</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reserved</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define COEX_FLAGS_STA_TABLE_VALID_MSK		0x1</span>
<span class="cp">#define COEX_FLAGS_UNASSOC_WAKEUP_UMASK_MSK	0x4</span>
<span class="cp">#define COEX_FLAGS_ASSOC_WAKEUP_UMASK_MSK	0x8</span>
<span class="cp">#define COEX_FLAGS_COEX_ENABLE_MSK		0x80</span>

<span class="k">struct</span> <span class="n">iwm_coex_prio_table_cmd</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">coex_event</span> <span class="n">sta_prio</span><span class="p">[</span><span class="n">COEX_EVENTS_NUM</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cm">/* Coexistence definitions</span>
<span class="cm"> *</span>
<span class="cm"> * Constants to fill in the Priorities&#39; Tables</span>
<span class="cm"> * RP - Requested Priority</span>
<span class="cm"> * WP - Win Medium Priority: priority assigned when the contention has been won</span>
<span class="cm"> * FLAGS - Combination of COEX_EVT_FLAG_MEDIUM_FREE_NTFY_MSK and</span>
<span class="cm"> * 	   COEX_EVT_FLAG_MEDIUM_ACTV_NTFY_MSK</span>
<span class="cm"> */</span>

<span class="cp">#define COEX_UNASSOC_IDLE_FLAGS		0</span>
<span class="cp">#define COEX_UNASSOC_MANUAL_SCAN_FLAGS	(COEX_EVT_FLAG_MEDIUM_FREE_NTFY_MSK | \</span>
<span class="cp">					 COEX_EVT_FLAG_MEDIUM_ACTV_NTFY_MSK)</span>
<span class="cp">#define COEX_UNASSOC_AUTO_SCAN_FLAGS	(COEX_EVT_FLAG_MEDIUM_FREE_NTFY_MSK | \</span>
<span class="cp">					 COEX_EVT_FLAG_MEDIUM_ACTV_NTFY_MSK)</span>
<span class="cp">#define COEX_CALIBRATION_FLAGS		(COEX_EVT_FLAG_MEDIUM_FREE_NTFY_MSK | \</span>
<span class="cp">					 COEX_EVT_FLAG_MEDIUM_ACTV_NTFY_MSK)</span>
<span class="cp">#define COEX_PERIODIC_CALIBRATION_FLAGS	0</span>
<span class="cm">/* COEX_CONNECTION_ESTAB: we need DELAY_MEDIUM_FREE_NTFY to let WiMAX</span>
<span class="cm"> * disconnect from network. */</span>
<span class="cp">#define COEX_CONNECTION_ESTAB_FLAGS (COEX_EVT_FLAG_MEDIUM_FREE_NTFY_MSK | \</span>
<span class="cp">				     COEX_EVT_FLAG_MEDIUM_ACTV_NTFY_MSK | \</span>
<span class="cp">				     COEX_EVT_FLAG_DELAY_MEDIUM_FREE_NTFY_MSK)</span>
<span class="cp">#define COEX_ASSOCIATED_IDLE_FLAGS	0</span>
<span class="cp">#define COEX_ASSOC_MANUAL_SCAN_FLAGS	(COEX_EVT_FLAG_MEDIUM_FREE_NTFY_MSK | \</span>
<span class="cp">					 COEX_EVT_FLAG_MEDIUM_ACTV_NTFY_MSK)</span>
<span class="cp">#define COEX_ASSOC_AUTO_SCAN_FLAGS	(COEX_EVT_FLAG_MEDIUM_FREE_NTFY_MSK | \</span>
<span class="cp">					 COEX_EVT_FLAG_MEDIUM_ACTV_NTFY_MSK)</span>
<span class="cp">#define COEX_ASSOC_ACTIVE_LEVEL_FLAGS	0</span>
<span class="cp">#define COEX_RF_ON_FLAGS		0</span>
<span class="cp">#define COEX_RF_OFF_FLAGS		0</span>
<span class="cp">#define COEX_STAND_ALONE_DEBUG_FLAGS	(COEX_EVT_FLAG_MEDIUM_FREE_NTFY_MSK | \</span>
<span class="cp">					 COEX_EVT_FLAG_MEDIUM_ACTV_NTFY_MSK)</span>
<span class="cp">#define COEX_IPAN_ASSOC_LEVEL_FLAGS (COEX_EVT_FLAG_MEDIUM_FREE_NTFY_MSK | \</span>
<span class="cp">				     COEX_EVT_FLAG_MEDIUM_ACTV_NTFY_MSK | \</span>
<span class="cp">				     COEX_EVT_FLAG_DELAY_MEDIUM_FREE_NTFY_MSK)</span>
<span class="cp">#define COEX_RSRVD1_FLAGS		0</span>
<span class="cp">#define COEX_RSRVD2_FLAGS		0</span>
<span class="cm">/* XOR_RF_ON is the event wrapping all radio ownership. We need</span>
<span class="cm"> * DELAY_MEDIUM_FREE_NTFY to let WiMAX disconnect from network. */</span>
<span class="cp">#define COEX_XOR_RF_ON_FLAGS	    (COEX_EVT_FLAG_MEDIUM_FREE_NTFY_MSK | \</span>
<span class="cp">				     COEX_EVT_FLAG_MEDIUM_ACTV_NTFY_MSK | \</span>
<span class="cp">				     COEX_EVT_FLAG_DELAY_MEDIUM_FREE_NTFY_MSK)</span>

<span class="cm">/* CT kill config command */</span>
<span class="k">struct</span> <span class="n">iwm_ct_kill_cfg_cmd</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">exit_threshold</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">reserved</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">entry_threshold</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>


<span class="cm">/* LMAC OP CODES */</span>
<span class="cp">#define REPLY_PAD			0x0</span>
<span class="cp">#define REPLY_ALIVE			0x1</span>
<span class="cp">#define REPLY_ERROR			0x2</span>
<span class="cp">#define REPLY_ECHO			0x3</span>
<span class="cp">#define REPLY_HALT			0x6</span>

<span class="cm">/* RXON state commands */</span>
<span class="cp">#define REPLY_RX_ON			0x10</span>
<span class="cp">#define REPLY_RX_ON_ASSOC		0x11</span>
<span class="cp">#define REPLY_RX_OFF			0x12</span>
<span class="cp">#define REPLY_QOS_PARAM			0x13</span>
<span class="cp">#define REPLY_RX_ON_TIMING		0x14</span>
<span class="cp">#define REPLY_INTERNAL_QOS_PARAM	0x15</span>
<span class="cp">#define REPLY_RX_INT_TIMEOUT_CNFG	0x16</span>
<span class="cp">#define REPLY_NULL			0x17</span>

<span class="cm">/* Multi-Station support */</span>
<span class="cp">#define REPLY_ADD_STA			0x18</span>
<span class="cp">#define REPLY_REMOVE_STA		0x19</span>
<span class="cp">#define REPLY_RESET_ALL_STA		0x1a</span>

<span class="cm">/* RX, TX */</span>
<span class="cp">#define REPLY_ALM_RX			0x1b</span>
<span class="cp">#define REPLY_TX			0x1c</span>
<span class="cp">#define REPLY_TXFIFO_FLUSH		0x1e</span>

<span class="cm">/* MISC commands */</span>
<span class="cp">#define REPLY_MGMT_MCAST_KEY		0x1f</span>
<span class="cp">#define REPLY_WEPKEY			0x20</span>
<span class="cp">#define REPLY_INIT_IV			0x21</span>
<span class="cp">#define REPLY_WRITE_MIB			0x22</span>
<span class="cp">#define REPLY_READ_MIB			0x23</span>
<span class="cp">#define REPLY_RADIO_FE			0x24</span>
<span class="cp">#define REPLY_TXFIFO_CFG		0x25</span>
<span class="cp">#define REPLY_WRITE_READ		0x26</span>
<span class="cp">#define REPLY_INSTALL_SEC_KEY		0x27</span>


<span class="cp">#define REPLY_RATE_SCALE		0x47</span>
<span class="cp">#define REPLY_LEDS_CMD			0x48</span>
<span class="cp">#define REPLY_TX_LINK_QUALITY_CMD	0x4e</span>
<span class="cp">#define REPLY_ANA_MIB_OVERRIDE_CMD	0x4f</span>
<span class="cp">#define REPLY_WRITE2REG_CMD		0x50</span>

<span class="cm">/* winfi-wifi coexistence */</span>
<span class="cp">#define COEX_PRIORITY_TABLE_CMD		0x5a</span>
<span class="cp">#define COEX_MEDIUM_NOTIFICATION	0x5b</span>
<span class="cp">#define COEX_EVENT_CMD			0x5c</span>

<span class="cm">/* more Protocol and Protocol-test commands */</span>
<span class="cp">#define REPLY_MAX_SLEEP_TIME_CMD	0x61</span>
<span class="cp">#define CALIBRATION_CFG_CMD		0x65</span>
<span class="cp">#define CALIBRATION_RES_NOTIFICATION	0x66</span>
<span class="cp">#define CALIBRATION_COMPLETE_NOTIFICATION	0x67</span>

<span class="cm">/* Measurements */</span>
<span class="cp">#define REPLY_QUIET_CMD			0x71</span>
<span class="cp">#define REPLY_CHANNEL_SWITCH		0x72</span>
<span class="cp">#define CHANNEL_SWITCH_NOTIFICATION	0x73</span>

<span class="cp">#define REPLY_SPECTRUM_MEASUREMENT_CMD	0x74</span>
<span class="cp">#define SPECTRUM_MEASURE_NOTIFICATION	0x75</span>
<span class="cp">#define REPLY_MEASUREMENT_ABORT_CMD	0x76</span>

<span class="cm">/* Power Management */</span>
<span class="cp">#define POWER_TABLE_CMD			0x77</span>
<span class="cp">#define SAVE_RESTORE_ADDRESS_CMD		0x78</span>
<span class="cp">#define REPLY_WATERMARK_CMD		0x79</span>
<span class="cp">#define PM_DEBUG_STATISTIC_NOTIFIC	0x7B</span>
<span class="cp">#define PD_FLUSH_N_NOTIFICATION		0x7C</span>

<span class="cm">/* Scan commands and notifications */</span>
<span class="cp">#define REPLY_SCAN_REQUEST_CMD		0x80</span>
<span class="cp">#define REPLY_SCAN_ABORT_CMD		0x81</span>
<span class="cp">#define SCAN_START_NOTIFICATION		0x82</span>
<span class="cp">#define SCAN_RESULTS_NOTIFICATION	0x83</span>
<span class="cp">#define SCAN_COMPLETE_NOTIFICATION	0x84</span>

<span class="cm">/* Continuous TX commands */</span>
<span class="cp">#define REPLY_CONT_TX_CMD		0x85</span>
<span class="cp">#define END_OF_CONT_TX_NOTIFICATION	0x86</span>

<span class="cm">/* Timer/Eeprom commands */</span>
<span class="cp">#define TIMER_CMD			0x87</span>
<span class="cp">#define EEPROM_WRITE_CMD		0x88</span>

<span class="cm">/* PAPD commands */</span>
<span class="cp">#define FEEDBACK_REQUEST_NOTIFICATION	0x8b</span>
<span class="cp">#define REPLY_CW_CMD			0x8c</span>

<span class="cm">/* IBSS/AP commands Continue */</span>
<span class="cp">#define BEACON_NOTIFICATION		0x90</span>
<span class="cp">#define REPLY_TX_BEACON			0x91</span>
<span class="cp">#define REPLY_REQUEST_ATIM		0x93</span>
<span class="cp">#define WHO_IS_AWAKE_NOTIFICATION	0x94</span>
<span class="cp">#define TX_PWR_DBM_LIMIT_CMD		0x95</span>
<span class="cp">#define QUIET_NOTIFICATION		0x96</span>
<span class="cp">#define TX_PWR_TABLE_CMD		0x97</span>
<span class="cp">#define TX_ANT_CONFIGURATION_CMD	0x98</span>
<span class="cp">#define MEASURE_ABORT_NOTIFICATION	0x99</span>
<span class="cp">#define REPLY_CALIBRATION_TUNE		0x9a</span>

<span class="cm">/* bt config command */</span>
<span class="cp">#define REPLY_BT_CONFIG			0x9b</span>
<span class="cp">#define REPLY_STATISTICS_CMD		0x9c</span>
<span class="cp">#define STATISTICS_NOTIFICATION		0x9d</span>

<span class="cm">/* RF-KILL commands and notifications */</span>
<span class="cp">#define REPLY_CARD_STATE_CMD		0xa0</span>
<span class="cp">#define CARD_STATE_NOTIFICATION		0xa1</span>

<span class="cm">/* Missed beacons notification */</span>
<span class="cp">#define MISSED_BEACONS_NOTIFICATION	0xa2</span>
<span class="cp">#define MISSED_BEACONS_NOTIFICATION_TH_CMD	0xa3</span>

<span class="cp">#define REPLY_CT_KILL_CONFIG_CMD	0xa4</span>

<span class="cm">/* HD commands and notifications */</span>
<span class="cp">#define REPLY_HD_PARAMS_CMD		0xa6</span>
<span class="cp">#define HD_PARAMS_NOTIFICATION		0xa7</span>
<span class="cp">#define SENSITIVITY_CMD			0xa8</span>
<span class="cp">#define U_APSD_PARAMS_CMD		0xa9</span>
<span class="cp">#define NOISY_PLATFORM_CMD		0xaa</span>
<span class="cp">#define ILLEGAL_CMD			0xac</span>
<span class="cp">#define REPLY_PHY_CALIBRATION_CMD	0xb0</span>
<span class="cp">#define REPLAY_RX_GAIN_CALIB_CMD	0xb1</span>

<span class="cm">/* WiPAN commands */</span>
<span class="cp">#define REPLY_WIPAN_PARAMS_CMD		0xb2</span>
<span class="cp">#define REPLY_WIPAN_RX_ON_CMD		0xb3</span>
<span class="cp">#define REPLY_WIPAN_RX_ON_TIMING	0xb4</span>
<span class="cp">#define REPLY_WIPAN_TX_PWR_TABLE_CMD	0xb5</span>
<span class="cp">#define REPLY_WIPAN_RXON_ASSOC_CMD	0xb6</span>
<span class="cp">#define REPLY_WIPAN_QOS_PARAM		0xb7</span>
<span class="cp">#define WIPAN_REPLY_WEPKEY		0xb8</span>

<span class="cm">/* BeamForming commands */</span>
<span class="cp">#define BEAMFORMER_CFG_CMD		0xba</span>
<span class="cp">#define BEAMFORMEE_NOTIFICATION		0xbb</span>

<span class="cm">/* TGn new Commands */</span>
<span class="cp">#define REPLY_RX_PHY_CMD		0xc0</span>
<span class="cp">#define REPLY_RX_MPDU_CMD		0xc1</span>
<span class="cp">#define REPLY_MULTICAST_HASH		0xc2</span>
<span class="cp">#define REPLY_KDR_RX			0xc3</span>
<span class="cp">#define REPLY_RX_DSP_EXT_INFO		0xc4</span>
<span class="cp">#define REPLY_COMPRESSED_BA		0xc5</span>

<span class="cm">/* PNC commands */</span>
<span class="cp">#define PNC_CONFIG_CMD			0xc8</span>
<span class="cp">#define PNC_UPDATE_TABLE_CMD		0xc9</span>
<span class="cp">#define XVT_GENERAL_CTRL_CMD		0xca</span>
<span class="cp">#define REPLY_LEGACY_RADIO_FE		0xdd</span>

<span class="cm">/* WoWLAN commands */</span>
<span class="cp">#define WOWLAN_PATTERNS			0xe0</span>
<span class="cp">#define WOWLAN_WAKEUP_FILTER		0xe1</span>
<span class="cp">#define WOWLAN_TSC_RSC_PARAM		0xe2</span>
<span class="cp">#define WOWLAN_TKIP_PARAM		0xe3</span>
<span class="cp">#define WOWLAN_KEK_KCK_MATERIAL		0xe4</span>
<span class="cp">#define WOWLAN_GET_STATUSES		0xe5</span>
<span class="cp">#define WOWLAN_TX_POWER_PER_DB		0xe6</span>
<span class="cp">#define REPLY_WOWLAN_GET_STATUSES       WOWLAN_GET_STATUSES</span>

<span class="cp">#define REPLY_DEBUG_CMD			0xf0</span>
<span class="cp">#define REPLY_DSP_DEBUG_CMD		0xf1</span>
<span class="cp">#define REPLY_DEBUG_MONITOR_CMD		0xf2</span>
<span class="cp">#define REPLY_DEBUG_XVT_CMD		0xf3</span>
<span class="cp">#define REPLY_DEBUG_DC_CALIB		0xf4</span>
<span class="cp">#define REPLY_DYNAMIC_BP		0xf5</span>

<span class="cm">/* General purpose Commands */</span>
<span class="cp">#define REPLY_GP1_CMD			0xfa</span>
<span class="cp">#define REPLY_GP2_CMD			0xfb</span>
<span class="cp">#define REPLY_GP3_CMD			0xfc</span>
<span class="cp">#define REPLY_GP4_CMD			0xfd</span>
<span class="cp">#define REPLY_REPLAY_WRAPPER		0xfe</span>
<span class="cp">#define REPLY_FRAME_DURATION_CALC_CMD	0xff</span>

<span class="cp">#define LMAC_COMMAND_ID_MAX		0xff</span>
<span class="cp">#define LMAC_COMMAND_ID_NUM		(LMAC_COMMAND_ID_MAX + 1)</span>


<span class="cm">/* Calibration */</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">PHY_CALIBRATE_DC_CMD</span>			<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">PHY_CALIBRATE_LO_CMD</span>			<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">PHY_CALIBRATE_RX_BB_CMD</span>			<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">PHY_CALIBRATE_TX_IQ_CMD</span>			<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">PHY_CALIBRATE_RX_IQ_CMD</span>			<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">PHY_CALIBRATION_NOISE_CMD</span>		<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">PHY_CALIBRATE_AGC_TABLE_CMD</span>		<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">PHY_CALIBRATE_CRYSTAL_FRQ_CMD</span>		<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">PHY_CALIBRATE_OPCODES_NUM</span><span class="p">,</span>
	<span class="n">SHILOH_PHY_CALIBRATE_DC_CMD</span>		<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">SHILOH_PHY_CALIBRATE_LO_CMD</span>		<span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">SHILOH_PHY_CALIBRATE_RX_BB_CMD</span>		<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">SHILOH_PHY_CALIBRATE_TX_IQ_CMD</span>		<span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
	<span class="n">SHILOH_PHY_CALIBRATE_RX_IQ_CMD</span>		<span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">SHILOH_PHY_CALIBRATION_NOISE_CMD</span>	<span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
	<span class="n">SHILOH_PHY_CALIBRATE_AGC_TABLE_CMD</span>	<span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
	<span class="n">SHILOH_PHY_CALIBRATE_CRYSTAL_FRQ_CMD</span>	<span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
	<span class="n">SHILOH_PHY_CALIBRATE_BASE_BAND_CMD</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">SHILOH_PHY_CALIBRATE_TXIQ_PERIODIC_CMD</span>	<span class="o">=</span> <span class="mi">17</span><span class="p">,</span>
	<span class="n">CALIBRATION_CMD_NUM</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">CALIB_CFG_RX_BB_IDX</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">CALIB_CFG_DC_IDX</span>          <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">CALIB_CFG_LO_IDX</span>          <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">CALIB_CFG_TX_IQ_IDX</span>       <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">CALIB_CFG_RX_IQ_IDX</span>       <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">CALIB_CFG_NOISE_IDX</span>       <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">CALIB_CFG_CRYSTAL_IDX</span>     <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">CALIB_CFG_TEMPERATURE_IDX</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">CALIB_CFG_PAPD_IDX</span>        <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">CALIB_CFG_LAST_IDX</span>        <span class="o">=</span> <span class="n">CALIB_CFG_PAPD_IDX</span><span class="p">,</span>
	<span class="n">CALIB_CFG_MODULE_NUM</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define IWM_CALIB_MAP_INIT_MSK		0xFFFF</span>
<span class="cp">#define IWM_CALIB_MAP_PER_LMAC(m)	((m &amp; 0xFF0000) &gt;&gt; 16)</span>
<span class="cp">#define IWM_CALIB_MAP_PER_UMAC(m)	((m &amp; 0xFF000000) &gt;&gt; 24)</span>
<span class="cp">#define IWM_CALIB_OPCODE_TO_INDEX(op)   (op - PHY_CALIBRATE_OPCODES_NUM)</span>

<span class="k">struct</span> <span class="n">iwm_lmac_calib_hdr</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">first_grp</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">grp_num</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">all_data_valid</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define IWM_LMAC_CALIB_FREQ_GROUPS_NR	7</span>
<span class="cp">#define IWM_CALIB_FREQ_GROUPS_NR	5</span>
<span class="cp">#define IWM_CALIB_DC_MODES_NR		12</span>

<span class="k">struct</span> <span class="n">iwm_calib_rxiq_entry</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">ptam_postdist_ars</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">ptam_postdist_arc</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">iwm_calib_rxiq_group</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">iwm_calib_rxiq_entry</span> <span class="n">mode</span><span class="p">[</span><span class="n">IWM_CALIB_DC_MODES_NR</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">iwm_lmac_calib_rxiq</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">iwm_calib_rxiq_group</span> <span class="n">group</span><span class="p">[</span><span class="n">IWM_LMAC_CALIB_FREQ_GROUPS_NR</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">iwm_calib_rxiq</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">iwm_lmac_calib_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iwm_calib_rxiq_group</span> <span class="n">group</span><span class="p">[</span><span class="n">IWM_CALIB_FREQ_GROUPS_NR</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define LMAC_STA_ID_SEED	0x0f</span>
<span class="cp">#define LMAC_STA_ID_POS		0</span>

<span class="cp">#define LMAC_STA_COLOR_SEED	0x7</span>
<span class="cp">#define LMAC_STA_COLOR_POS	4</span>

<span class="k">struct</span> <span class="n">iwm_lmac_power_report</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">pa_status</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">pa_integ_res_A</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">pa_integ_res_B</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">pa_integ_res_C</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">iwm_lmac_tx_resp</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">frame_cnt</span><span class="p">;</span> <span class="cm">/* 1-no aggregation, greater then 1 - aggregation */</span>
	<span class="n">u8</span> <span class="n">bt_kill_cnt</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">retry_cnt</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">initial_tx_rate</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">wireless_media_time</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">iwm_lmac_power_report</span> <span class="n">power_report</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">tfd_info</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">seq_ctl</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">byte_cnt</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tlc_rate_info</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ra_tid</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">frame_ctl</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">status</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
