f | trace.h | s | 7.5K | 236 | Masanari Iida | standby24x7@gmail.com | 1328557987 |  | iwmc3200wifi: Fix typo in trace.h  Correct spelling "embeded" to "embedded" in drivers/net/wireless/iwmc3200wifi/trace.h  Signed-off-by: Masanari Iida <standby24x7@gmail.com> Acked-by: Samuel Ortiz <sameo@linux.intel.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | debug.h | s | 3.6K | 104 | John W. Linville | linville@tuxdriver.com | 1272918070 |  | iwmc3200wifi: fix busted iwm_debugfs_init definition  Looks like we missed removing the return statement in the non-CONFIG_IWM_DEBUG dummy implementation of iwm_debugfs_init...  Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | Makefile | g | 307B |  | Samuel Ortiz | sameo@linux.intel.com | 1271447222 |  | iwmc3200wifi: check sparse endianness annotations  Add -D__CHECK_ENDIAN__ to driver ccflags so that sparse will always check endianness by default.  Signed-off-by: Samuel Ortiz <sameo@linux.intel.com> Signed-off-by: Zhu Yi <yi.zhu@intel.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | fw.h | s | 3.4K | 90 | Zhu Yi | yi.zhu@intel.com | 1243015562 |  | iwmc3200wifi: Add new Intel Wireless Multicomm 802.11 driver  This driver supports Intel's full MAC wireless multicomm 802.11 hardware. Although the hardware is a 802.11agn device, we currently only support 802.11ag, in managed and ad-hoc mode (no AP mode for now).  Signed-off-by: Zhu Yi <yi.zhu@intel.com> Signed-off-by: Samuel Ortiz <samuel.ortiz@intel.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | tx.c | s | 16K | 431 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | eeprom.c | s | 6.5K | 185 | Tejun Heo | tj@kernel.org | 1269954152 |  | include cleanup: Update gfp.h and slab.h includes to prepare for breaking implicit slab.h inclusion from percpu.h  percpu.h is included by sched.h and module.h and thus ends up being included when building most .c files.  percpu.h includes slab.h which in turn includes gfp.h making everything defined by the two files universally available and complicating inclusion dependencies.  percpu.h -> slab.h dependency is about to be removed.  Prepare for this change by updating users of gfp and slab facilities include those headers directly instead of assuming availability.  As this conversion needs to touch large number of source files, the following script is used as the basis of conversion.    http://userweb.kernel.org/~tj/misc/slabh-sweep.py  The script does the followings.  * Scan files for gfp and slab usages and update includes such that   only the necessary includes are there.  ie. if only gfp is used,   gfp.h, if slab is used, slab.h.  * When the script inserts a new include, it looks at the include   blocks and try to put the new include such that its order conforms   to its surrounding.  It's put in the include block which contains   core kernel includes, in the same order that the rest are ordered -   alphabetical, Christmas tree, rev-Xmas-tree or at the end if there   doesn't seem to be any matching order.  * If the script can't find a place to put a new include (mostly   because the file doesn't have fitting include block), it prints out   an error message indicating which .h file needs to be added to the   file.  The conversion was done in the following steps.  1. The initial automatic conversion of all .c files updated slightly    over 4000 files, deleting around 700 includes and adding ~480 gfp.h    and ~3000 slab.h inclusions.  The script emitted errors for ~400    files.  2. Each error was manually checked.  Some didn't need the inclusion,    some needed manual addition while adding it to implementation .h or    embedding .c file was more appropriate for others.  This step added    inclusions to around 150 files.  3. The script was run again and the output was compared to the edits    from #2 to make sure no file was left behind.  4. Several build tests were done and a couple of problems were fixed.    e.g. lib/decompress_*.c used malloc/free() wrappers around slab    APIs requiring slab.h to be added manually.  5. The script was run on all .h files but without automatically    editing them as sprinkling gfp.h and slab.h inclusions around .h    files could easily lead to inclusion dependency hell.  Most gfp.h    inclusion directives were ignored as stuff from gfp.h was usually    wildly available and often used in preprocessor macros.  Each    slab.h inclusion directive was examined and added manually as    necessary.  6. percpu.h was updated not to include slab.h.  7. Build test were done on the following configurations and failures    were fixed.  CONFIG_GCOV_KERNEL was turned off for all tests (as my    distributed build env didn't work with gcov compiles) and a few    more options had to be turned off depending on archs to make things    build (like ipr on powerpc/64 which failed due to missing writeq).     * x86 and x86_64 UP and SMP allmodconfig and a custom test config.    * powerpc and powerpc64 SMP allmodconfig    * sparc and sparc64 SMP allmodconfig    * ia64 SMP allmodconfig    * s390 SMP allmodconfig    * alpha SMP allmodconfig    * um on x86_64 SMP allmodconfig  8. percpu.h modifications were reverted so that it could be applied as    a separate patch and serve as bisection point.  Given the fact that I had only a couple of failures from tests on step 6, I'm fairly confident about the coverage of this conversion patch. If there is a breakage, it's likely to be something in one of the arch headers which should be easily discoverable easily on most builds of the specific arch.  Signed-off-by: Tejun Heo <tj@kernel.org> Guess-its-ok-by: Christoph Lameter <cl@linux-foundation.org> Cc: Ingo Molnar <mingo@redhat.com> Cc: Lee Schermerhorn <Lee.Schermerhorn@hp.com>
f | fw.c | s | 11K | 346 | Joe Perches | joe@perches.com | 1307309620 |  | drivers/net: Remove unnecessary semicolons  Semicolons are not necessary after switch/while/for/if braces so remove them.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | sdio.h | s | 2.3K | 55 | Tomas Winkler | tomas.winkler@intel.com | 1248661547 |  | imwc3200: move iwmc3200 SDIO ids to sdio_ids.h  1. add intel's sdio vendor id to sdio_ids.h 2. move iwmc3200 sdio devices' ids to sdio_ids.h  Signed-off-by: Tomas Winkler <tomas.winkler@intel.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | cfg80211.c | s | 21K | 719 | Dan Carpenter | dan.carpenter@oracle.com | 1320785639 |  | iwmc3200wifi: add some more range checks  My previous patch added a check to get_key() but missed a couple other places which need range checks.  The problem here is that wifi drivers have different numbers of keys. The lower levels assume that they can have up to 4 default keys and 2 management keys but this driver only has the default keys so we could go past the end of the ->keys[] array.  Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com> Acked-by: Samuel Ortiz <sameo@linux.intel.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | lmac.h | s | 13K | 413 | Eric Dumazet | eric.dumazet@gmail.com | 1275560303 |  | drivers/net: use __packed annotation  cleanup patch.  Use new __packed annotation in drivers/net/  Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | hal.c | s | 14K | 386 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | eeprom.h | s | 4.4K | 110 | Samuel Ortiz | sameo@linux.intel.com | 1259438682 |  | iwmc3200wifi: Update wireless_mode with eeprom values  The iwmc3200wifi eeprom contains information about the available PHYs on the chip. We should update our wireless_mode setting and profile according to it.  Signed-off-by: Samuel Ortiz <sameo@linux.intel.com> Signed-off-by: Zhu Yi <yi.zhu@intel.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | sdio.c | s | 12K | 412 | Stephen Boyd | sboyd@codeaurora.org | 1333664750 |  | simple_open: automatically convert to simple_open()  Many users of debugfs copy the implementation of default_open() when they want to support a custom read/write function op.  This leads to a proliferation of the default_open() implementation across the entire tree.  Now that the common implementation has been consolidated into libfs we can replace all the users of this function with simple_open().  This replacement was done with the following semantic patch:  <smpl> @ open @ identifier open_f != simple_open; identifier i, f; @@ -int open_f(struct inode *i, struct file *f) -{ ( -if (i->i_private) -f->private_data = i->i_private; || -f->private_data = i->i_private; ) -return 0; -}  @ has_open depends on open @ identifier fops; identifier open.open_f; @@ struct file_operations fops = { ... -.open = open_f, +.open = simple_open, ... }; </smpl>  [akpm@linux-foundation.org: checkpatch fixes] Signed-off-by: Stephen Boyd <sboyd@codeaurora.org> Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Cc: Julia Lawall <Julia.Lawall@lip6.fr> Acked-by: Ingo Molnar <mingo@elte.hu> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | umac.h | s | 24K | 665 | Eric Dumazet | eric.dumazet@gmail.com | 1275560303 |  | drivers/net: use __packed annotation  cleanup patch.  Use new __packed annotation in drivers/net/  Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bus.h | s | 1.6K | 48 | John W. Linville | linville@tuxdriver.com | 1272912397 |  | iwmc3200wifi: cleanup unneeded debugfs error handling  "iwl: cleanup: remove unneeded error handling" missed the one in if_sdio_debugfs_init().  I don't think we even need to check -ENODEV ourselves because if DEBUG_FS is not compiled in, all the debugfs utility functions will become no-op.  Reported-by: Dan Carpenter <error27@gmail.com> Signed-off-by: Zhu Yi <yi.zhu@intel.com> Acked-by: Dan Carpenter <error27@gmail.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | cfg80211.h | s | 1.1K | 28 | Zhu Yi | yi.zhu@intel.com | 1243015562 |  | iwmc3200wifi: Add new Intel Wireless Multicomm 802.11 driver  This driver supports Intel's full MAC wireless multicomm 802.11 hardware. Although the hardware is a 802.11agn device, we currently only support 802.11ag, in managed and ad-hoc mode (no AP mode for now).  Signed-off-by: Zhu Yi <yi.zhu@intel.com> Signed-off-by: Samuel Ortiz <samuel.ortiz@intel.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | debugfs.c | s | 12K | 404 | Stephen Boyd | sboyd@codeaurora.org | 1333664750 |  | simple_open: automatically convert to simple_open()  Many users of debugfs copy the implementation of default_open() when they want to support a custom read/write function op.  This leads to a proliferation of the default_open() implementation across the entire tree.  Now that the common implementation has been consolidated into libfs we can replace all the users of this function with simple_open().  This replacement was done with the following semantic patch:  <smpl> @ open @ identifier open_f != simple_open; identifier i, f; @@ -int open_f(struct inode *i, struct file *f) -{ ( -if (i->i_private) -f->private_data = i->i_private; || -f->private_data = i->i_private; ) -return 0; -}  @ has_open depends on open @ identifier fops; identifier open.open_f; @@ struct file_operations fops = { ... -.open = open_f, +.open = simple_open, ... }; </smpl>  [akpm@linux-foundation.org: checkpatch fixes] Signed-off-by: Stephen Boyd <sboyd@codeaurora.org> Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Cc: Julia Lawall <Julia.Lawall@lip6.fr> Acked-by: Ingo Molnar <mingo@elte.hu> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | rx.c | s | 47K | 1405 | Rusty Russell | rusty@rustcorp.com.au | 1324351649 |  | net: fix assignment of 0/1 to bool variables.  DaveM said:    Please, this kind of stuff rots forever and not using bool properly    drives me crazy.  Joe Perches <joe@perches.com> gave me the spatch script:  	@@ 	bool b; 	@@ 	-b = 0 	+b = false 	@@ 	bool b; 	@@ 	-b = 1 	+b = true  I merely installed coccinelle, read the documentation and took credit.  Signed-off-by: Rusty Russell <rusty@rustcorp.com.au> Signed-off-by: David S. Miller <davem@davemloft.net>
f | Kconfig | g | 1.3K |  | Arnd Bergmann | arnd@arndb.de | 1335036527 |  | drivers/net: iwmc3200 depends on EXPERIMENTAL  The iwmc3200 driver selects other code in Kconfig that depends on EXPERIMENTAL. Kconfig warns about this when CONFIG_EXPERIMENTAL is not already set, so logically, these options should also be marked experimental or promoted to stable.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Mathieu Poirier <mathieu.poirier@linaro.org> Signed-off-by: David S. Miller <davem@davemloft.net>
f | netdev.c | s | 4.4K | 160 | Axel Lin | axel.lin@gmail.com | 1294951604 |  | iwmc3200wifi: Return proper error for iwm_if_alloc  In the case of alloc_netdev_mq failure and kmalloc failure, current implementation returns ERR_PTR(0).  As a result, the caller of iwm_if_alloc does not catch the error by IS_ERR macro. Fix it by setting proper error code for ret variable in the failure cases.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | hal.h | s | 7.0K | 199 | Zhu Yi | yi.zhu@intel.com | 1268258979 |  | iwmc3200wifi: increase concatenated buffer  Increase concatenated buffer from 8K to 32K to get better performance.  Signed-off-by: Zhu Yi <yi.zhu@intel.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | iwm.h | s | 9.4K | 303 | Eric Dumazet | eric.dumazet@gmail.com | 1275560303 |  | drivers/net: use __packed annotation  cleanup patch.  Use new __packed annotation in drivers/net/  Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | trace.c | s | 64B | 3 | Zhu Yi | yi.zhu@intel.com | 1268258978 |  | iwmc3200wifi: add ftrace event tracing support  Add event tracer for iwmc3200wifi driver. When enabled, all the commands and responses between the driver and firmware (also including Tx/Rx frames) will be recorded in the ftrace ring buffer.  Signed-off-by: Zhu Yi <yi.zhu@intel.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | rx.h | s | 2.1K | 53 | Zhu Yi | yi.zhu@intel.com | 1243015562 |  | iwmc3200wifi: Add new Intel Wireless Multicomm 802.11 driver  This driver supports Intel's full MAC wireless multicomm 802.11 hardware. Although the hardware is a 802.11agn device, we currently only support 802.11ag, in managed and ad-hoc mode (no AP mode for now).  Signed-off-by: Zhu Yi <yi.zhu@intel.com> Signed-off-by: Samuel Ortiz <samuel.ortiz@intel.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | main.c | s | 20K | 687 | Rusty Russell | rusty@rustcorp.com.au | 1324351649 |  | module_param: make bool parameters really bool (net & drivers/net)  module_param(bool) used to counter-intuitively take an int.  In fddd5201 (mid-2009) we allowed bool or int/unsigned int using a messy trick.  It's time to remove the int/unsigned int option.  For this version it'll simply give a warning, but it'll break next kernel version.  (Thanks to Joe Perches for suggesting coccinelle for 0/1 -> true/false).  Cc: "David S. Miller" <davem@davemloft.net> Cc: netdev@vger.kernel.org Signed-off-by: Rusty Russell <rusty@rustcorp.com.au> Signed-off-by: David S. Miller <davem@davemloft.net>
f | commands.c | s | 27K | 805 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103869 |  | drivers/net: Add moduleparam.h to drivers as required.  These files were using moduleparam infrastructure, but were not including anything for it -- which is fine when module.h is being implicitly included in all files, but that is going away.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | commands.h | s | 14K | 452 | Eric Dumazet | eric.dumazet@gmail.com | 1275560303 |  | drivers/net: use __packed annotation  cleanup patch.  Use new __packed annotation in drivers/net/  Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
