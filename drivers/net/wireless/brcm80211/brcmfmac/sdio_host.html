<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › wireless › brcm80211 › brcmfmac › sdio_host.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>sdio_host.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2010 Broadcom Corporation</span>
<span class="cm"> *</span>
<span class="cm"> * Permission to use, copy, modify, and/or distribute this software for any</span>
<span class="cm"> * purpose with or without fee is hereby granted, provided that the above</span>
<span class="cm"> * copyright notice and this permission notice appear in all copies.</span>
<span class="cm"> *</span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span>
<span class="cm"> * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</span>
<span class="cm"> * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY</span>
<span class="cm"> * SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span>
<span class="cm"> * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION</span>
<span class="cm"> * OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN</span>
<span class="cm"> * CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef	_BRCM_SDH_H_</span>
<span class="cp">#define	_BRCM_SDH_H_</span>

<span class="cp">#include &lt;linux/skbuff.h&gt;</span>

<span class="cp">#define SDIO_FUNC_0		0</span>
<span class="cp">#define SDIO_FUNC_1		1</span>
<span class="cp">#define SDIO_FUNC_2		2</span>

<span class="cp">#define SDIOD_FBR_SIZE		0x100</span>

<span class="cm">/* io_en */</span>
<span class="cp">#define SDIO_FUNC_ENABLE_1	0x02</span>
<span class="cp">#define SDIO_FUNC_ENABLE_2	0x04</span>

<span class="cm">/* io_rdys */</span>
<span class="cp">#define SDIO_FUNC_READY_1	0x02</span>
<span class="cp">#define SDIO_FUNC_READY_2	0x04</span>

<span class="cm">/* intr_status */</span>
<span class="cp">#define INTR_STATUS_FUNC1	0x2</span>
<span class="cp">#define INTR_STATUS_FUNC2	0x4</span>

<span class="cm">/* Maximum number of I/O funcs */</span>
<span class="cp">#define SDIOD_MAX_IOFUNCS	7</span>

<span class="cm">/* mask of register map */</span>
<span class="cp">#define REG_F0_REG_MASK		0x7FF</span>
<span class="cp">#define REG_F1_MISC_MASK	0x1FFFF</span>

<span class="cm">/* as of sdiod rev 0, supports 3 functions */</span>
<span class="cp">#define SBSDIO_NUM_FUNCTION		3</span>

<span class="cm">/* function 0 vendor specific CCCR registers */</span>
<span class="cp">#define SDIO_CCCR_BRCM_SEPINT		0xf2</span>

<span class="cp">#define  SDIO_SEPINT_MASK		0x01</span>
<span class="cp">#define  SDIO_SEPINT_OE			0x02</span>
<span class="cp">#define  SDIO_SEPINT_ACT_HI		0x04</span>

<span class="cm">/* function 1 miscellaneous registers */</span>

<span class="cm">/* sprom command and status */</span>
<span class="cp">#define SBSDIO_SPROM_CS			0x10000</span>
<span class="cm">/* sprom info register */</span>
<span class="cp">#define SBSDIO_SPROM_INFO		0x10001</span>
<span class="cm">/* sprom indirect access data byte 0 */</span>
<span class="cp">#define SBSDIO_SPROM_DATA_LOW		0x10002</span>
<span class="cm">/* sprom indirect access data byte 1 */</span>
<span class="cp">#define SBSDIO_SPROM_DATA_HIGH		0x10003</span>
<span class="cm">/* sprom indirect access addr byte 0 */</span>
<span class="cp">#define SBSDIO_SPROM_ADDR_LOW		0x10004</span>
<span class="cm">/* sprom indirect access addr byte 0 */</span>
<span class="cp">#define SBSDIO_SPROM_ADDR_HIGH		0x10005</span>
<span class="cm">/* xtal_pu (gpio) output */</span>
<span class="cp">#define SBSDIO_CHIP_CTRL_DATA		0x10006</span>
<span class="cm">/* xtal_pu (gpio) enable */</span>
<span class="cp">#define SBSDIO_CHIP_CTRL_EN		0x10007</span>
<span class="cm">/* rev &lt; 7, watermark for sdio device */</span>
<span class="cp">#define SBSDIO_WATERMARK		0x10008</span>
<span class="cm">/* control busy signal generation */</span>
<span class="cp">#define SBSDIO_DEVICE_CTL		0x10009</span>

<span class="cm">/* SB Address Window Low (b15) */</span>
<span class="cp">#define SBSDIO_FUNC1_SBADDRLOW		0x1000A</span>
<span class="cm">/* SB Address Window Mid (b23:b16) */</span>
<span class="cp">#define SBSDIO_FUNC1_SBADDRMID		0x1000B</span>
<span class="cm">/* SB Address Window High (b31:b24)    */</span>
<span class="cp">#define SBSDIO_FUNC1_SBADDRHIGH		0x1000C</span>
<span class="cm">/* Frame Control (frame term/abort) */</span>
<span class="cp">#define SBSDIO_FUNC1_FRAMECTRL		0x1000D</span>
<span class="cm">/* ChipClockCSR (ALP/HT ctl/status) */</span>
<span class="cp">#define SBSDIO_FUNC1_CHIPCLKCSR		0x1000E</span>
<span class="cm">/* SdioPullUp (on cmd, d0-d2) */</span>
<span class="cp">#define SBSDIO_FUNC1_SDIOPULLUP		0x1000F</span>
<span class="cm">/* Write Frame Byte Count Low */</span>
<span class="cp">#define SBSDIO_FUNC1_WFRAMEBCLO		0x10019</span>
<span class="cm">/* Write Frame Byte Count High */</span>
<span class="cp">#define SBSDIO_FUNC1_WFRAMEBCHI		0x1001A</span>
<span class="cm">/* Read Frame Byte Count Low */</span>
<span class="cp">#define SBSDIO_FUNC1_RFRAMEBCLO		0x1001B</span>
<span class="cm">/* Read Frame Byte Count High */</span>
<span class="cp">#define SBSDIO_FUNC1_RFRAMEBCHI		0x1001C</span>

<span class="cp">#define SBSDIO_FUNC1_MISC_REG_START	0x10000	</span><span class="cm">/* f1 misc register start */</span><span class="cp"></span>
<span class="cp">#define SBSDIO_FUNC1_MISC_REG_LIMIT	0x1001C	</span><span class="cm">/* f1 misc register end */</span><span class="cp"></span>

<span class="cm">/* function 1 OCP space */</span>

<span class="cm">/* sb offset addr is &lt;= 15 bits, 32k */</span>
<span class="cp">#define SBSDIO_SB_OFT_ADDR_MASK		0x07FFF</span>
<span class="cp">#define SBSDIO_SB_OFT_ADDR_LIMIT	0x08000</span>
<span class="cm">/* with b15, maps to 32-bit SB access */</span>
<span class="cp">#define SBSDIO_SB_ACCESS_2_4B_FLAG	0x08000</span>

<span class="cm">/* valid bits in SBSDIO_FUNC1_SBADDRxxx regs */</span>

<span class="cp">#define SBSDIO_SBADDRLOW_MASK		0x80	</span><span class="cm">/* Valid bits in SBADDRLOW */</span><span class="cp"></span>
<span class="cp">#define SBSDIO_SBADDRMID_MASK		0xff	</span><span class="cm">/* Valid bits in SBADDRMID */</span><span class="cp"></span>
<span class="cp">#define SBSDIO_SBADDRHIGH_MASK		0xffU	</span><span class="cm">/* Valid bits in SBADDRHIGH */</span><span class="cp"></span>
<span class="cm">/* Address bits from SBADDR regs */</span>
<span class="cp">#define SBSDIO_SBWINDOW_MASK		0xffff8000</span>

<span class="cp">#define SDIOH_READ              0	</span><span class="cm">/* Read request */</span><span class="cp"></span>
<span class="cp">#define SDIOH_WRITE             1	</span><span class="cm">/* Write request */</span><span class="cp"></span>

<span class="cp">#define SDIOH_DATA_FIX          0	</span><span class="cm">/* Fixed addressing */</span><span class="cp"></span>
<span class="cp">#define SDIOH_DATA_INC          1	</span><span class="cm">/* Incremental addressing */</span><span class="cp"></span>

<span class="cm">/* internal return code */</span>
<span class="cp">#define SUCCESS	0</span>
<span class="cp">#define ERROR	1</span>

<span class="cm">/* Packet alignment for most efficient SDIO (can change based on platform) */</span>
<span class="cp">#define BRCMF_SDALIGN	(1 &lt;&lt; 6)</span>

<span class="cm">/* watchdog polling interval in ms */</span>
<span class="cp">#define BRCMF_WD_POLL_MS	10</span>

<span class="k">struct</span> <span class="n">brcmf_sdreg</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">func</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">value</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">brcmf_sdio</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">sdio_func</span> <span class="o">*</span><span class="n">func</span><span class="p">[</span><span class="n">SDIO_MAX_FUNCS</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">num_funcs</span><span class="p">;</span>			<span class="cm">/* Supported funcs on client */</span>
	<span class="n">u32</span> <span class="n">func_cis_ptr</span><span class="p">[</span><span class="n">SDIOD_MAX_IOFUNCS</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">sbwad</span><span class="p">;</span>			<span class="cm">/* Save backplane window address */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">bus</span><span class="p">;</span>
	<span class="n">atomic_t</span> <span class="n">suspend</span><span class="p">;</span>		<span class="cm">/* suspend flag */</span>
	<span class="n">wait_queue_head_t</span> <span class="n">request_byte_wait</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">request_word_wait</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">request_chain_wait</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">request_buffer_wait</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">brcmf_bus</span> <span class="o">*</span><span class="n">bus_if</span><span class="p">;</span>
<span class="cp">#ifdef CONFIG_BRCMFMAC_SDIO_OOB</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">irq</span><span class="p">;</span>		<span class="cm">/* oob interrupt number */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">irq_flags</span><span class="p">;</span>	<span class="cm">/* board specific oob flags */</span>
	<span class="n">bool</span> <span class="n">irq_en</span><span class="p">;</span>			<span class="cm">/* irq enable flags */</span>
	<span class="n">spinlock_t</span> <span class="n">irq_en_lock</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">irq_wake</span><span class="p">;</span>			<span class="cm">/* irq wake enable flags */</span>
<span class="cp">#endif		</span><span class="cm">/* CONFIG_BRCMFMAC_SDIO_OOB */</span><span class="cp"></span>
<span class="p">};</span>

<span class="cm">/* Register/deregister interrupt handler. */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcmf_sdio_intr_register</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcmf_sdio_intr_unregister</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">);</span>

<span class="cm">/* sdio device register access interface */</span>
<span class="k">extern</span> <span class="n">u8</span> <span class="n">brcmf_sdio_regrb</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">ret</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">brcmf_sdio_regrl</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">ret</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcmf_sdio_regwb</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span>
			     <span class="n">u8</span> <span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">ret</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcmf_sdio_regwl</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span>
			     <span class="n">u32</span> <span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">ret</span><span class="p">);</span>

<span class="cm">/* Buffer transfer to/from device (client) core via cmd53.</span>
<span class="cm"> *   fn:       function number</span>
<span class="cm"> *   addr:     backplane address (i.e. &gt;= regsva from attach)</span>
<span class="cm"> *   flags:    backplane width, address increment, sync/async</span>
<span class="cm"> *   buf:      pointer to memory data buffer</span>
<span class="cm"> *   nbytes:   number of bytes to transfer to/from buf</span>
<span class="cm"> *   pkt:      pointer to packet associated with buf (if any)</span>
<span class="cm"> *   complete: callback function for command completion (async only)</span>
<span class="cm"> *   handle:   handle for completion callback (first arg in callback)</span>
<span class="cm"> * Returns 0 or error code.</span>
<span class="cm"> * NOTE: Async operation is not currently supported.</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">int</span>
<span class="n">brcmf_sdcard_send_pkt</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span> <span class="n">uint</span> <span class="n">fn</span><span class="p">,</span>
		      <span class="n">uint</span> <span class="n">flags</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">pkt</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>
<span class="n">brcmf_sdcard_send_buf</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span> <span class="n">uint</span> <span class="n">fn</span><span class="p">,</span>
		      <span class="n">uint</span> <span class="n">flags</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">uint</span> <span class="n">nbytes</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span>
<span class="n">brcmf_sdcard_recv_pkt</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span> <span class="n">uint</span> <span class="n">fn</span><span class="p">,</span>
		      <span class="n">uint</span> <span class="n">flags</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">pkt</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>
<span class="n">brcmf_sdcard_recv_buf</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span> <span class="n">uint</span> <span class="n">fn</span><span class="p">,</span>
		      <span class="n">uint</span> <span class="n">flags</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">uint</span> <span class="n">nbytes</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>
<span class="n">brcmf_sdcard_recv_chain</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span> <span class="n">uint</span> <span class="n">fn</span><span class="p">,</span>
			<span class="n">uint</span> <span class="n">flags</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="o">*</span><span class="n">pktq</span><span class="p">);</span>

<span class="cm">/* Flags bits */</span>

<span class="cm">/* Four-byte target (backplane) width (vs. two-byte) */</span>
<span class="cp">#define SDIO_REQ_4BYTE	0x1</span>
<span class="cm">/* Fixed address (FIFO) (vs. incrementing address) */</span>
<span class="cp">#define SDIO_REQ_FIXED	0x2</span>
<span class="cm">/* Async request (vs. sync request) */</span>
<span class="cp">#define SDIO_REQ_ASYNC	0x4</span>

<span class="cm">/* Read/write to memory block (F1, no FIFO) via CMD53 (sync only).</span>
<span class="cm"> *   rw:       read or write (0/1)</span>
<span class="cm"> *   addr:     direct SDIO address</span>
<span class="cm"> *   buf:      pointer to memory data buffer</span>
<span class="cm"> *   nbytes:   number of bytes to transfer to/from buf</span>
<span class="cm"> * Returns 0 or error code.</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcmf_sdcard_rwdata</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span> <span class="n">uint</span> <span class="n">rw</span><span class="p">,</span>
			       <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">uint</span> <span class="n">nbytes</span><span class="p">);</span>

<span class="cm">/* Issue an abort to the specified function */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcmf_sdcard_abort</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span> <span class="n">uint</span> <span class="n">fn</span><span class="p">);</span>

<span class="cm">/* platform specific/high level functions */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcmf_sdio_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcmf_sdio_remove</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcmf_sdcard_set_sbaddr_window</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span>
					  <span class="n">u32</span> <span class="n">address</span><span class="p">);</span>

<span class="cm">/* attach, return handler on success, NULL if failed.</span>
<span class="cm"> *  The handler shall be provided by all subsequent calls. No local cache</span>
<span class="cm"> *  cfghdl points to the starting address of pci device mapped memory</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcmf_sdioh_attach</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcmf_sdioh_detach</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">);</span>

<span class="cm">/* read or write one byte using cmd52 */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcmf_sdioh_request_byte</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span> <span class="n">uint</span> <span class="n">rw</span><span class="p">,</span>
				    <span class="n">uint</span> <span class="n">fnc</span><span class="p">,</span> <span class="n">uint</span> <span class="n">addr</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">byte</span><span class="p">);</span>

<span class="cm">/* read or write 2/4 bytes using cmd53 */</span>
<span class="k">extern</span> <span class="kt">int</span>
<span class="n">brcmf_sdioh_request_word</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span>
			 <span class="n">uint</span> <span class="n">rw</span><span class="p">,</span> <span class="n">uint</span> <span class="n">fnc</span><span class="p">,</span> <span class="n">uint</span> <span class="n">addr</span><span class="p">,</span>
			 <span class="n">u32</span> <span class="o">*</span><span class="n">word</span><span class="p">,</span> <span class="n">uint</span> <span class="n">nbyte</span><span class="p">);</span>

<span class="cm">/* read or write any buffer using cmd53 */</span>
<span class="k">extern</span> <span class="kt">int</span>
<span class="n">brcmf_sdioh_request_buffer</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span>
			   <span class="n">uint</span> <span class="n">fix_inc</span><span class="p">,</span> <span class="n">uint</span> <span class="n">rw</span><span class="p">,</span> <span class="n">uint</span> <span class="n">fnc_num</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span>
			   <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">pkt</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>
<span class="n">brcmf_sdioh_request_chain</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span> <span class="n">uint</span> <span class="n">fix_inc</span><span class="p">,</span>
			  <span class="n">uint</span> <span class="n">write</span><span class="p">,</span> <span class="n">uint</span> <span class="n">func</span><span class="p">,</span> <span class="n">uint</span> <span class="n">addr</span><span class="p">,</span>
			  <span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="o">*</span><span class="n">pktq</span><span class="p">);</span>

<span class="cm">/* Watchdog timer interface for pm ops */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcmf_sdio_wdtmr_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">,</span>
				    <span class="n">bool</span> <span class="n">enable</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="o">*</span><span class="n">brcmf_sdbrcm_probe</span><span class="p">(</span><span class="n">u32</span> <span class="n">regsva</span><span class="p">,</span> <span class="k">struct</span> <span class="n">brcmf_sdio_dev</span> <span class="o">*</span><span class="n">sdiodev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcmf_sdbrcm_disconnect</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">ptr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcmf_sdbrcm_isr</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcmf_sdbrcm_wd_timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcmf_sdio</span> <span class="o">*</span><span class="n">bus</span><span class="p">,</span> <span class="n">uint</span> <span class="n">wdtick</span><span class="p">);</span>
<span class="cp">#endif				</span><span class="cm">/* _BRCM_SDH_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
