<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › wireless › brcm80211 › brcmsmac › pub.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>pub.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2010 Broadcom Corporation</span>
<span class="cm"> *</span>
<span class="cm"> * Permission to use, copy, modify, and/or distribute this software for any</span>
<span class="cm"> * purpose with or without fee is hereby granted, provided that the above</span>
<span class="cm"> * copyright notice and this permission notice appear in all copies.</span>
<span class="cm"> *</span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span>
<span class="cm"> * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</span>
<span class="cm"> * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY</span>
<span class="cm"> * SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span>
<span class="cm"> * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION</span>
<span class="cm"> * OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN</span>
<span class="cm"> * CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _BRCM_PUB_H_</span>
<span class="cp">#define _BRCM_PUB_H_</span>

<span class="cp">#include &lt;linux/bcma/bcma.h&gt;</span>
<span class="cp">#include &lt;brcmu_wifi.h&gt;</span>
<span class="cp">#include &quot;types.h&quot;</span>
<span class="cp">#include &quot;defs.h&quot;</span>

<span class="cp">#define	BRCMS_NUMRATES	16	</span><span class="cm">/* max # of rates in a rateset */</span><span class="cp"></span>

<span class="cm">/* phy types */</span>
<span class="cp">#define	PHY_TYPE_A	0	</span><span class="cm">/* Phy type A */</span><span class="cp"></span>
<span class="cp">#define	PHY_TYPE_G	2	</span><span class="cm">/* Phy type G */</span><span class="cp"></span>
<span class="cp">#define	PHY_TYPE_N	4	</span><span class="cm">/* Phy type N */</span><span class="cp"></span>
<span class="cp">#define	PHY_TYPE_LP	5	</span><span class="cm">/* Phy type Low Power A/B/G */</span><span class="cp"></span>
<span class="cp">#define	PHY_TYPE_SSN	6	</span><span class="cm">/* Phy type Single Stream N */</span><span class="cp"></span>
<span class="cp">#define	PHY_TYPE_LCN	8	</span><span class="cm">/* Phy type Single Stream N */</span><span class="cp"></span>
<span class="cp">#define	PHY_TYPE_LCNXN	9	</span><span class="cm">/* Phy type 2-stream N */</span><span class="cp"></span>
<span class="cp">#define	PHY_TYPE_HT	7	</span><span class="cm">/* Phy type 3-Stream N */</span><span class="cp"></span>

<span class="cm">/* bw */</span>
<span class="cp">#define BRCMS_10_MHZ	10	</span><span class="cm">/* 10Mhz nphy channel bandwidth */</span><span class="cp"></span>
<span class="cp">#define BRCMS_20_MHZ	20	</span><span class="cm">/* 20Mhz nphy channel bandwidth */</span><span class="cp"></span>
<span class="cp">#define BRCMS_40_MHZ	40	</span><span class="cm">/* 40Mhz nphy channel bandwidth */</span><span class="cp"></span>

<span class="cp">#define	BRCMS_RSSI_MINVAL	-200	</span><span class="cm">/* Low value, e.g. for forcing roam */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_RSSI_NO_SIGNAL	-91	</span><span class="cm">/* NDIS RSSI link quality cutoffs */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_RSSI_VERY_LOW	-80	</span><span class="cm">/* Very low quality cutoffs */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_RSSI_LOW		-70	</span><span class="cm">/* Low quality cutoffs */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_RSSI_GOOD		-68	</span><span class="cm">/* Good quality cutoffs */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_RSSI_VERY_GOOD	-58	</span><span class="cm">/* Very good quality cutoffs */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_RSSI_EXCELLENT	-57	</span><span class="cm">/* Excellent quality cutoffs */</span><span class="cp"></span>

<span class="cm">/* a large TX Power as an init value to factor out of min() calculations,</span>
<span class="cm"> * keep low enough to fit in an s8, units are .25 dBm</span>
<span class="cm"> */</span>
<span class="cp">#define BRCMS_TXPWR_MAX		(127)	</span><span class="cm">/* ~32 dBm = 1,500 mW */</span><span class="cp"></span>

<span class="cm">/* rate related definitions */</span>
<span class="cp">#define	BRCMS_RATE_FLAG	0x80	</span><span class="cm">/* Flag to indicate it is a basic rate */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_RATE_MASK	0x7f	</span><span class="cm">/* Rate value mask w/o basic rate flag */</span><span class="cp"></span>

<span class="cm">/* legacy rx Antenna diversity for SISO rates */</span>
<span class="cp">#define	ANT_RX_DIV_FORCE_0	0	</span><span class="cm">/* Use antenna 0 */</span><span class="cp"></span>
<span class="cp">#define	ANT_RX_DIV_FORCE_1	1	</span><span class="cm">/* Use antenna 1 */</span><span class="cp"></span>
<span class="cp">#define	ANT_RX_DIV_START_1	2	</span><span class="cm">/* Choose starting with 1 */</span><span class="cp"></span>
<span class="cp">#define	ANT_RX_DIV_START_0	3	</span><span class="cm">/* Choose starting with 0 */</span><span class="cp"></span>
<span class="cp">#define	ANT_RX_DIV_ENABLE	3	</span><span class="cm">/* APHY bbConfig Enable RX Diversity */</span><span class="cp"></span>
<span class="cm">/* default antdiv setting */</span>
<span class="cp">#define ANT_RX_DIV_DEF		ANT_RX_DIV_START_0</span>

<span class="cm">/* legacy rx Antenna diversity for SISO rates */</span>
<span class="cm">/* Tx on antenna 0, &quot;legacy term Main&quot; */</span>
<span class="cp">#define ANT_TX_FORCE_0		0</span>
<span class="cm">/* Tx on antenna 1, &quot;legacy term Aux&quot; */</span>
<span class="cp">#define ANT_TX_FORCE_1		1</span>
<span class="cm">/* Tx on phy&#39;s last good Rx antenna */</span>
<span class="cp">#define ANT_TX_LAST_RX		3</span>
<span class="cm">/* driver&#39;s default tx antenna setting */</span>
<span class="cp">#define ANT_TX_DEF		3</span>

<span class="cm">/* Tx Chain values */</span>
<span class="cm">/* def bitmap of txchain */</span>
<span class="cp">#define TXCHAIN_DEF		0x1</span>
<span class="cm">/* default bitmap of tx chains for nphy */</span>
<span class="cp">#define TXCHAIN_DEF_NPHY	0x3</span>
<span class="cm">/* default bitmap of tx chains for nphy */</span>
<span class="cp">#define TXCHAIN_DEF_HTPHY	0x7</span>
<span class="cm">/* def bitmap of rxchain */</span>
<span class="cp">#define RXCHAIN_DEF		0x1</span>
<span class="cm">/* default bitmap of rx chains for nphy */</span>
<span class="cp">#define RXCHAIN_DEF_NPHY	0x3</span>
<span class="cm">/* default bitmap of rx chains for nphy */</span>
<span class="cp">#define RXCHAIN_DEF_HTPHY	0x7</span>
<span class="cm">/* no antenna switch */</span>
<span class="cp">#define ANTSWITCH_NONE		0</span>
<span class="cm">/* antenna switch on 4321CB2, 2of3 */</span>
<span class="cp">#define ANTSWITCH_TYPE_1	1</span>
<span class="cm">/* antenna switch on 4321MPCI, 2of3 */</span>
<span class="cp">#define ANTSWITCH_TYPE_2	2</span>
<span class="cm">/* antenna switch on 4322, 2of3 */</span>
<span class="cp">#define ANTSWITCH_TYPE_3	3</span>

<span class="cp">#define RXBUFSZ		PKTBUFSZ</span>

<span class="cp">#define MAX_STREAMS_SUPPORTED	4	</span><span class="cm">/* max number of streams supported */</span><span class="cp"></span>

<span class="k">struct</span> <span class="n">brcm_rateset</span> <span class="p">{</span>
	<span class="cm">/* # rates in this set */</span>
	<span class="n">u32</span> <span class="n">count</span><span class="p">;</span>
	<span class="cm">/* rates in 500kbps units w/hi bit set if basic */</span>
	<span class="n">u8</span> <span class="n">rates</span><span class="p">[</span><span class="n">WL_NUMRATES</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">brcms_c_rateset</span> <span class="p">{</span>
	<span class="n">uint</span> <span class="n">count</span><span class="p">;</span>		<span class="cm">/* number of rates in rates[] */</span>
	 <span class="cm">/* rates in 500kbps units w/hi bit set if basic */</span>
	<span class="n">u8</span> <span class="n">rates</span><span class="p">[</span><span class="n">BRCMS_NUMRATES</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">htphy_membership</span><span class="p">;</span>	<span class="cm">/* HT PHY Membership */</span>
	<span class="n">u8</span> <span class="n">mcs</span><span class="p">[</span><span class="n">MCSSET_LEN</span><span class="p">];</span>	<span class="cm">/* supported mcs index bit map */</span>
<span class="p">};</span>

<span class="cm">/* All the HT-specific default advertised capabilities (including AMPDU)</span>
<span class="cm"> * should be grouped here at one place</span>
<span class="cm"> */</span>
<span class="cp">#define AMPDU_DEF_MPDU_DENSITY	6	</span><span class="cm">/* default mpdu density (110 ==&gt; 4us) */</span><span class="cp"></span>

<span class="cm">/* wlc internal bss_info */</span>
<span class="k">struct</span> <span class="n">brcms_bss_info</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">BSSID</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>	<span class="cm">/* network BSSID */</span>
	<span class="n">u16</span> <span class="n">flags</span><span class="p">;</span>		<span class="cm">/* flags for internal attributes */</span>
	<span class="n">u8</span> <span class="n">SSID_len</span><span class="p">;</span>		<span class="cm">/* the length of SSID */</span>
	<span class="n">u8</span> <span class="n">SSID</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>		<span class="cm">/* SSID string */</span>
	<span class="n">s16</span> <span class="n">RSSI</span><span class="p">;</span>		<span class="cm">/* receive signal strength (in dBm) */</span>
	<span class="n">s16</span> <span class="n">SNR</span><span class="p">;</span>		<span class="cm">/* receive signal SNR in dB */</span>
	<span class="n">u16</span> <span class="n">beacon_period</span><span class="p">;</span>	<span class="cm">/* units are Kusec */</span>
	<span class="n">u16</span> <span class="n">chanspec</span><span class="p">;</span>	<span class="cm">/* Channel num, bw, ctrl_sb and band */</span>
	<span class="k">struct</span> <span class="n">brcms_c_rateset</span> <span class="n">rateset</span><span class="p">;</span>	<span class="cm">/* supported rates */</span>
<span class="p">};</span>

<span class="cp">#define MAC80211_PROMISC_BCNS	(1 &lt;&lt; 0)</span>
<span class="cp">#define MAC80211_SCAN		(1 &lt;&lt; 1)</span>

<span class="cm">/*</span>
<span class="cm"> * Public portion of common driver state structure.</span>
<span class="cm"> * The wlc handle points at this.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">brcms_pub</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ieee80211_hw</span> <span class="o">*</span><span class="n">ieee_hw</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">scb_ampdu</span> <span class="o">*</span><span class="n">global_ampdu</span><span class="p">;</span>
	<span class="n">uint</span> <span class="n">mac80211_state</span><span class="p">;</span>
	<span class="n">uint</span> <span class="n">unit</span><span class="p">;</span>		<span class="cm">/* device instance number */</span>
	<span class="n">uint</span> <span class="n">corerev</span><span class="p">;</span>		<span class="cm">/* core revision */</span>
	<span class="k">struct</span> <span class="n">si_pub</span> <span class="o">*</span><span class="n">sih</span><span class="p">;</span>	<span class="cm">/* SI handle (cookie for siutils calls) */</span>
	<span class="n">bool</span> <span class="n">up</span><span class="p">;</span>		<span class="cm">/* interface up and running */</span>
	<span class="n">bool</span> <span class="n">hw_off</span><span class="p">;</span>		<span class="cm">/* HW is off */</span>
	<span class="n">bool</span> <span class="n">hw_up</span><span class="p">;</span>		<span class="cm">/* one time hw up/down */</span>
	<span class="n">bool</span> <span class="n">_piomode</span><span class="p">;</span>		<span class="cm">/* true if pio mode */</span>
	<span class="n">uint</span> <span class="n">_nbands</span><span class="p">;</span>		<span class="cm">/* # bands supported */</span>
	<span class="n">uint</span> <span class="n">now</span><span class="p">;</span>		<span class="cm">/* # elapsed seconds */</span>

	<span class="n">bool</span> <span class="n">delayed_down</span><span class="p">;</span>	<span class="cm">/* down delayed */</span>
	<span class="n">bool</span> <span class="n">associated</span><span class="p">;</span>	<span class="cm">/* true:part of [I]BSS, false: not */</span>
	<span class="cm">/* (union of stas_associated, aps_associated) */</span>
	<span class="n">bool</span> <span class="n">_ampdu</span><span class="p">;</span>		<span class="cm">/* ampdu enabled or not */</span>
	<span class="n">u8</span> <span class="n">_n_enab</span><span class="p">;</span>		<span class="cm">/* bitmap of 11N + HT support */</span>

	<span class="n">u8</span> <span class="n">cur_etheraddr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>	<span class="cm">/* our local ethernet address */</span>

	<span class="kt">int</span> <span class="n">bcmerror</span><span class="p">;</span>		<span class="cm">/* last bcm error */</span>

	<span class="n">u32</span> <span class="n">radio_disabled</span><span class="p">;</span>	<span class="cm">/* bit vector for radio disabled reasons */</span>

	<span class="n">u16</span> <span class="n">boardrev</span><span class="p">;</span>	<span class="cm">/* version # of particular board */</span>
	<span class="n">u8</span> <span class="n">sromrev</span><span class="p">;</span>		<span class="cm">/* version # of the srom */</span>
	<span class="kt">char</span> <span class="n">srom_ccode</span><span class="p">[</span><span class="n">BRCM_CNTRY_BUF_SZ</span><span class="p">];</span>	<span class="cm">/* Country Code in SROM */</span>
	<span class="n">u32</span> <span class="n">boardflags</span><span class="p">;</span>	<span class="cm">/* Board specific flags from srom */</span>
	<span class="n">u32</span> <span class="n">boardflags2</span><span class="p">;</span>	<span class="cm">/* More board flags if sromrev &gt;= 4 */</span>
	<span class="n">bool</span> <span class="n">phy_11ncapable</span><span class="p">;</span>	<span class="cm">/* the PHY/HW is capable of 802.11N */</span>

	<span class="k">struct</span> <span class="n">wl_cnt</span> <span class="o">*</span><span class="n">_cnt</span><span class="p">;</span>	<span class="cm">/* low-level counters in driver */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">wlc_par_id</span> <span class="p">{</span>
	<span class="n">IOV_MPC</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">IOV_RTSTHRESH</span><span class="p">,</span>
	<span class="n">IOV_QTXPOWER</span><span class="p">,</span>
	<span class="n">IOV_BCN_LI_BCN</span>		<span class="cm">/* Beacon listen interval in # of beacons */</span>
<span class="p">};</span>

<span class="cm">/***********************************************</span>
<span class="cm"> * Feature-related macros to optimize out code *</span>
<span class="cm"> * *********************************************</span>
<span class="cm"> */</span>

<span class="cp">#define ENAB_1x1	0x01</span>
<span class="cp">#define ENAB_2x2	0x02</span>
<span class="cp">#define ENAB_3x3	0x04</span>
<span class="cp">#define ENAB_4x4	0x08</span>
<span class="cp">#define SUPPORT_11N	(ENAB_1x1|ENAB_2x2)</span>
<span class="cp">#define SUPPORT_HT	(ENAB_1x1|ENAB_2x2|ENAB_3x3)</span>

<span class="cm">/* WL11N Support */</span>
<span class="cp">#define AMPDU_AGG_HOST	1</span>

<span class="cm">/* pri is priority encoded in the packet. This maps the Packet priority to</span>
<span class="cm"> * enqueue precedence as defined in wlc_prec_map</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="k">const</span> <span class="n">u8</span> <span class="n">wlc_prio2prec_map</span><span class="p">[];</span>
<span class="cp">#define BRCMS_PRIO_TO_PREC(pri)	wlc_prio2prec_map[(pri) &amp; 7]</span>

<span class="cp">#define	BRCMS_PREC_COUNT	16	</span><span class="cm">/* Max precedence level implemented */</span><span class="cp"></span>

<span class="cm">/* Mask to describe all precedence levels */</span>
<span class="cp">#define BRCMS_PREC_BMP_ALL		MAXBITVAL(BRCMS_PREC_COUNT)</span>

<span class="cm">/*</span>
<span class="cm"> * This maps priority to one precedence higher - Used by PS-Poll response</span>
<span class="cm"> * packets to simulate enqueue-at-head operation, but still maintain the</span>
<span class="cm"> * order on the queue</span>
<span class="cm"> */</span>
<span class="cp">#define BRCMS_PRIO_TO_HI_PREC(pri)	min(BRCMS_PRIO_TO_PREC(pri) + 1,\</span>
<span class="cp">					    BRCMS_PREC_COUNT - 1)</span>

<span class="cm">/* Define a bitmap of precedences comprised by each AC */</span>
<span class="cp">#define BRCMS_PREC_BMP_AC_BE	(NBITVAL(BRCMS_PRIO_TO_PREC(PRIO_8021D_BE)) | \</span>
<span class="cp">			NBITVAL(BRCMS_PRIO_TO_HI_PREC(PRIO_8021D_BE)) |	\</span>
<span class="cp">			NBITVAL(BRCMS_PRIO_TO_PREC(PRIO_8021D_EE)) |	\</span>
<span class="cp">			NBITVAL(BRCMS_PRIO_TO_HI_PREC(PRIO_8021D_EE)))</span>
<span class="cp">#define BRCMS_PREC_BMP_AC_BK	(NBITVAL(BRCMS_PRIO_TO_PREC(PRIO_8021D_BK)) | \</span>
<span class="cp">			NBITVAL(BRCMS_PRIO_TO_HI_PREC(PRIO_8021D_BK)) |	\</span>
<span class="cp">			NBITVAL(BRCMS_PRIO_TO_PREC(PRIO_8021D_NONE)) |	\</span>
<span class="cp">			NBITVAL(BRCMS_PRIO_TO_HI_PREC(PRIO_8021D_NONE)))</span>
<span class="cp">#define BRCMS_PREC_BMP_AC_VI	(NBITVAL(BRCMS_PRIO_TO_PREC(PRIO_8021D_CL)) | \</span>
<span class="cp">			NBITVAL(BRCMS_PRIO_TO_HI_PREC(PRIO_8021D_CL)) |	\</span>
<span class="cp">			NBITVAL(BRCMS_PRIO_TO_PREC(PRIO_8021D_VI)) |	\</span>
<span class="cp">			NBITVAL(BRCMS_PRIO_TO_HI_PREC(PRIO_8021D_VI)))</span>
<span class="cp">#define BRCMS_PREC_BMP_AC_VO	(NBITVAL(BRCMS_PRIO_TO_PREC(PRIO_8021D_VO)) | \</span>
<span class="cp">			NBITVAL(BRCMS_PRIO_TO_HI_PREC(PRIO_8021D_VO)) |	\</span>
<span class="cp">			NBITVAL(BRCMS_PRIO_TO_PREC(PRIO_8021D_NC)) |	\</span>
<span class="cp">			NBITVAL(BRCMS_PRIO_TO_HI_PREC(PRIO_8021D_NC)))</span>

<span class="cm">/* network protection config */</span>
<span class="cp">#define	BRCMS_PROT_G_SPEC		1	</span><span class="cm">/* SPEC g protection */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_PROT_G_OVR		2	</span><span class="cm">/* SPEC g prot override */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_PROT_G_USER		3	</span><span class="cm">/* gmode specified by user */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_PROT_OVERLAP	4	</span><span class="cm">/* overlap */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_PROT_N_USER		10	</span><span class="cm">/* nmode specified by user */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_PROT_N_CFG		11	</span><span class="cm">/* n protection */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_PROT_N_CFG_OVR	12	</span><span class="cm">/* n protection override */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_PROT_N_NONGF	13	</span><span class="cm">/* non-GF protection */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_PROT_N_NONGF_OVR	14	</span><span class="cm">/* non-GF protection override */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_PROT_N_PAM_OVR	15	</span><span class="cm">/* n preamble override */</span><span class="cp"></span>
<span class="cp">#define	BRCMS_PROT_N_OBSS		16	</span><span class="cm">/* non-HT OBSS present */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * 54g modes (basic bits may still be overridden)</span>
<span class="cm"> *</span>
<span class="cm"> * GMODE_LEGACY_B</span>
<span class="cm"> *	Rateset: 1b, 2b, 5.5, 11</span>
<span class="cm"> *	Preamble: Long</span>
<span class="cm"> *	Shortslot: Off</span>
<span class="cm"> * GMODE_AUTO</span>
<span class="cm"> *	Rateset: 1b, 2b, 5.5b, 11b, 18, 24, 36, 54</span>
<span class="cm"> *	Extended Rateset: 6, 9, 12, 48</span>
<span class="cm"> *	Preamble: Long</span>
<span class="cm"> *	Shortslot: Auto</span>
<span class="cm"> * GMODE_ONLY</span>
<span class="cm"> *	Rateset: 1b, 2b, 5.5b, 11b, 18, 24b, 36, 54</span>
<span class="cm"> *	Extended Rateset: 6b, 9, 12b, 48</span>
<span class="cm"> *	Preamble: Short required</span>
<span class="cm"> *	Shortslot: Auto</span>
<span class="cm"> * GMODE_B_DEFERRED</span>
<span class="cm"> *	Rateset: 1b, 2b, 5.5b, 11b, 18, 24, 36, 54</span>
<span class="cm"> *	Extended Rateset: 6, 9, 12, 48</span>
<span class="cm"> *	Preamble: Long</span>
<span class="cm"> *	Shortslot: On</span>
<span class="cm"> * GMODE_PERFORMANCE</span>
<span class="cm"> *	Rateset: 1b, 2b, 5.5b, 6b, 9, 11b, 12b, 18, 24b, 36, 48, 54</span>
<span class="cm"> *	Preamble: Short required</span>
<span class="cm"> *	Shortslot: On and required</span>
<span class="cm"> * GMODE_LRS</span>
<span class="cm"> *	Rateset: 1b, 2b, 5.5b, 11b</span>
<span class="cm"> *	Extended Rateset: 6, 9, 12, 18, 24, 36, 48, 54</span>
<span class="cm"> *	Preamble: Long</span>
<span class="cm"> *	Shortslot: Auto</span>
<span class="cm"> */</span>
<span class="cp">#define GMODE_LEGACY_B		0</span>
<span class="cp">#define GMODE_AUTO		1</span>
<span class="cp">#define GMODE_ONLY		2</span>
<span class="cp">#define GMODE_B_DEFERRED	3</span>
<span class="cp">#define GMODE_PERFORMANCE	4</span>
<span class="cp">#define GMODE_LRS		5</span>
<span class="cp">#define GMODE_MAX		6</span>

<span class="cm">/* MCS values greater than this enable multiple streams */</span>
<span class="cp">#define HIGHEST_SINGLE_STREAM_MCS	7</span>

<span class="cp">#define	MAXBANDS		2	</span><span class="cm">/* Maximum #of bands */</span><span class="cp"></span>

<span class="cm">/* max number of antenna configurations */</span>
<span class="cp">#define ANT_SELCFG_MAX		4</span>

<span class="k">struct</span> <span class="n">brcms_antselcfg</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">ant_config</span><span class="p">[</span><span class="n">ANT_SELCFG_MAX</span><span class="p">];</span>	<span class="cm">/* antenna configuration */</span>
	<span class="n">u8</span> <span class="n">num_antcfg</span><span class="p">;</span>	<span class="cm">/* number of available antenna configurations */</span>
<span class="p">};</span>

<span class="cm">/* common functions for every port */</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span>
<span class="n">brcms_c_attach</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_info</span> <span class="o">*</span><span class="n">wl</span><span class="p">,</span> <span class="k">struct</span> <span class="n">bcma_device</span> <span class="o">*</span><span class="n">core</span><span class="p">,</span> <span class="n">uint</span> <span class="n">unit</span><span class="p">,</span>
	       <span class="n">bool</span> <span class="n">piomode</span><span class="p">,</span> <span class="n">uint</span> <span class="o">*</span><span class="n">perr</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">uint</span> <span class="n">brcms_c_detach</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcms_c_up</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">uint</span> <span class="n">brcms_c_down</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>

<span class="k">extern</span> <span class="n">bool</span> <span class="n">brcms_c_chipmatch</span><span class="p">(</span><span class="n">u16</span> <span class="n">vendor</span><span class="p">,</span> <span class="n">u16</span> <span class="n">device</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="n">bool</span> <span class="n">mute_tx</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_intrson</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">brcms_c_intrsoff</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_intrsrestore</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="n">u32</span> <span class="n">macintmask</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">brcms_c_intrsupd</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">brcms_c_isr</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="n">bool</span> <span class="o">*</span><span class="n">wantdpc</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">brcms_c_dpc</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="n">bool</span> <span class="n">bounded</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_sendpkt_mac80211</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">sdu</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">ieee80211_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">brcms_c_aggregatable</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="n">u8</span> <span class="n">tid</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_protection_upd</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="n">uint</span> <span class="n">idx</span><span class="p">,</span>
				   <span class="kt">int</span> <span class="n">val</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcms_c_get_header_len</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_set_addrmatch</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span>
				  <span class="kt">int</span> <span class="n">match_reg_offset</span><span class="p">,</span>
				  <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">addr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_wme_setparams</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="n">u16</span> <span class="n">aci</span><span class="p">,</span>
			      <span class="k">const</span> <span class="k">struct</span> <span class="n">ieee80211_tx_queue_params</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span>
			      <span class="n">bool</span> <span class="n">suspend</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">brcms_pub</span> <span class="o">*</span><span class="n">brcms_c_pub</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_ampdu_flush</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">ieee80211_sta</span> <span class="o">*</span><span class="n">sta</span><span class="p">,</span> <span class="n">u16</span> <span class="n">tid</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_ampdu_tx_operational</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="n">u8</span> <span class="n">tid</span><span class="p">,</span>
					 <span class="n">u8</span> <span class="n">ba_wsize</span><span class="p">,</span> <span class="n">uint</span> <span class="n">max_rx_ampdu_bytes</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcms_c_module_register</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_pub</span> <span class="o">*</span><span class="n">pub</span><span class="p">,</span>
				   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">,</span> <span class="k">struct</span> <span class="n">brcms_info</span> <span class="o">*</span><span class="n">hdl</span><span class="p">,</span>
				   <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">down_fn</span><span class="p">)(</span><span class="kt">void</span> <span class="o">*</span><span class="n">handle</span><span class="p">));</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcms_c_module_unregister</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_pub</span> <span class="o">*</span><span class="n">pub</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">brcms_info</span> <span class="o">*</span><span class="n">hdl</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_suspend_mac_and_wait</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_enable_mac</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_associate_upd</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="n">bool</span> <span class="n">state</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_scan_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_scan_stop</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcms_c_get_curband</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_wait_for_tx_completion</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span>
					   <span class="n">bool</span> <span class="n">drop</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcms_c_set_channel</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="n">u16</span> <span class="n">channel</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcms_c_set_rate_limit</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="n">u16</span> <span class="n">srl</span><span class="p">,</span> <span class="n">u16</span> <span class="n">lrl</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_get_current_rateset</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">brcm_rateset</span> <span class="o">*</span><span class="n">currs</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcms_c_set_rateset</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span>
					<span class="k">struct</span> <span class="n">brcm_rateset</span> <span class="o">*</span><span class="n">rs</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcms_c_set_beacon_period</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="n">u16</span> <span class="n">period</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u16</span> <span class="n">brcms_c_get_phy_type</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="kt">int</span> <span class="n">phyidx</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_set_shortslot_override</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span>
				    <span class="n">s8</span> <span class="n">sslot_override</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_set_beacon_listen_interval</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span>
					<span class="n">u8</span> <span class="n">interval</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcms_c_set_tx_power</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="kt">int</span> <span class="n">txpwr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">brcms_c_get_tx_power</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">brcms_c_check_radio_disabled</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">brcms_c_mute</span><span class="p">(</span><span class="k">struct</span> <span class="n">brcms_c_info</span> <span class="o">*</span><span class="n">wlc</span><span class="p">,</span> <span class="n">bool</span> <span class="n">on</span><span class="p">);</span>

<span class="cp">#endif				</span><span class="cm">/* _BRCM_PUB_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
