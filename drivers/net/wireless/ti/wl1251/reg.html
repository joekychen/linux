<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › wireless › ti › wl1251 › reg.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>reg.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This file is part of wl12xx</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (c) 1998-2007 Texas Instruments Incorporated</span>
<span class="cm"> * Copyright (C) 2008 Nokia Corporation</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Public License</span>
<span class="cm"> * version 2 as published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful, but</span>
<span class="cm"> * WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="cm"> * General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA</span>
<span class="cm"> * 02110-1301 USA</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __REG_H__</span>
<span class="cp">#define __REG_H__</span>

<span class="cp">#include &lt;linux/bitops.h&gt;</span>

<span class="cp">#define REGISTERS_BASE 0x00300000</span>
<span class="cp">#define DRPW_BASE      0x00310000</span>

<span class="cp">#define REGISTERS_DOWN_SIZE 0x00008800</span>
<span class="cp">#define REGISTERS_WORK_SIZE 0x0000b000</span>

<span class="cp">#define HW_ACCESS_ELP_CTRL_REG_ADDR         0x1FFFC</span>

<span class="cm">/* ELP register commands */</span>
<span class="cp">#define ELPCTRL_WAKE_UP             0x1</span>
<span class="cp">#define ELPCTRL_WAKE_UP_WLAN_READY  0x5</span>
<span class="cp">#define ELPCTRL_SLEEP               0x0</span>
<span class="cm">/* ELP WLAN_READY bit */</span>
<span class="cp">#define ELPCTRL_WLAN_READY          0x2</span>

<span class="cm">/* Device Configuration registers*/</span>
<span class="cp">#define SOR_CFG                        (REGISTERS_BASE + 0x0800)</span>
<span class="cp">#define ECPU_CTRL                      (REGISTERS_BASE + 0x0804)</span>
<span class="cp">#define HI_CFG                         (REGISTERS_BASE + 0x0808)</span>

<span class="cm">/* EEPROM registers */</span>
<span class="cp">#define EE_START                       (REGISTERS_BASE + 0x080C)</span>
<span class="cp">#define EE_CTL                         (REGISTERS_BASE + 0x2000)</span>
<span class="cp">#define EE_DATA                        (REGISTERS_BASE + 0x2004)</span>
<span class="cp">#define EE_ADDR                        (REGISTERS_BASE + 0x2008)</span>

<span class="cp">#define EE_CTL_READ                   2</span>

<span class="cp">#define CHIP_ID_B                      (REGISTERS_BASE + 0x5674)</span>

<span class="cp">#define CHIP_ID_1251_PG10	           (0x7010101)</span>
<span class="cp">#define CHIP_ID_1251_PG11	           (0x7020101)</span>
<span class="cp">#define CHIP_ID_1251_PG12	           (0x7030101)</span>

<span class="cp">#define ENABLE                         (REGISTERS_BASE + 0x5450)</span>

<span class="cm">/* Power Management registers */</span>
<span class="cp">#define ELP_CFG_MODE                   (REGISTERS_BASE + 0x5804)</span>
<span class="cp">#define ELP_CMD                        (REGISTERS_BASE + 0x5808)</span>
<span class="cp">#define PLL_CAL_TIME                   (REGISTERS_BASE + 0x5810)</span>
<span class="cp">#define CLK_REQ_TIME                   (REGISTERS_BASE + 0x5814)</span>
<span class="cp">#define CLK_BUF_TIME                   (REGISTERS_BASE + 0x5818)</span>

<span class="cp">#define CFG_PLL_SYNC_CNT               (REGISTERS_BASE + 0x5820)</span>

<span class="cm">/* Scratch Pad registers*/</span>
<span class="cp">#define SCR_PAD0                       (REGISTERS_BASE + 0x5608)</span>
<span class="cp">#define SCR_PAD1                       (REGISTERS_BASE + 0x560C)</span>
<span class="cp">#define SCR_PAD2                       (REGISTERS_BASE + 0x5610)</span>
<span class="cp">#define SCR_PAD3                       (REGISTERS_BASE + 0x5614)</span>
<span class="cp">#define SCR_PAD4                       (REGISTERS_BASE + 0x5618)</span>
<span class="cp">#define SCR_PAD4_SET                   (REGISTERS_BASE + 0x561C)</span>
<span class="cp">#define SCR_PAD4_CLR                   (REGISTERS_BASE + 0x5620)</span>
<span class="cp">#define SCR_PAD5                       (REGISTERS_BASE + 0x5624)</span>
<span class="cp">#define SCR_PAD5_SET                   (REGISTERS_BASE + 0x5628)</span>
<span class="cp">#define SCR_PAD5_CLR                   (REGISTERS_BASE + 0x562C)</span>
<span class="cp">#define SCR_PAD6                       (REGISTERS_BASE + 0x5630)</span>
<span class="cp">#define SCR_PAD7                       (REGISTERS_BASE + 0x5634)</span>
<span class="cp">#define SCR_PAD8                       (REGISTERS_BASE + 0x5638)</span>
<span class="cp">#define SCR_PAD9                       (REGISTERS_BASE + 0x563C)</span>

<span class="cm">/* Spare registers*/</span>
<span class="cp">#define SPARE_A1                       (REGISTERS_BASE + 0x0994)</span>
<span class="cp">#define SPARE_A2                       (REGISTERS_BASE + 0x0998)</span>
<span class="cp">#define SPARE_A3                       (REGISTERS_BASE + 0x099C)</span>
<span class="cp">#define SPARE_A4                       (REGISTERS_BASE + 0x09A0)</span>
<span class="cp">#define SPARE_A5                       (REGISTERS_BASE + 0x09A4)</span>
<span class="cp">#define SPARE_A6                       (REGISTERS_BASE + 0x09A8)</span>
<span class="cp">#define SPARE_A7                       (REGISTERS_BASE + 0x09AC)</span>
<span class="cp">#define SPARE_A8                       (REGISTERS_BASE + 0x09B0)</span>
<span class="cp">#define SPARE_B1                       (REGISTERS_BASE + 0x5420)</span>
<span class="cp">#define SPARE_B2                       (REGISTERS_BASE + 0x5424)</span>
<span class="cp">#define SPARE_B3                       (REGISTERS_BASE + 0x5428)</span>
<span class="cp">#define SPARE_B4                       (REGISTERS_BASE + 0x542C)</span>
<span class="cp">#define SPARE_B5                       (REGISTERS_BASE + 0x5430)</span>
<span class="cp">#define SPARE_B6                       (REGISTERS_BASE + 0x5434)</span>
<span class="cp">#define SPARE_B7                       (REGISTERS_BASE + 0x5438)</span>
<span class="cp">#define SPARE_B8                       (REGISTERS_BASE + 0x543C)</span>

<span class="k">enum</span> <span class="n">wl12xx_acx_int_reg</span> <span class="p">{</span>
	<span class="n">ACX_REG_INTERRUPT_TRIG</span><span class="p">,</span>
	<span class="n">ACX_REG_INTERRUPT_TRIG_H</span><span class="p">,</span>

<span class="cm">/*=============================================</span>
<span class="cm">  Host Interrupt Mask Register - 32bit (RW)</span>
<span class="cm">  ------------------------------------------</span>
<span class="cm">  Setting a bit in this register masks the</span>
<span class="cm">  corresponding interrupt to the host.</span>
<span class="cm">  0 - RX0		- Rx first dubble buffer Data Interrupt</span>
<span class="cm">  1 - TXD		- Tx Data Interrupt</span>
<span class="cm">  2 - TXXFR		- Tx Transfer Interrupt</span>
<span class="cm">  3 - RX1		- Rx second dubble buffer Data Interrupt</span>
<span class="cm">  4 - RXXFR		- Rx Transfer Interrupt</span>
<span class="cm">  5 - EVENT_A	- Event Mailbox interrupt</span>
<span class="cm">  6 - EVENT_B	- Event Mailbox interrupt</span>
<span class="cm">  7 - WNONHST	- Wake On Host Interrupt</span>
<span class="cm">  8 - TRACE_A	- Debug Trace interrupt</span>
<span class="cm">  9 - TRACE_B	- Debug Trace interrupt</span>
<span class="cm"> 10 - CDCMP		- Command Complete Interrupt</span>
<span class="cm"> 11 -</span>
<span class="cm"> 12 -</span>
<span class="cm"> 13 -</span>
<span class="cm"> 14 - ICOMP		- Initialization Complete Interrupt</span>
<span class="cm"> 16 - SG SE		- Soft Gemini - Sense enable interrupt</span>
<span class="cm"> 17 - SG SD		- Soft Gemini - Sense disable interrupt</span>
<span class="cm"> 18 -			-</span>
<span class="cm"> 19 -			-</span>
<span class="cm"> 20 -			-</span>
<span class="cm"> 21-			-</span>
<span class="cm"> Default: 0x0001</span>
<span class="cm">*==============================================*/</span>
	<span class="n">ACX_REG_INTERRUPT_MASK</span><span class="p">,</span>

<span class="cm">/*=============================================</span>
<span class="cm">  Host Interrupt Mask Set 16bit, (Write only)</span>
<span class="cm">  ------------------------------------------</span>
<span class="cm"> Setting a bit in this register sets</span>
<span class="cm"> the corresponding bin in ACX_HINT_MASK register</span>
<span class="cm"> without effecting the mask</span>
<span class="cm"> state of other bits (0 = no effect).</span>
<span class="cm">==============================================*/</span>
	<span class="n">ACX_REG_HINT_MASK_SET</span><span class="p">,</span>

<span class="cm">/*=============================================</span>
<span class="cm">  Host Interrupt Mask Clear 16bit,(Write only)</span>
<span class="cm">  ------------------------------------------</span>
<span class="cm"> Setting a bit in this register clears</span>
<span class="cm"> the corresponding bin in ACX_HINT_MASK register</span>
<span class="cm"> without effecting the mask</span>
<span class="cm"> state of other bits (0 = no effect).</span>
<span class="cm">=============================================*/</span>
	<span class="n">ACX_REG_HINT_MASK_CLR</span><span class="p">,</span>

<span class="cm">/*=============================================</span>
<span class="cm">  Host Interrupt Status Nondestructive Read</span>
<span class="cm">  16bit,(Read only)</span>
<span class="cm">  ------------------------------------------</span>
<span class="cm"> The host can read this register to determine</span>
<span class="cm"> which interrupts are active.</span>
<span class="cm"> Reading this register doesn&#39;t</span>
<span class="cm"> effect its content.</span>
<span class="cm">=============================================*/</span>
	<span class="n">ACX_REG_INTERRUPT_NO_CLEAR</span><span class="p">,</span>

<span class="cm">/*=============================================</span>
<span class="cm">  Host Interrupt Status Clear on Read  Register</span>
<span class="cm">  16bit,(Read only)</span>
<span class="cm">  ------------------------------------------</span>
<span class="cm"> The host can read this register to determine</span>
<span class="cm"> which interrupts are active.</span>
<span class="cm"> Reading this register clears it,</span>
<span class="cm"> thus making all interrupts inactive.</span>
<span class="cm">==============================================*/</span>
	<span class="n">ACX_REG_INTERRUPT_CLEAR</span><span class="p">,</span>

<span class="cm">/*=============================================</span>
<span class="cm">  Host Interrupt Acknowledge Register</span>
<span class="cm">  16bit,(Write only)</span>
<span class="cm">  ------------------------------------------</span>
<span class="cm"> The host can set individual bits in this</span>
<span class="cm"> register to clear (acknowledge) the corresp.</span>
<span class="cm"> interrupt status bits in the HINT_STS_CLR and</span>
<span class="cm"> HINT_STS_ND registers, thus making the</span>
<span class="cm"> assotiated interrupt inactive. (0-no effect)</span>
<span class="cm">==============================================*/</span>
	<span class="n">ACX_REG_INTERRUPT_ACK</span><span class="p">,</span>

<span class="cm">/*===============================================</span>
<span class="cm">   Host Software Reset - 32bit RW</span>
<span class="cm"> ------------------------------------------</span>
<span class="cm">    [31:1] Reserved</span>
<span class="cm">    0  SOFT_RESET Soft Reset  - When this bit is set,</span>
<span class="cm">    it holds the Wlan hardware in a soft reset state.</span>
<span class="cm">    This reset disables all MAC and baseband processor</span>
<span class="cm">    clocks except the CardBus/PCI interface clock.</span>
<span class="cm">    It also initializes all MAC state machines except</span>
<span class="cm">    the host interface. It does not reload the</span>
<span class="cm">    contents of the EEPROM. When this bit is cleared</span>
<span class="cm">    (not self-clearing), the Wlan hardware</span>
<span class="cm">    exits the software reset state.</span>
<span class="cm">===============================================*/</span>
	<span class="n">ACX_REG_SLV_SOFT_RESET</span><span class="p">,</span>

<span class="cm">/*===============================================</span>
<span class="cm"> EEPROM Burst Read Start  - 32bit RW</span>
<span class="cm"> ------------------------------------------</span>
<span class="cm"> [31:1] Reserved</span>
<span class="cm"> 0  ACX_EE_START -  EEPROM Burst Read Start 0</span>
<span class="cm"> Setting this bit starts a burst read from</span>
<span class="cm"> the external EEPROM.</span>
<span class="cm"> If this bit is set (after reset) before an EEPROM read/write,</span>
<span class="cm"> the burst read starts at EEPROM address 0.</span>
<span class="cm"> Otherwise, it starts at the address</span>
<span class="cm"> following the address of the previous access.</span>
<span class="cm"> TheWlan hardware hardware clears this bit automatically.</span>

<span class="cm"> Default: 0x00000000</span>
<span class="cm">*================================================*/</span>
	<span class="n">ACX_REG_EE_START</span><span class="p">,</span>

<span class="cm">/* Embedded ARM CPU Control */</span>

<span class="cm">/*===============================================</span>
<span class="cm"> Halt eCPU   - 32bit RW</span>
<span class="cm"> ------------------------------------------</span>
<span class="cm"> 0 HALT_ECPU Halt Embedded CPU - This bit is the</span>
<span class="cm"> compliment of bit 1 (MDATA2) in the SOR_CFG register.</span>
<span class="cm"> During a hardware reset, this bit holds</span>
<span class="cm"> the inverse of MDATA2.</span>
<span class="cm"> When downloading firmware from the host,</span>
<span class="cm"> set this bit (pull down MDATA2).</span>
<span class="cm"> The host clears this bit after downloading the firmware into</span>
<span class="cm"> zero-wait-state SSRAM.</span>
<span class="cm"> When loading firmware from Flash, clear this bit (pull up MDATA2)</span>
<span class="cm"> so that the eCPU can run the bootloader code in Flash</span>
<span class="cm"> HALT_ECPU eCPU State</span>
<span class="cm"> --------------------</span>
<span class="cm"> 1 halt eCPU</span>
<span class="cm"> 0 enable eCPU</span>
<span class="cm"> ===============================================*/</span>
	<span class="n">ACX_REG_ECPU_CONTROL</span><span class="p">,</span>

	<span class="n">ACX_REG_TABLE_LEN</span>
<span class="p">};</span>

<span class="cp">#define ACX_SLV_SOFT_RESET_BIT   BIT(0)</span>
<span class="cp">#define ACX_REG_EEPROM_START_BIT BIT(0)</span>

<span class="cm">/* Command/Information Mailbox Pointers */</span>

<span class="cm">/*===============================================</span>
<span class="cm">  Command Mailbox Pointer - 32bit RW</span>
<span class="cm"> ------------------------------------------</span>
<span class="cm"> This register holds the start address of</span>
<span class="cm"> the command mailbox located in the Wlan hardware memory.</span>
<span class="cm"> The host must read this pointer after a reset to</span>
<span class="cm"> find the location of the command mailbox.</span>
<span class="cm"> The Wlan hardware initializes the command mailbox</span>
<span class="cm"> pointer with the default address of the command mailbox.</span>
<span class="cm"> The command mailbox pointer is not valid until after</span>
<span class="cm"> the host receives the Init Complete interrupt from</span>
<span class="cm"> the Wlan hardware.</span>
<span class="cm"> ===============================================*/</span>
<span class="cp">#define REG_COMMAND_MAILBOX_PTR				(SCR_PAD0)</span>

<span class="cm">/*===============================================</span>
<span class="cm">  Information Mailbox Pointer - 32bit RW</span>
<span class="cm"> ------------------------------------------</span>
<span class="cm"> This register holds the start address of</span>
<span class="cm"> the information mailbox located in the Wlan hardware memory.</span>
<span class="cm"> The host must read this pointer after a reset to find</span>
<span class="cm"> the location of the information mailbox.</span>
<span class="cm"> The Wlan hardware initializes the information mailbox pointer</span>
<span class="cm"> with the default address of the information mailbox.</span>
<span class="cm"> The information mailbox pointer is not valid</span>
<span class="cm"> until after the host receives the Init Complete interrupt from</span>
<span class="cm"> the Wlan hardware.</span>
<span class="cm"> ===============================================*/</span>
<span class="cp">#define REG_EVENT_MAILBOX_PTR				(SCR_PAD1)</span>


<span class="cm">/* Misc */</span>

<span class="cp">#define REG_ENABLE_TX_RX				(ENABLE)</span>
<span class="cm">/*</span>
<span class="cm"> * Rx configuration (filter) information element</span>
<span class="cm"> * ---------------------------------------------</span>
<span class="cm"> */</span>
<span class="cp">#define REG_RX_CONFIG				(RX_CFG)</span>
<span class="cp">#define REG_RX_FILTER				(RX_FILTER_CFG)</span>


<span class="cp">#define RX_CFG_ENABLE_PHY_HEADER_PLCP	 0x0002</span>

<span class="cm">/* promiscuous - receives all valid frames */</span>
<span class="cp">#define RX_CFG_PROMISCUOUS		 0x0008</span>

<span class="cm">/* receives frames from any BSSID */</span>
<span class="cp">#define RX_CFG_BSSID			 0x0020</span>

<span class="cm">/* receives frames destined to any MAC address */</span>
<span class="cp">#define RX_CFG_MAC			 0x0010</span>

<span class="cp">#define RX_CFG_ENABLE_ONLY_MY_DEST_MAC	 0x0010</span>
<span class="cp">#define RX_CFG_ENABLE_ANY_DEST_MAC	 0x0000</span>
<span class="cp">#define RX_CFG_ENABLE_ONLY_MY_BSSID	 0x0020</span>
<span class="cp">#define RX_CFG_ENABLE_ANY_BSSID		 0x0000</span>

<span class="cm">/* discards all broadcast frames */</span>
<span class="cp">#define RX_CFG_DISABLE_BCAST		 0x0200</span>

<span class="cp">#define RX_CFG_ENABLE_ONLY_MY_SSID	 0x0400</span>
<span class="cp">#define RX_CFG_ENABLE_RX_CMPLT_FCS_ERROR 0x0800</span>
<span class="cp">#define RX_CFG_COPY_RX_STATUS		 0x2000</span>
<span class="cp">#define RX_CFG_TSF			 0x10000</span>

<span class="cp">#define RX_CONFIG_OPTION_ANY_DST_MY_BSS	 (RX_CFG_ENABLE_ANY_DEST_MAC | \</span>
<span class="cp">					  RX_CFG_ENABLE_ONLY_MY_BSSID)</span>

<span class="cp">#define RX_CONFIG_OPTION_MY_DST_ANY_BSS	 (RX_CFG_ENABLE_ONLY_MY_DEST_MAC\</span>
<span class="cp">					  | RX_CFG_ENABLE_ANY_BSSID)</span>

<span class="cp">#define RX_CONFIG_OPTION_ANY_DST_ANY_BSS (RX_CFG_ENABLE_ANY_DEST_MAC | \</span>
<span class="cp">					  RX_CFG_ENABLE_ANY_BSSID)</span>

<span class="cp">#define RX_CONFIG_OPTION_MY_DST_MY_BSS	 (RX_CFG_ENABLE_ONLY_MY_DEST_MAC\</span>
<span class="cp">					  | RX_CFG_ENABLE_ONLY_MY_BSSID)</span>

<span class="cp">#define RX_CONFIG_OPTION_FOR_SCAN  (RX_CFG_ENABLE_PHY_HEADER_PLCP \</span>
<span class="cp">				    | RX_CFG_ENABLE_RX_CMPLT_FCS_ERROR \</span>
<span class="cp">				    | RX_CFG_COPY_RX_STATUS | RX_CFG_TSF)</span>

<span class="cp">#define RX_CONFIG_OPTION_FOR_MEASUREMENT (RX_CFG_ENABLE_ANY_DEST_MAC)</span>

<span class="cp">#define RX_CONFIG_OPTION_FOR_JOIN	 (RX_CFG_ENABLE_ONLY_MY_BSSID | \</span>
<span class="cp">					  RX_CFG_ENABLE_ONLY_MY_DEST_MAC)</span>

<span class="cp">#define RX_CONFIG_OPTION_FOR_IBSS_JOIN   (RX_CFG_ENABLE_ONLY_MY_SSID | \</span>
<span class="cp">					  RX_CFG_ENABLE_ONLY_MY_DEST_MAC)</span>

<span class="cp">#define RX_FILTER_OPTION_DEF	      (CFG_RX_MGMT_EN | CFG_RX_DATA_EN\</span>
<span class="cp">				       | CFG_RX_CTL_EN | CFG_RX_BCN_EN\</span>
<span class="cp">				       | CFG_RX_AUTH_EN | CFG_RX_ASSOC_EN)</span>

<span class="cp">#define RX_FILTER_OPTION_FILTER_ALL	 0</span>

<span class="cp">#define RX_FILTER_OPTION_DEF_PRSP_BCN  (CFG_RX_PRSP_EN | CFG_RX_MGMT_EN\</span>
<span class="cp">					| CFG_RX_RCTS_ACK | CFG_RX_BCN_EN)</span>

<span class="cp">#define RX_FILTER_OPTION_JOIN	     (CFG_RX_MGMT_EN | CFG_RX_DATA_EN\</span>
<span class="cp">				      | CFG_RX_BCN_EN | CFG_RX_AUTH_EN\</span>
<span class="cp">				      | CFG_RX_ASSOC_EN | CFG_RX_RCTS_ACK\</span>
<span class="cp">				      | CFG_RX_PRSP_EN)</span>


<span class="cm">/*===============================================</span>
<span class="cm"> EEPROM Read/Write Request 32bit RW</span>
<span class="cm"> ------------------------------------------</span>
<span class="cm"> 1 EE_READ - EEPROM Read Request 1 - Setting this bit</span>
<span class="cm"> loads a single byte of data into the EE_DATA</span>
<span class="cm"> register from the EEPROM location specified in</span>
<span class="cm"> the EE_ADDR register.</span>
<span class="cm"> The Wlan hardware hardware clears this bit automatically.</span>
<span class="cm"> EE_DATA is valid when this bit is cleared.</span>

<span class="cm"> 0 EE_WRITE  - EEPROM Write Request  - Setting this bit</span>
<span class="cm"> writes a single byte of data from the EE_DATA register into the</span>
<span class="cm"> EEPROM location specified in the EE_ADDR register.</span>
<span class="cm"> The Wlan hardware hardware clears this bit automatically.</span>
<span class="cm">*===============================================*/</span>
<span class="cp">#define EE_CTL                              (REGISTERS_BASE + 0x2000)</span>
<span class="cp">#define ACX_EE_CTL_REG                      EE_CTL</span>
<span class="cp">#define EE_WRITE                            0x00000001ul</span>
<span class="cp">#define EE_READ                             0x00000002ul</span>

<span class="cm">/*===============================================</span>
<span class="cm">  EEPROM Address  - 32bit RW</span>
<span class="cm">  ------------------------------------------</span>
<span class="cm">  This register specifies the address</span>
<span class="cm">  within the EEPROM from/to which to read/write data.</span>
<span class="cm">  ===============================================*/</span>
<span class="cp">#define EE_ADDR                             (REGISTERS_BASE + 0x2008)</span>
<span class="cp">#define ACX_EE_ADDR_REG                     EE_ADDR</span>

<span class="cm">/*===============================================</span>
<span class="cm">  EEPROM Data  - 32bit RW</span>
<span class="cm">  ------------------------------------------</span>
<span class="cm">  This register either holds the read 8 bits of</span>
<span class="cm">  data from the EEPROM or the write data</span>
<span class="cm">  to be written to the EEPROM.</span>
<span class="cm">  ===============================================*/</span>
<span class="cp">#define EE_DATA                             (REGISTERS_BASE + 0x2004)</span>
<span class="cp">#define ACX_EE_DATA_REG                     EE_DATA</span>

<span class="cp">#define EEPROM_ACCESS_TO                    10000   </span><span class="cm">/* timeout counter */</span><span class="cp"></span>
<span class="cp">#define START_EEPROM_MGR                    0x00000001</span>

<span class="cm">/*===============================================</span>
<span class="cm">  EEPROM Base Address  - 32bit RW</span>
<span class="cm">  ------------------------------------------</span>
<span class="cm">  This register holds the upper nine bits</span>
<span class="cm">  [23:15] of the 24-bit Wlan hardware memory</span>
<span class="cm">  address for burst reads from EEPROM accesses.</span>
<span class="cm">  The EEPROM provides the lower 15 bits of this address.</span>
<span class="cm">  The MSB of the address from the EEPROM is ignored.</span>
<span class="cm">  ===============================================*/</span>
<span class="cp">#define ACX_EE_CFG                          EE_CFG</span>

<span class="cm">/*===============================================</span>
<span class="cm">  GPIO Output Values  -32bit, RW</span>
<span class="cm">  ------------------------------------------</span>
<span class="cm">  [31:16]  Reserved</span>
<span class="cm">  [15: 0]  Specify the output values (at the output driver inputs) for</span>
<span class="cm">  GPIO[15:0], respectively.</span>
<span class="cm">  ===============================================*/</span>
<span class="cp">#define ACX_GPIO_OUT_REG            GPIO_OUT</span>
<span class="cp">#define ACX_MAX_GPIO_LINES          15</span>

<span class="cm">/*===============================================</span>
<span class="cm">  Contention window  -32bit, RW</span>
<span class="cm">  ------------------------------------------</span>
<span class="cm">  [31:26]  Reserved</span>
<span class="cm">  [25:16]  Max (0x3ff)</span>
<span class="cm">  [15:07]  Reserved</span>
<span class="cm">  [06:00]  Current contention window value - default is 0x1F</span>
<span class="cm">  ===============================================*/</span>
<span class="cp">#define ACX_CONT_WIND_CFG_REG    CONT_WIND_CFG</span>
<span class="cp">#define ACX_CONT_WIND_MIN_MASK   0x0000007f</span>
<span class="cp">#define ACX_CONT_WIND_MAX        0x03ff0000</span>

<span class="cm">/*===============================================</span>
<span class="cm">  HI_CFG Interface Configuration Register Values</span>
<span class="cm">  ------------------------------------------</span>
<span class="cm">  ===============================================*/</span>
<span class="cp">#define HI_CFG_UART_ENABLE          0x00000004</span>
<span class="cp">#define HI_CFG_RST232_ENABLE        0x00000008</span>
<span class="cp">#define HI_CFG_CLOCK_REQ_SELECT     0x00000010</span>
<span class="cp">#define HI_CFG_HOST_INT_ENABLE      0x00000020</span>
<span class="cp">#define HI_CFG_VLYNQ_OUTPUT_ENABLE  0x00000040</span>
<span class="cp">#define HI_CFG_HOST_INT_ACTIVE_LOW  0x00000080</span>
<span class="cp">#define HI_CFG_UART_TX_OUT_GPIO_15  0x00000100</span>
<span class="cp">#define HI_CFG_UART_TX_OUT_GPIO_14  0x00000200</span>
<span class="cp">#define HI_CFG_UART_TX_OUT_GPIO_7   0x00000400</span>

<span class="cm">/*</span>
<span class="cm"> * NOTE: USE_ACTIVE_HIGH compilation flag should be defined in makefile</span>
<span class="cm"> *       for platforms using active high interrupt level</span>
<span class="cm"> */</span>
<span class="cp">#ifdef USE_ACTIVE_HIGH</span>
<span class="cp">#define HI_CFG_DEF_VAL              \</span>
<span class="cp">	(HI_CFG_UART_ENABLE |        \</span>
<span class="cp">	HI_CFG_RST232_ENABLE |      \</span>
<span class="cp">	HI_CFG_CLOCK_REQ_SELECT |   \</span>
<span class="cp">	HI_CFG_HOST_INT_ENABLE)</span>
<span class="cp">#else</span>
<span class="cp">#define HI_CFG_DEF_VAL              \</span>
<span class="cp">	(HI_CFG_UART_ENABLE |        \</span>
<span class="cp">	HI_CFG_RST232_ENABLE |      \</span>
<span class="cp">	HI_CFG_CLOCK_REQ_SELECT |   \</span>
<span class="cp">	HI_CFG_HOST_INT_ENABLE)</span>

<span class="cp">#endif</span>

<span class="cp">#define REF_FREQ_19_2                       0</span>
<span class="cp">#define REF_FREQ_26_0                       1</span>
<span class="cp">#define REF_FREQ_38_4                       2</span>
<span class="cp">#define REF_FREQ_40_0                       3</span>
<span class="cp">#define REF_FREQ_33_6                       4</span>
<span class="cp">#define REF_FREQ_NUM                        5</span>

<span class="cp">#define LUT_PARAM_INTEGER_DIVIDER           0</span>
<span class="cp">#define LUT_PARAM_FRACTIONAL_DIVIDER        1</span>
<span class="cp">#define LUT_PARAM_ATTN_BB                   2</span>
<span class="cp">#define LUT_PARAM_ALPHA_BB                  3</span>
<span class="cp">#define LUT_PARAM_STOP_TIME_BB              4</span>
<span class="cp">#define LUT_PARAM_BB_PLL_LOOP_FILTER        5</span>
<span class="cp">#define LUT_PARAM_NUM                       6</span>

<span class="cp">#define ACX_EEPROMLESS_IND_REG              (SCR_PAD4)</span>
<span class="cp">#define USE_EEPROM                          0</span>
<span class="cp">#define SOFT_RESET_MAX_TIME                 1000000</span>
<span class="cp">#define SOFT_RESET_STALL_TIME               1000</span>
<span class="cp">#define NVS_DATA_BUNDARY_ALIGNMENT          4</span>


<span class="cm">/* Firmware image load chunk size */</span>
<span class="cp">#define CHUNK_SIZE          512</span>

<span class="cm">/* Firmware image header size */</span>
<span class="cp">#define FW_HDR_SIZE 8</span>

<span class="cp">#define ECPU_CONTROL_HALT					0x00000101</span>


<span class="cm">/******************************************************************************</span>

<span class="cm">    CHANNELS, BAND &amp; REG DOMAINS definitions</span>

<span class="cm">******************************************************************************/</span>


<span class="k">enum</span> <span class="p">{</span>
	<span class="n">RADIO_BAND_2_4GHZ</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>  <span class="cm">/* 2.4 Ghz band */</span>
	<span class="n">RADIO_BAND_5GHZ</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>    <span class="cm">/* 5 Ghz band */</span>
	<span class="n">RADIO_BAND_JAPAN_4_9_GHZ</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">DEFAULT_BAND</span> <span class="o">=</span> <span class="n">RADIO_BAND_2_4GHZ</span><span class="p">,</span>
	<span class="n">INVALID_BAND</span> <span class="o">=</span> <span class="mh">0xFE</span><span class="p">,</span>
	<span class="n">MAX_RADIO_BANDS</span> <span class="o">=</span> <span class="mh">0xFF</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">NO_RATE</span>      <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">RATE_1MBPS</span>   <span class="o">=</span> <span class="mh">0x0A</span><span class="p">,</span>
	<span class="n">RATE_2MBPS</span>   <span class="o">=</span> <span class="mh">0x14</span><span class="p">,</span>
	<span class="n">RATE_5_5MBPS</span> <span class="o">=</span> <span class="mh">0x37</span><span class="p">,</span>
	<span class="n">RATE_6MBPS</span>   <span class="o">=</span> <span class="mh">0x0B</span><span class="p">,</span>
	<span class="n">RATE_9MBPS</span>   <span class="o">=</span> <span class="mh">0x0F</span><span class="p">,</span>
	<span class="n">RATE_11MBPS</span>  <span class="o">=</span> <span class="mh">0x6E</span><span class="p">,</span>
	<span class="n">RATE_12MBPS</span>  <span class="o">=</span> <span class="mh">0x0A</span><span class="p">,</span>
	<span class="n">RATE_18MBPS</span>  <span class="o">=</span> <span class="mh">0x0E</span><span class="p">,</span>
	<span class="n">RATE_22MBPS</span>  <span class="o">=</span> <span class="mh">0xDC</span><span class="p">,</span>
	<span class="n">RATE_24MBPS</span>  <span class="o">=</span> <span class="mh">0x09</span><span class="p">,</span>
	<span class="n">RATE_36MBPS</span>  <span class="o">=</span> <span class="mh">0x0D</span><span class="p">,</span>
	<span class="n">RATE_48MBPS</span>  <span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">RATE_54MBPS</span>  <span class="o">=</span> <span class="mh">0x0C</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">RATE_INDEX_1MBPS</span>   <span class="o">=</span>  <span class="mi">0</span><span class="p">,</span>
	<span class="n">RATE_INDEX_2MBPS</span>   <span class="o">=</span>  <span class="mi">1</span><span class="p">,</span>
	<span class="n">RATE_INDEX_5_5MBPS</span> <span class="o">=</span>  <span class="mi">2</span><span class="p">,</span>
	<span class="n">RATE_INDEX_6MBPS</span>   <span class="o">=</span>  <span class="mi">3</span><span class="p">,</span>
	<span class="n">RATE_INDEX_9MBPS</span>   <span class="o">=</span>  <span class="mi">4</span><span class="p">,</span>
	<span class="n">RATE_INDEX_11MBPS</span>  <span class="o">=</span>  <span class="mi">5</span><span class="p">,</span>
	<span class="n">RATE_INDEX_12MBPS</span>  <span class="o">=</span>  <span class="mi">6</span><span class="p">,</span>
	<span class="n">RATE_INDEX_18MBPS</span>  <span class="o">=</span>  <span class="mi">7</span><span class="p">,</span>
	<span class="n">RATE_INDEX_22MBPS</span>  <span class="o">=</span>  <span class="mi">8</span><span class="p">,</span>
	<span class="n">RATE_INDEX_24MBPS</span>  <span class="o">=</span>  <span class="mi">9</span><span class="p">,</span>
	<span class="n">RATE_INDEX_36MBPS</span>  <span class="o">=</span>  <span class="mi">10</span><span class="p">,</span>
	<span class="n">RATE_INDEX_48MBPS</span>  <span class="o">=</span>  <span class="mi">11</span><span class="p">,</span>
	<span class="n">RATE_INDEX_54MBPS</span>  <span class="o">=</span>  <span class="mi">12</span><span class="p">,</span>
	<span class="n">RATE_INDEX_MAX</span>     <span class="o">=</span>  <span class="n">RATE_INDEX_54MBPS</span><span class="p">,</span>
	<span class="n">MAX_RATE_INDEX</span><span class="p">,</span>
	<span class="n">INVALID_RATE_INDEX</span> <span class="o">=</span> <span class="n">MAX_RATE_INDEX</span><span class="p">,</span>
	<span class="n">RATE_INDEX_ENUM_MAX_SIZE</span> <span class="o">=</span> <span class="mh">0x7FFFFFFF</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">RATE_MASK_1MBPS</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">,</span>
	<span class="n">RATE_MASK_2MBPS</span> <span class="o">=</span> <span class="mh">0x2</span><span class="p">,</span>
	<span class="n">RATE_MASK_5_5MBPS</span> <span class="o">=</span> <span class="mh">0x4</span><span class="p">,</span>
	<span class="n">RATE_MASK_11MBPS</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define SHORT_PREAMBLE_BIT   BIT(0) </span><span class="cm">/* CCK or Barker depending on the rate */</span><span class="cp"></span>
<span class="cp">#define OFDM_RATE_BIT        BIT(6)</span>
<span class="cp">#define PBCC_RATE_BIT        BIT(7)</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">CCK_LONG</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">CCK_SHORT</span> <span class="o">=</span> <span class="n">SHORT_PREAMBLE_BIT</span><span class="p">,</span>
	<span class="n">PBCC_LONG</span> <span class="o">=</span> <span class="n">PBCC_RATE_BIT</span><span class="p">,</span>
	<span class="n">PBCC_SHORT</span> <span class="o">=</span> <span class="n">PBCC_RATE_BIT</span> <span class="o">|</span> <span class="n">SHORT_PREAMBLE_BIT</span><span class="p">,</span>
	<span class="n">OFDM</span> <span class="o">=</span> <span class="n">OFDM_RATE_BIT</span>
<span class="p">};</span>

<span class="cm">/******************************************************************************</span>

<span class="cm">Transmit-Descriptor RATE-SET field definitions...</span>

<span class="cm">Define a new &quot;Rate-Set&quot; for TX path that incorporates the</span>
<span class="cm">Rate &amp; Modulation info into a single 16-bit field.</span>

<span class="cm">TxdRateSet_t:</span>
<span class="cm">b15   - Indicates Preamble type (1=SHORT, 0=LONG).</span>
<span class="cm">	Notes:</span>
<span class="cm">	Must be LONG (0) for 1Mbps rate.</span>
<span class="cm">	Does not apply (set to 0) for RevG-OFDM rates.</span>
<span class="cm">b14   - Indicates PBCC encoding (1=PBCC, 0=not).</span>
<span class="cm">	Notes:</span>
<span class="cm">	Does not apply (set to 0) for rates 1 and 2 Mbps.</span>
<span class="cm">	Does not apply (set to 0) for RevG-OFDM rates.</span>
<span class="cm">b13    - Unused (set to 0).</span>
<span class="cm">b12-b0 - Supported Rate indicator bits as defined below.</span>

<span class="cm">******************************************************************************/</span>


<span class="cm">/*************************************************************************</span>

<span class="cm">    Interrupt Trigger Register (Host -&gt; WiLink)</span>

<span class="cm">**************************************************************************/</span>

<span class="cm">/* Hardware to Embedded CPU Interrupts - first 32-bit register set */</span>

<span class="cm">/*</span>
<span class="cm"> * Host Command Interrupt. Setting this bit masks</span>
<span class="cm"> * the interrupt that the host issues to inform</span>
<span class="cm"> * the FW that it has sent a command</span>
<span class="cm"> * to the Wlan hardware Command Mailbox.</span>
<span class="cm"> */</span>
<span class="cp">#define INTR_TRIG_CMD       BIT(0)</span>

<span class="cm">/*</span>
<span class="cm"> * Host Event Acknowlegde Interrupt. The host</span>
<span class="cm"> * sets this bit to acknowledge that it received</span>
<span class="cm"> * the unsolicited information from the event</span>
<span class="cm"> * mailbox.</span>
<span class="cm"> */</span>
<span class="cp">#define INTR_TRIG_EVENT_ACK BIT(1)</span>

<span class="cm">/*</span>
<span class="cm"> * The host sets this bit to inform the Wlan</span>
<span class="cm"> * FW that a TX packet is in the XFER</span>
<span class="cm"> * Buffer #0.</span>
<span class="cm"> */</span>
<span class="cp">#define INTR_TRIG_TX_PROC0 BIT(2)</span>

<span class="cm">/*</span>
<span class="cm"> * The host sets this bit to inform the FW</span>
<span class="cm"> * that it read a packet from RX XFER</span>
<span class="cm"> * Buffer #0.</span>
<span class="cm"> */</span>
<span class="cp">#define INTR_TRIG_RX_PROC0 BIT(3)</span>

<span class="cp">#define INTR_TRIG_DEBUG_ACK BIT(4)</span>

<span class="cp">#define INTR_TRIG_STATE_CHANGED BIT(5)</span>


<span class="cm">/* Hardware to Embedded CPU Interrupts - second 32-bit register set */</span>

<span class="cm">/*</span>
<span class="cm"> * The host sets this bit to inform the FW</span>
<span class="cm"> * that it read a packet from RX XFER</span>
<span class="cm"> * Buffer #1.</span>
<span class="cm"> */</span>
<span class="cp">#define INTR_TRIG_RX_PROC1 BIT(17)</span>

<span class="cm">/*</span>
<span class="cm"> * The host sets this bit to inform the Wlan</span>
<span class="cm"> * hardware that a TX packet is in the XFER</span>
<span class="cm"> * Buffer #1.</span>
<span class="cm"> */</span>
<span class="cp">#define INTR_TRIG_TX_PROC1 BIT(18)</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
