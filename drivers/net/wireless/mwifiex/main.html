<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › wireless › mwifiex › main.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>main.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Marvell Wireless LAN device driver: major data structures and prototypes</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2011, Marvell International Ltd.</span>
<span class="cm"> *</span>
<span class="cm"> * This software file (the &quot;File&quot;) is distributed by Marvell International</span>
<span class="cm"> * Ltd. under the terms of the GNU General Public License Version 2, June 1991</span>
<span class="cm"> * (the &quot;License&quot;).  You may use, redistribute and/or modify this File in</span>
<span class="cm"> * accordance with the terms and conditions of the License, a copy of which</span>
<span class="cm"> * is available by writing to the Free Software Foundation, Inc.,</span>
<span class="cm"> * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA or on the</span>
<span class="cm"> * worldwide web at http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.</span>
<span class="cm"> *</span>
<span class="cm"> * THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE</span>
<span class="cm"> * IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE</span>
<span class="cm"> * ARE EXPRESSLY DISCLAIMED.  The License provides additional details about</span>
<span class="cm"> * this warranty disclaimer.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _MWIFIEX_MAIN_H_</span>
<span class="cp">#define _MWIFIEX_MAIN_H_</span>

<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/sched.h&gt;</span>
<span class="cp">#include &lt;linux/semaphore.h&gt;</span>
<span class="cp">#include &lt;linux/ip.h&gt;</span>
<span class="cp">#include &lt;linux/skbuff.h&gt;</span>
<span class="cp">#include &lt;linux/if_arp.h&gt;</span>
<span class="cp">#include &lt;linux/etherdevice.h&gt;</span>
<span class="cp">#include &lt;net/sock.h&gt;</span>
<span class="cp">#include &lt;net/lib80211.h&gt;</span>
<span class="cp">#include &lt;linux/firmware.h&gt;</span>
<span class="cp">#include &lt;linux/ctype.h&gt;</span>

<span class="cp">#include &quot;decl.h&quot;</span>
<span class="cp">#include &quot;ioctl.h&quot;</span>
<span class="cp">#include &quot;util.h&quot;</span>
<span class="cp">#include &quot;fw.h&quot;</span>
<span class="cp">#include &quot;pcie.h&quot;</span>

<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">driver_version</span><span class="p">[];</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">MWIFIEX_ASYNC_CMD</span><span class="p">,</span>
	<span class="n">MWIFIEX_SYNC_CMD</span>
<span class="p">};</span>

<span class="cp">#define MWIFIEX_MAX_AP				64</span>

<span class="cp">#define MWIFIEX_DEFAULT_WATCHDOG_TIMEOUT	(5 * HZ)</span>

<span class="cp">#define MWIFIEX_TIMER_10S			10000</span>
<span class="cp">#define MWIFIEX_TIMER_1S			1000</span>

<span class="cp">#define MAX_TX_PENDING      100</span>
<span class="cp">#define LOW_TX_PENDING      80</span>

<span class="cp">#define MWIFIEX_UPLD_SIZE               (2312)</span>

<span class="cp">#define MAX_EVENT_SIZE                  1024</span>

<span class="cp">#define ARP_FILTER_MAX_BUF_SIZE         68</span>

<span class="cp">#define MWIFIEX_KEY_BUFFER_SIZE			16</span>
<span class="cp">#define MWIFIEX_DEFAULT_LISTEN_INTERVAL 10</span>
<span class="cp">#define MWIFIEX_MAX_REGION_CODE         7</span>

<span class="cp">#define DEFAULT_BCN_AVG_FACTOR          8</span>
<span class="cp">#define DEFAULT_DATA_AVG_FACTOR         8</span>

<span class="cp">#define FIRST_VALID_CHANNEL				0xff</span>
<span class="cp">#define DEFAULT_AD_HOC_CHANNEL			6</span>
<span class="cp">#define DEFAULT_AD_HOC_CHANNEL_A		36</span>

<span class="cp">#define DEFAULT_BCN_MISS_TIMEOUT		5</span>

<span class="cp">#define MAX_SCAN_BEACON_BUFFER			8000</span>

<span class="cp">#define SCAN_BEACON_ENTRY_PAD			6</span>

<span class="cp">#define MWIFIEX_PASSIVE_SCAN_CHAN_TIME	200</span>
<span class="cp">#define MWIFIEX_ACTIVE_SCAN_CHAN_TIME	200</span>
<span class="cp">#define MWIFIEX_SPECIFIC_SCAN_CHAN_TIME	110</span>

<span class="cp">#define SCAN_RSSI(RSSI)					(0x100 - ((u8)(RSSI)))</span>

<span class="cp">#define MWIFIEX_MAX_TOTAL_SCAN_TIME	(MWIFIEX_TIMER_10S - MWIFIEX_TIMER_1S)</span>

<span class="cp">#define RSN_GTK_OUI_OFFSET				2</span>

<span class="cp">#define MWIFIEX_OUI_NOT_PRESENT			0</span>
<span class="cp">#define MWIFIEX_OUI_PRESENT				1</span>

<span class="cm">/*</span>
<span class="cm"> * Do not check for data_received for USB, as data_received</span>
<span class="cm"> * is handled in mwifiex_usb_recv for USB</span>
<span class="cm"> */</span>
<span class="cp">#define IS_CARD_RX_RCVD(adapter) (adapter-&gt;cmd_resp_received || \</span>
<span class="cp">				adapter-&gt;event_received || \</span>
<span class="cp">				((adapter-&gt;iface_type != MWIFIEX_USB) &amp;&amp; \</span>
<span class="cp">				adapter-&gt;data_received) || \</span>
<span class="cp">				((adapter-&gt;iface_type == MWIFIEX_USB) &amp;&amp; \</span>
<span class="cp">				!skb_queue_empty(&amp;adapter-&gt;usb_rx_data_q)))</span>

<span class="cp">#define MWIFIEX_TYPE_CMD				1</span>
<span class="cp">#define MWIFIEX_TYPE_DATA				0</span>
<span class="cp">#define MWIFIEX_TYPE_EVENT				3</span>

<span class="cp">#define DBG_CMD_NUM						5</span>

<span class="cp">#define MAX_BITMAP_RATES_SIZE			10</span>

<span class="cp">#define MAX_CHANNEL_BAND_BG     14</span>

<span class="cp">#define MAX_FREQUENCY_BAND_BG   2484</span>

<span class="cp">#define MWIFIEX_EVENT_HEADER_LEN           4</span>
<span class="cp">#define MWIFIEX_UAP_EVENT_EXTRA_HEADER	   2</span>

<span class="cp">#define MWIFIEX_TYPE_LEN			4</span>
<span class="cp">#define MWIFIEX_USB_TYPE_CMD			0xF00DFACE</span>
<span class="cp">#define MWIFIEX_USB_TYPE_DATA			0xBEADC0DE</span>
<span class="cp">#define MWIFIEX_USB_TYPE_EVENT			0xBEEFFACE</span>

<span class="k">struct</span> <span class="n">mwifiex_dbg</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">num_cmd_host_to_card_failure</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_cmd_sleep_cfm_host_to_card_failure</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_tx_host_to_card_failure</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_event_deauth</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_event_disassoc</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_event_link_lost</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_cmd_deauth</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_cmd_assoc_success</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_cmd_assoc_failure</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_tx_timeout</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_cmd_timeout</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">timeout_cmd_id</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">timeout_cmd_act</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">last_cmd_id</span><span class="p">[</span><span class="n">DBG_CMD_NUM</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">last_cmd_act</span><span class="p">[</span><span class="n">DBG_CMD_NUM</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">last_cmd_index</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">last_cmd_resp_id</span><span class="p">[</span><span class="n">DBG_CMD_NUM</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">last_cmd_resp_index</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">last_event</span><span class="p">[</span><span class="n">DBG_CMD_NUM</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">last_event_index</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">MWIFIEX_HARDWARE_STATUS</span> <span class="p">{</span>
	<span class="n">MWIFIEX_HW_STATUS_READY</span><span class="p">,</span>
	<span class="n">MWIFIEX_HW_STATUS_INITIALIZING</span><span class="p">,</span>
	<span class="n">MWIFIEX_HW_STATUS_FW_READY</span><span class="p">,</span>
	<span class="n">MWIFIEX_HW_STATUS_INIT_DONE</span><span class="p">,</span>
	<span class="n">MWIFIEX_HW_STATUS_RESET</span><span class="p">,</span>
	<span class="n">MWIFIEX_HW_STATUS_CLOSING</span><span class="p">,</span>
	<span class="n">MWIFIEX_HW_STATUS_NOT_READY</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">MWIFIEX_802_11_POWER_MODE</span> <span class="p">{</span>
	<span class="n">MWIFIEX_802_11_POWER_MODE_CAM</span><span class="p">,</span>
	<span class="n">MWIFIEX_802_11_POWER_MODE_PSP</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_tx_param</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">next_pkt_len</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">MWIFIEX_PS_STATE</span> <span class="p">{</span>
	<span class="n">PS_STATE_AWAKE</span><span class="p">,</span>
	<span class="n">PS_STATE_PRE_SLEEP</span><span class="p">,</span>
	<span class="n">PS_STATE_SLEEP_CFM</span><span class="p">,</span>
	<span class="n">PS_STATE_SLEEP</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">mwifiex_iface_type</span> <span class="p">{</span>
	<span class="n">MWIFIEX_SDIO</span><span class="p">,</span>
	<span class="n">MWIFIEX_PCIE</span><span class="p">,</span>
	<span class="n">MWIFIEX_USB</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_add_ba_param</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">tx_win_size</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rx_win_size</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">timeout</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_tx_aggr</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">ampdu_user</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ampdu_ap</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">amsdu</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_ra_list_tbl</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="n">skb_head</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ra</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">total_pkts_size</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">is_11n_enabled</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_tid_tbl</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">ra_list</span><span class="p">;</span>
	<span class="cm">/* spin lock for tid table */</span>
	<span class="n">spinlock_t</span> <span class="n">tid_tbl_lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_ra_list_tbl</span> <span class="o">*</span><span class="n">ra_list_curr</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define WMM_HIGHEST_PRIORITY		7</span>
<span class="cp">#define HIGH_PRIO_TID				7</span>
<span class="cp">#define LOW_PRIO_TID				0</span>
<span class="cp">#define NO_PKT_PRIO_TID				(-1)</span>

<span class="k">struct</span> <span class="n">mwifiex_wmm_desc</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">mwifiex_tid_tbl</span> <span class="n">tid_tbl_ptr</span><span class="p">[</span><span class="n">MAX_NUM_TID</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">packets_out</span><span class="p">[</span><span class="n">MAX_NUM_TID</span><span class="p">];</span>
	<span class="cm">/* spin lock to protect ra_list */</span>
	<span class="n">spinlock_t</span> <span class="n">ra_list_spinlock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_wmm_ac_status</span> <span class="n">ac_status</span><span class="p">[</span><span class="n">IEEE80211_NUM_ACS</span><span class="p">];</span>
	<span class="k">enum</span> <span class="n">mwifiex_wmm_ac_e</span> <span class="n">ac_down_graded_vals</span><span class="p">[</span><span class="n">IEEE80211_NUM_ACS</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">drv_pkt_delay_max</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">queue_priority</span><span class="p">[</span><span class="n">IEEE80211_NUM_ACS</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">user_pri_pkt_tx_ctrl</span><span class="p">[</span><span class="n">WMM_HIGHEST_PRIORITY</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>	<span class="cm">/* UP: 0 to 7 */</span>
	<span class="cm">/* Number of transmit packets queued */</span>
	<span class="n">atomic_t</span> <span class="n">tx_pkts_queued</span><span class="p">;</span>
	<span class="cm">/* Tracks highest priority with a packet queued */</span>
	<span class="n">atomic_t</span> <span class="n">highest_queued_prio</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_802_11_security</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">wpa_enabled</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">wpa2_enabled</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">wapi_enabled</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">wapi_key_on</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">wep_enabled</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">authentication_mode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">is_authtype_auto</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">encryption_mode</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ieee_types_header</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">element_id</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">len</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define MWIFIEX_SUPPORTED_RATES                 14</span>

<span class="cp">#define MWIFIEX_SUPPORTED_RATES_EXT             32</span>

<span class="k">struct</span> <span class="n">ieee_types_vendor_specific</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ieee_types_vendor_header</span> <span class="n">vend_hdr</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data</span><span class="p">[</span><span class="n">IEEE_MAX_IE_SIZE</span> <span class="o">-</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">ieee_types_vendor_header</span><span class="p">)];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ieee_types_generic</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ieee_types_header</span> <span class="n">ieee_hdr</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data</span><span class="p">[</span><span class="n">IEEE_MAX_IE_SIZE</span> <span class="o">-</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">ieee_types_header</span><span class="p">)];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">mwifiex_bssdescriptor</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">mac_address</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">cfg80211_ssid</span> <span class="n">ssid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">privacy</span><span class="p">;</span>
	<span class="n">s32</span> <span class="n">rssi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">channel</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">freq</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">beacon_period</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">erp_flags</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">bss_mode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">supported_rates</span><span class="p">[</span><span class="n">MWIFIEX_SUPPORTED_RATES</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">data_rates</span><span class="p">[</span><span class="n">MWIFIEX_SUPPORTED_RATES</span><span class="p">];</span>
	<span class="cm">/* Network band.</span>
<span class="cm">	 * BAND_B(0x01): &#39;b&#39; band</span>
<span class="cm">	 * BAND_G(0x02): &#39;g&#39; band</span>
<span class="cm">	 * BAND_A(0X04): &#39;a&#39; band</span>
<span class="cm">	 */</span>
	<span class="n">u16</span> <span class="n">bss_band</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">fw_tsf</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">timestamp</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">ieee_types_phy_param_set</span> <span class="n">phy_param_set</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">ieee_types_ss_param_set</span> <span class="n">ss_param_set</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">cap_info_bitmap</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ieee_types_wmm_parameter</span> <span class="n">wmm_ie</span><span class="p">;</span>
	<span class="n">u8</span>  <span class="n">disable_11n</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ieee80211_ht_cap</span> <span class="o">*</span><span class="n">bcn_ht_cap</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">ht_cap_offset</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ieee80211_ht_operation</span> <span class="o">*</span><span class="n">bcn_ht_oper</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">ht_info_offset</span><span class="p">;</span>
	<span class="n">u8</span> <span class="o">*</span><span class="n">bcn_bss_co_2040</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">bss_co_2040_offset</span><span class="p">;</span>
	<span class="n">u8</span> <span class="o">*</span><span class="n">bcn_ext_cap</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">ext_cap_offset</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ieee_types_vendor_specific</span> <span class="o">*</span><span class="n">bcn_wpa_ie</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">wpa_offset</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ieee_types_generic</span> <span class="o">*</span><span class="n">bcn_rsn_ie</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rsn_offset</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ieee_types_generic</span> <span class="o">*</span><span class="n">bcn_wapi_ie</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">wapi_offset</span><span class="p">;</span>
	<span class="n">u8</span> <span class="o">*</span><span class="n">beacon_buf</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">beacon_buf_size</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_current_bss_params</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">mwifiex_bssdescriptor</span> <span class="n">bss_descriptor</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">wmm_enabled</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">wmm_uapsd_enabled</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">band</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_of_rates</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data_rates</span><span class="p">[</span><span class="n">MWIFIEX_SUPPORTED_RATES</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_sleep_params</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">sp_error</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">sp_offset</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">sp_stable_time</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">sp_cal_control</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">sp_ext_sleep_clk</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">sp_reserved</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_sleep_period</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">period</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">reserved</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_wep_key</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">length</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">key_index</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">key_length</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">key_material</span><span class="p">[</span><span class="n">MWIFIEX_KEY_BUFFER_SIZE</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define MAX_REGION_CHANNEL_NUM  2</span>

<span class="k">struct</span> <span class="n">mwifiex_chan_freq_power</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">channel</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">freq</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">max_tx_power</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">unsupported</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">state_11d_t</span> <span class="p">{</span>
	<span class="n">DISABLE_11D</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">ENABLE_11D</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define MWIFIEX_MAX_TRIPLET_802_11D		83</span>

<span class="k">struct</span> <span class="n">mwifiex_802_11d_domain_reg</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">country_code</span><span class="p">[</span><span class="n">IEEE80211_COUNTRY_STRING_LEN</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">no_of_triplet</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ieee80211_country_ie_triplet</span>
		<span class="n">triplet</span><span class="p">[</span><span class="n">MWIFIEX_MAX_TRIPLET_802_11D</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_vendor_spec_cfg_ie</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">mask</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">flag</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ie</span><span class="p">[</span><span class="n">MWIFIEX_MAX_VSIE_LEN</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">wps</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">session_enable</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_adapter</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">mwifiex_private</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bss_type</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bss_role</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bss_priority</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bss_num</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bss_started</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">frame_type</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">curr_addr</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">media_connected</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_tx_timeout</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device_stats</span> <span class="n">stats</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">curr_pkt_filter</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">bss_mode</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pkt_tx_ctrl</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">tx_power_level</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">max_tx_power_level</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">min_tx_power_level</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tx_rate</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tx_htinfo</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rxpd_htinfo</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rxpd_rate</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rate_bitmap</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">bitmap_rates</span><span class="p">[</span><span class="n">MAX_BITMAP_RATES_SIZE</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">data_rate</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">is_data_rate_auto</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">bcn_avg_factor</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">data_avg_factor</span><span class="p">;</span>
	<span class="n">s16</span> <span class="n">data_rssi_last</span><span class="p">;</span>
	<span class="n">s16</span> <span class="n">data_nf_last</span><span class="p">;</span>
	<span class="n">s16</span> <span class="n">data_rssi_avg</span><span class="p">;</span>
	<span class="n">s16</span> <span class="n">data_nf_avg</span><span class="p">;</span>
	<span class="n">s16</span> <span class="n">bcn_rssi_last</span><span class="p">;</span>
	<span class="n">s16</span> <span class="n">bcn_nf_last</span><span class="p">;</span>
	<span class="n">s16</span> <span class="n">bcn_rssi_avg</span><span class="p">;</span>
	<span class="n">s16</span> <span class="n">bcn_nf_avg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_bssdescriptor</span> <span class="o">*</span><span class="n">attempted_bss_desc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cfg80211_ssid</span> <span class="n">prev_ssid</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">prev_bssid</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">mwifiex_current_bss_params</span> <span class="n">curr_bss_params</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">beacon_period</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">dtim_period</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">listen_interval</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">atim_window</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">adhoc_channel</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">adhoc_is_link_sensed</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">adhoc_state</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_802_11_security</span> <span class="n">sec_info</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_wep_key</span> <span class="n">wep_key</span><span class="p">[</span><span class="n">NUM_WEP_KEYS</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">wep_key_curr_index</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">wpa_ie</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">wpa_ie_len</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">wpa_is_gtk_set</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">host_cmd_ds_802_11_key_material</span> <span class="n">aes_key</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">wapi_ie</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">wapi_ie_len</span><span class="p">;</span>
	<span class="n">u8</span> <span class="o">*</span><span class="n">wps_ie</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">wps_ie_len</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">wmm_required</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">wmm_enabled</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">wmm_qosinfo</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_wmm_desc</span> <span class="n">wmm</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">tx_ba_stream_tbl_ptr</span><span class="p">;</span>
	<span class="cm">/* spin lock for tx_ba_stream_tbl_ptr queue */</span>
	<span class="n">spinlock_t</span> <span class="n">tx_ba_stream_tbl_lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_tx_aggr</span> <span class="n">aggr_prio_tbl</span><span class="p">[</span><span class="n">MAX_NUM_TID</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">mwifiex_add_ba_param</span> <span class="n">add_ba_param</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rx_seq</span><span class="p">[</span><span class="n">MAX_NUM_TID</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">rx_reorder_tbl_ptr</span><span class="p">;</span>
	<span class="cm">/* spin lock for rx_reorder_tbl_ptr queue */</span>
	<span class="n">spinlock_t</span> <span class="n">rx_reorder_tbl_lock</span><span class="p">;</span>
	<span class="cm">/* spin lock for Rx packets */</span>
	<span class="n">spinlock_t</span> <span class="n">rx_pkt_lock</span><span class="p">;</span>

<span class="cp">#define MWIFIEX_ASSOC_RSP_BUF_SIZE  500</span>
	<span class="n">u8</span> <span class="n">assoc_rsp_buf</span><span class="p">[</span><span class="n">MWIFIEX_ASSOC_RSP_BUF_SIZE</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">assoc_rsp_size</span><span class="p">;</span>

<span class="cp">#define MWIFIEX_GENIE_BUF_SIZE      256</span>
	<span class="n">u8</span> <span class="n">gen_ie_buf</span><span class="p">[</span><span class="n">MWIFIEX_GENIE_BUF_SIZE</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">gen_ie_buf_len</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">mwifiex_vendor_spec_cfg_ie</span> <span class="n">vs_ie</span><span class="p">[</span><span class="n">MWIFIEX_MAX_VSIE_NUM</span><span class="p">];</span>

<span class="cp">#define MWIFIEX_ASSOC_TLV_BUF_SIZE  256</span>
	<span class="n">u8</span> <span class="n">assoc_tlv_buf</span><span class="p">[</span><span class="n">MWIFIEX_ASSOC_TLV_BUF_SIZE</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">assoc_tlv_buf_len</span><span class="p">;</span>

	<span class="n">u8</span> <span class="o">*</span><span class="n">curr_bcn_buf</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">curr_bcn_size</span><span class="p">;</span>
	<span class="cm">/* spin lock for beacon buffer */</span>
	<span class="n">spinlock_t</span> <span class="n">curr_bcn_buf_lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">wireless_dev</span> <span class="o">*</span><span class="n">wdev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_chan_freq_power</span> <span class="n">cfp</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">version_str</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
<span class="cp">#ifdef CONFIG_DEBUG_FS</span>
	<span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="n">dfs_dev_dir</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="n">u8</span> <span class="n">nick_name</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">current_key_index</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">semaphore</span> <span class="n">async_sem</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">scan_pending_on_block</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">report_scan_result</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cfg80211_scan_request</span> <span class="o">*</span><span class="n">scan_request</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_user_scan_cfg</span> <span class="o">*</span><span class="n">user_scan_cfg</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cfg_bssid</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">wps</span> <span class="n">wps</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">scan_block</span><span class="p">;</span>
	<span class="n">s32</span> <span class="n">cqm_rssi_thold</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cqm_rssi_hyst</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">subsc_evt_rssi_state</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_ie</span> <span class="n">mgmt_ie</span><span class="p">[</span><span class="n">MAX_MGMT_IE_INDEX</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">beacon_idx</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">proberesp_idx</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">assocresp_idx</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rsn_idx</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">mwifiex_ba_status</span> <span class="p">{</span>
	<span class="n">BA_SETUP_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">BA_SETUP_INPROGRESS</span><span class="p">,</span>
	<span class="n">BA_SETUP_COMPLETE</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_tx_ba_stream_tbl</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">tid</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ra</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="k">enum</span> <span class="n">mwifiex_ba_status</span> <span class="n">ba_status</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_rx_reorder_tbl</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">reorder_tmr_cnxt</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_rx_reorder_tbl</span> <span class="o">*</span><span class="n">ptr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_rx_reorder_tbl</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">tid</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ta</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">start_win</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">win_size</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">**</span><span class="n">rx_reorder_ptr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">reorder_tmr_cnxt</span> <span class="n">timer_context</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_bss_prio_node</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_bss_prio_tbl</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">bss_prio_head</span><span class="p">;</span>
	<span class="cm">/* spin lock for bss priority  */</span>
	<span class="n">spinlock_t</span> <span class="n">bss_prio_lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_bss_prio_node</span> <span class="o">*</span><span class="n">bss_prio_cur</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cmd_ctrl_node</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cmd_oid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cmd_flag</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">cmd_skb</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">resp_skb</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">data_buf</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">wait_q_enabled</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">;</span>
	<span class="n">u8</span> <span class="o">*</span><span class="n">condition</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cmd_wait_q_woken</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_bss_priv</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">band</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">fw_tsf</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_if_ops</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">init_if</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">cleanup_if</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">check_fw_status</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">,</span> <span class="n">u32</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">prog_fw</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">mwifiex_fw_image</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">register_dev</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">unregister_dev</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">enable_int</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">process_int_status</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">host_to_card</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">,</span> <span class="n">u8</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span>
			     <span class="k">struct</span> <span class="n">mwifiex_tx_param</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">wakeup</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">wakeup_complete</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">);</span>

	<span class="cm">/* Interface specific functions */</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">update_mp_end_port</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">,</span> <span class="n">u16</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">cleanup_mpa_buf</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">cmdrsp_complete</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">event_complete</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">data_complete</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">dnld_fw</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">mwifiex_fw_image</span> <span class="o">*</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">iface_type</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">[</span><span class="n">MWIFIEX_MAX_BSS_NUM</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">priv_num</span><span class="p">;</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">firmware</span> <span class="o">*</span><span class="n">firmware</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">fw_name</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">winner</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">wiphy</span> <span class="o">*</span><span class="n">wiphy</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">surprise_removed</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fw_release_number</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">init_wait_q_woken</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">init_wait_q</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">card</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_if_ops</span> <span class="n">if_ops</span><span class="p">;</span>
	<span class="n">atomic_t</span> <span class="n">rx_pending</span><span class="p">;</span>
	<span class="n">atomic_t</span> <span class="n">tx_pending</span><span class="p">;</span>
	<span class="n">atomic_t</span> <span class="n">cmd_pending</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">workqueue_struct</span> <span class="o">*</span><span class="n">workqueue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">main_work</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_bss_prio_tbl</span> <span class="n">bss_prio_tbl</span><span class="p">[</span><span class="n">MWIFIEX_MAX_BSS_NUM</span><span class="p">];</span>
	<span class="cm">/* spin lock for init/shutdown */</span>
	<span class="n">spinlock_t</span> <span class="n">mwifiex_lock</span><span class="p">;</span>
	<span class="cm">/* spin lock for main process */</span>
	<span class="n">spinlock_t</span> <span class="n">main_proc_lock</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">mwifiex_processing</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">max_tx_buf_size</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">tx_buf_size</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">curr_tx_buf_size</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ioport</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">MWIFIEX_HARDWARE_STATUS</span> <span class="n">hw_status</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">number_of_antenna</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fw_cap_info</span><span class="p">;</span>
	<span class="cm">/* spin lock for interrupt handling */</span>
	<span class="n">spinlock_t</span> <span class="n">int_lock</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">int_status</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">event_cause</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">event_skb</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">upld_buf</span><span class="p">[</span><span class="n">MWIFIEX_UPLD_SIZE</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">data_sent</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cmd_sent</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cmd_resp_received</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">event_received</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data_received</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">seq_num</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cmd_ctrl_node</span> <span class="o">*</span><span class="n">cmd_pool</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cmd_ctrl_node</span> <span class="o">*</span><span class="n">curr_cmd</span><span class="p">;</span>
	<span class="cm">/* spin lock for command */</span>
	<span class="n">spinlock_t</span> <span class="n">mwifiex_cmd_lock</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">num_cmd_timeout</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">last_init_cmd</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">cmd_timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">cmd_free_q</span><span class="p">;</span>
	<span class="cm">/* spin lock for cmd_free_q */</span>
	<span class="n">spinlock_t</span> <span class="n">cmd_free_q_lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">cmd_pending_q</span><span class="p">;</span>
	<span class="cm">/* spin lock for cmd_pending_q */</span>
	<span class="n">spinlock_t</span> <span class="n">cmd_pending_q_lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">scan_pending_q</span><span class="p">;</span>
	<span class="cm">/* spin lock for scan_pending_q */</span>
	<span class="n">spinlock_t</span> <span class="n">scan_pending_q_lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="n">usb_rx_data_q</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">scan_processing</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">region_code</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_802_11d_domain_reg</span> <span class="n">domain_reg</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">scan_probes</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">scan_mode</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">specific_scan_time</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">active_scan_time</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">passive_scan_time</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">fw_bands</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">adhoc_start_band</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">config_bands</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_chan_scan_param_set</span> <span class="o">*</span><span class="n">scan_channels</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tx_lock_flag</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_sleep_params</span> <span class="n">sleep_params</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_sleep_period</span> <span class="n">sleep_period</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">ps_mode</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ps_state</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">need_to_wakeup</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">multiple_dtim</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">local_listen_interval</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">null_pkt_interval</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">sleep_cfm</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">bcn_miss_time_out</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">adhoc_awake_period</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">is_deep_sleep</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">delay_null_pkt</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">delay_to_ps</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">enhanced_ps_mode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">pm_wakeup_card_req</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">gen_null_pkt</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">pps_uapsd_mode</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pm_wakeup_fw_try</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">is_hs_configured</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_hs_config_param</span> <span class="n">hs_cfg</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">hs_activated</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">hs_activate_wait_q_woken</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">hs_activate_wait_q</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">is_suspended</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">event_body</span><span class="p">[</span><span class="n">MAX_EVENT_SIZE</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">hw_dot_11n_dev_cap</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">hw_dev_mcs_support</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">adhoc_11n_enabled</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">sec_chan_offset</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">nl80211_channel_type</span> <span class="n">channel_type</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_dbg</span> <span class="n">dbg</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">arp_filter</span><span class="p">[</span><span class="n">ARP_FILTER_MAX_BUF_SIZE</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">arp_filter_size</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">cmd_wait_q_required</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mwifiex_wait_queue</span> <span class="n">cmd_wait_q</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">scan_wait_q_woken</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cmd_ctrl_node</span> <span class="o">*</span><span class="n">cmd_queued</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">queue_lock</span><span class="p">;</span>		<span class="cm">/* lock for tx queues */</span>
	<span class="k">struct</span> <span class="n">completion</span> <span class="n">fw_load</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">country_code</span><span class="p">[</span><span class="n">IEEE80211_COUNTRY_STRING_LEN</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">max_mgmt_ie_index</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">mwifiex_init_lock_list</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">mwifiex_set_trans_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">mwifiex_stop_net_dev_queue</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">mwifiex_wake_up_net_dev_queue</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_init_fw</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_init_fw_complete</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_shutdown_drv</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_shutdown_fw_complete</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_dnld_fw</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">mwifiex_fw_image</span> <span class="o">*</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_recv_packet</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_process_event</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_complete_cmd</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
			 <span class="k">struct</span> <span class="n">cmd_ctrl_node</span> <span class="o">*</span><span class="n">cmd_node</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_send_cmd_async</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="kt">uint16_t</span> <span class="n">cmd_no</span><span class="p">,</span>
			   <span class="n">u16</span> <span class="n">cmd_action</span><span class="p">,</span> <span class="n">u32</span> <span class="n">cmd_oid</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data_buf</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_send_cmd_sync</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="kt">uint16_t</span> <span class="n">cmd_no</span><span class="p">,</span>
			  <span class="n">u16</span> <span class="n">cmd_action</span><span class="p">,</span> <span class="n">u32</span> <span class="n">cmd_oid</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data_buf</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">mwifiex_cmd_timeout_func</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">function_context</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_get_debug_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="p">,</span>
			   <span class="k">struct</span> <span class="n">mwifiex_debug_info</span> <span class="o">*</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_alloc_cmd_buffer</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_free_cmd_buffer</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">mwifiex_cancel_all_pending_cmd</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">mwifiex_cancel_pending_ioctl</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">mwifiex_insert_cmd_to_free_q</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">cmd_ctrl_node</span> <span class="o">*</span><span class="n">cmd_node</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">mwifiex_insert_cmd_to_pending_q</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">cmd_ctrl_node</span> <span class="o">*</span><span class="n">cmd_node</span><span class="p">,</span>
				     <span class="n">u32</span> <span class="n">addtail</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_exec_next_cmd</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_process_cmdresp</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_handle_rx_packet</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
			     <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_process_tx</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">,</span>
		       <span class="k">struct</span> <span class="n">mwifiex_tx_param</span> <span class="o">*</span><span class="n">tx_param</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_send_null_packet</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="n">u8</span> <span class="n">flags</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_write_data_complete</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">,</span> <span class="kt">int</span> <span class="n">status</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">mwifiex_clean_txrx</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">);</span>
<span class="n">u8</span> <span class="n">mwifiex_check_last_packet_indication</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">mwifiex_check_ps_cond</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">mwifiex_process_sleep_confirm_resp</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="p">,</span>
					<span class="n">u32</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_cmd_enh_power_mode</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			       <span class="k">struct</span> <span class="n">host_cmd_ds_command</span> <span class="o">*</span><span class="n">cmd</span><span class="p">,</span>
			       <span class="n">u16</span> <span class="n">cmd_action</span><span class="p">,</span> <span class="kt">uint16_t</span> <span class="n">ps_bitmap</span><span class="p">,</span>
			       <span class="k">struct</span> <span class="n">mwifiex_ds_auto_ds</span> <span class="o">*</span><span class="n">auto_ds</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_ret_enh_power_mode</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			       <span class="k">struct</span> <span class="n">host_cmd_ds_command</span> <span class="o">*</span><span class="n">resp</span><span class="p">,</span>
			       <span class="k">struct</span> <span class="n">mwifiex_ds_pm_cfg</span> <span class="o">*</span><span class="n">pm_cfg</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">mwifiex_process_hs_config</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">mwifiex_hs_activated_event</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
					<span class="n">u8</span> <span class="n">activated</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_ret_802_11_hs_cfg</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">host_cmd_ds_command</span> <span class="o">*</span><span class="n">resp</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_process_rx_packet</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_sta_prepare_cmd</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="p">,</span> <span class="kt">uint16_t</span> <span class="n">cmd_no</span><span class="p">,</span>
			    <span class="n">u16</span> <span class="n">cmd_action</span><span class="p">,</span> <span class="n">u32</span> <span class="n">cmd_oid</span><span class="p">,</span>
			    <span class="kt">void</span> <span class="o">*</span><span class="n">data_buf</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">cmd_buf</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_uap_prepare_cmd</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="kt">uint16_t</span> <span class="n">cmd_no</span><span class="p">,</span>
			    <span class="n">u16</span> <span class="n">cmd_action</span><span class="p">,</span> <span class="n">u32</span> <span class="n">cmd_oid</span><span class="p">,</span>
			    <span class="kt">void</span> <span class="o">*</span><span class="n">data_buf</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">cmd_buf</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_process_sta_cmdresp</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="p">,</span> <span class="n">u16</span> <span class="n">cmdresp_no</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">host_cmd_ds_command</span> <span class="o">*</span><span class="n">resp</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_process_sta_rx_packet</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_process_sta_event</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="o">*</span><span class="n">mwifiex_process_sta_txpd</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_sta_init_cmd</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="p">,</span> <span class="n">u8</span> <span class="n">first_sta</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_cmd_802_11_scan</span><span class="p">(</span><span class="k">struct</span> <span class="n">host_cmd_ds_command</span> <span class="o">*</span><span class="n">cmd</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">mwifiex_scan_cmd_config</span> <span class="o">*</span><span class="n">scan_cfg</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">mwifiex_queue_scan_cmd</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">cmd_ctrl_node</span> <span class="o">*</span><span class="n">cmd_node</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_ret_802_11_scan</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">host_cmd_ds_command</span> <span class="o">*</span><span class="n">resp</span><span class="p">);</span>
<span class="n">s32</span> <span class="n">mwifiex_ssid_cmp</span><span class="p">(</span><span class="k">struct</span> <span class="n">cfg80211_ssid</span> <span class="o">*</span><span class="n">ssid1</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cfg80211_ssid</span> <span class="o">*</span><span class="n">ssid2</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_associate</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
		      <span class="k">struct</span> <span class="n">mwifiex_bssdescriptor</span> <span class="o">*</span><span class="n">bss_desc</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_cmd_802_11_associate</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">host_cmd_ds_command</span> <span class="o">*</span><span class="n">cmd</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">mwifiex_bssdescriptor</span> <span class="o">*</span><span class="n">bss_desc</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_ret_802_11_associate</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">host_cmd_ds_command</span> <span class="o">*</span><span class="n">resp</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">mwifiex_reset_connect_state</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">);</span>
<span class="n">u8</span> <span class="n">mwifiex_band_to_radio_type</span><span class="p">(</span><span class="n">u8</span> <span class="n">band</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_deauthenticate</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">mac</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_adhoc_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">cfg80211_ssid</span> <span class="o">*</span><span class="n">adhoc_ssid</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_adhoc_join</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
		       <span class="k">struct</span> <span class="n">mwifiex_bssdescriptor</span> <span class="o">*</span><span class="n">bss_desc</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_cmd_802_11_ad_hoc_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">host_cmd_ds_command</span> <span class="o">*</span><span class="n">cmd</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">cfg80211_ssid</span> <span class="o">*</span><span class="n">req_ssid</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_cmd_802_11_ad_hoc_join</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
				   <span class="k">struct</span> <span class="n">host_cmd_ds_command</span> <span class="o">*</span><span class="n">cmd</span><span class="p">,</span>
				   <span class="k">struct</span> <span class="n">mwifiex_bssdescriptor</span> <span class="o">*</span><span class="n">bss_desc</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_ret_802_11_ad_hoc</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">host_cmd_ds_command</span> <span class="o">*</span><span class="n">resp</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_cmd_802_11_bg_scan_query</span><span class="p">(</span><span class="k">struct</span> <span class="n">host_cmd_ds_command</span> <span class="o">*</span><span class="n">cmd</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">mwifiex_chan_freq_power</span> <span class="o">*</span><span class="n">mwifiex_get_cfp</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
						<span class="n">u8</span> <span class="n">band</span><span class="p">,</span> <span class="n">u16</span> <span class="n">channel</span><span class="p">,</span> <span class="n">u32</span> <span class="n">freq</span><span class="p">);</span>
<span class="n">u32</span> <span class="n">mwifiex_index_to_data_rate</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="n">u8</span> <span class="n">index</span><span class="p">,</span>
							<span class="n">u8</span> <span class="n">ht_info</span><span class="p">);</span>
<span class="n">u32</span> <span class="n">mwifiex_find_freq_from_band_chan</span><span class="p">(</span><span class="n">u8</span><span class="p">,</span> <span class="n">u8</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_cmd_append_vsie_tlv</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="n">u16</span> <span class="n">vsie_mask</span><span class="p">,</span>
				<span class="n">u8</span> <span class="o">**</span><span class="n">buffer</span><span class="p">);</span>
<span class="n">u32</span> <span class="n">mwifiex_get_active_data_rates</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
				    <span class="n">u8</span> <span class="o">*</span><span class="n">rates</span><span class="p">);</span>
<span class="n">u32</span> <span class="n">mwifiex_get_supported_rates</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">rates</span><span class="p">);</span>
<span class="n">u8</span> <span class="n">mwifiex_data_rate_to_index</span><span class="p">(</span><span class="n">u32</span> <span class="n">rate</span><span class="p">);</span>
<span class="n">u8</span> <span class="n">mwifiex_is_rate_auto</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_get_rate_index</span><span class="p">(</span><span class="n">u16</span> <span class="o">*</span><span class="n">rateBitmap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u16</span> <span class="n">region_code_index</span><span class="p">[</span><span class="n">MWIFIEX_MAX_REGION_CODE</span><span class="p">];</span>
<span class="kt">void</span> <span class="n">mwifiex_save_curr_bcn</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">mwifiex_free_curr_bcn</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_cmd_get_hw_spec</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">host_cmd_ds_command</span> <span class="o">*</span><span class="n">cmd</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_ret_get_hw_spec</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">host_cmd_ds_command</span> <span class="o">*</span><span class="n">resp</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">is_command_pending</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">mwifiex_init_priv_params</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
						<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_set_secure_params</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">mwifiex_uap_bss_param</span> <span class="o">*</span><span class="n">bss_config</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">cfg80211_ap_settings</span> <span class="o">*</span><span class="n">params</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * This function checks if the queuing is RA based or not.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span>
<span class="nf">mwifiex_queuing_ra_based</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * Currently we assume if we are in Infra, then DA=RA. This might not be</span>
<span class="cm">	 * true in the future</span>
<span class="cm">	 */</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">priv</span><span class="o">-&gt;</span><span class="n">bss_mode</span> <span class="o">==</span> <span class="n">NL80211_IFTYPE_STATION</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	    <span class="p">(</span><span class="n">GET_BSS_ROLE</span><span class="p">(</span><span class="n">priv</span><span class="p">)</span> <span class="o">==</span> <span class="n">MWIFIEX_BSS_ROLE_STA</span><span class="p">))</span>
		<span class="k">return</span> <span class="nb">false</span><span class="p">;</span>

	<span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * This function copies rates.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span>
<span class="nf">mwifiex_copy_rates</span><span class="p">(</span><span class="n">u8</span> <span class="o">*</span><span class="n">dest</span><span class="p">,</span> <span class="n">u32</span> <span class="n">pos</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">src</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">src</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">pos</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">pos</span> <span class="o">&gt;=</span> <span class="n">MWIFIEX_SUPPORTED_RATES</span><span class="p">)</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="n">dest</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">=</span> <span class="n">src</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">pos</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * This function returns the correct private structure pointer based</span>
<span class="cm"> * upon the BSS type and BSS number.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span>
<span class="nf">mwifiex_get_priv_by_id</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
		       <span class="n">u8</span> <span class="n">bss_num</span><span class="p">,</span> <span class="n">u8</span> <span class="n">bss_type</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">adapter</span><span class="o">-&gt;</span><span class="n">priv_num</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">adapter</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">((</span><span class="n">adapter</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">bss_num</span> <span class="o">==</span> <span class="n">bss_num</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
			    <span class="p">(</span><span class="n">adapter</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">bss_type</span> <span class="o">==</span> <span class="n">bss_type</span><span class="p">))</span>
				<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="p">((</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">adapter</span><span class="o">-&gt;</span><span class="n">priv_num</span><span class="p">)</span> <span class="o">?</span> <span class="n">adapter</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * This function returns the first available private structure pointer</span>
<span class="cm"> * based upon the BSS role.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span>
<span class="nf">mwifiex_get_priv</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
		 <span class="k">enum</span> <span class="n">mwifiex_bss_role</span> <span class="n">bss_role</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">adapter</span><span class="o">-&gt;</span><span class="n">priv_num</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">adapter</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">bss_role</span> <span class="o">==</span> <span class="n">MWIFIEX_BSS_ROLE_ANY</span> <span class="o">||</span>
			    <span class="n">GET_BSS_ROLE</span><span class="p">(</span><span class="n">adapter</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="n">bss_role</span><span class="p">)</span>
				<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="p">((</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">adapter</span><span class="o">-&gt;</span><span class="n">priv_num</span><span class="p">)</span> <span class="o">?</span> <span class="n">adapter</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * This function returns the driver private structure of a network device.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span>
<span class="nf">mwifiex_netdev_get_priv</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="p">)</span> <span class="n">netdev_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">mwifiex_init_shutdown_fw</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			     <span class="n">u32</span> <span class="n">func_init_shutdown</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_add_card</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">semaphore</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">mwifiex_if_ops</span> <span class="o">*</span><span class="p">,</span> <span class="n">u8</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_remove_card</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">semaphore</span> <span class="o">*</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">mwifiex_get_version</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">version</span><span class="p">,</span>
			 <span class="kt">int</span> <span class="n">maxlen</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_request_set_multicast_list</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">mwifiex_multicast_list</span> <span class="o">*</span><span class="n">mcast_list</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_copy_mcast_addr</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_multicast_list</span> <span class="o">*</span><span class="n">mlist</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_wait_queue_complete</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_bss_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cfg80211_bss</span> <span class="o">*</span><span class="n">bss</span><span class="p">,</span>
		      <span class="k">struct</span> <span class="n">cfg80211_ssid</span> <span class="o">*</span><span class="n">req_ssid</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_cancel_hs</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cmd_type</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_enable_hs</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_disable_auto_ds</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_drv_get_data_rate</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">mwifiex_rate_cfg</span> <span class="o">*</span><span class="n">rate</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_request_scan</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			 <span class="k">struct</span> <span class="n">cfg80211_ssid</span> <span class="o">*</span><span class="n">req_ssid</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_set_user_scan_ioctl</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">mwifiex_user_scan_cfg</span> <span class="o">*</span><span class="n">scan_req</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_set_radio</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="n">u8</span> <span class="n">option</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_drv_change_adhoc_chan</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="n">u16</span> <span class="n">channel</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_set_encode</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">key</span><span class="p">,</span>
		       <span class="kt">int</span> <span class="n">key_len</span><span class="p">,</span> <span class="n">u8</span> <span class="n">key_index</span><span class="p">,</span> <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">mac_addr</span><span class="p">,</span>
		       <span class="kt">int</span> <span class="n">disable</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_set_gen_ie</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">ie</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ie_len</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_get_ver_ext</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_get_stats_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			   <span class="k">struct</span> <span class="n">mwifiex_ds_get_stats</span> <span class="o">*</span><span class="n">log</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_reg_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg_type</span><span class="p">,</span>
		      <span class="n">u32</span> <span class="n">reg_offset</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg_value</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_reg_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg_type</span><span class="p">,</span>
		     <span class="n">u32</span> <span class="n">reg_offset</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">value</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_eeprom_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="n">u16</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">bytes</span><span class="p">,</span>
			<span class="n">u8</span> <span class="o">*</span><span class="n">value</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_set_11n_httx_cfg</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">data</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_get_11n_httx_cfg</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_set_tx_rate_cfg</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">tx_rate_index</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_get_tx_rate_cfg</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">tx_rate_index</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_drv_set_power</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">ps_mode</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_drv_get_driver_version</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
				   <span class="kt">char</span> <span class="o">*</span><span class="n">version</span><span class="p">,</span> <span class="kt">int</span> <span class="n">max_len</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_set_tx_power</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			 <span class="k">struct</span> <span class="n">mwifiex_power_cfg</span> <span class="o">*</span><span class="n">power_cfg</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_main_process</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_uap_set_channel</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_bss_set_channel</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">mwifiex_chan_freq_power</span> <span class="o">*</span><span class="n">cfp</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_get_bss_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="p">,</span>
			 <span class="k">struct</span> <span class="n">mwifiex_bss_info</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_fill_new_bss_desc</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">cfg80211_bss</span> <span class="o">*</span><span class="n">bss</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">mwifiex_bssdescriptor</span> <span class="o">*</span><span class="n">bss_desc</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_update_bss_desc_with_ie</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">mwifiex_bssdescriptor</span> <span class="o">*</span><span class="n">bss_entry</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_check_network_compatibility</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
					<span class="k">struct</span> <span class="n">mwifiex_bssdescriptor</span> <span class="o">*</span><span class="n">bss_desc</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">mwifiex_add_virtual_intf</span><span class="p">(</span><span class="k">struct</span> <span class="n">wiphy</span> <span class="o">*</span><span class="n">wiphy</span><span class="p">,</span>
					<span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">,</span> <span class="k">enum</span> <span class="n">nl80211_iftype</span> <span class="n">type</span><span class="p">,</span>
					<span class="n">u32</span> <span class="o">*</span><span class="n">flags</span><span class="p">,</span> <span class="k">struct</span> <span class="n">vif_params</span> <span class="o">*</span><span class="n">params</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_del_virtual_intf</span><span class="p">(</span><span class="k">struct</span> <span class="n">wiphy</span> <span class="o">*</span><span class="n">wiphy</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">mwifiex_set_sys_config_invalid_data</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_uap_bss_param</span> <span class="o">*</span><span class="n">config</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">mwifiex_set_mgmt_ies</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">,</span>
			 <span class="k">struct</span> <span class="n">cfg80211_ap_settings</span> <span class="o">*</span><span class="n">params</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">mwifiex_del_mgmt_ies</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">);</span>
<span class="n">u8</span> <span class="o">*</span><span class="n">mwifiex_11d_code_2_region</span><span class="p">(</span><span class="n">u8</span> <span class="n">code</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_DEBUG_FS</span>
<span class="kt">void</span> <span class="n">mwifiex_debugfs_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">mwifiex_debugfs_remove</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">mwifiex_dev_debugfs_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">mwifiex_dev_debugfs_remove</span><span class="p">(</span><span class="k">struct</span> <span class="n">mwifiex_private</span> <span class="o">*</span><span class="n">priv</span><span class="p">);</span>
<span class="cp">#endif</span>
<span class="cp">#endif </span><span class="cm">/* !_MWIFIEX_MAIN_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
