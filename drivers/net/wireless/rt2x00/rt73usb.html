<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › wireless › rt2x00 › rt73usb.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>rt73usb.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">	Copyright (C) 2004 - 2009 Ivo van Doorn &lt;IvDoorn@gmail.com&gt;</span>
<span class="cm">	&lt;http://rt2x00.serialmonkey.com&gt;</span>

<span class="cm">	This program is free software; you can redistribute it and/or modify</span>
<span class="cm">	it under the terms of the GNU General Public License as published by</span>
<span class="cm">	the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm">	(at your option) any later version.</span>

<span class="cm">	This program is distributed in the hope that it will be useful,</span>
<span class="cm">	but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm">	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="cm">	GNU General Public License for more details.</span>

<span class="cm">	You should have received a copy of the GNU General Public License</span>
<span class="cm">	along with this program; if not, write to the</span>
<span class="cm">	Free Software Foundation, Inc.,</span>
<span class="cm">	59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm">	Module: rt73usb</span>
<span class="cm">	Abstract: Data structures and registers for the rt73usb module.</span>
<span class="cm">	Supported chipsets: rt2571W &amp; rt2671.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef RT73USB_H</span>
<span class="cp">#define RT73USB_H</span>

<span class="cm">/*</span>
<span class="cm"> * RF chip defines.</span>
<span class="cm"> */</span>
<span class="cp">#define RF5226				0x0001</span>
<span class="cp">#define RF2528				0x0002</span>
<span class="cp">#define RF5225				0x0003</span>
<span class="cp">#define RF2527				0x0004</span>

<span class="cm">/*</span>
<span class="cm"> * Signal information.</span>
<span class="cm"> * Default offset is required for RSSI &lt;-&gt; dBm conversion.</span>
<span class="cm"> */</span>
<span class="cp">#define DEFAULT_RSSI_OFFSET		120</span>

<span class="cm">/*</span>
<span class="cm"> * Register layout information.</span>
<span class="cm"> */</span>
<span class="cp">#define CSR_REG_BASE			0x3000</span>
<span class="cp">#define CSR_REG_SIZE			0x04b0</span>
<span class="cp">#define EEPROM_BASE			0x0000</span>
<span class="cp">#define EEPROM_SIZE			0x0100</span>
<span class="cp">#define BBP_BASE			0x0000</span>
<span class="cp">#define BBP_SIZE			0x0080</span>
<span class="cp">#define RF_BASE				0x0004</span>
<span class="cp">#define RF_SIZE				0x0010</span>

<span class="cm">/*</span>
<span class="cm"> * Number of TX queues.</span>
<span class="cm"> */</span>
<span class="cp">#define NUM_TX_QUEUES			4</span>

<span class="cm">/*</span>
<span class="cm"> * USB registers.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * MCU_LEDCS: LED control for MCU Mailbox.</span>
<span class="cm"> */</span>
<span class="cp">#define MCU_LEDCS_LED_MODE		FIELD16(0x001f)</span>
<span class="cp">#define MCU_LEDCS_RADIO_STATUS		FIELD16(0x0020)</span>
<span class="cp">#define MCU_LEDCS_LINK_BG_STATUS	FIELD16(0x0040)</span>
<span class="cp">#define MCU_LEDCS_LINK_A_STATUS		FIELD16(0x0080)</span>
<span class="cp">#define MCU_LEDCS_POLARITY_GPIO_0	FIELD16(0x0100)</span>
<span class="cp">#define MCU_LEDCS_POLARITY_GPIO_1	FIELD16(0x0200)</span>
<span class="cp">#define MCU_LEDCS_POLARITY_GPIO_2	FIELD16(0x0400)</span>
<span class="cp">#define MCU_LEDCS_POLARITY_GPIO_3	FIELD16(0x0800)</span>
<span class="cp">#define MCU_LEDCS_POLARITY_GPIO_4	FIELD16(0x1000)</span>
<span class="cp">#define MCU_LEDCS_POLARITY_ACT		FIELD16(0x2000)</span>
<span class="cp">#define MCU_LEDCS_POLARITY_READY_BG	FIELD16(0x4000)</span>
<span class="cp">#define MCU_LEDCS_POLARITY_READY_A	FIELD16(0x8000)</span>

<span class="cm">/*</span>
<span class="cm"> * 8051 firmware image.</span>
<span class="cm"> */</span>
<span class="cp">#define FIRMWARE_RT2571			&quot;rt73.bin&quot;</span>
<span class="cp">#define FIRMWARE_IMAGE_BASE		0x0800</span>

<span class="cm">/*</span>
<span class="cm"> * Security key table memory.</span>
<span class="cm"> * 16 entries 32-byte for shared key table</span>
<span class="cm"> * 64 entries 32-byte for pairwise key table</span>
<span class="cm"> * 64 entries 8-byte for pairwise ta key table</span>
<span class="cm"> */</span>
<span class="cp">#define SHARED_KEY_TABLE_BASE		0x1000</span>
<span class="cp">#define PAIRWISE_KEY_TABLE_BASE		0x1200</span>
<span class="cp">#define PAIRWISE_TA_TABLE_BASE		0x1a00</span>

<span class="cp">#define SHARED_KEY_ENTRY(__idx) \</span>
<span class="cp">	( SHARED_KEY_TABLE_BASE + \</span>
<span class="cp">		((__idx) * sizeof(struct hw_key_entry)) )</span>
<span class="cp">#define PAIRWISE_KEY_ENTRY(__idx) \</span>
<span class="cp">	( PAIRWISE_KEY_TABLE_BASE + \</span>
<span class="cp">		((__idx) * sizeof(struct hw_key_entry)) )</span>
<span class="cp">#define PAIRWISE_TA_ENTRY(__idx) \</span>
<span class="cp">	( PAIRWISE_TA_TABLE_BASE + \</span>
<span class="cp">		((__idx) * sizeof(struct hw_pairwise_ta_entry)) )</span>

<span class="k">struct</span> <span class="n">hw_key_entry</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">key</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">tx_mic</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">rx_mic</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">hw_pairwise_ta_entry</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">address</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">cipher</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reserved</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Since NULL frame won&#39;t be that long (256 byte),</span>
<span class="cm"> * We steal 16 tail bytes to save debugging settings.</span>
<span class="cm"> */</span>
<span class="cp">#define HW_DEBUG_SETTING_BASE		0x2bf0</span>

<span class="cm">/*</span>
<span class="cm"> * On-chip BEACON frame space.</span>
<span class="cm"> */</span>
<span class="cp">#define HW_BEACON_BASE0			0x2400</span>
<span class="cp">#define HW_BEACON_BASE1			0x2500</span>
<span class="cp">#define HW_BEACON_BASE2			0x2600</span>
<span class="cp">#define HW_BEACON_BASE3			0x2700</span>

<span class="cp">#define HW_BEACON_OFFSET(__index) \</span>
<span class="cp">	( HW_BEACON_BASE0 + (__index * 0x0100) )</span>

<span class="cm">/*</span>
<span class="cm"> * MAC Control/Status Registers(CSR).</span>
<span class="cm"> * Some values are set in TU, whereas 1 TU == 1024 us.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR0: ASIC revision number.</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR0			0x3000</span>
<span class="cp">#define MAC_CSR0_REVISION		FIELD32(0x0000000f)</span>
<span class="cp">#define MAC_CSR0_CHIPSET		FIELD32(0x000ffff0)</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR1: System control register.</span>
<span class="cm"> * SOFT_RESET: Software reset bit, 1: reset, 0: normal.</span>
<span class="cm"> * BBP_RESET: Hardware reset BBP.</span>
<span class="cm"> * HOST_READY: Host is ready after initialization, 1: ready.</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR1			0x3004</span>
<span class="cp">#define MAC_CSR1_SOFT_RESET		FIELD32(0x00000001)</span>
<span class="cp">#define MAC_CSR1_BBP_RESET		FIELD32(0x00000002)</span>
<span class="cp">#define MAC_CSR1_HOST_READY		FIELD32(0x00000004)</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR2: STA MAC register 0.</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR2			0x3008</span>
<span class="cp">#define MAC_CSR2_BYTE0			FIELD32(0x000000ff)</span>
<span class="cp">#define MAC_CSR2_BYTE1			FIELD32(0x0000ff00)</span>
<span class="cp">#define MAC_CSR2_BYTE2			FIELD32(0x00ff0000)</span>
<span class="cp">#define MAC_CSR2_BYTE3			FIELD32(0xff000000)</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR3: STA MAC register 1.</span>
<span class="cm"> * UNICAST_TO_ME_MASK:</span>
<span class="cm"> *	Used to mask off bits from byte 5 of the MAC address</span>
<span class="cm"> *	to determine the UNICAST_TO_ME bit for RX frames.</span>
<span class="cm"> *	The full mask is complemented by BSS_ID_MASK:</span>
<span class="cm"> *		MASK = BSS_ID_MASK &amp; UNICAST_TO_ME_MASK</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR3			0x300c</span>
<span class="cp">#define MAC_CSR3_BYTE4			FIELD32(0x000000ff)</span>
<span class="cp">#define MAC_CSR3_BYTE5			FIELD32(0x0000ff00)</span>
<span class="cp">#define MAC_CSR3_UNICAST_TO_ME_MASK	FIELD32(0x00ff0000)</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR4: BSSID register 0.</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR4			0x3010</span>
<span class="cp">#define MAC_CSR4_BYTE0			FIELD32(0x000000ff)</span>
<span class="cp">#define MAC_CSR4_BYTE1			FIELD32(0x0000ff00)</span>
<span class="cp">#define MAC_CSR4_BYTE2			FIELD32(0x00ff0000)</span>
<span class="cp">#define MAC_CSR4_BYTE3			FIELD32(0xff000000)</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR5: BSSID register 1.</span>
<span class="cm"> * BSS_ID_MASK:</span>
<span class="cm"> *	This mask is used to mask off bits 0 and 1 of byte 5 of the</span>
<span class="cm"> *	BSSID. This will make sure that those bits will be ignored</span>
<span class="cm"> *	when determining the MY_BSS of RX frames.</span>
<span class="cm"> *		0: 1-BSSID mode (BSS index = 0)</span>
<span class="cm"> *		1: 2-BSSID mode (BSS index: Byte5, bit 0)</span>
<span class="cm"> *		2: 2-BSSID mode (BSS index: byte5, bit 1)</span>
<span class="cm"> *		3: 4-BSSID mode (BSS index: byte5, bit 0 - 1)</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR5			0x3014</span>
<span class="cp">#define MAC_CSR5_BYTE4			FIELD32(0x000000ff)</span>
<span class="cp">#define MAC_CSR5_BYTE5			FIELD32(0x0000ff00)</span>
<span class="cp">#define MAC_CSR5_BSS_ID_MASK		FIELD32(0x00ff0000)</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR6: Maximum frame length register.</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR6			0x3018</span>
<span class="cp">#define MAC_CSR6_MAX_FRAME_UNIT		FIELD32(0x00000fff)</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR7: Reserved</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR7			0x301c</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR8: SIFS/EIFS register.</span>
<span class="cm"> * All units are in US.</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR8			0x3020</span>
<span class="cp">#define MAC_CSR8_SIFS			FIELD32(0x000000ff)</span>
<span class="cp">#define MAC_CSR8_SIFS_AFTER_RX_OFDM	FIELD32(0x0000ff00)</span>
<span class="cp">#define MAC_CSR8_EIFS			FIELD32(0xffff0000)</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR9: Back-Off control register.</span>
<span class="cm"> * SLOT_TIME: Slot time, default is 20us for 802.11BG.</span>
<span class="cm"> * CWMIN: Bit for Cwmin. default Cwmin is 31 (2^5 - 1).</span>
<span class="cm"> * CWMAX: Bit for Cwmax, default Cwmax is 1023 (2^10 - 1).</span>
<span class="cm"> * CW_SELECT: 1: CWmin/Cwmax select from register, 0:select from TxD.</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR9			0x3024</span>
<span class="cp">#define MAC_CSR9_SLOT_TIME		FIELD32(0x000000ff)</span>
<span class="cp">#define MAC_CSR9_CWMIN			FIELD32(0x00000f00)</span>
<span class="cp">#define MAC_CSR9_CWMAX			FIELD32(0x0000f000)</span>
<span class="cp">#define MAC_CSR9_CW_SELECT		FIELD32(0x00010000)</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR10: Power state configuration.</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR10			0x3028</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR11: Power saving transition time register.</span>
<span class="cm"> * DELAY_AFTER_TBCN: Delay after Tbcn expired in units of TU.</span>
<span class="cm"> * TBCN_BEFORE_WAKEUP: Number of beacon before wakeup.</span>
<span class="cm"> * WAKEUP_LATENCY: In unit of TU.</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR11			0x302c</span>
<span class="cp">#define MAC_CSR11_DELAY_AFTER_TBCN	FIELD32(0x000000ff)</span>
<span class="cp">#define MAC_CSR11_TBCN_BEFORE_WAKEUP	FIELD32(0x00007f00)</span>
<span class="cp">#define MAC_CSR11_AUTOWAKE		FIELD32(0x00008000)</span>
<span class="cp">#define MAC_CSR11_WAKEUP_LATENCY	FIELD32(0x000f0000)</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR12: Manual power control / status register (merge CSR20 &amp; PWRCSR1).</span>
<span class="cm"> * CURRENT_STATE: 0:sleep, 1:awake.</span>
<span class="cm"> * FORCE_WAKEUP: This has higher priority than PUT_TO_SLEEP.</span>
<span class="cm"> * BBP_CURRENT_STATE: 0: BBP sleep, 1: BBP awake.</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR12			0x3030</span>
<span class="cp">#define MAC_CSR12_CURRENT_STATE		FIELD32(0x00000001)</span>
<span class="cp">#define MAC_CSR12_PUT_TO_SLEEP		FIELD32(0x00000002)</span>
<span class="cp">#define MAC_CSR12_FORCE_WAKEUP		FIELD32(0x00000004)</span>
<span class="cp">#define MAC_CSR12_BBP_CURRENT_STATE	FIELD32(0x00000008)</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR13: GPIO.</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR13			0x3034</span>
<span class="cp">#define MAC_CSR13_BIT0			FIELD32(0x00000001)</span>
<span class="cp">#define MAC_CSR13_BIT1			FIELD32(0x00000002)</span>
<span class="cp">#define MAC_CSR13_BIT2			FIELD32(0x00000004)</span>
<span class="cp">#define MAC_CSR13_BIT3			FIELD32(0x00000008)</span>
<span class="cp">#define MAC_CSR13_BIT4			FIELD32(0x00000010)</span>
<span class="cp">#define MAC_CSR13_BIT5			FIELD32(0x00000020)</span>
<span class="cp">#define MAC_CSR13_BIT6			FIELD32(0x00000040)</span>
<span class="cp">#define MAC_CSR13_BIT7			FIELD32(0x00000080)</span>
<span class="cp">#define MAC_CSR13_BIT8			FIELD32(0x00000100)</span>
<span class="cp">#define MAC_CSR13_BIT9			FIELD32(0x00000200)</span>
<span class="cp">#define MAC_CSR13_BIT10			FIELD32(0x00000400)</span>
<span class="cp">#define MAC_CSR13_BIT11			FIELD32(0x00000800)</span>
<span class="cp">#define MAC_CSR13_BIT12			FIELD32(0x00001000)</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR14: LED control register.</span>
<span class="cm"> * ON_PERIOD: On period, default 70ms.</span>
<span class="cm"> * OFF_PERIOD: Off period, default 30ms.</span>
<span class="cm"> * HW_LED: HW TX activity, 1: normal OFF, 0: normal ON.</span>
<span class="cm"> * SW_LED: s/w LED, 1: ON, 0: OFF.</span>
<span class="cm"> * HW_LED_POLARITY: 0: active low, 1: active high.</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR14			0x3038</span>
<span class="cp">#define MAC_CSR14_ON_PERIOD		FIELD32(0x000000ff)</span>
<span class="cp">#define MAC_CSR14_OFF_PERIOD		FIELD32(0x0000ff00)</span>
<span class="cp">#define MAC_CSR14_HW_LED		FIELD32(0x00010000)</span>
<span class="cp">#define MAC_CSR14_SW_LED		FIELD32(0x00020000)</span>
<span class="cp">#define MAC_CSR14_HW_LED_POLARITY	FIELD32(0x00040000)</span>
<span class="cp">#define MAC_CSR14_SW_LED2		FIELD32(0x00080000)</span>

<span class="cm">/*</span>
<span class="cm"> * MAC_CSR15: NAV control.</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_CSR15			0x303c</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX control registers.</span>
<span class="cm"> * Some values are set in TU, whereas 1 TU == 1024 us.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR0: TX/RX configuration register.</span>
<span class="cm"> * TSF_OFFSET: Default is 24.</span>
<span class="cm"> * AUTO_TX_SEQ: 1: ASIC auto replace sequence nr in outgoing frame.</span>
<span class="cm"> * DISABLE_RX: Disable Rx engine.</span>
<span class="cm"> * DROP_CRC: Drop CRC error.</span>
<span class="cm"> * DROP_PHYSICAL: Drop physical error.</span>
<span class="cm"> * DROP_CONTROL: Drop control frame.</span>
<span class="cm"> * DROP_NOT_TO_ME: Drop not to me unicast frame.</span>
<span class="cm"> * DROP_TO_DS: Drop fram ToDs bit is true.</span>
<span class="cm"> * DROP_VERSION_ERROR: Drop version error frame.</span>
<span class="cm"> * DROP_MULTICAST: Drop multicast frames.</span>
<span class="cm"> * DROP_BORADCAST: Drop broadcast frames.</span>
<span class="cm"> * DROP_ACK_CTS: Drop received ACK and CTS.</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR0			0x3040</span>
<span class="cp">#define TXRX_CSR0_RX_ACK_TIMEOUT	FIELD32(0x000001ff)</span>
<span class="cp">#define TXRX_CSR0_TSF_OFFSET		FIELD32(0x00007e00)</span>
<span class="cp">#define TXRX_CSR0_AUTO_TX_SEQ		FIELD32(0x00008000)</span>
<span class="cp">#define TXRX_CSR0_DISABLE_RX		FIELD32(0x00010000)</span>
<span class="cp">#define TXRX_CSR0_DROP_CRC		FIELD32(0x00020000)</span>
<span class="cp">#define TXRX_CSR0_DROP_PHYSICAL		FIELD32(0x00040000)</span>
<span class="cp">#define TXRX_CSR0_DROP_CONTROL		FIELD32(0x00080000)</span>
<span class="cp">#define TXRX_CSR0_DROP_NOT_TO_ME	FIELD32(0x00100000)</span>
<span class="cp">#define TXRX_CSR0_DROP_TO_DS		FIELD32(0x00200000)</span>
<span class="cp">#define TXRX_CSR0_DROP_VERSION_ERROR	FIELD32(0x00400000)</span>
<span class="cp">#define TXRX_CSR0_DROP_MULTICAST	FIELD32(0x00800000)</span>
<span class="cp">#define TXRX_CSR0_DROP_BROADCAST	FIELD32(0x01000000)</span>
<span class="cp">#define TXRX_CSR0_DROP_ACK_CTS		FIELD32(0x02000000)</span>
<span class="cp">#define TXRX_CSR0_TX_WITHOUT_WAITING	FIELD32(0x04000000)</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR1</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR1			0x3044</span>
<span class="cp">#define TXRX_CSR1_BBP_ID0		FIELD32(0x0000007f)</span>
<span class="cp">#define TXRX_CSR1_BBP_ID0_VALID		FIELD32(0x00000080)</span>
<span class="cp">#define TXRX_CSR1_BBP_ID1		FIELD32(0x00007f00)</span>
<span class="cp">#define TXRX_CSR1_BBP_ID1_VALID		FIELD32(0x00008000)</span>
<span class="cp">#define TXRX_CSR1_BBP_ID2		FIELD32(0x007f0000)</span>
<span class="cp">#define TXRX_CSR1_BBP_ID2_VALID		FIELD32(0x00800000)</span>
<span class="cp">#define TXRX_CSR1_BBP_ID3		FIELD32(0x7f000000)</span>
<span class="cp">#define TXRX_CSR1_BBP_ID3_VALID		FIELD32(0x80000000)</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR2</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR2			0x3048</span>
<span class="cp">#define TXRX_CSR2_BBP_ID0		FIELD32(0x0000007f)</span>
<span class="cp">#define TXRX_CSR2_BBP_ID0_VALID		FIELD32(0x00000080)</span>
<span class="cp">#define TXRX_CSR2_BBP_ID1		FIELD32(0x00007f00)</span>
<span class="cp">#define TXRX_CSR2_BBP_ID1_VALID		FIELD32(0x00008000)</span>
<span class="cp">#define TXRX_CSR2_BBP_ID2		FIELD32(0x007f0000)</span>
<span class="cp">#define TXRX_CSR2_BBP_ID2_VALID		FIELD32(0x00800000)</span>
<span class="cp">#define TXRX_CSR2_BBP_ID3		FIELD32(0x7f000000)</span>
<span class="cp">#define TXRX_CSR2_BBP_ID3_VALID		FIELD32(0x80000000)</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR3</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR3			0x304c</span>
<span class="cp">#define TXRX_CSR3_BBP_ID0		FIELD32(0x0000007f)</span>
<span class="cp">#define TXRX_CSR3_BBP_ID0_VALID		FIELD32(0x00000080)</span>
<span class="cp">#define TXRX_CSR3_BBP_ID1		FIELD32(0x00007f00)</span>
<span class="cp">#define TXRX_CSR3_BBP_ID1_VALID		FIELD32(0x00008000)</span>
<span class="cp">#define TXRX_CSR3_BBP_ID2		FIELD32(0x007f0000)</span>
<span class="cp">#define TXRX_CSR3_BBP_ID2_VALID		FIELD32(0x00800000)</span>
<span class="cp">#define TXRX_CSR3_BBP_ID3		FIELD32(0x7f000000)</span>
<span class="cp">#define TXRX_CSR3_BBP_ID3_VALID		FIELD32(0x80000000)</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR4: Auto-Responder/Tx-retry register.</span>
<span class="cm"> * AUTORESPOND_PREAMBLE: 0:long, 1:short preamble.</span>
<span class="cm"> * OFDM_TX_RATE_DOWN: 1:enable.</span>
<span class="cm"> * OFDM_TX_RATE_STEP: 0:1-step, 1: 2-step, 2:3-step, 3:4-step.</span>
<span class="cm"> * OFDM_TX_FALLBACK_CCK: 0: Fallback to OFDM 6M only, 1: Fallback to CCK 1M,2M.</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR4			0x3050</span>
<span class="cp">#define TXRX_CSR4_TX_ACK_TIMEOUT	FIELD32(0x000000ff)</span>
<span class="cp">#define TXRX_CSR4_CNTL_ACK_POLICY	FIELD32(0x00000700)</span>
<span class="cp">#define TXRX_CSR4_ACK_CTS_PSM		FIELD32(0x00010000)</span>
<span class="cp">#define TXRX_CSR4_AUTORESPOND_ENABLE	FIELD32(0x00020000)</span>
<span class="cp">#define TXRX_CSR4_AUTORESPOND_PREAMBLE	FIELD32(0x00040000)</span>
<span class="cp">#define TXRX_CSR4_OFDM_TX_RATE_DOWN	FIELD32(0x00080000)</span>
<span class="cp">#define TXRX_CSR4_OFDM_TX_RATE_STEP	FIELD32(0x00300000)</span>
<span class="cp">#define TXRX_CSR4_OFDM_TX_FALLBACK_CCK	FIELD32(0x00400000)</span>
<span class="cp">#define TXRX_CSR4_LONG_RETRY_LIMIT	FIELD32(0x0f000000)</span>
<span class="cp">#define TXRX_CSR4_SHORT_RETRY_LIMIT	FIELD32(0xf0000000)</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR5</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR5			0x3054</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR6: ACK/CTS payload consumed time</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR6			0x3058</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR7: OFDM ACK/CTS payload consumed time for 6/9/12/18 mbps.</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR7			0x305c</span>
<span class="cp">#define TXRX_CSR7_ACK_CTS_6MBS		FIELD32(0x000000ff)</span>
<span class="cp">#define TXRX_CSR7_ACK_CTS_9MBS		FIELD32(0x0000ff00)</span>
<span class="cp">#define TXRX_CSR7_ACK_CTS_12MBS		FIELD32(0x00ff0000)</span>
<span class="cp">#define TXRX_CSR7_ACK_CTS_18MBS		FIELD32(0xff000000)</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR8: OFDM ACK/CTS payload consumed time for 24/36/48/54 mbps.</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR8			0x3060</span>
<span class="cp">#define TXRX_CSR8_ACK_CTS_24MBS		FIELD32(0x000000ff)</span>
<span class="cp">#define TXRX_CSR8_ACK_CTS_36MBS		FIELD32(0x0000ff00)</span>
<span class="cp">#define TXRX_CSR8_ACK_CTS_48MBS		FIELD32(0x00ff0000)</span>
<span class="cp">#define TXRX_CSR8_ACK_CTS_54MBS		FIELD32(0xff000000)</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR9: Synchronization control register.</span>
<span class="cm"> * BEACON_INTERVAL: In unit of 1/16 TU.</span>
<span class="cm"> * TSF_TICKING: Enable TSF auto counting.</span>
<span class="cm"> * TSF_SYNC: Tsf sync, 0: disable, 1: infra, 2: ad-hoc/master mode.</span>
<span class="cm"> * BEACON_GEN: Enable beacon generator.</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR9			0x3064</span>
<span class="cp">#define TXRX_CSR9_BEACON_INTERVAL	FIELD32(0x0000ffff)</span>
<span class="cp">#define TXRX_CSR9_TSF_TICKING		FIELD32(0x00010000)</span>
<span class="cp">#define TXRX_CSR9_TSF_SYNC		FIELD32(0x00060000)</span>
<span class="cp">#define TXRX_CSR9_TBTT_ENABLE		FIELD32(0x00080000)</span>
<span class="cp">#define TXRX_CSR9_BEACON_GEN		FIELD32(0x00100000)</span>
<span class="cp">#define TXRX_CSR9_TIMESTAMP_COMPENSATE	FIELD32(0xff000000)</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR10: BEACON alignment.</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR10			0x3068</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR11: AES mask.</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR11			0x306c</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR12: TSF low 32.</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR12			0x3070</span>
<span class="cp">#define TXRX_CSR12_LOW_TSFTIMER		FIELD32(0xffffffff)</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR13: TSF high 32.</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR13			0x3074</span>
<span class="cp">#define TXRX_CSR13_HIGH_TSFTIMER	FIELD32(0xffffffff)</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR14: TBTT timer.</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR14			0x3078</span>

<span class="cm">/*</span>
<span class="cm"> * TXRX_CSR15: TKIP MIC priority byte &quot;AND&quot; mask.</span>
<span class="cm"> */</span>
<span class="cp">#define TXRX_CSR15			0x307c</span>

<span class="cm">/*</span>
<span class="cm"> * PHY control registers.</span>
<span class="cm"> * Some values are set in TU, whereas 1 TU == 1024 us.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * PHY_CSR0: RF/PS control.</span>
<span class="cm"> */</span>
<span class="cp">#define PHY_CSR0			0x3080</span>
<span class="cp">#define PHY_CSR0_PA_PE_BG		FIELD32(0x00010000)</span>
<span class="cp">#define PHY_CSR0_PA_PE_A		FIELD32(0x00020000)</span>

<span class="cm">/*</span>
<span class="cm"> * PHY_CSR1</span>
<span class="cm"> */</span>
<span class="cp">#define PHY_CSR1			0x3084</span>
<span class="cp">#define PHY_CSR1_RF_RPI			FIELD32(0x00010000)</span>

<span class="cm">/*</span>
<span class="cm"> * PHY_CSR2: Pre-TX BBP control.</span>
<span class="cm"> */</span>
<span class="cp">#define PHY_CSR2			0x3088</span>

<span class="cm">/*</span>
<span class="cm"> * PHY_CSR3: BBP serial control register.</span>
<span class="cm"> * VALUE: Register value to program into BBP.</span>
<span class="cm"> * REG_NUM: Selected BBP register.</span>
<span class="cm"> * READ_CONTROL: 0: Write BBP, 1: Read BBP.</span>
<span class="cm"> * BUSY: 1: ASIC is busy execute BBP programming.</span>
<span class="cm"> */</span>
<span class="cp">#define PHY_CSR3			0x308c</span>
<span class="cp">#define PHY_CSR3_VALUE			FIELD32(0x000000ff)</span>
<span class="cp">#define PHY_CSR3_REGNUM			FIELD32(0x00007f00)</span>
<span class="cp">#define PHY_CSR3_READ_CONTROL		FIELD32(0x00008000)</span>
<span class="cp">#define PHY_CSR3_BUSY			FIELD32(0x00010000)</span>

<span class="cm">/*</span>
<span class="cm"> * PHY_CSR4: RF serial control register</span>
<span class="cm"> * VALUE: Register value (include register id) serial out to RF/IF chip.</span>
<span class="cm"> * NUMBER_OF_BITS: Number of bits used in RFRegValue (I:20, RFMD:22).</span>
<span class="cm"> * IF_SELECT: 1: select IF to program, 0: select RF to program.</span>
<span class="cm"> * PLL_LD: RF PLL_LD status.</span>
<span class="cm"> * BUSY: 1: ASIC is busy execute RF programming.</span>
<span class="cm"> */</span>
<span class="cp">#define PHY_CSR4			0x3090</span>
<span class="cp">#define PHY_CSR4_VALUE			FIELD32(0x00ffffff)</span>
<span class="cp">#define PHY_CSR4_NUMBER_OF_BITS		FIELD32(0x1f000000)</span>
<span class="cp">#define PHY_CSR4_IF_SELECT		FIELD32(0x20000000)</span>
<span class="cp">#define PHY_CSR4_PLL_LD			FIELD32(0x40000000)</span>
<span class="cp">#define PHY_CSR4_BUSY			FIELD32(0x80000000)</span>

<span class="cm">/*</span>
<span class="cm"> * PHY_CSR5: RX to TX signal switch timing control.</span>
<span class="cm"> */</span>
<span class="cp">#define PHY_CSR5			0x3094</span>
<span class="cp">#define PHY_CSR5_IQ_FLIP		FIELD32(0x00000004)</span>

<span class="cm">/*</span>
<span class="cm"> * PHY_CSR6: TX to RX signal timing control.</span>
<span class="cm"> */</span>
<span class="cp">#define PHY_CSR6			0x3098</span>
<span class="cp">#define PHY_CSR6_IQ_FLIP		FIELD32(0x00000004)</span>

<span class="cm">/*</span>
<span class="cm"> * PHY_CSR7: TX DAC switching timing control.</span>
<span class="cm"> */</span>
<span class="cp">#define PHY_CSR7			0x309c</span>

<span class="cm">/*</span>
<span class="cm"> * Security control register.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * SEC_CSR0: Shared key table control.</span>
<span class="cm"> */</span>
<span class="cp">#define SEC_CSR0			0x30a0</span>
<span class="cp">#define SEC_CSR0_BSS0_KEY0_VALID	FIELD32(0x00000001)</span>
<span class="cp">#define SEC_CSR0_BSS0_KEY1_VALID	FIELD32(0x00000002)</span>
<span class="cp">#define SEC_CSR0_BSS0_KEY2_VALID	FIELD32(0x00000004)</span>
<span class="cp">#define SEC_CSR0_BSS0_KEY3_VALID	FIELD32(0x00000008)</span>
<span class="cp">#define SEC_CSR0_BSS1_KEY0_VALID	FIELD32(0x00000010)</span>
<span class="cp">#define SEC_CSR0_BSS1_KEY1_VALID	FIELD32(0x00000020)</span>
<span class="cp">#define SEC_CSR0_BSS1_KEY2_VALID	FIELD32(0x00000040)</span>
<span class="cp">#define SEC_CSR0_BSS1_KEY3_VALID	FIELD32(0x00000080)</span>
<span class="cp">#define SEC_CSR0_BSS2_KEY0_VALID	FIELD32(0x00000100)</span>
<span class="cp">#define SEC_CSR0_BSS2_KEY1_VALID	FIELD32(0x00000200)</span>
<span class="cp">#define SEC_CSR0_BSS2_KEY2_VALID	FIELD32(0x00000400)</span>
<span class="cp">#define SEC_CSR0_BSS2_KEY3_VALID	FIELD32(0x00000800)</span>
<span class="cp">#define SEC_CSR0_BSS3_KEY0_VALID	FIELD32(0x00001000)</span>
<span class="cp">#define SEC_CSR0_BSS3_KEY1_VALID	FIELD32(0x00002000)</span>
<span class="cp">#define SEC_CSR0_BSS3_KEY2_VALID	FIELD32(0x00004000)</span>
<span class="cp">#define SEC_CSR0_BSS3_KEY3_VALID	FIELD32(0x00008000)</span>

<span class="cm">/*</span>
<span class="cm"> * SEC_CSR1: Shared key table security mode register.</span>
<span class="cm"> */</span>
<span class="cp">#define SEC_CSR1			0x30a4</span>
<span class="cp">#define SEC_CSR1_BSS0_KEY0_CIPHER_ALG	FIELD32(0x00000007)</span>
<span class="cp">#define SEC_CSR1_BSS0_KEY1_CIPHER_ALG	FIELD32(0x00000070)</span>
<span class="cp">#define SEC_CSR1_BSS0_KEY2_CIPHER_ALG	FIELD32(0x00000700)</span>
<span class="cp">#define SEC_CSR1_BSS0_KEY3_CIPHER_ALG	FIELD32(0x00007000)</span>
<span class="cp">#define SEC_CSR1_BSS1_KEY0_CIPHER_ALG	FIELD32(0x00070000)</span>
<span class="cp">#define SEC_CSR1_BSS1_KEY1_CIPHER_ALG	FIELD32(0x00700000)</span>
<span class="cp">#define SEC_CSR1_BSS1_KEY2_CIPHER_ALG	FIELD32(0x07000000)</span>
<span class="cp">#define SEC_CSR1_BSS1_KEY3_CIPHER_ALG	FIELD32(0x70000000)</span>

<span class="cm">/*</span>
<span class="cm"> * Pairwise key table valid bitmap registers.</span>
<span class="cm"> * SEC_CSR2: pairwise key table valid bitmap 0.</span>
<span class="cm"> * SEC_CSR3: pairwise key table valid bitmap 1.</span>
<span class="cm"> */</span>
<span class="cp">#define SEC_CSR2			0x30a8</span>
<span class="cp">#define SEC_CSR3			0x30ac</span>

<span class="cm">/*</span>
<span class="cm"> * SEC_CSR4: Pairwise key table lookup control.</span>
<span class="cm"> */</span>
<span class="cp">#define SEC_CSR4			0x30b0</span>
<span class="cp">#define SEC_CSR4_ENABLE_BSS0		FIELD32(0x00000001)</span>
<span class="cp">#define SEC_CSR4_ENABLE_BSS1		FIELD32(0x00000002)</span>
<span class="cp">#define SEC_CSR4_ENABLE_BSS2		FIELD32(0x00000004)</span>
<span class="cp">#define SEC_CSR4_ENABLE_BSS3		FIELD32(0x00000008)</span>

<span class="cm">/*</span>
<span class="cm"> * SEC_CSR5: shared key table security mode register.</span>
<span class="cm"> */</span>
<span class="cp">#define SEC_CSR5			0x30b4</span>
<span class="cp">#define SEC_CSR5_BSS2_KEY0_CIPHER_ALG	FIELD32(0x00000007)</span>
<span class="cp">#define SEC_CSR5_BSS2_KEY1_CIPHER_ALG	FIELD32(0x00000070)</span>
<span class="cp">#define SEC_CSR5_BSS2_KEY2_CIPHER_ALG	FIELD32(0x00000700)</span>
<span class="cp">#define SEC_CSR5_BSS2_KEY3_CIPHER_ALG	FIELD32(0x00007000)</span>
<span class="cp">#define SEC_CSR5_BSS3_KEY0_CIPHER_ALG	FIELD32(0x00070000)</span>
<span class="cp">#define SEC_CSR5_BSS3_KEY1_CIPHER_ALG	FIELD32(0x00700000)</span>
<span class="cp">#define SEC_CSR5_BSS3_KEY2_CIPHER_ALG	FIELD32(0x07000000)</span>
<span class="cp">#define SEC_CSR5_BSS3_KEY3_CIPHER_ALG	FIELD32(0x70000000)</span>

<span class="cm">/*</span>
<span class="cm"> * STA control registers.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * STA_CSR0: RX PLCP error count &amp; RX FCS error count.</span>
<span class="cm"> */</span>
<span class="cp">#define STA_CSR0			0x30c0</span>
<span class="cp">#define STA_CSR0_FCS_ERROR		FIELD32(0x0000ffff)</span>
<span class="cp">#define STA_CSR0_PLCP_ERROR		FIELD32(0xffff0000)</span>

<span class="cm">/*</span>
<span class="cm"> * STA_CSR1: RX False CCA count &amp; RX LONG frame count.</span>
<span class="cm"> */</span>
<span class="cp">#define STA_CSR1			0x30c4</span>
<span class="cp">#define STA_CSR1_PHYSICAL_ERROR		FIELD32(0x0000ffff)</span>
<span class="cp">#define STA_CSR1_FALSE_CCA_ERROR	FIELD32(0xffff0000)</span>

<span class="cm">/*</span>
<span class="cm"> * STA_CSR2: TX Beacon count and RX FIFO overflow count.</span>
<span class="cm"> */</span>
<span class="cp">#define STA_CSR2			0x30c8</span>
<span class="cp">#define STA_CSR2_RX_FIFO_OVERFLOW_COUNT	FIELD32(0x0000ffff)</span>
<span class="cp">#define STA_CSR2_RX_OVERFLOW_COUNT	FIELD32(0xffff0000)</span>

<span class="cm">/*</span>
<span class="cm"> * STA_CSR3: TX Beacon count.</span>
<span class="cm"> */</span>
<span class="cp">#define STA_CSR3			0x30cc</span>
<span class="cp">#define STA_CSR3_TX_BEACON_COUNT	FIELD32(0x0000ffff)</span>

<span class="cm">/*</span>
<span class="cm"> * STA_CSR4: TX Retry count.</span>
<span class="cm"> */</span>
<span class="cp">#define STA_CSR4			0x30d0</span>
<span class="cp">#define STA_CSR4_TX_NO_RETRY_COUNT	FIELD32(0x0000ffff)</span>
<span class="cp">#define STA_CSR4_TX_ONE_RETRY_COUNT	FIELD32(0xffff0000)</span>

<span class="cm">/*</span>
<span class="cm"> * STA_CSR5: TX Retry count.</span>
<span class="cm"> */</span>
<span class="cp">#define STA_CSR5			0x30d4</span>
<span class="cp">#define STA_CSR4_TX_MULTI_RETRY_COUNT	FIELD32(0x0000ffff)</span>
<span class="cp">#define STA_CSR4_TX_RETRY_FAIL_COUNT	FIELD32(0xffff0000)</span>

<span class="cm">/*</span>
<span class="cm"> * QOS control registers.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * QOS_CSR1: TXOP holder MAC address register.</span>
<span class="cm"> */</span>
<span class="cp">#define QOS_CSR1			0x30e4</span>
<span class="cp">#define QOS_CSR1_BYTE4			FIELD32(0x000000ff)</span>
<span class="cp">#define QOS_CSR1_BYTE5			FIELD32(0x0000ff00)</span>

<span class="cm">/*</span>
<span class="cm"> * QOS_CSR2: TXOP holder timeout register.</span>
<span class="cm"> */</span>
<span class="cp">#define QOS_CSR2			0x30e8</span>

<span class="cm">/*</span>
<span class="cm"> * RX QOS-CFPOLL MAC address register.</span>
<span class="cm"> * QOS_CSR3: RX QOS-CFPOLL MAC address 0.</span>
<span class="cm"> * QOS_CSR4: RX QOS-CFPOLL MAC address 1.</span>
<span class="cm"> */</span>
<span class="cp">#define QOS_CSR3			0x30ec</span>
<span class="cp">#define QOS_CSR4			0x30f0</span>

<span class="cm">/*</span>
<span class="cm"> * QOS_CSR5: &quot;QosControl&quot; field of the RX QOS-CFPOLL.</span>
<span class="cm"> */</span>
<span class="cp">#define QOS_CSR5			0x30f4</span>

<span class="cm">/*</span>
<span class="cm"> * WMM Scheduler Register</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * AIFSN_CSR: AIFSN for each EDCA AC.</span>
<span class="cm"> * AIFSN0: For AC_VO.</span>
<span class="cm"> * AIFSN1: For AC_VI.</span>
<span class="cm"> * AIFSN2: For AC_BE.</span>
<span class="cm"> * AIFSN3: For AC_BK.</span>
<span class="cm"> */</span>
<span class="cp">#define AIFSN_CSR			0x0400</span>
<span class="cp">#define AIFSN_CSR_AIFSN0		FIELD32(0x0000000f)</span>
<span class="cp">#define AIFSN_CSR_AIFSN1		FIELD32(0x000000f0)</span>
<span class="cp">#define AIFSN_CSR_AIFSN2		FIELD32(0x00000f00)</span>
<span class="cp">#define AIFSN_CSR_AIFSN3		FIELD32(0x0000f000)</span>

<span class="cm">/*</span>
<span class="cm"> * CWMIN_CSR: CWmin for each EDCA AC.</span>
<span class="cm"> * CWMIN0: For AC_VO.</span>
<span class="cm"> * CWMIN1: For AC_VI.</span>
<span class="cm"> * CWMIN2: For AC_BE.</span>
<span class="cm"> * CWMIN3: For AC_BK.</span>
<span class="cm"> */</span>
<span class="cp">#define CWMIN_CSR			0x0404</span>
<span class="cp">#define CWMIN_CSR_CWMIN0		FIELD32(0x0000000f)</span>
<span class="cp">#define CWMIN_CSR_CWMIN1		FIELD32(0x000000f0)</span>
<span class="cp">#define CWMIN_CSR_CWMIN2		FIELD32(0x00000f00)</span>
<span class="cp">#define CWMIN_CSR_CWMIN3		FIELD32(0x0000f000)</span>

<span class="cm">/*</span>
<span class="cm"> * CWMAX_CSR: CWmax for each EDCA AC.</span>
<span class="cm"> * CWMAX0: For AC_VO.</span>
<span class="cm"> * CWMAX1: For AC_VI.</span>
<span class="cm"> * CWMAX2: For AC_BE.</span>
<span class="cm"> * CWMAX3: For AC_BK.</span>
<span class="cm"> */</span>
<span class="cp">#define CWMAX_CSR			0x0408</span>
<span class="cp">#define CWMAX_CSR_CWMAX0		FIELD32(0x0000000f)</span>
<span class="cp">#define CWMAX_CSR_CWMAX1		FIELD32(0x000000f0)</span>
<span class="cp">#define CWMAX_CSR_CWMAX2		FIELD32(0x00000f00)</span>
<span class="cp">#define CWMAX_CSR_CWMAX3		FIELD32(0x0000f000)</span>

<span class="cm">/*</span>
<span class="cm"> * AC_TXOP_CSR0: AC_VO/AC_VI TXOP register.</span>
<span class="cm"> * AC0_TX_OP: For AC_VO, in unit of 32us.</span>
<span class="cm"> * AC1_TX_OP: For AC_VI, in unit of 32us.</span>
<span class="cm"> */</span>
<span class="cp">#define AC_TXOP_CSR0			0x040c</span>
<span class="cp">#define AC_TXOP_CSR0_AC0_TX_OP		FIELD32(0x0000ffff)</span>
<span class="cp">#define AC_TXOP_CSR0_AC1_TX_OP		FIELD32(0xffff0000)</span>

<span class="cm">/*</span>
<span class="cm"> * AC_TXOP_CSR1: AC_BE/AC_BK TXOP register.</span>
<span class="cm"> * AC2_TX_OP: For AC_BE, in unit of 32us.</span>
<span class="cm"> * AC3_TX_OP: For AC_BK, in unit of 32us.</span>
<span class="cm"> */</span>
<span class="cp">#define AC_TXOP_CSR1			0x0410</span>
<span class="cp">#define AC_TXOP_CSR1_AC2_TX_OP		FIELD32(0x0000ffff)</span>
<span class="cp">#define AC_TXOP_CSR1_AC3_TX_OP		FIELD32(0xffff0000)</span>

<span class="cm">/*</span>
<span class="cm"> * BBP registers.</span>
<span class="cm"> * The wordsize of the BBP is 8 bits.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * R2</span>
<span class="cm"> */</span>
<span class="cp">#define BBP_R2_BG_MODE			FIELD8(0x20)</span>

<span class="cm">/*</span>
<span class="cm"> * R3</span>
<span class="cm"> */</span>
<span class="cp">#define BBP_R3_SMART_MODE		FIELD8(0x01)</span>

<span class="cm">/*</span>
<span class="cm"> * R4: RX antenna control</span>
<span class="cm"> * FRAME_END: 1 - DPDT, 0 - SPDT (Only valid for 802.11G, RF2527 &amp; RF2529)</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * ANTENNA_CONTROL semantics (guessed):</span>
<span class="cm"> * 0x1: Software controlled antenna switching (fixed or SW diversity)</span>
<span class="cm"> * 0x2: Hardware diversity.</span>
<span class="cm"> */</span>
<span class="cp">#define BBP_R4_RX_ANTENNA_CONTROL	FIELD8(0x03)</span>
<span class="cp">#define BBP_R4_RX_FRAME_END		FIELD8(0x20)</span>

<span class="cm">/*</span>
<span class="cm"> * R77</span>
<span class="cm"> */</span>
<span class="cp">#define BBP_R77_RX_ANTENNA		FIELD8(0x03)</span>

<span class="cm">/*</span>
<span class="cm"> * RF registers</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * RF 3</span>
<span class="cm"> */</span>
<span class="cp">#define RF3_TXPOWER			FIELD32(0x00003e00)</span>

<span class="cm">/*</span>
<span class="cm"> * RF 4</span>
<span class="cm"> */</span>
<span class="cp">#define RF4_FREQ_OFFSET			FIELD32(0x0003f000)</span>

<span class="cm">/*</span>
<span class="cm"> * EEPROM content.</span>
<span class="cm"> * The wordsize of the EEPROM is 16 bits.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * HW MAC address.</span>
<span class="cm"> */</span>
<span class="cp">#define EEPROM_MAC_ADDR_0		0x0002</span>
<span class="cp">#define EEPROM_MAC_ADDR_BYTE0		FIELD16(0x00ff)</span>
<span class="cp">#define EEPROM_MAC_ADDR_BYTE1		FIELD16(0xff00)</span>
<span class="cp">#define EEPROM_MAC_ADDR1		0x0003</span>
<span class="cp">#define EEPROM_MAC_ADDR_BYTE2		FIELD16(0x00ff)</span>
<span class="cp">#define EEPROM_MAC_ADDR_BYTE3		FIELD16(0xff00)</span>
<span class="cp">#define EEPROM_MAC_ADDR_2		0x0004</span>
<span class="cp">#define EEPROM_MAC_ADDR_BYTE4		FIELD16(0x00ff)</span>
<span class="cp">#define EEPROM_MAC_ADDR_BYTE5		FIELD16(0xff00)</span>

<span class="cm">/*</span>
<span class="cm"> * EEPROM antenna.</span>
<span class="cm"> * ANTENNA_NUM: Number of antennas.</span>
<span class="cm"> * TX_DEFAULT: Default antenna 0: diversity, 1: A, 2: B.</span>
<span class="cm"> * RX_DEFAULT: Default antenna 0: diversity, 1: A, 2: B.</span>
<span class="cm"> * FRAME_TYPE: 0: DPDT , 1: SPDT , noted this bit is valid for g only.</span>
<span class="cm"> * DYN_TXAGC: Dynamic TX AGC control.</span>
<span class="cm"> * HARDWARE_RADIO: 1: Hardware controlled radio. Read GPIO0.</span>
<span class="cm"> * RF_TYPE: Rf_type of this adapter.</span>
<span class="cm"> */</span>
<span class="cp">#define EEPROM_ANTENNA			0x0010</span>
<span class="cp">#define EEPROM_ANTENNA_NUM		FIELD16(0x0003)</span>
<span class="cp">#define EEPROM_ANTENNA_TX_DEFAULT	FIELD16(0x000c)</span>
<span class="cp">#define EEPROM_ANTENNA_RX_DEFAULT	FIELD16(0x0030)</span>
<span class="cp">#define EEPROM_ANTENNA_FRAME_TYPE	FIELD16(0x0040)</span>
<span class="cp">#define EEPROM_ANTENNA_DYN_TXAGC	FIELD16(0x0200)</span>
<span class="cp">#define EEPROM_ANTENNA_HARDWARE_RADIO	FIELD16(0x0400)</span>
<span class="cp">#define EEPROM_ANTENNA_RF_TYPE		FIELD16(0xf800)</span>

<span class="cm">/*</span>
<span class="cm"> * EEPROM NIC config.</span>
<span class="cm"> * EXTERNAL_LNA: External LNA.</span>
<span class="cm"> */</span>
<span class="cp">#define EEPROM_NIC			0x0011</span>
<span class="cp">#define EEPROM_NIC_EXTERNAL_LNA		FIELD16(0x0010)</span>

<span class="cm">/*</span>
<span class="cm"> * EEPROM geography.</span>
<span class="cm"> * GEO_A: Default geographical setting for 5GHz band</span>
<span class="cm"> * GEO: Default geographical setting.</span>
<span class="cm"> */</span>
<span class="cp">#define EEPROM_GEOGRAPHY		0x0012</span>
<span class="cp">#define EEPROM_GEOGRAPHY_GEO_A		FIELD16(0x00ff)</span>
<span class="cp">#define EEPROM_GEOGRAPHY_GEO		FIELD16(0xff00)</span>

<span class="cm">/*</span>
<span class="cm"> * EEPROM BBP.</span>
<span class="cm"> */</span>
<span class="cp">#define EEPROM_BBP_START		0x0013</span>
<span class="cp">#define EEPROM_BBP_SIZE			16</span>
<span class="cp">#define EEPROM_BBP_VALUE		FIELD16(0x00ff)</span>
<span class="cp">#define EEPROM_BBP_REG_ID		FIELD16(0xff00)</span>

<span class="cm">/*</span>
<span class="cm"> * EEPROM TXPOWER 802.11G</span>
<span class="cm"> */</span>
<span class="cp">#define EEPROM_TXPOWER_G_START		0x0023</span>
<span class="cp">#define EEPROM_TXPOWER_G_SIZE		7</span>
<span class="cp">#define EEPROM_TXPOWER_G_1		FIELD16(0x00ff)</span>
<span class="cp">#define EEPROM_TXPOWER_G_2		FIELD16(0xff00)</span>

<span class="cm">/*</span>
<span class="cm"> * EEPROM Frequency</span>
<span class="cm"> */</span>
<span class="cp">#define EEPROM_FREQ			0x002f</span>
<span class="cp">#define EEPROM_FREQ_OFFSET		FIELD16(0x00ff)</span>
<span class="cp">#define EEPROM_FREQ_SEQ_MASK		FIELD16(0xff00)</span>
<span class="cp">#define EEPROM_FREQ_SEQ			FIELD16(0x0300)</span>

<span class="cm">/*</span>
<span class="cm"> * EEPROM LED.</span>
<span class="cm"> * POLARITY_RDY_G: Polarity RDY_G setting.</span>
<span class="cm"> * POLARITY_RDY_A: Polarity RDY_A setting.</span>
<span class="cm"> * POLARITY_ACT: Polarity ACT setting.</span>
<span class="cm"> * POLARITY_GPIO_0: Polarity GPIO0 setting.</span>
<span class="cm"> * POLARITY_GPIO_1: Polarity GPIO1 setting.</span>
<span class="cm"> * POLARITY_GPIO_2: Polarity GPIO2 setting.</span>
<span class="cm"> * POLARITY_GPIO_3: Polarity GPIO3 setting.</span>
<span class="cm"> * POLARITY_GPIO_4: Polarity GPIO4 setting.</span>
<span class="cm"> * LED_MODE: Led mode.</span>
<span class="cm"> */</span>
<span class="cp">#define EEPROM_LED			0x0030</span>
<span class="cp">#define EEPROM_LED_POLARITY_RDY_G	FIELD16(0x0001)</span>
<span class="cp">#define EEPROM_LED_POLARITY_RDY_A	FIELD16(0x0002)</span>
<span class="cp">#define EEPROM_LED_POLARITY_ACT		FIELD16(0x0004)</span>
<span class="cp">#define EEPROM_LED_POLARITY_GPIO_0	FIELD16(0x0008)</span>
<span class="cp">#define EEPROM_LED_POLARITY_GPIO_1	FIELD16(0x0010)</span>
<span class="cp">#define EEPROM_LED_POLARITY_GPIO_2	FIELD16(0x0020)</span>
<span class="cp">#define EEPROM_LED_POLARITY_GPIO_3	FIELD16(0x0040)</span>
<span class="cp">#define EEPROM_LED_POLARITY_GPIO_4	FIELD16(0x0080)</span>
<span class="cp">#define EEPROM_LED_LED_MODE		FIELD16(0x1f00)</span>

<span class="cm">/*</span>
<span class="cm"> * EEPROM TXPOWER 802.11A</span>
<span class="cm"> */</span>
<span class="cp">#define EEPROM_TXPOWER_A_START		0x0031</span>
<span class="cp">#define EEPROM_TXPOWER_A_SIZE		12</span>
<span class="cp">#define EEPROM_TXPOWER_A_1		FIELD16(0x00ff)</span>
<span class="cp">#define EEPROM_TXPOWER_A_2		FIELD16(0xff00)</span>

<span class="cm">/*</span>
<span class="cm"> * EEPROM RSSI offset 802.11BG</span>
<span class="cm"> */</span>
<span class="cp">#define EEPROM_RSSI_OFFSET_BG		0x004d</span>
<span class="cp">#define EEPROM_RSSI_OFFSET_BG_1		FIELD16(0x00ff)</span>
<span class="cp">#define EEPROM_RSSI_OFFSET_BG_2		FIELD16(0xff00)</span>

<span class="cm">/*</span>
<span class="cm"> * EEPROM RSSI offset 802.11A</span>
<span class="cm"> */</span>
<span class="cp">#define EEPROM_RSSI_OFFSET_A		0x004e</span>
<span class="cp">#define EEPROM_RSSI_OFFSET_A_1		FIELD16(0x00ff)</span>
<span class="cp">#define EEPROM_RSSI_OFFSET_A_2		FIELD16(0xff00)</span>

<span class="cm">/*</span>
<span class="cm"> * DMA descriptor defines.</span>
<span class="cm"> */</span>
<span class="cp">#define TXD_DESC_SIZE			( 6 * sizeof(__le32) )</span>
<span class="cp">#define TXINFO_SIZE			( 6 * sizeof(__le32) )</span>
<span class="cp">#define RXD_DESC_SIZE			( 6 * sizeof(__le32) )</span>

<span class="cm">/*</span>
<span class="cm"> * TX descriptor format for TX, PRIO and Beacon Ring.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * Word0</span>
<span class="cm"> * BURST: Next frame belongs to same &quot;burst&quot; event.</span>
<span class="cm"> * TKIP_MIC: ASIC appends TKIP MIC if TKIP is used.</span>
<span class="cm"> * KEY_TABLE: Use per-client pairwise KEY table.</span>
<span class="cm"> * KEY_INDEX:</span>
<span class="cm"> * Key index (0~31) to the pairwise KEY table.</span>
<span class="cm"> * 0~3 to shared KEY table 0 (BSS0).</span>
<span class="cm"> * 4~7 to shared KEY table 1 (BSS1).</span>
<span class="cm"> * 8~11 to shared KEY table 2 (BSS2).</span>
<span class="cm"> * 12~15 to shared KEY table 3 (BSS3).</span>
<span class="cm"> * BURST2: For backward compatibility, set to same value as BURST.</span>
<span class="cm"> */</span>
<span class="cp">#define TXD_W0_BURST			FIELD32(0x00000001)</span>
<span class="cp">#define TXD_W0_VALID			FIELD32(0x00000002)</span>
<span class="cp">#define TXD_W0_MORE_FRAG		FIELD32(0x00000004)</span>
<span class="cp">#define TXD_W0_ACK			FIELD32(0x00000008)</span>
<span class="cp">#define TXD_W0_TIMESTAMP		FIELD32(0x00000010)</span>
<span class="cp">#define TXD_W0_OFDM			FIELD32(0x00000020)</span>
<span class="cp">#define TXD_W0_IFS			FIELD32(0x00000040)</span>
<span class="cp">#define TXD_W0_RETRY_MODE		FIELD32(0x00000080)</span>
<span class="cp">#define TXD_W0_TKIP_MIC			FIELD32(0x00000100)</span>
<span class="cp">#define TXD_W0_KEY_TABLE		FIELD32(0x00000200)</span>
<span class="cp">#define TXD_W0_KEY_INDEX		FIELD32(0x0000fc00)</span>
<span class="cp">#define TXD_W0_DATABYTE_COUNT		FIELD32(0x0fff0000)</span>
<span class="cp">#define TXD_W0_BURST2			FIELD32(0x10000000)</span>
<span class="cp">#define TXD_W0_CIPHER_ALG		FIELD32(0xe0000000)</span>

<span class="cm">/*</span>
<span class="cm"> * Word1</span>
<span class="cm"> * HOST_Q_ID: EDCA/HCCA queue ID.</span>
<span class="cm"> * HW_SEQUENCE: MAC overwrites the frame sequence number.</span>
<span class="cm"> * BUFFER_COUNT: Number of buffers in this TXD.</span>
<span class="cm"> */</span>
<span class="cp">#define TXD_W1_HOST_Q_ID		FIELD32(0x0000000f)</span>
<span class="cp">#define TXD_W1_AIFSN			FIELD32(0x000000f0)</span>
<span class="cp">#define TXD_W1_CWMIN			FIELD32(0x00000f00)</span>
<span class="cp">#define TXD_W1_CWMAX			FIELD32(0x0000f000)</span>
<span class="cp">#define TXD_W1_IV_OFFSET		FIELD32(0x003f0000)</span>
<span class="cp">#define TXD_W1_HW_SEQUENCE		FIELD32(0x10000000)</span>
<span class="cp">#define TXD_W1_BUFFER_COUNT		FIELD32(0xe0000000)</span>

<span class="cm">/*</span>
<span class="cm"> * Word2: PLCP information</span>
<span class="cm"> */</span>
<span class="cp">#define TXD_W2_PLCP_SIGNAL		FIELD32(0x000000ff)</span>
<span class="cp">#define TXD_W2_PLCP_SERVICE		FIELD32(0x0000ff00)</span>
<span class="cp">#define TXD_W2_PLCP_LENGTH_LOW		FIELD32(0x00ff0000)</span>
<span class="cp">#define TXD_W2_PLCP_LENGTH_HIGH		FIELD32(0xff000000)</span>

<span class="cm">/*</span>
<span class="cm"> * Word3</span>
<span class="cm"> */</span>
<span class="cp">#define TXD_W3_IV			FIELD32(0xffffffff)</span>

<span class="cm">/*</span>
<span class="cm"> * Word4</span>
<span class="cm"> */</span>
<span class="cp">#define TXD_W4_EIV			FIELD32(0xffffffff)</span>

<span class="cm">/*</span>
<span class="cm"> * Word5</span>
<span class="cm"> * FRAME_OFFSET: Frame start offset inside ASIC TXFIFO (after TXINFO field).</span>
<span class="cm"> * PACKET_ID: Driver assigned packet ID to categorize TXResult in interrupt.</span>
<span class="cm"> * WAITING_DMA_DONE_INT: TXD been filled with data</span>
<span class="cm"> * and waiting for TxDoneISR housekeeping.</span>
<span class="cm"> */</span>
<span class="cp">#define TXD_W5_FRAME_OFFSET		FIELD32(0x000000ff)</span>
<span class="cp">#define TXD_W5_PACKET_ID		FIELD32(0x0000ff00)</span>
<span class="cp">#define TXD_W5_TX_POWER			FIELD32(0x00ff0000)</span>
<span class="cp">#define TXD_W5_WAITING_DMA_DONE_INT	FIELD32(0x01000000)</span>

<span class="cm">/*</span>
<span class="cm"> * RX descriptor format for RX Ring.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * Word0</span>
<span class="cm"> * CIPHER_ERROR: 1:ICV error, 2:MIC error, 3:invalid key.</span>
<span class="cm"> * KEY_INDEX: Decryption key actually used.</span>
<span class="cm"> */</span>
<span class="cp">#define RXD_W0_OWNER_NIC		FIELD32(0x00000001)</span>
<span class="cp">#define RXD_W0_DROP			FIELD32(0x00000002)</span>
<span class="cp">#define RXD_W0_UNICAST_TO_ME		FIELD32(0x00000004)</span>
<span class="cp">#define RXD_W0_MULTICAST		FIELD32(0x00000008)</span>
<span class="cp">#define RXD_W0_BROADCAST		FIELD32(0x00000010)</span>
<span class="cp">#define RXD_W0_MY_BSS			FIELD32(0x00000020)</span>
<span class="cp">#define RXD_W0_CRC_ERROR		FIELD32(0x00000040)</span>
<span class="cp">#define RXD_W0_OFDM			FIELD32(0x00000080)</span>
<span class="cp">#define RXD_W0_CIPHER_ERROR		FIELD32(0x00000300)</span>
<span class="cp">#define RXD_W0_KEY_INDEX		FIELD32(0x0000fc00)</span>
<span class="cp">#define RXD_W0_DATABYTE_COUNT		FIELD32(0x0fff0000)</span>
<span class="cp">#define RXD_W0_CIPHER_ALG		FIELD32(0xe0000000)</span>

<span class="cm">/*</span>
<span class="cm"> * WORD1</span>
<span class="cm"> * SIGNAL: RX raw data rate reported by BBP.</span>
<span class="cm"> * RSSI: RSSI reported by BBP.</span>
<span class="cm"> */</span>
<span class="cp">#define RXD_W1_SIGNAL			FIELD32(0x000000ff)</span>
<span class="cp">#define RXD_W1_RSSI_AGC			FIELD32(0x00001f00)</span>
<span class="cp">#define RXD_W1_RSSI_LNA			FIELD32(0x00006000)</span>
<span class="cp">#define RXD_W1_FRAME_OFFSET		FIELD32(0x7f000000)</span>

<span class="cm">/*</span>
<span class="cm"> * Word2</span>
<span class="cm"> * IV: Received IV of originally encrypted.</span>
<span class="cm"> */</span>
<span class="cp">#define RXD_W2_IV			FIELD32(0xffffffff)</span>

<span class="cm">/*</span>
<span class="cm"> * Word3</span>
<span class="cm"> * EIV: Received EIV of originally encrypted.</span>
<span class="cm"> */</span>
<span class="cp">#define RXD_W3_EIV			FIELD32(0xffffffff)</span>

<span class="cm">/*</span>
<span class="cm"> * Word4</span>
<span class="cm"> * ICV: Received ICV of originally encrypted.</span>
<span class="cm"> * NOTE: This is a guess, the official definition is &quot;reserved&quot;</span>
<span class="cm"> */</span>
<span class="cp">#define RXD_W4_ICV			FIELD32(0xffffffff)</span>

<span class="cm">/*</span>
<span class="cm"> * the above 20-byte is called RXINFO and will be DMAed to MAC RX block</span>
<span class="cm"> * and passed to the HOST driver.</span>
<span class="cm"> * The following fields are for DMA block and HOST usage only.</span>
<span class="cm"> * Can&#39;t be touched by ASIC MAC block.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * Word5</span>
<span class="cm"> */</span>
<span class="cp">#define RXD_W5_RESERVED			FIELD32(0xffffffff)</span>

<span class="cm">/*</span>
<span class="cm"> * Macros for converting txpower from EEPROM to mac80211 value</span>
<span class="cm"> * and from mac80211 value to register value.</span>
<span class="cm"> */</span>
<span class="cp">#define MIN_TXPOWER	0</span>
<span class="cp">#define MAX_TXPOWER	31</span>
<span class="cp">#define DEFAULT_TXPOWER	24</span>

<span class="cp">#define TXPOWER_FROM_DEV(__txpower) \</span>
<span class="cp">	(((u8)(__txpower)) &gt; MAX_TXPOWER) ? DEFAULT_TXPOWER : (__txpower)</span>

<span class="cp">#define TXPOWER_TO_DEV(__txpower) \</span>
<span class="cp">	clamp_t(char, __txpower, MIN_TXPOWER, MAX_TXPOWER)</span>

<span class="cp">#endif </span><span class="cm">/* RT73USB_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
