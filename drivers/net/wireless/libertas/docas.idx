f | ethtool.c | s | 3.3K | 100 | Rick Jones | rick.jones2@hp.com | 1321562690 |  | wireless: use strlcpy routine in .get_drvinfo  Convert various seemingly still compiled wireless drivers' .get_drvinfo routines to use the preferred strlcpy() routine.  Signed-off-by: Rick Jones <rick.jones2@hp.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | if_spi.h | s | 8.9K | 176 | John W. Linville | linville@tuxdriver.com | 1304616755 |  | Merge branch 'master' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-next-2.6 into for-davem  Conflicts: 	drivers/net/wireless/libertas/if_cs.c 	drivers/net/wireless/rtlwifi/pci.c 	net/bluetooth/l2cap_sock.c
f | defs.h | s | 11K | 332 | Joe Perches | joe@perches.com | 1305133400 |  | libertas: Convert lbs_pr_<level> to pr_<level>  Use the standard pr_<level> functions eases grep a bit.  Added a few missing terminating newlines to messages. Coalesced long formats.  Signed-off-by: Joe Perches <joe@perches.com> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | Makefile | g | 573B |  | Daniel Drake | dsd@laptop.org | 1334689033 |  | libertas: Firmware loading simplifications  Remove the ability to pass module parameters with firmware filenames for USB and SDIO interfaces.  Remove the ability to pass custom "user" filenames to lbs_get_firmware().  Remove the ability to reprogram internal device memory with a different firmware from the USB driver (we don't know of any users), and simplify the OLPC firmware loading quirk to simply placing the OLPC firmware at the top of the list (we don't know of any users other than OLPC).  Move lbs_get_firmware() into its own file.  These simplifications should have no real-life effect but make the upcoming transition to asynchronous firmware loading considerably less painful.  Signed-off-by: Daniel Drake <dsd@laptop.org> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | tx.c | s | 5.4K | 168 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103868 |  | drivers/net: Add export.h to files using EXPORT_SYMBOL/THIS_MODULE  These were getting the macros from an implicit module.h include via device.h, but we are planning to clean that up.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>  drivers/net: Add export.h to wireless/brcm80211/brcmfmac/bcmsdh.c  This relatively recently added file uses EXPORT_SYMBOL and hence needs export.h included so that it is compatible with the module.h split up work.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | cmd.h | s | 4.2K | 90 | Daniel Drake | dsd@laptop.org | 1310410939 |  | libertas: fix handling of command timeout, completion and interruption  When commands time out, corruption ensues. As lbs_complete_command() is called without locking, the command node is mistakenly freed twice. Also fixed up locking here in a few other places.  The nature of command timeout may be that the card didn't even acknowledge receipt of the request. Detect this case and reset dnld_sent so that other commands don't hang forever.  When cmdnodes are moved between the free list and the pending list, their list heads should be reinitialized. Fixed this.  Sometimes commands are completed without actually submitting them or removing them from cmdpendingq. We must remember to remove them from cmdpendingq in these cases, so handle this in lbs_complete_command().  Harmless signals generated during suspend/resume were interrupting lbs_cmd. Convert to an uninterruptible sleep to avoid this.  lbs_thread must be woken up every time there is some new work to do. I found that when 2 commands are queued, ther completion of the first command would not wake up lbs_thread to submit the second. Poke lbs_thread at the end of lbs_complete_command() to fix this.  Signed-off-by: Daniel Drake <dsd@laptop.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | radiotap.h | s | 1.2K | 38 | Eric Dumazet | eric.dumazet@gmail.com | 1275560303 |  | drivers/net: use __packed annotation  cleanup patch.  Use new __packed annotation in drivers/net/  Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | debugfs.h | s | 250B | 7 | Holger Schurig | hs4233@mail.mn-solutions.de | 1201561494 |  | libertas: remove arbitrary typedefs  New typedefs are usually frowned upon. This patch changes libertas_adapter -> struct libertas_adapter libertas_priv -> struct libertas_priv  While passing, make everything checkpatch.pl-clean that gets touches.  Signed-off-by: Holger Schurig <hs4233@mail.mn-solutions.de> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | if_usb.c | s | 25K | 838 | Linus Torvalds | torvalds@linux-foundation.org | 1337727046 |  | 
f | cfg.c | s | 53K | 1833 | Amitkumar Karwar | akarwar@marvell.com | 1334340335 |  | libertas: fix signedness bug in lbs_auth_to_authtype()  Return type for lbs_auth_to_authtype() is changed from "u8" to "int" to return negative error code correctly. Also an error check is added in connect handler for invalid auth type.  Reported-by: Dan Carpenter <dan.carpenter@oracle.com> Signed-off-by: Amitkumar Karwar <akarwar@marvell.com> Signed-off-by: Kiran Divekar <dkiran@marvell.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | types.h | s | 6.0K | 221 | Randy Dunlap | randy.dunlap@oracle.com | 1304016798 |  | libertas: use kernel-doc notation, fix comment style  Convert all libertas/ files to use kernel-doc notation instead of whatever it was (doxygen?).  Add or fix function parameters in several places.  Use expected style for multi-line comments in lots of places.  Remove erroneous /** in multiple places.  Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | if_sdio.h | s | 1.3K | 41 | Dan Williams | dcbw@redhat.com | 1281986803 |  | libertas: [sdio] use common firmware request helper and new firmware locations  linux-firmware puts libertas firmware in /libertas.  Fix the driver to look there first, but fall back to the old firmware names if the new ones don't exist.  Add preference for newer firmware versions too.  Signed-off-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | if_cs.c | s | 25K | 841 | Daniel Drake | dsd@laptop.org | 1335209646 |  | libertas CS: convert to asynchronous firmware loading  Signed-off-by: Daniel Drake <dsd@laptop.org> Tested-by: Dan Williams <dcbw@redhat.com> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | cmdresp.c | s | 9.1K | 295 | John W. Linville | linville@tuxdriver.com | 1310738724 |  | Merge branch 'master' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-next-2.6 into for-davem  Conflicts: 	net/bluetooth/l2cap_core.c
f | dev.h | s | 5.0K | 178 | Daniel Drake | dsd@laptop.org | 1334689034 |  | libertas: add asynchronous firmware loading capability  As described at http://article.gmane.org/gmane.linux.kernel.wireless.general/86084 libertas is taking a long time to load because it loads firmware during module loading.  Add a new API for interface drivers to load their firmware asynchronously. The same semantics of the firmware table are followed like before.  Interface drivers will be converted in follow-up patches, then we can remove the old, synchronous firmware loading function.  Signed-off-by: Daniel Drake <dsd@laptop.org> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | host.h | s | 23K | 806 | Randy Dunlap | randy.dunlap@oracle.com | 1304016798 |  | libertas: use kernel-doc notation, fix comment style  Convert all libertas/ files to use kernel-doc notation instead of whatever it was (doxygen?).  Add or fix function parameters in several places.  Use expected style for multi-line comments in lots of places.  Remove erroneous /** in multiple places.  Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | cfg.h | s | 659B | 17 | Andres Salomon | dilinger@queued.net | 1320261792 |  | libertas: ensure we clean up a scan request properly  Commit 2e30168b ("libertas: terminate scan when stopping interface") adds cleanup code to lbs_eth_stop to call cfg80211_scan_done if there's an outstanding cfg80211_scan_request.  However, it assumes that the scan request was allocated via the cfg80211 stack.  Libertas has its own internal allocation method, kept track of with priv->internal_scan.  This doesn't set scan_req->wiphy, amongst other things, which results in hitting a BUG() when we call cfg80211_scan_done on the request.  This provides a function to take care of the low-level scan_req cleanup details.  We simply call that to deal with finishing up scan requests.  The bug we were hitting was:  [  964.321495] kernel BUG at net/wireless/core.h:87! [  964.329970] Unable to handle kernel NULL pointer dereference at virtual address 00000000 [  964.341963] pgd = dcf80000 ... [  964.849998] 9fe0: 00000000 beb417b8 4018e280 401e822c 60000010 00000004 00000000 00000000 [  964.865007] [<c003104c>] (__bug+0x1c/0x28) from [<c0384ffc>] (cfg80211_scan_done+0x54/0x6c) [  964.895324] [<c0384ffc>] (cfg80211_scan_done+0x54/0x6c) from [<bf028bac>] (lbs_eth_stop+0x10c/0x188 [libertas]) [  964.895324] [<bf028bac>] (lbs_eth_stop+0x10c/0x188 [libertas]) from [<c03002a0>] (__dev_close_many+0x94/0xc4) [  964.918995] [<c03002a0>] (__dev_close_many+0x94/0xc4) from [<c030037c>] (dev_close_many+0x78/0xe0)  Signed-off-by: Andres Salomon <dilinger@queued.net> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | cmd.c | s | 42K | 1442 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103868 |  | drivers/net: Add export.h to files using EXPORT_SYMBOL/THIS_MODULE  These were getting the macros from an implicit module.h include via device.h, but we are planning to clean that up.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>  drivers/net: Add export.h to wireless/brcm80211/brcmfmac/bcmsdh.c  This relatively recently added file uses EXPORT_SYMBOL and hence needs export.h included so that it is compatible with the module.h split up work.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | if_usb.h | s | 1.8K | 84 | Randy Dunlap | randy.dunlap@oracle.com | 1304016798 |  | libertas: use kernel-doc notation, fix comment style  Convert all libertas/ files to use kernel-doc notation instead of whatever it was (doxygen?).  Add or fix function parameters in several places.  Use expected style for multi-line comments in lots of places.  Remove erroneous /** in multiple places.  Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | LICENSE | g | 717B |  | Marcelo Tosatti | marcelo@kvack.org | 1177772454 |  | [PATCH] Marvell Libertas 8388 802.11b/g USB driver  Add the Marvell Libertas 8388 802.11 USB driver.  Signed-off-by: Marcelo Tosatti <marcelo@kvack.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | if_spi.c | s | 31K | 1148 | Daniel Drake | dsd@laptop.org | 1334689033 |  | libertas: Firmware loading simplifications  Remove the ability to pass module parameters with firmware filenames for USB and SDIO interfaces.  Remove the ability to pass custom "user" filenames to lbs_get_firmware().  Remove the ability to reprogram internal device memory with a different firmware from the USB driver (we don't know of any users), and simplify the OLPC firmware loading quirk to simply placing the OLPC firmware at the top of the list (we don't know of any users other than OLPC).  Move lbs_get_firmware() into its own file.  These simplifications should have no real-life effect but make the upcoming transition to asynchronous firmware loading considerably less painful.  Signed-off-by: Daniel Drake <dsd@laptop.org> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | rx.c | s | 7.4K | 238 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103868 |  | drivers/net: Add export.h to files using EXPORT_SYMBOL/THIS_MODULE  These were getting the macros from an implicit module.h include via device.h, but we are planning to clean that up.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>  drivers/net: Add export.h to wireless/brcm80211/brcmfmac/bcmsdh.c  This relatively recently added file uses EXPORT_SYMBOL and hence needs export.h included so that it is compatible with the module.h split up work.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | README | g | 7.7K |  | Amitkumar Karwar | akarwar@marvell.com | 1314212241 |  | libertas: update readme file  Since all wext specific code is removed, currently there is no way to configure deep sleep mode. This patch removes deep sleep configuration information in readme file.  Signed-off-by: Amitkumar Karwar <akarwar@marvell.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | Kconfig | g | 1.2K |  | Holger Schurig | holgerschurig@googlemail.com | 1261507442 |  | libertas: make mesh configurable  Mostly for the embedded people that know beforehand that they don't need MESH at all and want to save some bytes, but also helpful for the upcoming cfg80211 transition.     text    data     bss     dec     hex filename  114264    2308     140  116712   1c7e8 libertas.ko   with mesh  105026    2000     140  107166   1a29e libertas.ko   without mesh  --------------------------------------------------   -9238    -308           -9546  Signed-off-by: Holger Schurig <holgerschurig@gmail.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | decl.h | s | 2.3K | 60 | Daniel Drake | dsd@laptop.org | 1334689034 |  | libertas: add asynchronous firmware loading capability  As described at http://article.gmane.org/gmane.linux.kernel.wireless.general/86084 libertas is taking a long time to load because it loads firmware during module loading.  Add a new API for interface drivers to load their firmware asynchronously. The same semantics of the firmware table are followed like before.  Interface drivers will be converted in follow-up patches, then we can remove the old, synchronous firmware loading function.  Signed-off-by: Daniel Drake <dsd@laptop.org> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | firmware.c | s | 5.5K | 188 | Luis R. Rodriguez | mcgrof@do-not-panic.com | 1336524967 |  | libertas: include sched.h on firmware.c  Do not assume we have our subsystem including this for us, at least for older kernels this is not true. Lets just be explicit about this requirement for the usage of wake_up().  Signed-off-by: Luis R. Rodriguez <mcgrof@do-not-panic.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | mesh.c | s | 30K | 974 | John W. Linville | linville@tuxdriver.com | 1314037730 |  | Merge branch 'master' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-next into for-davem  Conflicts: 	drivers/staging/ath6kl/miscdrv/ar3kps/ar3kpsparser.c 	drivers/staging/ath6kl/os/linux/ar6000_drv.c
f | debugfs.c | s | 22K | 830 | Stephen Boyd | sboyd@codeaurora.org | 1333664750 |  | simple_open: automatically convert to simple_open()  Many users of debugfs copy the implementation of default_open() when they want to support a custom read/write function op.  This leads to a proliferation of the default_open() implementation across the entire tree.  Now that the common implementation has been consolidated into libfs we can replace all the users of this function with simple_open().  This replacement was done with the following semantic patch:  <smpl> @ open @ identifier open_f != simple_open; identifier i, f; @@ -int open_f(struct inode *i, struct file *f) -{ ( -if (i->i_private) -f->private_data = i->i_private; || -f->private_data = i->i_private; ) -return 0; -}  @ has_open depends on open @ identifier fops; identifier open.open_f; @@ struct file_operations fops = { ... -.open = open_f, +.open = simple_open, ... }; </smpl>  [akpm@linux-foundation.org: checkpatch fixes] Signed-off-by: Stephen Boyd <sboyd@codeaurora.org> Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Cc: Julia Lawall <Julia.Lawall@lip6.fr> Acked-by: Ingo Molnar <mingo@elte.hu> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | main.c | s | 28K | 976 | Daniel Drake | dsd@laptop.org | 1334689034 |  | libertas: add asynchronous firmware loading capability  As described at http://article.gmane.org/gmane.linux.kernel.wireless.general/86084 libertas is taking a long time to load because it loads firmware during module loading.  Add a new API for interface drivers to load their firmware asynchronously. The same semantics of the firmware table are followed like before.  Interface drivers will be converted in follow-up patches, then we can remove the old, synchronous firmware loading function.  Signed-off-by: Daniel Drake <dsd@laptop.org> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | if_sdio.c | s | 31K | 1122 | Daniel Drake | dsd@laptop.org | 1334689034 |  | libertas SDIO: convert to asynchronous firmware loading  Signed-off-by: Daniel Drake <dsd@laptop.org> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | mesh.h | s | 1.7K | 51 | Daniel Drake | dsd@laptop.org | 1312827991 |  | libertas: link mesh device to wiphy  The mesh device is now exposed as an interface of the wiphy. This exposes the mesh device to the cfg80211 interface, allowing mesh channel selection to be reimplemented, and available to NetworkManager as it was before.  Some header tweaking was needed in order to implement lbs_mesh_activated().  Signed-off-by: Daniel Drake <dsd@laptop.org> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
