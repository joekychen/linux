<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › ethernet › brocade › bna › bfi_reg.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>bfi_reg.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Linux network driver for Brocade Converged Network Adapter.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify it</span>
<span class="cm"> * under the terms of the GNU General Public License (GPL) Version 2 as</span>
<span class="cm"> * published by the Free Software Foundation</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful, but</span>
<span class="cm"> * WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="cm"> * General Public License for more details.</span>
<span class="cm"> */</span>
<span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2005-2011 Brocade Communications Systems, Inc.</span>
<span class="cm"> * All rights reserved</span>
<span class="cm"> * www.brocade.com</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * bfi_reg.h ASIC register defines for all Brocade adapter ASICs</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __BFI_REG_H__</span>
<span class="cp">#define __BFI_REG_H__</span>

<span class="cp">#define HOSTFN0_INT_STATUS		0x00014000	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN1_INT_STATUS		0x00014100	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN2_INT_STATUS		0x00014300	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN3_INT_STATUS		0x00014400	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN0_INT_MSK			0x00014004	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN1_INT_MSK			0x00014104	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN2_INT_MSK			0x00014304	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN3_INT_MSK			0x00014404	</span><span class="cm">/* ct		*/</span><span class="cp"></span>

<span class="cp">#define HOST_PAGE_NUM_FN0		0x00014008	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_PAGE_NUM_FN1		0x00014108	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_PAGE_NUM_FN2		0x00014308	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define HOST_PAGE_NUM_FN3		0x00014408	</span><span class="cm">/* ct		*/</span><span class="cp"></span>

<span class="cp">#define APP_PLL_LCLK_CTL_REG		0x00014204	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define __P_LCLK_PLL_LOCK		0x80000000</span>
<span class="cp">#define __APP_PLL_LCLK_SRAM_USE_100MHZ	0x00100000</span>
<span class="cp">#define __APP_PLL_LCLK_RESET_TIMER_MK	0x000e0000</span>
<span class="cp">#define __APP_PLL_LCLK_RESET_TIMER_SH	17</span>
<span class="cp">#define __APP_PLL_LCLK_RESET_TIMER(_v)	((_v) &lt;&lt; __APP_PLL_LCLK_RESET_TIMER_SH)</span>
<span class="cp">#define __APP_PLL_LCLK_LOGIC_SOFT_RESET	0x00010000</span>
<span class="cp">#define __APP_PLL_LCLK_CNTLMT0_1_MK	0x0000c000</span>
<span class="cp">#define __APP_PLL_LCLK_CNTLMT0_1_SH	14</span>
<span class="cp">#define __APP_PLL_LCLK_CNTLMT0_1(_v)	((_v) &lt;&lt; __APP_PLL_LCLK_CNTLMT0_1_SH)</span>
<span class="cp">#define __APP_PLL_LCLK_JITLMT0_1_MK	0x00003000</span>
<span class="cp">#define __APP_PLL_LCLK_JITLMT0_1_SH	12</span>
<span class="cp">#define __APP_PLL_LCLK_JITLMT0_1(_v)	((_v) &lt;&lt; __APP_PLL_LCLK_JITLMT0_1_SH)</span>
<span class="cp">#define __APP_PLL_LCLK_HREF		0x00000800</span>
<span class="cp">#define __APP_PLL_LCLK_HDIV		0x00000400</span>
<span class="cp">#define __APP_PLL_LCLK_P0_1_MK		0x00000300</span>
<span class="cp">#define __APP_PLL_LCLK_P0_1_SH		8</span>
<span class="cp">#define __APP_PLL_LCLK_P0_1(_v)		((_v) &lt;&lt; __APP_PLL_LCLK_P0_1_SH)</span>
<span class="cp">#define __APP_PLL_LCLK_Z0_2_MK		0x000000e0</span>
<span class="cp">#define __APP_PLL_LCLK_Z0_2_SH		5</span>
<span class="cp">#define __APP_PLL_LCLK_Z0_2(_v)		((_v) &lt;&lt; __APP_PLL_LCLK_Z0_2_SH)</span>
<span class="cp">#define __APP_PLL_LCLK_RSEL200500	0x00000010</span>
<span class="cp">#define __APP_PLL_LCLK_ENARST		0x00000008</span>
<span class="cp">#define __APP_PLL_LCLK_BYPASS		0x00000004</span>
<span class="cp">#define __APP_PLL_LCLK_LRESETN		0x00000002</span>
<span class="cp">#define __APP_PLL_LCLK_ENABLE		0x00000001</span>
<span class="cp">#define APP_PLL_SCLK_CTL_REG		0x00014208	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define __P_SCLK_PLL_LOCK		0x80000000</span>
<span class="cp">#define __APP_PLL_SCLK_RESET_TIMER_MK	0x000e0000</span>
<span class="cp">#define __APP_PLL_SCLK_RESET_TIMER_SH	17</span>
<span class="cp">#define __APP_PLL_SCLK_RESET_TIMER(_v)	((_v) &lt;&lt; __APP_PLL_SCLK_RESET_TIMER_SH)</span>
<span class="cp">#define __APP_PLL_SCLK_LOGIC_SOFT_RESET	0x00010000</span>
<span class="cp">#define __APP_PLL_SCLK_CNTLMT0_1_MK	0x0000c000</span>
<span class="cp">#define __APP_PLL_SCLK_CNTLMT0_1_SH	14</span>
<span class="cp">#define __APP_PLL_SCLK_CNTLMT0_1(_v)	((_v) &lt;&lt; __APP_PLL_SCLK_CNTLMT0_1_SH)</span>
<span class="cp">#define __APP_PLL_SCLK_JITLMT0_1_MK	0x00003000</span>
<span class="cp">#define __APP_PLL_SCLK_JITLMT0_1_SH	12</span>
<span class="cp">#define __APP_PLL_SCLK_JITLMT0_1(_v)	((_v) &lt;&lt; __APP_PLL_SCLK_JITLMT0_1_SH)</span>
<span class="cp">#define __APP_PLL_SCLK_HREF		0x00000800</span>
<span class="cp">#define __APP_PLL_SCLK_HDIV		0x00000400</span>
<span class="cp">#define __APP_PLL_SCLK_P0_1_MK		0x00000300</span>
<span class="cp">#define __APP_PLL_SCLK_P0_1_SH		8</span>
<span class="cp">#define __APP_PLL_SCLK_P0_1(_v)		((_v) &lt;&lt; __APP_PLL_SCLK_P0_1_SH)</span>
<span class="cp">#define __APP_PLL_SCLK_Z0_2_MK		0x000000e0</span>
<span class="cp">#define __APP_PLL_SCLK_Z0_2_SH		5</span>
<span class="cp">#define __APP_PLL_SCLK_Z0_2(_v)		((_v) &lt;&lt; __APP_PLL_SCLK_Z0_2_SH)</span>
<span class="cp">#define __APP_PLL_SCLK_RSEL200500	0x00000010</span>
<span class="cp">#define __APP_PLL_SCLK_ENARST		0x00000008</span>
<span class="cp">#define __APP_PLL_SCLK_BYPASS		0x00000004</span>
<span class="cp">#define __APP_PLL_SCLK_LRESETN		0x00000002</span>
<span class="cp">#define __APP_PLL_SCLK_ENABLE		0x00000001</span>
<span class="cp">#define __ENABLE_MAC_AHB_1		0x00800000	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define __ENABLE_MAC_AHB_0		0x00400000	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define __ENABLE_MAC_1			0x00200000	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define __ENABLE_MAC_0			0x00100000	</span><span class="cm">/* ct		*/</span><span class="cp"></span>

<span class="cp">#define HOST_SEM0_REG			0x00014230	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM1_REG			0x00014234	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM2_REG			0x00014238	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM3_REG			0x0001423c	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM4_REG			0x00014610	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM5_REG			0x00014614	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM6_REG			0x00014618	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM7_REG			0x0001461c	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM0_INFO_REG		0x00014240	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM1_INFO_REG		0x00014244	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM2_INFO_REG		0x00014248	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM3_INFO_REG		0x0001424c	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM4_INFO_REG		0x00014620	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM5_INFO_REG		0x00014624	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM6_INFO_REG		0x00014628	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOST_SEM7_INFO_REG		0x0001462c	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>

<span class="cp">#define HOSTFN0_LPU0_CMD_STAT		0x00019000	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN0_LPU1_CMD_STAT		0x00019004	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN1_LPU0_CMD_STAT		0x00019010	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN1_LPU1_CMD_STAT		0x00019014	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN2_LPU0_CMD_STAT		0x00019150	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN2_LPU1_CMD_STAT		0x00019154	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN3_LPU0_CMD_STAT		0x00019160	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN3_LPU1_CMD_STAT		0x00019164	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define LPU0_HOSTFN0_CMD_STAT		0x00019008	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define LPU1_HOSTFN0_CMD_STAT		0x0001900c	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define LPU0_HOSTFN1_CMD_STAT		0x00019018	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define LPU1_HOSTFN1_CMD_STAT		0x0001901c	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define LPU0_HOSTFN2_CMD_STAT		0x00019158	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define LPU1_HOSTFN2_CMD_STAT		0x0001915c	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define LPU0_HOSTFN3_CMD_STAT		0x00019168	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define LPU1_HOSTFN3_CMD_STAT		0x0001916c	</span><span class="cm">/* ct		*/</span><span class="cp"></span>

<span class="cp">#define PSS_CTL_REG			0x00018800	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define __PSS_I2C_CLK_DIV_MK		0x007f0000</span>
<span class="cp">#define __PSS_I2C_CLK_DIV_SH		16</span>
<span class="cp">#define __PSS_I2C_CLK_DIV(_v)		((_v) &lt;&lt; __PSS_I2C_CLK_DIV_SH)</span>
<span class="cp">#define __PSS_LMEM_INIT_DONE		0x00001000</span>
<span class="cp">#define __PSS_LMEM_RESET		0x00000200</span>
<span class="cp">#define __PSS_LMEM_INIT_EN		0x00000100</span>
<span class="cp">#define __PSS_LPU1_RESET		0x00000002</span>
<span class="cp">#define __PSS_LPU0_RESET		0x00000001</span>
<span class="cp">#define PSS_ERR_STATUS_REG		0x00018810	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define ERR_SET_REG			0x00018818	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define PSS_GPIO_OUT_REG		0x000188c0	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define __PSS_GPIO_OUT_REG		0x00000fff</span>
<span class="cp">#define PSS_GPIO_OE_REG			0x000188c8	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define __PSS_GPIO_OE_REG		0x000000ff</span>

<span class="cp">#define HOSTFN0_LPU_MBOX0_0		0x00019200	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN1_LPU_MBOX0_8		0x00019260	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define LPU_HOSTFN0_MBOX0_0		0x00019280	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define LPU_HOSTFN1_MBOX0_8		0x000192e0	</span><span class="cm">/* cb/ct	*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN2_LPU_MBOX0_0		0x00019400	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define HOSTFN3_LPU_MBOX0_8		0x00019460	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define LPU_HOSTFN2_MBOX0_0		0x00019480	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define LPU_HOSTFN3_MBOX0_8		0x000194e0	</span><span class="cm">/* ct		*/</span><span class="cp"></span>

<span class="cp">#define HOST_MSIX_ERR_INDEX_FN0		0x0001400c	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define HOST_MSIX_ERR_INDEX_FN1		0x0001410c	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define HOST_MSIX_ERR_INDEX_FN2		0x0001430c	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define HOST_MSIX_ERR_INDEX_FN3		0x0001440c	</span><span class="cm">/* ct		*/</span><span class="cp"></span>

<span class="cp">#define MBIST_CTL_REG			0x00014220	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define __EDRAM_BISTR_START		0x00000004</span>
<span class="cp">#define MBIST_STAT_REG			0x00014224	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define ETH_MAC_SER_REG			0x00014288	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define __APP_EMS_CKBUFAMPIN		0x00000020</span>
<span class="cp">#define __APP_EMS_REFCLKSEL		0x00000010</span>
<span class="cp">#define __APP_EMS_CMLCKSEL		0x00000008</span>
<span class="cp">#define __APP_EMS_REFCKBUFEN2		0x00000004</span>
<span class="cp">#define __APP_EMS_REFCKBUFEN1		0x00000002</span>
<span class="cp">#define __APP_EMS_CHANNEL_SEL		0x00000001</span>
<span class="cp">#define FNC_PERS_REG			0x00014604	</span><span class="cm">/* ct		*/</span><span class="cp"></span>
<span class="cp">#define __F3_FUNCTION_ACTIVE		0x80000000</span>
<span class="cp">#define __F3_FUNCTION_MODE		0x40000000</span>
<span class="cp">#define __F3_PORT_MAP_MK		0x30000000</span>
<span class="cp">#define __F3_PORT_MAP_SH		28</span>
<span class="cp">#define __F3_PORT_MAP(_v)		((_v) &lt;&lt; __F3_PORT_MAP_SH)</span>
<span class="cp">#define __F3_VM_MODE			0x08000000</span>
<span class="cp">#define __F3_INTX_STATUS_MK		0x07000000</span>
<span class="cp">#define __F3_INTX_STATUS_SH		24</span>
<span class="cp">#define __F3_INTX_STATUS(_v)		((_v) &lt;&lt; __F3_INTX_STATUS_SH)</span>
<span class="cp">#define __F2_FUNCTION_ACTIVE		0x00800000</span>
<span class="cp">#define __F2_FUNCTION_MODE		0x00400000</span>
<span class="cp">#define __F2_PORT_MAP_MK		0x00300000</span>
<span class="cp">#define __F2_PORT_MAP_SH		20</span>
<span class="cp">#define __F2_PORT_MAP(_v)		((_v) &lt;&lt; __F2_PORT_MAP_SH)</span>
<span class="cp">#define __F2_VM_MODE			0x00080000</span>
<span class="cp">#define __F2_INTX_STATUS_MK		0x00070000</span>
<span class="cp">#define __F2_INTX_STATUS_SH		16</span>
<span class="cp">#define __F2_INTX_STATUS(_v)		((_v) &lt;&lt; __F2_INTX_STATUS_SH)</span>
<span class="cp">#define __F1_FUNCTION_ACTIVE		0x00008000</span>
<span class="cp">#define __F1_FUNCTION_MODE		0x00004000</span>
<span class="cp">#define __F1_PORT_MAP_MK		0x00003000</span>
<span class="cp">#define __F1_PORT_MAP_SH		12</span>
<span class="cp">#define __F1_PORT_MAP(_v)		((_v) &lt;&lt; __F1_PORT_MAP_SH)</span>
<span class="cp">#define __F1_VM_MODE			0x00000800</span>
<span class="cp">#define __F1_INTX_STATUS_MK		0x00000700</span>
<span class="cp">#define __F1_INTX_STATUS_SH		8</span>
<span class="cp">#define __F1_INTX_STATUS(_v)		((_v) &lt;&lt; __F1_INTX_STATUS_SH)</span>
<span class="cp">#define __F0_FUNCTION_ACTIVE		0x00000080</span>
<span class="cp">#define __F0_FUNCTION_MODE		0x00000040</span>
<span class="cp">#define __F0_PORT_MAP_MK		0x00000030</span>
<span class="cp">#define __F0_PORT_MAP_SH		4</span>
<span class="cp">#define __F0_PORT_MAP(_v)		((_v) &lt;&lt; __F0_PORT_MAP_SH)</span>
<span class="cp">#define __F0_VM_MODE			0x00000008</span>
<span class="cp">#define __F0_INTX_STATUS		0x00000007</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">__F0_INTX_STATUS_MSIX</span> <span class="o">=</span> <span class="mh">0x0</span><span class="p">,</span>
	<span class="n">__F0_INTX_STATUS_INTA</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">,</span>
	<span class="n">__F0_INTX_STATUS_INTB</span> <span class="o">=</span> <span class="mh">0x2</span><span class="p">,</span>
	<span class="n">__F0_INTX_STATUS_INTC</span> <span class="o">=</span> <span class="mh">0x3</span><span class="p">,</span>
	<span class="n">__F0_INTX_STATUS_INTD</span> <span class="o">=</span> <span class="mh">0x4</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define OP_MODE				0x0001460c</span>
<span class="cp">#define __APP_ETH_CLK_LOWSPEED		0x00000004</span>
<span class="cp">#define __GLOBAL_CORECLK_HALFSPEED	0x00000002</span>
<span class="cp">#define __GLOBAL_FCOE_MODE		0x00000001</span>
<span class="cp">#define FW_INIT_HALT_P0			0x000191ac</span>
<span class="cp">#define __FW_INIT_HALT_P		0x00000001</span>
<span class="cp">#define FW_INIT_HALT_P1			0x000191bc</span>
<span class="cp">#define PMM_1T_RESET_REG_P0		0x0002381c</span>
<span class="cp">#define __PMM_1T_RESET_P		0x00000001</span>
<span class="cp">#define PMM_1T_RESET_REG_P1		0x00023c1c</span>

<span class="cm">/**</span>
<span class="cm"> * Brocade 1860 Adapter specific defines</span>
<span class="cm"> */</span>
<span class="cp">#define CT2_PCI_CPQ_BASE		0x00030000</span>
<span class="cp">#define CT2_PCI_APP_BASE		0x00030100</span>
<span class="cp">#define CT2_PCI_ETH_BASE		0x00030400</span>

<span class="cm">/*</span>
<span class="cm"> * APP block registers</span>
<span class="cm"> */</span>
<span class="cp">#define CT2_HOSTFN_INT_STATUS		(CT2_PCI_APP_BASE + 0x00)</span>
<span class="cp">#define CT2_HOSTFN_INTR_MASK		(CT2_PCI_APP_BASE + 0x04)</span>
<span class="cp">#define CT2_HOSTFN_PERSONALITY0		(CT2_PCI_APP_BASE + 0x08)</span>
<span class="cp">#define __PME_STATUS_			0x00200000</span>
<span class="cp">#define __PF_VF_BAR_SIZE_MODE__MK	0x00180000</span>
<span class="cp">#define __PF_VF_BAR_SIZE_MODE__SH	19</span>
<span class="cp">#define __PF_VF_BAR_SIZE_MODE_(_v)	((_v) &lt;&lt; __PF_VF_BAR_SIZE_MODE__SH)</span>
<span class="cp">#define __FC_LL_PORT_MAP__MK		0x00060000</span>
<span class="cp">#define __FC_LL_PORT_MAP__SH		17</span>
<span class="cp">#define __FC_LL_PORT_MAP_(_v)		((_v) &lt;&lt; __FC_LL_PORT_MAP__SH)</span>
<span class="cp">#define __PF_VF_ACTIVE_			0x00010000</span>
<span class="cp">#define __PF_VF_CFG_RDY_		0x00008000</span>
<span class="cp">#define __PF_VF_ENABLE_			0x00004000</span>
<span class="cp">#define __PF_DRIVER_ACTIVE_		0x00002000</span>
<span class="cp">#define __PF_PME_SEND_ENABLE_		0x00001000</span>
<span class="cp">#define __PF_EXROM_OFFSET__MK		0x00000ff0</span>
<span class="cp">#define __PF_EXROM_OFFSET__SH		4</span>
<span class="cp">#define __PF_EXROM_OFFSET_(_v)		((_v) &lt;&lt; __PF_EXROM_OFFSET__SH)</span>
<span class="cp">#define __FC_LL_MODE_			0x00000008</span>
<span class="cp">#define __PF_INTX_PIN_			0x00000007</span>
<span class="cp">#define CT2_HOSTFN_PERSONALITY1		(CT2_PCI_APP_BASE + 0x0C)</span>
<span class="cp">#define __PF_NUM_QUEUES1__MK		0xff000000</span>
<span class="cp">#define __PF_NUM_QUEUES1__SH		24</span>
<span class="cp">#define __PF_NUM_QUEUES1_(_v)		((_v) &lt;&lt; __PF_NUM_QUEUES1__SH)</span>
<span class="cp">#define __PF_VF_QUE_OFFSET1__MK		0x00ff0000</span>
<span class="cp">#define __PF_VF_QUE_OFFSET1__SH		16</span>
<span class="cp">#define __PF_VF_QUE_OFFSET1_(_v)	((_v) &lt;&lt; __PF_VF_QUE_OFFSET1__SH)</span>
<span class="cp">#define __PF_VF_NUM_QUEUES__MK		0x0000ff00</span>
<span class="cp">#define __PF_VF_NUM_QUEUES__SH		8</span>
<span class="cp">#define __PF_VF_NUM_QUEUES_(_v)		((_v) &lt;&lt; __PF_VF_NUM_QUEUES__SH)</span>
<span class="cp">#define __PF_VF_QUE_OFFSET_		0x000000ff</span>
<span class="cp">#define CT2_HOSTFN_PAGE_NUM		(CT2_PCI_APP_BASE + 0x18)</span>
<span class="cp">#define CT2_HOSTFN_MSIX_VT_INDEX_MBOX_ERR	(CT2_PCI_APP_BASE + 0x38)</span>

<span class="cm">/*</span>
<span class="cm"> * Brocade 1860 adapter CPQ block registers</span>
<span class="cm"> */</span>
<span class="cp">#define CT2_HOSTFN_LPU0_MBOX0		(CT2_PCI_CPQ_BASE + 0x00)</span>
<span class="cp">#define CT2_HOSTFN_LPU1_MBOX0		(CT2_PCI_CPQ_BASE + 0x20)</span>
<span class="cp">#define CT2_LPU0_HOSTFN_MBOX0		(CT2_PCI_CPQ_BASE + 0x40)</span>
<span class="cp">#define CT2_LPU1_HOSTFN_MBOX0		(CT2_PCI_CPQ_BASE + 0x60)</span>
<span class="cp">#define CT2_HOSTFN_LPU0_CMD_STAT	(CT2_PCI_CPQ_BASE + 0x80)</span>
<span class="cp">#define CT2_HOSTFN_LPU1_CMD_STAT	(CT2_PCI_CPQ_BASE + 0x84)</span>
<span class="cp">#define CT2_LPU0_HOSTFN_CMD_STAT	(CT2_PCI_CPQ_BASE + 0x88)</span>
<span class="cp">#define CT2_LPU1_HOSTFN_CMD_STAT	(CT2_PCI_CPQ_BASE + 0x8c)</span>
<span class="cp">#define CT2_HOSTFN_LPU0_READ_STAT	(CT2_PCI_CPQ_BASE + 0x90)</span>
<span class="cp">#define CT2_HOSTFN_LPU1_READ_STAT	(CT2_PCI_CPQ_BASE + 0x94)</span>
<span class="cp">#define CT2_LPU0_HOSTFN_MBOX0_MSK	(CT2_PCI_CPQ_BASE + 0x98)</span>
<span class="cp">#define CT2_LPU1_HOSTFN_MBOX0_MSK	(CT2_PCI_CPQ_BASE + 0x9C)</span>
<span class="cp">#define CT2_HOST_SEM0_REG		0x000148f0</span>
<span class="cp">#define CT2_HOST_SEM1_REG		0x000148f4</span>
<span class="cp">#define CT2_HOST_SEM2_REG		0x000148f8</span>
<span class="cp">#define CT2_HOST_SEM3_REG		0x000148fc</span>
<span class="cp">#define CT2_HOST_SEM4_REG		0x00014900</span>
<span class="cp">#define CT2_HOST_SEM5_REG		0x00014904</span>
<span class="cp">#define CT2_HOST_SEM6_REG		0x00014908</span>
<span class="cp">#define CT2_HOST_SEM7_REG		0x0001490c</span>
<span class="cp">#define CT2_HOST_SEM0_INFO_REG		0x000148b0</span>
<span class="cp">#define CT2_HOST_SEM1_INFO_REG		0x000148b4</span>
<span class="cp">#define CT2_HOST_SEM2_INFO_REG		0x000148b8</span>
<span class="cp">#define CT2_HOST_SEM3_INFO_REG		0x000148bc</span>
<span class="cp">#define CT2_HOST_SEM4_INFO_REG		0x000148c0</span>
<span class="cp">#define CT2_HOST_SEM5_INFO_REG		0x000148c4</span>
<span class="cp">#define CT2_HOST_SEM6_INFO_REG		0x000148c8</span>
<span class="cp">#define CT2_HOST_SEM7_INFO_REG		0x000148cc</span>

<span class="cp">#define CT2_APP_PLL_LCLK_CTL_REG	0x00014808</span>
<span class="cp">#define __APP_LPUCLK_HALFSPEED		0x40000000</span>
<span class="cp">#define __APP_PLL_LCLK_LOAD		0x20000000</span>
<span class="cp">#define __APP_PLL_LCLK_FBCNT_MK		0x1fe00000</span>
<span class="cp">#define __APP_PLL_LCLK_FBCNT_SH		21</span>
<span class="cp">#define __APP_PLL_LCLK_FBCNT(_v)	((_v) &lt;&lt; __APP_PLL_SCLK_FBCNT_SH)</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">__APP_PLL_LCLK_FBCNT_425_MHZ</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">__APP_PLL_LCLK_FBCNT_468_MHZ</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#define __APP_PLL_LCLK_EXTFB		0x00000800</span>
<span class="cp">#define __APP_PLL_LCLK_ENOUTS		0x00000400</span>
<span class="cp">#define __APP_PLL_LCLK_RATE		0x00000010</span>
<span class="cp">#define CT2_APP_PLL_SCLK_CTL_REG	0x0001480c</span>
<span class="cp">#define __P_SCLK_PLL_LOCK		0x80000000</span>
<span class="cp">#define __APP_PLL_SCLK_REFCLK_SEL	0x40000000</span>
<span class="cp">#define __APP_PLL_SCLK_CLK_DIV2		0x20000000</span>
<span class="cp">#define __APP_PLL_SCLK_LOAD		0x10000000</span>
<span class="cp">#define __APP_PLL_SCLK_FBCNT_MK		0x0ff00000</span>
<span class="cp">#define __APP_PLL_SCLK_FBCNT_SH		20</span>
<span class="cp">#define __APP_PLL_SCLK_FBCNT(_v)	((_v) &lt;&lt; __APP_PLL_SCLK_FBCNT_SH)</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">__APP_PLL_SCLK_FBCNT_NORM</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">__APP_PLL_SCLK_FBCNT_10G_FC</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#define __APP_PLL_SCLK_EXTFB		0x00000800</span>
<span class="cp">#define __APP_PLL_SCLK_ENOUTS		0x00000400</span>
<span class="cp">#define __APP_PLL_SCLK_RATE		0x00000010</span>
<span class="cp">#define CT2_PCIE_MISC_REG		0x00014804</span>
<span class="cp">#define __ETH_CLK_ENABLE_PORT1		0x00000010</span>
<span class="cp">#define CT2_CHIP_MISC_PRG		0x000148a4</span>
<span class="cp">#define __ETH_CLK_ENABLE_PORT0		0x00004000</span>
<span class="cp">#define __APP_LPU_SPEED			0x00000002</span>
<span class="cp">#define CT2_MBIST_STAT_REG		0x00014818</span>
<span class="cp">#define CT2_MBIST_CTL_REG		0x0001481c</span>
<span class="cp">#define CT2_PMM_1T_CONTROL_REG_P0	0x0002381c</span>
<span class="cp">#define __PMM_1T_PNDB_P			0x00000002</span>
<span class="cp">#define CT2_PMM_1T_CONTROL_REG_P1	0x00023c1c</span>
<span class="cp">#define CT2_WGN_STATUS			0x00014990</span>
<span class="cp">#define __A2T_AHB_LOAD			0x00000800</span>
<span class="cp">#define __WGN_READY			0x00000400</span>
<span class="cp">#define __GLBL_PF_VF_CFG_RDY		0x00000200</span>
<span class="cp">#define CT2_NFC_CSR_CLR_REG             0x00027420</span>
<span class="cp">#define CT2_NFC_CSR_SET_REG		0x00027424</span>
<span class="cp">#define __HALT_NFC_CONTROLLER		0x00000002</span>
<span class="cp">#define __NFC_CONTROLLER_HALTED		0x00001000</span>

<span class="cp">#define CT2_RSC_GPR15_REG		0x0002765c</span>
<span class="cp">#define CT2_CSI_FW_CTL_REG              0x00027080</span>
<span class="cp">#define __RESET_AND_START_SCLK_LCLK_PLLS 0x00010000</span>
<span class="cp">#define CT2_CSI_FW_CTL_SET_REG          0x00027088</span>

<span class="cp">#define CT2_CSI_MAC0_CONTROL_REG	0x000270d0</span>
<span class="cp">#define __CSI_MAC_RESET			0x00000010</span>
<span class="cp">#define __CSI_MAC_AHB_RESET		0x00000008</span>
<span class="cp">#define CT2_CSI_MAC1_CONTROL_REG	0x000270d4</span>
<span class="cp">#define CT2_CSI_MAC_CONTROL_REG(__n) \</span>
<span class="cp">	(CT2_CSI_MAC0_CONTROL_REG + \</span>
<span class="cp">	(__n) * (CT2_CSI_MAC1_CONTROL_REG - CT2_CSI_MAC0_CONTROL_REG))</span>

<span class="cm">/*</span>
<span class="cm"> * Name semaphore registers based on usage</span>
<span class="cm"> */</span>
<span class="cp">#define BFA_IOC0_HBEAT_REG		HOST_SEM0_INFO_REG</span>
<span class="cp">#define BFA_IOC0_STATE_REG		HOST_SEM1_INFO_REG</span>
<span class="cp">#define BFA_IOC1_HBEAT_REG		HOST_SEM2_INFO_REG</span>
<span class="cp">#define BFA_IOC1_STATE_REG		HOST_SEM3_INFO_REG</span>
<span class="cp">#define BFA_FW_USE_COUNT		HOST_SEM4_INFO_REG</span>
<span class="cp">#define BFA_IOC_FAIL_SYNC		HOST_SEM5_INFO_REG</span>

<span class="cm">/*</span>
<span class="cm"> * CT2 semaphore register locations changed</span>
<span class="cm"> */</span>
<span class="cp">#define CT2_BFA_IOC0_HBEAT_REG		CT2_HOST_SEM0_INFO_REG</span>
<span class="cp">#define CT2_BFA_IOC0_STATE_REG		CT2_HOST_SEM1_INFO_REG</span>
<span class="cp">#define CT2_BFA_IOC1_HBEAT_REG		CT2_HOST_SEM2_INFO_REG</span>
<span class="cp">#define CT2_BFA_IOC1_STATE_REG		CT2_HOST_SEM3_INFO_REG</span>
<span class="cp">#define CT2_BFA_FW_USE_COUNT		CT2_HOST_SEM4_INFO_REG</span>
<span class="cp">#define CT2_BFA_IOC_FAIL_SYNC		CT2_HOST_SEM5_INFO_REG</span>

<span class="cp">#define CPE_Q_NUM(__fn, __q)	(((__fn) &lt;&lt; 2) + (__q))</span>
<span class="cp">#define RME_Q_NUM(__fn, __q)	(((__fn) &lt;&lt; 2) + (__q))</span>

<span class="cm">/*</span>
<span class="cm"> * And corresponding host interrupt status bit field defines</span>
<span class="cm"> */</span>
<span class="cp">#define __HFN_INT_CPE_Q0	0x00000001U</span>
<span class="cp">#define __HFN_INT_CPE_Q1	0x00000002U</span>
<span class="cp">#define __HFN_INT_CPE_Q2	0x00000004U</span>
<span class="cp">#define __HFN_INT_CPE_Q3	0x00000008U</span>
<span class="cp">#define __HFN_INT_CPE_Q4	0x00000010U</span>
<span class="cp">#define __HFN_INT_CPE_Q5	0x00000020U</span>
<span class="cp">#define __HFN_INT_CPE_Q6	0x00000040U</span>
<span class="cp">#define __HFN_INT_CPE_Q7	0x00000080U</span>
<span class="cp">#define __HFN_INT_RME_Q0	0x00000100U</span>
<span class="cp">#define __HFN_INT_RME_Q1	0x00000200U</span>
<span class="cp">#define __HFN_INT_RME_Q2	0x00000400U</span>
<span class="cp">#define __HFN_INT_RME_Q3	0x00000800U</span>
<span class="cp">#define __HFN_INT_RME_Q4	0x00001000U</span>
<span class="cp">#define __HFN_INT_RME_Q5	0x00002000U</span>
<span class="cp">#define __HFN_INT_RME_Q6	0x00004000U</span>
<span class="cp">#define __HFN_INT_RME_Q7	0x00008000U</span>
<span class="cp">#define __HFN_INT_ERR_EMC	0x00010000U</span>
<span class="cp">#define __HFN_INT_ERR_LPU0	0x00020000U</span>
<span class="cp">#define __HFN_INT_ERR_LPU1	0x00040000U</span>
<span class="cp">#define __HFN_INT_ERR_PSS	0x00080000U</span>
<span class="cp">#define __HFN_INT_MBOX_LPU0	0x00100000U</span>
<span class="cp">#define __HFN_INT_MBOX_LPU1	0x00200000U</span>
<span class="cp">#define __HFN_INT_MBOX1_LPU0	0x00400000U</span>
<span class="cp">#define __HFN_INT_MBOX1_LPU1	0x00800000U</span>
<span class="cp">#define __HFN_INT_LL_HALT	0x01000000U</span>
<span class="cp">#define __HFN_INT_CPE_MASK	0x000000ffU</span>
<span class="cp">#define __HFN_INT_RME_MASK	0x0000ff00U</span>
<span class="cp">#define __HFN_INT_ERR_MASK	\</span>
<span class="cp">	(__HFN_INT_ERR_EMC | __HFN_INT_ERR_LPU0 | __HFN_INT_ERR_LPU1 | \</span>
<span class="cp">	 __HFN_INT_ERR_PSS | __HFN_INT_LL_HALT)</span>
<span class="cp">#define __HFN_INT_FN0_MASK	\</span>
<span class="cp">	(__HFN_INT_CPE_Q0 | __HFN_INT_CPE_Q1 | __HFN_INT_CPE_Q2 | \</span>
<span class="cp">	 __HFN_INT_CPE_Q3 | __HFN_INT_RME_Q0 | __HFN_INT_RME_Q1 | \</span>
<span class="cp">	 __HFN_INT_RME_Q2 | __HFN_INT_RME_Q3 | __HFN_INT_MBOX_LPU0)</span>
<span class="cp">#define __HFN_INT_FN1_MASK	\</span>
<span class="cp">	(__HFN_INT_CPE_Q4 | __HFN_INT_CPE_Q5 | __HFN_INT_CPE_Q6 | \</span>
<span class="cp">	 __HFN_INT_CPE_Q7 | __HFN_INT_RME_Q4 | __HFN_INT_RME_Q5 | \</span>
<span class="cp">	 __HFN_INT_RME_Q6 | __HFN_INT_RME_Q7 | __HFN_INT_MBOX_LPU1)</span>

<span class="cm">/*</span>
<span class="cm"> * Host interrupt status defines for 1860</span>
<span class="cm"> */</span>
<span class="cp">#define __HFN_INT_MBOX_LPU0_CT2	0x00010000U</span>
<span class="cp">#define __HFN_INT_MBOX_LPU1_CT2	0x00020000U</span>
<span class="cp">#define __HFN_INT_ERR_PSS_CT2	0x00040000U</span>
<span class="cp">#define __HFN_INT_ERR_LPU0_CT2	0x00080000U</span>
<span class="cp">#define __HFN_INT_ERR_LPU1_CT2	0x00100000U</span>
<span class="cp">#define __HFN_INT_CPQ_HALT_CT2	0x00200000U</span>
<span class="cp">#define __HFN_INT_ERR_WGN_CT2	0x00400000U</span>
<span class="cp">#define __HFN_INT_ERR_LEHRX_CT2	0x00800000U</span>
<span class="cp">#define __HFN_INT_ERR_LEHTX_CT2	0x01000000U</span>
<span class="cp">#define __HFN_INT_ERR_MASK_CT2	\</span>
<span class="cp">	(__HFN_INT_ERR_PSS_CT2 | __HFN_INT_ERR_LPU0_CT2 | \</span>
<span class="cp">	 __HFN_INT_ERR_LPU1_CT2 | __HFN_INT_CPQ_HALT_CT2 | \</span>
<span class="cp">	 __HFN_INT_ERR_WGN_CT2 | __HFN_INT_ERR_LEHRX_CT2 | \</span>
<span class="cp">	 __HFN_INT_ERR_LEHTX_CT2)</span>
<span class="cp">#define __HFN_INT_FN0_MASK_CT2	\</span>
<span class="cp">	(__HFN_INT_CPE_Q0 | __HFN_INT_CPE_Q1 | __HFN_INT_CPE_Q2 | \</span>
<span class="cp">	 __HFN_INT_CPE_Q3 | __HFN_INT_RME_Q0 | __HFN_INT_RME_Q1 | \</span>
<span class="cp">	 __HFN_INT_RME_Q2 | __HFN_INT_RME_Q3 | __HFN_INT_MBOX_LPU0_CT2)</span>
<span class="cp">#define __HFN_INT_FN1_MASK_CT2	\</span>
<span class="cp">	(__HFN_INT_CPE_Q4 | __HFN_INT_CPE_Q5 | __HFN_INT_CPE_Q6 | \</span>
<span class="cp">	 __HFN_INT_CPE_Q7 | __HFN_INT_RME_Q4 | __HFN_INT_RME_Q5 | \</span>
<span class="cp">	 __HFN_INT_RME_Q6 | __HFN_INT_RME_Q7 | __HFN_INT_MBOX_LPU1_CT2)</span>

<span class="cm">/*</span>
<span class="cm"> * asic memory map.</span>
<span class="cm"> */</span>
<span class="cp">#define PSS_SMEM_PAGE_START		0x8000</span>
<span class="cp">#define PSS_SMEM_PGNUM(_pg0, _ma)	((_pg0) + ((_ma) &gt;&gt; 15))</span>
<span class="cp">#define PSS_SMEM_PGOFF(_ma)		((_ma) &amp; 0x7fff)</span>

<span class="cp">#endif </span><span class="cm">/* __BFI_REG_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
