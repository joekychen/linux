f | bnad_ethtool.c | s | 28K | 1019 | Jing Huang | huangj@Brocade.COM | 1333577958 |  | bna: Function name changes and cleanups  Renamed following functions: bnad_cleanup_tx to bnad_destroy_tx bnad_free_all_txbufs to bnad_txq_cleanup bnad_free_txbufs to bnad_txcmpl_process bnad_tx to bnad_tx_complete bnad_cleanup_rx to bnad_destroy_rx bnad_reset_rcb to bnad_rcb_cleanup bnad_free_all_rxbufs to bnad_rxq_cleanup bnad_cq_cmpl_init to bnad_cq_cleanup bnad_alloc_n_post_rxbufs to bnad_rxq_post bnad_poll_cq to bnad_cq_process  Signed-off-by: Jing Huang <huangj@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bna_hw_defs.h | s | 11K | 359 | Rasesh Mody | rmody@brocade.com | 1317339395 |  | bna: Brocade 1860 HW Enablement  This patch enables new HW Brocade 1860. Add BFA_CM_NIC capability mask to bfa_ioc_attr, Sub-System Device ID Info and support for Brocade 1860 device ID to bfa_ioc.c and bnad.c.  Signed-off-by: Gurunatha Karaje <gkaraje@brocade.com> Signed-off-by: Rasesh Mody <rmody@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bna_tx_rx.c | s | 91K | 3190 | Rasesh Mody | rmody@brocade.com | 1317339396 |  | bna: Add Callback to Fix RXQ Stop  Change details:  - Add a callback in the BNA, which is called before sending FW command to stop    RxQs. After this callback is called, driver should not post anymore Rx    buffers to the RxQ. This addresses a small window where driver posts Rx    buffers while FW is stopping/has stopped the RxQ.  - Registering callback function, rx_stall_cbfn, during bna_rx_create.    Invoking callback function, rx_stall_cbfn, before sending rx_cfg_clr    command to FW  - Bnad_cb_rx_stall implementation - set a flag in the Rxq to mark buffer    posting disabled state. While posting buffers check for the above flag.  Signed-off-by: Gurunatha Karaje <gkaraje@brocade.com> Signed-off-by: Rasesh Mody <rmody@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bfi_cna.h | s | 4.0K | 170 | Jeff Kirsher | jeffrey.t.kirsher@intel.com | 1313055674 |  | bna: Move the Brocade driver  Moves the Brocade driver into drivers/net/ethernet/brocade/ and make the necessary Kconfig and Makefile changes.  CC: Rasesh Mody <rmody@brocade.com> CC: Debashis Dutt <ddutt@brocade.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | bna_types.h | s | 19K | 809 | stephen hemminger | shemminger@vyatta.com | 1325787780 |  | bna: fix sparse warnings/errors  This fixes a several sparse warnings.   * the __iomem tag was being used incorrectly (needs to be a prefix)   * several variables should have been static since local to one file   * the firmware was not being forwared declared     and was const one place and not the other  Signed-off-by: Stephen Hemminger <shemminger@vyatta.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnad_debugfs.c | s | 14K | 517 | Linus Torvalds | torvalds@linux-foundation.org | 1332362201 |  | Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/vfs  Pull vfs pile 1 from Al Viro:  "This is _not_ all; in particular, Miklos' and Jan's stuff is not there   yet."  * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/vfs: (64 commits)   ext4: initialization of ext4_li_mtx needs to be done earlier   debugfs-related mode_t whack-a-mole   hfsplus: add an ioctl to bless files   hfsplus: change finder_info to u32   hfsplus: initialise userflags   qnx4: new helper - try_extent()   qnx4: get rid of qnx4_bread/qnx4_getblk   take removal of PF_FORKNOEXEC to flush_old_exec()   trim includes in inode.c   um: uml_dup_mmap() relies on ->mmap_sem being held, but activate_mm() doesn't hold it   um: embed ->stub_pages[] into mmu_context   gadgetfs: list_for_each_safe() misuse   ocfs2: fix leaks on failure exits in module_init   ecryptfs: make register_filesystem() the last potential failure exit   ntfs: forgets to unregister sysctls on register_filesystem() failure   logfs: missing cleanup on register_filesystem() failure   jfs: mising cleanup on register_filesystem() failure   make configfs_pin_fs() return root dentry on success   configfs: configfs_create_dir() has parent dentry in dentry->d_parent   configfs: sanitize configfs_create()   ...
f | bfa_defs_cna.h | s | 7.4K | 212 | Rasesh Mody | rmody@brocade.com | 1317339395 |  | bna: PLL Init Fix and Add Stats Attributes  Change details:  - Fix to release soft reset in PLL init for HW  - Added stats attributes and new bfi msg class  - Removed some unused code and typo fixes  Signed-off-by: Gurunatha Karaje <gkaraje@brocade.com> Signed-off-by: Rasesh Mody <rmody@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | Makefile | g | 306B |  | Krishna Gudipati | kgudipat@brocade.com | 1324677058 |  | bna: Add debugfs interface.  Change details: 	- Add debugfs support to obtain firmware trace, saved firmware trace on 	  an IOC crash, driver info and read/write to registers.  	- debugfs hierarchy: 	  bna/pci_dev:<pci_name> 	  where the pci_name corresponds to the one under /sys/bus/pci/drivers/bna  	- Following are the new debugfs entries added: 	  fwtrc: collect current firmware trace. 	  fwsave: collect last saved fw trace as a result of firmware crash. 	  regwr: write one word to chip register 	  regrd: read one or more words from chip register. 	  drvinfo: collect the driver information.  Signed-off-by: Krishna Gudipati <kgudipat@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnad.c | s | 84K | 2944 | Linus Torvalds | torvalds@linux-foundation.org | 1337739770 |  | Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/trivial  Pull trivial updates from Jiri Kosina:  "As usual, it's mostly typo fixes, redundant code elimination and some   documentation updates."  * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/trivial: (57 commits)   edac, mips: don't change code that has been removed in edac/mips tree   xtensa: Change mail addresses of Hannes Weiner and Oskar Schirmer   lib: Change mail address of Oskar Schirmer   net: Change mail address of Oskar Schirmer   arm/m68k: Change mail address of Sebastian Hess   i2c: Change mail address of Oskar Schirmer   net: Fix tcp_build_and_update_options comment in struct tcp_sock   atomic64_32.h: fix parameter naming mismatch   Kconfig: replace "--- help ---" with "---help---"   c2port: fix bogus Kconfig "default no"   edac: Fix spelling errors.   qla1280: Remove redundant NULL check before release_firmware() call   remoteproc: remove redundant NULL check before release_firmware()   qla2xxx: Remove redundant NULL check before release_firmware() call.   aic94xx: Get rid of redundant NULL check before release_firmware() call   tehuti: delete redundant NULL check before release_firmware()   qlogic: get rid of a redundant test for NULL before call to release_firmware()   bna: remove redundant NULL test before release_firmware()   tg3: remove redundant NULL test before release_firmware() call   typhoon: get rid of redundant conditional before all to release_firmware()   ...
f | bfa_msgq.c | s | 15K | 561 | Dan Carpenter | error27@gmail.com | 1314377718 |  | bna: off by one in bfa_msgq_rspq_pi_update()  The rspq->rsphdlr[] array has BFI_MC_MAX elements, so this test was off by one.  Signed-off-by: Dan Carpenter <error27@gmail.com> Acked-by: Rasesh Mody <rmody@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bna.h | s | 16K | 480 | stephen hemminger | shemminger@vyatta.com | 1316215220 |  | bna: make function tables cont  To prevent malicious usage, all tables of pointers must be const.  Compile tested only. Gleaned for PAX.  Signed-off-by: Stephen Hemminger <shemminger@vyatta.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bfa_msgq.h | s | 3.2K | 103 | Rasesh Mody | rmody@brocade.com | 1313073012 |  | bna: MSGQ Implementation  Change details:  - Currently modules communicate with the FW using 32 byte command and    response register. This limits the size of the command and response    messages exchanged with the FW to 32 bytes. We need a mechanism to    exchange the comamnds and responses exchange with FW that exceeds 32 bytes.   - MSGQ implementation provides that facility. It removes the assumption that    command/response queue size is precisely calculated to accommodate all    concurrent FW commands/responses. The queue depth is made variable now, defined    by a macro. A waiting command list is implemented to hold all the commands    when there is no place in the command queue. Callback is implemented for    each command entry to invoke the module posting the command, when there is    space in the command queue and the command was finally posted to the queue.    Module/Object information is embedded in the response for tracking purpose.  Signed-off-by: Rasesh Mody <rmody@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bfa_ioc.c | s | 65K | 2545 | Jing Huang | huangj@Brocade.COM | 1333577957 |  | bna: ioc cleanups  Remove irrelevant code. Change to start Hearbeat failure moniter after IOC become operational.  Signed-off-by: Jing Huang <huangj@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bfa_defs.h | s | 8.2K | 290 | Krishna Gudipati | kgudipat@brocade.com | 1328155919 |  | bna: Implement ethtool flash_device entry point.  Incorporated review comments from Ben Hutchings.  Change details: 	- Implement ethtool flash_device() entry point to write the 	  firmware image to the flash firmware partition.  Signed-off-by: Krishna Gudipati <kgudipat@brocade.com> Reviewed-by: Ben Hutchings <bhutchings@solarflare.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bfa_defs_mfg_comm.h | s | 5.1K | 154 | Rasesh Mody | rmody@brocade.com | 1317339394 |  | bna: Capability Map and MFG Block Changes for New HW  Add capability map and generic model name scheme for manufacturing block. Add card types for new HW.  Remove bfa_mfg_is_card_type_valid and ibfa_mfg_adapter_prop_init_flash_ct macros.  Signed-off-by: Gurunatha Karaje <gkaraje@brocade.com> Signed-off-by: Rasesh Mody <rmody@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bfa_cs.h | s | 3.2K | 118 | Jeff Kirsher | jeffrey.t.kirsher@intel.com | 1313055674 |  | bna: Move the Brocade driver  Moves the Brocade driver into drivers/net/ethernet/brocade/ and make the necessary Kconfig and Makefile changes.  CC: Rasesh Mody <rmody@brocade.com> CC: Debashis Dutt <ddutt@brocade.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | bfa_cee.c | s | 7.8K | 310 | Joe Perches | joe@perches.com | 1329112060 |  | drivers/net: Remove boolean comparisons to true/false  Booleans should not be compared to true or false but be directly tested or tested with !.  Done via cocci script:  @@ bool t; @@ - t == true + t @@ bool t; @@ - t != true + !t @@ bool t; @@ - t == false + !t @@ bool t; @@ - t != false + t  Signed-off-by: Joe Perches <joe@perches.com> Reviewed-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bfa_ioc.h | s | 11K | 341 | Krishna Gudipati | kgudipat@brocade.com | 1324677058 |  | bna: Add debugfs interface.  Change details: 	- Add debugfs support to obtain firmware trace, saved firmware trace on 	  an IOC crash, driver info and read/write to registers.  	- debugfs hierarchy: 	  bna/pci_dev:<pci_name> 	  where the pci_name corresponds to the one under /sys/bus/pci/drivers/bna  	- Following are the new debugfs entries added: 	  fwtrc: collect current firmware trace. 	  fwsave: collect last saved fw trace as a result of firmware crash. 	  regwr: write one word to chip register 	  regrd: read one or more words from chip register. 	  drvinfo: collect the driver information.  Signed-off-by: Krishna Gudipati <kgudipat@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bfi_enet.h | s | 19K | 777 | Rasesh Mody | rmody@brocade.com | 1313073012 |  | bna: Introduce ENET as New Driver and FW Interface  Change details:  - This patch contains the messages, opcodes and structure format for the    messages and responses exchanged between driver and the FW. In addition    this patch contains the state machine implementation for Ethport, Enet,    IOCEth.  - Ethport object is responsible for receiving link state events, sending    port enable/disable commands to FW.  - Enet object is responsible for synchronizing initialization/teardown of    tx & rx datapath configuration.  - IOCEth object is responsible for init/un-init of IO Controller in the    adapter which runs the FW.  - This patch also contains code for initialization and resource assignment    for Ethport, Enet, IOCEth, Tx, Rx objects.  Signed-off-by: Rasesh Mody <rmody@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bfa_defs_status.h | s | 6.6K | 213 | Jeff Kirsher | jeffrey.t.kirsher@intel.com | 1313055674 |  | bna: Move the Brocade driver  Moves the Brocade driver into drivers/net/ethernet/brocade/ and make the necessary Kconfig and Makefile changes.  CC: Rasesh Mody <rmody@brocade.com> CC: Debashis Dutt <ddutt@brocade.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | cna.h | s | 3.2K | 92 | Joe Perches | joe@perches.com | 1321492998 |  | bna: Convert MAC_ADDRLEN uses to ETH_ALEN  Reduce the number of #defines, use the normal #define from if_ether.h  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bfi_reg.h | s | 18K | 433 | Jing Huang | huangj@Brocade.COM | 1333577957 |  | bna: Flash controller ioc pll init fixes  Added NFC pause/resume logic. We only do NFC pause/resume if NFC version is greater than 0x143 and it was halted before, otherwise we revert to old NFC halt mechanism.  Made changes to avoid clearing off the interrupts during the initial pll initialization.  Signed-off-by: Jing Huang <huangj@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bfa_cee.h | s | 2.0K | 59 | Krishna Gudipati | kgudipat@brocade.com | 1324677058 |  | bna: Add debugfs interface.  Change details: 	- Add debugfs support to obtain firmware trace, saved firmware trace on 	  an IOC crash, driver info and read/write to registers.  	- debugfs hierarchy: 	  bna/pci_dev:<pci_name> 	  where the pci_name corresponds to the one under /sys/bus/pci/drivers/bna  	- Following are the new debugfs entries added: 	  fwtrc: collect current firmware trace. 	  fwsave: collect last saved fw trace as a result of firmware crash. 	  regwr: write one word to chip register 	  regrd: read one or more words from chip register. 	  drvinfo: collect the driver information.  Signed-off-by: Krishna Gudipati <kgudipat@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | Kconfig | g | 423B |  | Jeff Kirsher | jeffrey.t.kirsher@intel.com | 1313055674 |  | bna: Move the Brocade driver  Moves the Brocade driver into drivers/net/ethernet/brocade/ and make the necessary Kconfig and Makefile changes.  CC: Rasesh Mody <rmody@brocade.com> CC: Debashis Dutt <ddutt@brocade.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | bnad.h | s | 9.6K | 332 | Jing Huang | huangj@Brocade.COM | 1333577958 |  | bna: Update driver version to 3.0.23.0  Driver version update  Signed-off-by: Jing Huang <huangj@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bfi.h | s | 14K | 512 | Krishna Gudipati | kgudipat@brocade.com | 1324677058 |  | bna: Add debugfs interface.  Change details: 	- Add debugfs support to obtain firmware trace, saved firmware trace on 	  an IOC crash, driver info and read/write to registers.  	- debugfs hierarchy: 	  bna/pci_dev:<pci_name> 	  where the pci_name corresponds to the one under /sys/bus/pci/drivers/bna  	- Following are the new debugfs entries added: 	  fwtrc: collect current firmware trace. 	  fwsave: collect last saved fw trace as a result of firmware crash. 	  regwr: write one word to chip register 	  regrd: read one or more words from chip register. 	  drvinfo: collect the driver information.  Signed-off-by: Krishna Gudipati <kgudipat@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bna_enet.c | s | 51K | 1792 | Krishna Gudipati | kgudipat@brocade.com | 1324677058 |  | bna: Add debugfs interface.  Change details: 	- Add debugfs support to obtain firmware trace, saved firmware trace on 	  an IOC crash, driver info and read/write to registers.  	- debugfs hierarchy: 	  bna/pci_dev:<pci_name> 	  where the pci_name corresponds to the one under /sys/bus/pci/drivers/bna  	- Following are the new debugfs entries added: 	  fwtrc: collect current firmware trace. 	  fwsave: collect last saved fw trace as a result of firmware crash. 	  regwr: write one word to chip register 	  regrd: read one or more words from chip register. 	  drvinfo: collect the driver information.  Signed-off-by: Krishna Gudipati <kgudipat@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | cna_fwimg.c | s | 2.2K | 84 | stephen hemminger | shemminger@vyatta.com | 1325787780 |  | bna: fix sparse warnings/errors  This fixes a several sparse warnings.   * the __iomem tag was being used incorrectly (needs to be a prefix)   * several variables should have been static since local to one file   * the firmware was not being forwared declared     and was const one place and not the other  Signed-off-by: Stephen Hemminger <shemminger@vyatta.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bfa_ioc_ct.c | s | 25K | 804 | Jing Huang | huangj@Brocade.COM | 1333577957 |  | bna: Flash controller ioc pll init fixes  Added NFC pause/resume logic. We only do NFC pause/resume if NFC version is greater than 0x143 and it was halted before, otherwise we revert to old NFC halt mechanism.  Made changes to avoid clearing off the interrupts during the initial pll initialization.  Signed-off-by: Jing Huang <huangj@brocade.com> Signed-off-by: David S. Miller <davem@davemloft.net>
