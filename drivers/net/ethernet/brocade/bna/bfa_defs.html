<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › ethernet › brocade › bna › bfa_defs.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>bfa_defs.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Linux network driver for Brocade Converged Network Adapter.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify it</span>
<span class="cm"> * under the terms of the GNU General Public License (GPL) Version 2 as</span>
<span class="cm"> * published by the Free Software Foundation</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful, but</span>
<span class="cm"> * WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="cm"> * General Public License for more details.</span>
<span class="cm"> */</span>
<span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2005-2010 Brocade Communications Systems, Inc.</span>
<span class="cm"> * All rights reserved</span>
<span class="cm"> * www.brocade.com</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __BFA_DEFS_H__</span>
<span class="cp">#define __BFA_DEFS_H__</span>

<span class="cp">#include &quot;cna.h&quot;</span>
<span class="cp">#include &quot;bfa_defs_status.h&quot;</span>
<span class="cp">#include &quot;bfa_defs_mfg_comm.h&quot;</span>

<span class="cp">#define BFA_STRING_32	32</span>
<span class="cp">#define BFA_VERSION_LEN 64</span>

<span class="cm">/**</span>
<span class="cm"> * ---------------------- adapter definitions ------------</span>
<span class="cm"> */</span>

<span class="cm">/**</span>
<span class="cm"> * BFA adapter level attributes.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">BFA_ADAPTER_SERIAL_NUM_LEN</span> <span class="o">=</span> <span class="n">STRSZ</span><span class="p">(</span><span class="n">BFA_MFG_SERIALNUM_SIZE</span><span class="p">),</span>
					<span class="cm">/*</span>
<span class="cm">					 *!&lt; adapter serial num length</span>
<span class="cm">					 */</span>
	<span class="n">BFA_ADAPTER_MODEL_NAME_LEN</span>  <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>  <span class="cm">/*!&lt; model name length */</span>
	<span class="n">BFA_ADAPTER_MODEL_DESCR_LEN</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span> <span class="cm">/*!&lt; model description length */</span>
	<span class="n">BFA_ADAPTER_MFG_NAME_LEN</span>    <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>   <span class="cm">/*!&lt; manufacturer name length */</span>
	<span class="n">BFA_ADAPTER_SYM_NAME_LEN</span>    <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>  <span class="cm">/*!&lt; adapter symbolic name length */</span>
	<span class="n">BFA_ADAPTER_OS_TYPE_LEN</span>	    <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>  <span class="cm">/*!&lt; adapter os type length */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bfa_adapter_attr</span> <span class="p">{</span>
	<span class="kt">char</span>		<span class="n">manufacturer</span><span class="p">[</span><span class="n">BFA_ADAPTER_MFG_NAME_LEN</span><span class="p">];</span>
	<span class="kt">char</span>		<span class="n">serial_num</span><span class="p">[</span><span class="n">BFA_ADAPTER_SERIAL_NUM_LEN</span><span class="p">];</span>
	<span class="n">u32</span>	<span class="n">card_type</span><span class="p">;</span>
	<span class="kt">char</span>		<span class="n">model</span><span class="p">[</span><span class="n">BFA_ADAPTER_MODEL_NAME_LEN</span><span class="p">];</span>
	<span class="kt">char</span>		<span class="n">model_descr</span><span class="p">[</span><span class="n">BFA_ADAPTER_MODEL_DESCR_LEN</span><span class="p">];</span>
	<span class="n">u64</span>		<span class="n">pwwn</span><span class="p">;</span>
	<span class="kt">char</span>		<span class="n">node_symname</span><span class="p">[</span><span class="n">FC_SYMNAME_MAX</span><span class="p">];</span>
	<span class="kt">char</span>		<span class="n">hw_ver</span><span class="p">[</span><span class="n">BFA_VERSION_LEN</span><span class="p">];</span>
	<span class="kt">char</span>		<span class="n">fw_ver</span><span class="p">[</span><span class="n">BFA_VERSION_LEN</span><span class="p">];</span>
	<span class="kt">char</span>		<span class="n">optrom_ver</span><span class="p">[</span><span class="n">BFA_VERSION_LEN</span><span class="p">];</span>
	<span class="kt">char</span>		<span class="n">os_type</span><span class="p">[</span><span class="n">BFA_ADAPTER_OS_TYPE_LEN</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">bfa_mfg_vpd</span> <span class="n">vpd</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mac</span> <span class="n">mac</span><span class="p">;</span>

	<span class="n">u8</span>		<span class="n">nports</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">max_speed</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">prototype</span><span class="p">;</span>
	<span class="kt">char</span>	        <span class="n">asic_rev</span><span class="p">;</span>

	<span class="n">u8</span>		<span class="n">pcie_gen</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">pcie_lanes_orig</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">pcie_lanes</span><span class="p">;</span>
	<span class="n">u8</span>	        <span class="n">cna_capable</span><span class="p">;</span>

	<span class="n">u8</span>		<span class="n">is_mezz</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">trunk_capable</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * ---------------------- IOC definitions ------------</span>
<span class="cm"> */</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">BFA_IOC_DRIVER_LEN</span>	<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">BFA_IOC_CHIP_REV_LEN</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * Driver and firmware versions.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_ioc_driver_attr</span> <span class="p">{</span>
	<span class="kt">char</span>		<span class="n">driver</span><span class="p">[</span><span class="n">BFA_IOC_DRIVER_LEN</span><span class="p">];</span>	<span class="cm">/*!&lt; driver name */</span>
	<span class="kt">char</span>		<span class="n">driver_ver</span><span class="p">[</span><span class="n">BFA_VERSION_LEN</span><span class="p">];</span>	<span class="cm">/*!&lt; driver version */</span>
	<span class="kt">char</span>		<span class="n">fw_ver</span><span class="p">[</span><span class="n">BFA_VERSION_LEN</span><span class="p">];</span>	<span class="cm">/*!&lt; firmware version */</span>
	<span class="kt">char</span>		<span class="n">bios_ver</span><span class="p">[</span><span class="n">BFA_VERSION_LEN</span><span class="p">];</span>	<span class="cm">/*!&lt; bios version */</span>
	<span class="kt">char</span>		<span class="n">efi_ver</span><span class="p">[</span><span class="n">BFA_VERSION_LEN</span><span class="p">];</span>	<span class="cm">/*!&lt; EFI version */</span>
	<span class="kt">char</span>		<span class="n">ob_ver</span><span class="p">[</span><span class="n">BFA_VERSION_LEN</span><span class="p">];</span>	<span class="cm">/*!&lt; openboot version */</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * IOC PCI device attributes</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_ioc_pci_attr</span> <span class="p">{</span>
	<span class="n">u16</span>	<span class="n">vendor_id</span><span class="p">;</span>	<span class="cm">/*!&lt; PCI vendor ID */</span>
	<span class="n">u16</span>	<span class="n">device_id</span><span class="p">;</span>	<span class="cm">/*!&lt; PCI device ID */</span>
	<span class="n">u16</span>	<span class="n">ssid</span><span class="p">;</span>		<span class="cm">/*!&lt; subsystem ID */</span>
	<span class="n">u16</span>	<span class="n">ssvid</span><span class="p">;</span>		<span class="cm">/*!&lt; subsystem vendor ID */</span>
	<span class="n">u32</span>	<span class="n">pcifn</span><span class="p">;</span>		<span class="cm">/*!&lt; PCI device function */</span>
	<span class="n">u32</span>	<span class="n">rsvd</span><span class="p">;</span>		<span class="cm">/* padding */</span>
	<span class="kt">char</span>		<span class="n">chip_rev</span><span class="p">[</span><span class="n">BFA_IOC_CHIP_REV_LEN</span><span class="p">];</span>	 <span class="cm">/*!&lt; chip revision */</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * IOC states</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bfa_ioc_state</span> <span class="p">{</span>
	<span class="n">BFA_IOC_UNINIT</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/*!&lt; IOC is in uninit state */</span>
	<span class="n">BFA_IOC_RESET</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/*!&lt; IOC is in reset state */</span>
	<span class="n">BFA_IOC_SEMWAIT</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/*!&lt; Waiting for IOC h/w semaphore */</span>
	<span class="n">BFA_IOC_HWINIT</span>		<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>	<span class="cm">/*!&lt; IOC h/w is being initialized */</span>
	<span class="n">BFA_IOC_GETATTR</span>		<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>	<span class="cm">/*!&lt; IOC is being configured */</span>
	<span class="n">BFA_IOC_OPERATIONAL</span>	<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>	<span class="cm">/*!&lt; IOC is operational */</span>
	<span class="n">BFA_IOC_INITFAIL</span>	<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>	<span class="cm">/*!&lt; IOC hardware failure */</span>
	<span class="n">BFA_IOC_FAIL</span>		<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>	<span class="cm">/*!&lt; IOC heart-beat failure */</span>
	<span class="n">BFA_IOC_DISABLING</span>	<span class="o">=</span> <span class="mi">9</span><span class="p">,</span>	<span class="cm">/*!&lt; IOC is being disabled */</span>
	<span class="n">BFA_IOC_DISABLED</span>	<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>	<span class="cm">/*!&lt; IOC is disabled */</span>
	<span class="n">BFA_IOC_FWMISMATCH</span>	<span class="o">=</span> <span class="mi">11</span><span class="p">,</span>	<span class="cm">/*!&lt; IOC f/w different from drivers */</span>
	<span class="n">BFA_IOC_ENABLING</span>	<span class="o">=</span> <span class="mi">12</span><span class="p">,</span>	<span class="cm">/*!&lt; IOC is being enabled */</span>
	<span class="n">BFA_IOC_HWFAIL</span>		<span class="o">=</span> <span class="mi">13</span><span class="p">,</span>	<span class="cm">/*!&lt; PCI mapping doesn&#39;t exist */</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * IOC firmware stats</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_fw_ioc_stats</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">enable_reqs</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">disable_reqs</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">get_attr_reqs</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">dbg_sync</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">dbg_dump</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">unknown_reqs</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * IOC driver stats</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_ioc_drv_stats</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">ioc_isrs</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ioc_enables</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ioc_disables</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ioc_hbfails</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">ioc_boots</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">stats_tmos</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">hb_count</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">disable_reqs</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">enable_reqs</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">disable_replies</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">enable_replies</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">rsvd</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * IOC statistics</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_ioc_stats</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">bfa_ioc_drv_stats</span> <span class="n">drv_stats</span><span class="p">;</span> <span class="cm">/*!&lt; driver IOC stats */</span>
	<span class="k">struct</span> <span class="n">bfa_fw_ioc_stats</span> <span class="n">fw_stats</span><span class="p">;</span>  <span class="cm">/*!&lt; firmware IOC stats */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfa_ioc_type</span> <span class="p">{</span>
	<span class="n">BFA_IOC_TYPE_FC</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFA_IOC_TYPE_FCoE</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">BFA_IOC_TYPE_LL</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * IOC attributes returned in queries</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_ioc_attr</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">bfa_ioc_type</span> <span class="n">ioc_type</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">bfa_ioc_state</span>		<span class="n">state</span><span class="p">;</span>		<span class="cm">/*!&lt; IOC state      */</span>
	<span class="k">struct</span> <span class="n">bfa_adapter_attr</span> <span class="n">adapter_attr</span><span class="p">;</span>	<span class="cm">/*!&lt; HBA attributes */</span>
	<span class="k">struct</span> <span class="n">bfa_ioc_driver_attr</span> <span class="n">driver_attr</span><span class="p">;</span>	<span class="cm">/*!&lt; driver attr    */</span>
	<span class="k">struct</span> <span class="n">bfa_ioc_pci_attr</span> <span class="n">pci_attr</span><span class="p">;</span>
	<span class="n">u8</span>				<span class="n">port_id</span><span class="p">;</span>	<span class="cm">/*!&lt; port number */</span>
	<span class="n">u8</span>				<span class="n">port_mode</span><span class="p">;</span>	<span class="cm">/*!&lt; enum bfa_mode */</span>
	<span class="n">u8</span>				<span class="n">cap_bm</span><span class="p">;</span>		<span class="cm">/*!&lt; capability */</span>
	<span class="n">u8</span>				<span class="n">port_mode_cfg</span><span class="p">;</span>	<span class="cm">/*!&lt; enum bfa_mode */</span>
	<span class="n">u8</span>				<span class="n">rsvd</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/*!&lt; 64bit align */</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * Adapter capability mask definition</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">BFA_CM_HBA</span>	<span class="o">=</span>	<span class="mh">0x01</span><span class="p">,</span>
	<span class="n">BFA_CM_CNA</span>	<span class="o">=</span>	<span class="mh">0x02</span><span class="p">,</span>
	<span class="n">BFA_CM_NIC</span>	<span class="o">=</span>	<span class="mh">0x04</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * ---------------------- mfg definitions ------------</span>
<span class="cm"> */</span>

<span class="cm">/**</span>
<span class="cm"> * Checksum size</span>
<span class="cm"> */</span>
<span class="cp">#define BFA_MFG_CHKSUM_SIZE			16</span>

<span class="cp">#define BFA_MFG_PARTNUM_SIZE			14</span>
<span class="cp">#define BFA_MFG_SUPPLIER_ID_SIZE		10</span>
<span class="cp">#define BFA_MFG_SUPPLIER_PARTNUM_SIZE		20</span>
<span class="cp">#define BFA_MFG_SUPPLIER_SERIALNUM_SIZE		20</span>
<span class="cp">#define BFA_MFG_SUPPLIER_REVISION_SIZE		4</span>

<span class="cp">#pragma pack(1)</span>

<span class="cm">/**</span>
<span class="cm"> * @brief BFA adapter manufacturing block definition.</span>
<span class="cm"> *</span>
<span class="cm"> * All numerical fields are in big-endian format.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_mfg_block</span> <span class="p">{</span>
	<span class="n">u8</span>	<span class="n">version</span><span class="p">;</span>	<span class="cm">/* manufacturing block version */</span>
	<span class="n">u8</span>	<span class="n">mfg_sig</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* characters &#39;M&#39;, &#39;F&#39;, &#39;G&#39; */</span>
	<span class="n">u16</span>	<span class="n">mfgsize</span><span class="p">;</span>	<span class="cm">/* mfg block size */</span>
	<span class="n">u16</span>	<span class="n">u16_chksum</span><span class="p">;</span>	<span class="cm">/* old u16 checksum */</span>
	<span class="kt">char</span>	<span class="n">brcd_serialnum</span><span class="p">[</span><span class="n">STRSZ</span><span class="p">(</span><span class="n">BFA_MFG_SERIALNUM_SIZE</span><span class="p">)];</span>
	<span class="kt">char</span>	<span class="n">brcd_partnum</span><span class="p">[</span><span class="n">STRSZ</span><span class="p">(</span><span class="n">BFA_MFG_PARTNUM_SIZE</span><span class="p">)];</span>
	<span class="n">u8</span>	<span class="n">mfg_day</span><span class="p">;</span>	<span class="cm">/* manufacturing day */</span>
	<span class="n">u8</span>	<span class="n">mfg_month</span><span class="p">;</span>	<span class="cm">/* manufacturing month */</span>
	<span class="n">u16</span>	<span class="n">mfg_year</span><span class="p">;</span>	<span class="cm">/* manufacturing year */</span>
	<span class="n">u64</span>	<span class="n">mfg_wwn</span><span class="p">;</span>	<span class="cm">/* wwn base for this adapter */</span>
	<span class="n">u8</span>	<span class="n">num_wwn</span><span class="p">;</span>	<span class="cm">/* number of wwns assigned */</span>
	<span class="n">u8</span>	<span class="n">mfg_speeds</span><span class="p">;</span>	<span class="cm">/* speeds allowed for this adapter */</span>
	<span class="n">u8</span>	<span class="n">rsv</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">char</span>	<span class="n">supplier_id</span><span class="p">[</span><span class="n">STRSZ</span><span class="p">(</span><span class="n">BFA_MFG_SUPPLIER_ID_SIZE</span><span class="p">)];</span>
	<span class="kt">char</span>	<span class="n">supplier_partnum</span><span class="p">[</span><span class="n">STRSZ</span><span class="p">(</span><span class="n">BFA_MFG_SUPPLIER_PARTNUM_SIZE</span><span class="p">)];</span>
	<span class="kt">char</span>	<span class="n">supplier_serialnum</span><span class="p">[</span><span class="n">STRSZ</span><span class="p">(</span><span class="n">BFA_MFG_SUPPLIER_SERIALNUM_SIZE</span><span class="p">)];</span>
	<span class="kt">char</span>	<span class="n">supplier_revision</span><span class="p">[</span><span class="n">STRSZ</span><span class="p">(</span><span class="n">BFA_MFG_SUPPLIER_REVISION_SIZE</span><span class="p">)];</span>
	<span class="n">mac_t</span>	<span class="n">mfg_mac</span><span class="p">;</span>	<span class="cm">/* base mac address */</span>
	<span class="n">u8</span>	<span class="n">num_mac</span><span class="p">;</span>	<span class="cm">/* number of mac addresses */</span>
	<span class="n">u8</span>	<span class="n">rsv2</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">card_type</span><span class="p">;</span>	<span class="cm">/* card type          */</span>
	<span class="kt">char</span>	<span class="n">cap_nic</span><span class="p">;</span>	<span class="cm">/* capability nic     */</span>
	<span class="kt">char</span>	<span class="n">cap_cna</span><span class="p">;</span>	<span class="cm">/* capability cna     */</span>
	<span class="kt">char</span>	<span class="n">cap_hba</span><span class="p">;</span>	<span class="cm">/* capability hba     */</span>
	<span class="kt">char</span>	<span class="n">cap_fc16g</span><span class="p">;</span>	<span class="cm">/* capability fc 16g      */</span>
	<span class="kt">char</span>	<span class="n">cap_sriov</span><span class="p">;</span>	<span class="cm">/* capability sriov       */</span>
	<span class="kt">char</span>	<span class="n">cap_mezz</span><span class="p">;</span>	<span class="cm">/* capability mezz        */</span>
	<span class="n">u8</span>	<span class="n">rsv3</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">mfg_nports</span><span class="p">;</span>	<span class="cm">/* number of ports        */</span>
	<span class="kt">char</span>	<span class="n">media</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>	<span class="cm">/* xfi/xaui           */</span>
	<span class="kt">char</span>	<span class="n">initial_mode</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span> <span class="cm">/* initial mode: hba/cna/nic */</span>
	<span class="n">u8</span>	<span class="n">rsv4</span><span class="p">[</span><span class="mi">84</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">md5_chksum</span><span class="p">[</span><span class="n">BFA_MFG_CHKSUM_SIZE</span><span class="p">];</span> <span class="cm">/* md5 checksum */</span>
<span class="p">};</span>

<span class="cp">#pragma pack()</span>

<span class="cm">/**</span>
<span class="cm"> * ---------------------- pci definitions ------------</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * PCI device ID information</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">BFA_PCI_DEVICE_ID_CT2</span>		<span class="o">=</span> <span class="mh">0x22</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define bfa_asic_id_ct(device)			\</span>
<span class="cp">	((device) == PCI_DEVICE_ID_BROCADE_CT ||	\</span>
<span class="cp">	 (device) == PCI_DEVICE_ID_BROCADE_CT_FC)</span>
<span class="cp">#define bfa_asic_id_ct2(device)			\</span>
<span class="cp">	((device) == BFA_PCI_DEVICE_ID_CT2)</span>
<span class="cp">#define bfa_asic_id_ctc(device)			\</span>
<span class="cp">	(bfa_asic_id_ct(device) || bfa_asic_id_ct2(device))</span>

<span class="cm">/**</span>
<span class="cm"> * PCI sub-system device and vendor ID information</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">BFA_PCI_FCOE_SSDEVICE_ID</span>	<span class="o">=</span> <span class="mh">0x14</span><span class="p">,</span>
	<span class="n">BFA_PCI_CT2_SSID_FCoE</span>		<span class="o">=</span> <span class="mh">0x22</span><span class="p">,</span>
	<span class="n">BFA_PCI_CT2_SSID_ETH</span>		<span class="o">=</span> <span class="mh">0x23</span><span class="p">,</span>
	<span class="n">BFA_PCI_CT2_SSID_FC</span>		<span class="o">=</span> <span class="mh">0x24</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">bfa_mode</span> <span class="p">{</span>
	<span class="n">BFA_MODE_HBA</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">BFA_MODE_CNA</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">BFA_MODE_NIC</span>		<span class="o">=</span> <span class="mi">3</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	Flash module specific</span>
<span class="cm"> */</span>
<span class="cp">#define BFA_FLASH_PART_ENTRY_SIZE	32	</span><span class="cm">/* partition entry size */</span><span class="cp"></span>
<span class="cp">#define BFA_FLASH_PART_MAX		32	</span><span class="cm">/* maximal # of partitions */</span><span class="cp"></span>
<span class="cp">#define BFA_TOTAL_FLASH_SIZE		0x400000</span>
<span class="cp">#define BFA_FLASH_PART_FWIMG		2</span>
<span class="cp">#define BFA_FLASH_PART_MFG		7</span>

<span class="cm">/*</span>
<span class="cm"> * flash partition attributes</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_flash_part_attr</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">part_type</span><span class="p">;</span>	<span class="cm">/* partition type */</span>
	<span class="n">u32</span>	<span class="n">part_instance</span><span class="p">;</span>	<span class="cm">/* partition instance */</span>
	<span class="n">u32</span>	<span class="n">part_off</span><span class="p">;</span>	<span class="cm">/* partition offset */</span>
	<span class="n">u32</span>	<span class="n">part_size</span><span class="p">;</span>	<span class="cm">/* partition size */</span>
	<span class="n">u32</span>	<span class="n">part_len</span><span class="p">;</span>	<span class="cm">/* partition content length */</span>
	<span class="n">u32</span>	<span class="n">part_status</span><span class="p">;</span>	<span class="cm">/* partition status */</span>
	<span class="kt">char</span>	<span class="n">rsv</span><span class="p">[</span><span class="n">BFA_FLASH_PART_ENTRY_SIZE</span> <span class="o">-</span> <span class="mi">24</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * flash attributes</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">bfa_flash_attr</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">status</span><span class="p">;</span>	<span class="cm">/* flash overall status */</span>
	<span class="n">u32</span>	<span class="n">npart</span><span class="p">;</span>  <span class="cm">/* num of partitions */</span>
	<span class="k">struct</span> <span class="n">bfa_flash_part_attr</span> <span class="n">part</span><span class="p">[</span><span class="n">BFA_FLASH_PART_MAX</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* __BFA_DEFS_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
