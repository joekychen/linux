<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › ethernet › intel › e1000e › e1000.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>e1000.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*******************************************************************************</span>

<span class="cm">  Intel PRO/1000 Linux driver</span>
<span class="cm">  Copyright(c) 1999 - 2012 Intel Corporation.</span>

<span class="cm">  This program is free software; you can redistribute it and/or modify it</span>
<span class="cm">  under the terms and conditions of the GNU General Public License,</span>
<span class="cm">  version 2, as published by the Free Software Foundation.</span>

<span class="cm">  This program is distributed in the hope it will be useful, but WITHOUT</span>
<span class="cm">  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<span class="cm">  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for</span>
<span class="cm">  more details.</span>

<span class="cm">  You should have received a copy of the GNU General Public License along with</span>
<span class="cm">  this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="cm">  51 Franklin St - Fifth Floor, Boston, MA 02110-1301 USA.</span>

<span class="cm">  The full GNU General Public License is included in this distribution in</span>
<span class="cm">  the file called &quot;COPYING&quot;.</span>

<span class="cm">  Contact Information:</span>
<span class="cm">  Linux NICS &lt;linux.nics@intel.com&gt;</span>
<span class="cm">  e1000-devel Mailing List &lt;e1000-devel@lists.sourceforge.net&gt;</span>
<span class="cm">  Intel Corporation, 5200 N.E. Elam Young Parkway, Hillsboro, OR 97124-6497</span>

<span class="cm">*******************************************************************************/</span>

<span class="cm">/* Linux PRO/1000 Ethernet Driver main header file */</span>

<span class="cp">#ifndef _E1000_H_</span>
<span class="cp">#define _E1000_H_</span>

<span class="cp">#include &lt;linux/bitops.h&gt;</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/timer.h&gt;</span>
<span class="cp">#include &lt;linux/workqueue.h&gt;</span>
<span class="cp">#include &lt;linux/io.h&gt;</span>
<span class="cp">#include &lt;linux/netdevice.h&gt;</span>
<span class="cp">#include &lt;linux/pci.h&gt;</span>
<span class="cp">#include &lt;linux/pci-aspm.h&gt;</span>
<span class="cp">#include &lt;linux/crc32.h&gt;</span>
<span class="cp">#include &lt;linux/if_vlan.h&gt;</span>

<span class="cp">#include &quot;hw.h&quot;</span>

<span class="k">struct</span> <span class="n">e1000_info</span><span class="p">;</span>

<span class="cp">#define e_dbg(format, arg...) \</span>
<span class="cp">	netdev_dbg(hw-&gt;adapter-&gt;netdev, format, ## arg)</span>
<span class="cp">#define e_err(format, arg...) \</span>
<span class="cp">	netdev_err(adapter-&gt;netdev, format, ## arg)</span>
<span class="cp">#define e_info(format, arg...) \</span>
<span class="cp">	netdev_info(adapter-&gt;netdev, format, ## arg)</span>
<span class="cp">#define e_warn(format, arg...) \</span>
<span class="cp">	netdev_warn(adapter-&gt;netdev, format, ## arg)</span>
<span class="cp">#define e_notice(format, arg...) \</span>
<span class="cp">	netdev_notice(adapter-&gt;netdev, format, ## arg)</span>


<span class="cm">/* Interrupt modes, as used by the IntMode parameter */</span>
<span class="cp">#define E1000E_INT_MODE_LEGACY		0</span>
<span class="cp">#define E1000E_INT_MODE_MSI		1</span>
<span class="cp">#define E1000E_INT_MODE_MSIX		2</span>

<span class="cm">/* Tx/Rx descriptor defines */</span>
<span class="cp">#define E1000_DEFAULT_TXD		256</span>
<span class="cp">#define E1000_MAX_TXD			4096</span>
<span class="cp">#define E1000_MIN_TXD			64</span>

<span class="cp">#define E1000_DEFAULT_RXD		256</span>
<span class="cp">#define E1000_MAX_RXD			4096</span>
<span class="cp">#define E1000_MIN_RXD			64</span>

<span class="cp">#define E1000_MIN_ITR_USECS		10 </span><span class="cm">/* 100000 irq/sec */</span><span class="cp"></span>
<span class="cp">#define E1000_MAX_ITR_USECS		10000 </span><span class="cm">/* 100    irq/sec */</span><span class="cp"></span>

<span class="cm">/* Early Receive defines */</span>
<span class="cp">#define E1000_ERT_2048			0x100</span>

<span class="cp">#define E1000_FC_PAUSE_TIME		0x0680 </span><span class="cm">/* 858 usec */</span><span class="cp"></span>

<span class="cm">/* How many Tx Descriptors do we need to call netif_wake_queue ? */</span>
<span class="cm">/* How many Rx Buffers do we bundle into one write to the hardware ? */</span>
<span class="cp">#define E1000_RX_BUFFER_WRITE		16 </span><span class="cm">/* Must be power of 2 */</span><span class="cp"></span>

<span class="cp">#define AUTO_ALL_MODES			0</span>
<span class="cp">#define E1000_EEPROM_APME		0x0400</span>

<span class="cp">#define E1000_MNG_VLAN_NONE		(-1)</span>

<span class="cm">/* Number of packet split data buffers (not including the header buffer) */</span>
<span class="cp">#define PS_PAGE_BUFFERS			(MAX_PS_BUFFERS - 1)</span>

<span class="cp">#define DEFAULT_JUMBO			9234</span>

<span class="cm">/* BM/HV Specific Registers */</span>
<span class="cp">#define BM_PORT_CTRL_PAGE                 769</span>

<span class="cp">#define PHY_UPPER_SHIFT                   21</span>
<span class="cp">#define BM_PHY_REG(page, reg) \</span>
<span class="cp">	(((reg) &amp; MAX_PHY_REG_ADDRESS) |\</span>
<span class="cp">	 (((page) &amp; 0xFFFF) &lt;&lt; PHY_PAGE_SHIFT) |\</span>
<span class="cp">	 (((reg) &amp; ~MAX_PHY_REG_ADDRESS) &lt;&lt; (PHY_UPPER_SHIFT - PHY_PAGE_SHIFT)))</span>

<span class="cm">/* PHY Wakeup Registers and defines */</span>
<span class="cp">#define BM_PORT_GEN_CFG PHY_REG(BM_PORT_CTRL_PAGE, 17)</span>
<span class="cp">#define BM_RCTL         PHY_REG(BM_WUC_PAGE, 0)</span>
<span class="cp">#define BM_WUC          PHY_REG(BM_WUC_PAGE, 1)</span>
<span class="cp">#define BM_WUFC         PHY_REG(BM_WUC_PAGE, 2)</span>
<span class="cp">#define BM_WUS          PHY_REG(BM_WUC_PAGE, 3)</span>
<span class="cp">#define BM_RAR_L(_i)    (BM_PHY_REG(BM_WUC_PAGE, 16 + ((_i) &lt;&lt; 2)))</span>
<span class="cp">#define BM_RAR_M(_i)    (BM_PHY_REG(BM_WUC_PAGE, 17 + ((_i) &lt;&lt; 2)))</span>
<span class="cp">#define BM_RAR_H(_i)    (BM_PHY_REG(BM_WUC_PAGE, 18 + ((_i) &lt;&lt; 2)))</span>
<span class="cp">#define BM_RAR_CTRL(_i) (BM_PHY_REG(BM_WUC_PAGE, 19 + ((_i) &lt;&lt; 2)))</span>
<span class="cp">#define BM_MTA(_i)      (BM_PHY_REG(BM_WUC_PAGE, 128 + ((_i) &lt;&lt; 1)))</span>

<span class="cp">#define BM_RCTL_UPE           0x0001          </span><span class="cm">/* Unicast Promiscuous Mode */</span><span class="cp"></span>
<span class="cp">#define BM_RCTL_MPE           0x0002          </span><span class="cm">/* Multicast Promiscuous Mode */</span><span class="cp"></span>
<span class="cp">#define BM_RCTL_MO_SHIFT      3               </span><span class="cm">/* Multicast Offset Shift */</span><span class="cp"></span>
<span class="cp">#define BM_RCTL_MO_MASK       (3 &lt;&lt; 3)        </span><span class="cm">/* Multicast Offset Mask */</span><span class="cp"></span>
<span class="cp">#define BM_RCTL_BAM           0x0020          </span><span class="cm">/* Broadcast Accept Mode */</span><span class="cp"></span>
<span class="cp">#define BM_RCTL_PMCF          0x0040          </span><span class="cm">/* Pass MAC Control Frames */</span><span class="cp"></span>
<span class="cp">#define BM_RCTL_RFCE          0x0080          </span><span class="cm">/* Rx Flow Control Enable */</span><span class="cp"></span>

<span class="cp">#define HV_STATS_PAGE	778</span>
<span class="cp">#define HV_SCC_UPPER	PHY_REG(HV_STATS_PAGE, 16) </span><span class="cm">/* Single Collision Count */</span><span class="cp"></span>
<span class="cp">#define HV_SCC_LOWER	PHY_REG(HV_STATS_PAGE, 17)</span>
<span class="cp">#define HV_ECOL_UPPER	PHY_REG(HV_STATS_PAGE, 18) </span><span class="cm">/* Excessive Coll. Count */</span><span class="cp"></span>
<span class="cp">#define HV_ECOL_LOWER	PHY_REG(HV_STATS_PAGE, 19)</span>
<span class="cp">#define HV_MCC_UPPER	PHY_REG(HV_STATS_PAGE, 20) </span><span class="cm">/* Multiple Coll. Count */</span><span class="cp"></span>
<span class="cp">#define HV_MCC_LOWER	PHY_REG(HV_STATS_PAGE, 21)</span>
<span class="cp">#define HV_LATECOL_UPPER PHY_REG(HV_STATS_PAGE, 23) </span><span class="cm">/* Late Collision Count */</span><span class="cp"></span>
<span class="cp">#define HV_LATECOL_LOWER PHY_REG(HV_STATS_PAGE, 24)</span>
<span class="cp">#define HV_COLC_UPPER	PHY_REG(HV_STATS_PAGE, 25) </span><span class="cm">/* Collision Count */</span><span class="cp"></span>
<span class="cp">#define HV_COLC_LOWER	PHY_REG(HV_STATS_PAGE, 26)</span>
<span class="cp">#define HV_DC_UPPER	PHY_REG(HV_STATS_PAGE, 27) </span><span class="cm">/* Defer Count */</span><span class="cp"></span>
<span class="cp">#define HV_DC_LOWER	PHY_REG(HV_STATS_PAGE, 28)</span>
<span class="cp">#define HV_TNCRS_UPPER	PHY_REG(HV_STATS_PAGE, 29) </span><span class="cm">/* Transmit with no CRS */</span><span class="cp"></span>
<span class="cp">#define HV_TNCRS_LOWER	PHY_REG(HV_STATS_PAGE, 30)</span>

<span class="cp">#define E1000_FCRTV_PCH     0x05F40 </span><span class="cm">/* PCH Flow Control Refresh Timer Value */</span><span class="cp"></span>

<span class="cm">/* BM PHY Copper Specific Status */</span>
<span class="cp">#define BM_CS_STATUS                      17</span>
<span class="cp">#define BM_CS_STATUS_LINK_UP              0x0400</span>
<span class="cp">#define BM_CS_STATUS_RESOLVED             0x0800</span>
<span class="cp">#define BM_CS_STATUS_SPEED_MASK           0xC000</span>
<span class="cp">#define BM_CS_STATUS_SPEED_1000           0x8000</span>

<span class="cm">/* 82577 Mobile Phy Status Register */</span>
<span class="cp">#define HV_M_STATUS                       26</span>
<span class="cp">#define HV_M_STATUS_AUTONEG_COMPLETE      0x1000</span>
<span class="cp">#define HV_M_STATUS_SPEED_MASK            0x0300</span>
<span class="cp">#define HV_M_STATUS_SPEED_1000            0x0200</span>
<span class="cp">#define HV_M_STATUS_LINK_UP               0x0040</span>

<span class="cp">#define E1000_ICH_FWSM_PCIM2PCI		0x01000000 </span><span class="cm">/* ME PCIm-to-PCI active */</span><span class="cp"></span>
<span class="cp">#define E1000_ICH_FWSM_PCIM2PCI_COUNT	2000</span>

<span class="cm">/* Time to wait before putting the device into D3 if there&#39;s no link (in ms). */</span>
<span class="cp">#define LINK_TIMEOUT		100</span>

<span class="cm">/*</span>
<span class="cm"> * Count for polling __E1000_RESET condition every 10-20msec.</span>
<span class="cm"> * Experimentation has shown the reset can take approximately 210msec.</span>
<span class="cm"> */</span>
<span class="cp">#define E1000_CHECK_RESET_COUNT		25</span>

<span class="cp">#define DEFAULT_RDTR			0</span>
<span class="cp">#define DEFAULT_RADV			8</span>
<span class="cp">#define BURST_RDTR			0x20</span>
<span class="cp">#define BURST_RADV			0x20</span>

<span class="cm">/*</span>
<span class="cm"> * in the case of WTHRESH, it appears at least the 82571/2 hardware</span>
<span class="cm"> * writes back 4 descriptors when WTHRESH=5, and 3 descriptors when</span>
<span class="cm"> * WTHRESH=4, and since we want 64 bytes at a time written back, set</span>
<span class="cm"> * it to 5</span>
<span class="cm"> */</span>
<span class="cp">#define E1000_TXDCTL_DMA_BURST_ENABLE                          \</span>
<span class="cp">	(E1000_TXDCTL_GRAN | </span><span class="cm">/* set descriptor granularity */</span><span class="cp">  \</span>
<span class="cp">	 E1000_TXDCTL_COUNT_DESC |                             \</span>
<span class="cp">	 (5 &lt;&lt; 16) | </span><span class="cm">/* wthresh must be +1 more than desired */</span><span class="cp">\</span>
<span class="cp">	 (1 &lt;&lt; 8)  | </span><span class="cm">/* hthresh */</span><span class="cp">                             \</span>
<span class="cp">	 0x1f)       </span><span class="cm">/* pthresh */</span><span class="cp"></span>

<span class="cp">#define E1000_RXDCTL_DMA_BURST_ENABLE                          \</span>
<span class="cp">	(0x01000000 | </span><span class="cm">/* set descriptor granularity */</span><span class="cp">         \</span>
<span class="cp">	 (4 &lt;&lt; 16)  | </span><span class="cm">/* set writeback threshold    */</span><span class="cp">         \</span>
<span class="cp">	 (4 &lt;&lt; 8)   | </span><span class="cm">/* set prefetch threshold     */</span><span class="cp">         \</span>
<span class="cp">	 0x20)        </span><span class="cm">/* set hthresh                */</span><span class="cp"></span>

<span class="cp">#define E1000_TIDV_FPD (1 &lt;&lt; 31)</span>
<span class="cp">#define E1000_RDTR_FPD (1 &lt;&lt; 31)</span>

<span class="k">enum</span> <span class="n">e1000_boards</span> <span class="p">{</span>
	<span class="n">board_82571</span><span class="p">,</span>
	<span class="n">board_82572</span><span class="p">,</span>
	<span class="n">board_82573</span><span class="p">,</span>
	<span class="n">board_82574</span><span class="p">,</span>
	<span class="n">board_82583</span><span class="p">,</span>
	<span class="n">board_80003es2lan</span><span class="p">,</span>
	<span class="n">board_ich8lan</span><span class="p">,</span>
	<span class="n">board_ich9lan</span><span class="p">,</span>
	<span class="n">board_ich10lan</span><span class="p">,</span>
	<span class="n">board_pchlan</span><span class="p">,</span>
	<span class="n">board_pch2lan</span><span class="p">,</span>
	<span class="n">board_pch_lpt</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">e1000_ps_page</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">page</span> <span class="o">*</span><span class="n">page</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">dma</span><span class="p">;</span> <span class="cm">/* must be u64 - written to hw */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * wrappers around a pointer to a socket buffer,</span>
<span class="cm"> * so a DMA handle can be stored along with the buffer</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">e1000_buffer</span> <span class="p">{</span>
	<span class="n">dma_addr_t</span> <span class="n">dma</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="cm">/* Tx */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">time_stamp</span><span class="p">;</span>
			<span class="n">u16</span> <span class="n">length</span><span class="p">;</span>
			<span class="n">u16</span> <span class="n">next_to_watch</span><span class="p">;</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">segs</span><span class="p">;</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bytecount</span><span class="p">;</span>
			<span class="n">u16</span> <span class="n">mapped_as_page</span><span class="p">;</span>
		<span class="p">};</span>
		<span class="cm">/* Rx */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="cm">/* arrays of page information for packet split */</span>
			<span class="k">struct</span> <span class="n">e1000_ps_page</span> <span class="o">*</span><span class="n">ps_pages</span><span class="p">;</span>
			<span class="k">struct</span> <span class="n">page</span> <span class="o">*</span><span class="n">page</span><span class="p">;</span>
		<span class="p">};</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">e1000_ring</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">e1000_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">;</span>	<span class="cm">/* back pointer to adapter */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">desc</span><span class="p">;</span>			<span class="cm">/* pointer to ring memory  */</span>
	<span class="n">dma_addr_t</span> <span class="n">dma</span><span class="p">;</span>			<span class="cm">/* phys address of ring    */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">;</span>		<span class="cm">/* length of ring in bytes */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">count</span><span class="p">;</span>		<span class="cm">/* number of desc. in ring */</span>

	<span class="n">u16</span> <span class="n">next_to_use</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">next_to_clean</span><span class="p">;</span>

	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">head</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">tail</span><span class="p">;</span>

	<span class="cm">/* array of buffer information structs */</span>
	<span class="k">struct</span> <span class="n">e1000_buffer</span> <span class="o">*</span><span class="n">buffer_info</span><span class="p">;</span>

	<span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="n">IFNAMSIZ</span> <span class="o">+</span> <span class="mi">5</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">ims_val</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">itr_val</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">itr_register</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">set_itr</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">rx_skb_top</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* PHY register snapshot values */</span>
<span class="k">struct</span> <span class="n">e1000_phy_regs</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">bmcr</span><span class="p">;</span>		<span class="cm">/* basic mode control register    */</span>
	<span class="n">u16</span> <span class="n">bmsr</span><span class="p">;</span>		<span class="cm">/* basic mode status register     */</span>
	<span class="n">u16</span> <span class="n">advertise</span><span class="p">;</span>		<span class="cm">/* auto-negotiation advertisement */</span>
	<span class="n">u16</span> <span class="n">lpa</span><span class="p">;</span>		<span class="cm">/* link partner ability register  */</span>
	<span class="n">u16</span> <span class="n">expansion</span><span class="p">;</span>		<span class="cm">/* auto-negotiation expansion reg */</span>
	<span class="n">u16</span> <span class="n">ctrl1000</span><span class="p">;</span>		<span class="cm">/* 1000BASE-T control register    */</span>
	<span class="n">u16</span> <span class="n">stat1000</span><span class="p">;</span>		<span class="cm">/* 1000BASE-T status register     */</span>
	<span class="n">u16</span> <span class="n">estatus</span><span class="p">;</span>		<span class="cm">/* extended status register       */</span>
<span class="p">};</span>

<span class="cm">/* board specific private data structure */</span>
<span class="k">struct</span> <span class="n">e1000_adapter</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">watchdog_timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">phy_info_timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">blink_timer</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">reset_task</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">watchdog_task</span><span class="p">;</span>

	<span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_info</span> <span class="o">*</span><span class="n">ei</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">active_vlans</span><span class="p">[</span><span class="n">BITS_TO_LONGS</span><span class="p">(</span><span class="n">VLAN_N_VID</span><span class="p">)];</span>
	<span class="n">u32</span> <span class="n">bd_number</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rx_buffer_len</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">mng_vlan_id</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">link_speed</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">link_duplex</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">eeprom_vers</span><span class="p">;</span>

	<span class="cm">/* track device up/down/testing state */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">state</span><span class="p">;</span>

	<span class="cm">/* Interrupt Throttle Rate */</span>
	<span class="n">u32</span> <span class="n">itr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">itr_setting</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">tx_itr</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rx_itr</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * Tx</span>
<span class="cm">	 */</span>
	<span class="k">struct</span> <span class="n">e1000_ring</span> <span class="o">*</span><span class="n">tx_ring</span> <span class="cm">/* One per active queue */</span>
						<span class="n">____cacheline_aligned_in_smp</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">napi_struct</span> <span class="n">napi</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">restart_queue</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txd_cmd</span><span class="p">;</span>

	<span class="n">bool</span> <span class="n">detect_tx_hung</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">tx_hang_recheck</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tx_timeout_factor</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">tx_int_delay</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tx_abs_int_delay</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">total_tx_bytes</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">total_tx_packets</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">total_rx_bytes</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">total_rx_packets</span><span class="p">;</span>

	<span class="cm">/* Tx stats */</span>
	<span class="n">u64</span> <span class="n">tpt_old</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">colc_old</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">gotc</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">gotc_old</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tx_timeout_count</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tx_fifo_head</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tx_head_addr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tx_fifo_size</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tx_dma_failed</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * Rx</span>
<span class="cm">	 */</span>
	<span class="n">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">clean_rx</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">e1000_ring</span> <span class="o">*</span><span class="n">ring</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">work_done</span><span class="p">,</span>
			  <span class="kt">int</span> <span class="n">work_to_do</span><span class="p">)</span> <span class="n">____cacheline_aligned_in_smp</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">alloc_rx_buf</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">e1000_ring</span> <span class="o">*</span><span class="n">ring</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cleaned_count</span><span class="p">,</span>
			      <span class="n">gfp_t</span> <span class="n">gfp</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">e1000_ring</span> <span class="o">*</span><span class="n">rx_ring</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">rx_int_delay</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rx_abs_int_delay</span><span class="p">;</span>

	<span class="cm">/* Rx stats */</span>
	<span class="n">u64</span> <span class="n">hw_csum_err</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">hw_csum_good</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_hdr_split</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">gorc</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">gorc_old</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">alloc_rx_buff_failed</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rx_dma_failed</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rx_ps_pages</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rx_ps_bsize0</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_frame_size</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">min_frame_size</span><span class="p">;</span>

	<span class="cm">/* OS defined structs */</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pdev</span><span class="p">;</span>

	<span class="cm">/* structs defined in e1000_hw.h */</span>
	<span class="k">struct</span> <span class="n">e1000_hw</span> <span class="n">hw</span><span class="p">;</span>

	<span class="n">spinlock_t</span> <span class="n">stats64_lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">e1000_hw_stats</span> <span class="n">stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">e1000_phy_info</span> <span class="n">phy_info</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">e1000_phy_stats</span> <span class="n">phy_stats</span><span class="p">;</span>

	<span class="cm">/* Snapshot of PHY registers */</span>
	<span class="k">struct</span> <span class="n">e1000_phy_regs</span> <span class="n">phy_regs</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">e1000_ring</span> <span class="n">test_tx_ring</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">e1000_ring</span> <span class="n">test_rx_ring</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">test_icr</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">msg_enable</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">num_vectors</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">msix_entry</span> <span class="o">*</span><span class="n">msix_entries</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">int_mode</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">eiac_mask</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">eeprom_wol</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">wol</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pba</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_hw_frame_size</span><span class="p">;</span>

	<span class="n">bool</span> <span class="n">fc_autoneg</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags2</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">downshift_task</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">update_phy_task</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">print_hang_task</span><span class="p">;</span>

	<span class="n">bool</span> <span class="n">idle_check</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">phy_hang_count</span><span class="p">;</span>

	<span class="n">u16</span> <span class="n">tx_ring_count</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rx_ring_count</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">e1000_info</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">e1000_mac_type</span>	<span class="n">mac</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">flags</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">flags2</span><span class="p">;</span>
	<span class="n">u32</span>			<span class="n">pba</span><span class="p">;</span>
	<span class="n">u32</span>			<span class="n">max_hw_frame_size</span><span class="p">;</span>
	<span class="n">s32</span>			<span class="p">(</span><span class="o">*</span><span class="n">get_variants</span><span class="p">)(</span><span class="k">struct</span> <span class="n">e1000_adapter</span> <span class="o">*</span><span class="p">);</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_mac_operations</span> <span class="o">*</span><span class="n">mac_ops</span><span class="p">;</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_phy_operations</span> <span class="o">*</span><span class="n">phy_ops</span><span class="p">;</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_nvm_operations</span> <span class="o">*</span><span class="n">nvm_ops</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* hardware capability, feature, and workaround flags */</span>
<span class="cp">#define FLAG_HAS_AMT                      (1 &lt;&lt; 0)</span>
<span class="cp">#define FLAG_HAS_FLASH                    (1 &lt;&lt; 1)</span>
<span class="cp">#define FLAG_HAS_HW_VLAN_FILTER           (1 &lt;&lt; 2)</span>
<span class="cp">#define FLAG_HAS_WOL                      (1 &lt;&lt; 3)</span>
<span class="cm">/* reserved bit4 */</span>
<span class="cp">#define FLAG_HAS_CTRLEXT_ON_LOAD          (1 &lt;&lt; 5)</span>
<span class="cp">#define FLAG_HAS_SWSM_ON_LOAD             (1 &lt;&lt; 6)</span>
<span class="cp">#define FLAG_HAS_JUMBO_FRAMES             (1 &lt;&lt; 7)</span>
<span class="cp">#define FLAG_READ_ONLY_NVM                (1 &lt;&lt; 8)</span>
<span class="cp">#define FLAG_IS_ICH                       (1 &lt;&lt; 9)</span>
<span class="cp">#define FLAG_HAS_MSIX                     (1 &lt;&lt; 10)</span>
<span class="cp">#define FLAG_HAS_SMART_POWER_DOWN         (1 &lt;&lt; 11)</span>
<span class="cp">#define FLAG_IS_QUAD_PORT_A               (1 &lt;&lt; 12)</span>
<span class="cp">#define FLAG_IS_QUAD_PORT                 (1 &lt;&lt; 13)</span>
<span class="cm">/* reserved bit14 */</span>
<span class="cp">#define FLAG_APME_IN_WUC                  (1 &lt;&lt; 15)</span>
<span class="cp">#define FLAG_APME_IN_CTRL3                (1 &lt;&lt; 16)</span>
<span class="cp">#define FLAG_APME_CHECK_PORT_B            (1 &lt;&lt; 17)</span>
<span class="cp">#define FLAG_DISABLE_FC_PAUSE_TIME        (1 &lt;&lt; 18)</span>
<span class="cp">#define FLAG_NO_WAKE_UCAST                (1 &lt;&lt; 19)</span>
<span class="cp">#define FLAG_MNG_PT_ENABLED               (1 &lt;&lt; 20)</span>
<span class="cp">#define FLAG_RESET_OVERWRITES_LAA         (1 &lt;&lt; 21)</span>
<span class="cp">#define FLAG_TARC_SPEED_MODE_BIT          (1 &lt;&lt; 22)</span>
<span class="cp">#define FLAG_TARC_SET_BIT_ZERO            (1 &lt;&lt; 23)</span>
<span class="cp">#define FLAG_RX_NEEDS_RESTART             (1 &lt;&lt; 24)</span>
<span class="cp">#define FLAG_LSC_GIG_SPEED_DROP           (1 &lt;&lt; 25)</span>
<span class="cp">#define FLAG_SMART_POWER_DOWN             (1 &lt;&lt; 26)</span>
<span class="cp">#define FLAG_MSI_ENABLED                  (1 &lt;&lt; 27)</span>
<span class="cm">/* reserved (1 &lt;&lt; 28) */</span>
<span class="cp">#define FLAG_TSO_FORCE                    (1 &lt;&lt; 29)</span>
<span class="cp">#define FLAG_RX_RESTART_NOW               (1 &lt;&lt; 30)</span>
<span class="cp">#define FLAG_MSI_TEST_FAILED              (1 &lt;&lt; 31)</span>

<span class="cp">#define FLAG2_CRC_STRIPPING               (1 &lt;&lt; 0)</span>
<span class="cp">#define FLAG2_HAS_PHY_WAKEUP              (1 &lt;&lt; 1)</span>
<span class="cp">#define FLAG2_IS_DISCARDING               (1 &lt;&lt; 2)</span>
<span class="cp">#define FLAG2_DISABLE_ASPM_L1             (1 &lt;&lt; 3)</span>
<span class="cp">#define FLAG2_HAS_PHY_STATS               (1 &lt;&lt; 4)</span>
<span class="cp">#define FLAG2_HAS_EEE                     (1 &lt;&lt; 5)</span>
<span class="cp">#define FLAG2_DMA_BURST                   (1 &lt;&lt; 6)</span>
<span class="cp">#define FLAG2_DISABLE_ASPM_L0S            (1 &lt;&lt; 7)</span>
<span class="cp">#define FLAG2_DISABLE_AIM                 (1 &lt;&lt; 8)</span>
<span class="cp">#define FLAG2_CHECK_PHY_HANG              (1 &lt;&lt; 9)</span>
<span class="cp">#define FLAG2_NO_DISABLE_RX               (1 &lt;&lt; 10)</span>
<span class="cp">#define FLAG2_PCIM2PCI_ARBITER_WA         (1 &lt;&lt; 11)</span>
<span class="cp">#define FLAG2_DFLT_CRC_STRIPPING          (1 &lt;&lt; 12)</span>

<span class="cp">#define E1000_RX_DESC_PS(R, i)	    \</span>
<span class="cp">	(&amp;(((union e1000_rx_desc_packet_split *)((R).desc))[i]))</span>
<span class="cp">#define E1000_RX_DESC_EXT(R, i)	    \</span>
<span class="cp">	(&amp;(((union e1000_rx_desc_extended *)((R).desc))[i]))</span>
<span class="cp">#define E1000_GET_DESC(R, i, type)	(&amp;(((struct type *)((R).desc))[i]))</span>
<span class="cp">#define E1000_TX_DESC(R, i)		E1000_GET_DESC(R, i, e1000_tx_desc)</span>
<span class="cp">#define E1000_CONTEXT_DESC(R, i)	E1000_GET_DESC(R, i, e1000_context_desc)</span>

<span class="k">enum</span> <span class="n">e1000_state_t</span> <span class="p">{</span>
	<span class="n">__E1000_TESTING</span><span class="p">,</span>
	<span class="n">__E1000_RESETTING</span><span class="p">,</span>
	<span class="n">__E1000_ACCESS_SHARED_RESOURCE</span><span class="p">,</span>
	<span class="n">__E1000_DOWN</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">latency_range</span> <span class="p">{</span>
	<span class="n">lowest_latency</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">low_latency</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">bulk_latency</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">latency_invalid</span> <span class="o">=</span> <span class="mi">255</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">char</span> <span class="n">e1000e_driver_name</span><span class="p">[];</span>
<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">e1000e_driver_version</span><span class="p">[];</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_check_options</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_set_ethtool_ops</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">e1000e_up</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_down</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_reinit_locked</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_power_up_phy</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">e1000e_setup_rx_resources</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_ring</span> <span class="o">*</span><span class="n">ring</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">e1000e_setup_tx_resources</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_ring</span> <span class="o">*</span><span class="n">ring</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_free_rx_resources</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_ring</span> <span class="o">*</span><span class="n">ring</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_free_tx_resources</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_ring</span> <span class="o">*</span><span class="n">ring</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">rtnl_link_stats64</span> <span class="o">*</span><span class="n">e1000e_get_stats64</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">,</span>
                                                    <span class="k">struct</span> <span class="n">rtnl_link_stats64</span>
                                                    <span class="o">*</span><span class="n">stats</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_set_interrupt_capability</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_reset_interrupt_capability</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_get_hw_control</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_release_hw_control</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">copybreak</span><span class="p">;</span>

<span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span><span class="n">e1000e_get_hw_dev_name</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>

<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_info</span> <span class="n">e1000_82571_info</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_info</span> <span class="n">e1000_82572_info</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_info</span> <span class="n">e1000_82573_info</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_info</span> <span class="n">e1000_82574_info</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_info</span> <span class="n">e1000_82583_info</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_info</span> <span class="n">e1000_ich8_info</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_info</span> <span class="n">e1000_ich9_info</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_info</span> <span class="n">e1000_ich10_info</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_info</span> <span class="n">e1000_pch_info</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_info</span> <span class="n">e1000_pch2_info</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_info</span> <span class="n">e1000_pch_lpt_info</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">e1000_info</span> <span class="n">e1000_es2_info</span><span class="p">;</span>

<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_read_pba_string_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">pba_num</span><span class="p">,</span>
					 <span class="n">u32</span> <span class="n">pba_num_size</span><span class="p">);</span>

<span class="k">extern</span> <span class="n">s32</span>  <span class="n">e1000e_commit_phy</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>

<span class="k">extern</span> <span class="n">bool</span> <span class="n">e1000e_enable_mng_pass_thru</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>

<span class="k">extern</span> <span class="n">bool</span> <span class="n">e1000e_get_laa_state_82571</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_set_laa_state_82571</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">bool</span> <span class="n">state</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_write_protect_nvm_ich8lan</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_set_kmrn_lock_loss_workaround_ich8lan</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span>
						 <span class="n">bool</span> <span class="n">state</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_igp3_phy_powerdown_workaround_ich8lan</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_gig_downshift_workaround_ich8lan</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000_suspend_workarounds_ich8lan</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000_resume_workarounds_pchlan</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_configure_k1_ich8lan</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">bool</span> <span class="n">k1_enable</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_lv_jumbo_workaround_ich8lan</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">bool</span> <span class="n">enable</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000_copy_rx_addrs_to_phy_ich8lan</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>

<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_check_for_copper_link</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_check_for_fiber_link</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_check_for_serdes_link</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_setup_led_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_cleanup_led_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_led_on_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_led_off_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_get_bus_info_pcie</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000_set_lan_id_multi_port_pcie</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000_set_lan_id_single_port</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_get_speed_and_duplex_copper</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">speed</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">duplex</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_get_speed_and_duplex_fiber_serdes</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">speed</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">duplex</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_disable_pcie_master</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_get_auto_rd_done</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_id_led_init_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_clear_hw_cntrs_base</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_setup_fiber_serdes_link</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_copper_link_setup_m88</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_copper_link_setup_igp</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_setup_link_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000_clear_vfta_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_init_rx_addrs</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">rar_count</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_update_mc_addr_list_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span>
					       <span class="n">u8</span> <span class="o">*</span><span class="n">mc_addr_list</span><span class="p">,</span>
					       <span class="n">u32</span> <span class="n">mc_addr_count</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_rar_set_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">addr</span><span class="p">,</span> <span class="n">u32</span> <span class="n">index</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_set_fc_watermarks</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_set_pcie_no_snoop</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">no_snoop</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_get_hw_semaphore</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_valid_led_default</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_config_collision_dist_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_config_fc_after_link_up</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_force_mac_fc</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_blink_led_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000_write_vfta_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u32</span> <span class="n">value</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_check_alt_mac_addr_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_reset_adaptive</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_update_adaptive</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>

<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_setup_copper_link</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_get_phy_id</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_put_hw_semaphore</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_check_reset_block_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_phy_force_speed_duplex_igp</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_get_cable_length_igp_2</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_get_phy_info_igp</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_set_page_igp</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">page</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_read_phy_reg_igp</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_read_phy_reg_igp_locked</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span>
                                          <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_phy_hw_reset_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_set_d3_lplu_state</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">bool</span> <span class="n">active</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_write_phy_reg_igp</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_write_phy_reg_igp_locked</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span>
                                           <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_phy_sw_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_phy_force_speed_duplex_m88</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_get_cfg_done</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_get_cable_length_m88</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_get_phy_info_m88</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_read_phy_reg_m88</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_write_phy_reg_m88</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_phy_init_script_igp3</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">enum</span> <span class="n">e1000_phy_type</span> <span class="n">e1000e_get_phy_type_from_id</span><span class="p">(</span><span class="n">u32</span> <span class="n">phy_id</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_determine_phy_address</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_write_phy_reg_bm</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_read_phy_reg_bm</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_enable_phy_wakeup_reg_access_bm</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span>
						 <span class="n">u16</span> <span class="o">*</span><span class="n">phy_reg</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_disable_phy_wakeup_reg_access_bm</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span>
						  <span class="n">u16</span> <span class="o">*</span><span class="n">phy_reg</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_read_phy_reg_bm2</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_write_phy_reg_bm2</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_phy_force_speed_duplex_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">phy_ctrl</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_write_kmrn_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_write_kmrn_reg_locked</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span>
                                        <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_read_kmrn_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_read_kmrn_reg_locked</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span>
                                       <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_phy_has_link_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">iterations</span><span class="p">,</span>
			       <span class="n">u32</span> <span class="n">usec_interval</span><span class="p">,</span> <span class="n">bool</span> <span class="o">*</span><span class="n">success</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_phy_reset_dsp</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000_power_up_phy_copper</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000_power_down_phy_copper</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_read_phy_reg_mdic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_write_phy_reg_mdic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_check_downshift</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_read_phy_reg_hv</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_read_phy_reg_hv_locked</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span>
                                        <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_read_phy_reg_page_hv</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span>
				      <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_write_phy_reg_hv</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_write_phy_reg_hv_locked</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span>
                                         <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_write_phy_reg_page_hv</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span>
				       <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_link_stall_workaround_hv</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_copper_link_setup_82577</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_check_polarity_82577</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_get_phy_info_82577</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_phy_force_speed_duplex_82577</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_get_cable_length_82577</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>

<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_check_polarity_m88</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_get_phy_info_ife</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_check_polarity_ife</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_phy_force_speed_duplex_ife</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_check_polarity_igp</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">e1000_check_phy_82574</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">s32</span> <span class="nf">e1000_phy_hw_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">hw</span><span class="o">-&gt;</span><span class="n">phy</span><span class="p">.</span><span class="n">ops</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="n">hw</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">s32</span> <span class="nf">e1e_rphy</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">hw</span><span class="o">-&gt;</span><span class="n">phy</span><span class="p">.</span><span class="n">ops</span><span class="p">.</span><span class="n">read_reg</span><span class="p">(</span><span class="n">hw</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">s32</span> <span class="nf">e1e_rphy_locked</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">hw</span><span class="o">-&gt;</span><span class="n">phy</span><span class="p">.</span><span class="n">ops</span><span class="p">.</span><span class="n">read_reg_locked</span><span class="p">(</span><span class="n">hw</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">s32</span> <span class="nf">e1e_wphy</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">hw</span><span class="o">-&gt;</span><span class="n">phy</span><span class="p">.</span><span class="n">ops</span><span class="p">.</span><span class="n">write_reg</span><span class="p">(</span><span class="n">hw</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">s32</span> <span class="nf">e1e_wphy_locked</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">hw</span><span class="o">-&gt;</span><span class="n">phy</span><span class="p">.</span><span class="n">ops</span><span class="p">.</span><span class="n">write_reg_locked</span><span class="p">(</span><span class="n">hw</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">s32</span> <span class="nf">e1000_get_cable_length</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">hw</span><span class="o">-&gt;</span><span class="n">phy</span><span class="p">.</span><span class="n">ops</span><span class="p">.</span><span class="n">get_cable_length</span><span class="p">(</span><span class="n">hw</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_acquire_nvm</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_write_nvm_spi</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">words</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_update_nvm_checksum_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_poll_eerd_eewr_done</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ee_reg</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_read_nvm_eerd</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">words</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_validate_nvm_checksum_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_release_nvm</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">e1000e_reload_nvm_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000_read_mac_addr_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">s32</span> <span class="nf">e1000e_read_mac_addr</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">hw</span><span class="o">-&gt;</span><span class="n">mac</span><span class="p">.</span><span class="n">ops</span><span class="p">.</span><span class="n">read_mac_addr</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">hw</span><span class="o">-&gt;</span><span class="n">mac</span><span class="p">.</span><span class="n">ops</span><span class="p">.</span><span class="n">read_mac_addr</span><span class="p">(</span><span class="n">hw</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">e1000_read_mac_addr_generic</span><span class="p">(</span><span class="n">hw</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">s32</span> <span class="nf">e1000_validate_nvm_checksum</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">hw</span><span class="o">-&gt;</span><span class="n">nvm</span><span class="p">.</span><span class="n">ops</span><span class="p">.</span><span class="n">validate</span><span class="p">(</span><span class="n">hw</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">s32</span> <span class="nf">e1000e_update_nvm_checksum</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">hw</span><span class="o">-&gt;</span><span class="n">nvm</span><span class="p">.</span><span class="n">ops</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">hw</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">s32</span> <span class="nf">e1000_read_nvm</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">words</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">hw</span><span class="o">-&gt;</span><span class="n">nvm</span><span class="p">.</span><span class="n">ops</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">hw</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">words</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">s32</span> <span class="nf">e1000_write_nvm</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u16</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">words</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">hw</span><span class="o">-&gt;</span><span class="n">nvm</span><span class="p">.</span><span class="n">ops</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">hw</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">words</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">s32</span> <span class="nf">e1000_get_phy_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">hw</span><span class="o">-&gt;</span><span class="n">phy</span><span class="p">.</span><span class="n">ops</span><span class="p">.</span><span class="n">get_info</span><span class="p">(</span><span class="n">hw</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">extern</span> <span class="n">bool</span> <span class="n">e1000e_check_mng_mode_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">e1000e_enable_tx_pkt_filtering</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">e1000e_mng_write_dhcp_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span> <span class="n">u16</span> <span class="n">length</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">__er32</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">readl</span><span class="p">(</span><span class="n">hw</span><span class="o">-&gt;</span><span class="n">hw_addr</span> <span class="o">+</span> <span class="n">reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#define er32(reg)	__er32(hw, E1000_##reg)</span>

<span class="cm">/**</span>
<span class="cm"> * __ew32_prepare - prepare to write to MAC CSR register on certain parts</span>
<span class="cm"> * @hw: pointer to the HW structure</span>
<span class="cm"> *</span>
<span class="cm"> * When updating the MAC CSR registers, the Manageability Engine (ME) could</span>
<span class="cm"> * be accessing the registers at the same time.  Normally, this is handled in</span>
<span class="cm"> * h/w by an arbiter but on some parts there is a bug that acknowledges Host</span>
<span class="cm"> * accesses later than it should which could result in the register to have</span>
<span class="cm"> * an incorrect value.  Workaround this by checking the FWSM register which</span>
<span class="cm"> * has bit 24 set while ME is accessing MAC CSR registers, wait if it is set</span>
<span class="cm"> * and try again a number of times.</span>
<span class="cm"> **/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">s32</span> <span class="nf">__ew32_prepare</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">s32</span> <span class="n">i</span> <span class="o">=</span> <span class="n">E1000_ICH_FWSM_PCIM2PCI_COUNT</span><span class="p">;</span>

	<span class="k">while</span> <span class="p">((</span><span class="n">er32</span><span class="p">(</span><span class="n">FWSM</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">E1000_ICH_FWSM_PCIM2PCI</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span>
		<span class="n">udelay</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">i</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">__ew32</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u32</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">hw</span><span class="o">-&gt;</span><span class="n">adapter</span><span class="o">-&gt;</span><span class="n">flags2</span> <span class="o">&amp;</span> <span class="n">FLAG2_PCIM2PCI_ARBITER_WA</span><span class="p">)</span>
		<span class="n">__ew32_prepare</span><span class="p">(</span><span class="n">hw</span><span class="p">);</span>

	<span class="n">writel</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">hw</span><span class="o">-&gt;</span><span class="n">hw_addr</span> <span class="o">+</span> <span class="n">reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#define ew32(reg, val)	__ew32(hw, E1000_##reg, (val))</span>

<span class="cp">#define e1e_flush()	er32(STATUS)</span>

<span class="cp">#define E1000_WRITE_REG_ARRAY(a, reg, offset, value) \</span>
<span class="cp">	(__ew32((a), (reg + ((offset) &lt;&lt; 2)), (value)))</span>

<span class="cp">#define E1000_READ_REG_ARRAY(a, reg, offset) \</span>
<span class="cp">	(readl((a)-&gt;hw_addr + reg + ((offset) &lt;&lt; 2)))</span>

<span class="cp">#endif </span><span class="cm">/* _E1000_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
