f | e1000.h | s | 27K | 667 | Bruce Allan | bruce.w.allan@intel.com | 1336126506 |  | e1000e: initial support for i217  i217 is the next-generation LOM that will be available on systems with the Lynx Point Platform Controller Hub (PCH) chipset from Intel.  This patch provides the initial support for the device.  Signed-off-by: Bruce Allan <bruce.w.allan@intel.com> Tested-by: Jeff Pieper <jeffrey.e.pieper@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | 82571.c | s | 55K | 1890 | Richard Alpe | richard.alpe@ericsson.com | 1336219522 |  | e1000e: clear REQ and GNT in EECD (82571 && 82572)  Clear the REQ and GNT bit in the eeprom control register (EECD). This is required if the eeprom is to be accessed with auto read EERD register.  After a cold reset this doesn't matter but if PBIST MAC test was executed before booting, the register was left in a dirty state (the 2 bits where set), which caused the read operation to time out and returning 0.  Reference (page 312): http://download.intel.com/design/network/manuals/316080.pdf  Reported-by: Aleksandar Igic <aleksandar.igic@dektech.com.au> Signed-off-by: Richard Alpe <richard.alpe@ericsson.com> Tested-by: Jeff Pieper <jeffrey.e.pieper@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | Makefile | g | 1.4K |  | Bruce Allan | bruce.w.allan@intel.com | 1327633277 |  | e1000e: update copyright year  Signed-off-by: Bruce Allan <bruce.w.allan@intel.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | param.c | s | 13K | 474 | Jeff Kirsher | jeffrey.t.kirsher@intel.com | 1336579599 |  | e1000e: Fix merge conflict (net->net-next)  During merge of net to net-next the changes in patch:  e1000e: Fix default interrupt throttle rate not set in NIC HW  got munged in param.c of the e1000e driver.  This rectifies the merge issues.  Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | ethtool.c | s | 55K | 1776 | Bruce Allan | bruce.w.allan@intel.com | 1338954470 |  | e1000e: test for valid check_reset_block function pointer  commit 44abd5c12767a8c567dc4e45fd9aec3b13ca85e0 introduced NULL pointer dereferences when attempting to access the check_reset_block function pointer on 8257x and 80003es2lan non-copper devices.  This fix should be applied back through 3.4.  Signed-off-by: Bruce Allan <bruce.w.allan@intel.com> Tested-by: Jeff Pieper <jeffrey.e.pieper@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | defines.h | s | 38K | 737 | Bruce Allan | bruce.w.allan@intel.com | 1341127532 |  | e1000e: remove use of IP payload checksum  Currently only used when packet split mode is enabled with jumbo frames, IP payload checksum (for fragmented UDP packets) is mutually exclusive with receive hashing offload since the hardware uses the same space in the receive descriptor for the hardware-provided packet checksum and the RSS hash, respectively.  Users currently must disable jumbos when receive hashing offload is enabled, or vice versa, because of this incompatibility. Since testing has shown that IP payload checksum does not provide any real benefit, just remove it so that there is no longer a choice between jumbos or receive hashing offload but not both as done in other Intel GbE drivers (e.g. e1000, igb).  Also, add a missing check for IP checksum error reported by the hardware; let the stack verify the checksum when this happens.  CC: stable <stable@vger.kernel.org> [3.4] Signed-off-by: Bruce Allan <bruce.w.allan@intel.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | hw.h | s | 32K | 901 | Bruce Allan | bruce.w.allan@intel.com | 1336126506 |  | e1000e: initial support for i217  i217 is the next-generation LOM that will be available on systems with the Lynx Point Platform Controller Hub (PCH) chipset from Intel.  This patch provides the initial support for the device.  Signed-off-by: Bruce Allan <bruce.w.allan@intel.com> Tested-by: Jeff Pieper <jeffrey.e.pieper@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | nvm.c | s | 15K | 542 | Bruce Allan | bruce.w.allan@intel.com | 1330148601 |  | e1000e: rename e1000e_reload_nvm() and call as function pointer  Rename e1000e_reload_nvm() to e1000e_reload_nvm_generic() to signify the function is used for more than one MAC-family type, and set and use it as a MAC ops function pointer to be consistent with the driver design.  Signed-off-by: Bruce Allan <bruce.w.allan@intel.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | 80003es2lan.c | s | 40K | 1260 | Matthew Vick | matthew.vick@intel.com | 1336037344 |  | e1000e: Driver workaround for IPv6 Header Extension Erratum.  Previously, IPv6 extension header parsing was disabled for all devices supported by e1000e when using packet split mode. However, as per a silicon errata, only certain devices need this restriction and will need to disable IPv6 extension header parsing for all modes.  Signed-off-by: Matthew Vick <matthew.vick@intel.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | mac.c | s | 46K | 1516 | Bruce Allan | bruce.w.allan@intel.com | 1338954470 |  | e1000e: test for valid check_reset_block function pointer  commit 44abd5c12767a8c567dc4e45fd9aec3b13ca85e0 introduced NULL pointer dereferences when attempting to access the check_reset_block function pointer on 8257x and 80003es2lan non-copper devices.  This fix should be applied back through 3.4.  Signed-off-by: Bruce Allan <bruce.w.allan@intel.com> Tested-by: Jeff Pieper <jeffrey.e.pieper@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | ich8lan.c | s | 125K | 4000 | Bruce Allan | bruce.w.allan@intel.com | 1338621153 |  | e1000e: fix Rapid Start Technology support for i217  The definition of I217_PROXY_CTRL must use the BM_PHY_REG() macro instead of the PHY_REG() macro for PHY page 800 register 70 since it is for a PHY register greater than the maximum allowed by the latter macro, and fix a typo setting the I217_MEMPWR register in e1000_suspend_workarounds_ich8lan.  Also for clarity, rename a few defines as bit definitions instead of masks.  Signed-off-by: Bruce Allan <bruce.w.allan@intel.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | manage.c | s | 9.8K | 307 | Bruce Allan | bruce.w.allan@intel.com | 1334394300 |  | e1000e: cleanup boolean logic  Replace occurrences of 'if (<bool expr> == <1||0>)' with 'if ([!]<bool expr>)'  Replace occurrences of '<bool var> = (<non-bool expr>) ? true : false' with '<bool var> = <non-bool expr>'.  Replace occurrence of '<bool var> = <non-bool expr>' with '<bool var> = !!<non-bool expr>'  While the latter replacement is not really necessary, it is done here for consistency and clarity.  No functional changes.  Signed-off-by: Bruce Allan <bruce.w.allan@intel.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | netdev.c | s | 181K | 5604 | Bruce Allan | bruce.w.allan@intel.com | 1341127532 |  | e1000e: remove use of IP payload checksum  Currently only used when packet split mode is enabled with jumbo frames, IP payload checksum (for fragmented UDP packets) is mutually exclusive with receive hashing offload since the hardware uses the same space in the receive descriptor for the hardware-provided packet checksum and the RSS hash, respectively.  Users currently must disable jumbos when receive hashing offload is enabled, or vice versa, because of this incompatibility. Since testing has shown that IP payload checksum does not provide any real benefit, just remove it so that there is no longer a choice between jumbos or receive hashing offload but not both as done in other Intel GbE drivers (e.g. e1000, igb).  Also, add a missing check for IP checksum error reported by the hardware; let the stack verify the checksum when this happens.  CC: stable <stable@vger.kernel.org> [3.4] Signed-off-by: Bruce Allan <bruce.w.allan@intel.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | phy.c | s | 90K | 2873 | Bruce Allan | bruce.w.allan@intel.com | 1338954470 |  | e1000e: test for valid check_reset_block function pointer  commit 44abd5c12767a8c567dc4e45fd9aec3b13ca85e0 introduced NULL pointer dereferences when attempting to access the check_reset_block function pointer on 8257x and 80003es2lan non-copper devices.  This fix should be applied back through 3.4.  Signed-off-by: Bruce Allan <bruce.w.allan@intel.com> Tested-by: Jeff Pieper <jeffrey.e.pieper@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
