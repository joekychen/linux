<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › ethernet › intel › igb › e1000_phy.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>e1000_phy.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*******************************************************************************</span>

<span class="cm">  Intel(R) Gigabit Ethernet Linux driver</span>
<span class="cm">  Copyright(c) 2007-2012 Intel Corporation.</span>

<span class="cm">  This program is free software; you can redistribute it and/or modify it</span>
<span class="cm">  under the terms and conditions of the GNU General Public License,</span>
<span class="cm">  version 2, as published by the Free Software Foundation.</span>

<span class="cm">  This program is distributed in the hope it will be useful, but WITHOUT</span>
<span class="cm">  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<span class="cm">  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for</span>
<span class="cm">  more details.</span>

<span class="cm">  You should have received a copy of the GNU General Public License along with</span>
<span class="cm">  this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="cm">  51 Franklin St - Fifth Floor, Boston, MA 02110-1301 USA.</span>

<span class="cm">  The full GNU General Public License is included in this distribution in</span>
<span class="cm">  the file called &quot;COPYING&quot;.</span>

<span class="cm">  Contact Information:</span>
<span class="cm">  e1000-devel Mailing List &lt;e1000-devel@lists.sourceforge.net&gt;</span>
<span class="cm">  Intel Corporation, 5200 N.E. Elam Young Parkway, Hillsboro, OR 97124-6497</span>

<span class="cm">*******************************************************************************/</span>

<span class="cp">#ifndef _E1000_PHY_H_</span>
<span class="cp">#define _E1000_PHY_H_</span>

<span class="k">enum</span> <span class="n">e1000_ms_type</span> <span class="p">{</span>
	<span class="n">e1000_ms_hw_default</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">e1000_ms_force_master</span><span class="p">,</span>
	<span class="n">e1000_ms_force_slave</span><span class="p">,</span>
	<span class="n">e1000_ms_auto</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">e1000_smart_speed</span> <span class="p">{</span>
	<span class="n">e1000_smart_speed_default</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">e1000_smart_speed_on</span><span class="p">,</span>
	<span class="n">e1000_smart_speed_off</span>
<span class="p">};</span>

<span class="n">s32</span>  <span class="n">igb_check_downshift</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_check_reset_block</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_copper_link_setup_igp</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_copper_link_setup_m88</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_copper_link_setup_m88_gen2</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_phy_force_speed_duplex_igp</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_phy_force_speed_duplex_m88</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_get_cable_length_m88</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_get_cable_length_m88_gen2</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_get_cable_length_igp_2</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_get_phy_id</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_get_phy_info_igp</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_get_phy_info_m88</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_phy_sw_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_phy_hw_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_read_phy_reg_igp</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_set_d3_lplu_state</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">bool</span> <span class="n">active</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_setup_copper_link</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_write_phy_reg_igp</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_phy_has_link</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">iterations</span><span class="p">,</span>
				<span class="n">u32</span> <span class="n">usec_interval</span><span class="p">,</span> <span class="n">bool</span> <span class="o">*</span><span class="n">success</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">igb_power_up_phy_copper</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">igb_power_down_phy_copper</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_phy_init_script_igp3</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_read_phy_reg_mdic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_write_phy_reg_mdic</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_read_phy_reg_i2c</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_write_phy_reg_i2c</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_copper_link_setup_82580</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_get_phy_info_82580</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_phy_force_speed_duplex_82580</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_get_cable_length_82580</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_read_phy_reg_gs40g</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_write_phy_reg_gs40g</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">data</span><span class="p">);</span>
<span class="n">s32</span>  <span class="n">igb_check_polarity_m88</span><span class="p">(</span><span class="k">struct</span> <span class="n">e1000_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>

<span class="cm">/* IGP01E1000 Specific Registers */</span>
<span class="cp">#define IGP01E1000_PHY_PORT_CONFIG        0x10 </span><span class="cm">/* Port Config */</span><span class="cp"></span>
<span class="cp">#define IGP01E1000_PHY_PORT_STATUS        0x11 </span><span class="cm">/* Status */</span><span class="cp"></span>
<span class="cp">#define IGP01E1000_PHY_PORT_CTRL          0x12 </span><span class="cm">/* Control */</span><span class="cp"></span>
<span class="cp">#define IGP01E1000_PHY_LINK_HEALTH        0x13 </span><span class="cm">/* PHY Link Health */</span><span class="cp"></span>
<span class="cp">#define IGP02E1000_PHY_POWER_MGMT         0x19 </span><span class="cm">/* Power Management */</span><span class="cp"></span>
<span class="cp">#define IGP01E1000_PHY_PAGE_SELECT        0x1F </span><span class="cm">/* Page Select */</span><span class="cp"></span>
<span class="cp">#define IGP01E1000_PHY_PCS_INIT_REG       0x00B4</span>
<span class="cp">#define IGP01E1000_PHY_POLARITY_MASK      0x0078</span>
<span class="cp">#define IGP01E1000_PSCR_AUTO_MDIX         0x1000</span>
<span class="cp">#define IGP01E1000_PSCR_FORCE_MDI_MDIX    0x2000 </span><span class="cm">/* 0=MDI, 1=MDIX */</span><span class="cp"></span>
<span class="cp">#define IGP01E1000_PSCFR_SMART_SPEED      0x0080</span>

<span class="cp">#define I82580_ADDR_REG                   16</span>
<span class="cp">#define I82580_CFG_REG                    22</span>
<span class="cp">#define I82580_CFG_ASSERT_CRS_ON_TX       (1 &lt;&lt; 15)</span>
<span class="cp">#define I82580_CFG_ENABLE_DOWNSHIFT       (3 &lt;&lt; 10) </span><span class="cm">/* auto downshift 100/10 */</span><span class="cp"></span>
<span class="cp">#define I82580_CTRL_REG                   23</span>
<span class="cp">#define I82580_CTRL_DOWNSHIFT_MASK        (7 &lt;&lt; 10)</span>

<span class="cm">/* 82580 specific PHY registers */</span>
<span class="cp">#define I82580_PHY_CTRL_2            18</span>
<span class="cp">#define I82580_PHY_LBK_CTRL          19</span>
<span class="cp">#define I82580_PHY_STATUS_2          26</span>
<span class="cp">#define I82580_PHY_DIAG_STATUS       31</span>

<span class="cm">/* I82580 PHY Status 2 */</span>
<span class="cp">#define I82580_PHY_STATUS2_REV_POLARITY   0x0400</span>
<span class="cp">#define I82580_PHY_STATUS2_MDIX           0x0800</span>
<span class="cp">#define I82580_PHY_STATUS2_SPEED_MASK     0x0300</span>
<span class="cp">#define I82580_PHY_STATUS2_SPEED_1000MBPS 0x0200</span>
<span class="cp">#define I82580_PHY_STATUS2_SPEED_100MBPS  0x0100</span>

<span class="cm">/* I82580 PHY Control 2 */</span>
<span class="cp">#define I82580_PHY_CTRL2_AUTO_MDIX        0x0400</span>
<span class="cp">#define I82580_PHY_CTRL2_FORCE_MDI_MDIX   0x0200</span>

<span class="cm">/* I82580 PHY Diagnostics Status */</span>
<span class="cp">#define I82580_DSTATUS_CABLE_LENGTH       0x03FC</span>
<span class="cp">#define I82580_DSTATUS_CABLE_LENGTH_SHIFT 2</span>

<span class="cm">/* 82580 PHY Power Management */</span>
<span class="cp">#define E1000_82580_PHY_POWER_MGMT	0xE14</span>
<span class="cp">#define E1000_82580_PM_SPD		0x0001 </span><span class="cm">/* Smart Power Down */</span><span class="cp"></span>
<span class="cp">#define E1000_82580_PM_D0_LPLU		0x0002 </span><span class="cm">/* For D0a states */</span><span class="cp"></span>
<span class="cp">#define E1000_82580_PM_D3_LPLU		0x0004 </span><span class="cm">/* For all other states */</span><span class="cp"></span>

<span class="cm">/* Enable flexible speed on link-up */</span>
<span class="cp">#define IGP02E1000_PM_D0_LPLU             0x0002 </span><span class="cm">/* For D0a states */</span><span class="cp"></span>
<span class="cp">#define IGP02E1000_PM_D3_LPLU             0x0004 </span><span class="cm">/* For all other states */</span><span class="cp"></span>
<span class="cp">#define IGP01E1000_PLHR_SS_DOWNGRADE      0x8000</span>
<span class="cp">#define IGP01E1000_PSSR_POLARITY_REVERSED 0x0002</span>
<span class="cp">#define IGP01E1000_PSSR_MDIX              0x0800</span>
<span class="cp">#define IGP01E1000_PSSR_SPEED_MASK        0xC000</span>
<span class="cp">#define IGP01E1000_PSSR_SPEED_1000MBPS    0xC000</span>
<span class="cp">#define IGP02E1000_PHY_CHANNEL_NUM        4</span>
<span class="cp">#define IGP02E1000_PHY_AGC_A              0x11B1</span>
<span class="cp">#define IGP02E1000_PHY_AGC_B              0x12B1</span>
<span class="cp">#define IGP02E1000_PHY_AGC_C              0x14B1</span>
<span class="cp">#define IGP02E1000_PHY_AGC_D              0x18B1</span>
<span class="cp">#define IGP02E1000_AGC_LENGTH_SHIFT       9   </span><span class="cm">/* Course - 15:13, Fine - 12:9 */</span><span class="cp"></span>
<span class="cp">#define IGP02E1000_AGC_LENGTH_MASK        0x7F</span>
<span class="cp">#define IGP02E1000_AGC_RANGE              15</span>

<span class="cp">#define E1000_CABLE_LENGTH_UNDEFINED      0xFF</span>

<span class="cm">/* GS40G - I210 PHY defines */</span>
<span class="cp">#define GS40G_PAGE_SELECT		0x16</span>
<span class="cp">#define GS40G_PAGE_SHIFT		16</span>
<span class="cp">#define GS40G_OFFSET_MASK		0xFFFF</span>
<span class="cp">#define GS40G_PAGE_2			0x20000</span>
<span class="cp">#define GS40G_MAC_REG2			0x15</span>
<span class="cp">#define GS40G_MAC_LB			0x4140</span>
<span class="cp">#define GS40G_MAC_SPEED_1G		0X0006</span>
<span class="cp">#define GS40G_COPPER_SPEC		0x0010</span>
<span class="cp">#define GS40G_CS_POWER_DOWN		0x0002</span>
<span class="cp">#define GS40G_LINE_LB			0x4000</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
