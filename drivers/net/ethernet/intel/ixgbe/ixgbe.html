<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › ethernet › intel › ixgbe › ixgbe.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>ixgbe.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*******************************************************************************</span>

<span class="cm">  Intel 10 Gigabit PCI Express Linux driver</span>
<span class="cm">  Copyright(c) 1999 - 2012 Intel Corporation.</span>

<span class="cm">  This program is free software; you can redistribute it and/or modify it</span>
<span class="cm">  under the terms and conditions of the GNU General Public License,</span>
<span class="cm">  version 2, as published by the Free Software Foundation.</span>

<span class="cm">  This program is distributed in the hope it will be useful, but WITHOUT</span>
<span class="cm">  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<span class="cm">  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for</span>
<span class="cm">  more details.</span>

<span class="cm">  You should have received a copy of the GNU General Public License along with</span>
<span class="cm">  this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="cm">  51 Franklin St - Fifth Floor, Boston, MA 02110-1301 USA.</span>

<span class="cm">  The full GNU General Public License is included in this distribution in</span>
<span class="cm">  the file called &quot;COPYING&quot;.</span>

<span class="cm">  Contact Information:</span>
<span class="cm">  e1000-devel Mailing List &lt;e1000-devel@lists.sourceforge.net&gt;</span>
<span class="cm">  Intel Corporation, 5200 N.E. Elam Young Parkway, Hillsboro, OR 97124-6497</span>

<span class="cm">*******************************************************************************/</span>

<span class="cp">#ifndef _IXGBE_H_</span>
<span class="cp">#define _IXGBE_H_</span>

<span class="cp">#include &lt;linux/bitops.h&gt;</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/pci.h&gt;</span>
<span class="cp">#include &lt;linux/netdevice.h&gt;</span>
<span class="cp">#include &lt;linux/cpumask.h&gt;</span>
<span class="cp">#include &lt;linux/aer.h&gt;</span>
<span class="cp">#include &lt;linux/if_vlan.h&gt;</span>

<span class="cp">#ifdef CONFIG_IXGBE_PTP</span>
<span class="cp">#include &lt;linux/clocksource.h&gt;</span>
<span class="cp">#include &lt;linux/net_tstamp.h&gt;</span>
<span class="cp">#include &lt;linux/ptp_clock_kernel.h&gt;</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_IXGBE_PTP */</span><span class="cp"></span>

<span class="cp">#include &quot;ixgbe_type.h&quot;</span>
<span class="cp">#include &quot;ixgbe_common.h&quot;</span>
<span class="cp">#include &quot;ixgbe_dcb.h&quot;</span>
<span class="cp">#if defined(CONFIG_FCOE) || defined(CONFIG_FCOE_MODULE)</span>
<span class="cp">#define IXGBE_FCOE</span>
<span class="cp">#include &quot;ixgbe_fcoe.h&quot;</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_FCOE or CONFIG_FCOE_MODULE */</span><span class="cp"></span>
<span class="cp">#ifdef CONFIG_IXGBE_DCA</span>
<span class="cp">#include &lt;linux/dca.h&gt;</span>
<span class="cp">#endif</span>

<span class="cm">/* common prefix used by pr_&lt;&gt; macros */</span>
<span class="cp">#undef pr_fmt</span>
<span class="cp">#define pr_fmt(fmt) KBUILD_MODNAME &quot;: &quot; fmt</span>

<span class="cm">/* TX/RX descriptor defines */</span>
<span class="cp">#define IXGBE_DEFAULT_TXD		    512</span>
<span class="cp">#define IXGBE_DEFAULT_TX_WORK		    256</span>
<span class="cp">#define IXGBE_MAX_TXD			   4096</span>
<span class="cp">#define IXGBE_MIN_TXD			     64</span>

<span class="cp">#define IXGBE_DEFAULT_RXD		    512</span>
<span class="cp">#define IXGBE_MAX_RXD			   4096</span>
<span class="cp">#define IXGBE_MIN_RXD			     64</span>

<span class="cm">/* flow control */</span>
<span class="cp">#define IXGBE_MIN_FCRTL			   0x40</span>
<span class="cp">#define IXGBE_MAX_FCRTL			0x7FF80</span>
<span class="cp">#define IXGBE_MIN_FCRTH			  0x600</span>
<span class="cp">#define IXGBE_MAX_FCRTH			0x7FFF0</span>
<span class="cp">#define IXGBE_DEFAULT_FCPAUSE		 0xFFFF</span>
<span class="cp">#define IXGBE_MIN_FCPAUSE		      0</span>
<span class="cp">#define IXGBE_MAX_FCPAUSE		 0xFFFF</span>

<span class="cm">/* Supported Rx Buffer Sizes */</span>
<span class="cp">#define IXGBE_RXBUFFER_512   512    </span><span class="cm">/* Used for packet split */</span><span class="cp"></span>
<span class="cp">#define IXGBE_MAX_RXBUFFER  16384  </span><span class="cm">/* largest size for a single descriptor */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * NOTE: netdev_alloc_skb reserves up to 64 bytes, NET_IP_ALIGN mans we</span>
<span class="cm"> * reserve 2 more, and skb_shared_info adds an additional 384 bytes more,</span>
<span class="cm"> * this adds up to 512 bytes of extra data meaning the smallest allocation</span>
<span class="cm"> * we could have is 1K.</span>
<span class="cm"> * i.e. RXBUFFER_512 --&gt; size-1024 slab</span>
<span class="cm"> */</span>
<span class="cp">#define IXGBE_RX_HDR_SIZE IXGBE_RXBUFFER_512</span>

<span class="cp">#define MAXIMUM_ETHERNET_VLAN_SIZE (ETH_FRAME_LEN + ETH_FCS_LEN + VLAN_HLEN)</span>

<span class="cm">/* How many Rx Buffers do we bundle into one write to the hardware ? */</span>
<span class="cp">#define IXGBE_RX_BUFFER_WRITE	16	</span><span class="cm">/* Must be power of 2 */</span><span class="cp"></span>

<span class="cp">#define IXGBE_TX_FLAGS_CSUM		(u32)(1)</span>
<span class="cp">#define IXGBE_TX_FLAGS_HW_VLAN		(u32)(1 &lt;&lt; 1)</span>
<span class="cp">#define IXGBE_TX_FLAGS_SW_VLAN		(u32)(1 &lt;&lt; 2)</span>
<span class="cp">#define IXGBE_TX_FLAGS_TSO		(u32)(1 &lt;&lt; 3)</span>
<span class="cp">#define IXGBE_TX_FLAGS_IPV4		(u32)(1 &lt;&lt; 4)</span>
<span class="cp">#define IXGBE_TX_FLAGS_FCOE		(u32)(1 &lt;&lt; 5)</span>
<span class="cp">#define IXGBE_TX_FLAGS_FSO		(u32)(1 &lt;&lt; 6)</span>
<span class="cp">#define IXGBE_TX_FLAGS_TXSW		(u32)(1 &lt;&lt; 7)</span>
<span class="cp">#define IXGBE_TX_FLAGS_TSTAMP		(u32)(1 &lt;&lt; 8)</span>
<span class="cp">#define IXGBE_TX_FLAGS_VLAN_MASK	0xffff0000</span>
<span class="cp">#define IXGBE_TX_FLAGS_VLAN_PRIO_MASK	0xe0000000</span>
<span class="cp">#define IXGBE_TX_FLAGS_VLAN_PRIO_SHIFT  29</span>
<span class="cp">#define IXGBE_TX_FLAGS_VLAN_SHIFT	16</span>

<span class="cp">#define IXGBE_MAX_VF_MC_ENTRIES         30</span>
<span class="cp">#define IXGBE_MAX_VF_FUNCTIONS          64</span>
<span class="cp">#define IXGBE_MAX_VFTA_ENTRIES          128</span>
<span class="cp">#define MAX_EMULATION_MAC_ADDRS         16</span>
<span class="cp">#define IXGBE_MAX_PF_MACVLANS           15</span>
<span class="cp">#define VMDQ_P(p)   ((p) + adapter-&gt;num_vfs)</span>
<span class="cp">#define IXGBE_82599_VF_DEVICE_ID        0x10ED</span>
<span class="cp">#define IXGBE_X540_VF_DEVICE_ID         0x1515</span>

<span class="k">struct</span> <span class="n">vf_data_storage</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">vf_mac_addresses</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">vf_mc_hashes</span><span class="p">[</span><span class="n">IXGBE_MAX_VF_MC_ENTRIES</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">num_vf_mc_hashes</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">default_vf_vlan_id</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">vlans_enabled</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">clear_to_send</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">pf_set_mac</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">pf_vlan</span><span class="p">;</span> <span class="cm">/* When set, guest VLAN config not allowed. */</span>
	<span class="n">u16</span> <span class="n">pf_qos</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">tx_rate</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">vlan_count</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">spoofchk_enabled</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">vfdev</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">vf_macvlans</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">l</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">vf</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rar_entry</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">free</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">is_macvlan</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">vf_macvlan</span><span class="p">[</span><span class="n">ETH_ALEN</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define IXGBE_MAX_TXD_PWR	14</span>
<span class="cp">#define IXGBE_MAX_DATA_PER_TXD	(1 &lt;&lt; IXGBE_MAX_TXD_PWR)</span>

<span class="cm">/* Tx Descriptors needed, worst case */</span>
<span class="cp">#define TXD_USE_COUNT(S) DIV_ROUND_UP((S), IXGBE_MAX_DATA_PER_TXD)</span>
<span class="cp">#define DESC_NEEDED ((MAX_SKB_FRAGS * TXD_USE_COUNT(PAGE_SIZE)) + 4)</span>

<span class="cm">/* wrapper around a pointer to a socket buffer,</span>
<span class="cm"> * so a DMA handle can be stored along with the buffer */</span>
<span class="k">struct</span> <span class="n">ixgbe_tx_buffer</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">ixgbe_adv_tx_desc</span> <span class="o">*</span><span class="n">next_to_watch</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">time_stamp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bytecount</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gso_segs</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">protocol</span><span class="p">;</span>
	<span class="n">DEFINE_DMA_UNMAP_ADDR</span><span class="p">(</span><span class="n">dma</span><span class="p">);</span>
	<span class="n">DEFINE_DMA_UNMAP_LEN</span><span class="p">(</span><span class="n">len</span><span class="p">);</span>
	<span class="n">u32</span> <span class="n">tx_flags</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ixgbe_rx_buffer</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">dma</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">page</span> <span class="o">*</span><span class="n">page</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">page_offset</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ixgbe_queue_stats</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">packets</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">bytes</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ixgbe_tx_queue_stats</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">restart_queue</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_busy</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_done_old</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ixgbe_rx_queue_stats</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">rsc_count</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rsc_flush</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">non_eop_descs</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">alloc_rx_page_failed</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">alloc_rx_buff_failed</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">csum_err</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">ixgbe_ring_state_t</span> <span class="p">{</span>
	<span class="n">__IXGBE_TX_FDIR_INIT_DONE</span><span class="p">,</span>
	<span class="n">__IXGBE_TX_DETECT_HANG</span><span class="p">,</span>
	<span class="n">__IXGBE_HANG_CHECK_ARMED</span><span class="p">,</span>
	<span class="n">__IXGBE_RX_RSC_ENABLED</span><span class="p">,</span>
	<span class="n">__IXGBE_RX_CSUM_UDP_ZERO_ERR</span><span class="p">,</span>
	<span class="n">__IXGBE_RX_FCOE</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define check_for_tx_hang(ring) \</span>
<span class="cp">	test_bit(__IXGBE_TX_DETECT_HANG, &amp;(ring)-&gt;state)</span>
<span class="cp">#define set_check_for_tx_hang(ring) \</span>
<span class="cp">	set_bit(__IXGBE_TX_DETECT_HANG, &amp;(ring)-&gt;state)</span>
<span class="cp">#define clear_check_for_tx_hang(ring) \</span>
<span class="cp">	clear_bit(__IXGBE_TX_DETECT_HANG, &amp;(ring)-&gt;state)</span>
<span class="cp">#define ring_is_rsc_enabled(ring) \</span>
<span class="cp">	test_bit(__IXGBE_RX_RSC_ENABLED, &amp;(ring)-&gt;state)</span>
<span class="cp">#define set_ring_rsc_enabled(ring) \</span>
<span class="cp">	set_bit(__IXGBE_RX_RSC_ENABLED, &amp;(ring)-&gt;state)</span>
<span class="cp">#define clear_ring_rsc_enabled(ring) \</span>
<span class="cp">	clear_bit(__IXGBE_RX_RSC_ENABLED, &amp;(ring)-&gt;state)</span>
<span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>	<span class="cm">/* pointer to next ring in q_vector */</span>
	<span class="k">struct</span> <span class="n">ixgbe_q_vector</span> <span class="o">*</span><span class="n">q_vector</span><span class="p">;</span> <span class="cm">/* backpointer to host q_vector */</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">;</span>	<span class="cm">/* netdev ring belongs to */</span>
	<span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>		<span class="cm">/* device for DMA mapping */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">desc</span><span class="p">;</span>			<span class="cm">/* descriptor ring memory */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">ixgbe_tx_buffer</span> <span class="o">*</span><span class="n">tx_buffer_info</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">ixgbe_rx_buffer</span> <span class="o">*</span><span class="n">rx_buffer_info</span><span class="p">;</span>
	<span class="p">};</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">state</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">tail</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">dma</span><span class="p">;</span>			<span class="cm">/* phys. address of descriptor ring */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">;</span>		<span class="cm">/* length in bytes */</span>

	<span class="n">u16</span> <span class="n">count</span><span class="p">;</span>			<span class="cm">/* amount of descriptors */</span>

	<span class="n">u8</span> <span class="n">queue_index</span><span class="p">;</span> <span class="cm">/* needed for multiqueue queue management */</span>
	<span class="n">u8</span> <span class="n">reg_idx</span><span class="p">;</span>			<span class="cm">/* holds the special value that gets</span>
<span class="cm">					 * the hardware register offset</span>
<span class="cm">					 * associated with this ring, which is</span>
<span class="cm">					 * different for DCB and RSS modes</span>
<span class="cm">					 */</span>
	<span class="n">u16</span> <span class="n">next_to_use</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">next_to_clean</span><span class="p">;</span>

	<span class="k">union</span> <span class="p">{</span>
		<span class="n">u16</span> <span class="n">next_to_alloc</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u8</span> <span class="n">atr_sample_rate</span><span class="p">;</span>
			<span class="n">u8</span> <span class="n">atr_count</span><span class="p">;</span>
		<span class="p">};</span>
	<span class="p">};</span>

	<span class="n">u8</span> <span class="n">dcb_tc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ixgbe_queue_stats</span> <span class="n">stats</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">u64_stats_sync</span> <span class="n">syncp</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">ixgbe_tx_queue_stats</span> <span class="n">tx_stats</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">ixgbe_rx_queue_stats</span> <span class="n">rx_stats</span><span class="p">;</span>
	<span class="p">};</span>
<span class="p">}</span> <span class="n">____cacheline_internodealigned_in_smp</span><span class="p">;</span>

<span class="k">enum</span> <span class="n">ixgbe_ring_f_enum</span> <span class="p">{</span>
	<span class="n">RING_F_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">RING_F_VMDQ</span><span class="p">,</span>  <span class="cm">/* SR-IOV uses the same ring feature */</span>
	<span class="n">RING_F_RSS</span><span class="p">,</span>
	<span class="n">RING_F_FDIR</span><span class="p">,</span>
<span class="cp">#ifdef IXGBE_FCOE</span>
	<span class="n">RING_F_FCOE</span><span class="p">,</span>
<span class="cp">#endif </span><span class="cm">/* IXGBE_FCOE */</span><span class="cp"></span>

	<span class="n">RING_F_ARRAY_SIZE</span>      <span class="cm">/* must be last in enum set */</span>
<span class="p">};</span>

<span class="cp">#define IXGBE_MAX_RSS_INDICES  16</span>
<span class="cp">#define IXGBE_MAX_VMDQ_INDICES 64</span>
<span class="cp">#define IXGBE_MAX_FDIR_INDICES 64</span>
<span class="cp">#ifdef IXGBE_FCOE</span>
<span class="cp">#define IXGBE_MAX_FCOE_INDICES  8</span>
<span class="cp">#define MAX_RX_QUEUES (IXGBE_MAX_FDIR_INDICES + IXGBE_MAX_FCOE_INDICES)</span>
<span class="cp">#define MAX_TX_QUEUES (IXGBE_MAX_FDIR_INDICES + IXGBE_MAX_FCOE_INDICES)</span>
<span class="cp">#else</span>
<span class="cp">#define MAX_RX_QUEUES IXGBE_MAX_FDIR_INDICES</span>
<span class="cp">#define MAX_TX_QUEUES IXGBE_MAX_FDIR_INDICES</span>
<span class="cp">#endif </span><span class="cm">/* IXGBE_FCOE */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">ixgbe_ring_feature</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">indices</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mask</span><span class="p">;</span>
<span class="p">}</span> <span class="n">____cacheline_internodealigned_in_smp</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * FCoE requires that all Rx buffers be over 2200 bytes in length.  Since</span>
<span class="cm"> * this is twice the size of a half page we need to double the page order</span>
<span class="cm"> * for FCoE enabled Rx queues.</span>
<span class="cm"> */</span>
<span class="cp">#if defined(IXGBE_FCOE) &amp;&amp; (PAGE_SIZE &lt; 8192)</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">ixgbe_rx_pg_order</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="n">ring</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">test_bit</span><span class="p">(</span><span class="n">__IXGBE_RX_FCOE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ring</span><span class="o">-&gt;</span><span class="n">state</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#else</span>
<span class="cp">#define ixgbe_rx_pg_order(_ring) 0</span>
<span class="cp">#endif</span>
<span class="cp">#define ixgbe_rx_pg_size(_ring) (PAGE_SIZE &lt;&lt; ixgbe_rx_pg_order(_ring))</span>
<span class="cp">#define ixgbe_rx_bufsz(_ring) ((PAGE_SIZE / 2) &lt;&lt; ixgbe_rx_pg_order(_ring))</span>

<span class="k">struct</span> <span class="n">ixgbe_ring_container</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="n">ring</span><span class="p">;</span>	<span class="cm">/* pointer to linked list of rings */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">total_bytes</span><span class="p">;</span>	<span class="cm">/* total bytes processed this int */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">total_packets</span><span class="p">;</span>	<span class="cm">/* total packets processed this int */</span>
	<span class="n">u16</span> <span class="n">work_limit</span><span class="p">;</span>			<span class="cm">/* total work allowed per interrupt */</span>
	<span class="n">u8</span> <span class="n">count</span><span class="p">;</span>			<span class="cm">/* total number of rings in vector */</span>
	<span class="n">u8</span> <span class="n">itr</span><span class="p">;</span>				<span class="cm">/* current ITR setting for ring */</span>
<span class="p">};</span>

<span class="cm">/* iterator for handling rings in ring container */</span>
<span class="cp">#define ixgbe_for_each_ring(pos, head) \</span>
<span class="cp">	for (pos = (head).ring; pos != NULL; pos = pos-&gt;next)</span>

<span class="cp">#define MAX_RX_PACKET_BUFFERS ((adapter-&gt;flags &amp; IXGBE_FLAG_DCB_ENABLED) \</span>
<span class="cp">                              ? 8 : 1)</span>
<span class="cp">#define MAX_TX_PACKET_BUFFERS MAX_RX_PACKET_BUFFERS</span>

<span class="cm">/* MAX_MSIX_Q_VECTORS of these are allocated,</span>
<span class="cm"> * but we only use one per queue-specific vector.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">ixgbe_q_vector</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">;</span>
<span class="cp">#ifdef CONFIG_IXGBE_DCA</span>
	<span class="kt">int</span> <span class="n">cpu</span><span class="p">;</span>	    <span class="cm">/* CPU for DCA */</span>
<span class="cp">#endif</span>
	<span class="n">u16</span> <span class="n">v_idx</span><span class="p">;</span>		<span class="cm">/* index of q_vector within array, also used for</span>
<span class="cm">				 * finding the bit in EICR and friends that</span>
<span class="cm">				 * represents the vector for this ring */</span>
	<span class="n">u16</span> <span class="n">itr</span><span class="p">;</span>		<span class="cm">/* Interrupt throttle rate written to EITR */</span>
	<span class="k">struct</span> <span class="n">ixgbe_ring_container</span> <span class="n">rx</span><span class="p">,</span> <span class="n">tx</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">napi_struct</span> <span class="n">napi</span><span class="p">;</span>
	<span class="n">cpumask_t</span> <span class="n">affinity_mask</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">numa_node</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">rcu_head</span> <span class="n">rcu</span><span class="p">;</span>	<span class="cm">/* to avoid race with update stats on free */</span>
	<span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="n">IFNAMSIZ</span> <span class="o">+</span> <span class="mi">9</span><span class="p">];</span>

	<span class="cm">/* for dynamic allocation of rings associated with this q_vector */</span>
	<span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="n">ring</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="n">____cacheline_internodealigned_in_smp</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#ifdef CONFIG_IXGBE_HWMON</span>

<span class="cp">#define IXGBE_HWMON_TYPE_LOC		0</span>
<span class="cp">#define IXGBE_HWMON_TYPE_TEMP		1</span>
<span class="cp">#define IXGBE_HWMON_TYPE_CAUTION	2</span>
<span class="cp">#define IXGBE_HWMON_TYPE_MAX		3</span>

<span class="k">struct</span> <span class="n">hwmon_attr</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">device_attribute</span> <span class="n">dev_attr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ixgbe_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ixgbe_thermal_diode_data</span> <span class="o">*</span><span class="n">sensor</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">hwmon_buff</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">device</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">hwmon_attr</span> <span class="o">*</span><span class="n">hwmon_list</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">n_hwmon</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_IXGBE_HWMON */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * microsecond values for various ITR rates shifted by 2 to fit itr register</span>
<span class="cm"> * with the first 3 bits reserved 0</span>
<span class="cm"> */</span>
<span class="cp">#define IXGBE_MIN_RSC_ITR	24</span>
<span class="cp">#define IXGBE_100K_ITR		40</span>
<span class="cp">#define IXGBE_20K_ITR		200</span>
<span class="cp">#define IXGBE_10K_ITR		400</span>
<span class="cp">#define IXGBE_8K_ITR		500</span>

<span class="cm">/* ixgbe_test_staterr - tests bits in Rx descriptor status and error fields */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">__le32</span> <span class="nf">ixgbe_test_staterr</span><span class="p">(</span><span class="k">union</span> <span class="n">ixgbe_adv_rx_desc</span> <span class="o">*</span><span class="n">rx_desc</span><span class="p">,</span>
					<span class="k">const</span> <span class="n">u32</span> <span class="n">stat_err_bits</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">rx_desc</span><span class="o">-&gt;</span><span class="n">wb</span><span class="p">.</span><span class="n">upper</span><span class="p">.</span><span class="n">status_error</span> <span class="o">&amp;</span> <span class="n">cpu_to_le32</span><span class="p">(</span><span class="n">stat_err_bits</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u16</span> <span class="nf">ixgbe_desc_unused</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="n">ring</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u16</span> <span class="n">ntc</span> <span class="o">=</span> <span class="n">ring</span><span class="o">-&gt;</span><span class="n">next_to_clean</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">ntu</span> <span class="o">=</span> <span class="n">ring</span><span class="o">-&gt;</span><span class="n">next_to_use</span><span class="p">;</span>

	<span class="k">return</span> <span class="p">((</span><span class="n">ntc</span> <span class="o">&gt;</span> <span class="n">ntu</span><span class="p">)</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">ring</span><span class="o">-&gt;</span><span class="n">count</span><span class="p">)</span> <span class="o">+</span> <span class="n">ntc</span> <span class="o">-</span> <span class="n">ntu</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#define IXGBE_RX_DESC(R, i)	    \</span>
<span class="cp">	(&amp;(((union ixgbe_adv_rx_desc *)((R)-&gt;desc))[i]))</span>
<span class="cp">#define IXGBE_TX_DESC(R, i)	    \</span>
<span class="cp">	(&amp;(((union ixgbe_adv_tx_desc *)((R)-&gt;desc))[i]))</span>
<span class="cp">#define IXGBE_TX_CTXTDESC(R, i)	    \</span>
<span class="cp">	(&amp;(((struct ixgbe_adv_tx_context_desc *)((R)-&gt;desc))[i]))</span>

<span class="cp">#define IXGBE_MAX_JUMBO_FRAME_SIZE        16128</span>
<span class="cp">#ifdef IXGBE_FCOE</span>
<span class="cm">/* Use 3K as the baby jumbo frame size for FCoE */</span>
<span class="cp">#define IXGBE_FCOE_JUMBO_FRAME_SIZE       3072</span>
<span class="cp">#endif </span><span class="cm">/* IXGBE_FCOE */</span><span class="cp"></span>

<span class="cp">#define OTHER_VECTOR 1</span>
<span class="cp">#define NON_Q_VECTORS (OTHER_VECTOR)</span>

<span class="cp">#define MAX_MSIX_VECTORS_82599 64</span>
<span class="cp">#define MAX_MSIX_Q_VECTORS_82599 64</span>
<span class="cp">#define MAX_MSIX_VECTORS_82598 18</span>
<span class="cp">#define MAX_MSIX_Q_VECTORS_82598 16</span>

<span class="cp">#define MAX_MSIX_Q_VECTORS MAX_MSIX_Q_VECTORS_82599</span>
<span class="cp">#define MAX_MSIX_COUNT MAX_MSIX_VECTORS_82599</span>

<span class="cp">#define MIN_MSIX_Q_VECTORS 1</span>
<span class="cp">#define MIN_MSIX_COUNT (MIN_MSIX_Q_VECTORS + NON_Q_VECTORS)</span>

<span class="cm">/* default to trying for four seconds */</span>
<span class="cp">#define IXGBE_TRY_LINK_TIMEOUT (4 * HZ)</span>

<span class="cm">/* board specific private data structure */</span>
<span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">active_vlans</span><span class="p">[</span><span class="n">BITS_TO_LONGS</span><span class="p">(</span><span class="n">VLAN_N_VID</span><span class="p">)];</span>
	<span class="cm">/* OS defined structs */</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pdev</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">state</span><span class="p">;</span>

	<span class="cm">/* Some features need tri-state capability,</span>
<span class="cm">	 * thus the additional *_CAPABLE flags.</span>
<span class="cm">	 */</span>
	<span class="n">u32</span> <span class="n">flags</span><span class="p">;</span>
<span class="cp">#define IXGBE_FLAG_MSI_CAPABLE                  (u32)(1 &lt;&lt; 1)</span>
<span class="cp">#define IXGBE_FLAG_MSI_ENABLED                  (u32)(1 &lt;&lt; 2)</span>
<span class="cp">#define IXGBE_FLAG_MSIX_CAPABLE                 (u32)(1 &lt;&lt; 3)</span>
<span class="cp">#define IXGBE_FLAG_MSIX_ENABLED                 (u32)(1 &lt;&lt; 4)</span>
<span class="cp">#define IXGBE_FLAG_RX_1BUF_CAPABLE              (u32)(1 &lt;&lt; 6)</span>
<span class="cp">#define IXGBE_FLAG_RX_PS_CAPABLE                (u32)(1 &lt;&lt; 7)</span>
<span class="cp">#define IXGBE_FLAG_RX_PS_ENABLED                (u32)(1 &lt;&lt; 8)</span>
<span class="cp">#define IXGBE_FLAG_IN_NETPOLL                   (u32)(1 &lt;&lt; 9)</span>
<span class="cp">#define IXGBE_FLAG_DCA_ENABLED                  (u32)(1 &lt;&lt; 10)</span>
<span class="cp">#define IXGBE_FLAG_DCA_CAPABLE                  (u32)(1 &lt;&lt; 11)</span>
<span class="cp">#define IXGBE_FLAG_IMIR_ENABLED                 (u32)(1 &lt;&lt; 12)</span>
<span class="cp">#define IXGBE_FLAG_MQ_CAPABLE                   (u32)(1 &lt;&lt; 13)</span>
<span class="cp">#define IXGBE_FLAG_DCB_ENABLED                  (u32)(1 &lt;&lt; 14)</span>
<span class="cp">#define IXGBE_FLAG_RSS_ENABLED                  (u32)(1 &lt;&lt; 16)</span>
<span class="cp">#define IXGBE_FLAG_RSS_CAPABLE                  (u32)(1 &lt;&lt; 17)</span>
<span class="cp">#define IXGBE_FLAG_VMDQ_CAPABLE                 (u32)(1 &lt;&lt; 18)</span>
<span class="cp">#define IXGBE_FLAG_VMDQ_ENABLED                 (u32)(1 &lt;&lt; 19)</span>
<span class="cp">#define IXGBE_FLAG_FAN_FAIL_CAPABLE             (u32)(1 &lt;&lt; 20)</span>
<span class="cp">#define IXGBE_FLAG_NEED_LINK_UPDATE             (u32)(1 &lt;&lt; 22)</span>
<span class="cp">#define IXGBE_FLAG_NEED_LINK_CONFIG             (u32)(1 &lt;&lt; 23)</span>
<span class="cp">#define IXGBE_FLAG_FDIR_HASH_CAPABLE            (u32)(1 &lt;&lt; 24)</span>
<span class="cp">#define IXGBE_FLAG_FDIR_PERFECT_CAPABLE         (u32)(1 &lt;&lt; 25)</span>
<span class="cp">#define IXGBE_FLAG_FCOE_CAPABLE                 (u32)(1 &lt;&lt; 26)</span>
<span class="cp">#define IXGBE_FLAG_FCOE_ENABLED                 (u32)(1 &lt;&lt; 27)</span>
<span class="cp">#define IXGBE_FLAG_SRIOV_CAPABLE                (u32)(1 &lt;&lt; 28)</span>
<span class="cp">#define IXGBE_FLAG_SRIOV_ENABLED                (u32)(1 &lt;&lt; 29)</span>

	<span class="n">u32</span> <span class="n">flags2</span><span class="p">;</span>
<span class="cp">#define IXGBE_FLAG2_RSC_CAPABLE                 (u32)(1)</span>
<span class="cp">#define IXGBE_FLAG2_RSC_ENABLED                 (u32)(1 &lt;&lt; 1)</span>
<span class="cp">#define IXGBE_FLAG2_TEMP_SENSOR_CAPABLE         (u32)(1 &lt;&lt; 2)</span>
<span class="cp">#define IXGBE_FLAG2_TEMP_SENSOR_EVENT           (u32)(1 &lt;&lt; 3)</span>
<span class="cp">#define IXGBE_FLAG2_SEARCH_FOR_SFP              (u32)(1 &lt;&lt; 4)</span>
<span class="cp">#define IXGBE_FLAG2_SFP_NEEDS_RESET             (u32)(1 &lt;&lt; 5)</span>
<span class="cp">#define IXGBE_FLAG2_RESET_REQUESTED             (u32)(1 &lt;&lt; 6)</span>
<span class="cp">#define IXGBE_FLAG2_FDIR_REQUIRES_REINIT        (u32)(1 &lt;&lt; 7)</span>
<span class="cp">#define IXGBE_FLAG2_RSS_FIELD_IPV4_UDP		(u32)(1 &lt;&lt; 8)</span>
<span class="cp">#define IXGBE_FLAG2_RSS_FIELD_IPV6_UDP		(u32)(1 &lt;&lt; 9)</span>
<span class="cp">#define IXGBE_FLAG2_OVERFLOW_CHECK_ENABLED	(u32)(1 &lt;&lt; 10)</span>
<span class="cp">#define IXGBE_FLAG2_PTP_PPS_ENABLED		(u32)(1 &lt;&lt; 11)</span>

	<span class="cm">/* Tx fast path data */</span>
	<span class="kt">int</span> <span class="n">num_tx_queues</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">tx_itr_setting</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">tx_work_limit</span><span class="p">;</span>

	<span class="cm">/* Rx fast path data */</span>
	<span class="kt">int</span> <span class="n">num_rx_queues</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">rx_itr_setting</span><span class="p">;</span>

	<span class="cm">/* TX */</span>
	<span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="n">tx_ring</span><span class="p">[</span><span class="n">MAX_TX_QUEUES</span><span class="p">]</span> <span class="n">____cacheline_aligned_in_smp</span><span class="p">;</span>

	<span class="n">u64</span> <span class="n">restart_queue</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">lsc_int</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tx_timeout_count</span><span class="p">;</span>

	<span class="cm">/* RX */</span>
	<span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="n">rx_ring</span><span class="p">[</span><span class="n">MAX_RX_QUEUES</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">num_rx_pools</span><span class="p">;</span>		<span class="cm">/* == num_rx_queues in 82598 */</span>
	<span class="kt">int</span> <span class="n">num_rx_queues_per_pool</span><span class="p">;</span>	<span class="cm">/* 1 if 82598, can be many if 82599 */</span>
	<span class="n">u64</span> <span class="n">hw_csum_rx_error</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">hw_rx_no_dma_resources</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rsc_total_count</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rsc_total_flush</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">non_eop_descs</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">alloc_rx_page_failed</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">alloc_rx_buff_failed</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">ixgbe_q_vector</span> <span class="o">*</span><span class="n">q_vector</span><span class="p">[</span><span class="n">MAX_MSIX_Q_VECTORS</span><span class="p">];</span>

	<span class="cm">/* DCB parameters */</span>
	<span class="k">struct</span> <span class="n">ieee_pfc</span> <span class="o">*</span><span class="n">ixgbe_ieee_pfc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ieee_ets</span> <span class="o">*</span><span class="n">ixgbe_ieee_ets</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ixgbe_dcb_config</span> <span class="n">dcb_cfg</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ixgbe_dcb_config</span> <span class="n">temp_dcb_cfg</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">dcb_set_bitmap</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">dcbx_cap</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">ixgbe_fc_mode</span> <span class="n">last_lfc_mode</span><span class="p">;</span>

	<span class="kt">int</span> <span class="n">num_msix_vectors</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">max_msix_q_vectors</span><span class="p">;</span>         <span class="cm">/* true count of q_vectors for device */</span>
	<span class="k">struct</span> <span class="n">ixgbe_ring_feature</span> <span class="n">ring_feature</span><span class="p">[</span><span class="n">RING_F_ARRAY_SIZE</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">msix_entry</span> <span class="o">*</span><span class="n">msix_entries</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">test_icr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="n">test_tx_ring</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="n">test_rx_ring</span><span class="p">;</span>

	<span class="cm">/* structs defined in ixgbe_hw.h */</span>
	<span class="k">struct</span> <span class="n">ixgbe_hw</span> <span class="n">hw</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">msg_enable</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ixgbe_hw_stats</span> <span class="n">stats</span><span class="p">;</span>

	<span class="n">u64</span> <span class="n">tx_busy</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tx_ring_count</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rx_ring_count</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">link_speed</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">link_up</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">link_check_timeout</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">service_timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">service_task</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">hlist_head</span> <span class="n">fdir_filter_list</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fdir_overflow</span><span class="p">;</span> <span class="cm">/* number of times ATR was backed off */</span>
	<span class="k">union</span> <span class="n">ixgbe_atr_input</span> <span class="n">fdir_mask</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">fdir_filter_count</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fdir_pballoc</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">atr_sample_rate</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">fdir_perfect_lock</span><span class="p">;</span>

<span class="cp">#ifdef IXGBE_FCOE</span>
	<span class="k">struct</span> <span class="n">ixgbe_fcoe</span> <span class="n">fcoe</span><span class="p">;</span>
<span class="cp">#endif </span><span class="cm">/* IXGBE_FCOE */</span><span class="cp"></span>
	<span class="n">u32</span> <span class="n">wol</span><span class="p">;</span>

	<span class="n">u16</span> <span class="n">bd_number</span><span class="p">;</span>

	<span class="n">u16</span> <span class="n">eeprom_verh</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">eeprom_verl</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">eeprom_cap</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">interrupt_event</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">led_reg</span><span class="p">;</span>

<span class="cp">#ifdef CONFIG_IXGBE_PTP</span>
	<span class="k">struct</span> <span class="n">ptp_clock</span> <span class="o">*</span><span class="n">ptp_clock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ptp_clock_info</span> <span class="n">ptp_caps</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">last_overflow_check</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">tmreg_lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cyclecounter</span> <span class="n">cc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timecounter</span> <span class="n">tc</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">base_incval</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cycle_speed</span><span class="p">;</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_IXGBE_PTP */</span><span class="cp"></span>

	<span class="cm">/* SR-IOV */</span>
	<span class="n">DECLARE_BITMAP</span><span class="p">(</span><span class="n">active_vfs</span><span class="p">,</span> <span class="n">IXGBE_MAX_VF_FUNCTIONS</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">num_vfs</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">vf_data_storage</span> <span class="o">*</span><span class="n">vfinfo</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">vf_rate_link_speed</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">vf_macvlans</span> <span class="n">vf_mvs</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">vf_macvlans</span> <span class="o">*</span><span class="n">mv_list</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">timer_event_accumulator</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vferr_refcount</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">kobject</span> <span class="o">*</span><span class="n">info_kobj</span><span class="p">;</span>
<span class="cp">#ifdef CONFIG_IXGBE_HWMON</span>
	<span class="k">struct</span> <span class="n">hwmon_buff</span> <span class="n">ixgbe_hwmon_buff</span><span class="p">;</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_IXGBE_HWMON */</span><span class="cp"></span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ixgbe_fdir_filter</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">hlist_node</span> <span class="n">fdir_node</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">ixgbe_atr_input</span> <span class="n">filter</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">sw_idx</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">action</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">ixgbe_state_t</span> <span class="p">{</span>
	<span class="n">__IXGBE_TESTING</span><span class="p">,</span>
	<span class="n">__IXGBE_RESETTING</span><span class="p">,</span>
	<span class="n">__IXGBE_DOWN</span><span class="p">,</span>
	<span class="n">__IXGBE_SERVICE_SCHED</span><span class="p">,</span>
	<span class="n">__IXGBE_IN_SFP_INIT</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ixgbe_cb</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>				<span class="cm">/* Union defining head/tail partner */</span>
		<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">head</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">tail</span><span class="p">;</span>
	<span class="p">};</span>
	<span class="n">dma_addr_t</span> <span class="n">dma</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">append_cnt</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">page_released</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#define IXGBE_CB(skb) ((struct ixgbe_cb *)(skb)-&gt;cb)</span>

<span class="k">enum</span> <span class="n">ixgbe_boards</span> <span class="p">{</span>
	<span class="n">board_82598</span><span class="p">,</span>
	<span class="n">board_82599</span><span class="p">,</span>
	<span class="n">board_X540</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">ixgbe_info</span> <span class="n">ixgbe_82598_info</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">ixgbe_info</span> <span class="n">ixgbe_82599_info</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">ixgbe_info</span> <span class="n">ixgbe_X540_info</span><span class="p">;</span>
<span class="cp">#ifdef CONFIG_IXGBE_DCB</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">dcbnl_rtnl_ops</span> <span class="n">dcbnl_ops</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="k">extern</span> <span class="kt">char</span> <span class="n">ixgbe_driver_name</span><span class="p">[];</span>
<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">ixgbe_driver_version</span><span class="p">[];</span>
<span class="cp">#ifdef IXGBE_FCOE</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="n">ixgbe_default_device_descr</span><span class="p">[];</span>
<span class="cp">#endif </span><span class="cm">/* IXGBE_FCOE */</span><span class="cp"></span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_up</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_down</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_reinit_locked</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_set_ethtool_ops</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_setup_rx_resources</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_setup_tx_resources</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_free_rx_resources</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_free_tx_resources</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_configure_rx_ring</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="p">,</span><span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_configure_tx_ring</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="p">,</span><span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_disable_rx_queue</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
				   <span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_update_stats</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_init_interrupt_scheme</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_wol_supported</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="n">u16</span> <span class="n">device_id</span><span class="p">,</span>
			       <span class="n">u16</span> <span class="n">subdevice_id</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_clear_interrupt_scheme</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">netdev_tx_t</span> <span class="n">ixgbe_xmit_frame_ring</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span>
					 <span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="p">,</span>
					 <span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_unmap_and_free_tx_resource</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="p">,</span>
                                             <span class="k">struct</span> <span class="n">ixgbe_tx_buffer</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_alloc_rx_buffers</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="p">,</span> <span class="n">u16</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_write_eitr</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_q_vector</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_poll</span><span class="p">(</span><span class="k">struct</span> <span class="n">napi_struct</span> <span class="o">*</span><span class="n">napi</span><span class="p">,</span> <span class="kt">int</span> <span class="n">budget</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ethtool_ioctl</span><span class="p">(</span><span class="k">struct</span> <span class="n">ifreq</span> <span class="o">*</span><span class="n">ifr</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">ixgbe_reinit_fdir_tables_82599</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">ixgbe_init_fdir_signature_82599</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">fdirctrl</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">ixgbe_init_fdir_perfect_82599</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span> <span class="n">u32</span> <span class="n">fdirctrl</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">ixgbe_fdir_add_signature_filter_82599</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span>
						 <span class="k">union</span> <span class="n">ixgbe_atr_hash_dword</span> <span class="n">input</span><span class="p">,</span>
						 <span class="k">union</span> <span class="n">ixgbe_atr_hash_dword</span> <span class="n">common</span><span class="p">,</span>
                                                 <span class="n">u8</span> <span class="n">queue</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">ixgbe_fdir_set_input_mask_82599</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span>
					   <span class="k">union</span> <span class="n">ixgbe_atr_input</span> <span class="o">*</span><span class="n">input_mask</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">ixgbe_fdir_write_perfect_filter_82599</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span>
						 <span class="k">union</span> <span class="n">ixgbe_atr_input</span> <span class="o">*</span><span class="n">input</span><span class="p">,</span>
						 <span class="n">u16</span> <span class="n">soft_id</span><span class="p">,</span> <span class="n">u8</span> <span class="n">queue</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">s32</span> <span class="n">ixgbe_fdir_erase_perfect_filter_82599</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_hw</span> <span class="o">*</span><span class="n">hw</span><span class="p">,</span>
						 <span class="k">union</span> <span class="n">ixgbe_atr_input</span> <span class="o">*</span><span class="n">input</span><span class="p">,</span>
						 <span class="n">u16</span> <span class="n">soft_id</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_atr_compute_perfect_hash_82599</span><span class="p">(</span><span class="k">union</span> <span class="n">ixgbe_atr_input</span> <span class="o">*</span><span class="n">input</span><span class="p">,</span>
						 <span class="k">union</span> <span class="n">ixgbe_atr_input</span> <span class="o">*</span><span class="n">mask</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_set_rx_mode</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">);</span>
<span class="cp">#ifdef CONFIG_IXGBE_DCB</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_set_rx_drop_en</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_setup_tc</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u8</span> <span class="n">tc</span><span class="p">);</span>
<span class="cp">#endif</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_tx_ctxtdesc</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_do_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">);</span>
<span class="cp">#ifdef CONFIG_IXGBE_HWMON</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_sysfs_exit</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_sysfs_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_IXGBE_HWMON */</span><span class="cp"></span>
<span class="cp">#ifdef IXGBE_FCOE</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_configure_fcoe</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_fso</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="n">tx_ring</span><span class="p">,</span>
		     <span class="k">struct</span> <span class="n">ixgbe_tx_buffer</span> <span class="o">*</span><span class="n">first</span><span class="p">,</span>
		     <span class="n">u8</span> <span class="o">*</span><span class="n">hdr_len</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_cleanup_fcoe</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_fcoe_ddp</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
			  <span class="k">union</span> <span class="n">ixgbe_adv_rx_desc</span> <span class="o">*</span><span class="n">rx_desc</span><span class="p">,</span>
			  <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_fcoe_ddp_get</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">,</span> <span class="n">u16</span> <span class="n">xid</span><span class="p">,</span>
                              <span class="k">struct</span> <span class="n">scatterlist</span> <span class="o">*</span><span class="n">sgl</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sgc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_fcoe_ddp_target</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">,</span> <span class="n">u16</span> <span class="n">xid</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">scatterlist</span> <span class="o">*</span><span class="n">sgl</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sgc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_fcoe_ddp_put</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">,</span> <span class="n">u16</span> <span class="n">xid</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_fcoe_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_fcoe_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">);</span>
<span class="cp">#ifdef CONFIG_IXGBE_DCB</span>
<span class="k">extern</span> <span class="n">u8</span> <span class="n">ixgbe_fcoe_getapp</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u8</span> <span class="n">ixgbe_fcoe_setapp</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="n">u8</span> <span class="n">up</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_IXGBE_DCB */</span><span class="cp"></span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_fcoe_get_wwn</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">,</span> <span class="n">u64</span> <span class="o">*</span><span class="n">wwn</span><span class="p">,</span> <span class="kt">int</span> <span class="n">type</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_fcoe_get_hbainfo</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">netdev_fcoe_hbainfo</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* IXGBE_FCOE */</span><span class="cp"></span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">netdev_queue</span> <span class="o">*</span><span class="nf">txring_txq</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">ixgbe_ring</span> <span class="o">*</span><span class="n">ring</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">netdev_get_tx_queue</span><span class="p">(</span><span class="n">ring</span><span class="o">-&gt;</span><span class="n">netdev</span><span class="p">,</span> <span class="n">ring</span><span class="o">-&gt;</span><span class="n">queue_index</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#ifdef CONFIG_IXGBE_PTP</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_ptp_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_ptp_stop</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_ptp_overflow_check</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_ptp_tx_hwtstamp</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_q_vector</span> <span class="o">*</span><span class="n">q_vector</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_ptp_rx_hwtstamp</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_q_vector</span> <span class="o">*</span><span class="n">q_vector</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ixgbe_ptp_hwtstamp_ioctl</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">ifreq</span> <span class="o">*</span><span class="n">ifr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cmd</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_ptp_start_cyclecounter</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ixgbe_ptp_check_pps_event</span><span class="p">(</span><span class="k">struct</span> <span class="n">ixgbe_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="n">u32</span> <span class="n">eicr</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_IXGBE_PTP */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* _IXGBE_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
