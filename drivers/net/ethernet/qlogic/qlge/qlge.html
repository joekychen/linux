<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › ethernet › qlogic › qlge › qlge.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>qlge.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * QLogic QLA41xx NIC HBA Driver</span>
<span class="cm"> * Copyright (c)  2003-2006 QLogic Corporation</span>
<span class="cm"> *</span>
<span class="cm"> * See LICENSE.qlge for copyright and licensing details.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _QLGE_H_</span>
<span class="cp">#define _QLGE_H_</span>

<span class="cp">#include &lt;linux/interrupt.h&gt;</span>
<span class="cp">#include &lt;linux/pci.h&gt;</span>
<span class="cp">#include &lt;linux/netdevice.h&gt;</span>
<span class="cp">#include &lt;linux/rtnetlink.h&gt;</span>
<span class="cp">#include &lt;linux/if_vlan.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * General definitions...</span>
<span class="cm"> */</span>
<span class="cp">#define DRV_NAME  	&quot;qlge&quot;</span>
<span class="cp">#define DRV_STRING 	&quot;QLogic 10 Gigabit PCI-E Ethernet Driver &quot;</span>
<span class="cp">#define DRV_VERSION	&quot;v1.00.00.30.00.00-01&quot;</span>

<span class="cp">#define WQ_ADDR_ALIGN	0x3	</span><span class="cm">/* 4 byte alignment */</span><span class="cp"></span>

<span class="cp">#define QLGE_VENDOR_ID    0x1077</span>
<span class="cp">#define QLGE_DEVICE_ID_8012	0x8012</span>
<span class="cp">#define QLGE_DEVICE_ID_8000	0x8000</span>
<span class="cp">#define MAX_CPUS 8</span>
<span class="cp">#define MAX_TX_RINGS MAX_CPUS</span>
<span class="cp">#define MAX_RX_RINGS ((MAX_CPUS * 2) + 1)</span>

<span class="cp">#define NUM_TX_RING_ENTRIES	256</span>
<span class="cp">#define NUM_RX_RING_ENTRIES	256</span>

<span class="cp">#define NUM_SMALL_BUFFERS   512</span>
<span class="cp">#define NUM_LARGE_BUFFERS   512</span>
<span class="cp">#define DB_PAGE_SIZE 4096</span>

<span class="cm">/* Calculate the number of (4k) pages required to</span>
<span class="cm"> * contain a buffer queue of the given length.</span>
<span class="cm"> */</span>
<span class="cp">#define MAX_DB_PAGES_PER_BQ(x) \</span>
<span class="cp">		(((x * sizeof(u64)) / DB_PAGE_SIZE) + \</span>
<span class="cp">		(((x * sizeof(u64)) % DB_PAGE_SIZE) ? 1 : 0))</span>

<span class="cp">#define RX_RING_SHADOW_SPACE	(sizeof(u64) + \</span>
<span class="cp">		MAX_DB_PAGES_PER_BQ(NUM_SMALL_BUFFERS) * sizeof(u64) + \</span>
<span class="cp">		MAX_DB_PAGES_PER_BQ(NUM_LARGE_BUFFERS) * sizeof(u64))</span>
<span class="cp">#define LARGE_BUFFER_MAX_SIZE 8192</span>
<span class="cp">#define LARGE_BUFFER_MIN_SIZE 2048</span>

<span class="cp">#define MAX_CQ 128</span>
<span class="cp">#define DFLT_COALESCE_WAIT 100	</span><span class="cm">/* 100 usec wait for coalescing */</span><span class="cp"></span>
<span class="cp">#define MAX_INTER_FRAME_WAIT 10	</span><span class="cm">/* 10 usec max interframe-wait for coalescing */</span><span class="cp"></span>
<span class="cp">#define DFLT_INTER_FRAME_WAIT (MAX_INTER_FRAME_WAIT/2)</span>
<span class="cp">#define UDELAY_COUNT 3</span>
<span class="cp">#define UDELAY_DELAY 100</span>


<span class="cp">#define TX_DESC_PER_IOCB 8</span>

<span class="cp">#if ((MAX_SKB_FRAGS - TX_DESC_PER_IOCB) + 2) &gt; 0</span>
<span class="cp">#define TX_DESC_PER_OAL ((MAX_SKB_FRAGS - TX_DESC_PER_IOCB) + 2)</span>
<span class="cp">#else </span><span class="cm">/* all other page sizes */</span><span class="cp"></span>
<span class="cp">#define TX_DESC_PER_OAL 0</span>
<span class="cp">#endif</span>

<span class="cm">/* Word shifting for converting 64-bit</span>
<span class="cm"> * address to a series of 16-bit words.</span>
<span class="cm"> * This is used for some MPI firmware</span>
<span class="cm"> * mailbox commands.</span>
<span class="cm"> */</span>
<span class="cp">#define LSW(x)  ((u16)(x))</span>
<span class="cp">#define MSW(x)  ((u16)((u32)(x) &gt;&gt; 16))</span>
<span class="cp">#define LSD(x)  ((u32)((u64)(x)))</span>
<span class="cp">#define MSD(x)  ((u32)((((u64)(x)) &gt;&gt; 32)))</span>

<span class="cm">/* MPI test register definitions. This register</span>
<span class="cm"> * is used for determining alternate NIC function&#39;s</span>
<span class="cm"> * PCI-&gt;func number.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">MPI_TEST_FUNC_PORT_CFG</span> <span class="o">=</span> <span class="mh">0x1002</span><span class="p">,</span>
	<span class="n">MPI_TEST_FUNC_PRB_CTL</span> <span class="o">=</span> <span class="mh">0x100e</span><span class="p">,</span>
		<span class="n">MPI_TEST_FUNC_PRB_EN</span> <span class="o">=</span> <span class="mh">0x18a20000</span><span class="p">,</span>
	<span class="n">MPI_TEST_FUNC_RST_STS</span> <span class="o">=</span> <span class="mh">0x100a</span><span class="p">,</span>
		<span class="n">MPI_TEST_FUNC_RST_FRC</span> <span class="o">=</span> <span class="mh">0x00000003</span><span class="p">,</span>
	<span class="n">MPI_TEST_NIC_FUNC_MASK</span> <span class="o">=</span> <span class="mh">0x00000007</span><span class="p">,</span>
	<span class="n">MPI_TEST_NIC1_FUNCTION_ENABLE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">MPI_TEST_NIC1_FUNCTION_MASK</span> <span class="o">=</span> <span class="mh">0x0000000e</span><span class="p">,</span>
	<span class="n">MPI_TEST_NIC1_FUNC_SHIFT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">MPI_TEST_NIC2_FUNCTION_ENABLE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">),</span>
	<span class="n">MPI_TEST_NIC2_FUNCTION_MASK</span> <span class="o">=</span> <span class="mh">0x000000e0</span><span class="p">,</span>
	<span class="n">MPI_TEST_NIC2_FUNC_SHIFT</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">MPI_TEST_FC1_FUNCTION_ENABLE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">),</span>
	<span class="n">MPI_TEST_FC1_FUNCTION_MASK</span>	<span class="o">=</span> <span class="mh">0x00000e00</span><span class="p">,</span>
	<span class="n">MPI_TEST_FC1_FUNCTION_SHIFT</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">MPI_TEST_FC2_FUNCTION_ENABLE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">12</span><span class="p">),</span>
	<span class="n">MPI_TEST_FC2_FUNCTION_MASK</span> <span class="o">=</span> <span class="mh">0x0000e000</span><span class="p">,</span>
	<span class="n">MPI_TEST_FC2_FUNCTION_SHIFT</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>

	<span class="n">MPI_NIC_READ</span> <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
	<span class="n">MPI_NIC_REG_BLOCK</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
	<span class="n">MPI_NIC_FUNCTION_SHIFT</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Processor Address Register (PROC_ADDR) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>

	<span class="cm">/* Misc. stuff */</span>
	<span class="n">MAILBOX_COUNT</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">MAILBOX_TIMEOUT</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>

	<span class="n">PROC_ADDR_RDY</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">31</span><span class="p">),</span>
	<span class="n">PROC_ADDR_R</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">30</span><span class="p">),</span>
	<span class="n">PROC_ADDR_ERR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">29</span><span class="p">),</span>
	<span class="n">PROC_ADDR_DA</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">28</span><span class="p">),</span>
	<span class="n">PROC_ADDR_FUNC0_MBI</span> <span class="o">=</span> <span class="mh">0x00001180</span><span class="p">,</span>
	<span class="n">PROC_ADDR_FUNC0_MBO</span> <span class="o">=</span> <span class="p">(</span><span class="n">PROC_ADDR_FUNC0_MBI</span> <span class="o">+</span> <span class="n">MAILBOX_COUNT</span><span class="p">),</span>
	<span class="n">PROC_ADDR_FUNC0_CTL</span> <span class="o">=</span> <span class="mh">0x000011a1</span><span class="p">,</span>
	<span class="n">PROC_ADDR_FUNC2_MBI</span> <span class="o">=</span> <span class="mh">0x00001280</span><span class="p">,</span>
	<span class="n">PROC_ADDR_FUNC2_MBO</span> <span class="o">=</span> <span class="p">(</span><span class="n">PROC_ADDR_FUNC2_MBI</span> <span class="o">+</span> <span class="n">MAILBOX_COUNT</span><span class="p">),</span>
	<span class="n">PROC_ADDR_FUNC2_CTL</span> <span class="o">=</span> <span class="mh">0x000012a1</span><span class="p">,</span>
	<span class="n">PROC_ADDR_MPI_RISC</span> <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
	<span class="n">PROC_ADDR_MDE</span> <span class="o">=</span> <span class="mh">0x00010000</span><span class="p">,</span>
	<span class="n">PROC_ADDR_REGBLOCK</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
	<span class="n">PROC_ADDR_RISC_REG</span> <span class="o">=</span> <span class="mh">0x00030000</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * System Register (SYS) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">SYS_EFE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SYS_FAE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">SYS_MDC</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span>
	<span class="n">SYS_DST</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">),</span>
	<span class="n">SYS_DWC</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">),</span>
	<span class="n">SYS_EVW</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span>
	<span class="n">SYS_OMP_DLY_MASK</span> <span class="o">=</span> <span class="mh">0x3f000000</span><span class="p">,</span>
	<span class="cm">/*</span>
<span class="cm">	 * There are no values defined as of edit #15.</span>
<span class="cm">	 */</span>
	<span class="n">SYS_ODI</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">14</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Reset/Failover Register (RST_FO) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">RST_FO_TFO</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">RST_FO_RR_MASK</span> <span class="o">=</span> <span class="mh">0x00060000</span><span class="p">,</span>
	<span class="n">RST_FO_RR_CQ_CAM</span> <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
	<span class="n">RST_FO_RR_DROP</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
	<span class="n">RST_FO_RR_DQ</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
	<span class="n">RST_FO_RR_RCV_FUNC_CQ</span> <span class="o">=</span> <span class="mh">0x00000006</span><span class="p">,</span>
	<span class="n">RST_FO_FRB</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">12</span><span class="p">),</span>
	<span class="n">RST_FO_MOP</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">13</span><span class="p">),</span>
	<span class="n">RST_FO_REG</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">14</span><span class="p">),</span>
	<span class="n">RST_FO_FR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">15</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Function Specific Control Register (FSC) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">FSC_DBRST_MASK</span> <span class="o">=</span> <span class="mh">0x00070000</span><span class="p">,</span>
	<span class="n">FSC_DBRST_256</span> <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
	<span class="n">FSC_DBRST_512</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
	<span class="n">FSC_DBRST_768</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
	<span class="n">FSC_DBRST_1024</span> <span class="o">=</span> <span class="mh">0x00000003</span><span class="p">,</span>
	<span class="n">FSC_DBL_MASK</span> <span class="o">=</span> <span class="mh">0x00180000</span><span class="p">,</span>
	<span class="n">FSC_DBL_DBRST</span> <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
	<span class="n">FSC_DBL_MAX_PLD</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
	<span class="n">FSC_DBL_MAX_BRST</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
	<span class="n">FSC_DBL_128_BYTES</span> <span class="o">=</span> <span class="mh">0x00000018</span><span class="p">,</span>
	<span class="n">FSC_EC</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span>
	<span class="n">FSC_EPC_MASK</span> <span class="o">=</span> <span class="mh">0x00c00000</span><span class="p">,</span>
	<span class="n">FSC_EPC_INBOUND</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">),</span>
	<span class="n">FSC_EPC_OUTBOUND</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">),</span>
	<span class="n">FSC_VM_PAGESIZE_MASK</span> <span class="o">=</span> <span class="mh">0x07000000</span><span class="p">,</span>
	<span class="n">FSC_VM_PAGE_2K</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
	<span class="n">FSC_VM_PAGE_4K</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
	<span class="n">FSC_VM_PAGE_8K</span> <span class="o">=</span> <span class="mh">0x00000300</span><span class="p">,</span>
	<span class="n">FSC_VM_PAGE_64K</span> <span class="o">=</span> <span class="mh">0x00000600</span><span class="p">,</span>
	<span class="n">FSC_SH</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">11</span><span class="p">),</span>
	<span class="n">FSC_DSB</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">12</span><span class="p">),</span>
	<span class="n">FSC_STE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">13</span><span class="p">),</span>
	<span class="n">FSC_FE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">15</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Host Command Status Register (CSR) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">CSR_ERR_STS_MASK</span> <span class="o">=</span> <span class="mh">0x0000003f</span><span class="p">,</span>
	<span class="cm">/*</span>
<span class="cm">	 * There are no valued defined as of edit #15.</span>
<span class="cm">	 */</span>
	<span class="n">CSR_RR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">),</span>
	<span class="n">CSR_HRI</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">9</span><span class="p">),</span>
	<span class="n">CSR_RP</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span><span class="p">),</span>
	<span class="n">CSR_CMD_PARM_SHIFT</span> <span class="o">=</span> <span class="mi">22</span><span class="p">,</span>
	<span class="n">CSR_CMD_NOP</span> <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
	<span class="n">CSR_CMD_SET_RST</span> <span class="o">=</span> <span class="mh">0x10000000</span><span class="p">,</span>
	<span class="n">CSR_CMD_CLR_RST</span> <span class="o">=</span> <span class="mh">0x20000000</span><span class="p">,</span>
	<span class="n">CSR_CMD_SET_PAUSE</span> <span class="o">=</span> <span class="mh">0x30000000</span><span class="p">,</span>
	<span class="n">CSR_CMD_CLR_PAUSE</span> <span class="o">=</span> <span class="mh">0x40000000</span><span class="p">,</span>
	<span class="n">CSR_CMD_SET_H2R_INT</span> <span class="o">=</span> <span class="mh">0x50000000</span><span class="p">,</span>
	<span class="n">CSR_CMD_CLR_H2R_INT</span> <span class="o">=</span> <span class="mh">0x60000000</span><span class="p">,</span>
	<span class="n">CSR_CMD_PAR_EN</span> <span class="o">=</span> <span class="mh">0x70000000</span><span class="p">,</span>
	<span class="n">CSR_CMD_SET_BAD_PAR</span> <span class="o">=</span> <span class="mh">0x80000000</span><span class="p">,</span>
	<span class="n">CSR_CMD_CLR_BAD_PAR</span> <span class="o">=</span> <span class="mh">0x90000000</span><span class="p">,</span>
	<span class="n">CSR_CMD_CLR_R2PCI_INT</span> <span class="o">=</span> <span class="mh">0xa0000000</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Configuration Register (CFG) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">CFG_LRQ</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">CFG_DRQ</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">CFG_LR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span>
	<span class="n">CFG_DR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">),</span>
	<span class="n">CFG_LE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span>
	<span class="n">CFG_LCQ</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">),</span>
	<span class="n">CFG_DCQ</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">),</span>
	<span class="n">CFG_Q_SHIFT</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">CFG_Q_MASK</span> <span class="o">=</span> <span class="mh">0x7f000000</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Status Register (STS) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">STS_FE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">STS_PI</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">STS_PL0</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span>
	<span class="n">STS_PL1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">),</span>
	<span class="n">STS_PI0</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">),</span>
	<span class="n">STS_PI1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span>
	<span class="n">STS_FUNC_ID_MASK</span> <span class="o">=</span> <span class="mh">0x000000c0</span><span class="p">,</span>
	<span class="n">STS_FUNC_ID_SHIFT</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">STS_F0E</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">),</span>
	<span class="n">STS_F1E</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">9</span><span class="p">),</span>
	<span class="n">STS_F2E</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span><span class="p">),</span>
	<span class="n">STS_F3E</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">11</span><span class="p">),</span>
	<span class="n">STS_NFE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">12</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Interrupt Enable Register (INTR_EN) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">INTR_EN_INTR_MASK</span> <span class="o">=</span> <span class="mh">0x007f0000</span><span class="p">,</span>
	<span class="n">INTR_EN_TYPE_MASK</span> <span class="o">=</span> <span class="mh">0x03000000</span><span class="p">,</span>
	<span class="n">INTR_EN_TYPE_ENABLE</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
	<span class="n">INTR_EN_TYPE_DISABLE</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
	<span class="n">INTR_EN_TYPE_READ</span> <span class="o">=</span> <span class="mh">0x00000300</span><span class="p">,</span>
	<span class="n">INTR_EN_IHD</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">13</span><span class="p">),</span>
	<span class="n">INTR_EN_IHD_MASK</span> <span class="o">=</span> <span class="p">(</span><span class="n">INTR_EN_IHD</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">),</span>
	<span class="n">INTR_EN_EI</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">14</span><span class="p">),</span>
	<span class="n">INTR_EN_EN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">15</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Interrupt Mask Register (INTR_MASK) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">INTR_MASK_PI</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">INTR_MASK_HL0</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">INTR_MASK_LH0</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span>
	<span class="n">INTR_MASK_HL1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">),</span>
	<span class="n">INTR_MASK_LH1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">),</span>
	<span class="n">INTR_MASK_SE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span>
	<span class="n">INTR_MASK_LSC</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">),</span>
	<span class="n">INTR_MASK_MC</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">),</span>
	<span class="n">INTR_MASK_LINK_IRQS</span> <span class="o">=</span> <span class="n">INTR_MASK_LSC</span> <span class="o">|</span> <span class="n">INTR_MASK_SE</span> <span class="o">|</span> <span class="n">INTR_MASK_MC</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Register (REV_ID) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">REV_ID_MASK</span> <span class="o">=</span> <span class="mh">0x0000000f</span><span class="p">,</span>
	<span class="n">REV_ID_NICROLL_SHIFT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">REV_ID_NICREV_SHIFT</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">REV_ID_XGROLL_SHIFT</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">REV_ID_XGREV_SHIFT</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">REV_ID_CHIPREV_SHIFT</span> <span class="o">=</span> <span class="mi">28</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Force ECC Error Register (FRC_ECC_ERR) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">FRC_ECC_ERR_VW</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">12</span><span class="p">),</span>
	<span class="n">FRC_ECC_ERR_VB</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">13</span><span class="p">),</span>
	<span class="n">FRC_ECC_ERR_NI</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">14</span><span class="p">),</span>
	<span class="n">FRC_ECC_ERR_NO</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">15</span><span class="p">),</span>
	<span class="n">FRC_ECC_PFE_SHIFT</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">FRC_ECC_ERR_DO</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">18</span><span class="p">),</span>
	<span class="n">FRC_ECC_P14</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">19</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Error Status Register (ERR_STS) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">ERR_STS_NOF</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">ERR_STS_NIF</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">ERR_STS_DRP</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span>
	<span class="n">ERR_STS_XGP</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">),</span>
	<span class="n">ERR_STS_FOU</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">),</span>
	<span class="n">ERR_STS_FOC</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span>
	<span class="n">ERR_STS_FOF</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">),</span>
	<span class="n">ERR_STS_FIU</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">),</span>
	<span class="n">ERR_STS_FIC</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">),</span>
	<span class="n">ERR_STS_FIF</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">9</span><span class="p">),</span>
	<span class="n">ERR_STS_MOF</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span><span class="p">),</span>
	<span class="n">ERR_STS_TA</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">11</span><span class="p">),</span>
	<span class="n">ERR_STS_MA</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">12</span><span class="p">),</span>
	<span class="n">ERR_STS_MPE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">13</span><span class="p">),</span>
	<span class="n">ERR_STS_SCE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">14</span><span class="p">),</span>
	<span class="n">ERR_STS_STE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">15</span><span class="p">),</span>
	<span class="n">ERR_STS_FOW</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">),</span>
	<span class="n">ERR_STS_UE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">17</span><span class="p">),</span>
	<span class="n">ERR_STS_MCH</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">26</span><span class="p">),</span>
	<span class="n">ERR_STS_LOC_SHIFT</span> <span class="o">=</span> <span class="mi">27</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  RAM Debug Address Register (RAM_DBG_ADDR) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">RAM_DBG_ADDR_FW</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">30</span><span class="p">),</span>
	<span class="n">RAM_DBG_ADDR_FR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">31</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Semaphore Register (SEM) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * Example:</span>
<span class="cm">	 * reg = SEM_XGMAC0_MASK | (SEM_SET &lt;&lt; SEM_XGMAC0_SHIFT)</span>
<span class="cm">	 */</span>
	<span class="n">SEM_CLEAR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">SEM_SET</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">SEM_FORCE</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">SEM_XGMAC0_SHIFT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">SEM_XGMAC1_SHIFT</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">SEM_ICB_SHIFT</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">SEM_MAC_ADDR_SHIFT</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">SEM_FLASH_SHIFT</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">SEM_PROBE_SHIFT</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">SEM_RT_IDX_SHIFT</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">SEM_PROC_REG_SHIFT</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
	<span class="n">SEM_XGMAC0_MASK</span> <span class="o">=</span> <span class="mh">0x00030000</span><span class="p">,</span>
	<span class="n">SEM_XGMAC1_MASK</span> <span class="o">=</span> <span class="mh">0x000c0000</span><span class="p">,</span>
	<span class="n">SEM_ICB_MASK</span> <span class="o">=</span> <span class="mh">0x00300000</span><span class="p">,</span>
	<span class="n">SEM_MAC_ADDR_MASK</span> <span class="o">=</span> <span class="mh">0x00c00000</span><span class="p">,</span>
	<span class="n">SEM_FLASH_MASK</span> <span class="o">=</span> <span class="mh">0x03000000</span><span class="p">,</span>
	<span class="n">SEM_PROBE_MASK</span> <span class="o">=</span> <span class="mh">0x0c000000</span><span class="p">,</span>
	<span class="n">SEM_RT_IDX_MASK</span> <span class="o">=</span> <span class="mh">0x30000000</span><span class="p">,</span>
	<span class="n">SEM_PROC_REG_MASK</span> <span class="o">=</span> <span class="mh">0xc0000000</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  10G MAC Address  Register (XGMAC_ADDR) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">XGMAC_ADDR_RDY</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">31</span><span class="p">),</span>
	<span class="n">XGMAC_ADDR_R</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">30</span><span class="p">),</span>
	<span class="n">XGMAC_ADDR_XME</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">29</span><span class="p">),</span>

	<span class="cm">/* XGMAC control registers */</span>
	<span class="n">PAUSE_SRC_LO</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
	<span class="n">PAUSE_SRC_HI</span> <span class="o">=</span> <span class="mh">0x00000104</span><span class="p">,</span>
	<span class="n">GLOBAL_CFG</span> <span class="o">=</span> <span class="mh">0x00000108</span><span class="p">,</span>
	<span class="n">GLOBAL_CFG_RESET</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">GLOBAL_CFG_JUMBO</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">),</span>
	<span class="n">GLOBAL_CFG_TX_STAT_EN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span><span class="p">),</span>
	<span class="n">GLOBAL_CFG_RX_STAT_EN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">11</span><span class="p">),</span>
	<span class="n">TX_CFG</span> <span class="o">=</span> <span class="mh">0x0000010c</span><span class="p">,</span>
	<span class="n">TX_CFG_RESET</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">TX_CFG_EN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">TX_CFG_PREAM</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span>
	<span class="n">RX_CFG</span> <span class="o">=</span> <span class="mh">0x00000110</span><span class="p">,</span>
	<span class="n">RX_CFG_RESET</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">RX_CFG_EN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">RX_CFG_PREAM</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span>
	<span class="n">FLOW_CTL</span> <span class="o">=</span> <span class="mh">0x0000011c</span><span class="p">,</span>
	<span class="n">PAUSE_OPCODE</span> <span class="o">=</span> <span class="mh">0x00000120</span><span class="p">,</span>
	<span class="n">PAUSE_TIMER</span> <span class="o">=</span> <span class="mh">0x00000124</span><span class="p">,</span>
	<span class="n">PAUSE_FRM_DEST_LO</span> <span class="o">=</span> <span class="mh">0x00000128</span><span class="p">,</span>
	<span class="n">PAUSE_FRM_DEST_HI</span> <span class="o">=</span> <span class="mh">0x0000012c</span><span class="p">,</span>
	<span class="n">MAC_TX_PARAMS</span> <span class="o">=</span> <span class="mh">0x00000134</span><span class="p">,</span>
	<span class="n">MAC_TX_PARAMS_JUMBO</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">31</span><span class="p">),</span>
	<span class="n">MAC_TX_PARAMS_SIZE_SHIFT</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">MAC_RX_PARAMS</span> <span class="o">=</span> <span class="mh">0x00000138</span><span class="p">,</span>
	<span class="n">MAC_SYS_INT</span> <span class="o">=</span> <span class="mh">0x00000144</span><span class="p">,</span>
	<span class="n">MAC_SYS_INT_MASK</span> <span class="o">=</span> <span class="mh">0x00000148</span><span class="p">,</span>
	<span class="n">MAC_MGMT_INT</span> <span class="o">=</span> <span class="mh">0x0000014c</span><span class="p">,</span>
	<span class="n">MAC_MGMT_IN_MASK</span> <span class="o">=</span> <span class="mh">0x00000150</span><span class="p">,</span>
	<span class="n">EXT_ARB_MODE</span> <span class="o">=</span> <span class="mh">0x000001fc</span><span class="p">,</span>

	<span class="cm">/* XGMAC TX statistics  registers */</span>
	<span class="n">TX_PKTS</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
	<span class="n">TX_BYTES</span> <span class="o">=</span> <span class="mh">0x00000208</span><span class="p">,</span>
	<span class="n">TX_MCAST_PKTS</span> <span class="o">=</span> <span class="mh">0x00000210</span><span class="p">,</span>
	<span class="n">TX_BCAST_PKTS</span> <span class="o">=</span> <span class="mh">0x00000218</span><span class="p">,</span>
	<span class="n">TX_UCAST_PKTS</span> <span class="o">=</span> <span class="mh">0x00000220</span><span class="p">,</span>
	<span class="n">TX_CTL_PKTS</span> <span class="o">=</span> <span class="mh">0x00000228</span><span class="p">,</span>
	<span class="n">TX_PAUSE_PKTS</span> <span class="o">=</span> <span class="mh">0x00000230</span><span class="p">,</span>
	<span class="n">TX_64_PKT</span> <span class="o">=</span> <span class="mh">0x00000238</span><span class="p">,</span>
	<span class="n">TX_65_TO_127_PKT</span> <span class="o">=</span> <span class="mh">0x00000240</span><span class="p">,</span>
	<span class="n">TX_128_TO_255_PKT</span> <span class="o">=</span> <span class="mh">0x00000248</span><span class="p">,</span>
	<span class="n">TX_256_511_PKT</span> <span class="o">=</span> <span class="mh">0x00000250</span><span class="p">,</span>
	<span class="n">TX_512_TO_1023_PKT</span> <span class="o">=</span> <span class="mh">0x00000258</span><span class="p">,</span>
	<span class="n">TX_1024_TO_1518_PKT</span> <span class="o">=</span> <span class="mh">0x00000260</span><span class="p">,</span>
	<span class="n">TX_1519_TO_MAX_PKT</span> <span class="o">=</span> <span class="mh">0x00000268</span><span class="p">,</span>
	<span class="n">TX_UNDERSIZE_PKT</span> <span class="o">=</span> <span class="mh">0x00000270</span><span class="p">,</span>
	<span class="n">TX_OVERSIZE_PKT</span> <span class="o">=</span> <span class="mh">0x00000278</span><span class="p">,</span>

	<span class="cm">/* XGMAC statistics control registers */</span>
	<span class="n">RX_HALF_FULL_DET</span> <span class="o">=</span> <span class="mh">0x000002a0</span><span class="p">,</span>
	<span class="n">TX_HALF_FULL_DET</span> <span class="o">=</span> <span class="mh">0x000002a4</span><span class="p">,</span>
	<span class="n">RX_OVERFLOW_DET</span> <span class="o">=</span> <span class="mh">0x000002a8</span><span class="p">,</span>
	<span class="n">TX_OVERFLOW_DET</span> <span class="o">=</span> <span class="mh">0x000002ac</span><span class="p">,</span>
	<span class="n">RX_HALF_FULL_MASK</span> <span class="o">=</span> <span class="mh">0x000002b0</span><span class="p">,</span>
	<span class="n">TX_HALF_FULL_MASK</span> <span class="o">=</span> <span class="mh">0x000002b4</span><span class="p">,</span>
	<span class="n">RX_OVERFLOW_MASK</span> <span class="o">=</span> <span class="mh">0x000002b8</span><span class="p">,</span>
	<span class="n">TX_OVERFLOW_MASK</span> <span class="o">=</span> <span class="mh">0x000002bc</span><span class="p">,</span>
	<span class="n">STAT_CNT_CTL</span> <span class="o">=</span> <span class="mh">0x000002c0</span><span class="p">,</span>
	<span class="n">STAT_CNT_CTL_CLEAR_TX</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">STAT_CNT_CTL_CLEAR_RX</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">AUX_RX_HALF_FULL_DET</span> <span class="o">=</span> <span class="mh">0x000002d0</span><span class="p">,</span>
	<span class="n">AUX_TX_HALF_FULL_DET</span> <span class="o">=</span> <span class="mh">0x000002d4</span><span class="p">,</span>
	<span class="n">AUX_RX_OVERFLOW_DET</span> <span class="o">=</span> <span class="mh">0x000002d8</span><span class="p">,</span>
	<span class="n">AUX_TX_OVERFLOW_DET</span> <span class="o">=</span> <span class="mh">0x000002dc</span><span class="p">,</span>
	<span class="n">AUX_RX_HALF_FULL_MASK</span> <span class="o">=</span> <span class="mh">0x000002f0</span><span class="p">,</span>
	<span class="n">AUX_TX_HALF_FULL_MASK</span> <span class="o">=</span> <span class="mh">0x000002f4</span><span class="p">,</span>
	<span class="n">AUX_RX_OVERFLOW_MASK</span> <span class="o">=</span> <span class="mh">0x000002f8</span><span class="p">,</span>
	<span class="n">AUX_TX_OVERFLOW_MASK</span> <span class="o">=</span> <span class="mh">0x000002fc</span><span class="p">,</span>

	<span class="cm">/* XGMAC RX statistics  registers */</span>
	<span class="n">RX_BYTES</span> <span class="o">=</span> <span class="mh">0x00000300</span><span class="p">,</span>
	<span class="n">RX_BYTES_OK</span> <span class="o">=</span> <span class="mh">0x00000308</span><span class="p">,</span>
	<span class="n">RX_PKTS</span> <span class="o">=</span> <span class="mh">0x00000310</span><span class="p">,</span>
	<span class="n">RX_PKTS_OK</span> <span class="o">=</span> <span class="mh">0x00000318</span><span class="p">,</span>
	<span class="n">RX_BCAST_PKTS</span> <span class="o">=</span> <span class="mh">0x00000320</span><span class="p">,</span>
	<span class="n">RX_MCAST_PKTS</span> <span class="o">=</span> <span class="mh">0x00000328</span><span class="p">,</span>
	<span class="n">RX_UCAST_PKTS</span> <span class="o">=</span> <span class="mh">0x00000330</span><span class="p">,</span>
	<span class="n">RX_UNDERSIZE_PKTS</span> <span class="o">=</span> <span class="mh">0x00000338</span><span class="p">,</span>
	<span class="n">RX_OVERSIZE_PKTS</span> <span class="o">=</span> <span class="mh">0x00000340</span><span class="p">,</span>
	<span class="n">RX_JABBER_PKTS</span> <span class="o">=</span> <span class="mh">0x00000348</span><span class="p">,</span>
	<span class="n">RX_UNDERSIZE_FCERR_PKTS</span> <span class="o">=</span> <span class="mh">0x00000350</span><span class="p">,</span>
	<span class="n">RX_DROP_EVENTS</span> <span class="o">=</span> <span class="mh">0x00000358</span><span class="p">,</span>
	<span class="n">RX_FCERR_PKTS</span> <span class="o">=</span> <span class="mh">0x00000360</span><span class="p">,</span>
	<span class="n">RX_ALIGN_ERR</span> <span class="o">=</span> <span class="mh">0x00000368</span><span class="p">,</span>
	<span class="n">RX_SYMBOL_ERR</span> <span class="o">=</span> <span class="mh">0x00000370</span><span class="p">,</span>
	<span class="n">RX_MAC_ERR</span> <span class="o">=</span> <span class="mh">0x00000378</span><span class="p">,</span>
	<span class="n">RX_CTL_PKTS</span> <span class="o">=</span> <span class="mh">0x00000380</span><span class="p">,</span>
	<span class="n">RX_PAUSE_PKTS</span> <span class="o">=</span> <span class="mh">0x00000388</span><span class="p">,</span>
	<span class="n">RX_64_PKTS</span> <span class="o">=</span> <span class="mh">0x00000390</span><span class="p">,</span>
	<span class="n">RX_65_TO_127_PKTS</span> <span class="o">=</span> <span class="mh">0x00000398</span><span class="p">,</span>
	<span class="n">RX_128_255_PKTS</span> <span class="o">=</span> <span class="mh">0x000003a0</span><span class="p">,</span>
	<span class="n">RX_256_511_PKTS</span> <span class="o">=</span> <span class="mh">0x000003a8</span><span class="p">,</span>
	<span class="n">RX_512_TO_1023_PKTS</span> <span class="o">=</span> <span class="mh">0x000003b0</span><span class="p">,</span>
	<span class="n">RX_1024_TO_1518_PKTS</span> <span class="o">=</span> <span class="mh">0x000003b8</span><span class="p">,</span>
	<span class="n">RX_1519_TO_MAX_PKTS</span> <span class="o">=</span> <span class="mh">0x000003c0</span><span class="p">,</span>
	<span class="n">RX_LEN_ERR_PKTS</span> <span class="o">=</span> <span class="mh">0x000003c8</span><span class="p">,</span>

	<span class="cm">/* XGMAC MDIO control registers */</span>
	<span class="n">MDIO_TX_DATA</span> <span class="o">=</span> <span class="mh">0x00000400</span><span class="p">,</span>
	<span class="n">MDIO_RX_DATA</span> <span class="o">=</span> <span class="mh">0x00000410</span><span class="p">,</span>
	<span class="n">MDIO_CMD</span> <span class="o">=</span> <span class="mh">0x00000420</span><span class="p">,</span>
	<span class="n">MDIO_PHY_ADDR</span> <span class="o">=</span> <span class="mh">0x00000430</span><span class="p">,</span>
	<span class="n">MDIO_PORT</span> <span class="o">=</span> <span class="mh">0x00000440</span><span class="p">,</span>
	<span class="n">MDIO_STATUS</span> <span class="o">=</span> <span class="mh">0x00000450</span><span class="p">,</span>

	<span class="n">XGMAC_REGISTER_END</span> <span class="o">=</span> <span class="mh">0x00000740</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Enhanced Transmission Schedule Registers (NIC_ETS,CNA_ETS) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">ETS_QUEUE_SHIFT</span> <span class="o">=</span> <span class="mi">29</span><span class="p">,</span>
	<span class="n">ETS_REF</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">26</span><span class="p">),</span>
	<span class="n">ETS_RS</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">27</span><span class="p">),</span>
	<span class="n">ETS_P</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">28</span><span class="p">),</span>
	<span class="n">ETS_FC_COS_SHIFT</span> <span class="o">=</span> <span class="mi">23</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Flash Address Register (FLASH_ADDR) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">FLASH_ADDR_RDY</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">31</span><span class="p">),</span>
	<span class="n">FLASH_ADDR_R</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">30</span><span class="p">),</span>
	<span class="n">FLASH_ADDR_ERR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">29</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Stop CQ Processing Register (CQ_STOP) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">CQ_STOP_QUEUE_MASK</span> <span class="o">=</span> <span class="p">(</span><span class="mh">0x007f0000</span><span class="p">),</span>
	<span class="n">CQ_STOP_TYPE_MASK</span> <span class="o">=</span> <span class="p">(</span><span class="mh">0x03000000</span><span class="p">),</span>
	<span class="n">CQ_STOP_TYPE_START</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
	<span class="n">CQ_STOP_TYPE_STOP</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
	<span class="n">CQ_STOP_TYPE_READ</span> <span class="o">=</span> <span class="mh">0x00000300</span><span class="p">,</span>
	<span class="n">CQ_STOP_EN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">15</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  MAC Protocol Address Index Register (MAC_ADDR_IDX) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">MAC_ADDR_IDX_SHIFT</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">MAC_ADDR_TYPE_SHIFT</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">MAC_ADDR_TYPE_COUNT</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">MAC_ADDR_TYPE_MASK</span> <span class="o">=</span> <span class="mh">0x000f0000</span><span class="p">,</span>
	<span class="n">MAC_ADDR_TYPE_CAM_MAC</span> <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
	<span class="n">MAC_ADDR_TYPE_MULTI_MAC</span> <span class="o">=</span> <span class="mh">0x00010000</span><span class="p">,</span>
	<span class="n">MAC_ADDR_TYPE_VLAN</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
	<span class="n">MAC_ADDR_TYPE_MULTI_FLTR</span> <span class="o">=</span> <span class="mh">0x00030000</span><span class="p">,</span>
	<span class="n">MAC_ADDR_TYPE_FC_MAC</span> <span class="o">=</span> <span class="mh">0x00040000</span><span class="p">,</span>
	<span class="n">MAC_ADDR_TYPE_MGMT_MAC</span> <span class="o">=</span> <span class="mh">0x00050000</span><span class="p">,</span>
	<span class="n">MAC_ADDR_TYPE_MGMT_VLAN</span> <span class="o">=</span> <span class="mh">0x00060000</span><span class="p">,</span>
	<span class="n">MAC_ADDR_TYPE_MGMT_V4</span> <span class="o">=</span> <span class="mh">0x00070000</span><span class="p">,</span>
	<span class="n">MAC_ADDR_TYPE_MGMT_V6</span> <span class="o">=</span> <span class="mh">0x00080000</span><span class="p">,</span>
	<span class="n">MAC_ADDR_TYPE_MGMT_TU_DP</span> <span class="o">=</span> <span class="mh">0x00090000</span><span class="p">,</span>
	<span class="n">MAC_ADDR_ADR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">25</span><span class="p">),</span>
	<span class="n">MAC_ADDR_RS</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">26</span><span class="p">),</span>
	<span class="n">MAC_ADDR_E</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">27</span><span class="p">),</span>
	<span class="n">MAC_ADDR_MR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">30</span><span class="p">),</span>
	<span class="n">MAC_ADDR_MW</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">31</span><span class="p">),</span>
	<span class="n">MAX_MULTICAST_ENTRIES</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>

	<span class="cm">/* Entry count and words per entry</span>
<span class="cm">	 * for each address type in the filter.</span>
<span class="cm">	 */</span>
	<span class="n">MAC_ADDR_MAX_CAM_ENTRIES</span> <span class="o">=</span> <span class="mi">512</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_CAM_WCOUNT</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_MULTICAST_ENTRIES</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_MULTICAST_WCOUNT</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_VLAN_ENTRIES</span> <span class="o">=</span> <span class="mi">4096</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_VLAN_WCOUNT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_MCAST_FLTR_ENTRIES</span> <span class="o">=</span> <span class="mi">4096</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_MCAST_FLTR_WCOUNT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_FC_MAC_ENTRIES</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_FC_MAC_WCOUNT</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_MGMT_MAC_ENTRIES</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_MGMT_MAC_WCOUNT</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_MGMT_VLAN_ENTRIES</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_MGMT_VLAN_WCOUNT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_MGMT_V4_ENTRIES</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_MGMT_V4_WCOUNT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_MGMT_V6_ENTRIES</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_MGMT_V6_WCOUNT</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_MGMT_TU_DP_ENTRIES</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">MAC_ADDR_MAX_MGMT_TU_DP_WCOUNT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  MAC Protocol Address Index Register (SPLT_HDR) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">SPLT_HDR_EP</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">31</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  FCoE Receive Configuration Register (FC_RCV_CFG) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">FC_RCV_CFG_ECT</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">15</span><span class="p">),</span>
	<span class="n">FC_RCV_CFG_DFH</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">20</span><span class="p">),</span>
	<span class="n">FC_RCV_CFG_DVF</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">21</span><span class="p">),</span>
	<span class="n">FC_RCV_CFG_RCE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">27</span><span class="p">),</span>
	<span class="n">FC_RCV_CFG_RFE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">28</span><span class="p">),</span>
	<span class="n">FC_RCV_CFG_TEE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">29</span><span class="p">),</span>
	<span class="n">FC_RCV_CFG_TCE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">30</span><span class="p">),</span>
	<span class="n">FC_RCV_CFG_TFE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">31</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  NIC Receive Configuration Register (NIC_RCV_CFG) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">NIC_RCV_CFG_PPE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">NIC_RCV_CFG_VLAN_MASK</span> <span class="o">=</span> <span class="mh">0x00060000</span><span class="p">,</span>
	<span class="n">NIC_RCV_CFG_VLAN_ALL</span> <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
	<span class="n">NIC_RCV_CFG_VLAN_MATCH_ONLY</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
	<span class="n">NIC_RCV_CFG_VLAN_MATCH_AND_NON</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
	<span class="n">NIC_RCV_CFG_VLAN_NONE_AND_NON</span> <span class="o">=</span> <span class="mh">0x00000006</span><span class="p">,</span>
	<span class="n">NIC_RCV_CFG_RV</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">),</span>
	<span class="n">NIC_RCV_CFG_DFQ_MASK</span> <span class="o">=</span> <span class="p">(</span><span class="mh">0x7f000000</span><span class="p">),</span>
	<span class="n">NIC_RCV_CFG_DFQ_SHIFT</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">NIC_RCV_CFG_DFQ</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/* HARDCODE default queue to 0. */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *   Mgmt Receive Configuration Register (MGMT_RCV_CFG) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">MGMT_RCV_CFG_ARP</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">MGMT_RCV_CFG_DHC</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">MGMT_RCV_CFG_DHS</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span>
	<span class="n">MGMT_RCV_CFG_NP</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">),</span>
	<span class="n">MGMT_RCV_CFG_I6N</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">),</span>
	<span class="n">MGMT_RCV_CFG_I6R</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span>
	<span class="n">MGMT_RCV_CFG_DH6</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">),</span>
	<span class="n">MGMT_RCV_CFG_UD1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">),</span>
	<span class="n">MGMT_RCV_CFG_UD0</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">),</span>
	<span class="n">MGMT_RCV_CFG_BCT</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">9</span><span class="p">),</span>
	<span class="n">MGMT_RCV_CFG_MCT</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span><span class="p">),</span>
	<span class="n">MGMT_RCV_CFG_DM</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">11</span><span class="p">),</span>
	<span class="n">MGMT_RCV_CFG_RM</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">12</span><span class="p">),</span>
	<span class="n">MGMT_RCV_CFG_STL</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">13</span><span class="p">),</span>
	<span class="n">MGMT_RCV_CFG_VLAN_MASK</span> <span class="o">=</span> <span class="mh">0xc0000000</span><span class="p">,</span>
	<span class="n">MGMT_RCV_CFG_VLAN_ALL</span> <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
	<span class="n">MGMT_RCV_CFG_VLAN_MATCH_ONLY</span> <span class="o">=</span> <span class="mh">0x00004000</span><span class="p">,</span>
	<span class="n">MGMT_RCV_CFG_VLAN_MATCH_AND_NON</span> <span class="o">=</span> <span class="mh">0x00008000</span><span class="p">,</span>
	<span class="n">MGMT_RCV_CFG_VLAN_NONE_AND_NON</span> <span class="o">=</span> <span class="mh">0x0000c000</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  Routing Index Register (RT_IDX) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">RT_IDX_IDX_SHIFT</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">RT_IDX_TYPE_MASK</span> <span class="o">=</span> <span class="mh">0x000f0000</span><span class="p">,</span>
	<span class="n">RT_IDX_TYPE_SHIFT</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">RT_IDX_TYPE_RT</span> <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
	<span class="n">RT_IDX_TYPE_RT_INV</span> <span class="o">=</span> <span class="mh">0x00010000</span><span class="p">,</span>
	<span class="n">RT_IDX_TYPE_NICQ</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
	<span class="n">RT_IDX_TYPE_NICQ_INV</span> <span class="o">=</span> <span class="mh">0x00030000</span><span class="p">,</span>
	<span class="n">RT_IDX_DST_MASK</span> <span class="o">=</span> <span class="mh">0x00700000</span><span class="p">,</span>
	<span class="n">RT_IDX_DST_RSS</span> <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
	<span class="n">RT_IDX_DST_CAM_Q</span> <span class="o">=</span> <span class="mh">0x00100000</span><span class="p">,</span>
	<span class="n">RT_IDX_DST_COS_Q</span> <span class="o">=</span> <span class="mh">0x00200000</span><span class="p">,</span>
	<span class="n">RT_IDX_DST_DFLT_Q</span> <span class="o">=</span> <span class="mh">0x00300000</span><span class="p">,</span>
	<span class="n">RT_IDX_DST_DEST_Q</span> <span class="o">=</span> <span class="mh">0x00400000</span><span class="p">,</span>
	<span class="n">RT_IDX_RS</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">26</span><span class="p">),</span>
	<span class="n">RT_IDX_E</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">27</span><span class="p">),</span>
	<span class="n">RT_IDX_MR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">30</span><span class="p">),</span>
	<span class="n">RT_IDX_MW</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">31</span><span class="p">),</span>

	<span class="cm">/* Nic Queue format - type 2 bits */</span>
	<span class="n">RT_IDX_BCAST</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">RT_IDX_MCAST</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">RT_IDX_MCAST_MATCH</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span>
	<span class="n">RT_IDX_MCAST_REG_MATCH</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">),</span>
	<span class="n">RT_IDX_MCAST_HASH_MATCH</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">),</span>
	<span class="n">RT_IDX_FC_MACH</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span>
	<span class="n">RT_IDX_ETH_FCOE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">),</span>
	<span class="n">RT_IDX_CAM_HIT</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">),</span>
	<span class="n">RT_IDX_CAM_BIT0</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">),</span>
	<span class="n">RT_IDX_CAM_BIT1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">9</span><span class="p">),</span>
	<span class="n">RT_IDX_VLAN_TAG</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span><span class="p">),</span>
	<span class="n">RT_IDX_VLAN_MATCH</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">11</span><span class="p">),</span>
	<span class="n">RT_IDX_VLAN_FILTER</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">12</span><span class="p">),</span>
	<span class="n">RT_IDX_ETH_SKIP1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">13</span><span class="p">),</span>
	<span class="n">RT_IDX_ETH_SKIP2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">14</span><span class="p">),</span>
	<span class="n">RT_IDX_BCAST_MCAST_MATCH</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">15</span><span class="p">),</span>
	<span class="n">RT_IDX_802_3</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">),</span>
	<span class="n">RT_IDX_LLDP</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">17</span><span class="p">),</span>
	<span class="n">RT_IDX_UNUSED018</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">18</span><span class="p">),</span>
	<span class="n">RT_IDX_UNUSED019</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">19</span><span class="p">),</span>
	<span class="n">RT_IDX_UNUSED20</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">20</span><span class="p">),</span>
	<span class="n">RT_IDX_UNUSED21</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">21</span><span class="p">),</span>
	<span class="n">RT_IDX_ERR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">22</span><span class="p">),</span>
	<span class="n">RT_IDX_VALID</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">23</span><span class="p">),</span>
	<span class="n">RT_IDX_TU_CSUM_ERR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="p">),</span>
	<span class="n">RT_IDX_IP_CSUM_ERR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">25</span><span class="p">),</span>
	<span class="n">RT_IDX_MAC_ERR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">26</span><span class="p">),</span>
	<span class="n">RT_IDX_RSS_TCP6</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">27</span><span class="p">),</span>
	<span class="n">RT_IDX_RSS_TCP4</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">28</span><span class="p">),</span>
	<span class="n">RT_IDX_RSS_IPV6</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">29</span><span class="p">),</span>
	<span class="n">RT_IDX_RSS_IPV4</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">30</span><span class="p">),</span>
	<span class="n">RT_IDX_RSS_MATCH</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">31</span><span class="p">),</span>

	<span class="cm">/* Hierarchy for the NIC Queue Mask */</span>
	<span class="n">RT_IDX_ALL_ERR_SLOT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">RT_IDX_MAC_ERR_SLOT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">RT_IDX_IP_CSUM_ERR_SLOT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">RT_IDX_TCP_UDP_CSUM_ERR_SLOT</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">RT_IDX_BCAST_SLOT</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">RT_IDX_MCAST_MATCH_SLOT</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">RT_IDX_ALLMULTI_SLOT</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">RT_IDX_UNUSED6_SLOT</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">RT_IDX_UNUSED7_SLOT</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">RT_IDX_RSS_MATCH_SLOT</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">RT_IDX_RSS_IPV4_SLOT</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">RT_IDX_RSS_IPV6_SLOT</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">RT_IDX_RSS_TCP4_SLOT</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">RT_IDX_RSS_TCP6_SLOT</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
	<span class="n">RT_IDX_CAM_HIT_SLOT</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">RT_IDX_UNUSED013</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
	<span class="n">RT_IDX_UNUSED014</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
	<span class="n">RT_IDX_PROMISCUOUS_SLOT</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
	<span class="n">RT_IDX_MAX_RT_SLOTS</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">RT_IDX_MAX_NIC_SLOTS</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Serdes Address Register (XG_SERDES_ADDR) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">XG_SERDES_ADDR_RDY</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">31</span><span class="p">),</span>
	<span class="n">XG_SERDES_ADDR_R</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">30</span><span class="p">),</span>

	<span class="n">XG_SERDES_ADDR_STS</span> <span class="o">=</span> <span class="mh">0x00001E06</span><span class="p">,</span>
	<span class="n">XG_SERDES_ADDR_XFI1_PWR_UP</span> <span class="o">=</span> <span class="mh">0x00000005</span><span class="p">,</span>
	<span class="n">XG_SERDES_ADDR_XFI2_PWR_UP</span> <span class="o">=</span> <span class="mh">0x0000000a</span><span class="p">,</span>
	<span class="n">XG_SERDES_ADDR_XAUI_PWR_DOWN</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>

	<span class="cm">/* Serdes coredump definitions. */</span>
	<span class="n">XG_SERDES_XAUI_AN_START</span> <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
	<span class="n">XG_SERDES_XAUI_AN_END</span> <span class="o">=</span> <span class="mh">0x00000034</span><span class="p">,</span>
	<span class="n">XG_SERDES_XAUI_HSS_PCS_START</span> <span class="o">=</span> <span class="mh">0x00000800</span><span class="p">,</span>
	<span class="n">XG_SERDES_XAUI_HSS_PCS_END</span> <span class="o">=</span> <span class="mh">0x0000880</span><span class="p">,</span>
	<span class="n">XG_SERDES_XFI_AN_START</span> <span class="o">=</span> <span class="mh">0x00001000</span><span class="p">,</span>
	<span class="n">XG_SERDES_XFI_AN_END</span> <span class="o">=</span> <span class="mh">0x00001034</span><span class="p">,</span>
	<span class="n">XG_SERDES_XFI_TRAIN_START</span> <span class="o">=</span> <span class="mh">0x10001050</span><span class="p">,</span>
	<span class="n">XG_SERDES_XFI_TRAIN_END</span> <span class="o">=</span> <span class="mh">0x1000107C</span><span class="p">,</span>
	<span class="n">XG_SERDES_XFI_HSS_PCS_START</span> <span class="o">=</span> <span class="mh">0x00001800</span><span class="p">,</span>
	<span class="n">XG_SERDES_XFI_HSS_PCS_END</span> <span class="o">=</span> <span class="mh">0x00001838</span><span class="p">,</span>
	<span class="n">XG_SERDES_XFI_HSS_TX_START</span> <span class="o">=</span> <span class="mh">0x00001c00</span><span class="p">,</span>
	<span class="n">XG_SERDES_XFI_HSS_TX_END</span> <span class="o">=</span> <span class="mh">0x00001c1f</span><span class="p">,</span>
	<span class="n">XG_SERDES_XFI_HSS_RX_START</span> <span class="o">=</span> <span class="mh">0x00001c40</span><span class="p">,</span>
	<span class="n">XG_SERDES_XFI_HSS_RX_END</span> <span class="o">=</span> <span class="mh">0x00001c5f</span><span class="p">,</span>
	<span class="n">XG_SERDES_XFI_HSS_PLL_START</span> <span class="o">=</span> <span class="mh">0x00001e00</span><span class="p">,</span>
	<span class="n">XG_SERDES_XFI_HSS_PLL_END</span> <span class="o">=</span> <span class="mh">0x00001e1f</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *  NIC Probe Mux Address Register (PRB_MX_ADDR) bit definitions.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">PRB_MX_ADDR_ARE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">),</span>
	<span class="n">PRB_MX_ADDR_UP</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">15</span><span class="p">),</span>
	<span class="n">PRB_MX_ADDR_SWP</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">14</span><span class="p">),</span>

	<span class="cm">/* Module select values. */</span>
	<span class="n">PRB_MX_ADDR_MAX_MODS</span> <span class="o">=</span> <span class="mi">21</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_SHIFT</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_TBD</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_IDE1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_IDE2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_FRB</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_ODE1</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_ODE2</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_DA1</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_DA2</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_IMP1</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_IMP2</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_OMP1</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_OMP2</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_ORS1</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_ORS2</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_REG</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_MAC1</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_MAC2</span> <span class="o">=</span> <span class="mi">17</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_VQM1</span> <span class="o">=</span> <span class="mi">18</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_VQM2</span> <span class="o">=</span> <span class="mi">19</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_MOD_SEL_MOP</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
	<span class="cm">/* Bit fields indicating which modules</span>
<span class="cm">	 * are valid for each clock domain.</span>
<span class="cm">	 */</span>
	<span class="n">PRB_MX_ADDR_VALID_SYS_MOD</span> <span class="o">=</span> <span class="mh">0x000f7ff7</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_VALID_PCI_MOD</span> <span class="o">=</span> <span class="mh">0x000040c1</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_VALID_XGM_MOD</span> <span class="o">=</span> <span class="mh">0x00037309</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_VALID_FC_MOD</span> <span class="o">=</span> <span class="mh">0x00003001</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_VALID_TOTAL</span> <span class="o">=</span> <span class="mi">34</span><span class="p">,</span>

	<span class="cm">/* Clock domain values. */</span>
	<span class="n">PRB_MX_ADDR_CLOCK_SHIFT</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_SYS_CLOCK</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_PCI_CLOCK</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_FC_CLOCK</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR_XGM_CLOCK</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>

	<span class="n">PRB_MX_ADDR_MAX_MUX</span> <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Control Register Set Map</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">PROC_ADDR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>		<span class="cm">/* Use semaphore */</span>
	<span class="n">PROC_DATA</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>	<span class="cm">/* Use semaphore */</span>
	<span class="n">SYS</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">RST_FO</span> <span class="o">=</span> <span class="mh">0x0c</span><span class="p">,</span>
	<span class="n">FSC</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
	<span class="n">CSR</span> <span class="o">=</span> <span class="mh">0x14</span><span class="p">,</span>
	<span class="n">LED</span> <span class="o">=</span> <span class="mh">0x18</span><span class="p">,</span>
	<span class="n">ICB_RID</span> <span class="o">=</span> <span class="mh">0x1c</span><span class="p">,</span>		<span class="cm">/* Use semaphore */</span>
	<span class="n">ICB_L</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span>		<span class="cm">/* Use semaphore */</span>
	<span class="n">ICB_H</span> <span class="o">=</span> <span class="mh">0x24</span><span class="p">,</span>		<span class="cm">/* Use semaphore */</span>
	<span class="n">CFG</span> <span class="o">=</span> <span class="mh">0x28</span><span class="p">,</span>
	<span class="n">BIOS_ADDR</span> <span class="o">=</span> <span class="mh">0x2c</span><span class="p">,</span>
	<span class="n">STS</span> <span class="o">=</span> <span class="mh">0x30</span><span class="p">,</span>
	<span class="n">INTR_EN</span> <span class="o">=</span> <span class="mh">0x34</span><span class="p">,</span>
	<span class="n">INTR_MASK</span> <span class="o">=</span> <span class="mh">0x38</span><span class="p">,</span>
	<span class="n">ISR1</span> <span class="o">=</span> <span class="mh">0x3c</span><span class="p">,</span>
	<span class="n">ISR2</span> <span class="o">=</span> <span class="mh">0x40</span><span class="p">,</span>
	<span class="n">ISR3</span> <span class="o">=</span> <span class="mh">0x44</span><span class="p">,</span>
	<span class="n">ISR4</span> <span class="o">=</span> <span class="mh">0x48</span><span class="p">,</span>
	<span class="n">REV_ID</span> <span class="o">=</span> <span class="mh">0x4c</span><span class="p">,</span>
	<span class="n">FRC_ECC_ERR</span> <span class="o">=</span> <span class="mh">0x50</span><span class="p">,</span>
	<span class="n">ERR_STS</span> <span class="o">=</span> <span class="mh">0x54</span><span class="p">,</span>
	<span class="n">RAM_DBG_ADDR</span> <span class="o">=</span> <span class="mh">0x58</span><span class="p">,</span>
	<span class="n">RAM_DBG_DATA</span> <span class="o">=</span> <span class="mh">0x5c</span><span class="p">,</span>
	<span class="n">ECC_ERR_CNT</span> <span class="o">=</span> <span class="mh">0x60</span><span class="p">,</span>
	<span class="n">SEM</span> <span class="o">=</span> <span class="mh">0x64</span><span class="p">,</span>
	<span class="n">GPIO_1</span> <span class="o">=</span> <span class="mh">0x68</span><span class="p">,</span>		<span class="cm">/* Use semaphore */</span>
	<span class="n">GPIO_2</span> <span class="o">=</span> <span class="mh">0x6c</span><span class="p">,</span>		<span class="cm">/* Use semaphore */</span>
	<span class="n">GPIO_3</span> <span class="o">=</span> <span class="mh">0x70</span><span class="p">,</span>		<span class="cm">/* Use semaphore */</span>
	<span class="n">RSVD2</span> <span class="o">=</span> <span class="mh">0x74</span><span class="p">,</span>
	<span class="n">XGMAC_ADDR</span> <span class="o">=</span> <span class="mh">0x78</span><span class="p">,</span>	<span class="cm">/* Use semaphore */</span>
	<span class="n">XGMAC_DATA</span> <span class="o">=</span> <span class="mh">0x7c</span><span class="p">,</span>	<span class="cm">/* Use semaphore */</span>
	<span class="n">NIC_ETS</span> <span class="o">=</span> <span class="mh">0x80</span><span class="p">,</span>
	<span class="n">CNA_ETS</span> <span class="o">=</span> <span class="mh">0x84</span><span class="p">,</span>
	<span class="n">FLASH_ADDR</span> <span class="o">=</span> <span class="mh">0x88</span><span class="p">,</span>	<span class="cm">/* Use semaphore */</span>
	<span class="n">FLASH_DATA</span> <span class="o">=</span> <span class="mh">0x8c</span><span class="p">,</span>	<span class="cm">/* Use semaphore */</span>
	<span class="n">CQ_STOP</span> <span class="o">=</span> <span class="mh">0x90</span><span class="p">,</span>
	<span class="n">PAGE_TBL_RID</span> <span class="o">=</span> <span class="mh">0x94</span><span class="p">,</span>
	<span class="n">WQ_PAGE_TBL_LO</span> <span class="o">=</span> <span class="mh">0x98</span><span class="p">,</span>
	<span class="n">WQ_PAGE_TBL_HI</span> <span class="o">=</span> <span class="mh">0x9c</span><span class="p">,</span>
	<span class="n">CQ_PAGE_TBL_LO</span> <span class="o">=</span> <span class="mh">0xa0</span><span class="p">,</span>
	<span class="n">CQ_PAGE_TBL_HI</span> <span class="o">=</span> <span class="mh">0xa4</span><span class="p">,</span>
	<span class="n">MAC_ADDR_IDX</span> <span class="o">=</span> <span class="mh">0xa8</span><span class="p">,</span>	<span class="cm">/* Use semaphore */</span>
	<span class="n">MAC_ADDR_DATA</span> <span class="o">=</span> <span class="mh">0xac</span><span class="p">,</span>	<span class="cm">/* Use semaphore */</span>
	<span class="n">COS_DFLT_CQ1</span> <span class="o">=</span> <span class="mh">0xb0</span><span class="p">,</span>
	<span class="n">COS_DFLT_CQ2</span> <span class="o">=</span> <span class="mh">0xb4</span><span class="p">,</span>
	<span class="n">ETYPE_SKIP1</span> <span class="o">=</span> <span class="mh">0xb8</span><span class="p">,</span>
	<span class="n">ETYPE_SKIP2</span> <span class="o">=</span> <span class="mh">0xbc</span><span class="p">,</span>
	<span class="n">SPLT_HDR</span> <span class="o">=</span> <span class="mh">0xc0</span><span class="p">,</span>
	<span class="n">FC_PAUSE_THRES</span> <span class="o">=</span> <span class="mh">0xc4</span><span class="p">,</span>
	<span class="n">NIC_PAUSE_THRES</span> <span class="o">=</span> <span class="mh">0xc8</span><span class="p">,</span>
	<span class="n">FC_ETHERTYPE</span> <span class="o">=</span> <span class="mh">0xcc</span><span class="p">,</span>
	<span class="n">FC_RCV_CFG</span> <span class="o">=</span> <span class="mh">0xd0</span><span class="p">,</span>
	<span class="n">NIC_RCV_CFG</span> <span class="o">=</span> <span class="mh">0xd4</span><span class="p">,</span>
	<span class="n">FC_COS_TAGS</span> <span class="o">=</span> <span class="mh">0xd8</span><span class="p">,</span>
	<span class="n">NIC_COS_TAGS</span> <span class="o">=</span> <span class="mh">0xdc</span><span class="p">,</span>
	<span class="n">MGMT_RCV_CFG</span> <span class="o">=</span> <span class="mh">0xe0</span><span class="p">,</span>
	<span class="n">RT_IDX</span> <span class="o">=</span> <span class="mh">0xe4</span><span class="p">,</span>
	<span class="n">RT_DATA</span> <span class="o">=</span> <span class="mh">0xe8</span><span class="p">,</span>
	<span class="n">RSVD7</span> <span class="o">=</span> <span class="mh">0xec</span><span class="p">,</span>
	<span class="n">XG_SERDES_ADDR</span> <span class="o">=</span> <span class="mh">0xf0</span><span class="p">,</span>
	<span class="n">XG_SERDES_DATA</span> <span class="o">=</span> <span class="mh">0xf4</span><span class="p">,</span>
	<span class="n">PRB_MX_ADDR</span> <span class="o">=</span> <span class="mh">0xf8</span><span class="p">,</span>	<span class="cm">/* Use semaphore */</span>
	<span class="n">PRB_MX_DATA</span> <span class="o">=</span> <span class="mh">0xfc</span><span class="p">,</span>	<span class="cm">/* Use semaphore */</span>
<span class="p">};</span>

<span class="cp">#ifdef CONFIG_HAVE_EFFICIENT_UNALIGNED_ACCESS</span>
<span class="cp">#define SMALL_BUFFER_SIZE 256</span>
<span class="cp">#define SMALL_BUF_MAP_SIZE SMALL_BUFFER_SIZE</span>
<span class="cp">#define SPLT_SETTING  FSC_DBRST_1024</span>
<span class="cp">#define SPLT_LEN 0</span>
<span class="cp">#define QLGE_SB_PAD 0</span>
<span class="cp">#else</span>
<span class="cp">#define SMALL_BUFFER_SIZE 512</span>
<span class="cp">#define SMALL_BUF_MAP_SIZE (SMALL_BUFFER_SIZE / 2)</span>
<span class="cp">#define SPLT_SETTING  FSC_SH</span>
<span class="cp">#define SPLT_LEN (SPLT_HDR_EP | \</span>
<span class="cp">	min(SMALL_BUF_MAP_SIZE, 1023))</span>
<span class="cp">#define QLGE_SB_PAD 32</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * CAM output format.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">CAM_OUT_ROUTE_FC</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">CAM_OUT_ROUTE_NIC</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">CAM_OUT_FUNC_SHIFT</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">CAM_OUT_RV</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">),</span>
	<span class="n">CAM_OUT_SH</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">15</span><span class="p">),</span>
	<span class="n">CAM_OUT_CQ_ID_SHIFT</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Mailbox  definitions</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="cm">/* Asynchronous Event Notifications */</span>
	<span class="n">AEN_SYS_ERR</span> <span class="o">=</span> <span class="mh">0x00008002</span><span class="p">,</span>
	<span class="n">AEN_LINK_UP</span> <span class="o">=</span> <span class="mh">0x00008011</span><span class="p">,</span>
	<span class="n">AEN_LINK_DOWN</span> <span class="o">=</span> <span class="mh">0x00008012</span><span class="p">,</span>
	<span class="n">AEN_IDC_CMPLT</span> <span class="o">=</span> <span class="mh">0x00008100</span><span class="p">,</span>
	<span class="n">AEN_IDC_REQ</span> <span class="o">=</span> <span class="mh">0x00008101</span><span class="p">,</span>
	<span class="n">AEN_IDC_EXT</span> <span class="o">=</span> <span class="mh">0x00008102</span><span class="p">,</span>
	<span class="n">AEN_DCBX_CHG</span> <span class="o">=</span> <span class="mh">0x00008110</span><span class="p">,</span>
	<span class="n">AEN_AEN_LOST</span> <span class="o">=</span> <span class="mh">0x00008120</span><span class="p">,</span>
	<span class="n">AEN_AEN_SFP_IN</span> <span class="o">=</span> <span class="mh">0x00008130</span><span class="p">,</span>
	<span class="n">AEN_AEN_SFP_OUT</span> <span class="o">=</span> <span class="mh">0x00008131</span><span class="p">,</span>
	<span class="n">AEN_FW_INIT_DONE</span> <span class="o">=</span> <span class="mh">0x00008400</span><span class="p">,</span>
	<span class="n">AEN_FW_INIT_FAIL</span> <span class="o">=</span> <span class="mh">0x00008401</span><span class="p">,</span>

	<span class="cm">/* Mailbox Command Opcodes. */</span>
	<span class="n">MB_CMD_NOP</span> <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
	<span class="n">MB_CMD_EX_FW</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
	<span class="n">MB_CMD_MB_TEST</span> <span class="o">=</span> <span class="mh">0x00000006</span><span class="p">,</span>
	<span class="n">MB_CMD_CSUM_TEST</span> <span class="o">=</span> <span class="mh">0x00000007</span><span class="p">,</span>	<span class="cm">/* Verify Checksum */</span>
	<span class="n">MB_CMD_ABOUT_FW</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
	<span class="n">MB_CMD_COPY_RISC_RAM</span> <span class="o">=</span> <span class="mh">0x0000000a</span><span class="p">,</span>
	<span class="n">MB_CMD_LOAD_RISC_RAM</span> <span class="o">=</span> <span class="mh">0x0000000b</span><span class="p">,</span>
	<span class="n">MB_CMD_DUMP_RISC_RAM</span> <span class="o">=</span> <span class="mh">0x0000000c</span><span class="p">,</span>
	<span class="n">MB_CMD_WRITE_RAM</span> <span class="o">=</span> <span class="mh">0x0000000d</span><span class="p">,</span>
	<span class="n">MB_CMD_INIT_RISC_RAM</span> <span class="o">=</span> <span class="mh">0x0000000e</span><span class="p">,</span>
	<span class="n">MB_CMD_READ_RAM</span> <span class="o">=</span> <span class="mh">0x0000000f</span><span class="p">,</span>
	<span class="n">MB_CMD_STOP_FW</span> <span class="o">=</span> <span class="mh">0x00000014</span><span class="p">,</span>
	<span class="n">MB_CMD_MAKE_SYS_ERR</span> <span class="o">=</span> <span class="mh">0x0000002a</span><span class="p">,</span>
	<span class="n">MB_CMD_WRITE_SFP</span> <span class="o">=</span> <span class="mh">0x00000030</span><span class="p">,</span>
	<span class="n">MB_CMD_READ_SFP</span> <span class="o">=</span> <span class="mh">0x00000031</span><span class="p">,</span>
	<span class="n">MB_CMD_INIT_FW</span> <span class="o">=</span> <span class="mh">0x00000060</span><span class="p">,</span>
	<span class="n">MB_CMD_GET_IFCB</span> <span class="o">=</span> <span class="mh">0x00000061</span><span class="p">,</span>
	<span class="n">MB_CMD_GET_FW_STATE</span> <span class="o">=</span> <span class="mh">0x00000069</span><span class="p">,</span>
	<span class="n">MB_CMD_IDC_REQ</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>	<span class="cm">/* Inter-Driver Communication */</span>
	<span class="n">MB_CMD_IDC_ACK</span> <span class="o">=</span> <span class="mh">0x00000101</span><span class="p">,</span>	<span class="cm">/* Inter-Driver Communication */</span>
	<span class="n">MB_CMD_SET_WOL_MODE</span> <span class="o">=</span> <span class="mh">0x00000110</span><span class="p">,</span>	<span class="cm">/* Wake On Lan */</span>
	<span class="n">MB_WOL_DISABLE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">MB_WOL_MAGIC_PKT</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">MB_WOL_FLTR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span>
	<span class="n">MB_WOL_UCAST</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">),</span>
	<span class="n">MB_WOL_MCAST</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">),</span>
	<span class="n">MB_WOL_BCAST</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span>
	<span class="n">MB_WOL_LINK_UP</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">),</span>
	<span class="n">MB_WOL_LINK_DOWN</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">),</span>
	<span class="n">MB_WOL_MODE_ON</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">),</span>		<span class="cm">/* Wake on Lan Mode on */</span>
	<span class="n">MB_CMD_SET_WOL_FLTR</span> <span class="o">=</span> <span class="mh">0x00000111</span><span class="p">,</span>	<span class="cm">/* Wake On Lan Filter */</span>
	<span class="n">MB_CMD_CLEAR_WOL_FLTR</span> <span class="o">=</span> <span class="mh">0x00000112</span><span class="p">,</span> <span class="cm">/* Wake On Lan Filter */</span>
	<span class="n">MB_CMD_SET_WOL_MAGIC</span> <span class="o">=</span> <span class="mh">0x00000113</span><span class="p">,</span>	<span class="cm">/* Wake On Lan Magic Packet */</span>
	<span class="n">MB_CMD_CLEAR_WOL_MAGIC</span> <span class="o">=</span> <span class="mh">0x00000114</span><span class="p">,</span><span class="cm">/* Wake On Lan Magic Packet */</span>
	<span class="n">MB_CMD_SET_WOL_IMMED</span> <span class="o">=</span> <span class="mh">0x00000115</span><span class="p">,</span>
	<span class="n">MB_CMD_PORT_RESET</span> <span class="o">=</span> <span class="mh">0x00000120</span><span class="p">,</span>
	<span class="n">MB_CMD_SET_PORT_CFG</span> <span class="o">=</span> <span class="mh">0x00000122</span><span class="p">,</span>
	<span class="n">MB_CMD_GET_PORT_CFG</span> <span class="o">=</span> <span class="mh">0x00000123</span><span class="p">,</span>
	<span class="n">MB_CMD_GET_LINK_STS</span> <span class="o">=</span> <span class="mh">0x00000124</span><span class="p">,</span>
	<span class="n">MB_CMD_SET_LED_CFG</span> <span class="o">=</span> <span class="mh">0x00000125</span><span class="p">,</span> <span class="cm">/* Set LED Configuration Register */</span>
		<span class="n">QL_LED_BLINK</span> <span class="o">=</span> <span class="mh">0x03e803e8</span><span class="p">,</span>
	<span class="n">MB_CMD_GET_LED_CFG</span> <span class="o">=</span> <span class="mh">0x00000126</span><span class="p">,</span> <span class="cm">/* Get LED Configuration Register */</span>
	<span class="n">MB_CMD_SET_MGMNT_TFK_CTL</span> <span class="o">=</span> <span class="mh">0x00000160</span><span class="p">,</span> <span class="cm">/* Set Mgmnt Traffic Control */</span>
	<span class="n">MB_SET_MPI_TFK_STOP</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">MB_SET_MPI_TFK_RESUME</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">MB_CMD_GET_MGMNT_TFK_CTL</span> <span class="o">=</span> <span class="mh">0x00000161</span><span class="p">,</span> <span class="cm">/* Get Mgmnt Traffic Control */</span>
	<span class="n">MB_GET_MPI_TFK_STOPPED</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">MB_GET_MPI_TFK_FIFO_EMPTY</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="cm">/* Sub-commands for IDC request.</span>
<span class="cm">	 * This describes the reason for the</span>
<span class="cm">	 * IDC request.</span>
<span class="cm">	 */</span>
	<span class="n">MB_CMD_IOP_NONE</span> <span class="o">=</span> <span class="mh">0x0000</span><span class="p">,</span>
	<span class="n">MB_CMD_IOP_PREP_UPDATE_MPI</span>	<span class="o">=</span> <span class="mh">0x0001</span><span class="p">,</span>
	<span class="n">MB_CMD_IOP_COMP_UPDATE_MPI</span>	<span class="o">=</span> <span class="mh">0x0002</span><span class="p">,</span>
	<span class="n">MB_CMD_IOP_PREP_LINK_DOWN</span>	<span class="o">=</span> <span class="mh">0x0010</span><span class="p">,</span>
	<span class="n">MB_CMD_IOP_DVR_START</span>	 <span class="o">=</span> <span class="mh">0x0100</span><span class="p">,</span>
	<span class="n">MB_CMD_IOP_FLASH_ACC</span>	 <span class="o">=</span> <span class="mh">0x0101</span><span class="p">,</span>
	<span class="n">MB_CMD_IOP_RESTART_MPI</span>	<span class="o">=</span> <span class="mh">0x0102</span><span class="p">,</span>
	<span class="n">MB_CMD_IOP_CORE_DUMP_MPI</span>	<span class="o">=</span> <span class="mh">0x0103</span><span class="p">,</span>

	<span class="cm">/* Mailbox Command Status. */</span>
	<span class="n">MB_CMD_STS_GOOD</span> <span class="o">=</span> <span class="mh">0x00004000</span><span class="p">,</span>	<span class="cm">/* Success. */</span>
	<span class="n">MB_CMD_STS_INTRMDT</span> <span class="o">=</span> <span class="mh">0x00001000</span><span class="p">,</span>	<span class="cm">/* Intermediate Complete. */</span>
	<span class="n">MB_CMD_STS_INVLD_CMD</span> <span class="o">=</span> <span class="mh">0x00004001</span><span class="p">,</span>	<span class="cm">/* Invalid. */</span>
	<span class="n">MB_CMD_STS_XFC_ERR</span> <span class="o">=</span> <span class="mh">0x00004002</span><span class="p">,</span>	<span class="cm">/* Interface Error. */</span>
	<span class="n">MB_CMD_STS_CSUM_ERR</span> <span class="o">=</span> <span class="mh">0x00004003</span><span class="p">,</span>	<span class="cm">/* Csum Error. */</span>
	<span class="n">MB_CMD_STS_ERR</span> <span class="o">=</span> <span class="mh">0x00004005</span><span class="p">,</span>	<span class="cm">/* System Error. */</span>
	<span class="n">MB_CMD_STS_PARAM_ERR</span> <span class="o">=</span> <span class="mh">0x00004006</span><span class="p">,</span>	<span class="cm">/* Parameter Error. */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mbox_params</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">mbox_in</span><span class="p">[</span><span class="n">MAILBOX_COUNT</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">mbox_out</span><span class="p">[</span><span class="n">MAILBOX_COUNT</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">in_count</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">out_count</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">flash_params_8012</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">dev_id_str</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">__le16</span> <span class="n">size</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">csum</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">ver</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">sub_dev_id</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">mac_addr</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">__le16</span> <span class="n">res</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* 8000 device&#39;s flash is a different structure</span>
<span class="cm"> * at a different offset in flash.</span>
<span class="cm"> */</span>
<span class="cp">#define FUNC0_FLASH_OFFSET 0x140200</span>
<span class="cp">#define FUNC1_FLASH_OFFSET 0x140600</span>

<span class="cm">/* Flash related data structures. */</span>
<span class="k">struct</span> <span class="n">flash_params_8000</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">dev_id_str</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/* &quot;8000&quot; */</span>
	<span class="n">__le16</span> <span class="n">ver</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">size</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">csum</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">reserved0</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">total_size</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">entry_count</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data_type0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data_size0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">mac_addr</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">data_type1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data_size1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">mac_addr1</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">data_type2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data_size2</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">vlan_id</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data_type3</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">data_size3</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">last</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reserved1</span><span class="p">[</span><span class="mi">464</span><span class="p">];</span>
	<span class="n">__le16</span>	<span class="n">subsys_ven_id</span><span class="p">;</span>
	<span class="n">__le16</span>	<span class="n">subsys_dev_id</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reserved2</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">flash_params</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">flash_params_8012</span> <span class="n">flash_params_8012</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">flash_params_8000</span> <span class="n">flash_params_8000</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * doorbell space for the rx ring context</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">rx_doorbell_context</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">cnsmr_idx</span><span class="p">;</span>		<span class="cm">/* 0x00 */</span>
	<span class="n">u32</span> <span class="n">valid</span><span class="p">;</span>		<span class="cm">/* 0x04 */</span>
	<span class="n">u32</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/* 0x08-0x14 */</span>
	<span class="n">u32</span> <span class="n">lbq_prod_idx</span><span class="p">;</span>	<span class="cm">/* 0x18 */</span>
	<span class="n">u32</span> <span class="n">sbq_prod_idx</span><span class="p">;</span>	<span class="cm">/* 0x1c */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * doorbell space for the tx ring context</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">tx_doorbell_context</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">prod_idx</span><span class="p">;</span>		<span class="cm">/* 0x00 */</span>
	<span class="n">u32</span> <span class="n">valid</span><span class="p">;</span>		<span class="cm">/* 0x04 */</span>
	<span class="n">u32</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/* 0x08-0x14 */</span>
	<span class="n">u32</span> <span class="n">lbq_prod_idx</span><span class="p">;</span>	<span class="cm">/* 0x18 */</span>
	<span class="n">u32</span> <span class="n">sbq_prod_idx</span><span class="p">;</span>	<span class="cm">/* 0x1c */</span>
<span class="p">};</span>

<span class="cm">/* DATA STRUCTURES SHARED WITH HARDWARE. */</span>
<span class="k">struct</span> <span class="n">tx_buf_desc</span> <span class="p">{</span>
	<span class="n">__le64</span> <span class="n">addr</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">len</span><span class="p">;</span>
<span class="cp">#define TX_DESC_LEN_MASK	0x000fffff</span>
<span class="cp">#define TX_DESC_C	0x40000000</span>
<span class="cp">#define TX_DESC_E	0x80000000</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * IOCB Definitions...</span>
<span class="cm"> */</span>

<span class="cp">#define OPCODE_OB_MAC_IOCB 			0x01</span>
<span class="cp">#define OPCODE_OB_MAC_TSO_IOCB		0x02</span>
<span class="cp">#define OPCODE_IB_MAC_IOCB			0x20</span>
<span class="cp">#define OPCODE_IB_MPI_IOCB			0x21</span>
<span class="cp">#define OPCODE_IB_AE_IOCB			0x3f</span>

<span class="k">struct</span> <span class="n">ob_mac_iocb_req</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">flags1</span><span class="p">;</span>
<span class="cp">#define OB_MAC_IOCB_REQ_OI	0x01</span>
<span class="cp">#define OB_MAC_IOCB_REQ_I	0x02</span>
<span class="cp">#define OB_MAC_IOCB_REQ_D	0x08</span>
<span class="cp">#define OB_MAC_IOCB_REQ_F	0x10</span>
	<span class="n">u8</span> <span class="n">flags2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">flags3</span><span class="p">;</span>
<span class="cp">#define OB_MAC_IOCB_DFP	0x02</span>
<span class="cp">#define OB_MAC_IOCB_V	0x04</span>
	<span class="n">__le32</span> <span class="n">reserved1</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">__le16</span> <span class="n">frame_len</span><span class="p">;</span>
<span class="cp">#define OB_MAC_IOCB_LEN_MASK 0x3ffff</span>
	<span class="n">__le16</span> <span class="n">reserved2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txq_idx</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">reserved3</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">vlan_tci</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">reserved4</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">tx_buf_desc</span> <span class="n">tbd</span><span class="p">[</span><span class="n">TX_DESC_PER_IOCB</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ob_mac_iocb_rsp</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>		<span class="cm">/* */</span>
	<span class="n">u8</span> <span class="n">flags1</span><span class="p">;</span>		<span class="cm">/* */</span>
<span class="cp">#define OB_MAC_IOCB_RSP_OI	0x01	</span><span class="cm">/* */</span><span class="cp"></span>
<span class="cp">#define OB_MAC_IOCB_RSP_I	0x02	</span><span class="cm">/* */</span><span class="cp"></span>
<span class="cp">#define OB_MAC_IOCB_RSP_E	0x08	</span><span class="cm">/* */</span><span class="cp"></span>
<span class="cp">#define OB_MAC_IOCB_RSP_S	0x10	</span><span class="cm">/* too Short */</span><span class="cp"></span>
<span class="cp">#define OB_MAC_IOCB_RSP_L	0x20	</span><span class="cm">/* too Large */</span><span class="cp"></span>
<span class="cp">#define OB_MAC_IOCB_RSP_P	0x40	</span><span class="cm">/* Padded */</span><span class="cp"></span>
	<span class="n">u8</span> <span class="n">flags2</span><span class="p">;</span>		<span class="cm">/* */</span>
	<span class="n">u8</span> <span class="n">flags3</span><span class="p">;</span>		<span class="cm">/* */</span>
<span class="cp">#define OB_MAC_IOCB_RSP_B	0x80	</span><span class="cm">/* */</span><span class="cp"></span>
	<span class="n">u32</span> <span class="n">tid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txq_idx</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ob_mac_tso_iocb_req</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">flags1</span><span class="p">;</span>
<span class="cp">#define OB_MAC_TSO_IOCB_OI	0x01</span>
<span class="cp">#define OB_MAC_TSO_IOCB_I	0x02</span>
<span class="cp">#define OB_MAC_TSO_IOCB_D	0x08</span>
<span class="cp">#define OB_MAC_TSO_IOCB_IP4	0x40</span>
<span class="cp">#define OB_MAC_TSO_IOCB_IP6	0x80</span>
	<span class="n">u8</span> <span class="n">flags2</span><span class="p">;</span>
<span class="cp">#define OB_MAC_TSO_IOCB_LSO	0x20</span>
<span class="cp">#define OB_MAC_TSO_IOCB_UC	0x40</span>
<span class="cp">#define OB_MAC_TSO_IOCB_TC	0x80</span>
	<span class="n">u8</span> <span class="n">flags3</span><span class="p">;</span>
<span class="cp">#define OB_MAC_TSO_IOCB_IC	0x01</span>
<span class="cp">#define OB_MAC_TSO_IOCB_DFP	0x02</span>
<span class="cp">#define OB_MAC_TSO_IOCB_V	0x04</span>
	<span class="n">__le32</span> <span class="n">reserved1</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">__le32</span> <span class="n">frame_len</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txq_idx</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">total_hdrs_len</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">net_trans_offset</span><span class="p">;</span>
<span class="cp">#define OB_MAC_TRANSPORT_HDR_SHIFT 6</span>
	<span class="n">__le16</span> <span class="n">vlan_tci</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">mss</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">tx_buf_desc</span> <span class="n">tbd</span><span class="p">[</span><span class="n">TX_DESC_PER_IOCB</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ob_mac_tso_iocb_rsp</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">flags1</span><span class="p">;</span>
<span class="cp">#define OB_MAC_TSO_IOCB_RSP_OI	0x01</span>
<span class="cp">#define OB_MAC_TSO_IOCB_RSP_I	0x02</span>
<span class="cp">#define OB_MAC_TSO_IOCB_RSP_E	0x08</span>
<span class="cp">#define OB_MAC_TSO_IOCB_RSP_S	0x10</span>
<span class="cp">#define OB_MAC_TSO_IOCB_RSP_L	0x20</span>
<span class="cp">#define OB_MAC_TSO_IOCB_RSP_P	0x40</span>
	<span class="n">u8</span> <span class="n">flags2</span><span class="p">;</span>		<span class="cm">/* */</span>
	<span class="n">u8</span> <span class="n">flags3</span><span class="p">;</span>		<span class="cm">/* */</span>
<span class="cp">#define OB_MAC_TSO_IOCB_RSP_B	0x8000</span>
	<span class="n">u32</span> <span class="n">tid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">txq_idx</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">reserved2</span><span class="p">[</span><span class="mi">13</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ib_mac_iocb_rsp</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>		<span class="cm">/* 0x20 */</span>
	<span class="n">u8</span> <span class="n">flags1</span><span class="p">;</span>
<span class="cp">#define IB_MAC_IOCB_RSP_OI	0x01	</span><span class="cm">/* Overide intr delay */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_I	0x02	</span><span class="cm">/* Disble Intr Generation */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_CSUM_ERR_MASK 0x1c	</span><span class="cm">/* A mask to use for csum errs */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_TE	0x04	</span><span class="cm">/* Checksum error */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_NU	0x08	</span><span class="cm">/* No checksum rcvd */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_IE	0x10	</span><span class="cm">/* IPv4 checksum error */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_M_MASK	0x60	</span><span class="cm">/* Multicast info */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_M_NONE	0x00	</span><span class="cm">/* Not mcast frame */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_M_HASH	0x20	</span><span class="cm">/* HASH mcast frame */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_M_REG 	0x40	</span><span class="cm">/* Registered mcast frame */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_M_PROM 	0x60	</span><span class="cm">/* Promiscuous mcast frame */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_B	0x80	</span><span class="cm">/* Broadcast frame */</span><span class="cp"></span>
	<span class="n">u8</span> <span class="n">flags2</span><span class="p">;</span>
<span class="cp">#define IB_MAC_IOCB_RSP_P	0x01	</span><span class="cm">/* Promiscuous frame */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_V	0x02	</span><span class="cm">/* Vlan tag present */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_ERR_MASK	0x1c	</span><span class="cm">/*  */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_ERR_CODE_ERR	0x04</span>
<span class="cp">#define IB_MAC_IOCB_RSP_ERR_OVERSIZE	0x08</span>
<span class="cp">#define IB_MAC_IOCB_RSP_ERR_UNDERSIZE	0x10</span>
<span class="cp">#define IB_MAC_IOCB_RSP_ERR_PREAMBLE	0x14</span>
<span class="cp">#define IB_MAC_IOCB_RSP_ERR_FRAME_LEN	0x18</span>
<span class="cp">#define IB_MAC_IOCB_RSP_ERR_CRC		0x1c</span>
<span class="cp">#define IB_MAC_IOCB_RSP_U	0x20	</span><span class="cm">/* UDP packet */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_T	0x40	</span><span class="cm">/* TCP packet */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_FO	0x80	</span><span class="cm">/* Failover port */</span><span class="cp"></span>
	<span class="n">u8</span> <span class="n">flags3</span><span class="p">;</span>
<span class="cp">#define IB_MAC_IOCB_RSP_RSS_MASK	0x07	</span><span class="cm">/* RSS mask */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_M_NONE	0x00	</span><span class="cm">/* No RSS match */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_M_IPV4	0x04	</span><span class="cm">/* IPv4 RSS match */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_M_IPV6	0x02	</span><span class="cm">/* IPv6 RSS match */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_M_TCP_V4 	0x05	</span><span class="cm">/* TCP with IPv4 */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_M_TCP_V6 	0x03	</span><span class="cm">/* TCP with IPv6 */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_V4	0x08	</span><span class="cm">/* IPV4 */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_V6	0x10	</span><span class="cm">/* IPV6 */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_IH	0x20	</span><span class="cm">/* Split after IP header */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_DS	0x40	</span><span class="cm">/* data is in small buffer */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_DL	0x80	</span><span class="cm">/* data is in large buffer */</span><span class="cp"></span>
	<span class="n">__le32</span> <span class="n">data_len</span><span class="p">;</span>	<span class="cm">/* */</span>
	<span class="n">__le64</span> <span class="n">data_addr</span><span class="p">;</span>	<span class="cm">/* */</span>
	<span class="n">__le32</span> <span class="n">rss</span><span class="p">;</span>		<span class="cm">/* */</span>
	<span class="n">__le16</span> <span class="n">vlan_id</span><span class="p">;</span>		<span class="cm">/* 12 bits */</span>
<span class="cp">#define IB_MAC_IOCB_RSP_C	0x1000	</span><span class="cm">/* VLAN CFI bit */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_COS_SHIFT	12	</span><span class="cm">/* class of service value */</span><span class="cp"></span>
<span class="cp">#define IB_MAC_IOCB_RSP_VLAN_MASK	0x0ffff</span>

	<span class="n">__le16</span> <span class="n">reserved1</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">reserved2</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">reserved3</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">flags4</span><span class="p">;</span>
<span class="cp">#define IB_MAC_IOCB_RSP_HV	0x20</span>
<span class="cp">#define IB_MAC_IOCB_RSP_HS	0x40</span>
<span class="cp">#define IB_MAC_IOCB_RSP_HL	0x80</span>
	<span class="n">__le32</span> <span class="n">hdr_len</span><span class="p">;</span>		<span class="cm">/* */</span>
	<span class="n">__le64</span> <span class="n">hdr_addr</span><span class="p">;</span>	<span class="cm">/* */</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ib_ae_iocb_rsp</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">flags1</span><span class="p">;</span>
<span class="cp">#define IB_AE_IOCB_RSP_OI		0x01</span>
<span class="cp">#define IB_AE_IOCB_RSP_I		0x02</span>
	<span class="n">u8</span> <span class="n">event</span><span class="p">;</span>
<span class="cp">#define LINK_UP_EVENT              0x00</span>
<span class="cp">#define LINK_DOWN_EVENT            0x01</span>
<span class="cp">#define CAM_LOOKUP_ERR_EVENT       0x06</span>
<span class="cp">#define SOFT_ECC_ERROR_EVENT       0x07</span>
<span class="cp">#define MGMT_ERR_EVENT             0x08</span>
<span class="cp">#define TEN_GIG_MAC_EVENT          0x09</span>
<span class="cp">#define GPI0_H2L_EVENT       	0x10</span>
<span class="cp">#define GPI0_L2H_EVENT       	0x20</span>
<span class="cp">#define GPI1_H2L_EVENT       	0x11</span>
<span class="cp">#define GPI1_L2H_EVENT       	0x21</span>
<span class="cp">#define PCI_ERR_ANON_BUF_RD        0x40</span>
	<span class="n">u8</span> <span class="n">q_id</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * These three structures are for generic</span>
<span class="cm"> * handling of ib and ob iocbs.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">ql_net_rsp_iocb</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">flags0</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">length</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">tid</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">net_req_iocb</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">flags0</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">flags1</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">tid</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="n">reserved1</span><span class="p">[</span><span class="mi">30</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * tx ring initialization control block for chip.</span>
<span class="cm"> * It is defined as:</span>
<span class="cm"> * &quot;Work Queue Initialization Control Block&quot;</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">wqicb</span> <span class="p">{</span>
	<span class="n">__le16</span> <span class="n">len</span><span class="p">;</span>
<span class="cp">#define Q_LEN_V		(1 &lt;&lt; 4)</span>
<span class="cp">#define Q_LEN_CPP_CONT	0x0000</span>
<span class="cp">#define Q_LEN_CPP_16	0x0001</span>
<span class="cp">#define Q_LEN_CPP_32	0x0002</span>
<span class="cp">#define Q_LEN_CPP_64	0x0003</span>
<span class="cp">#define Q_LEN_CPP_512	0x0006</span>
	<span class="n">__le16</span> <span class="n">flags</span><span class="p">;</span>
<span class="cp">#define Q_PRI_SHIFT	1</span>
<span class="cp">#define Q_FLAGS_LC	0x1000</span>
<span class="cp">#define Q_FLAGS_LB	0x2000</span>
<span class="cp">#define Q_FLAGS_LI	0x4000</span>
<span class="cp">#define Q_FLAGS_LO	0x8000</span>
	<span class="n">__le16</span> <span class="n">cq_id_rss</span><span class="p">;</span>
<span class="cp">#define Q_CQ_ID_RSS_RV 0x8000</span>
	<span class="n">__le16</span> <span class="n">rid</span><span class="p">;</span>
	<span class="n">__le64</span> <span class="n">addr</span><span class="p">;</span>
	<span class="n">__le64</span> <span class="n">cnsmr_idx_addr</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * rx ring initialization control block for chip.</span>
<span class="cm"> * It is defined as:</span>
<span class="cm"> * &quot;Completion Queue Initialization Control Block&quot;</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">cqicb</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">msix_vect</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reserved1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reserved2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">flags</span><span class="p">;</span>
<span class="cp">#define FLAGS_LV	0x08</span>
<span class="cp">#define FLAGS_LS	0x10</span>
<span class="cp">#define FLAGS_LL	0x20</span>
<span class="cp">#define FLAGS_LI	0x40</span>
<span class="cp">#define FLAGS_LC	0x80</span>
	<span class="n">__le16</span> <span class="n">len</span><span class="p">;</span>
<span class="cp">#define LEN_V		(1 &lt;&lt; 4)</span>
<span class="cp">#define LEN_CPP_CONT	0x0000</span>
<span class="cp">#define LEN_CPP_32	0x0001</span>
<span class="cp">#define LEN_CPP_64	0x0002</span>
<span class="cp">#define LEN_CPP_128	0x0003</span>
	<span class="n">__le16</span> <span class="n">rid</span><span class="p">;</span>
	<span class="n">__le64</span> <span class="n">addr</span><span class="p">;</span>
	<span class="n">__le64</span> <span class="n">prod_idx_addr</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">pkt_delay</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">irq_delay</span><span class="p">;</span>
	<span class="n">__le64</span> <span class="n">lbq_addr</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">lbq_buf_size</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">lbq_len</span><span class="p">;</span>		<span class="cm">/* entry count */</span>
	<span class="n">__le64</span> <span class="n">sbq_addr</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">sbq_buf_size</span><span class="p">;</span>
	<span class="n">__le16</span> <span class="n">sbq_len</span><span class="p">;</span>		<span class="cm">/* entry count */</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ricb</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">base_cq</span><span class="p">;</span>
<span class="cp">#define RSS_L4K 0x80</span>
	<span class="n">u8</span> <span class="n">flags</span><span class="p">;</span>
<span class="cp">#define RSS_L6K 0x01</span>
<span class="cp">#define RSS_LI  0x02</span>
<span class="cp">#define RSS_LB  0x04</span>
<span class="cp">#define RSS_LM  0x08</span>
<span class="cp">#define RSS_RI4 0x10</span>
<span class="cp">#define RSS_RT4 0x20</span>
<span class="cp">#define RSS_RI6 0x40</span>
<span class="cp">#define RSS_RT6 0x80</span>
	<span class="n">__le16</span> <span class="n">mask</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">hash_cq_id</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
	<span class="n">__le32</span> <span class="n">ipv6_hash_key</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
	<span class="n">__le32</span> <span class="n">ipv4_hash_key</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cm">/* SOFTWARE/DRIVER DATA STRUCTURES. */</span>

<span class="k">struct</span> <span class="n">oal</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">tx_buf_desc</span> <span class="n">oal</span><span class="p">[</span><span class="n">TX_DESC_PER_OAL</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">map_list</span> <span class="p">{</span>
	<span class="n">DEFINE_DMA_UNMAP_ADDR</span><span class="p">(</span><span class="n">mapaddr</span><span class="p">);</span>
	<span class="n">DEFINE_DMA_UNMAP_LEN</span><span class="p">(</span><span class="n">maplen</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">tx_ring_desc</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ob_mac_iocb_req</span> <span class="o">*</span><span class="n">queue_entry</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">index</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">oal</span> <span class="n">oal</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">map_list</span> <span class="n">map</span><span class="p">[</span><span class="n">MAX_SKB_FRAGS</span> <span class="o">+</span> <span class="mi">2</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">map_cnt</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">tx_ring_desc</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">page_chunk</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">page</span> <span class="o">*</span><span class="n">page</span><span class="p">;</span>	<span class="cm">/* master page */</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">va</span><span class="p">;</span>		<span class="cm">/* virt addr for this chunk */</span>
	<span class="n">u64</span> <span class="n">map</span><span class="p">;</span>		<span class="cm">/* mapping for master */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>	<span class="cm">/* offset for this chunk */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">last_flag</span><span class="p">;</span> <span class="cm">/* flag set for last chunk in page */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">bq_desc</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">page_chunk</span> <span class="n">pg_chunk</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">p</span><span class="p">;</span>
	<span class="n">__le64</span> <span class="o">*</span><span class="n">addr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">index</span><span class="p">;</span>
	<span class="n">DEFINE_DMA_UNMAP_ADDR</span><span class="p">(</span><span class="n">mapaddr</span><span class="p">);</span>
	<span class="n">DEFINE_DMA_UNMAP_LEN</span><span class="p">(</span><span class="n">maplen</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#define QL_TXQ_IDX(qdev, skb) (smp_processor_id()%(qdev-&gt;tx_ring_count))</span>

<span class="k">struct</span> <span class="n">tx_ring</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * queue info.</span>
<span class="cm">	 */</span>
	<span class="k">struct</span> <span class="n">wqicb</span> <span class="n">wqicb</span><span class="p">;</span>	<span class="cm">/* structure used to inform chip of new queue */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">wq_base</span><span class="p">;</span>		<span class="cm">/* pci_alloc:virtual addr for tx */</span>
	<span class="n">dma_addr_t</span> <span class="n">wq_base_dma</span><span class="p">;</span>	<span class="cm">/* pci_alloc:dma addr for tx */</span>
	<span class="n">__le32</span> <span class="o">*</span><span class="n">cnsmr_idx_sh_reg</span><span class="p">;</span>	<span class="cm">/* shadow copy of consumer idx */</span>
	<span class="n">dma_addr_t</span> <span class="n">cnsmr_idx_sh_reg_dma</span><span class="p">;</span>	<span class="cm">/* dma-shadow copy of consumer */</span>
	<span class="n">u32</span> <span class="n">wq_size</span><span class="p">;</span>		<span class="cm">/* size in bytes of queue area */</span>
	<span class="n">u32</span> <span class="n">wq_len</span><span class="p">;</span>		<span class="cm">/* number of entries in queue */</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">prod_idx_db_reg</span><span class="p">;</span>	<span class="cm">/* doorbell area index reg at offset 0x00 */</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">valid_db_reg</span><span class="p">;</span>	<span class="cm">/* doorbell area valid reg at offset 0x04 */</span>
	<span class="n">u16</span> <span class="n">prod_idx</span><span class="p">;</span>		<span class="cm">/* current value for prod idx */</span>
	<span class="n">u16</span> <span class="n">cq_id</span><span class="p">;</span>		<span class="cm">/* completion (rx) queue for tx completions */</span>
	<span class="n">u8</span> <span class="n">wq_id</span><span class="p">;</span>		<span class="cm">/* queue id for this entry */</span>
	<span class="n">u8</span> <span class="n">reserved1</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">tx_ring_desc</span> <span class="o">*</span><span class="n">q</span><span class="p">;</span>	<span class="cm">/* descriptor list for the queue */</span>
	<span class="n">spinlock_t</span> <span class="n">lock</span><span class="p">;</span>
	<span class="n">atomic_t</span> <span class="n">tx_count</span><span class="p">;</span>	<span class="cm">/* counts down for every outstanding IO */</span>
	<span class="n">atomic_t</span> <span class="n">queue_stopped</span><span class="p">;</span>	<span class="cm">/* Turns queue off when full. */</span>
	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">tx_work</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_packets</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_bytes</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_errors</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Type of inbound queue.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">DEFAULT_Q</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>		<span class="cm">/* Handles slow queue and chip/MPI events. */</span>
	<span class="n">TX_Q</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>		<span class="cm">/* Handles outbound completions. */</span>
	<span class="n">RX_Q</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>		<span class="cm">/* Handles inbound completions. */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rx_ring</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">cqicb</span> <span class="n">cqicb</span><span class="p">;</span>	<span class="cm">/* The chip&#39;s completion queue init control block. */</span>

	<span class="cm">/* Completion queue elements. */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">cq_base</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">cq_base_dma</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cq_size</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cq_len</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">cq_id</span><span class="p">;</span>
	<span class="n">__le32</span> <span class="o">*</span><span class="n">prod_idx_sh_reg</span><span class="p">;</span>	<span class="cm">/* Shadowed producer register. */</span>
	<span class="n">dma_addr_t</span> <span class="n">prod_idx_sh_reg_dma</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">cnsmr_idx_db_reg</span><span class="p">;</span>	<span class="cm">/* PCI doorbell mem area + 0 */</span>
	<span class="n">u32</span> <span class="n">cnsmr_idx</span><span class="p">;</span>		<span class="cm">/* current sw idx */</span>
	<span class="k">struct</span> <span class="n">ql_net_rsp_iocb</span> <span class="o">*</span><span class="n">curr_entry</span><span class="p">;</span>	<span class="cm">/* next entry on queue */</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">valid_db_reg</span><span class="p">;</span>	<span class="cm">/* PCI doorbell mem area + 0x04 */</span>

	<span class="cm">/* Large buffer queue elements. */</span>
	<span class="n">u32</span> <span class="n">lbq_len</span><span class="p">;</span>		<span class="cm">/* entry count */</span>
	<span class="n">u32</span> <span class="n">lbq_size</span><span class="p">;</span>		<span class="cm">/* size in bytes of queue */</span>
	<span class="n">u32</span> <span class="n">lbq_buf_size</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">lbq_base</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">lbq_base_dma</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">lbq_base_indirect</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">lbq_base_indirect_dma</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">page_chunk</span> <span class="n">pg_chunk</span><span class="p">;</span> <span class="cm">/* current page for chunks */</span>
	<span class="k">struct</span> <span class="n">bq_desc</span> <span class="o">*</span><span class="n">lbq</span><span class="p">;</span>	<span class="cm">/* array of control blocks */</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">lbq_prod_idx_db_reg</span><span class="p">;</span>	<span class="cm">/* PCI doorbell mem area + 0x18 */</span>
	<span class="n">u32</span> <span class="n">lbq_prod_idx</span><span class="p">;</span>	<span class="cm">/* current sw prod idx */</span>
	<span class="n">u32</span> <span class="n">lbq_curr_idx</span><span class="p">;</span>	<span class="cm">/* next entry we expect */</span>
	<span class="n">u32</span> <span class="n">lbq_clean_idx</span><span class="p">;</span>	<span class="cm">/* beginning of new descs */</span>
	<span class="n">u32</span> <span class="n">lbq_free_cnt</span><span class="p">;</span>	<span class="cm">/* free buffer desc cnt */</span>

	<span class="cm">/* Small buffer queue elements. */</span>
	<span class="n">u32</span> <span class="n">sbq_len</span><span class="p">;</span>		<span class="cm">/* entry count */</span>
	<span class="n">u32</span> <span class="n">sbq_size</span><span class="p">;</span>		<span class="cm">/* size in bytes of queue */</span>
	<span class="n">u32</span> <span class="n">sbq_buf_size</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">sbq_base</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">sbq_base_dma</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">sbq_base_indirect</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">sbq_base_indirect_dma</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bq_desc</span> <span class="o">*</span><span class="n">sbq</span><span class="p">;</span>	<span class="cm">/* array of control blocks */</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">sbq_prod_idx_db_reg</span><span class="p">;</span> <span class="cm">/* PCI doorbell mem area + 0x1c */</span>
	<span class="n">u32</span> <span class="n">sbq_prod_idx</span><span class="p">;</span>	<span class="cm">/* current sw prod idx */</span>
	<span class="n">u32</span> <span class="n">sbq_curr_idx</span><span class="p">;</span>	<span class="cm">/* next entry we expect */</span>
	<span class="n">u32</span> <span class="n">sbq_clean_idx</span><span class="p">;</span>	<span class="cm">/* beginning of new descs */</span>
	<span class="n">u32</span> <span class="n">sbq_free_cnt</span><span class="p">;</span>	<span class="cm">/* free buffer desc cnt */</span>

	<span class="cm">/* Misc. handler elements. */</span>
	<span class="n">u32</span> <span class="n">type</span><span class="p">;</span>		<span class="cm">/* Type of queue, tx, rx. */</span>
	<span class="n">u32</span> <span class="n">irq</span><span class="p">;</span>		<span class="cm">/* Which vector this ring is assigned. */</span>
	<span class="n">u32</span> <span class="n">cpu</span><span class="p">;</span>		<span class="cm">/* Which CPU this should run on. */</span>
	<span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="n">IFNAMSIZ</span> <span class="o">+</span> <span class="mi">5</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">napi_struct</span> <span class="n">napi</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reserved</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_packets</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_multicast</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_bytes</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_dropped</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_errors</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * RSS Initialization Control Block</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">hash_id</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">value</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">nic_stats</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * These stats come from offset 200h to 278h</span>
<span class="cm">	 * in the XGMAC register.</span>
<span class="cm">	 */</span>
	<span class="n">u64</span> <span class="n">tx_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_bytes</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_mcast_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_bcast_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_ucast_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_ctl_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_pause_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_64_pkt</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_65_to_127_pkt</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_128_to_255_pkt</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_256_511_pkt</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_512_to_1023_pkt</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_1024_to_1518_pkt</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_1519_to_max_pkt</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_undersize_pkt</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_oversize_pkt</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * These stats come from offset 300h to 3C8h</span>
<span class="cm">	 * in the XGMAC register.</span>
<span class="cm">	 */</span>
	<span class="n">u64</span> <span class="n">rx_bytes</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_bytes_ok</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_pkts_ok</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_bcast_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_mcast_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_ucast_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_undersize_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_oversize_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_jabber_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_undersize_fcerr_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_drop_events</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_fcerr_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_align_err</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_symbol_err</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_mac_err</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_ctl_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_pause_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_64_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_65_to_127_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_128_255_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_256_511_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_512_to_1023_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_1024_to_1518_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_1519_to_max_pkts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_len_err_pkts</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * These stats come from offset 500h to 5C8h</span>
<span class="cm">	 * in the XGMAC register.</span>
<span class="cm">	 */</span>
	<span class="n">u64</span> <span class="n">tx_cbfc_pause_frames0</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_cbfc_pause_frames1</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_cbfc_pause_frames2</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_cbfc_pause_frames3</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_cbfc_pause_frames4</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_cbfc_pause_frames5</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_cbfc_pause_frames6</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_cbfc_pause_frames7</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_cbfc_pause_frames0</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_cbfc_pause_frames1</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_cbfc_pause_frames2</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_cbfc_pause_frames3</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_cbfc_pause_frames4</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_cbfc_pause_frames5</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_cbfc_pause_frames6</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_cbfc_pause_frames7</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_nic_fifo_drop</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Firmware coredump internal register address/length pairs. */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">MPI_CORE_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x00030000</span><span class="p">,</span>
	<span class="n">MPI_CORE_REGS_CNT</span> <span class="o">=</span> <span class="mi">127</span><span class="p">,</span>
	<span class="n">MPI_CORE_SH_REGS_CNT</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">TEST_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x00001000</span><span class="p">,</span>
	<span class="n">TEST_REGS_CNT</span> <span class="o">=</span> <span class="mi">23</span><span class="p">,</span>
	<span class="n">RMII_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x00001040</span><span class="p">,</span>
	<span class="n">RMII_REGS_CNT</span> <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>
	<span class="n">FCMAC1_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x00001080</span><span class="p">,</span>
	<span class="n">FCMAC2_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x000010c0</span><span class="p">,</span>
	<span class="n">FCMAC_REGS_CNT</span> <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>
	<span class="n">FC1_MBX_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x00001100</span><span class="p">,</span>
	<span class="n">FC2_MBX_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x00001240</span><span class="p">,</span>
	<span class="n">FC_MBX_REGS_CNT</span> <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>
	<span class="n">IDE_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x00001140</span><span class="p">,</span>
	<span class="n">IDE_REGS_CNT</span> <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>
	<span class="n">NIC1_MBX_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x00001180</span><span class="p">,</span>
	<span class="n">NIC2_MBX_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x00001280</span><span class="p">,</span>
	<span class="n">NIC_MBX_REGS_CNT</span> <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>
	<span class="n">SMBUS_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x00001200</span><span class="p">,</span>
	<span class="n">SMBUS_REGS_CNT</span> <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>
	<span class="n">I2C_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x00001fc0</span><span class="p">,</span>
	<span class="n">I2C_REGS_CNT</span> <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>
	<span class="n">MEMC_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x00003000</span><span class="p">,</span>
	<span class="n">MEMC_REGS_CNT</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
	<span class="n">PBUS_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x00007c00</span><span class="p">,</span>
	<span class="n">PBUS_REGS_CNT</span> <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
	<span class="n">MDE_REGS_ADDR</span> <span class="o">=</span> <span class="mh">0x00010000</span><span class="p">,</span>
	<span class="n">MDE_REGS_CNT</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">CODE_RAM_ADDR</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
	<span class="n">CODE_RAM_CNT</span> <span class="o">=</span> <span class="mh">0x2000</span><span class="p">,</span>
	<span class="n">MEMC_RAM_ADDR</span> <span class="o">=</span> <span class="mh">0x00100000</span><span class="p">,</span>
	<span class="n">MEMC_RAM_CNT</span> <span class="o">=</span> <span class="mh">0x2000</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define MPI_COREDUMP_COOKIE 0x5555aaaa</span>
<span class="k">struct</span> <span class="n">mpi_coredump_global_header</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">cookie</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">idString</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">u32</span>	<span class="n">timeLo</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">timeHi</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">imageSize</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">headerSize</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">info</span><span class="p">[</span><span class="mi">220</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">cookie</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">segNum</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">segSize</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">extra</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">description</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* Firmware coredump header segment numbers. */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">CORE_SEG_NUM</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">TEST_LOGIC_SEG_NUM</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">RMII_SEG_NUM</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">FCMAC1_SEG_NUM</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">FCMAC2_SEG_NUM</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">FC1_MBOX_SEG_NUM</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">IDE_SEG_NUM</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">NIC1_MBOX_SEG_NUM</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">SMBUS_SEG_NUM</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">FC2_MBOX_SEG_NUM</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">NIC2_MBOX_SEG_NUM</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
	<span class="n">I2C_SEG_NUM</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">MEMC_SEG_NUM</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
	<span class="n">PBUS_SEG_NUM</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
	<span class="n">MDE_SEG_NUM</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
	<span class="n">NIC1_CONTROL_SEG_NUM</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">NIC2_CONTROL_SEG_NUM</span> <span class="o">=</span> <span class="mi">17</span><span class="p">,</span>
	<span class="n">NIC1_XGMAC_SEG_NUM</span> <span class="o">=</span> <span class="mi">18</span><span class="p">,</span>
	<span class="n">NIC2_XGMAC_SEG_NUM</span> <span class="o">=</span> <span class="mi">19</span><span class="p">,</span>
	<span class="n">WCS_RAM_SEG_NUM</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
	<span class="n">MEMC_RAM_SEG_NUM</span> <span class="o">=</span> <span class="mi">21</span><span class="p">,</span>
	<span class="n">XAUI_AN_SEG_NUM</span> <span class="o">=</span> <span class="mi">22</span><span class="p">,</span>
	<span class="n">XAUI_HSS_PCS_SEG_NUM</span> <span class="o">=</span> <span class="mi">23</span><span class="p">,</span>
	<span class="n">XFI_AN_SEG_NUM</span> <span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
	<span class="n">XFI_TRAIN_SEG_NUM</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span>
	<span class="n">XFI_HSS_PCS_SEG_NUM</span> <span class="o">=</span> <span class="mi">26</span><span class="p">,</span>
	<span class="n">XFI_HSS_TX_SEG_NUM</span> <span class="o">=</span> <span class="mi">27</span><span class="p">,</span>
	<span class="n">XFI_HSS_RX_SEG_NUM</span> <span class="o">=</span> <span class="mi">28</span><span class="p">,</span>
	<span class="n">XFI_HSS_PLL_SEG_NUM</span> <span class="o">=</span> <span class="mi">29</span><span class="p">,</span>
	<span class="n">MISC_NIC_INFO_SEG_NUM</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
	<span class="n">INTR_STATES_SEG_NUM</span> <span class="o">=</span> <span class="mi">31</span><span class="p">,</span>
	<span class="n">CAM_ENTRIES_SEG_NUM</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
	<span class="n">ROUTING_WORDS_SEG_NUM</span> <span class="o">=</span> <span class="mi">33</span><span class="p">,</span>
	<span class="n">ETS_SEG_NUM</span> <span class="o">=</span> <span class="mi">34</span><span class="p">,</span>
	<span class="n">PROBE_DUMP_SEG_NUM</span> <span class="o">=</span> <span class="mi">35</span><span class="p">,</span>
	<span class="n">ROUTING_INDEX_SEG_NUM</span> <span class="o">=</span> <span class="mi">36</span><span class="p">,</span>
	<span class="n">MAC_PROTOCOL_SEG_NUM</span> <span class="o">=</span> <span class="mi">37</span><span class="p">,</span>
	<span class="n">XAUI2_AN_SEG_NUM</span> <span class="o">=</span> <span class="mi">38</span><span class="p">,</span>
	<span class="n">XAUI2_HSS_PCS_SEG_NUM</span> <span class="o">=</span> <span class="mi">39</span><span class="p">,</span>
	<span class="n">XFI2_AN_SEG_NUM</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span>
	<span class="n">XFI2_TRAIN_SEG_NUM</span> <span class="o">=</span> <span class="mi">41</span><span class="p">,</span>
	<span class="n">XFI2_HSS_PCS_SEG_NUM</span> <span class="o">=</span> <span class="mi">42</span><span class="p">,</span>
	<span class="n">XFI2_HSS_TX_SEG_NUM</span> <span class="o">=</span> <span class="mi">43</span><span class="p">,</span>
	<span class="n">XFI2_HSS_RX_SEG_NUM</span> <span class="o">=</span> <span class="mi">44</span><span class="p">,</span>
	<span class="n">XFI2_HSS_PLL_SEG_NUM</span> <span class="o">=</span> <span class="mi">45</span><span class="p">,</span>
	<span class="n">SEM_REGS_SEG_NUM</span> <span class="o">=</span> <span class="mi">50</span>

<span class="p">};</span>

<span class="cm">/* There are 64 generic NIC registers. */</span>
<span class="cp">#define NIC_REGS_DUMP_WORD_COUNT		64</span>
<span class="cm">/* XGMAC word count. */</span>
<span class="cp">#define XGMAC_DUMP_WORD_COUNT		(XGMAC_REGISTER_END / 4)</span>
<span class="cm">/* Word counts for the SERDES blocks. */</span>
<span class="cp">#define XG_SERDES_XAUI_AN_COUNT		14</span>
<span class="cp">#define XG_SERDES_XAUI_HSS_PCS_COUNT	33</span>
<span class="cp">#define XG_SERDES_XFI_AN_COUNT		14</span>
<span class="cp">#define XG_SERDES_XFI_TRAIN_COUNT		12</span>
<span class="cp">#define XG_SERDES_XFI_HSS_PCS_COUNT	15</span>
<span class="cp">#define XG_SERDES_XFI_HSS_TX_COUNT		32</span>
<span class="cp">#define XG_SERDES_XFI_HSS_RX_COUNT		32</span>
<span class="cp">#define XG_SERDES_XFI_HSS_PLL_COUNT	32</span>

<span class="cm">/* There are 2 CNA ETS and 8 NIC ETS registers. */</span>
<span class="cp">#define ETS_REGS_DUMP_WORD_COUNT		10</span>

<span class="cm">/* Each probe mux entry stores the probe type plus 64 entries</span>
<span class="cm"> * that are each each 64-bits in length. There are a total of</span>
<span class="cm"> * 34 (PRB_MX_ADDR_VALID_TOTAL) valid probes.</span>
<span class="cm"> */</span>
<span class="cp">#define PRB_MX_ADDR_PRB_WORD_COUNT		(1 + (PRB_MX_ADDR_MAX_MUX * 2))</span>
<span class="cp">#define PRB_MX_DUMP_TOT_COUNT		(PRB_MX_ADDR_PRB_WORD_COUNT * \</span>
<span class="cp">							PRB_MX_ADDR_VALID_TOTAL)</span>
<span class="cm">/* Each routing entry consists of 4 32-bit words.</span>
<span class="cm"> * They are route type, index, index word, and result.</span>
<span class="cm"> * There are 2 route blocks with 8 entries each and</span>
<span class="cm"> *  2 NIC blocks with 16 entries each.</span>
<span class="cm"> * The totol entries is 48 with 4 words each.</span>
<span class="cm"> */</span>
<span class="cp">#define RT_IDX_DUMP_ENTRIES			48</span>
<span class="cp">#define RT_IDX_DUMP_WORDS_PER_ENTRY	4</span>
<span class="cp">#define RT_IDX_DUMP_TOT_WORDS		(RT_IDX_DUMP_ENTRIES * \</span>
<span class="cp">						RT_IDX_DUMP_WORDS_PER_ENTRY)</span>
<span class="cm">/* There are 10 address blocks in filter, each with</span>
<span class="cm"> * different entry counts and different word-count-per-entry.</span>
<span class="cm"> */</span>
<span class="cp">#define MAC_ADDR_DUMP_ENTRIES \</span>
<span class="cp">	((MAC_ADDR_MAX_CAM_ENTRIES * MAC_ADDR_MAX_CAM_WCOUNT) + \</span>
<span class="cp">	(MAC_ADDR_MAX_MULTICAST_ENTRIES * MAC_ADDR_MAX_MULTICAST_WCOUNT) + \</span>
<span class="cp">	(MAC_ADDR_MAX_VLAN_ENTRIES * MAC_ADDR_MAX_VLAN_WCOUNT) + \</span>
<span class="cp">	(MAC_ADDR_MAX_MCAST_FLTR_ENTRIES * MAC_ADDR_MAX_MCAST_FLTR_WCOUNT) + \</span>
<span class="cp">	(MAC_ADDR_MAX_FC_MAC_ENTRIES * MAC_ADDR_MAX_FC_MAC_WCOUNT) + \</span>
<span class="cp">	(MAC_ADDR_MAX_MGMT_MAC_ENTRIES * MAC_ADDR_MAX_MGMT_MAC_WCOUNT) + \</span>
<span class="cp">	(MAC_ADDR_MAX_MGMT_VLAN_ENTRIES * MAC_ADDR_MAX_MGMT_VLAN_WCOUNT) + \</span>
<span class="cp">	(MAC_ADDR_MAX_MGMT_V4_ENTRIES * MAC_ADDR_MAX_MGMT_V4_WCOUNT) + \</span>
<span class="cp">	(MAC_ADDR_MAX_MGMT_V6_ENTRIES * MAC_ADDR_MAX_MGMT_V6_WCOUNT) + \</span>
<span class="cp">	(MAC_ADDR_MAX_MGMT_TU_DP_ENTRIES * MAC_ADDR_MAX_MGMT_TU_DP_WCOUNT))</span>
<span class="cp">#define MAC_ADDR_DUMP_WORDS_PER_ENTRY	2</span>
<span class="cp">#define MAC_ADDR_DUMP_TOT_WORDS		(MAC_ADDR_DUMP_ENTRIES * \</span>
<span class="cp">						MAC_ADDR_DUMP_WORDS_PER_ENTRY)</span>
<span class="cm">/* Maximum of 4 functions whose semaphore registeres are</span>
<span class="cm"> * in the coredump.</span>
<span class="cm"> */</span>
<span class="cp">#define MAX_SEMAPHORE_FUNCTIONS		4</span>
<span class="cm">/* Defines for access the MPI shadow registers. */</span>
<span class="cp">#define RISC_124		0x0003007c</span>
<span class="cp">#define RISC_127		0x0003007f</span>
<span class="cp">#define SHADOW_OFFSET	0xb0000000</span>
<span class="cp">#define SHADOW_REG_SHIFT	20</span>

<span class="k">struct</span> <span class="n">ql_nic_misc</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">rx_ring_count</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tx_ring_count</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">intr_count</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">function</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ql_reg_dump</span> <span class="p">{</span>

	<span class="cm">/* segment 0 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_global_header</span> <span class="n">mpi_global_header</span><span class="p">;</span>

	<span class="cm">/* segment 16 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">nic_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">nic_regs</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>

	<span class="cm">/* segment 30 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">misc_nic_seg_hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ql_nic_misc</span> <span class="n">misc_nic_info</span><span class="p">;</span>

	<span class="cm">/* segment 31 */</span>
	<span class="cm">/* one interrupt state for each CQ */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">intr_states_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">intr_states</span><span class="p">[</span><span class="n">MAX_CPUS</span><span class="p">];</span>

	<span class="cm">/* segment 32 */</span>
	<span class="cm">/* 3 cam words each for 16 unicast,</span>
<span class="cm">	 * 2 cam words for each of 32 multicast.</span>
<span class="cm">	 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">cam_entries_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cam_entries</span><span class="p">[(</span><span class="mi">16</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mi">32</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)];</span>

	<span class="cm">/* segment 33 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">nic_routing_words_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">nic_routing_words</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="cm">/* segment 34 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">ets_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ets</span><span class="p">[</span><span class="mi">8</span><span class="o">+</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ql_mpi_coredump</span> <span class="p">{</span>
	<span class="cm">/* segment 0 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_global_header</span> <span class="n">mpi_global_header</span><span class="p">;</span>

	<span class="cm">/* segment 1 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">core_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">mpi_core_regs</span><span class="p">[</span><span class="n">MPI_CORE_REGS_CNT</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">mpi_core_sh_regs</span><span class="p">[</span><span class="n">MPI_CORE_SH_REGS_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 2 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">test_logic_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">test_logic_regs</span><span class="p">[</span><span class="n">TEST_REGS_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 3 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">rmii_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rmii_regs</span><span class="p">[</span><span class="n">RMII_REGS_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 4 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">fcmac1_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fcmac1_regs</span><span class="p">[</span><span class="n">FCMAC_REGS_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 5 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">fcmac2_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fcmac2_regs</span><span class="p">[</span><span class="n">FCMAC_REGS_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 6 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">fc1_mbx_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fc1_mbx_regs</span><span class="p">[</span><span class="n">FC_MBX_REGS_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 7 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">ide_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ide_regs</span><span class="p">[</span><span class="n">IDE_REGS_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 8 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">nic1_mbx_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">nic1_mbx_regs</span><span class="p">[</span><span class="n">NIC_MBX_REGS_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 9 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">smbus_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">smbus_regs</span><span class="p">[</span><span class="n">SMBUS_REGS_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 10 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">fc2_mbx_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fc2_mbx_regs</span><span class="p">[</span><span class="n">FC_MBX_REGS_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 11 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">nic2_mbx_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">nic2_mbx_regs</span><span class="p">[</span><span class="n">NIC_MBX_REGS_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 12 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">i2c_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">i2c_regs</span><span class="p">[</span><span class="n">I2C_REGS_CNT</span><span class="p">];</span>
	<span class="cm">/* segment 13 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">memc_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">memc_regs</span><span class="p">[</span><span class="n">MEMC_REGS_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 14 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">pbus_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pbus_regs</span><span class="p">[</span><span class="n">PBUS_REGS_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 15 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">mde_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">mde_regs</span><span class="p">[</span><span class="n">MDE_REGS_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 16 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">nic_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">nic_regs</span><span class="p">[</span><span class="n">NIC_REGS_DUMP_WORD_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 17 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">nic2_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">nic2_regs</span><span class="p">[</span><span class="n">NIC_REGS_DUMP_WORD_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 18 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xgmac1_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">xgmac1</span><span class="p">[</span><span class="n">XGMAC_DUMP_WORD_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 19 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xgmac2_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">xgmac2</span><span class="p">[</span><span class="n">XGMAC_DUMP_WORD_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 20 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">code_ram_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">code_ram</span><span class="p">[</span><span class="n">CODE_RAM_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 21 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">memc_ram_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">memc_ram</span><span class="p">[</span><span class="n">MEMC_RAM_CNT</span><span class="p">];</span>

	<span class="cm">/* segment 22 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xaui_an_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes_xaui_an</span><span class="p">[</span><span class="n">XG_SERDES_XAUI_AN_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 23 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xaui_hss_pcs_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes_xaui_hss_pcs</span><span class="p">[</span><span class="n">XG_SERDES_XAUI_HSS_PCS_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 24 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xfi_an_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes_xfi_an</span><span class="p">[</span><span class="n">XG_SERDES_XFI_AN_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 25 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xfi_train_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes_xfi_train</span><span class="p">[</span><span class="n">XG_SERDES_XFI_TRAIN_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 26 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xfi_hss_pcs_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes_xfi_hss_pcs</span><span class="p">[</span><span class="n">XG_SERDES_XFI_HSS_PCS_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 27 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xfi_hss_tx_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes_xfi_hss_tx</span><span class="p">[</span><span class="n">XG_SERDES_XFI_HSS_TX_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 28 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xfi_hss_rx_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes_xfi_hss_rx</span><span class="p">[</span><span class="n">XG_SERDES_XFI_HSS_RX_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 29 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xfi_hss_pll_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes_xfi_hss_pll</span><span class="p">[</span><span class="n">XG_SERDES_XFI_HSS_PLL_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 30 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">misc_nic_seg_hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ql_nic_misc</span> <span class="n">misc_nic_info</span><span class="p">;</span>

	<span class="cm">/* segment 31 */</span>
	<span class="cm">/* one interrupt state for each CQ */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">intr_states_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">intr_states</span><span class="p">[</span><span class="n">MAX_RX_RINGS</span><span class="p">];</span>

	<span class="cm">/* segment 32 */</span>
	<span class="cm">/* 3 cam words each for 16 unicast,</span>
<span class="cm">	 * 2 cam words for each of 32 multicast.</span>
<span class="cm">	 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">cam_entries_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cam_entries</span><span class="p">[(</span><span class="mi">16</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mi">32</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)];</span>

	<span class="cm">/* segment 33 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">nic_routing_words_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">nic_routing_words</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="cm">/* segment 34 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">ets_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ets</span><span class="p">[</span><span class="n">ETS_REGS_DUMP_WORD_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 35 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">probe_dump_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">probe_dump</span><span class="p">[</span><span class="n">PRB_MX_DUMP_TOT_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 36 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">routing_reg_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">routing_regs</span><span class="p">[</span><span class="n">RT_IDX_DUMP_TOT_WORDS</span><span class="p">];</span>

	<span class="cm">/* segment 37 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">mac_prot_reg_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">mac_prot_regs</span><span class="p">[</span><span class="n">MAC_ADDR_DUMP_TOT_WORDS</span><span class="p">];</span>

	<span class="cm">/* segment 38 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xaui2_an_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes2_xaui_an</span><span class="p">[</span><span class="n">XG_SERDES_XAUI_AN_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 39 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xaui2_hss_pcs_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes2_xaui_hss_pcs</span><span class="p">[</span><span class="n">XG_SERDES_XAUI_HSS_PCS_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 40 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xfi2_an_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes2_xfi_an</span><span class="p">[</span><span class="n">XG_SERDES_XFI_AN_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 41 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xfi2_train_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes2_xfi_train</span><span class="p">[</span><span class="n">XG_SERDES_XFI_TRAIN_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 42 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xfi2_hss_pcs_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes2_xfi_hss_pcs</span><span class="p">[</span><span class="n">XG_SERDES_XFI_HSS_PCS_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 43 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xfi2_hss_tx_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes2_xfi_hss_tx</span><span class="p">[</span><span class="n">XG_SERDES_XFI_HSS_TX_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 44 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xfi2_hss_rx_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes2_xfi_hss_rx</span><span class="p">[</span><span class="n">XG_SERDES_XFI_HSS_RX_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 45 */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">xfi2_hss_pll_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">serdes2_xfi_hss_pll</span><span class="p">[</span><span class="n">XG_SERDES_XFI_HSS_PLL_COUNT</span><span class="p">];</span>

	<span class="cm">/* segment 50 */</span>
	<span class="cm">/* semaphore register for all 5 functions */</span>
	<span class="k">struct</span> <span class="n">mpi_coredump_segment_header</span> <span class="n">sem_regs_seg_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">sem_regs</span><span class="p">[</span><span class="n">MAX_SEMAPHORE_FUNCTIONS</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * intr_context structure is used during initialization</span>
<span class="cm"> * to hook the interrupts.  It is also used in a single</span>
<span class="cm"> * irq environment as a context to the ISR.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">intr_context</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">intr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">irq_mask</span><span class="p">;</span>		<span class="cm">/* Mask of which rings the vector services. */</span>
	<span class="n">u32</span> <span class="n">hooked</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">intr_en_mask</span><span class="p">;</span>	<span class="cm">/* value/mask used to enable this intr */</span>
	<span class="n">u32</span> <span class="n">intr_dis_mask</span><span class="p">;</span>	<span class="cm">/* value/mask used to disable this intr */</span>
	<span class="n">u32</span> <span class="n">intr_read_mask</span><span class="p">;</span>	<span class="cm">/* value/mask used to read this intr */</span>
	<span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="n">IFNAMSIZ</span> <span class="o">*</span> <span class="mi">2</span><span class="p">];</span>
	<span class="n">atomic_t</span> <span class="n">irq_cnt</span><span class="p">;</span>	<span class="cm">/* irq_cnt is used in single vector</span>
<span class="cm">				 * environment.  It&#39;s incremented for each</span>
<span class="cm">				 * irq handler that is scheduled.  When each</span>
<span class="cm">				 * handler finishes it decrements irq_cnt and</span>
<span class="cm">				 * enables interrupts if it&#39;s zero. */</span>
	<span class="n">irq_handler_t</span> <span class="n">handler</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* adapter flags definitions. */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">QL_ADAPTER_UP</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/* Adapter has been brought up. */</span>
	<span class="n">QL_LEGACY_ENABLED</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">QL_MSI_ENABLED</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">QL_MSIX_ENABLED</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">QL_DMA64</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">QL_PROMISCUOUS</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">QL_ALLMULTI</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">QL_PORT_CFG</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">QL_CAM_RT_SET</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">QL_SELFTEST</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">QL_LB_LINK_UP</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">QL_FRC_COREDUMP</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
	<span class="n">QL_EEH_FATAL</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">QL_ASIC_RECOVERY</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span> <span class="cm">/* We are in ascic recovery. */</span>
<span class="p">};</span>

<span class="cm">/* link_status bit definitions */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">STS_LOOPBACK_MASK</span> <span class="o">=</span> <span class="mh">0x00000700</span><span class="p">,</span>
	<span class="n">STS_LOOPBACK_PCS</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
	<span class="n">STS_LOOPBACK_HSS</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
	<span class="n">STS_LOOPBACK_EXT</span> <span class="o">=</span> <span class="mh">0x00000300</span><span class="p">,</span>
	<span class="n">STS_PAUSE_MASK</span> <span class="o">=</span> <span class="mh">0x000000c0</span><span class="p">,</span>
	<span class="n">STS_PAUSE_STD</span> <span class="o">=</span> <span class="mh">0x00000040</span><span class="p">,</span>
	<span class="n">STS_PAUSE_PRI</span> <span class="o">=</span> <span class="mh">0x00000080</span><span class="p">,</span>
	<span class="n">STS_SPEED_MASK</span> <span class="o">=</span> <span class="mh">0x00000038</span><span class="p">,</span>
	<span class="n">STS_SPEED_100Mb</span> <span class="o">=</span> <span class="mh">0x00000000</span><span class="p">,</span>
	<span class="n">STS_SPEED_1Gb</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
	<span class="n">STS_SPEED_10Gb</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
	<span class="n">STS_LINK_TYPE_MASK</span> <span class="o">=</span> <span class="mh">0x00000007</span><span class="p">,</span>
	<span class="n">STS_LINK_TYPE_XFI</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
	<span class="n">STS_LINK_TYPE_XAUI</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
	<span class="n">STS_LINK_TYPE_XFI_BP</span> <span class="o">=</span> <span class="mh">0x00000003</span><span class="p">,</span>
	<span class="n">STS_LINK_TYPE_XAUI_BP</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
	<span class="n">STS_LINK_TYPE_10GBASET</span> <span class="o">=</span> <span class="mh">0x00000005</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* link_config bit definitions */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">CFG_JUMBO_FRAME_SIZE</span> <span class="o">=</span> <span class="mh">0x00010000</span><span class="p">,</span>
	<span class="n">CFG_PAUSE_MASK</span> <span class="o">=</span> <span class="mh">0x00000060</span><span class="p">,</span>
	<span class="n">CFG_PAUSE_STD</span> <span class="o">=</span> <span class="mh">0x00000020</span><span class="p">,</span>
	<span class="n">CFG_PAUSE_PRI</span> <span class="o">=</span> <span class="mh">0x00000040</span><span class="p">,</span>
	<span class="n">CFG_DCBX</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
	<span class="n">CFG_LOOPBACK_MASK</span> <span class="o">=</span> <span class="mh">0x00000007</span><span class="p">,</span>
	<span class="n">CFG_LOOPBACK_PCS</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
	<span class="n">CFG_LOOPBACK_HSS</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
	<span class="n">CFG_LOOPBACK_EXT</span> <span class="o">=</span> <span class="mh">0x00000006</span><span class="p">,</span>
	<span class="n">CFG_DEFAULT_MAX_FRAME_SIZE</span> <span class="o">=</span> <span class="mh">0x00002580</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">nic_operations</span> <span class="p">{</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">get_flash</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">port_initialize</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * The main Adapter structure definition.</span>
<span class="cm"> * This structure has all fields relevant to the hardware.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">ql_adapter</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ricb</span> <span class="n">ricb</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">wol</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">nic_stats</span> <span class="n">nic_stats</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">active_vlans</span><span class="p">[</span><span class="n">BITS_TO_LONGS</span><span class="p">(</span><span class="n">VLAN_N_VID</span><span class="p">)];</span>

	<span class="cm">/* PCI Configuration information for this device */</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pdev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">ndev</span><span class="p">;</span>	<span class="cm">/* Parent NET device */</span>

	<span class="cm">/* Hardware information */</span>
	<span class="n">u32</span> <span class="n">chip_rev_id</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fw_rev_id</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">func</span><span class="p">;</span>		<span class="cm">/* PCI function for this adapter */</span>
	<span class="n">u32</span> <span class="n">alt_func</span><span class="p">;</span>		<span class="cm">/* PCI function for alternate adapter */</span>
	<span class="n">u32</span> <span class="n">port</span><span class="p">;</span>		<span class="cm">/* Port number this adapter */</span>

	<span class="n">spinlock_t</span> <span class="n">adapter_lock</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">hw_lock</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">stats_lock</span><span class="p">;</span>

	<span class="cm">/* PCI Bus Relative Register Addresses */</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">reg_base</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">doorbell_area</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">doorbell_area_size</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">msg_enable</span><span class="p">;</span>

	<span class="cm">/* Page for Shadow Registers */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">rx_ring_shadow_reg_area</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">rx_ring_shadow_reg_dma</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">tx_ring_shadow_reg_area</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">tx_ring_shadow_reg_dma</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">mailbox_in</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">mailbox_out</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mbox_params</span> <span class="n">idc_mbc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span>	<span class="n">mpi_mutex</span><span class="p">;</span>

	<span class="kt">int</span> <span class="n">tx_ring_size</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rx_ring_size</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">intr_count</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">msix_entry</span> <span class="o">*</span><span class="n">msi_x_entry</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">intr_context</span> <span class="n">intr_context</span><span class="p">[</span><span class="n">MAX_RX_RINGS</span><span class="p">];</span>

	<span class="kt">int</span> <span class="n">tx_ring_count</span><span class="p">;</span>	<span class="cm">/* One per online CPU. */</span>
	<span class="n">u32</span> <span class="n">rss_ring_count</span><span class="p">;</span>	<span class="cm">/* One per irq vector.  */</span>
	<span class="cm">/*</span>
<span class="cm">	 * rx_ring_count =</span>
<span class="cm">	 *  (CPU count * outbound completion rx_ring) +</span>
<span class="cm">	 *  (irq_vector_cnt * inbound (RSS) completion rx_ring)</span>
<span class="cm">	 */</span>
	<span class="kt">int</span> <span class="n">rx_ring_count</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ring_mem_size</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">ring_mem</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">rx_ring</span> <span class="n">rx_ring</span><span class="p">[</span><span class="n">MAX_RX_RINGS</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">tx_ring</span> <span class="n">tx_ring</span><span class="p">[</span><span class="n">MAX_TX_RINGS</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">lbq_buf_order</span><span class="p">;</span>

	<span class="kt">int</span> <span class="n">rx_csum</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">default_rx_queue</span><span class="p">;</span>

	<span class="n">u16</span> <span class="n">rx_coalesce_usecs</span><span class="p">;</span>	<span class="cm">/* cqicb-&gt;int_delay */</span>
	<span class="n">u16</span> <span class="n">rx_max_coalesced_frames</span><span class="p">;</span>	<span class="cm">/* cqicb-&gt;pkt_int_delay */</span>
	<span class="n">u16</span> <span class="n">tx_coalesce_usecs</span><span class="p">;</span>	<span class="cm">/* cqicb-&gt;int_delay */</span>
	<span class="n">u16</span> <span class="n">tx_max_coalesced_frames</span><span class="p">;</span>	<span class="cm">/* cqicb-&gt;pkt_int_delay */</span>

	<span class="n">u32</span> <span class="n">xg_sem_mask</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">port_link_up</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">port_init</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">link_status</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ql_mpi_coredump</span> <span class="o">*</span><span class="n">mpi_coredump</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">core_is_dumped</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">link_config</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">led_config</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">max_frame_size</span><span class="p">;</span>

	<span class="k">union</span> <span class="n">flash_params</span> <span class="n">flash</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">workqueue_struct</span> <span class="o">*</span><span class="n">workqueue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">asic_reset_work</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">mpi_reset_work</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">mpi_work</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">mpi_port_cfg_work</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">mpi_idc_work</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">mpi_core_to_log</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">completion</span> <span class="n">ide_completion</span><span class="p">;</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">nic_operations</span> <span class="o">*</span><span class="n">nic_ops</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">device_id</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">timer</span><span class="p">;</span>
	<span class="n">atomic_t</span> <span class="n">lb_count</span><span class="p">;</span>
	<span class="cm">/* Keep local copy of current mac address. */</span>
	<span class="kt">char</span> <span class="n">current_mac_addr</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Typical Register accessor for memory mapped device.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">ql_read32</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">readl</span><span class="p">(</span><span class="n">qdev</span><span class="o">-&gt;</span><span class="n">reg_base</span> <span class="o">+</span> <span class="n">reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Typical Register accessor for memory mapped device.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">ql_write32</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u32</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">writel</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">qdev</span><span class="o">-&gt;</span><span class="n">reg_base</span> <span class="o">+</span> <span class="n">reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Doorbell Registers:</span>
<span class="cm"> * Doorbell registers are virtual registers in the PCI memory space.</span>
<span class="cm"> * The space is allocated by the chip during PCI initialization.  The</span>
<span class="cm"> * device driver finds the doorbell address in BAR 3 in PCI config space.</span>
<span class="cm"> * The registers are used to control outbound and inbound queues. For</span>
<span class="cm"> * example, the producer index for an outbound queue.  Each queue uses</span>
<span class="cm"> * 1 4k chunk of memory.  The lower half of the space is for outbound</span>
<span class="cm"> * queues. The upper half is for inbound queues.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">ql_write_db_reg</span><span class="p">(</span><span class="n">u32</span> <span class="n">val</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">addr</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">writel</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">addr</span><span class="p">);</span>
	<span class="n">mmiowb</span><span class="p">();</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Shadow Registers:</span>
<span class="cm"> * Outbound queues have a consumer index that is maintained by the chip.</span>
<span class="cm"> * Inbound queues have a producer index that is maintained by the chip.</span>
<span class="cm"> * For lower overhead, these registers are &quot;shadowed&quot; to host memory</span>
<span class="cm"> * which allows the device driver to track the queue progress without</span>
<span class="cm"> * PCI reads. When an entry is placed on an inbound queue, the chip will</span>
<span class="cm"> * update the relevant index register and then copy the value to the</span>
<span class="cm"> * shadow register in host memory.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">ql_read_sh_reg</span><span class="p">(</span><span class="n">__le32</span>  <span class="o">*</span><span class="n">addr</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u32</span> <span class="n">reg</span><span class="p">;</span>
	<span class="n">reg</span> <span class="o">=</span>  <span class="n">le32_to_cpu</span><span class="p">(</span><span class="o">*</span><span class="n">addr</span><span class="p">);</span>
	<span class="n">rmb</span><span class="p">();</span>
	<span class="k">return</span> <span class="n">reg</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">extern</span> <span class="kt">char</span> <span class="n">qlge_driver_name</span><span class="p">[];</span>
<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">qlge_driver_version</span><span class="p">[];</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">ethtool_ops</span> <span class="n">qlge_ethtool_ops</span><span class="p">;</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">ql_sem_spinlock</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">sem_mask</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_sem_unlock</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">sem_mask</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ql_read_xgmac_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ql_get_mac_addr_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">type</span><span class="p">,</span> <span class="n">u16</span> <span class="n">index</span><span class="p">,</span>
			       <span class="n">u32</span> <span class="o">*</span><span class="n">value</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ql_get_routing_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">index</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">value</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ql_write_cfg</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">,</span> <span class="n">u32</span> <span class="n">bit</span><span class="p">,</span>
			<span class="n">u16</span> <span class="n">q_id</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ql_queue_fw_error</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ql_mpi_work</span><span class="p">(</span><span class="k">struct</span> <span class="n">work_struct</span> <span class="o">*</span><span class="n">work</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ql_mpi_reset_work</span><span class="p">(</span><span class="k">struct</span> <span class="n">work_struct</span> <span class="o">*</span><span class="n">work</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ql_mpi_core_to_log</span><span class="p">(</span><span class="k">struct</span> <span class="n">work_struct</span> <span class="o">*</span><span class="n">work</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_wait_reg_rdy</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u32</span> <span class="n">bit</span><span class="p">,</span> <span class="n">u32</span> <span class="n">ebit</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ql_queue_asic_error</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="n">u32</span> <span class="n">ql_enable_completion_interrupt</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">intr</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ql_set_ethtool_ops</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">ndev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_read_xgmac_reg64</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u64</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ql_mpi_idc_work</span><span class="p">(</span><span class="k">struct</span> <span class="n">work_struct</span> <span class="o">*</span><span class="n">work</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ql_mpi_port_cfg_work</span><span class="p">(</span><span class="k">struct</span> <span class="n">work_struct</span> <span class="o">*</span><span class="n">work</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_mb_get_fw_state</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_cam_route_initialize</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_read_mpi_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_write_mpi_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u32</span> <span class="n">data</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_unpause_mpi_risc</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_pause_mpi_risc</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_hard_reset_mpi_risc</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_soft_reset_mpi_risc</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_dump_risc_ram_area</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span>
		<span class="n">u32</span> <span class="n">ram_addr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">word_count</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_core_dump</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">ql_mpi_coredump</span> <span class="o">*</span><span class="n">mpi_coredump</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_mb_about_fw</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_mb_wol_set_magic</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">enable_wol</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_mb_wol_mode</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">wol</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_mb_set_led_cfg</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">led_config</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_mb_get_led_cfg</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ql_link_on</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ql_link_off</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_mb_set_mgmnt_traffic_ctl</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">control</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_mb_get_port_cfg</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_mb_set_port_cfg</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_wait_fifo_empty</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ql_get_dump</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buff</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ql_gen_reg_dump</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">ql_reg_dump</span> <span class="o">*</span><span class="n">mpi_coredump</span><span class="p">);</span>
<span class="n">netdev_tx_t</span> <span class="n">ql_lb_send</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">ndev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ql_check_lb_frame</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_own_firmware</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ql_clean_lb_rx_ring</span><span class="p">(</span><span class="k">struct</span> <span class="n">rx_ring</span> <span class="o">*</span><span class="n">rx_ring</span><span class="p">,</span> <span class="kt">int</span> <span class="n">budget</span><span class="p">);</span>

<span class="cm">/* #define QL_ALL_DUMP */</span>
<span class="cm">/* #define QL_REG_DUMP */</span>
<span class="cm">/* #define QL_DEV_DUMP */</span>
<span class="cm">/* #define QL_CB_DUMP */</span>
<span class="cm">/* #define QL_IB_DUMP */</span>
<span class="cm">/* #define QL_OB_DUMP */</span>

<span class="cp">#ifdef QL_REG_DUMP</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_xgmac_control_regs</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_routing_entries</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_regs</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="cp">#define QL_DUMP_REGS(qdev) ql_dump_regs(qdev)</span>
<span class="cp">#define QL_DUMP_ROUTE(qdev) ql_dump_routing_entries(qdev)</span>
<span class="cp">#define QL_DUMP_XGMAC_CONTROL_REGS(qdev) ql_dump_xgmac_control_regs(qdev)</span>
<span class="cp">#else</span>
<span class="cp">#define QL_DUMP_REGS(qdev)</span>
<span class="cp">#define QL_DUMP_ROUTE(qdev)</span>
<span class="cp">#define QL_DUMP_XGMAC_CONTROL_REGS(qdev)</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef QL_STAT_DUMP</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_stat</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="cp">#define QL_DUMP_STAT(qdev) ql_dump_stat(qdev)</span>
<span class="cp">#else</span>
<span class="cp">#define QL_DUMP_STAT(qdev)</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef QL_DEV_DUMP</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_qdev</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="cp">#define QL_DUMP_QDEV(qdev) ql_dump_qdev(qdev)</span>
<span class="cp">#else</span>
<span class="cp">#define QL_DUMP_QDEV(qdev)</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef QL_CB_DUMP</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_wqicb</span><span class="p">(</span><span class="k">struct</span> <span class="n">wqicb</span> <span class="o">*</span><span class="n">wqicb</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_tx_ring</span><span class="p">(</span><span class="k">struct</span> <span class="n">tx_ring</span> <span class="o">*</span><span class="n">tx_ring</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_ricb</span><span class="p">(</span><span class="k">struct</span> <span class="n">ricb</span> <span class="o">*</span><span class="n">ricb</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_cqicb</span><span class="p">(</span><span class="k">struct</span> <span class="n">cqicb</span> <span class="o">*</span><span class="n">cqicb</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_rx_ring</span><span class="p">(</span><span class="k">struct</span> <span class="n">rx_ring</span> <span class="o">*</span><span class="n">rx_ring</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_hw_cb</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">,</span> <span class="n">u32</span> <span class="n">bit</span><span class="p">,</span> <span class="n">u16</span> <span class="n">q_id</span><span class="p">);</span>
<span class="cp">#define QL_DUMP_RICB(ricb) ql_dump_ricb(ricb)</span>
<span class="cp">#define QL_DUMP_WQICB(wqicb) ql_dump_wqicb(wqicb)</span>
<span class="cp">#define QL_DUMP_TX_RING(tx_ring) ql_dump_tx_ring(tx_ring)</span>
<span class="cp">#define QL_DUMP_CQICB(cqicb) ql_dump_cqicb(cqicb)</span>
<span class="cp">#define QL_DUMP_RX_RING(rx_ring) ql_dump_rx_ring(rx_ring)</span>
<span class="cp">#define QL_DUMP_HW_CB(qdev, size, bit, q_id) \</span>
<span class="cp">		ql_dump_hw_cb(qdev, size, bit, q_id)</span>
<span class="cp">#else</span>
<span class="cp">#define QL_DUMP_RICB(ricb)</span>
<span class="cp">#define QL_DUMP_WQICB(wqicb)</span>
<span class="cp">#define QL_DUMP_TX_RING(tx_ring)</span>
<span class="cp">#define QL_DUMP_CQICB(cqicb)</span>
<span class="cp">#define QL_DUMP_RX_RING(rx_ring)</span>
<span class="cp">#define QL_DUMP_HW_CB(qdev, size, bit, q_id)</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef QL_OB_DUMP</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_tx_desc</span><span class="p">(</span><span class="k">struct</span> <span class="n">tx_buf_desc</span> <span class="o">*</span><span class="n">tbd</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_ob_mac_iocb</span><span class="p">(</span><span class="k">struct</span> <span class="n">ob_mac_iocb_req</span> <span class="o">*</span><span class="n">ob_mac_iocb</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_ob_mac_rsp</span><span class="p">(</span><span class="k">struct</span> <span class="n">ob_mac_iocb_rsp</span> <span class="o">*</span><span class="n">ob_mac_rsp</span><span class="p">);</span>
<span class="cp">#define QL_DUMP_OB_MAC_IOCB(ob_mac_iocb) ql_dump_ob_mac_iocb(ob_mac_iocb)</span>
<span class="cp">#define QL_DUMP_OB_MAC_RSP(ob_mac_rsp) ql_dump_ob_mac_rsp(ob_mac_rsp)</span>
<span class="cp">#else</span>
<span class="cp">#define QL_DUMP_OB_MAC_IOCB(ob_mac_iocb)</span>
<span class="cp">#define QL_DUMP_OB_MAC_RSP(ob_mac_rsp)</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef QL_IB_DUMP</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_ib_mac_rsp</span><span class="p">(</span><span class="k">struct</span> <span class="n">ib_mac_iocb_rsp</span> <span class="o">*</span><span class="n">ib_mac_rsp</span><span class="p">);</span>
<span class="cp">#define QL_DUMP_IB_MAC_RSP(ib_mac_rsp) ql_dump_ib_mac_rsp(ib_mac_rsp)</span>
<span class="cp">#else</span>
<span class="cp">#define QL_DUMP_IB_MAC_RSP(ib_mac_rsp)</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef	QL_ALL_DUMP</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ql_dump_all</span><span class="p">(</span><span class="k">struct</span> <span class="n">ql_adapter</span> <span class="o">*</span><span class="n">qdev</span><span class="p">);</span>
<span class="cp">#define QL_DUMP_ALL(qdev) ql_dump_all(qdev)</span>
<span class="cp">#else</span>
<span class="cp">#define QL_DUMP_ALL(qdev)</span>
<span class="cp">#endif</span>

<span class="cp">#endif </span><span class="cm">/* _QLGE_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
