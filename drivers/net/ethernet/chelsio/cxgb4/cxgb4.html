<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › ethernet › chelsio › cxgb4 › cxgb4.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>cxgb4.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This file is part of the Chelsio T4 Ethernet driver for Linux.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (c) 2003-2010 Chelsio Communications, Inc. All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * This software is available to you under a choice of one of two</span>
<span class="cm"> * licenses.  You may choose to be licensed under the terms of the GNU</span>
<span class="cm"> * General Public License (GPL) Version 2, available from the file</span>
<span class="cm"> * COPYING in the main directory of this source tree, or the</span>
<span class="cm"> * OpenIB.org BSD license below:</span>
<span class="cm"> *</span>
<span class="cm"> *     Redistribution and use in source and binary forms, with or</span>
<span class="cm"> *     without modification, are permitted provided that the following</span>
<span class="cm"> *     conditions are met:</span>
<span class="cm"> *</span>
<span class="cm"> *      - Redistributions of source code must retain the above</span>
<span class="cm"> *        copyright notice, this list of conditions and the following</span>
<span class="cm"> *        disclaimer.</span>
<span class="cm"> *</span>
<span class="cm"> *      - Redistributions in binary form must reproduce the above</span>
<span class="cm"> *        copyright notice, this list of conditions and the following</span>
<span class="cm"> *        disclaimer in the documentation and/or other materials</span>
<span class="cm"> *        provided with the distribution.</span>
<span class="cm"> *</span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span>
<span class="cm"> * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span>
<span class="cm"> * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</span>
<span class="cm"> * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS</span>
<span class="cm"> * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN</span>
<span class="cm"> * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN</span>
<span class="cm"> * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span class="cm"> * SOFTWARE.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __CXGB4_H__</span>
<span class="cp">#define __CXGB4_H__</span>

<span class="cp">#include &lt;linux/bitops.h&gt;</span>
<span class="cp">#include &lt;linux/cache.h&gt;</span>
<span class="cp">#include &lt;linux/interrupt.h&gt;</span>
<span class="cp">#include &lt;linux/list.h&gt;</span>
<span class="cp">#include &lt;linux/netdevice.h&gt;</span>
<span class="cp">#include &lt;linux/pci.h&gt;</span>
<span class="cp">#include &lt;linux/spinlock.h&gt;</span>
<span class="cp">#include &lt;linux/timer.h&gt;</span>
<span class="cp">#include &lt;asm/io.h&gt;</span>
<span class="cp">#include &quot;cxgb4_uld.h&quot;</span>
<span class="cp">#include &quot;t4_hw.h&quot;</span>

<span class="cp">#define FW_VERSION_MAJOR 1</span>
<span class="cp">#define FW_VERSION_MINOR 1</span>
<span class="cp">#define FW_VERSION_MICRO 0</span>

<span class="cp">#define CH_WARN(adap, fmt, ...) dev_warn(adap-&gt;pdev_dev, fmt, ## __VA_ARGS__)</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">MAX_NPORTS</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>     <span class="cm">/* max # of ports */</span>
	<span class="n">SERNUM_LEN</span> <span class="o">=</span> <span class="mi">24</span><span class="p">,</span>    <span class="cm">/* Serial # length */</span>
	<span class="n">EC_LEN</span>     <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>    <span class="cm">/* E/C length */</span>
	<span class="n">ID_LEN</span>     <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>    <span class="cm">/* ID length */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">MEM_EDC0</span><span class="p">,</span>
	<span class="n">MEM_EDC1</span><span class="p">,</span>
	<span class="n">MEM_MC</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">MEMWIN0_APERTURE</span> <span class="o">=</span> <span class="mi">65536</span><span class="p">,</span>
	<span class="n">MEMWIN0_BASE</span>     <span class="o">=</span> <span class="mh">0x30000</span><span class="p">,</span>
	<span class="n">MEMWIN1_APERTURE</span> <span class="o">=</span> <span class="mi">32768</span><span class="p">,</span>
	<span class="n">MEMWIN1_BASE</span>     <span class="o">=</span> <span class="mh">0x28000</span><span class="p">,</span>
	<span class="n">MEMWIN2_APERTURE</span> <span class="o">=</span> <span class="mi">2048</span><span class="p">,</span>
	<span class="n">MEMWIN2_BASE</span>     <span class="o">=</span> <span class="mh">0x1b800</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">dev_master</span> <span class="p">{</span>
	<span class="n">MASTER_CANT</span><span class="p">,</span>
	<span class="n">MASTER_MAY</span><span class="p">,</span>
	<span class="n">MASTER_MUST</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">dev_state</span> <span class="p">{</span>
	<span class="n">DEV_STATE_UNINIT</span><span class="p">,</span>
	<span class="n">DEV_STATE_INIT</span><span class="p">,</span>
	<span class="n">DEV_STATE_ERR</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">PAUSE_RX</span>      <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">PAUSE_TX</span>      <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">PAUSE_AUTONEG</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">port_stats</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">tx_octets</span><span class="p">;</span>            <span class="cm">/* total # of octets in good frames */</span>
	<span class="n">u64</span> <span class="n">tx_frames</span><span class="p">;</span>            <span class="cm">/* all good frames */</span>
	<span class="n">u64</span> <span class="n">tx_bcast_frames</span><span class="p">;</span>      <span class="cm">/* all broadcast frames */</span>
	<span class="n">u64</span> <span class="n">tx_mcast_frames</span><span class="p">;</span>      <span class="cm">/* all multicast frames */</span>
	<span class="n">u64</span> <span class="n">tx_ucast_frames</span><span class="p">;</span>      <span class="cm">/* all unicast frames */</span>
	<span class="n">u64</span> <span class="n">tx_error_frames</span><span class="p">;</span>      <span class="cm">/* all error frames */</span>

	<span class="n">u64</span> <span class="n">tx_frames_64</span><span class="p">;</span>         <span class="cm">/* # of Tx frames in a particular range */</span>
	<span class="n">u64</span> <span class="n">tx_frames_65_127</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_frames_128_255</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_frames_256_511</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_frames_512_1023</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_frames_1024_1518</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_frames_1519_max</span><span class="p">;</span>

	<span class="n">u64</span> <span class="n">tx_drop</span><span class="p">;</span>              <span class="cm">/* # of dropped Tx frames */</span>
	<span class="n">u64</span> <span class="n">tx_pause</span><span class="p">;</span>             <span class="cm">/* # of transmitted pause frames */</span>
	<span class="n">u64</span> <span class="n">tx_ppp0</span><span class="p">;</span>              <span class="cm">/* # of transmitted PPP prio 0 frames */</span>
	<span class="n">u64</span> <span class="n">tx_ppp1</span><span class="p">;</span>              <span class="cm">/* # of transmitted PPP prio 1 frames */</span>
	<span class="n">u64</span> <span class="n">tx_ppp2</span><span class="p">;</span>              <span class="cm">/* # of transmitted PPP prio 2 frames */</span>
	<span class="n">u64</span> <span class="n">tx_ppp3</span><span class="p">;</span>              <span class="cm">/* # of transmitted PPP prio 3 frames */</span>
	<span class="n">u64</span> <span class="n">tx_ppp4</span><span class="p">;</span>              <span class="cm">/* # of transmitted PPP prio 4 frames */</span>
	<span class="n">u64</span> <span class="n">tx_ppp5</span><span class="p">;</span>              <span class="cm">/* # of transmitted PPP prio 5 frames */</span>
	<span class="n">u64</span> <span class="n">tx_ppp6</span><span class="p">;</span>              <span class="cm">/* # of transmitted PPP prio 6 frames */</span>
	<span class="n">u64</span> <span class="n">tx_ppp7</span><span class="p">;</span>              <span class="cm">/* # of transmitted PPP prio 7 frames */</span>

	<span class="n">u64</span> <span class="n">rx_octets</span><span class="p">;</span>            <span class="cm">/* total # of octets in good frames */</span>
	<span class="n">u64</span> <span class="n">rx_frames</span><span class="p">;</span>            <span class="cm">/* all good frames */</span>
	<span class="n">u64</span> <span class="n">rx_bcast_frames</span><span class="p">;</span>      <span class="cm">/* all broadcast frames */</span>
	<span class="n">u64</span> <span class="n">rx_mcast_frames</span><span class="p">;</span>      <span class="cm">/* all multicast frames */</span>
	<span class="n">u64</span> <span class="n">rx_ucast_frames</span><span class="p">;</span>      <span class="cm">/* all unicast frames */</span>
	<span class="n">u64</span> <span class="n">rx_too_long</span><span class="p">;</span>          <span class="cm">/* # of frames exceeding MTU */</span>
	<span class="n">u64</span> <span class="n">rx_jabber</span><span class="p">;</span>            <span class="cm">/* # of jabber frames */</span>
	<span class="n">u64</span> <span class="n">rx_fcs_err</span><span class="p">;</span>           <span class="cm">/* # of received frames with bad FCS */</span>
	<span class="n">u64</span> <span class="n">rx_len_err</span><span class="p">;</span>           <span class="cm">/* # of received frames with length error */</span>
	<span class="n">u64</span> <span class="n">rx_symbol_err</span><span class="p">;</span>        <span class="cm">/* symbol errors */</span>
	<span class="n">u64</span> <span class="n">rx_runt</span><span class="p">;</span>              <span class="cm">/* # of short frames */</span>

	<span class="n">u64</span> <span class="n">rx_frames_64</span><span class="p">;</span>         <span class="cm">/* # of Rx frames in a particular range */</span>
	<span class="n">u64</span> <span class="n">rx_frames_65_127</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_frames_128_255</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_frames_256_511</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_frames_512_1023</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_frames_1024_1518</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_frames_1519_max</span><span class="p">;</span>

	<span class="n">u64</span> <span class="n">rx_pause</span><span class="p">;</span>             <span class="cm">/* # of received pause frames */</span>
	<span class="n">u64</span> <span class="n">rx_ppp0</span><span class="p">;</span>              <span class="cm">/* # of received PPP prio 0 frames */</span>
	<span class="n">u64</span> <span class="n">rx_ppp1</span><span class="p">;</span>              <span class="cm">/* # of received PPP prio 1 frames */</span>
	<span class="n">u64</span> <span class="n">rx_ppp2</span><span class="p">;</span>              <span class="cm">/* # of received PPP prio 2 frames */</span>
	<span class="n">u64</span> <span class="n">rx_ppp3</span><span class="p">;</span>              <span class="cm">/* # of received PPP prio 3 frames */</span>
	<span class="n">u64</span> <span class="n">rx_ppp4</span><span class="p">;</span>              <span class="cm">/* # of received PPP prio 4 frames */</span>
	<span class="n">u64</span> <span class="n">rx_ppp5</span><span class="p">;</span>              <span class="cm">/* # of received PPP prio 5 frames */</span>
	<span class="n">u64</span> <span class="n">rx_ppp6</span><span class="p">;</span>              <span class="cm">/* # of received PPP prio 6 frames */</span>
	<span class="n">u64</span> <span class="n">rx_ppp7</span><span class="p">;</span>              <span class="cm">/* # of received PPP prio 7 frames */</span>

	<span class="n">u64</span> <span class="n">rx_ovflow0</span><span class="p">;</span>           <span class="cm">/* drops due to buffer-group 0 overflows */</span>
	<span class="n">u64</span> <span class="n">rx_ovflow1</span><span class="p">;</span>           <span class="cm">/* drops due to buffer-group 1 overflows */</span>
	<span class="n">u64</span> <span class="n">rx_ovflow2</span><span class="p">;</span>           <span class="cm">/* drops due to buffer-group 2 overflows */</span>
	<span class="n">u64</span> <span class="n">rx_ovflow3</span><span class="p">;</span>           <span class="cm">/* drops due to buffer-group 3 overflows */</span>
	<span class="n">u64</span> <span class="n">rx_trunc0</span><span class="p">;</span>            <span class="cm">/* buffer-group 0 truncated packets */</span>
	<span class="n">u64</span> <span class="n">rx_trunc1</span><span class="p">;</span>            <span class="cm">/* buffer-group 1 truncated packets */</span>
	<span class="n">u64</span> <span class="n">rx_trunc2</span><span class="p">;</span>            <span class="cm">/* buffer-group 2 truncated packets */</span>
	<span class="n">u64</span> <span class="n">rx_trunc3</span><span class="p">;</span>            <span class="cm">/* buffer-group 3 truncated packets */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">lb_port_stats</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">octets</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">frames</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">bcast_frames</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">mcast_frames</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">ucast_frames</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">error_frames</span><span class="p">;</span>

	<span class="n">u64</span> <span class="n">frames_64</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">frames_65_127</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">frames_128_255</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">frames_256_511</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">frames_512_1023</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">frames_1024_1518</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">frames_1519_max</span><span class="p">;</span>

	<span class="n">u64</span> <span class="n">drop</span><span class="p">;</span>

	<span class="n">u64</span> <span class="n">ovflow0</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">ovflow1</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">ovflow2</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">ovflow3</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">trunc0</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">trunc1</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">trunc2</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">trunc3</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">tp_tcp_stats</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">tcpOutRsts</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tcpInSegs</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tcpOutSegs</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tcpRetransSegs</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">tp_err_stats</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">macInErrs</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">hdrInErrs</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">tcpInErrs</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">tnlCongDrops</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">ofldChanDrops</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">tnlTxDrops</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">ofldVlanDrops</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">tcp6InErrs</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">ofldNoNeigh</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ofldCongDefer</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">tp_params</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ntxchan</span><span class="p">;</span>        <span class="cm">/* # of Tx channels */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tre</span><span class="p">;</span>            <span class="cm">/* log2 of core clocks per TP tick */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">vpd_params</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cclk</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ec</span><span class="p">[</span><span class="n">EC_LEN</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">sn</span><span class="p">[</span><span class="n">SERNUM_LEN</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">id</span><span class="p">[</span><span class="n">ID_LEN</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">pci_params</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">speed</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">width</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">adapter_params</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">tp_params</span>  <span class="n">tp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">vpd_params</span> <span class="n">vpd</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_params</span> <span class="n">pci</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sf_size</span><span class="p">;</span>             <span class="cm">/* serial flash size in bytes */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sf_nsec</span><span class="p">;</span>             <span class="cm">/* # of flash sectors */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sf_fw_start</span><span class="p">;</span>         <span class="cm">/* start of FW image in flash */</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fw_vers</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tp_vers</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">api_vers</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>

	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">mtus</span><span class="p">[</span><span class="n">NMTUS</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">a_wnd</span><span class="p">[</span><span class="n">NCCTRL_WIN</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">b_wnd</span><span class="p">[</span><span class="n">NCCTRL_WIN</span><span class="p">];</span>

	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">nports</span><span class="p">;</span>             <span class="cm">/* # of ethernet ports */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">portvec</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">rev</span><span class="p">;</span>                <span class="cm">/* chip revision */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">offload</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ofldq_wr_cred</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">trace_params</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">data</span><span class="p">[</span><span class="n">TRACE_LEN</span> <span class="o">/</span> <span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">mask</span><span class="p">[</span><span class="n">TRACE_LEN</span> <span class="o">/</span> <span class="mi">4</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">snap_len</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">min_len</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">skip_ofst</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">skip_len</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">invert</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">port</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">link_config</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">supported</span><span class="p">;</span>        <span class="cm">/* link capabilities */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">advertising</span><span class="p">;</span>      <span class="cm">/* advertised capabilities */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">requested_speed</span><span class="p">;</span>  <span class="cm">/* speed user has requested */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">speed</span><span class="p">;</span>            <span class="cm">/* actual link speed */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>  <span class="n">requested_fc</span><span class="p">;</span>     <span class="cm">/* flow control user has requested */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>  <span class="n">fc</span><span class="p">;</span>               <span class="cm">/* actual link flow control */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>  <span class="n">autoneg</span><span class="p">;</span>          <span class="cm">/* autonegotiating? */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>  <span class="n">link_ok</span><span class="p">;</span>          <span class="cm">/* link up? */</span>
<span class="p">};</span>

<span class="cp">#define FW_LEN16(fw_struct) FW_CMD_LEN16(sizeof(fw_struct) / 16)</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">MAX_ETH_QSETS</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>           <span class="cm">/* # of Ethernet Tx/Rx queue sets */</span>
	<span class="n">MAX_OFLD_QSETS</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>          <span class="cm">/* # of offload Tx/Rx queue sets */</span>
	<span class="n">MAX_CTRL_QUEUES</span> <span class="o">=</span> <span class="n">NCHAN</span><span class="p">,</span>      <span class="cm">/* # of control Tx queues */</span>
	<span class="n">MAX_RDMA_QUEUES</span> <span class="o">=</span> <span class="n">NCHAN</span><span class="p">,</span>      <span class="cm">/* # of streaming RDMA Rx queues */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">MAX_EGRQ</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span>         <span class="cm">/* max # of egress queues, including FLs */</span>
	<span class="n">MAX_INGQ</span> <span class="o">=</span> <span class="mi">64</span>           <span class="cm">/* max # of interrupt-capable ingress queues */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">adapter</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">sge_rspq</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">port_info</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">;</span>
	<span class="n">u16</span>    <span class="n">viid</span><span class="p">;</span>
	<span class="n">s16</span>    <span class="n">xact_addr_filt</span><span class="p">;</span>        <span class="cm">/* index of exact MAC address filter */</span>
	<span class="n">u16</span>    <span class="n">rss_size</span><span class="p">;</span>              <span class="cm">/* size of VI&#39;s RSS table slice */</span>
	<span class="n">s8</span>     <span class="n">mdio_addr</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">port_type</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">mod_type</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">port_id</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">tx_chan</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">lport</span><span class="p">;</span>                 <span class="cm">/* associated offload logical port */</span>
	<span class="n">u8</span>     <span class="n">nqsets</span><span class="p">;</span>                <span class="cm">/* # of qsets */</span>
	<span class="n">u8</span>     <span class="n">first_qset</span><span class="p">;</span>            <span class="cm">/* index of first qset */</span>
	<span class="n">u8</span>     <span class="n">rss_mode</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">link_config</span> <span class="n">link_cfg</span><span class="p">;</span>
	<span class="n">u16</span>   <span class="o">*</span><span class="n">rss</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">dentry</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">work_struct</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>                                 <span class="cm">/* adapter flags */</span>
	<span class="n">FULL_INIT_DONE</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">USING_MSI</span>          <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">USING_MSIX</span>         <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span>
	<span class="n">FW_OK</span>              <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rx_sw_desc</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">sge_fl</span> <span class="p">{</span>                     <span class="cm">/* SGE free-buffer queue state */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">avail</span><span class="p">;</span>         <span class="cm">/* # of available Rx buffers */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pend_cred</span><span class="p">;</span>     <span class="cm">/* new buffers since last FL DB ring */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cidx</span><span class="p">;</span>          <span class="cm">/* consumer index */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pidx</span><span class="p">;</span>          <span class="cm">/* producer index */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">alloc_failed</span><span class="p">;</span> <span class="cm">/* # of times buffer allocation failed */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">large_alloc_failed</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">starving</span><span class="p">;</span>
	<span class="cm">/* RO fields */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cntxt_id</span><span class="p">;</span>      <span class="cm">/* SGE context id for the free list */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">;</span>          <span class="cm">/* capacity of free list */</span>
	<span class="k">struct</span> <span class="n">rx_sw_desc</span> <span class="o">*</span><span class="n">sdesc</span><span class="p">;</span>   <span class="cm">/* address of SW Rx descriptor ring */</span>
	<span class="n">__be64</span> <span class="o">*</span><span class="n">desc</span><span class="p">;</span>               <span class="cm">/* address of HW Rx descriptor ring */</span>
	<span class="n">dma_addr_t</span> <span class="n">addr</span><span class="p">;</span>            <span class="cm">/* bus address of HW ring start */</span>
<span class="p">};</span>

<span class="cm">/* A packet gather list */</span>
<span class="k">struct</span> <span class="n">pkt_gl</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">page_frag</span> <span class="n">frags</span><span class="p">[</span><span class="n">MAX_SKB_FRAGS</span><span class="p">];</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">va</span><span class="p">;</span>                         <span class="cm">/* virtual address of first byte */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nfrags</span><span class="p">;</span>              <span class="cm">/* # of fragments */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tot_len</span><span class="p">;</span>             <span class="cm">/* total length of fragments */</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">rspq_handler_t</span><span class="p">)(</span><span class="k">struct</span> <span class="n">sge_rspq</span> <span class="o">*</span><span class="n">q</span><span class="p">,</span> <span class="k">const</span> <span class="n">__be64</span> <span class="o">*</span><span class="n">rsp</span><span class="p">,</span>
			      <span class="k">const</span> <span class="k">struct</span> <span class="n">pkt_gl</span> <span class="o">*</span><span class="n">gl</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">sge_rspq</span> <span class="p">{</span>                   <span class="cm">/* state for an SGE response queue */</span>
	<span class="k">struct</span> <span class="n">napi_struct</span> <span class="n">napi</span><span class="p">;</span>
	<span class="k">const</span> <span class="n">__be64</span> <span class="o">*</span><span class="n">cur_desc</span><span class="p">;</span>     <span class="cm">/* current descriptor in queue */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cidx</span><span class="p">;</span>          <span class="cm">/* consumer index */</span>
	<span class="n">u8</span> <span class="n">gen</span><span class="p">;</span>                     <span class="cm">/* current generation bit */</span>
	<span class="n">u8</span> <span class="n">intr_params</span><span class="p">;</span>             <span class="cm">/* interrupt holdoff parameters */</span>
	<span class="n">u8</span> <span class="n">next_intr_params</span><span class="p">;</span>        <span class="cm">/* holdoff params for next interrupt */</span>
	<span class="n">u8</span> <span class="n">pktcnt_idx</span><span class="p">;</span>              <span class="cm">/* interrupt packet threshold */</span>
	<span class="n">u8</span> <span class="n">uld</span><span class="p">;</span>                     <span class="cm">/* ULD handling this queue */</span>
	<span class="n">u8</span> <span class="n">idx</span><span class="p">;</span>                     <span class="cm">/* queue index within its group */</span>
	<span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>                 <span class="cm">/* offset into current Rx buffer */</span>
	<span class="n">u16</span> <span class="n">cntxt_id</span><span class="p">;</span>               <span class="cm">/* SGE context id for the response q */</span>
	<span class="n">u16</span> <span class="n">abs_id</span><span class="p">;</span>                 <span class="cm">/* absolute SGE id for the response q */</span>
	<span class="n">__be64</span> <span class="o">*</span><span class="n">desc</span><span class="p">;</span>               <span class="cm">/* address of HW response ring */</span>
	<span class="n">dma_addr_t</span> <span class="n">phys_addr</span><span class="p">;</span>       <span class="cm">/* physical address of the ring */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">iqe_len</span><span class="p">;</span>       <span class="cm">/* entry size */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">;</span>          <span class="cm">/* capacity of response queue */</span>
	<span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">netdev</span><span class="p">;</span>  <span class="cm">/* associated net device */</span>
	<span class="n">rspq_handler_t</span> <span class="n">handler</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">sge_eth_stats</span> <span class="p">{</span>              <span class="cm">/* Ethernet queue statistics */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">pkts</span><span class="p">;</span>         <span class="cm">/* # of ethernet packets */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">lro_pkts</span><span class="p">;</span>     <span class="cm">/* # of LRO super packets */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">lro_merged</span><span class="p">;</span>   <span class="cm">/* # of wire packets merged by LRO */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">rx_cso</span><span class="p">;</span>       <span class="cm">/* # of Rx checksum offloads */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">vlan_ex</span><span class="p">;</span>      <span class="cm">/* # of Rx VLAN extractions */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">rx_drops</span><span class="p">;</span>     <span class="cm">/* # of packets dropped due to no mem */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">sge_eth_rxq</span> <span class="p">{</span>                <span class="cm">/* SW Ethernet Rx queue */</span>
	<span class="k">struct</span> <span class="n">sge_rspq</span> <span class="n">rspq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sge_fl</span> <span class="n">fl</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sge_eth_stats</span> <span class="n">stats</span><span class="p">;</span>
<span class="p">}</span> <span class="n">____cacheline_aligned_in_smp</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">sge_ofld_stats</span> <span class="p">{</span>             <span class="cm">/* offload queue statistics */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">pkts</span><span class="p">;</span>         <span class="cm">/* # of packets */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">imm</span><span class="p">;</span>          <span class="cm">/* # of immediate-data packets */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">an</span><span class="p">;</span>           <span class="cm">/* # of asynchronous notifications */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">nomem</span><span class="p">;</span>        <span class="cm">/* # of responses deferred due to no mem */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">sge_ofld_rxq</span> <span class="p">{</span>               <span class="cm">/* SW offload Rx queue */</span>
	<span class="k">struct</span> <span class="n">sge_rspq</span> <span class="n">rspq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sge_fl</span> <span class="n">fl</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sge_ofld_stats</span> <span class="n">stats</span><span class="p">;</span>
<span class="p">}</span> <span class="n">____cacheline_aligned_in_smp</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">tx_desc</span> <span class="p">{</span>
	<span class="n">__be64</span> <span class="n">flit</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">tx_sw_desc</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">sge_txq</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">in_use</span><span class="p">;</span>       <span class="cm">/* # of in-use Tx descriptors */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">size</span><span class="p">;</span>         <span class="cm">/* # of descriptors */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">cidx</span><span class="p">;</span>         <span class="cm">/* SW consumer index */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">pidx</span><span class="p">;</span>         <span class="cm">/* producer index */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">stops</span><span class="p">;</span>        <span class="cm">/* # of times q has been stopped */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">restarts</span><span class="p">;</span>     <span class="cm">/* # of queue restarts */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">cntxt_id</span><span class="p">;</span>     <span class="cm">/* SGE context id for the Tx q */</span>
	<span class="k">struct</span> <span class="n">tx_desc</span> <span class="o">*</span><span class="n">desc</span><span class="p">;</span>       <span class="cm">/* address of HW Tx descriptor ring */</span>
	<span class="k">struct</span> <span class="n">tx_sw_desc</span> <span class="o">*</span><span class="n">sdesc</span><span class="p">;</span>   <span class="cm">/* address of SW Tx descriptor ring */</span>
	<span class="k">struct</span> <span class="n">sge_qstat</span> <span class="o">*</span><span class="n">stat</span><span class="p">;</span>     <span class="cm">/* queue status entry */</span>
	<span class="n">dma_addr_t</span>    <span class="n">phys_addr</span><span class="p">;</span>    <span class="cm">/* physical address of the ring */</span>
	<span class="n">spinlock_t</span> <span class="n">db_lock</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">db_disabled</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">db_pidx</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">sge_eth_txq</span> <span class="p">{</span>                <span class="cm">/* state for an SGE Ethernet Tx queue */</span>
	<span class="k">struct</span> <span class="n">sge_txq</span> <span class="n">q</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">netdev_queue</span> <span class="o">*</span><span class="n">txq</span><span class="p">;</span>   <span class="cm">/* associated netdev TX queue */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">tso</span><span class="p">;</span>          <span class="cm">/* # of TSO requests */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">tx_cso</span><span class="p">;</span>       <span class="cm">/* # of Tx checksum offloads */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">vlan_ins</span><span class="p">;</span>     <span class="cm">/* # of Tx VLAN insertions */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mapping_err</span><span class="p">;</span>  <span class="cm">/* # of I/O MMU packet mapping errors */</span>
<span class="p">}</span> <span class="n">____cacheline_aligned_in_smp</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">sge_ofld_txq</span> <span class="p">{</span>               <span class="cm">/* state for an SGE offload Tx queue */</span>
	<span class="k">struct</span> <span class="n">sge_txq</span> <span class="n">q</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="n">sendq</span><span class="p">;</span>  <span class="cm">/* list of backpressured packets */</span>
	<span class="k">struct</span> <span class="n">tasklet_struct</span> <span class="n">qresume_tsk</span><span class="p">;</span> <span class="cm">/* restarts the queue */</span>
	<span class="n">u8</span> <span class="n">full</span><span class="p">;</span>                    <span class="cm">/* the Tx ring is full */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mapping_err</span><span class="p">;</span>  <span class="cm">/* # of I/O MMU packet mapping errors */</span>
<span class="p">}</span> <span class="n">____cacheline_aligned_in_smp</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">sge_ctrl_txq</span> <span class="p">{</span>               <span class="cm">/* state for an SGE control Tx queue */</span>
	<span class="k">struct</span> <span class="n">sge_txq</span> <span class="n">q</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="n">sendq</span><span class="p">;</span>  <span class="cm">/* list of backpressured packets */</span>
	<span class="k">struct</span> <span class="n">tasklet_struct</span> <span class="n">qresume_tsk</span><span class="p">;</span> <span class="cm">/* restarts the queue */</span>
	<span class="n">u8</span> <span class="n">full</span><span class="p">;</span>                    <span class="cm">/* the Tx ring is full */</span>
<span class="p">}</span> <span class="n">____cacheline_aligned_in_smp</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">sge</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">sge_eth_txq</span> <span class="n">ethtxq</span><span class="p">[</span><span class="n">MAX_ETH_QSETS</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">sge_ofld_txq</span> <span class="n">ofldtxq</span><span class="p">[</span><span class="n">MAX_OFLD_QSETS</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">sge_ctrl_txq</span> <span class="n">ctrlq</span><span class="p">[</span><span class="n">MAX_CTRL_QUEUES</span><span class="p">];</span>

	<span class="k">struct</span> <span class="n">sge_eth_rxq</span> <span class="n">ethrxq</span><span class="p">[</span><span class="n">MAX_ETH_QSETS</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">sge_ofld_rxq</span> <span class="n">ofldrxq</span><span class="p">[</span><span class="n">MAX_OFLD_QSETS</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">sge_ofld_rxq</span> <span class="n">rdmarxq</span><span class="p">[</span><span class="n">MAX_RDMA_QUEUES</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">sge_rspq</span> <span class="n">fw_evtq</span> <span class="n">____cacheline_aligned_in_smp</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">sge_rspq</span> <span class="n">intrq</span> <span class="n">____cacheline_aligned_in_smp</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">intrq_lock</span><span class="p">;</span>

	<span class="n">u16</span> <span class="n">max_ethqsets</span><span class="p">;</span>           <span class="cm">/* # of available Ethernet queue sets */</span>
	<span class="n">u16</span> <span class="n">ethqsets</span><span class="p">;</span>               <span class="cm">/* # of active Ethernet queue sets */</span>
	<span class="n">u16</span> <span class="n">ethtxq_rover</span><span class="p">;</span>           <span class="cm">/* Tx queue to clean up next */</span>
	<span class="n">u16</span> <span class="n">ofldqsets</span><span class="p">;</span>              <span class="cm">/* # of active offload queue sets */</span>
	<span class="n">u16</span> <span class="n">rdmaqs</span><span class="p">;</span>                 <span class="cm">/* # of available RDMA Rx queues */</span>
	<span class="n">u16</span> <span class="n">ofld_rxq</span><span class="p">[</span><span class="n">MAX_OFLD_QSETS</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">rdma_rxq</span><span class="p">[</span><span class="n">NCHAN</span><span class="p">];</span>
	<span class="n">u16</span> <span class="n">timer_val</span><span class="p">[</span><span class="n">SGE_NTIMERS</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">counter_val</span><span class="p">[</span><span class="n">SGE_NCOUNTERS</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">starve_thres</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">idma_state</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">egr_start</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ingr_start</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">egr_map</span><span class="p">[</span><span class="n">MAX_EGRQ</span><span class="p">];</span>    <span class="cm">/* qid-&gt;queue egress queue map */</span>
	<span class="k">struct</span> <span class="n">sge_rspq</span> <span class="o">*</span><span class="n">ingr_map</span><span class="p">[</span><span class="n">MAX_INGQ</span><span class="p">];</span> <span class="cm">/* qid-&gt;queue ingress queue map */</span>
	<span class="n">DECLARE_BITMAP</span><span class="p">(</span><span class="n">starving_fl</span><span class="p">,</span> <span class="n">MAX_EGRQ</span><span class="p">);</span>
	<span class="n">DECLARE_BITMAP</span><span class="p">(</span><span class="n">txq_maperr</span><span class="p">,</span> <span class="n">MAX_EGRQ</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">rx_timer</span><span class="p">;</span> <span class="cm">/* refills starving FLs */</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">tx_timer</span><span class="p">;</span> <span class="cm">/* checks Tx queues */</span>
<span class="p">};</span>

<span class="cp">#define for_each_ethrxq(sge, i) for (i = 0; i &lt; (sge)-&gt;ethqsets; i++)</span>
<span class="cp">#define for_each_ofldrxq(sge, i) for (i = 0; i &lt; (sge)-&gt;ofldqsets; i++)</span>
<span class="cp">#define for_each_rdmarxq(sge, i) for (i = 0; i &lt; (sge)-&gt;rdmaqs; i++)</span>

<span class="k">struct</span> <span class="n">l2t_data</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">adapter</span> <span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regs</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pdev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">pdev_dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fn</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">;</span>

	<span class="kt">int</span> <span class="n">msg_enable</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">adapter_params</span> <span class="n">params</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cxgb4_virt_res</span> <span class="n">vres</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">swintr</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">wol</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">vec</span><span class="p">;</span>
		<span class="kt">char</span> <span class="n">desc</span><span class="p">[</span><span class="n">IFNAMSIZ</span> <span class="o">+</span> <span class="mi">10</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">msix_info</span><span class="p">[</span><span class="n">MAX_INGQ</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>

	<span class="k">struct</span> <span class="n">sge</span> <span class="n">sge</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">port</span><span class="p">[</span><span class="n">MAX_NPORTS</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">chan_map</span><span class="p">[</span><span class="n">NCHAN</span><span class="p">];</span>                   <span class="cm">/* channel -&gt; port map */</span>

	<span class="k">struct</span> <span class="n">l2t_data</span> <span class="o">*</span><span class="n">l2t</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">uld_handle</span><span class="p">[</span><span class="n">CXGB4_ULD_MAX</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list_node</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">tid_info</span> <span class="n">tids</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">**</span><span class="n">tid_release_head</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">tid_release_lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">tid_release_task</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">db_full_task</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">db_drop_task</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">tid_release_task_busy</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="n">debugfs_root</span><span class="p">;</span>

	<span class="n">spinlock_t</span> <span class="n">stats_lock</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">t4_read_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg_addr</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">readl</span><span class="p">(</span><span class="n">adap</span><span class="o">-&gt;</span><span class="n">regs</span> <span class="o">+</span> <span class="n">reg_addr</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">t4_write_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg_addr</span><span class="p">,</span> <span class="n">u32</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">writel</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">adap</span><span class="o">-&gt;</span><span class="n">regs</span> <span class="o">+</span> <span class="n">reg_addr</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#ifndef readq</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u64</span> <span class="nf">readq</span><span class="p">(</span><span class="k">const</span> <span class="k">volatile</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">addr</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">readl</span><span class="p">(</span><span class="n">addr</span><span class="p">)</span> <span class="o">+</span> <span class="p">((</span><span class="n">u64</span><span class="p">)</span><span class="n">readl</span><span class="p">(</span><span class="n">addr</span> <span class="o">+</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">32</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">writeq</span><span class="p">(</span><span class="n">u64</span> <span class="n">val</span><span class="p">,</span> <span class="k">volatile</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">addr</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">writel</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">addr</span><span class="p">);</span>
	<span class="n">writel</span><span class="p">(</span><span class="n">val</span> <span class="o">&gt;&gt;</span> <span class="mi">32</span><span class="p">,</span> <span class="n">addr</span> <span class="o">+</span> <span class="mi">4</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u64</span> <span class="nf">t4_read_reg64</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg_addr</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">readq</span><span class="p">(</span><span class="n">adap</span><span class="o">-&gt;</span><span class="n">regs</span> <span class="o">+</span> <span class="n">reg_addr</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">t4_write_reg64</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg_addr</span><span class="p">,</span> <span class="n">u64</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">writeq</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">adap</span><span class="o">-&gt;</span><span class="n">regs</span> <span class="o">+</span> <span class="n">reg_addr</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * netdev2pinfo - return the port_info structure associated with a net_device</span>
<span class="cm"> * @dev: the netdev</span>
<span class="cm"> *</span>
<span class="cm"> * Return the struct port_info associated with a net_device</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">port_info</span> <span class="o">*</span><span class="nf">netdev2pinfo</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">netdev_priv</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * adap2pinfo - return the port_info of a port</span>
<span class="cm"> * @adap: the adapter</span>
<span class="cm"> * @idx: the port index</span>
<span class="cm"> *</span>
<span class="cm"> * Return the port_info structure for the port of the given index.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">port_info</span> <span class="o">*</span><span class="nf">adap2pinfo</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">netdev_priv</span><span class="p">(</span><span class="n">adap</span><span class="o">-&gt;</span><span class="n">port</span><span class="p">[</span><span class="n">idx</span><span class="p">]);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * netdev2adap - return the adapter structure associated with a net_device</span>
<span class="cm"> * @dev: the netdev</span>
<span class="cm"> *</span>
<span class="cm"> * Return the struct adapter associated with a net_device</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="nf">netdev2adap</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">netdev2pinfo</span><span class="p">(</span><span class="n">dev</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">adapter</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">t4_os_portmod_changed</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">port_id</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t4_os_link_changed</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">port_id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">link_stat</span><span class="p">);</span>

<span class="kt">void</span> <span class="o">*</span><span class="n">t4_alloc_mem</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">size</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">t4_free_sge_resources</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">);</span>
<span class="n">irq_handler_t</span> <span class="n">t4_intr_handler</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">);</span>
<span class="n">netdev_tx_t</span> <span class="n">t4_eth_xmit</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_ethrx_handler</span><span class="p">(</span><span class="k">struct</span> <span class="n">sge_rspq</span> <span class="o">*</span><span class="n">q</span><span class="p">,</span> <span class="k">const</span> <span class="n">__be64</span> <span class="o">*</span><span class="n">rsp</span><span class="p">,</span>
		     <span class="k">const</span> <span class="k">struct</span> <span class="n">pkt_gl</span> <span class="o">*</span><span class="n">gl</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_mgmt_tx</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_ofld_send</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_sge_alloc_rxq</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sge_rspq</span> <span class="o">*</span><span class="n">iq</span><span class="p">,</span> <span class="n">bool</span> <span class="n">fwevtq</span><span class="p">,</span>
		     <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">intr_idx</span><span class="p">,</span>
		     <span class="k">struct</span> <span class="n">sge_fl</span> <span class="o">*</span><span class="n">fl</span><span class="p">,</span> <span class="n">rspq_handler_t</span> <span class="n">hnd</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_sge_alloc_eth_txq</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sge_eth_txq</span> <span class="o">*</span><span class="n">txq</span><span class="p">,</span>
			 <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">netdev_queue</span> <span class="o">*</span><span class="n">netdevq</span><span class="p">,</span>
			 <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">iqid</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_sge_alloc_ctrl_txq</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sge_ctrl_txq</span> <span class="o">*</span><span class="n">txq</span><span class="p">,</span>
			  <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">iqid</span><span class="p">,</span>
			  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cmplqid</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_sge_alloc_ofld_txq</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sge_ofld_txq</span> <span class="o">*</span><span class="n">txq</span><span class="p">,</span>
			  <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">iqid</span><span class="p">);</span>
<span class="n">irqreturn_t</span> <span class="n">t4_sge_intr_msix</span><span class="p">(</span><span class="kt">int</span> <span class="n">irq</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">cookie</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t4_sge_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t4_sge_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t4_sge_stop</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">dbfifo_int_thresh</span><span class="p">;</span>

<span class="cp">#define for_each_port(adapter, iter) \</span>
<span class="cp">	for (iter = 0; iter &lt; (adapter)-&gt;params.nports; ++iter)</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">core_ticks_per_usec</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">adap</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">.</span><span class="n">vpd</span><span class="p">.</span><span class="n">cclk</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">us_to_core_ticks</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span>
					    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">us</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">us</span> <span class="o">*</span> <span class="n">adap</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">.</span><span class="n">vpd</span><span class="p">.</span><span class="n">cclk</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">t4_set_reg_field</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">addr</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">,</span>
		      <span class="n">u32</span> <span class="n">val</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">t4_wr_mbox_meat</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">cmd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">,</span>
		    <span class="kt">void</span> <span class="o">*</span><span class="n">rpl</span><span class="p">,</span> <span class="n">bool</span> <span class="n">sleep_ok</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">t4_wr_mbox</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">cmd</span><span class="p">,</span>
			     <span class="kt">int</span> <span class="n">size</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">rpl</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">t4_wr_mbox_meat</span><span class="p">(</span><span class="n">adap</span><span class="p">,</span> <span class="n">mbox</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">rpl</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">t4_wr_mbox_ns</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">cmd</span><span class="p">,</span>
				<span class="kt">int</span> <span class="n">size</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">rpl</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">t4_wr_mbox_meat</span><span class="p">(</span><span class="n">adap</span><span class="p">,</span> <span class="n">mbox</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">rpl</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">t4_intr_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t4_intr_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_slow_intr_handler</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">t4_wait_dev_ready</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_link_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port</span><span class="p">,</span>
		  <span class="k">struct</span> <span class="n">link_config</span> <span class="o">*</span><span class="n">lc</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_restart_aneg</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_seeprom_wp</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="n">bool</span> <span class="n">enable</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_load_fw</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">fw_data</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_check_fw_version</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_prep_adapter</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_port_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">vf</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t4_fatal_err</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_config_rss_range</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">viid</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="k">const</span> <span class="n">u16</span> <span class="o">*</span><span class="n">rspq</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nrspq</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_config_glbl_rss</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">,</span>
		       <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_mc_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span> <span class="n">__be32</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">u64</span> <span class="o">*</span><span class="n">parity</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_edc_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span> <span class="n">__be32</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span>
		<span class="n">u64</span> <span class="o">*</span><span class="n">parity</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">t4_get_port_stats</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">,</span> <span class="k">struct</span> <span class="n">port_stats</span> <span class="o">*</span><span class="n">p</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t4_read_mtu_tbl</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">mtus</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">mtu_log</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t4_tp_get_tcp_stats</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="k">struct</span> <span class="n">tp_tcp_stats</span> <span class="o">*</span><span class="n">v4</span><span class="p">,</span>
			 <span class="k">struct</span> <span class="n">tp_tcp_stats</span> <span class="o">*</span><span class="n">v6</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t4_load_mtus</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">mtus</span><span class="p">,</span>
		  <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">alpha</span><span class="p">,</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">beta</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">t4_wol_magic_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port</span><span class="p">,</span>
			 <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">addr</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_wol_pat_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">map</span><span class="p">,</span>
		      <span class="n">u64</span> <span class="n">mask0</span><span class="p">,</span> <span class="n">u64</span> <span class="n">mask1</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">crc</span><span class="p">,</span> <span class="n">bool</span> <span class="n">enable</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">t4_fw_hello</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">evt_mbox</span><span class="p">,</span>
		<span class="k">enum</span> <span class="n">dev_master</span> <span class="n">master</span><span class="p">,</span> <span class="k">enum</span> <span class="n">dev_state</span> <span class="o">*</span><span class="n">state</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_fw_bye</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_early_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_fw_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reset</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_query_params</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pf</span><span class="p">,</span>
		    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nparams</span><span class="p">,</span> <span class="k">const</span> <span class="n">u32</span> <span class="o">*</span><span class="n">params</span><span class="p">,</span>
		    <span class="n">u32</span> <span class="o">*</span><span class="n">val</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_set_params</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pf</span><span class="p">,</span>
		  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nparams</span><span class="p">,</span> <span class="k">const</span> <span class="n">u32</span> <span class="o">*</span><span class="n">params</span><span class="p">,</span>
		  <span class="k">const</span> <span class="n">u32</span> <span class="o">*</span><span class="n">val</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_cfg_pfvf</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pf</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">txq</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">txq_eth_ctrl</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rxqi</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rxq</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tc</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vi</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cmask</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pmask</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nexact</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rcaps</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">wxcaps</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_alloc_vi</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nmac</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">mac</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">rss_size</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_set_rxmode</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">viid</span><span class="p">,</span>
		<span class="kt">int</span> <span class="n">mtu</span><span class="p">,</span> <span class="kt">int</span> <span class="n">promisc</span><span class="p">,</span> <span class="kt">int</span> <span class="n">all_multi</span><span class="p">,</span> <span class="kt">int</span> <span class="n">bcast</span><span class="p">,</span> <span class="kt">int</span> <span class="n">vlanex</span><span class="p">,</span>
		<span class="n">bool</span> <span class="n">sleep_ok</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_alloc_mac_filt</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span>
		      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">viid</span><span class="p">,</span> <span class="n">bool</span> <span class="n">free</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">naddr</span><span class="p">,</span>
		      <span class="k">const</span> <span class="n">u8</span> <span class="o">**</span><span class="n">addr</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">idx</span><span class="p">,</span> <span class="n">u64</span> <span class="o">*</span><span class="n">hash</span><span class="p">,</span> <span class="n">bool</span> <span class="n">sleep_ok</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_change_mac</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">viid</span><span class="p">,</span>
		  <span class="kt">int</span> <span class="n">idx</span><span class="p">,</span> <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">addr</span><span class="p">,</span> <span class="n">bool</span> <span class="n">persist</span><span class="p">,</span> <span class="n">bool</span> <span class="n">add_smt</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_set_addr_hash</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">viid</span><span class="p">,</span>
		     <span class="n">bool</span> <span class="n">ucast</span><span class="p">,</span> <span class="n">u64</span> <span class="n">vec</span><span class="p">,</span> <span class="n">bool</span> <span class="n">sleep_ok</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_enable_vi</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">viid</span><span class="p">,</span>
		 <span class="n">bool</span> <span class="n">rx_en</span><span class="p">,</span> <span class="n">bool</span> <span class="n">tx_en</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_identify_port</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">viid</span><span class="p">,</span>
		     <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nblinks</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_mdio_rd</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">phy_addr</span><span class="p">,</span>
	       <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mmd</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">valp</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_mdio_wr</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">phy_addr</span><span class="p">,</span>
	       <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mmd</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u16</span> <span class="n">val</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_iq_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pf</span><span class="p">,</span>
	       <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">iqtype</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">iqid</span><span class="p">,</span>
	       <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fl0id</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fl1id</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_eth_eq_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pf</span><span class="p">,</span>
		   <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">eqid</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_ctrl_eq_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pf</span><span class="p">,</span>
		    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">eqid</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_ofld_eq_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pf</span><span class="p">,</span>
		    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">eqid</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_handle_fw_rpl</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="k">const</span> <span class="n">__be64</span> <span class="o">*</span><span class="n">rpl</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t4_db_full</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t4_db_dropped</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_mem_win_read_len</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span> <span class="n">__be32</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t4_fwaddrspace_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mbox</span><span class="p">,</span>
			 <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span> <span class="n">u32</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* __CXGB4_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
