<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › ethernet › chelsio › cxgb4 › t4_msg.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>t4_msg.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This file is part of the Chelsio T4 Ethernet driver for Linux.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (c) 2003-2010 Chelsio Communications, Inc. All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * This software is available to you under a choice of one of two</span>
<span class="cm"> * licenses.  You may choose to be licensed under the terms of the GNU</span>
<span class="cm"> * General Public License (GPL) Version 2, available from the file</span>
<span class="cm"> * COPYING in the main directory of this source tree, or the</span>
<span class="cm"> * OpenIB.org BSD license below:</span>
<span class="cm"> *</span>
<span class="cm"> *     Redistribution and use in source and binary forms, with or</span>
<span class="cm"> *     without modification, are permitted provided that the following</span>
<span class="cm"> *     conditions are met:</span>
<span class="cm"> *</span>
<span class="cm"> *      - Redistributions of source code must retain the above</span>
<span class="cm"> *        copyright notice, this list of conditions and the following</span>
<span class="cm"> *        disclaimer.</span>
<span class="cm"> *</span>
<span class="cm"> *      - Redistributions in binary form must reproduce the above</span>
<span class="cm"> *        copyright notice, this list of conditions and the following</span>
<span class="cm"> *        disclaimer in the documentation and/or other materials</span>
<span class="cm"> *        provided with the distribution.</span>
<span class="cm"> *</span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span>
<span class="cm"> * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span>
<span class="cm"> * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</span>
<span class="cm"> * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS</span>
<span class="cm"> * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN</span>
<span class="cm"> * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN</span>
<span class="cm"> * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span class="cm"> * SOFTWARE.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __T4_MSG_H</span>
<span class="cp">#define __T4_MSG_H</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">CPL_PASS_OPEN_REQ</span>     <span class="o">=</span> <span class="mh">0x1</span><span class="p">,</span>
	<span class="n">CPL_PASS_ACCEPT_RPL</span>   <span class="o">=</span> <span class="mh">0x2</span><span class="p">,</span>
	<span class="n">CPL_ACT_OPEN_REQ</span>      <span class="o">=</span> <span class="mh">0x3</span><span class="p">,</span>
	<span class="n">CPL_SET_TCB_FIELD</span>     <span class="o">=</span> <span class="mh">0x5</span><span class="p">,</span>
	<span class="n">CPL_GET_TCB</span>           <span class="o">=</span> <span class="mh">0x6</span><span class="p">,</span>
	<span class="n">CPL_CLOSE_CON_REQ</span>     <span class="o">=</span> <span class="mh">0x8</span><span class="p">,</span>
	<span class="n">CPL_CLOSE_LISTSRV_REQ</span> <span class="o">=</span> <span class="mh">0x9</span><span class="p">,</span>
	<span class="n">CPL_ABORT_REQ</span>         <span class="o">=</span> <span class="mh">0xA</span><span class="p">,</span>
	<span class="n">CPL_ABORT_RPL</span>         <span class="o">=</span> <span class="mh">0xB</span><span class="p">,</span>
	<span class="n">CPL_RX_DATA_ACK</span>       <span class="o">=</span> <span class="mh">0xD</span><span class="p">,</span>
	<span class="n">CPL_TX_PKT</span>            <span class="o">=</span> <span class="mh">0xE</span><span class="p">,</span>
	<span class="n">CPL_L2T_WRITE_REQ</span>     <span class="o">=</span> <span class="mh">0x12</span><span class="p">,</span>
	<span class="n">CPL_TID_RELEASE</span>       <span class="o">=</span> <span class="mh">0x1A</span><span class="p">,</span>

	<span class="n">CPL_CLOSE_LISTSRV_RPL</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span>
	<span class="n">CPL_L2T_WRITE_RPL</span>     <span class="o">=</span> <span class="mh">0x23</span><span class="p">,</span>
	<span class="n">CPL_PASS_OPEN_RPL</span>     <span class="o">=</span> <span class="mh">0x24</span><span class="p">,</span>
	<span class="n">CPL_ACT_OPEN_RPL</span>      <span class="o">=</span> <span class="mh">0x25</span><span class="p">,</span>
	<span class="n">CPL_PEER_CLOSE</span>        <span class="o">=</span> <span class="mh">0x26</span><span class="p">,</span>
	<span class="n">CPL_ABORT_REQ_RSS</span>     <span class="o">=</span> <span class="mh">0x2B</span><span class="p">,</span>
	<span class="n">CPL_ABORT_RPL_RSS</span>     <span class="o">=</span> <span class="mh">0x2D</span><span class="p">,</span>

	<span class="n">CPL_CLOSE_CON_RPL</span>     <span class="o">=</span> <span class="mh">0x32</span><span class="p">,</span>
	<span class="n">CPL_ISCSI_HDR</span>         <span class="o">=</span> <span class="mh">0x33</span><span class="p">,</span>
	<span class="n">CPL_RDMA_CQE</span>          <span class="o">=</span> <span class="mh">0x35</span><span class="p">,</span>
	<span class="n">CPL_RDMA_CQE_READ_RSP</span> <span class="o">=</span> <span class="mh">0x36</span><span class="p">,</span>
	<span class="n">CPL_RDMA_CQE_ERR</span>      <span class="o">=</span> <span class="mh">0x37</span><span class="p">,</span>
	<span class="n">CPL_RX_DATA</span>           <span class="o">=</span> <span class="mh">0x39</span><span class="p">,</span>
	<span class="n">CPL_SET_TCB_RPL</span>       <span class="o">=</span> <span class="mh">0x3A</span><span class="p">,</span>
	<span class="n">CPL_RX_PKT</span>            <span class="o">=</span> <span class="mh">0x3B</span><span class="p">,</span>
	<span class="n">CPL_RX_DDP_COMPLETE</span>   <span class="o">=</span> <span class="mh">0x3F</span><span class="p">,</span>

	<span class="n">CPL_ACT_ESTABLISH</span>     <span class="o">=</span> <span class="mh">0x40</span><span class="p">,</span>
	<span class="n">CPL_PASS_ESTABLISH</span>    <span class="o">=</span> <span class="mh">0x41</span><span class="p">,</span>
	<span class="n">CPL_RX_DATA_DDP</span>       <span class="o">=</span> <span class="mh">0x42</span><span class="p">,</span>
	<span class="n">CPL_PASS_ACCEPT_REQ</span>   <span class="o">=</span> <span class="mh">0x44</span><span class="p">,</span>

	<span class="n">CPL_RDMA_READ_REQ</span>     <span class="o">=</span> <span class="mh">0x60</span><span class="p">,</span>

	<span class="n">CPL_PASS_OPEN_REQ6</span>    <span class="o">=</span> <span class="mh">0x81</span><span class="p">,</span>
	<span class="n">CPL_ACT_OPEN_REQ6</span>     <span class="o">=</span> <span class="mh">0x83</span><span class="p">,</span>

	<span class="n">CPL_RDMA_TERMINATE</span>    <span class="o">=</span> <span class="mh">0xA2</span><span class="p">,</span>
	<span class="n">CPL_RDMA_WRITE</span>        <span class="o">=</span> <span class="mh">0xA4</span><span class="p">,</span>
	<span class="n">CPL_SGE_EGR_UPDATE</span>    <span class="o">=</span> <span class="mh">0xA5</span><span class="p">,</span>

	<span class="n">CPL_TRACE_PKT</span>         <span class="o">=</span> <span class="mh">0xB0</span><span class="p">,</span>

	<span class="n">CPL_FW4_MSG</span>           <span class="o">=</span> <span class="mh">0xC0</span><span class="p">,</span>
	<span class="n">CPL_FW4_PLD</span>           <span class="o">=</span> <span class="mh">0xC1</span><span class="p">,</span>
	<span class="n">CPL_FW4_ACK</span>           <span class="o">=</span> <span class="mh">0xC3</span><span class="p">,</span>

	<span class="n">CPL_FW6_MSG</span>           <span class="o">=</span> <span class="mh">0xE0</span><span class="p">,</span>
	<span class="n">CPL_FW6_PLD</span>           <span class="o">=</span> <span class="mh">0xE1</span><span class="p">,</span>
	<span class="n">CPL_TX_PKT_LSO</span>        <span class="o">=</span> <span class="mh">0xED</span><span class="p">,</span>
	<span class="n">CPL_TX_PKT_XT</span>         <span class="o">=</span> <span class="mh">0xEE</span><span class="p">,</span>

	<span class="n">NUM_CPL_CMDS</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">CPL_error</span> <span class="p">{</span>
	<span class="n">CPL_ERR_NONE</span>               <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">CPL_ERR_TCAM_FULL</span>          <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">CPL_ERR_BAD_LENGTH</span>         <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
	<span class="n">CPL_ERR_BAD_ROUTE</span>          <span class="o">=</span> <span class="mi">18</span><span class="p">,</span>
	<span class="n">CPL_ERR_CONN_RESET</span>         <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
	<span class="n">CPL_ERR_CONN_EXIST_SYNRECV</span> <span class="o">=</span> <span class="mi">21</span><span class="p">,</span>
	<span class="n">CPL_ERR_CONN_EXIST</span>         <span class="o">=</span> <span class="mi">22</span><span class="p">,</span>
	<span class="n">CPL_ERR_ARP_MISS</span>           <span class="o">=</span> <span class="mi">23</span><span class="p">,</span>
	<span class="n">CPL_ERR_BAD_SYN</span>            <span class="o">=</span> <span class="mi">24</span><span class="p">,</span>
	<span class="n">CPL_ERR_CONN_TIMEDOUT</span>      <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
	<span class="n">CPL_ERR_XMIT_TIMEDOUT</span>      <span class="o">=</span> <span class="mi">31</span><span class="p">,</span>
	<span class="n">CPL_ERR_PERSIST_TIMEDOUT</span>   <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
	<span class="n">CPL_ERR_FINWAIT2_TIMEDOUT</span>  <span class="o">=</span> <span class="mi">33</span><span class="p">,</span>
	<span class="n">CPL_ERR_KEEPALIVE_TIMEDOUT</span> <span class="o">=</span> <span class="mi">34</span><span class="p">,</span>
	<span class="n">CPL_ERR_RTX_NEG_ADVICE</span>     <span class="o">=</span> <span class="mi">35</span><span class="p">,</span>
	<span class="n">CPL_ERR_PERSIST_NEG_ADVICE</span> <span class="o">=</span> <span class="mi">36</span><span class="p">,</span>
	<span class="n">CPL_ERR_ABORT_FAILED</span>       <span class="o">=</span> <span class="mi">42</span><span class="p">,</span>
	<span class="n">CPL_ERR_IWARP_FLM</span>          <span class="o">=</span> <span class="mi">50</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">ULP_MODE_NONE</span>          <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">ULP_MODE_ISCSI</span>         <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">ULP_MODE_RDMA</span>          <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">ULP_MODE_TCPDDP</span>	       <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">ULP_MODE_FCOE</span>          <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">ULP_CRC_HEADER</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">ULP_CRC_DATA</span>   <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">CPL_ABORT_SEND_RST</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">CPL_ABORT_NO_RST</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>                     <span class="cm">/* TX_PKT_XT checksum types */</span>
	<span class="n">TX_CSUM_TCP</span>    <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">TX_CSUM_UDP</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">TX_CSUM_CRC16</span>  <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">TX_CSUM_CRC32</span>  <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">TX_CSUM_CRC32C</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">TX_CSUM_FCOE</span>   <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">TX_CSUM_TCPIP</span>  <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">TX_CSUM_UDPIP</span>  <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">TX_CSUM_TCPIP6</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">TX_CSUM_UDPIP6</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
	<span class="n">TX_CSUM_IP</span>     <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">opcode_tid</span> <span class="p">{</span>
	<span class="n">__be32</span> <span class="n">opcode_tid</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define CPL_OPCODE(x) ((x) &lt;&lt; 24)</span>
<span class="cp">#define MK_OPCODE_TID(opcode, tid) (CPL_OPCODE(opcode) | (tid))</span>
<span class="cp">#define OPCODE_TID(cmd) ((cmd)-&gt;ot.opcode_tid)</span>
<span class="cp">#define GET_TID(cmd) (ntohl(OPCODE_TID(cmd)) &amp; 0xFFFFFF)</span>

<span class="cm">/* partitioning of TID fields that also carry a queue id */</span>
<span class="cp">#define GET_TID_TID(x) ((x) &amp; 0x3fff)</span>
<span class="cp">#define GET_TID_QID(x) (((x) &gt;&gt; 14) &amp; 0x3ff)</span>
<span class="cp">#define TID_QID(x)     ((x) &lt;&lt; 14)</span>

<span class="k">struct</span> <span class="n">rss_header</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
<span class="cp">#if defined(__LITTLE_ENDIAN_BITFIELD)</span>
	<span class="n">u8</span> <span class="n">channel</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">filter_hit</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">filter_tid</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">hash_type</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ipv6</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">send2fw</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#else</span>
	<span class="n">u8</span> <span class="n">send2fw</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ipv6</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">hash_type</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">filter_tid</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">filter_hit</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">channel</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="n">__be16</span> <span class="n">qid</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">hash_val</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">work_request_hdr</span> <span class="p">{</span>
	<span class="n">__be32</span> <span class="n">wr_hi</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">wr_mid</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">wr_lo</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define WR_HDR struct work_request_hdr wr</span>

<span class="k">struct</span> <span class="n">cpl_pass_open_req</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">local_port</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">peer_port</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">local_ip</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">peer_ip</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">opt0</span><span class="p">;</span>
<span class="cp">#define TX_CHAN(x)    ((x) &lt;&lt; 2)</span>
<span class="cp">#define DELACK(x)     ((x) &lt;&lt; 5)</span>
<span class="cp">#define ULP_MODE(x)   ((x) &lt;&lt; 8)</span>
<span class="cp">#define RCV_BUFSIZ(x) ((x) &lt;&lt; 12)</span>
<span class="cp">#define DSCP(x)       ((x) &lt;&lt; 22)</span>
<span class="cp">#define SMAC_SEL(x)   ((u64)(x) &lt;&lt; 28)</span>
<span class="cp">#define L2T_IDX(x)    ((u64)(x) &lt;&lt; 36)</span>
<span class="cp">#define NAGLE(x)      ((u64)(x) &lt;&lt; 49)</span>
<span class="cp">#define WND_SCALE(x)  ((u64)(x) &lt;&lt; 50)</span>
<span class="cp">#define KEEP_ALIVE(x) ((u64)(x) &lt;&lt; 54)</span>
<span class="cp">#define MSS_IDX(x)    ((u64)(x) &lt;&lt; 60)</span>
	<span class="n">__be64</span> <span class="n">opt1</span><span class="p">;</span>
<span class="cp">#define SYN_RSS_ENABLE   (1 &lt;&lt; 0)</span>
<span class="cp">#define SYN_RSS_QUEUE(x) ((x) &lt;&lt; 2)</span>
<span class="cp">#define CONN_POLICY_ASK  (1 &lt;&lt; 22)</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_pass_open_req6</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">local_port</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">peer_port</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">local_ip_hi</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">local_ip_lo</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">peer_ip_hi</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">peer_ip_lo</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">opt0</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">opt1</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_pass_open_rpl</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_pass_accept_rpl</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">opt2</span><span class="p">;</span>
<span class="cp">#define RSS_QUEUE(x)         ((x) &lt;&lt; 0)</span>
<span class="cp">#define RSS_QUEUE_VALID      (1 &lt;&lt; 10)</span>
<span class="cp">#define RX_COALESCE_VALID(x) ((x) &lt;&lt; 11)</span>
<span class="cp">#define RX_COALESCE(x)       ((x) &lt;&lt; 12)</span>
<span class="cp">#define TX_QUEUE(x)          ((x) &lt;&lt; 23)</span>
<span class="cp">#define RX_CHANNEL(x)        ((x) &lt;&lt; 26)</span>
<span class="cp">#define WND_SCALE_EN(x)      ((x) &lt;&lt; 28)</span>
<span class="cp">#define TSTAMPS_EN(x)        ((x) &lt;&lt; 29)</span>
<span class="cp">#define SACK_EN(x)           ((x) &lt;&lt; 30)</span>
	<span class="n">__be64</span> <span class="n">opt0</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_act_open_req</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">local_port</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">peer_port</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">local_ip</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">peer_ip</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">opt0</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">params</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">opt2</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_act_open_req6</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">local_port</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">peer_port</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">local_ip_hi</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">local_ip_lo</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">peer_ip_hi</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">peer_ip_lo</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">opt0</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">params</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">opt2</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_act_open_rpl</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">atid_status</span><span class="p">;</span>
<span class="cp">#define GET_AOPEN_STATUS(x) ((x) &amp; 0xff)</span>
<span class="cp">#define GET_AOPEN_ATID(x)   (((x) &gt;&gt; 8) &amp; 0xffffff)</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_pass_establish</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">rsvd</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">tos_stid</span><span class="p">;</span>
<span class="cp">#define GET_POPEN_TID(x) ((x) &amp; 0xffffff)</span>
<span class="cp">#define GET_POPEN_TOS(x) (((x) &gt;&gt; 24) &amp; 0xff)</span>
	<span class="n">__be16</span> <span class="n">mac_idx</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">tcp_opt</span><span class="p">;</span>
<span class="cp">#define GET_TCPOPT_WSCALE_OK(x)  (((x) &gt;&gt; 5) &amp; 1)</span>
<span class="cp">#define GET_TCPOPT_SACK(x)       (((x) &gt;&gt; 6) &amp; 1)</span>
<span class="cp">#define GET_TCPOPT_TSTAMP(x)     (((x) &gt;&gt; 7) &amp; 1)</span>
<span class="cp">#define GET_TCPOPT_SND_WSCALE(x) (((x) &gt;&gt; 8) &amp; 0xf)</span>
<span class="cp">#define GET_TCPOPT_MSS(x)        (((x) &gt;&gt; 12) &amp; 0xf)</span>
	<span class="n">__be32</span> <span class="n">snd_isn</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">rcv_isn</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_act_establish</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">rsvd</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">tos_atid</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">mac_idx</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">tcp_opt</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">snd_isn</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">rcv_isn</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_get_tcb</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">reply_ctrl</span><span class="p">;</span>
<span class="cp">#define QUEUENO(x)    ((x) &lt;&lt; 0)</span>
<span class="cp">#define REPLY_CHAN(x) ((x) &lt;&lt; 14)</span>
<span class="cp">#define NO_REPLY(x)   ((x) &lt;&lt; 15)</span>
	<span class="n">__be16</span> <span class="n">cookie</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_set_tcb_field</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">reply_ctrl</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">word_cookie</span><span class="p">;</span>
<span class="cp">#define TCB_WORD(x)   ((x) &lt;&lt; 0)</span>
<span class="cp">#define TCB_COOKIE(x) ((x) &lt;&lt; 5)</span>
	<span class="n">__be64</span> <span class="n">mask</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">val</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_set_tcb_rpl</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">rsvd</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cookie</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">oldval</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_close_con_req</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">rsvd</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_close_con_rpl</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">snd_nxt</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">rcv_nxt</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_close_listsvr_req</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">reply_ctrl</span><span class="p">;</span>
<span class="cp">#define LISTSVR_IPV6 (1 &lt;&lt; 14)</span>
	<span class="n">__be16</span> <span class="n">rsvd</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_close_listsvr_rpl</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_abort_req_rss</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_abort_req</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">rsvd0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cmd</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd2</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_abort_rpl_rss</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_abort_rpl</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">rsvd0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">cmd</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd2</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_peer_close</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">rcv_nxt</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_tid_release</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">rsvd</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_tx_pkt_core</span> <span class="p">{</span>
	<span class="n">__be32</span> <span class="n">ctrl0</span><span class="p">;</span>
<span class="cp">#define TXPKT_VF(x)        ((x) &lt;&lt; 0)</span>
<span class="cp">#define TXPKT_PF(x)        ((x) &lt;&lt; 8)</span>
<span class="cp">#define TXPKT_VF_VLD       (1 &lt;&lt; 11)</span>
<span class="cp">#define TXPKT_OVLAN_IDX(x) ((x) &lt;&lt; 12)</span>
<span class="cp">#define TXPKT_INTF(x)      ((x) &lt;&lt; 16)</span>
<span class="cp">#define TXPKT_INS_OVLAN    (1 &lt;&lt; 21)</span>
<span class="cp">#define TXPKT_OPCODE(x)    ((x) &lt;&lt; 24)</span>
	<span class="n">__be16</span> <span class="n">pack</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">len</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">ctrl1</span><span class="p">;</span>
<span class="cp">#define TXPKT_CSUM_END(x)   ((x) &lt;&lt; 12)</span>
<span class="cp">#define TXPKT_CSUM_START(x) ((x) &lt;&lt; 20)</span>
<span class="cp">#define TXPKT_IPHDR_LEN(x)  ((u64)(x) &lt;&lt; 20)</span>
<span class="cp">#define TXPKT_CSUM_LOC(x)   ((u64)(x) &lt;&lt; 30)</span>
<span class="cp">#define TXPKT_ETHHDR_LEN(x) ((u64)(x) &lt;&lt; 34)</span>
<span class="cp">#define TXPKT_CSUM_TYPE(x)  ((u64)(x) &lt;&lt; 40)</span>
<span class="cp">#define TXPKT_VLAN(x)       ((u64)(x) &lt;&lt; 44)</span>
<span class="cp">#define TXPKT_VLAN_VLD      (1ULL &lt;&lt; 60)</span>
<span class="cp">#define TXPKT_IPCSUM_DIS    (1ULL &lt;&lt; 62)</span>
<span class="cp">#define TXPKT_L4CSUM_DIS    (1ULL &lt;&lt; 63)</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_tx_pkt</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cpl_tx_pkt_core</span> <span class="n">c</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define cpl_tx_pkt_xt cpl_tx_pkt</span>

<span class="k">struct</span> <span class="n">cpl_tx_pkt_lso_core</span> <span class="p">{</span>
	<span class="n">__be32</span> <span class="n">lso_ctrl</span><span class="p">;</span>
<span class="cp">#define LSO_TCPHDR_LEN(x) ((x) &lt;&lt; 0)</span>
<span class="cp">#define LSO_IPHDR_LEN(x)  ((x) &lt;&lt; 4)</span>
<span class="cp">#define LSO_ETHHDR_LEN(x) ((x) &lt;&lt; 16)</span>
<span class="cp">#define LSO_IPV6(x)       ((x) &lt;&lt; 20)</span>
<span class="cp">#define LSO_LAST_SLICE    (1 &lt;&lt; 22)</span>
<span class="cp">#define LSO_FIRST_SLICE   (1 &lt;&lt; 23)</span>
<span class="cp">#define LSO_OPCODE(x)     ((x) &lt;&lt; 24)</span>
	<span class="n">__be16</span> <span class="n">ipid_ofst</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">mss</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">seqno_offset</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">len</span><span class="p">;</span>
	<span class="cm">/* encapsulated CPL (TX_PKT, TX_PKT_XT or TX_DATA) follows here */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_tx_pkt_lso</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cpl_tx_pkt_lso_core</span> <span class="n">c</span><span class="p">;</span>
	<span class="cm">/* encapsulated CPL (TX_PKT, TX_PKT_XT or TX_DATA) follows here */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_iscsi_hdr</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">pdu_len_ddp</span><span class="p">;</span>
<span class="cp">#define ISCSI_PDU_LEN(x) ((x) &amp; 0x7FFF)</span>
<span class="cp">#define ISCSI_DDP        (1 &lt;&lt; 15)</span>
	<span class="n">__be16</span> <span class="n">len</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">seq</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">urg</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_rx_data</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">rsvd</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">len</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">seq</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">urg</span><span class="p">;</span>
<span class="cp">#if defined(__LITTLE_ENDIAN_BITFIELD)</span>
	<span class="n">u8</span> <span class="n">dack_mode</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">psh</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">heartbeat</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ddp_off</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="o">:</span><span class="mi">3</span><span class="p">;</span>
<span class="cp">#else</span>
	<span class="n">u8</span> <span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ddp_off</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">heartbeat</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">psh</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">dack_mode</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="n">u8</span> <span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_rx_data_ack</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">credit_dack</span><span class="p">;</span>
<span class="cp">#define RX_CREDITS(x)   ((x) &lt;&lt; 0)</span>
<span class="cp">#define RX_FORCE_ACK(x) ((x) &lt;&lt; 28)</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_rx_pkt</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">rss_header</span> <span class="n">rsshdr</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
<span class="cp">#if defined(__LITTLE_ENDIAN_BITFIELD)</span>
	<span class="n">u8</span> <span class="n">iff</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">csum_calc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ipmi_pkt</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">vlan_ex</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ip_frag</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#else</span>
	<span class="n">u8</span> <span class="n">ip_frag</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">vlan_ex</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ipmi_pkt</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">csum_calc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">iff</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="n">__be16</span> <span class="n">csum</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">vlan</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">len</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">l2info</span><span class="p">;</span>
<span class="cp">#define RXF_UDP (1 &lt;&lt; 22)</span>
<span class="cp">#define RXF_TCP (1 &lt;&lt; 23)</span>
<span class="cp">#define RXF_IP  (1 &lt;&lt; 24)</span>
<span class="cp">#define RXF_IP6 (1 &lt;&lt; 25)</span>
	<span class="n">__be16</span> <span class="n">hdr_len</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">err_vec</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_trace_pkt</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">intf</span><span class="p">;</span>
<span class="cp">#if defined(__LITTLE_ENDIAN_BITFIELD)</span>
	<span class="n">u8</span> <span class="n">runt</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">filter_hit</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span> <span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">err</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">trunc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#else</span>
	<span class="n">u8</span> <span class="n">filter_hit</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">runt</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">trunc</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">err</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="o">:</span><span class="mi">6</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="n">__be16</span> <span class="n">rsvd</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">len</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">tstamp</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_l2t_write_req</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">params</span><span class="p">;</span>
<span class="cp">#define L2T_W_INFO(x)    ((x) &lt;&lt; 2)</span>
<span class="cp">#define L2T_W_PORT(x)    ((x) &lt;&lt; 8)</span>
<span class="cp">#define L2T_W_NOREPLY(x) ((x) &lt;&lt; 15)</span>
	<span class="n">__be16</span> <span class="n">l2t_idx</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">vlan</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">dst_mac</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_l2t_write_rpl</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_rdma_terminate</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">rsvd</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">len</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_sge_egr_update</span> <span class="p">{</span>
	<span class="n">__be32</span> <span class="n">opcode_qid</span><span class="p">;</span>
<span class="cp">#define EGR_QID(x) ((x) &amp; 0x1FFFF)</span>
	<span class="n">__be16</span> <span class="n">cidx</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">pidx</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_fw4_pld</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd0</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">len</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">data</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">rsvd2</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_fw6_pld</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
	<span class="n">__be16</span> <span class="n">len</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">data</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_fw4_msg</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">rsvd0</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_fw4_ack</span> <span class="p">{</span>
	<span class="k">union</span> <span class="n">opcode_tid</span> <span class="n">ot</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">credits</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rsvd0</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">seq_vld</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">snd_nxt</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">snd_una</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">rsvd1</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cpl_fw6_msg</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">opcode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">rsvd0</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">rsvd1</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">data</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* cpl_fw6_msg.type values */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">FW6_TYPE_CMD_RPL</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">ULP_TX_MEM_READ</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">ULP_TX_MEM_WRITE</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">ULP_TX_PKT</span> <span class="o">=</span> <span class="mi">4</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">ULP_TX_SC_NOOP</span> <span class="o">=</span> <span class="mh">0x80</span><span class="p">,</span>
	<span class="n">ULP_TX_SC_IMM</span>  <span class="o">=</span> <span class="mh">0x81</span><span class="p">,</span>
	<span class="n">ULP_TX_SC_DSGL</span> <span class="o">=</span> <span class="mh">0x82</span><span class="p">,</span>
	<span class="n">ULP_TX_SC_ISGL</span> <span class="o">=</span> <span class="mh">0x83</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ulptx_sge_pair</span> <span class="p">{</span>
	<span class="n">__be32</span> <span class="n">len</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">__be64</span> <span class="n">addr</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ulptx_sgl</span> <span class="p">{</span>
	<span class="n">__be32</span> <span class="n">cmd_nsge</span><span class="p">;</span>
<span class="cp">#define ULPTX_CMD(x) ((x) &lt;&lt; 24)</span>
<span class="cp">#define ULPTX_NSGE(x) ((x) &lt;&lt; 0)</span>
	<span class="n">__be32</span> <span class="n">len0</span><span class="p">;</span>
	<span class="n">__be64</span> <span class="n">addr0</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ulptx_sge_pair</span> <span class="n">sge</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ulp_mem_io</span> <span class="p">{</span>
	<span class="n">WR_HDR</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">cmd</span><span class="p">;</span>
<span class="cp">#define ULP_MEMIO_ORDER(x) ((x) &lt;&lt; 23)</span>
	<span class="n">__be32</span> <span class="n">len16</span><span class="p">;</span>             <span class="cm">/* command length */</span>
	<span class="n">__be32</span> <span class="n">dlen</span><span class="p">;</span>              <span class="cm">/* data length in 32-byte units */</span>
<span class="cp">#define ULP_MEMIO_DATA_LEN(x) ((x) &lt;&lt; 0)</span>
	<span class="n">__be32</span> <span class="n">lock_addr</span><span class="p">;</span>
<span class="cp">#define ULP_MEMIO_ADDR(x) ((x) &lt;&lt; 0)</span>
<span class="cp">#define ULP_MEMIO_LOCK(x) ((x) &lt;&lt; 31)</span>
<span class="p">};</span>

<span class="cp">#endif  </span><span class="cm">/* __T4_MSG_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
