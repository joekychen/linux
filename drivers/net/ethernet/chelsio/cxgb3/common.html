<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › ethernet › chelsio › cxgb3 › common.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>common.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2005-2008 Chelsio, Inc. All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * This software is available to you under a choice of one of two</span>
<span class="cm"> * licenses.  You may choose to be licensed under the terms of the GNU</span>
<span class="cm"> * General Public License (GPL) Version 2, available from the file</span>
<span class="cm"> * COPYING in the main directory of this source tree, or the</span>
<span class="cm"> * OpenIB.org BSD license below:</span>
<span class="cm"> *</span>
<span class="cm"> *     Redistribution and use in source and binary forms, with or</span>
<span class="cm"> *     without modification, are permitted provided that the following</span>
<span class="cm"> *     conditions are met:</span>
<span class="cm"> *</span>
<span class="cm"> *      - Redistributions of source code must retain the above</span>
<span class="cm"> *        copyright notice, this list of conditions and the following</span>
<span class="cm"> *        disclaimer.</span>
<span class="cm"> *</span>
<span class="cm"> *      - Redistributions in binary form must reproduce the above</span>
<span class="cm"> *        copyright notice, this list of conditions and the following</span>
<span class="cm"> *        disclaimer in the documentation and/or other materials</span>
<span class="cm"> *        provided with the distribution.</span>
<span class="cm"> *</span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span>
<span class="cm"> * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span>
<span class="cm"> * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</span>
<span class="cm"> * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS</span>
<span class="cm"> * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN</span>
<span class="cm"> * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN</span>
<span class="cm"> * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span class="cm"> * SOFTWARE.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __CHELSIO_COMMON_H</span>
<span class="cp">#define __CHELSIO_COMMON_H</span>

<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/ctype.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/netdevice.h&gt;</span>
<span class="cp">#include &lt;linux/ethtool.h&gt;</span>
<span class="cp">#include &lt;linux/mdio.h&gt;</span>
<span class="cp">#include &quot;version.h&quot;</span>

<span class="cp">#define CH_ERR(adap, fmt, ...)   dev_err(&amp;adap-&gt;pdev-&gt;dev, fmt, ## __VA_ARGS__)</span>
<span class="cp">#define CH_WARN(adap, fmt, ...)  dev_warn(&amp;adap-&gt;pdev-&gt;dev, fmt, ## __VA_ARGS__)</span>
<span class="cp">#define CH_ALERT(adap, fmt, ...) \</span>
<span class="cp">	dev_printk(KERN_ALERT, &amp;adap-&gt;pdev-&gt;dev, fmt, ## __VA_ARGS__)</span>

<span class="cm">/*</span>
<span class="cm"> * More powerful macro that selectively prints messages based on msg_enable.</span>
<span class="cm"> * For info and debugging messages.</span>
<span class="cm"> */</span>
<span class="cp">#define CH_MSG(adapter, level, category, fmt, ...) do { \</span>
<span class="cp">	if ((adapter)-&gt;msg_enable &amp; NETIF_MSG_##category) \</span>
<span class="cp">		dev_printk(KERN_##level, &amp;adapter-&gt;pdev-&gt;dev, fmt, \</span>
<span class="cp">			   ## __VA_ARGS__); \</span>
<span class="cp">} while (0)</span>

<span class="cp">#ifdef DEBUG</span>
<span class="cp"># define CH_DBG(adapter, category, fmt, ...) \</span>
<span class="cp">	CH_MSG(adapter, DEBUG, category, fmt, ## __VA_ARGS__)</span>
<span class="cp">#else</span>
<span class="cp"># define CH_DBG(adapter, category, fmt, ...)</span>
<span class="cp">#endif</span>

<span class="cm">/* Additional NETIF_MSG_* categories */</span>
<span class="cp">#define NETIF_MSG_MMIO 0x8000000</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">MAX_NPORTS</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>		<span class="cm">/* max # of ports */</span>
	<span class="n">MAX_FRAME_SIZE</span> <span class="o">=</span> <span class="mi">10240</span><span class="p">,</span>	<span class="cm">/* max MAC frame size, including header + FCS */</span>
	<span class="n">EEPROMSIZE</span> <span class="o">=</span> <span class="mi">8192</span><span class="p">,</span>	<span class="cm">/* Serial EEPROM size */</span>
	<span class="n">SERNUM_LEN</span>     <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>    <span class="cm">/* Serial # length */</span>
	<span class="n">RSS_TABLE_SIZE</span> <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>	<span class="cm">/* size of RSS lookup and mapping tables */</span>
	<span class="n">TCB_SIZE</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span>		<span class="cm">/* TCB size */</span>
	<span class="n">NMTUS</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>		<span class="cm">/* size of MTU table */</span>
	<span class="n">NCCTRL_WIN</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>	<span class="cm">/* # of congestion control windows */</span>
	<span class="n">PROTO_SRAM_LINES</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span> <span class="cm">/* size of TP sram */</span>
<span class="p">};</span>

<span class="cp">#define MAX_RX_COALESCING_LEN 12288U</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">PAUSE_RX</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">PAUSE_TX</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">PAUSE_AUTONEG</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">SUPPORTED_IRQ</span>      <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>				<span class="cm">/* adapter interrupt-maintained statistics */</span>
	<span class="n">STAT_ULP_CH0_PBL_OOB</span><span class="p">,</span>
	<span class="n">STAT_ULP_CH1_PBL_OOB</span><span class="p">,</span>
	<span class="n">STAT_PCI_CORR_ECC</span><span class="p">,</span>

	<span class="n">IRQ_NUM_STATS</span>		<span class="cm">/* keep last */</span>
<span class="p">};</span>

<span class="cp">#define TP_VERSION_MAJOR	1</span>
<span class="cp">#define TP_VERSION_MINOR	1</span>
<span class="cp">#define TP_VERSION_MICRO	0</span>

<span class="cp">#define S_TP_VERSION_MAJOR		16</span>
<span class="cp">#define M_TP_VERSION_MAJOR		0xFF</span>
<span class="cp">#define V_TP_VERSION_MAJOR(x)		((x) &lt;&lt; S_TP_VERSION_MAJOR)</span>
<span class="cp">#define G_TP_VERSION_MAJOR(x)		\</span>
<span class="cp">	    (((x) &gt;&gt; S_TP_VERSION_MAJOR) &amp; M_TP_VERSION_MAJOR)</span>

<span class="cp">#define S_TP_VERSION_MINOR		8</span>
<span class="cp">#define M_TP_VERSION_MINOR		0xFF</span>
<span class="cp">#define V_TP_VERSION_MINOR(x)		((x) &lt;&lt; S_TP_VERSION_MINOR)</span>
<span class="cp">#define G_TP_VERSION_MINOR(x)		\</span>
<span class="cp">	    (((x) &gt;&gt; S_TP_VERSION_MINOR) &amp; M_TP_VERSION_MINOR)</span>

<span class="cp">#define S_TP_VERSION_MICRO		0</span>
<span class="cp">#define M_TP_VERSION_MICRO		0xFF</span>
<span class="cp">#define V_TP_VERSION_MICRO(x)		((x) &lt;&lt; S_TP_VERSION_MICRO)</span>
<span class="cp">#define G_TP_VERSION_MICRO(x)		\</span>
<span class="cp">	    (((x) &gt;&gt; S_TP_VERSION_MICRO) &amp; M_TP_VERSION_MICRO)</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">SGE_QSETS</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>		<span class="cm">/* # of SGE Tx/Rx/RspQ sets */</span>
	<span class="n">SGE_RXQ_PER_SET</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/* # of Rx queues per set */</span>
	<span class="n">SGE_TXQ_PER_SET</span> <span class="o">=</span> <span class="mi">3</span>	<span class="cm">/* # of Tx queues per set */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">sge_context_type</span> <span class="p">{</span>		<span class="cm">/* SGE egress context types */</span>
	<span class="n">SGE_CNTXT_RDMA</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">SGE_CNTXT_ETH</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">SGE_CNTXT_OFLD</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">SGE_CNTXT_CTRL</span> <span class="o">=</span> <span class="mi">5</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">AN_PKT_SIZE</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>	<span class="cm">/* async notification packet size */</span>
	<span class="n">IMMED_PKT_SIZE</span> <span class="o">=</span> <span class="mi">48</span>	<span class="cm">/* packet size for immediate data */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">sg_ent</span> <span class="p">{</span>			<span class="cm">/* SGE scatter/gather entry */</span>
	<span class="n">__be32</span> <span class="n">len</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">__be64</span> <span class="n">addr</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#ifndef SGE_NUM_GENBITS</span>
<span class="cm">/* Must be 1 or 2 */</span>
<span class="cp"># define SGE_NUM_GENBITS 2</span>
<span class="cp">#endif</span>

<span class="cp">#define TX_DESC_FLITS 16U</span>
<span class="cp">#define WR_FLITS (TX_DESC_FLITS + 1 - SGE_NUM_GENBITS)</span>

<span class="k">struct</span> <span class="n">cphy</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">adapter</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">mdio_ops</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">read</span><span class="p">)(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">phy_addr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mmd_addr</span><span class="p">,</span>
		    <span class="n">u16</span> <span class="n">reg_addr</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">write</span><span class="p">)(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">phy_addr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mmd_addr</span><span class="p">,</span>
		     <span class="n">u16</span> <span class="n">reg_addr</span><span class="p">,</span> <span class="n">u16</span> <span class="n">val</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="n">mode_support</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">adapter_info</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">nports0</span><span class="p">;</span>        <span class="cm">/* # of ports on channel 0 */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">nports1</span><span class="p">;</span>        <span class="cm">/* # of ports on channel 1 */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">phy_base_addr</span><span class="p">;</span>	<span class="cm">/* MDIO PHY base address */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">gpio_out</span><span class="p">;</span>	<span class="cm">/* GPIO output settings */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">gpio_intr</span><span class="p">[</span><span class="n">MAX_NPORTS</span><span class="p">];</span> <span class="cm">/* GPIO PHY IRQ pins */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">caps</span><span class="p">;</span>	<span class="cm">/* adapter capabilities */</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">mdio_ops</span> <span class="o">*</span><span class="n">mdio_ops</span><span class="p">;</span>	<span class="cm">/* MDIO operations */</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">desc</span><span class="p">;</span>	<span class="cm">/* product description */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mc5_stats</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">parity_err</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">active_rgn_full</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">nfa_srch_err</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">unknown_cmd</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">reqq_parity_err</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dispq_parity_err</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">del_act_empty</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mc7_stats</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">corr_err</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">uncorr_err</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">parity_err</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">addr_err</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mac_stats</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">tx_octets</span><span class="p">;</span>		<span class="cm">/* total # of octets in good frames */</span>
	<span class="n">u64</span> <span class="n">tx_octets_bad</span><span class="p">;</span>	<span class="cm">/* total # of octets in error frames */</span>
	<span class="n">u64</span> <span class="n">tx_frames</span><span class="p">;</span>		<span class="cm">/* all good frames */</span>
	<span class="n">u64</span> <span class="n">tx_mcast_frames</span><span class="p">;</span>	<span class="cm">/* good multicast frames */</span>
	<span class="n">u64</span> <span class="n">tx_bcast_frames</span><span class="p">;</span>	<span class="cm">/* good broadcast frames */</span>
	<span class="n">u64</span> <span class="n">tx_pause</span><span class="p">;</span>		<span class="cm">/* # of transmitted pause frames */</span>
	<span class="n">u64</span> <span class="n">tx_deferred</span><span class="p">;</span>	<span class="cm">/* frames with deferred transmissions */</span>
	<span class="n">u64</span> <span class="n">tx_late_collisions</span><span class="p">;</span>	<span class="cm">/* # of late collisions */</span>
	<span class="n">u64</span> <span class="n">tx_total_collisions</span><span class="p">;</span>	<span class="cm">/* # of total collisions */</span>
	<span class="n">u64</span> <span class="n">tx_excess_collisions</span><span class="p">;</span>	<span class="cm">/* frame errors from excessive collissions */</span>
	<span class="n">u64</span> <span class="n">tx_underrun</span><span class="p">;</span>	<span class="cm">/* # of Tx FIFO underruns */</span>
	<span class="n">u64</span> <span class="n">tx_len_errs</span><span class="p">;</span>	<span class="cm">/* # of Tx length errors */</span>
	<span class="n">u64</span> <span class="n">tx_mac_internal_errs</span><span class="p">;</span>	<span class="cm">/* # of internal MAC errors on Tx */</span>
	<span class="n">u64</span> <span class="n">tx_excess_deferral</span><span class="p">;</span>	<span class="cm">/* # of frames with excessive deferral */</span>
	<span class="n">u64</span> <span class="n">tx_fcs_errs</span><span class="p">;</span>	<span class="cm">/* # of frames with bad FCS */</span>

	<span class="n">u64</span> <span class="n">tx_frames_64</span><span class="p">;</span>	<span class="cm">/* # of Tx frames in a particular range */</span>
	<span class="n">u64</span> <span class="n">tx_frames_65_127</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_frames_128_255</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_frames_256_511</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_frames_512_1023</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_frames_1024_1518</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_frames_1519_max</span><span class="p">;</span>

	<span class="n">u64</span> <span class="n">rx_octets</span><span class="p">;</span>		<span class="cm">/* total # of octets in good frames */</span>
	<span class="n">u64</span> <span class="n">rx_octets_bad</span><span class="p">;</span>	<span class="cm">/* total # of octets in error frames */</span>
	<span class="n">u64</span> <span class="n">rx_frames</span><span class="p">;</span>		<span class="cm">/* all good frames */</span>
	<span class="n">u64</span> <span class="n">rx_mcast_frames</span><span class="p">;</span>	<span class="cm">/* good multicast frames */</span>
	<span class="n">u64</span> <span class="n">rx_bcast_frames</span><span class="p">;</span>	<span class="cm">/* good broadcast frames */</span>
	<span class="n">u64</span> <span class="n">rx_pause</span><span class="p">;</span>		<span class="cm">/* # of received pause frames */</span>
	<span class="n">u64</span> <span class="n">rx_fcs_errs</span><span class="p">;</span>	<span class="cm">/* # of received frames with bad FCS */</span>
	<span class="n">u64</span> <span class="n">rx_align_errs</span><span class="p">;</span>	<span class="cm">/* alignment errors */</span>
	<span class="n">u64</span> <span class="n">rx_symbol_errs</span><span class="p">;</span>	<span class="cm">/* symbol errors */</span>
	<span class="n">u64</span> <span class="n">rx_data_errs</span><span class="p">;</span>	<span class="cm">/* data errors */</span>
	<span class="n">u64</span> <span class="n">rx_sequence_errs</span><span class="p">;</span>	<span class="cm">/* sequence errors */</span>
	<span class="n">u64</span> <span class="n">rx_runt</span><span class="p">;</span>		<span class="cm">/* # of runt frames */</span>
	<span class="n">u64</span> <span class="n">rx_jabber</span><span class="p">;</span>		<span class="cm">/* # of jabber frames */</span>
	<span class="n">u64</span> <span class="n">rx_short</span><span class="p">;</span>		<span class="cm">/* # of short frames */</span>
	<span class="n">u64</span> <span class="n">rx_too_long</span><span class="p">;</span>	<span class="cm">/* # of oversized frames */</span>
	<span class="n">u64</span> <span class="n">rx_mac_internal_errs</span><span class="p">;</span>	<span class="cm">/* # of internal MAC errors on Rx */</span>

	<span class="n">u64</span> <span class="n">rx_frames_64</span><span class="p">;</span>	<span class="cm">/* # of Rx frames in a particular range */</span>
	<span class="n">u64</span> <span class="n">rx_frames_65_127</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_frames_128_255</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_frames_256_511</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_frames_512_1023</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_frames_1024_1518</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_frames_1519_max</span><span class="p">;</span>

	<span class="n">u64</span> <span class="n">rx_cong_drops</span><span class="p">;</span>	<span class="cm">/* # of Rx drops due to SGE congestion */</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">tx_fifo_parity_err</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">rx_fifo_parity_err</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">tx_fifo_urun</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">rx_fifo_ovfl</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">serdes_signal_loss</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">xaui_pcs_ctc_err</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">xaui_pcs_align_change</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">num_toggled</span><span class="p">;</span> <span class="cm">/* # times toggled TxEn due to stuck TX */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">num_resets</span><span class="p">;</span>  <span class="cm">/* # times reset due to stuck TX */</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">link_faults</span><span class="p">;</span>  <span class="cm">/* # detected link faults */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">tp_mib_stats</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">ipInReceive_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipInReceive_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipInHdrErrors_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipInHdrErrors_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipInAddrErrors_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipInAddrErrors_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipInUnknownProtos_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipInUnknownProtos_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipInDiscards_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipInDiscards_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipInDelivers_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipInDelivers_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipOutRequests_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipOutRequests_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipOutDiscards_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipOutDiscards_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipOutNoRoutes_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipOutNoRoutes_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipReasmTimeout</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipReasmReqds</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipReasmOKs</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ipReasmFails</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

	<span class="n">u32</span> <span class="n">tcpActiveOpens</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpPassiveOpens</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpAttemptFails</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpEstabResets</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpOutRsts</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpCurrEstab</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpInSegs_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpInSegs_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpOutSegs_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpOutSegs_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpRetransSeg_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpRetransSeg_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpInErrs_hi</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpInErrs_lo</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpRtoMin</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcpRtoMax</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">tp_params</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nchan</span><span class="p">;</span>	<span class="cm">/* # of channels */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pmrx_size</span><span class="p">;</span>	<span class="cm">/* total PMRX capacity */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pmtx_size</span><span class="p">;</span>	<span class="cm">/* total PMTX capacity */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cm_size</span><span class="p">;</span>	<span class="cm">/* total CM capacity */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">chan_rx_size</span><span class="p">;</span>	<span class="cm">/* per channel Rx size */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">chan_tx_size</span><span class="p">;</span>	<span class="cm">/* per channel Tx size */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rx_pg_size</span><span class="p">;</span>	<span class="cm">/* Rx page size */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tx_pg_size</span><span class="p">;</span>	<span class="cm">/* Tx page size */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rx_num_pgs</span><span class="p">;</span>	<span class="cm">/* # of Rx pages */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tx_num_pgs</span><span class="p">;</span>	<span class="cm">/* # of Tx pages */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ntimer_qs</span><span class="p">;</span>	<span class="cm">/* # of timer queues */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qset_params</span> <span class="p">{</span>		<span class="cm">/* SGE queue set parameters */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">polling</span><span class="p">;</span>	<span class="cm">/* polling/interrupt service for rspq */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">coalesce_usecs</span><span class="p">;</span>	<span class="cm">/* irq coalescing timer */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rspq_size</span><span class="p">;</span>	<span class="cm">/* # of entries in response queue */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fl_size</span><span class="p">;</span>	<span class="cm">/* # of entries in regular free list */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">jumbo_size</span><span class="p">;</span>	<span class="cm">/* # of entries in jumbo free list */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">txq_size</span><span class="p">[</span><span class="n">SGE_TXQ_PER_SET</span><span class="p">];</span>	<span class="cm">/* Tx queue sizes */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cong_thres</span><span class="p">;</span>	<span class="cm">/* FL congestion threshold */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vector</span><span class="p">;</span>		<span class="cm">/* Interrupt (line or vector) number */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">sge_params</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">max_pkt_size</span><span class="p">;</span>	<span class="cm">/* max offload pkt size */</span>
	<span class="k">struct</span> <span class="n">qset_params</span> <span class="n">qset</span><span class="p">[</span><span class="n">SGE_QSETS</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mc5_params</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">;</span>	<span class="cm">/* selects MC5 width */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nservers</span><span class="p">;</span>	<span class="cm">/* size of server region */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nfilters</span><span class="p">;</span>	<span class="cm">/* size of filter region */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nroutes</span><span class="p">;</span>	<span class="cm">/* size of routing region */</span>
<span class="p">};</span>

<span class="cm">/* Default MC5 region sizes */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">DEFAULT_NSERVERS</span> <span class="o">=</span> <span class="mi">512</span><span class="p">,</span>
	<span class="n">DEFAULT_NFILTERS</span> <span class="o">=</span> <span class="mi">128</span>
<span class="p">};</span>

<span class="cm">/* MC5 modes, these must be non-0 */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">MC5_MODE_144_BIT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">MC5_MODE_72_BIT</span> <span class="o">=</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="cm">/* MC5 min active region size */</span>
<span class="k">enum</span> <span class="p">{</span> <span class="n">MC5_MIN_TIDS</span> <span class="o">=</span> <span class="mi">16</span> <span class="p">};</span>

<span class="k">struct</span> <span class="n">vpd_params</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cclk</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mclk</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">uclk</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mdc</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mem_timing</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">sn</span><span class="p">[</span><span class="n">SERNUM_LEN</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">eth_base</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">port_type</span><span class="p">[</span><span class="n">MAX_NPORTS</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">xauicfg</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">pci_params</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vpd_cap_addr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">speed</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">width</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">variant</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">PCI_VARIANT_PCI</span><span class="p">,</span>
	<span class="n">PCI_VARIANT_PCIX_MODE1_PARITY</span><span class="p">,</span>
	<span class="n">PCI_VARIANT_PCIX_MODE1_ECC</span><span class="p">,</span>
	<span class="n">PCI_VARIANT_PCIX_266_MODE2</span><span class="p">,</span>
	<span class="n">PCI_VARIANT_PCIE</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">adapter_params</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">sge_params</span> <span class="n">sge</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mc5_params</span> <span class="n">mc5</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">tp_params</span> <span class="n">tp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">vpd_params</span> <span class="n">vpd</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_params</span> <span class="n">pci</span><span class="p">;</span>

	<span class="k">const</span> <span class="k">struct</span> <span class="n">adapter_info</span> <span class="o">*</span><span class="n">info</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">mtus</span><span class="p">[</span><span class="n">NMTUS</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">a_wnd</span><span class="p">[</span><span class="n">NCCTRL_WIN</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">b_wnd</span><span class="p">[</span><span class="n">NCCTRL_WIN</span><span class="p">];</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nports</span><span class="p">;</span>	<span class="cm">/* # of ethernet ports */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">chan_map</span><span class="p">;</span>  <span class="cm">/* bitmap of in-use Tx channels */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">stats_update_period</span><span class="p">;</span>	<span class="cm">/* MAC stats accumulation period */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">linkpoll_period</span><span class="p">;</span>	<span class="cm">/* link poll period in 0.1s */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rev</span><span class="p">;</span>	<span class="cm">/* chip revision */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offload</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>					    <span class="cm">/* chip revisions */</span>
	<span class="n">T3_REV_A</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">T3_REV_B</span>  <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">T3_REV_B2</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">T3_REV_C</span>  <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">trace_params</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">sip</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">sip_mask</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dip</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dip_mask</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">sport</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">sport_mask</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">dport</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">dport_mask</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vlan</span><span class="o">:</span><span class="mi">12</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">vlan_mask</span><span class="o">:</span><span class="mi">12</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">intf</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">intf_mask</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">proto</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">proto_mask</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">link_config</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">supported</span><span class="p">;</span>	<span class="cm">/* link capabilities */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">advertising</span><span class="p">;</span>	<span class="cm">/* advertised capabilities */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">requested_speed</span><span class="p">;</span>	<span class="cm">/* speed user has requested */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">speed</span><span class="p">;</span>	<span class="cm">/* actual link speed */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">requested_duplex</span><span class="p">;</span>	<span class="cm">/* duplex user has requested */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">duplex</span><span class="p">;</span>	<span class="cm">/* actual link duplex */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">requested_fc</span><span class="p">;</span>	<span class="cm">/* flow control user has requested */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">fc</span><span class="p">;</span>	<span class="cm">/* actual link flow control */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">autoneg</span><span class="p">;</span>	<span class="cm">/* autonegotiating? */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">link_ok</span><span class="p">;</span>	<span class="cm">/* link up? */</span>
<span class="p">};</span>

<span class="cp">#define SPEED_INVALID   0xffff</span>
<span class="cp">#define DUPLEX_INVALID  0xff</span>

<span class="k">struct</span> <span class="n">mc5</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tcam_size</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">part_type</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">parity_enabled</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">mode</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mc5_stats</span> <span class="n">stats</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">t3_mc5_size</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">mc5</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">tcam_size</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">mc7</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">;</span>	<span class="cm">/* backpointer to adapter */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">;</span>	<span class="cm">/* memory size in bytes */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">width</span><span class="p">;</span>	<span class="cm">/* MC7 interface width */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>	<span class="cm">/* register address offset for MC7 instance */</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>	<span class="cm">/* name of MC7 instance */</span>
	<span class="k">struct</span> <span class="n">mc7_stats</span> <span class="n">stats</span><span class="p">;</span>	<span class="cm">/* MC7 statistics */</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">t3_mc7_size</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">mc7</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">cmac</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nucast</span><span class="p">;</span>	<span class="cm">/* # of address filters for unicast MACs */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tx_tcnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tx_xcnt</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">tx_mcnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rx_xcnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rx_ocnt</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_mcnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">toggle_cnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">txen</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">rx_pause</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mac_stats</span> <span class="n">stats</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">MAC_DIRECTION_RX</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">MAC_DIRECTION_TX</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">MAC_RXFIFO_SIZE</span> <span class="o">=</span> <span class="mi">32768</span>
<span class="p">};</span>

<span class="cm">/* PHY loopback direction */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">PHY_LOOPBACK_TX</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">PHY_LOOPBACK_RX</span> <span class="o">=</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="cm">/* PHY interrupt types */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">cphy_cause_link_change</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">cphy_cause_fifo_error</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">cphy_cause_module_change</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* PHY module types */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">phy_modtype_none</span><span class="p">,</span>
	<span class="n">phy_modtype_sr</span><span class="p">,</span>
	<span class="n">phy_modtype_lr</span><span class="p">,</span>
	<span class="n">phy_modtype_lrm</span><span class="p">,</span>
	<span class="n">phy_modtype_twinax</span><span class="p">,</span>
	<span class="n">phy_modtype_twinax_long</span><span class="p">,</span>
	<span class="n">phy_modtype_unknown</span>
<span class="p">};</span>

<span class="cm">/* PHY operations */</span>
<span class="k">struct</span> <span class="n">cphy_ops</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">reset</span><span class="p">)(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="kt">int</span> <span class="n">wait</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">intr_enable</span><span class="p">)(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">intr_disable</span><span class="p">)(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">intr_clear</span><span class="p">)(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">intr_handler</span><span class="p">)(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">autoneg_enable</span><span class="p">)(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">autoneg_restart</span><span class="p">)(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">advertise</span><span class="p">)(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">advertise_map</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_loopback</span><span class="p">)(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mmd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dir</span><span class="p">,</span> <span class="kt">int</span> <span class="n">enable</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_speed_duplex</span><span class="p">)(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="kt">int</span> <span class="n">speed</span><span class="p">,</span> <span class="kt">int</span> <span class="n">duplex</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">get_link_status</span><span class="p">)(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">link_ok</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">speed</span><span class="p">,</span>
			       <span class="kt">int</span> <span class="o">*</span><span class="n">duplex</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">fc</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">power_down</span><span class="p">)(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="kt">int</span> <span class="n">enable</span><span class="p">);</span>

	<span class="n">u32</span> <span class="n">mmds</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">EDC_OPT_AEL2005</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">EDC_OPT_AEL2005_SIZE</span> <span class="o">=</span> <span class="mi">1084</span><span class="p">,</span>
	<span class="n">EDC_TWX_AEL2005</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">EDC_TWX_AEL2005_SIZE</span> <span class="o">=</span> <span class="mi">1464</span><span class="p">,</span>
	<span class="n">EDC_TWX_AEL2020</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">EDC_TWX_AEL2020_SIZE</span> <span class="o">=</span> <span class="mi">1628</span><span class="p">,</span>
	<span class="n">EDC_MAX_SIZE</span> <span class="o">=</span> <span class="n">EDC_TWX_AEL2020_SIZE</span><span class="p">,</span> <span class="cm">/* Max cache size */</span>
<span class="p">};</span>

<span class="cm">/* A PHY instance */</span>
<span class="k">struct</span> <span class="n">cphy</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">modtype</span><span class="p">;</span>			<span class="cm">/* PHY module type */</span>
	<span class="kt">short</span> <span class="n">priv</span><span class="p">;</span>			<span class="cm">/* scratch pad */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">caps</span><span class="p">;</span>		<span class="cm">/* PHY capabilities */</span>
	<span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">;</span>	<span class="cm">/* associated adapter */</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">desc</span><span class="p">;</span>		<span class="cm">/* PHY description */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fifo_errors</span><span class="p">;</span>	<span class="cm">/* FIFO over/under-flows */</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">cphy_ops</span> <span class="o">*</span><span class="n">ops</span><span class="p">;</span>	<span class="cm">/* PHY operations */</span>
	<span class="k">struct</span> <span class="n">mdio_if_info</span> <span class="n">mdio</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">phy_cache</span><span class="p">[</span><span class="n">EDC_MAX_SIZE</span><span class="p">];</span>	<span class="cm">/* EDC cache */</span>
<span class="p">};</span>

<span class="cm">/* Convenience MDIO read/write wrappers */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">t3_mdio_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mmd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span>
			       <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">valp</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">rc</span> <span class="o">=</span> <span class="n">phy</span><span class="o">-&gt;</span><span class="n">mdio</span><span class="p">.</span><span class="n">mdio_read</span><span class="p">(</span><span class="n">phy</span><span class="o">-&gt;</span><span class="n">mdio</span><span class="p">.</span><span class="n">dev</span><span class="p">,</span> <span class="n">phy</span><span class="o">-&gt;</span><span class="n">mdio</span><span class="p">.</span><span class="n">prtad</span><span class="p">,</span> <span class="n">mmd</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
	<span class="o">*</span><span class="n">valp</span> <span class="o">=</span> <span class="p">(</span><span class="n">rc</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="n">rc</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">rc</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">rc</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">t3_mdio_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mmd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span>
				<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">phy</span><span class="o">-&gt;</span><span class="n">mdio</span><span class="p">.</span><span class="n">mdio_write</span><span class="p">(</span><span class="n">phy</span><span class="o">-&gt;</span><span class="n">mdio</span><span class="p">.</span><span class="n">dev</span><span class="p">,</span> <span class="n">phy</span><span class="o">-&gt;</span><span class="n">mdio</span><span class="p">.</span><span class="n">prtad</span><span class="p">,</span> <span class="n">mmd</span><span class="p">,</span>
				    <span class="n">reg</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* Convenience initializer */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">cphy_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
			     <span class="kt">int</span> <span class="n">phy_addr</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cphy_ops</span> <span class="o">*</span><span class="n">phy_ops</span><span class="p">,</span>
			     <span class="k">const</span> <span class="k">struct</span> <span class="n">mdio_ops</span> <span class="o">*</span><span class="n">mdio_ops</span><span class="p">,</span>
			      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">caps</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">desc</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">phy</span><span class="o">-&gt;</span><span class="n">caps</span> <span class="o">=</span> <span class="n">caps</span><span class="p">;</span>
	<span class="n">phy</span><span class="o">-&gt;</span><span class="n">adapter</span> <span class="o">=</span> <span class="n">adapter</span><span class="p">;</span>
	<span class="n">phy</span><span class="o">-&gt;</span><span class="n">desc</span> <span class="o">=</span> <span class="n">desc</span><span class="p">;</span>
	<span class="n">phy</span><span class="o">-&gt;</span><span class="n">ops</span> <span class="o">=</span> <span class="n">phy_ops</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">mdio_ops</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">phy</span><span class="o">-&gt;</span><span class="n">mdio</span><span class="p">.</span><span class="n">prtad</span> <span class="o">=</span> <span class="n">phy_addr</span><span class="p">;</span>
		<span class="n">phy</span><span class="o">-&gt;</span><span class="n">mdio</span><span class="p">.</span><span class="n">mmds</span> <span class="o">=</span> <span class="n">phy_ops</span><span class="o">-&gt;</span><span class="n">mmds</span><span class="p">;</span>
		<span class="n">phy</span><span class="o">-&gt;</span><span class="n">mdio</span><span class="p">.</span><span class="n">mode_support</span> <span class="o">=</span> <span class="n">mdio_ops</span><span class="o">-&gt;</span><span class="n">mode_support</span><span class="p">;</span>
		<span class="n">phy</span><span class="o">-&gt;</span><span class="n">mdio</span><span class="p">.</span><span class="n">mdio_read</span> <span class="o">=</span> <span class="n">mdio_ops</span><span class="o">-&gt;</span><span class="n">read</span><span class="p">;</span>
		<span class="n">phy</span><span class="o">-&gt;</span><span class="n">mdio</span><span class="p">.</span><span class="n">mdio_write</span> <span class="o">=</span> <span class="n">mdio_ops</span><span class="o">-&gt;</span><span class="n">write</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* Accumulate MAC statistics every 180 seconds.  For 1G we multiply by 10. */</span>
<span class="cp">#define MAC_STATS_ACCUM_SECS 180</span>

<span class="cp">#define XGM_REG(reg_addr, idx) \</span>
<span class="cp">	((reg_addr) + (idx) * (XGMAC0_1_BASE_ADDR - XGMAC0_0_BASE_ADDR))</span>

<span class="k">struct</span> <span class="n">addr_val_pair</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg_addr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">val</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#include &quot;adapter.h&quot;</span>

<span class="cp">#ifndef PCI_VENDOR_ID_CHELSIO</span>
<span class="cp"># define PCI_VENDOR_ID_CHELSIO 0x1425</span>
<span class="cp">#endif</span>

<span class="cp">#define for_each_port(adapter, iter) \</span>
<span class="cp">	for (iter = 0; iter &lt; (adapter)-&gt;params.nports; ++iter)</span>

<span class="cp">#define adapter_info(adap) ((adap)-&gt;params.info)</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">uses_xaui</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">adapter_info</span><span class="p">(</span><span class="n">adap</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">caps</span> <span class="o">&amp;</span> <span class="n">SUPPORTED_AUI</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">is_10G</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">adapter_info</span><span class="p">(</span><span class="n">adap</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">caps</span> <span class="o">&amp;</span> <span class="n">SUPPORTED_10000baseT_Full</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">is_offload</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">adap</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">.</span><span class="n">offload</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">core_ticks_per_usec</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">adap</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">.</span><span class="n">vpd</span><span class="p">.</span><span class="n">cclk</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">is_pcie</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">adap</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">.</span><span class="n">pci</span><span class="p">.</span><span class="n">variant</span> <span class="o">==</span> <span class="n">PCI_VARIANT_PCIE</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">t3_set_reg_field</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">addr</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">,</span>
		      <span class="n">u32</span> <span class="n">val</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_write_regs</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">addr_val_pair</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span>
		   <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_wait_op_done_val</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">polarity</span><span class="p">,</span> <span class="kt">int</span> <span class="n">attempts</span><span class="p">,</span> <span class="kt">int</span> <span class="n">delay</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">valp</span><span class="p">);</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">t3_wait_op_done</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">,</span>
				  <span class="kt">int</span> <span class="n">polarity</span><span class="p">,</span> <span class="kt">int</span> <span class="n">attempts</span><span class="p">,</span> <span class="kt">int</span> <span class="n">delay</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">t3_wait_op_done_val</span><span class="p">(</span><span class="n">adapter</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">polarity</span><span class="p">,</span> <span class="n">attempts</span><span class="p">,</span>
				   <span class="n">delay</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">t3_mdio_change_bits</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mmd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">clear</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">set</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_phy_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mmd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">wait</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_phy_advertise</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">advert</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_phy_advertise_fiber</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">advert</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_set_phy_speed_duplex</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="kt">int</span> <span class="n">speed</span><span class="p">,</span> <span class="kt">int</span> <span class="n">duplex</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_phy_lasi_intr_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_phy_lasi_intr_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_phy_lasi_intr_clear</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_phy_lasi_intr_handler</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">t3_intr_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_intr_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_intr_clear</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_xgm_intr_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_xgm_intr_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_port_intr_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_port_intr_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_slow_intr_handler</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_phy_intr_handler</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">t3_link_changed</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">port_id</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_link_fault</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">port_id</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_link_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cmac</span> <span class="o">*</span><span class="n">mac</span><span class="p">,</span> <span class="k">struct</span> <span class="n">link_config</span> <span class="o">*</span><span class="n">lc</span><span class="p">);</span>
<span class="k">const</span> <span class="k">struct</span> <span class="n">adapter_info</span> <span class="o">*</span><span class="n">t3_get_adapter_info</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">board_id</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_seeprom_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span> <span class="n">__le32</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_seeprom_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="n">u32</span> <span class="n">addr</span><span class="p">,</span> <span class="n">__le32</span> <span class="n">data</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_seeprom_wp</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">enable</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_get_tp_version</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">vers</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_check_tpsram_version</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_check_tpsram</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">tp_ram</span><span class="p">,</span>
		    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_set_proto_sram</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_load_fw</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span> <span class="n">fw_data</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_get_fw_version</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">vers</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_check_fw_version</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_init_hw</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="n">u32</span> <span class="n">fw_params</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_reset_adapter</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_prep_adapter</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">adapter_info</span> <span class="o">*</span><span class="n">ai</span><span class="p">,</span>
		    <span class="kt">int</span> <span class="n">reset</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_replay_prep_adapter</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_led_ready</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_fatal_err</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_set_vlan_accel</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ports</span><span class="p">,</span> <span class="kt">int</span> <span class="n">on</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_config_rss</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rss_config</span><span class="p">,</span>
		   <span class="k">const</span> <span class="n">u8</span> <span class="o">*</span> <span class="n">cpus</span><span class="p">,</span> <span class="k">const</span> <span class="n">u16</span> <span class="o">*</span><span class="n">rspq</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_cim_ctl_blk_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">addr</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">valp</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_mc7_bd_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">mc7</span> <span class="o">*</span><span class="n">mc7</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span>
		   <span class="n">u64</span> <span class="o">*</span><span class="n">buf</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">t3_mac_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">cmac</span> <span class="o">*</span><span class="n">mac</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3b_pcs_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">cmac</span> <span class="o">*</span><span class="n">mac</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_mac_disable_exact_filters</span><span class="p">(</span><span class="k">struct</span> <span class="n">cmac</span> <span class="o">*</span><span class="n">mac</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_mac_enable_exact_filters</span><span class="p">(</span><span class="k">struct</span> <span class="n">cmac</span> <span class="o">*</span><span class="n">mac</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_mac_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">cmac</span> <span class="o">*</span><span class="n">mac</span><span class="p">,</span> <span class="kt">int</span> <span class="n">which</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_mac_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">cmac</span> <span class="o">*</span><span class="n">mac</span><span class="p">,</span> <span class="kt">int</span> <span class="n">which</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_mac_set_mtu</span><span class="p">(</span><span class="k">struct</span> <span class="n">cmac</span> <span class="o">*</span><span class="n">mac</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mtu</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_mac_set_rx_mode</span><span class="p">(</span><span class="k">struct</span> <span class="n">cmac</span> <span class="o">*</span><span class="n">mac</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_mac_set_address</span><span class="p">(</span><span class="k">struct</span> <span class="n">cmac</span> <span class="o">*</span><span class="n">mac</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">,</span> <span class="n">u8</span> <span class="n">addr</span><span class="p">[</span><span class="mi">6</span><span class="p">]);</span>
<span class="kt">int</span> <span class="n">t3_mac_set_num_ucast</span><span class="p">(</span><span class="k">struct</span> <span class="n">cmac</span> <span class="o">*</span><span class="n">mac</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">);</span>
<span class="k">const</span> <span class="k">struct</span> <span class="n">mac_stats</span> <span class="o">*</span><span class="n">t3_mac_update_stats</span><span class="p">(</span><span class="k">struct</span> <span class="n">cmac</span> <span class="o">*</span><span class="n">mac</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_mac_set_speed_duplex_fc</span><span class="p">(</span><span class="k">struct</span> <span class="n">cmac</span> <span class="o">*</span><span class="n">mac</span><span class="p">,</span> <span class="kt">int</span> <span class="n">speed</span><span class="p">,</span> <span class="kt">int</span> <span class="n">duplex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fc</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3b2_mac_watchdog_task</span><span class="p">(</span><span class="k">struct</span> <span class="n">cmac</span> <span class="o">*</span><span class="n">mac</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">t3_mc5_prep</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="k">struct</span> <span class="n">mc5</span> <span class="o">*</span><span class="n">mc5</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_mc5_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">mc5</span> <span class="o">*</span><span class="n">mc5</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nservers</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nfilters</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nroutes</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_mc5_intr_handler</span><span class="p">(</span><span class="k">struct</span> <span class="n">mc5</span> <span class="o">*</span><span class="n">mc5</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">t3_tp_set_offload_mode</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">int</span> <span class="n">enable</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_tp_get_mib_stats</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="k">struct</span> <span class="n">tp_mib_stats</span> <span class="o">*</span><span class="n">tps</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_load_mtus</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">mtus</span><span class="p">[</span><span class="n">NMTUS</span><span class="p">],</span>
		  <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">alpha</span><span class="p">[</span><span class="n">NCCTRL_WIN</span><span class="p">],</span>
		  <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">beta</span><span class="p">[</span><span class="n">NCCTRL_WIN</span><span class="p">],</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">mtu_cap</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_config_trace_filter</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
			    <span class="k">const</span> <span class="k">struct</span> <span class="n">trace_params</span> <span class="o">*</span><span class="n">tp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">filter_index</span><span class="p">,</span>
			    <span class="kt">int</span> <span class="n">invert</span><span class="p">,</span> <span class="kt">int</span> <span class="n">enable</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_config_sched</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">kbps</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sched</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">t3_sge_prep</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sge_params</span> <span class="o">*</span><span class="n">p</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">t3_sge_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adap</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sge_params</span> <span class="o">*</span><span class="n">p</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_sge_init_ecntxt</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">gts_enable</span><span class="p">,</span>
		       <span class="k">enum</span> <span class="n">sge_context_type</span> <span class="n">type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">respq</span><span class="p">,</span> <span class="n">u64</span> <span class="n">base_addr</span><span class="p">,</span>
		       <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">token</span><span class="p">,</span> <span class="kt">int</span> <span class="n">gen</span><span class="p">,</span>
		       <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cidx</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_sge_init_flcntxt</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">id</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">gts_enable</span><span class="p">,</span> <span class="n">u64</span> <span class="n">base_addr</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">esize</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cong_thres</span><span class="p">,</span> <span class="kt">int</span> <span class="n">gen</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cidx</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_sge_init_rspcntxt</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">id</span><span class="p">,</span>
			 <span class="kt">int</span> <span class="n">irq_vec_idx</span><span class="p">,</span> <span class="n">u64</span> <span class="n">base_addr</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">,</span>
			 <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fl_thres</span><span class="p">,</span> <span class="kt">int</span> <span class="n">gen</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cidx</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_sge_init_cqcntxt</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">id</span><span class="p">,</span> <span class="n">u64</span> <span class="n">base_addr</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">rspq</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ovfl_mode</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">credits</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">credit_thres</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_sge_enable_ecntxt</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">enable</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_sge_disable_fl</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">id</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_sge_disable_rspcntxt</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">id</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_sge_disable_cqcntxt</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">id</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_sge_cqcntxt_op</span><span class="p">(</span><span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">id</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">op</span><span class="p">,</span>
		      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">credits</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">t3_vsc8211_phy_prep</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">phy_addr</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">mdio_ops</span> <span class="o">*</span><span class="n">mdio_ops</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_ael1002_phy_prep</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">phy_addr</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">mdio_ops</span> <span class="o">*</span><span class="n">mdio_ops</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_ael1006_phy_prep</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">phy_addr</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">mdio_ops</span> <span class="o">*</span><span class="n">mdio_ops</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_ael2005_phy_prep</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">phy_addr</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">mdio_ops</span> <span class="o">*</span><span class="n">mdio_ops</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_ael2020_phy_prep</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">phy_addr</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">mdio_ops</span> <span class="o">*</span><span class="n">mdio_ops</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_qt2045_phy_prep</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span> <span class="kt">int</span> <span class="n">phy_addr</span><span class="p">,</span>
		       <span class="k">const</span> <span class="k">struct</span> <span class="n">mdio_ops</span> <span class="o">*</span><span class="n">mdio_ops</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_xaui_direct_phy_prep</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
			    <span class="kt">int</span> <span class="n">phy_addr</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">mdio_ops</span> <span class="o">*</span><span class="n">mdio_ops</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">t3_aq100x_phy_prep</span><span class="p">(</span><span class="k">struct</span> <span class="n">cphy</span> <span class="o">*</span><span class="n">phy</span><span class="p">,</span> <span class="k">struct</span> <span class="n">adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">,</span>
			    <span class="kt">int</span> <span class="n">phy_addr</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">mdio_ops</span> <span class="o">*</span><span class="n">mdio_ops</span><span class="p">);</span>
<span class="cp">#endif				</span><span class="cm">/* __CHELSIO_COMMON_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
