f | ks8851_mll.c | s | 41K | 1406 | Davide Ciminaghi | ciminaghi@gnudd.com | 1334431287 |  | net/ethernet: ks8851_mll fix rx frame buffer overflow  At the beginning of ks_rcv(), a for loop retrieves the header information relevant to all the frames stored in the mac's internal buffers. The number of pending frames is stored as an 8 bits field in KS_RXFCTR. If interrupts are disabled long enough to allow for more than 32 frames to accumulate in the MAC's internal buffers, a buffer overflow occurs. This patch fixes the problem by making the driver's frame_head_info buffer big enough. Well actually, since the chip appears to have 12K of internal rx buffers and the shortest ethernet frame should be 64 bytes long, maybe the limit could be set to 12*1024/64 = 192 frames, but 255 should be safer.  Signed-off-by: Davide Ciminaghi <ciminaghi@gnudd.com> Signed-off-by: Raffaele Recalcati <raffaele.recalcati@bticino.it> Signed-off-by: David S. Miller <davem@davemloft.net>
f | ks8695net.c | s | 42K | 1391 | Pradeep A Dalvi | netdev@pradeepdalvi.com | 1328547147 |  | netdev: ethernet dev_alloc_skb to netdev_alloc_skb  Replaced deprecating dev_alloc_skb with netdev_alloc_skb in drivers/net/ethernet   - Removed extra skb->dev = dev after netdev_alloc_skb  Signed-off-by: Pradeep A Dalvi <netdev@pradeepdalvi.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | Makefile | g | 247B |  | Jeff Kirsher | jeffrey.t.kirsher@intel.com | 1313133738 |  | ks8*/ksz8*: Move the Micrel drivers  Move the Micrel drivers into drivers/net/ethernet/micrel/ and make the necessary Kconfig and Makefile changes.  CC: Ben Dooks <ben@simtec.co.uk> CC: Tristram Ha <Tristram.Ha@micrel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | ks8695net.h | s | 3.8K | 95 | Jeff Kirsher | jeffrey.t.kirsher@intel.com | 1313133738 |  | ks8*/ksz8*: Move the Micrel drivers  Move the Micrel drivers into drivers/net/ethernet/micrel/ and make the necessary Kconfig and Makefile changes.  CC: Ben Dooks <ben@simtec.co.uk> CC: Tristram Ha <Tristram.Ha@micrel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | ksz884x.c | s | 179K | 6270 | Dan Carpenter | dan.carpenter@oracle.com | 1334856303 |  | ksz884x: don't copy too much in netdev_set_mac_address()  MAX_ADDR_LEN is 32.  ETH_ALEN is 6.  mac->sa_data is a 14 byte array, so the memcpy() is doing a read past the end of the array.  I asked about this on netdev and Ben Hutchings told me it's supposed to be copying ETH_ALEN bytes (thanks Ben).  Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | ks8842.c | s | 32K | 1022 | Arnd Bergmann | arnd@arndb.de | 1335036527 |  | drivers/net: add missing __devexit_p() annotations  Drivers that refer to a __devexit function in an operations structure need to annotate that pointer with __devexit_p so replace it with a NULL pointer when the section gets discarded.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Mathieu Poirier <mathieu.poirier@linaro.org> Signed-off-by: David S. Miller <davem@davemloft.net>
f | ks8851.h | s | 8.1K | 260 | Paul Gortmaker | paul.gortmaker@windriver.com | 1327946080 |  | drivers/net: fix up stale paths from driver reorg  The reorganization of the driver layout in drivers/net left behind some stale paths in comments and in Kconfig help text.  Bring them up to date.  No actual change to any code takes place here.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com> CC: Jeff Kirsher <jeffrey.t.kirsher@intel.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | Kconfig | g | 1.8K |  | Fabio Estevam | festevam@gmail.com | 1327451042 |  | drivers: misc: Remove MISC_DEVICES config option  MISC_DEVICES option alone does not select any kernel code and can cause dependency build warnings, such as:  warning: (KS8851 && AX88796_93CX6 && RTL8180 && RTL8187 && ADM8211 && RT2400PCI && RT2500PCI && RT61PCI && RT2800PCI && R8187SE) selects EEPROM_93CX6 which has unmet direct dependencies (MISC_DEVICES)  As the current drivers/misc/Kconfig stands, it is only possible to select the drivers below if MISC_DEVICES option is selected:  source "drivers/misc/c2port/Kconfig" source "drivers/misc/eeprom/Kconfig" source "drivers/misc/cb710/Kconfig" source "drivers/misc/iwmc3200top/Kconfig" source "drivers/misc/ti-st/Kconfig" source "drivers/misc/lis3lv02d/Kconfig" source "drivers/misc/carma/Kconfig" source "drivers/misc/altera-stapl/Kconfig"  So remove MISC_DEVICES option so that nothing is dependant on it.  Signed-off-by: Fabio Estevam <fabio.estevam@freescale.com> Acked-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | ks8851.c | s | 39K | 1281 | Stephen Boyd | sboyd@codeaurora.org | 1336775014 |  | ks8851: Update link status during link change interrupt  If a link change interrupt comes in we just clear the interrupt and continue along without notifying the upper networking layers that the link has changed. Use the mii_check_link() function to update the link status whenever a link change interrupt occurs.  Cc: Ben Dooks <ben-linux@fluff.org> Signed-off-by: Stephen Boyd <sboyd@codeaurora.org> Signed-off-by: David S. Miller <davem@davemloft.net>
