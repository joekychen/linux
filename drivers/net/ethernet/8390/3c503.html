<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › ethernet › 8390 › 3c503.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>3c503.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* Definitions for the 3Com 3c503 Etherlink 2. */</span>
<span class="cm">/* This file is distributed under the GPL.</span>
<span class="cm">   Many of these names and comments are directly from the Crynwr packet</span>
<span class="cm">   drivers, which are released under the GPL. */</span>

<span class="cp">#define EL2H (dev-&gt;base_addr + 0x400)</span>
<span class="cp">#define EL2L (dev-&gt;base_addr)</span>

<span class="cm">/* Vendor unique hardware addr. prefix. 3Com has 2 because they ran</span>
<span class="cm">   out of available addresses on the first one... */</span>

<span class="cp">#define OLD_3COM_ID	0x02608c</span>
<span class="cp">#define NEW_3COM_ID	0x0020af</span>

<span class="cm">/* Shared memory management parameters. NB: The 8 bit cards have only</span>
<span class="cm">   one bank (MB1) which serves both Tx and Rx packet space. The 16bit</span>
<span class="cm">   cards have 2 banks, MB0 for Tx packets, and MB1 for Rx packets.</span>
<span class="cm">   You choose which bank appears in the sh. mem window with EGACFR_MBSn */</span>

<span class="cp">#define EL2_MB0_START_PG	(0x00)	</span><span class="cm">/* EL2/16 Tx packets go in bank 0 */</span><span class="cp"></span>
<span class="cp">#define EL2_MB1_START_PG	(0x20)	</span><span class="cm">/* First page of bank 1 */</span><span class="cp"></span>
<span class="cp">#define EL2_MB1_STOP_PG		(0x40)	</span><span class="cm">/* Last page +1 of bank 1 */</span><span class="cp"></span>

<span class="cm">/* 3Com 3c503 ASIC registers */</span>
<span class="cp">#define E33G_STARTPG	(EL2H+0)	</span><span class="cm">/* Start page, matching EN0_STARTPG */</span><span class="cp"></span>
<span class="cp">#define E33G_STOPPG	(EL2H+1)	</span><span class="cm">/* Stop page, must match EN0_STOPPG */</span><span class="cp"></span>
<span class="cp">#define E33G_DRQCNT	(EL2H+2)	</span><span class="cm">/* DMA burst count */</span><span class="cp"></span>
<span class="cp">#define E33G_IOBASE	(EL2H+3)	</span><span class="cm">/* Read of I/O base jumpers. */</span><span class="cp"></span>
	<span class="cm">/* (non-useful, but it also appears at the end of EPROM space) */</span>
<span class="cp">#define E33G_ROMBASE	(EL2H+4)	</span><span class="cm">/* Read of memory base jumpers. */</span><span class="cp"></span>
<span class="cp">#define E33G_GACFR	(EL2H+5)	</span><span class="cm">/* Config/setup bits for the ASIC GA */</span><span class="cp"></span>
<span class="cp">#define E33G_CNTRL	(EL2H+6)	</span><span class="cm">/* Board&#39;s main control register */</span><span class="cp"></span>
<span class="cp">#define E33G_STATUS	(EL2H+7)	</span><span class="cm">/* Status on completions. */</span><span class="cp"></span>
<span class="cp">#define E33G_IDCFR	(EL2H+8)	</span><span class="cm">/* Interrupt/DMA config register */</span><span class="cp"></span>
				<span class="cm">/* (Which IRQ to assert, DMA chan to use) */</span>
<span class="cp">#define E33G_DMAAH	(EL2H+9)	</span><span class="cm">/* High byte of DMA address reg */</span><span class="cp"></span>
<span class="cp">#define E33G_DMAAL	(EL2H+10)	</span><span class="cm">/* Low byte of DMA address reg */</span><span class="cp"></span>
<span class="cm">/* &quot;Vector pointer&quot; - if this address matches a read, the EPROM (rather than</span>
<span class="cm">   shared RAM) is mapped into memory space. */</span>
<span class="cp">#define E33G_VP2	(EL2H+11)</span>
<span class="cp">#define E33G_VP1	(EL2H+12)</span>
<span class="cp">#define E33G_VP0	(EL2H+13)</span>
<span class="cp">#define E33G_FIFOH	(EL2H+14)	</span><span class="cm">/* FIFO for programmed I/O moves */</span><span class="cp"></span>
<span class="cp">#define E33G_FIFOL	(EL2H+15)	</span><span class="cm">/* ... low byte of above. */</span><span class="cp"></span>

<span class="cm">/* Bits in E33G_CNTRL register: */</span>

<span class="cp">#define ECNTRL_RESET	(0x01)	</span><span class="cm">/* Software reset of the ASIC and 8390 */</span><span class="cp"></span>
<span class="cp">#define ECNTRL_THIN	(0x02)	</span><span class="cm">/* Onboard xcvr enable, AUI disable */</span><span class="cp"></span>
<span class="cp">#define ECNTRL_AUI	(0x00)	</span><span class="cm">/* Onboard xcvr disable, AUI enable */</span><span class="cp"></span>
<span class="cp">#define ECNTRL_SAPROM	(0x04)	</span><span class="cm">/* Map the station address prom */</span><span class="cp"></span>
<span class="cp">#define ECNTRL_DBLBFR	(0x20)	</span><span class="cm">/* FIFO configuration bit */</span><span class="cp"></span>
<span class="cp">#define ECNTRL_OUTPUT	(0x40)	</span><span class="cm">/* PC-to-3C503 direction if 1 */</span><span class="cp"></span>
<span class="cp">#define ECNTRL_INPUT	(0x00)	</span><span class="cm">/* 3C503-to-PC direction if 0 */</span><span class="cp"></span>
<span class="cp">#define ECNTRL_START	(0x80)	</span><span class="cm">/* Start the DMA logic */</span><span class="cp"></span>

<span class="cm">/* Bits in E33G_STATUS register: */</span>

<span class="cp">#define ESTAT_DPRDY	(0x80)	</span><span class="cm">/* Data port (of FIFO) ready */</span><span class="cp"></span>
<span class="cp">#define ESTAT_UFLW	(0x40)	</span><span class="cm">/* Tried to read FIFO when it was empty */</span><span class="cp"></span>
<span class="cp">#define ESTAT_OFLW	(0x20)	</span><span class="cm">/* Tried to write FIFO when it was full */</span><span class="cp"></span>
<span class="cp">#define ESTAT_DTC	(0x10)	</span><span class="cm">/* Terminal Count from PC bus DMA logic */</span><span class="cp"></span>
<span class="cp">#define ESTAT_DIP	(0x08)	</span><span class="cm">/* DMA In Progress */</span><span class="cp"></span>

<span class="cm">/* Bits in E33G_GACFR register: */</span>

<span class="cp">#define EGACFR_NIM	(0x80)	</span><span class="cm">/* NIC interrupt mask */</span><span class="cp"></span>
<span class="cp">#define EGACFR_TCM	(0x40)	</span><span class="cm">/* DMA term. count interrupt mask */</span><span class="cp"></span>
<span class="cp">#define EGACFR_RSEL	(0x08)	</span><span class="cm">/* Map a bank of card mem into system mem */</span><span class="cp"></span>
<span class="cp">#define EGACFR_MBS2	(0x04)	</span><span class="cm">/* Memory bank select, bit 2. */</span><span class="cp"></span>
<span class="cp">#define EGACFR_MBS1	(0x02)	</span><span class="cm">/* Memory bank select, bit 1. */</span><span class="cp"></span>
<span class="cp">#define EGACFR_MBS0	(0x01)	</span><span class="cm">/* Memory bank select, bit 0. */</span><span class="cp"></span>

<span class="cp">#define EGACFR_NORM	(0x49)	</span><span class="cm">/* TCM | RSEL | MBS0 */</span><span class="cp"></span>
<span class="cp">#define EGACFR_IRQOFF	(0xc9)	</span><span class="cm">/* TCM | RSEL | MBS0 | NIM */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm">	MBS2	MBS1	MBS0	Sh. mem windows card mem at:</span>
<span class="cm">	----	----	----	-----------------------------</span>
<span class="cm">	0	0	0	0x0000 -- bank 0</span>
<span class="cm">	0	0	1	0x2000 -- bank 1 (only choice for 8bit card)</span>
<span class="cm">	0	1	0	0x4000 -- bank 2, not used</span>
<span class="cm">	0	1	1	0x6000 -- bank 3, not used</span>

<span class="cm">There was going to be a 32k card that used bank 2 and 3, but it</span>
<span class="cm">never got produced.</span>

<span class="cm">*/</span>


<span class="cm">/* End of 3C503 parameter definitions */</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
