<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › ethernet › seeq › seeq8005.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>seeq8005.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * defines, etc for the seeq8005</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * This file is distributed under GPL.</span>
<span class="cm"> *</span>
<span class="cm"> * This style and layout of this file is also copied</span>
<span class="cm"> * from many of the other linux network device drivers.</span>
<span class="cm"> */</span>

<span class="cm">/* The number of low I/O ports used by the ethercard. */</span>
<span class="cp">#define SEEQ8005_IO_EXTENT	16</span>

<span class="cp">#define SEEQ_B		(ioaddr)</span>

<span class="cp">#define	SEEQ_CMD	(SEEQ_B)		</span><span class="cm">/* Write only */</span><span class="cp"></span>
<span class="cp">#define	SEEQ_STATUS	(SEEQ_B)		</span><span class="cm">/* Read only */</span><span class="cp"></span>
<span class="cp">#define SEEQ_CFG1	(SEEQ_B + 2)</span>
<span class="cp">#define SEEQ_CFG2	(SEEQ_B + 4)</span>
<span class="cp">#define	SEEQ_REA	(SEEQ_B + 6)		</span><span class="cm">/* Receive End Area Register */</span><span class="cp"></span>
<span class="cp">#define SEEQ_RPR	(SEEQ_B + 10)		</span><span class="cm">/* Receive Pointer Register */</span><span class="cp"></span>
<span class="cp">#define	SEEQ_TPR	(SEEQ_B + 12)		</span><span class="cm">/* Transmit Pointer Register */</span><span class="cp"></span>
<span class="cp">#define	SEEQ_DMAAR	(SEEQ_B + 14)		</span><span class="cm">/* DMA Address Register */</span><span class="cp"></span>
<span class="cp">#define SEEQ_BUFFER	(SEEQ_B + 8)		</span><span class="cm">/* Buffer Window Register */</span><span class="cp"></span>

<span class="cp">#define	DEFAULT_TEA	(0x3f)</span>

<span class="cp">#define SEEQCMD_DMA_INT_EN	(0x0001)	</span><span class="cm">/* DMA Interrupt Enable */</span><span class="cp"></span>
<span class="cp">#define SEEQCMD_RX_INT_EN	(0x0002)	</span><span class="cm">/* Receive Interrupt Enable */</span><span class="cp"></span>
<span class="cp">#define SEEQCMD_TX_INT_EN	(0x0004)	</span><span class="cm">/* Transmit Interrupt Enable */</span><span class="cp"></span>
<span class="cp">#define SEEQCMD_WINDOW_INT_EN	(0x0008)	</span><span class="cm">/* What the hell is this for?? */</span><span class="cp"></span>
<span class="cp">#define SEEQCMD_INT_MASK	(0x000f)</span>

<span class="cp">#define SEEQCMD_DMA_INT_ACK	(0x0010)	</span><span class="cm">/* DMA ack */</span><span class="cp"></span>
<span class="cp">#define SEEQCMD_RX_INT_ACK	(0x0020)</span>
<span class="cp">#define SEEQCMD_TX_INT_ACK	(0x0040)</span>
<span class="cp">#define	SEEQCMD_WINDOW_INT_ACK	(0x0080)</span>
<span class="cp">#define SEEQCMD_ACK_ALL		(0x00f0)</span>

<span class="cp">#define SEEQCMD_SET_DMA_ON	(0x0100)	</span><span class="cm">/* Enables DMA Request logic */</span><span class="cp"></span>
<span class="cp">#define SEEQCMD_SET_RX_ON	(0x0200)	</span><span class="cm">/* Enables Packet RX */</span><span class="cp"></span>
<span class="cp">#define SEEQCMD_SET_TX_ON	(0x0400)	</span><span class="cm">/* Starts TX run */</span><span class="cp"></span>
<span class="cp">#define SEEQCMD_SET_DMA_OFF	(0x0800)</span>
<span class="cp">#define SEEQCMD_SET_RX_OFF	(0x1000)</span>
<span class="cp">#define SEEQCMD_SET_TX_OFF	(0x2000)</span>
<span class="cp">#define SEEQCMD_SET_ALL_OFF	(0x3800)	</span><span class="cm">/* set all logic off */</span><span class="cp"></span>

<span class="cp">#define SEEQCMD_FIFO_READ	(0x4000)	</span><span class="cm">/* Set FIFO to read mode (read from Buffer) */</span><span class="cp"></span>
<span class="cp">#define SEEQCMD_FIFO_WRITE	(0x8000)	</span><span class="cm">/* Set FIFO to write mode */</span><span class="cp"></span>

<span class="cp">#define SEEQSTAT_DMA_INT_EN	(0x0001)	</span><span class="cm">/* Status of interrupt enable */</span><span class="cp"></span>
<span class="cp">#define SEEQSTAT_RX_INT_EN	(0x0002)</span>
<span class="cp">#define SEEQSTAT_TX_INT_EN	(0x0004)</span>
<span class="cp">#define SEEQSTAT_WINDOW_INT_EN	(0x0008)</span>

<span class="cp">#define	SEEQSTAT_DMA_INT	(0x0010)	</span><span class="cm">/* Interrupt flagged */</span><span class="cp"></span>
<span class="cp">#define SEEQSTAT_RX_INT		(0x0020)</span>
<span class="cp">#define SEEQSTAT_TX_INT		(0x0040)</span>
<span class="cp">#define	SEEQSTAT_WINDOW_INT	(0x0080)</span>
<span class="cp">#define SEEQSTAT_ANY_INT	(0x00f0)</span>

<span class="cp">#define SEEQSTAT_DMA_ON		(0x0100)	</span><span class="cm">/* DMA logic on */</span><span class="cp"></span>
<span class="cp">#define SEEQSTAT_RX_ON		(0x0200)	</span><span class="cm">/* Packet RX on */</span><span class="cp"></span>
<span class="cp">#define SEEQSTAT_TX_ON		(0x0400)	</span><span class="cm">/* TX running */</span><span class="cp"></span>

<span class="cp">#define SEEQSTAT_FIFO_FULL	(0x2000)</span>
<span class="cp">#define SEEQSTAT_FIFO_EMPTY	(0x4000)</span>
<span class="cp">#define SEEQSTAT_FIFO_DIR	(0x8000)	</span><span class="cm">/* 1=read, 0=write */</span><span class="cp"></span>

<span class="cp">#define SEEQCFG1_BUFFER_MASK	(0x000f)	</span><span class="cm">/* define what maps into the BUFFER register */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG1_BUFFER_MAC0	(0x0000)	</span><span class="cm">/* MAC station addresses 0-5 */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG1_BUFFER_MAC1	(0x0001)</span>
<span class="cp">#define SEEQCFG1_BUFFER_MAC2	(0x0002)</span>
<span class="cp">#define SEEQCFG1_BUFFER_MAC3	(0x0003)</span>
<span class="cp">#define SEEQCFG1_BUFFER_MAC4	(0x0004)</span>
<span class="cp">#define SEEQCFG1_BUFFER_MAC5	(0x0005)</span>
<span class="cp">#define SEEQCFG1_BUFFER_PROM	(0x0006)	</span><span class="cm">/* The Address/CFG PROM */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG1_BUFFER_TEA	(0x0007)	</span><span class="cm">/* Transmit end area */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG1_BUFFER_BUFFER	(0x0008)	</span><span class="cm">/* Packet buffer memory */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG1_BUFFER_INT_VEC	(0x0009)	</span><span class="cm">/* Interrupt Vector */</span><span class="cp"></span>

<span class="cp">#define SEEQCFG1_DMA_INTVL_MASK	(0x0030)</span>
<span class="cp">#define SEEQCFG1_DMA_CONT	(0x0000)</span>
<span class="cp">#define SEEQCFG1_DMA_800ns	(0x0010)</span>
<span class="cp">#define SEEQCFG1_DMA_1600ns	(0x0020)</span>
<span class="cp">#define SEEQCFG1_DMA_3200ns	(0x0030)</span>

<span class="cp">#define SEEQCFG1_DMA_LEN_MASK	(0x00c0)</span>
<span class="cp">#define SEEQCFG1_DMA_LEN1	(0x0000)</span>
<span class="cp">#define SEEQCFG1_DMA_LEN2	(0x0040)</span>
<span class="cp">#define SEEQCFG1_DMA_LEN4	(0x0080)</span>
<span class="cp">#define SEEQCFG1_DMA_LEN8	(0x00c0)</span>

<span class="cp">#define SEEQCFG1_MAC_MASK	(0x3f00)	</span><span class="cm">/* Dis/enable bits for MAC addresses */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG1_MAC0_EN	(0x0100)</span>
<span class="cp">#define SEEQCFG1_MAC1_EN	(0x0200)</span>
<span class="cp">#define SEEQCFG1_MAC2_EN	(0x0400)</span>
<span class="cp">#define SEEQCFG1_MAC3_EN	(0x0800)</span>
<span class="cp">#define	SEEQCFG1_MAC4_EN	(0x1000)</span>
<span class="cp">#define SEEQCFG1_MAC5_EN	(0x2000)</span>

<span class="cp">#define	SEEQCFG1_MATCH_MASK	(0xc000)	</span><span class="cm">/* Packet matching logic cfg bits */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG1_MATCH_SPECIFIC	(0x0000)	</span><span class="cm">/* only matching MAC addresses */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG1_MATCH_BROAD	(0x4000)	</span><span class="cm">/* matching and broadcast addresses */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG1_MATCH_MULTI	(0x8000)	</span><span class="cm">/* matching, broadcast and multicast */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG1_MATCH_ALL	(0xc000)	</span><span class="cm">/* Promiscuous mode */</span><span class="cp"></span>

<span class="cp">#define SEEQCFG1_DEFAULT	(SEEQCFG1_BUFFER_BUFFER | SEEQCFG1_MAC0_EN | SEEQCFG1_MATCH_BROAD)</span>

<span class="cp">#define SEEQCFG2_BYTE_SWAP	(0x0001)	</span><span class="cm">/* 0=Intel byte-order */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG2_AUTO_REA	(0x0002)	</span><span class="cm">/* if set, Receive End Area will be updated when reading from Buffer */</span><span class="cp"></span>

<span class="cp">#define SEEQCFG2_CRC_ERR_EN	(0x0008)	</span><span class="cm">/* enables receiving of packets with CRC errors */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG2_DRIBBLE_EN	(0x0010)	</span><span class="cm">/* enables receiving of non-aligned packets */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG2_SHORT_EN	(0x0020)	</span><span class="cm">/* enables receiving of short packets */</span><span class="cp"></span>

<span class="cp">#define	SEEQCFG2_SLOTSEL	(0x0040)	</span><span class="cm">/* 0= standard IEEE802.3, 1= smaller,faster, non-standard */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG2_NO_PREAM	(0x0080)	</span><span class="cm">/* 1= user supplies Xmit preamble bytes */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG2_ADDR_LEN	(0x0100)	</span><span class="cm">/* 1= 2byte addresses */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG2_REC_CRC	(0x0200)	</span><span class="cm">/* 0= received packets will have CRC stripped from them */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG2_XMIT_NO_CRC	(0x0400)	</span><span class="cm">/* don&#39;t xmit CRC with each packet (user supplies it) */</span><span class="cp"></span>
<span class="cp">#define SEEQCFG2_LOOPBACK	(0x0800)</span>
<span class="cp">#define SEEQCFG2_CTRLO		(0x1000)</span>
<span class="cp">#define SEEQCFG2_RESET		(0x8000)	</span><span class="cm">/* software Hard-reset bit */</span><span class="cp"></span>

<span class="k">struct</span> <span class="n">seeq_pkt_hdr</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span>	<span class="n">next</span><span class="p">;</span>			<span class="cm">/* address of next packet header */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>	<span class="n">babble_int</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>		<span class="cm">/* enable int on &gt;1514 byte packet */</span>
			<span class="nl">coll_int:</span><span class="mi">1</span><span class="p">,</span>		<span class="cm">/* enable int on collision */</span>
			<span class="nl">coll_16_int:</span><span class="mi">1</span><span class="p">,</span>		<span class="cm">/* enable int on &gt;15 collision */</span>
			<span class="nl">xmit_int:</span><span class="mi">1</span><span class="p">,</span>		<span class="cm">/* enable int on success (or xmit with &lt;15 collision) */</span>
			<span class="nl">unused:</span><span class="mi">1</span><span class="p">,</span>
			<span class="nl">data_follows:</span><span class="mi">1</span><span class="p">,</span>		<span class="cm">/* if not set, process this as a header and pointer only */</span>
			<span class="nl">chain_cont:</span><span class="mi">1</span><span class="p">,</span>		<span class="cm">/* if set, more headers in chain 		only cmd bit valid in recv header */</span>
			<span class="nl">xmit_recv:</span><span class="mi">1</span><span class="p">;</span>		<span class="cm">/* if set, a xmit packet, else a receive packet.*/</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>	<span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define SEEQPKTH_BAB_INT_EN	(0x01)		</span><span class="cm">/* xmit only */</span><span class="cp"></span>
<span class="cp">#define SEEQPKTH_COL_INT_EN	(0x02)		</span><span class="cm">/* xmit only */</span><span class="cp"></span>
<span class="cp">#define SEEQPKTH_COL16_INT_EN	(0x04)		</span><span class="cm">/* xmit only */</span><span class="cp"></span>
<span class="cp">#define SEEQPKTH_XMIT_INT_EN	(0x08)		</span><span class="cm">/* xmit only */</span><span class="cp"></span>
<span class="cp">#define SEEQPKTH_DATA_FOLLOWS	(0x20)		</span><span class="cm">/* supposedly in xmit only */</span><span class="cp"></span>
<span class="cp">#define SEEQPKTH_CHAIN		(0x40)		</span><span class="cm">/* more headers follow */</span><span class="cp"></span>
<span class="cp">#define SEEQPKTH_XMIT		(0x80)</span>

<span class="cp">#define SEEQPKTS_BABBLE		(0x0100)	</span><span class="cm">/* xmit only */</span><span class="cp"></span>
<span class="cp">#define SEEQPKTS_OVERSIZE	(0x0100)	</span><span class="cm">/* recv only */</span><span class="cp"></span>
<span class="cp">#define SEEQPKTS_COLLISION	(0x0200)	</span><span class="cm">/* xmit only */</span><span class="cp"></span>
<span class="cp">#define SEEQPKTS_CRC_ERR	(0x0200)	</span><span class="cm">/* recv only */</span><span class="cp"></span>
<span class="cp">#define SEEQPKTS_COLL16		(0x0400)	</span><span class="cm">/* xmit only */</span><span class="cp"></span>
<span class="cp">#define SEEQPKTS_DRIB		(0x0400)	</span><span class="cm">/* recv only */</span><span class="cp"></span>
<span class="cp">#define SEEQPKTS_SHORT		(0x0800)	</span><span class="cm">/* recv only */</span><span class="cp"></span>
<span class="cp">#define SEEQPKTS_DONE		(0x8000)</span>
<span class="cp">#define SEEQPKTS_ANY_ERROR	(0x0f00)</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
