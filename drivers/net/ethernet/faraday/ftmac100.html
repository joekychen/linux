<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › ethernet › faraday › ftmac100.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>ftmac100.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Faraday FTMAC100 10/100 Ethernet</span>
<span class="cm"> *</span>
<span class="cm"> * (C) Copyright 2009-2011 Faraday Technology</span>
<span class="cm"> * Po-Yu Chuang &lt;ratbert@faraday-tech.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __FTMAC100_H</span>
<span class="cp">#define __FTMAC100_H</span>

<span class="cp">#define	FTMAC100_OFFSET_ISR		0x00</span>
<span class="cp">#define	FTMAC100_OFFSET_IMR		0x04</span>
<span class="cp">#define	FTMAC100_OFFSET_MAC_MADR	0x08</span>
<span class="cp">#define	FTMAC100_OFFSET_MAC_LADR	0x0c</span>
<span class="cp">#define	FTMAC100_OFFSET_MAHT0		0x10</span>
<span class="cp">#define	FTMAC100_OFFSET_MAHT1		0x14</span>
<span class="cp">#define	FTMAC100_OFFSET_TXPD		0x18</span>
<span class="cp">#define	FTMAC100_OFFSET_RXPD		0x1c</span>
<span class="cp">#define	FTMAC100_OFFSET_TXR_BADR	0x20</span>
<span class="cp">#define	FTMAC100_OFFSET_RXR_BADR	0x24</span>
<span class="cp">#define	FTMAC100_OFFSET_ITC		0x28</span>
<span class="cp">#define	FTMAC100_OFFSET_APTC		0x2c</span>
<span class="cp">#define	FTMAC100_OFFSET_DBLAC		0x30</span>
<span class="cp">#define	FTMAC100_OFFSET_MACCR		0x88</span>
<span class="cp">#define	FTMAC100_OFFSET_MACSR		0x8c</span>
<span class="cp">#define	FTMAC100_OFFSET_PHYCR		0x90</span>
<span class="cp">#define	FTMAC100_OFFSET_PHYWDATA	0x94</span>
<span class="cp">#define	FTMAC100_OFFSET_FCR		0x98</span>
<span class="cp">#define	FTMAC100_OFFSET_BPR		0x9c</span>
<span class="cp">#define	FTMAC100_OFFSET_TS		0xc4</span>
<span class="cp">#define	FTMAC100_OFFSET_DMAFIFOS	0xc8</span>
<span class="cp">#define	FTMAC100_OFFSET_TM		0xcc</span>
<span class="cp">#define	FTMAC100_OFFSET_TX_MCOL_SCOL	0xd4</span>
<span class="cp">#define	FTMAC100_OFFSET_RPF_AEP		0xd8</span>
<span class="cp">#define	FTMAC100_OFFSET_XM_PG		0xdc</span>
<span class="cp">#define	FTMAC100_OFFSET_RUNT_TLCC	0xe0</span>
<span class="cp">#define	FTMAC100_OFFSET_CRCER_FTL	0xe4</span>
<span class="cp">#define	FTMAC100_OFFSET_RLC_RCC		0xe8</span>
<span class="cp">#define	FTMAC100_OFFSET_BROC		0xec</span>
<span class="cp">#define	FTMAC100_OFFSET_MULCA		0xf0</span>
<span class="cp">#define	FTMAC100_OFFSET_RP		0xf4</span>
<span class="cp">#define	FTMAC100_OFFSET_XP		0xf8</span>

<span class="cm">/*</span>
<span class="cm"> * Interrupt status register &amp; interrupt mask register</span>
<span class="cm"> */</span>
<span class="cp">#define	FTMAC100_INT_RPKT_FINISH	(1 &lt;&lt; 0)</span>
<span class="cp">#define	FTMAC100_INT_NORXBUF		(1 &lt;&lt; 1)</span>
<span class="cp">#define	FTMAC100_INT_XPKT_FINISH	(1 &lt;&lt; 2)</span>
<span class="cp">#define	FTMAC100_INT_NOTXBUF		(1 &lt;&lt; 3)</span>
<span class="cp">#define	FTMAC100_INT_XPKT_OK		(1 &lt;&lt; 4)</span>
<span class="cp">#define	FTMAC100_INT_XPKT_LOST		(1 &lt;&lt; 5)</span>
<span class="cp">#define	FTMAC100_INT_RPKT_SAV		(1 &lt;&lt; 6)</span>
<span class="cp">#define	FTMAC100_INT_RPKT_LOST		(1 &lt;&lt; 7)</span>
<span class="cp">#define	FTMAC100_INT_AHB_ERR		(1 &lt;&lt; 8)</span>
<span class="cp">#define	FTMAC100_INT_PHYSTS_CHG		(1 &lt;&lt; 9)</span>

<span class="cm">/*</span>
<span class="cm"> * Interrupt timer control register</span>
<span class="cm"> */</span>
<span class="cp">#define FTMAC100_ITC_RXINT_CNT(x)	(((x) &amp; 0xf) &lt;&lt; 0)</span>
<span class="cp">#define FTMAC100_ITC_RXINT_THR(x)	(((x) &amp; 0x7) &lt;&lt; 4)</span>
<span class="cp">#define FTMAC100_ITC_RXINT_TIME_SEL	(1 &lt;&lt; 7)</span>
<span class="cp">#define FTMAC100_ITC_TXINT_CNT(x)	(((x) &amp; 0xf) &lt;&lt; 8)</span>
<span class="cp">#define FTMAC100_ITC_TXINT_THR(x)	(((x) &amp; 0x7) &lt;&lt; 12)</span>
<span class="cp">#define FTMAC100_ITC_TXINT_TIME_SEL	(1 &lt;&lt; 15)</span>

<span class="cm">/*</span>
<span class="cm"> * Automatic polling timer control register</span>
<span class="cm"> */</span>
<span class="cp">#define	FTMAC100_APTC_RXPOLL_CNT(x)	(((x) &amp; 0xf) &lt;&lt; 0)</span>
<span class="cp">#define	FTMAC100_APTC_RXPOLL_TIME_SEL	(1 &lt;&lt; 4)</span>
<span class="cp">#define	FTMAC100_APTC_TXPOLL_CNT(x)	(((x) &amp; 0xf) &lt;&lt; 8)</span>
<span class="cp">#define	FTMAC100_APTC_TXPOLL_TIME_SEL	(1 &lt;&lt; 12)</span>

<span class="cm">/*</span>
<span class="cm"> * DMA burst length and arbitration control register</span>
<span class="cm"> */</span>
<span class="cp">#define FTMAC100_DBLAC_INCR4_EN		(1 &lt;&lt; 0)</span>
<span class="cp">#define FTMAC100_DBLAC_INCR8_EN		(1 &lt;&lt; 1)</span>
<span class="cp">#define FTMAC100_DBLAC_INCR16_EN	(1 &lt;&lt; 2)</span>
<span class="cp">#define FTMAC100_DBLAC_RXFIFO_LTHR(x)	(((x) &amp; 0x7) &lt;&lt; 3)</span>
<span class="cp">#define FTMAC100_DBLAC_RXFIFO_HTHR(x)	(((x) &amp; 0x7) &lt;&lt; 6)</span>
<span class="cp">#define FTMAC100_DBLAC_RX_THR_EN	(1 &lt;&lt; 9)</span>

<span class="cm">/*</span>
<span class="cm"> * MAC control register</span>
<span class="cm"> */</span>
<span class="cp">#define	FTMAC100_MACCR_XDMA_EN		(1 &lt;&lt; 0)</span>
<span class="cp">#define	FTMAC100_MACCR_RDMA_EN		(1 &lt;&lt; 1)</span>
<span class="cp">#define	FTMAC100_MACCR_SW_RST		(1 &lt;&lt; 2)</span>
<span class="cp">#define	FTMAC100_MACCR_LOOP_EN		(1 &lt;&lt; 3)</span>
<span class="cp">#define	FTMAC100_MACCR_CRC_DIS		(1 &lt;&lt; 4)</span>
<span class="cp">#define	FTMAC100_MACCR_XMT_EN		(1 &lt;&lt; 5)</span>
<span class="cp">#define	FTMAC100_MACCR_ENRX_IN_HALFTX	(1 &lt;&lt; 6)</span>
<span class="cp">#define	FTMAC100_MACCR_RCV_EN		(1 &lt;&lt; 8)</span>
<span class="cp">#define	FTMAC100_MACCR_HT_MULTI_EN	(1 &lt;&lt; 9)</span>
<span class="cp">#define	FTMAC100_MACCR_RX_RUNT		(1 &lt;&lt; 10)</span>
<span class="cp">#define	FTMAC100_MACCR_RX_FTL		(1 &lt;&lt; 11)</span>
<span class="cp">#define	FTMAC100_MACCR_RCV_ALL		(1 &lt;&lt; 12)</span>
<span class="cp">#define	FTMAC100_MACCR_CRC_APD		(1 &lt;&lt; 14)</span>
<span class="cp">#define	FTMAC100_MACCR_FULLDUP		(1 &lt;&lt; 15)</span>
<span class="cp">#define	FTMAC100_MACCR_RX_MULTIPKT	(1 &lt;&lt; 16)</span>
<span class="cp">#define	FTMAC100_MACCR_RX_BROADPKT	(1 &lt;&lt; 17)</span>

<span class="cm">/*</span>
<span class="cm"> * PHY control register</span>
<span class="cm"> */</span>
<span class="cp">#define FTMAC100_PHYCR_MIIRDATA		0xffff</span>
<span class="cp">#define FTMAC100_PHYCR_PHYAD(x)		(((x) &amp; 0x1f) &lt;&lt; 16)</span>
<span class="cp">#define FTMAC100_PHYCR_REGAD(x)		(((x) &amp; 0x1f) &lt;&lt; 21)</span>
<span class="cp">#define FTMAC100_PHYCR_MIIRD		(1 &lt;&lt; 26)</span>
<span class="cp">#define FTMAC100_PHYCR_MIIWR		(1 &lt;&lt; 27)</span>

<span class="cm">/*</span>
<span class="cm"> * PHY write data register</span>
<span class="cm"> */</span>
<span class="cp">#define FTMAC100_PHYWDATA_MIIWDATA(x)	((x) &amp; 0xffff)</span>

<span class="cm">/*</span>
<span class="cm"> * Transmit descriptor, aligned to 16 bytes</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">ftmac100_txdes</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">txdes0</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">txdes1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">txdes2</span><span class="p">;</span>	<span class="cm">/* TXBUF_BADR */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">txdes3</span><span class="p">;</span>	<span class="cm">/* not used by HW */</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">aligned</span><span class="p">(</span><span class="mi">16</span><span class="p">)));</span>

<span class="cp">#define	FTMAC100_TXDES0_TXPKT_LATECOL	(1 &lt;&lt; 0)</span>
<span class="cp">#define	FTMAC100_TXDES0_TXPKT_EXSCOL	(1 &lt;&lt; 1)</span>
<span class="cp">#define	FTMAC100_TXDES0_TXDMA_OWN	(1 &lt;&lt; 31)</span>

<span class="cp">#define	FTMAC100_TXDES1_TXBUF_SIZE(x)	((x) &amp; 0x7ff)</span>
<span class="cp">#define	FTMAC100_TXDES1_LTS		(1 &lt;&lt; 27)</span>
<span class="cp">#define	FTMAC100_TXDES1_FTS		(1 &lt;&lt; 28)</span>
<span class="cp">#define	FTMAC100_TXDES1_TX2FIC		(1 &lt;&lt; 29)</span>
<span class="cp">#define	FTMAC100_TXDES1_TXIC		(1 &lt;&lt; 30)</span>
<span class="cp">#define	FTMAC100_TXDES1_EDOTR		(1 &lt;&lt; 31)</span>

<span class="cm">/*</span>
<span class="cm"> * Receive descriptor, aligned to 16 bytes</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">ftmac100_rxdes</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">rxdes0</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">rxdes1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">rxdes2</span><span class="p">;</span>	<span class="cm">/* RXBUF_BADR */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">rxdes3</span><span class="p">;</span>	<span class="cm">/* not used by HW */</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">aligned</span><span class="p">(</span><span class="mi">16</span><span class="p">)));</span>

<span class="cp">#define	FTMAC100_RXDES0_RFL		0x7ff</span>
<span class="cp">#define	FTMAC100_RXDES0_MULTICAST	(1 &lt;&lt; 16)</span>
<span class="cp">#define	FTMAC100_RXDES0_BROADCAST	(1 &lt;&lt; 17)</span>
<span class="cp">#define	FTMAC100_RXDES0_RX_ERR		(1 &lt;&lt; 18)</span>
<span class="cp">#define	FTMAC100_RXDES0_CRC_ERR		(1 &lt;&lt; 19)</span>
<span class="cp">#define	FTMAC100_RXDES0_FTL		(1 &lt;&lt; 20)</span>
<span class="cp">#define	FTMAC100_RXDES0_RUNT		(1 &lt;&lt; 21)</span>
<span class="cp">#define	FTMAC100_RXDES0_RX_ODD_NB	(1 &lt;&lt; 22)</span>
<span class="cp">#define	FTMAC100_RXDES0_LRS		(1 &lt;&lt; 28)</span>
<span class="cp">#define	FTMAC100_RXDES0_FRS		(1 &lt;&lt; 29)</span>
<span class="cp">#define	FTMAC100_RXDES0_RXDMA_OWN	(1 &lt;&lt; 31)</span>

<span class="cp">#define	FTMAC100_RXDES1_RXBUF_SIZE(x)	((x) &amp; 0x7ff)</span>
<span class="cp">#define	FTMAC100_RXDES1_EDORR		(1 &lt;&lt; 31)</span>

<span class="cp">#endif </span><span class="cm">/* __FTMAC100_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
