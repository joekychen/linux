f | bnx2x_cmn.h | s | 32K | 1136 | Eric Dumazet | edumazet@google.com | 1335836297 |  | bnx2x: remove some bloat  Before doing skb->head_frag work on bnx2x driver, I found too much stuff was inlined in bnx2x/bnx2x_cmn.h for no good reason and made my work not very easy.  Move some big functions out of this include file to the respective .c file.  A lot of inline keywords are not needed at all in this huge driver.     text	   data	    bss	    dec	    hex	filename  490083	   1270	     56	 491409	  77f91	bnx2x/bnx2x.ko.before  484206	   1270	     56	 485532	  7689c	bnx2x/bnx2x.ko  Signed-off-by: Eric Dumazet <edumazet@google.com> Cc: Eilon Greenstein <eilong@broadcom.com> Cc: Herbert Xu <herbert@gondor.apana.org.au> Cc: Maciej Å»enczykowski <maze@google.com> Cc: Neal Cardwell <ncardwell@google.com> Cc: Tom Herbert <therbert@google.com> Cc: Jeff Kirsher <jeffrey.t.kirsher@intel.com> Cc: Ben Hutchings <bhutchings@solarflare.com> Cc: Matt Carlson <mcarlson@broadcom.com> Cc: Michael Chan <mchan@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_fw_defs.h | s | 15K | 345 | Barak Witkowski | barak@broadcom.com | 1335234843 |  | bnx2x: add afex support  Following patch adds afex multifunction support to the driver (afex multifunction is based on vntag header) and updates FW version used to 7.2.51.  Support includes the following:  1. Configure vif parameters in firmware (default vlan, vif id, default    priority, allowed priorities) according to values received from NIC. 2. Configure FW to strip/add default vlan according to afex vlan mode. 3. Notify link up to OS only after vif is fully initialized. 4. Support vif list set/get requests and configure FW accordingly. 5. Supply afex statistics upon request from NIC. 6. Special handling to L2 interface in case of FCoE vif.  Signed-off-by: Barak Witkowski <barak@broadcom.com> Signed-off-by: Eilon Greenstein <eilong@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_dcb.h | s | 5.9K | 177 | Ariel Elior | ariele@broadcom.com | 1327603192 |  | bnx2x: Update version to 1.72.0 and copyrights  Signed-off-by: Ariel Elior <ariele@broadcom.com> Signed-off-by: Eilon Greenstein <eilong@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | Makefile | g | 193B |  | Jeff Kirsher | jeffrey.t.kirsher@intel.com | 1313031279 |  | broadcom: Move the Broadcom drivers  Moves the drivers for Broadcom devices into drivers/net/ethernet/broadcom/ and the necessary Kconfig and Makefile changes.  CC: Eilon Greenstein <eilong@broadcom.com> CC: Michael Chan <mchan@broadcom.com> CC: Matt Carlson <mcarlson@broadcom.com> CC: Gary Zambrano <zambrano@broadcom.com> CC: "Maciej W. Rozycki" <macro@linux-mips.org> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | bnx2x.h | s | 62K | 1737 | Eric Dumazet | edumazet@google.com | 1339628333 |  | bnx2x: fix checksum validation  bnx2x driver incorrectly sets ip_summed to CHECKSUM_UNNECESSARY on encapsulated segments. TCP stack happily accepts frames with bad checksums, if they are inside a GRE or IPIP encapsulation.  Our understanding is that if no IP or L4 csum validation was done by the hardware, we should leave ip_summed as is (CHECKSUM_NONE), since hardware doesn't provide CHECKSUM_COMPLETE support in its cqe.  Then, if IP/L4 checksumming was done by the hardware, set CHECKSUM_UNNECESSARY if no error was flagged.  Patch based on findings and analysis from Robert Evans  Signed-off-by: Eric Dumazet <edumazet@google.com> Cc: Eilon Greenstein <eilong@broadcom.com> Cc: Yaniv Rosner <yanivr@broadcom.com> Cc: Merav Sicron <meravs@broadcom.com> Cc: Tom Herbert <therbert@google.com> Cc: Robert Evans <evansr@google.com> Cc: Willem de Bruijn <willemb@google.com> Acked-by: Eilon Greenstein <eilong@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_link.c | s | 375K | 11457 | Yuval Mintz | yuvalmin@broadcom.com | 1339915116 |  | bnx2x: fix link for BCM57711 with 84823 phy  Signed-off-by: Yaniv Rosner <yaniv.rosner@broadcom.com> Signed-off-by: Yuval Mintz <yuvalmin@broadcom.com> Signed-off-by: Eilon Greenstein <eilong@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_stats.h | s | 15K | 483 | Barak Witkowski | barak@broadcom.com | 1335234843 |  | bnx2x: add afex support  Following patch adds afex multifunction support to the driver (afex multifunction is based on vntag header) and updates FW version used to 7.2.51.  Support includes the following:  1. Configure vif parameters in firmware (default vlan, vif id, default    priority, allowed priorities) according to values received from NIC. 2. Configure FW to strip/add default vlan according to afex vlan mode. 3. Notify link up to OS only after vif is fully initialized. 4. Support vif list set/get requests and configure FW accordingly. 5. Supply afex statistics upon request from NIC. 6. Special handling to L2 interface in case of FCoE vif.  Signed-off-by: Barak Witkowski <barak@broadcom.com> Signed-off-by: Eilon Greenstein <eilong@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_dump.h | s | 40K | 1134 | Ariel Elior | ariele@broadcom.com | 1327603192 |  | bnx2x: Update version to 1.72.0 and copyrights  Signed-off-by: Ariel Elior <ariele@broadcom.com> Signed-off-by: Eilon Greenstein <eilong@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_cmn.c | s | 102K | 3295 | Eric Dumazet | edumazet@google.com | 1339799415 |  | bnx2x: fix panic when TX ring is full  There is a off by one error in the minimal number of BD in bnx2x_start_xmit() and bnx2x_tx_int() before stopping/resuming tx queue.  A full size GSO packet, with data included in skb->head really needs (MAX_SKB_FRAGS + 4) BDs, because of bnx2x_tx_split()  This error triggers if BQL is disabled and heavy TCP transmit traffic occurs.  bnx2x_tx_split() definitely can be called, remove a wrong comment.  Reported-by: Tomas Hruby <thruby@google.com> Signed-off-by: Eric Dumazet <edumazet@google.com> Cc: Eilon Greenstein <eilong@broadcom.com> Cc: Yaniv Rosner <yanivr@broadcom.com> Cc: Merav Sicron <meravs@broadcom.com> Cc: Tom Herbert <therbert@google.com> Cc: Robert Evans <evansr@google.com> Cc: Willem de Bruijn <willemb@google.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_init.h | s | 22K | 669 | Barak Witkowski | barak@broadcom.com | 1335234843 |  | bnx2x: add afex support  Following patch adds afex multifunction support to the driver (afex multifunction is based on vntag header) and updates FW version used to 7.2.51.  Support includes the following:  1. Configure vif parameters in firmware (default vlan, vif id, default    priority, allowed priorities) according to values received from NIC. 2. Configure FW to strip/add default vlan according to afex vlan mode. 3. Notify link up to OS only after vif is fully initialized. 4. Support vif list set/get requests and configure FW accordingly. 5. Supply afex statistics upon request from NIC. 6. Special handling to L2 interface in case of FCoE vif.  Signed-off-by: Barak Witkowski <barak@broadcom.com> Signed-off-by: Eilon Greenstein <eilong@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_sp.c | s | 155K | 4893 | Barak Witkowski | barak@broadcom.com | 1335234843 |  | bnx2x: add afex support  Following patch adds afex multifunction support to the driver (afex multifunction is based on vntag header) and updates FW version used to 7.2.51.  Support includes the following:  1. Configure vif parameters in firmware (default vlan, vif id, default    priority, allowed priorities) according to values received from NIC. 2. Configure FW to strip/add default vlan according to afex vlan mode. 3. Notify link up to OS only after vif is fully initialized. 4. Support vif list set/get requests and configure FW accordingly. 5. Supply afex statistics upon request from NIC. 6. Special handling to L2 interface in case of FCoE vif.  Signed-off-by: Barak Witkowski <barak@broadcom.com> Signed-off-by: Eilon Greenstein <eilong@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_main.c | s | 338K | 10524 | David S. Miller | davem@davemloft.net | 1336448140 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/davem/net  Conflicts: 	drivers/net/ethernet/intel/e1000e/param.c 	drivers/net/wireless/iwlwifi/iwl-agn-rx.c 	drivers/net/wireless/iwlwifi/iwl-trans-pcie-rx.c 	drivers/net/wireless/iwlwifi/iwl-trans.h  Resolved the iwlwifi conflict with mainline using 3-way diff posted by John Linville and Stephen Rothwell.  In 'net' we added a bug fix to make iwlwifi report a more accurate skb->truesize but this conflicted with RX path changes that happened meanwhile in net-next.  In e1000e a conflict arose in the validation code for settings of adapter->itr.  'net-next' had more sophisticated logic so that logic was used.  Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_sp.h | s | 34K | 1147 | Barak Witkowski | barak@broadcom.com | 1335234843 |  | bnx2x: add afex support  Following patch adds afex multifunction support to the driver (afex multifunction is based on vntag header) and updates FW version used to 7.2.51.  Support includes the following:  1. Configure vif parameters in firmware (default vlan, vif id, default    priority, allowed priorities) according to values received from NIC. 2. Configure FW to strip/add default vlan according to afex vlan mode. 3. Notify link up to OS only after vif is fully initialized. 4. Support vif list set/get requests and configure FW accordingly. 5. Supply afex statistics upon request from NIC. 6. Special handling to L2 interface in case of FCoE vif.  Signed-off-by: Barak Witkowski <barak@broadcom.com> Signed-off-by: Eilon Greenstein <eilong@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_stats.c | s | 57K | 1534 | Eric Dumazet | edumazet@google.com | 1335836297 |  | bnx2x: remove some bloat  Before doing skb->head_frag work on bnx2x driver, I found too much stuff was inlined in bnx2x/bnx2x_cmn.h for no good reason and made my work not very easy.  Move some big functions out of this include file to the respective .c file.  A lot of inline keywords are not needed at all in this huge driver.     text	   data	    bss	    dec	    hex	filename  490083	   1270	     56	 491409	  77f91	bnx2x/bnx2x.ko.before  484206	   1270	     56	 485532	  7689c	bnx2x/bnx2x.ko  Signed-off-by: Eric Dumazet <edumazet@google.com> Cc: Eilon Greenstein <eilong@broadcom.com> Cc: Herbert Xu <herbert@gondor.apana.org.au> Cc: Maciej Å»enczykowski <maze@google.com> Cc: Neal Cardwell <ncardwell@google.com> Cc: Tom Herbert <therbert@google.com> Cc: Jeff Kirsher <jeffrey.t.kirsher@intel.com> Cc: Ben Hutchings <bhutchings@solarflare.com> Cc: Matt Carlson <mcarlson@broadcom.com> Cc: Michael Chan <mchan@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_link.h | s | 15K | 404 | Barak Witkowski | barak@broadcom.com | 1335234843 |  | bnx2x: add afex support  Following patch adds afex multifunction support to the driver (afex multifunction is based on vntag header) and updates FW version used to 7.2.51.  Support includes the following:  1. Configure vif parameters in firmware (default vlan, vif id, default    priority, allowed priorities) according to values received from NIC. 2. Configure FW to strip/add default vlan according to afex vlan mode. 3. Notify link up to OS only after vif is fully initialized. 4. Support vif list set/get requests and configure FW accordingly. 5. Supply afex statistics upon request from NIC. 6. Special handling to L2 interface in case of FCoE vif.  Signed-off-by: Barak Witkowski <barak@broadcom.com> Signed-off-by: Eilon Greenstein <eilong@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_hsi.h | s | 167K | 4835 | Barak Witkowski | barak@broadcom.com | 1335234843 |  | bnx2x: add afex support  Following patch adds afex multifunction support to the driver (afex multifunction is based on vntag header) and updates FW version used to 7.2.51.  Support includes the following:  1. Configure vif parameters in firmware (default vlan, vif id, default    priority, allowed priorities) according to values received from NIC. 2. Configure FW to strip/add default vlan according to afex vlan mode. 3. Notify link up to OS only after vif is fully initialized. 4. Support vif list set/get requests and configure FW accordingly. 5. Supply afex statistics upon request from NIC. 6. Special handling to L2 interface in case of FCoE vif.  Signed-off-by: Barak Witkowski <barak@broadcom.com> Signed-off-by: Eilon Greenstein <eilong@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_ethtool.c | s | 68K | 2105 | Eric Dumazet | edumazet@google.com | 1335836297 |  | bnx2x: remove some bloat  Before doing skb->head_frag work on bnx2x driver, I found too much stuff was inlined in bnx2x/bnx2x_cmn.h for no good reason and made my work not very easy.  Move some big functions out of this include file to the respective .c file.  A lot of inline keywords are not needed at all in this huge driver.     text	   data	    bss	    dec	    hex	filename  490083	   1270	     56	 491409	  77f91	bnx2x/bnx2x.ko.before  484206	   1270	     56	 485532	  7689c	bnx2x/bnx2x.ko  Signed-off-by: Eric Dumazet <edumazet@google.com> Cc: Eilon Greenstein <eilong@broadcom.com> Cc: Herbert Xu <herbert@gondor.apana.org.au> Cc: Maciej Å»enczykowski <maze@google.com> Cc: Neal Cardwell <ncardwell@google.com> Cc: Tom Herbert <therbert@google.com> Cc: Jeff Kirsher <jeffrey.t.kirsher@intel.com> Cc: Ben Hutchings <bhutchings@solarflare.com> Cc: Matt Carlson <mcarlson@broadcom.com> Cc: Michael Chan <mchan@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_init_ops.h | s | 26K | 799 | Ariel Elior | ariele@broadcom.com | 1327603192 |  | bnx2x: Update version to 1.72.0 and copyrights  Signed-off-by: Ariel Elior <ariele@broadcom.com> Signed-off-by: Eilon Greenstein <eilong@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_reg.h | s | 371K | 7108 | David S. Miller | davem@davemloft.net | 1334082645 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/davem/net
f | bnx2x_fw_file_hdr.h | s | 1.2K | 34 | Ariel Elior | ariele@broadcom.com | 1327603192 |  | bnx2x: Update version to 1.72.0 and copyrights  Signed-off-by: Ariel Elior <ariele@broadcom.com> Signed-off-by: Eilon Greenstein <eilong@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bnx2x_dcb.c | s | 71K | 2160 | Dmitry Kravkov | dmitry@broadcom.com | 1332190387 |  | bnx2x: added TLV_NOT_FOUND flags to the dcb  The new error flags are supported by the bnx2x FW.  Signed-off-by: Dmitry Kravkov <dmitry@broadcom.com> Signed-off-by: Yuval Mintz <yuvalmin@broadcom.com> Signed-off-by: Eilon Greenstein <eilong@broadcom.com> Signed-off-by: David S. Miller <davem@davemloft.net>
