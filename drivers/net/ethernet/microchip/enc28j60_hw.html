<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › net › ethernet › microchip › enc28j60_hw.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>enc28j60_hw.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * enc28j60_hw.h: EDTP FrameThrower style enc28j60 registers</span>
<span class="cm"> *</span>
<span class="cm"> * $Id: enc28j60_hw.h,v 1.9 2007/12/14 11:59:16 claudio Exp $</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _ENC28J60_HW_H</span>
<span class="cp">#define _ENC28J60_HW_H</span>

<span class="cm">/*</span>
<span class="cm"> * ENC28J60 Control Registers</span>
<span class="cm"> * Control register definitions are a combination of address,</span>
<span class="cm"> * bank number, and Ethernet/MAC/PHY indicator bits.</span>
<span class="cm"> * - Register address	(bits 0-4)</span>
<span class="cm"> * - Bank number	(bits 5-6)</span>
<span class="cm"> * - MAC/MII indicator	(bit 7)</span>
<span class="cm"> */</span>
<span class="cp">#define ADDR_MASK	0x1F</span>
<span class="cp">#define BANK_MASK	0x60</span>
<span class="cp">#define SPRD_MASK	0x80</span>
<span class="cm">/* All-bank registers */</span>
<span class="cp">#define EIE		0x1B</span>
<span class="cp">#define EIR		0x1C</span>
<span class="cp">#define ESTAT		0x1D</span>
<span class="cp">#define ECON2		0x1E</span>
<span class="cp">#define ECON1		0x1F</span>
<span class="cm">/* Bank 0 registers */</span>
<span class="cp">#define ERDPTL		(0x00|0x00)</span>
<span class="cp">#define ERDPTH		(0x01|0x00)</span>
<span class="cp">#define EWRPTL		(0x02|0x00)</span>
<span class="cp">#define EWRPTH		(0x03|0x00)</span>
<span class="cp">#define ETXSTL		(0x04|0x00)</span>
<span class="cp">#define ETXSTH		(0x05|0x00)</span>
<span class="cp">#define ETXNDL		(0x06|0x00)</span>
<span class="cp">#define ETXNDH		(0x07|0x00)</span>
<span class="cp">#define ERXSTL		(0x08|0x00)</span>
<span class="cp">#define ERXSTH		(0x09|0x00)</span>
<span class="cp">#define ERXNDL		(0x0A|0x00)</span>
<span class="cp">#define ERXNDH		(0x0B|0x00)</span>
<span class="cp">#define ERXRDPTL	(0x0C|0x00)</span>
<span class="cp">#define ERXRDPTH	(0x0D|0x00)</span>
<span class="cp">#define ERXWRPTL	(0x0E|0x00)</span>
<span class="cp">#define ERXWRPTH	(0x0F|0x00)</span>
<span class="cp">#define EDMASTL		(0x10|0x00)</span>
<span class="cp">#define EDMASTH		(0x11|0x00)</span>
<span class="cp">#define EDMANDL		(0x12|0x00)</span>
<span class="cp">#define EDMANDH		(0x13|0x00)</span>
<span class="cp">#define EDMADSTL	(0x14|0x00)</span>
<span class="cp">#define EDMADSTH	(0x15|0x00)</span>
<span class="cp">#define EDMACSL		(0x16|0x00)</span>
<span class="cp">#define EDMACSH		(0x17|0x00)</span>
<span class="cm">/* Bank 1 registers */</span>
<span class="cp">#define EHT0		(0x00|0x20)</span>
<span class="cp">#define EHT1		(0x01|0x20)</span>
<span class="cp">#define EHT2		(0x02|0x20)</span>
<span class="cp">#define EHT3		(0x03|0x20)</span>
<span class="cp">#define EHT4		(0x04|0x20)</span>
<span class="cp">#define EHT5		(0x05|0x20)</span>
<span class="cp">#define EHT6		(0x06|0x20)</span>
<span class="cp">#define EHT7		(0x07|0x20)</span>
<span class="cp">#define EPMM0		(0x08|0x20)</span>
<span class="cp">#define EPMM1		(0x09|0x20)</span>
<span class="cp">#define EPMM2		(0x0A|0x20)</span>
<span class="cp">#define EPMM3		(0x0B|0x20)</span>
<span class="cp">#define EPMM4		(0x0C|0x20)</span>
<span class="cp">#define EPMM5		(0x0D|0x20)</span>
<span class="cp">#define EPMM6		(0x0E|0x20)</span>
<span class="cp">#define EPMM7		(0x0F|0x20)</span>
<span class="cp">#define EPMCSL		(0x10|0x20)</span>
<span class="cp">#define EPMCSH		(0x11|0x20)</span>
<span class="cp">#define EPMOL		(0x14|0x20)</span>
<span class="cp">#define EPMOH		(0x15|0x20)</span>
<span class="cp">#define EWOLIE		(0x16|0x20)</span>
<span class="cp">#define EWOLIR		(0x17|0x20)</span>
<span class="cp">#define ERXFCON		(0x18|0x20)</span>
<span class="cp">#define EPKTCNT		(0x19|0x20)</span>
<span class="cm">/* Bank 2 registers */</span>
<span class="cp">#define MACON1		(0x00|0x40|SPRD_MASK)</span>
<span class="cm">/* #define MACON2	(0x01|0x40|SPRD_MASK) */</span>
<span class="cp">#define MACON3		(0x02|0x40|SPRD_MASK)</span>
<span class="cp">#define MACON4		(0x03|0x40|SPRD_MASK)</span>
<span class="cp">#define MABBIPG		(0x04|0x40|SPRD_MASK)</span>
<span class="cp">#define MAIPGL		(0x06|0x40|SPRD_MASK)</span>
<span class="cp">#define MAIPGH		(0x07|0x40|SPRD_MASK)</span>
<span class="cp">#define MACLCON1	(0x08|0x40|SPRD_MASK)</span>
<span class="cp">#define MACLCON2	(0x09|0x40|SPRD_MASK)</span>
<span class="cp">#define MAMXFLL		(0x0A|0x40|SPRD_MASK)</span>
<span class="cp">#define MAMXFLH		(0x0B|0x40|SPRD_MASK)</span>
<span class="cp">#define MAPHSUP		(0x0D|0x40|SPRD_MASK)</span>
<span class="cp">#define MICON		(0x11|0x40|SPRD_MASK)</span>
<span class="cp">#define MICMD		(0x12|0x40|SPRD_MASK)</span>
<span class="cp">#define MIREGADR	(0x14|0x40|SPRD_MASK)</span>
<span class="cp">#define MIWRL		(0x16|0x40|SPRD_MASK)</span>
<span class="cp">#define MIWRH		(0x17|0x40|SPRD_MASK)</span>
<span class="cp">#define MIRDL		(0x18|0x40|SPRD_MASK)</span>
<span class="cp">#define MIRDH		(0x19|0x40|SPRD_MASK)</span>
<span class="cm">/* Bank 3 registers */</span>
<span class="cp">#define MAADR1		(0x00|0x60|SPRD_MASK)</span>
<span class="cp">#define MAADR0		(0x01|0x60|SPRD_MASK)</span>
<span class="cp">#define MAADR3		(0x02|0x60|SPRD_MASK)</span>
<span class="cp">#define MAADR2		(0x03|0x60|SPRD_MASK)</span>
<span class="cp">#define MAADR5		(0x04|0x60|SPRD_MASK)</span>
<span class="cp">#define MAADR4		(0x05|0x60|SPRD_MASK)</span>
<span class="cp">#define EBSTSD		(0x06|0x60)</span>
<span class="cp">#define EBSTCON		(0x07|0x60)</span>
<span class="cp">#define EBSTCSL		(0x08|0x60)</span>
<span class="cp">#define EBSTCSH		(0x09|0x60)</span>
<span class="cp">#define MISTAT		(0x0A|0x60|SPRD_MASK)</span>
<span class="cp">#define EREVID		(0x12|0x60)</span>
<span class="cp">#define ECOCON		(0x15|0x60)</span>
<span class="cp">#define EFLOCON		(0x17|0x60)</span>
<span class="cp">#define EPAUSL		(0x18|0x60)</span>
<span class="cp">#define EPAUSH		(0x19|0x60)</span>
<span class="cm">/* PHY registers */</span>
<span class="cp">#define PHCON1		0x00</span>
<span class="cp">#define PHSTAT1		0x01</span>
<span class="cp">#define PHHID1		0x02</span>
<span class="cp">#define PHHID2		0x03</span>
<span class="cp">#define PHCON2		0x10</span>
<span class="cp">#define PHSTAT2		0x11</span>
<span class="cp">#define PHIE		0x12</span>
<span class="cp">#define PHIR		0x13</span>
<span class="cp">#define PHLCON		0x14</span>

<span class="cm">/* ENC28J60 EIE Register Bit Definitions */</span>
<span class="cp">#define EIE_INTIE	0x80</span>
<span class="cp">#define EIE_PKTIE	0x40</span>
<span class="cp">#define EIE_DMAIE	0x20</span>
<span class="cp">#define EIE_LINKIE	0x10</span>
<span class="cp">#define EIE_TXIE	0x08</span>
<span class="cm">/* #define EIE_WOLIE	0x04 (reserved) */</span>
<span class="cp">#define EIE_TXERIE	0x02</span>
<span class="cp">#define EIE_RXERIE	0x01</span>
<span class="cm">/* ENC28J60 EIR Register Bit Definitions */</span>
<span class="cp">#define EIR_PKTIF	0x40</span>
<span class="cp">#define EIR_DMAIF	0x20</span>
<span class="cp">#define EIR_LINKIF	0x10</span>
<span class="cp">#define EIR_TXIF	0x08</span>
<span class="cm">/* #define EIR_WOLIF	0x04 (reserved) */</span>
<span class="cp">#define EIR_TXERIF	0x02</span>
<span class="cp">#define EIR_RXERIF	0x01</span>
<span class="cm">/* ENC28J60 ESTAT Register Bit Definitions */</span>
<span class="cp">#define ESTAT_INT	0x80</span>
<span class="cp">#define ESTAT_LATECOL	0x10</span>
<span class="cp">#define ESTAT_RXBUSY	0x04</span>
<span class="cp">#define ESTAT_TXABRT	0x02</span>
<span class="cp">#define ESTAT_CLKRDY	0x01</span>
<span class="cm">/* ENC28J60 ECON2 Register Bit Definitions */</span>
<span class="cp">#define ECON2_AUTOINC	0x80</span>
<span class="cp">#define ECON2_PKTDEC	0x40</span>
<span class="cp">#define ECON2_PWRSV	0x20</span>
<span class="cp">#define ECON2_VRPS	0x08</span>
<span class="cm">/* ENC28J60 ECON1 Register Bit Definitions */</span>
<span class="cp">#define ECON1_TXRST	0x80</span>
<span class="cp">#define ECON1_RXRST	0x40</span>
<span class="cp">#define ECON1_DMAST	0x20</span>
<span class="cp">#define ECON1_CSUMEN	0x10</span>
<span class="cp">#define ECON1_TXRTS	0x08</span>
<span class="cp">#define ECON1_RXEN	0x04</span>
<span class="cp">#define ECON1_BSEL1	0x02</span>
<span class="cp">#define ECON1_BSEL0	0x01</span>
<span class="cm">/* ENC28J60 MACON1 Register Bit Definitions */</span>
<span class="cp">#define MACON1_LOOPBK	0x10</span>
<span class="cp">#define MACON1_TXPAUS	0x08</span>
<span class="cp">#define MACON1_RXPAUS	0x04</span>
<span class="cp">#define MACON1_PASSALL	0x02</span>
<span class="cp">#define MACON1_MARXEN	0x01</span>
<span class="cm">/* ENC28J60 MACON2 Register Bit Definitions */</span>
<span class="cp">#define MACON2_MARST	0x80</span>
<span class="cp">#define MACON2_RNDRST	0x40</span>
<span class="cp">#define MACON2_MARXRST	0x08</span>
<span class="cp">#define MACON2_RFUNRST	0x04</span>
<span class="cp">#define MACON2_MATXRST	0x02</span>
<span class="cp">#define MACON2_TFUNRST	0x01</span>
<span class="cm">/* ENC28J60 MACON3 Register Bit Definitions */</span>
<span class="cp">#define MACON3_PADCFG2	0x80</span>
<span class="cp">#define MACON3_PADCFG1	0x40</span>
<span class="cp">#define MACON3_PADCFG0	0x20</span>
<span class="cp">#define MACON3_TXCRCEN	0x10</span>
<span class="cp">#define MACON3_PHDRLEN	0x08</span>
<span class="cp">#define MACON3_HFRMLEN	0x04</span>
<span class="cp">#define MACON3_FRMLNEN	0x02</span>
<span class="cp">#define MACON3_FULDPX	0x01</span>
<span class="cm">/* ENC28J60 MICMD Register Bit Definitions */</span>
<span class="cp">#define MICMD_MIISCAN	0x02</span>
<span class="cp">#define MICMD_MIIRD	0x01</span>
<span class="cm">/* ENC28J60 MISTAT Register Bit Definitions */</span>
<span class="cp">#define MISTAT_NVALID	0x04</span>
<span class="cp">#define MISTAT_SCAN	0x02</span>
<span class="cp">#define MISTAT_BUSY	0x01</span>
<span class="cm">/* ENC28J60 ERXFCON Register Bit Definitions */</span>
<span class="cp">#define ERXFCON_UCEN	0x80</span>
<span class="cp">#define ERXFCON_ANDOR	0x40</span>
<span class="cp">#define ERXFCON_CRCEN	0x20</span>
<span class="cp">#define ERXFCON_PMEN	0x10</span>
<span class="cp">#define ERXFCON_MPEN	0x08</span>
<span class="cp">#define ERXFCON_HTEN	0x04</span>
<span class="cp">#define ERXFCON_MCEN	0x02</span>
<span class="cp">#define ERXFCON_BCEN	0x01</span>

<span class="cm">/* ENC28J60 PHY PHCON1 Register Bit Definitions */</span>
<span class="cp">#define PHCON1_PRST	0x8000</span>
<span class="cp">#define PHCON1_PLOOPBK	0x4000</span>
<span class="cp">#define PHCON1_PPWRSV	0x0800</span>
<span class="cp">#define PHCON1_PDPXMD	0x0100</span>
<span class="cm">/* ENC28J60 PHY PHSTAT1 Register Bit Definitions */</span>
<span class="cp">#define PHSTAT1_PFDPX	0x1000</span>
<span class="cp">#define PHSTAT1_PHDPX	0x0800</span>
<span class="cp">#define PHSTAT1_LLSTAT	0x0004</span>
<span class="cp">#define PHSTAT1_JBSTAT	0x0002</span>
<span class="cm">/* ENC28J60 PHY PHSTAT2 Register Bit Definitions */</span>
<span class="cp">#define PHSTAT2_TXSTAT	(1 &lt;&lt; 13)</span>
<span class="cp">#define PHSTAT2_RXSTAT	(1 &lt;&lt; 12)</span>
<span class="cp">#define PHSTAT2_COLSTAT	(1 &lt;&lt; 11)</span>
<span class="cp">#define PHSTAT2_LSTAT	(1 &lt;&lt; 10)</span>
<span class="cp">#define PHSTAT2_DPXSTAT	(1 &lt;&lt; 9)</span>
<span class="cp">#define PHSTAT2_PLRITY	(1 &lt;&lt; 5)</span>
<span class="cm">/* ENC28J60 PHY PHCON2 Register Bit Definitions */</span>
<span class="cp">#define PHCON2_FRCLINK	0x4000</span>
<span class="cp">#define PHCON2_TXDIS	0x2000</span>
<span class="cp">#define PHCON2_JABBER	0x0400</span>
<span class="cp">#define PHCON2_HDLDIS	0x0100</span>
<span class="cm">/* ENC28J60 PHY PHIE Register Bit Definitions */</span>
<span class="cp">#define PHIE_PLNKIE	(1 &lt;&lt; 4)</span>
<span class="cp">#define PHIE_PGEIE	(1 &lt;&lt; 1)</span>
<span class="cm">/* ENC28J60 PHY PHIR Register Bit Definitions */</span>
<span class="cp">#define PHIR_PLNKIF	(1 &lt;&lt; 4)</span>
<span class="cp">#define PHIR_PGEIF	(1 &lt;&lt; 1)</span>

<span class="cm">/* ENC28J60 Packet Control Byte Bit Definitions */</span>
<span class="cp">#define PKTCTRL_PHUGEEN		0x08</span>
<span class="cp">#define PKTCTRL_PPADEN		0x04</span>
<span class="cp">#define PKTCTRL_PCRCEN		0x02</span>
<span class="cp">#define PKTCTRL_POVERRIDE	0x01</span>

<span class="cm">/* ENC28J60 Transmit Status Vector */</span>
<span class="cp">#define TSV_TXBYTECNT		0</span>
<span class="cp">#define TSV_TXCOLLISIONCNT	16</span>
<span class="cp">#define TSV_TXCRCERROR		20</span>
<span class="cp">#define TSV_TXLENCHKERROR	21</span>
<span class="cp">#define TSV_TXLENOUTOFRANGE	22</span>
<span class="cp">#define TSV_TXDONE		23</span>
<span class="cp">#define TSV_TXMULTICAST		24</span>
<span class="cp">#define TSV_TXBROADCAST		25</span>
<span class="cp">#define TSV_TXPACKETDEFER	26</span>
<span class="cp">#define TSV_TXEXDEFER		27</span>
<span class="cp">#define TSV_TXEXCOLLISION	28</span>
<span class="cp">#define TSV_TXLATECOLLISION	29</span>
<span class="cp">#define TSV_TXGIANT		30</span>
<span class="cp">#define TSV_TXUNDERRUN		31</span>
<span class="cp">#define TSV_TOTBYTETXONWIRE	32</span>
<span class="cp">#define TSV_TXCONTROLFRAME	48</span>
<span class="cp">#define TSV_TXPAUSEFRAME	49</span>
<span class="cp">#define TSV_BACKPRESSUREAPP	50</span>
<span class="cp">#define TSV_TXVLANTAGFRAME	51</span>

<span class="cp">#define TSV_SIZE		7</span>
<span class="cp">#define TSV_BYTEOF(x)		((x) / 8)</span>
<span class="cp">#define TSV_BITMASK(x)		(1 &lt;&lt; ((x) % 8))</span>
<span class="cp">#define TSV_GETBIT(x, y)	(((x)[TSV_BYTEOF(y)] &amp; TSV_BITMASK(y)) ? 1 : 0)</span>

<span class="cm">/* ENC28J60 Receive Status Vector */</span>
<span class="cp">#define RSV_RXLONGEVDROPEV	16</span>
<span class="cp">#define RSV_CARRIEREV		18</span>
<span class="cp">#define RSV_CRCERROR		20</span>
<span class="cp">#define RSV_LENCHECKERR		21</span>
<span class="cp">#define RSV_LENOUTOFRANGE	22</span>
<span class="cp">#define RSV_RXOK		23</span>
<span class="cp">#define RSV_RXMULTICAST		24</span>
<span class="cp">#define RSV_RXBROADCAST		25</span>
<span class="cp">#define RSV_DRIBBLENIBBLE	26</span>
<span class="cp">#define RSV_RXCONTROLFRAME	27</span>
<span class="cp">#define RSV_RXPAUSEFRAME	28</span>
<span class="cp">#define RSV_RXUNKNOWNOPCODE	29</span>
<span class="cp">#define RSV_RXTYPEVLAN		30</span>

<span class="cp">#define RSV_SIZE		6</span>
<span class="cp">#define RSV_BITMASK(x)		(1 &lt;&lt; ((x) - 16))</span>
<span class="cp">#define RSV_GETBIT(x, y)	(((x) &amp; RSV_BITMASK(y)) ? 1 : 0)</span>


<span class="cm">/* SPI operation codes */</span>
<span class="cp">#define ENC28J60_READ_CTRL_REG	0x00</span>
<span class="cp">#define ENC28J60_READ_BUF_MEM	0x3A</span>
<span class="cp">#define ENC28J60_WRITE_CTRL_REG 0x40</span>
<span class="cp">#define ENC28J60_WRITE_BUF_MEM	0x7A</span>
<span class="cp">#define ENC28J60_BIT_FIELD_SET	0x80</span>
<span class="cp">#define ENC28J60_BIT_FIELD_CLR	0xA0</span>
<span class="cp">#define ENC28J60_SOFT_RESET	0xFF</span>


<span class="cm">/* buffer boundaries applied to internal 8K ram</span>
<span class="cm"> * entire available packet buffer space is allocated.</span>
<span class="cm"> * Give TX buffer space for one full ethernet frame (~1500 bytes)</span>
<span class="cm"> * receive buffer gets the rest */</span>
<span class="cp">#define TXSTART_INIT		0x1A00</span>
<span class="cp">#define TXEND_INIT		0x1FFF</span>

<span class="cm">/* Put RX buffer at 0 as suggested by the Errata datasheet */</span>
<span class="cp">#define RXSTART_INIT		0x0000</span>
<span class="cp">#define RXEND_INIT		0x19FF</span>

<span class="cm">/* maximum ethernet frame length */</span>
<span class="cp">#define MAX_FRAMELEN		1518</span>

<span class="cm">/* Preferred half duplex: LEDA: Link status LEDB: Rx/Tx activity */</span>
<span class="cp">#define ENC28J60_LAMPS_MODE	0x3476</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
