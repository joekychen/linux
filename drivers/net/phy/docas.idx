f | Makefile | g | 1.0K |  | David Daney | david.daney@cavium.com | 1336445889 |  | netdev/of/phy: Add MDIO bus multiplexer driven by GPIO lines.  The GPIO pins select which sub bus is connected to the master.  Initially tested with an sn74cbtlv3253 switch device wired into the MDIO bus.  Signed-off-by: David Daney <david.daney@cavium.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | broadcom.c | s | 26K | 794 | Joe Perches | joe@perches.com | 1329112060 |  | drivers/net: Remove boolean comparisons to true/false  Booleans should not be compared to true or false but be directly tested or tested with !.  Done via cocci script:  @@ bool t; @@ - t == true + t @@ bool t; @@ - t != true + !t @@ bool t; @@ - t == false + !t @@ bool t; @@ - t != false + t  Signed-off-by: Joe Perches <joe@perches.com> Reviewed-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | bcm63xx.c | s | 3.4K | 115 | Srinivas Kandagatla | srinivas.kandagatla@st.com | 1333494120 |  | net:phy:bcm63xx: remove unnecessary code  Compile tested. remove unnecessary code that matches this coccinelle pattern  	ret = phy_write(x, y , z) 	if (ret < 0) 		return ret; 	return 0;  As phy_write returns error code, we dont need to do not need extra check before returning.  Signed-off-by: Srinivas Kandagatla <srinivas.kandagatla@st.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | et1011c.c | s | 2.9K | 105 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1286264069 |  | net/phy: fix many "defined but unused" warnings  MODULE_DEVICE_TABLE only expands to something if it's compiled for a module.  So when building-in support for the phys, the mdio_device_id tables are unused.  Marking them with __maybe_unused fixes the following warnings:  	drivers/net/phy/bcm63xx.c:134: warning: 'bcm63xx_tbl' defined but not used 	drivers/net/phy/broadcom.c:933: warning: 'broadcom_tbl' defined but not used 	drivers/net/phy/cicada.c:162: warning: 'cicada_tbl' defined but not used 	drivers/net/phy/davicom.c:222: warning: 'davicom_tbl' defined but not used 	drivers/net/phy/et1011c.c:114: warning: 'et1011c_tbl' defined but not used 	drivers/net/phy/icplus.c:137: warning: 'icplus_tbl' defined but not used 	drivers/net/phy/lxt.c:226: warning: 'lxt_tbl' defined but not used 	drivers/net/phy/marvell.c:724: warning: 'marvell_tbl' defined but not used 	drivers/net/phy/micrel.c:234: warning: 'micrel_tbl' defined but not used 	drivers/net/phy/national.c:154: warning: 'ns_tbl' defined but not used 	drivers/net/phy/qsemi.c:141: warning: 'qs6612_tbl' defined but not used 	drivers/net/phy/realtek.c:82: warning: 'realtek_tbl' defined but not used 	drivers/net/phy/smsc.c:257: warning: 'smsc_tbl' defined but not used 	drivers/net/phy/ste10Xp.c:135: warning: 'ste10Xp_tbl' defined but not used 	drivers/net/phy/vitesse.c:195: warning: 'vitesse_tbl' defined but not used  Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> Signed-off-by: David S. Miller <davem@davemloft.net>
f | phy_device.c | s | 24K | 825 | David Daney | david.daney@cavium.com | 1337144352 |  | netdev/phy: Make get_phy_id() static and quit EXPORTing it.  This function is only referenced from within phy_device.c, so there is no reason to export it.  In fact, we can make it static.  Signed-off-by: David Daney <david.daney@cavium.com> Acked-by: Paul Gortmaker <paul.gortmaker@windriver.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | marvell.c | s | 20K | 717 | Srinivas Kandagatla | srinivas.kandagatla@st.com | 1333494120 |  | net:phy:marvell: remove unnecessary code  Compile tested. remove unnecessary code that matches this coccinelle pattern  	ret = phy_write(x, y , z) 	if (ret < 0) 	       	return ret; 	return 0;  As phy_write returns error code, we dont need to do not need extra check before returning.  Signed-off-by: Srinivas Kandagatla <srinivas.kandagatla@st.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | ste10Xp.c | s | 3.5K | 123 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1286264069 |  | net/phy: fix many "defined but unused" warnings  MODULE_DEVICE_TABLE only expands to something if it's compiled for a module.  So when building-in support for the phys, the mdio_device_id tables are unused.  Marking them with __maybe_unused fixes the following warnings:  	drivers/net/phy/bcm63xx.c:134: warning: 'bcm63xx_tbl' defined but not used 	drivers/net/phy/broadcom.c:933: warning: 'broadcom_tbl' defined but not used 	drivers/net/phy/cicada.c:162: warning: 'cicada_tbl' defined but not used 	drivers/net/phy/davicom.c:222: warning: 'davicom_tbl' defined but not used 	drivers/net/phy/et1011c.c:114: warning: 'et1011c_tbl' defined but not used 	drivers/net/phy/icplus.c:137: warning: 'icplus_tbl' defined but not used 	drivers/net/phy/lxt.c:226: warning: 'lxt_tbl' defined but not used 	drivers/net/phy/marvell.c:724: warning: 'marvell_tbl' defined but not used 	drivers/net/phy/micrel.c:234: warning: 'micrel_tbl' defined but not used 	drivers/net/phy/national.c:154: warning: 'ns_tbl' defined but not used 	drivers/net/phy/qsemi.c:141: warning: 'qs6612_tbl' defined but not used 	drivers/net/phy/realtek.c:82: warning: 'realtek_tbl' defined but not used 	drivers/net/phy/smsc.c:257: warning: 'smsc_tbl' defined but not used 	drivers/net/phy/ste10Xp.c:135: warning: 'ste10Xp_tbl' defined but not used 	drivers/net/phy/vitesse.c:195: warning: 'vitesse_tbl' defined but not used  Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> Signed-off-by: David S. Miller <davem@davemloft.net>
f | qsemi.c | s | 3.7K | 122 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1286264069 |  | net/phy: fix many "defined but unused" warnings  MODULE_DEVICE_TABLE only expands to something if it's compiled for a module.  So when building-in support for the phys, the mdio_device_id tables are unused.  Marking them with __maybe_unused fixes the following warnings:  	drivers/net/phy/bcm63xx.c:134: warning: 'bcm63xx_tbl' defined but not used 	drivers/net/phy/broadcom.c:933: warning: 'broadcom_tbl' defined but not used 	drivers/net/phy/cicada.c:162: warning: 'cicada_tbl' defined but not used 	drivers/net/phy/davicom.c:222: warning: 'davicom_tbl' defined but not used 	drivers/net/phy/et1011c.c:114: warning: 'et1011c_tbl' defined but not used 	drivers/net/phy/icplus.c:137: warning: 'icplus_tbl' defined but not used 	drivers/net/phy/lxt.c:226: warning: 'lxt_tbl' defined but not used 	drivers/net/phy/marvell.c:724: warning: 'marvell_tbl' defined but not used 	drivers/net/phy/micrel.c:234: warning: 'micrel_tbl' defined but not used 	drivers/net/phy/national.c:154: warning: 'ns_tbl' defined but not used 	drivers/net/phy/qsemi.c:141: warning: 'qs6612_tbl' defined but not used 	drivers/net/phy/realtek.c:82: warning: 'realtek_tbl' defined but not used 	drivers/net/phy/smsc.c:257: warning: 'smsc_tbl' defined but not used 	drivers/net/phy/ste10Xp.c:135: warning: 'ste10Xp_tbl' defined but not used 	drivers/net/phy/vitesse.c:195: warning: 'vitesse_tbl' defined but not used  Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> Signed-off-by: David S. Miller <davem@davemloft.net>
f | vitesse.c | s | 5.2K | 172 | Andy Fleming | afleming@freescale.com | 1319054385 |  | phylib: Modify Vitesse RGMII skew settings  The Vitesse driver was using the RGMII_ID interface type to determine if skew was necessary.  However, we want to move away from using that interface type, as it's really a property of the board's PHY connection. However, some boards depend on it, so we want to support it, while allowing new boards to use the more flexible "fixups" approach.  To do this, we extract the code which adds skew into its own function, and call that function when RGMII_ID has been selected.  Another side-effect of this change is that if your PHY has skew set already, it doesn't clear it.  This way, the fixup code can modify the register without config_init then clearing it.  Signed-off-by: Andy Fleming <afleming@freescale.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | mdio-bitbang.c | s | 5.6K | 194 | Srinivas Kandagatla | srinivas.kandagatla@st.com | 1321394177 |  | mdio-gpio: Add reset functionality to mdio-gpio driver(v2).  This patch adds phy reset functionality to mdio-gpio driver. Now mdio_gpio_platform_data has new member as function pointer which can be filled at the bsp level for a callback from phy infrastructure. Also the mdio-bitbang driver fills-in the reset function of mii_bus structure.  Without this patch the bsp level code has to takecare of the reseting PHY's on the bus, which become bit hacky for every bsp and phy-infrastructure is ignored aswell.  Signed-off-by: Srinivas Kandagatla <srinivas.kandagatla@st.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | dp83640_reg.h | s | 15K | 240 | Richard Cochran | richardcochran@gmail.com | 1306181423 |  | ptp: Added a clock driver for the National Semiconductor PHYTER.  This patch adds support for the PTP clock found on the DP83640. The basic clock operations and one external time stamp have been implemented.  Signed-off-by: Richard Cochran <richard.cochran@omicron.at> Signed-off-by: John Stultz <john.stultz@linaro.org>
f | mdio-mux.c | s | 4.3K | 160 | David Daney | david.daney@cavium.com | 1336445889 |  | netdev/of/phy: Add MDIO bus multiplexer support.  This patch adds a somewhat generic framework for MDIO bus multiplexers.  It is modeled on the I2C multiplexer.  The multiplexer is needed if there are multiple PHYs with the same address connected to the same MDIO bus adepter, or if there is insufficient electrical drive capability for all the connected PHY devices.  Conceptually it could look something like this:                     ------------------                    || Control Signal ||                    --------+---------                            ||  ---------------   --------+------  || MDIO MASTER ||---|| Multiplexer ||  ---------------   --+-------+----                      ||       ||                      C       C                      h       h                      i       i                      l       l                      d       d                      ||       ||      ---------       A       B   ---------      ||       ||       ||       ||   ||       ||      || PHY@1 +-------+       +---+ PHY@1 ||      ||       ||       ||       ||   ||       ||      ---------       ||       ||   ---------      ---------       ||       ||   ---------      ||       ||       ||       ||   ||       ||      || PHY@2 +-------+       +---+ PHY@2 ||      ||       ||                   ||       ||      ---------                   ---------  This framework configures the bus topology from device tree data.  The mechanics of switching the multiplexer is left to device specific drivers.  The follow-on patch contains a multiplexer driven by GPIO lines.  Signed-off-by: David Daney <david.daney@cavium.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | dp83640.c | s | 31K | 1061 | Richard Cochran | richardcochran@gmail.com | 1333531725 |  | dp83640: Support the get_ts_info ethtool method.  Signed-off-by: Richard Cochran <richardcochran@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | national.c | s | 4.3K | 136 | Giuseppe CAVALLARO | peppe.cavallaro@st.com | 1314377304 |  | net/phy: fix DP83865 phy interrupt handler  According to the DP83865 datasheet we need to clear the interrupt status bit by writing a 1 to the corresponding bit in INT_CLEAR (2:0 are reserved).  Proposed and tested by Thorsten.  Signed-off-by: Thorsten Schubert <tshu@msc-ge.com> Signed-off-by: Giuseppe Cavallaro <peppe.cavallaro@st.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | realtek.c | s | 1.9K | 72 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103867 |  | drivers/net: Add module.h to drivers who were implicitly using it  The device.h header was including module.h, making it present for most of these drivers.  But we want to clean that up.  Call out the include of module.h in the modular network drivers.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | mdio-mux-gpio.c | s | 2.9K | 117 | David Daney | david.daney@cavium.com | 1336445889 |  | netdev/of/phy: Add MDIO bus multiplexer driven by GPIO lines.  The GPIO pins select which sub bus is connected to the master.  Initially tested with an sn74cbtlv3253 switch device wired into the MDIO bus.  Signed-off-by: David Daney <david.daney@cavium.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | Kconfig | g | 4.0K |  | David Daney | david.daney@cavium.com | 1336445889 |  | netdev/of/phy: Add MDIO bus multiplexer driven by GPIO lines.  The GPIO pins select which sub bus is connected to the master.  Initially tested with an sn74cbtlv3253 switch device wired into the MDIO bus.  Signed-off-by: David Daney <david.daney@cavium.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | icplus.c | s | 6.4K | 232 | Giuseppe CAVALLARO | peppe.cavallaro@st.com | 1338825760 |  | net: icplus: fix interrupt mask  This patch fixes the interrupt mask for IC101 A/G devices and now enables the link/speed/duplex interrupts. This is done by setting the "INTR pin used" bit and cleaning all the other bits in the Register 17.  Reported-by: Stuart Menefy <stuart.menefy@st.com> Signed-off-by: Giuseppe Cavallaro <peppe.cavallaro@st.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | micrel.c | s | 6.6K | 218 | Jason Wang | jason77.wang@gmail.com | 1340091096 |  | phy/micrel: change phy_id_mask for KSZ9021 and KS8001  On a freescale imx6q platform, a hardware phy chip KSZ9021 is recognized as a KS8001 chip by the current driver like this: eth0: Freescale FEC PHY driver [Micrel KS8001 or KS8721]  KSZ9021 has phy_id 0x00221610, while KSZ8001 has phy_id 0x0022161a, the current phy_id_mask (0x00fffff0/0x00ffff10) can't distinguish them. So change phy_id_mask to resolve this problem.  Although the micrel datasheet says that the 4 LSB of phyid2 register contains the chip revision number and the current driver is designed to follow this rule, in reality the chip implementation doesn't follow it.  Cc: David J. Choi <david.choi@micrel.com> Cc: David S. Miller <davem@davemloft.net> Cc: Nobuhiro Iwamatsu <nobuhiro.iwamatsu.yj@renesas.com> Signed-off-by: Hui Wang <jason77.wang@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | amd.c | s | 2.3K | 83 | Heiko Schocher | hs@denx.de | 1332194525 |  | phy: add am79c874 PHY support  Signed-off-by: Heiko Schocher <hs@denx.de> Signed-off-by: Anatolij Gustschin <agust@denx.de> Signed-off-by: David S. Miller <davem@davemloft.net>
f | mdio_bus.c | s | 10K | 374 | Randy Dunlap | rdunlap@xenotime.net | 1339219258 |  | netdev: fix drivers/net/phy/ kernel-doc warnings  Fix kernel-doc warnings in drivers/net/phy:  Warning(drivers/net/phy/mdio_bus.c:109): No description found for parameter 'mdio_bus_np' Warning(drivers/net/phy/mdio_bus.c:109): Excess function parameter 'mdio_np' description in 'of_mdio_find_bus'  Signed-off-by: Randy Dunlap <rdunlap@xenotime.net> Signed-off-by: David S. Miller <davem@davemloft.net>
f | spi_ks8995.c | s | 9.1K | 289 | Lars-Peter Clausen | lars@metafoo.de | 1334337218 |  | net: Remove redundant spi driver bus initialization  In ancient times it was necessary to manually initialize the bus field of an spi_driver to spi_bus_type. These days this is done in spi_driver_register() so we can drop the manual assignment.  The patch was generated using the following coccinelle semantic patch: // <smpl> @@ identifier _driver; @@ struct spi_driver _driver = { 	.driver = { -		.bus = &spi_bus_type, 	}, }; // </smpl>  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Cc: "David S. Miller" <davem@davemloft.net> Cc: Gabor Juhos <juhosg@openwrt.org> Cc: Frederic Lambert <frdrc66@gmail.com> Cc: netdev@vger.kernel.org Acked-by: Gabor Juhos <juhosg@openwrt.org> Signed-off-by: David S. Miller <davem@davemloft.net>
f | phy.c | s | 22K | 807 | Arun Sharma | asharma@fb.com | 1311724187 |  | atomic: use <linux/atomic.h>  This allows us to move duplicated code in <asm/atomic.h> (atomic_inc_not_zero() for now) to <linux/atomic.h>  Signed-off-by: Arun Sharma <asharma@fb.com> Reviewed-by: Eric Dumazet <eric.dumazet@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: David Miller <davem@davemloft.net> Cc: Eric Dumazet <eric.dumazet@gmail.com> Acked-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | cicada.c | s | 4.0K | 142 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1286264069 |  | net/phy: fix many "defined but unused" warnings  MODULE_DEVICE_TABLE only expands to something if it's compiled for a module.  So when building-in support for the phys, the mdio_device_id tables are unused.  Marking them with __maybe_unused fixes the following warnings:  	drivers/net/phy/bcm63xx.c:134: warning: 'bcm63xx_tbl' defined but not used 	drivers/net/phy/broadcom.c:933: warning: 'broadcom_tbl' defined but not used 	drivers/net/phy/cicada.c:162: warning: 'cicada_tbl' defined but not used 	drivers/net/phy/davicom.c:222: warning: 'davicom_tbl' defined but not used 	drivers/net/phy/et1011c.c:114: warning: 'et1011c_tbl' defined but not used 	drivers/net/phy/icplus.c:137: warning: 'icplus_tbl' defined but not used 	drivers/net/phy/lxt.c:226: warning: 'lxt_tbl' defined but not used 	drivers/net/phy/marvell.c:724: warning: 'marvell_tbl' defined but not used 	drivers/net/phy/micrel.c:234: warning: 'micrel_tbl' defined but not used 	drivers/net/phy/national.c:154: warning: 'ns_tbl' defined but not used 	drivers/net/phy/qsemi.c:141: warning: 'qs6612_tbl' defined but not used 	drivers/net/phy/realtek.c:82: warning: 'realtek_tbl' defined but not used 	drivers/net/phy/smsc.c:257: warning: 'smsc_tbl' defined but not used 	drivers/net/phy/ste10Xp.c:135: warning: 'ste10Xp_tbl' defined but not used 	drivers/net/phy/vitesse.c:195: warning: 'vitesse_tbl' defined but not used  Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> Signed-off-by: David S. Miller <davem@davemloft.net>
f | mdio-gpio.c | s | 6.3K | 242 | Grant Likely | grant.likely@secretlab.ca | 1330033067 |  | irq_domain/x86: Convert x86 (embedded) to use common irq_domain  This patch removes the x86-specific definition of irq_domain and replaces it with the common implementation.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Acked-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Cc: Rob Herring <rob.herring@calxeda.com> Cc: Thomas Gleixner <tglx@linutronix.de>
f | mdio-octeon.c | s | 4.3K | 155 | Florian Fainelli | florian@openwrt.org | 1326242102 |  | mdio-octeon: use an unique MDIO bus name.  Signed-off-by: Florian Fainelli <florian@openwrt.org> Signed-off-by: David S. Miller <davem@davemloft.net>
f | davicom.c | s | 5.0K | 184 | Srinivas Kandagatla | srinivas.kandagatla@st.com | 1333494120 |  | net:phy:davicom: remove unnecessary code  Compile tested. remove unnecessary code that matches this coccinelle pattern  	ret = phy_write(x, y , z) 	if (ret < 0) 		return ret; 	return 0;  As phy_write returns error code, we dont need to do not need extra check before returning.  Signed-off-by: Srinivas Kandagatla <srinivas.kandagatla@st.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | fixed.c | s | 5.6K | 221 | Florian Fainelli | florian@openwrt.org | 1326242102 |  | phy/fixed: use an unique MDIO bus name.  Signed-off-by: Florian Fainelli <florian@openwrt.org> Signed-off-by: David S. Miller <davem@davemloft.net>
f | smsc.c | s | 5.8K | 195 | Javier Martinez Canillas | javier@dowhile0.org | 1325640198 |  | net: phy: smsc: Move SMSC PHY constants to <linux/smscphy.h>  SMSC generation 4 LAN chips integrate an IEEE 802.3 ethernet physical layer. The ethernet driver for this family of devices needs to access the SMSC PHY registers and bit-fields.  So, this patch moves these constants to a place where it can be used for both the PHY and LAN drivers.  Signed-off-by: Javier Martinez Canillas <javier@dowhile0.org> Signed-off-by: David S. Miller <davem@davemloft.net>
f | lxt.c | s | 5.2K | 188 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1286264069 |  | net/phy: fix many "defined but unused" warnings  MODULE_DEVICE_TABLE only expands to something if it's compiled for a module.  So when building-in support for the phys, the mdio_device_id tables are unused.  Marking them with __maybe_unused fixes the following warnings:  	drivers/net/phy/bcm63xx.c:134: warning: 'bcm63xx_tbl' defined but not used 	drivers/net/phy/broadcom.c:933: warning: 'broadcom_tbl' defined but not used 	drivers/net/phy/cicada.c:162: warning: 'cicada_tbl' defined but not used 	drivers/net/phy/davicom.c:222: warning: 'davicom_tbl' defined but not used 	drivers/net/phy/et1011c.c:114: warning: 'et1011c_tbl' defined but not used 	drivers/net/phy/icplus.c:137: warning: 'icplus_tbl' defined but not used 	drivers/net/phy/lxt.c:226: warning: 'lxt_tbl' defined but not used 	drivers/net/phy/marvell.c:724: warning: 'marvell_tbl' defined but not used 	drivers/net/phy/micrel.c:234: warning: 'micrel_tbl' defined but not used 	drivers/net/phy/national.c:154: warning: 'ns_tbl' defined but not used 	drivers/net/phy/qsemi.c:141: warning: 'qs6612_tbl' defined but not used 	drivers/net/phy/realtek.c:82: warning: 'realtek_tbl' defined but not used 	drivers/net/phy/smsc.c:257: warning: 'smsc_tbl' defined but not used 	drivers/net/phy/ste10Xp.c:135: warning: 'ste10Xp_tbl' defined but not used 	drivers/net/phy/vitesse.c:195: warning: 'vitesse_tbl' defined but not used  Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> Signed-off-by: David S. Miller <davem@davemloft.net>
