f | aerdrv_core.c | s | 22K | 721 | Rusty Russell | rusty@rustcorp.com.au | 1326409340 |  | module_param: make bool parameters really bool (drivers & misc)  module_param(bool) used to counter-intuitively take an int.  In fddd5201 (mid-2009) we allowed bool or int/unsigned int using a messy trick.  It's time to remove the int/unsigned int option.  For this version it'll simply give a warning, but it'll break next kernel version.  Acked-by: Mauro Carvalho Chehab <mchehab@redhat.com> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | aerdrv.c | s | 11K | 370 | Rafael J. Wysocki | rjw@sisk.pl | 1295024141 |  | PCI/ACPI: Request _OSC control once for each root bridge (v3)  Move the evaluation of acpi_pci_osc_control_set() (to request control of PCI Express native features) into acpi_pci_root_add() to avoid calling it many times for the same root complex with the same arguments. Additionally, check if all of the requisite _OSC support bits are set before calling acpi_pci_osc_control_set() for a given root complex.  References: https://bugzilla.kernel.org/show_bug.cgi?id=20232 Reported-by: Ozan Caglayan <ozan@pardus.org.tr> Tested-by: Ozan Caglayan <ozan@pardus.org.tr> Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl> Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
f | Kconfig.debug | g | 586B |  | Stefan Assmann | sassmann@redhat.com | 1260999474 |  | PCI: change PCI nomenclature in drivers/pci/ (non-comment changes)  Changing occurrences of variants of PCI-X and PCIe to the PCI-SIG terms listed in the "Trademark and Logo Usage Guidelines". http://www.pcisig.com/developers/procedures/logos/Trademark_and_Logo_Usage_Guidelines_updated_112206.pdf  Patch is limited to drivers/pci/ and changes concern non-comment parts or anything that might be visible to the user.  Signed-off-by: Stefan Assmann <sassmann@redhat.com> Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
f | Makefile | g | 294B |  | Huang Ying | ying.huang@intel.com | 1245187814 |  | PCI AER: software error injection  Debugging PCIE AER code can be very difficult because it is hard to trigger various real hardware errors. This patch provide a software based error injection tool, which can fake various PCIE errors with a user space helper tool named "aer-inject". Which can be gotten from:    http://www.kernel.org/pub/linux/kernel/people/yhuang/  The patch fakes AER error by faking some PCIE AER related registers and an AER interrupt for specified the PCIE device.  Signed-off-by: Huang Ying <ying.huang@intel.com> Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
f | aerdrv_acpi.c | s | 2.9K | 113 | Rafael J. Wysocki | rjw@sisk.pl | 1287173390 |  | PCI/PCIe/AER: Disable native AER service if BIOS has precedence  There is a design issue related to PCIe AER and _OSC that the BIOS may be asked to grant control of the AER service even if some Hardware Error Source Table (HEST) entries contain information meaning that the BIOS really should control it.  Namely, pcie_port_acpi_setup() calls pcie_aer_get_firmware_first() that determines whether or not the AER service should be controlled by the BIOS on the basis of the HEST information for the given PCIe port.  The BIOS is asked to grant control of the AER service for a PCIe Root Complex if pcie_aer_get_firmware_first() returns 'false' for at least one root port in that complex, even if all of the other root ports' HEST entries have the FIRMWARE_FIRST flag set (and none of them has the GLOBAL flag set).  However, if the AER service is controlled by the kernel, that may interfere with the BIOS' handling of the error sources having the FIRMWARE_FIRST flag.  Moreover, there may be PCIe endpoints that have the FIRMWARE_FIRST flag set in HEST and are attached to the root ports in question, in which case it also may be unsafe to ask the BIOS for control of the AER service.  For this reason, introduce a function checking if there's at least one PCIe-related HEST entry with the FIRMWARE_FIRST flag set and disable the native AER service altogether if this function returns 'true'.  Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl> Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
f | aerdrv.h | s | 3.4K | 114 | Chen Gong | gong.chen@linux.intel.com | 1306005434 |  | PCI: remove unused AER functions  In the commit 28eb5f2, aer_osc_setup is removed but corresponding definiton information in the aerdrv.h is missed.  Acked-by: Rafael J. Wysocki <rjw@sisk.pl> Signed-off-by: Chen Gong <gong.chen@linux.intel.com> Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
f | aerdrv_errprint.c | s | 7.5K | 232 | Huang Ying | ying.huang@intel.com | 1311348337 |  | PCI: PCIe AER: add aer_recover_queue  In addition to native PCIe AER, now APEI (ACPI Platform Error Interface) GHES (Generic Hardware Error Source) can be used to report PCIe AER errors too.  To add support to APEI GHES PCIe AER recovery, aer_recover_queue is added to export the recovery function in native PCIe AER driver.  Recoverable PCIe AER errors are reported via NMI in APEI GHES.  Then APEI GHES uses irq_work to delay the error processing into an IRQ handler.  But PCIe AER recovery can be very time-consuming, so aer_recover_queue, which can be used in IRQ handler, delays the real recovery action into the process context, that is, work queue.  Signed-off-by: Huang Ying <ying.huang@intel.com> Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
f | ecrc.c | s | 3.2K | 113 | Kenji Kaneshige | kaneshige.kenji@jp.fujitsu.com | 1259105117 |  | PCIe AER: use pci_is_pcie()  Changes for PCIe AER driver to use pci_is_pcie() instead of checking pci_dev->is_pcie.  Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com> Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
f | aer_inject.c | s | 12K | 478 | Rusty Russell | rusty@rustcorp.com.au | 1326409340 |  | module_param: make bool parameters really bool (drivers & misc)  module_param(bool) used to counter-intuitively take an int.  In fddd5201 (mid-2009) we allowed bool or int/unsigned int using a messy trick.  It's time to remove the int/unsigned int option.  For this version it'll simply give a warning, but it'll break next kernel version.  Acked-by: Mauro Carvalho Chehab <mchehab@redhat.com> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | Kconfig | g | 634B |  | Huang Ying | ying.huang@intel.com | 1245187814 |  | PCI AER: software error injection  Debugging PCIE AER code can be very difficult because it is hard to trigger various real hardware errors. This patch provide a software based error injection tool, which can fake various PCIE errors with a user space helper tool named "aer-inject". Which can be gotten from:    http://www.kernel.org/pub/linux/kernel/people/yhuang/  The patch fakes AER error by faking some PCIE AER related registers and an AER interrupt for specified the PCIE device.  Signed-off-by: Huang Ying <ying.huang@intel.com> Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
