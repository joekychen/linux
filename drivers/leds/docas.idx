f | led-class.c | s | 5.9K | 195 | Jeffrin Jose | ahiliation@yahoo.co.in | 1339469784 |  | leds: fixed a coding style issue.  Fixed a coding style issue relating to trailing white space error found by checkpatch.pl tool in drivers/leds/led-class.c  Signed-off-by: Jeffrin Jose <ahiliation@yahoo.co.in> Signed-off-by: Bryan Wu <bryan.wu@canonical.com>
f | ledtrig-backlight.c | s | 3.6K | 134 | Shuah Khan | shuahkhan@gmail.com | 1338333751 |  | leds: change existing triggers to use activated flag  Change existing triggers backlight, gpio, and heartbeat to use the new ->activated flag to set activate successful status in their activate routines and check it in their deactivate routines to do cleanup.  Signed-off-by: Shuah Khan <shuahkhan@gmail.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-rb532.c | s | 1.5K | 54 | Axel Lin | axel.lin@gmail.com | 1326241848 |  | leds: convert led platform drivers to module_platform_driver  Factor out some boilerplate code for platform driver registration into module_platform_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Haojian Zhuang <hzhuang1@marvell.com>		[led-88pm860x.c] Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ledtrig-transient.c | s | 6.4K | 197 | Shuah Khan | shuahkhan@gmail.com | 1338333752 |  | leds: add new transient trigger for one shot timer activation  The leds timer trigger does not currently have an interface to activate a one shot timer.  The current support allows for setting two timers, one for specifying how long a state to be on, and the second for how long the state to be off.  The delay_on value specifies the time period an LED should stay in on state, followed by a delay_off value that specifies how long the LED should stay in off state.  The on and off cycle repeats until the trigger gets deactivated.  There is no provision for one time activation to implement features that require an on or off state to be held just once and then stay in the original state forever.  Without one shot timer interface, user space can still use timer trigger to set a timer to hold a state, however when user space application crashes or goes away without deactivating the timer, the hardware will be left in that state permanently.  As a specific example of this use-case, let's look at vibrate feature on phones.  Vibrate function on phones is implemented using PWM pins on SoC or PMIC.  There is a need to activate one shot timer to control the vibrate feature, to prevent user space crashes leaving the phone in vibrate mode permanently causing the battery to drain.  This trigger exports three properties, activate, state, and duration When transient trigger is activated these properties are set to default values.  - duration allows setting timer value in msecs. The initial value is 0. - activate allows activating and deactivating the timer specified by   duration as needed. The initial and default value is 0.  This will allow   duration to be set after trigger activation. - state allows user to specify a transient state to be held for the specified   duration.  Signed-off-by: Shuah Khan <shuahkhan@gmail.com> Cc: Jonas Bonn <jonas@southpole.se> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: NeilBrown <neilb@suse.de> Cc: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | Makefile | g | 2.5K |  | Johan Hovold | jhovold@gmail.com | 1338333752 |  | leds: add LM3533 LED driver  Add sub-driver for the LEDs on National Semiconductor / TI LM3533 lighting power chips.  The chip provides 256 brightness levels, hardware accelerated blinking as well as ambient-light-sensor and pwm input control.  Signed-off-by: Johan Hovold <jhovold@gmail.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Rob Landley <rob@landley.net> Cc: Samuel Ortiz <sameo@linux.intel.com> Cc: Jonathan Cameron <jic23@cam.ac.uk> Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org> Cc: Florian Tobias Schandinat <FlorianSchandinat@gmx.de> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-pca9633.c | s | 4.7K | 159 | Axel Lin | axel.lin@gmail.com | 1332547115 |  | drivers/leds/leds-pca9633.c: remove unused 'adapter' variable  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Peter Meerwald <p.meerwald@bct-electronic.com> Cc: Richard Purdie <rpurdie@rpsys.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | led-core.c | s | 2.1K | 72 | Rafal Prylowski | prylowski@metasoft.pl | 1339469784 |  | leds: don't disable blinking when writing the same value to delay_on or delay_off  Function led_set_software_blink() assumes that blink timer is still running, but commit 488bc35bf40df89d37486c1826b178a2fba36ce7 introduced disabling of blink timer before each call to led_set_software_blink().  Correct led_software_blink(): 1) remove protection against reprogramming blink timer to the same values,    because it only disables blinking now, 2) remove unnecessary call to led_stop_software_blink().  Signed-off-by: Rafal Prylowski <prylowski@metasoft.pl> Cc: Richard Purdie <rpurdie@rpsys.net> Signed-off-by: Bryan Wu <bryan.wu@canonical.com>
f | leds-lm3533.c | s | 18K | 629 | Johan Hovold | jhovold@gmail.com | 1338333752 |  | leds: add LM3533 LED driver  Add sub-driver for the LEDs on National Semiconductor / TI LM3533 lighting power chips.  The chip provides 256 brightness levels, hardware accelerated blinking as well as ambient-light-sensor and pwm input control.  Signed-off-by: Johan Hovold <jhovold@gmail.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Rob Landley <rob@landley.net> Cc: Samuel Ortiz <sameo@linux.intel.com> Cc: Jonathan Cameron <jic23@cam.ac.uk> Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org> Cc: Florian Tobias Schandinat <FlorianSchandinat@gmx.de> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-ns2.c | s | 7.9K | 271 | Arnd Bergmann | arnd@arndb.de | 1336687604 |  | drivers/leds: correct __devexit annotations  __devexit functions are discarded without CONFIG_HOTPLUG, so they need to be referenced carefully.  A __devexit function may also not be called from a __devinit function.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Mathieu Poirier <mathieu.poirier@linaro.org> Cc: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-gpio.c | s | 7.4K | 257 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1332547115 |  | drivers/leds/leds-gpio.c: use linux/gpio.h rather than asm/gpio.h  Direct usage of the asm include has long been deprecated by the introduction of gpiolib.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-adp5520.c | s | 5.4K | 185 | Axel Lin | axel.lin@gmail.com | 1326241848 |  | leds: convert led platform drivers to module_platform_driver  Factor out some boilerplate code for platform driver registration into module_platform_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Haojian Zhuang <hzhuang1@marvell.com>		[led-88pm860x.c] Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-max8997.c | s | 9.0K | 313 | Donggeun Kim | dg77.kim@samsung.com | 1326065861 |  | leds: Add suuport for MAX8997-LED driver  This patch enables LED controller in MAX8997 PMIC.  Signed-off-by: Donggeun Kim <dg77.kim@samsung.com> Signed-off-by: MyungJoo Ham <myungjoo.ham@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Signed-off-by: Samuel Ortiz <sameo@linux.intel.com>
f | ledtrig-timer.c | s | 3.1K | 104 | Shuah Khan | shuahkhan@gmail.com | 1338333751 |  | leds: change ledtrig-timer to use activated flag  Change existing timer trigger to use the new ->activated flag to set activate successful status in activate routine and check it in deactivate routine to do cleanup.  Signed-off-by: Shuah Khan <shuahkhan@gmail.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-bd2802.c | s | 20K | 684 | Axel Lin | axel.lin@gmail.com | 1326241849 |  | drivers/leds/leds-bd2802.c: use gpio_request_one()  Use gpio_request_one() instead of multiple gpiolib calls.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Kim Kyuwon <q1.kim@samsung.com> Cc: Richard Purdie <rpurdie@rpsys.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-atmel-pwm.c | s | 3.6K | 124 | Nicolas Ferre | nicolas.ferre@atmel.com | 1334672971 |  | leds-atmel-pwm.c: Make pwmled_probe() __devinit  Commit 892a884 (leds: convert led platform drivers to module_platform_driver) is omitting the section mismatch error: so change annotation of the probe function to __devinit instead of __init.  Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com> Cc: Richard Purdie <richard.purdie@linuxfoundation.org> Cc: Andrew Morton <akpm@linux-foundation.org>
f | leds-regulator.c | s | 5.1K | 188 | Axel Lin | axel.lin@gmail.com | 1326241848 |  | leds: convert led platform drivers to module_platform_driver  Factor out some boilerplate code for platform driver registration into module_platform_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Haojian Zhuang <hzhuang1@marvell.com>		[led-88pm860x.c] Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-tca6507.c | s | 20K | 695 | Wolfram Sang | w.sang@pengutronix.de | 1332547114 |  | drivers/leds/leds-tca6507.c: remove obsolete cleanup for clientdata  A few new i2c-drivers came into the kernel which clear the clientdata-pointer on exit or error.  This is obsolete meanwhile, the core will do it.  Signed-off-by: Wolfram Sang <w.sang@pengutronix.de> Cc: NeilBrown <neilb@suse.de> Cc: Richard Purdie <rpurdie@linux.intel.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-pca955x.c | s | 9.9K | 340 | Alexander Stein | alexander.stein@systec-electronic.com | 1338333752 |  | drivers/leds/leds-pca955x.c: fix race condition while setting brightness on several LEDs  When issuing the following command:    for I in 0 1 2 3 4 5 6 7; do     echo 0 > /sys/class/leds/pca955x\:${I}/brightness;   done  It is possible that all the pca955x_read_ls calls are done sequentially before any pca955x_write_ls call is done.  This updates the LS only to the last LED update in its set.  Fix this by using a global lock for the pca995x device during pca955x_led_work.  Also used a struct for shared data betreen all LEDs.  [akpm@linux-foundation.org: revert unintentional rename of pca955x_ledsel()] Signed-off-by: Alexander Stein <alexander.stein@systec-electronic.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-fsg.c | s | 5.1K | 194 | Axel Lin | axel.lin@gmail.com | 1326241848 |  | leds: convert led platform drivers to module_platform_driver  Factor out some boilerplate code for platform driver registration into module_platform_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Haojian Zhuang <hzhuang1@marvell.com>		[led-88pm860x.c] Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-pca9532.c | s | 12K | 429 | Axel Lin | axel.lin@gmail.com | 1326241848 |  | leds: convert led i2c drivers to module_i2c_driver  Factor out some boilerplate code for i2c driver registration into module_i2c_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Haojian Zhuang <hzhuang1@marvell.com> Cc: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-netxbig.c | s | 10K | 354 | Arnd Bergmann | arnd@arndb.de | 1336687604 |  | drivers/leds: correct __devexit annotations  __devexit functions are discarded without CONFIG_HOTPLUG, so they need to be referenced carefully.  A __devexit function may also not be called from a __devinit function.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Mathieu Poirier <mathieu.poirier@linaro.org> Cc: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-wm8350.c | s | 5.7K | 258 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1326241849 |  | leds: convert wm8350 driver to devm_kzalloc()  Saves a small amount of code and systematically eliminates leaks.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-dac124s085.c | s | 3.1K | 115 | Axel Lin | axel.lin@gmail.com | 1326241849 |  | leds: convert leds-dac124s085 to module_spi_driver  Factor out some boilerplate code for spi driver registration into module_spi_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Haojian Zhuang <hzhuang1@marvell.com> Cc: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Acked-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-locomo.c | s | 2.3K | 81 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103909 |  | drivers/leds: Add module.h to files using it implicitly  A pending cleanup will mean that module.h won't be implicitly everywhere anymore.  Make sure the modular drivers in the leds dir are actually calling out for <module.h> explicitly in advance.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | leds-mc13783.c | s | 10K | 328 | Thomas Meyer | thomas@m3y3r.de | 1338333751 |  | leds: Use kcalloc instead of kzalloc to allocate array  The advantage of kcalloc is that will prevent integer overflows which could result from the multiplication of number of elements and size and it is also a bit nicer to read.  The semantic patch that makes this change is available in https://lkml.org/lkml/2011/11/25/107  Signed-off-by: Thomas Meyer <thomas@m3y3r.de> Cc: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-asic3.c | s | 4.6K | 152 | Axel Lin | axel.lin@gmail.com | 1326241848 |  | leds: convert led platform drivers to module_platform_driver  Factor out some boilerplate code for platform driver registration into module_platform_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Haojian Zhuang <hzhuang1@marvell.com>		[led-88pm860x.c] Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-lp5523.c | s | 26K | 851 | Andrew Morton | akpm@linux-foundation.org | 1332547115 |  | drivers/leds/leds-lp5523.c: constify some data  Saves ~50 bytes text and speeds things up.  Cc: Richard Purdie <rpurdie@rpsys.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds.h | s | 1.6K | 52 | Esben Haabendal | eha@doredevelopment.dk | 1306337989 |  | leds: support automatic start of blinking with ledtrig-timer  By setting initial values blink_delay_on and blink_delay_off in a led_classdev struct, this change starts the blinking when the led is initialized.  With this patch, you can initialize blink_delay_on and blink_delay_off in led_classdev with default_trigger set to "timer", and the led will start up blinking.  The current ledtrig-timer implementation ignores any initial blink_delay_on/blink_delay_off settings, and requires setting blink_delay_on/blink_delay_off (typically from userspace) before the led blinks.  Signed-off-by: Esben Haabendal <eha@doredevelopment.dk> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Randy Dunlap <rdunlap@xenotime.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-88pm860x.c | s | 6.2K | 235 | Jett.Zhou | jtzhou@marvell.com | 1331056013 |  | led: Modified power control of pm860x led  Since several sub modules such as backlight, leds and vibrator depend on the refernce group and internal oscillator in pm8606, so modified the power control of led in pm8606 by unified interface.  Signed-off-by: Jett.Zhou <jtzhou@marvell.com> Cc: Richard Purdie <rpurdie@rpsys.net> Signed-off-by: Samuel Ortiz <sameo@linux.intel.com>
f | leds-lp3944.c | s | 10K | 375 | Axel Lin | axel.lin@gmail.com | 1326241848 |  | leds: convert led i2c drivers to module_i2c_driver  Factor out some boilerplate code for i2c driver registration into module_i2c_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Haojian Zhuang <hzhuang1@marvell.com> Cc: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-da903x.c | s | 4.3K | 142 | Axel Lin | axel.lin@gmail.com | 1326241848 |  | leds: convert led platform drivers to module_platform_driver  Factor out some boilerplate code for platform driver registration into module_platform_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Haojian Zhuang <hzhuang1@marvell.com>		[led-88pm860x.c] Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-sunfire.c | s | 6.0K | 231 | Axel Lin | axel.lin@gmail.com | 1311652635 |  | drivers/leds/leds-sunfire.c: fix sunfire_led_generic_probe() error handling  - return -ENOMEM if kzalloc fails, rather than the current -EINVAL  - fix a memory leak in the case of goto out_unregister_led_cdevs  Signed-off-by: Axel Lin <axel.lin@gmail.com> Cc: Richard Purdie <rpurdie@rpsys.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-lp5521.c | s | 23K | 750 | Dan Carpenter | dan.carpenter@oracle.com | 1338333751 |  | drivers/leds/leds-lp5521.c: fix lp5521_read() error handling  Gcc 4.6.2 complains that:    drivers/leds/leds-lp5521.c: In function `lp5521_load_program':   drivers/leds/leds-lp5521.c:214:21: warning: `mode' may be used uninitialized in this function [-Wuninitialized]   drivers/leds/leds-lp5521.c: In function `lp5521_probe':   drivers/leds/leds-lp5521.c:788:5: warning: `buf' may be used uninitialized in this function [-Wuninitialized]   drivers/leds/leds-lp5521.c:740:6: warning: `ret' may be used uninitialized in this function [-Wuninitialized]  These are real problems if lp5521_read() returns an error.  When that happens we should handle it, instead of ignoring it or doing a bitwise OR with all the other error codes and continuing.  Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com> Cc: Milo <Milo.Kim@ti.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-wm831x-status.c | s | 7.6K | 271 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1326241849 |  | leds: convert wm831x status driver to devm_kzalloc()  Saves a small amount of code and systematically eliminates leaks.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-hp6xx.c | s | 2.2K | 80 | Axel Lin | axel.lin@gmail.com | 1326241848 |  | leds: convert led platform drivers to module_platform_driver  Factor out some boilerplate code for platform driver registration into module_platform_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Haojian Zhuang <hzhuang1@marvell.com>		[led-88pm860x.c] Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-cobalt-raq.c | s | 3.3K | 112 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103910 |  | drivers/leds: Add export.h for THIS_MODULE to leds-cobalt-raq.c  In preparation of the module.h usage cleanup, call out the export.h to avoid build failures when that happens.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | leds-s3c24xx.c | s | 3.1K | 102 | Axel Lin | axel.lin@gmail.com | 1326241848 |  | leds: convert led platform drivers to module_platform_driver  Factor out some boilerplate code for platform driver registration into module_platform_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Haojian Zhuang <hzhuang1@marvell.com>		[led-88pm860x.c] Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | dell-led.c | s | 4.2K | 167 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103909 |  | drivers/leds: Add module.h to files using it implicitly  A pending cleanup will mean that module.h won't be implicitly everywhere anymore.  Make sure the modular drivers in the leds dir are actually calling out for <module.h> explicitly in advance.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | leds-gpio-register.c | s | 1.3K | 38 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1306337991 |  | leds: provide helper to register "leds-gpio" devices  This function makes a deep copy of the platform data to allow it to live in init memory.  For a kernel that supports several machines and so includes the definition for several leds-gpio devices this saves quite some memory because all but one definition can be free'd after boot.  As the function is used by arch code it must be builtin and so cannot go into leds-gpio.c.  [akpm@linux-foundation.org: s/CONFIG_LED_REGISTER_GPIO/CONFIG_LEDS_REGISTER_GPIO/] Signed-off-by: Uwe Kleine-König  <u.kleine-koenig@pengutronix.de> Cc: Russell King <rmk@arm.linux.org.uk> Acked-by: Richard Purdie <richard.purdie@linuxfoundation.org> Cc: Fabio Estevam <fabio.estevam@freescale.com> Cc: Sascha Hauer <s.hauer@pengutronix.de> Tested-by: H Hartley Sweeten <hartleys@visionengravers.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-da9052.c | s | 5.1K | 180 | David Dajun Chen | dchen@diasemi.com | 1338333751 |  | leds: driver for DA9052/53 PMIC v2  LED Driver for Dialog Semiconductor DA9052/53 PMICs.  [akpm@linux-foundation.org: make led_reg static] Signed-off-by: David Dajun Chen <dchen@diasemi.com> Signed-off-by: Ashish Jangam <ashish.jangam@kpitcummins.com> Reviewed-by: Lars-Peter Clausen <lars@metafoo.de> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | Kconfig | g | 15K |  | Axel Lin | axel.lin@gmail.com | 1339469785 |  | leds: Make LEDS_ASIC3 and LEDS_RENESAS_TPU depend on LEDS_CLASS=y  Otherwise, I got below build error when CONFIG_LEDS_CLASS=m.    LD      init/built-in.o drivers/built-in.o: In function `asic3_led_probe': clkdev.c:(.devinit.text+0x4680): undefined reference to `led_classdev_register' drivers/built-in.o: In function `r_tpu_probe': clkdev.c:(.devinit.text+0x4838): undefined reference to `led_classdev_register' drivers/built-in.o: In function `asic3_led_remove': clkdev.c:(.devexit.text+0x564): undefined reference to `led_classdev_unregister' drivers/built-in.o: In function `r_tpu_remove': clkdev.c:(.devexit.text+0x5a0): undefined reference to `led_classdev_unregister' make: *** [vmlinux] Error 1  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Bryan Wu <bryan.wu@canonical.com>
f | leds-ss4200.c | s | 14K | 489 | Rusty Russell | rusty@rustcorp.com.au | 1326409340 |  | module_param: make bool parameters really bool (drivers & misc)  module_param(bool) used to counter-intuitively take an int.  In fddd5201 (mid-2009) we allowed bool or int/unsigned int using a messy trick.  It's time to remove the int/unsigned int option.  For this version it'll simply give a warning, but it'll break next kernel version.  Acked-by: Mauro Carvalho Chehab <mchehab@redhat.com> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | leds-cobalt-qube.c | s | 2.0K | 74 | Axel Lin | axel.lin@gmail.com | 1326241848 |  | leds: convert led platform drivers to module_platform_driver  Factor out some boilerplate code for platform driver registration into module_platform_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Haojian Zhuang <hzhuang1@marvell.com>		[led-88pm860x.c] Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-ot200.c | s | 3.0K | 145 | Sebastian Andrzej Siewior | bigeasy@linutronix.de | 1327336727 |  | leds: add led driver for Bachmann's ot200  Add support for leds on Bachmann's ot200 visualisation device.  The device has three leds on the back panel (led_err, led_init and led_run) and can handle up to seven leds on the front panel.  The driver was written by Linutronix on behalf of Bachmann electronic GmbH.  It incorporates feedback from Lars-Peter Clausen  [akpm@linux-foundation.org: add dependency on HAS_IOMEM] Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Christian Gmeiner <christian.gmeiner@gmail.com> Cc: Lars-Peter Clausen <lars@metafoo.de> Cc: Richard Purdie <rpurdie@rpsys.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-lm3530.c | s | 12K | 427 | Kim, Milo | Milo.Kim@ti.com | 1338333752 |  | drivers/leds/leds-lm3530.c: simplify als configuration on initialization  For better code readability, ALS code is moved to new a function - lm3530_als_configure()  Signed-off-by: Milo(Woogyom) Kim <milo.kim@ti.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Cc: Shreshtha Kumar SAHU <shreshthakumar.sahu@stericsson.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-renesas-tpu.c | s | 8.9K | 284 | Axel Lin | axel.lin@gmail.com | 1326241848 |  | leds: convert led platform drivers to module_platform_driver  Factor out some boilerplate code for platform driver registration into module_platform_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Haojian Zhuang <hzhuang1@marvell.com>		[led-88pm860x.c] Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-clevo-mail.c | s | 5.5K | 185 | Rusty Russell | rusty@rustcorp.com.au | 1326409340 |  | module_param: make bool parameters really bool (drivers & misc)  module_param(bool) used to counter-intuitively take an int.  In fddd5201 (mid-2009) we allowed bool or int/unsigned int using a messy trick.  It's time to remove the int/unsigned int option.  For this version it'll simply give a warning, but it'll break next kernel version.  Acked-by: Mauro Carvalho Chehab <mchehab@redhat.com> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | ledtrig-ide-disk.c | s | 1.6K | 55 | Guennadi Liakhovetski | lg@denx.de | 1239030385 |  | leds: allow led-drivers to use a variable range of brightness values  This patch allows drivers to override the default maximum brightness value of 255.  We take care to preserve backwards-compatibility as much as possible, so that user-space ABI doesn't change for existing drivers. LED trigger code has also been updated to use the per-LED maximum.  Signed-off-by: Guennadi Liakhovetski <lg@denx.de> Signed-off-by: Richard Purdie <rpurdie@linux.intel.com>
f | leds-lt3593.c | s | 4.9K | 164 | Axel Lin | axel.lin@gmail.com | 1326241848 |  | leds: convert led platform drivers to module_platform_driver  Factor out some boilerplate code for platform driver registration into module_platform_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Haojian Zhuang <hzhuang1@marvell.com>		[led-88pm860x.c] Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ledtrig-gpio.c | s | 6.1K | 205 | Shuah Khan | shuahkhan@gmail.com | 1338333751 |  | leds: change existing triggers to use activated flag  Change existing triggers backlight, gpio, and heartbeat to use the new ->activated flag to set activate successful status in their activate routines and check it in their deactivate routines to do cleanup.  Signed-off-by: Shuah Khan <shuahkhan@gmail.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-net48xx.c | s | 2.1K | 80 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103909 |  | drivers/leds: Add module.h to files using it implicitly  A pending cleanup will mean that module.h won't be implicitly everywhere anymore.  Make sure the modular drivers in the leds dir are actually calling out for <module.h> explicitly in advance.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | ledtrig-default-on.c | s | 1.0K | 38 | Guennadi Liakhovetski | lg@denx.de | 1239030385 |  | leds: allow led-drivers to use a variable range of brightness values  This patch allows drivers to override the default maximum brightness value of 255.  We take care to preserve backwards-compatibility as much as possible, so that user-space ABI doesn't change for existing drivers. LED trigger code has also been updated to use the per-LED maximum.  Signed-off-by: Guennadi Liakhovetski <lg@denx.de> Signed-off-by: Richard Purdie <rpurdie@linux.intel.com>
f | ledtrig-heartbeat.c | s | 3.9K | 129 | Alexander Holler | holler@ahsoftware.de | 1338333752 |  | leds: heartbeat: stop on shutdown  A halted kernel should not show a heartbeat.  [akpm@linux-foundation.org: checkpatch fixes] Signed-off-by: Alexander Holler <holler@ahsoftware.de> Cc: Shuah Khan <shuahkhan@gmail.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | led-triggers.c | s | 7.3K | 242 | Kay Sievers | kay.sievers@vrfy.org | 1324513563 |  | driver-core: remove sysdev.h usage.  The sysdev.h file should not be needed by any in-kernel code, so remove the .h file from these random files that seem to still want to include it.  The sysdev code will be going away soon, so this include needs to be removed no matter what.  Cc: Jiandong Zheng <jdzheng@broadcom.com> Cc: Scott Branden <sbranden@broadcom.com> Cc: Russell King <linux@arm.linux.org.uk> Cc: Kukjin Kim <kgene.kim@samsung.com> Cc: David Brown <davidb@codeaurora.org> Cc: Daniel Walker <dwalker@fifo99.com> Cc: Bryan Huntsman <bryanh@codeaurora.org> Cc: Ben Dooks <ben-linux@fluff.org> Cc: Wan ZongShun <mcuos.com@gmail.com> Cc: Haavard Skinnemoen <hskinnemoen@gmail.com> Cc: Hans-Christian Egtvedt <egtvedt@samfundet.no> Cc: Guan Xuetao <gxt@mprc.pku.edu.cn> Cc: "Venkatesh Pallipadi Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Ingo Molnar <mingo@redhat.com> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Matthew Garrett <mjg@redhat.com> Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
f | leds-pwm.c | s | 3.3K | 119 | Axel Lin | axel.lin@gmail.com | 1326241848 |  | leds: convert led platform drivers to module_platform_driver  Factor out some boilerplate code for platform driver registration into module_platform_driver.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Haojian Zhuang <hzhuang1@marvell.com>		[led-88pm860x.c] Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Michael Hennerich <hennerich@blackfin.uclinux.org> Cc: Mike Rapoport <mike@compulab.co.il> Cc: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | leds-wrap.c | s | 3.2K | 127 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103909 |  | drivers/leds: Add module.h to files using it implicitly  A pending cleanup will mean that module.h won't be implicitly everywhere anymore.  Make sure the modular drivers in the leds dir are actually calling out for <module.h> explicitly in advance.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
