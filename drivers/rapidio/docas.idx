d | switches |  | 7 items |  | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103917 |  | drivers/rapidio: idt_gen2.c is implicitly relying on getting stat.h  Upon the trial removal of the implicit presence of module.h, lots of files showed up that were getting the sub-includes by default without calling them out.  Fix them in advance.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | Makefile | g | 236B |  | Alexandre Bounine | alexandre.bounine@idt.com | 1320275221 |  | RapidIO: add mport driver for Tsi721 bridge  Add RapidIO mport driver for IDT TSI721 PCI Express-to-SRIO bridge device.  The driver provides full set of callback functions defined for mport devices in RapidIO subsystem.  It also is compatible with current version of RIONET driver (Ethernet over RapidIO messaging services).  This patch is applicable to kernel versions starting from 2.6.39.  Signed-off-by: Alexandre Bounine <alexandre.bounine@idt.com> Signed-off-by: Chul Kim <chul.kim@idt.com> Cc: Kumar Gala <galak@kernel.crashing.org> Cc: Matt Porter <mporter@kernel.crashing.org> Cc: Li Yang <leoli@freescale.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | rio.h | s | 2.9K | 63 | Alexandre Bounine | alexandre.bounine@idt.com | 1288227796 |  | rapidio: add handling of redundant routes  Detects RIO link to the already enumerated device and properly sets links between device objects.  Changes to the enumeration/discovery logic:  1. Use Master Enable bit to signal end of the enumeration - agents may    start their discovery process as soon as they see this bit set    (Component Tag register was used before for this purpose).  2. Enumerator sets Component Tag (!= 0) immediately during device    setup.  This allows to identify the device if the redundant route    exists in a RIO system.  Signed-off-by: Alexandre Bounine <alexandre.bounine@idt.com> Cc: Thomas Moll <thomas.moll@sysgo.com> Cc: Matt Porter <mporter@kernel.crashing.org> Cc: Li Yang <leoli@freescale.com> Cc: Kumar Gala <galak@kernel.crashing.org> Cc: Micha Nelissen <micha@neli.hopto.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | rio-access.c | s | 5.5K | 159 | Zhang Wei | wei.zhang@freescale.com | 1209462028 |  | [RAPIDIO] Add RapidIO multi mport support  The original RapidIO driver suppose there is only one mpc85xx RIO controller in system.  So, some data structures are defined as mpc85xx_rio global, such as 'regs_win', 'dbell_ring', 'msg_tx_ring'.  Now, I changed them to mport's private members.  And you can define multi RIO OF-nodes in dts file for multi RapidIO controller in one processor, such as PCI/PCI-Ex host controllers in Freescale's silicon.  And the mport operation function declaration should be changed to know which RapidIO controller is target.  Signed-off-by: Zhang Wei <wei.zhang@freescale.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | rio-scan.c | s | 35K | 1148 | Alexandre Bounine | alexandre.bounine@idt.com | 1320275221 |  | RapidIO: fix potential null deref in rio_setup_device()  The "goto cleanup" path can deference "rswitch" when it is NULL.  Reported-by: Dan Carpenter <error27@gmail.com> Signed-off-by: Alexandre Bounine <alexandre.bounine@idt.com> Cc: Dan Carpenter <error27@gmail.com> Cc: Kumar Gala <galak@kernel.crashing.org> Cc: Matt Porter <mporter@kernel.crashing.org> Cc: Chul Kim <chul.kim@idt.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | Kconfig | g | 1.6K |  | Alexandre Bounine | alexandre.bounine@idt.com | 1338511771 |  | rapidio: add DMA engine support for RIO data transfers  Adds DMA Engine framework support into RapidIO subsystem.  Uses DMA Engine DMA_SLAVE interface to generate data transfers to/from remote RapidIO target devices.  Introduces RapidIO-specific wrapper for prep_slave_sg() interface with an extra parameter to pass target specific information.  Uses scatterlist to describe local data buffer.  Address flat data buffer on a remote side.  Signed-off-by: Alexandre Bounine <alexandre.bounine@idt.com> Cc: Dan Williams <dan.j.williams@intel.com> Acked-by: Vinod Koul <vinod.koul@linux.intel.com> Cc: Li Yang <leoli@freescale.com> Cc: Matt Porter <mporter@kernel.crashing.org> Cc: Paul Gortmaker <paul.gortmaker@windriver.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | rio-sysfs.c | s | 6.7K | 249 | Alexandre Bounine | alexandre.bounine@idt.com | 1300934802 |  | rapidio: modify configuration to support PCI-SRIO controller  1. Add an option to include RapidIO support if the PCI is available. 2. Add FSL_RIO configuration option to enable controller selection. 3. Add RapidIO support option into x86 and MIPS architectures.  Signed-off-by: Alexandre Bounine <alexandre.bounine@idt.com> Acked-by: Kumar Gala <galak@kernel.crashing.org> Cc: Matt Porter <mporter@kernel.crashing.org> Cc: Li Yang <leoli@freescale.com> Cc: Thomas Moll <thomas.moll@sysgo.com> Cc: Micha Nelissen <micha@neli.hopto.org> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | rio-driver.c | s | 5.9K | 201 | Alexandre Bounine | alexandre.bounine@idt.com | 1288227795 |  | rapidio: fix RapidIO sysfs hierarchy  This set of RapidIO patches extends support for standard error recovery mechanism and adds new IDT Gen2 sRIO switch devices - CPS-1848 and CPS-1616.  Implementation of the standard error-stopped state recovery mechanism (as defined by the RapidIO specification) is required for the new switches.  Version 2 of this set of patches addresses received comments and fixes an error notification setup issue found in the idt_gen2.c after the first version was released.  This patch:  Make RapidIO devices appear in /sys/devices/rapidio directory instead of top of /sys/devices directory.  Signed-off-by: Alexandre Bounine <alexandre.bounine@idt.com> Cc: Thomas Moll <thomas.moll@sysgo.com> Cc: Matt Porter <mporter@kernel.crashing.org> Cc: Li Yang <leoli@freescale.com> Cc: Kumar Gala <galak@kernel.crashing.org> Cc: Micha Nelissen <micha@neli.hopto.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | devices |  | 5 items |  | Alexandre Bounine | alexandre.bounine@idt.com | 1338511771 |  | rapidio/tsi721: add DMA engine support  Adds support for DMA Engine API into Tsi721 mport driver.  Includes following changes for Tsi721 driver: - Modifies BDMA register offset definitions to support per-channel handling - Separates BDMA channel reserved for RIO Maintenance requests - Adds DMA Engine callback routines  Signed-off-by: Alexandre Bounine <alexandre.bounine@idt.com> Cc: Dan Williams <dan.j.williams@intel.com> Cc: Vinod Koul <vinod.koul@intel.com> Cc: Li Yang <leoli@freescale.com> Cc: Matt Porter <mporter@kernel.crashing.org> Cc: Paul Gortmaker <paul.gortmaker@windriver.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | rio.c | s | 34K | 1107 | Alexandre Bounine | alexandre.bounine@idt.com | 1338511771 |  | rapidio: add DMA engine support for RIO data transfers  Adds DMA Engine framework support into RapidIO subsystem.  Uses DMA Engine DMA_SLAVE interface to generate data transfers to/from remote RapidIO target devices.  Introduces RapidIO-specific wrapper for prep_slave_sg() interface with an extra parameter to pass target specific information.  Uses scatterlist to describe local data buffer.  Address flat data buffer on a remote side.  Signed-off-by: Alexandre Bounine <alexandre.bounine@idt.com> Cc: Dan Williams <dan.j.williams@intel.com> Acked-by: Vinod Koul <vinod.koul@linux.intel.com> Cc: Li Yang <leoli@freescale.com> Cc: Matt Porter <mporter@kernel.crashing.org> Cc: Paul Gortmaker <paul.gortmaker@windriver.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
