f | savage_drv.c | s | 2.6K | 79 | Arjan van de Ven | arjan@infradead.org | 1321010087 |  | drm: Make the per-driver file_operations struct const  From fdf1fdebaa00f81de18c227f32f8074c8b352d50 Mon Sep 17 00:00:00 2001 From: Arjan van de Ven <arjan@linux.intel.com> Date: Sun, 30 Oct 2011 19:06:07 -0700 Subject: [PATCH] drm: Make the per-driver file_operations struct const  The DRM layer keeps a copy of struct file_operations inside its big driver struct... which prevents it from being consistent and static. For consistency (and the general security objective of having such things static), it's desirable to get this fixed.  This patch splits out the file_operations field to its own struct, which is then "static const", and just stick a pointer to this into the driver struct, making it more consistent with how the rest of the kernel does this.  Signed-off-by: Arjan van de Ven <arjan@linux.intel.com> Signed-off-by: Dave Airlie <airlied@redhat.com>
f | savage_bci.c | s | 30K | 941 | Dan Carpenter | dan.carpenter@oracle.com | 1337251347 |  | drm: checking the wrong variable in savage_do_init_bci()  drm_core_ioremap() initializes ->handle.  We already know "dev->agp_buffer_map" is a valid pointer.  Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com> Signed-off-by: Dave Airlie <airlied@redhat.com>
f | Makefile | g | 265B |  | Dave Airlie | airlied@redhat.com | 1215996301 |  | drm: reorganise drm tree to be more future proof.  With the coming of kernel based modesetting and the memory manager stuff, the everything in one directory approach was getting very ugly and starting to be unmanageable.  This restructures the drm along the lines of other kernel components.  It creates a drivers/gpu/drm directory and moves the hw drivers into subdirectores. It moves the includes into an include/drm, and sets up the unifdef for the userspace headers we should be exporting.  Signed-off-by: Dave Airlie <airlied@redhat.com>
f | savage_drv.h | s | 19K | 493 | Dave Airlie | airlied@redhat.com | 1215996301 |  | drm: reorganise drm tree to be more future proof.  With the coming of kernel based modesetting and the memory manager stuff, the everything in one directory approach was getting very ugly and starting to be unmanageable.  This restructures the drm along the lines of other kernel components.  It creates a drivers/gpu/drm directory and moves the hw drivers into subdirectores. It moves the includes into an include/drm, and sets up the unifdef for the userspace headers we should be exporting.  Signed-off-by: Dave Airlie <airlied@redhat.com>
f | savage_state.c | s | 30K | 1040 | Xi Wang | xi.wang@gmail.com | 1334049771 |  | drm/savage: fix integer overflows in savage_bci_cmdbuf()  Since cmdbuf->size and cmdbuf->nbox are from userspace, a large value would overflow the allocation size, leading to out-of-bounds access.  Signed-off-by: Xi Wang <xi.wang@gmail.com> Signed-off-by: Dave Airlie <airlied@redhat.com>
