<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › gpu › drm › radeon › r300_reg.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>r300_reg.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright 2005 Nicolai Haehnle et al.</span>
<span class="cm"> * Copyright 2008 Advanced Micro Devices, Inc.</span>
<span class="cm"> * Copyright 2009 Jerome Glisse.</span>
<span class="cm"> *</span>
<span class="cm"> * Permission is hereby granted, free of charge, to any person obtaining a</span>
<span class="cm"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span>
<span class="cm"> * to deal in the Software without restriction, including without limitation</span>
<span class="cm"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span>
<span class="cm"> * and/or sell copies of the Software, and to permit persons to whom the</span>
<span class="cm"> * Software is furnished to do so, subject to the following conditions:</span>
<span class="cm"> *</span>
<span class="cm"> * The above copyright notice and this permission notice shall be included in</span>
<span class="cm"> * all copies or substantial portions of the Software.</span>
<span class="cm"> *</span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="cm"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="cm"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL</span>
<span class="cm"> * THE COPYRIGHT HOLDER(S) OR AUTHOR(S) BE LIABLE FOR ANY CLAIM, DAMAGES OR</span>
<span class="cm"> * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span>
<span class="cm"> * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span>
<span class="cm"> * OTHER DEALINGS IN THE SOFTWARE.</span>
<span class="cm"> *</span>
<span class="cm"> * Authors: Nicolai Haehnle</span>
<span class="cm"> *          Jerome Glisse</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _R300_REG_H_</span>
<span class="cp">#define _R300_REG_H_</span>

<span class="cp">#define R300_SURF_TILE_MACRO (1&lt;&lt;16)</span>
<span class="cp">#define R300_SURF_TILE_MICRO (2&lt;&lt;16)</span>
<span class="cp">#define R300_SURF_TILE_BOTH (3&lt;&lt;16)</span>


<span class="cp">#define R300_MC_INIT_MISC_LAT_TIMER	0x180</span>
<span class="cp">#	define R300_MC_MISC__MC_CPR_INIT_LAT_SHIFT	0</span>
<span class="cp">#	define R300_MC_MISC__MC_VF_INIT_LAT_SHIFT	4</span>
<span class="cp">#	define R300_MC_MISC__MC_DISP0R_INIT_LAT_SHIFT	8</span>
<span class="cp">#	define R300_MC_MISC__MC_DISP1R_INIT_LAT_SHIFT	12</span>
<span class="cp">#	define R300_MC_MISC__MC_FIXED_INIT_LAT_SHIFT	16</span>
<span class="cp">#	define R300_MC_MISC__MC_E2R_INIT_LAT_SHIFT	20</span>
<span class="cp">#	define R300_MC_MISC__MC_SAME_PAGE_PRIO_SHIFT	24</span>
<span class="cp">#	define R300_MC_MISC__MC_GLOBW_INIT_LAT_SHIFT	28</span>

<span class="cp">#define R300_MC_INIT_GFX_LAT_TIMER	0x154</span>
<span class="cp">#	define R300_MC_MISC__MC_G3D0R_INIT_LAT_SHIFT	0</span>
<span class="cp">#	define R300_MC_MISC__MC_G3D1R_INIT_LAT_SHIFT	4</span>
<span class="cp">#	define R300_MC_MISC__MC_G3D2R_INIT_LAT_SHIFT	8</span>
<span class="cp">#	define R300_MC_MISC__MC_G3D3R_INIT_LAT_SHIFT	12</span>
<span class="cp">#	define R300_MC_MISC__MC_TX0R_INIT_LAT_SHIFT	16</span>
<span class="cp">#	define R300_MC_MISC__MC_TX1R_INIT_LAT_SHIFT	20</span>
<span class="cp">#	define R300_MC_MISC__MC_GLOBR_INIT_LAT_SHIFT	24</span>
<span class="cp">#	define R300_MC_MISC__MC_GLOBW_FULL_LAT_SHIFT	28</span>

<span class="cm">/*</span>
<span class="cm"> * This file contains registers and constants for the R300. They have been</span>
<span class="cm"> * found mostly by examining command buffers captured using glxtest, as well</span>
<span class="cm"> * as by extrapolating some known registers and constants from the R200.</span>
<span class="cm"> * I am fairly certain that they are correct unless stated otherwise</span>
<span class="cm"> * in comments.</span>
<span class="cm"> */</span>

<span class="cp">#define R300_SE_VPORT_XSCALE                0x1D98</span>
<span class="cp">#define R300_SE_VPORT_XOFFSET               0x1D9C</span>
<span class="cp">#define R300_SE_VPORT_YSCALE                0x1DA0</span>
<span class="cp">#define R300_SE_VPORT_YOFFSET               0x1DA4</span>
<span class="cp">#define R300_SE_VPORT_ZSCALE                0x1DA8</span>
<span class="cp">#define R300_SE_VPORT_ZOFFSET               0x1DAC</span>


<span class="cm">/*</span>
<span class="cm"> * Vertex Array Processing (VAP) Control</span>
<span class="cm"> * Stolen from r200 code from Christoph Brill (It&#39;s a guess!)</span>
<span class="cm"> */</span>
<span class="cp">#define R300_VAP_CNTL	0x2080</span>

<span class="cm">/* This register is written directly and also starts data section</span>
<span class="cm"> * in many 3d CP_PACKET3&#39;s</span>
<span class="cm"> */</span>
<span class="cp">#define R300_VAP_VF_CNTL	0x2084</span>
<span class="cp">#	define	R300_VAP_VF_CNTL__PRIM_TYPE__SHIFT              0</span>
<span class="cp">#	define  R300_VAP_VF_CNTL__PRIM_NONE                     (0&lt;&lt;0)</span>
<span class="cp">#	define  R300_VAP_VF_CNTL__PRIM_POINTS                   (1&lt;&lt;0)</span>
<span class="cp">#	define  R300_VAP_VF_CNTL__PRIM_LINES                    (2&lt;&lt;0)</span>
<span class="cp">#	define  R300_VAP_VF_CNTL__PRIM_LINE_STRIP               (3&lt;&lt;0)</span>
<span class="cp">#	define  R300_VAP_VF_CNTL__PRIM_TRIANGLES                (4&lt;&lt;0)</span>
<span class="cp">#	define  R300_VAP_VF_CNTL__PRIM_TRIANGLE_FAN             (5&lt;&lt;0)</span>
<span class="cp">#	define  R300_VAP_VF_CNTL__PRIM_TRIANGLE_STRIP           (6&lt;&lt;0)</span>
<span class="cp">#	define  R300_VAP_VF_CNTL__PRIM_LINE_LOOP                (12&lt;&lt;0)</span>
<span class="cp">#	define  R300_VAP_VF_CNTL__PRIM_QUADS                    (13&lt;&lt;0)</span>
<span class="cp">#	define  R300_VAP_VF_CNTL__PRIM_QUAD_STRIP               (14&lt;&lt;0)</span>
<span class="cp">#	define  R300_VAP_VF_CNTL__PRIM_POLYGON                  (15&lt;&lt;0)</span>

<span class="cp">#	define	R300_VAP_VF_CNTL__PRIM_WALK__SHIFT              4</span>
	<span class="cm">/* State based - direct writes to registers trigger vertex</span>
<span class="cm">           generation */</span>
<span class="cp">#	define	R300_VAP_VF_CNTL__PRIM_WALK_STATE_BASED         (0&lt;&lt;4)</span>
<span class="cp">#	define	R300_VAP_VF_CNTL__PRIM_WALK_INDICES             (1&lt;&lt;4)</span>
<span class="cp">#	define	R300_VAP_VF_CNTL__PRIM_WALK_VERTEX_LIST         (2&lt;&lt;4)</span>
<span class="cp">#	define	R300_VAP_VF_CNTL__PRIM_WALK_VERTEX_EMBEDDED     (3&lt;&lt;4)</span>

	<span class="cm">/* I don&#39;t think I saw these three used.. */</span>
<span class="cp">#	define	R300_VAP_VF_CNTL__COLOR_ORDER__SHIFT            6</span>
<span class="cp">#	define	R300_VAP_VF_CNTL__TCL_OUTPUT_CTL_ENA__SHIFT     9</span>
<span class="cp">#	define	R300_VAP_VF_CNTL__PROG_STREAM_ENA__SHIFT        10</span>

	<span class="cm">/* index size - when not set the indices are assumed to be 16 bit */</span>
<span class="cp">#	define	R300_VAP_VF_CNTL__INDEX_SIZE_32bit              (1&lt;&lt;11)</span>
	<span class="cm">/* number of vertices */</span>
<span class="cp">#	define	R300_VAP_VF_CNTL__NUM_VERTICES__SHIFT           16</span>

<span class="cm">/* BEGIN: Wild guesses */</span>
<span class="cp">#define R300_VAP_OUTPUT_VTX_FMT_0           0x2090</span>
<span class="cp">#       define R300_VAP_OUTPUT_VTX_FMT_0__POS_PRESENT     (1&lt;&lt;0)</span>
<span class="cp">#       define R300_VAP_OUTPUT_VTX_FMT_0__COLOR_PRESENT   (1&lt;&lt;1)</span>
<span class="cp">#       define R300_VAP_OUTPUT_VTX_FMT_0__COLOR_1_PRESENT (1&lt;&lt;2)  </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_VAP_OUTPUT_VTX_FMT_0__COLOR_2_PRESENT (1&lt;&lt;3)  </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_VAP_OUTPUT_VTX_FMT_0__COLOR_3_PRESENT (1&lt;&lt;4)  </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_VAP_OUTPUT_VTX_FMT_0__PT_SIZE_PRESENT (1&lt;&lt;16) </span><span class="cm">/* GUESS */</span><span class="cp"></span>

<span class="cp">#define R300_VAP_OUTPUT_VTX_FMT_1           0x2094</span>
	<span class="cm">/* each of the following is 3 bits wide, specifies number</span>
<span class="cm">	   of components */</span>
<span class="cp">#       define R300_VAP_OUTPUT_VTX_FMT_1__TEX_0_COMP_CNT_SHIFT 0</span>
<span class="cp">#       define R300_VAP_OUTPUT_VTX_FMT_1__TEX_1_COMP_CNT_SHIFT 3</span>
<span class="cp">#       define R300_VAP_OUTPUT_VTX_FMT_1__TEX_2_COMP_CNT_SHIFT 6</span>
<span class="cp">#       define R300_VAP_OUTPUT_VTX_FMT_1__TEX_3_COMP_CNT_SHIFT 9</span>
<span class="cp">#       define R300_VAP_OUTPUT_VTX_FMT_1__TEX_4_COMP_CNT_SHIFT 12</span>
<span class="cp">#       define R300_VAP_OUTPUT_VTX_FMT_1__TEX_5_COMP_CNT_SHIFT 15</span>
<span class="cp">#       define R300_VAP_OUTPUT_VTX_FMT_1__TEX_6_COMP_CNT_SHIFT 18</span>
<span class="cp">#       define R300_VAP_OUTPUT_VTX_FMT_1__TEX_7_COMP_CNT_SHIFT 21</span>
<span class="cm">/* END: Wild guesses */</span>

<span class="cp">#define R300_SE_VTE_CNTL                  0x20b0</span>
<span class="cp">#	define     R300_VPORT_X_SCALE_ENA                0x00000001</span>
<span class="cp">#	define     R300_VPORT_X_OFFSET_ENA               0x00000002</span>
<span class="cp">#	define     R300_VPORT_Y_SCALE_ENA                0x00000004</span>
<span class="cp">#	define     R300_VPORT_Y_OFFSET_ENA               0x00000008</span>
<span class="cp">#	define     R300_VPORT_Z_SCALE_ENA                0x00000010</span>
<span class="cp">#	define     R300_VPORT_Z_OFFSET_ENA               0x00000020</span>
<span class="cp">#	define     R300_VTX_XY_FMT                       0x00000100</span>
<span class="cp">#	define     R300_VTX_Z_FMT                        0x00000200</span>
<span class="cp">#	define     R300_VTX_W0_FMT                       0x00000400</span>
<span class="cp">#	define     R300_VTX_W0_NORMALIZE                 0x00000800</span>
<span class="cp">#	define     R300_VTX_ST_DENORMALIZED              0x00001000</span>

<span class="cm">/* BEGIN: Vertex data assembly - lots of uncertainties */</span>

<span class="cm">/* gap */</span>

<span class="cp">#define R300_VAP_CNTL_STATUS              0x2140</span>
<span class="cp">#	define R300_VC_NO_SWAP                  (0 &lt;&lt; 0)</span>
<span class="cp">#	define R300_VC_16BIT_SWAP               (1 &lt;&lt; 0)</span>
<span class="cp">#	define R300_VC_32BIT_SWAP               (2 &lt;&lt; 0)</span>
<span class="cp">#	define R300_VAP_TCL_BYPASS		(1 &lt;&lt; 8)</span>

<span class="cm">/* gap */</span>

<span class="cm">/* Where do we get our vertex data?</span>
<span class="cm"> *</span>
<span class="cm"> * Vertex data either comes either from immediate mode registers or from</span>
<span class="cm"> * vertex arrays.</span>
<span class="cm"> * There appears to be no mixed mode (though we can force the pitch of</span>
<span class="cm"> * vertex arrays to 0, effectively reusing the same element over and over</span>
<span class="cm"> * again).</span>
<span class="cm"> *</span>
<span class="cm"> * Immediate mode is controlled by the INPUT_CNTL registers. I am not sure</span>
<span class="cm"> * if these registers influence vertex array processing.</span>
<span class="cm"> *</span>
<span class="cm"> * Vertex arrays are controlled via the 3D_LOAD_VBPNTR packet3.</span>
<span class="cm"> *</span>
<span class="cm"> * In both cases, vertex attributes are then passed through INPUT_ROUTE.</span>
<span class="cm"> *</span>
<span class="cm"> * Beginning with INPUT_ROUTE_0_0 is a list of WORDs that route vertex data</span>
<span class="cm"> * into the vertex processor&#39;s input registers.</span>
<span class="cm"> * The first word routes the first input, the second word the second, etc.</span>
<span class="cm"> * The corresponding input is routed into the register with the given index.</span>
<span class="cm"> * The list is ended by a word with INPUT_ROUTE_END set.</span>
<span class="cm"> *</span>
<span class="cm"> * Always set COMPONENTS_4 in immediate mode.</span>
<span class="cm"> */</span>

<span class="cp">#define R300_VAP_INPUT_ROUTE_0_0            0x2150</span>
<span class="cp">#       define R300_INPUT_ROUTE_COMPONENTS_1     (0 &lt;&lt; 0)</span>
<span class="cp">#       define R300_INPUT_ROUTE_COMPONENTS_2     (1 &lt;&lt; 0)</span>
<span class="cp">#       define R300_INPUT_ROUTE_COMPONENTS_3     (2 &lt;&lt; 0)</span>
<span class="cp">#       define R300_INPUT_ROUTE_COMPONENTS_4     (3 &lt;&lt; 0)</span>
<span class="cp">#       define R300_INPUT_ROUTE_COMPONENTS_RGBA  (4 &lt;&lt; 0) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_VAP_INPUT_ROUTE_IDX_SHIFT    8</span>
<span class="cp">#       define R300_VAP_INPUT_ROUTE_IDX_MASK     (31 &lt;&lt; 8) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_VAP_INPUT_ROUTE_END          (1 &lt;&lt; 13)</span>
<span class="cp">#       define R300_INPUT_ROUTE_IMMEDIATE_MODE   (0 &lt;&lt; 14) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_INPUT_ROUTE_FLOAT            (1 &lt;&lt; 14) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_INPUT_ROUTE_UNSIGNED_BYTE    (2 &lt;&lt; 14) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_INPUT_ROUTE_FLOAT_COLOR      (3 &lt;&lt; 14) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_0_1            0x2154</span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_0_2            0x2158</span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_0_3            0x215C</span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_0_4            0x2160</span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_0_5            0x2164</span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_0_6            0x2168</span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_0_7            0x216C</span>

<span class="cm">/* gap */</span>

<span class="cm">/* Notes:</span>
<span class="cm"> *  - always set up to produce at least two attributes:</span>
<span class="cm"> *    if vertex program uses only position, fglrx will set normal, too</span>
<span class="cm"> *  - INPUT_CNTL_0_COLOR and INPUT_CNTL_COLOR bits are always equal.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_VAP_INPUT_CNTL_0               0x2180</span>
<span class="cp">#       define R300_INPUT_CNTL_0_COLOR           0x00000001</span>
<span class="cp">#define R300_VAP_INPUT_CNTL_1               0x2184</span>
<span class="cp">#       define R300_INPUT_CNTL_POS               0x00000001</span>
<span class="cp">#       define R300_INPUT_CNTL_NORMAL            0x00000002</span>
<span class="cp">#       define R300_INPUT_CNTL_COLOR             0x00000004</span>
<span class="cp">#       define R300_INPUT_CNTL_TC0               0x00000400</span>
<span class="cp">#       define R300_INPUT_CNTL_TC1               0x00000800</span>
<span class="cp">#       define R300_INPUT_CNTL_TC2               0x00001000 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_INPUT_CNTL_TC3               0x00002000 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_INPUT_CNTL_TC4               0x00004000 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_INPUT_CNTL_TC5               0x00008000 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_INPUT_CNTL_TC6               0x00010000 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_INPUT_CNTL_TC7               0x00020000 </span><span class="cm">/* GUESS */</span><span class="cp"></span>

<span class="cm">/* gap */</span>

<span class="cm">/* Words parallel to INPUT_ROUTE_0; All words that are active in INPUT_ROUTE_0</span>
<span class="cm"> * are set to a swizzling bit pattern, other words are 0.</span>
<span class="cm"> *</span>
<span class="cm"> * In immediate mode, the pattern is always set to xyzw. In vertex array</span>
<span class="cm"> * mode, the swizzling pattern is e.g. used to set zw components in texture</span>
<span class="cm"> * coordinates with only tweo components.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_1_0            0x21E0</span>
<span class="cp">#       define R300_INPUT_ROUTE_SELECT_X    0</span>
<span class="cp">#       define R300_INPUT_ROUTE_SELECT_Y    1</span>
<span class="cp">#       define R300_INPUT_ROUTE_SELECT_Z    2</span>
<span class="cp">#       define R300_INPUT_ROUTE_SELECT_W    3</span>
<span class="cp">#       define R300_INPUT_ROUTE_SELECT_ZERO 4</span>
<span class="cp">#       define R300_INPUT_ROUTE_SELECT_ONE  5</span>
<span class="cp">#       define R300_INPUT_ROUTE_SELECT_MASK 7</span>
<span class="cp">#       define R300_INPUT_ROUTE_X_SHIFT     0</span>
<span class="cp">#       define R300_INPUT_ROUTE_Y_SHIFT     3</span>
<span class="cp">#       define R300_INPUT_ROUTE_Z_SHIFT     6</span>
<span class="cp">#       define R300_INPUT_ROUTE_W_SHIFT     9</span>
<span class="cp">#       define R300_INPUT_ROUTE_ENABLE      (15 &lt;&lt; 12)</span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_1_1            0x21E4</span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_1_2            0x21E8</span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_1_3            0x21EC</span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_1_4            0x21F0</span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_1_5            0x21F4</span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_1_6            0x21F8</span>
<span class="cp">#define R300_VAP_INPUT_ROUTE_1_7            0x21FC</span>

<span class="cm">/* END: Vertex data assembly */</span>

<span class="cm">/* gap */</span>

<span class="cm">/* BEGIN: Upload vertex program and data */</span>

<span class="cm">/*</span>
<span class="cm"> * The programmable vertex shader unit has a memory bank of unknown size</span>
<span class="cm"> * that can be written to in 16 byte units by writing the address into</span>
<span class="cm"> * UPLOAD_ADDRESS, followed by data in UPLOAD_DATA (multiples of 4 DWORDs).</span>
<span class="cm"> *</span>
<span class="cm"> * Pointers into the memory bank are always in multiples of 16 bytes.</span>
<span class="cm"> *</span>
<span class="cm"> * The memory bank is divided into areas with fixed meaning.</span>
<span class="cm"> *</span>
<span class="cm"> * Starting at address UPLOAD_PROGRAM: Vertex program instructions.</span>
<span class="cm"> * Native limits reported by drivers from ATI suggest size 256 (i.e. 4KB),</span>
<span class="cm"> * whereas the difference between known addresses suggests size 512.</span>
<span class="cm"> *</span>
<span class="cm"> * Starting at address UPLOAD_PARAMETERS: Vertex program parameters.</span>
<span class="cm"> * Native reported limits and the VPI layout suggest size 256, whereas</span>
<span class="cm"> * difference between known addresses suggests size 512.</span>
<span class="cm"> *</span>
<span class="cm"> * At address UPLOAD_POINTSIZE is a vector (0, 0, ps, 0), where ps is the</span>
<span class="cm"> * floating point pointsize. The exact purpose of this state is uncertain,</span>
<span class="cm"> * as there is also the R300_RE_POINTSIZE register.</span>
<span class="cm"> *</span>
<span class="cm"> * Multiple vertex programs and parameter sets can be loaded at once,</span>
<span class="cm"> * which could explain the size discrepancy.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_VAP_PVS_UPLOAD_ADDRESS         0x2200</span>
<span class="cp">#       define R300_PVS_UPLOAD_PROGRAM           0x00000000</span>
<span class="cp">#       define R300_PVS_UPLOAD_PARAMETERS        0x00000200</span>
<span class="cp">#       define R300_PVS_UPLOAD_POINTSIZE         0x00000406</span>

<span class="cm">/* gap */</span>

<span class="cp">#define R300_VAP_PVS_UPLOAD_DATA            0x2208</span>

<span class="cm">/* END: Upload vertex program and data */</span>

<span class="cm">/* gap */</span>

<span class="cm">/* I do not know the purpose of this register. However, I do know that</span>
<span class="cm"> * it is set to 221C_CLEAR for clear operations and to 221C_NORMAL</span>
<span class="cm"> * for normal rendering.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_VAP_UNKNOWN_221C               0x221C</span>
<span class="cp">#       define R300_221C_NORMAL                  0x00000000</span>
<span class="cp">#       define R300_221C_CLEAR                   0x0001C000</span>

<span class="cm">/* These seem to be per-pixel and per-vertex X and Y clipping planes. The first</span>
<span class="cm"> * plane is per-pixel and the second plane is per-vertex.</span>
<span class="cm"> *</span>
<span class="cm"> * This was determined by experimentation alone but I believe it is correct.</span>
<span class="cm"> *</span>
<span class="cm"> * These registers are called X_QUAD0_1_FL to X_QUAD0_4_FL by glxtest.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_VAP_CLIP_X_0                   0x2220</span>
<span class="cp">#define R300_VAP_CLIP_X_1                   0x2224</span>
<span class="cp">#define R300_VAP_CLIP_Y_0                   0x2228</span>
<span class="cp">#define R300_VAP_CLIP_Y_1                   0x2230</span>

<span class="cm">/* gap */</span>

<span class="cm">/* Sometimes, END_OF_PKT and 0x2284=0 are the only commands sent between</span>
<span class="cm"> * rendering commands and overwriting vertex program parameters.</span>
<span class="cm"> * Therefore, I suspect writing zero to 0x2284 synchronizes the engine and</span>
<span class="cm"> * avoids bugs caused by still running shaders reading bad data from memory.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_VAP_PVS_STATE_FLUSH_REG        0x2284</span>

<span class="cm">/* Absolutely no clue what this register is about. */</span>
<span class="cp">#define R300_VAP_UNKNOWN_2288               0x2288</span>
<span class="cp">#       define R300_2288_R300                    0x00750000 </span><span class="cm">/* -- nh */</span><span class="cp"></span>
<span class="cp">#       define R300_2288_RV350                   0x0000FFFF </span><span class="cm">/* -- Vladimir */</span><span class="cp"></span>

<span class="cm">/* gap */</span>

<span class="cm">/* Addresses are relative to the vertex program instruction area of the</span>
<span class="cm"> * memory bank. PROGRAM_END points to the last instruction of the active</span>
<span class="cm"> * program</span>
<span class="cm"> *</span>
<span class="cm"> * The meaning of the two UNKNOWN fields is obviously not known. However,</span>
<span class="cm"> * experiments so far have shown that both *must* point to an instruction</span>
<span class="cm"> * inside the vertex program, otherwise the GPU locks up.</span>
<span class="cm"> *</span>
<span class="cm"> * fglrx usually sets CNTL_3_UNKNOWN to the end of the program and</span>
<span class="cm"> * R300_PVS_CNTL_1_POS_END_SHIFT points to instruction where last write to</span>
<span class="cm"> * position takes place.</span>
<span class="cm"> *</span>
<span class="cm"> * Most likely this is used to ignore rest of the program in cases</span>
<span class="cm"> * where group of verts arent visible. For some reason this &quot;section&quot;</span>
<span class="cm"> * is sometimes accepted other instruction that have no relationship with</span>
<span class="cm"> * position calculations.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_VAP_PVS_CNTL_1                 0x22D0</span>
<span class="cp">#       define R300_PVS_CNTL_1_PROGRAM_START_SHIFT   0</span>
<span class="cp">#       define R300_PVS_CNTL_1_POS_END_SHIFT         10</span>
<span class="cp">#       define R300_PVS_CNTL_1_PROGRAM_END_SHIFT     20</span>
<span class="cm">/* Addresses are relative the the vertex program parameters area. */</span>
<span class="cp">#define R300_VAP_PVS_CNTL_2                 0x22D4</span>
<span class="cp">#       define R300_PVS_CNTL_2_PARAM_OFFSET_SHIFT 0</span>
<span class="cp">#       define R300_PVS_CNTL_2_PARAM_COUNT_SHIFT  16</span>
<span class="cp">#define R300_VAP_PVS_CNTL_3	           0x22D8</span>
<span class="cp">#       define R300_PVS_CNTL_3_PROGRAM_UNKNOWN_SHIFT 10</span>
<span class="cp">#       define R300_PVS_CNTL_3_PROGRAM_UNKNOWN2_SHIFT 0</span>

<span class="cm">/* The entire range from 0x2300 to 0x2AC inclusive seems to be used for</span>
<span class="cm"> * immediate vertices</span>
<span class="cm"> */</span>
<span class="cp">#define R300_VAP_VTX_COLOR_R                0x2464</span>
<span class="cp">#define R300_VAP_VTX_COLOR_G                0x2468</span>
<span class="cp">#define R300_VAP_VTX_COLOR_B                0x246C</span>
<span class="cp">#define R300_VAP_VTX_POS_0_X_1              0x2490 </span><span class="cm">/* used for glVertex2*() */</span><span class="cp"></span>
<span class="cp">#define R300_VAP_VTX_POS_0_Y_1              0x2494</span>
<span class="cp">#define R300_VAP_VTX_COLOR_PKD              0x249C </span><span class="cm">/* RGBA */</span><span class="cp"></span>
<span class="cp">#define R300_VAP_VTX_POS_0_X_2              0x24A0 </span><span class="cm">/* used for glVertex3*() */</span><span class="cp"></span>
<span class="cp">#define R300_VAP_VTX_POS_0_Y_2              0x24A4</span>
<span class="cp">#define R300_VAP_VTX_POS_0_Z_2              0x24A8</span>
<span class="cm">/* write 0 to indicate end of packet? */</span>
<span class="cp">#define R300_VAP_VTX_END_OF_PKT             0x24AC</span>

<span class="cm">/* gap */</span>

<span class="cm">/* These are values from r300_reg/r300_reg.h - they are known to be correct</span>
<span class="cm"> * and are here so we can use one register file instead of several</span>
<span class="cm"> * - Vladimir</span>
<span class="cm"> */</span>
<span class="cp">#define R300_GB_VAP_RASTER_VTX_FMT_0	0x4000</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_0__POS_PRESENT	(1&lt;&lt;0)</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_0__COLOR_0_PRESENT	(1&lt;&lt;1)</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_0__COLOR_1_PRESENT	(1&lt;&lt;2)</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_0__COLOR_2_PRESENT	(1&lt;&lt;3)</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_0__COLOR_3_PRESENT	(1&lt;&lt;4)</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_0__COLOR_SPACE	(0xf&lt;&lt;5)</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_0__PT_SIZE_PRESENT	(0x1&lt;&lt;16)</span>

<span class="cp">#define R300_GB_VAP_RASTER_VTX_FMT_1	0x4004</span>
	<span class="cm">/* each of the following is 3 bits wide, specifies number</span>
<span class="cm">	   of components */</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_1__TEX_0_COMP_CNT_SHIFT	0</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_1__TEX_1_COMP_CNT_SHIFT	3</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_1__TEX_2_COMP_CNT_SHIFT	6</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_1__TEX_3_COMP_CNT_SHIFT	9</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_1__TEX_4_COMP_CNT_SHIFT	12</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_1__TEX_5_COMP_CNT_SHIFT	15</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_1__TEX_6_COMP_CNT_SHIFT	18</span>
<span class="cp">#	define R300_GB_VAP_RASTER_VTX_FMT_1__TEX_7_COMP_CNT_SHIFT	21</span>

<span class="cm">/* UNK30 seems to enables point to quad transformation on textures</span>
<span class="cm"> * (or something closely related to that).</span>
<span class="cm"> * This bit is rather fatal at the time being due to lackings at pixel</span>
<span class="cm"> * shader side</span>
<span class="cm"> */</span>
<span class="cp">#define R300_GB_ENABLE	0x4008</span>
<span class="cp">#	define R300_GB_POINT_STUFF_ENABLE	(1&lt;&lt;0)</span>
<span class="cp">#	define R300_GB_LINE_STUFF_ENABLE	(1&lt;&lt;1)</span>
<span class="cp">#	define R300_GB_TRIANGLE_STUFF_ENABLE	(1&lt;&lt;2)</span>
<span class="cp">#	define R300_GB_STENCIL_AUTO_ENABLE	(1&lt;&lt;4)</span>
<span class="cp">#	define R300_GB_UNK31			(1&lt;&lt;31)</span>
	<span class="cm">/* each of the following is 2 bits wide */</span>
<span class="cp">#define R300_GB_TEX_REPLICATE	0</span>
<span class="cp">#define R300_GB_TEX_ST		1</span>
<span class="cp">#define R300_GB_TEX_STR		2</span>
<span class="cp">#	define R300_GB_TEX0_SOURCE_SHIFT	16</span>
<span class="cp">#	define R300_GB_TEX1_SOURCE_SHIFT	18</span>
<span class="cp">#	define R300_GB_TEX2_SOURCE_SHIFT	20</span>
<span class="cp">#	define R300_GB_TEX3_SOURCE_SHIFT	22</span>
<span class="cp">#	define R300_GB_TEX4_SOURCE_SHIFT	24</span>
<span class="cp">#	define R300_GB_TEX5_SOURCE_SHIFT	26</span>
<span class="cp">#	define R300_GB_TEX6_SOURCE_SHIFT	28</span>
<span class="cp">#	define R300_GB_TEX7_SOURCE_SHIFT	30</span>

<span class="cm">/* MSPOS - positions for multisample antialiasing (?) */</span>
<span class="cp">#define R300_GB_MSPOS0	0x4010</span>
	<span class="cm">/* shifts - each of the fields is 4 bits */</span>
<span class="cp">#	define R300_GB_MSPOS0__MS_X0_SHIFT	0</span>
<span class="cp">#	define R300_GB_MSPOS0__MS_Y0_SHIFT	4</span>
<span class="cp">#	define R300_GB_MSPOS0__MS_X1_SHIFT	8</span>
<span class="cp">#	define R300_GB_MSPOS0__MS_Y1_SHIFT	12</span>
<span class="cp">#	define R300_GB_MSPOS0__MS_X2_SHIFT	16</span>
<span class="cp">#	define R300_GB_MSPOS0__MS_Y2_SHIFT	20</span>
<span class="cp">#	define R300_GB_MSPOS0__MSBD0_Y		24</span>
<span class="cp">#	define R300_GB_MSPOS0__MSBD0_X		28</span>

<span class="cp">#define R300_GB_MSPOS1	0x4014</span>
<span class="cp">#	define R300_GB_MSPOS1__MS_X3_SHIFT	0</span>
<span class="cp">#	define R300_GB_MSPOS1__MS_Y3_SHIFT	4</span>
<span class="cp">#	define R300_GB_MSPOS1__MS_X4_SHIFT	8</span>
<span class="cp">#	define R300_GB_MSPOS1__MS_Y4_SHIFT	12</span>
<span class="cp">#	define R300_GB_MSPOS1__MS_X5_SHIFT	16</span>
<span class="cp">#	define R300_GB_MSPOS1__MS_Y5_SHIFT	20</span>
<span class="cp">#	define R300_GB_MSPOS1__MSBD1		24</span>


<span class="cp">#define R300_GB_TILE_CONFIG	0x4018</span>
<span class="cp">#	define R300_GB_TILE_ENABLE	(1&lt;&lt;0)</span>
<span class="cp">#	define R300_GB_TILE_PIPE_COUNT_RV300	0</span>
<span class="cp">#	define R300_GB_TILE_PIPE_COUNT_R300	(3&lt;&lt;1)</span>
<span class="cp">#	define R300_GB_TILE_PIPE_COUNT_R420	(7&lt;&lt;1)</span>
<span class="cp">#	define R300_GB_TILE_PIPE_COUNT_RV410	(3&lt;&lt;1)</span>
<span class="cp">#	define R300_GB_TILE_SIZE_8		0</span>
<span class="cp">#	define R300_GB_TILE_SIZE_16		(1&lt;&lt;4)</span>
<span class="cp">#	define R300_GB_TILE_SIZE_32		(2&lt;&lt;4)</span>
<span class="cp">#	define R300_GB_SUPER_SIZE_1		(0&lt;&lt;6)</span>
<span class="cp">#	define R300_GB_SUPER_SIZE_2		(1&lt;&lt;6)</span>
<span class="cp">#	define R300_GB_SUPER_SIZE_4		(2&lt;&lt;6)</span>
<span class="cp">#	define R300_GB_SUPER_SIZE_8		(3&lt;&lt;6)</span>
<span class="cp">#	define R300_GB_SUPER_SIZE_16		(4&lt;&lt;6)</span>
<span class="cp">#	define R300_GB_SUPER_SIZE_32		(5&lt;&lt;6)</span>
<span class="cp">#	define R300_GB_SUPER_SIZE_64		(6&lt;&lt;6)</span>
<span class="cp">#	define R300_GB_SUPER_SIZE_128		(7&lt;&lt;6)</span>
<span class="cp">#	define R300_GB_SUPER_X_SHIFT		9	</span><span class="cm">/* 3 bits wide */</span><span class="cp"></span>
<span class="cp">#	define R300_GB_SUPER_Y_SHIFT		12	</span><span class="cm">/* 3 bits wide */</span><span class="cp"></span>
<span class="cp">#	define R300_GB_SUPER_TILE_A		0</span>
<span class="cp">#	define R300_GB_SUPER_TILE_B		(1&lt;&lt;15)</span>
<span class="cp">#	define R300_GB_SUBPIXEL_1_12		0</span>
<span class="cp">#	define R300_GB_SUBPIXEL_1_16		(1&lt;&lt;16)</span>

<span class="cp">#define R300_GB_FIFO_SIZE	0x4024</span>
	<span class="cm">/* each of the following is 2 bits wide */</span>
<span class="cp">#define R300_GB_FIFO_SIZE_32	0</span>
<span class="cp">#define R300_GB_FIFO_SIZE_64	1</span>
<span class="cp">#define R300_GB_FIFO_SIZE_128	2</span>
<span class="cp">#define R300_GB_FIFO_SIZE_256	3</span>
<span class="cp">#	define R300_SC_IFIFO_SIZE_SHIFT	0</span>
<span class="cp">#	define R300_SC_TZFIFO_SIZE_SHIFT	2</span>
<span class="cp">#	define R300_SC_BFIFO_SIZE_SHIFT	4</span>

<span class="cp">#	define R300_US_OFIFO_SIZE_SHIFT	12</span>
<span class="cp">#	define R300_US_WFIFO_SIZE_SHIFT	14</span>
	<span class="cm">/* the following use the same constants as above, but meaning is</span>
<span class="cm">	   is times 2 (i.e. instead of 32 words it means 64 */</span>
<span class="cp">#	define R300_RS_TFIFO_SIZE_SHIFT	6</span>
<span class="cp">#	define R300_RS_CFIFO_SIZE_SHIFT	8</span>
<span class="cp">#	define R300_US_RAM_SIZE_SHIFT		10</span>
	<span class="cm">/* watermarks, 3 bits wide */</span>
<span class="cp">#	define R300_RS_HIGHWATER_COL_SHIFT	16</span>
<span class="cp">#	define R300_RS_HIGHWATER_TEX_SHIFT	19</span>
<span class="cp">#	define R300_OFIFO_HIGHWATER_SHIFT	22	</span><span class="cm">/* two bits only */</span><span class="cp"></span>
<span class="cp">#	define R300_CUBE_FIFO_HIGHWATER_COL_SHIFT	24</span>

<span class="cp">#define R300_GB_SELECT	0x401C</span>
<span class="cp">#	define R300_GB_FOG_SELECT_C0A		0</span>
<span class="cp">#	define R300_GB_FOG_SELECT_C1A		1</span>
<span class="cp">#	define R300_GB_FOG_SELECT_C2A		2</span>
<span class="cp">#	define R300_GB_FOG_SELECT_C3A		3</span>
<span class="cp">#	define R300_GB_FOG_SELECT_1_1_W	4</span>
<span class="cp">#	define R300_GB_FOG_SELECT_Z		5</span>
<span class="cp">#	define R300_GB_DEPTH_SELECT_Z		0</span>
<span class="cp">#	define R300_GB_DEPTH_SELECT_1_1_W	(1&lt;&lt;3)</span>
<span class="cp">#	define R300_GB_W_SELECT_1_W		0</span>
<span class="cp">#	define R300_GB_W_SELECT_1		(1&lt;&lt;4)</span>

<span class="cp">#define R300_GB_AA_CONFIG		0x4020</span>
<span class="cp">#	define R300_AA_DISABLE			0x00</span>
<span class="cp">#	define R300_AA_ENABLE			0x01</span>
<span class="cp">#	define R300_AA_SUBSAMPLES_2		0</span>
<span class="cp">#	define R300_AA_SUBSAMPLES_3		(1&lt;&lt;1)</span>
<span class="cp">#	define R300_AA_SUBSAMPLES_4		(2&lt;&lt;1)</span>
<span class="cp">#	define R300_AA_SUBSAMPLES_6		(3&lt;&lt;1)</span>

<span class="cm">/* gap */</span>

<span class="cm">/* Zero to flush caches. */</span>
<span class="cp">#define R300_TX_INVALTAGS                   0x4100</span>
<span class="cp">#define R300_TX_FLUSH                       0x0</span>

<span class="cm">/* The upper enable bits are guessed, based on fglrx reported limits. */</span>
<span class="cp">#define R300_TX_ENABLE                      0x4104</span>
<span class="cp">#       define R300_TX_ENABLE_0                  (1 &lt;&lt; 0)</span>
<span class="cp">#       define R300_TX_ENABLE_1                  (1 &lt;&lt; 1)</span>
<span class="cp">#       define R300_TX_ENABLE_2                  (1 &lt;&lt; 2)</span>
<span class="cp">#       define R300_TX_ENABLE_3                  (1 &lt;&lt; 3)</span>
<span class="cp">#       define R300_TX_ENABLE_4                  (1 &lt;&lt; 4)</span>
<span class="cp">#       define R300_TX_ENABLE_5                  (1 &lt;&lt; 5)</span>
<span class="cp">#       define R300_TX_ENABLE_6                  (1 &lt;&lt; 6)</span>
<span class="cp">#       define R300_TX_ENABLE_7                  (1 &lt;&lt; 7)</span>
<span class="cp">#       define R300_TX_ENABLE_8                  (1 &lt;&lt; 8)</span>
<span class="cp">#       define R300_TX_ENABLE_9                  (1 &lt;&lt; 9)</span>
<span class="cp">#       define R300_TX_ENABLE_10                 (1 &lt;&lt; 10)</span>
<span class="cp">#       define R300_TX_ENABLE_11                 (1 &lt;&lt; 11)</span>
<span class="cp">#       define R300_TX_ENABLE_12                 (1 &lt;&lt; 12)</span>
<span class="cp">#       define R300_TX_ENABLE_13                 (1 &lt;&lt; 13)</span>
<span class="cp">#       define R300_TX_ENABLE_14                 (1 &lt;&lt; 14)</span>
<span class="cp">#       define R300_TX_ENABLE_15                 (1 &lt;&lt; 15)</span>

<span class="cm">/* The pointsize is given in multiples of 6. The pointsize can be</span>
<span class="cm"> * enormous: Clear() renders a single point that fills the entire</span>
<span class="cm"> * framebuffer.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_RE_POINTSIZE                   0x421C</span>
<span class="cp">#       define R300_POINTSIZE_Y_SHIFT            0</span>
<span class="cp">#       define R300_POINTSIZE_Y_MASK             (0xFFFF &lt;&lt; 0) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_POINTSIZE_X_SHIFT            16</span>
<span class="cp">#       define R300_POINTSIZE_X_MASK             (0xFFFF &lt;&lt; 16) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_POINTSIZE_MAX             (R300_POINTSIZE_Y_MASK / 6)</span>

<span class="cm">/* The line width is given in multiples of 6.</span>
<span class="cm"> * In default mode lines are classified as vertical lines.</span>
<span class="cm"> * HO: horizontal</span>
<span class="cm"> * VE: vertical or horizontal</span>
<span class="cm"> * HO &amp; VE: no classification</span>
<span class="cm"> */</span>
<span class="cp">#define R300_RE_LINE_CNT                      0x4234</span>
<span class="cp">#       define R300_LINESIZE_SHIFT            0</span>
<span class="cp">#       define R300_LINESIZE_MASK             (0xFFFF &lt;&lt; 0) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_LINESIZE_MAX             (R300_LINESIZE_MASK / 6)</span>
<span class="cp">#       define R300_LINE_CNT_HO               (1 &lt;&lt; 16)</span>
<span class="cp">#       define R300_LINE_CNT_VE               (1 &lt;&lt; 17)</span>

<span class="cm">/* Some sort of scale or clamp value for texcoordless textures. */</span>
<span class="cp">#define R300_RE_UNK4238                       0x4238</span>

<span class="cm">/* Something shade related */</span>
<span class="cp">#define R300_RE_SHADE                         0x4274</span>

<span class="cp">#define R300_RE_SHADE_MODEL                   0x4278</span>
<span class="cp">#	define R300_RE_SHADE_MODEL_SMOOTH     0x3aaaa</span>
<span class="cp">#	define R300_RE_SHADE_MODEL_FLAT       0x39595</span>

<span class="cm">/* Dangerous */</span>
<span class="cp">#define R300_RE_POLYGON_MODE                  0x4288</span>
<span class="cp">#	define R300_PM_ENABLED                (1 &lt;&lt; 0)</span>
<span class="cp">#	define R300_PM_FRONT_POINT            (0 &lt;&lt; 0)</span>
<span class="cp">#	define R300_PM_BACK_POINT             (0 &lt;&lt; 0)</span>
<span class="cp">#	define R300_PM_FRONT_LINE             (1 &lt;&lt; 4)</span>
<span class="cp">#	define R300_PM_FRONT_FILL             (1 &lt;&lt; 5)</span>
<span class="cp">#	define R300_PM_BACK_LINE              (1 &lt;&lt; 7)</span>
<span class="cp">#	define R300_PM_BACK_FILL              (1 &lt;&lt; 8)</span>

<span class="cm">/* Fog parameters */</span>
<span class="cp">#define R300_RE_FOG_SCALE                     0x4294</span>
<span class="cp">#define R300_RE_FOG_START                     0x4298</span>

<span class="cm">/* Not sure why there are duplicate of factor and constant values.</span>
<span class="cm"> * My best guess so far is that there are separate zbiases for test and write.</span>
<span class="cm"> * Ordering might be wrong.</span>
<span class="cm"> * Some of the tests indicate that fgl has a fallback implementation of zbias</span>
<span class="cm"> * via pixel shaders.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_RE_ZBIAS_CNTL                    0x42A0 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#define R300_RE_ZBIAS_T_FACTOR                0x42A4</span>
<span class="cp">#define R300_RE_ZBIAS_T_CONSTANT              0x42A8</span>
<span class="cp">#define R300_RE_ZBIAS_W_FACTOR                0x42AC</span>
<span class="cp">#define R300_RE_ZBIAS_W_CONSTANT              0x42B0</span>

<span class="cm">/* This register needs to be set to (1&lt;&lt;1) for RV350 to correctly</span>
<span class="cm"> * perform depth test (see --vb-triangles in r300_demo)</span>
<span class="cm"> * Don&#39;t know about other chips. - Vladimir</span>
<span class="cm"> * This is set to 3 when GL_POLYGON_OFFSET_FILL is on.</span>
<span class="cm"> * My guess is that there are two bits for each zbias primitive</span>
<span class="cm"> * (FILL, LINE, POINT).</span>
<span class="cm"> *  One to enable depth test and one for depth write.</span>
<span class="cm"> * Yet this doesn&#39;t explain why depth writes work ...</span>
<span class="cm"> */</span>
<span class="cp">#define R300_RE_OCCLUSION_CNTL		    0x42B4</span>
<span class="cp">#	define R300_OCCLUSION_ON		(1&lt;&lt;1)</span>

<span class="cp">#define R300_RE_CULL_CNTL                   0x42B8</span>
<span class="cp">#       define R300_CULL_FRONT                   (1 &lt;&lt; 0)</span>
<span class="cp">#       define R300_CULL_BACK                    (1 &lt;&lt; 1)</span>
<span class="cp">#       define R300_FRONT_FACE_CCW               (0 &lt;&lt; 2)</span>
<span class="cp">#       define R300_FRONT_FACE_CW                (1 &lt;&lt; 2)</span>


<span class="cm">/* BEGIN: Rasterization / Interpolators - many guesses */</span>

<span class="cm">/* 0_UNKNOWN_18 has always been set except for clear operations.</span>
<span class="cm"> * TC_CNT is the number of incoming texture coordinate sets (i.e. it depends</span>
<span class="cm"> * on the vertex program, *not* the fragment program)</span>
<span class="cm"> */</span>
<span class="cp">#define R300_RS_CNTL_0                      0x4300</span>
<span class="cp">#       define R300_RS_CNTL_TC_CNT_SHIFT         2</span>
<span class="cp">#       define R300_RS_CNTL_TC_CNT_MASK          (7 &lt;&lt; 2)</span>
	<span class="cm">/* number of color interpolators used */</span>
<span class="cp">#	define R300_RS_CNTL_CI_CNT_SHIFT         7</span>
<span class="cp">#       define R300_RS_CNTL_0_UNKNOWN_18         (1 &lt;&lt; 18)</span>
	<span class="cm">/* Guess: RS_CNTL_1 holds the index of the highest used RS_ROUTE_n</span>
<span class="cm">	   register. */</span>
<span class="cp">#define R300_RS_CNTL_1                      0x4304</span>

<span class="cm">/* gap */</span>

<span class="cm">/* Only used for texture coordinates.</span>
<span class="cm"> * Use the source field to route texture coordinate input from the</span>
<span class="cm"> * vertex program to the desired interpolator. Note that the source</span>
<span class="cm"> * field is relative to the outputs the vertex program *actually*</span>
<span class="cm"> * writes. If a vertex program only writes texcoord[1], this will</span>
<span class="cm"> * be source index 0.</span>
<span class="cm"> * Set INTERP_USED on all interpolators that produce data used by</span>
<span class="cm"> * the fragment program. INTERP_USED looks like a swizzling mask,</span>
<span class="cm"> * but I haven&#39;t seen it used that way.</span>
<span class="cm"> *</span>
<span class="cm"> * Note: The _UNKNOWN constants are always set in their respective</span>
<span class="cm"> * register. I don&#39;t know if this is necessary.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_RS_INTERP_0                    0x4310</span>
<span class="cp">#define R300_RS_INTERP_1                    0x4314</span>
<span class="cp">#       define R300_RS_INTERP_1_UNKNOWN          0x40</span>
<span class="cp">#define R300_RS_INTERP_2                    0x4318</span>
<span class="cp">#       define R300_RS_INTERP_2_UNKNOWN          0x80</span>
<span class="cp">#define R300_RS_INTERP_3                    0x431C</span>
<span class="cp">#       define R300_RS_INTERP_3_UNKNOWN          0xC0</span>
<span class="cp">#define R300_RS_INTERP_4                    0x4320</span>
<span class="cp">#define R300_RS_INTERP_5                    0x4324</span>
<span class="cp">#define R300_RS_INTERP_6                    0x4328</span>
<span class="cp">#define R300_RS_INTERP_7                    0x432C</span>
<span class="cp">#       define R300_RS_INTERP_SRC_SHIFT          2</span>
<span class="cp">#       define R300_RS_INTERP_SRC_MASK           (7 &lt;&lt; 2)</span>
<span class="cp">#       define R300_RS_INTERP_USED               0x00D10000</span>

<span class="cm">/* These DWORDs control how vertex data is routed into fragment program</span>
<span class="cm"> * registers, after interpolators.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_RS_ROUTE_0                     0x4330</span>
<span class="cp">#define R300_RS_ROUTE_1                     0x4334</span>
<span class="cp">#define R300_RS_ROUTE_2                     0x4338</span>
<span class="cp">#define R300_RS_ROUTE_3                     0x433C </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#define R300_RS_ROUTE_4                     0x4340 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#define R300_RS_ROUTE_5                     0x4344 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#define R300_RS_ROUTE_6                     0x4348 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#define R300_RS_ROUTE_7                     0x434C </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_RS_ROUTE_SOURCE_INTERP_0     0</span>
<span class="cp">#       define R300_RS_ROUTE_SOURCE_INTERP_1     1</span>
<span class="cp">#       define R300_RS_ROUTE_SOURCE_INTERP_2     2</span>
<span class="cp">#       define R300_RS_ROUTE_SOURCE_INTERP_3     3</span>
<span class="cp">#       define R300_RS_ROUTE_SOURCE_INTERP_4     4</span>
<span class="cp">#       define R300_RS_ROUTE_SOURCE_INTERP_5     5 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_RS_ROUTE_SOURCE_INTERP_6     6 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_RS_ROUTE_SOURCE_INTERP_7     7 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_RS_ROUTE_ENABLE              (1 &lt;&lt; 3) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_RS_ROUTE_DEST_SHIFT          6</span>
<span class="cp">#       define R300_RS_ROUTE_DEST_MASK           (31 &lt;&lt; 6) </span><span class="cm">/* GUESS */</span><span class="cp"></span>

<span class="cm">/* Special handling for color: When the fragment program uses color,</span>
<span class="cm"> * the ROUTE_0_COLOR bit is set and ROUTE_0_COLOR_DEST contains the</span>
<span class="cm"> * color register index.</span>
<span class="cm"> *</span>
<span class="cm"> * Apperently you may set the R300_RS_ROUTE_0_COLOR bit, but not provide any</span>
<span class="cm"> * R300_RS_ROUTE_0_COLOR_DEST value; this setup is used for clearing the state.</span>
<span class="cm"> * See r300_ioctl.c:r300EmitClearState. I&#39;m not sure if this setup is strictly</span>
<span class="cm"> * correct or not. - Oliver.</span>
<span class="cm"> */</span>
<span class="cp">#       define R300_RS_ROUTE_0_COLOR             (1 &lt;&lt; 14)</span>
<span class="cp">#       define R300_RS_ROUTE_0_COLOR_DEST_SHIFT  17</span>
<span class="cp">#       define R300_RS_ROUTE_0_COLOR_DEST_MASK   (31 &lt;&lt; 17) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cm">/* As above, but for secondary color */</span>
<span class="cp">#		define R300_RS_ROUTE_1_COLOR1            (1 &lt;&lt; 14)</span>
<span class="cp">#		define R300_RS_ROUTE_1_COLOR1_DEST_SHIFT 17</span>
<span class="cp">#		define R300_RS_ROUTE_1_COLOR1_DEST_MASK  (31 &lt;&lt; 17)</span>
<span class="cp">#		define R300_RS_ROUTE_1_UNKNOWN11         (1 &lt;&lt; 11)</span>
<span class="cm">/* END: Rasterization / Interpolators - many guesses */</span>

<span class="cm">/* Hierarchical Z Enable */</span>
<span class="cp">#define R300_SC_HYPERZ                   0x43a4</span>
<span class="cp">#	define R300_SC_HYPERZ_DISABLE     (0 &lt;&lt; 0)</span>
<span class="cp">#	define R300_SC_HYPERZ_ENABLE      (1 &lt;&lt; 0)</span>
<span class="cp">#	define R300_SC_HYPERZ_MIN         (0 &lt;&lt; 1)</span>
<span class="cp">#	define R300_SC_HYPERZ_MAX         (1 &lt;&lt; 1)</span>
<span class="cp">#	define R300_SC_HYPERZ_ADJ_256     (0 &lt;&lt; 2)</span>
<span class="cp">#	define R300_SC_HYPERZ_ADJ_128     (1 &lt;&lt; 2)</span>
<span class="cp">#	define R300_SC_HYPERZ_ADJ_64      (2 &lt;&lt; 2)</span>
<span class="cp">#	define R300_SC_HYPERZ_ADJ_32      (3 &lt;&lt; 2)</span>
<span class="cp">#	define R300_SC_HYPERZ_ADJ_16      (4 &lt;&lt; 2)</span>
<span class="cp">#	define R300_SC_HYPERZ_ADJ_8       (5 &lt;&lt; 2)</span>
<span class="cp">#	define R300_SC_HYPERZ_ADJ_4       (6 &lt;&lt; 2)</span>
<span class="cp">#	define R300_SC_HYPERZ_ADJ_2       (7 &lt;&lt; 2)</span>
<span class="cp">#	define R300_SC_HYPERZ_HZ_Z0MIN_NO (0 &lt;&lt; 5)</span>
<span class="cp">#	define R300_SC_HYPERZ_HZ_Z0MIN    (1 &lt;&lt; 5)</span>
<span class="cp">#	define R300_SC_HYPERZ_HZ_Z0MAX_NO (0 &lt;&lt; 6)</span>
<span class="cp">#	define R300_SC_HYPERZ_HZ_Z0MAX    (1 &lt;&lt; 6)</span>

<span class="cp">#define R300_SC_EDGERULE                 0x43a8</span>

<span class="cm">/* BEGIN: Scissors and cliprects */</span>

<span class="cm">/* There are four clipping rectangles. Their corner coordinates are inclusive.</span>
<span class="cm"> * Every pixel is assigned a number from 0 and 15 by setting bits 0-3 depending</span>
<span class="cm"> * on whether the pixel is inside cliprects 0-3, respectively. For example,</span>
<span class="cm"> * if a pixel is inside cliprects 0 and 1, but outside 2 and 3, it is assigned</span>
<span class="cm"> * the number 3 (binary 0011).</span>
<span class="cm"> * Iff the bit corresponding to the pixel&#39;s number in RE_CLIPRECT_CNTL is set,</span>
<span class="cm"> * the pixel is rasterized.</span>
<span class="cm"> *</span>
<span class="cm"> * In addition to this, there is a scissors rectangle. Only pixels inside the</span>
<span class="cm"> * scissors rectangle are drawn. (coordinates are inclusive)</span>
<span class="cm"> *</span>
<span class="cm"> * For some reason, the top-left corner of the framebuffer is at (1440, 1440)</span>
<span class="cm"> * for the purpose of clipping and scissors.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_RE_CLIPRECT_TL_0               0x43B0</span>
<span class="cp">#define R300_RE_CLIPRECT_BR_0               0x43B4</span>
<span class="cp">#define R300_RE_CLIPRECT_TL_1               0x43B8</span>
<span class="cp">#define R300_RE_CLIPRECT_BR_1               0x43BC</span>
<span class="cp">#define R300_RE_CLIPRECT_TL_2               0x43C0</span>
<span class="cp">#define R300_RE_CLIPRECT_BR_2               0x43C4</span>
<span class="cp">#define R300_RE_CLIPRECT_TL_3               0x43C8</span>
<span class="cp">#define R300_RE_CLIPRECT_BR_3               0x43CC</span>
<span class="cp">#       define R300_CLIPRECT_OFFSET              1440</span>
<span class="cp">#       define R300_CLIPRECT_MASK                0x1FFF</span>
<span class="cp">#       define R300_CLIPRECT_X_SHIFT             0</span>
<span class="cp">#       define R300_CLIPRECT_X_MASK              (0x1FFF &lt;&lt; 0)</span>
<span class="cp">#       define R300_CLIPRECT_Y_SHIFT             13</span>
<span class="cp">#       define R300_CLIPRECT_Y_MASK              (0x1FFF &lt;&lt; 13)</span>
<span class="cp">#define R300_RE_CLIPRECT_CNTL               0x43D0</span>
<span class="cp">#       define R300_CLIP_OUT                     (1 &lt;&lt; 0)</span>
<span class="cp">#       define R300_CLIP_0                       (1 &lt;&lt; 1)</span>
<span class="cp">#       define R300_CLIP_1                       (1 &lt;&lt; 2)</span>
<span class="cp">#       define R300_CLIP_10                      (1 &lt;&lt; 3)</span>
<span class="cp">#       define R300_CLIP_2                       (1 &lt;&lt; 4)</span>
<span class="cp">#       define R300_CLIP_20                      (1 &lt;&lt; 5)</span>
<span class="cp">#       define R300_CLIP_21                      (1 &lt;&lt; 6)</span>
<span class="cp">#       define R300_CLIP_210                     (1 &lt;&lt; 7)</span>
<span class="cp">#       define R300_CLIP_3                       (1 &lt;&lt; 8)</span>
<span class="cp">#       define R300_CLIP_30                      (1 &lt;&lt; 9)</span>
<span class="cp">#       define R300_CLIP_31                      (1 &lt;&lt; 10)</span>
<span class="cp">#       define R300_CLIP_310                     (1 &lt;&lt; 11)</span>
<span class="cp">#       define R300_CLIP_32                      (1 &lt;&lt; 12)</span>
<span class="cp">#       define R300_CLIP_320                     (1 &lt;&lt; 13)</span>
<span class="cp">#       define R300_CLIP_321                     (1 &lt;&lt; 14)</span>
<span class="cp">#       define R300_CLIP_3210                    (1 &lt;&lt; 15)</span>

<span class="cm">/* gap */</span>

<span class="cp">#define R300_RE_SCISSORS_TL                 0x43E0</span>
<span class="cp">#define R300_RE_SCISSORS_BR                 0x43E4</span>
<span class="cp">#       define R300_SCISSORS_OFFSET              1440</span>
<span class="cp">#       define R300_SCISSORS_X_SHIFT             0</span>
<span class="cp">#       define R300_SCISSORS_X_MASK              (0x1FFF &lt;&lt; 0)</span>
<span class="cp">#       define R300_SCISSORS_Y_SHIFT             13</span>
<span class="cp">#       define R300_SCISSORS_Y_MASK              (0x1FFF &lt;&lt; 13)</span>
<span class="cm">/* END: Scissors and cliprects */</span>

<span class="cm">/* BEGIN: Texture specification */</span>

<span class="cm">/*</span>
<span class="cm"> * The texture specification dwords are grouped by meaning and not by texture</span>
<span class="cm"> * unit. This means that e.g. the offset for texture image unit N is found in</span>
<span class="cm"> * register TX_OFFSET_0 + (4*N)</span>
<span class="cm"> */</span>
<span class="cp">#define R300_TX_FILTER_0                    0x4400</span>
<span class="cp">#       define R300_TX_REPEAT                    0</span>
<span class="cp">#       define R300_TX_MIRRORED                  1</span>
<span class="cp">#       define R300_TX_CLAMP                     4</span>
<span class="cp">#       define R300_TX_CLAMP_TO_EDGE             2</span>
<span class="cp">#       define R300_TX_CLAMP_TO_BORDER           6</span>
<span class="cp">#       define R300_TX_WRAP_S_SHIFT              0</span>
<span class="cp">#       define R300_TX_WRAP_S_MASK               (7 &lt;&lt; 0)</span>
<span class="cp">#       define R300_TX_WRAP_T_SHIFT              3</span>
<span class="cp">#       define R300_TX_WRAP_T_MASK               (7 &lt;&lt; 3)</span>
<span class="cp">#       define R300_TX_WRAP_Q_SHIFT              6</span>
<span class="cp">#       define R300_TX_WRAP_Q_MASK               (7 &lt;&lt; 6)</span>
<span class="cp">#       define R300_TX_MAG_FILTER_NEAREST        (1 &lt;&lt; 9)</span>
<span class="cp">#       define R300_TX_MAG_FILTER_LINEAR         (2 &lt;&lt; 9)</span>
<span class="cp">#       define R300_TX_MAG_FILTER_MASK           (3 &lt;&lt; 9)</span>
<span class="cp">#       define R300_TX_MIN_FILTER_NEAREST        (1 &lt;&lt; 11)</span>
<span class="cp">#       define R300_TX_MIN_FILTER_LINEAR         (2 &lt;&lt; 11)</span>
<span class="cp">#	define R300_TX_MIN_FILTER_NEAREST_MIP_NEAREST       (5  &lt;&lt;  11)</span>
<span class="cp">#	define R300_TX_MIN_FILTER_NEAREST_MIP_LINEAR        (9  &lt;&lt;  11)</span>
<span class="cp">#	define R300_TX_MIN_FILTER_LINEAR_MIP_NEAREST        (6  &lt;&lt;  11)</span>
<span class="cp">#	define R300_TX_MIN_FILTER_LINEAR_MIP_LINEAR         (10 &lt;&lt;  11)</span>

<span class="cm">/* NOTE: NEAREST doesn&#39;t seem to exist.</span>
<span class="cm"> * Im not seting MAG_FILTER_MASK and (3 &lt;&lt; 11) on for all</span>
<span class="cm"> * anisotropy modes because that would void selected mag filter</span>
<span class="cm"> */</span>
<span class="cp">#	define R300_TX_MIN_FILTER_ANISO_NEAREST             (0 &lt;&lt; 13)</span>
<span class="cp">#	define R300_TX_MIN_FILTER_ANISO_LINEAR              (0 &lt;&lt; 13)</span>
<span class="cp">#	define R300_TX_MIN_FILTER_ANISO_NEAREST_MIP_NEAREST (1 &lt;&lt; 13)</span>
<span class="cp">#	define R300_TX_MIN_FILTER_ANISO_NEAREST_MIP_LINEAR  (2 &lt;&lt; 13)</span>
<span class="cp">#       define R300_TX_MIN_FILTER_MASK   ( (15 &lt;&lt; 11) | (3 &lt;&lt; 13) )</span>
<span class="cp">#	define R300_TX_MAX_ANISO_1_TO_1  (0 &lt;&lt; 21)</span>
<span class="cp">#	define R300_TX_MAX_ANISO_2_TO_1  (2 &lt;&lt; 21)</span>
<span class="cp">#	define R300_TX_MAX_ANISO_4_TO_1  (4 &lt;&lt; 21)</span>
<span class="cp">#	define R300_TX_MAX_ANISO_8_TO_1  (6 &lt;&lt; 21)</span>
<span class="cp">#	define R300_TX_MAX_ANISO_16_TO_1 (8 &lt;&lt; 21)</span>
<span class="cp">#	define R300_TX_MAX_ANISO_MASK    (14 &lt;&lt; 21)</span>

<span class="cp">#define R300_TX_FILTER1_0                      0x4440</span>
<span class="cp">#	define R300_CHROMA_KEY_MODE_DISABLE    0</span>
<span class="cp">#	define R300_CHROMA_KEY_FORCE	       1</span>
<span class="cp">#	define R300_CHROMA_KEY_BLEND           2</span>
<span class="cp">#	define R300_MC_ROUND_NORMAL            (0&lt;&lt;2)</span>
<span class="cp">#	define R300_MC_ROUND_MPEG4             (1&lt;&lt;2)</span>
<span class="cp">#	define R300_LOD_BIAS_MASK	    0x1fff</span>
<span class="cp">#	define R300_EDGE_ANISO_EDGE_DIAG       (0&lt;&lt;13)</span>
<span class="cp">#	define R300_EDGE_ANISO_EDGE_ONLY       (1&lt;&lt;13)</span>
<span class="cp">#	define R300_MC_COORD_TRUNCATE_DISABLE  (0&lt;&lt;14)</span>
<span class="cp">#	define R300_MC_COORD_TRUNCATE_MPEG     (1&lt;&lt;14)</span>
<span class="cp">#	define R300_TX_TRI_PERF_0_8            (0&lt;&lt;15)</span>
<span class="cp">#	define R300_TX_TRI_PERF_1_8            (1&lt;&lt;15)</span>
<span class="cp">#	define R300_TX_TRI_PERF_1_4            (2&lt;&lt;15)</span>
<span class="cp">#	define R300_TX_TRI_PERF_3_8            (3&lt;&lt;15)</span>
<span class="cp">#	define R300_ANISO_THRESHOLD_MASK       (7&lt;&lt;17)</span>

<span class="cp">#define R300_TX_SIZE_0                      0x4480</span>
<span class="cp">#       define R300_TX_WIDTHMASK_SHIFT           0</span>
<span class="cp">#       define R300_TX_WIDTHMASK_MASK            (2047 &lt;&lt; 0)</span>
<span class="cp">#       define R300_TX_HEIGHTMASK_SHIFT          11</span>
<span class="cp">#       define R300_TX_HEIGHTMASK_MASK           (2047 &lt;&lt; 11)</span>
<span class="cp">#       define R300_TX_UNK23                     (1 &lt;&lt; 23)</span>
<span class="cp">#       define R300_TX_MAX_MIP_LEVEL_SHIFT       26</span>
<span class="cp">#       define R300_TX_MAX_MIP_LEVEL_MASK        (0xf &lt;&lt; 26)</span>
<span class="cp">#       define R300_TX_SIZE_PROJECTED            (1&lt;&lt;30)</span>
<span class="cp">#       define R300_TX_SIZE_TXPITCH_EN           (1&lt;&lt;31)</span>
<span class="cp">#define R300_TX_FORMAT_0                    0x44C0</span>
	<span class="cm">/* The interpretation of the format word by Wladimir van der Laan */</span>
	<span class="cm">/* The X, Y, Z and W refer to the layout of the components.</span>
<span class="cm">	   They are given meanings as R, G, B and Alpha by the swizzle</span>
<span class="cm">	   specification */</span>
<span class="cp">#	define R300_TX_FORMAT_X8		    0x0</span>
<span class="cp">#	define R300_TX_FORMAT_X16		    0x1</span>
<span class="cp">#	define R300_TX_FORMAT_Y4X4		    0x2</span>
<span class="cp">#	define R300_TX_FORMAT_Y8X8		    0x3</span>
<span class="cp">#	define R300_TX_FORMAT_Y16X16		    0x4</span>
<span class="cp">#	define R300_TX_FORMAT_Z3Y3X2		    0x5</span>
<span class="cp">#	define R300_TX_FORMAT_Z5Y6X5		    0x6</span>
<span class="cp">#	define R300_TX_FORMAT_Z6Y5X5		    0x7</span>
<span class="cp">#	define R300_TX_FORMAT_Z11Y11X10		    0x8</span>
<span class="cp">#	define R300_TX_FORMAT_Z10Y11X11		    0x9</span>
<span class="cp">#	define R300_TX_FORMAT_W4Z4Y4X4		    0xA</span>
<span class="cp">#	define R300_TX_FORMAT_W1Z5Y5X5		    0xB</span>
<span class="cp">#	define R300_TX_FORMAT_W8Z8Y8X8		    0xC</span>
<span class="cp">#	define R300_TX_FORMAT_W2Z10Y10X10	    0xD</span>
<span class="cp">#	define R300_TX_FORMAT_W16Z16Y16X16	    0xE</span>
<span class="cp">#	define R300_TX_FORMAT_DXT1		    0xF</span>
<span class="cp">#	define R300_TX_FORMAT_DXT3		    0x10</span>
<span class="cp">#	define R300_TX_FORMAT_DXT5		    0x11</span>
<span class="cp">#	define R300_TX_FORMAT_D3DMFT_CxV8U8	    0x12     </span><span class="cm">/* no swizzle */</span><span class="cp"></span>
<span class="cp">#	define R300_TX_FORMAT_A8R8G8B8		    0x13     </span><span class="cm">/* no swizzle */</span><span class="cp"></span>
<span class="cp">#	define R300_TX_FORMAT_B8G8_B8G8		    0x14     </span><span class="cm">/* no swizzle */</span><span class="cp"></span>
<span class="cp">#	define R300_TX_FORMAT_G8R8_G8B8		    0x15     </span><span class="cm">/* no swizzle */</span><span class="cp"></span>
	<span class="cm">/* 0x16 - some 16 bit green format.. ?? */</span>
<span class="cp">#	define R300_TX_FORMAT_UNK25		   (1 &lt;&lt; 25) </span><span class="cm">/* no swizzle */</span><span class="cp"></span>
<span class="cp">#	define R300_TX_FORMAT_CUBIC_MAP		   (1 &lt;&lt; 26)</span>

	<span class="cm">/* gap */</span>
	<span class="cm">/* Floating point formats */</span>
	<span class="cm">/* Note - hardware supports both 16 and 32 bit floating point */</span>
<span class="cp">#	define R300_TX_FORMAT_FL_I16		    0x18</span>
<span class="cp">#	define R300_TX_FORMAT_FL_I16A16		    0x19</span>
<span class="cp">#	define R300_TX_FORMAT_FL_R16G16B16A16	    0x1A</span>
<span class="cp">#	define R300_TX_FORMAT_FL_I32		    0x1B</span>
<span class="cp">#	define R300_TX_FORMAT_FL_I32A32		    0x1C</span>
<span class="cp">#	define R300_TX_FORMAT_FL_R32G32B32A32	    0x1D</span>
<span class="cp">#	define R300_TX_FORMAT_ATI2N		    0x1F</span>
	<span class="cm">/* alpha modes, convenience mostly */</span>
	<span class="cm">/* if you have alpha, pick constant appropriate to the</span>
<span class="cm">	   number of channels (1 for I8, 2 for I8A8, 4 for R8G8B8A8, etc */</span>
<span class="cp">#	define R300_TX_FORMAT_ALPHA_1CH		    0x000</span>
<span class="cp">#	define R300_TX_FORMAT_ALPHA_2CH		    0x200</span>
<span class="cp">#	define R300_TX_FORMAT_ALPHA_4CH		    0x600</span>
<span class="cp">#	define R300_TX_FORMAT_ALPHA_NONE	    0xA00</span>
	<span class="cm">/* Swizzling */</span>
	<span class="cm">/* constants */</span>
<span class="cp">#	define R300_TX_FORMAT_X		0</span>
<span class="cp">#	define R300_TX_FORMAT_Y		1</span>
<span class="cp">#	define R300_TX_FORMAT_Z		2</span>
<span class="cp">#	define R300_TX_FORMAT_W		3</span>
<span class="cp">#	define R300_TX_FORMAT_ZERO	4</span>
<span class="cp">#	define R300_TX_FORMAT_ONE	5</span>
	<span class="cm">/* 2.0*Z, everything above 1.0 is set to 0.0 */</span>
<span class="cp">#	define R300_TX_FORMAT_CUT_Z	6</span>
	<span class="cm">/* 2.0*W, everything above 1.0 is set to 0.0 */</span>
<span class="cp">#	define R300_TX_FORMAT_CUT_W	7</span>

<span class="cp">#	define R300_TX_FORMAT_B_SHIFT	18</span>
<span class="cp">#	define R300_TX_FORMAT_G_SHIFT	15</span>
<span class="cp">#	define R300_TX_FORMAT_R_SHIFT	12</span>
<span class="cp">#	define R300_TX_FORMAT_A_SHIFT	9</span>
	<span class="cm">/* Convenience macro to take care of layout and swizzling */</span>
<span class="cp">#	define R300_EASY_TX_FORMAT(B, G, R, A, FMT)	(		\</span>
<span class="cp">		((R300_TX_FORMAT_##B)&lt;&lt;R300_TX_FORMAT_B_SHIFT)		\</span>
<span class="cp">		| ((R300_TX_FORMAT_##G)&lt;&lt;R300_TX_FORMAT_G_SHIFT)	\</span>
<span class="cp">		| ((R300_TX_FORMAT_##R)&lt;&lt;R300_TX_FORMAT_R_SHIFT)	\</span>
<span class="cp">		| ((R300_TX_FORMAT_##A)&lt;&lt;R300_TX_FORMAT_A_SHIFT)	\</span>
<span class="cp">		| (R300_TX_FORMAT_##FMT)				\</span>
<span class="cp">		)</span>
	<span class="cm">/* These can be ORed with result of R300_EASY_TX_FORMAT()</span>
<span class="cm">	   We don&#39;t really know what they do. Take values from a</span>
<span class="cm">           constant color ? */</span>
<span class="cp">#	define R300_TX_FORMAT_CONST_X		(1&lt;&lt;5)</span>
<span class="cp">#	define R300_TX_FORMAT_CONST_Y		(2&lt;&lt;5)</span>
<span class="cp">#	define R300_TX_FORMAT_CONST_Z		(4&lt;&lt;5)</span>
<span class="cp">#	define R300_TX_FORMAT_CONST_W		(8&lt;&lt;5)</span>

<span class="cp">#	define R300_TX_FORMAT_YUV_MODE		0x00800000</span>

<span class="cp">#define R300_TX_PITCH_0			    0x4500 </span><span class="cm">/* obvious missing in gap */</span><span class="cp"></span>
<span class="cp">#define R300_TX_OFFSET_0                    0x4540</span>
	<span class="cm">/* BEGIN: Guess from R200 */</span>
<span class="cp">#       define R300_TXO_ENDIAN_NO_SWAP           (0 &lt;&lt; 0)</span>
<span class="cp">#       define R300_TXO_ENDIAN_BYTE_SWAP         (1 &lt;&lt; 0)</span>
<span class="cp">#       define R300_TXO_ENDIAN_WORD_SWAP         (2 &lt;&lt; 0)</span>
<span class="cp">#       define R300_TXO_ENDIAN_HALFDW_SWAP       (3 &lt;&lt; 0)</span>
<span class="cp">#       define R300_TXO_MACRO_TILE               (1 &lt;&lt; 2)</span>
<span class="cp">#       define R300_TXO_MICRO_TILE               (1 &lt;&lt; 3)</span>
<span class="cp">#       define R300_TXO_MICRO_TILE_SQUARE        (2 &lt;&lt; 3)</span>
<span class="cp">#       define R300_TXO_OFFSET_MASK              0xffffffe0</span>
<span class="cp">#       define R300_TXO_OFFSET_SHIFT             5</span>
	<span class="cm">/* END: Guess from R200 */</span>

<span class="cm">/* 32 bit chroma key */</span>
<span class="cp">#define R300_TX_CHROMA_KEY_0                      0x4580</span>
<span class="cm">/* ff00ff00 == { 0, 1.0, 0, 1.0 } */</span>
<span class="cp">#define R300_TX_BORDER_COLOR_0              0x45C0</span>

<span class="cm">/* END: Texture specification */</span>

<span class="cm">/* BEGIN: Fragment program instruction set */</span>

<span class="cm">/* Fragment programs are written directly into register space.</span>
<span class="cm"> * There are separate instruction streams for texture instructions and ALU</span>
<span class="cm"> * instructions.</span>
<span class="cm"> * In order to synchronize these streams, the program is divided into up</span>
<span class="cm"> * to 4 nodes. Each node begins with a number of TEX operations, followed</span>
<span class="cm"> * by a number of ALU operations.</span>
<span class="cm"> * The first node can have zero TEX ops, all subsequent nodes must have at</span>
<span class="cm"> * least</span>
<span class="cm"> * one TEX ops.</span>
<span class="cm"> * All nodes must have at least one ALU op.</span>
<span class="cm"> *</span>
<span class="cm"> * The index of the last node is stored in PFS_CNTL_0: A value of 0 means</span>
<span class="cm"> * 1 node, a value of 3 means 4 nodes.</span>
<span class="cm"> * The total amount of instructions is defined in PFS_CNTL_2. The offsets are</span>
<span class="cm"> * offsets into the respective instruction streams, while *_END points to the</span>
<span class="cm"> * last instruction relative to this offset.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_PFS_CNTL_0                     0x4600</span>
<span class="cp">#       define R300_PFS_CNTL_LAST_NODES_SHIFT    0</span>
<span class="cp">#       define R300_PFS_CNTL_LAST_NODES_MASK     (3 &lt;&lt; 0)</span>
<span class="cp">#       define R300_PFS_CNTL_FIRST_NODE_HAS_TEX  (1 &lt;&lt; 3)</span>
<span class="cp">#define R300_PFS_CNTL_1                     0x4604</span>
<span class="cm">/* There is an unshifted value here which has so far always been equal to the</span>
<span class="cm"> * index of the highest used temporary register.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_PFS_CNTL_2                     0x4608</span>
<span class="cp">#       define R300_PFS_CNTL_ALU_OFFSET_SHIFT    0</span>
<span class="cp">#       define R300_PFS_CNTL_ALU_OFFSET_MASK     (63 &lt;&lt; 0)</span>
<span class="cp">#       define R300_PFS_CNTL_ALU_END_SHIFT       6</span>
<span class="cp">#       define R300_PFS_CNTL_ALU_END_MASK        (63 &lt;&lt; 6)</span>
<span class="cp">#       define R300_PFS_CNTL_TEX_OFFSET_SHIFT    12</span>
<span class="cp">#       define R300_PFS_CNTL_TEX_OFFSET_MASK     (31 &lt;&lt; 12) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_PFS_CNTL_TEX_END_SHIFT       18</span>
<span class="cp">#       define R300_PFS_CNTL_TEX_END_MASK        (31 &lt;&lt; 18) </span><span class="cm">/* GUESS */</span><span class="cp"></span>

<span class="cm">/* gap */</span>

<span class="cm">/* Nodes are stored backwards. The last active node is always stored in</span>
<span class="cm"> * PFS_NODE_3.</span>
<span class="cm"> * Example: In a 2-node program, NODE_0 and NODE_1 are set to 0. The</span>
<span class="cm"> * first node is stored in NODE_2, the second node is stored in NODE_3.</span>
<span class="cm"> *</span>
<span class="cm"> * Offsets are relative to the master offset from PFS_CNTL_2.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_PFS_NODE_0                     0x4610</span>
<span class="cp">#define R300_PFS_NODE_1                     0x4614</span>
<span class="cp">#define R300_PFS_NODE_2                     0x4618</span>
<span class="cp">#define R300_PFS_NODE_3                     0x461C</span>
<span class="cp">#       define R300_PFS_NODE_ALU_OFFSET_SHIFT    0</span>
<span class="cp">#       define R300_PFS_NODE_ALU_OFFSET_MASK     (63 &lt;&lt; 0)</span>
<span class="cp">#       define R300_PFS_NODE_ALU_END_SHIFT       6</span>
<span class="cp">#       define R300_PFS_NODE_ALU_END_MASK        (63 &lt;&lt; 6)</span>
<span class="cp">#       define R300_PFS_NODE_TEX_OFFSET_SHIFT    12</span>
<span class="cp">#       define R300_PFS_NODE_TEX_OFFSET_MASK     (31 &lt;&lt; 12)</span>
<span class="cp">#       define R300_PFS_NODE_TEX_END_SHIFT       17</span>
<span class="cp">#       define R300_PFS_NODE_TEX_END_MASK        (31 &lt;&lt; 17)</span>
<span class="cp">#		define R300_PFS_NODE_OUTPUT_COLOR        (1 &lt;&lt; 22)</span>
<span class="cp">#		define R300_PFS_NODE_OUTPUT_DEPTH        (1 &lt;&lt; 23)</span>

<span class="cm">/* TEX</span>
<span class="cm"> * As far as I can tell, texture instructions cannot write into output</span>
<span class="cm"> * registers directly. A subsequent ALU instruction is always necessary,</span>
<span class="cm"> * even if it&#39;s just MAD o0, r0, 1, 0</span>
<span class="cm"> */</span>
<span class="cp">#define R300_PFS_TEXI_0                     0x4620</span>
<span class="cp">#	define R300_FPITX_SRC_SHIFT              0</span>
<span class="cp">#	define R300_FPITX_SRC_MASK               (31 &lt;&lt; 0)</span>
	<span class="cm">/* GUESS */</span>
<span class="cp">#	define R300_FPITX_SRC_CONST              (1 &lt;&lt; 5)</span>
<span class="cp">#	define R300_FPITX_DST_SHIFT              6</span>
<span class="cp">#	define R300_FPITX_DST_MASK               (31 &lt;&lt; 6)</span>
<span class="cp">#	define R300_FPITX_IMAGE_SHIFT            11</span>
	<span class="cm">/* GUESS based on layout and native limits */</span>
<span class="cp">#       define R300_FPITX_IMAGE_MASK             (15 &lt;&lt; 11)</span>
<span class="cm">/* Unsure if these are opcodes, or some kind of bitfield, but this is how</span>
<span class="cm"> * they were set when I checked</span>
<span class="cm"> */</span>
<span class="cp">#	define R300_FPITX_OPCODE_SHIFT		15</span>
<span class="cp">#		define R300_FPITX_OP_TEX	1</span>
<span class="cp">#		define R300_FPITX_OP_KIL	2</span>
<span class="cp">#		define R300_FPITX_OP_TXP	3</span>
<span class="cp">#		define R300_FPITX_OP_TXB	4</span>
<span class="cp">#	define R300_FPITX_OPCODE_MASK           (7 &lt;&lt; 15)</span>

<span class="cm">/* ALU</span>
<span class="cm"> * The ALU instructions register blocks are enumerated according to the order</span>
<span class="cm"> * in which fglrx. I assume there is space for 64 instructions, since</span>
<span class="cm"> * each block has space for a maximum of 64 DWORDs, and this matches reported</span>
<span class="cm"> * native limits.</span>
<span class="cm"> *</span>
<span class="cm"> * The basic functional block seems to be one MAD for each color and alpha,</span>
<span class="cm"> * and an adder that adds all components after the MUL.</span>
<span class="cm"> *  - ADD, MUL, MAD etc.: use MAD with appropriate neutral operands</span>
<span class="cm"> *  - DP4: Use OUTC_DP4, OUTA_DP4</span>
<span class="cm"> *  - DP3: Use OUTC_DP3, OUTA_DP4, appropriate alpha operands</span>
<span class="cm"> *  - DPH: Use OUTC_DP4, OUTA_DP4, appropriate alpha operands</span>
<span class="cm"> *  - CMPH: If ARG2 &gt; 0.5, return ARG0, else return ARG1</span>
<span class="cm"> *  - CMP: If ARG2 &lt; 0, return ARG1, else return ARG0</span>
<span class="cm"> *  - FLR: use FRC+MAD</span>
<span class="cm"> *  - XPD: use MAD+MAD</span>
<span class="cm"> *  - SGE, SLT: use MAD+CMP</span>
<span class="cm"> *  - RSQ: use ABS modifier for argument</span>
<span class="cm"> *  - Use OUTC_REPL_ALPHA to write results of an alpha-only operation</span>
<span class="cm"> *    (e.g. RCP) into color register</span>
<span class="cm"> *  - apparently, there&#39;s no quick DST operation</span>
<span class="cm"> *  - fglrx set FPI2_UNKNOWN_31 on a &quot;MAD fragment.color, tmp0, tmp1, tmp2&quot;</span>
<span class="cm"> *  - fglrx set FPI2_UNKNOWN_31 on a &quot;MAX r2, r1, c0&quot;</span>
<span class="cm"> *  - fglrx once set FPI0_UNKNOWN_31 on a &quot;FRC r1, r1&quot;</span>
<span class="cm"> *</span>
<span class="cm"> * Operand selection</span>
<span class="cm"> * First stage selects three sources from the available registers and</span>
<span class="cm"> * constant parameters. This is defined in INSTR1 (color) and INSTR3 (alpha).</span>
<span class="cm"> * fglrx sorts the three source fields: Registers before constants,</span>
<span class="cm"> * lower indices before higher indices; I do not know whether this is</span>
<span class="cm"> * necessary.</span>
<span class="cm"> *</span>
<span class="cm"> * fglrx fills unused sources with &quot;read constant 0&quot;</span>
<span class="cm"> * According to specs, you cannot select more than two different constants.</span>
<span class="cm"> *</span>
<span class="cm"> * Second stage selects the operands from the sources. This is defined in</span>
<span class="cm"> * INSTR0 (color) and INSTR2 (alpha). You can also select the special constants</span>
<span class="cm"> * zero and one.</span>
<span class="cm"> * Swizzling and negation happens in this stage, as well.</span>
<span class="cm"> *</span>
<span class="cm"> * Important: Color and alpha seem to be mostly separate, i.e. their sources</span>
<span class="cm"> * selection appears to be fully independent (the register storage is probably</span>
<span class="cm"> * physically split into a color and an alpha section).</span>
<span class="cm"> * However (because of the apparent physical split), there is some interaction</span>
<span class="cm"> * WRT swizzling. If, for example, you want to load an R component into an</span>
<span class="cm"> * Alpha operand, this R component is taken from a *color* source, not from</span>
<span class="cm"> * an alpha source. The corresponding register doesn&#39;t even have to appear in</span>
<span class="cm"> * the alpha sources list. (I hope this all makes sense to you)</span>
<span class="cm"> *</span>
<span class="cm"> * Destination selection</span>
<span class="cm"> * The destination register index is in FPI1 (color) and FPI3 (alpha)</span>
<span class="cm"> * together with enable bits.</span>
<span class="cm"> * There are separate enable bits for writing into temporary registers</span>
<span class="cm"> * (DSTC_REG_* /DSTA_REG) and and program output registers (DSTC_OUTPUT_*</span>
<span class="cm"> * /DSTA_OUTPUT). You can write to both at once, or not write at all (the</span>
<span class="cm"> * same index must be used for both).</span>
<span class="cm"> *</span>
<span class="cm"> * Note: There is a special form for LRP</span>
<span class="cm"> *  - Argument order is the same as in ARB_fragment_program.</span>
<span class="cm"> *  - Operation is MAD</span>
<span class="cm"> *  - ARG1 is set to ARGC_SRC1C_LRP/ARGC_SRC1A_LRP</span>
<span class="cm"> *  - Set FPI0/FPI2_SPECIAL_LRP</span>
<span class="cm"> * Arbitrary LRP (including support for swizzling) requires vanilla MAD+MAD</span>
<span class="cm"> */</span>
<span class="cp">#define R300_PFS_INSTR1_0                   0x46C0</span>
<span class="cp">#       define R300_FPI1_SRC0C_SHIFT             0</span>
<span class="cp">#       define R300_FPI1_SRC0C_MASK              (31 &lt;&lt; 0)</span>
<span class="cp">#       define R300_FPI1_SRC0C_CONST             (1 &lt;&lt; 5)</span>
<span class="cp">#       define R300_FPI1_SRC1C_SHIFT             6</span>
<span class="cp">#       define R300_FPI1_SRC1C_MASK              (31 &lt;&lt; 6)</span>
<span class="cp">#       define R300_FPI1_SRC1C_CONST             (1 &lt;&lt; 11)</span>
<span class="cp">#       define R300_FPI1_SRC2C_SHIFT             12</span>
<span class="cp">#       define R300_FPI1_SRC2C_MASK              (31 &lt;&lt; 12)</span>
<span class="cp">#       define R300_FPI1_SRC2C_CONST             (1 &lt;&lt; 17)</span>
<span class="cp">#       define R300_FPI1_SRC_MASK                0x0003ffff</span>
<span class="cp">#       define R300_FPI1_DSTC_SHIFT              18</span>
<span class="cp">#       define R300_FPI1_DSTC_MASK               (31 &lt;&lt; 18)</span>
<span class="cp">#		define R300_FPI1_DSTC_REG_MASK_SHIFT     23</span>
<span class="cp">#       define R300_FPI1_DSTC_REG_X              (1 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI1_DSTC_REG_Y              (1 &lt;&lt; 24)</span>
<span class="cp">#       define R300_FPI1_DSTC_REG_Z              (1 &lt;&lt; 25)</span>
<span class="cp">#		define R300_FPI1_DSTC_OUTPUT_MASK_SHIFT  26</span>
<span class="cp">#       define R300_FPI1_DSTC_OUTPUT_X           (1 &lt;&lt; 26)</span>
<span class="cp">#       define R300_FPI1_DSTC_OUTPUT_Y           (1 &lt;&lt; 27)</span>
<span class="cp">#       define R300_FPI1_DSTC_OUTPUT_Z           (1 &lt;&lt; 28)</span>

<span class="cp">#define R300_PFS_INSTR3_0                   0x47C0</span>
<span class="cp">#       define R300_FPI3_SRC0A_SHIFT             0</span>
<span class="cp">#       define R300_FPI3_SRC0A_MASK              (31 &lt;&lt; 0)</span>
<span class="cp">#       define R300_FPI3_SRC0A_CONST             (1 &lt;&lt; 5)</span>
<span class="cp">#       define R300_FPI3_SRC1A_SHIFT             6</span>
<span class="cp">#       define R300_FPI3_SRC1A_MASK              (31 &lt;&lt; 6)</span>
<span class="cp">#       define R300_FPI3_SRC1A_CONST             (1 &lt;&lt; 11)</span>
<span class="cp">#       define R300_FPI3_SRC2A_SHIFT             12</span>
<span class="cp">#       define R300_FPI3_SRC2A_MASK              (31 &lt;&lt; 12)</span>
<span class="cp">#       define R300_FPI3_SRC2A_CONST             (1 &lt;&lt; 17)</span>
<span class="cp">#       define R300_FPI3_SRC_MASK                0x0003ffff</span>
<span class="cp">#       define R300_FPI3_DSTA_SHIFT              18</span>
<span class="cp">#       define R300_FPI3_DSTA_MASK               (31 &lt;&lt; 18)</span>
<span class="cp">#       define R300_FPI3_DSTA_REG                (1 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI3_DSTA_OUTPUT             (1 &lt;&lt; 24)</span>
<span class="cp">#		define R300_FPI3_DSTA_DEPTH              (1 &lt;&lt; 27)</span>

<span class="cp">#define R300_PFS_INSTR0_0                   0x48C0</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC0C_XYZ          0</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC0C_XXX          1</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC0C_YYY          2</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC0C_ZZZ          3</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC1C_XYZ          4</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC1C_XXX          5</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC1C_YYY          6</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC1C_ZZZ          7</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC2C_XYZ          8</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC2C_XXX          9</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC2C_YYY          10</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC2C_ZZZ          11</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC0A              12</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC1A              13</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC2A              14</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC1C_LRP          15</span>
<span class="cp">#       define R300_FPI0_ARGC_ZERO               20</span>
<span class="cp">#       define R300_FPI0_ARGC_ONE                21</span>
	<span class="cm">/* GUESS */</span>
<span class="cp">#       define R300_FPI0_ARGC_HALF               22</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC0C_YZX          23</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC1C_YZX          24</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC2C_YZX          25</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC0C_ZXY          26</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC1C_ZXY          27</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC2C_ZXY          28</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC0CA_WZY         29</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC1CA_WZY         30</span>
<span class="cp">#       define R300_FPI0_ARGC_SRC2CA_WZY         31</span>

<span class="cp">#       define R300_FPI0_ARG0C_SHIFT             0</span>
<span class="cp">#       define R300_FPI0_ARG0C_MASK              (31 &lt;&lt; 0)</span>
<span class="cp">#       define R300_FPI0_ARG0C_NEG               (1 &lt;&lt; 5)</span>
<span class="cp">#       define R300_FPI0_ARG0C_ABS               (1 &lt;&lt; 6)</span>
<span class="cp">#       define R300_FPI0_ARG1C_SHIFT             7</span>
<span class="cp">#       define R300_FPI0_ARG1C_MASK              (31 &lt;&lt; 7)</span>
<span class="cp">#       define R300_FPI0_ARG1C_NEG               (1 &lt;&lt; 12)</span>
<span class="cp">#       define R300_FPI0_ARG1C_ABS               (1 &lt;&lt; 13)</span>
<span class="cp">#       define R300_FPI0_ARG2C_SHIFT             14</span>
<span class="cp">#       define R300_FPI0_ARG2C_MASK              (31 &lt;&lt; 14)</span>
<span class="cp">#       define R300_FPI0_ARG2C_NEG               (1 &lt;&lt; 19)</span>
<span class="cp">#       define R300_FPI0_ARG2C_ABS               (1 &lt;&lt; 20)</span>
<span class="cp">#       define R300_FPI0_SPECIAL_LRP             (1 &lt;&lt; 21)</span>
<span class="cp">#       define R300_FPI0_OUTC_MAD                (0 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI0_OUTC_DP3                (1 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI0_OUTC_DP4                (2 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI0_OUTC_MIN                (4 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI0_OUTC_MAX                (5 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI0_OUTC_CMPH               (7 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI0_OUTC_CMP                (8 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI0_OUTC_FRC                (9 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI0_OUTC_REPL_ALPHA         (10 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI0_OUTC_SAT                (1 &lt;&lt; 30)</span>
<span class="cp">#       define R300_FPI0_INSERT_NOP              (1 &lt;&lt; 31)</span>

<span class="cp">#define R300_PFS_INSTR2_0                   0x49C0</span>
<span class="cp">#       define R300_FPI2_ARGA_SRC0C_X            0</span>
<span class="cp">#       define R300_FPI2_ARGA_SRC0C_Y            1</span>
<span class="cp">#       define R300_FPI2_ARGA_SRC0C_Z            2</span>
<span class="cp">#       define R300_FPI2_ARGA_SRC1C_X            3</span>
<span class="cp">#       define R300_FPI2_ARGA_SRC1C_Y            4</span>
<span class="cp">#       define R300_FPI2_ARGA_SRC1C_Z            5</span>
<span class="cp">#       define R300_FPI2_ARGA_SRC2C_X            6</span>
<span class="cp">#       define R300_FPI2_ARGA_SRC2C_Y            7</span>
<span class="cp">#       define R300_FPI2_ARGA_SRC2C_Z            8</span>
<span class="cp">#       define R300_FPI2_ARGA_SRC0A              9</span>
<span class="cp">#       define R300_FPI2_ARGA_SRC1A              10</span>
<span class="cp">#       define R300_FPI2_ARGA_SRC2A              11</span>
<span class="cp">#       define R300_FPI2_ARGA_SRC1A_LRP          15</span>
<span class="cp">#       define R300_FPI2_ARGA_ZERO               16</span>
<span class="cp">#       define R300_FPI2_ARGA_ONE                17</span>
	<span class="cm">/* GUESS */</span>
<span class="cp">#       define R300_FPI2_ARGA_HALF               18</span>
<span class="cp">#       define R300_FPI2_ARG0A_SHIFT             0</span>
<span class="cp">#       define R300_FPI2_ARG0A_MASK              (31 &lt;&lt; 0)</span>
<span class="cp">#       define R300_FPI2_ARG0A_NEG               (1 &lt;&lt; 5)</span>
	<span class="cm">/* GUESS */</span>
<span class="cp">#	define R300_FPI2_ARG0A_ABS		 (1 &lt;&lt; 6)</span>
<span class="cp">#       define R300_FPI2_ARG1A_SHIFT             7</span>
<span class="cp">#       define R300_FPI2_ARG1A_MASK              (31 &lt;&lt; 7)</span>
<span class="cp">#       define R300_FPI2_ARG1A_NEG               (1 &lt;&lt; 12)</span>
	<span class="cm">/* GUESS */</span>
<span class="cp">#	define R300_FPI2_ARG1A_ABS		 (1 &lt;&lt; 13)</span>
<span class="cp">#       define R300_FPI2_ARG2A_SHIFT             14</span>
<span class="cp">#       define R300_FPI2_ARG2A_MASK              (31 &lt;&lt; 14)</span>
<span class="cp">#       define R300_FPI2_ARG2A_NEG               (1 &lt;&lt; 19)</span>
	<span class="cm">/* GUESS */</span>
<span class="cp">#	define R300_FPI2_ARG2A_ABS		 (1 &lt;&lt; 20)</span>
<span class="cp">#       define R300_FPI2_SPECIAL_LRP             (1 &lt;&lt; 21)</span>
<span class="cp">#       define R300_FPI2_OUTA_MAD                (0 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI2_OUTA_DP4                (1 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI2_OUTA_MIN                (2 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI2_OUTA_MAX                (3 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI2_OUTA_CMP                (6 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI2_OUTA_FRC                (7 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI2_OUTA_EX2                (8 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI2_OUTA_LG2                (9 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI2_OUTA_RCP                (10 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI2_OUTA_RSQ                (11 &lt;&lt; 23)</span>
<span class="cp">#       define R300_FPI2_OUTA_SAT                (1 &lt;&lt; 30)</span>
<span class="cp">#       define R300_FPI2_UNKNOWN_31              (1 &lt;&lt; 31)</span>
<span class="cm">/* END: Fragment program instruction set */</span>

<span class="cm">/* Fog state and color */</span>
<span class="cp">#define R300_RE_FOG_STATE                   0x4BC0</span>
<span class="cp">#       define R300_FOG_ENABLE                   (1 &lt;&lt; 0)</span>
<span class="cp">#	define R300_FOG_MODE_LINEAR              (0 &lt;&lt; 1)</span>
<span class="cp">#	define R300_FOG_MODE_EXP                 (1 &lt;&lt; 1)</span>
<span class="cp">#	define R300_FOG_MODE_EXP2                (2 &lt;&lt; 1)</span>
<span class="cp">#	define R300_FOG_MODE_MASK                (3 &lt;&lt; 1)</span>
<span class="cp">#define R300_FOG_COLOR_R                    0x4BC8</span>
<span class="cp">#define R300_FOG_COLOR_G                    0x4BCC</span>
<span class="cp">#define R300_FOG_COLOR_B                    0x4BD0</span>

<span class="cp">#define R300_PP_ALPHA_TEST                  0x4BD4</span>
<span class="cp">#       define R300_REF_ALPHA_MASK               0x000000ff</span>
<span class="cp">#       define R300_ALPHA_TEST_FAIL              (0 &lt;&lt; 8)</span>
<span class="cp">#       define R300_ALPHA_TEST_LESS              (1 &lt;&lt; 8)</span>
<span class="cp">#       define R300_ALPHA_TEST_LEQUAL            (3 &lt;&lt; 8)</span>
<span class="cp">#       define R300_ALPHA_TEST_EQUAL             (2 &lt;&lt; 8)</span>
<span class="cp">#       define R300_ALPHA_TEST_GEQUAL            (6 &lt;&lt; 8)</span>
<span class="cp">#       define R300_ALPHA_TEST_GREATER           (4 &lt;&lt; 8)</span>
<span class="cp">#       define R300_ALPHA_TEST_NEQUAL            (5 &lt;&lt; 8)</span>
<span class="cp">#       define R300_ALPHA_TEST_PASS              (7 &lt;&lt; 8)</span>
<span class="cp">#       define R300_ALPHA_TEST_OP_MASK           (7 &lt;&lt; 8)</span>
<span class="cp">#       define R300_ALPHA_TEST_ENABLE            (1 &lt;&lt; 11)</span>

<span class="cm">/* gap */</span>

<span class="cm">/* Fragment program parameters in 7.16 floating point */</span>
<span class="cp">#define R300_PFS_PARAM_0_X                  0x4C00</span>
<span class="cp">#define R300_PFS_PARAM_0_Y                  0x4C04</span>
<span class="cp">#define R300_PFS_PARAM_0_Z                  0x4C08</span>
<span class="cp">#define R300_PFS_PARAM_0_W                  0x4C0C</span>
<span class="cm">/* GUESS: PARAM_31 is last, based on native limits reported by fglrx */</span>
<span class="cp">#define R300_PFS_PARAM_31_X                 0x4DF0</span>
<span class="cp">#define R300_PFS_PARAM_31_Y                 0x4DF4</span>
<span class="cp">#define R300_PFS_PARAM_31_Z                 0x4DF8</span>
<span class="cp">#define R300_PFS_PARAM_31_W                 0x4DFC</span>

<span class="cm">/* Notes:</span>
<span class="cm"> * - AFAIK fglrx always sets BLEND_UNKNOWN when blending is used in</span>
<span class="cm"> *   the application</span>
<span class="cm"> * - AFAIK fglrx always sets BLEND_NO_SEPARATE when CBLEND and ABLEND</span>
<span class="cm"> *    are set to the same</span>
<span class="cm"> *   function (both registers are always set up completely in any case)</span>
<span class="cm"> * - Most blend flags are simply copied from R200 and not tested yet</span>
<span class="cm"> */</span>
<span class="cp">#define R300_RB3D_CBLEND                    0x4E04</span>
<span class="cp">#define R300_RB3D_ABLEND                    0x4E08</span>
<span class="cm">/* the following only appear in CBLEND */</span>
<span class="cp">#       define R300_BLEND_ENABLE                     (1 &lt;&lt; 0)</span>
<span class="cp">#       define R300_BLEND_UNKNOWN                    (3 &lt;&lt; 1)</span>
<span class="cp">#       define R300_BLEND_NO_SEPARATE                (1 &lt;&lt; 3)</span>
<span class="cm">/* the following are shared between CBLEND and ABLEND */</span>
<span class="cp">#       define R300_FCN_MASK                         (3  &lt;&lt; 12)</span>
<span class="cp">#       define R300_COMB_FCN_ADD_CLAMP               (0  &lt;&lt; 12)</span>
<span class="cp">#       define R300_COMB_FCN_ADD_NOCLAMP             (1  &lt;&lt; 12)</span>
<span class="cp">#       define R300_COMB_FCN_SUB_CLAMP               (2  &lt;&lt; 12)</span>
<span class="cp">#       define R300_COMB_FCN_SUB_NOCLAMP             (3  &lt;&lt; 12)</span>
<span class="cp">#       define R300_COMB_FCN_MIN                     (4  &lt;&lt; 12)</span>
<span class="cp">#       define R300_COMB_FCN_MAX                     (5  &lt;&lt; 12)</span>
<span class="cp">#       define R300_COMB_FCN_RSUB_CLAMP              (6  &lt;&lt; 12)</span>
<span class="cp">#       define R300_COMB_FCN_RSUB_NOCLAMP            (7  &lt;&lt; 12)</span>
<span class="cp">#       define R300_BLEND_GL_ZERO                    (32)</span>
<span class="cp">#       define R300_BLEND_GL_ONE                     (33)</span>
<span class="cp">#       define R300_BLEND_GL_SRC_COLOR               (34)</span>
<span class="cp">#       define R300_BLEND_GL_ONE_MINUS_SRC_COLOR     (35)</span>
<span class="cp">#       define R300_BLEND_GL_DST_COLOR               (36)</span>
<span class="cp">#       define R300_BLEND_GL_ONE_MINUS_DST_COLOR     (37)</span>
<span class="cp">#       define R300_BLEND_GL_SRC_ALPHA               (38)</span>
<span class="cp">#       define R300_BLEND_GL_ONE_MINUS_SRC_ALPHA     (39)</span>
<span class="cp">#       define R300_BLEND_GL_DST_ALPHA               (40)</span>
<span class="cp">#       define R300_BLEND_GL_ONE_MINUS_DST_ALPHA     (41)</span>
<span class="cp">#       define R300_BLEND_GL_SRC_ALPHA_SATURATE      (42)</span>
<span class="cp">#       define R300_BLEND_GL_CONST_COLOR             (43)</span>
<span class="cp">#       define R300_BLEND_GL_ONE_MINUS_CONST_COLOR   (44)</span>
<span class="cp">#       define R300_BLEND_GL_CONST_ALPHA             (45)</span>
<span class="cp">#       define R300_BLEND_GL_ONE_MINUS_CONST_ALPHA   (46)</span>
<span class="cp">#       define R300_BLEND_MASK                       (63)</span>
<span class="cp">#       define R300_SRC_BLEND_SHIFT                  (16)</span>
<span class="cp">#       define R300_DST_BLEND_SHIFT                  (24)</span>
<span class="cp">#define R300_RB3D_BLEND_COLOR               0x4E10</span>
<span class="cp">#define R300_RB3D_COLORMASK                 0x4E0C</span>
<span class="cp">#       define R300_COLORMASK0_B                 (1&lt;&lt;0)</span>
<span class="cp">#       define R300_COLORMASK0_G                 (1&lt;&lt;1)</span>
<span class="cp">#       define R300_COLORMASK0_R                 (1&lt;&lt;2)</span>
<span class="cp">#       define R300_COLORMASK0_A                 (1&lt;&lt;3)</span>

<span class="cm">/* gap */</span>

<span class="cp">#define R300_RB3D_COLOROFFSET0              0x4E28</span>
<span class="cp">#       define R300_COLOROFFSET_MASK             0xFFFFFFF0 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#define R300_RB3D_COLOROFFSET1              0x4E2C </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#define R300_RB3D_COLOROFFSET2              0x4E30 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#define R300_RB3D_COLOROFFSET3              0x4E34 </span><span class="cm">/* GUESS */</span><span class="cp"></span>

<span class="cm">/* gap */</span>

<span class="cm">/* Bit 16: Larger tiles</span>
<span class="cm"> * Bit 17: 4x2 tiles</span>
<span class="cm"> * Bit 18: Extremely weird tile like, but some pixels duplicated?</span>
<span class="cm"> */</span>
<span class="cp">#define R300_RB3D_COLORPITCH0               0x4E38</span>
<span class="cp">#       define R300_COLORPITCH_MASK              0x00001FF8 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_COLOR_TILE_ENABLE            (1 &lt;&lt; 16) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_COLOR_MICROTILE_ENABLE       (1 &lt;&lt; 17) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_COLOR_MICROTILE_SQUARE_ENABLE (2 &lt;&lt; 17)</span>
<span class="cp">#       define R300_COLOR_ENDIAN_NO_SWAP         (0 &lt;&lt; 18) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_COLOR_ENDIAN_WORD_SWAP       (1 &lt;&lt; 18) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_COLOR_ENDIAN_DWORD_SWAP      (2 &lt;&lt; 18) </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#       define R300_COLOR_FORMAT_RGB565          (2 &lt;&lt; 22)</span>
<span class="cp">#       define R300_COLOR_FORMAT_ARGB8888        (3 &lt;&lt; 22)</span>
<span class="cp">#define R300_RB3D_COLORPITCH1               0x4E3C </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#define R300_RB3D_COLORPITCH2               0x4E40 </span><span class="cm">/* GUESS */</span><span class="cp"></span>
<span class="cp">#define R300_RB3D_COLORPITCH3               0x4E44 </span><span class="cm">/* GUESS */</span><span class="cp"></span>

<span class="cp">#define R300_RB3D_AARESOLVE_OFFSET          0x4E80</span>
<span class="cp">#define R300_RB3D_AARESOLVE_PITCH           0x4E84</span>
<span class="cp">#define R300_RB3D_AARESOLVE_CTL             0x4E88</span>
<span class="cm">/* gap */</span>

<span class="cm">/* Guess by Vladimir.</span>
<span class="cm"> * Set to 0A before 3D operations, set to 02 afterwards.</span>
<span class="cm"> */</span>
<span class="cm">/*#define R300_RB3D_DSTCACHE_CTLSTAT          0x4E4C*/</span>
<span class="cp">#       define R300_RB3D_DSTCACHE_UNKNOWN_02             0x00000002</span>
<span class="cp">#       define R300_RB3D_DSTCACHE_UNKNOWN_0A             0x0000000A</span>

<span class="cm">/* gap */</span>
<span class="cm">/* There seems to be no &quot;write only&quot; setting, so use Z-test = ALWAYS</span>
<span class="cm"> * for this.</span>
<span class="cm"> * Bit (1&lt;&lt;8) is the &quot;test&quot; bit. so plain write is 6  - vd</span>
<span class="cm"> */</span>
<span class="cp">#define R300_ZB_CNTL                             0x4F00</span>
<span class="cp">#	define R300_STENCIL_ENABLE		 (1 &lt;&lt; 0)</span>
<span class="cp">#	define R300_Z_ENABLE		         (1 &lt;&lt; 1)</span>
<span class="cp">#	define R300_Z_WRITE_ENABLE		 (1 &lt;&lt; 2)</span>
<span class="cp">#	define R300_Z_SIGNED_COMPARE		 (1 &lt;&lt; 3)</span>
<span class="cp">#	define R300_STENCIL_FRONT_BACK		 (1 &lt;&lt; 4)</span>

<span class="cp">#define R300_ZB_ZSTENCILCNTL                   0x4f04</span>
	<span class="cm">/* functions */</span>
<span class="cp">#	define R300_ZS_NEVER			0</span>
<span class="cp">#	define R300_ZS_LESS			1</span>
<span class="cp">#	define R300_ZS_LEQUAL			2</span>
<span class="cp">#	define R300_ZS_EQUAL			3</span>
<span class="cp">#	define R300_ZS_GEQUAL			4</span>
<span class="cp">#	define R300_ZS_GREATER			5</span>
<span class="cp">#	define R300_ZS_NOTEQUAL			6</span>
<span class="cp">#	define R300_ZS_ALWAYS			7</span>
<span class="cp">#       define R300_ZS_MASK                     7</span>
	<span class="cm">/* operations */</span>
<span class="cp">#	define R300_ZS_KEEP			0</span>
<span class="cp">#	define R300_ZS_ZERO			1</span>
<span class="cp">#	define R300_ZS_REPLACE			2</span>
<span class="cp">#	define R300_ZS_INCR			3</span>
<span class="cp">#	define R300_ZS_DECR			4</span>
<span class="cp">#	define R300_ZS_INVERT			5</span>
<span class="cp">#	define R300_ZS_INCR_WRAP		6</span>
<span class="cp">#	define R300_ZS_DECR_WRAP		7</span>
<span class="cp">#	define R300_Z_FUNC_SHIFT		0</span>
	<span class="cm">/* front and back refer to operations done for front</span>
<span class="cm">	   and back faces, i.e. separate stencil function support */</span>
<span class="cp">#	define R300_S_FRONT_FUNC_SHIFT	        3</span>
<span class="cp">#	define R300_S_FRONT_SFAIL_OP_SHIFT	6</span>
<span class="cp">#	define R300_S_FRONT_ZPASS_OP_SHIFT	9</span>
<span class="cp">#	define R300_S_FRONT_ZFAIL_OP_SHIFT      12</span>
<span class="cp">#	define R300_S_BACK_FUNC_SHIFT           15</span>
<span class="cp">#	define R300_S_BACK_SFAIL_OP_SHIFT       18</span>
<span class="cp">#	define R300_S_BACK_ZPASS_OP_SHIFT       21</span>
<span class="cp">#	define R300_S_BACK_ZFAIL_OP_SHIFT       24</span>

<span class="cp">#define R300_ZB_STENCILREFMASK                        0x4f08</span>
<span class="cp">#	define R300_STENCILREF_SHIFT       0</span>
<span class="cp">#	define R300_STENCILREF_MASK        0x000000ff</span>
<span class="cp">#	define R300_STENCILMASK_SHIFT      8</span>
<span class="cp">#	define R300_STENCILMASK_MASK       0x0000ff00</span>
<span class="cp">#	define R300_STENCILWRITEMASK_SHIFT 16</span>
<span class="cp">#	define R300_STENCILWRITEMASK_MASK  0x00ff0000</span>

<span class="cm">/* gap */</span>

<span class="cp">#define R300_ZB_FORMAT                             0x4f10</span>
<span class="cp">#	define R300_DEPTHFORMAT_16BIT_INT_Z   (0 &lt;&lt; 0)</span>
<span class="cp">#	define R300_DEPTHFORMAT_16BIT_13E3    (1 &lt;&lt; 0)</span>
<span class="cp">#	define R300_DEPTHFORMAT_24BIT_INT_Z_8BIT_STENCIL   (2 &lt;&lt; 0)</span>
<span class="cm">/* reserved up to (15 &lt;&lt; 0) */</span>
<span class="cp">#	define R300_INVERT_13E3_LEADING_ONES  (0 &lt;&lt; 4)</span>
<span class="cp">#	define R300_INVERT_13E3_LEADING_ZEROS (1 &lt;&lt; 4)</span>

<span class="cp">#define R300_ZB_ZTOP                             0x4F14</span>
<span class="cp">#	define R300_ZTOP_DISABLE                 (0 &lt;&lt; 0)</span>
<span class="cp">#	define R300_ZTOP_ENABLE                  (1 &lt;&lt; 0)</span>

<span class="cm">/* gap */</span>

<span class="cp">#define R300_ZB_ZCACHE_CTLSTAT            0x4f18</span>
<span class="cp">#       define R300_ZB_ZCACHE_CTLSTAT_ZC_FLUSH_NO_EFFECT      (0 &lt;&lt; 0)</span>
<span class="cp">#       define R300_ZB_ZCACHE_CTLSTAT_ZC_FLUSH_FLUSH_AND_FREE (1 &lt;&lt; 0)</span>
<span class="cp">#       define R300_ZB_ZCACHE_CTLSTAT_ZC_FREE_NO_EFFECT       (0 &lt;&lt; 1)</span>
<span class="cp">#       define R300_ZB_ZCACHE_CTLSTAT_ZC_FREE_FREE            (1 &lt;&lt; 1)</span>
<span class="cp">#       define R300_ZB_ZCACHE_CTLSTAT_ZC_BUSY_IDLE            (0 &lt;&lt; 31)</span>
<span class="cp">#       define R300_ZB_ZCACHE_CTLSTAT_ZC_BUSY_BUSY            (1 &lt;&lt; 31)</span>

<span class="cp">#define R300_ZB_BW_CNTL                     0x4f1c</span>
<span class="cp">#	define R300_HIZ_DISABLE                              (0 &lt;&lt; 0)</span>
<span class="cp">#	define R300_HIZ_ENABLE                               (1 &lt;&lt; 0)</span>
<span class="cp">#	define R300_HIZ_MIN                                  (0 &lt;&lt; 1)</span>
<span class="cp">#	define R300_HIZ_MAX                                  (1 &lt;&lt; 1)</span>
<span class="cp">#	define R300_FAST_FILL_DISABLE                        (0 &lt;&lt; 2)</span>
<span class="cp">#	define R300_FAST_FILL_ENABLE                         (1 &lt;&lt; 2)</span>
<span class="cp">#	define R300_RD_COMP_DISABLE                          (0 &lt;&lt; 3)</span>
<span class="cp">#	define R300_RD_COMP_ENABLE                           (1 &lt;&lt; 3)</span>
<span class="cp">#	define R300_WR_COMP_DISABLE                          (0 &lt;&lt; 4)</span>
<span class="cp">#	define R300_WR_COMP_ENABLE                           (1 &lt;&lt; 4)</span>
<span class="cp">#	define R300_ZB_CB_CLEAR_RMW                          (0 &lt;&lt; 5)</span>
<span class="cp">#	define R300_ZB_CB_CLEAR_CACHE_LINEAR                 (1 &lt;&lt; 5)</span>
<span class="cp">#	define R300_FORCE_COMPRESSED_STENCIL_VALUE_DISABLE   (0 &lt;&lt; 6)</span>
<span class="cp">#	define R300_FORCE_COMPRESSED_STENCIL_VALUE_ENABLE    (1 &lt;&lt; 6)</span>

<span class="cp">#	define R500_ZEQUAL_OPTIMIZE_ENABLE                   (0 &lt;&lt; 7)</span>
<span class="cp">#	define R500_ZEQUAL_OPTIMIZE_DISABLE                  (1 &lt;&lt; 7)</span>
<span class="cp">#	define R500_SEQUAL_OPTIMIZE_ENABLE                   (0 &lt;&lt; 8)</span>
<span class="cp">#	define R500_SEQUAL_OPTIMIZE_DISABLE                  (1 &lt;&lt; 8)</span>

<span class="cp">#	define R500_BMASK_ENABLE                             (0 &lt;&lt; 10)</span>
<span class="cp">#	define R500_BMASK_DISABLE                            (1 &lt;&lt; 10)</span>
<span class="cp">#	define R500_HIZ_EQUAL_REJECT_DISABLE                 (0 &lt;&lt; 11)</span>
<span class="cp">#	define R500_HIZ_EQUAL_REJECT_ENABLE                  (1 &lt;&lt; 11)</span>
<span class="cp">#	define R500_HIZ_FP_EXP_BITS_DISABLE                  (0 &lt;&lt; 12)</span>
<span class="cp">#	define R500_HIZ_FP_EXP_BITS_1                        (1 &lt;&lt; 12)</span>
<span class="cp">#	define R500_HIZ_FP_EXP_BITS_2                        (2 &lt;&lt; 12)</span>
<span class="cp">#	define R500_HIZ_FP_EXP_BITS_3                        (3 &lt;&lt; 12)</span>
<span class="cp">#	define R500_HIZ_FP_EXP_BITS_4                        (4 &lt;&lt; 12)</span>
<span class="cp">#	define R500_HIZ_FP_EXP_BITS_5                        (5 &lt;&lt; 12)</span>
<span class="cp">#	define R500_HIZ_FP_INVERT_LEADING_ONES               (0 &lt;&lt; 15)</span>
<span class="cp">#	define R500_HIZ_FP_INVERT_LEADING_ZEROS              (1 &lt;&lt; 15)</span>
<span class="cp">#	define R500_TILE_OVERWRITE_RECOMPRESSION_ENABLE      (0 &lt;&lt; 16)</span>
<span class="cp">#	define R500_TILE_OVERWRITE_RECOMPRESSION_DISABLE     (1 &lt;&lt; 16)</span>
<span class="cp">#	define R500_CONTIGUOUS_6XAA_SAMPLES_ENABLE           (0 &lt;&lt; 17)</span>
<span class="cp">#	define R500_CONTIGUOUS_6XAA_SAMPLES_DISABLE          (1 &lt;&lt; 17)</span>
<span class="cp">#	define R500_PEQ_PACKING_DISABLE                      (0 &lt;&lt; 18)</span>
<span class="cp">#	define R500_PEQ_PACKING_ENABLE                       (1 &lt;&lt; 18)</span>
<span class="cp">#	define R500_COVERED_PTR_MASKING_DISABLE              (0 &lt;&lt; 18)</span>
<span class="cp">#	define R500_COVERED_PTR_MASKING_ENABLE               (1 &lt;&lt; 18)</span>


<span class="cm">/* gap */</span>

<span class="cm">/* Z Buffer Address Offset.</span>
<span class="cm"> * Bits 31 to 5 are used for aligned Z buffer address offset for macro tiles.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_ZB_DEPTHOFFSET               0x4f20</span>

<span class="cm">/* Z Buffer Pitch and Endian Control */</span>
<span class="cp">#define R300_ZB_DEPTHPITCH                0x4f24</span>
<span class="cp">#       define R300_DEPTHPITCH_MASK              0x00003FFC</span>
<span class="cp">#       define R300_DEPTHMACROTILE_DISABLE      (0 &lt;&lt; 16)</span>
<span class="cp">#       define R300_DEPTHMACROTILE_ENABLE       (1 &lt;&lt; 16)</span>
<span class="cp">#       define R300_DEPTHMICROTILE_LINEAR       (0 &lt;&lt; 17)</span>
<span class="cp">#       define R300_DEPTHMICROTILE_TILED        (1 &lt;&lt; 17)</span>
<span class="cp">#       define R300_DEPTHMICROTILE_TILED_SQUARE (2 &lt;&lt; 17)</span>
<span class="cp">#       define R300_DEPTHENDIAN_NO_SWAP         (0 &lt;&lt; 18)</span>
<span class="cp">#       define R300_DEPTHENDIAN_WORD_SWAP       (1 &lt;&lt; 18)</span>
<span class="cp">#       define R300_DEPTHENDIAN_DWORD_SWAP      (2 &lt;&lt; 18)</span>
<span class="cp">#       define R300_DEPTHENDIAN_HALF_DWORD_SWAP (3 &lt;&lt; 18)</span>

<span class="cm">/* Z Buffer Clear Value */</span>
<span class="cp">#define R300_ZB_DEPTHCLEARVALUE                  0x4f28</span>

<span class="cp">#define R300_ZB_ZMASK_OFFSET			 0x4f30</span>
<span class="cp">#define R300_ZB_ZMASK_PITCH			 0x4f34</span>
<span class="cp">#define R300_ZB_ZMASK_WRINDEX			 0x4f38</span>
<span class="cp">#define R300_ZB_ZMASK_DWORD			 0x4f3c</span>
<span class="cp">#define R300_ZB_ZMASK_RDINDEX			 0x4f40</span>

<span class="cm">/* Hierarchical Z Memory Offset */</span>
<span class="cp">#define R300_ZB_HIZ_OFFSET                       0x4f44</span>

<span class="cm">/* Hierarchical Z Write Index */</span>
<span class="cp">#define R300_ZB_HIZ_WRINDEX                      0x4f48</span>

<span class="cm">/* Hierarchical Z Data */</span>
<span class="cp">#define R300_ZB_HIZ_DWORD                        0x4f4c</span>

<span class="cm">/* Hierarchical Z Read Index */</span>
<span class="cp">#define R300_ZB_HIZ_RDINDEX                      0x4f50</span>

<span class="cm">/* Hierarchical Z Pitch */</span>
<span class="cp">#define R300_ZB_HIZ_PITCH                        0x4f54</span>

<span class="cm">/* Z Buffer Z Pass Counter Data */</span>
<span class="cp">#define R300_ZB_ZPASS_DATA                       0x4f58</span>

<span class="cm">/* Z Buffer Z Pass Counter Address */</span>
<span class="cp">#define R300_ZB_ZPASS_ADDR                       0x4f5c</span>

<span class="cm">/* Depth buffer X and Y coordinate offset */</span>
<span class="cp">#define R300_ZB_DEPTHXY_OFFSET                   0x4f60</span>
<span class="cp">#	define R300_DEPTHX_OFFSET_SHIFT  1</span>
<span class="cp">#	define R300_DEPTHX_OFFSET_MASK   0x000007FE</span>
<span class="cp">#	define R300_DEPTHY_OFFSET_SHIFT  17</span>
<span class="cp">#	define R300_DEPTHY_OFFSET_MASK   0x07FE0000</span>

<span class="cm">/* Sets the fifo sizes */</span>
<span class="cp">#define R500_ZB_FIFO_SIZE                        0x4fd0</span>
<span class="cp">#	define R500_OP_FIFO_SIZE_FULL   (0 &lt;&lt; 0)</span>
<span class="cp">#	define R500_OP_FIFO_SIZE_HALF   (1 &lt;&lt; 0)</span>
<span class="cp">#	define R500_OP_FIFO_SIZE_QUATER (2 &lt;&lt; 0)</span>
<span class="cp">#	define R500_OP_FIFO_SIZE_EIGTHS (4 &lt;&lt; 0)</span>

<span class="cm">/* Stencil Reference Value and Mask for backfacing quads */</span>
<span class="cm">/* R300_ZB_STENCILREFMASK handles front face */</span>
<span class="cp">#define R500_ZB_STENCILREFMASK_BF                0x4fd4</span>
<span class="cp">#	define R500_STENCILREF_SHIFT       0</span>
<span class="cp">#	define R500_STENCILREF_MASK        0x000000ff</span>
<span class="cp">#	define R500_STENCILMASK_SHIFT      8</span>
<span class="cp">#	define R500_STENCILMASK_MASK       0x0000ff00</span>
<span class="cp">#	define R500_STENCILWRITEMASK_SHIFT 16</span>
<span class="cp">#	define R500_STENCILWRITEMASK_MASK  0x00ff0000</span>

<span class="cm">/* BEGIN: Vertex program instruction set */</span>

<span class="cm">/* Every instruction is four dwords long:</span>
<span class="cm"> *  DWORD 0: output and opcode</span>
<span class="cm"> *  DWORD 1: first argument</span>
<span class="cm"> *  DWORD 2: second argument</span>
<span class="cm"> *  DWORD 3: third argument</span>
<span class="cm"> *</span>
<span class="cm"> * Notes:</span>
<span class="cm"> *  - ABS r, a is implemented as MAX r, a, -a</span>
<span class="cm"> *  - MOV is implemented as ADD to zero</span>
<span class="cm"> *  - XPD is implemented as MUL + MAD</span>
<span class="cm"> *  - FLR is implemented as FRC + ADD</span>
<span class="cm"> *  - apparently, fglrx tries to schedule instructions so that there is at</span>
<span class="cm"> *    least one instruction between the write to a temporary and the first</span>
<span class="cm"> *    read from said temporary; however, violations of this scheduling are</span>
<span class="cm"> *    allowed</span>
<span class="cm"> *  - register indices seem to be unrelated with OpenGL aliasing to</span>
<span class="cm"> *    conventional state</span>
<span class="cm"> *  - only one attribute and one parameter can be loaded at a time; however,</span>
<span class="cm"> *    the same attribute/parameter can be used for more than one argument</span>
<span class="cm"> *  - the second software argument for POW is the third hardware argument</span>
<span class="cm"> *    (no idea why)</span>
<span class="cm"> *  - MAD with only temporaries as input seems to use VPI_OUT_SELECT_MAD_2</span>
<span class="cm"> *</span>
<span class="cm"> * There is some magic surrounding LIT:</span>
<span class="cm"> *   The single argument is replicated across all three inputs, but swizzled:</span>
<span class="cm"> *     First argument: xyzy</span>
<span class="cm"> *     Second argument: xyzx</span>
<span class="cm"> *     Third argument: xyzw</span>
<span class="cm"> *   Whenever the result is used later in the fragment program, fglrx forces</span>
<span class="cm"> *   x and w to be 1.0 in the input selection; I don&#39;t know whether this is</span>
<span class="cm"> *   strictly necessary</span>
<span class="cm"> */</span>
<span class="cp">#define R300_VPI_OUT_OP_DOT                     (1 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_MUL                     (2 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_ADD                     (3 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_MAD                     (4 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_DST                     (5 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_FRC                     (6 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_MAX                     (7 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_MIN                     (8 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_SGE                     (9 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_SLT                     (10 &lt;&lt; 0)</span>
	<span class="cm">/* Used in GL_POINT_DISTANCE_ATTENUATION_ARB, vector(scalar, vector) */</span>
<span class="cp">#define R300_VPI_OUT_OP_UNK12                   (12 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_ARL                     (13 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_EXP                     (65 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_LOG                     (66 &lt;&lt; 0)</span>
	<span class="cm">/* Used in fog computations, scalar(scalar) */</span>
<span class="cp">#define R300_VPI_OUT_OP_UNK67                   (67 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_LIT                     (68 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_POW                     (69 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_RCP                     (70 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_RSQ                     (72 &lt;&lt; 0)</span>
	<span class="cm">/* Used in GL_POINT_DISTANCE_ATTENUATION_ARB, scalar(scalar) */</span>
<span class="cp">#define R300_VPI_OUT_OP_UNK73                   (73 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_EX2                     (75 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_LG2                     (76 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_OUT_OP_MAD_2                   (128 &lt;&lt; 0)</span>
	<span class="cm">/* all temps, vector(scalar, vector, vector) */</span>
<span class="cp">#define R300_VPI_OUT_OP_UNK129                  (129 &lt;&lt; 0)</span>

<span class="cp">#define R300_VPI_OUT_REG_CLASS_TEMPORARY        (0 &lt;&lt; 8)</span>
<span class="cp">#define R300_VPI_OUT_REG_CLASS_ADDR             (1 &lt;&lt; 8)</span>
<span class="cp">#define R300_VPI_OUT_REG_CLASS_RESULT           (2 &lt;&lt; 8)</span>
<span class="cp">#define R300_VPI_OUT_REG_CLASS_MASK             (31 &lt;&lt; 8)</span>

<span class="cp">#define R300_VPI_OUT_REG_INDEX_SHIFT            13</span>
	<span class="cm">/* GUESS based on fglrx native limits */</span>
<span class="cp">#define R300_VPI_OUT_REG_INDEX_MASK             (31 &lt;&lt; 13)</span>

<span class="cp">#define R300_VPI_OUT_WRITE_X                    (1 &lt;&lt; 20)</span>
<span class="cp">#define R300_VPI_OUT_WRITE_Y                    (1 &lt;&lt; 21)</span>
<span class="cp">#define R300_VPI_OUT_WRITE_Z                    (1 &lt;&lt; 22)</span>
<span class="cp">#define R300_VPI_OUT_WRITE_W                    (1 &lt;&lt; 23)</span>

<span class="cp">#define R300_VPI_IN_REG_CLASS_TEMPORARY         (0 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_IN_REG_CLASS_ATTRIBUTE         (1 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_IN_REG_CLASS_PARAMETER         (2 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_IN_REG_CLASS_NONE              (9 &lt;&lt; 0)</span>
<span class="cp">#define R300_VPI_IN_REG_CLASS_MASK              (31 &lt;&lt; 0)</span>

<span class="cp">#define R300_VPI_IN_REG_INDEX_SHIFT             5</span>
	<span class="cm">/* GUESS based on fglrx native limits */</span>
<span class="cp">#define R300_VPI_IN_REG_INDEX_MASK              (255 &lt;&lt; 5)</span>

<span class="cm">/* The R300 can select components from the input register arbitrarily.</span>
<span class="cm"> * Use the following constants, shifted by the component shift you</span>
<span class="cm"> * want to select</span>
<span class="cm"> */</span>
<span class="cp">#define R300_VPI_IN_SELECT_X    0</span>
<span class="cp">#define R300_VPI_IN_SELECT_Y    1</span>
<span class="cp">#define R300_VPI_IN_SELECT_Z    2</span>
<span class="cp">#define R300_VPI_IN_SELECT_W    3</span>
<span class="cp">#define R300_VPI_IN_SELECT_ZERO 4</span>
<span class="cp">#define R300_VPI_IN_SELECT_ONE  5</span>
<span class="cp">#define R300_VPI_IN_SELECT_MASK 7</span>

<span class="cp">#define R300_VPI_IN_X_SHIFT                     13</span>
<span class="cp">#define R300_VPI_IN_Y_SHIFT                     16</span>
<span class="cp">#define R300_VPI_IN_Z_SHIFT                     19</span>
<span class="cp">#define R300_VPI_IN_W_SHIFT                     22</span>

<span class="cp">#define R300_VPI_IN_NEG_X                       (1 &lt;&lt; 25)</span>
<span class="cp">#define R300_VPI_IN_NEG_Y                       (1 &lt;&lt; 26)</span>
<span class="cp">#define R300_VPI_IN_NEG_Z                       (1 &lt;&lt; 27)</span>
<span class="cp">#define R300_VPI_IN_NEG_W                       (1 &lt;&lt; 28)</span>
<span class="cm">/* END: Vertex program instruction set */</span>

<span class="cm">/* BEGIN: Packet 3 commands */</span>

<span class="cm">/* A primitive emission dword. */</span>
<span class="cp">#define R300_PRIM_TYPE_NONE                     (0 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_POINT                    (1 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_LINE                     (2 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_LINE_STRIP               (3 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_TRI_LIST                 (4 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_TRI_FAN                  (5 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_TRI_STRIP                (6 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_TRI_TYPE2                (7 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_RECT_LIST                (8 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_3VRT_POINT_LIST          (9 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_3VRT_LINE_LIST           (10 &lt;&lt; 0)</span>
	<span class="cm">/* GUESS (based on r200) */</span>
<span class="cp">#define R300_PRIM_TYPE_POINT_SPRITES            (11 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_LINE_LOOP                (12 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_QUADS                    (13 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_QUAD_STRIP               (14 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_POLYGON                  (15 &lt;&lt; 0)</span>
<span class="cp">#define R300_PRIM_TYPE_MASK                     0xF</span>
<span class="cp">#define R300_PRIM_WALK_IND                      (1 &lt;&lt; 4)</span>
<span class="cp">#define R300_PRIM_WALK_LIST                     (2 &lt;&lt; 4)</span>
<span class="cp">#define R300_PRIM_WALK_RING                     (3 &lt;&lt; 4)</span>
<span class="cp">#define R300_PRIM_WALK_MASK                     (3 &lt;&lt; 4)</span>
	<span class="cm">/* GUESS (based on r200) */</span>
<span class="cp">#define R300_PRIM_COLOR_ORDER_BGRA              (0 &lt;&lt; 6)</span>
<span class="cp">#define R300_PRIM_COLOR_ORDER_RGBA              (1 &lt;&lt; 6)</span>
<span class="cp">#define R300_PRIM_NUM_VERTICES_SHIFT            16</span>
<span class="cp">#define R300_PRIM_NUM_VERTICES_MASK             0xffff</span>

<span class="cm">/* Draw a primitive from vertex data in arrays loaded via 3D_LOAD_VBPNTR.</span>
<span class="cm"> * Two parameter dwords:</span>
<span class="cm"> * 0. The first parameter appears to be always 0</span>
<span class="cm"> * 1. The second parameter is a standard primitive emission dword.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_PACKET3_3D_DRAW_VBUF           0x00002800</span>

<span class="cm">/* Specify the full set of vertex arrays as (address, stride).</span>
<span class="cm"> * The first parameter is the number of vertex arrays specified.</span>
<span class="cm"> * The rest of the command is a variable length list of blocks, where</span>
<span class="cm"> * each block is three dwords long and specifies two arrays.</span>
<span class="cm"> * The first dword of a block is split into two words, the lower significant</span>
<span class="cm"> * word refers to the first array, the more significant word to the second</span>
<span class="cm"> * array in the block.</span>
<span class="cm"> * The low byte of each word contains the size of an array entry in dwords,</span>
<span class="cm"> * the high byte contains the stride of the array.</span>
<span class="cm"> * The second dword of a block contains the pointer to the first array,</span>
<span class="cm"> * the third dword of a block contains the pointer to the second array.</span>
<span class="cm"> * Note that if the total number of arrays is odd, the third dword of</span>
<span class="cm"> * the last block is omitted.</span>
<span class="cm"> */</span>
<span class="cp">#define R300_PACKET3_3D_LOAD_VBPNTR         0x00002F00</span>

<span class="cp">#define R300_PACKET3_INDX_BUFFER            0x00003300</span>
<span class="cp">#    define R300_EB_UNK1_SHIFT                      24</span>
<span class="cp">#    define R300_EB_UNK1                    (0x80&lt;&lt;24)</span>
<span class="cp">#    define R300_EB_UNK2                        0x0810</span>
<span class="cp">#define R300_PACKET3_3D_DRAW_VBUF_2         0x00003400</span>
<span class="cp">#define R300_PACKET3_3D_DRAW_INDX_2         0x00003600</span>

<span class="cm">/* END: Packet 3 commands */</span>


<span class="cm">/* Color formats for 2d packets</span>
<span class="cm"> */</span>
<span class="cp">#define R300_CP_COLOR_FORMAT_CI8	2</span>
<span class="cp">#define R300_CP_COLOR_FORMAT_ARGB1555	3</span>
<span class="cp">#define R300_CP_COLOR_FORMAT_RGB565	4</span>
<span class="cp">#define R300_CP_COLOR_FORMAT_ARGB8888	6</span>
<span class="cp">#define R300_CP_COLOR_FORMAT_RGB332	7</span>
<span class="cp">#define R300_CP_COLOR_FORMAT_RGB8	9</span>
<span class="cp">#define R300_CP_COLOR_FORMAT_ARGB4444	15</span>

<span class="cm">/*</span>
<span class="cm"> * CP type-3 packets</span>
<span class="cm"> */</span>
<span class="cp">#define R300_CP_CMD_BITBLT_MULTI	0xC0009B00</span>

<span class="cp">#define R500_VAP_INDEX_OFFSET		0x208c</span>

<span class="cp">#define R500_GA_US_VECTOR_INDEX         0x4250</span>
<span class="cp">#define R500_GA_US_VECTOR_DATA          0x4254</span>

<span class="cp">#define R500_RS_IP_0                    0x4074</span>
<span class="cp">#define R500_RS_INST_0                  0x4320</span>

<span class="cp">#define R500_US_CONFIG                  0x4600</span>

<span class="cp">#define R500_US_FC_CTRL			0x4624</span>
<span class="cp">#define R500_US_CODE_ADDR		0x4630</span>

<span class="cp">#define R500_RB3D_COLOR_CLEAR_VALUE_AR  0x46c0</span>
<span class="cp">#define R500_RB3D_CONSTANT_COLOR_AR     0x4ef8</span>

<span class="cp">#define R300_SU_REG_DEST                0x42c8</span>
<span class="cp">#define RV530_FG_ZBREG_DEST             0x4be8</span>
<span class="cp">#define R300_ZB_ZPASS_DATA              0x4f58</span>
<span class="cp">#define R300_ZB_ZPASS_ADDR              0x4f5c</span>

<span class="cp">#endif </span><span class="cm">/* _R300_REG_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
