<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › gpu › drm › i915 › intel_drv.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>intel_drv.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2006 Dave Airlie &lt;airlied@linux.ie&gt;</span>
<span class="cm"> * Copyright (c) 2007-2008 Intel Corporation</span>
<span class="cm"> *   Jesse Barnes &lt;jesse.barnes@intel.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * Permission is hereby granted, free of charge, to any person obtaining a</span>
<span class="cm"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span>
<span class="cm"> * to deal in the Software without restriction, including without limitation</span>
<span class="cm"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span>
<span class="cm"> * and/or sell copies of the Software, and to permit persons to whom the</span>
<span class="cm"> * Software is furnished to do so, subject to the following conditions:</span>
<span class="cm"> *</span>
<span class="cm"> * The above copyright notice and this permission notice (including the next</span>
<span class="cm"> * paragraph) shall be included in all copies or substantial portions of the</span>
<span class="cm"> * Software.</span>
<span class="cm"> *</span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="cm"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="cm"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL</span>
<span class="cm"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="cm"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span>
<span class="cm"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS</span>
<span class="cm"> * IN THE SOFTWARE.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __INTEL_DRV_H__</span>
<span class="cp">#define __INTEL_DRV_H__</span>

<span class="cp">#include &lt;linux/i2c.h&gt;</span>
<span class="cp">#include &quot;i915_drm.h&quot;</span>
<span class="cp">#include &quot;i915_drv.h&quot;</span>
<span class="cp">#include &quot;drm_crtc.h&quot;</span>
<span class="cp">#include &quot;drm_crtc_helper.h&quot;</span>
<span class="cp">#include &quot;drm_fb_helper.h&quot;</span>

<span class="cp">#define _wait_for(COND, MS, W) ({ \</span>
<span class="cp">	unsigned long timeout__ = jiffies + msecs_to_jiffies(MS);	\</span>
<span class="cp">	int ret__ = 0;							\</span>
<span class="cp">	while (!(COND)) {						\</span>
<span class="cp">		if (time_after(jiffies, timeout__)) {			\</span>
<span class="cp">			ret__ = -ETIMEDOUT;				\</span>
<span class="cp">			break;						\</span>
<span class="cp">		}							\</span>
<span class="cp">		if (W &amp;&amp; drm_can_sleep()) msleep(W);	\</span>
<span class="cp">	}								\</span>
<span class="cp">	ret__;								\</span>
<span class="cp">})</span>

<span class="cp">#define wait_for_atomic_us(COND, US) ({ \</span>
<span class="cp">	int i, ret__ = -ETIMEDOUT;	\</span>
<span class="cp">	for (i = 0; i &lt; (US); i++) {	\</span>
<span class="cp">		if ((COND)) {		\</span>
<span class="cp">			ret__ = 0;	\</span>
<span class="cp">			break;		\</span>
<span class="cp">		}			\</span>
<span class="cp">		udelay(1);		\</span>
<span class="cp">	}				\</span>
<span class="cp">	ret__;				\</span>
<span class="cp">})</span>

<span class="cp">#define wait_for(COND, MS) _wait_for(COND, MS, 1)</span>
<span class="cp">#define wait_for_atomic(COND, MS) _wait_for(COND, MS, 0)</span>

<span class="cp">#define KHz(x) (1000*x)</span>
<span class="cp">#define MHz(x) KHz(1000*x)</span>

<span class="cm">/*</span>
<span class="cm"> * Display related stuff</span>
<span class="cm"> */</span>

<span class="cm">/* store information about an Ixxx DVO */</span>
<span class="cm">/* The i830-&gt;i865 use multiple DVOs with multiple i2cs */</span>
<span class="cm">/* the i915, i945 have a single sDVO i2c bus - which is different */</span>
<span class="cp">#define MAX_OUTPUTS 6</span>
<span class="cm">/* maximum connectors per crtcs in the mode set */</span>
<span class="cp">#define INTELFB_CONN_LIMIT 4</span>

<span class="cp">#define INTEL_I2C_BUS_DVO 1</span>
<span class="cp">#define INTEL_I2C_BUS_SDVO 2</span>

<span class="cm">/* these are outputs from the chip - integrated only</span>
<span class="cm">   external chips are via DVO or SDVO output */</span>
<span class="cp">#define INTEL_OUTPUT_UNUSED 0</span>
<span class="cp">#define INTEL_OUTPUT_ANALOG 1</span>
<span class="cp">#define INTEL_OUTPUT_DVO 2</span>
<span class="cp">#define INTEL_OUTPUT_SDVO 3</span>
<span class="cp">#define INTEL_OUTPUT_LVDS 4</span>
<span class="cp">#define INTEL_OUTPUT_TVOUT 5</span>
<span class="cp">#define INTEL_OUTPUT_HDMI 6</span>
<span class="cp">#define INTEL_OUTPUT_DISPLAYPORT 7</span>
<span class="cp">#define INTEL_OUTPUT_EDP 8</span>

<span class="cm">/* Intel Pipe Clone Bit */</span>
<span class="cp">#define INTEL_HDMIB_CLONE_BIT 1</span>
<span class="cp">#define INTEL_HDMIC_CLONE_BIT 2</span>
<span class="cp">#define INTEL_HDMID_CLONE_BIT 3</span>
<span class="cp">#define INTEL_HDMIE_CLONE_BIT 4</span>
<span class="cp">#define INTEL_HDMIF_CLONE_BIT 5</span>
<span class="cp">#define INTEL_SDVO_NON_TV_CLONE_BIT 6</span>
<span class="cp">#define INTEL_SDVO_TV_CLONE_BIT 7</span>
<span class="cp">#define INTEL_SDVO_LVDS_CLONE_BIT 8</span>
<span class="cp">#define INTEL_ANALOG_CLONE_BIT 9</span>
<span class="cp">#define INTEL_TV_CLONE_BIT 10</span>
<span class="cp">#define INTEL_DP_B_CLONE_BIT 11</span>
<span class="cp">#define INTEL_DP_C_CLONE_BIT 12</span>
<span class="cp">#define INTEL_DP_D_CLONE_BIT 13</span>
<span class="cp">#define INTEL_LVDS_CLONE_BIT 14</span>
<span class="cp">#define INTEL_DVO_TMDS_CLONE_BIT 15</span>
<span class="cp">#define INTEL_DVO_LVDS_CLONE_BIT 16</span>
<span class="cp">#define INTEL_EDP_CLONE_BIT 17</span>

<span class="cp">#define INTEL_DVO_CHIP_NONE 0</span>
<span class="cp">#define INTEL_DVO_CHIP_LVDS 1</span>
<span class="cp">#define INTEL_DVO_CHIP_TMDS 2</span>
<span class="cp">#define INTEL_DVO_CHIP_TVOUT 4</span>

<span class="cm">/* drm_display_mode-&gt;private_flags */</span>
<span class="cp">#define INTEL_MODE_PIXEL_MULTIPLIER_SHIFT (0x0)</span>
<span class="cp">#define INTEL_MODE_PIXEL_MULTIPLIER_MASK (0xf &lt;&lt; INTEL_MODE_PIXEL_MULTIPLIER_SHIFT)</span>
<span class="cp">#define INTEL_MODE_DP_FORCE_6BPC (0x10)</span>
<span class="cm">/* This flag must be set by the encoder&#39;s mode_fixup if it changes the crtc</span>
<span class="cm"> * timings in the mode to prevent the crtc fixup from overwriting them.</span>
<span class="cm"> * Currently only lvds needs that. */</span>
<span class="cp">#define INTEL_MODE_CRTC_TIMINGS_SET (0x20)</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>
<span class="nf">intel_mode_set_pixel_multiplier</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">mode</span><span class="p">,</span>
				<span class="kt">int</span> <span class="n">multiplier</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">mode</span><span class="o">-&gt;</span><span class="n">clock</span> <span class="o">*=</span> <span class="n">multiplier</span><span class="p">;</span>
	<span class="n">mode</span><span class="o">-&gt;</span><span class="n">private_flags</span> <span class="o">|=</span> <span class="n">multiplier</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span>
<span class="nf">intel_mode_get_pixel_multiplier</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">mode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">mode</span><span class="o">-&gt;</span><span class="n">private_flags</span> <span class="o">&amp;</span> <span class="n">INTEL_MODE_PIXEL_MULTIPLIER_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">INTEL_MODE_PIXEL_MULTIPLIER_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">intel_framebuffer</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_framebuffer</span> <span class="n">base</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">drm_i915_gem_object</span> <span class="o">*</span><span class="n">obj</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">intel_fbdev</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_fb_helper</span> <span class="n">helper</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">intel_framebuffer</span> <span class="n">ifb</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">fbdev_list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">our_mode</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">intel_encoder</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_encoder</span> <span class="n">base</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">needs_tv_clock</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">hot_plug</span><span class="p">)(</span><span class="k">struct</span> <span class="n">intel_encoder</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">crtc_mask</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">clone_mask</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">intel_connector</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_connector</span> <span class="n">base</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">intel_encoder</span> <span class="o">*</span><span class="n">encoder</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">intel_crtc</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_crtc</span> <span class="n">base</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">pipe</span> <span class="n">pipe</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">plane</span> <span class="n">plane</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">lut_r</span><span class="p">[</span><span class="mi">256</span><span class="p">],</span> <span class="n">lut_g</span><span class="p">[</span><span class="mi">256</span><span class="p">],</span> <span class="n">lut_b</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">dpms_mode</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">active</span><span class="p">;</span> <span class="cm">/* is the crtc on? independent of the dpms mode */</span>
	<span class="n">bool</span> <span class="n">busy</span><span class="p">;</span> <span class="cm">/* is scanout buffer being updated frequently? */</span>
	<span class="k">struct</span> <span class="n">timer_list</span> <span class="n">idle_timer</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">lowfreq_avail</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">intel_overlay</span> <span class="o">*</span><span class="n">overlay</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">intel_unpin_work</span> <span class="o">*</span><span class="n">unpin_work</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">fdi_lanes</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">drm_i915_gem_object</span> <span class="o">*</span><span class="n">cursor_bo</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">cursor_addr</span><span class="p">;</span>
	<span class="kt">int16_t</span> <span class="n">cursor_x</span><span class="p">,</span> <span class="n">cursor_y</span><span class="p">;</span>
	<span class="kt">int16_t</span> <span class="n">cursor_width</span><span class="p">,</span> <span class="n">cursor_height</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">cursor_visible</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bpp</span><span class="p">;</span>

	<span class="cm">/* We can share PLLs across outputs if the timings match */</span>
	<span class="k">struct</span> <span class="n">intel_pch_pll</span> <span class="o">*</span><span class="n">pch_pll</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">intel_plane</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_plane</span> <span class="n">base</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">pipe</span> <span class="n">pipe</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">drm_i915_gem_object</span> <span class="o">*</span><span class="n">obj</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">primary_disabled</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">max_downscale</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">lut_r</span><span class="p">[</span><span class="mi">1024</span><span class="p">],</span> <span class="n">lut_g</span><span class="p">[</span><span class="mi">1024</span><span class="p">],</span> <span class="n">lut_b</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">update_plane</span><span class="p">)(</span><span class="k">struct</span> <span class="n">drm_plane</span> <span class="o">*</span><span class="n">plane</span><span class="p">,</span>
			     <span class="k">struct</span> <span class="n">drm_framebuffer</span> <span class="o">*</span><span class="n">fb</span><span class="p">,</span>
			     <span class="k">struct</span> <span class="n">drm_i915_gem_object</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span>
			     <span class="kt">int</span> <span class="n">crtc_x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">crtc_y</span><span class="p">,</span>
			     <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">crtc_w</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">crtc_h</span><span class="p">,</span>
			     <span class="kt">uint32_t</span> <span class="n">x</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">y</span><span class="p">,</span>
			     <span class="kt">uint32_t</span> <span class="n">src_w</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">src_h</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">disable_plane</span><span class="p">)(</span><span class="k">struct</span> <span class="n">drm_plane</span> <span class="o">*</span><span class="n">plane</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">update_colorkey</span><span class="p">)(</span><span class="k">struct</span> <span class="n">drm_plane</span> <span class="o">*</span><span class="n">plane</span><span class="p">,</span>
			       <span class="k">struct</span> <span class="n">drm_intel_sprite_colorkey</span> <span class="o">*</span><span class="n">key</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">get_colorkey</span><span class="p">)(</span><span class="k">struct</span> <span class="n">drm_plane</span> <span class="o">*</span><span class="n">plane</span><span class="p">,</span>
			     <span class="k">struct</span> <span class="n">drm_intel_sprite_colorkey</span> <span class="o">*</span><span class="n">key</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">intel_watermark_params</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fifo_size</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">max_wm</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">default_wm</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">guard_size</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cacheline_size</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cxsr_latency</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">is_desktop</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">is_ddr3</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fsb_freq</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mem_freq</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">display_sr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">display_hpll_disable</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cursor_sr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cursor_hpll_disable</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define to_intel_crtc(x) container_of(x, struct intel_crtc, base)</span>
<span class="cp">#define to_intel_connector(x) container_of(x, struct intel_connector, base)</span>
<span class="cp">#define to_intel_encoder(x) container_of(x, struct intel_encoder, base)</span>
<span class="cp">#define to_intel_framebuffer(x) container_of(x, struct intel_framebuffer, base)</span>
<span class="cp">#define to_intel_plane(x) container_of(x, struct intel_plane, base)</span>

<span class="cp">#define DIP_HEADER_SIZE	5</span>

<span class="cp">#define DIP_TYPE_AVI    0x82</span>
<span class="cp">#define DIP_VERSION_AVI 0x2</span>
<span class="cp">#define DIP_LEN_AVI     13</span>
<span class="cp">#define DIP_AVI_PR_1    0</span>
<span class="cp">#define DIP_AVI_PR_2    1</span>

<span class="cp">#define DIP_TYPE_SPD	0x83</span>
<span class="cp">#define DIP_VERSION_SPD	0x1</span>
<span class="cp">#define DIP_LEN_SPD	25</span>
<span class="cp">#define DIP_SPD_UNKNOWN	0</span>
<span class="cp">#define DIP_SPD_DSTB	0x1</span>
<span class="cp">#define DIP_SPD_DVDP	0x2</span>
<span class="cp">#define DIP_SPD_DVHS	0x3</span>
<span class="cp">#define DIP_SPD_HDDVR	0x4</span>
<span class="cp">#define DIP_SPD_DVC	0x5</span>
<span class="cp">#define DIP_SPD_DSC	0x6</span>
<span class="cp">#define DIP_SPD_VCD	0x7</span>
<span class="cp">#define DIP_SPD_GAME	0x8</span>
<span class="cp">#define DIP_SPD_PC	0x9</span>
<span class="cp">#define DIP_SPD_BD	0xa</span>
<span class="cp">#define DIP_SPD_SCD	0xb</span>

<span class="k">struct</span> <span class="n">dip_infoframe</span> <span class="p">{</span>
	<span class="kt">uint8_t</span> <span class="n">type</span><span class="p">;</span>		<span class="cm">/* HB0 */</span>
	<span class="kt">uint8_t</span> <span class="n">ver</span><span class="p">;</span>		<span class="cm">/* HB1 */</span>
	<span class="kt">uint8_t</span> <span class="n">len</span><span class="p">;</span>		<span class="cm">/* HB2 - body len, not including checksum */</span>
	<span class="kt">uint8_t</span> <span class="n">ecc</span><span class="p">;</span>		<span class="cm">/* Header ECC */</span>
	<span class="kt">uint8_t</span> <span class="n">checksum</span><span class="p">;</span>	<span class="cm">/* PB0 */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="cm">/* PB1 - Y 6:5, A 4:4, B 3:2, S 1:0 */</span>
			<span class="kt">uint8_t</span> <span class="n">Y_A_B_S</span><span class="p">;</span>
			<span class="cm">/* PB2 - C 7:6, M 5:4, R 3:0 */</span>
			<span class="kt">uint8_t</span> <span class="n">C_M_R</span><span class="p">;</span>
			<span class="cm">/* PB3 - ITC 7:7, EC 6:4, Q 3:2, SC 1:0 */</span>
			<span class="kt">uint8_t</span> <span class="n">ITC_EC_Q_SC</span><span class="p">;</span>
			<span class="cm">/* PB4 - VIC 6:0 */</span>
			<span class="kt">uint8_t</span> <span class="n">VIC</span><span class="p">;</span>
			<span class="cm">/* PB5 - YQ 7:6, CN 5:4, PR 3:0 */</span>
			<span class="kt">uint8_t</span> <span class="n">YQ_CN_PR</span><span class="p">;</span>
			<span class="cm">/* PB6 to PB13 */</span>
			<span class="kt">uint16_t</span> <span class="n">top_bar_end</span><span class="p">;</span>
			<span class="kt">uint16_t</span> <span class="n">bottom_bar_start</span><span class="p">;</span>
			<span class="kt">uint16_t</span> <span class="n">left_bar_end</span><span class="p">;</span>
			<span class="kt">uint16_t</span> <span class="n">right_bar_start</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">))</span> <span class="n">avi</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="kt">uint8_t</span> <span class="n">vn</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
			<span class="kt">uint8_t</span> <span class="n">pd</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
			<span class="kt">uint8_t</span> <span class="n">sdi</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">))</span> <span class="n">spd</span><span class="p">;</span>
		<span class="kt">uint8_t</span> <span class="n">payload</span><span class="p">[</span><span class="mi">27</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">))</span> <span class="n">body</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">intel_hdmi</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">intel_encoder</span> <span class="n">base</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">sdvox_reg</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ddc_bus</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ddi_port</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">color_range</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">has_hdmi_sink</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">has_audio</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">hdmi_force_audio</span> <span class="n">force_audio</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">write_infoframe</span><span class="p">)(</span><span class="k">struct</span> <span class="n">drm_encoder</span> <span class="o">*</span><span class="n">encoder</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">dip_infoframe</span> <span class="o">*</span><span class="n">frame</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">drm_crtc</span> <span class="o">*</span>
<span class="nf">intel_get_crtc_for_pipe</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pipe</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_i915_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">pipe_to_crtc_mapping</span><span class="p">[</span><span class="n">pipe</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">drm_crtc</span> <span class="o">*</span>
<span class="nf">intel_get_crtc_for_plane</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">plane</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_i915_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">plane_to_crtc_mapping</span><span class="p">[</span><span class="n">plane</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">intel_unpin_work</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">work</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">drm_i915_gem_object</span> <span class="o">*</span><span class="n">old_fb_obj</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">drm_i915_gem_object</span> <span class="o">*</span><span class="n">pending_flip_obj</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">drm_pending_vblank_event</span> <span class="o">*</span><span class="n">event</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">pending</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">enable_stall_check</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">intel_fbc_work</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">work</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">drm_crtc</span> <span class="o">*</span><span class="n">crtc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">drm_framebuffer</span> <span class="o">*</span><span class="n">fb</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">interval</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">intel_ddc_get_modes</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_connector</span> <span class="o">*</span><span class="n">c</span><span class="p">,</span> <span class="k">struct</span> <span class="n">i2c_adapter</span> <span class="o">*</span><span class="n">adapter</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">intel_ddc_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">intel_encoder</span> <span class="o">*</span><span class="n">intel_encoder</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ddc_bus</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_attach_force_audio_property</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_connector</span> <span class="o">*</span><span class="n">connector</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_attach_broadcast_rgb_property</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_connector</span> <span class="o">*</span><span class="n">connector</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_crt_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_hdmi_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sdvox_reg</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">intel_hdmi</span> <span class="o">*</span><span class="n">enc_to_intel_hdmi</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_encoder</span> <span class="o">*</span><span class="n">encoder</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_hdmi_set_avi_infoframe</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_encoder</span> <span class="o">*</span><span class="n">encoder</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">adjusted_mode</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_hdmi_set_spd_infoframe</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_encoder</span> <span class="o">*</span><span class="n">encoder</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_dip_infoframe_csum</span><span class="p">(</span><span class="k">struct</span> <span class="n">dip_infoframe</span> <span class="o">*</span><span class="n">avi_if</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">intel_sdvo_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">sdvo_reg</span><span class="p">,</span>
			    <span class="n">bool</span> <span class="n">is_sdvob</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_dvo_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_tv_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_mark_busy</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">drm_i915_gem_object</span> <span class="o">*</span><span class="n">obj</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">intel_lvds_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_dp_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dp_reg</span><span class="p">);</span>
<span class="kt">void</span>
<span class="n">intel_dp_set_m_n</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_crtc</span> <span class="o">*</span><span class="n">crtc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">mode</span><span class="p">,</span>
		 <span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">adjusted_mode</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">intel_dpd_is_edp</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_edp_link_config</span><span class="p">(</span><span class="k">struct</span> <span class="n">intel_encoder</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">intel_encoder_is_pch_edp</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_encoder</span> <span class="o">*</span><span class="n">encoder</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">intel_plane_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">enum</span> <span class="n">pipe</span> <span class="n">pipe</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_flush_display_plane</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_i915_private</span> <span class="o">*</span><span class="n">dev_priv</span><span class="p">,</span>
				      <span class="k">enum</span> <span class="n">plane</span> <span class="n">plane</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">intel_sanitize_pm</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="cm">/* intel_panel.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_fixed_panel_mode</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">fixed_mode</span><span class="p">,</span>
				   <span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">adjusted_mode</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_pch_panel_fitting</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>
				    <span class="kt">int</span> <span class="n">fitting_mode</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">mode</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">adjusted_mode</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">intel_panel_get_max_backlight</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">intel_panel_get_backlight</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_panel_set_backlight</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">level</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">intel_panel_setup_backlight</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_panel_enable_backlight</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_panel_disable_backlight</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_panel_destroy_backlight</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">enum</span> <span class="n">drm_connector_status</span> <span class="n">intel_panel_detect</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_crtc_load_lut</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_crtc</span> <span class="o">*</span><span class="n">crtc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_encoder_prepare</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_encoder</span> <span class="o">*</span><span class="n">encoder</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_encoder_commit</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_encoder</span> <span class="o">*</span><span class="n">encoder</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_encoder_destroy</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_encoder</span> <span class="o">*</span><span class="n">encoder</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">intel_encoder</span> <span class="o">*</span><span class="nf">intel_attached_encoder</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_connector</span> <span class="o">*</span><span class="n">connector</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">to_intel_connector</span><span class="p">(</span><span class="n">connector</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">encoder</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_connector_attach_encoder</span><span class="p">(</span><span class="k">struct</span> <span class="n">intel_connector</span> <span class="o">*</span><span class="n">connector</span><span class="p">,</span>
					   <span class="k">struct</span> <span class="n">intel_encoder</span> <span class="o">*</span><span class="n">encoder</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">drm_encoder</span> <span class="o">*</span><span class="n">intel_best_encoder</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_connector</span> <span class="o">*</span><span class="n">connector</span><span class="p">);</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">intel_crtc_mode_get</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>
						    <span class="k">struct</span> <span class="n">drm_crtc</span> <span class="o">*</span><span class="n">crtc</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">intel_get_pipe_from_crtc_id</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">drm_file</span> <span class="o">*</span><span class="n">file_priv</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_wait_for_vblank</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pipe</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_wait_for_pipe_off</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pipe</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">intel_load_detect_pipe</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_framebuffer</span> <span class="o">*</span><span class="n">release_fb</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">load_detect_temp</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">dpms_mode</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">intel_get_load_detect_pipe</span><span class="p">(</span><span class="k">struct</span> <span class="n">intel_encoder</span> <span class="o">*</span><span class="n">intel_encoder</span><span class="p">,</span>
				       <span class="k">struct</span> <span class="n">drm_connector</span> <span class="o">*</span><span class="n">connector</span><span class="p">,</span>
				       <span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">mode</span><span class="p">,</span>
				       <span class="k">struct</span> <span class="n">intel_load_detect_pipe</span> <span class="o">*</span><span class="n">old</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_release_load_detect_pipe</span><span class="p">(</span><span class="k">struct</span> <span class="n">intel_encoder</span> <span class="o">*</span><span class="n">intel_encoder</span><span class="p">,</span>
					   <span class="k">struct</span> <span class="n">drm_connector</span> <span class="o">*</span><span class="n">connector</span><span class="p">,</span>
					   <span class="k">struct</span> <span class="n">intel_load_detect_pipe</span> <span class="o">*</span><span class="n">old</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">intelfb_restore</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_crtc_fb_gamma_set</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_crtc</span> <span class="o">*</span><span class="n">crtc</span><span class="p">,</span> <span class="n">u16</span> <span class="n">red</span><span class="p">,</span> <span class="n">u16</span> <span class="n">green</span><span class="p">,</span>
				    <span class="n">u16</span> <span class="n">blue</span><span class="p">,</span> <span class="kt">int</span> <span class="n">regno</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_crtc_fb_gamma_get</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_crtc</span> <span class="o">*</span><span class="n">crtc</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">red</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">green</span><span class="p">,</span>
				    <span class="n">u16</span> <span class="o">*</span><span class="n">blue</span><span class="p">,</span> <span class="kt">int</span> <span class="n">regno</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_enable_clock_gating</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ironlake_disable_rc6</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ironlake_enable_drps</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ironlake_disable_drps</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">intel_pin_and_fence_fb_obj</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>
				      <span class="k">struct</span> <span class="n">drm_i915_gem_object</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span>
				      <span class="k">struct</span> <span class="n">intel_ring_buffer</span> <span class="o">*</span><span class="n">pipelined</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_unpin_fb_obj</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_i915_gem_object</span> <span class="o">*</span><span class="n">obj</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">intel_framebuffer_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">intel_framebuffer</span> <span class="o">*</span><span class="n">ifb</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">drm_mode_fb_cmd2</span> <span class="o">*</span><span class="n">mode_cmd</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">drm_i915_gem_object</span> <span class="o">*</span><span class="n">obj</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">intel_fbdev_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_fbdev_fini</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_fbdev_set_suspend</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">state</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_prepare_page_flip</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">plane</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_finish_page_flip</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pipe</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_finish_page_flip_plane</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">plane</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_setup_overlay</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_cleanup_overlay</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">intel_overlay_switch_off</span><span class="p">(</span><span class="k">struct</span> <span class="n">intel_overlay</span> <span class="o">*</span><span class="n">overlay</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">intel_overlay_put_image</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span>
				   <span class="k">struct</span> <span class="n">drm_file</span> <span class="o">*</span><span class="n">file_priv</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">intel_overlay_attrs</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span>
			       <span class="k">struct</span> <span class="n">drm_file</span> <span class="o">*</span><span class="n">file_priv</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_fb_output_poll_changed</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_fb_restore_mode</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">assert_pipe</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_i915_private</span> <span class="o">*</span><span class="n">dev_priv</span><span class="p">,</span> <span class="k">enum</span> <span class="n">pipe</span> <span class="n">pipe</span><span class="p">,</span>
			<span class="n">bool</span> <span class="n">state</span><span class="p">);</span>
<span class="cp">#define assert_pipe_enabled(d, p) assert_pipe(d, p, true)</span>
<span class="cp">#define assert_pipe_disabled(d, p) assert_pipe(d, p, false)</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_init_clock_gating</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_write_eld</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_encoder</span> <span class="o">*</span><span class="n">encoder</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">mode</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_cpt_verify_modeset</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pipe</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_prepare_ddi</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">hsw_fdi_link_train</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_crtc</span> <span class="o">*</span><span class="n">crtc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_ddi_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">enum</span> <span class="n">port</span> <span class="n">port</span><span class="p">);</span>

<span class="cm">/* For use by IVB LP watermark workaround in intel_sprite.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_update_watermarks</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_update_sprite_watermarks</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pipe</span><span class="p">,</span>
					   <span class="kt">uint32_t</span> <span class="n">sprite_width</span><span class="p">,</span>
					   <span class="kt">int</span> <span class="n">pixel_size</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_update_linetime_watermarks</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pipe</span><span class="p">,</span>
			 <span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">mode</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">intel_sprite_set_colorkey</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">drm_file</span> <span class="o">*</span><span class="n">file_priv</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">intel_sprite_get_colorkey</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">drm_file</span> <span class="o">*</span><span class="n">file_priv</span><span class="p">);</span>

<span class="k">extern</span> <span class="n">u32</span> <span class="n">intel_dpio_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_i915_private</span> <span class="o">*</span><span class="n">dev_priv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">);</span>

<span class="cm">/* Power-related functions, located in intel_pm.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_init_pm</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="cm">/* FBC */</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">intel_fbc_enabled</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_enable_fbc</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_crtc</span> <span class="o">*</span><span class="n">crtc</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">interval</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_update_fbc</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="cm">/* IPS */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_gpu_ips_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_i915_private</span> <span class="o">*</span><span class="n">dev_priv</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_gpu_ips_teardown</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">gen6_enable_rps</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_i915_private</span> <span class="o">*</span><span class="n">dev_priv</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">gen6_update_ring_freq</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_i915_private</span> <span class="o">*</span><span class="n">dev_priv</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">gen6_disable_rps</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_init_emon</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_ddi_dpms</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_encoder</span> <span class="o">*</span><span class="n">encoder</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">intel_ddi_mode_set</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_encoder</span> <span class="o">*</span><span class="n">encoder</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">mode</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">drm_display_mode</span> <span class="o">*</span><span class="n">adjusted_mode</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __INTEL_DRV_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
