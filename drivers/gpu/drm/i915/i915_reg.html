<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › gpu › drm › i915 › i915_reg.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>i915_reg.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* Copyright 2003 Tungsten Graphics, Inc., Cedar Park, Texas.</span>
<span class="cm"> * All Rights Reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * Permission is hereby granted, free of charge, to any person obtaining a</span>
<span class="cm"> * copy of this software and associated documentation files (the</span>
<span class="cm"> * &quot;Software&quot;), to deal in the Software without restriction, including</span>
<span class="cm"> * without limitation the rights to use, copy, modify, merge, publish,</span>
<span class="cm"> * distribute, sub license, and/or sell copies of the Software, and to</span>
<span class="cm"> * permit persons to whom the Software is furnished to do so, subject to</span>
<span class="cm"> * the following conditions:</span>
<span class="cm"> *</span>
<span class="cm"> * The above copyright notice and this permission notice (including the</span>
<span class="cm"> * next paragraph) shall be included in all copies or substantial portions</span>
<span class="cm"> * of the Software.</span>
<span class="cm"> *</span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</span>
<span class="cm"> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span>
<span class="cm"> * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT.</span>
<span class="cm"> * IN NO EVENT SHALL TUNGSTEN GRAPHICS AND/OR ITS SUPPLIERS BE LIABLE FOR</span>
<span class="cm"> * ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,</span>
<span class="cm"> * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE</span>
<span class="cm"> * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _I915_REG_H_</span>
<span class="cp">#define _I915_REG_H_</span>

<span class="cp">#define _PIPE(pipe, a, b) ((a) + (pipe)*((b)-(a)))</span>

<span class="cp">#define _PORT(port, a, b) ((a) + (port)*((b)-(a)))</span>

<span class="cp">#define _MASKED_BIT_ENABLE(a) (((a) &lt;&lt; 16) | (a))</span>
<span class="cp">#define _MASKED_BIT_DISABLE(a) ((a) &lt;&lt; 16)</span>

<span class="cm">/*</span>
<span class="cm"> * The Bridge device&#39;s PCI config space has information about the</span>
<span class="cm"> * fb aperture size and the amount of pre-reserved memory.</span>
<span class="cm"> * This is all handled in the intel-gtt.ko module. i915.ko only</span>
<span class="cm"> * cares about the vga bit for the vga rbiter.</span>
<span class="cm"> */</span>
<span class="cp">#define INTEL_GMCH_CTRL		0x52</span>
<span class="cp">#define INTEL_GMCH_VGA_DISABLE  (1 &lt;&lt; 1)</span>

<span class="cm">/* PCI config space */</span>

<span class="cp">#define HPLLCC	0xc0 </span><span class="cm">/* 855 only */</span><span class="cp"></span>
<span class="cp">#define   GC_CLOCK_CONTROL_MASK		(0xf &lt;&lt; 0)</span>
<span class="cp">#define   GC_CLOCK_133_200		(0 &lt;&lt; 0)</span>
<span class="cp">#define   GC_CLOCK_100_200		(1 &lt;&lt; 0)</span>
<span class="cp">#define   GC_CLOCK_100_133		(2 &lt;&lt; 0)</span>
<span class="cp">#define   GC_CLOCK_166_250		(3 &lt;&lt; 0)</span>
<span class="cp">#define GCFGC2	0xda</span>
<span class="cp">#define GCFGC	0xf0 </span><span class="cm">/* 915+ only */</span><span class="cp"></span>
<span class="cp">#define   GC_LOW_FREQUENCY_ENABLE	(1 &lt;&lt; 7)</span>
<span class="cp">#define   GC_DISPLAY_CLOCK_190_200_MHZ	(0 &lt;&lt; 4)</span>
<span class="cp">#define   GC_DISPLAY_CLOCK_333_MHZ	(4 &lt;&lt; 4)</span>
<span class="cp">#define   GC_DISPLAY_CLOCK_MASK		(7 &lt;&lt; 4)</span>
<span class="cp">#define   GM45_GC_RENDER_CLOCK_MASK	(0xf &lt;&lt; 0)</span>
<span class="cp">#define   GM45_GC_RENDER_CLOCK_266_MHZ	(8 &lt;&lt; 0)</span>
<span class="cp">#define   GM45_GC_RENDER_CLOCK_320_MHZ	(9 &lt;&lt; 0)</span>
<span class="cp">#define   GM45_GC_RENDER_CLOCK_400_MHZ	(0xb &lt;&lt; 0)</span>
<span class="cp">#define   GM45_GC_RENDER_CLOCK_533_MHZ	(0xc &lt;&lt; 0)</span>
<span class="cp">#define   I965_GC_RENDER_CLOCK_MASK	(0xf &lt;&lt; 0)</span>
<span class="cp">#define   I965_GC_RENDER_CLOCK_267_MHZ	(2 &lt;&lt; 0)</span>
<span class="cp">#define   I965_GC_RENDER_CLOCK_333_MHZ	(3 &lt;&lt; 0)</span>
<span class="cp">#define   I965_GC_RENDER_CLOCK_444_MHZ	(4 &lt;&lt; 0)</span>
<span class="cp">#define   I965_GC_RENDER_CLOCK_533_MHZ	(5 &lt;&lt; 0)</span>
<span class="cp">#define   I945_GC_RENDER_CLOCK_MASK	(7 &lt;&lt; 0)</span>
<span class="cp">#define   I945_GC_RENDER_CLOCK_166_MHZ	(0 &lt;&lt; 0)</span>
<span class="cp">#define   I945_GC_RENDER_CLOCK_200_MHZ	(1 &lt;&lt; 0)</span>
<span class="cp">#define   I945_GC_RENDER_CLOCK_250_MHZ	(3 &lt;&lt; 0)</span>
<span class="cp">#define   I945_GC_RENDER_CLOCK_400_MHZ	(5 &lt;&lt; 0)</span>
<span class="cp">#define   I915_GC_RENDER_CLOCK_MASK	(7 &lt;&lt; 0)</span>
<span class="cp">#define   I915_GC_RENDER_CLOCK_166_MHZ	(0 &lt;&lt; 0)</span>
<span class="cp">#define   I915_GC_RENDER_CLOCK_200_MHZ	(1 &lt;&lt; 0)</span>
<span class="cp">#define   I915_GC_RENDER_CLOCK_333_MHZ	(4 &lt;&lt; 0)</span>
<span class="cp">#define LBB	0xf4</span>

<span class="cm">/* Graphics reset regs */</span>
<span class="cp">#define I965_GDRST 0xc0 </span><span class="cm">/* PCI config register */</span><span class="cp"></span>
<span class="cp">#define ILK_GDSR 0x2ca4 </span><span class="cm">/* MCHBAR offset */</span><span class="cp"></span>
<span class="cp">#define  GRDOM_FULL	(0&lt;&lt;2)</span>
<span class="cp">#define  GRDOM_RENDER	(1&lt;&lt;2)</span>
<span class="cp">#define  GRDOM_MEDIA	(3&lt;&lt;2)</span>
<span class="cp">#define  GRDOM_RESET_ENABLE (1&lt;&lt;0)</span>

<span class="cp">#define GEN6_MBCUNIT_SNPCR	0x900c </span><span class="cm">/* for LLC config */</span><span class="cp"></span>
<span class="cp">#define   GEN6_MBC_SNPCR_SHIFT	21</span>
<span class="cp">#define   GEN6_MBC_SNPCR_MASK	(3&lt;&lt;21)</span>
<span class="cp">#define   GEN6_MBC_SNPCR_MAX	(0&lt;&lt;21)</span>
<span class="cp">#define   GEN6_MBC_SNPCR_MED	(1&lt;&lt;21)</span>
<span class="cp">#define   GEN6_MBC_SNPCR_LOW	(2&lt;&lt;21)</span>
<span class="cp">#define   GEN6_MBC_SNPCR_MIN	(3&lt;&lt;21) </span><span class="cm">/* only 1/16th of the cache is shared */</span><span class="cp"></span>

<span class="cp">#define GEN6_MBCTL		0x0907c</span>
<span class="cp">#define   GEN6_MBCTL_ENABLE_BOOT_FETCH	(1 &lt;&lt; 4)</span>
<span class="cp">#define   GEN6_MBCTL_CTX_FETCH_NEEDED	(1 &lt;&lt; 3)</span>
<span class="cp">#define   GEN6_MBCTL_BME_UPDATE_ENABLE	(1 &lt;&lt; 2)</span>
<span class="cp">#define   GEN6_MBCTL_MAE_UPDATE_ENABLE	(1 &lt;&lt; 1)</span>
<span class="cp">#define   GEN6_MBCTL_BOOT_FETCH_MECH	(1 &lt;&lt; 0)</span>

<span class="cp">#define GEN6_GDRST	0x941c</span>
<span class="cp">#define  GEN6_GRDOM_FULL		(1 &lt;&lt; 0)</span>
<span class="cp">#define  GEN6_GRDOM_RENDER		(1 &lt;&lt; 1)</span>
<span class="cp">#define  GEN6_GRDOM_MEDIA		(1 &lt;&lt; 2)</span>
<span class="cp">#define  GEN6_GRDOM_BLT			(1 &lt;&lt; 3)</span>

<span class="cm">/* PPGTT stuff */</span>
<span class="cp">#define GEN6_GTT_ADDR_ENCODE(addr)	((addr) | (((addr) &gt;&gt; 28) &amp; 0xff0))</span>

<span class="cp">#define GEN6_PDE_VALID			(1 &lt;&lt; 0)</span>
<span class="cp">#define GEN6_PDE_LARGE_PAGE		(2 &lt;&lt; 0) </span><span class="cm">/* use 32kb pages */</span><span class="cp"></span>
<span class="cm">/* gen6+ has bit 11-4 for physical addr bit 39-32 */</span>
<span class="cp">#define GEN6_PDE_ADDR_ENCODE(addr)	GEN6_GTT_ADDR_ENCODE(addr)</span>

<span class="cp">#define GEN6_PTE_VALID			(1 &lt;&lt; 0)</span>
<span class="cp">#define GEN6_PTE_UNCACHED		(1 &lt;&lt; 1)</span>
<span class="cp">#define GEN6_PTE_CACHE_LLC		(2 &lt;&lt; 1)</span>
<span class="cp">#define GEN6_PTE_CACHE_LLC_MLC		(3 &lt;&lt; 1)</span>
<span class="cp">#define GEN6_PTE_CACHE_BITS		(3 &lt;&lt; 1)</span>
<span class="cp">#define GEN6_PTE_GFDT			(1 &lt;&lt; 3)</span>
<span class="cp">#define GEN6_PTE_ADDR_ENCODE(addr)	GEN6_GTT_ADDR_ENCODE(addr)</span>

<span class="cp">#define RING_PP_DIR_BASE(ring)		((ring)-&gt;mmio_base+0x228)</span>
<span class="cp">#define RING_PP_DIR_BASE_READ(ring)	((ring)-&gt;mmio_base+0x518)</span>
<span class="cp">#define RING_PP_DIR_DCLV(ring)		((ring)-&gt;mmio_base+0x220)</span>
<span class="cp">#define   PP_DIR_DCLV_2G		0xffffffff</span>

<span class="cp">#define GAM_ECOCHK			0x4090</span>
<span class="cp">#define   ECOCHK_SNB_BIT		(1&lt;&lt;10)</span>
<span class="cp">#define   ECOCHK_PPGTT_CACHE64B		(0x3&lt;&lt;3)</span>
<span class="cp">#define   ECOCHK_PPGTT_CACHE4B		(0x0&lt;&lt;3)</span>

<span class="cp">#define GAC_ECO_BITS			0x14090</span>
<span class="cp">#define   ECOBITS_PPGTT_CACHE64B	(3&lt;&lt;8)</span>
<span class="cp">#define   ECOBITS_PPGTT_CACHE4B		(0&lt;&lt;8)</span>

<span class="cp">#define GAB_CTL				0x24000</span>
<span class="cp">#define   GAB_CTL_CONT_AFTER_PAGEFAULT	(1&lt;&lt;8)</span>

<span class="cm">/* VGA stuff */</span>

<span class="cp">#define VGA_ST01_MDA 0x3ba</span>
<span class="cp">#define VGA_ST01_CGA 0x3da</span>

<span class="cp">#define VGA_MSR_WRITE 0x3c2</span>
<span class="cp">#define VGA_MSR_READ 0x3cc</span>
<span class="cp">#define   VGA_MSR_MEM_EN (1&lt;&lt;1)</span>
<span class="cp">#define   VGA_MSR_CGA_MODE (1&lt;&lt;0)</span>

<span class="cp">#define VGA_SR_INDEX 0x3c4</span>
<span class="cp">#define VGA_SR_DATA 0x3c5</span>

<span class="cp">#define VGA_AR_INDEX 0x3c0</span>
<span class="cp">#define   VGA_AR_VID_EN (1&lt;&lt;5)</span>
<span class="cp">#define VGA_AR_DATA_WRITE 0x3c0</span>
<span class="cp">#define VGA_AR_DATA_READ 0x3c1</span>

<span class="cp">#define VGA_GR_INDEX 0x3ce</span>
<span class="cp">#define VGA_GR_DATA 0x3cf</span>
<span class="cm">/* GR05 */</span>
<span class="cp">#define   VGA_GR_MEM_READ_MODE_SHIFT 3</span>
<span class="cp">#define     VGA_GR_MEM_READ_MODE_PLANE 1</span>
<span class="cm">/* GR06 */</span>
<span class="cp">#define   VGA_GR_MEM_MODE_MASK 0xc</span>
<span class="cp">#define   VGA_GR_MEM_MODE_SHIFT 2</span>
<span class="cp">#define   VGA_GR_MEM_A0000_AFFFF 0</span>
<span class="cp">#define   VGA_GR_MEM_A0000_BFFFF 1</span>
<span class="cp">#define   VGA_GR_MEM_B0000_B7FFF 2</span>
<span class="cp">#define   VGA_GR_MEM_B0000_BFFFF 3</span>

<span class="cp">#define VGA_DACMASK 0x3c6</span>
<span class="cp">#define VGA_DACRX 0x3c7</span>
<span class="cp">#define VGA_DACWX 0x3c8</span>
<span class="cp">#define VGA_DACDATA 0x3c9</span>

<span class="cp">#define VGA_CR_INDEX_MDA 0x3b4</span>
<span class="cp">#define VGA_CR_DATA_MDA 0x3b5</span>
<span class="cp">#define VGA_CR_INDEX_CGA 0x3d4</span>
<span class="cp">#define VGA_CR_DATA_CGA 0x3d5</span>

<span class="cm">/*</span>
<span class="cm"> * Memory interface instructions used by the kernel</span>
<span class="cm"> */</span>
<span class="cp">#define MI_INSTR(opcode, flags) (((opcode) &lt;&lt; 23) | (flags))</span>

<span class="cp">#define MI_NOOP			MI_INSTR(0, 0)</span>
<span class="cp">#define MI_USER_INTERRUPT	MI_INSTR(0x02, 0)</span>
<span class="cp">#define MI_WAIT_FOR_EVENT       MI_INSTR(0x03, 0)</span>
<span class="cp">#define   MI_WAIT_FOR_OVERLAY_FLIP	(1&lt;&lt;16)</span>
<span class="cp">#define   MI_WAIT_FOR_PLANE_B_FLIP      (1&lt;&lt;6)</span>
<span class="cp">#define   MI_WAIT_FOR_PLANE_A_FLIP      (1&lt;&lt;2)</span>
<span class="cp">#define   MI_WAIT_FOR_PLANE_A_SCANLINES (1&lt;&lt;1)</span>
<span class="cp">#define MI_FLUSH		MI_INSTR(0x04, 0)</span>
<span class="cp">#define   MI_READ_FLUSH		(1 &lt;&lt; 0)</span>
<span class="cp">#define   MI_EXE_FLUSH		(1 &lt;&lt; 1)</span>
<span class="cp">#define   MI_NO_WRITE_FLUSH	(1 &lt;&lt; 2)</span>
<span class="cp">#define   MI_SCENE_COUNT	(1 &lt;&lt; 3) </span><span class="cm">/* just increment scene count */</span><span class="cp"></span>
<span class="cp">#define   MI_END_SCENE		(1 &lt;&lt; 4) </span><span class="cm">/* flush binner and incr scene count */</span><span class="cp"></span>
<span class="cp">#define   MI_INVALIDATE_ISP	(1 &lt;&lt; 5) </span><span class="cm">/* invalidate indirect state pointers */</span><span class="cp"></span>
<span class="cp">#define MI_BATCH_BUFFER_END	MI_INSTR(0x0a, 0)</span>
<span class="cp">#define MI_SUSPEND_FLUSH	MI_INSTR(0x0b, 0)</span>
<span class="cp">#define   MI_SUSPEND_FLUSH_EN	(1&lt;&lt;0)</span>
<span class="cp">#define MI_REPORT_HEAD		MI_INSTR(0x07, 0)</span>
<span class="cp">#define MI_OVERLAY_FLIP		MI_INSTR(0x11, 0)</span>
<span class="cp">#define   MI_OVERLAY_CONTINUE	(0x0&lt;&lt;21)</span>
<span class="cp">#define   MI_OVERLAY_ON		(0x1&lt;&lt;21)</span>
<span class="cp">#define   MI_OVERLAY_OFF	(0x2&lt;&lt;21)</span>
<span class="cp">#define MI_LOAD_SCAN_LINES_INCL MI_INSTR(0x12, 0)</span>
<span class="cp">#define MI_DISPLAY_FLIP		MI_INSTR(0x14, 2)</span>
<span class="cp">#define MI_DISPLAY_FLIP_I915	MI_INSTR(0x14, 1)</span>
<span class="cp">#define   MI_DISPLAY_FLIP_PLANE(n) ((n) &lt;&lt; 20)</span>
<span class="cm">/* IVB has funny definitions for which plane to flip. */</span>
<span class="cp">#define   MI_DISPLAY_FLIP_IVB_PLANE_A  (0 &lt;&lt; 19)</span>
<span class="cp">#define   MI_DISPLAY_FLIP_IVB_PLANE_B  (1 &lt;&lt; 19)</span>
<span class="cp">#define   MI_DISPLAY_FLIP_IVB_SPRITE_A (2 &lt;&lt; 19)</span>
<span class="cp">#define   MI_DISPLAY_FLIP_IVB_SPRITE_B (3 &lt;&lt; 19)</span>
<span class="cp">#define   MI_DISPLAY_FLIP_IVB_PLANE_C  (4 &lt;&lt; 19)</span>
<span class="cp">#define   MI_DISPLAY_FLIP_IVB_SPRITE_C (5 &lt;&lt; 19)</span>

<span class="cp">#define MI_SET_CONTEXT		MI_INSTR(0x18, 0)</span>
<span class="cp">#define   MI_MM_SPACE_GTT		(1&lt;&lt;8)</span>
<span class="cp">#define   MI_MM_SPACE_PHYSICAL		(0&lt;&lt;8)</span>
<span class="cp">#define   MI_SAVE_EXT_STATE_EN		(1&lt;&lt;3)</span>
<span class="cp">#define   MI_RESTORE_EXT_STATE_EN	(1&lt;&lt;2)</span>
<span class="cp">#define   MI_FORCE_RESTORE		(1&lt;&lt;1)</span>
<span class="cp">#define   MI_RESTORE_INHIBIT		(1&lt;&lt;0)</span>
<span class="cp">#define MI_STORE_DWORD_IMM	MI_INSTR(0x20, 1)</span>
<span class="cp">#define   MI_MEM_VIRTUAL	(1 &lt;&lt; 22) </span><span class="cm">/* 965+ only */</span><span class="cp"></span>
<span class="cp">#define MI_STORE_DWORD_INDEX	MI_INSTR(0x21, 1)</span>
<span class="cp">#define   MI_STORE_DWORD_INDEX_SHIFT 2</span>
<span class="cm">/* Official intel docs are somewhat sloppy concerning MI_LOAD_REGISTER_IMM:</span>
<span class="cm"> * - Always issue a MI_NOOP _before_ the MI_LOAD_REGISTER_IMM - otherwise hw</span>
<span class="cm"> *   simply ignores the register load under certain conditions.</span>
<span class="cm"> * - One can actually load arbitrary many arbitrary registers: Simply issue x</span>
<span class="cm"> *   address/value pairs. Don&#39;t overdue it, though, x &lt;= 2^4 must hold!</span>
<span class="cm"> */</span>
<span class="cp">#define MI_LOAD_REGISTER_IMM(x)	MI_INSTR(0x22, 2*x-1)</span>
<span class="cp">#define MI_FLUSH_DW		MI_INSTR(0x26, 1) </span><span class="cm">/* for GEN6 */</span><span class="cp"></span>
<span class="cp">#define   MI_INVALIDATE_TLB	(1&lt;&lt;18)</span>
<span class="cp">#define   MI_INVALIDATE_BSD	(1&lt;&lt;7)</span>
<span class="cp">#define MI_BATCH_BUFFER		MI_INSTR(0x30, 1)</span>
<span class="cp">#define   MI_BATCH_NON_SECURE	(1)</span>
<span class="cp">#define   MI_BATCH_NON_SECURE_I965 (1&lt;&lt;8)</span>
<span class="cp">#define MI_BATCH_BUFFER_START	MI_INSTR(0x31, 0)</span>
<span class="cp">#define   MI_BATCH_GTT		    (2&lt;&lt;6) </span><span class="cm">/* aliased with (1&lt;&lt;7) on gen4 */</span><span class="cp"></span>
<span class="cp">#define MI_SEMAPHORE_MBOX	MI_INSTR(0x16, 1) </span><span class="cm">/* gen6+ */</span><span class="cp"></span>
<span class="cp">#define  MI_SEMAPHORE_GLOBAL_GTT    (1&lt;&lt;22)</span>
<span class="cp">#define  MI_SEMAPHORE_UPDATE	    (1&lt;&lt;21)</span>
<span class="cp">#define  MI_SEMAPHORE_COMPARE	    (1&lt;&lt;20)</span>
<span class="cp">#define  MI_SEMAPHORE_REGISTER	    (1&lt;&lt;18)</span>
<span class="cp">#define  MI_SEMAPHORE_SYNC_RV	    (2&lt;&lt;16)</span>
<span class="cp">#define  MI_SEMAPHORE_SYNC_RB	    (0&lt;&lt;16)</span>
<span class="cp">#define  MI_SEMAPHORE_SYNC_VR	    (0&lt;&lt;16)</span>
<span class="cp">#define  MI_SEMAPHORE_SYNC_VB	    (2&lt;&lt;16)</span>
<span class="cp">#define  MI_SEMAPHORE_SYNC_BR	    (2&lt;&lt;16)</span>
<span class="cp">#define  MI_SEMAPHORE_SYNC_BV	    (0&lt;&lt;16)</span>
<span class="cp">#define  MI_SEMAPHORE_SYNC_INVALID  (1&lt;&lt;0)</span>
<span class="cm">/*</span>
<span class="cm"> * 3D instructions used by the kernel</span>
<span class="cm"> */</span>
<span class="cp">#define GFX_INSTR(opcode, flags) ((0x3 &lt;&lt; 29) | ((opcode) &lt;&lt; 24) | (flags))</span>

<span class="cp">#define GFX_OP_RASTER_RULES    ((0x3&lt;&lt;29)|(0x7&lt;&lt;24))</span>
<span class="cp">#define GFX_OP_SCISSOR         ((0x3&lt;&lt;29)|(0x1c&lt;&lt;24)|(0x10&lt;&lt;19))</span>
<span class="cp">#define   SC_UPDATE_SCISSOR       (0x1&lt;&lt;1)</span>
<span class="cp">#define   SC_ENABLE_MASK          (0x1&lt;&lt;0)</span>
<span class="cp">#define   SC_ENABLE               (0x1&lt;&lt;0)</span>
<span class="cp">#define GFX_OP_LOAD_INDIRECT   ((0x3&lt;&lt;29)|(0x1d&lt;&lt;24)|(0x7&lt;&lt;16))</span>
<span class="cp">#define GFX_OP_SCISSOR_INFO    ((0x3&lt;&lt;29)|(0x1d&lt;&lt;24)|(0x81&lt;&lt;16)|(0x1))</span>
<span class="cp">#define   SCI_YMIN_MASK      (0xffff&lt;&lt;16)</span>
<span class="cp">#define   SCI_XMIN_MASK      (0xffff&lt;&lt;0)</span>
<span class="cp">#define   SCI_YMAX_MASK      (0xffff&lt;&lt;16)</span>
<span class="cp">#define   SCI_XMAX_MASK      (0xffff&lt;&lt;0)</span>
<span class="cp">#define GFX_OP_SCISSOR_ENABLE	 ((0x3&lt;&lt;29)|(0x1c&lt;&lt;24)|(0x10&lt;&lt;19))</span>
<span class="cp">#define GFX_OP_SCISSOR_RECT	 ((0x3&lt;&lt;29)|(0x1d&lt;&lt;24)|(0x81&lt;&lt;16)|1)</span>
<span class="cp">#define GFX_OP_COLOR_FACTOR      ((0x3&lt;&lt;29)|(0x1d&lt;&lt;24)|(0x1&lt;&lt;16)|0x0)</span>
<span class="cp">#define GFX_OP_STIPPLE           ((0x3&lt;&lt;29)|(0x1d&lt;&lt;24)|(0x83&lt;&lt;16))</span>
<span class="cp">#define GFX_OP_MAP_INFO          ((0x3&lt;&lt;29)|(0x1d&lt;&lt;24)|0x4)</span>
<span class="cp">#define GFX_OP_DESTBUFFER_VARS   ((0x3&lt;&lt;29)|(0x1d&lt;&lt;24)|(0x85&lt;&lt;16)|0x0)</span>
<span class="cp">#define GFX_OP_DESTBUFFER_INFO	 ((0x3&lt;&lt;29)|(0x1d&lt;&lt;24)|(0x8e&lt;&lt;16)|1)</span>
<span class="cp">#define GFX_OP_DRAWRECT_INFO     ((0x3&lt;&lt;29)|(0x1d&lt;&lt;24)|(0x80&lt;&lt;16)|(0x3))</span>
<span class="cp">#define GFX_OP_DRAWRECT_INFO_I965  ((0x7900&lt;&lt;16)|0x2)</span>
<span class="cp">#define SRC_COPY_BLT_CMD                ((2&lt;&lt;29)|(0x43&lt;&lt;22)|4)</span>
<span class="cp">#define XY_SRC_COPY_BLT_CMD		((2&lt;&lt;29)|(0x53&lt;&lt;22)|6)</span>
<span class="cp">#define XY_MONO_SRC_COPY_IMM_BLT	((2&lt;&lt;29)|(0x71&lt;&lt;22)|5)</span>
<span class="cp">#define XY_SRC_COPY_BLT_WRITE_ALPHA	(1&lt;&lt;21)</span>
<span class="cp">#define XY_SRC_COPY_BLT_WRITE_RGB	(1&lt;&lt;20)</span>
<span class="cp">#define   BLT_DEPTH_8			(0&lt;&lt;24)</span>
<span class="cp">#define   BLT_DEPTH_16_565		(1&lt;&lt;24)</span>
<span class="cp">#define   BLT_DEPTH_16_1555		(2&lt;&lt;24)</span>
<span class="cp">#define   BLT_DEPTH_32			(3&lt;&lt;24)</span>
<span class="cp">#define   BLT_ROP_GXCOPY		(0xcc&lt;&lt;16)</span>
<span class="cp">#define XY_SRC_COPY_BLT_SRC_TILED	(1&lt;&lt;15) </span><span class="cm">/* 965+ only */</span><span class="cp"></span>
<span class="cp">#define XY_SRC_COPY_BLT_DST_TILED	(1&lt;&lt;11) </span><span class="cm">/* 965+ only */</span><span class="cp"></span>
<span class="cp">#define CMD_OP_DISPLAYBUFFER_INFO ((0x0&lt;&lt;29)|(0x14&lt;&lt;23)|2)</span>
<span class="cp">#define   ASYNC_FLIP                (1&lt;&lt;22)</span>
<span class="cp">#define   DISPLAY_PLANE_A           (0&lt;&lt;20)</span>
<span class="cp">#define   DISPLAY_PLANE_B           (1&lt;&lt;20)</span>
<span class="cp">#define GFX_OP_PIPE_CONTROL(len)	((0x3&lt;&lt;29)|(0x3&lt;&lt;27)|(0x2&lt;&lt;24)|(len-2))</span>
<span class="cp">#define   PIPE_CONTROL_CS_STALL				(1&lt;&lt;20)</span>
<span class="cp">#define   PIPE_CONTROL_QW_WRITE				(1&lt;&lt;14)</span>
<span class="cp">#define   PIPE_CONTROL_DEPTH_STALL			(1&lt;&lt;13)</span>
<span class="cp">#define   PIPE_CONTROL_WRITE_FLUSH			(1&lt;&lt;12)</span>
<span class="cp">#define   PIPE_CONTROL_RENDER_TARGET_CACHE_FLUSH	(1&lt;&lt;12) </span><span class="cm">/* gen6+ */</span><span class="cp"></span>
<span class="cp">#define   PIPE_CONTROL_INSTRUCTION_CACHE_INVALIDATE	(1&lt;&lt;11) </span><span class="cm">/* MBZ on Ironlake */</span><span class="cp"></span>
<span class="cp">#define   PIPE_CONTROL_TEXTURE_CACHE_INVALIDATE		(1&lt;&lt;10) </span><span class="cm">/* GM45+ only */</span><span class="cp"></span>
<span class="cp">#define   PIPE_CONTROL_INDIRECT_STATE_DISABLE		(1&lt;&lt;9)</span>
<span class="cp">#define   PIPE_CONTROL_NOTIFY				(1&lt;&lt;8)</span>
<span class="cp">#define   PIPE_CONTROL_VF_CACHE_INVALIDATE		(1&lt;&lt;4)</span>
<span class="cp">#define   PIPE_CONTROL_CONST_CACHE_INVALIDATE		(1&lt;&lt;3)</span>
<span class="cp">#define   PIPE_CONTROL_STATE_CACHE_INVALIDATE		(1&lt;&lt;2)</span>
<span class="cp">#define   PIPE_CONTROL_STALL_AT_SCOREBOARD		(1&lt;&lt;1)</span>
<span class="cp">#define   PIPE_CONTROL_DEPTH_CACHE_FLUSH		(1&lt;&lt;0)</span>
<span class="cp">#define   PIPE_CONTROL_GLOBAL_GTT (1&lt;&lt;2) </span><span class="cm">/* in addr dword */</span><span class="cp"></span>


<span class="cm">/*</span>
<span class="cm"> * Reset registers</span>
<span class="cm"> */</span>
<span class="cp">#define DEBUG_RESET_I830		0x6070</span>
<span class="cp">#define  DEBUG_RESET_FULL		(1&lt;&lt;7)</span>
<span class="cp">#define  DEBUG_RESET_RENDER		(1&lt;&lt;8)</span>
<span class="cp">#define  DEBUG_RESET_DISPLAY		(1&lt;&lt;9)</span>

<span class="cm">/*</span>
<span class="cm"> * DPIO - a special bus for various display related registers to hide behind:</span>
<span class="cm"> *  0x800c: m1, m2, n, p1, p2, k dividers</span>
<span class="cm"> *  0x8014: REF and SFR select</span>
<span class="cm"> *  0x8014: N divider, VCO select</span>
<span class="cm"> *  0x801c/3c: core clock bits</span>
<span class="cm"> *  0x8048/68: low pass filter coefficients</span>
<span class="cm"> *  0x8100: fast clock controls</span>
<span class="cm"> */</span>
<span class="cp">#define DPIO_PKT			0x2100</span>
<span class="cp">#define  DPIO_RID			(0&lt;&lt;24)</span>
<span class="cp">#define  DPIO_OP_WRITE			(1&lt;&lt;16)</span>
<span class="cp">#define  DPIO_OP_READ			(0&lt;&lt;16)</span>
<span class="cp">#define  DPIO_PORTID			(0x12&lt;&lt;8)</span>
<span class="cp">#define  DPIO_BYTE			(0xf&lt;&lt;4)</span>
<span class="cp">#define  DPIO_BUSY			(1&lt;&lt;0) </span><span class="cm">/* status only */</span><span class="cp"></span>
<span class="cp">#define DPIO_DATA			0x2104</span>
<span class="cp">#define DPIO_REG			0x2108</span>
<span class="cp">#define DPIO_CTL			0x2110</span>
<span class="cp">#define  DPIO_MODSEL1			(1&lt;&lt;3) </span><span class="cm">/* if ref clk b == 27 */</span><span class="cp"></span>
<span class="cp">#define  DPIO_MODSEL0			(1&lt;&lt;2) </span><span class="cm">/* if ref clk a == 27 */</span><span class="cp"></span>
<span class="cp">#define  DPIO_SFR_BYPASS		(1&lt;&lt;1)</span>
<span class="cp">#define  DPIO_RESET			(1&lt;&lt;0)</span>

<span class="cp">#define _DPIO_DIV_A			0x800c</span>
<span class="cp">#define   DPIO_POST_DIV_SHIFT		(28) </span><span class="cm">/* 3 bits */</span><span class="cp"></span>
<span class="cp">#define   DPIO_K_SHIFT			(24) </span><span class="cm">/* 4 bits */</span><span class="cp"></span>
<span class="cp">#define   DPIO_P1_SHIFT			(21) </span><span class="cm">/* 3 bits */</span><span class="cp"></span>
<span class="cp">#define   DPIO_P2_SHIFT			(16) </span><span class="cm">/* 5 bits */</span><span class="cp"></span>
<span class="cp">#define   DPIO_N_SHIFT			(12) </span><span class="cm">/* 4 bits */</span><span class="cp"></span>
<span class="cp">#define   DPIO_ENABLE_CALIBRATION	(1&lt;&lt;11)</span>
<span class="cp">#define   DPIO_M1DIV_SHIFT		(8) </span><span class="cm">/* 3 bits */</span><span class="cp"></span>
<span class="cp">#define   DPIO_M2DIV_MASK		0xff</span>
<span class="cp">#define _DPIO_DIV_B			0x802c</span>
<span class="cp">#define DPIO_DIV(pipe) _PIPE(pipe, _DPIO_DIV_A, _DPIO_DIV_B)</span>

<span class="cp">#define _DPIO_REFSFR_A			0x8014</span>
<span class="cp">#define   DPIO_REFSEL_OVERRIDE		27</span>
<span class="cp">#define   DPIO_PLL_MODESEL_SHIFT	24 </span><span class="cm">/* 3 bits */</span><span class="cp"></span>
<span class="cp">#define   DPIO_BIAS_CURRENT_CTL_SHIFT	21 </span><span class="cm">/* 3 bits, always 0x7 */</span><span class="cp"></span>
<span class="cp">#define   DPIO_PLL_REFCLK_SEL_SHIFT	16 </span><span class="cm">/* 2 bits */</span><span class="cp"></span>
<span class="cp">#define   DPIO_DRIVER_CTL_SHIFT		12 </span><span class="cm">/* always set to 0x8 */</span><span class="cp"></span>
<span class="cp">#define   DPIO_CLK_BIAS_CTL_SHIFT	8 </span><span class="cm">/* always set to 0x5 */</span><span class="cp"></span>
<span class="cp">#define _DPIO_REFSFR_B			0x8034</span>
<span class="cp">#define DPIO_REFSFR(pipe) _PIPE(pipe, _DPIO_REFSFR_A, _DPIO_REFSFR_B)</span>

<span class="cp">#define _DPIO_CORE_CLK_A		0x801c</span>
<span class="cp">#define _DPIO_CORE_CLK_B		0x803c</span>
<span class="cp">#define DPIO_CORE_CLK(pipe) _PIPE(pipe, _DPIO_CORE_CLK_A, _DPIO_CORE_CLK_B)</span>

<span class="cp">#define _DPIO_LFP_COEFF_A		0x8048</span>
<span class="cp">#define _DPIO_LFP_COEFF_B		0x8068</span>
<span class="cp">#define DPIO_LFP_COEFF(pipe) _PIPE(pipe, _DPIO_LFP_COEFF_A, _DPIO_LFP_COEFF_B)</span>

<span class="cp">#define DPIO_FASTCLK_DISABLE		0x8100</span>

<span class="cm">/*</span>
<span class="cm"> * Fence registers</span>
<span class="cm"> */</span>
<span class="cp">#define FENCE_REG_830_0			0x2000</span>
<span class="cp">#define FENCE_REG_945_8			0x3000</span>
<span class="cp">#define   I830_FENCE_START_MASK		0x07f80000</span>
<span class="cp">#define   I830_FENCE_TILING_Y_SHIFT	12</span>
<span class="cp">#define   I830_FENCE_SIZE_BITS(size)	((ffs((size) &gt;&gt; 19) - 1) &lt;&lt; 8)</span>
<span class="cp">#define   I830_FENCE_PITCH_SHIFT	4</span>
<span class="cp">#define   I830_FENCE_REG_VALID		(1&lt;&lt;0)</span>
<span class="cp">#define   I915_FENCE_MAX_PITCH_VAL	4</span>
<span class="cp">#define   I830_FENCE_MAX_PITCH_VAL	6</span>
<span class="cp">#define   I830_FENCE_MAX_SIZE_VAL	(1&lt;&lt;8)</span>

<span class="cp">#define   I915_FENCE_START_MASK		0x0ff00000</span>
<span class="cp">#define   I915_FENCE_SIZE_BITS(size)	((ffs((size) &gt;&gt; 20) - 1) &lt;&lt; 8)</span>

<span class="cp">#define FENCE_REG_965_0			0x03000</span>
<span class="cp">#define   I965_FENCE_PITCH_SHIFT	2</span>
<span class="cp">#define   I965_FENCE_TILING_Y_SHIFT	1</span>
<span class="cp">#define   I965_FENCE_REG_VALID		(1&lt;&lt;0)</span>
<span class="cp">#define   I965_FENCE_MAX_PITCH_VAL	0x0400</span>

<span class="cp">#define FENCE_REG_SANDYBRIDGE_0		0x100000</span>
<span class="cp">#define   SANDYBRIDGE_FENCE_PITCH_SHIFT	32</span>

<span class="cm">/* control register for cpu gtt access */</span>
<span class="cp">#define TILECTL				0x101000</span>
<span class="cp">#define   TILECTL_SWZCTL			(1 &lt;&lt; 0)</span>
<span class="cp">#define   TILECTL_TLB_PREFETCH_DIS	(1 &lt;&lt; 2)</span>
<span class="cp">#define   TILECTL_BACKSNOOP_DIS		(1 &lt;&lt; 3)</span>

<span class="cm">/*</span>
<span class="cm"> * Instruction and interrupt control regs</span>
<span class="cm"> */</span>
<span class="cp">#define PGTBL_ER	0x02024</span>
<span class="cp">#define RENDER_RING_BASE	0x02000</span>
<span class="cp">#define BSD_RING_BASE		0x04000</span>
<span class="cp">#define GEN6_BSD_RING_BASE	0x12000</span>
<span class="cp">#define BLT_RING_BASE		0x22000</span>
<span class="cp">#define RING_TAIL(base)		((base)+0x30)</span>
<span class="cp">#define RING_HEAD(base)		((base)+0x34)</span>
<span class="cp">#define RING_START(base)	((base)+0x38)</span>
<span class="cp">#define RING_CTL(base)		((base)+0x3c)</span>
<span class="cp">#define RING_SYNC_0(base)	((base)+0x40)</span>
<span class="cp">#define RING_SYNC_1(base)	((base)+0x44)</span>
<span class="cp">#define GEN6_RVSYNC (RING_SYNC_0(RENDER_RING_BASE))</span>
<span class="cp">#define GEN6_RBSYNC (RING_SYNC_1(RENDER_RING_BASE))</span>
<span class="cp">#define GEN6_VRSYNC (RING_SYNC_1(GEN6_BSD_RING_BASE))</span>
<span class="cp">#define GEN6_VBSYNC (RING_SYNC_0(GEN6_BSD_RING_BASE))</span>
<span class="cp">#define GEN6_BRSYNC (RING_SYNC_0(BLT_RING_BASE))</span>
<span class="cp">#define GEN6_BVSYNC (RING_SYNC_1(BLT_RING_BASE))</span>
<span class="cp">#define RING_MAX_IDLE(base)	((base)+0x54)</span>
<span class="cp">#define RING_HWS_PGA(base)	((base)+0x80)</span>
<span class="cp">#define RING_HWS_PGA_GEN6(base)	((base)+0x2080)</span>
<span class="cp">#define ARB_MODE		0x04030</span>
<span class="cp">#define   ARB_MODE_SWIZZLE_SNB	(1&lt;&lt;4)</span>
<span class="cp">#define   ARB_MODE_SWIZZLE_IVB	(1&lt;&lt;5)</span>
<span class="cp">#define RENDER_HWS_PGA_GEN7	(0x04080)</span>
<span class="cp">#define RING_FAULT_REG(ring)	(0x4094 + 0x100*(ring)-&gt;id)</span>
<span class="cp">#define DONE_REG		0x40b0</span>
<span class="cp">#define BSD_HWS_PGA_GEN7	(0x04180)</span>
<span class="cp">#define BLT_HWS_PGA_GEN7	(0x04280)</span>
<span class="cp">#define RING_ACTHD(base)	((base)+0x74)</span>
<span class="cp">#define RING_NOPID(base)	((base)+0x94)</span>
<span class="cp">#define RING_IMR(base)		((base)+0xa8)</span>
<span class="cp">#define   TAIL_ADDR		0x001FFFF8</span>
<span class="cp">#define   HEAD_WRAP_COUNT	0xFFE00000</span>
<span class="cp">#define   HEAD_WRAP_ONE		0x00200000</span>
<span class="cp">#define   HEAD_ADDR		0x001FFFFC</span>
<span class="cp">#define   RING_NR_PAGES		0x001FF000</span>
<span class="cp">#define   RING_REPORT_MASK	0x00000006</span>
<span class="cp">#define   RING_REPORT_64K	0x00000002</span>
<span class="cp">#define   RING_REPORT_128K	0x00000004</span>
<span class="cp">#define   RING_NO_REPORT	0x00000000</span>
<span class="cp">#define   RING_VALID_MASK	0x00000001</span>
<span class="cp">#define   RING_VALID		0x00000001</span>
<span class="cp">#define   RING_INVALID		0x00000000</span>
<span class="cp">#define   RING_WAIT_I8XX	(1&lt;&lt;0) </span><span class="cm">/* gen2, PRBx_HEAD */</span><span class="cp"></span>
<span class="cp">#define   RING_WAIT		(1&lt;&lt;11) </span><span class="cm">/* gen3+, PRBx_CTL */</span><span class="cp"></span>
<span class="cp">#define   RING_WAIT_SEMAPHORE	(1&lt;&lt;10) </span><span class="cm">/* gen6+ */</span><span class="cp"></span>
<span class="cp">#if 0</span><span class="c"></span>
<span class="c">#define PRB0_TAIL	0x02030</span>
<span class="c">#define PRB0_HEAD	0x02034</span>
<span class="c">#define PRB0_START	0x02038</span>
<span class="c">#define PRB0_CTL	0x0203c</span>
<span class="c">#define PRB1_TAIL	0x02040 /* 915+ only */</span>
<span class="c">#define PRB1_HEAD	0x02044 /* 915+ only */</span>
<span class="c">#define PRB1_START	0x02048 /* 915+ only */</span>
<span class="c">#define PRB1_CTL	0x0204c /* 915+ only */</span>
<span class="cp">#endif</span>
<span class="cp">#define IPEIR_I965	0x02064</span>
<span class="cp">#define IPEHR_I965	0x02068</span>
<span class="cp">#define INSTDONE_I965	0x0206c</span>
<span class="cp">#define RING_IPEIR(base)	((base)+0x64)</span>
<span class="cp">#define RING_IPEHR(base)	((base)+0x68)</span>
<span class="cp">#define RING_INSTDONE(base)	((base)+0x6c)</span>
<span class="cp">#define RING_INSTPS(base)	((base)+0x70)</span>
<span class="cp">#define RING_DMA_FADD(base)	((base)+0x78)</span>
<span class="cp">#define RING_INSTPM(base)	((base)+0xc0)</span>
<span class="cp">#define INSTPS		0x02070 </span><span class="cm">/* 965+ only */</span><span class="cp"></span>
<span class="cp">#define INSTDONE1	0x0207c </span><span class="cm">/* 965+ only */</span><span class="cp"></span>
<span class="cp">#define ACTHD_I965	0x02074</span>
<span class="cp">#define HWS_PGA		0x02080</span>
<span class="cp">#define HWS_ADDRESS_MASK	0xfffff000</span>
<span class="cp">#define HWS_START_ADDRESS_SHIFT	4</span>
<span class="cp">#define PWRCTXA		0x2088 </span><span class="cm">/* 965GM+ only */</span><span class="cp"></span>
<span class="cp">#define   PWRCTX_EN	(1&lt;&lt;0)</span>
<span class="cp">#define IPEIR		0x02088</span>
<span class="cp">#define IPEHR		0x0208c</span>
<span class="cp">#define INSTDONE	0x02090</span>
<span class="cp">#define NOPID		0x02094</span>
<span class="cp">#define HWSTAM		0x02098</span>
<span class="cp">#define DMA_FADD_I8XX	0x020d0</span>

<span class="cp">#define ERROR_GEN6	0x040a0</span>

<span class="cm">/* GM45+ chicken bits -- debug workaround bits that may be required</span>
<span class="cm"> * for various sorts of correct behavior.  The top 16 bits of each are</span>
<span class="cm"> * the enables for writing to the corresponding low bit.</span>
<span class="cm"> */</span>
<span class="cp">#define _3D_CHICKEN	0x02084</span>
<span class="cp">#define _3D_CHICKEN2	0x0208c</span>
<span class="cm">/* Disables pipelining of read flushes past the SF-WIZ interface.</span>
<span class="cm"> * Required on all Ironlake steppings according to the B-Spec, but the</span>
<span class="cm"> * particular danger of not doing so is not specified.</span>
<span class="cm"> */</span>
<span class="cp"># define _3D_CHICKEN2_WM_READ_PIPELINED			(1 &lt;&lt; 14)</span>
<span class="cp">#define _3D_CHICKEN3	0x02090</span>
<span class="cp">#define  _3D_CHICKEN_SF_DISABLE_FASTCLIP_CULL		(1 &lt;&lt; 5)</span>

<span class="cp">#define MI_MODE		0x0209c</span>
<span class="cp"># define VS_TIMER_DISPATCH				(1 &lt;&lt; 6)</span>
<span class="cp"># define MI_FLUSH_ENABLE				(1 &lt;&lt; 12)</span>

<span class="cp">#define GFX_MODE	0x02520</span>
<span class="cp">#define GFX_MODE_GEN7	0x0229c</span>
<span class="cp">#define RING_MODE_GEN7(ring)	((ring)-&gt;mmio_base+0x29c)</span>
<span class="cp">#define   GFX_RUN_LIST_ENABLE		(1&lt;&lt;15)</span>
<span class="cp">#define   GFX_TLB_INVALIDATE_ALWAYS	(1&lt;&lt;13)</span>
<span class="cp">#define   GFX_SURFACE_FAULT_ENABLE	(1&lt;&lt;12)</span>
<span class="cp">#define   GFX_REPLAY_MODE		(1&lt;&lt;11)</span>
<span class="cp">#define   GFX_PSMI_GRANULARITY		(1&lt;&lt;10)</span>
<span class="cp">#define   GFX_PPGTT_ENABLE		(1&lt;&lt;9)</span>

<span class="cp">#define SCPD0		0x0209c </span><span class="cm">/* 915+ only */</span><span class="cp"></span>
<span class="cp">#define IER		0x020a0</span>
<span class="cp">#define IIR		0x020a4</span>
<span class="cp">#define IMR		0x020a8</span>
<span class="cp">#define ISR		0x020ac</span>
<span class="cp">#define VLV_IIR_RW	0x182084</span>
<span class="cp">#define VLV_IER		0x1820a0</span>
<span class="cp">#define VLV_IIR		0x1820a4</span>
<span class="cp">#define VLV_IMR		0x1820a8</span>
<span class="cp">#define VLV_ISR		0x1820ac</span>
<span class="cp">#define   I915_PIPE_CONTROL_NOTIFY_INTERRUPT		(1&lt;&lt;18)</span>
<span class="cp">#define   I915_DISPLAY_PORT_INTERRUPT			(1&lt;&lt;17)</span>
<span class="cp">#define   I915_RENDER_COMMAND_PARSER_ERROR_INTERRUPT	(1&lt;&lt;15)</span>
<span class="cp">#define   I915_GMCH_THERMAL_SENSOR_EVENT_INTERRUPT	(1&lt;&lt;14) </span><span class="cm">/* p-state */</span><span class="cp"></span>
<span class="cp">#define   I915_HWB_OOM_INTERRUPT			(1&lt;&lt;13)</span>
<span class="cp">#define   I915_SYNC_STATUS_INTERRUPT			(1&lt;&lt;12)</span>
<span class="cp">#define   I915_DISPLAY_PLANE_A_FLIP_PENDING_INTERRUPT	(1&lt;&lt;11)</span>
<span class="cp">#define   I915_DISPLAY_PLANE_B_FLIP_PENDING_INTERRUPT	(1&lt;&lt;10)</span>
<span class="cp">#define   I915_OVERLAY_PLANE_FLIP_PENDING_INTERRUPT	(1&lt;&lt;9)</span>
<span class="cp">#define   I915_DISPLAY_PLANE_C_FLIP_PENDING_INTERRUPT	(1&lt;&lt;8)</span>
<span class="cp">#define   I915_DISPLAY_PIPE_A_VBLANK_INTERRUPT		(1&lt;&lt;7)</span>
<span class="cp">#define   I915_DISPLAY_PIPE_A_EVENT_INTERRUPT		(1&lt;&lt;6)</span>
<span class="cp">#define   I915_DISPLAY_PIPE_B_VBLANK_INTERRUPT		(1&lt;&lt;5)</span>
<span class="cp">#define   I915_DISPLAY_PIPE_B_EVENT_INTERRUPT		(1&lt;&lt;4)</span>
<span class="cp">#define   I915_DEBUG_INTERRUPT				(1&lt;&lt;2)</span>
<span class="cp">#define   I915_USER_INTERRUPT				(1&lt;&lt;1)</span>
<span class="cp">#define   I915_ASLE_INTERRUPT				(1&lt;&lt;0)</span>
<span class="cp">#define   I915_BSD_USER_INTERRUPT                      (1&lt;&lt;25)</span>
<span class="cp">#define EIR		0x020b0</span>
<span class="cp">#define EMR		0x020b4</span>
<span class="cp">#define ESR		0x020b8</span>
<span class="cp">#define   GM45_ERROR_PAGE_TABLE				(1&lt;&lt;5)</span>
<span class="cp">#define   GM45_ERROR_MEM_PRIV				(1&lt;&lt;4)</span>
<span class="cp">#define   I915_ERROR_PAGE_TABLE				(1&lt;&lt;4)</span>
<span class="cp">#define   GM45_ERROR_CP_PRIV				(1&lt;&lt;3)</span>
<span class="cp">#define   I915_ERROR_MEMORY_REFRESH			(1&lt;&lt;1)</span>
<span class="cp">#define   I915_ERROR_INSTRUCTION			(1&lt;&lt;0)</span>
<span class="cp">#define INSTPM	        0x020c0</span>
<span class="cp">#define   INSTPM_SELF_EN (1&lt;&lt;12) </span><span class="cm">/* 915GM only */</span><span class="cp"></span>
<span class="cp">#define   INSTPM_AGPBUSY_DIS (1&lt;&lt;11) </span><span class="cm">/* gen3: when disabled, pending interrupts</span>
<span class="cm">					will not assert AGPBUSY# and will only</span>
<span class="cm">					be delivered when out of C3. */</span><span class="cp"></span>
<span class="cp">#define   INSTPM_FORCE_ORDERING				(1&lt;&lt;7) </span><span class="cm">/* GEN6+ */</span><span class="cp"></span>
<span class="cp">#define ACTHD	        0x020c8</span>
<span class="cp">#define FW_BLC		0x020d8</span>
<span class="cp">#define FW_BLC2		0x020dc</span>
<span class="cp">#define FW_BLC_SELF	0x020e0 </span><span class="cm">/* 915+ only */</span><span class="cp"></span>
<span class="cp">#define   FW_BLC_SELF_EN_MASK      (1&lt;&lt;31)</span>
<span class="cp">#define   FW_BLC_SELF_FIFO_MASK    (1&lt;&lt;16) </span><span class="cm">/* 945 only */</span><span class="cp"></span>
<span class="cp">#define   FW_BLC_SELF_EN           (1&lt;&lt;15) </span><span class="cm">/* 945 only */</span><span class="cp"></span>
<span class="cp">#define MM_BURST_LENGTH     0x00700000</span>
<span class="cp">#define MM_FIFO_WATERMARK   0x0001F000</span>
<span class="cp">#define LM_BURST_LENGTH     0x00000700</span>
<span class="cp">#define LM_FIFO_WATERMARK   0x0000001F</span>
<span class="cp">#define MI_ARB_STATE	0x020e4 </span><span class="cm">/* 915+ only */</span><span class="cp"></span>

<span class="cm">/* Make render/texture TLB fetches lower priorty than associated data</span>
<span class="cm"> *   fetches. This is not turned on by default</span>
<span class="cm"> */</span>
<span class="cp">#define   MI_ARB_RENDER_TLB_LOW_PRIORITY	(1 &lt;&lt; 15)</span>

<span class="cm">/* Isoch request wait on GTT enable (Display A/B/C streams).</span>
<span class="cm"> * Make isoch requests stall on the TLB update. May cause</span>
<span class="cm"> * display underruns (test mode only)</span>
<span class="cm"> */</span>
<span class="cp">#define   MI_ARB_ISOCH_WAIT_GTT			(1 &lt;&lt; 14)</span>

<span class="cm">/* Block grant count for isoch requests when block count is</span>
<span class="cm"> * set to a finite value.</span>
<span class="cm"> */</span>
<span class="cp">#define   MI_ARB_BLOCK_GRANT_MASK		(3 &lt;&lt; 12)</span>
<span class="cp">#define   MI_ARB_BLOCK_GRANT_8			(0 &lt;&lt; 12)	</span><span class="cm">/* for 3 display planes */</span><span class="cp"></span>
<span class="cp">#define   MI_ARB_BLOCK_GRANT_4			(1 &lt;&lt; 12)	</span><span class="cm">/* for 2 display planes */</span><span class="cp"></span>
<span class="cp">#define   MI_ARB_BLOCK_GRANT_2			(2 &lt;&lt; 12)	</span><span class="cm">/* for 1 display plane */</span><span class="cp"></span>
<span class="cp">#define   MI_ARB_BLOCK_GRANT_0			(3 &lt;&lt; 12)	</span><span class="cm">/* don&#39;t use */</span><span class="cp"></span>

<span class="cm">/* Enable render writes to complete in C2/C3/C4 power states.</span>
<span class="cm"> * If this isn&#39;t enabled, render writes are prevented in low</span>
<span class="cm"> * power states. That seems bad to me.</span>
<span class="cm"> */</span>
<span class="cp">#define   MI_ARB_C3_LP_WRITE_ENABLE		(1 &lt;&lt; 11)</span>

<span class="cm">/* This acknowledges an async flip immediately instead</span>
<span class="cm"> * of waiting for 2TLB fetches.</span>
<span class="cm"> */</span>
<span class="cp">#define   MI_ARB_ASYNC_FLIP_ACK_IMMEDIATE	(1 &lt;&lt; 10)</span>

<span class="cm">/* Enables non-sequential data reads through arbiter</span>
<span class="cm"> */</span>
<span class="cp">#define   MI_ARB_DUAL_DATA_PHASE_DISABLE	(1 &lt;&lt; 9)</span>

<span class="cm">/* Disable FSB snooping of cacheable write cycles from binner/render</span>
<span class="cm"> * command stream</span>
<span class="cm"> */</span>
<span class="cp">#define   MI_ARB_CACHE_SNOOP_DISABLE		(1 &lt;&lt; 8)</span>

<span class="cm">/* Arbiter time slice for non-isoch streams */</span>
<span class="cp">#define   MI_ARB_TIME_SLICE_MASK		(7 &lt;&lt; 5)</span>
<span class="cp">#define   MI_ARB_TIME_SLICE_1			(0 &lt;&lt; 5)</span>
<span class="cp">#define   MI_ARB_TIME_SLICE_2			(1 &lt;&lt; 5)</span>
<span class="cp">#define   MI_ARB_TIME_SLICE_4			(2 &lt;&lt; 5)</span>
<span class="cp">#define   MI_ARB_TIME_SLICE_6			(3 &lt;&lt; 5)</span>
<span class="cp">#define   MI_ARB_TIME_SLICE_8			(4 &lt;&lt; 5)</span>
<span class="cp">#define   MI_ARB_TIME_SLICE_10			(5 &lt;&lt; 5)</span>
<span class="cp">#define   MI_ARB_TIME_SLICE_14			(6 &lt;&lt; 5)</span>
<span class="cp">#define   MI_ARB_TIME_SLICE_16			(7 &lt;&lt; 5)</span>

<span class="cm">/* Low priority grace period page size */</span>
<span class="cp">#define   MI_ARB_LOW_PRIORITY_GRACE_4KB		(0 &lt;&lt; 4)	</span><span class="cm">/* default */</span><span class="cp"></span>
<span class="cp">#define   MI_ARB_LOW_PRIORITY_GRACE_8KB		(1 &lt;&lt; 4)</span>

<span class="cm">/* Disable display A/B trickle feed */</span>
<span class="cp">#define   MI_ARB_DISPLAY_TRICKLE_FEED_DISABLE	(1 &lt;&lt; 2)</span>

<span class="cm">/* Set display plane priority */</span>
<span class="cp">#define   MI_ARB_DISPLAY_PRIORITY_A_B		(0 &lt;&lt; 0)	</span><span class="cm">/* display A &gt; display B */</span><span class="cp"></span>
<span class="cp">#define   MI_ARB_DISPLAY_PRIORITY_B_A		(1 &lt;&lt; 0)	</span><span class="cm">/* display B &gt; display A */</span><span class="cp"></span>

<span class="cp">#define CACHE_MODE_0	0x02120 </span><span class="cm">/* 915+ only */</span><span class="cp"></span>
<span class="cp">#define   CM0_IZ_OPT_DISABLE      (1&lt;&lt;6)</span>
<span class="cp">#define   CM0_ZR_OPT_DISABLE      (1&lt;&lt;5)</span>
<span class="cp">#define	  CM0_STC_EVICT_DISABLE_LRA_SNB	(1&lt;&lt;5)</span>
<span class="cp">#define   CM0_DEPTH_EVICT_DISABLE (1&lt;&lt;4)</span>
<span class="cp">#define   CM0_COLOR_EVICT_DISABLE (1&lt;&lt;3)</span>
<span class="cp">#define   CM0_DEPTH_WRITE_DISABLE (1&lt;&lt;1)</span>
<span class="cp">#define   CM0_RC_OP_FLUSH_DISABLE (1&lt;&lt;0)</span>
<span class="cp">#define BB_ADDR		0x02140 </span><span class="cm">/* 8 bytes */</span><span class="cp"></span>
<span class="cp">#define GFX_FLSH_CNTL	0x02170 </span><span class="cm">/* 915+ only */</span><span class="cp"></span>
<span class="cp">#define ECOSKPD		0x021d0</span>
<span class="cp">#define   ECO_GATING_CX_ONLY	(1&lt;&lt;3)</span>
<span class="cp">#define   ECO_FLIP_DONE		(1&lt;&lt;0)</span>

<span class="cp">#define CACHE_MODE_1		0x7004 </span><span class="cm">/* IVB+ */</span><span class="cp"></span>
<span class="cp">#define   PIXEL_SUBSPAN_COLLECT_OPT_DISABLE (1&lt;&lt;6)</span>

<span class="cm">/* GEN6 interrupt control</span>
<span class="cm"> * Note that the per-ring interrupt bits do alias with the global interrupt bits</span>
<span class="cm"> * in GTIMR. */</span>
<span class="cp">#define GEN6_RENDER_HWSTAM	0x2098</span>
<span class="cp">#define GEN6_RENDER_IMR		0x20a8</span>
<span class="cp">#define   GEN6_RENDER_CONTEXT_SWITCH_INTERRUPT		(1 &lt;&lt; 8)</span>
<span class="cp">#define   GEN6_RENDER_PPGTT_PAGE_FAULT			(1 &lt;&lt; 7)</span>
<span class="cp">#define   GEN6_RENDER_TIMEOUT_COUNTER_EXPIRED		(1 &lt;&lt; 6)</span>
<span class="cp">#define   GEN6_RENDER_L3_PARITY_ERROR			(1 &lt;&lt; 5)</span>
<span class="cp">#define   GEN6_RENDER_PIPE_CONTROL_NOTIFY_INTERRUPT	(1 &lt;&lt; 4)</span>
<span class="cp">#define   GEN6_RENDER_COMMAND_PARSER_MASTER_ERROR	(1 &lt;&lt; 3)</span>
<span class="cp">#define   GEN6_RENDER_SYNC_STATUS			(1 &lt;&lt; 2)</span>
<span class="cp">#define   GEN6_RENDER_DEBUG_INTERRUPT			(1 &lt;&lt; 1)</span>
<span class="cp">#define   GEN6_RENDER_USER_INTERRUPT			(1 &lt;&lt; 0)</span>

<span class="cp">#define GEN6_BLITTER_HWSTAM	0x22098</span>
<span class="cp">#define GEN6_BLITTER_IMR	0x220a8</span>
<span class="cp">#define   GEN6_BLITTER_MI_FLUSH_DW_NOTIFY_INTERRUPT	(1 &lt;&lt; 26)</span>
<span class="cp">#define   GEN6_BLITTER_COMMAND_PARSER_MASTER_ERROR	(1 &lt;&lt; 25)</span>
<span class="cp">#define   GEN6_BLITTER_SYNC_STATUS			(1 &lt;&lt; 24)</span>
<span class="cp">#define   GEN6_BLITTER_USER_INTERRUPT			(1 &lt;&lt; 22)</span>

<span class="cp">#define GEN6_BLITTER_ECOSKPD	0x221d0</span>
<span class="cp">#define   GEN6_BLITTER_LOCK_SHIFT			16</span>
<span class="cp">#define   GEN6_BLITTER_FBC_NOTIFY			(1&lt;&lt;3)</span>

<span class="cp">#define GEN6_BSD_SLEEP_PSMI_CONTROL	0x12050</span>
<span class="cp">#define   GEN6_BSD_SLEEP_PSMI_CONTROL_RC_ILDL_MESSAGE_MODIFY_MASK	(1 &lt;&lt; 16)</span>
<span class="cp">#define   GEN6_BSD_SLEEP_PSMI_CONTROL_RC_ILDL_MESSAGE_DISABLE		(1 &lt;&lt; 0)</span>
<span class="cp">#define   GEN6_BSD_SLEEP_PSMI_CONTROL_RC_ILDL_MESSAGE_ENABLE		0</span>
<span class="cp">#define   GEN6_BSD_SLEEP_PSMI_CONTROL_IDLE_INDICATOR			(1 &lt;&lt; 3)</span>

<span class="cp">#define GEN6_BSD_HWSTAM			0x12098</span>
<span class="cp">#define GEN6_BSD_IMR			0x120a8</span>
<span class="cp">#define   GEN6_BSD_USER_INTERRUPT	(1 &lt;&lt; 12)</span>

<span class="cp">#define GEN6_BSD_RNCID			0x12198</span>

<span class="cp">#define GEN7_FF_THREAD_MODE		0x20a0</span>
<span class="cp">#define   GEN7_FF_SCHED_MASK		0x0077070</span>
<span class="cp">#define   GEN7_FF_TS_SCHED_HS1		(0x5&lt;&lt;16)</span>
<span class="cp">#define   GEN7_FF_TS_SCHED_HS0		(0x3&lt;&lt;16)</span>
<span class="cp">#define   GEN7_FF_TS_SCHED_LOAD_BALANCE	(0x1&lt;&lt;16)</span>
<span class="cp">#define   GEN7_FF_TS_SCHED_HW		(0x0&lt;&lt;16) </span><span class="cm">/* Default */</span><span class="cp"></span>
<span class="cp">#define   GEN7_FF_VS_SCHED_HS1		(0x5&lt;&lt;12)</span>
<span class="cp">#define   GEN7_FF_VS_SCHED_HS0		(0x3&lt;&lt;12)</span>
<span class="cp">#define   GEN7_FF_VS_SCHED_LOAD_BALANCE	(0x1&lt;&lt;12) </span><span class="cm">/* Default */</span><span class="cp"></span>
<span class="cp">#define   GEN7_FF_VS_SCHED_HW		(0x0&lt;&lt;12)</span>
<span class="cp">#define   GEN7_FF_DS_SCHED_HS1		(0x5&lt;&lt;4)</span>
<span class="cp">#define   GEN7_FF_DS_SCHED_HS0		(0x3&lt;&lt;4)</span>
<span class="cp">#define   GEN7_FF_DS_SCHED_LOAD_BALANCE	(0x1&lt;&lt;4)  </span><span class="cm">/* Default */</span><span class="cp"></span>
<span class="cp">#define   GEN7_FF_DS_SCHED_HW		(0x0&lt;&lt;4)</span>

<span class="cm">/*</span>
<span class="cm"> * Framebuffer compression (915+ only)</span>
<span class="cm"> */</span>

<span class="cp">#define FBC_CFB_BASE		0x03200 </span><span class="cm">/* 4k page aligned */</span><span class="cp"></span>
<span class="cp">#define FBC_LL_BASE		0x03204 </span><span class="cm">/* 4k page aligned */</span><span class="cp"></span>
<span class="cp">#define FBC_CONTROL		0x03208</span>
<span class="cp">#define   FBC_CTL_EN		(1&lt;&lt;31)</span>
<span class="cp">#define   FBC_CTL_PERIODIC	(1&lt;&lt;30)</span>
<span class="cp">#define   FBC_CTL_INTERVAL_SHIFT (16)</span>
<span class="cp">#define   FBC_CTL_UNCOMPRESSIBLE (1&lt;&lt;14)</span>
<span class="cp">#define   FBC_CTL_C3_IDLE	(1&lt;&lt;13)</span>
<span class="cp">#define   FBC_CTL_STRIDE_SHIFT	(5)</span>
<span class="cp">#define   FBC_CTL_FENCENO	(1&lt;&lt;0)</span>
<span class="cp">#define FBC_COMMAND		0x0320c</span>
<span class="cp">#define   FBC_CMD_COMPRESS	(1&lt;&lt;0)</span>
<span class="cp">#define FBC_STATUS		0x03210</span>
<span class="cp">#define   FBC_STAT_COMPRESSING	(1&lt;&lt;31)</span>
<span class="cp">#define   FBC_STAT_COMPRESSED	(1&lt;&lt;30)</span>
<span class="cp">#define   FBC_STAT_MODIFIED	(1&lt;&lt;29)</span>
<span class="cp">#define   FBC_STAT_CURRENT_LINE	(1&lt;&lt;0)</span>
<span class="cp">#define FBC_CONTROL2		0x03214</span>
<span class="cp">#define   FBC_CTL_FENCE_DBL	(0&lt;&lt;4)</span>
<span class="cp">#define   FBC_CTL_IDLE_IMM	(0&lt;&lt;2)</span>
<span class="cp">#define   FBC_CTL_IDLE_FULL	(1&lt;&lt;2)</span>
<span class="cp">#define   FBC_CTL_IDLE_LINE	(2&lt;&lt;2)</span>
<span class="cp">#define   FBC_CTL_IDLE_DEBUG	(3&lt;&lt;2)</span>
<span class="cp">#define   FBC_CTL_CPU_FENCE	(1&lt;&lt;1)</span>
<span class="cp">#define   FBC_CTL_PLANEA	(0&lt;&lt;0)</span>
<span class="cp">#define   FBC_CTL_PLANEB	(1&lt;&lt;0)</span>
<span class="cp">#define FBC_FENCE_OFF		0x0321b</span>
<span class="cp">#define FBC_TAG			0x03300</span>

<span class="cp">#define FBC_LL_SIZE		(1536)</span>

<span class="cm">/* Framebuffer compression for GM45+ */</span>
<span class="cp">#define DPFC_CB_BASE		0x3200</span>
<span class="cp">#define DPFC_CONTROL		0x3208</span>
<span class="cp">#define   DPFC_CTL_EN		(1&lt;&lt;31)</span>
<span class="cp">#define   DPFC_CTL_PLANEA	(0&lt;&lt;30)</span>
<span class="cp">#define   DPFC_CTL_PLANEB	(1&lt;&lt;30)</span>
<span class="cp">#define   DPFC_CTL_FENCE_EN	(1&lt;&lt;29)</span>
<span class="cp">#define   DPFC_CTL_PERSISTENT_MODE	(1&lt;&lt;25)</span>
<span class="cp">#define   DPFC_SR_EN		(1&lt;&lt;10)</span>
<span class="cp">#define   DPFC_CTL_LIMIT_1X	(0&lt;&lt;6)</span>
<span class="cp">#define   DPFC_CTL_LIMIT_2X	(1&lt;&lt;6)</span>
<span class="cp">#define   DPFC_CTL_LIMIT_4X	(2&lt;&lt;6)</span>
<span class="cp">#define DPFC_RECOMP_CTL		0x320c</span>
<span class="cp">#define   DPFC_RECOMP_STALL_EN	(1&lt;&lt;27)</span>
<span class="cp">#define   DPFC_RECOMP_STALL_WM_SHIFT (16)</span>
<span class="cp">#define   DPFC_RECOMP_STALL_WM_MASK (0x07ff0000)</span>
<span class="cp">#define   DPFC_RECOMP_TIMER_COUNT_SHIFT (0)</span>
<span class="cp">#define   DPFC_RECOMP_TIMER_COUNT_MASK (0x0000003f)</span>
<span class="cp">#define DPFC_STATUS		0x3210</span>
<span class="cp">#define   DPFC_INVAL_SEG_SHIFT  (16)</span>
<span class="cp">#define   DPFC_INVAL_SEG_MASK	(0x07ff0000)</span>
<span class="cp">#define   DPFC_COMP_SEG_SHIFT	(0)</span>
<span class="cp">#define   DPFC_COMP_SEG_MASK	(0x000003ff)</span>
<span class="cp">#define DPFC_STATUS2		0x3214</span>
<span class="cp">#define DPFC_FENCE_YOFF		0x3218</span>
<span class="cp">#define DPFC_CHICKEN		0x3224</span>
<span class="cp">#define   DPFC_HT_MODIFY	(1&lt;&lt;31)</span>

<span class="cm">/* Framebuffer compression for Ironlake */</span>
<span class="cp">#define ILK_DPFC_CB_BASE	0x43200</span>
<span class="cp">#define ILK_DPFC_CONTROL	0x43208</span>
<span class="cm">/* The bit 28-8 is reserved */</span>
<span class="cp">#define   DPFC_RESERVED		(0x1FFFFF00)</span>
<span class="cp">#define ILK_DPFC_RECOMP_CTL	0x4320c</span>
<span class="cp">#define ILK_DPFC_STATUS		0x43210</span>
<span class="cp">#define ILK_DPFC_FENCE_YOFF	0x43218</span>
<span class="cp">#define ILK_DPFC_CHICKEN	0x43224</span>
<span class="cp">#define ILK_FBC_RT_BASE		0x2128</span>
<span class="cp">#define   ILK_FBC_RT_VALID	(1&lt;&lt;0)</span>

<span class="cp">#define ILK_DISPLAY_CHICKEN1	0x42000</span>
<span class="cp">#define   ILK_FBCQ_DIS		(1&lt;&lt;22)</span>
<span class="cp">#define	  ILK_PABSTRETCH_DIS	(1&lt;&lt;21)</span>


<span class="cm">/*</span>
<span class="cm"> * Framebuffer compression for Sandybridge</span>
<span class="cm"> *</span>
<span class="cm"> * The following two registers are of type GTTMMADR</span>
<span class="cm"> */</span>
<span class="cp">#define SNB_DPFC_CTL_SA		0x100100</span>
<span class="cp">#define   SNB_CPU_FENCE_ENABLE	(1&lt;&lt;29)</span>
<span class="cp">#define DPFC_CPU_FENCE_OFFSET	0x100104</span>


<span class="cm">/*</span>
<span class="cm"> * GPIO regs</span>
<span class="cm"> */</span>
<span class="cp">#define GPIOA			0x5010</span>
<span class="cp">#define GPIOB			0x5014</span>
<span class="cp">#define GPIOC			0x5018</span>
<span class="cp">#define GPIOD			0x501c</span>
<span class="cp">#define GPIOE			0x5020</span>
<span class="cp">#define GPIOF			0x5024</span>
<span class="cp">#define GPIOG			0x5028</span>
<span class="cp">#define GPIOH			0x502c</span>
<span class="cp"># define GPIO_CLOCK_DIR_MASK		(1 &lt;&lt; 0)</span>
<span class="cp"># define GPIO_CLOCK_DIR_IN		(0 &lt;&lt; 1)</span>
<span class="cp"># define GPIO_CLOCK_DIR_OUT		(1 &lt;&lt; 1)</span>
<span class="cp"># define GPIO_CLOCK_VAL_MASK		(1 &lt;&lt; 2)</span>
<span class="cp"># define GPIO_CLOCK_VAL_OUT		(1 &lt;&lt; 3)</span>
<span class="cp"># define GPIO_CLOCK_VAL_IN		(1 &lt;&lt; 4)</span>
<span class="cp"># define GPIO_CLOCK_PULLUP_DISABLE	(1 &lt;&lt; 5)</span>
<span class="cp"># define GPIO_DATA_DIR_MASK		(1 &lt;&lt; 8)</span>
<span class="cp"># define GPIO_DATA_DIR_IN		(0 &lt;&lt; 9)</span>
<span class="cp"># define GPIO_DATA_DIR_OUT		(1 &lt;&lt; 9)</span>
<span class="cp"># define GPIO_DATA_VAL_MASK		(1 &lt;&lt; 10)</span>
<span class="cp"># define GPIO_DATA_VAL_OUT		(1 &lt;&lt; 11)</span>
<span class="cp"># define GPIO_DATA_VAL_IN		(1 &lt;&lt; 12)</span>
<span class="cp"># define GPIO_DATA_PULLUP_DISABLE	(1 &lt;&lt; 13)</span>

<span class="cp">#define GMBUS0			0x5100 </span><span class="cm">/* clock/port select */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_RATE_100KHZ	(0&lt;&lt;8)</span>
<span class="cp">#define   GMBUS_RATE_50KHZ	(1&lt;&lt;8)</span>
<span class="cp">#define   GMBUS_RATE_400KHZ	(2&lt;&lt;8) </span><span class="cm">/* reserved on Pineview */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_RATE_1MHZ	(3&lt;&lt;8) </span><span class="cm">/* reserved on Pineview */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_HOLD_EXT	(1&lt;&lt;7) </span><span class="cm">/* 300ns hold time, rsvd on Pineview */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_PORT_DISABLED	0</span>
<span class="cp">#define   GMBUS_PORT_SSC	1</span>
<span class="cp">#define   GMBUS_PORT_VGADDC	2</span>
<span class="cp">#define   GMBUS_PORT_PANEL	3</span>
<span class="cp">#define   GMBUS_PORT_DPC	4 </span><span class="cm">/* HDMIC */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_PORT_DPB	5 </span><span class="cm">/* SDVO, HDMIB */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_PORT_DPD	6 </span><span class="cm">/* HDMID */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_PORT_RESERVED	7 </span><span class="cm">/* 7 reserved */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_NUM_PORTS	(GMBUS_PORT_DPD - GMBUS_PORT_SSC + 1)</span>
<span class="cp">#define GMBUS1			0x5104 </span><span class="cm">/* command/status */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_SW_CLR_INT	(1&lt;&lt;31)</span>
<span class="cp">#define   GMBUS_SW_RDY		(1&lt;&lt;30)</span>
<span class="cp">#define   GMBUS_ENT		(1&lt;&lt;29) </span><span class="cm">/* enable timeout */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_CYCLE_NONE	(0&lt;&lt;25)</span>
<span class="cp">#define   GMBUS_CYCLE_WAIT	(1&lt;&lt;25)</span>
<span class="cp">#define   GMBUS_CYCLE_INDEX	(2&lt;&lt;25)</span>
<span class="cp">#define   GMBUS_CYCLE_STOP	(4&lt;&lt;25)</span>
<span class="cp">#define   GMBUS_BYTE_COUNT_SHIFT 16</span>
<span class="cp">#define   GMBUS_SLAVE_INDEX_SHIFT 8</span>
<span class="cp">#define   GMBUS_SLAVE_ADDR_SHIFT 1</span>
<span class="cp">#define   GMBUS_SLAVE_READ	(1&lt;&lt;0)</span>
<span class="cp">#define   GMBUS_SLAVE_WRITE	(0&lt;&lt;0)</span>
<span class="cp">#define GMBUS2			0x5108 </span><span class="cm">/* status */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_INUSE		(1&lt;&lt;15)</span>
<span class="cp">#define   GMBUS_HW_WAIT_PHASE	(1&lt;&lt;14)</span>
<span class="cp">#define   GMBUS_STALL_TIMEOUT	(1&lt;&lt;13)</span>
<span class="cp">#define   GMBUS_INT		(1&lt;&lt;12)</span>
<span class="cp">#define   GMBUS_HW_RDY		(1&lt;&lt;11)</span>
<span class="cp">#define   GMBUS_SATOER		(1&lt;&lt;10)</span>
<span class="cp">#define   GMBUS_ACTIVE		(1&lt;&lt;9)</span>
<span class="cp">#define GMBUS3			0x510c </span><span class="cm">/* data buffer bytes 3-0 */</span><span class="cp"></span>
<span class="cp">#define GMBUS4			0x5110 </span><span class="cm">/* interrupt mask (Pineview+) */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_SLAVE_TIMEOUT_EN (1&lt;&lt;4)</span>
<span class="cp">#define   GMBUS_NAK_EN		(1&lt;&lt;3)</span>
<span class="cp">#define   GMBUS_IDLE_EN		(1&lt;&lt;2)</span>
<span class="cp">#define   GMBUS_HW_WAIT_EN	(1&lt;&lt;1)</span>
<span class="cp">#define   GMBUS_HW_RDY_EN	(1&lt;&lt;0)</span>
<span class="cp">#define GMBUS5			0x5120 </span><span class="cm">/* byte index */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_2BYTE_INDEX_EN	(1&lt;&lt;31)</span>

<span class="cm">/*</span>
<span class="cm"> * Clock control &amp; power management</span>
<span class="cm"> */</span>

<span class="cp">#define VGA0	0x6000</span>
<span class="cp">#define VGA1	0x6004</span>
<span class="cp">#define VGA_PD	0x6010</span>
<span class="cp">#define   VGA0_PD_P2_DIV_4	(1 &lt;&lt; 7)</span>
<span class="cp">#define   VGA0_PD_P1_DIV_2	(1 &lt;&lt; 5)</span>
<span class="cp">#define   VGA0_PD_P1_SHIFT	0</span>
<span class="cp">#define   VGA0_PD_P1_MASK	(0x1f &lt;&lt; 0)</span>
<span class="cp">#define   VGA1_PD_P2_DIV_4	(1 &lt;&lt; 15)</span>
<span class="cp">#define   VGA1_PD_P1_DIV_2	(1 &lt;&lt; 13)</span>
<span class="cp">#define   VGA1_PD_P1_SHIFT	8</span>
<span class="cp">#define   VGA1_PD_P1_MASK	(0x1f &lt;&lt; 8)</span>
<span class="cp">#define _DPLL_A	0x06014</span>
<span class="cp">#define _DPLL_B	0x06018</span>
<span class="cp">#define DPLL(pipe) _PIPE(pipe, _DPLL_A, _DPLL_B)</span>
<span class="cp">#define   DPLL_VCO_ENABLE		(1 &lt;&lt; 31)</span>
<span class="cp">#define   DPLL_DVO_HIGH_SPEED		(1 &lt;&lt; 30)</span>
<span class="cp">#define   DPLL_EXT_BUFFER_ENABLE_VLV	(1 &lt;&lt; 30)</span>
<span class="cp">#define   DPLL_SYNCLOCK_ENABLE		(1 &lt;&lt; 29)</span>
<span class="cp">#define   DPLL_REFA_CLK_ENABLE_VLV	(1 &lt;&lt; 29)</span>
<span class="cp">#define   DPLL_VGA_MODE_DIS		(1 &lt;&lt; 28)</span>
<span class="cp">#define   DPLLB_MODE_DAC_SERIAL		(1 &lt;&lt; 26) </span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define   DPLLB_MODE_LVDS		(2 &lt;&lt; 26) </span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define   DPLL_MODE_MASK		(3 &lt;&lt; 26)</span>
<span class="cp">#define   DPLL_DAC_SERIAL_P2_CLOCK_DIV_10 (0 &lt;&lt; 24) </span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define   DPLL_DAC_SERIAL_P2_CLOCK_DIV_5 (1 &lt;&lt; 24) </span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define   DPLLB_LVDS_P2_CLOCK_DIV_14	(0 &lt;&lt; 24) </span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define   DPLLB_LVDS_P2_CLOCK_DIV_7	(1 &lt;&lt; 24) </span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define   DPLL_P2_CLOCK_DIV_MASK	0x03000000 </span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define   DPLL_FPA01_P1_POST_DIV_MASK	0x00ff0000 </span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define   DPLL_FPA01_P1_POST_DIV_MASK_PINEVIEW	0x00ff8000 </span><span class="cm">/* Pineview */</span><span class="cp"></span>
<span class="cp">#define   DPLL_INTEGRATED_CLOCK_VLV	(1&lt;&lt;13)</span>

<span class="cp">#define SRX_INDEX		0x3c4</span>
<span class="cp">#define SRX_DATA		0x3c5</span>
<span class="cp">#define SR01			1</span>
<span class="cp">#define SR01_SCREEN_OFF		(1&lt;&lt;5)</span>

<span class="cp">#define PPCR			0x61204</span>
<span class="cp">#define PPCR_ON			(1&lt;&lt;0)</span>

<span class="cp">#define DVOB			0x61140</span>
<span class="cp">#define DVOB_ON			(1&lt;&lt;31)</span>
<span class="cp">#define DVOC			0x61160</span>
<span class="cp">#define DVOC_ON			(1&lt;&lt;31)</span>
<span class="cp">#define LVDS			0x61180</span>
<span class="cp">#define LVDS_ON			(1&lt;&lt;31)</span>

<span class="cm">/* Scratch pad debug 0 reg:</span>
<span class="cm"> */</span>
<span class="cp">#define   DPLL_FPA01_P1_POST_DIV_MASK_I830	0x001f0000</span>
<span class="cm">/*</span>
<span class="cm"> * The i830 generation, in LVDS mode, defines P1 as the bit number set within</span>
<span class="cm"> * this field (only one bit may be set).</span>
<span class="cm"> */</span>
<span class="cp">#define   DPLL_FPA01_P1_POST_DIV_MASK_I830_LVDS	0x003f0000</span>
<span class="cp">#define   DPLL_FPA01_P1_POST_DIV_SHIFT	16</span>
<span class="cp">#define   DPLL_FPA01_P1_POST_DIV_SHIFT_PINEVIEW 15</span>
<span class="cm">/* i830, required in DVO non-gang */</span>
<span class="cp">#define   PLL_P2_DIVIDE_BY_4		(1 &lt;&lt; 23)</span>
<span class="cp">#define   PLL_P1_DIVIDE_BY_TWO		(1 &lt;&lt; 21) </span><span class="cm">/* i830 */</span><span class="cp"></span>
<span class="cp">#define   PLL_REF_INPUT_DREFCLK		(0 &lt;&lt; 13)</span>
<span class="cp">#define   PLL_REF_INPUT_TVCLKINA	(1 &lt;&lt; 13) </span><span class="cm">/* i830 */</span><span class="cp"></span>
<span class="cp">#define   PLL_REF_INPUT_TVCLKINBC	(2 &lt;&lt; 13) </span><span class="cm">/* SDVO TVCLKIN */</span><span class="cp"></span>
<span class="cp">#define   PLLB_REF_INPUT_SPREADSPECTRUMIN (3 &lt;&lt; 13)</span>
<span class="cp">#define   PLL_REF_INPUT_MASK		(3 &lt;&lt; 13)</span>
<span class="cp">#define   PLL_LOAD_PULSE_PHASE_SHIFT		9</span>
<span class="cm">/* Ironlake */</span>
<span class="cp"># define PLL_REF_SDVO_HDMI_MULTIPLIER_SHIFT     9</span>
<span class="cp"># define PLL_REF_SDVO_HDMI_MULTIPLIER_MASK      (7 &lt;&lt; 9)</span>
<span class="cp"># define PLL_REF_SDVO_HDMI_MULTIPLIER(x)	(((x)-1) &lt;&lt; 9)</span>
<span class="cp"># define DPLL_FPA1_P1_POST_DIV_SHIFT            0</span>
<span class="cp"># define DPLL_FPA1_P1_POST_DIV_MASK             0xff</span>

<span class="cm">/*</span>
<span class="cm"> * Parallel to Serial Load Pulse phase selection.</span>
<span class="cm"> * Selects the phase for the 10X DPLL clock for the PCIe</span>
<span class="cm"> * digital display port. The range is 4 to 13; 10 or more</span>
<span class="cm"> * is just a flip delay. The default is 6</span>
<span class="cm"> */</span>
<span class="cp">#define   PLL_LOAD_PULSE_PHASE_MASK		(0xf &lt;&lt; PLL_LOAD_PULSE_PHASE_SHIFT)</span>
<span class="cp">#define   DISPLAY_RATE_SELECT_FPA1		(1 &lt;&lt; 8)</span>
<span class="cm">/*</span>
<span class="cm"> * SDVO multiplier for 945G/GM. Not used on 965.</span>
<span class="cm"> */</span>
<span class="cp">#define   SDVO_MULTIPLIER_MASK			0x000000ff</span>
<span class="cp">#define   SDVO_MULTIPLIER_SHIFT_HIRES		4</span>
<span class="cp">#define   SDVO_MULTIPLIER_SHIFT_VGA		0</span>
<span class="cp">#define _DPLL_A_MD 0x0601c </span><span class="cm">/* 965+ only */</span><span class="cp"></span>
<span class="cm">/*</span>
<span class="cm"> * UDI pixel divider, controlling how many pixels are stuffed into a packet.</span>
<span class="cm"> *</span>
<span class="cm"> * Value is pixels minus 1.  Must be set to 1 pixel for SDVO.</span>
<span class="cm"> */</span>
<span class="cp">#define   DPLL_MD_UDI_DIVIDER_MASK		0x3f000000</span>
<span class="cp">#define   DPLL_MD_UDI_DIVIDER_SHIFT		24</span>
<span class="cm">/* UDI pixel divider for VGA, same as DPLL_MD_UDI_DIVIDER_MASK. */</span>
<span class="cp">#define   DPLL_MD_VGA_UDI_DIVIDER_MASK		0x003f0000</span>
<span class="cp">#define   DPLL_MD_VGA_UDI_DIVIDER_SHIFT		16</span>
<span class="cm">/*</span>
<span class="cm"> * SDVO/UDI pixel multiplier.</span>
<span class="cm"> *</span>
<span class="cm"> * SDVO requires that the bus clock rate be between 1 and 2 Ghz, and the bus</span>
<span class="cm"> * clock rate is 10 times the DPLL clock.  At low resolution/refresh rate</span>
<span class="cm"> * modes, the bus rate would be below the limits, so SDVO allows for stuffing</span>
<span class="cm"> * dummy bytes in the datastream at an increased clock rate, with both sides of</span>
<span class="cm"> * the link knowing how many bytes are fill.</span>
<span class="cm"> *</span>
<span class="cm"> * So, for a mode with a dotclock of 65Mhz, we would want to double the clock</span>
<span class="cm"> * rate to 130Mhz to get a bus rate of 1.30Ghz.  The DPLL clock rate would be</span>
<span class="cm"> * set to 130Mhz, and the SDVO multiplier set to 2x in this register and</span>
<span class="cm"> * through an SDVO command.</span>
<span class="cm"> *</span>
<span class="cm"> * This register field has values of multiplication factor minus 1, with</span>
<span class="cm"> * a maximum multiplier of 5 for SDVO.</span>
<span class="cm"> */</span>
<span class="cp">#define   DPLL_MD_UDI_MULTIPLIER_MASK		0x00003f00</span>
<span class="cp">#define   DPLL_MD_UDI_MULTIPLIER_SHIFT		8</span>
<span class="cm">/*</span>
<span class="cm"> * SDVO/UDI pixel multiplier for VGA, same as DPLL_MD_UDI_MULTIPLIER_MASK.</span>
<span class="cm"> * This best be set to the default value (3) or the CRT won&#39;t work. No,</span>
<span class="cm"> * I don&#39;t entirely understand what this does...</span>
<span class="cm"> */</span>
<span class="cp">#define   DPLL_MD_VGA_UDI_MULTIPLIER_MASK	0x0000003f</span>
<span class="cp">#define   DPLL_MD_VGA_UDI_MULTIPLIER_SHIFT	0</span>
<span class="cp">#define _DPLL_B_MD 0x06020 </span><span class="cm">/* 965+ only */</span><span class="cp"></span>
<span class="cp">#define DPLL_MD(pipe) _PIPE(pipe, _DPLL_A_MD, _DPLL_B_MD)</span>

<span class="cp">#define _FPA0	0x06040</span>
<span class="cp">#define _FPA1	0x06044</span>
<span class="cp">#define _FPB0	0x06048</span>
<span class="cp">#define _FPB1	0x0604c</span>
<span class="cp">#define FP0(pipe) _PIPE(pipe, _FPA0, _FPB0)</span>
<span class="cp">#define FP1(pipe) _PIPE(pipe, _FPA1, _FPB1)</span>
<span class="cp">#define   FP_N_DIV_MASK		0x003f0000</span>
<span class="cp">#define   FP_N_PINEVIEW_DIV_MASK	0x00ff0000</span>
<span class="cp">#define   FP_N_DIV_SHIFT		16</span>
<span class="cp">#define   FP_M1_DIV_MASK	0x00003f00</span>
<span class="cp">#define   FP_M1_DIV_SHIFT		 8</span>
<span class="cp">#define   FP_M2_DIV_MASK	0x0000003f</span>
<span class="cp">#define   FP_M2_PINEVIEW_DIV_MASK	0x000000ff</span>
<span class="cp">#define   FP_M2_DIV_SHIFT		 0</span>
<span class="cp">#define DPLL_TEST	0x606c</span>
<span class="cp">#define   DPLLB_TEST_SDVO_DIV_1		(0 &lt;&lt; 22)</span>
<span class="cp">#define   DPLLB_TEST_SDVO_DIV_2		(1 &lt;&lt; 22)</span>
<span class="cp">#define   DPLLB_TEST_SDVO_DIV_4		(2 &lt;&lt; 22)</span>
<span class="cp">#define   DPLLB_TEST_SDVO_DIV_MASK	(3 &lt;&lt; 22)</span>
<span class="cp">#define   DPLLB_TEST_N_BYPASS		(1 &lt;&lt; 19)</span>
<span class="cp">#define   DPLLB_TEST_M_BYPASS		(1 &lt;&lt; 18)</span>
<span class="cp">#define   DPLLB_INPUT_BUFFER_ENABLE	(1 &lt;&lt; 16)</span>
<span class="cp">#define   DPLLA_TEST_N_BYPASS		(1 &lt;&lt; 3)</span>
<span class="cp">#define   DPLLA_TEST_M_BYPASS		(1 &lt;&lt; 2)</span>
<span class="cp">#define   DPLLA_INPUT_BUFFER_ENABLE	(1 &lt;&lt; 0)</span>
<span class="cp">#define D_STATE		0x6104</span>
<span class="cp">#define  DSTATE_GFX_RESET_I830			(1&lt;&lt;6)</span>
<span class="cp">#define  DSTATE_PLL_D3_OFF			(1&lt;&lt;3)</span>
<span class="cp">#define  DSTATE_GFX_CLOCK_GATING		(1&lt;&lt;1)</span>
<span class="cp">#define  DSTATE_DOT_CLOCK_GATING		(1&lt;&lt;0)</span>
<span class="cp">#define DSPCLK_GATE_D		0x6200</span>
<span class="cp"># define DPUNIT_B_CLOCK_GATE_DISABLE		(1 &lt;&lt; 30) </span><span class="cm">/* 965 */</span><span class="cp"></span>
<span class="cp"># define VSUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 29) </span><span class="cm">/* 965 */</span><span class="cp"></span>
<span class="cp"># define VRHUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 28) </span><span class="cm">/* 965 */</span><span class="cp"></span>
<span class="cp"># define VRDUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 27) </span><span class="cm">/* 965 */</span><span class="cp"></span>
<span class="cp"># define AUDUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 26) </span><span class="cm">/* 965 */</span><span class="cp"></span>
<span class="cp"># define DPUNIT_A_CLOCK_GATE_DISABLE		(1 &lt;&lt; 25) </span><span class="cm">/* 965 */</span><span class="cp"></span>
<span class="cp"># define DPCUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 24) </span><span class="cm">/* 965 */</span><span class="cp"></span>
<span class="cp"># define TVRUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 23) </span><span class="cm">/* 915-945 */</span><span class="cp"></span>
<span class="cp"># define TVCUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 22) </span><span class="cm">/* 915-945 */</span><span class="cp"></span>
<span class="cp"># define TVFUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 21) </span><span class="cm">/* 915-945 */</span><span class="cp"></span>
<span class="cp"># define TVEUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 20) </span><span class="cm">/* 915-945 */</span><span class="cp"></span>
<span class="cp"># define DVSUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 19) </span><span class="cm">/* 915-945 */</span><span class="cp"></span>
<span class="cp"># define DSSUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 18) </span><span class="cm">/* 915-945 */</span><span class="cp"></span>
<span class="cp"># define DDBUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 17) </span><span class="cm">/* 915-945 */</span><span class="cp"></span>
<span class="cp"># define DPRUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 16) </span><span class="cm">/* 915-945 */</span><span class="cp"></span>
<span class="cp"># define DPFUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 15) </span><span class="cm">/* 915-945 */</span><span class="cp"></span>
<span class="cp"># define DPBMUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 14) </span><span class="cm">/* 915-945 */</span><span class="cp"></span>
<span class="cp"># define DPLSUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 13) </span><span class="cm">/* 915-945 */</span><span class="cp"></span>
<span class="cp"># define DPLUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 12) </span><span class="cm">/* 915-945 */</span><span class="cp"></span>
<span class="cp"># define DPOUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 11)</span>
<span class="cp"># define DPBUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 10)</span>
<span class="cp"># define DCUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 9)</span>
<span class="cp"># define DPUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 8)</span>
<span class="cp"># define VRUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 7) </span><span class="cm">/* 915+: reserved */</span><span class="cp"></span>
<span class="cp"># define OVHUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 6) </span><span class="cm">/* 830-865 */</span><span class="cp"></span>
<span class="cp"># define DPIOUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 6) </span><span class="cm">/* 915-945 */</span><span class="cp"></span>
<span class="cp"># define OVFUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 5)</span>
<span class="cp"># define OVBUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 4)</span>
<span class="cm">/**</span>
<span class="cm"> * This bit must be set on the 830 to prevent hangs when turning off the</span>
<span class="cm"> * overlay scaler.</span>
<span class="cm"> */</span>
<span class="cp"># define OVRUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 3)</span>
<span class="cp"># define OVCUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 2)</span>
<span class="cp"># define OVUUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 1)</span>
<span class="cp"># define ZVUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 0) </span><span class="cm">/* 830 */</span><span class="cp"></span>
<span class="cp"># define OVLUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 0) </span><span class="cm">/* 845,865 */</span><span class="cp"></span>

<span class="cp">#define RENCLK_GATE_D1		0x6204</span>
<span class="cp"># define BLITTER_CLOCK_GATE_DISABLE		(1 &lt;&lt; 13) </span><span class="cm">/* 945GM only */</span><span class="cp"></span>
<span class="cp"># define MPEG_CLOCK_GATE_DISABLE		(1 &lt;&lt; 12) </span><span class="cm">/* 945GM only */</span><span class="cp"></span>
<span class="cp"># define PC_FE_CLOCK_GATE_DISABLE		(1 &lt;&lt; 11)</span>
<span class="cp"># define PC_BE_CLOCK_GATE_DISABLE		(1 &lt;&lt; 10)</span>
<span class="cp"># define WINDOWER_CLOCK_GATE_DISABLE		(1 &lt;&lt; 9)</span>
<span class="cp"># define INTERPOLATOR_CLOCK_GATE_DISABLE	(1 &lt;&lt; 8)</span>
<span class="cp"># define COLOR_CALCULATOR_CLOCK_GATE_DISABLE	(1 &lt;&lt; 7)</span>
<span class="cp"># define MOTION_COMP_CLOCK_GATE_DISABLE		(1 &lt;&lt; 6)</span>
<span class="cp"># define MAG_CLOCK_GATE_DISABLE			(1 &lt;&lt; 5)</span>
<span class="cm">/** This bit must be unset on 855,865 */</span>
<span class="cp"># define MECI_CLOCK_GATE_DISABLE		(1 &lt;&lt; 4)</span>
<span class="cp"># define DCMP_CLOCK_GATE_DISABLE		(1 &lt;&lt; 3)</span>
<span class="cp"># define MEC_CLOCK_GATE_DISABLE			(1 &lt;&lt; 2)</span>
<span class="cp"># define MECO_CLOCK_GATE_DISABLE		(1 &lt;&lt; 1)</span>
<span class="cm">/** This bit must be set on 855,865. */</span>
<span class="cp"># define SV_CLOCK_GATE_DISABLE			(1 &lt;&lt; 0)</span>
<span class="cp"># define I915_MPEG_CLOCK_GATE_DISABLE		(1 &lt;&lt; 16)</span>
<span class="cp"># define I915_VLD_IP_PR_CLOCK_GATE_DISABLE	(1 &lt;&lt; 15)</span>
<span class="cp"># define I915_MOTION_COMP_CLOCK_GATE_DISABLE	(1 &lt;&lt; 14)</span>
<span class="cp"># define I915_BD_BF_CLOCK_GATE_DISABLE		(1 &lt;&lt; 13)</span>
<span class="cp"># define I915_SF_SE_CLOCK_GATE_DISABLE		(1 &lt;&lt; 12)</span>
<span class="cp"># define I915_WM_CLOCK_GATE_DISABLE		(1 &lt;&lt; 11)</span>
<span class="cp"># define I915_IZ_CLOCK_GATE_DISABLE		(1 &lt;&lt; 10)</span>
<span class="cp"># define I915_PI_CLOCK_GATE_DISABLE		(1 &lt;&lt; 9)</span>
<span class="cp"># define I915_DI_CLOCK_GATE_DISABLE		(1 &lt;&lt; 8)</span>
<span class="cp"># define I915_SH_SV_CLOCK_GATE_DISABLE		(1 &lt;&lt; 7)</span>
<span class="cp"># define I915_PL_DG_QC_FT_CLOCK_GATE_DISABLE	(1 &lt;&lt; 6)</span>
<span class="cp"># define I915_SC_CLOCK_GATE_DISABLE		(1 &lt;&lt; 5)</span>
<span class="cp"># define I915_FL_CLOCK_GATE_DISABLE		(1 &lt;&lt; 4)</span>
<span class="cp"># define I915_DM_CLOCK_GATE_DISABLE		(1 &lt;&lt; 3)</span>
<span class="cp"># define I915_PS_CLOCK_GATE_DISABLE		(1 &lt;&lt; 2)</span>
<span class="cp"># define I915_CC_CLOCK_GATE_DISABLE		(1 &lt;&lt; 1)</span>
<span class="cp"># define I915_BY_CLOCK_GATE_DISABLE		(1 &lt;&lt; 0)</span>

<span class="cp"># define I965_RCZ_CLOCK_GATE_DISABLE		(1 &lt;&lt; 30)</span>
<span class="cm">/** This bit must always be set on 965G/965GM */</span>
<span class="cp"># define I965_RCC_CLOCK_GATE_DISABLE		(1 &lt;&lt; 29)</span>
<span class="cp"># define I965_RCPB_CLOCK_GATE_DISABLE		(1 &lt;&lt; 28)</span>
<span class="cp"># define I965_DAP_CLOCK_GATE_DISABLE		(1 &lt;&lt; 27)</span>
<span class="cp"># define I965_ROC_CLOCK_GATE_DISABLE		(1 &lt;&lt; 26)</span>
<span class="cp"># define I965_GW_CLOCK_GATE_DISABLE		(1 &lt;&lt; 25)</span>
<span class="cp"># define I965_TD_CLOCK_GATE_DISABLE		(1 &lt;&lt; 24)</span>
<span class="cm">/** This bit must always be set on 965G */</span>
<span class="cp"># define I965_ISC_CLOCK_GATE_DISABLE		(1 &lt;&lt; 23)</span>
<span class="cp"># define I965_IC_CLOCK_GATE_DISABLE		(1 &lt;&lt; 22)</span>
<span class="cp"># define I965_EU_CLOCK_GATE_DISABLE		(1 &lt;&lt; 21)</span>
<span class="cp"># define I965_IF_CLOCK_GATE_DISABLE		(1 &lt;&lt; 20)</span>
<span class="cp"># define I965_TC_CLOCK_GATE_DISABLE		(1 &lt;&lt; 19)</span>
<span class="cp"># define I965_SO_CLOCK_GATE_DISABLE		(1 &lt;&lt; 17)</span>
<span class="cp"># define I965_FBC_CLOCK_GATE_DISABLE		(1 &lt;&lt; 16)</span>
<span class="cp"># define I965_MARI_CLOCK_GATE_DISABLE		(1 &lt;&lt; 15)</span>
<span class="cp"># define I965_MASF_CLOCK_GATE_DISABLE		(1 &lt;&lt; 14)</span>
<span class="cp"># define I965_MAWB_CLOCK_GATE_DISABLE		(1 &lt;&lt; 13)</span>
<span class="cp"># define I965_EM_CLOCK_GATE_DISABLE		(1 &lt;&lt; 12)</span>
<span class="cp"># define I965_UC_CLOCK_GATE_DISABLE		(1 &lt;&lt; 11)</span>
<span class="cp"># define I965_SI_CLOCK_GATE_DISABLE		(1 &lt;&lt; 6)</span>
<span class="cp"># define I965_MT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 5)</span>
<span class="cp"># define I965_PL_CLOCK_GATE_DISABLE		(1 &lt;&lt; 4)</span>
<span class="cp"># define I965_DG_CLOCK_GATE_DISABLE		(1 &lt;&lt; 3)</span>
<span class="cp"># define I965_QC_CLOCK_GATE_DISABLE		(1 &lt;&lt; 2)</span>
<span class="cp"># define I965_FT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 1)</span>
<span class="cp"># define I965_DM_CLOCK_GATE_DISABLE		(1 &lt;&lt; 0)</span>

<span class="cp">#define RENCLK_GATE_D2		0x6208</span>
<span class="cp">#define VF_UNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 9)</span>
<span class="cp">#define GS_UNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 7)</span>
<span class="cp">#define CL_UNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 6)</span>
<span class="cp">#define RAMCLK_GATE_D		0x6210		</span><span class="cm">/* CRL only */</span><span class="cp"></span>
<span class="cp">#define DEUC			0x6214          </span><span class="cm">/* CRL only */</span><span class="cp"></span>

<span class="cp">#define FW_BLC_SELF_VLV		0x6500</span>
<span class="cp">#define  FW_CSPWRDWNEN		(1&lt;&lt;15)</span>

<span class="cm">/*</span>
<span class="cm"> * Palette regs</span>
<span class="cm"> */</span>

<span class="cp">#define _PALETTE_A		0x0a000</span>
<span class="cp">#define _PALETTE_B		0x0a800</span>
<span class="cp">#define PALETTE(pipe) _PIPE(pipe, _PALETTE_A, _PALETTE_B)</span>

<span class="cm">/* MCH MMIO space */</span>

<span class="cm">/*</span>
<span class="cm"> * MCHBAR mirror.</span>
<span class="cm"> *</span>
<span class="cm"> * This mirrors the MCHBAR MMIO space whose location is determined by</span>
<span class="cm"> * device 0 function 0&#39;s pci config register 0x44 or 0x48 and matches it in</span>
<span class="cm"> * every way.  It is not accessible from the CP register read instructions.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="cp">#define MCHBAR_MIRROR_BASE	0x10000</span>

<span class="cp">#define MCHBAR_MIRROR_BASE_SNB	0x140000</span>

<span class="cm">/** 915-945 and GM965 MCH register controlling DRAM channel access */</span>
<span class="cp">#define DCC			0x10200</span>
<span class="cp">#define DCC_ADDRESSING_MODE_SINGLE_CHANNEL		(0 &lt;&lt; 0)</span>
<span class="cp">#define DCC_ADDRESSING_MODE_DUAL_CHANNEL_ASYMMETRIC	(1 &lt;&lt; 0)</span>
<span class="cp">#define DCC_ADDRESSING_MODE_DUAL_CHANNEL_INTERLEAVED	(2 &lt;&lt; 0)</span>
<span class="cp">#define DCC_ADDRESSING_MODE_MASK			(3 &lt;&lt; 0)</span>
<span class="cp">#define DCC_CHANNEL_XOR_DISABLE				(1 &lt;&lt; 10)</span>
<span class="cp">#define DCC_CHANNEL_XOR_BIT_17				(1 &lt;&lt; 9)</span>

<span class="cm">/** Pineview MCH register contains DDR3 setting */</span>
<span class="cp">#define CSHRDDR3CTL            0x101a8</span>
<span class="cp">#define CSHRDDR3CTL_DDR3       (1 &lt;&lt; 2)</span>

<span class="cm">/** 965 MCH register controlling DRAM channel configuration */</span>
<span class="cp">#define C0DRB3			0x10206</span>
<span class="cp">#define C1DRB3			0x10606</span>

<span class="cm">/** snb MCH registers for reading the DRAM channel configuration */</span>
<span class="cp">#define MAD_DIMM_C0			(MCHBAR_MIRROR_BASE_SNB + 0x5004)</span>
<span class="cp">#define MAD_DIMM_C1			(MCHBAR_MIRROR_BASE_SNB + 0x5008)</span>
<span class="cp">#define MAD_DIMM_C2			(MCHBAR_MIRROR_BASE_SNB + 0x500C)</span>
<span class="cp">#define   MAD_DIMM_ECC_MASK		(0x3 &lt;&lt; 24)</span>
<span class="cp">#define   MAD_DIMM_ECC_OFF		(0x0 &lt;&lt; 24)</span>
<span class="cp">#define   MAD_DIMM_ECC_IO_ON_LOGIC_OFF	(0x1 &lt;&lt; 24)</span>
<span class="cp">#define   MAD_DIMM_ECC_IO_OFF_LOGIC_ON	(0x2 &lt;&lt; 24)</span>
<span class="cp">#define   MAD_DIMM_ECC_ON		(0x3 &lt;&lt; 24)</span>
<span class="cp">#define   MAD_DIMM_ENH_INTERLEAVE	(0x1 &lt;&lt; 22)</span>
<span class="cp">#define   MAD_DIMM_RANK_INTERLEAVE	(0x1 &lt;&lt; 21)</span>
<span class="cp">#define   MAD_DIMM_B_WIDTH_X16		(0x1 &lt;&lt; 20) </span><span class="cm">/* X8 chips if unset */</span><span class="cp"></span>
<span class="cp">#define   MAD_DIMM_A_WIDTH_X16		(0x1 &lt;&lt; 19) </span><span class="cm">/* X8 chips if unset */</span><span class="cp"></span>
<span class="cp">#define   MAD_DIMM_B_DUAL_RANK		(0x1 &lt;&lt; 18)</span>
<span class="cp">#define   MAD_DIMM_A_DUAL_RANK		(0x1 &lt;&lt; 17)</span>
<span class="cp">#define   MAD_DIMM_A_SELECT		(0x1 &lt;&lt; 16)</span>
<span class="cm">/* DIMM sizes are in multiples of 256mb. */</span>
<span class="cp">#define   MAD_DIMM_B_SIZE_SHIFT		8</span>
<span class="cp">#define   MAD_DIMM_B_SIZE_MASK		(0xff &lt;&lt; MAD_DIMM_B_SIZE_SHIFT)</span>
<span class="cp">#define   MAD_DIMM_A_SIZE_SHIFT		0</span>
<span class="cp">#define   MAD_DIMM_A_SIZE_MASK		(0xff &lt;&lt; MAD_DIMM_A_SIZE_SHIFT)</span>


<span class="cm">/* Clocking configuration register */</span>
<span class="cp">#define CLKCFG			0x10c00</span>
<span class="cp">#define CLKCFG_FSB_400					(5 &lt;&lt; 0)	</span><span class="cm">/* hrawclk 100 */</span><span class="cp"></span>
<span class="cp">#define CLKCFG_FSB_533					(1 &lt;&lt; 0)	</span><span class="cm">/* hrawclk 133 */</span><span class="cp"></span>
<span class="cp">#define CLKCFG_FSB_667					(3 &lt;&lt; 0)	</span><span class="cm">/* hrawclk 166 */</span><span class="cp"></span>
<span class="cp">#define CLKCFG_FSB_800					(2 &lt;&lt; 0)	</span><span class="cm">/* hrawclk 200 */</span><span class="cp"></span>
<span class="cp">#define CLKCFG_FSB_1067					(6 &lt;&lt; 0)	</span><span class="cm">/* hrawclk 266 */</span><span class="cp"></span>
<span class="cp">#define CLKCFG_FSB_1333					(7 &lt;&lt; 0)	</span><span class="cm">/* hrawclk 333 */</span><span class="cp"></span>
<span class="cm">/* Note, below two are guess */</span>
<span class="cp">#define CLKCFG_FSB_1600					(4 &lt;&lt; 0)	</span><span class="cm">/* hrawclk 400 */</span><span class="cp"></span>
<span class="cp">#define CLKCFG_FSB_1600_ALT				(0 &lt;&lt; 0)	</span><span class="cm">/* hrawclk 400 */</span><span class="cp"></span>
<span class="cp">#define CLKCFG_FSB_MASK					(7 &lt;&lt; 0)</span>
<span class="cp">#define CLKCFG_MEM_533					(1 &lt;&lt; 4)</span>
<span class="cp">#define CLKCFG_MEM_667					(2 &lt;&lt; 4)</span>
<span class="cp">#define CLKCFG_MEM_800					(3 &lt;&lt; 4)</span>
<span class="cp">#define CLKCFG_MEM_MASK					(7 &lt;&lt; 4)</span>

<span class="cp">#define TSC1			0x11001</span>
<span class="cp">#define   TSE			(1&lt;&lt;0)</span>
<span class="cp">#define TR1			0x11006</span>
<span class="cp">#define TSFS			0x11020</span>
<span class="cp">#define   TSFS_SLOPE_MASK	0x0000ff00</span>
<span class="cp">#define   TSFS_SLOPE_SHIFT	8</span>
<span class="cp">#define   TSFS_INTR_MASK	0x000000ff</span>

<span class="cp">#define CRSTANDVID		0x11100</span>
<span class="cp">#define PXVFREQ_BASE		0x11110 </span><span class="cm">/* P[0-15]VIDFREQ (0x1114c) (Ironlake) */</span><span class="cp"></span>
<span class="cp">#define   PXVFREQ_PX_MASK	0x7f000000</span>
<span class="cp">#define   PXVFREQ_PX_SHIFT	24</span>
<span class="cp">#define VIDFREQ_BASE		0x11110</span>
<span class="cp">#define VIDFREQ1		0x11110 </span><span class="cm">/* VIDFREQ1-4 (0x1111c) (Cantiga) */</span><span class="cp"></span>
<span class="cp">#define VIDFREQ2		0x11114</span>
<span class="cp">#define VIDFREQ3		0x11118</span>
<span class="cp">#define VIDFREQ4		0x1111c</span>
<span class="cp">#define   VIDFREQ_P0_MASK	0x1f000000</span>
<span class="cp">#define   VIDFREQ_P0_SHIFT	24</span>
<span class="cp">#define   VIDFREQ_P0_CSCLK_MASK	0x00f00000</span>
<span class="cp">#define   VIDFREQ_P0_CSCLK_SHIFT 20</span>
<span class="cp">#define   VIDFREQ_P0_CRCLK_MASK	0x000f0000</span>
<span class="cp">#define   VIDFREQ_P0_CRCLK_SHIFT 16</span>
<span class="cp">#define   VIDFREQ_P1_MASK	0x00001f00</span>
<span class="cp">#define   VIDFREQ_P1_SHIFT	8</span>
<span class="cp">#define   VIDFREQ_P1_CSCLK_MASK	0x000000f0</span>
<span class="cp">#define   VIDFREQ_P1_CSCLK_SHIFT 4</span>
<span class="cp">#define   VIDFREQ_P1_CRCLK_MASK	0x0000000f</span>
<span class="cp">#define INTTOEXT_BASE_ILK	0x11300</span>
<span class="cp">#define INTTOEXT_BASE		0x11120 </span><span class="cm">/* INTTOEXT1-8 (0x1113c) */</span><span class="cp"></span>
<span class="cp">#define   INTTOEXT_MAP3_SHIFT	24</span>
<span class="cp">#define   INTTOEXT_MAP3_MASK	(0x1f &lt;&lt; INTTOEXT_MAP3_SHIFT)</span>
<span class="cp">#define   INTTOEXT_MAP2_SHIFT	16</span>
<span class="cp">#define   INTTOEXT_MAP2_MASK	(0x1f &lt;&lt; INTTOEXT_MAP2_SHIFT)</span>
<span class="cp">#define   INTTOEXT_MAP1_SHIFT	8</span>
<span class="cp">#define   INTTOEXT_MAP1_MASK	(0x1f &lt;&lt; INTTOEXT_MAP1_SHIFT)</span>
<span class="cp">#define   INTTOEXT_MAP0_SHIFT	0</span>
<span class="cp">#define   INTTOEXT_MAP0_MASK	(0x1f &lt;&lt; INTTOEXT_MAP0_SHIFT)</span>
<span class="cp">#define MEMSWCTL		0x11170 </span><span class="cm">/* Ironlake only */</span><span class="cp"></span>
<span class="cp">#define   MEMCTL_CMD_MASK	0xe000</span>
<span class="cp">#define   MEMCTL_CMD_SHIFT	13</span>
<span class="cp">#define   MEMCTL_CMD_RCLK_OFF	0</span>
<span class="cp">#define   MEMCTL_CMD_RCLK_ON	1</span>
<span class="cp">#define   MEMCTL_CMD_CHFREQ	2</span>
<span class="cp">#define   MEMCTL_CMD_CHVID	3</span>
<span class="cp">#define   MEMCTL_CMD_VMMOFF	4</span>
<span class="cp">#define   MEMCTL_CMD_VMMON	5</span>
<span class="cp">#define   MEMCTL_CMD_STS	(1&lt;&lt;12) </span><span class="cm">/* write 1 triggers command, clears</span>
<span class="cm">					   when command complete */</span><span class="cp"></span>
<span class="cp">#define   MEMCTL_FREQ_MASK	0x0f00 </span><span class="cm">/* jitter, from 0-15 */</span><span class="cp"></span>
<span class="cp">#define   MEMCTL_FREQ_SHIFT	8</span>
<span class="cp">#define   MEMCTL_SFCAVM		(1&lt;&lt;7)</span>
<span class="cp">#define   MEMCTL_TGT_VID_MASK	0x007f</span>
<span class="cp">#define MEMIHYST		0x1117c</span>
<span class="cp">#define MEMINTREN		0x11180 </span><span class="cm">/* 16 bits */</span><span class="cp"></span>
<span class="cp">#define   MEMINT_RSEXIT_EN	(1&lt;&lt;8)</span>
<span class="cp">#define   MEMINT_CX_SUPR_EN	(1&lt;&lt;7)</span>
<span class="cp">#define   MEMINT_CONT_BUSY_EN	(1&lt;&lt;6)</span>
<span class="cp">#define   MEMINT_AVG_BUSY_EN	(1&lt;&lt;5)</span>
<span class="cp">#define   MEMINT_EVAL_CHG_EN	(1&lt;&lt;4)</span>
<span class="cp">#define   MEMINT_MON_IDLE_EN	(1&lt;&lt;3)</span>
<span class="cp">#define   MEMINT_UP_EVAL_EN	(1&lt;&lt;2)</span>
<span class="cp">#define   MEMINT_DOWN_EVAL_EN	(1&lt;&lt;1)</span>
<span class="cp">#define   MEMINT_SW_CMD_EN	(1&lt;&lt;0)</span>
<span class="cp">#define MEMINTRSTR		0x11182 </span><span class="cm">/* 16 bits */</span><span class="cp"></span>
<span class="cp">#define   MEM_RSEXIT_MASK	0xc000</span>
<span class="cp">#define   MEM_RSEXIT_SHIFT	14</span>
<span class="cp">#define   MEM_CONT_BUSY_MASK	0x3000</span>
<span class="cp">#define   MEM_CONT_BUSY_SHIFT	12</span>
<span class="cp">#define   MEM_AVG_BUSY_MASK	0x0c00</span>
<span class="cp">#define   MEM_AVG_BUSY_SHIFT	10</span>
<span class="cp">#define   MEM_EVAL_CHG_MASK	0x0300</span>
<span class="cp">#define   MEM_EVAL_BUSY_SHIFT	8</span>
<span class="cp">#define   MEM_MON_IDLE_MASK	0x00c0</span>
<span class="cp">#define   MEM_MON_IDLE_SHIFT	6</span>
<span class="cp">#define   MEM_UP_EVAL_MASK	0x0030</span>
<span class="cp">#define   MEM_UP_EVAL_SHIFT	4</span>
<span class="cp">#define   MEM_DOWN_EVAL_MASK	0x000c</span>
<span class="cp">#define   MEM_DOWN_EVAL_SHIFT	2</span>
<span class="cp">#define   MEM_SW_CMD_MASK	0x0003</span>
<span class="cp">#define   MEM_INT_STEER_GFX	0</span>
<span class="cp">#define   MEM_INT_STEER_CMR	1</span>
<span class="cp">#define   MEM_INT_STEER_SMI	2</span>
<span class="cp">#define   MEM_INT_STEER_SCI	3</span>
<span class="cp">#define MEMINTRSTS		0x11184</span>
<span class="cp">#define   MEMINT_RSEXIT		(1&lt;&lt;7)</span>
<span class="cp">#define   MEMINT_CONT_BUSY	(1&lt;&lt;6)</span>
<span class="cp">#define   MEMINT_AVG_BUSY	(1&lt;&lt;5)</span>
<span class="cp">#define   MEMINT_EVAL_CHG	(1&lt;&lt;4)</span>
<span class="cp">#define   MEMINT_MON_IDLE	(1&lt;&lt;3)</span>
<span class="cp">#define   MEMINT_UP_EVAL	(1&lt;&lt;2)</span>
<span class="cp">#define   MEMINT_DOWN_EVAL	(1&lt;&lt;1)</span>
<span class="cp">#define   MEMINT_SW_CMD		(1&lt;&lt;0)</span>
<span class="cp">#define MEMMODECTL		0x11190</span>
<span class="cp">#define   MEMMODE_BOOST_EN	(1&lt;&lt;31)</span>
<span class="cp">#define   MEMMODE_BOOST_FREQ_MASK 0x0f000000 </span><span class="cm">/* jitter for boost, 0-15 */</span><span class="cp"></span>
<span class="cp">#define   MEMMODE_BOOST_FREQ_SHIFT 24</span>
<span class="cp">#define   MEMMODE_IDLE_MODE_MASK 0x00030000</span>
<span class="cp">#define   MEMMODE_IDLE_MODE_SHIFT 16</span>
<span class="cp">#define   MEMMODE_IDLE_MODE_EVAL 0</span>
<span class="cp">#define   MEMMODE_IDLE_MODE_CONT 1</span>
<span class="cp">#define   MEMMODE_HWIDLE_EN	(1&lt;&lt;15)</span>
<span class="cp">#define   MEMMODE_SWMODE_EN	(1&lt;&lt;14)</span>
<span class="cp">#define   MEMMODE_RCLK_GATE	(1&lt;&lt;13)</span>
<span class="cp">#define   MEMMODE_HW_UPDATE	(1&lt;&lt;12)</span>
<span class="cp">#define   MEMMODE_FSTART_MASK	0x00000f00 </span><span class="cm">/* starting jitter, 0-15 */</span><span class="cp"></span>
<span class="cp">#define   MEMMODE_FSTART_SHIFT	8</span>
<span class="cp">#define   MEMMODE_FMAX_MASK	0x000000f0 </span><span class="cm">/* max jitter, 0-15 */</span><span class="cp"></span>
<span class="cp">#define   MEMMODE_FMAX_SHIFT	4</span>
<span class="cp">#define   MEMMODE_FMIN_MASK	0x0000000f </span><span class="cm">/* min jitter, 0-15 */</span><span class="cp"></span>
<span class="cp">#define RCBMAXAVG		0x1119c</span>
<span class="cp">#define MEMSWCTL2		0x1119e </span><span class="cm">/* Cantiga only */</span><span class="cp"></span>
<span class="cp">#define   SWMEMCMD_RENDER_OFF	(0 &lt;&lt; 13)</span>
<span class="cp">#define   SWMEMCMD_RENDER_ON	(1 &lt;&lt; 13)</span>
<span class="cp">#define   SWMEMCMD_SWFREQ	(2 &lt;&lt; 13)</span>
<span class="cp">#define   SWMEMCMD_TARVID	(3 &lt;&lt; 13)</span>
<span class="cp">#define   SWMEMCMD_VRM_OFF	(4 &lt;&lt; 13)</span>
<span class="cp">#define   SWMEMCMD_VRM_ON	(5 &lt;&lt; 13)</span>
<span class="cp">#define   CMDSTS		(1&lt;&lt;12)</span>
<span class="cp">#define   SFCAVM		(1&lt;&lt;11)</span>
<span class="cp">#define   SWFREQ_MASK		0x0380 </span><span class="cm">/* P0-7 */</span><span class="cp"></span>
<span class="cp">#define   SWFREQ_SHIFT		7</span>
<span class="cp">#define   TARVID_MASK		0x001f</span>
<span class="cp">#define MEMSTAT_CTG		0x111a0</span>
<span class="cp">#define RCBMINAVG		0x111a0</span>
<span class="cp">#define RCUPEI			0x111b0</span>
<span class="cp">#define RCDNEI			0x111b4</span>
<span class="cp">#define RSTDBYCTL		0x111b8</span>
<span class="cp">#define   RS1EN			(1&lt;&lt;31)</span>
<span class="cp">#define   RS2EN			(1&lt;&lt;30)</span>
<span class="cp">#define   RS3EN			(1&lt;&lt;29)</span>
<span class="cp">#define   D3RS3EN		(1&lt;&lt;28) </span><span class="cm">/* Display D3 imlies RS3 */</span><span class="cp"></span>
<span class="cp">#define   SWPROMORSX		(1&lt;&lt;27) </span><span class="cm">/* RSx promotion timers ignored */</span><span class="cp"></span>
<span class="cp">#define   RCWAKERW		(1&lt;&lt;26) </span><span class="cm">/* Resetwarn from PCH causes wakeup */</span><span class="cp"></span>
<span class="cp">#define   DPRSLPVREN		(1&lt;&lt;25) </span><span class="cm">/* Fast voltage ramp enable */</span><span class="cp"></span>
<span class="cp">#define   GFXTGHYST		(1&lt;&lt;24) </span><span class="cm">/* Hysteresis to allow trunk gating */</span><span class="cp"></span>
<span class="cp">#define   RCX_SW_EXIT		(1&lt;&lt;23) </span><span class="cm">/* Leave RSx and prevent re-entry */</span><span class="cp"></span>
<span class="cp">#define   RSX_STATUS_MASK	(7&lt;&lt;20)</span>
<span class="cp">#define   RSX_STATUS_ON		(0&lt;&lt;20)</span>
<span class="cp">#define   RSX_STATUS_RC1	(1&lt;&lt;20)</span>
<span class="cp">#define   RSX_STATUS_RC1E	(2&lt;&lt;20)</span>
<span class="cp">#define   RSX_STATUS_RS1	(3&lt;&lt;20)</span>
<span class="cp">#define   RSX_STATUS_RS2	(4&lt;&lt;20) </span><span class="cm">/* aka rc6 */</span><span class="cp"></span>
<span class="cp">#define   RSX_STATUS_RSVD	(5&lt;&lt;20) </span><span class="cm">/* deep rc6 unsupported on ilk */</span><span class="cp"></span>
<span class="cp">#define   RSX_STATUS_RS3	(6&lt;&lt;20) </span><span class="cm">/* rs3 unsupported on ilk */</span><span class="cp"></span>
<span class="cp">#define   RSX_STATUS_RSVD2	(7&lt;&lt;20)</span>
<span class="cp">#define   UWRCRSXE		(1&lt;&lt;19) </span><span class="cm">/* wake counter limit prevents rsx */</span><span class="cp"></span>
<span class="cp">#define   RSCRP			(1&lt;&lt;18) </span><span class="cm">/* rs requests control on rs1/2 reqs */</span><span class="cp"></span>
<span class="cp">#define   JRSC			(1&lt;&lt;17) </span><span class="cm">/* rsx coupled to cpu c-state */</span><span class="cp"></span>
<span class="cp">#define   RS2INC0		(1&lt;&lt;16) </span><span class="cm">/* allow rs2 in cpu c0 */</span><span class="cp"></span>
<span class="cp">#define   RS1CONTSAV_MASK	(3&lt;&lt;14)</span>
<span class="cp">#define   RS1CONTSAV_NO_RS1	(0&lt;&lt;14) </span><span class="cm">/* rs1 doesn&#39;t save/restore context */</span><span class="cp"></span>
<span class="cp">#define   RS1CONTSAV_RSVD	(1&lt;&lt;14)</span>
<span class="cp">#define   RS1CONTSAV_SAVE_RS1	(2&lt;&lt;14) </span><span class="cm">/* rs1 saves context */</span><span class="cp"></span>
<span class="cp">#define   RS1CONTSAV_FULL_RS1	(3&lt;&lt;14) </span><span class="cm">/* rs1 saves and restores context */</span><span class="cp"></span>
<span class="cp">#define   NORMSLEXLAT_MASK	(3&lt;&lt;12)</span>
<span class="cp">#define   SLOW_RS123		(0&lt;&lt;12)</span>
<span class="cp">#define   SLOW_RS23		(1&lt;&lt;12)</span>
<span class="cp">#define   SLOW_RS3		(2&lt;&lt;12)</span>
<span class="cp">#define   NORMAL_RS123		(3&lt;&lt;12)</span>
<span class="cp">#define   RCMODE_TIMEOUT	(1&lt;&lt;11) </span><span class="cm">/* 0 is eval interval method */</span><span class="cp"></span>
<span class="cp">#define   IMPROMOEN		(1&lt;&lt;10) </span><span class="cm">/* promo is immediate or delayed until next idle interval (only for timeout method above) */</span><span class="cp"></span>
<span class="cp">#define   RCENTSYNC		(1&lt;&lt;9) </span><span class="cm">/* rs coupled to cpu c-state (3/6/7) */</span><span class="cp"></span>
<span class="cp">#define   STATELOCK		(1&lt;&lt;7) </span><span class="cm">/* locked to rs_cstate if 0 */</span><span class="cp"></span>
<span class="cp">#define   RS_CSTATE_MASK	(3&lt;&lt;4)</span>
<span class="cp">#define   RS_CSTATE_C367_RS1	(0&lt;&lt;4)</span>
<span class="cp">#define   RS_CSTATE_C36_RS1_C7_RS2 (1&lt;&lt;4)</span>
<span class="cp">#define   RS_CSTATE_RSVD	(2&lt;&lt;4)</span>
<span class="cp">#define   RS_CSTATE_C367_RS2	(3&lt;&lt;4)</span>
<span class="cp">#define   REDSAVES		(1&lt;&lt;3) </span><span class="cm">/* no context save if was idle during rs0 */</span><span class="cp"></span>
<span class="cp">#define   REDRESTORES		(1&lt;&lt;2) </span><span class="cm">/* no restore if was idle during rs0 */</span><span class="cp"></span>
<span class="cp">#define VIDCTL			0x111c0</span>
<span class="cp">#define VIDSTS			0x111c8</span>
<span class="cp">#define VIDSTART		0x111cc </span><span class="cm">/* 8 bits */</span><span class="cp"></span>
<span class="cp">#define MEMSTAT_ILK			0x111f8</span>
<span class="cp">#define   MEMSTAT_VID_MASK	0x7f00</span>
<span class="cp">#define   MEMSTAT_VID_SHIFT	8</span>
<span class="cp">#define   MEMSTAT_PSTATE_MASK	0x00f8</span>
<span class="cp">#define   MEMSTAT_PSTATE_SHIFT  3</span>
<span class="cp">#define   MEMSTAT_MON_ACTV	(1&lt;&lt;2)</span>
<span class="cp">#define   MEMSTAT_SRC_CTL_MASK	0x0003</span>
<span class="cp">#define   MEMSTAT_SRC_CTL_CORE	0</span>
<span class="cp">#define   MEMSTAT_SRC_CTL_TRB	1</span>
<span class="cp">#define   MEMSTAT_SRC_CTL_THM	2</span>
<span class="cp">#define   MEMSTAT_SRC_CTL_STDBY 3</span>
<span class="cp">#define RCPREVBSYTUPAVG		0x113b8</span>
<span class="cp">#define RCPREVBSYTDNAVG		0x113bc</span>
<span class="cp">#define PMMISC			0x11214</span>
<span class="cp">#define   MCPPCE_EN		(1&lt;&lt;0) </span><span class="cm">/* enable PM_MSG from PCH-&gt;MPC */</span><span class="cp"></span>
<span class="cp">#define SDEW			0x1124c</span>
<span class="cp">#define CSIEW0			0x11250</span>
<span class="cp">#define CSIEW1			0x11254</span>
<span class="cp">#define CSIEW2			0x11258</span>
<span class="cp">#define PEW			0x1125c</span>
<span class="cp">#define DEW			0x11270</span>
<span class="cp">#define MCHAFE			0x112c0</span>
<span class="cp">#define CSIEC			0x112e0</span>
<span class="cp">#define DMIEC			0x112e4</span>
<span class="cp">#define DDREC			0x112e8</span>
<span class="cp">#define PEG0EC			0x112ec</span>
<span class="cp">#define PEG1EC			0x112f0</span>
<span class="cp">#define GFXEC			0x112f4</span>
<span class="cp">#define RPPREVBSYTUPAVG		0x113b8</span>
<span class="cp">#define RPPREVBSYTDNAVG		0x113bc</span>
<span class="cp">#define ECR			0x11600</span>
<span class="cp">#define   ECR_GPFE		(1&lt;&lt;31)</span>
<span class="cp">#define   ECR_IMONE		(1&lt;&lt;30)</span>
<span class="cp">#define   ECR_CAP_MASK		0x0000001f </span><span class="cm">/* Event range, 0-31 */</span><span class="cp"></span>
<span class="cp">#define OGW0			0x11608</span>
<span class="cp">#define OGW1			0x1160c</span>
<span class="cp">#define EG0			0x11610</span>
<span class="cp">#define EG1			0x11614</span>
<span class="cp">#define EG2			0x11618</span>
<span class="cp">#define EG3			0x1161c</span>
<span class="cp">#define EG4			0x11620</span>
<span class="cp">#define EG5			0x11624</span>
<span class="cp">#define EG6			0x11628</span>
<span class="cp">#define EG7			0x1162c</span>
<span class="cp">#define PXW			0x11664</span>
<span class="cp">#define PXWL			0x11680</span>
<span class="cp">#define LCFUSE02		0x116c0</span>
<span class="cp">#define   LCFUSE_HIV_MASK	0x000000ff</span>
<span class="cp">#define CSIPLL0			0x12c10</span>
<span class="cp">#define DDRMPLL1		0X12c20</span>
<span class="cp">#define PEG_BAND_GAP_DATA	0x14d68</span>

<span class="cp">#define GEN6_GT_PERF_STATUS	0x145948</span>
<span class="cp">#define GEN6_RP_STATE_LIMITS	0x145994</span>
<span class="cp">#define GEN6_RP_STATE_CAP	0x145998</span>

<span class="cm">/*</span>
<span class="cm"> * Logical Context regs</span>
<span class="cm"> */</span>
<span class="cp">#define CCID			0x2180</span>
<span class="cp">#define   CCID_EN		(1&lt;&lt;0)</span>
<span class="cm">/*</span>
<span class="cm"> * Overlay regs</span>
<span class="cm"> */</span>

<span class="cp">#define OVADD			0x30000</span>
<span class="cp">#define DOVSTA			0x30008</span>
<span class="cp">#define OC_BUF			(0x3&lt;&lt;20)</span>
<span class="cp">#define OGAMC5			0x30010</span>
<span class="cp">#define OGAMC4			0x30014</span>
<span class="cp">#define OGAMC3			0x30018</span>
<span class="cp">#define OGAMC2			0x3001c</span>
<span class="cp">#define OGAMC1			0x30020</span>
<span class="cp">#define OGAMC0			0x30024</span>

<span class="cm">/*</span>
<span class="cm"> * Display engine regs</span>
<span class="cm"> */</span>

<span class="cm">/* Pipe A timing regs */</span>
<span class="cp">#define _HTOTAL_A	0x60000</span>
<span class="cp">#define _HBLANK_A	0x60004</span>
<span class="cp">#define _HSYNC_A		0x60008</span>
<span class="cp">#define _VTOTAL_A	0x6000c</span>
<span class="cp">#define _VBLANK_A	0x60010</span>
<span class="cp">#define _VSYNC_A		0x60014</span>
<span class="cp">#define _PIPEASRC	0x6001c</span>
<span class="cp">#define _BCLRPAT_A	0x60020</span>
<span class="cp">#define _VSYNCSHIFT_A	0x60028</span>

<span class="cm">/* Pipe B timing regs */</span>
<span class="cp">#define _HTOTAL_B	0x61000</span>
<span class="cp">#define _HBLANK_B	0x61004</span>
<span class="cp">#define _HSYNC_B		0x61008</span>
<span class="cp">#define _VTOTAL_B	0x6100c</span>
<span class="cp">#define _VBLANK_B	0x61010</span>
<span class="cp">#define _VSYNC_B		0x61014</span>
<span class="cp">#define _PIPEBSRC	0x6101c</span>
<span class="cp">#define _BCLRPAT_B	0x61020</span>
<span class="cp">#define _VSYNCSHIFT_B	0x61028</span>


<span class="cp">#define HTOTAL(pipe) _PIPE(pipe, _HTOTAL_A, _HTOTAL_B)</span>
<span class="cp">#define HBLANK(pipe) _PIPE(pipe, _HBLANK_A, _HBLANK_B)</span>
<span class="cp">#define HSYNC(pipe) _PIPE(pipe, _HSYNC_A, _HSYNC_B)</span>
<span class="cp">#define VTOTAL(pipe) _PIPE(pipe, _VTOTAL_A, _VTOTAL_B)</span>
<span class="cp">#define VBLANK(pipe) _PIPE(pipe, _VBLANK_A, _VBLANK_B)</span>
<span class="cp">#define VSYNC(pipe) _PIPE(pipe, _VSYNC_A, _VSYNC_B)</span>
<span class="cp">#define BCLRPAT(pipe) _PIPE(pipe, _BCLRPAT_A, _BCLRPAT_B)</span>
<span class="cp">#define VSYNCSHIFT(pipe) _PIPE(pipe, _VSYNCSHIFT_A, _VSYNCSHIFT_B)</span>

<span class="cm">/* VGA port control */</span>
<span class="cp">#define ADPA			0x61100</span>
<span class="cp">#define   ADPA_DAC_ENABLE	(1&lt;&lt;31)</span>
<span class="cp">#define   ADPA_DAC_DISABLE	0</span>
<span class="cp">#define   ADPA_PIPE_SELECT_MASK	(1&lt;&lt;30)</span>
<span class="cp">#define   ADPA_PIPE_A_SELECT	0</span>
<span class="cp">#define   ADPA_PIPE_B_SELECT	(1&lt;&lt;30)</span>
<span class="cp">#define   ADPA_PIPE_SELECT(pipe) ((pipe) &lt;&lt; 30)</span>
<span class="cp">#define   ADPA_USE_VGA_HVPOLARITY (1&lt;&lt;15)</span>
<span class="cp">#define   ADPA_SETS_HVPOLARITY	0</span>
<span class="cp">#define   ADPA_VSYNC_CNTL_DISABLE (1&lt;&lt;11)</span>
<span class="cp">#define   ADPA_VSYNC_CNTL_ENABLE 0</span>
<span class="cp">#define   ADPA_HSYNC_CNTL_DISABLE (1&lt;&lt;10)</span>
<span class="cp">#define   ADPA_HSYNC_CNTL_ENABLE 0</span>
<span class="cp">#define   ADPA_VSYNC_ACTIVE_HIGH (1&lt;&lt;4)</span>
<span class="cp">#define   ADPA_VSYNC_ACTIVE_LOW	0</span>
<span class="cp">#define   ADPA_HSYNC_ACTIVE_HIGH (1&lt;&lt;3)</span>
<span class="cp">#define   ADPA_HSYNC_ACTIVE_LOW	0</span>
<span class="cp">#define   ADPA_DPMS_MASK	(~(3&lt;&lt;10))</span>
<span class="cp">#define   ADPA_DPMS_ON		(0&lt;&lt;10)</span>
<span class="cp">#define   ADPA_DPMS_SUSPEND	(1&lt;&lt;10)</span>
<span class="cp">#define   ADPA_DPMS_STANDBY	(2&lt;&lt;10)</span>
<span class="cp">#define   ADPA_DPMS_OFF		(3&lt;&lt;10)</span>


<span class="cm">/* Hotplug control (945+ only) */</span>
<span class="cp">#define PORT_HOTPLUG_EN		0x61110</span>
<span class="cp">#define   HDMIB_HOTPLUG_INT_EN			(1 &lt;&lt; 29)</span>
<span class="cp">#define   DPB_HOTPLUG_INT_EN			(1 &lt;&lt; 29)</span>
<span class="cp">#define   HDMIC_HOTPLUG_INT_EN			(1 &lt;&lt; 28)</span>
<span class="cp">#define   DPC_HOTPLUG_INT_EN			(1 &lt;&lt; 28)</span>
<span class="cp">#define   HDMID_HOTPLUG_INT_EN			(1 &lt;&lt; 27)</span>
<span class="cp">#define   DPD_HOTPLUG_INT_EN			(1 &lt;&lt; 27)</span>
<span class="cp">#define   SDVOB_HOTPLUG_INT_EN			(1 &lt;&lt; 26)</span>
<span class="cp">#define   SDVOC_HOTPLUG_INT_EN			(1 &lt;&lt; 25)</span>
<span class="cp">#define   TV_HOTPLUG_INT_EN			(1 &lt;&lt; 18)</span>
<span class="cp">#define   CRT_HOTPLUG_INT_EN			(1 &lt;&lt; 9)</span>
<span class="cp">#define   CRT_HOTPLUG_FORCE_DETECT		(1 &lt;&lt; 3)</span>
<span class="cp">#define CRT_HOTPLUG_ACTIVATION_PERIOD_32	(0 &lt;&lt; 8)</span>
<span class="cm">/* must use period 64 on GM45 according to docs */</span>
<span class="cp">#define CRT_HOTPLUG_ACTIVATION_PERIOD_64	(1 &lt;&lt; 8)</span>
<span class="cp">#define CRT_HOTPLUG_DAC_ON_TIME_2M		(0 &lt;&lt; 7)</span>
<span class="cp">#define CRT_HOTPLUG_DAC_ON_TIME_4M		(1 &lt;&lt; 7)</span>
<span class="cp">#define CRT_HOTPLUG_VOLTAGE_COMPARE_40		(0 &lt;&lt; 5)</span>
<span class="cp">#define CRT_HOTPLUG_VOLTAGE_COMPARE_50		(1 &lt;&lt; 5)</span>
<span class="cp">#define CRT_HOTPLUG_VOLTAGE_COMPARE_60		(2 &lt;&lt; 5)</span>
<span class="cp">#define CRT_HOTPLUG_VOLTAGE_COMPARE_70		(3 &lt;&lt; 5)</span>
<span class="cp">#define CRT_HOTPLUG_VOLTAGE_COMPARE_MASK	(3 &lt;&lt; 5)</span>
<span class="cp">#define CRT_HOTPLUG_DETECT_DELAY_1G		(0 &lt;&lt; 4)</span>
<span class="cp">#define CRT_HOTPLUG_DETECT_DELAY_2G		(1 &lt;&lt; 4)</span>
<span class="cp">#define CRT_HOTPLUG_DETECT_VOLTAGE_325MV	(0 &lt;&lt; 2)</span>
<span class="cp">#define CRT_HOTPLUG_DETECT_VOLTAGE_475MV	(1 &lt;&lt; 2)</span>

<span class="cp">#define PORT_HOTPLUG_STAT	0x61114</span>
<span class="cp">#define   HDMIB_HOTPLUG_INT_STATUS		(1 &lt;&lt; 29)</span>
<span class="cp">#define   DPB_HOTPLUG_INT_STATUS		(1 &lt;&lt; 29)</span>
<span class="cp">#define   HDMIC_HOTPLUG_INT_STATUS		(1 &lt;&lt; 28)</span>
<span class="cp">#define   DPC_HOTPLUG_INT_STATUS		(1 &lt;&lt; 28)</span>
<span class="cp">#define   HDMID_HOTPLUG_INT_STATUS		(1 &lt;&lt; 27)</span>
<span class="cp">#define   DPD_HOTPLUG_INT_STATUS		(1 &lt;&lt; 27)</span>
<span class="cp">#define   CRT_HOTPLUG_INT_STATUS		(1 &lt;&lt; 11)</span>
<span class="cp">#define   TV_HOTPLUG_INT_STATUS			(1 &lt;&lt; 10)</span>
<span class="cp">#define   CRT_HOTPLUG_MONITOR_MASK		(3 &lt;&lt; 8)</span>
<span class="cp">#define   CRT_HOTPLUG_MONITOR_COLOR		(3 &lt;&lt; 8)</span>
<span class="cp">#define   CRT_HOTPLUG_MONITOR_MONO		(2 &lt;&lt; 8)</span>
<span class="cp">#define   CRT_HOTPLUG_MONITOR_NONE		(0 &lt;&lt; 8)</span>
<span class="cp">#define   SDVOC_HOTPLUG_INT_STATUS		(1 &lt;&lt; 7)</span>
<span class="cp">#define   SDVOB_HOTPLUG_INT_STATUS		(1 &lt;&lt; 6)</span>

<span class="cm">/* SDVO port control */</span>
<span class="cp">#define SDVOB			0x61140</span>
<span class="cp">#define SDVOC			0x61160</span>
<span class="cp">#define   SDVO_ENABLE		(1 &lt;&lt; 31)</span>
<span class="cp">#define   SDVO_PIPE_B_SELECT	(1 &lt;&lt; 30)</span>
<span class="cp">#define   SDVO_STALL_SELECT	(1 &lt;&lt; 29)</span>
<span class="cp">#define   SDVO_INTERRUPT_ENABLE	(1 &lt;&lt; 26)</span>
<span class="cm">/**</span>
<span class="cm"> * 915G/GM SDVO pixel multiplier.</span>
<span class="cm"> *</span>
<span class="cm"> * Programmed value is multiplier - 1, up to 5x.</span>
<span class="cm"> *</span>
<span class="cm"> * \sa DPLL_MD_UDI_MULTIPLIER_MASK</span>
<span class="cm"> */</span>
<span class="cp">#define   SDVO_PORT_MULTIPLY_MASK	(7 &lt;&lt; 23)</span>
<span class="cp">#define   SDVO_PORT_MULTIPLY_SHIFT		23</span>
<span class="cp">#define   SDVO_PHASE_SELECT_MASK	(15 &lt;&lt; 19)</span>
<span class="cp">#define   SDVO_PHASE_SELECT_DEFAULT	(6 &lt;&lt; 19)</span>
<span class="cp">#define   SDVO_CLOCK_OUTPUT_INVERT	(1 &lt;&lt; 18)</span>
<span class="cp">#define   SDVOC_GANG_MODE		(1 &lt;&lt; 16)</span>
<span class="cp">#define   SDVO_ENCODING_SDVO		(0x0 &lt;&lt; 10)</span>
<span class="cp">#define   SDVO_ENCODING_HDMI		(0x2 &lt;&lt; 10)</span>
<span class="cm">/** Requird for HDMI operation */</span>
<span class="cp">#define   SDVO_NULL_PACKETS_DURING_VSYNC (1 &lt;&lt; 9)</span>
<span class="cp">#define   SDVO_COLOR_RANGE_16_235	(1 &lt;&lt; 8)</span>
<span class="cp">#define   SDVO_BORDER_ENABLE		(1 &lt;&lt; 7)</span>
<span class="cp">#define   SDVO_AUDIO_ENABLE		(1 &lt;&lt; 6)</span>
<span class="cm">/** New with 965, default is to be set */</span>
<span class="cp">#define   SDVO_VSYNC_ACTIVE_HIGH	(1 &lt;&lt; 4)</span>
<span class="cm">/** New with 965, default is to be set */</span>
<span class="cp">#define   SDVO_HSYNC_ACTIVE_HIGH	(1 &lt;&lt; 3)</span>
<span class="cp">#define   SDVOB_PCIE_CONCURRENCY	(1 &lt;&lt; 3)</span>
<span class="cp">#define   SDVO_DETECTED			(1 &lt;&lt; 2)</span>
<span class="cm">/* Bits to be preserved when writing */</span>
<span class="cp">#define   SDVOB_PRESERVE_MASK ((1 &lt;&lt; 17) | (1 &lt;&lt; 16) | (1 &lt;&lt; 14) | (1 &lt;&lt; 26))</span>
<span class="cp">#define   SDVOC_PRESERVE_MASK ((1 &lt;&lt; 17) | (1 &lt;&lt; 26))</span>

<span class="cm">/* DVO port control */</span>
<span class="cp">#define DVOA			0x61120</span>
<span class="cp">#define DVOB			0x61140</span>
<span class="cp">#define DVOC			0x61160</span>
<span class="cp">#define   DVO_ENABLE			(1 &lt;&lt; 31)</span>
<span class="cp">#define   DVO_PIPE_B_SELECT		(1 &lt;&lt; 30)</span>
<span class="cp">#define   DVO_PIPE_STALL_UNUSED		(0 &lt;&lt; 28)</span>
<span class="cp">#define   DVO_PIPE_STALL		(1 &lt;&lt; 28)</span>
<span class="cp">#define   DVO_PIPE_STALL_TV		(2 &lt;&lt; 28)</span>
<span class="cp">#define   DVO_PIPE_STALL_MASK		(3 &lt;&lt; 28)</span>
<span class="cp">#define   DVO_USE_VGA_SYNC		(1 &lt;&lt; 15)</span>
<span class="cp">#define   DVO_DATA_ORDER_I740		(0 &lt;&lt; 14)</span>
<span class="cp">#define   DVO_DATA_ORDER_FP		(1 &lt;&lt; 14)</span>
<span class="cp">#define   DVO_VSYNC_DISABLE		(1 &lt;&lt; 11)</span>
<span class="cp">#define   DVO_HSYNC_DISABLE		(1 &lt;&lt; 10)</span>
<span class="cp">#define   DVO_VSYNC_TRISTATE		(1 &lt;&lt; 9)</span>
<span class="cp">#define   DVO_HSYNC_TRISTATE		(1 &lt;&lt; 8)</span>
<span class="cp">#define   DVO_BORDER_ENABLE		(1 &lt;&lt; 7)</span>
<span class="cp">#define   DVO_DATA_ORDER_GBRG		(1 &lt;&lt; 6)</span>
<span class="cp">#define   DVO_DATA_ORDER_RGGB		(0 &lt;&lt; 6)</span>
<span class="cp">#define   DVO_DATA_ORDER_GBRG_ERRATA	(0 &lt;&lt; 6)</span>
<span class="cp">#define   DVO_DATA_ORDER_RGGB_ERRATA	(1 &lt;&lt; 6)</span>
<span class="cp">#define   DVO_VSYNC_ACTIVE_HIGH		(1 &lt;&lt; 4)</span>
<span class="cp">#define   DVO_HSYNC_ACTIVE_HIGH		(1 &lt;&lt; 3)</span>
<span class="cp">#define   DVO_BLANK_ACTIVE_HIGH		(1 &lt;&lt; 2)</span>
<span class="cp">#define   DVO_OUTPUT_CSTATE_PIXELS	(1 &lt;&lt; 1)	</span><span class="cm">/* SDG only */</span><span class="cp"></span>
<span class="cp">#define   DVO_OUTPUT_SOURCE_SIZE_PIXELS	(1 &lt;&lt; 0)	</span><span class="cm">/* SDG only */</span><span class="cp"></span>
<span class="cp">#define   DVO_PRESERVE_MASK		(0x7&lt;&lt;24)</span>
<span class="cp">#define DVOA_SRCDIM		0x61124</span>
<span class="cp">#define DVOB_SRCDIM		0x61144</span>
<span class="cp">#define DVOC_SRCDIM		0x61164</span>
<span class="cp">#define   DVO_SRCDIM_HORIZONTAL_SHIFT	12</span>
<span class="cp">#define   DVO_SRCDIM_VERTICAL_SHIFT	0</span>

<span class="cm">/* LVDS port control */</span>
<span class="cp">#define LVDS			0x61180</span>
<span class="cm">/*</span>
<span class="cm"> * Enables the LVDS port.  This bit must be set before DPLLs are enabled, as</span>
<span class="cm"> * the DPLL semantics change when the LVDS is assigned to that pipe.</span>
<span class="cm"> */</span>
<span class="cp">#define   LVDS_PORT_EN			(1 &lt;&lt; 31)</span>
<span class="cm">/* Selects pipe B for LVDS data.  Must be set on pre-965. */</span>
<span class="cp">#define   LVDS_PIPEB_SELECT		(1 &lt;&lt; 30)</span>
<span class="cp">#define   LVDS_PIPE_MASK		(1 &lt;&lt; 30)</span>
<span class="cp">#define   LVDS_PIPE(pipe)		((pipe) &lt;&lt; 30)</span>
<span class="cm">/* LVDS dithering flag on 965/g4x platform */</span>
<span class="cp">#define   LVDS_ENABLE_DITHER		(1 &lt;&lt; 25)</span>
<span class="cm">/* LVDS sync polarity flags. Set to invert (i.e. negative) */</span>
<span class="cp">#define   LVDS_VSYNC_POLARITY		(1 &lt;&lt; 21)</span>
<span class="cp">#define   LVDS_HSYNC_POLARITY		(1 &lt;&lt; 20)</span>

<span class="cm">/* Enable border for unscaled (or aspect-scaled) display */</span>
<span class="cp">#define   LVDS_BORDER_ENABLE		(1 &lt;&lt; 15)</span>
<span class="cm">/*</span>
<span class="cm"> * Enables the A0-A2 data pairs and CLKA, containing 18 bits of color data per</span>
<span class="cm"> * pixel.</span>
<span class="cm"> */</span>
<span class="cp">#define   LVDS_A0A2_CLKA_POWER_MASK	(3 &lt;&lt; 8)</span>
<span class="cp">#define   LVDS_A0A2_CLKA_POWER_DOWN	(0 &lt;&lt; 8)</span>
<span class="cp">#define   LVDS_A0A2_CLKA_POWER_UP	(3 &lt;&lt; 8)</span>
<span class="cm">/*</span>
<span class="cm"> * Controls the A3 data pair, which contains the additional LSBs for 24 bit</span>
<span class="cm"> * mode.  Only enabled if LVDS_A0A2_CLKA_POWER_UP also indicates it should be</span>
<span class="cm"> * on.</span>
<span class="cm"> */</span>
<span class="cp">#define   LVDS_A3_POWER_MASK		(3 &lt;&lt; 6)</span>
<span class="cp">#define   LVDS_A3_POWER_DOWN		(0 &lt;&lt; 6)</span>
<span class="cp">#define   LVDS_A3_POWER_UP		(3 &lt;&lt; 6)</span>
<span class="cm">/*</span>
<span class="cm"> * Controls the CLKB pair.  This should only be set when LVDS_B0B3_POWER_UP</span>
<span class="cm"> * is set.</span>
<span class="cm"> */</span>
<span class="cp">#define   LVDS_CLKB_POWER_MASK		(3 &lt;&lt; 4)</span>
<span class="cp">#define   LVDS_CLKB_POWER_DOWN		(0 &lt;&lt; 4)</span>
<span class="cp">#define   LVDS_CLKB_POWER_UP		(3 &lt;&lt; 4)</span>
<span class="cm">/*</span>
<span class="cm"> * Controls the B0-B3 data pairs.  This must be set to match the DPLL p2</span>
<span class="cm"> * setting for whether we are in dual-channel mode.  The B3 pair will</span>
<span class="cm"> * additionally only be powered up when LVDS_A3_POWER_UP is set.</span>
<span class="cm"> */</span>
<span class="cp">#define   LVDS_B0B3_POWER_MASK		(3 &lt;&lt; 2)</span>
<span class="cp">#define   LVDS_B0B3_POWER_DOWN		(0 &lt;&lt; 2)</span>
<span class="cp">#define   LVDS_B0B3_POWER_UP		(3 &lt;&lt; 2)</span>

<span class="cm">/* Video Data Island Packet control */</span>
<span class="cp">#define VIDEO_DIP_DATA		0x61178</span>
<span class="cp">#define VIDEO_DIP_CTL		0x61170</span>
<span class="cm">/* Pre HSW: */</span>
<span class="cp">#define   VIDEO_DIP_ENABLE		(1 &lt;&lt; 31)</span>
<span class="cp">#define   VIDEO_DIP_PORT_B		(1 &lt;&lt; 29)</span>
<span class="cp">#define   VIDEO_DIP_PORT_C		(2 &lt;&lt; 29)</span>
<span class="cp">#define   VIDEO_DIP_PORT_D		(3 &lt;&lt; 29)</span>
<span class="cp">#define   VIDEO_DIP_PORT_MASK		(3 &lt;&lt; 29)</span>
<span class="cp">#define   VIDEO_DIP_ENABLE_AVI		(1 &lt;&lt; 21)</span>
<span class="cp">#define   VIDEO_DIP_ENABLE_VENDOR	(2 &lt;&lt; 21)</span>
<span class="cp">#define   VIDEO_DIP_ENABLE_SPD		(8 &lt;&lt; 21)</span>
<span class="cp">#define   VIDEO_DIP_SELECT_AVI		(0 &lt;&lt; 19)</span>
<span class="cp">#define   VIDEO_DIP_SELECT_VENDOR	(1 &lt;&lt; 19)</span>
<span class="cp">#define   VIDEO_DIP_SELECT_SPD		(3 &lt;&lt; 19)</span>
<span class="cp">#define   VIDEO_DIP_SELECT_MASK		(3 &lt;&lt; 19)</span>
<span class="cp">#define   VIDEO_DIP_FREQ_ONCE		(0 &lt;&lt; 16)</span>
<span class="cp">#define   VIDEO_DIP_FREQ_VSYNC		(1 &lt;&lt; 16)</span>
<span class="cp">#define   VIDEO_DIP_FREQ_2VSYNC		(2 &lt;&lt; 16)</span>
<span class="cp">#define   VIDEO_DIP_FREQ_MASK		(3 &lt;&lt; 16)</span>
<span class="cm">/* HSW and later: */</span>
<span class="cp">#define   VIDEO_DIP_ENABLE_AVI_HSW	(1 &lt;&lt; 12)</span>
<span class="cp">#define   VIDEO_DIP_ENABLE_SPD_HSW	(1 &lt;&lt; 0)</span>

<span class="cm">/* Panel power sequencing */</span>
<span class="cp">#define PP_STATUS	0x61200</span>
<span class="cp">#define   PP_ON		(1 &lt;&lt; 31)</span>
<span class="cm">/*</span>
<span class="cm"> * Indicates that all dependencies of the panel are on:</span>
<span class="cm"> *</span>
<span class="cm"> * - PLL enabled</span>
<span class="cm"> * - pipe enabled</span>
<span class="cm"> * - LVDS/DVOB/DVOC on</span>
<span class="cm"> */</span>
<span class="cp">#define   PP_READY		(1 &lt;&lt; 30)</span>
<span class="cp">#define   PP_SEQUENCE_NONE	(0 &lt;&lt; 28)</span>
<span class="cp">#define   PP_SEQUENCE_POWER_UP	(1 &lt;&lt; 28)</span>
<span class="cp">#define   PP_SEQUENCE_POWER_DOWN (2 &lt;&lt; 28)</span>
<span class="cp">#define   PP_SEQUENCE_MASK	(3 &lt;&lt; 28)</span>
<span class="cp">#define   PP_SEQUENCE_SHIFT	28</span>
<span class="cp">#define   PP_CYCLE_DELAY_ACTIVE	(1 &lt;&lt; 27)</span>
<span class="cp">#define   PP_SEQUENCE_STATE_MASK 0x0000000f</span>
<span class="cp">#define   PP_SEQUENCE_STATE_OFF_IDLE	(0x0 &lt;&lt; 0)</span>
<span class="cp">#define   PP_SEQUENCE_STATE_OFF_S0_1	(0x1 &lt;&lt; 0)</span>
<span class="cp">#define   PP_SEQUENCE_STATE_OFF_S0_2	(0x2 &lt;&lt; 0)</span>
<span class="cp">#define   PP_SEQUENCE_STATE_OFF_S0_3	(0x3 &lt;&lt; 0)</span>
<span class="cp">#define   PP_SEQUENCE_STATE_ON_IDLE	(0x8 &lt;&lt; 0)</span>
<span class="cp">#define   PP_SEQUENCE_STATE_ON_S1_0	(0x9 &lt;&lt; 0)</span>
<span class="cp">#define   PP_SEQUENCE_STATE_ON_S1_2	(0xa &lt;&lt; 0)</span>
<span class="cp">#define   PP_SEQUENCE_STATE_ON_S1_3	(0xb &lt;&lt; 0)</span>
<span class="cp">#define   PP_SEQUENCE_STATE_RESET	(0xf &lt;&lt; 0)</span>
<span class="cp">#define PP_CONTROL	0x61204</span>
<span class="cp">#define   POWER_TARGET_ON	(1 &lt;&lt; 0)</span>
<span class="cp">#define PP_ON_DELAYS	0x61208</span>
<span class="cp">#define PP_OFF_DELAYS	0x6120c</span>
<span class="cp">#define PP_DIVISOR	0x61210</span>

<span class="cm">/* Panel fitting */</span>
<span class="cp">#define PFIT_CONTROL	0x61230</span>
<span class="cp">#define   PFIT_ENABLE		(1 &lt;&lt; 31)</span>
<span class="cp">#define   PFIT_PIPE_MASK	(3 &lt;&lt; 29)</span>
<span class="cp">#define   PFIT_PIPE_SHIFT	29</span>
<span class="cp">#define   VERT_INTERP_DISABLE	(0 &lt;&lt; 10)</span>
<span class="cp">#define   VERT_INTERP_BILINEAR	(1 &lt;&lt; 10)</span>
<span class="cp">#define   VERT_INTERP_MASK	(3 &lt;&lt; 10)</span>
<span class="cp">#define   VERT_AUTO_SCALE	(1 &lt;&lt; 9)</span>
<span class="cp">#define   HORIZ_INTERP_DISABLE	(0 &lt;&lt; 6)</span>
<span class="cp">#define   HORIZ_INTERP_BILINEAR	(1 &lt;&lt; 6)</span>
<span class="cp">#define   HORIZ_INTERP_MASK	(3 &lt;&lt; 6)</span>
<span class="cp">#define   HORIZ_AUTO_SCALE	(1 &lt;&lt; 5)</span>
<span class="cp">#define   PANEL_8TO6_DITHER_ENABLE (1 &lt;&lt; 3)</span>
<span class="cp">#define   PFIT_FILTER_FUZZY	(0 &lt;&lt; 24)</span>
<span class="cp">#define   PFIT_SCALING_AUTO	(0 &lt;&lt; 26)</span>
<span class="cp">#define   PFIT_SCALING_PROGRAMMED (1 &lt;&lt; 26)</span>
<span class="cp">#define   PFIT_SCALING_PILLAR	(2 &lt;&lt; 26)</span>
<span class="cp">#define   PFIT_SCALING_LETTER	(3 &lt;&lt; 26)</span>
<span class="cp">#define PFIT_PGM_RATIOS	0x61234</span>
<span class="cp">#define   PFIT_VERT_SCALE_MASK			0xfff00000</span>
<span class="cp">#define   PFIT_HORIZ_SCALE_MASK			0x0000fff0</span>
<span class="cm">/* Pre-965 */</span>
<span class="cp">#define		PFIT_VERT_SCALE_SHIFT		20</span>
<span class="cp">#define		PFIT_VERT_SCALE_MASK		0xfff00000</span>
<span class="cp">#define		PFIT_HORIZ_SCALE_SHIFT		4</span>
<span class="cp">#define		PFIT_HORIZ_SCALE_MASK		0x0000fff0</span>
<span class="cm">/* 965+ */</span>
<span class="cp">#define		PFIT_VERT_SCALE_SHIFT_965	16</span>
<span class="cp">#define		PFIT_VERT_SCALE_MASK_965	0x1fff0000</span>
<span class="cp">#define		PFIT_HORIZ_SCALE_SHIFT_965	0</span>
<span class="cp">#define		PFIT_HORIZ_SCALE_MASK_965	0x00001fff</span>

<span class="cp">#define PFIT_AUTO_RATIOS 0x61238</span>

<span class="cm">/* Backlight control */</span>
<span class="cp">#define BLC_PWM_CTL		0x61254</span>
<span class="cp">#define   BACKLIGHT_MODULATION_FREQ_SHIFT		(17)</span>
<span class="cp">#define BLC_PWM_CTL2		0x61250 </span><span class="cm">/* 965+ only */</span><span class="cp"></span>
<span class="cp">#define   BLM_COMBINATION_MODE (1 &lt;&lt; 30)</span>
<span class="cm">/*</span>
<span class="cm"> * This is the most significant 15 bits of the number of backlight cycles in a</span>
<span class="cm"> * complete cycle of the modulated backlight control.</span>
<span class="cm"> *</span>
<span class="cm"> * The actual value is this field multiplied by two.</span>
<span class="cm"> */</span>
<span class="cp">#define   BACKLIGHT_MODULATION_FREQ_MASK		(0x7fff &lt;&lt; 17)</span>
<span class="cp">#define   BLM_LEGACY_MODE				(1 &lt;&lt; 16)</span>
<span class="cm">/*</span>
<span class="cm"> * This is the number of cycles out of the backlight modulation cycle for which</span>
<span class="cm"> * the backlight is on.</span>
<span class="cm"> *</span>
<span class="cm"> * This field must be no greater than the number of cycles in the complete</span>
<span class="cm"> * backlight modulation cycle.</span>
<span class="cm"> */</span>
<span class="cp">#define   BACKLIGHT_DUTY_CYCLE_SHIFT		(0)</span>
<span class="cp">#define   BACKLIGHT_DUTY_CYCLE_MASK		(0xffff)</span>

<span class="cp">#define BLC_HIST_CTL		0x61260</span>

<span class="cm">/* TV port control */</span>
<span class="cp">#define TV_CTL			0x68000</span>
<span class="cm">/** Enables the TV encoder */</span>
<span class="cp"># define TV_ENC_ENABLE			(1 &lt;&lt; 31)</span>
<span class="cm">/** Sources the TV encoder input from pipe B instead of A. */</span>
<span class="cp"># define TV_ENC_PIPEB_SELECT		(1 &lt;&lt; 30)</span>
<span class="cm">/** Outputs composite video (DAC A only) */</span>
<span class="cp"># define TV_ENC_OUTPUT_COMPOSITE	(0 &lt;&lt; 28)</span>
<span class="cm">/** Outputs SVideo video (DAC B/C) */</span>
<span class="cp"># define TV_ENC_OUTPUT_SVIDEO		(1 &lt;&lt; 28)</span>
<span class="cm">/** Outputs Component video (DAC A/B/C) */</span>
<span class="cp"># define TV_ENC_OUTPUT_COMPONENT	(2 &lt;&lt; 28)</span>
<span class="cm">/** Outputs Composite and SVideo (DAC A/B/C) */</span>
<span class="cp"># define TV_ENC_OUTPUT_SVIDEO_COMPOSITE	(3 &lt;&lt; 28)</span>
<span class="cp"># define TV_TRILEVEL_SYNC		(1 &lt;&lt; 21)</span>
<span class="cm">/** Enables slow sync generation (945GM only) */</span>
<span class="cp"># define TV_SLOW_SYNC			(1 &lt;&lt; 20)</span>
<span class="cm">/** Selects 4x oversampling for 480i and 576p */</span>
<span class="cp"># define TV_OVERSAMPLE_4X		(0 &lt;&lt; 18)</span>
<span class="cm">/** Selects 2x oversampling for 720p and 1080i */</span>
<span class="cp"># define TV_OVERSAMPLE_2X		(1 &lt;&lt; 18)</span>
<span class="cm">/** Selects no oversampling for 1080p */</span>
<span class="cp"># define TV_OVERSAMPLE_NONE		(2 &lt;&lt; 18)</span>
<span class="cm">/** Selects 8x oversampling */</span>
<span class="cp"># define TV_OVERSAMPLE_8X		(3 &lt;&lt; 18)</span>
<span class="cm">/** Selects progressive mode rather than interlaced */</span>
<span class="cp"># define TV_PROGRESSIVE			(1 &lt;&lt; 17)</span>
<span class="cm">/** Sets the colorburst to PAL mode.  Required for non-M PAL modes. */</span>
<span class="cp"># define TV_PAL_BURST			(1 &lt;&lt; 16)</span>
<span class="cm">/** Field for setting delay of Y compared to C */</span>
<span class="cp"># define TV_YC_SKEW_MASK		(7 &lt;&lt; 12)</span>
<span class="cm">/** Enables a fix for 480p/576p standard definition modes on the 915GM only */</span>
<span class="cp"># define TV_ENC_SDP_FIX			(1 &lt;&lt; 11)</span>
<span class="cm">/**</span>
<span class="cm"> * Enables a fix for the 915GM only.</span>
<span class="cm"> *</span>
<span class="cm"> * Not sure what it does.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_ENC_C0_FIX			(1 &lt;&lt; 10)</span>
<span class="cm">/** Bits that must be preserved by software */</span>
<span class="cp"># define TV_CTL_SAVE			((1 &lt;&lt; 11) | (3 &lt;&lt; 9) | (7 &lt;&lt; 6) | 0xf)</span>
<span class="cp"># define TV_FUSE_STATE_MASK		(3 &lt;&lt; 4)</span>
<span class="cm">/** Read-only state that reports all features enabled */</span>
<span class="cp"># define TV_FUSE_STATE_ENABLED		(0 &lt;&lt; 4)</span>
<span class="cm">/** Read-only state that reports that Macrovision is disabled in hardware*/</span>
<span class="cp"># define TV_FUSE_STATE_NO_MACROVISION	(1 &lt;&lt; 4)</span>
<span class="cm">/** Read-only state that reports that TV-out is disabled in hardware. */</span>
<span class="cp"># define TV_FUSE_STATE_DISABLED		(2 &lt;&lt; 4)</span>
<span class="cm">/** Normal operation */</span>
<span class="cp"># define TV_TEST_MODE_NORMAL		(0 &lt;&lt; 0)</span>
<span class="cm">/** Encoder test pattern 1 - combo pattern */</span>
<span class="cp"># define TV_TEST_MODE_PATTERN_1		(1 &lt;&lt; 0)</span>
<span class="cm">/** Encoder test pattern 2 - full screen vertical 75% color bars */</span>
<span class="cp"># define TV_TEST_MODE_PATTERN_2		(2 &lt;&lt; 0)</span>
<span class="cm">/** Encoder test pattern 3 - full screen horizontal 75% color bars */</span>
<span class="cp"># define TV_TEST_MODE_PATTERN_3		(3 &lt;&lt; 0)</span>
<span class="cm">/** Encoder test pattern 4 - random noise */</span>
<span class="cp"># define TV_TEST_MODE_PATTERN_4		(4 &lt;&lt; 0)</span>
<span class="cm">/** Encoder test pattern 5 - linear color ramps */</span>
<span class="cp"># define TV_TEST_MODE_PATTERN_5		(5 &lt;&lt; 0)</span>
<span class="cm">/**</span>
<span class="cm"> * This test mode forces the DACs to 50% of full output.</span>
<span class="cm"> *</span>
<span class="cm"> * This is used for load detection in combination with TVDAC_SENSE_MASK</span>
<span class="cm"> */</span>
<span class="cp"># define TV_TEST_MODE_MONITOR_DETECT	(7 &lt;&lt; 0)</span>
<span class="cp"># define TV_TEST_MODE_MASK		(7 &lt;&lt; 0)</span>

<span class="cp">#define TV_DAC			0x68004</span>
<span class="cp"># define TV_DAC_SAVE		0x00ffff00</span>
<span class="cm">/**</span>
<span class="cm"> * Reports that DAC state change logic has reported change (RO).</span>
<span class="cm"> *</span>
<span class="cm"> * This gets cleared when TV_DAC_STATE_EN is cleared</span>
<span class="cm">*/</span>
<span class="cp"># define TVDAC_STATE_CHG		(1 &lt;&lt; 31)</span>
<span class="cp"># define TVDAC_SENSE_MASK		(7 &lt;&lt; 28)</span>
<span class="cm">/** Reports that DAC A voltage is above the detect threshold */</span>
<span class="cp"># define TVDAC_A_SENSE			(1 &lt;&lt; 30)</span>
<span class="cm">/** Reports that DAC B voltage is above the detect threshold */</span>
<span class="cp"># define TVDAC_B_SENSE			(1 &lt;&lt; 29)</span>
<span class="cm">/** Reports that DAC C voltage is above the detect threshold */</span>
<span class="cp"># define TVDAC_C_SENSE			(1 &lt;&lt; 28)</span>
<span class="cm">/**</span>
<span class="cm"> * Enables DAC state detection logic, for load-based TV detection.</span>
<span class="cm"> *</span>
<span class="cm"> * The PLL of the chosen pipe (in TV_CTL) must be running, and the encoder set</span>
<span class="cm"> * to off, for load detection to work.</span>
<span class="cm"> */</span>
<span class="cp"># define TVDAC_STATE_CHG_EN		(1 &lt;&lt; 27)</span>
<span class="cm">/** Sets the DAC A sense value to high */</span>
<span class="cp"># define TVDAC_A_SENSE_CTL		(1 &lt;&lt; 26)</span>
<span class="cm">/** Sets the DAC B sense value to high */</span>
<span class="cp"># define TVDAC_B_SENSE_CTL		(1 &lt;&lt; 25)</span>
<span class="cm">/** Sets the DAC C sense value to high */</span>
<span class="cp"># define TVDAC_C_SENSE_CTL		(1 &lt;&lt; 24)</span>
<span class="cm">/** Overrides the ENC_ENABLE and DAC voltage levels */</span>
<span class="cp"># define DAC_CTL_OVERRIDE		(1 &lt;&lt; 7)</span>
<span class="cm">/** Sets the slew rate.  Must be preserved in software */</span>
<span class="cp"># define ENC_TVDAC_SLEW_FAST		(1 &lt;&lt; 6)</span>
<span class="cp"># define DAC_A_1_3_V			(0 &lt;&lt; 4)</span>
<span class="cp"># define DAC_A_1_1_V			(1 &lt;&lt; 4)</span>
<span class="cp"># define DAC_A_0_7_V			(2 &lt;&lt; 4)</span>
<span class="cp"># define DAC_A_MASK			(3 &lt;&lt; 4)</span>
<span class="cp"># define DAC_B_1_3_V			(0 &lt;&lt; 2)</span>
<span class="cp"># define DAC_B_1_1_V			(1 &lt;&lt; 2)</span>
<span class="cp"># define DAC_B_0_7_V			(2 &lt;&lt; 2)</span>
<span class="cp"># define DAC_B_MASK			(3 &lt;&lt; 2)</span>
<span class="cp"># define DAC_C_1_3_V			(0 &lt;&lt; 0)</span>
<span class="cp"># define DAC_C_1_1_V			(1 &lt;&lt; 0)</span>
<span class="cp"># define DAC_C_0_7_V			(2 &lt;&lt; 0)</span>
<span class="cp"># define DAC_C_MASK			(3 &lt;&lt; 0)</span>

<span class="cm">/**</span>
<span class="cm"> * CSC coefficients are stored in a floating point format with 9 bits of</span>
<span class="cm"> * mantissa and 2 or 3 bits of exponent.  The exponent is represented as 2**-n,</span>
<span class="cm"> * where 2-bit exponents are unsigned n, and 3-bit exponents are signed n with</span>
<span class="cm"> * -1 (0x3) being the only legal negative value.</span>
<span class="cm"> */</span>
<span class="cp">#define TV_CSC_Y		0x68010</span>
<span class="cp"># define TV_RY_MASK			0x07ff0000</span>
<span class="cp"># define TV_RY_SHIFT			16</span>
<span class="cp"># define TV_GY_MASK			0x00000fff</span>
<span class="cp"># define TV_GY_SHIFT			0</span>

<span class="cp">#define TV_CSC_Y2		0x68014</span>
<span class="cp"># define TV_BY_MASK			0x07ff0000</span>
<span class="cp"># define TV_BY_SHIFT			16</span>
<span class="cm">/**</span>
<span class="cm"> * Y attenuation for component video.</span>
<span class="cm"> *</span>
<span class="cm"> * Stored in 1.9 fixed point.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_AY_MASK			0x000003ff</span>
<span class="cp"># define TV_AY_SHIFT			0</span>

<span class="cp">#define TV_CSC_U		0x68018</span>
<span class="cp"># define TV_RU_MASK			0x07ff0000</span>
<span class="cp"># define TV_RU_SHIFT			16</span>
<span class="cp"># define TV_GU_MASK			0x000007ff</span>
<span class="cp"># define TV_GU_SHIFT			0</span>

<span class="cp">#define TV_CSC_U2		0x6801c</span>
<span class="cp"># define TV_BU_MASK			0x07ff0000</span>
<span class="cp"># define TV_BU_SHIFT			16</span>
<span class="cm">/**</span>
<span class="cm"> * U attenuation for component video.</span>
<span class="cm"> *</span>
<span class="cm"> * Stored in 1.9 fixed point.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_AU_MASK			0x000003ff</span>
<span class="cp"># define TV_AU_SHIFT			0</span>

<span class="cp">#define TV_CSC_V		0x68020</span>
<span class="cp"># define TV_RV_MASK			0x0fff0000</span>
<span class="cp"># define TV_RV_SHIFT			16</span>
<span class="cp"># define TV_GV_MASK			0x000007ff</span>
<span class="cp"># define TV_GV_SHIFT			0</span>

<span class="cp">#define TV_CSC_V2		0x68024</span>
<span class="cp"># define TV_BV_MASK			0x07ff0000</span>
<span class="cp"># define TV_BV_SHIFT			16</span>
<span class="cm">/**</span>
<span class="cm"> * V attenuation for component video.</span>
<span class="cm"> *</span>
<span class="cm"> * Stored in 1.9 fixed point.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_AV_MASK			0x000007ff</span>
<span class="cp"># define TV_AV_SHIFT			0</span>

<span class="cp">#define TV_CLR_KNOBS		0x68028</span>
<span class="cm">/** 2s-complement brightness adjustment */</span>
<span class="cp"># define TV_BRIGHTNESS_MASK		0xff000000</span>
<span class="cp"># define TV_BRIGHTNESS_SHIFT		24</span>
<span class="cm">/** Contrast adjustment, as a 2.6 unsigned floating point number */</span>
<span class="cp"># define TV_CONTRAST_MASK		0x00ff0000</span>
<span class="cp"># define TV_CONTRAST_SHIFT		16</span>
<span class="cm">/** Saturation adjustment, as a 2.6 unsigned floating point number */</span>
<span class="cp"># define TV_SATURATION_MASK		0x0000ff00</span>
<span class="cp"># define TV_SATURATION_SHIFT		8</span>
<span class="cm">/** Hue adjustment, as an integer phase angle in degrees */</span>
<span class="cp"># define TV_HUE_MASK			0x000000ff</span>
<span class="cp"># define TV_HUE_SHIFT			0</span>

<span class="cp">#define TV_CLR_LEVEL		0x6802c</span>
<span class="cm">/** Controls the DAC level for black */</span>
<span class="cp"># define TV_BLACK_LEVEL_MASK		0x01ff0000</span>
<span class="cp"># define TV_BLACK_LEVEL_SHIFT		16</span>
<span class="cm">/** Controls the DAC level for blanking */</span>
<span class="cp"># define TV_BLANK_LEVEL_MASK		0x000001ff</span>
<span class="cp"># define TV_BLANK_LEVEL_SHIFT		0</span>

<span class="cp">#define TV_H_CTL_1		0x68030</span>
<span class="cm">/** Number of pixels in the hsync. */</span>
<span class="cp"># define TV_HSYNC_END_MASK		0x1fff0000</span>
<span class="cp"># define TV_HSYNC_END_SHIFT		16</span>
<span class="cm">/** Total number of pixels minus one in the line (display and blanking). */</span>
<span class="cp"># define TV_HTOTAL_MASK			0x00001fff</span>
<span class="cp"># define TV_HTOTAL_SHIFT		0</span>

<span class="cp">#define TV_H_CTL_2		0x68034</span>
<span class="cm">/** Enables the colorburst (needed for non-component color) */</span>
<span class="cp"># define TV_BURST_ENA			(1 &lt;&lt; 31)</span>
<span class="cm">/** Offset of the colorburst from the start of hsync, in pixels minus one. */</span>
<span class="cp"># define TV_HBURST_START_SHIFT		16</span>
<span class="cp"># define TV_HBURST_START_MASK		0x1fff0000</span>
<span class="cm">/** Length of the colorburst */</span>
<span class="cp"># define TV_HBURST_LEN_SHIFT		0</span>
<span class="cp"># define TV_HBURST_LEN_MASK		0x0001fff</span>

<span class="cp">#define TV_H_CTL_3		0x68038</span>
<span class="cm">/** End of hblank, measured in pixels minus one from start of hsync */</span>
<span class="cp"># define TV_HBLANK_END_SHIFT		16</span>
<span class="cp"># define TV_HBLANK_END_MASK		0x1fff0000</span>
<span class="cm">/** Start of hblank, measured in pixels minus one from start of hsync */</span>
<span class="cp"># define TV_HBLANK_START_SHIFT		0</span>
<span class="cp"># define TV_HBLANK_START_MASK		0x0001fff</span>

<span class="cp">#define TV_V_CTL_1		0x6803c</span>
<span class="cm">/** XXX */</span>
<span class="cp"># define TV_NBR_END_SHIFT		16</span>
<span class="cp"># define TV_NBR_END_MASK		0x07ff0000</span>
<span class="cm">/** XXX */</span>
<span class="cp"># define TV_VI_END_F1_SHIFT		8</span>
<span class="cp"># define TV_VI_END_F1_MASK		0x00003f00</span>
<span class="cm">/** XXX */</span>
<span class="cp"># define TV_VI_END_F2_SHIFT		0</span>
<span class="cp"># define TV_VI_END_F2_MASK		0x0000003f</span>

<span class="cp">#define TV_V_CTL_2		0x68040</span>
<span class="cm">/** Length of vsync, in half lines */</span>
<span class="cp"># define TV_VSYNC_LEN_MASK		0x07ff0000</span>
<span class="cp"># define TV_VSYNC_LEN_SHIFT		16</span>
<span class="cm">/** Offset of the start of vsync in field 1, measured in one less than the</span>
<span class="cm"> * number of half lines.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VSYNC_START_F1_MASK		0x00007f00</span>
<span class="cp"># define TV_VSYNC_START_F1_SHIFT	8</span>
<span class="cm">/**</span>
<span class="cm"> * Offset of the start of vsync in field 2, measured in one less than the</span>
<span class="cm"> * number of half lines.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VSYNC_START_F2_MASK		0x0000007f</span>
<span class="cp"># define TV_VSYNC_START_F2_SHIFT	0</span>

<span class="cp">#define TV_V_CTL_3		0x68044</span>
<span class="cm">/** Enables generation of the equalization signal */</span>
<span class="cp"># define TV_EQUAL_ENA			(1 &lt;&lt; 31)</span>
<span class="cm">/** Length of vsync, in half lines */</span>
<span class="cp"># define TV_VEQ_LEN_MASK		0x007f0000</span>
<span class="cp"># define TV_VEQ_LEN_SHIFT		16</span>
<span class="cm">/** Offset of the start of equalization in field 1, measured in one less than</span>
<span class="cm"> * the number of half lines.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VEQ_START_F1_MASK		0x0007f00</span>
<span class="cp"># define TV_VEQ_START_F1_SHIFT		8</span>
<span class="cm">/**</span>
<span class="cm"> * Offset of the start of equalization in field 2, measured in one less than</span>
<span class="cm"> * the number of half lines.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VEQ_START_F2_MASK		0x000007f</span>
<span class="cp"># define TV_VEQ_START_F2_SHIFT		0</span>

<span class="cp">#define TV_V_CTL_4		0x68048</span>
<span class="cm">/**</span>
<span class="cm"> * Offset to start of vertical colorburst, measured in one less than the</span>
<span class="cm"> * number of lines from vertical start.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VBURST_START_F1_MASK	0x003f0000</span>
<span class="cp"># define TV_VBURST_START_F1_SHIFT	16</span>
<span class="cm">/**</span>
<span class="cm"> * Offset to the end of vertical colorburst, measured in one less than the</span>
<span class="cm"> * number of lines from the start of NBR.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VBURST_END_F1_MASK		0x000000ff</span>
<span class="cp"># define TV_VBURST_END_F1_SHIFT		0</span>

<span class="cp">#define TV_V_CTL_5		0x6804c</span>
<span class="cm">/**</span>
<span class="cm"> * Offset to start of vertical colorburst, measured in one less than the</span>
<span class="cm"> * number of lines from vertical start.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VBURST_START_F2_MASK	0x003f0000</span>
<span class="cp"># define TV_VBURST_START_F2_SHIFT	16</span>
<span class="cm">/**</span>
<span class="cm"> * Offset to the end of vertical colorburst, measured in one less than the</span>
<span class="cm"> * number of lines from the start of NBR.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VBURST_END_F2_MASK		0x000000ff</span>
<span class="cp"># define TV_VBURST_END_F2_SHIFT		0</span>

<span class="cp">#define TV_V_CTL_6		0x68050</span>
<span class="cm">/**</span>
<span class="cm"> * Offset to start of vertical colorburst, measured in one less than the</span>
<span class="cm"> * number of lines from vertical start.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VBURST_START_F3_MASK	0x003f0000</span>
<span class="cp"># define TV_VBURST_START_F3_SHIFT	16</span>
<span class="cm">/**</span>
<span class="cm"> * Offset to the end of vertical colorburst, measured in one less than the</span>
<span class="cm"> * number of lines from the start of NBR.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VBURST_END_F3_MASK		0x000000ff</span>
<span class="cp"># define TV_VBURST_END_F3_SHIFT		0</span>

<span class="cp">#define TV_V_CTL_7		0x68054</span>
<span class="cm">/**</span>
<span class="cm"> * Offset to start of vertical colorburst, measured in one less than the</span>
<span class="cm"> * number of lines from vertical start.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VBURST_START_F4_MASK	0x003f0000</span>
<span class="cp"># define TV_VBURST_START_F4_SHIFT	16</span>
<span class="cm">/**</span>
<span class="cm"> * Offset to the end of vertical colorburst, measured in one less than the</span>
<span class="cm"> * number of lines from the start of NBR.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VBURST_END_F4_MASK		0x000000ff</span>
<span class="cp"># define TV_VBURST_END_F4_SHIFT		0</span>

<span class="cp">#define TV_SC_CTL_1		0x68060</span>
<span class="cm">/** Turns on the first subcarrier phase generation DDA */</span>
<span class="cp"># define TV_SC_DDA1_EN			(1 &lt;&lt; 31)</span>
<span class="cm">/** Turns on the first subcarrier phase generation DDA */</span>
<span class="cp"># define TV_SC_DDA2_EN			(1 &lt;&lt; 30)</span>
<span class="cm">/** Turns on the first subcarrier phase generation DDA */</span>
<span class="cp"># define TV_SC_DDA3_EN			(1 &lt;&lt; 29)</span>
<span class="cm">/** Sets the subcarrier DDA to reset frequency every other field */</span>
<span class="cp"># define TV_SC_RESET_EVERY_2		(0 &lt;&lt; 24)</span>
<span class="cm">/** Sets the subcarrier DDA to reset frequency every fourth field */</span>
<span class="cp"># define TV_SC_RESET_EVERY_4		(1 &lt;&lt; 24)</span>
<span class="cm">/** Sets the subcarrier DDA to reset frequency every eighth field */</span>
<span class="cp"># define TV_SC_RESET_EVERY_8		(2 &lt;&lt; 24)</span>
<span class="cm">/** Sets the subcarrier DDA to never reset the frequency */</span>
<span class="cp"># define TV_SC_RESET_NEVER		(3 &lt;&lt; 24)</span>
<span class="cm">/** Sets the peak amplitude of the colorburst.*/</span>
<span class="cp"># define TV_BURST_LEVEL_MASK		0x00ff0000</span>
<span class="cp"># define TV_BURST_LEVEL_SHIFT		16</span>
<span class="cm">/** Sets the increment of the first subcarrier phase generation DDA */</span>
<span class="cp"># define TV_SCDDA1_INC_MASK		0x00000fff</span>
<span class="cp"># define TV_SCDDA1_INC_SHIFT		0</span>

<span class="cp">#define TV_SC_CTL_2		0x68064</span>
<span class="cm">/** Sets the rollover for the second subcarrier phase generation DDA */</span>
<span class="cp"># define TV_SCDDA2_SIZE_MASK		0x7fff0000</span>
<span class="cp"># define TV_SCDDA2_SIZE_SHIFT		16</span>
<span class="cm">/** Sets the increent of the second subcarrier phase generation DDA */</span>
<span class="cp"># define TV_SCDDA2_INC_MASK		0x00007fff</span>
<span class="cp"># define TV_SCDDA2_INC_SHIFT		0</span>

<span class="cp">#define TV_SC_CTL_3		0x68068</span>
<span class="cm">/** Sets the rollover for the third subcarrier phase generation DDA */</span>
<span class="cp"># define TV_SCDDA3_SIZE_MASK		0x7fff0000</span>
<span class="cp"># define TV_SCDDA3_SIZE_SHIFT		16</span>
<span class="cm">/** Sets the increent of the third subcarrier phase generation DDA */</span>
<span class="cp"># define TV_SCDDA3_INC_MASK		0x00007fff</span>
<span class="cp"># define TV_SCDDA3_INC_SHIFT		0</span>

<span class="cp">#define TV_WIN_POS		0x68070</span>
<span class="cm">/** X coordinate of the display from the start of horizontal active */</span>
<span class="cp"># define TV_XPOS_MASK			0x1fff0000</span>
<span class="cp"># define TV_XPOS_SHIFT			16</span>
<span class="cm">/** Y coordinate of the display from the start of vertical active (NBR) */</span>
<span class="cp"># define TV_YPOS_MASK			0x00000fff</span>
<span class="cp"># define TV_YPOS_SHIFT			0</span>

<span class="cp">#define TV_WIN_SIZE		0x68074</span>
<span class="cm">/** Horizontal size of the display window, measured in pixels*/</span>
<span class="cp"># define TV_XSIZE_MASK			0x1fff0000</span>
<span class="cp"># define TV_XSIZE_SHIFT			16</span>
<span class="cm">/**</span>
<span class="cm"> * Vertical size of the display window, measured in pixels.</span>
<span class="cm"> *</span>
<span class="cm"> * Must be even for interlaced modes.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_YSIZE_MASK			0x00000fff</span>
<span class="cp"># define TV_YSIZE_SHIFT			0</span>

<span class="cp">#define TV_FILTER_CTL_1		0x68080</span>
<span class="cm">/**</span>
<span class="cm"> * Enables automatic scaling calculation.</span>
<span class="cm"> *</span>
<span class="cm"> * If set, the rest of the registers are ignored, and the calculated values can</span>
<span class="cm"> * be read back from the register.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_AUTO_SCALE			(1 &lt;&lt; 31)</span>
<span class="cm">/**</span>
<span class="cm"> * Disables the vertical filter.</span>
<span class="cm"> *</span>
<span class="cm"> * This is required on modes more than 1024 pixels wide */</span>
<span class="cp"># define TV_V_FILTER_BYPASS		(1 &lt;&lt; 29)</span>
<span class="cm">/** Enables adaptive vertical filtering */</span>
<span class="cp"># define TV_VADAPT			(1 &lt;&lt; 28)</span>
<span class="cp"># define TV_VADAPT_MODE_MASK		(3 &lt;&lt; 26)</span>
<span class="cm">/** Selects the least adaptive vertical filtering mode */</span>
<span class="cp"># define TV_VADAPT_MODE_LEAST		(0 &lt;&lt; 26)</span>
<span class="cm">/** Selects the moderately adaptive vertical filtering mode */</span>
<span class="cp"># define TV_VADAPT_MODE_MODERATE	(1 &lt;&lt; 26)</span>
<span class="cm">/** Selects the most adaptive vertical filtering mode */</span>
<span class="cp"># define TV_VADAPT_MODE_MOST		(3 &lt;&lt; 26)</span>
<span class="cm">/**</span>
<span class="cm"> * Sets the horizontal scaling factor.</span>
<span class="cm"> *</span>
<span class="cm"> * This should be the fractional part of the horizontal scaling factor divided</span>
<span class="cm"> * by the oversampling rate.  TV_HSCALE should be less than 1, and set to:</span>
<span class="cm"> *</span>
<span class="cm"> * (src width - 1) / ((oversample * dest width) - 1)</span>
<span class="cm"> */</span>
<span class="cp"># define TV_HSCALE_FRAC_MASK		0x00003fff</span>
<span class="cp"># define TV_HSCALE_FRAC_SHIFT		0</span>

<span class="cp">#define TV_FILTER_CTL_2		0x68084</span>
<span class="cm">/**</span>
<span class="cm"> * Sets the integer part of the 3.15 fixed-point vertical scaling factor.</span>
<span class="cm"> *</span>
<span class="cm"> * TV_VSCALE should be (src height - 1) / ((interlace * dest height) - 1)</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VSCALE_INT_MASK		0x00038000</span>
<span class="cp"># define TV_VSCALE_INT_SHIFT		15</span>
<span class="cm">/**</span>
<span class="cm"> * Sets the fractional part of the 3.15 fixed-point vertical scaling factor.</span>
<span class="cm"> *</span>
<span class="cm"> * \sa TV_VSCALE_INT_MASK</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VSCALE_FRAC_MASK		0x00007fff</span>
<span class="cp"># define TV_VSCALE_FRAC_SHIFT		0</span>

<span class="cp">#define TV_FILTER_CTL_3		0x68088</span>
<span class="cm">/**</span>
<span class="cm"> * Sets the integer part of the 3.15 fixed-point vertical scaling factor.</span>
<span class="cm"> *</span>
<span class="cm"> * TV_VSCALE should be (src height - 1) / (1/4 * (dest height - 1))</span>
<span class="cm"> *</span>
<span class="cm"> * For progressive modes, TV_VSCALE_IP_INT should be set to zeroes.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VSCALE_IP_INT_MASK		0x00038000</span>
<span class="cp"># define TV_VSCALE_IP_INT_SHIFT		15</span>
<span class="cm">/**</span>
<span class="cm"> * Sets the fractional part of the 3.15 fixed-point vertical scaling factor.</span>
<span class="cm"> *</span>
<span class="cm"> * For progressive modes, TV_VSCALE_IP_INT should be set to zeroes.</span>
<span class="cm"> *</span>
<span class="cm"> * \sa TV_VSCALE_IP_INT_MASK</span>
<span class="cm"> */</span>
<span class="cp"># define TV_VSCALE_IP_FRAC_MASK		0x00007fff</span>
<span class="cp"># define TV_VSCALE_IP_FRAC_SHIFT		0</span>

<span class="cp">#define TV_CC_CONTROL		0x68090</span>
<span class="cp"># define TV_CC_ENABLE			(1 &lt;&lt; 31)</span>
<span class="cm">/**</span>
<span class="cm"> * Specifies which field to send the CC data in.</span>
<span class="cm"> *</span>
<span class="cm"> * CC data is usually sent in field 0.</span>
<span class="cm"> */</span>
<span class="cp"># define TV_CC_FID_MASK			(1 &lt;&lt; 27)</span>
<span class="cp"># define TV_CC_FID_SHIFT		27</span>
<span class="cm">/** Sets the horizontal position of the CC data.  Usually 135. */</span>
<span class="cp"># define TV_CC_HOFF_MASK		0x03ff0000</span>
<span class="cp"># define TV_CC_HOFF_SHIFT		16</span>
<span class="cm">/** Sets the vertical position of the CC data.  Usually 21 */</span>
<span class="cp"># define TV_CC_LINE_MASK		0x0000003f</span>
<span class="cp"># define TV_CC_LINE_SHIFT		0</span>

<span class="cp">#define TV_CC_DATA		0x68094</span>
<span class="cp"># define TV_CC_RDY			(1 &lt;&lt; 31)</span>
<span class="cm">/** Second word of CC data to be transmitted. */</span>
<span class="cp"># define TV_CC_DATA_2_MASK		0x007f0000</span>
<span class="cp"># define TV_CC_DATA_2_SHIFT		16</span>
<span class="cm">/** First word of CC data to be transmitted. */</span>
<span class="cp"># define TV_CC_DATA_1_MASK		0x0000007f</span>
<span class="cp"># define TV_CC_DATA_1_SHIFT		0</span>

<span class="cp">#define TV_H_LUMA_0		0x68100</span>
<span class="cp">#define TV_H_LUMA_59		0x681ec</span>
<span class="cp">#define TV_H_CHROMA_0		0x68200</span>
<span class="cp">#define TV_H_CHROMA_59		0x682ec</span>
<span class="cp">#define TV_V_LUMA_0		0x68300</span>
<span class="cp">#define TV_V_LUMA_42		0x683a8</span>
<span class="cp">#define TV_V_CHROMA_0		0x68400</span>
<span class="cp">#define TV_V_CHROMA_42		0x684a8</span>

<span class="cm">/* Display Port */</span>
<span class="cp">#define DP_A				0x64000 </span><span class="cm">/* eDP */</span><span class="cp"></span>
<span class="cp">#define DP_B				0x64100</span>
<span class="cp">#define DP_C				0x64200</span>
<span class="cp">#define DP_D				0x64300</span>

<span class="cp">#define   DP_PORT_EN			(1 &lt;&lt; 31)</span>
<span class="cp">#define   DP_PIPEB_SELECT		(1 &lt;&lt; 30)</span>
<span class="cp">#define   DP_PIPE_MASK			(1 &lt;&lt; 30)</span>

<span class="cm">/* Link training mode - select a suitable mode for each stage */</span>
<span class="cp">#define   DP_LINK_TRAIN_PAT_1		(0 &lt;&lt; 28)</span>
<span class="cp">#define   DP_LINK_TRAIN_PAT_2		(1 &lt;&lt; 28)</span>
<span class="cp">#define   DP_LINK_TRAIN_PAT_IDLE	(2 &lt;&lt; 28)</span>
<span class="cp">#define   DP_LINK_TRAIN_OFF		(3 &lt;&lt; 28)</span>
<span class="cp">#define   DP_LINK_TRAIN_MASK		(3 &lt;&lt; 28)</span>
<span class="cp">#define   DP_LINK_TRAIN_SHIFT		28</span>

<span class="cm">/* CPT Link training mode */</span>
<span class="cp">#define   DP_LINK_TRAIN_PAT_1_CPT	(0 &lt;&lt; 8)</span>
<span class="cp">#define   DP_LINK_TRAIN_PAT_2_CPT	(1 &lt;&lt; 8)</span>
<span class="cp">#define   DP_LINK_TRAIN_PAT_IDLE_CPT	(2 &lt;&lt; 8)</span>
<span class="cp">#define   DP_LINK_TRAIN_OFF_CPT		(3 &lt;&lt; 8)</span>
<span class="cp">#define   DP_LINK_TRAIN_MASK_CPT	(7 &lt;&lt; 8)</span>
<span class="cp">#define   DP_LINK_TRAIN_SHIFT_CPT	8</span>

<span class="cm">/* Signal voltages. These are mostly controlled by the other end */</span>
<span class="cp">#define   DP_VOLTAGE_0_4		(0 &lt;&lt; 25)</span>
<span class="cp">#define   DP_VOLTAGE_0_6		(1 &lt;&lt; 25)</span>
<span class="cp">#define   DP_VOLTAGE_0_8		(2 &lt;&lt; 25)</span>
<span class="cp">#define   DP_VOLTAGE_1_2		(3 &lt;&lt; 25)</span>
<span class="cp">#define   DP_VOLTAGE_MASK		(7 &lt;&lt; 25)</span>
<span class="cp">#define   DP_VOLTAGE_SHIFT		25</span>

<span class="cm">/* Signal pre-emphasis levels, like voltages, the other end tells us what</span>
<span class="cm"> * they want</span>
<span class="cm"> */</span>
<span class="cp">#define   DP_PRE_EMPHASIS_0		(0 &lt;&lt; 22)</span>
<span class="cp">#define   DP_PRE_EMPHASIS_3_5		(1 &lt;&lt; 22)</span>
<span class="cp">#define   DP_PRE_EMPHASIS_6		(2 &lt;&lt; 22)</span>
<span class="cp">#define   DP_PRE_EMPHASIS_9_5		(3 &lt;&lt; 22)</span>
<span class="cp">#define   DP_PRE_EMPHASIS_MASK		(7 &lt;&lt; 22)</span>
<span class="cp">#define   DP_PRE_EMPHASIS_SHIFT		22</span>

<span class="cm">/* How many wires to use. I guess 3 was too hard */</span>
<span class="cp">#define   DP_PORT_WIDTH_1		(0 &lt;&lt; 19)</span>
<span class="cp">#define   DP_PORT_WIDTH_2		(1 &lt;&lt; 19)</span>
<span class="cp">#define   DP_PORT_WIDTH_4		(3 &lt;&lt; 19)</span>
<span class="cp">#define   DP_PORT_WIDTH_MASK		(7 &lt;&lt; 19)</span>

<span class="cm">/* Mystic DPCD version 1.1 special mode */</span>
<span class="cp">#define   DP_ENHANCED_FRAMING		(1 &lt;&lt; 18)</span>

<span class="cm">/* eDP */</span>
<span class="cp">#define   DP_PLL_FREQ_270MHZ		(0 &lt;&lt; 16)</span>
<span class="cp">#define   DP_PLL_FREQ_160MHZ		(1 &lt;&lt; 16)</span>
<span class="cp">#define   DP_PLL_FREQ_MASK		(3 &lt;&lt; 16)</span>

<span class="cm">/** locked once port is enabled */</span>
<span class="cp">#define   DP_PORT_REVERSAL		(1 &lt;&lt; 15)</span>

<span class="cm">/* eDP */</span>
<span class="cp">#define   DP_PLL_ENABLE			(1 &lt;&lt; 14)</span>

<span class="cm">/** sends the clock on lane 15 of the PEG for debug */</span>
<span class="cp">#define   DP_CLOCK_OUTPUT_ENABLE	(1 &lt;&lt; 13)</span>

<span class="cp">#define   DP_SCRAMBLING_DISABLE		(1 &lt;&lt; 12)</span>
<span class="cp">#define   DP_SCRAMBLING_DISABLE_IRONLAKE	(1 &lt;&lt; 7)</span>

<span class="cm">/** limit RGB values to avoid confusing TVs */</span>
<span class="cp">#define   DP_COLOR_RANGE_16_235		(1 &lt;&lt; 8)</span>

<span class="cm">/** Turn on the audio link */</span>
<span class="cp">#define   DP_AUDIO_OUTPUT_ENABLE	(1 &lt;&lt; 6)</span>

<span class="cm">/** vs and hs sync polarity */</span>
<span class="cp">#define   DP_SYNC_VS_HIGH		(1 &lt;&lt; 4)</span>
<span class="cp">#define   DP_SYNC_HS_HIGH		(1 &lt;&lt; 3)</span>

<span class="cm">/** A fantasy */</span>
<span class="cp">#define   DP_DETECTED			(1 &lt;&lt; 2)</span>

<span class="cm">/** The aux channel provides a way to talk to the</span>
<span class="cm"> * signal sink for DDC etc. Max packet size supported</span>
<span class="cm"> * is 20 bytes in each direction, hence the 5 fixed</span>
<span class="cm"> * data registers</span>
<span class="cm"> */</span>
<span class="cp">#define DPA_AUX_CH_CTL			0x64010</span>
<span class="cp">#define DPA_AUX_CH_DATA1		0x64014</span>
<span class="cp">#define DPA_AUX_CH_DATA2		0x64018</span>
<span class="cp">#define DPA_AUX_CH_DATA3		0x6401c</span>
<span class="cp">#define DPA_AUX_CH_DATA4		0x64020</span>
<span class="cp">#define DPA_AUX_CH_DATA5		0x64024</span>

<span class="cp">#define DPB_AUX_CH_CTL			0x64110</span>
<span class="cp">#define DPB_AUX_CH_DATA1		0x64114</span>
<span class="cp">#define DPB_AUX_CH_DATA2		0x64118</span>
<span class="cp">#define DPB_AUX_CH_DATA3		0x6411c</span>
<span class="cp">#define DPB_AUX_CH_DATA4		0x64120</span>
<span class="cp">#define DPB_AUX_CH_DATA5		0x64124</span>

<span class="cp">#define DPC_AUX_CH_CTL			0x64210</span>
<span class="cp">#define DPC_AUX_CH_DATA1		0x64214</span>
<span class="cp">#define DPC_AUX_CH_DATA2		0x64218</span>
<span class="cp">#define DPC_AUX_CH_DATA3		0x6421c</span>
<span class="cp">#define DPC_AUX_CH_DATA4		0x64220</span>
<span class="cp">#define DPC_AUX_CH_DATA5		0x64224</span>

<span class="cp">#define DPD_AUX_CH_CTL			0x64310</span>
<span class="cp">#define DPD_AUX_CH_DATA1		0x64314</span>
<span class="cp">#define DPD_AUX_CH_DATA2		0x64318</span>
<span class="cp">#define DPD_AUX_CH_DATA3		0x6431c</span>
<span class="cp">#define DPD_AUX_CH_DATA4		0x64320</span>
<span class="cp">#define DPD_AUX_CH_DATA5		0x64324</span>

<span class="cp">#define   DP_AUX_CH_CTL_SEND_BUSY	    (1 &lt;&lt; 31)</span>
<span class="cp">#define   DP_AUX_CH_CTL_DONE		    (1 &lt;&lt; 30)</span>
<span class="cp">#define   DP_AUX_CH_CTL_INTERRUPT	    (1 &lt;&lt; 29)</span>
<span class="cp">#define   DP_AUX_CH_CTL_TIME_OUT_ERROR	    (1 &lt;&lt; 28)</span>
<span class="cp">#define   DP_AUX_CH_CTL_TIME_OUT_400us	    (0 &lt;&lt; 26)</span>
<span class="cp">#define   DP_AUX_CH_CTL_TIME_OUT_600us	    (1 &lt;&lt; 26)</span>
<span class="cp">#define   DP_AUX_CH_CTL_TIME_OUT_800us	    (2 &lt;&lt; 26)</span>
<span class="cp">#define   DP_AUX_CH_CTL_TIME_OUT_1600us	    (3 &lt;&lt; 26)</span>
<span class="cp">#define   DP_AUX_CH_CTL_TIME_OUT_MASK	    (3 &lt;&lt; 26)</span>
<span class="cp">#define   DP_AUX_CH_CTL_RECEIVE_ERROR	    (1 &lt;&lt; 25)</span>
<span class="cp">#define   DP_AUX_CH_CTL_MESSAGE_SIZE_MASK    (0x1f &lt;&lt; 20)</span>
<span class="cp">#define   DP_AUX_CH_CTL_MESSAGE_SIZE_SHIFT   20</span>
<span class="cp">#define   DP_AUX_CH_CTL_PRECHARGE_2US_MASK   (0xf &lt;&lt; 16)</span>
<span class="cp">#define   DP_AUX_CH_CTL_PRECHARGE_2US_SHIFT  16</span>
<span class="cp">#define   DP_AUX_CH_CTL_AUX_AKSV_SELECT	    (1 &lt;&lt; 15)</span>
<span class="cp">#define   DP_AUX_CH_CTL_MANCHESTER_TEST	    (1 &lt;&lt; 14)</span>
<span class="cp">#define   DP_AUX_CH_CTL_SYNC_TEST	    (1 &lt;&lt; 13)</span>
<span class="cp">#define   DP_AUX_CH_CTL_DEGLITCH_TEST	    (1 &lt;&lt; 12)</span>
<span class="cp">#define   DP_AUX_CH_CTL_PRECHARGE_TEST	    (1 &lt;&lt; 11)</span>
<span class="cp">#define   DP_AUX_CH_CTL_BIT_CLOCK_2X_MASK    (0x7ff)</span>
<span class="cp">#define   DP_AUX_CH_CTL_BIT_CLOCK_2X_SHIFT   0</span>

<span class="cm">/*</span>
<span class="cm"> * Computing GMCH M and N values for the Display Port link</span>
<span class="cm"> *</span>
<span class="cm"> * GMCH M/N = dot clock * bytes per pixel / ls_clk * # of lanes</span>
<span class="cm"> *</span>
<span class="cm"> * ls_clk (we assume) is the DP link clock (1.62 or 2.7 GHz)</span>
<span class="cm"> *</span>
<span class="cm"> * The GMCH value is used internally</span>
<span class="cm"> *</span>
<span class="cm"> * bytes_per_pixel is the number of bytes coming out of the plane,</span>
<span class="cm"> * which is after the LUTs, so we want the bytes for our color format.</span>
<span class="cm"> * For our current usage, this is always 3, one byte for R, G and B.</span>
<span class="cm"> */</span>
<span class="cp">#define _PIPEA_GMCH_DATA_M			0x70050</span>
<span class="cp">#define _PIPEB_GMCH_DATA_M			0x71050</span>

<span class="cm">/* Transfer unit size for display port - 1, default is 0x3f (for TU size 64) */</span>
<span class="cp">#define   PIPE_GMCH_DATA_M_TU_SIZE_MASK		(0x3f &lt;&lt; 25)</span>
<span class="cp">#define   PIPE_GMCH_DATA_M_TU_SIZE_SHIFT	25</span>

<span class="cp">#define   PIPE_GMCH_DATA_M_MASK			(0xffffff)</span>

<span class="cp">#define _PIPEA_GMCH_DATA_N			0x70054</span>
<span class="cp">#define _PIPEB_GMCH_DATA_N			0x71054</span>
<span class="cp">#define   PIPE_GMCH_DATA_N_MASK			(0xffffff)</span>

<span class="cm">/*</span>
<span class="cm"> * Computing Link M and N values for the Display Port link</span>
<span class="cm"> *</span>
<span class="cm"> * Link M / N = pixel_clock / ls_clk</span>
<span class="cm"> *</span>
<span class="cm"> * (the DP spec calls pixel_clock the &#39;strm_clk&#39;)</span>
<span class="cm"> *</span>
<span class="cm"> * The Link value is transmitted in the Main Stream</span>
<span class="cm"> * Attributes and VB-ID.</span>
<span class="cm"> */</span>

<span class="cp">#define _PIPEA_DP_LINK_M				0x70060</span>
<span class="cp">#define _PIPEB_DP_LINK_M				0x71060</span>
<span class="cp">#define   PIPEA_DP_LINK_M_MASK			(0xffffff)</span>

<span class="cp">#define _PIPEA_DP_LINK_N				0x70064</span>
<span class="cp">#define _PIPEB_DP_LINK_N				0x71064</span>
<span class="cp">#define   PIPEA_DP_LINK_N_MASK			(0xffffff)</span>

<span class="cp">#define PIPE_GMCH_DATA_M(pipe) _PIPE(pipe, _PIPEA_GMCH_DATA_M, _PIPEB_GMCH_DATA_M)</span>
<span class="cp">#define PIPE_GMCH_DATA_N(pipe) _PIPE(pipe, _PIPEA_GMCH_DATA_N, _PIPEB_GMCH_DATA_N)</span>
<span class="cp">#define PIPE_DP_LINK_M(pipe) _PIPE(pipe, _PIPEA_DP_LINK_M, _PIPEB_DP_LINK_M)</span>
<span class="cp">#define PIPE_DP_LINK_N(pipe) _PIPE(pipe, _PIPEA_DP_LINK_N, _PIPEB_DP_LINK_N)</span>

<span class="cm">/* Display &amp; cursor control */</span>

<span class="cm">/* Pipe A */</span>
<span class="cp">#define _PIPEADSL		0x70000</span>
<span class="cp">#define   DSL_LINEMASK_GEN2	0x00000fff</span>
<span class="cp">#define   DSL_LINEMASK_GEN3	0x00001fff</span>
<span class="cp">#define _PIPEACONF		0x70008</span>
<span class="cp">#define   PIPECONF_ENABLE	(1&lt;&lt;31)</span>
<span class="cp">#define   PIPECONF_DISABLE	0</span>
<span class="cp">#define   PIPECONF_DOUBLE_WIDE	(1&lt;&lt;30)</span>
<span class="cp">#define   I965_PIPECONF_ACTIVE	(1&lt;&lt;30)</span>
<span class="cp">#define   PIPECONF_FRAME_START_DELAY_MASK (3&lt;&lt;27)</span>
<span class="cp">#define   PIPECONF_SINGLE_WIDE	0</span>
<span class="cp">#define   PIPECONF_PIPE_UNLOCKED 0</span>
<span class="cp">#define   PIPECONF_PIPE_LOCKED	(1&lt;&lt;25)</span>
<span class="cp">#define   PIPECONF_PALETTE	0</span>
<span class="cp">#define   PIPECONF_GAMMA		(1&lt;&lt;24)</span>
<span class="cp">#define   PIPECONF_FORCE_BORDER	(1&lt;&lt;25)</span>
<span class="cp">#define   PIPECONF_INTERLACE_MASK	(7 &lt;&lt; 21)</span>
<span class="cm">/* Note that pre-gen3 does not support interlaced display directly. Panel</span>
<span class="cm"> * fitting must be disabled on pre-ilk for interlaced. */</span>
<span class="cp">#define   PIPECONF_PROGRESSIVE			(0 &lt;&lt; 21)</span>
<span class="cp">#define   PIPECONF_INTERLACE_W_SYNC_SHIFT_PANEL	(4 &lt;&lt; 21) </span><span class="cm">/* gen4 only */</span><span class="cp"></span>
<span class="cp">#define   PIPECONF_INTERLACE_W_SYNC_SHIFT	(5 &lt;&lt; 21) </span><span class="cm">/* gen4 only */</span><span class="cp"></span>
<span class="cp">#define   PIPECONF_INTERLACE_W_FIELD_INDICATION	(6 &lt;&lt; 21)</span>
<span class="cp">#define   PIPECONF_INTERLACE_FIELD_0_ONLY	(7 &lt;&lt; 21) </span><span class="cm">/* gen3 only */</span><span class="cp"></span>
<span class="cm">/* Ironlake and later have a complete new set of values for interlaced. PFIT</span>
<span class="cm"> * means panel fitter required, PF means progressive fetch, DBL means power</span>
<span class="cm"> * saving pixel doubling. */</span>
<span class="cp">#define   PIPECONF_PFIT_PF_INTERLACED_ILK	(1 &lt;&lt; 21)</span>
<span class="cp">#define   PIPECONF_INTERLACED_ILK		(3 &lt;&lt; 21)</span>
<span class="cp">#define   PIPECONF_INTERLACED_DBL_ILK		(4 &lt;&lt; 21) </span><span class="cm">/* ilk/snb only */</span><span class="cp"></span>
<span class="cp">#define   PIPECONF_PFIT_PF_INTERLACED_DBL_ILK	(5 &lt;&lt; 21) </span><span class="cm">/* ilk/snb only */</span><span class="cp"></span>
<span class="cp">#define   PIPECONF_CXSR_DOWNCLOCK	(1&lt;&lt;16)</span>
<span class="cp">#define   PIPECONF_BPP_MASK	(0x000000e0)</span>
<span class="cp">#define   PIPECONF_BPP_8	(0&lt;&lt;5)</span>
<span class="cp">#define   PIPECONF_BPP_10	(1&lt;&lt;5)</span>
<span class="cp">#define   PIPECONF_BPP_6	(2&lt;&lt;5)</span>
<span class="cp">#define   PIPECONF_BPP_12	(3&lt;&lt;5)</span>
<span class="cp">#define   PIPECONF_DITHER_EN	(1&lt;&lt;4)</span>
<span class="cp">#define   PIPECONF_DITHER_TYPE_MASK (0x0000000c)</span>
<span class="cp">#define   PIPECONF_DITHER_TYPE_SP (0&lt;&lt;2)</span>
<span class="cp">#define   PIPECONF_DITHER_TYPE_ST1 (1&lt;&lt;2)</span>
<span class="cp">#define   PIPECONF_DITHER_TYPE_ST2 (2&lt;&lt;2)</span>
<span class="cp">#define   PIPECONF_DITHER_TYPE_TEMP (3&lt;&lt;2)</span>
<span class="cp">#define _PIPEASTAT		0x70024</span>
<span class="cp">#define   PIPE_FIFO_UNDERRUN_STATUS		(1UL&lt;&lt;31)</span>
<span class="cp">#define   SPRITE1_FLIPDONE_INT_EN_VLV		(1UL&lt;&lt;30)</span>
<span class="cp">#define   PIPE_CRC_ERROR_ENABLE			(1UL&lt;&lt;29)</span>
<span class="cp">#define   PIPE_CRC_DONE_ENABLE			(1UL&lt;&lt;28)</span>
<span class="cp">#define   PIPE_GMBUS_EVENT_ENABLE		(1UL&lt;&lt;27)</span>
<span class="cp">#define   PLANE_FLIP_DONE_INT_EN_VLV		(1UL&lt;&lt;26)</span>
<span class="cp">#define   PIPE_HOTPLUG_INTERRUPT_ENABLE		(1UL&lt;&lt;26)</span>
<span class="cp">#define   PIPE_VSYNC_INTERRUPT_ENABLE		(1UL&lt;&lt;25)</span>
<span class="cp">#define   PIPE_DISPLAY_LINE_COMPARE_ENABLE	(1UL&lt;&lt;24)</span>
<span class="cp">#define   PIPE_DPST_EVENT_ENABLE		(1UL&lt;&lt;23)</span>
<span class="cp">#define   SPRITE0_FLIP_DONE_INT_EN_VLV		(1UL&lt;&lt;26)</span>
<span class="cp">#define   PIPE_LEGACY_BLC_EVENT_ENABLE		(1UL&lt;&lt;22)</span>
<span class="cp">#define   PIPE_ODD_FIELD_INTERRUPT_ENABLE	(1UL&lt;&lt;21)</span>
<span class="cp">#define   PIPE_EVEN_FIELD_INTERRUPT_ENABLE	(1UL&lt;&lt;20)</span>
<span class="cp">#define   PIPE_HOTPLUG_TV_INTERRUPT_ENABLE	(1UL&lt;&lt;18) </span><span class="cm">/* pre-965 */</span><span class="cp"></span>
<span class="cp">#define   PIPE_START_VBLANK_INTERRUPT_ENABLE	(1UL&lt;&lt;18) </span><span class="cm">/* 965 or later */</span><span class="cp"></span>
<span class="cp">#define   PIPE_VBLANK_INTERRUPT_ENABLE		(1UL&lt;&lt;17)</span>
<span class="cp">#define   PIPEA_HBLANK_INT_EN_VLV		(1UL&lt;&lt;16)</span>
<span class="cp">#define   PIPE_OVERLAY_UPDATED_ENABLE		(1UL&lt;&lt;16)</span>
<span class="cp">#define   SPRITE1_FLIPDONE_INT_STATUS_VLV	(1UL&lt;&lt;15)</span>
<span class="cp">#define   SPRITE0_FLIPDONE_INT_STATUS_VLV	(1UL&lt;&lt;15)</span>
<span class="cp">#define   PIPE_CRC_ERROR_INTERRUPT_STATUS	(1UL&lt;&lt;13)</span>
<span class="cp">#define   PIPE_CRC_DONE_INTERRUPT_STATUS	(1UL&lt;&lt;12)</span>
<span class="cp">#define   PIPE_GMBUS_INTERRUPT_STATUS		(1UL&lt;&lt;11)</span>
<span class="cp">#define   PLANE_FLIPDONE_INT_STATUS_VLV		(1UL&lt;&lt;10)</span>
<span class="cp">#define   PIPE_HOTPLUG_INTERRUPT_STATUS		(1UL&lt;&lt;10)</span>
<span class="cp">#define   PIPE_VSYNC_INTERRUPT_STATUS		(1UL&lt;&lt;9)</span>
<span class="cp">#define   PIPE_DISPLAY_LINE_COMPARE_STATUS	(1UL&lt;&lt;8)</span>
<span class="cp">#define   PIPE_DPST_EVENT_STATUS		(1UL&lt;&lt;7)</span>
<span class="cp">#define   PIPE_LEGACY_BLC_EVENT_STATUS		(1UL&lt;&lt;6)</span>
<span class="cp">#define   PIPE_ODD_FIELD_INTERRUPT_STATUS	(1UL&lt;&lt;5)</span>
<span class="cp">#define   PIPE_EVEN_FIELD_INTERRUPT_STATUS	(1UL&lt;&lt;4)</span>
<span class="cp">#define   PIPE_HOTPLUG_TV_INTERRUPT_STATUS	(1UL&lt;&lt;2) </span><span class="cm">/* pre-965 */</span><span class="cp"></span>
<span class="cp">#define   PIPE_START_VBLANK_INTERRUPT_STATUS	(1UL&lt;&lt;2) </span><span class="cm">/* 965 or later */</span><span class="cp"></span>
<span class="cp">#define   PIPE_VBLANK_INTERRUPT_STATUS		(1UL&lt;&lt;1)</span>
<span class="cp">#define   PIPE_OVERLAY_UPDATED_STATUS		(1UL&lt;&lt;0)</span>
<span class="cp">#define   PIPE_BPC_MASK				(7 &lt;&lt; 5) </span><span class="cm">/* Ironlake */</span><span class="cp"></span>
<span class="cp">#define   PIPE_8BPC				(0 &lt;&lt; 5)</span>
<span class="cp">#define   PIPE_10BPC				(1 &lt;&lt; 5)</span>
<span class="cp">#define   PIPE_6BPC				(2 &lt;&lt; 5)</span>
<span class="cp">#define   PIPE_12BPC				(3 &lt;&lt; 5)</span>

<span class="cp">#define PIPESRC(pipe) _PIPE(pipe, _PIPEASRC, _PIPEBSRC)</span>
<span class="cp">#define PIPECONF(pipe) _PIPE(pipe, _PIPEACONF, _PIPEBCONF)</span>
<span class="cp">#define PIPEDSL(pipe)  _PIPE(pipe, _PIPEADSL, _PIPEBDSL)</span>
<span class="cp">#define PIPEFRAME(pipe) _PIPE(pipe, _PIPEAFRAMEHIGH, _PIPEBFRAMEHIGH)</span>
<span class="cp">#define PIPEFRAMEPIXEL(pipe)  _PIPE(pipe, _PIPEAFRAMEPIXEL, _PIPEBFRAMEPIXEL)</span>
<span class="cp">#define PIPESTAT(pipe) _PIPE(pipe, _PIPEASTAT, _PIPEBSTAT)</span>

<span class="cp">#define VLV_DPFLIPSTAT				0x70028</span>
<span class="cp">#define   PIPEB_LINE_COMPARE_STATUS		(1&lt;&lt;29)</span>
<span class="cp">#define   PIPEB_HLINE_INT_EN			(1&lt;&lt;28)</span>
<span class="cp">#define   PIPEB_VBLANK_INT_EN			(1&lt;&lt;27)</span>
<span class="cp">#define   SPRITED_FLIPDONE_INT_EN		(1&lt;&lt;26)</span>
<span class="cp">#define   SPRITEC_FLIPDONE_INT_EN		(1&lt;&lt;25)</span>
<span class="cp">#define   PLANEB_FLIPDONE_INT_EN		(1&lt;&lt;24)</span>
<span class="cp">#define   PIPEA_LINE_COMPARE_STATUS		(1&lt;&lt;21)</span>
<span class="cp">#define   PIPEA_HLINE_INT_EN			(1&lt;&lt;20)</span>
<span class="cp">#define   PIPEA_VBLANK_INT_EN			(1&lt;&lt;19)</span>
<span class="cp">#define   SPRITEB_FLIPDONE_INT_EN		(1&lt;&lt;18)</span>
<span class="cp">#define   SPRITEA_FLIPDONE_INT_EN		(1&lt;&lt;17)</span>
<span class="cp">#define   PLANEA_FLIPDONE_INT_EN		(1&lt;&lt;16)</span>

<span class="cp">#define DPINVGTT				0x7002c </span><span class="cm">/* VLV only */</span><span class="cp"></span>
<span class="cp">#define   CURSORB_INVALID_GTT_INT_EN		(1&lt;&lt;23)</span>
<span class="cp">#define   CURSORA_INVALID_GTT_INT_EN		(1&lt;&lt;22)</span>
<span class="cp">#define   SPRITED_INVALID_GTT_INT_EN		(1&lt;&lt;21)</span>
<span class="cp">#define   SPRITEC_INVALID_GTT_INT_EN		(1&lt;&lt;20)</span>
<span class="cp">#define   PLANEB_INVALID_GTT_INT_EN		(1&lt;&lt;19)</span>
<span class="cp">#define   SPRITEB_INVALID_GTT_INT_EN		(1&lt;&lt;18)</span>
<span class="cp">#define   SPRITEA_INVALID_GTT_INT_EN		(1&lt;&lt;17)</span>
<span class="cp">#define   PLANEA_INVALID_GTT_INT_EN		(1&lt;&lt;16)</span>
<span class="cp">#define   DPINVGTT_EN_MASK			0xff0000</span>
<span class="cp">#define   CURSORB_INVALID_GTT_STATUS		(1&lt;&lt;7)</span>
<span class="cp">#define   CURSORA_INVALID_GTT_STATUS		(1&lt;&lt;6)</span>
<span class="cp">#define   SPRITED_INVALID_GTT_STATUS		(1&lt;&lt;5)</span>
<span class="cp">#define   SPRITEC_INVALID_GTT_STATUS		(1&lt;&lt;4)</span>
<span class="cp">#define   PLANEB_INVALID_GTT_STATUS		(1&lt;&lt;3)</span>
<span class="cp">#define   SPRITEB_INVALID_GTT_STATUS		(1&lt;&lt;2)</span>
<span class="cp">#define   SPRITEA_INVALID_GTT_STATUS		(1&lt;&lt;1)</span>
<span class="cp">#define   PLANEA_INVALID_GTT_STATUS		(1&lt;&lt;0)</span>
<span class="cp">#define   DPINVGTT_STATUS_MASK			0xff</span>

<span class="cp">#define DSPARB			0x70030</span>
<span class="cp">#define   DSPARB_CSTART_MASK	(0x7f &lt;&lt; 7)</span>
<span class="cp">#define   DSPARB_CSTART_SHIFT	7</span>
<span class="cp">#define   DSPARB_BSTART_MASK	(0x7f)</span>
<span class="cp">#define   DSPARB_BSTART_SHIFT	0</span>
<span class="cp">#define   DSPARB_BEND_SHIFT	9 </span><span class="cm">/* on 855 */</span><span class="cp"></span>
<span class="cp">#define   DSPARB_AEND_SHIFT	0</span>

<span class="cp">#define DSPFW1			0x70034</span>
<span class="cp">#define   DSPFW_SR_SHIFT	23</span>
<span class="cp">#define   DSPFW_SR_MASK		(0x1ff&lt;&lt;23)</span>
<span class="cp">#define   DSPFW_CURSORB_SHIFT	16</span>
<span class="cp">#define   DSPFW_CURSORB_MASK	(0x3f&lt;&lt;16)</span>
<span class="cp">#define   DSPFW_PLANEB_SHIFT	8</span>
<span class="cp">#define   DSPFW_PLANEB_MASK	(0x7f&lt;&lt;8)</span>
<span class="cp">#define   DSPFW_PLANEA_MASK	(0x7f)</span>
<span class="cp">#define DSPFW2			0x70038</span>
<span class="cp">#define   DSPFW_CURSORA_MASK	0x00003f00</span>
<span class="cp">#define   DSPFW_CURSORA_SHIFT	8</span>
<span class="cp">#define   DSPFW_PLANEC_MASK	(0x7f)</span>
<span class="cp">#define DSPFW3			0x7003c</span>
<span class="cp">#define   DSPFW_HPLL_SR_EN	(1&lt;&lt;31)</span>
<span class="cp">#define   DSPFW_CURSOR_SR_SHIFT	24</span>
<span class="cp">#define   PINEVIEW_SELF_REFRESH_EN	(1&lt;&lt;30)</span>
<span class="cp">#define   DSPFW_CURSOR_SR_MASK		(0x3f&lt;&lt;24)</span>
<span class="cp">#define   DSPFW_HPLL_CURSOR_SHIFT	16</span>
<span class="cp">#define   DSPFW_HPLL_CURSOR_MASK	(0x3f&lt;&lt;16)</span>
<span class="cp">#define   DSPFW_HPLL_SR_MASK		(0x1ff)</span>

<span class="cm">/* drain latency register values*/</span>
<span class="cp">#define DRAIN_LATENCY_PRECISION_32	32</span>
<span class="cp">#define DRAIN_LATENCY_PRECISION_16	16</span>
<span class="cp">#define VLV_DDL1			0x70050</span>
<span class="cp">#define DDL_CURSORA_PRECISION_32	(1&lt;&lt;31)</span>
<span class="cp">#define DDL_CURSORA_PRECISION_16	(0&lt;&lt;31)</span>
<span class="cp">#define DDL_CURSORA_SHIFT		24</span>
<span class="cp">#define DDL_PLANEA_PRECISION_32		(1&lt;&lt;7)</span>
<span class="cp">#define DDL_PLANEA_PRECISION_16		(0&lt;&lt;7)</span>
<span class="cp">#define VLV_DDL2			0x70054</span>
<span class="cp">#define DDL_CURSORB_PRECISION_32	(1&lt;&lt;31)</span>
<span class="cp">#define DDL_CURSORB_PRECISION_16	(0&lt;&lt;31)</span>
<span class="cp">#define DDL_CURSORB_SHIFT		24</span>
<span class="cp">#define DDL_PLANEB_PRECISION_32		(1&lt;&lt;7)</span>
<span class="cp">#define DDL_PLANEB_PRECISION_16		(0&lt;&lt;7)</span>

<span class="cm">/* FIFO watermark sizes etc */</span>
<span class="cp">#define G4X_FIFO_LINE_SIZE	64</span>
<span class="cp">#define I915_FIFO_LINE_SIZE	64</span>
<span class="cp">#define I830_FIFO_LINE_SIZE	32</span>

<span class="cp">#define VALLEYVIEW_FIFO_SIZE	255</span>
<span class="cp">#define G4X_FIFO_SIZE		127</span>
<span class="cp">#define I965_FIFO_SIZE		512</span>
<span class="cp">#define I945_FIFO_SIZE		127</span>
<span class="cp">#define I915_FIFO_SIZE		95</span>
<span class="cp">#define I855GM_FIFO_SIZE	127 </span><span class="cm">/* In cachelines */</span><span class="cp"></span>
<span class="cp">#define I830_FIFO_SIZE		95</span>

<span class="cp">#define VALLEYVIEW_MAX_WM	0xff</span>
<span class="cp">#define G4X_MAX_WM		0x3f</span>
<span class="cp">#define I915_MAX_WM		0x3f</span>

<span class="cp">#define PINEVIEW_DISPLAY_FIFO	512 </span><span class="cm">/* in 64byte unit */</span><span class="cp"></span>
<span class="cp">#define PINEVIEW_FIFO_LINE_SIZE	64</span>
<span class="cp">#define PINEVIEW_MAX_WM		0x1ff</span>
<span class="cp">#define PINEVIEW_DFT_WM		0x3f</span>
<span class="cp">#define PINEVIEW_DFT_HPLLOFF_WM	0</span>
<span class="cp">#define PINEVIEW_GUARD_WM		10</span>
<span class="cp">#define PINEVIEW_CURSOR_FIFO		64</span>
<span class="cp">#define PINEVIEW_CURSOR_MAX_WM	0x3f</span>
<span class="cp">#define PINEVIEW_CURSOR_DFT_WM	0</span>
<span class="cp">#define PINEVIEW_CURSOR_GUARD_WM	5</span>

<span class="cp">#define VALLEYVIEW_CURSOR_MAX_WM 64</span>
<span class="cp">#define I965_CURSOR_FIFO	64</span>
<span class="cp">#define I965_CURSOR_MAX_WM	32</span>
<span class="cp">#define I965_CURSOR_DFT_WM	8</span>

<span class="cm">/* define the Watermark register on Ironlake */</span>
<span class="cp">#define WM0_PIPEA_ILK		0x45100</span>
<span class="cp">#define  WM0_PIPE_PLANE_MASK	(0x7f&lt;&lt;16)</span>
<span class="cp">#define  WM0_PIPE_PLANE_SHIFT	16</span>
<span class="cp">#define  WM0_PIPE_SPRITE_MASK	(0x3f&lt;&lt;8)</span>
<span class="cp">#define  WM0_PIPE_SPRITE_SHIFT	8</span>
<span class="cp">#define  WM0_PIPE_CURSOR_MASK	(0x1f)</span>

<span class="cp">#define WM0_PIPEB_ILK		0x45104</span>
<span class="cp">#define WM0_PIPEC_IVB		0x45200</span>
<span class="cp">#define WM1_LP_ILK		0x45108</span>
<span class="cp">#define  WM1_LP_SR_EN		(1&lt;&lt;31)</span>
<span class="cp">#define  WM1_LP_LATENCY_SHIFT	24</span>
<span class="cp">#define  WM1_LP_LATENCY_MASK	(0x7f&lt;&lt;24)</span>
<span class="cp">#define  WM1_LP_FBC_MASK	(0xf&lt;&lt;20)</span>
<span class="cp">#define  WM1_LP_FBC_SHIFT	20</span>
<span class="cp">#define  WM1_LP_SR_MASK		(0x1ff&lt;&lt;8)</span>
<span class="cp">#define  WM1_LP_SR_SHIFT	8</span>
<span class="cp">#define  WM1_LP_CURSOR_MASK	(0x3f)</span>
<span class="cp">#define WM2_LP_ILK		0x4510c</span>
<span class="cp">#define  WM2_LP_EN		(1&lt;&lt;31)</span>
<span class="cp">#define WM3_LP_ILK		0x45110</span>
<span class="cp">#define  WM3_LP_EN		(1&lt;&lt;31)</span>
<span class="cp">#define WM1S_LP_ILK		0x45120</span>
<span class="cp">#define WM2S_LP_IVB		0x45124</span>
<span class="cp">#define WM3S_LP_IVB		0x45128</span>
<span class="cp">#define  WM1S_LP_EN		(1&lt;&lt;31)</span>

<span class="cm">/* Memory latency timer register */</span>
<span class="cp">#define MLTR_ILK		0x11222</span>
<span class="cp">#define  MLTR_WM1_SHIFT		0</span>
<span class="cp">#define  MLTR_WM2_SHIFT		8</span>
<span class="cm">/* the unit of memory self-refresh latency time is 0.5us */</span>
<span class="cp">#define  ILK_SRLT_MASK		0x3f</span>
<span class="cp">#define ILK_LATENCY(shift)	(I915_READ(MLTR_ILK) &gt;&gt; (shift) &amp; ILK_SRLT_MASK)</span>
<span class="cp">#define ILK_READ_WM1_LATENCY()	ILK_LATENCY(MLTR_WM1_SHIFT)</span>
<span class="cp">#define ILK_READ_WM2_LATENCY()	ILK_LATENCY(MLTR_WM2_SHIFT)</span>

<span class="cm">/* define the fifo size on Ironlake */</span>
<span class="cp">#define ILK_DISPLAY_FIFO	128</span>
<span class="cp">#define ILK_DISPLAY_MAXWM	64</span>
<span class="cp">#define ILK_DISPLAY_DFTWM	8</span>
<span class="cp">#define ILK_CURSOR_FIFO		32</span>
<span class="cp">#define ILK_CURSOR_MAXWM	16</span>
<span class="cp">#define ILK_CURSOR_DFTWM	8</span>

<span class="cp">#define ILK_DISPLAY_SR_FIFO	512</span>
<span class="cp">#define ILK_DISPLAY_MAX_SRWM	0x1ff</span>
<span class="cp">#define ILK_DISPLAY_DFT_SRWM	0x3f</span>
<span class="cp">#define ILK_CURSOR_SR_FIFO	64</span>
<span class="cp">#define ILK_CURSOR_MAX_SRWM	0x3f</span>
<span class="cp">#define ILK_CURSOR_DFT_SRWM	8</span>

<span class="cp">#define ILK_FIFO_LINE_SIZE	64</span>

<span class="cm">/* define the WM info on Sandybridge */</span>
<span class="cp">#define SNB_DISPLAY_FIFO	128</span>
<span class="cp">#define SNB_DISPLAY_MAXWM	0x7f	</span><span class="cm">/* bit 16:22 */</span><span class="cp"></span>
<span class="cp">#define SNB_DISPLAY_DFTWM	8</span>
<span class="cp">#define SNB_CURSOR_FIFO		32</span>
<span class="cp">#define SNB_CURSOR_MAXWM	0x1f	</span><span class="cm">/* bit 4:0 */</span><span class="cp"></span>
<span class="cp">#define SNB_CURSOR_DFTWM	8</span>

<span class="cp">#define SNB_DISPLAY_SR_FIFO	512</span>
<span class="cp">#define SNB_DISPLAY_MAX_SRWM	0x1ff	</span><span class="cm">/* bit 16:8 */</span><span class="cp"></span>
<span class="cp">#define SNB_DISPLAY_DFT_SRWM	0x3f</span>
<span class="cp">#define SNB_CURSOR_SR_FIFO	64</span>
<span class="cp">#define SNB_CURSOR_MAX_SRWM	0x3f	</span><span class="cm">/* bit 5:0 */</span><span class="cp"></span>
<span class="cp">#define SNB_CURSOR_DFT_SRWM	8</span>

<span class="cp">#define SNB_FBC_MAX_SRWM	0xf	</span><span class="cm">/* bit 23:20 */</span><span class="cp"></span>

<span class="cp">#define SNB_FIFO_LINE_SIZE	64</span>


<span class="cm">/* the address where we get all kinds of latency value */</span>
<span class="cp">#define SSKPD			0x5d10</span>
<span class="cp">#define SSKPD_WM_MASK		0x3f</span>
<span class="cp">#define SSKPD_WM0_SHIFT		0</span>
<span class="cp">#define SSKPD_WM1_SHIFT		8</span>
<span class="cp">#define SSKPD_WM2_SHIFT		16</span>
<span class="cp">#define SSKPD_WM3_SHIFT		24</span>

<span class="cp">#define SNB_LATENCY(shift)	(I915_READ(MCHBAR_MIRROR_BASE_SNB + SSKPD) &gt;&gt; (shift) &amp; SSKPD_WM_MASK)</span>
<span class="cp">#define SNB_READ_WM0_LATENCY()		SNB_LATENCY(SSKPD_WM0_SHIFT)</span>
<span class="cp">#define SNB_READ_WM1_LATENCY()		SNB_LATENCY(SSKPD_WM1_SHIFT)</span>
<span class="cp">#define SNB_READ_WM2_LATENCY()		SNB_LATENCY(SSKPD_WM2_SHIFT)</span>
<span class="cp">#define SNB_READ_WM3_LATENCY()		SNB_LATENCY(SSKPD_WM3_SHIFT)</span>

<span class="cm">/*</span>
<span class="cm"> * The two pipe frame counter registers are not synchronized, so</span>
<span class="cm"> * reading a stable value is somewhat tricky. The following code</span>
<span class="cm"> * should work:</span>
<span class="cm"> *</span>
<span class="cm"> *  do {</span>
<span class="cm"> *    high1 = ((INREG(PIPEAFRAMEHIGH) &amp; PIPE_FRAME_HIGH_MASK) &gt;&gt;</span>
<span class="cm"> *             PIPE_FRAME_HIGH_SHIFT;</span>
<span class="cm"> *    low1 =  ((INREG(PIPEAFRAMEPIXEL) &amp; PIPE_FRAME_LOW_MASK) &gt;&gt;</span>
<span class="cm"> *             PIPE_FRAME_LOW_SHIFT);</span>
<span class="cm"> *    high2 = ((INREG(PIPEAFRAMEHIGH) &amp; PIPE_FRAME_HIGH_MASK) &gt;&gt;</span>
<span class="cm"> *             PIPE_FRAME_HIGH_SHIFT);</span>
<span class="cm"> *  } while (high1 != high2);</span>
<span class="cm"> *  frame = (high1 &lt;&lt; 8) | low1;</span>
<span class="cm"> */</span>
<span class="cp">#define _PIPEAFRAMEHIGH          0x70040</span>
<span class="cp">#define   PIPE_FRAME_HIGH_MASK    0x0000ffff</span>
<span class="cp">#define   PIPE_FRAME_HIGH_SHIFT   0</span>
<span class="cp">#define _PIPEAFRAMEPIXEL         0x70044</span>
<span class="cp">#define   PIPE_FRAME_LOW_MASK     0xff000000</span>
<span class="cp">#define   PIPE_FRAME_LOW_SHIFT    24</span>
<span class="cp">#define   PIPE_PIXEL_MASK         0x00ffffff</span>
<span class="cp">#define   PIPE_PIXEL_SHIFT        0</span>
<span class="cm">/* GM45+ just has to be different */</span>
<span class="cp">#define _PIPEA_FRMCOUNT_GM45	0x70040</span>
<span class="cp">#define _PIPEA_FLIPCOUNT_GM45	0x70044</span>
<span class="cp">#define PIPE_FRMCOUNT_GM45(pipe) _PIPE(pipe, _PIPEA_FRMCOUNT_GM45, _PIPEB_FRMCOUNT_GM45)</span>

<span class="cm">/* Cursor A &amp; B regs */</span>
<span class="cp">#define _CURACNTR		0x70080</span>
<span class="cm">/* Old style CUR*CNTR flags (desktop 8xx) */</span>
<span class="cp">#define   CURSOR_ENABLE		0x80000000</span>
<span class="cp">#define   CURSOR_GAMMA_ENABLE	0x40000000</span>
<span class="cp">#define   CURSOR_STRIDE_MASK	0x30000000</span>
<span class="cp">#define   CURSOR_FORMAT_SHIFT	24</span>
<span class="cp">#define   CURSOR_FORMAT_MASK	(0x07 &lt;&lt; CURSOR_FORMAT_SHIFT)</span>
<span class="cp">#define   CURSOR_FORMAT_2C	(0x00 &lt;&lt; CURSOR_FORMAT_SHIFT)</span>
<span class="cp">#define   CURSOR_FORMAT_3C	(0x01 &lt;&lt; CURSOR_FORMAT_SHIFT)</span>
<span class="cp">#define   CURSOR_FORMAT_4C	(0x02 &lt;&lt; CURSOR_FORMAT_SHIFT)</span>
<span class="cp">#define   CURSOR_FORMAT_ARGB	(0x04 &lt;&lt; CURSOR_FORMAT_SHIFT)</span>
<span class="cp">#define   CURSOR_FORMAT_XRGB	(0x05 &lt;&lt; CURSOR_FORMAT_SHIFT)</span>
<span class="cm">/* New style CUR*CNTR flags */</span>
<span class="cp">#define   CURSOR_MODE		0x27</span>
<span class="cp">#define   CURSOR_MODE_DISABLE   0x00</span>
<span class="cp">#define   CURSOR_MODE_64_32B_AX 0x07</span>
<span class="cp">#define   CURSOR_MODE_64_ARGB_AX ((1 &lt;&lt; 5) | CURSOR_MODE_64_32B_AX)</span>
<span class="cp">#define   MCURSOR_PIPE_SELECT	(1 &lt;&lt; 28)</span>
<span class="cp">#define   MCURSOR_PIPE_A	0x00</span>
<span class="cp">#define   MCURSOR_PIPE_B	(1 &lt;&lt; 28)</span>
<span class="cp">#define   MCURSOR_GAMMA_ENABLE  (1 &lt;&lt; 26)</span>
<span class="cp">#define _CURABASE		0x70084</span>
<span class="cp">#define _CURAPOS			0x70088</span>
<span class="cp">#define   CURSOR_POS_MASK       0x007FF</span>
<span class="cp">#define   CURSOR_POS_SIGN       0x8000</span>
<span class="cp">#define   CURSOR_X_SHIFT        0</span>
<span class="cp">#define   CURSOR_Y_SHIFT        16</span>
<span class="cp">#define CURSIZE			0x700a0</span>
<span class="cp">#define _CURBCNTR		0x700c0</span>
<span class="cp">#define _CURBBASE		0x700c4</span>
<span class="cp">#define _CURBPOS			0x700c8</span>

<span class="cp">#define _CURBCNTR_IVB		0x71080</span>
<span class="cp">#define _CURBBASE_IVB		0x71084</span>
<span class="cp">#define _CURBPOS_IVB		0x71088</span>

<span class="cp">#define CURCNTR(pipe) _PIPE(pipe, _CURACNTR, _CURBCNTR)</span>
<span class="cp">#define CURBASE(pipe) _PIPE(pipe, _CURABASE, _CURBBASE)</span>
<span class="cp">#define CURPOS(pipe) _PIPE(pipe, _CURAPOS, _CURBPOS)</span>

<span class="cp">#define CURCNTR_IVB(pipe) _PIPE(pipe, _CURACNTR, _CURBCNTR_IVB)</span>
<span class="cp">#define CURBASE_IVB(pipe) _PIPE(pipe, _CURABASE, _CURBBASE_IVB)</span>
<span class="cp">#define CURPOS_IVB(pipe) _PIPE(pipe, _CURAPOS, _CURBPOS_IVB)</span>

<span class="cm">/* Display A control */</span>
<span class="cp">#define _DSPACNTR                0x70180</span>
<span class="cp">#define   DISPLAY_PLANE_ENABLE			(1&lt;&lt;31)</span>
<span class="cp">#define   DISPLAY_PLANE_DISABLE			0</span>
<span class="cp">#define   DISPPLANE_GAMMA_ENABLE		(1&lt;&lt;30)</span>
<span class="cp">#define   DISPPLANE_GAMMA_DISABLE		0</span>
<span class="cp">#define   DISPPLANE_PIXFORMAT_MASK		(0xf&lt;&lt;26)</span>
<span class="cp">#define   DISPPLANE_8BPP			(0x2&lt;&lt;26)</span>
<span class="cp">#define   DISPPLANE_15_16BPP			(0x4&lt;&lt;26)</span>
<span class="cp">#define   DISPPLANE_16BPP			(0x5&lt;&lt;26)</span>
<span class="cp">#define   DISPPLANE_32BPP_NO_ALPHA		(0x6&lt;&lt;26)</span>
<span class="cp">#define   DISPPLANE_32BPP			(0x7&lt;&lt;26)</span>
<span class="cp">#define   DISPPLANE_32BPP_30BIT_NO_ALPHA	(0xa&lt;&lt;26)</span>
<span class="cp">#define   DISPPLANE_STEREO_ENABLE		(1&lt;&lt;25)</span>
<span class="cp">#define   DISPPLANE_STEREO_DISABLE		0</span>
<span class="cp">#define   DISPPLANE_SEL_PIPE_SHIFT		24</span>
<span class="cp">#define   DISPPLANE_SEL_PIPE_MASK		(3&lt;&lt;DISPPLANE_SEL_PIPE_SHIFT)</span>
<span class="cp">#define   DISPPLANE_SEL_PIPE_A			0</span>
<span class="cp">#define   DISPPLANE_SEL_PIPE_B			(1&lt;&lt;DISPPLANE_SEL_PIPE_SHIFT)</span>
<span class="cp">#define   DISPPLANE_SRC_KEY_ENABLE		(1&lt;&lt;22)</span>
<span class="cp">#define   DISPPLANE_SRC_KEY_DISABLE		0</span>
<span class="cp">#define   DISPPLANE_LINE_DOUBLE			(1&lt;&lt;20)</span>
<span class="cp">#define   DISPPLANE_NO_LINE_DOUBLE		0</span>
<span class="cp">#define   DISPPLANE_STEREO_POLARITY_FIRST	0</span>
<span class="cp">#define   DISPPLANE_STEREO_POLARITY_SECOND	(1&lt;&lt;18)</span>
<span class="cp">#define   DISPPLANE_TRICKLE_FEED_DISABLE	(1&lt;&lt;14) </span><span class="cm">/* Ironlake */</span><span class="cp"></span>
<span class="cp">#define   DISPPLANE_TILED			(1&lt;&lt;10)</span>
<span class="cp">#define _DSPAADDR		0x70184</span>
<span class="cp">#define _DSPASTRIDE		0x70188</span>
<span class="cp">#define _DSPAPOS			0x7018C </span><span class="cm">/* reserved */</span><span class="cp"></span>
<span class="cp">#define _DSPASIZE		0x70190</span>
<span class="cp">#define _DSPASURF		0x7019C </span><span class="cm">/* 965+ only */</span><span class="cp"></span>
<span class="cp">#define _DSPATILEOFF		0x701A4 </span><span class="cm">/* 965+ only */</span><span class="cp"></span>

<span class="cp">#define DSPCNTR(plane) _PIPE(plane, _DSPACNTR, _DSPBCNTR)</span>
<span class="cp">#define DSPADDR(plane) _PIPE(plane, _DSPAADDR, _DSPBADDR)</span>
<span class="cp">#define DSPSTRIDE(plane) _PIPE(plane, _DSPASTRIDE, _DSPBSTRIDE)</span>
<span class="cp">#define DSPPOS(plane) _PIPE(plane, _DSPAPOS, _DSPBPOS)</span>
<span class="cp">#define DSPSIZE(plane) _PIPE(plane, _DSPASIZE, _DSPBSIZE)</span>
<span class="cp">#define DSPSURF(plane) _PIPE(plane, _DSPASURF, _DSPBSURF)</span>
<span class="cp">#define DSPTILEOFF(plane) _PIPE(plane, _DSPATILEOFF, _DSPBTILEOFF)</span>

<span class="cm">/* Display/Sprite base address macros */</span>
<span class="cp">#define DISP_BASEADDR_MASK	(0xfffff000)</span>
<span class="cp">#define I915_LO_DISPBASE(val)	(val &amp; ~DISP_BASEADDR_MASK)</span>
<span class="cp">#define I915_HI_DISPBASE(val)	(val &amp; DISP_BASEADDR_MASK)</span>
<span class="cp">#define I915_MODIFY_DISPBASE(reg, gfx_addr) \</span>
<span class="cp">		(I915_WRITE(reg, gfx_addr | I915_LO_DISPBASE(I915_READ(reg))))</span>

<span class="cm">/* VBIOS flags */</span>
<span class="cp">#define SWF00			0x71410</span>
<span class="cp">#define SWF01			0x71414</span>
<span class="cp">#define SWF02			0x71418</span>
<span class="cp">#define SWF03			0x7141c</span>
<span class="cp">#define SWF04			0x71420</span>
<span class="cp">#define SWF05			0x71424</span>
<span class="cp">#define SWF06			0x71428</span>
<span class="cp">#define SWF10			0x70410</span>
<span class="cp">#define SWF11			0x70414</span>
<span class="cp">#define SWF14			0x71420</span>
<span class="cp">#define SWF30			0x72414</span>
<span class="cp">#define SWF31			0x72418</span>
<span class="cp">#define SWF32			0x7241c</span>

<span class="cm">/* Pipe B */</span>
<span class="cp">#define _PIPEBDSL		0x71000</span>
<span class="cp">#define _PIPEBCONF		0x71008</span>
<span class="cp">#define _PIPEBSTAT		0x71024</span>
<span class="cp">#define _PIPEBFRAMEHIGH		0x71040</span>
<span class="cp">#define _PIPEBFRAMEPIXEL		0x71044</span>
<span class="cp">#define _PIPEB_FRMCOUNT_GM45	0x71040</span>
<span class="cp">#define _PIPEB_FLIPCOUNT_GM45	0x71044</span>


<span class="cm">/* Display B control */</span>
<span class="cp">#define _DSPBCNTR		0x71180</span>
<span class="cp">#define   DISPPLANE_ALPHA_TRANS_ENABLE		(1&lt;&lt;15)</span>
<span class="cp">#define   DISPPLANE_ALPHA_TRANS_DISABLE		0</span>
<span class="cp">#define   DISPPLANE_SPRITE_ABOVE_DISPLAY	0</span>
<span class="cp">#define   DISPPLANE_SPRITE_ABOVE_OVERLAY	(1)</span>
<span class="cp">#define _DSPBADDR		0x71184</span>
<span class="cp">#define _DSPBSTRIDE		0x71188</span>
<span class="cp">#define _DSPBPOS			0x7118C</span>
<span class="cp">#define _DSPBSIZE		0x71190</span>
<span class="cp">#define _DSPBSURF		0x7119C</span>
<span class="cp">#define _DSPBTILEOFF		0x711A4</span>

<span class="cm">/* Sprite A control */</span>
<span class="cp">#define _DVSACNTR		0x72180</span>
<span class="cp">#define   DVS_ENABLE		(1&lt;&lt;31)</span>
<span class="cp">#define   DVS_GAMMA_ENABLE	(1&lt;&lt;30)</span>
<span class="cp">#define   DVS_PIXFORMAT_MASK	(3&lt;&lt;25)</span>
<span class="cp">#define   DVS_FORMAT_YUV422	(0&lt;&lt;25)</span>
<span class="cp">#define   DVS_FORMAT_RGBX101010	(1&lt;&lt;25)</span>
<span class="cp">#define   DVS_FORMAT_RGBX888	(2&lt;&lt;25)</span>
<span class="cp">#define   DVS_FORMAT_RGBX161616	(3&lt;&lt;25)</span>
<span class="cp">#define   DVS_SOURCE_KEY	(1&lt;&lt;22)</span>
<span class="cp">#define   DVS_RGB_ORDER_XBGR	(1&lt;&lt;20)</span>
<span class="cp">#define   DVS_YUV_BYTE_ORDER_MASK (3&lt;&lt;16)</span>
<span class="cp">#define   DVS_YUV_ORDER_YUYV	(0&lt;&lt;16)</span>
<span class="cp">#define   DVS_YUV_ORDER_UYVY	(1&lt;&lt;16)</span>
<span class="cp">#define   DVS_YUV_ORDER_YVYU	(2&lt;&lt;16)</span>
<span class="cp">#define   DVS_YUV_ORDER_VYUY	(3&lt;&lt;16)</span>
<span class="cp">#define   DVS_DEST_KEY		(1&lt;&lt;2)</span>
<span class="cp">#define   DVS_TRICKLE_FEED_DISABLE (1&lt;&lt;14)</span>
<span class="cp">#define   DVS_TILED		(1&lt;&lt;10)</span>
<span class="cp">#define _DVSALINOFF		0x72184</span>
<span class="cp">#define _DVSASTRIDE		0x72188</span>
<span class="cp">#define _DVSAPOS		0x7218c</span>
<span class="cp">#define _DVSASIZE		0x72190</span>
<span class="cp">#define _DVSAKEYVAL		0x72194</span>
<span class="cp">#define _DVSAKEYMSK		0x72198</span>
<span class="cp">#define _DVSASURF		0x7219c</span>
<span class="cp">#define _DVSAKEYMAXVAL		0x721a0</span>
<span class="cp">#define _DVSATILEOFF		0x721a4</span>
<span class="cp">#define _DVSASURFLIVE		0x721ac</span>
<span class="cp">#define _DVSASCALE		0x72204</span>
<span class="cp">#define   DVS_SCALE_ENABLE	(1&lt;&lt;31)</span>
<span class="cp">#define   DVS_FILTER_MASK	(3&lt;&lt;29)</span>
<span class="cp">#define   DVS_FILTER_MEDIUM	(0&lt;&lt;29)</span>
<span class="cp">#define   DVS_FILTER_ENHANCING	(1&lt;&lt;29)</span>
<span class="cp">#define   DVS_FILTER_SOFTENING	(2&lt;&lt;29)</span>
<span class="cp">#define   DVS_VERTICAL_OFFSET_HALF (1&lt;&lt;28) </span><span class="cm">/* must be enabled below */</span><span class="cp"></span>
<span class="cp">#define   DVS_VERTICAL_OFFSET_ENABLE (1&lt;&lt;27)</span>
<span class="cp">#define _DVSAGAMC		0x72300</span>

<span class="cp">#define _DVSBCNTR		0x73180</span>
<span class="cp">#define _DVSBLINOFF		0x73184</span>
<span class="cp">#define _DVSBSTRIDE		0x73188</span>
<span class="cp">#define _DVSBPOS		0x7318c</span>
<span class="cp">#define _DVSBSIZE		0x73190</span>
<span class="cp">#define _DVSBKEYVAL		0x73194</span>
<span class="cp">#define _DVSBKEYMSK		0x73198</span>
<span class="cp">#define _DVSBSURF		0x7319c</span>
<span class="cp">#define _DVSBKEYMAXVAL		0x731a0</span>
<span class="cp">#define _DVSBTILEOFF		0x731a4</span>
<span class="cp">#define _DVSBSURFLIVE		0x731ac</span>
<span class="cp">#define _DVSBSCALE		0x73204</span>
<span class="cp">#define _DVSBGAMC		0x73300</span>

<span class="cp">#define DVSCNTR(pipe) _PIPE(pipe, _DVSACNTR, _DVSBCNTR)</span>
<span class="cp">#define DVSLINOFF(pipe) _PIPE(pipe, _DVSALINOFF, _DVSBLINOFF)</span>
<span class="cp">#define DVSSTRIDE(pipe) _PIPE(pipe, _DVSASTRIDE, _DVSBSTRIDE)</span>
<span class="cp">#define DVSPOS(pipe) _PIPE(pipe, _DVSAPOS, _DVSBPOS)</span>
<span class="cp">#define DVSSURF(pipe) _PIPE(pipe, _DVSASURF, _DVSBSURF)</span>
<span class="cp">#define DVSKEYMAX(pipe) _PIPE(pipe, _DVSAKEYMAXVAL, _DVSBKEYMAXVAL)</span>
<span class="cp">#define DVSSIZE(pipe) _PIPE(pipe, _DVSASIZE, _DVSBSIZE)</span>
<span class="cp">#define DVSSCALE(pipe) _PIPE(pipe, _DVSASCALE, _DVSBSCALE)</span>
<span class="cp">#define DVSTILEOFF(pipe) _PIPE(pipe, _DVSATILEOFF, _DVSBTILEOFF)</span>
<span class="cp">#define DVSKEYVAL(pipe) _PIPE(pipe, _DVSAKEYVAL, _DVSBKEYVAL)</span>
<span class="cp">#define DVSKEYMSK(pipe) _PIPE(pipe, _DVSAKEYMSK, _DVSBKEYMSK)</span>

<span class="cp">#define _SPRA_CTL		0x70280</span>
<span class="cp">#define   SPRITE_ENABLE			(1&lt;&lt;31)</span>
<span class="cp">#define   SPRITE_GAMMA_ENABLE		(1&lt;&lt;30)</span>
<span class="cp">#define   SPRITE_PIXFORMAT_MASK		(7&lt;&lt;25)</span>
<span class="cp">#define   SPRITE_FORMAT_YUV422		(0&lt;&lt;25)</span>
<span class="cp">#define   SPRITE_FORMAT_RGBX101010	(1&lt;&lt;25)</span>
<span class="cp">#define   SPRITE_FORMAT_RGBX888		(2&lt;&lt;25)</span>
<span class="cp">#define   SPRITE_FORMAT_RGBX161616	(3&lt;&lt;25)</span>
<span class="cp">#define   SPRITE_FORMAT_YUV444		(4&lt;&lt;25)</span>
<span class="cp">#define   SPRITE_FORMAT_XR_BGR101010	(5&lt;&lt;25) </span><span class="cm">/* Extended range */</span><span class="cp"></span>
<span class="cp">#define   SPRITE_CSC_ENABLE		(1&lt;&lt;24)</span>
<span class="cp">#define   SPRITE_SOURCE_KEY		(1&lt;&lt;22)</span>
<span class="cp">#define   SPRITE_RGB_ORDER_RGBX		(1&lt;&lt;20) </span><span class="cm">/* only for 888 and 161616 */</span><span class="cp"></span>
<span class="cp">#define   SPRITE_YUV_TO_RGB_CSC_DISABLE	(1&lt;&lt;19)</span>
<span class="cp">#define   SPRITE_YUV_CSC_FORMAT_BT709	(1&lt;&lt;18) </span><span class="cm">/* 0 is BT601 */</span><span class="cp"></span>
<span class="cp">#define   SPRITE_YUV_BYTE_ORDER_MASK	(3&lt;&lt;16)</span>
<span class="cp">#define   SPRITE_YUV_ORDER_YUYV		(0&lt;&lt;16)</span>
<span class="cp">#define   SPRITE_YUV_ORDER_UYVY		(1&lt;&lt;16)</span>
<span class="cp">#define   SPRITE_YUV_ORDER_YVYU		(2&lt;&lt;16)</span>
<span class="cp">#define   SPRITE_YUV_ORDER_VYUY		(3&lt;&lt;16)</span>
<span class="cp">#define   SPRITE_TRICKLE_FEED_DISABLE	(1&lt;&lt;14)</span>
<span class="cp">#define   SPRITE_INT_GAMMA_ENABLE	(1&lt;&lt;13)</span>
<span class="cp">#define   SPRITE_TILED			(1&lt;&lt;10)</span>
<span class="cp">#define   SPRITE_DEST_KEY		(1&lt;&lt;2)</span>
<span class="cp">#define _SPRA_LINOFF		0x70284</span>
<span class="cp">#define _SPRA_STRIDE		0x70288</span>
<span class="cp">#define _SPRA_POS		0x7028c</span>
<span class="cp">#define _SPRA_SIZE		0x70290</span>
<span class="cp">#define _SPRA_KEYVAL		0x70294</span>
<span class="cp">#define _SPRA_KEYMSK		0x70298</span>
<span class="cp">#define _SPRA_SURF		0x7029c</span>
<span class="cp">#define _SPRA_KEYMAX		0x702a0</span>
<span class="cp">#define _SPRA_TILEOFF		0x702a4</span>
<span class="cp">#define _SPRA_SCALE		0x70304</span>
<span class="cp">#define   SPRITE_SCALE_ENABLE	(1&lt;&lt;31)</span>
<span class="cp">#define   SPRITE_FILTER_MASK	(3&lt;&lt;29)</span>
<span class="cp">#define   SPRITE_FILTER_MEDIUM	(0&lt;&lt;29)</span>
<span class="cp">#define   SPRITE_FILTER_ENHANCING	(1&lt;&lt;29)</span>
<span class="cp">#define   SPRITE_FILTER_SOFTENING	(2&lt;&lt;29)</span>
<span class="cp">#define   SPRITE_VERTICAL_OFFSET_HALF	(1&lt;&lt;28) </span><span class="cm">/* must be enabled below */</span><span class="cp"></span>
<span class="cp">#define   SPRITE_VERTICAL_OFFSET_ENABLE	(1&lt;&lt;27)</span>
<span class="cp">#define _SPRA_GAMC		0x70400</span>

<span class="cp">#define _SPRB_CTL		0x71280</span>
<span class="cp">#define _SPRB_LINOFF		0x71284</span>
<span class="cp">#define _SPRB_STRIDE		0x71288</span>
<span class="cp">#define _SPRB_POS		0x7128c</span>
<span class="cp">#define _SPRB_SIZE		0x71290</span>
<span class="cp">#define _SPRB_KEYVAL		0x71294</span>
<span class="cp">#define _SPRB_KEYMSK		0x71298</span>
<span class="cp">#define _SPRB_SURF		0x7129c</span>
<span class="cp">#define _SPRB_KEYMAX		0x712a0</span>
<span class="cp">#define _SPRB_TILEOFF		0x712a4</span>
<span class="cp">#define _SPRB_SCALE		0x71304</span>
<span class="cp">#define _SPRB_GAMC		0x71400</span>

<span class="cp">#define SPRCTL(pipe) _PIPE(pipe, _SPRA_CTL, _SPRB_CTL)</span>
<span class="cp">#define SPRLINOFF(pipe) _PIPE(pipe, _SPRA_LINOFF, _SPRB_LINOFF)</span>
<span class="cp">#define SPRSTRIDE(pipe) _PIPE(pipe, _SPRA_STRIDE, _SPRB_STRIDE)</span>
<span class="cp">#define SPRPOS(pipe) _PIPE(pipe, _SPRA_POS, _SPRB_POS)</span>
<span class="cp">#define SPRSIZE(pipe) _PIPE(pipe, _SPRA_SIZE, _SPRB_SIZE)</span>
<span class="cp">#define SPRKEYVAL(pipe) _PIPE(pipe, _SPRA_KEYVAL, _SPRB_KEYVAL)</span>
<span class="cp">#define SPRKEYMSK(pipe) _PIPE(pipe, _SPRA_KEYMSK, _SPRB_KEYMSK)</span>
<span class="cp">#define SPRSURF(pipe) _PIPE(pipe, _SPRA_SURF, _SPRB_SURF)</span>
<span class="cp">#define SPRKEYMAX(pipe) _PIPE(pipe, _SPRA_KEYMAX, _SPRB_KEYMAX)</span>
<span class="cp">#define SPRTILEOFF(pipe) _PIPE(pipe, _SPRA_TILEOFF, _SPRB_TILEOFF)</span>
<span class="cp">#define SPRSCALE(pipe) _PIPE(pipe, _SPRA_SCALE, _SPRB_SCALE)</span>
<span class="cp">#define SPRGAMC(pipe) _PIPE(pipe, _SPRA_GAMC, _SPRB_GAMC)</span>

<span class="cm">/* VBIOS regs */</span>
<span class="cp">#define VGACNTRL		0x71400</span>
<span class="cp"># define VGA_DISP_DISABLE			(1 &lt;&lt; 31)</span>
<span class="cp"># define VGA_2X_MODE				(1 &lt;&lt; 30)</span>
<span class="cp"># define VGA_PIPE_B_SELECT			(1 &lt;&lt; 29)</span>

<span class="cm">/* Ironlake */</span>

<span class="cp">#define CPU_VGACNTRL	0x41000</span>

<span class="cp">#define DIGITAL_PORT_HOTPLUG_CNTRL      0x44030</span>
<span class="cp">#define  DIGITAL_PORTA_HOTPLUG_ENABLE           (1 &lt;&lt; 4)</span>
<span class="cp">#define  DIGITAL_PORTA_SHORT_PULSE_2MS          (0 &lt;&lt; 2)</span>
<span class="cp">#define  DIGITAL_PORTA_SHORT_PULSE_4_5MS        (1 &lt;&lt; 2)</span>
<span class="cp">#define  DIGITAL_PORTA_SHORT_PULSE_6MS          (2 &lt;&lt; 2)</span>
<span class="cp">#define  DIGITAL_PORTA_SHORT_PULSE_100MS        (3 &lt;&lt; 2)</span>
<span class="cp">#define  DIGITAL_PORTA_NO_DETECT                (0 &lt;&lt; 0)</span>
<span class="cp">#define  DIGITAL_PORTA_LONG_PULSE_DETECT_MASK   (1 &lt;&lt; 1)</span>
<span class="cp">#define  DIGITAL_PORTA_SHORT_PULSE_DETECT_MASK  (1 &lt;&lt; 0)</span>

<span class="cm">/* refresh rate hardware control */</span>
<span class="cp">#define RR_HW_CTL       0x45300</span>
<span class="cp">#define  RR_HW_LOW_POWER_FRAMES_MASK    0xff</span>
<span class="cp">#define  RR_HW_HIGH_POWER_FRAMES_MASK   0xff00</span>

<span class="cp">#define FDI_PLL_BIOS_0  0x46000</span>
<span class="cp">#define  FDI_PLL_FB_CLOCK_MASK  0xff</span>
<span class="cp">#define FDI_PLL_BIOS_1  0x46004</span>
<span class="cp">#define FDI_PLL_BIOS_2  0x46008</span>
<span class="cp">#define DISPLAY_PORT_PLL_BIOS_0         0x4600c</span>
<span class="cp">#define DISPLAY_PORT_PLL_BIOS_1         0x46010</span>
<span class="cp">#define DISPLAY_PORT_PLL_BIOS_2         0x46014</span>

<span class="cp">#define PCH_DSPCLK_GATE_D	0x42020</span>
<span class="cp"># define DPFCUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 9)</span>
<span class="cp"># define DPFCRUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 8)</span>
<span class="cp"># define DPFDUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 7)</span>
<span class="cp"># define DPARBUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 5)</span>

<span class="cp">#define PCH_3DCGDIS0		0x46020</span>
<span class="cp"># define MARIUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 18)</span>
<span class="cp"># define SVSMUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 1)</span>

<span class="cp">#define PCH_3DCGDIS1		0x46024</span>
<span class="cp"># define VFMUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 11)</span>

<span class="cp">#define FDI_PLL_FREQ_CTL        0x46030</span>
<span class="cp">#define  FDI_PLL_FREQ_CHANGE_REQUEST    (1&lt;&lt;24)</span>
<span class="cp">#define  FDI_PLL_FREQ_LOCK_LIMIT_MASK   0xfff00</span>
<span class="cp">#define  FDI_PLL_FREQ_DISABLE_COUNT_LIMIT_MASK  0xff</span>


<span class="cp">#define _PIPEA_DATA_M1           0x60030</span>
<span class="cp">#define  TU_SIZE(x)             (((x)-1) &lt;&lt; 25) </span><span class="cm">/* default size 64 */</span><span class="cp"></span>
<span class="cp">#define  TU_SIZE_MASK           0x7e000000</span>
<span class="cp">#define  PIPE_DATA_M1_OFFSET    0</span>
<span class="cp">#define _PIPEA_DATA_N1           0x60034</span>
<span class="cp">#define  PIPE_DATA_N1_OFFSET    0</span>

<span class="cp">#define _PIPEA_DATA_M2           0x60038</span>
<span class="cp">#define  PIPE_DATA_M2_OFFSET    0</span>
<span class="cp">#define _PIPEA_DATA_N2           0x6003c</span>
<span class="cp">#define  PIPE_DATA_N2_OFFSET    0</span>

<span class="cp">#define _PIPEA_LINK_M1           0x60040</span>
<span class="cp">#define  PIPE_LINK_M1_OFFSET    0</span>
<span class="cp">#define _PIPEA_LINK_N1           0x60044</span>
<span class="cp">#define  PIPE_LINK_N1_OFFSET    0</span>

<span class="cp">#define _PIPEA_LINK_M2           0x60048</span>
<span class="cp">#define  PIPE_LINK_M2_OFFSET    0</span>
<span class="cp">#define _PIPEA_LINK_N2           0x6004c</span>
<span class="cp">#define  PIPE_LINK_N2_OFFSET    0</span>

<span class="cm">/* PIPEB timing regs are same start from 0x61000 */</span>

<span class="cp">#define _PIPEB_DATA_M1           0x61030</span>
<span class="cp">#define _PIPEB_DATA_N1           0x61034</span>

<span class="cp">#define _PIPEB_DATA_M2           0x61038</span>
<span class="cp">#define _PIPEB_DATA_N2           0x6103c</span>

<span class="cp">#define _PIPEB_LINK_M1           0x61040</span>
<span class="cp">#define _PIPEB_LINK_N1           0x61044</span>

<span class="cp">#define _PIPEB_LINK_M2           0x61048</span>
<span class="cp">#define _PIPEB_LINK_N2           0x6104c</span>

<span class="cp">#define PIPE_DATA_M1(pipe) _PIPE(pipe, _PIPEA_DATA_M1, _PIPEB_DATA_M1)</span>
<span class="cp">#define PIPE_DATA_N1(pipe) _PIPE(pipe, _PIPEA_DATA_N1, _PIPEB_DATA_N1)</span>
<span class="cp">#define PIPE_DATA_M2(pipe) _PIPE(pipe, _PIPEA_DATA_M2, _PIPEB_DATA_M2)</span>
<span class="cp">#define PIPE_DATA_N2(pipe) _PIPE(pipe, _PIPEA_DATA_N2, _PIPEB_DATA_N2)</span>
<span class="cp">#define PIPE_LINK_M1(pipe) _PIPE(pipe, _PIPEA_LINK_M1, _PIPEB_LINK_M1)</span>
<span class="cp">#define PIPE_LINK_N1(pipe) _PIPE(pipe, _PIPEA_LINK_N1, _PIPEB_LINK_N1)</span>
<span class="cp">#define PIPE_LINK_M2(pipe) _PIPE(pipe, _PIPEA_LINK_M2, _PIPEB_LINK_M2)</span>
<span class="cp">#define PIPE_LINK_N2(pipe) _PIPE(pipe, _PIPEA_LINK_N2, _PIPEB_LINK_N2)</span>

<span class="cm">/* CPU panel fitter */</span>
<span class="cm">/* IVB+ has 3 fitters, 0 is 7x5 capable, the other two only 3x3 */</span>
<span class="cp">#define _PFA_CTL_1               0x68080</span>
<span class="cp">#define _PFB_CTL_1               0x68880</span>
<span class="cp">#define  PF_ENABLE              (1&lt;&lt;31)</span>
<span class="cp">#define  PF_FILTER_MASK		(3&lt;&lt;23)</span>
<span class="cp">#define  PF_FILTER_PROGRAMMED	(0&lt;&lt;23)</span>
<span class="cp">#define  PF_FILTER_MED_3x3	(1&lt;&lt;23)</span>
<span class="cp">#define  PF_FILTER_EDGE_ENHANCE	(2&lt;&lt;23)</span>
<span class="cp">#define  PF_FILTER_EDGE_SOFTEN	(3&lt;&lt;23)</span>
<span class="cp">#define _PFA_WIN_SZ		0x68074</span>
<span class="cp">#define _PFB_WIN_SZ		0x68874</span>
<span class="cp">#define _PFA_WIN_POS		0x68070</span>
<span class="cp">#define _PFB_WIN_POS		0x68870</span>
<span class="cp">#define _PFA_VSCALE		0x68084</span>
<span class="cp">#define _PFB_VSCALE		0x68884</span>
<span class="cp">#define _PFA_HSCALE		0x68090</span>
<span class="cp">#define _PFB_HSCALE		0x68890</span>

<span class="cp">#define PF_CTL(pipe)		_PIPE(pipe, _PFA_CTL_1, _PFB_CTL_1)</span>
<span class="cp">#define PF_WIN_SZ(pipe)		_PIPE(pipe, _PFA_WIN_SZ, _PFB_WIN_SZ)</span>
<span class="cp">#define PF_WIN_POS(pipe)	_PIPE(pipe, _PFA_WIN_POS, _PFB_WIN_POS)</span>
<span class="cp">#define PF_VSCALE(pipe)		_PIPE(pipe, _PFA_VSCALE, _PFB_VSCALE)</span>
<span class="cp">#define PF_HSCALE(pipe)		_PIPE(pipe, _PFA_HSCALE, _PFB_HSCALE)</span>

<span class="cm">/* legacy palette */</span>
<span class="cp">#define _LGC_PALETTE_A           0x4a000</span>
<span class="cp">#define _LGC_PALETTE_B           0x4a800</span>
<span class="cp">#define LGC_PALETTE(pipe) _PIPE(pipe, _LGC_PALETTE_A, _LGC_PALETTE_B)</span>

<span class="cm">/* interrupts */</span>
<span class="cp">#define DE_MASTER_IRQ_CONTROL   (1 &lt;&lt; 31)</span>
<span class="cp">#define DE_SPRITEB_FLIP_DONE    (1 &lt;&lt; 29)</span>
<span class="cp">#define DE_SPRITEA_FLIP_DONE    (1 &lt;&lt; 28)</span>
<span class="cp">#define DE_PLANEB_FLIP_DONE     (1 &lt;&lt; 27)</span>
<span class="cp">#define DE_PLANEA_FLIP_DONE     (1 &lt;&lt; 26)</span>
<span class="cp">#define DE_PCU_EVENT            (1 &lt;&lt; 25)</span>
<span class="cp">#define DE_GTT_FAULT            (1 &lt;&lt; 24)</span>
<span class="cp">#define DE_POISON               (1 &lt;&lt; 23)</span>
<span class="cp">#define DE_PERFORM_COUNTER      (1 &lt;&lt; 22)</span>
<span class="cp">#define DE_PCH_EVENT            (1 &lt;&lt; 21)</span>
<span class="cp">#define DE_AUX_CHANNEL_A        (1 &lt;&lt; 20)</span>
<span class="cp">#define DE_DP_A_HOTPLUG         (1 &lt;&lt; 19)</span>
<span class="cp">#define DE_GSE                  (1 &lt;&lt; 18)</span>
<span class="cp">#define DE_PIPEB_VBLANK         (1 &lt;&lt; 15)</span>
<span class="cp">#define DE_PIPEB_EVEN_FIELD     (1 &lt;&lt; 14)</span>
<span class="cp">#define DE_PIPEB_ODD_FIELD      (1 &lt;&lt; 13)</span>
<span class="cp">#define DE_PIPEB_LINE_COMPARE   (1 &lt;&lt; 12)</span>
<span class="cp">#define DE_PIPEB_VSYNC          (1 &lt;&lt; 11)</span>
<span class="cp">#define DE_PIPEB_FIFO_UNDERRUN  (1 &lt;&lt; 8)</span>
<span class="cp">#define DE_PIPEA_VBLANK         (1 &lt;&lt; 7)</span>
<span class="cp">#define DE_PIPEA_EVEN_FIELD     (1 &lt;&lt; 6)</span>
<span class="cp">#define DE_PIPEA_ODD_FIELD      (1 &lt;&lt; 5)</span>
<span class="cp">#define DE_PIPEA_LINE_COMPARE   (1 &lt;&lt; 4)</span>
<span class="cp">#define DE_PIPEA_VSYNC          (1 &lt;&lt; 3)</span>
<span class="cp">#define DE_PIPEA_FIFO_UNDERRUN  (1 &lt;&lt; 0)</span>

<span class="cm">/* More Ivybridge lolz */</span>
<span class="cp">#define DE_ERR_DEBUG_IVB		(1&lt;&lt;30)</span>
<span class="cp">#define DE_GSE_IVB			(1&lt;&lt;29)</span>
<span class="cp">#define DE_PCH_EVENT_IVB		(1&lt;&lt;28)</span>
<span class="cp">#define DE_DP_A_HOTPLUG_IVB		(1&lt;&lt;27)</span>
<span class="cp">#define DE_AUX_CHANNEL_A_IVB		(1&lt;&lt;26)</span>
<span class="cp">#define DE_SPRITEC_FLIP_DONE_IVB	(1&lt;&lt;14)</span>
<span class="cp">#define DE_PLANEC_FLIP_DONE_IVB		(1&lt;&lt;13)</span>
<span class="cp">#define DE_PIPEC_VBLANK_IVB		(1&lt;&lt;10)</span>
<span class="cp">#define DE_SPRITEB_FLIP_DONE_IVB	(1&lt;&lt;9)</span>
<span class="cp">#define DE_PLANEB_FLIP_DONE_IVB		(1&lt;&lt;8)</span>
<span class="cp">#define DE_PIPEB_VBLANK_IVB		(1&lt;&lt;5)</span>
<span class="cp">#define DE_SPRITEA_FLIP_DONE_IVB	(1&lt;&lt;4)</span>
<span class="cp">#define DE_PLANEA_FLIP_DONE_IVB		(1&lt;&lt;3)</span>
<span class="cp">#define DE_PIPEA_VBLANK_IVB		(1&lt;&lt;0)</span>

<span class="cp">#define VLV_MASTER_IER			0x4400c </span><span class="cm">/* Gunit master IER */</span><span class="cp"></span>
<span class="cp">#define   MASTER_INTERRUPT_ENABLE	(1&lt;&lt;31)</span>

<span class="cp">#define DEISR   0x44000</span>
<span class="cp">#define DEIMR   0x44004</span>
<span class="cp">#define DEIIR   0x44008</span>
<span class="cp">#define DEIER   0x4400c</span>

<span class="cm">/* GT interrupt.</span>
<span class="cm"> * Note that for gen6+ the ring-specific interrupt bits do alias with the</span>
<span class="cm"> * corresponding bits in the per-ring interrupt control registers. */</span>
<span class="cp">#define GT_GEN6_BLT_FLUSHDW_NOTIFY_INTERRUPT	(1 &lt;&lt; 26)</span>
<span class="cp">#define GT_GEN6_BLT_CS_ERROR_INTERRUPT		(1 &lt;&lt; 25)</span>
<span class="cp">#define GT_GEN6_BLT_USER_INTERRUPT		(1 &lt;&lt; 22)</span>
<span class="cp">#define GT_GEN6_BSD_CS_ERROR_INTERRUPT		(1 &lt;&lt; 15)</span>
<span class="cp">#define GT_GEN6_BSD_USER_INTERRUPT		(1 &lt;&lt; 12)</span>
<span class="cp">#define GT_BSD_USER_INTERRUPT			(1 &lt;&lt; 5) </span><span class="cm">/* ilk only */</span><span class="cp"></span>
<span class="cp">#define GT_GEN7_L3_PARITY_ERROR_INTERRUPT	(1 &lt;&lt; 5)</span>
<span class="cp">#define GT_PIPE_NOTIFY				(1 &lt;&lt; 4)</span>
<span class="cp">#define GT_RENDER_CS_ERROR_INTERRUPT		(1 &lt;&lt; 3)</span>
<span class="cp">#define GT_SYNC_STATUS				(1 &lt;&lt; 2)</span>
<span class="cp">#define GT_USER_INTERRUPT			(1 &lt;&lt; 0)</span>

<span class="cp">#define GTISR   0x44010</span>
<span class="cp">#define GTIMR   0x44014</span>
<span class="cp">#define GTIIR   0x44018</span>
<span class="cp">#define GTIER   0x4401c</span>

<span class="cp">#define ILK_DISPLAY_CHICKEN2	0x42004</span>
<span class="cm">/* Required on all Ironlake and Sandybridge according to the B-Spec. */</span>
<span class="cp">#define  ILK_ELPIN_409_SELECT	(1 &lt;&lt; 25)</span>
<span class="cp">#define  ILK_DPARB_GATE	(1&lt;&lt;22)</span>
<span class="cp">#define  ILK_VSDPFD_FULL	(1&lt;&lt;21)</span>
<span class="cp">#define ILK_DISPLAY_CHICKEN_FUSES	0x42014</span>
<span class="cp">#define  ILK_INTERNAL_GRAPHICS_DISABLE	(1&lt;&lt;31)</span>
<span class="cp">#define  ILK_INTERNAL_DISPLAY_DISABLE	(1&lt;&lt;30)</span>
<span class="cp">#define  ILK_DISPLAY_DEBUG_DISABLE	(1&lt;&lt;29)</span>
<span class="cp">#define  ILK_HDCP_DISABLE		(1&lt;&lt;25)</span>
<span class="cp">#define  ILK_eDP_A_DISABLE		(1&lt;&lt;24)</span>
<span class="cp">#define  ILK_DESKTOP			(1&lt;&lt;23)</span>
<span class="cp">#define ILK_DSPCLK_GATE		0x42020</span>
<span class="cp">#define  IVB_VRHUNIT_CLK_GATE	(1&lt;&lt;28)</span>
<span class="cp">#define  ILK_DPARB_CLK_GATE	(1&lt;&lt;5)</span>
<span class="cp">#define  ILK_DPFD_CLK_GATE	(1&lt;&lt;7)</span>

<span class="cm">/* According to spec this bit 7/8/9 of 0x42020 should be set to enable FBC */</span>
<span class="cp">#define   ILK_CLK_FBC		(1&lt;&lt;7)</span>
<span class="cp">#define   ILK_DPFC_DIS1		(1&lt;&lt;8)</span>
<span class="cp">#define   ILK_DPFC_DIS2		(1&lt;&lt;9)</span>

<span class="cp">#define IVB_CHICKEN3	0x4200c</span>
<span class="cp"># define CHICKEN3_DGMG_REQ_OUT_FIX_DISABLE	(1 &lt;&lt; 5)</span>
<span class="cp"># define CHICKEN3_DGMG_DONE_FIX_DISABLE		(1 &lt;&lt; 2)</span>

<span class="cp">#define DISP_ARB_CTL	0x45000</span>
<span class="cp">#define  DISP_TILE_SURFACE_SWIZZLING	(1&lt;&lt;13)</span>
<span class="cp">#define  DISP_FBC_WM_DIS		(1&lt;&lt;15)</span>

<span class="cm">/* GEN7 chicken */</span>
<span class="cp">#define GEN7_COMMON_SLICE_CHICKEN1		0x7010</span>
<span class="cp"># define GEN7_CSC1_RHWO_OPT_DISABLE_IN_RCC	((1&lt;&lt;10) | (1&lt;&lt;26))</span>

<span class="cp">#define GEN7_L3CNTLREG1				0xB01C</span>
<span class="cp">#define  GEN7_WA_FOR_GEN7_L3_CONTROL			0x3C4FFF8C</span>

<span class="cp">#define GEN7_L3_CHICKEN_MODE_REGISTER		0xB030</span>
<span class="cp">#define  GEN7_WA_L3_CHICKEN_MODE				0x20000000</span>

<span class="cm">/* WaCatErrorRejectionIssue */</span>
<span class="cp">#define GEN7_SQ_CHICKEN_MBCUNIT_CONFIG		0x9030</span>
<span class="cp">#define  GEN7_SQ_CHICKEN_MBCUNIT_SQINTMOB	(1&lt;&lt;11)</span>

<span class="cm">/* PCH */</span>

<span class="cm">/* south display engine interrupt: IBX */</span>
<span class="cp">#define SDE_AUDIO_POWER_D	(1 &lt;&lt; 27)</span>
<span class="cp">#define SDE_AUDIO_POWER_C	(1 &lt;&lt; 26)</span>
<span class="cp">#define SDE_AUDIO_POWER_B	(1 &lt;&lt; 25)</span>
<span class="cp">#define SDE_AUDIO_POWER_SHIFT	(25)</span>
<span class="cp">#define SDE_AUDIO_POWER_MASK	(7 &lt;&lt; SDE_AUDIO_POWER_SHIFT)</span>
<span class="cp">#define SDE_GMBUS		(1 &lt;&lt; 24)</span>
<span class="cp">#define SDE_AUDIO_HDCP_TRANSB	(1 &lt;&lt; 23)</span>
<span class="cp">#define SDE_AUDIO_HDCP_TRANSA	(1 &lt;&lt; 22)</span>
<span class="cp">#define SDE_AUDIO_HDCP_MASK	(3 &lt;&lt; 22)</span>
<span class="cp">#define SDE_AUDIO_TRANSB	(1 &lt;&lt; 21)</span>
<span class="cp">#define SDE_AUDIO_TRANSA	(1 &lt;&lt; 20)</span>
<span class="cp">#define SDE_AUDIO_TRANS_MASK	(3 &lt;&lt; 20)</span>
<span class="cp">#define SDE_POISON		(1 &lt;&lt; 19)</span>
<span class="cm">/* 18 reserved */</span>
<span class="cp">#define SDE_FDI_RXB		(1 &lt;&lt; 17)</span>
<span class="cp">#define SDE_FDI_RXA		(1 &lt;&lt; 16)</span>
<span class="cp">#define SDE_FDI_MASK		(3 &lt;&lt; 16)</span>
<span class="cp">#define SDE_AUXD		(1 &lt;&lt; 15)</span>
<span class="cp">#define SDE_AUXC		(1 &lt;&lt; 14)</span>
<span class="cp">#define SDE_AUXB		(1 &lt;&lt; 13)</span>
<span class="cp">#define SDE_AUX_MASK		(7 &lt;&lt; 13)</span>
<span class="cm">/* 12 reserved */</span>
<span class="cp">#define SDE_CRT_HOTPLUG         (1 &lt;&lt; 11)</span>
<span class="cp">#define SDE_PORTD_HOTPLUG       (1 &lt;&lt; 10)</span>
<span class="cp">#define SDE_PORTC_HOTPLUG       (1 &lt;&lt; 9)</span>
<span class="cp">#define SDE_PORTB_HOTPLUG       (1 &lt;&lt; 8)</span>
<span class="cp">#define SDE_SDVOB_HOTPLUG       (1 &lt;&lt; 6)</span>
<span class="cp">#define SDE_HOTPLUG_MASK	(0xf &lt;&lt; 8)</span>
<span class="cp">#define SDE_TRANSB_CRC_DONE	(1 &lt;&lt; 5)</span>
<span class="cp">#define SDE_TRANSB_CRC_ERR	(1 &lt;&lt; 4)</span>
<span class="cp">#define SDE_TRANSB_FIFO_UNDER	(1 &lt;&lt; 3)</span>
<span class="cp">#define SDE_TRANSA_CRC_DONE	(1 &lt;&lt; 2)</span>
<span class="cp">#define SDE_TRANSA_CRC_ERR	(1 &lt;&lt; 1)</span>
<span class="cp">#define SDE_TRANSA_FIFO_UNDER	(1 &lt;&lt; 0)</span>
<span class="cp">#define SDE_TRANS_MASK		(0x3f)</span>

<span class="cm">/* south display engine interrupt: CPT/PPT */</span>
<span class="cp">#define SDE_AUDIO_POWER_D_CPT	(1 &lt;&lt; 31)</span>
<span class="cp">#define SDE_AUDIO_POWER_C_CPT	(1 &lt;&lt; 30)</span>
<span class="cp">#define SDE_AUDIO_POWER_B_CPT	(1 &lt;&lt; 29)</span>
<span class="cp">#define SDE_AUDIO_POWER_SHIFT_CPT   29</span>
<span class="cp">#define SDE_AUDIO_POWER_MASK_CPT    (7 &lt;&lt; 29)</span>
<span class="cp">#define SDE_AUXD_CPT		(1 &lt;&lt; 27)</span>
<span class="cp">#define SDE_AUXC_CPT		(1 &lt;&lt; 26)</span>
<span class="cp">#define SDE_AUXB_CPT		(1 &lt;&lt; 25)</span>
<span class="cp">#define SDE_AUX_MASK_CPT	(7 &lt;&lt; 25)</span>
<span class="cp">#define SDE_PORTD_HOTPLUG_CPT	(1 &lt;&lt; 23)</span>
<span class="cp">#define SDE_PORTC_HOTPLUG_CPT	(1 &lt;&lt; 22)</span>
<span class="cp">#define SDE_PORTB_HOTPLUG_CPT	(1 &lt;&lt; 21)</span>
<span class="cp">#define SDE_CRT_HOTPLUG_CPT	(1 &lt;&lt; 19)</span>
<span class="cp">#define SDE_HOTPLUG_MASK_CPT	(SDE_CRT_HOTPLUG_CPT |		\</span>
<span class="cp">				 SDE_PORTD_HOTPLUG_CPT |	\</span>
<span class="cp">				 SDE_PORTC_HOTPLUG_CPT |	\</span>
<span class="cp">				 SDE_PORTB_HOTPLUG_CPT)</span>
<span class="cp">#define SDE_GMBUS_CPT		(1 &lt;&lt; 17)</span>
<span class="cp">#define SDE_AUDIO_CP_REQ_C_CPT	(1 &lt;&lt; 10)</span>
<span class="cp">#define SDE_AUDIO_CP_CHG_C_CPT	(1 &lt;&lt; 9)</span>
<span class="cp">#define SDE_FDI_RXC_CPT		(1 &lt;&lt; 8)</span>
<span class="cp">#define SDE_AUDIO_CP_REQ_B_CPT	(1 &lt;&lt; 6)</span>
<span class="cp">#define SDE_AUDIO_CP_CHG_B_CPT	(1 &lt;&lt; 5)</span>
<span class="cp">#define SDE_FDI_RXB_CPT		(1 &lt;&lt; 4)</span>
<span class="cp">#define SDE_AUDIO_CP_REQ_A_CPT	(1 &lt;&lt; 2)</span>
<span class="cp">#define SDE_AUDIO_CP_CHG_A_CPT	(1 &lt;&lt; 1)</span>
<span class="cp">#define SDE_FDI_RXA_CPT		(1 &lt;&lt; 0)</span>
<span class="cp">#define SDE_AUDIO_CP_REQ_CPT	(SDE_AUDIO_CP_REQ_C_CPT | \</span>
<span class="cp">				 SDE_AUDIO_CP_REQ_B_CPT | \</span>
<span class="cp">				 SDE_AUDIO_CP_REQ_A_CPT)</span>
<span class="cp">#define SDE_AUDIO_CP_CHG_CPT	(SDE_AUDIO_CP_CHG_C_CPT | \</span>
<span class="cp">				 SDE_AUDIO_CP_CHG_B_CPT | \</span>
<span class="cp">				 SDE_AUDIO_CP_CHG_A_CPT)</span>
<span class="cp">#define SDE_FDI_MASK_CPT	(SDE_FDI_RXC_CPT | \</span>
<span class="cp">				 SDE_FDI_RXB_CPT | \</span>
<span class="cp">				 SDE_FDI_RXA_CPT)</span>

<span class="cp">#define SDEISR  0xc4000</span>
<span class="cp">#define SDEIMR  0xc4004</span>
<span class="cp">#define SDEIIR  0xc4008</span>
<span class="cp">#define SDEIER  0xc400c</span>

<span class="cm">/* digital port hotplug */</span>
<span class="cp">#define PCH_PORT_HOTPLUG        0xc4030		</span><span class="cm">/* SHOTPLUG_CTL */</span><span class="cp"></span>
<span class="cp">#define PORTD_HOTPLUG_ENABLE            (1 &lt;&lt; 20)</span>
<span class="cp">#define PORTD_PULSE_DURATION_2ms        (0)</span>
<span class="cp">#define PORTD_PULSE_DURATION_4_5ms      (1 &lt;&lt; 18)</span>
<span class="cp">#define PORTD_PULSE_DURATION_6ms        (2 &lt;&lt; 18)</span>
<span class="cp">#define PORTD_PULSE_DURATION_100ms      (3 &lt;&lt; 18)</span>
<span class="cp">#define PORTD_PULSE_DURATION_MASK	(3 &lt;&lt; 18)</span>
<span class="cp">#define PORTD_HOTPLUG_NO_DETECT         (0)</span>
<span class="cp">#define PORTD_HOTPLUG_SHORT_DETECT      (1 &lt;&lt; 16)</span>
<span class="cp">#define PORTD_HOTPLUG_LONG_DETECT       (1 &lt;&lt; 17)</span>
<span class="cp">#define PORTC_HOTPLUG_ENABLE            (1 &lt;&lt; 12)</span>
<span class="cp">#define PORTC_PULSE_DURATION_2ms        (0)</span>
<span class="cp">#define PORTC_PULSE_DURATION_4_5ms      (1 &lt;&lt; 10)</span>
<span class="cp">#define PORTC_PULSE_DURATION_6ms        (2 &lt;&lt; 10)</span>
<span class="cp">#define PORTC_PULSE_DURATION_100ms      (3 &lt;&lt; 10)</span>
<span class="cp">#define PORTC_PULSE_DURATION_MASK	(3 &lt;&lt; 10)</span>
<span class="cp">#define PORTC_HOTPLUG_NO_DETECT         (0)</span>
<span class="cp">#define PORTC_HOTPLUG_SHORT_DETECT      (1 &lt;&lt; 8)</span>
<span class="cp">#define PORTC_HOTPLUG_LONG_DETECT       (1 &lt;&lt; 9)</span>
<span class="cp">#define PORTB_HOTPLUG_ENABLE            (1 &lt;&lt; 4)</span>
<span class="cp">#define PORTB_PULSE_DURATION_2ms        (0)</span>
<span class="cp">#define PORTB_PULSE_DURATION_4_5ms      (1 &lt;&lt; 2)</span>
<span class="cp">#define PORTB_PULSE_DURATION_6ms        (2 &lt;&lt; 2)</span>
<span class="cp">#define PORTB_PULSE_DURATION_100ms      (3 &lt;&lt; 2)</span>
<span class="cp">#define PORTB_PULSE_DURATION_MASK	(3 &lt;&lt; 2)</span>
<span class="cp">#define PORTB_HOTPLUG_NO_DETECT         (0)</span>
<span class="cp">#define PORTB_HOTPLUG_SHORT_DETECT      (1 &lt;&lt; 0)</span>
<span class="cp">#define PORTB_HOTPLUG_LONG_DETECT       (1 &lt;&lt; 1)</span>

<span class="cp">#define PCH_GPIOA               0xc5010</span>
<span class="cp">#define PCH_GPIOB               0xc5014</span>
<span class="cp">#define PCH_GPIOC               0xc5018</span>
<span class="cp">#define PCH_GPIOD               0xc501c</span>
<span class="cp">#define PCH_GPIOE               0xc5020</span>
<span class="cp">#define PCH_GPIOF               0xc5024</span>

<span class="cp">#define PCH_GMBUS0		0xc5100</span>
<span class="cp">#define PCH_GMBUS1		0xc5104</span>
<span class="cp">#define PCH_GMBUS2		0xc5108</span>
<span class="cp">#define PCH_GMBUS3		0xc510c</span>
<span class="cp">#define PCH_GMBUS4		0xc5110</span>
<span class="cp">#define PCH_GMBUS5		0xc5120</span>

<span class="cp">#define _PCH_DPLL_A              0xc6014</span>
<span class="cp">#define _PCH_DPLL_B              0xc6018</span>
<span class="cp">#define _PCH_DPLL(pll) (pll == 0 ? _PCH_DPLL_A : _PCH_DPLL_B)</span>

<span class="cp">#define _PCH_FPA0                0xc6040</span>
<span class="cp">#define  FP_CB_TUNE		(0x3&lt;&lt;22)</span>
<span class="cp">#define _PCH_FPA1                0xc6044</span>
<span class="cp">#define _PCH_FPB0                0xc6048</span>
<span class="cp">#define _PCH_FPB1                0xc604c</span>
<span class="cp">#define _PCH_FP0(pll) (pll == 0 ? _PCH_FPA0 : _PCH_FPB0)</span>
<span class="cp">#define _PCH_FP1(pll) (pll == 0 ? _PCH_FPA1 : _PCH_FPB1)</span>

<span class="cp">#define PCH_DPLL_TEST           0xc606c</span>

<span class="cp">#define PCH_DREF_CONTROL        0xC6200</span>
<span class="cp">#define  DREF_CONTROL_MASK      0x7fc3</span>
<span class="cp">#define  DREF_CPU_SOURCE_OUTPUT_DISABLE         (0&lt;&lt;13)</span>
<span class="cp">#define  DREF_CPU_SOURCE_OUTPUT_DOWNSPREAD      (2&lt;&lt;13)</span>
<span class="cp">#define  DREF_CPU_SOURCE_OUTPUT_NONSPREAD       (3&lt;&lt;13)</span>
<span class="cp">#define  DREF_CPU_SOURCE_OUTPUT_MASK		(3&lt;&lt;13)</span>
<span class="cp">#define  DREF_SSC_SOURCE_DISABLE                (0&lt;&lt;11)</span>
<span class="cp">#define  DREF_SSC_SOURCE_ENABLE                 (2&lt;&lt;11)</span>
<span class="cp">#define  DREF_SSC_SOURCE_MASK			(3&lt;&lt;11)</span>
<span class="cp">#define  DREF_NONSPREAD_SOURCE_DISABLE          (0&lt;&lt;9)</span>
<span class="cp">#define  DREF_NONSPREAD_CK505_ENABLE		(1&lt;&lt;9)</span>
<span class="cp">#define  DREF_NONSPREAD_SOURCE_ENABLE           (2&lt;&lt;9)</span>
<span class="cp">#define  DREF_NONSPREAD_SOURCE_MASK		(3&lt;&lt;9)</span>
<span class="cp">#define  DREF_SUPERSPREAD_SOURCE_DISABLE        (0&lt;&lt;7)</span>
<span class="cp">#define  DREF_SUPERSPREAD_SOURCE_ENABLE         (2&lt;&lt;7)</span>
<span class="cp">#define  DREF_SUPERSPREAD_SOURCE_MASK		(3&lt;&lt;7)</span>
<span class="cp">#define  DREF_SSC4_DOWNSPREAD                   (0&lt;&lt;6)</span>
<span class="cp">#define  DREF_SSC4_CENTERSPREAD                 (1&lt;&lt;6)</span>
<span class="cp">#define  DREF_SSC1_DISABLE                      (0&lt;&lt;1)</span>
<span class="cp">#define  DREF_SSC1_ENABLE                       (1&lt;&lt;1)</span>
<span class="cp">#define  DREF_SSC4_DISABLE                      (0)</span>
<span class="cp">#define  DREF_SSC4_ENABLE                       (1)</span>

<span class="cp">#define PCH_RAWCLK_FREQ         0xc6204</span>
<span class="cp">#define  FDL_TP1_TIMER_SHIFT    12</span>
<span class="cp">#define  FDL_TP1_TIMER_MASK     (3&lt;&lt;12)</span>
<span class="cp">#define  FDL_TP2_TIMER_SHIFT    10</span>
<span class="cp">#define  FDL_TP2_TIMER_MASK     (3&lt;&lt;10)</span>
<span class="cp">#define  RAWCLK_FREQ_MASK       0x3ff</span>

<span class="cp">#define PCH_DPLL_TMR_CFG        0xc6208</span>

<span class="cp">#define PCH_SSC4_PARMS          0xc6210</span>
<span class="cp">#define PCH_SSC4_AUX_PARMS      0xc6214</span>

<span class="cp">#define PCH_DPLL_SEL		0xc7000</span>
<span class="cp">#define  TRANSA_DPLL_ENABLE	(1&lt;&lt;3)</span>
<span class="cp">#define	 TRANSA_DPLLB_SEL	(1&lt;&lt;0)</span>
<span class="cp">#define	 TRANSA_DPLLA_SEL	0</span>
<span class="cp">#define  TRANSB_DPLL_ENABLE	(1&lt;&lt;7)</span>
<span class="cp">#define	 TRANSB_DPLLB_SEL	(1&lt;&lt;4)</span>
<span class="cp">#define	 TRANSB_DPLLA_SEL	(0)</span>
<span class="cp">#define  TRANSC_DPLL_ENABLE	(1&lt;&lt;11)</span>
<span class="cp">#define	 TRANSC_DPLLB_SEL	(1&lt;&lt;8)</span>
<span class="cp">#define	 TRANSC_DPLLA_SEL	(0)</span>

<span class="cm">/* transcoder */</span>

<span class="cp">#define _TRANS_HTOTAL_A          0xe0000</span>
<span class="cp">#define  TRANS_HTOTAL_SHIFT     16</span>
<span class="cp">#define  TRANS_HACTIVE_SHIFT    0</span>
<span class="cp">#define _TRANS_HBLANK_A          0xe0004</span>
<span class="cp">#define  TRANS_HBLANK_END_SHIFT 16</span>
<span class="cp">#define  TRANS_HBLANK_START_SHIFT 0</span>
<span class="cp">#define _TRANS_HSYNC_A           0xe0008</span>
<span class="cp">#define  TRANS_HSYNC_END_SHIFT  16</span>
<span class="cp">#define  TRANS_HSYNC_START_SHIFT 0</span>
<span class="cp">#define _TRANS_VTOTAL_A          0xe000c</span>
<span class="cp">#define  TRANS_VTOTAL_SHIFT     16</span>
<span class="cp">#define  TRANS_VACTIVE_SHIFT    0</span>
<span class="cp">#define _TRANS_VBLANK_A          0xe0010</span>
<span class="cp">#define  TRANS_VBLANK_END_SHIFT 16</span>
<span class="cp">#define  TRANS_VBLANK_START_SHIFT 0</span>
<span class="cp">#define _TRANS_VSYNC_A           0xe0014</span>
<span class="cp">#define  TRANS_VSYNC_END_SHIFT  16</span>
<span class="cp">#define  TRANS_VSYNC_START_SHIFT 0</span>
<span class="cp">#define _TRANS_VSYNCSHIFT_A	0xe0028</span>

<span class="cp">#define _TRANSA_DATA_M1          0xe0030</span>
<span class="cp">#define _TRANSA_DATA_N1          0xe0034</span>
<span class="cp">#define _TRANSA_DATA_M2          0xe0038</span>
<span class="cp">#define _TRANSA_DATA_N2          0xe003c</span>
<span class="cp">#define _TRANSA_DP_LINK_M1       0xe0040</span>
<span class="cp">#define _TRANSA_DP_LINK_N1       0xe0044</span>
<span class="cp">#define _TRANSA_DP_LINK_M2       0xe0048</span>
<span class="cp">#define _TRANSA_DP_LINK_N2       0xe004c</span>

<span class="cm">/* Per-transcoder DIP controls */</span>

<span class="cp">#define _VIDEO_DIP_CTL_A         0xe0200</span>
<span class="cp">#define _VIDEO_DIP_DATA_A        0xe0208</span>
<span class="cp">#define _VIDEO_DIP_GCP_A         0xe0210</span>

<span class="cp">#define _VIDEO_DIP_CTL_B         0xe1200</span>
<span class="cp">#define _VIDEO_DIP_DATA_B        0xe1208</span>
<span class="cp">#define _VIDEO_DIP_GCP_B         0xe1210</span>

<span class="cp">#define TVIDEO_DIP_CTL(pipe) _PIPE(pipe, _VIDEO_DIP_CTL_A, _VIDEO_DIP_CTL_B)</span>
<span class="cp">#define TVIDEO_DIP_DATA(pipe) _PIPE(pipe, _VIDEO_DIP_DATA_A, _VIDEO_DIP_DATA_B)</span>
<span class="cp">#define TVIDEO_DIP_GCP(pipe) _PIPE(pipe, _VIDEO_DIP_GCP_A, _VIDEO_DIP_GCP_B)</span>

<span class="cp">#define VLV_VIDEO_DIP_CTL_A		0x60220</span>
<span class="cp">#define VLV_VIDEO_DIP_DATA_A		0x60208</span>
<span class="cp">#define VLV_VIDEO_DIP_GDCP_PAYLOAD_A	0x60210</span>

<span class="cp">#define VLV_VIDEO_DIP_CTL_B		0x61170</span>
<span class="cp">#define VLV_VIDEO_DIP_DATA_B		0x61174</span>
<span class="cp">#define VLV_VIDEO_DIP_GDCP_PAYLOAD_B	0x61178</span>

<span class="cp">#define VLV_TVIDEO_DIP_CTL(pipe) \</span>
<span class="cp">	 _PIPE(pipe, VLV_VIDEO_DIP_CTL_A, VLV_VIDEO_DIP_CTL_B)</span>
<span class="cp">#define VLV_TVIDEO_DIP_DATA(pipe) \</span>
<span class="cp">	 _PIPE(pipe, VLV_VIDEO_DIP_DATA_A, VLV_VIDEO_DIP_DATA_B)</span>
<span class="cp">#define VLV_TVIDEO_DIP_GCP(pipe) \</span>
<span class="cp">	_PIPE(pipe, VLV_VIDEO_DIP_GDCP_PAYLOAD_A, VLV_VIDEO_DIP_GDCP_PAYLOAD_B)</span>

<span class="cm">/* Haswell DIP controls */</span>
<span class="cp">#define HSW_VIDEO_DIP_CTL_A		0x60200</span>
<span class="cp">#define HSW_VIDEO_DIP_AVI_DATA_A	0x60220</span>
<span class="cp">#define HSW_VIDEO_DIP_VS_DATA_A		0x60260</span>
<span class="cp">#define HSW_VIDEO_DIP_SPD_DATA_A	0x602A0</span>
<span class="cp">#define HSW_VIDEO_DIP_GMP_DATA_A	0x602E0</span>
<span class="cp">#define HSW_VIDEO_DIP_VSC_DATA_A	0x60320</span>
<span class="cp">#define HSW_VIDEO_DIP_AVI_ECC_A		0x60240</span>
<span class="cp">#define HSW_VIDEO_DIP_VS_ECC_A		0x60280</span>
<span class="cp">#define HSW_VIDEO_DIP_SPD_ECC_A		0x602C0</span>
<span class="cp">#define HSW_VIDEO_DIP_GMP_ECC_A		0x60300</span>
<span class="cp">#define HSW_VIDEO_DIP_VSC_ECC_A		0x60344</span>
<span class="cp">#define HSW_VIDEO_DIP_GCP_A		0x60210</span>

<span class="cp">#define HSW_VIDEO_DIP_CTL_B		0x61200</span>
<span class="cp">#define HSW_VIDEO_DIP_AVI_DATA_B	0x61220</span>
<span class="cp">#define HSW_VIDEO_DIP_VS_DATA_B		0x61260</span>
<span class="cp">#define HSW_VIDEO_DIP_SPD_DATA_B	0x612A0</span>
<span class="cp">#define HSW_VIDEO_DIP_GMP_DATA_B	0x612E0</span>
<span class="cp">#define HSW_VIDEO_DIP_VSC_DATA_B	0x61320</span>
<span class="cp">#define HSW_VIDEO_DIP_BVI_ECC_B		0x61240</span>
<span class="cp">#define HSW_VIDEO_DIP_VS_ECC_B		0x61280</span>
<span class="cp">#define HSW_VIDEO_DIP_SPD_ECC_B		0x612C0</span>
<span class="cp">#define HSW_VIDEO_DIP_GMP_ECC_B		0x61300</span>
<span class="cp">#define HSW_VIDEO_DIP_VSC_ECC_B		0x61344</span>
<span class="cp">#define HSW_VIDEO_DIP_GCP_B		0x61210</span>

<span class="cp">#define HSW_TVIDEO_DIP_CTL(pipe) \</span>
<span class="cp">	 _PIPE(pipe, HSW_VIDEO_DIP_CTL_A, HSW_VIDEO_DIP_CTL_B)</span>
<span class="cp">#define HSW_TVIDEO_DIP_AVI_DATA(pipe) \</span>
<span class="cp">	 _PIPE(pipe, HSW_VIDEO_DIP_AVI_DATA_A, HSW_VIDEO_DIP_AVI_DATA_B)</span>
<span class="cp">#define HSW_TVIDEO_DIP_SPD_DATA(pipe) \</span>
<span class="cp">	 _PIPE(pipe, HSW_VIDEO_DIP_SPD_DATA_A, HSW_VIDEO_DIP_SPD_DATA_B)</span>
<span class="cp">#define HSW_TVIDEO_DIP_GCP(pipe) \</span>
<span class="cp">	_PIPE(pipe, HSW_VIDEO_DIP_GCP_A, HSW_VIDEO_DIP_GCP_B)</span>

<span class="cp">#define _TRANS_HTOTAL_B          0xe1000</span>
<span class="cp">#define _TRANS_HBLANK_B          0xe1004</span>
<span class="cp">#define _TRANS_HSYNC_B           0xe1008</span>
<span class="cp">#define _TRANS_VTOTAL_B          0xe100c</span>
<span class="cp">#define _TRANS_VBLANK_B          0xe1010</span>
<span class="cp">#define _TRANS_VSYNC_B           0xe1014</span>
<span class="cp">#define _TRANS_VSYNCSHIFT_B	 0xe1028</span>

<span class="cp">#define TRANS_HTOTAL(pipe) _PIPE(pipe, _TRANS_HTOTAL_A, _TRANS_HTOTAL_B)</span>
<span class="cp">#define TRANS_HBLANK(pipe) _PIPE(pipe, _TRANS_HBLANK_A, _TRANS_HBLANK_B)</span>
<span class="cp">#define TRANS_HSYNC(pipe) _PIPE(pipe, _TRANS_HSYNC_A, _TRANS_HSYNC_B)</span>
<span class="cp">#define TRANS_VTOTAL(pipe) _PIPE(pipe, _TRANS_VTOTAL_A, _TRANS_VTOTAL_B)</span>
<span class="cp">#define TRANS_VBLANK(pipe) _PIPE(pipe, _TRANS_VBLANK_A, _TRANS_VBLANK_B)</span>
<span class="cp">#define TRANS_VSYNC(pipe) _PIPE(pipe, _TRANS_VSYNC_A, _TRANS_VSYNC_B)</span>
<span class="cp">#define TRANS_VSYNCSHIFT(pipe) _PIPE(pipe, _TRANS_VSYNCSHIFT_A, \</span>
<span class="cp">				     _TRANS_VSYNCSHIFT_B)</span>

<span class="cp">#define _TRANSB_DATA_M1          0xe1030</span>
<span class="cp">#define _TRANSB_DATA_N1          0xe1034</span>
<span class="cp">#define _TRANSB_DATA_M2          0xe1038</span>
<span class="cp">#define _TRANSB_DATA_N2          0xe103c</span>
<span class="cp">#define _TRANSB_DP_LINK_M1       0xe1040</span>
<span class="cp">#define _TRANSB_DP_LINK_N1       0xe1044</span>
<span class="cp">#define _TRANSB_DP_LINK_M2       0xe1048</span>
<span class="cp">#define _TRANSB_DP_LINK_N2       0xe104c</span>

<span class="cp">#define TRANSDATA_M1(pipe) _PIPE(pipe, _TRANSA_DATA_M1, _TRANSB_DATA_M1)</span>
<span class="cp">#define TRANSDATA_N1(pipe) _PIPE(pipe, _TRANSA_DATA_N1, _TRANSB_DATA_N1)</span>
<span class="cp">#define TRANSDATA_M2(pipe) _PIPE(pipe, _TRANSA_DATA_M2, _TRANSB_DATA_M2)</span>
<span class="cp">#define TRANSDATA_N2(pipe) _PIPE(pipe, _TRANSA_DATA_N2, _TRANSB_DATA_N2)</span>
<span class="cp">#define TRANSDPLINK_M1(pipe) _PIPE(pipe, _TRANSA_DP_LINK_M1, _TRANSB_DP_LINK_M1)</span>
<span class="cp">#define TRANSDPLINK_N1(pipe) _PIPE(pipe, _TRANSA_DP_LINK_N1, _TRANSB_DP_LINK_N1)</span>
<span class="cp">#define TRANSDPLINK_M2(pipe) _PIPE(pipe, _TRANSA_DP_LINK_M2, _TRANSB_DP_LINK_M2)</span>
<span class="cp">#define TRANSDPLINK_N2(pipe) _PIPE(pipe, _TRANSA_DP_LINK_N2, _TRANSB_DP_LINK_N2)</span>

<span class="cp">#define _TRANSACONF              0xf0008</span>
<span class="cp">#define _TRANSBCONF              0xf1008</span>
<span class="cp">#define TRANSCONF(plane) _PIPE(plane, _TRANSACONF, _TRANSBCONF)</span>
<span class="cp">#define  TRANS_DISABLE          (0&lt;&lt;31)</span>
<span class="cp">#define  TRANS_ENABLE           (1&lt;&lt;31)</span>
<span class="cp">#define  TRANS_STATE_MASK       (1&lt;&lt;30)</span>
<span class="cp">#define  TRANS_STATE_DISABLE    (0&lt;&lt;30)</span>
<span class="cp">#define  TRANS_STATE_ENABLE     (1&lt;&lt;30)</span>
<span class="cp">#define  TRANS_FSYNC_DELAY_HB1  (0&lt;&lt;27)</span>
<span class="cp">#define  TRANS_FSYNC_DELAY_HB2  (1&lt;&lt;27)</span>
<span class="cp">#define  TRANS_FSYNC_DELAY_HB3  (2&lt;&lt;27)</span>
<span class="cp">#define  TRANS_FSYNC_DELAY_HB4  (3&lt;&lt;27)</span>
<span class="cp">#define  TRANS_DP_AUDIO_ONLY    (1&lt;&lt;26)</span>
<span class="cp">#define  TRANS_DP_VIDEO_AUDIO   (0&lt;&lt;26)</span>
<span class="cp">#define  TRANS_INTERLACE_MASK   (7&lt;&lt;21)</span>
<span class="cp">#define  TRANS_PROGRESSIVE      (0&lt;&lt;21)</span>
<span class="cp">#define  TRANS_INTERLACED       (3&lt;&lt;21)</span>
<span class="cp">#define  TRANS_LEGACY_INTERLACED_ILK (2&lt;&lt;21)</span>
<span class="cp">#define  TRANS_8BPC             (0&lt;&lt;5)</span>
<span class="cp">#define  TRANS_10BPC            (1&lt;&lt;5)</span>
<span class="cp">#define  TRANS_6BPC             (2&lt;&lt;5)</span>
<span class="cp">#define  TRANS_12BPC            (3&lt;&lt;5)</span>

<span class="cp">#define _TRANSA_CHICKEN2	 0xf0064</span>
<span class="cp">#define _TRANSB_CHICKEN2	 0xf1064</span>
<span class="cp">#define TRANS_CHICKEN2(pipe) _PIPE(pipe, _TRANSA_CHICKEN2, _TRANSB_CHICKEN2)</span>
<span class="cp">#define   TRANS_AUTOTRAIN_GEN_STALL_DIS	(1&lt;&lt;31)</span>

<span class="cp">#define SOUTH_CHICKEN1		0xc2000</span>
<span class="cp">#define  FDIA_PHASE_SYNC_SHIFT_OVR	19</span>
<span class="cp">#define  FDIA_PHASE_SYNC_SHIFT_EN	18</span>
<span class="cp">#define FDI_PHASE_SYNC_OVR(pipe) (1&lt;&lt;(FDIA_PHASE_SYNC_SHIFT_OVR - ((pipe) * 2)))</span>
<span class="cp">#define FDI_PHASE_SYNC_EN(pipe) (1&lt;&lt;(FDIA_PHASE_SYNC_SHIFT_EN - ((pipe) * 2)))</span>
<span class="cp">#define SOUTH_CHICKEN2		0xc2004</span>
<span class="cp">#define  DPLS_EDP_PPS_FIX_DIS	(1&lt;&lt;0)</span>

<span class="cp">#define _FDI_RXA_CHICKEN         0xc200c</span>
<span class="cp">#define _FDI_RXB_CHICKEN         0xc2010</span>
<span class="cp">#define  FDI_RX_PHASE_SYNC_POINTER_OVR	(1&lt;&lt;1)</span>
<span class="cp">#define  FDI_RX_PHASE_SYNC_POINTER_EN	(1&lt;&lt;0)</span>
<span class="cp">#define FDI_RX_CHICKEN(pipe) _PIPE(pipe, _FDI_RXA_CHICKEN, _FDI_RXB_CHICKEN)</span>

<span class="cp">#define SOUTH_DSPCLK_GATE_D	0xc2020</span>
<span class="cp">#define  PCH_DPLSUNIT_CLOCK_GATE_DISABLE (1&lt;&lt;29)</span>

<span class="cm">/* CPU: FDI_TX */</span>
<span class="cp">#define _FDI_TXA_CTL             0x60100</span>
<span class="cp">#define _FDI_TXB_CTL             0x61100</span>
<span class="cp">#define FDI_TX_CTL(pipe) _PIPE(pipe, _FDI_TXA_CTL, _FDI_TXB_CTL)</span>
<span class="cp">#define  FDI_TX_DISABLE         (0&lt;&lt;31)</span>
<span class="cp">#define  FDI_TX_ENABLE          (1&lt;&lt;31)</span>
<span class="cp">#define  FDI_LINK_TRAIN_PATTERN_1       (0&lt;&lt;28)</span>
<span class="cp">#define  FDI_LINK_TRAIN_PATTERN_2       (1&lt;&lt;28)</span>
<span class="cp">#define  FDI_LINK_TRAIN_PATTERN_IDLE    (2&lt;&lt;28)</span>
<span class="cp">#define  FDI_LINK_TRAIN_NONE            (3&lt;&lt;28)</span>
<span class="cp">#define  FDI_LINK_TRAIN_VOLTAGE_0_4V    (0&lt;&lt;25)</span>
<span class="cp">#define  FDI_LINK_TRAIN_VOLTAGE_0_6V    (1&lt;&lt;25)</span>
<span class="cp">#define  FDI_LINK_TRAIN_VOLTAGE_0_8V    (2&lt;&lt;25)</span>
<span class="cp">#define  FDI_LINK_TRAIN_VOLTAGE_1_2V    (3&lt;&lt;25)</span>
<span class="cp">#define  FDI_LINK_TRAIN_PRE_EMPHASIS_NONE (0&lt;&lt;22)</span>
<span class="cp">#define  FDI_LINK_TRAIN_PRE_EMPHASIS_1_5X (1&lt;&lt;22)</span>
<span class="cp">#define  FDI_LINK_TRAIN_PRE_EMPHASIS_2X   (2&lt;&lt;22)</span>
<span class="cp">#define  FDI_LINK_TRAIN_PRE_EMPHASIS_3X   (3&lt;&lt;22)</span>
<span class="cm">/* ILK always use 400mV 0dB for voltage swing and pre-emphasis level.</span>
<span class="cm">   SNB has different settings. */</span>
<span class="cm">/* SNB A-stepping */</span>
<span class="cp">#define  FDI_LINK_TRAIN_400MV_0DB_SNB_A		(0x38&lt;&lt;22)</span>
<span class="cp">#define  FDI_LINK_TRAIN_400MV_6DB_SNB_A		(0x02&lt;&lt;22)</span>
<span class="cp">#define  FDI_LINK_TRAIN_600MV_3_5DB_SNB_A	(0x01&lt;&lt;22)</span>
<span class="cp">#define  FDI_LINK_TRAIN_800MV_0DB_SNB_A		(0x0&lt;&lt;22)</span>
<span class="cm">/* SNB B-stepping */</span>
<span class="cp">#define  FDI_LINK_TRAIN_400MV_0DB_SNB_B		(0x0&lt;&lt;22)</span>
<span class="cp">#define  FDI_LINK_TRAIN_400MV_6DB_SNB_B		(0x3a&lt;&lt;22)</span>
<span class="cp">#define  FDI_LINK_TRAIN_600MV_3_5DB_SNB_B	(0x39&lt;&lt;22)</span>
<span class="cp">#define  FDI_LINK_TRAIN_800MV_0DB_SNB_B		(0x38&lt;&lt;22)</span>
<span class="cp">#define  FDI_LINK_TRAIN_VOL_EMP_MASK		(0x3f&lt;&lt;22)</span>
<span class="cp">#define  FDI_DP_PORT_WIDTH_X1           (0&lt;&lt;19)</span>
<span class="cp">#define  FDI_DP_PORT_WIDTH_X2           (1&lt;&lt;19)</span>
<span class="cp">#define  FDI_DP_PORT_WIDTH_X3           (2&lt;&lt;19)</span>
<span class="cp">#define  FDI_DP_PORT_WIDTH_X4           (3&lt;&lt;19)</span>
<span class="cp">#define  FDI_TX_ENHANCE_FRAME_ENABLE    (1&lt;&lt;18)</span>
<span class="cm">/* Ironlake: hardwired to 1 */</span>
<span class="cp">#define  FDI_TX_PLL_ENABLE              (1&lt;&lt;14)</span>

<span class="cm">/* Ivybridge has different bits for lolz */</span>
<span class="cp">#define  FDI_LINK_TRAIN_PATTERN_1_IVB       (0&lt;&lt;8)</span>
<span class="cp">#define  FDI_LINK_TRAIN_PATTERN_2_IVB       (1&lt;&lt;8)</span>
<span class="cp">#define  FDI_LINK_TRAIN_PATTERN_IDLE_IVB    (2&lt;&lt;8)</span>
<span class="cp">#define  FDI_LINK_TRAIN_NONE_IVB            (3&lt;&lt;8)</span>

<span class="cm">/* both Tx and Rx */</span>
<span class="cp">#define  FDI_COMPOSITE_SYNC		(1&lt;&lt;11)</span>
<span class="cp">#define  FDI_LINK_TRAIN_AUTO		(1&lt;&lt;10)</span>
<span class="cp">#define  FDI_SCRAMBLING_ENABLE          (0&lt;&lt;7)</span>
<span class="cp">#define  FDI_SCRAMBLING_DISABLE         (1&lt;&lt;7)</span>

<span class="cm">/* FDI_RX, FDI_X is hard-wired to Transcoder_X */</span>
<span class="cp">#define _FDI_RXA_CTL             0xf000c</span>
<span class="cp">#define _FDI_RXB_CTL             0xf100c</span>
<span class="cp">#define FDI_RX_CTL(pipe) _PIPE(pipe, _FDI_RXA_CTL, _FDI_RXB_CTL)</span>
<span class="cp">#define  FDI_RX_ENABLE          (1&lt;&lt;31)</span>
<span class="cm">/* train, dp width same as FDI_TX */</span>
<span class="cp">#define  FDI_FS_ERRC_ENABLE		(1&lt;&lt;27)</span>
<span class="cp">#define  FDI_FE_ERRC_ENABLE		(1&lt;&lt;26)</span>
<span class="cp">#define  FDI_DP_PORT_WIDTH_X8           (7&lt;&lt;19)</span>
<span class="cp">#define  FDI_8BPC                       (0&lt;&lt;16)</span>
<span class="cp">#define  FDI_10BPC                      (1&lt;&lt;16)</span>
<span class="cp">#define  FDI_6BPC                       (2&lt;&lt;16)</span>
<span class="cp">#define  FDI_12BPC                      (3&lt;&lt;16)</span>
<span class="cp">#define  FDI_LINK_REVERSE_OVERWRITE     (1&lt;&lt;15)</span>
<span class="cp">#define  FDI_DMI_LINK_REVERSE_MASK      (1&lt;&lt;14)</span>
<span class="cp">#define  FDI_RX_PLL_ENABLE              (1&lt;&lt;13)</span>
<span class="cp">#define  FDI_FS_ERR_CORRECT_ENABLE      (1&lt;&lt;11)</span>
<span class="cp">#define  FDI_FE_ERR_CORRECT_ENABLE      (1&lt;&lt;10)</span>
<span class="cp">#define  FDI_FS_ERR_REPORT_ENABLE       (1&lt;&lt;9)</span>
<span class="cp">#define  FDI_FE_ERR_REPORT_ENABLE       (1&lt;&lt;8)</span>
<span class="cp">#define  FDI_RX_ENHANCE_FRAME_ENABLE    (1&lt;&lt;6)</span>
<span class="cp">#define  FDI_PCDCLK	                (1&lt;&lt;4)</span>
<span class="cm">/* CPT */</span>
<span class="cp">#define  FDI_AUTO_TRAINING			(1&lt;&lt;10)</span>
<span class="cp">#define  FDI_LINK_TRAIN_PATTERN_1_CPT		(0&lt;&lt;8)</span>
<span class="cp">#define  FDI_LINK_TRAIN_PATTERN_2_CPT		(1&lt;&lt;8)</span>
<span class="cp">#define  FDI_LINK_TRAIN_PATTERN_IDLE_CPT	(2&lt;&lt;8)</span>
<span class="cp">#define  FDI_LINK_TRAIN_NORMAL_CPT		(3&lt;&lt;8)</span>
<span class="cp">#define  FDI_LINK_TRAIN_PATTERN_MASK_CPT	(3&lt;&lt;8)</span>
<span class="cm">/* LPT */</span>
<span class="cp">#define  FDI_PORT_WIDTH_2X_LPT			(1&lt;&lt;19)</span>
<span class="cp">#define  FDI_PORT_WIDTH_1X_LPT			(0&lt;&lt;19)</span>

<span class="cp">#define _FDI_RXA_MISC            0xf0010</span>
<span class="cp">#define _FDI_RXB_MISC            0xf1010</span>
<span class="cp">#define _FDI_RXA_TUSIZE1         0xf0030</span>
<span class="cp">#define _FDI_RXA_TUSIZE2         0xf0038</span>
<span class="cp">#define _FDI_RXB_TUSIZE1         0xf1030</span>
<span class="cp">#define _FDI_RXB_TUSIZE2         0xf1038</span>
<span class="cp">#define FDI_RX_MISC(pipe) _PIPE(pipe, _FDI_RXA_MISC, _FDI_RXB_MISC)</span>
<span class="cp">#define FDI_RX_TUSIZE1(pipe) _PIPE(pipe, _FDI_RXA_TUSIZE1, _FDI_RXB_TUSIZE1)</span>
<span class="cp">#define FDI_RX_TUSIZE2(pipe) _PIPE(pipe, _FDI_RXA_TUSIZE2, _FDI_RXB_TUSIZE2)</span>

<span class="cm">/* FDI_RX interrupt register format */</span>
<span class="cp">#define FDI_RX_INTER_LANE_ALIGN         (1&lt;&lt;10)</span>
<span class="cp">#define FDI_RX_SYMBOL_LOCK              (1&lt;&lt;9) </span><span class="cm">/* train 2 */</span><span class="cp"></span>
<span class="cp">#define FDI_RX_BIT_LOCK                 (1&lt;&lt;8) </span><span class="cm">/* train 1 */</span><span class="cp"></span>
<span class="cp">#define FDI_RX_TRAIN_PATTERN_2_FAIL     (1&lt;&lt;7)</span>
<span class="cp">#define FDI_RX_FS_CODE_ERR              (1&lt;&lt;6)</span>
<span class="cp">#define FDI_RX_FE_CODE_ERR              (1&lt;&lt;5)</span>
<span class="cp">#define FDI_RX_SYMBOL_ERR_RATE_ABOVE    (1&lt;&lt;4)</span>
<span class="cp">#define FDI_RX_HDCP_LINK_FAIL           (1&lt;&lt;3)</span>
<span class="cp">#define FDI_RX_PIXEL_FIFO_OVERFLOW      (1&lt;&lt;2)</span>
<span class="cp">#define FDI_RX_CROSS_CLOCK_OVERFLOW     (1&lt;&lt;1)</span>
<span class="cp">#define FDI_RX_SYMBOL_QUEUE_OVERFLOW    (1&lt;&lt;0)</span>

<span class="cp">#define _FDI_RXA_IIR             0xf0014</span>
<span class="cp">#define _FDI_RXA_IMR             0xf0018</span>
<span class="cp">#define _FDI_RXB_IIR             0xf1014</span>
<span class="cp">#define _FDI_RXB_IMR             0xf1018</span>
<span class="cp">#define FDI_RX_IIR(pipe) _PIPE(pipe, _FDI_RXA_IIR, _FDI_RXB_IIR)</span>
<span class="cp">#define FDI_RX_IMR(pipe) _PIPE(pipe, _FDI_RXA_IMR, _FDI_RXB_IMR)</span>

<span class="cp">#define FDI_PLL_CTL_1           0xfe000</span>
<span class="cp">#define FDI_PLL_CTL_2           0xfe004</span>

<span class="cm">/* CRT */</span>
<span class="cp">#define PCH_ADPA                0xe1100</span>
<span class="cp">#define  ADPA_TRANS_SELECT_MASK (1&lt;&lt;30)</span>
<span class="cp">#define  ADPA_TRANS_A_SELECT    0</span>
<span class="cp">#define  ADPA_TRANS_B_SELECT    (1&lt;&lt;30)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_MASK  0x03ff0000 </span><span class="cm">/* bit 25-16 */</span><span class="cp"></span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_MONITOR_NONE  (0&lt;&lt;24)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_MONITOR_MASK  (3&lt;&lt;24)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_MONITOR_COLOR (3&lt;&lt;24)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_MONITOR_MONO  (2&lt;&lt;24)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_ENABLE        (1&lt;&lt;23)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_PERIOD_64     (0&lt;&lt;22)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_PERIOD_128    (1&lt;&lt;22)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_WARMUP_5MS    (0&lt;&lt;21)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_WARMUP_10MS   (1&lt;&lt;21)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_SAMPLE_2S     (0&lt;&lt;20)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_SAMPLE_4S     (1&lt;&lt;20)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_VOLTAGE_40    (0&lt;&lt;18)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_VOLTAGE_50    (1&lt;&lt;18)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_VOLTAGE_60    (2&lt;&lt;18)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_VOLTAGE_70    (3&lt;&lt;18)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_VOLREF_325MV  (0&lt;&lt;17)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_VOLREF_475MV  (1&lt;&lt;17)</span>
<span class="cp">#define  ADPA_CRT_HOTPLUG_FORCE_TRIGGER (1&lt;&lt;16)</span>

<span class="cm">/* or SDVOB */</span>
<span class="cp">#define VLV_HDMIB 0x61140</span>
<span class="cp">#define HDMIB   0xe1140</span>
<span class="cp">#define  PORT_ENABLE    (1 &lt;&lt; 31)</span>
<span class="cp">#define  TRANSCODER(pipe)       ((pipe) &lt;&lt; 30)</span>
<span class="cp">#define  TRANSCODER_CPT(pipe)   ((pipe) &lt;&lt; 29)</span>
<span class="cp">#define  TRANSCODER_MASK        (1 &lt;&lt; 30)</span>
<span class="cp">#define  TRANSCODER_MASK_CPT    (3 &lt;&lt; 29)</span>
<span class="cp">#define  COLOR_FORMAT_8bpc      (0)</span>
<span class="cp">#define  COLOR_FORMAT_12bpc     (3 &lt;&lt; 26)</span>
<span class="cp">#define  SDVOB_HOTPLUG_ENABLE   (1 &lt;&lt; 23)</span>
<span class="cp">#define  SDVO_ENCODING          (0)</span>
<span class="cp">#define  TMDS_ENCODING          (2 &lt;&lt; 10)</span>
<span class="cp">#define  NULL_PACKET_VSYNC_ENABLE       (1 &lt;&lt; 9)</span>
<span class="cm">/* CPT */</span>
<span class="cp">#define  HDMI_MODE_SELECT	(1 &lt;&lt; 9)</span>
<span class="cp">#define  DVI_MODE_SELECT	(0)</span>
<span class="cp">#define  SDVOB_BORDER_ENABLE    (1 &lt;&lt; 7)</span>
<span class="cp">#define  AUDIO_ENABLE           (1 &lt;&lt; 6)</span>
<span class="cp">#define  VSYNC_ACTIVE_HIGH      (1 &lt;&lt; 4)</span>
<span class="cp">#define  HSYNC_ACTIVE_HIGH      (1 &lt;&lt; 3)</span>
<span class="cp">#define  PORT_DETECTED          (1 &lt;&lt; 2)</span>

<span class="cm">/* PCH SDVOB multiplex with HDMIB */</span>
<span class="cp">#define PCH_SDVOB	HDMIB</span>

<span class="cp">#define HDMIC   0xe1150</span>
<span class="cp">#define HDMID   0xe1160</span>

<span class="cp">#define PCH_LVDS	0xe1180</span>
<span class="cp">#define  LVDS_DETECTED	(1 &lt;&lt; 1)</span>

<span class="cp">#define BLC_PWM_CPU_CTL2	0x48250</span>
<span class="cp">#define  PWM_ENABLE		(1 &lt;&lt; 31)</span>
<span class="cp">#define  PWM_PIPE_A		(0 &lt;&lt; 29)</span>
<span class="cp">#define  PWM_PIPE_B		(1 &lt;&lt; 29)</span>
<span class="cp">#define BLC_PWM_CPU_CTL		0x48254</span>

<span class="cp">#define BLC_PWM_PCH_CTL1	0xc8250</span>
<span class="cp">#define  PWM_PCH_ENABLE		(1 &lt;&lt; 31)</span>
<span class="cp">#define  PWM_POLARITY_ACTIVE_LOW	(1 &lt;&lt; 29)</span>
<span class="cp">#define  PWM_POLARITY_ACTIVE_HIGH	(0 &lt;&lt; 29)</span>
<span class="cp">#define  PWM_POLARITY_ACTIVE_LOW2	(1 &lt;&lt; 28)</span>
<span class="cp">#define  PWM_POLARITY_ACTIVE_HIGH2	(0 &lt;&lt; 28)</span>

<span class="cp">#define BLC_PWM_PCH_CTL2	0xc8254</span>

<span class="cp">#define PCH_PP_STATUS		0xc7200</span>
<span class="cp">#define PCH_PP_CONTROL		0xc7204</span>
<span class="cp">#define  PANEL_UNLOCK_REGS	(0xabcd &lt;&lt; 16)</span>
<span class="cp">#define  PANEL_UNLOCK_MASK	(0xffff &lt;&lt; 16)</span>
<span class="cp">#define  EDP_FORCE_VDD		(1 &lt;&lt; 3)</span>
<span class="cp">#define  EDP_BLC_ENABLE		(1 &lt;&lt; 2)</span>
<span class="cp">#define  PANEL_POWER_RESET	(1 &lt;&lt; 1)</span>
<span class="cp">#define  PANEL_POWER_OFF	(0 &lt;&lt; 0)</span>
<span class="cp">#define  PANEL_POWER_ON		(1 &lt;&lt; 0)</span>
<span class="cp">#define PCH_PP_ON_DELAYS	0xc7208</span>
<span class="cp">#define  PANEL_PORT_SELECT_MASK	(3 &lt;&lt; 30)</span>
<span class="cp">#define  PANEL_PORT_SELECT_LVDS	(0 &lt;&lt; 30)</span>
<span class="cp">#define  PANEL_PORT_SELECT_DPA	(1 &lt;&lt; 30)</span>
<span class="cp">#define  EDP_PANEL		(1 &lt;&lt; 30)</span>
<span class="cp">#define  PANEL_PORT_SELECT_DPC	(2 &lt;&lt; 30)</span>
<span class="cp">#define  PANEL_PORT_SELECT_DPD	(3 &lt;&lt; 30)</span>
<span class="cp">#define  PANEL_POWER_UP_DELAY_MASK	(0x1fff0000)</span>
<span class="cp">#define  PANEL_POWER_UP_DELAY_SHIFT	16</span>
<span class="cp">#define  PANEL_LIGHT_ON_DELAY_MASK	(0x1fff)</span>
<span class="cp">#define  PANEL_LIGHT_ON_DELAY_SHIFT	0</span>

<span class="cp">#define PCH_PP_OFF_DELAYS	0xc720c</span>
<span class="cp">#define  PANEL_POWER_DOWN_DELAY_MASK	(0x1fff0000)</span>
<span class="cp">#define  PANEL_POWER_DOWN_DELAY_SHIFT	16</span>
<span class="cp">#define  PANEL_LIGHT_OFF_DELAY_MASK	(0x1fff)</span>
<span class="cp">#define  PANEL_LIGHT_OFF_DELAY_SHIFT	0</span>

<span class="cp">#define PCH_PP_DIVISOR		0xc7210</span>
<span class="cp">#define  PP_REFERENCE_DIVIDER_MASK	(0xffffff00)</span>
<span class="cp">#define  PP_REFERENCE_DIVIDER_SHIFT	8</span>
<span class="cp">#define  PANEL_POWER_CYCLE_DELAY_MASK	(0x1f)</span>
<span class="cp">#define  PANEL_POWER_CYCLE_DELAY_SHIFT	0</span>

<span class="cp">#define PCH_DP_B		0xe4100</span>
<span class="cp">#define PCH_DPB_AUX_CH_CTL	0xe4110</span>
<span class="cp">#define PCH_DPB_AUX_CH_DATA1	0xe4114</span>
<span class="cp">#define PCH_DPB_AUX_CH_DATA2	0xe4118</span>
<span class="cp">#define PCH_DPB_AUX_CH_DATA3	0xe411c</span>
<span class="cp">#define PCH_DPB_AUX_CH_DATA4	0xe4120</span>
<span class="cp">#define PCH_DPB_AUX_CH_DATA5	0xe4124</span>

<span class="cp">#define PCH_DP_C		0xe4200</span>
<span class="cp">#define PCH_DPC_AUX_CH_CTL	0xe4210</span>
<span class="cp">#define PCH_DPC_AUX_CH_DATA1	0xe4214</span>
<span class="cp">#define PCH_DPC_AUX_CH_DATA2	0xe4218</span>
<span class="cp">#define PCH_DPC_AUX_CH_DATA3	0xe421c</span>
<span class="cp">#define PCH_DPC_AUX_CH_DATA4	0xe4220</span>
<span class="cp">#define PCH_DPC_AUX_CH_DATA5	0xe4224</span>

<span class="cp">#define PCH_DP_D		0xe4300</span>
<span class="cp">#define PCH_DPD_AUX_CH_CTL	0xe4310</span>
<span class="cp">#define PCH_DPD_AUX_CH_DATA1	0xe4314</span>
<span class="cp">#define PCH_DPD_AUX_CH_DATA2	0xe4318</span>
<span class="cp">#define PCH_DPD_AUX_CH_DATA3	0xe431c</span>
<span class="cp">#define PCH_DPD_AUX_CH_DATA4	0xe4320</span>
<span class="cp">#define PCH_DPD_AUX_CH_DATA5	0xe4324</span>

<span class="cm">/* CPT */</span>
<span class="cp">#define  PORT_TRANS_A_SEL_CPT	0</span>
<span class="cp">#define  PORT_TRANS_B_SEL_CPT	(1&lt;&lt;29)</span>
<span class="cp">#define  PORT_TRANS_C_SEL_CPT	(2&lt;&lt;29)</span>
<span class="cp">#define  PORT_TRANS_SEL_MASK	(3&lt;&lt;29)</span>
<span class="cp">#define  PORT_TRANS_SEL_CPT(pipe)	((pipe) &lt;&lt; 29)</span>

<span class="cp">#define TRANS_DP_CTL_A		0xe0300</span>
<span class="cp">#define TRANS_DP_CTL_B		0xe1300</span>
<span class="cp">#define TRANS_DP_CTL_C		0xe2300</span>
<span class="cp">#define TRANS_DP_CTL(pipe)	(TRANS_DP_CTL_A + (pipe) * 0x01000)</span>
<span class="cp">#define  TRANS_DP_OUTPUT_ENABLE	(1&lt;&lt;31)</span>
<span class="cp">#define  TRANS_DP_PORT_SEL_B	(0&lt;&lt;29)</span>
<span class="cp">#define  TRANS_DP_PORT_SEL_C	(1&lt;&lt;29)</span>
<span class="cp">#define  TRANS_DP_PORT_SEL_D	(2&lt;&lt;29)</span>
<span class="cp">#define  TRANS_DP_PORT_SEL_NONE	(3&lt;&lt;29)</span>
<span class="cp">#define  TRANS_DP_PORT_SEL_MASK	(3&lt;&lt;29)</span>
<span class="cp">#define  TRANS_DP_AUDIO_ONLY	(1&lt;&lt;26)</span>
<span class="cp">#define  TRANS_DP_ENH_FRAMING	(1&lt;&lt;18)</span>
<span class="cp">#define  TRANS_DP_8BPC		(0&lt;&lt;9)</span>
<span class="cp">#define  TRANS_DP_10BPC		(1&lt;&lt;9)</span>
<span class="cp">#define  TRANS_DP_6BPC		(2&lt;&lt;9)</span>
<span class="cp">#define  TRANS_DP_12BPC		(3&lt;&lt;9)</span>
<span class="cp">#define  TRANS_DP_BPC_MASK	(3&lt;&lt;9)</span>
<span class="cp">#define  TRANS_DP_VSYNC_ACTIVE_HIGH	(1&lt;&lt;4)</span>
<span class="cp">#define  TRANS_DP_VSYNC_ACTIVE_LOW	0</span>
<span class="cp">#define  TRANS_DP_HSYNC_ACTIVE_HIGH	(1&lt;&lt;3)</span>
<span class="cp">#define  TRANS_DP_HSYNC_ACTIVE_LOW	0</span>
<span class="cp">#define  TRANS_DP_SYNC_MASK	(3&lt;&lt;3)</span>

<span class="cm">/* SNB eDP training params */</span>
<span class="cm">/* SNB A-stepping */</span>
<span class="cp">#define  EDP_LINK_TRAIN_400MV_0DB_SNB_A		(0x38&lt;&lt;22)</span>
<span class="cp">#define  EDP_LINK_TRAIN_400MV_6DB_SNB_A		(0x02&lt;&lt;22)</span>
<span class="cp">#define  EDP_LINK_TRAIN_600MV_3_5DB_SNB_A	(0x01&lt;&lt;22)</span>
<span class="cp">#define  EDP_LINK_TRAIN_800MV_0DB_SNB_A		(0x0&lt;&lt;22)</span>
<span class="cm">/* SNB B-stepping */</span>
<span class="cp">#define  EDP_LINK_TRAIN_400_600MV_0DB_SNB_B	(0x0&lt;&lt;22)</span>
<span class="cp">#define  EDP_LINK_TRAIN_400MV_3_5DB_SNB_B	(0x1&lt;&lt;22)</span>
<span class="cp">#define  EDP_LINK_TRAIN_400_600MV_6DB_SNB_B	(0x3a&lt;&lt;22)</span>
<span class="cp">#define  EDP_LINK_TRAIN_600_800MV_3_5DB_SNB_B	(0x39&lt;&lt;22)</span>
<span class="cp">#define  EDP_LINK_TRAIN_800_1200MV_0DB_SNB_B	(0x38&lt;&lt;22)</span>
<span class="cp">#define  EDP_LINK_TRAIN_VOL_EMP_MASK_SNB	(0x3f&lt;&lt;22)</span>

<span class="cm">/* IVB */</span>
<span class="cp">#define EDP_LINK_TRAIN_400MV_0DB_IVB		(0x24 &lt;&lt;22)</span>
<span class="cp">#define EDP_LINK_TRAIN_400MV_3_5DB_IVB		(0x2a &lt;&lt;22)</span>
<span class="cp">#define EDP_LINK_TRAIN_400MV_6DB_IVB		(0x2f &lt;&lt;22)</span>
<span class="cp">#define EDP_LINK_TRAIN_600MV_0DB_IVB		(0x30 &lt;&lt;22)</span>
<span class="cp">#define EDP_LINK_TRAIN_600MV_3_5DB_IVB		(0x36 &lt;&lt;22)</span>
<span class="cp">#define EDP_LINK_TRAIN_800MV_0DB_IVB		(0x38 &lt;&lt;22)</span>
<span class="cp">#define EDP_LINK_TRAIN_800MV_3_5DB_IVB		(0x33 &lt;&lt;22)</span>

<span class="cm">/* legacy values */</span>
<span class="cp">#define EDP_LINK_TRAIN_500MV_0DB_IVB		(0x00 &lt;&lt;22)</span>
<span class="cp">#define EDP_LINK_TRAIN_1000MV_0DB_IVB		(0x20 &lt;&lt;22)</span>
<span class="cp">#define EDP_LINK_TRAIN_500MV_3_5DB_IVB		(0x02 &lt;&lt;22)</span>
<span class="cp">#define EDP_LINK_TRAIN_1000MV_3_5DB_IVB		(0x22 &lt;&lt;22)</span>
<span class="cp">#define EDP_LINK_TRAIN_1000MV_6DB_IVB		(0x23 &lt;&lt;22)</span>

<span class="cp">#define  EDP_LINK_TRAIN_VOL_EMP_MASK_IVB	(0x3f&lt;&lt;22)</span>

<span class="cp">#define  FORCEWAKE				0xA18C</span>
<span class="cp">#define  FORCEWAKE_VLV				0x1300b0</span>
<span class="cp">#define  FORCEWAKE_ACK_VLV			0x1300b4</span>
<span class="cp">#define  FORCEWAKE_ACK				0x130090</span>
<span class="cp">#define  FORCEWAKE_MT				0xa188 </span><span class="cm">/* multi-threaded */</span><span class="cp"></span>
<span class="cp">#define  FORCEWAKE_MT_ACK			0x130040</span>
<span class="cp">#define  ECOBUS					0xa180</span>
<span class="cp">#define    FORCEWAKE_MT_ENABLE			(1&lt;&lt;5)</span>

<span class="cp">#define  GTFIFODBG				0x120000</span>
<span class="cp">#define    GT_FIFO_CPU_ERROR_MASK		7</span>
<span class="cp">#define    GT_FIFO_OVFERR			(1&lt;&lt;2)</span>
<span class="cp">#define    GT_FIFO_IAWRERR			(1&lt;&lt;1)</span>
<span class="cp">#define    GT_FIFO_IARDERR			(1&lt;&lt;0)</span>

<span class="cp">#define  GT_FIFO_FREE_ENTRIES			0x120008</span>
<span class="cp">#define    GT_FIFO_NUM_RESERVED_ENTRIES		20</span>

<span class="cp">#define GEN6_UCGCTL1				0x9400</span>
<span class="cp"># define GEN6_BLBUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 5)</span>
<span class="cp"># define GEN6_CSUNIT_CLOCK_GATE_DISABLE			(1 &lt;&lt; 7)</span>

<span class="cp">#define GEN6_UCGCTL2				0x9404</span>
<span class="cp"># define GEN6_RCZUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 13)</span>
<span class="cp"># define GEN6_RCPBUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 12)</span>
<span class="cp"># define GEN6_RCCUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 11)</span>

<span class="cp">#define GEN6_RPNSWREQ				0xA008</span>
<span class="cp">#define   GEN6_TURBO_DISABLE			(1&lt;&lt;31)</span>
<span class="cp">#define   GEN6_FREQUENCY(x)			((x)&lt;&lt;25)</span>
<span class="cp">#define   GEN6_OFFSET(x)			((x)&lt;&lt;19)</span>
<span class="cp">#define   GEN6_AGGRESSIVE_TURBO			(0&lt;&lt;15)</span>
<span class="cp">#define GEN6_RC_VIDEO_FREQ			0xA00C</span>
<span class="cp">#define GEN6_RC_CONTROL				0xA090</span>
<span class="cp">#define   GEN6_RC_CTL_RC6pp_ENABLE		(1&lt;&lt;16)</span>
<span class="cp">#define   GEN6_RC_CTL_RC6p_ENABLE		(1&lt;&lt;17)</span>
<span class="cp">#define   GEN6_RC_CTL_RC6_ENABLE		(1&lt;&lt;18)</span>
<span class="cp">#define   GEN6_RC_CTL_RC1e_ENABLE		(1&lt;&lt;20)</span>
<span class="cp">#define   GEN6_RC_CTL_RC7_ENABLE		(1&lt;&lt;22)</span>
<span class="cp">#define   GEN6_RC_CTL_EI_MODE(x)		((x)&lt;&lt;27)</span>
<span class="cp">#define   GEN6_RC_CTL_HW_ENABLE			(1&lt;&lt;31)</span>
<span class="cp">#define GEN6_RP_DOWN_TIMEOUT			0xA010</span>
<span class="cp">#define GEN6_RP_INTERRUPT_LIMITS		0xA014</span>
<span class="cp">#define GEN6_RPSTAT1				0xA01C</span>
<span class="cp">#define   GEN6_CAGF_SHIFT			8</span>
<span class="cp">#define   GEN6_CAGF_MASK			(0x7f &lt;&lt; GEN6_CAGF_SHIFT)</span>
<span class="cp">#define GEN6_RP_CONTROL				0xA024</span>
<span class="cp">#define   GEN6_RP_MEDIA_TURBO			(1&lt;&lt;11)</span>
<span class="cp">#define   GEN6_RP_MEDIA_MODE_MASK		(3&lt;&lt;9)</span>
<span class="cp">#define   GEN6_RP_MEDIA_HW_TURBO_MODE		(3&lt;&lt;9)</span>
<span class="cp">#define   GEN6_RP_MEDIA_HW_NORMAL_MODE		(2&lt;&lt;9)</span>
<span class="cp">#define   GEN6_RP_MEDIA_HW_MODE			(1&lt;&lt;9)</span>
<span class="cp">#define   GEN6_RP_MEDIA_SW_MODE			(0&lt;&lt;9)</span>
<span class="cp">#define   GEN6_RP_MEDIA_IS_GFX			(1&lt;&lt;8)</span>
<span class="cp">#define   GEN6_RP_ENABLE			(1&lt;&lt;7)</span>
<span class="cp">#define   GEN6_RP_UP_IDLE_MIN			(0x1&lt;&lt;3)</span>
<span class="cp">#define   GEN6_RP_UP_BUSY_AVG			(0x2&lt;&lt;3)</span>
<span class="cp">#define   GEN6_RP_UP_BUSY_CONT			(0x4&lt;&lt;3)</span>
<span class="cp">#define   GEN6_RP_DOWN_IDLE_CONT		(0x1&lt;&lt;0)</span>
<span class="cp">#define GEN6_RP_UP_THRESHOLD			0xA02C</span>
<span class="cp">#define GEN6_RP_DOWN_THRESHOLD			0xA030</span>
<span class="cp">#define GEN6_RP_CUR_UP_EI			0xA050</span>
<span class="cp">#define   GEN6_CURICONT_MASK			0xffffff</span>
<span class="cp">#define GEN6_RP_CUR_UP				0xA054</span>
<span class="cp">#define   GEN6_CURBSYTAVG_MASK			0xffffff</span>
<span class="cp">#define GEN6_RP_PREV_UP				0xA058</span>
<span class="cp">#define GEN6_RP_CUR_DOWN_EI			0xA05C</span>
<span class="cp">#define   GEN6_CURIAVG_MASK			0xffffff</span>
<span class="cp">#define GEN6_RP_CUR_DOWN			0xA060</span>
<span class="cp">#define GEN6_RP_PREV_DOWN			0xA064</span>
<span class="cp">#define GEN6_RP_UP_EI				0xA068</span>
<span class="cp">#define GEN6_RP_DOWN_EI				0xA06C</span>
<span class="cp">#define GEN6_RP_IDLE_HYSTERSIS			0xA070</span>
<span class="cp">#define GEN6_RC_STATE				0xA094</span>
<span class="cp">#define GEN6_RC1_WAKE_RATE_LIMIT		0xA098</span>
<span class="cp">#define GEN6_RC6_WAKE_RATE_LIMIT		0xA09C</span>
<span class="cp">#define GEN6_RC6pp_WAKE_RATE_LIMIT		0xA0A0</span>
<span class="cp">#define GEN6_RC_EVALUATION_INTERVAL		0xA0A8</span>
<span class="cp">#define GEN6_RC_IDLE_HYSTERSIS			0xA0AC</span>
<span class="cp">#define GEN6_RC_SLEEP				0xA0B0</span>
<span class="cp">#define GEN6_RC1e_THRESHOLD			0xA0B4</span>
<span class="cp">#define GEN6_RC6_THRESHOLD			0xA0B8</span>
<span class="cp">#define GEN6_RC6p_THRESHOLD			0xA0BC</span>
<span class="cp">#define GEN6_RC6pp_THRESHOLD			0xA0C0</span>
<span class="cp">#define GEN6_PMINTRMSK				0xA168</span>

<span class="cp">#define GEN6_PMISR				0x44020</span>
<span class="cp">#define GEN6_PMIMR				0x44024 </span><span class="cm">/* rps_lock */</span><span class="cp"></span>
<span class="cp">#define GEN6_PMIIR				0x44028</span>
<span class="cp">#define GEN6_PMIER				0x4402C</span>
<span class="cp">#define  GEN6_PM_MBOX_EVENT			(1&lt;&lt;25)</span>
<span class="cp">#define  GEN6_PM_THERMAL_EVENT			(1&lt;&lt;24)</span>
<span class="cp">#define  GEN6_PM_RP_DOWN_TIMEOUT		(1&lt;&lt;6)</span>
<span class="cp">#define  GEN6_PM_RP_UP_THRESHOLD		(1&lt;&lt;5)</span>
<span class="cp">#define  GEN6_PM_RP_DOWN_THRESHOLD		(1&lt;&lt;4)</span>
<span class="cp">#define  GEN6_PM_RP_UP_EI_EXPIRED		(1&lt;&lt;2)</span>
<span class="cp">#define  GEN6_PM_RP_DOWN_EI_EXPIRED		(1&lt;&lt;1)</span>
<span class="cp">#define  GEN6_PM_DEFERRED_EVENTS		(GEN6_PM_RP_UP_THRESHOLD | \</span>
<span class="cp">						 GEN6_PM_RP_DOWN_THRESHOLD | \</span>
<span class="cp">						 GEN6_PM_RP_DOWN_TIMEOUT)</span>

<span class="cp">#define GEN6_GT_GFX_RC6_LOCKED			0x138104</span>
<span class="cp">#define GEN6_GT_GFX_RC6				0x138108</span>
<span class="cp">#define GEN6_GT_GFX_RC6p			0x13810C</span>
<span class="cp">#define GEN6_GT_GFX_RC6pp			0x138110</span>

<span class="cp">#define GEN6_PCODE_MAILBOX			0x138124</span>
<span class="cp">#define   GEN6_PCODE_READY			(1&lt;&lt;31)</span>
<span class="cp">#define   GEN6_READ_OC_PARAMS			0xc</span>
<span class="cp">#define   GEN6_PCODE_WRITE_MIN_FREQ_TABLE	0x8</span>
<span class="cp">#define   GEN6_PCODE_READ_MIN_FREQ_TABLE	0x9</span>
<span class="cp">#define GEN6_PCODE_DATA				0x138128</span>
<span class="cp">#define   GEN6_PCODE_FREQ_IA_RATIO_SHIFT	8</span>

<span class="cp">#define GEN6_GT_CORE_STATUS		0x138060</span>
<span class="cp">#define   GEN6_CORE_CPD_STATE_MASK	(7&lt;&lt;4)</span>
<span class="cp">#define   GEN6_RCn_MASK			7</span>
<span class="cp">#define   GEN6_RC0			0</span>
<span class="cp">#define   GEN6_RC3			2</span>
<span class="cp">#define   GEN6_RC6			3</span>
<span class="cp">#define   GEN6_RC7			4</span>

<span class="cp">#define G4X_AUD_VID_DID			0x62020</span>
<span class="cp">#define INTEL_AUDIO_DEVCL		0x808629FB</span>
<span class="cp">#define INTEL_AUDIO_DEVBLC		0x80862801</span>
<span class="cp">#define INTEL_AUDIO_DEVCTG		0x80862802</span>

<span class="cp">#define G4X_AUD_CNTL_ST			0x620B4</span>
<span class="cp">#define G4X_ELDV_DEVCL_DEVBLC		(1 &lt;&lt; 13)</span>
<span class="cp">#define G4X_ELDV_DEVCTG			(1 &lt;&lt; 14)</span>
<span class="cp">#define G4X_ELD_ADDR			(0xf &lt;&lt; 5)</span>
<span class="cp">#define G4X_ELD_ACK			(1 &lt;&lt; 4)</span>
<span class="cp">#define G4X_HDMIW_HDMIEDID		0x6210C</span>

<span class="cp">#define IBX_HDMIW_HDMIEDID_A		0xE2050</span>
<span class="cp">#define IBX_AUD_CNTL_ST_A		0xE20B4</span>
<span class="cp">#define IBX_ELD_BUFFER_SIZE		(0x1f &lt;&lt; 10)</span>
<span class="cp">#define IBX_ELD_ADDRESS			(0x1f &lt;&lt; 5)</span>
<span class="cp">#define IBX_ELD_ACK			(1 &lt;&lt; 4)</span>
<span class="cp">#define IBX_AUD_CNTL_ST2		0xE20C0</span>
<span class="cp">#define IBX_ELD_VALIDB			(1 &lt;&lt; 0)</span>
<span class="cp">#define IBX_CP_READYB			(1 &lt;&lt; 1)</span>

<span class="cp">#define CPT_HDMIW_HDMIEDID_A		0xE5050</span>
<span class="cp">#define CPT_AUD_CNTL_ST_A		0xE50B4</span>
<span class="cp">#define CPT_AUD_CNTRL_ST2		0xE50C0</span>

<span class="cm">/* These are the 4 32-bit write offset registers for each stream</span>
<span class="cm"> * output buffer.  It determines the offset from the</span>
<span class="cm"> * 3DSTATE_SO_BUFFERs that the next streamed vertex output goes to.</span>
<span class="cm"> */</span>
<span class="cp">#define GEN7_SO_WRITE_OFFSET(n)		(0x5280 + (n) * 4)</span>

<span class="cp">#define IBX_AUD_CONFIG_A			0xe2000</span>
<span class="cp">#define CPT_AUD_CONFIG_A			0xe5000</span>
<span class="cp">#define   AUD_CONFIG_N_VALUE_INDEX		(1 &lt;&lt; 29)</span>
<span class="cp">#define   AUD_CONFIG_N_PROG_ENABLE		(1 &lt;&lt; 28)</span>
<span class="cp">#define   AUD_CONFIG_UPPER_N_SHIFT		20</span>
<span class="cp">#define   AUD_CONFIG_UPPER_N_VALUE		(0xff &lt;&lt; 20)</span>
<span class="cp">#define   AUD_CONFIG_LOWER_N_SHIFT		4</span>
<span class="cp">#define   AUD_CONFIG_LOWER_N_VALUE		(0xfff &lt;&lt; 4)</span>
<span class="cp">#define   AUD_CONFIG_PIXEL_CLOCK_HDMI_SHIFT	16</span>
<span class="cp">#define   AUD_CONFIG_PIXEL_CLOCK_HDMI		(0xf &lt;&lt; 16)</span>
<span class="cp">#define   AUD_CONFIG_DISABLE_NCTS		(1 &lt;&lt; 3)</span>

<span class="cm">/* HSW Power Wells */</span>
<span class="cp">#define HSW_PWR_WELL_CTL1		0x45400		</span><span class="cm">/* BIOS */</span><span class="cp"></span>
<span class="cp">#define HSW_PWR_WELL_CTL2		0x45404		</span><span class="cm">/* Driver */</span><span class="cp"></span>
<span class="cp">#define HSW_PWR_WELL_CTL3		0x45408		</span><span class="cm">/* KVMR */</span><span class="cp"></span>
<span class="cp">#define HSW_PWR_WELL_CTL4		0x4540C		</span><span class="cm">/* Debug */</span><span class="cp"></span>
<span class="cp">#define   HSW_PWR_WELL_ENABLE				(1&lt;&lt;31)</span>
<span class="cp">#define   HSW_PWR_WELL_STATE				(1&lt;&lt;30)</span>
<span class="cp">#define HSW_PWR_WELL_CTL5		0x45410</span>
<span class="cp">#define   HSW_PWR_WELL_ENABLE_SINGLE_STEP	(1&lt;&lt;31)</span>
<span class="cp">#define   HSW_PWR_WELL_PWR_GATE_OVERRIDE	(1&lt;&lt;20)</span>
<span class="cp">#define   HSW_PWR_WELL_FORCE_ON				(1&lt;&lt;19)</span>
<span class="cp">#define HSW_PWR_WELL_CTL6		0x45414</span>

<span class="cm">/* Per-pipe DDI Function Control */</span>
<span class="cp">#define PIPE_DDI_FUNC_CTL_A			0x60400</span>
<span class="cp">#define PIPE_DDI_FUNC_CTL_B			0x61400</span>
<span class="cp">#define PIPE_DDI_FUNC_CTL_C			0x62400</span>
<span class="cp">#define PIPE_DDI_FUNC_CTL_EDP		0x6F400</span>
<span class="cp">#define DDI_FUNC_CTL(pipe) _PIPE(pipe, \</span>
<span class="cp">					PIPE_DDI_FUNC_CTL_A, \</span>
<span class="cp">					PIPE_DDI_FUNC_CTL_B)</span>
<span class="cp">#define  PIPE_DDI_FUNC_ENABLE		(1&lt;&lt;31)</span>
<span class="cm">/* Those bits are ignored by pipe EDP since it can only connect to DDI A */</span>
<span class="cp">#define  PIPE_DDI_PORT_MASK				(0xf&lt;&lt;28)</span>
<span class="cp">#define  PIPE_DDI_SELECT_PORT(x)		((x)&lt;&lt;28)</span>
<span class="cp">#define  PIPE_DDI_MODE_SELECT_HDMI		(0&lt;&lt;24)</span>
<span class="cp">#define  PIPE_DDI_MODE_SELECT_DVI		(1&lt;&lt;24)</span>
<span class="cp">#define  PIPE_DDI_MODE_SELECT_DP_SST	(2&lt;&lt;24)</span>
<span class="cp">#define  PIPE_DDI_MODE_SELECT_DP_MST	(3&lt;&lt;24)</span>
<span class="cp">#define  PIPE_DDI_MODE_SELECT_FDI		(4&lt;&lt;24)</span>
<span class="cp">#define  PIPE_DDI_BPC_8					(0&lt;&lt;20)</span>
<span class="cp">#define  PIPE_DDI_BPC_10				(1&lt;&lt;20)</span>
<span class="cp">#define  PIPE_DDI_BPC_6					(2&lt;&lt;20)</span>
<span class="cp">#define  PIPE_DDI_BPC_12				(3&lt;&lt;20)</span>
<span class="cp">#define  PIPE_DDI_BFI_ENABLE			(1&lt;&lt;4)</span>
<span class="cp">#define  PIPE_DDI_PORT_WIDTH_X1			(0&lt;&lt;1)</span>
<span class="cp">#define  PIPE_DDI_PORT_WIDTH_X2			(1&lt;&lt;1)</span>
<span class="cp">#define  PIPE_DDI_PORT_WIDTH_X4			(3&lt;&lt;1)</span>

<span class="cm">/* DisplayPort Transport Control */</span>
<span class="cp">#define DP_TP_CTL_A			0x64040</span>
<span class="cp">#define DP_TP_CTL_B			0x64140</span>
<span class="cp">#define DP_TP_CTL(port) _PORT(port, \</span>
<span class="cp">					DP_TP_CTL_A, \</span>
<span class="cp">					DP_TP_CTL_B)</span>
<span class="cp">#define  DP_TP_CTL_ENABLE		(1&lt;&lt;31)</span>
<span class="cp">#define  DP_TP_CTL_MODE_SST	(0&lt;&lt;27)</span>
<span class="cp">#define  DP_TP_CTL_MODE_MST	(1&lt;&lt;27)</span>
<span class="cp">#define  DP_TP_CTL_ENHANCED_FRAME_ENABLE	(1&lt;&lt;18)</span>
<span class="cp">#define  DP_TP_CTL_FDI_AUTOTRAIN	(1&lt;&lt;15)</span>
<span class="cp">#define  DP_TP_CTL_LINK_TRAIN_MASK		(7&lt;&lt;8)</span>
<span class="cp">#define  DP_TP_CTL_LINK_TRAIN_PAT1		(0&lt;&lt;8)</span>
<span class="cp">#define  DP_TP_CTL_LINK_TRAIN_PAT2		(1&lt;&lt;8)</span>
<span class="cp">#define  DP_TP_CTL_LINK_TRAIN_NORMAL	(3&lt;&lt;8)</span>

<span class="cm">/* DisplayPort Transport Status */</span>
<span class="cp">#define DP_TP_STATUS_A			0x64044</span>
<span class="cp">#define DP_TP_STATUS_B			0x64144</span>
<span class="cp">#define DP_TP_STATUS(port) _PORT(port, \</span>
<span class="cp">					DP_TP_STATUS_A, \</span>
<span class="cp">					DP_TP_STATUS_B)</span>
<span class="cp">#define  DP_TP_STATUS_AUTOTRAIN_DONE	(1&lt;&lt;12)</span>

<span class="cm">/* DDI Buffer Control */</span>
<span class="cp">#define DDI_BUF_CTL_A				0x64000</span>
<span class="cp">#define DDI_BUF_CTL_B				0x64100</span>
<span class="cp">#define DDI_BUF_CTL(port) _PORT(port, \</span>
<span class="cp">					DDI_BUF_CTL_A, \</span>
<span class="cp">					DDI_BUF_CTL_B)</span>
<span class="cp">#define  DDI_BUF_CTL_ENABLE				(1&lt;&lt;31)</span>
<span class="cp">#define  DDI_BUF_EMP_400MV_0DB_HSW		(0&lt;&lt;24)   </span><span class="cm">/* Sel0 */</span><span class="cp"></span>
<span class="cp">#define  DDI_BUF_EMP_400MV_3_5DB_HSW	(1&lt;&lt;24)   </span><span class="cm">/* Sel1 */</span><span class="cp"></span>
<span class="cp">#define  DDI_BUF_EMP_400MV_6DB_HSW		(2&lt;&lt;24)   </span><span class="cm">/* Sel2 */</span><span class="cp"></span>
<span class="cp">#define  DDI_BUF_EMP_400MV_9_5DB_HSW	(3&lt;&lt;24)   </span><span class="cm">/* Sel3 */</span><span class="cp"></span>
<span class="cp">#define  DDI_BUF_EMP_600MV_0DB_HSW		(4&lt;&lt;24)   </span><span class="cm">/* Sel4 */</span><span class="cp"></span>
<span class="cp">#define  DDI_BUF_EMP_600MV_3_5DB_HSW	(5&lt;&lt;24)   </span><span class="cm">/* Sel5 */</span><span class="cp"></span>
<span class="cp">#define  DDI_BUF_EMP_600MV_6DB_HSW		(6&lt;&lt;24)   </span><span class="cm">/* Sel6 */</span><span class="cp"></span>
<span class="cp">#define  DDI_BUF_EMP_800MV_0DB_HSW		(7&lt;&lt;24)   </span><span class="cm">/* Sel7 */</span><span class="cp"></span>
<span class="cp">#define  DDI_BUF_EMP_800MV_3_5DB_HSW	(8&lt;&lt;24)   </span><span class="cm">/* Sel8 */</span><span class="cp"></span>
<span class="cp">#define  DDI_BUF_EMP_MASK				(0xf&lt;&lt;24)</span>
<span class="cp">#define  DDI_BUF_IS_IDLE				(1&lt;&lt;7)</span>
<span class="cp">#define  DDI_PORT_WIDTH_X1				(0&lt;&lt;1)</span>
<span class="cp">#define  DDI_PORT_WIDTH_X2				(1&lt;&lt;1)</span>
<span class="cp">#define  DDI_PORT_WIDTH_X4				(3&lt;&lt;1)</span>
<span class="cp">#define  DDI_INIT_DISPLAY_DETECTED		(1&lt;&lt;0)</span>

<span class="cm">/* DDI Buffer Translations */</span>
<span class="cp">#define DDI_BUF_TRANS_A				0x64E00</span>
<span class="cp">#define DDI_BUF_TRANS_B				0x64E60</span>
<span class="cp">#define DDI_BUF_TRANS(port) _PORT(port, \</span>
<span class="cp">					DDI_BUF_TRANS_A, \</span>
<span class="cp">					DDI_BUF_TRANS_B)</span>

<span class="cm">/* Sideband Interface (SBI) is programmed indirectly, via</span>
<span class="cm"> * SBI_ADDR, which contains the register offset; and SBI_DATA,</span>
<span class="cm"> * which contains the payload */</span>
<span class="cp">#define SBI_ADDR				0xC6000</span>
<span class="cp">#define SBI_DATA				0xC6004</span>
<span class="cp">#define SBI_CTL_STAT			0xC6008</span>
<span class="cp">#define  SBI_CTL_OP_CRRD		(0x6&lt;&lt;8)</span>
<span class="cp">#define  SBI_CTL_OP_CRWR		(0x7&lt;&lt;8)</span>
<span class="cp">#define  SBI_RESPONSE_FAIL		(0x1&lt;&lt;1)</span>
<span class="cp">#define  SBI_RESPONSE_SUCCESS	(0x0&lt;&lt;1)</span>
<span class="cp">#define  SBI_BUSY				(0x1&lt;&lt;0)</span>
<span class="cp">#define  SBI_READY				(0x0&lt;&lt;0)</span>

<span class="cm">/* SBI offsets */</span>
<span class="cp">#define  SBI_SSCDIVINTPHASE6		0x0600</span>
<span class="cp">#define   SBI_SSCDIVINTPHASE_DIVSEL_MASK	((0x7f)&lt;&lt;1)</span>
<span class="cp">#define   SBI_SSCDIVINTPHASE_DIVSEL(x)		((x)&lt;&lt;1)</span>
<span class="cp">#define   SBI_SSCDIVINTPHASE_INCVAL_MASK	((0x7f)&lt;&lt;8)</span>
<span class="cp">#define   SBI_SSCDIVINTPHASE_INCVAL(x)		((x)&lt;&lt;8)</span>
<span class="cp">#define   SBI_SSCDIVINTPHASE_DIR(x)			((x)&lt;&lt;15)</span>
<span class="cp">#define   SBI_SSCDIVINTPHASE_PROPAGATE		(1&lt;&lt;0)</span>
<span class="cp">#define  SBI_SSCCTL					0x020c</span>
<span class="cp">#define  SBI_SSCCTL6				0x060C</span>
<span class="cp">#define   SBI_SSCCTL_DISABLE		(1&lt;&lt;0)</span>
<span class="cp">#define  SBI_SSCAUXDIV6				0x0610</span>
<span class="cp">#define   SBI_SSCAUXDIV_FINALDIV2SEL(x)		((x)&lt;&lt;4)</span>
<span class="cp">#define  SBI_DBUFF0					0x2a00</span>

<span class="cm">/* LPT PIXCLK_GATE */</span>
<span class="cp">#define PIXCLK_GATE				0xC6020</span>
<span class="cp">#define  PIXCLK_GATE_UNGATE		1&lt;&lt;0</span>
<span class="cp">#define  PIXCLK_GATE_GATE		0&lt;&lt;0</span>

<span class="cm">/* SPLL */</span>
<span class="cp">#define SPLL_CTL				0x46020</span>
<span class="cp">#define  SPLL_PLL_ENABLE		(1&lt;&lt;31)</span>
<span class="cp">#define  SPLL_PLL_SCC			(1&lt;&lt;28)</span>
<span class="cp">#define  SPLL_PLL_NON_SCC		(2&lt;&lt;28)</span>
<span class="cp">#define  SPLL_PLL_FREQ_810MHz	(0&lt;&lt;26)</span>
<span class="cp">#define  SPLL_PLL_FREQ_1350MHz	(1&lt;&lt;26)</span>

<span class="cm">/* WRPLL */</span>
<span class="cp">#define WRPLL_CTL1				0x46040</span>
<span class="cp">#define WRPLL_CTL2				0x46060</span>
<span class="cp">#define  WRPLL_PLL_ENABLE				(1&lt;&lt;31)</span>
<span class="cp">#define  WRPLL_PLL_SELECT_SSC			(0x01&lt;&lt;28)</span>
<span class="cp">#define  WRPLL_PLL_SELECT_NON_SCC		(0x02&lt;&lt;28)</span>
<span class="cp">#define  WRPLL_PLL_SELECT_LCPLL_2700	(0x03&lt;&lt;28)</span>
<span class="cm">/* WRPLL divider programming */</span>
<span class="cp">#define  WRPLL_DIVIDER_REFERENCE(x)		((x)&lt;&lt;0)</span>
<span class="cp">#define  WRPLL_DIVIDER_POST(x)			((x)&lt;&lt;8)</span>
<span class="cp">#define  WRPLL_DIVIDER_FEEDBACK(x)		((x)&lt;&lt;16)</span>

<span class="cm">/* Port clock selection */</span>
<span class="cp">#define PORT_CLK_SEL_A			0x46100</span>
<span class="cp">#define PORT_CLK_SEL_B			0x46104</span>
<span class="cp">#define PORT_CLK_SEL(port) _PORT(port, \</span>
<span class="cp">					PORT_CLK_SEL_A, \</span>
<span class="cp">					PORT_CLK_SEL_B)</span>
<span class="cp">#define  PORT_CLK_SEL_LCPLL_2700	(0&lt;&lt;29)</span>
<span class="cp">#define  PORT_CLK_SEL_LCPLL_1350	(1&lt;&lt;29)</span>
<span class="cp">#define  PORT_CLK_SEL_LCPLL_810		(2&lt;&lt;29)</span>
<span class="cp">#define  PORT_CLK_SEL_SPLL			(3&lt;&lt;29)</span>
<span class="cp">#define  PORT_CLK_SEL_WRPLL1		(4&lt;&lt;29)</span>
<span class="cp">#define  PORT_CLK_SEL_WRPLL2		(5&lt;&lt;29)</span>

<span class="cm">/* Pipe clock selection */</span>
<span class="cp">#define PIPE_CLK_SEL_A			0x46140</span>
<span class="cp">#define PIPE_CLK_SEL_B			0x46144</span>
<span class="cp">#define PIPE_CLK_SEL(pipe) _PIPE(pipe, \</span>
<span class="cp">					PIPE_CLK_SEL_A, \</span>
<span class="cp">					PIPE_CLK_SEL_B)</span>
<span class="cm">/* For each pipe, we need to select the corresponding port clock */</span>
<span class="cp">#define  PIPE_CLK_SEL_DISABLED	(0x0&lt;&lt;29)</span>
<span class="cp">#define  PIPE_CLK_SEL_PORT(x)	((x+1)&lt;&lt;29)</span>

<span class="cm">/* LCPLL Control */</span>
<span class="cp">#define LCPLL_CTL				0x130040</span>
<span class="cp">#define  LCPLL_PLL_DISABLE		(1&lt;&lt;31)</span>
<span class="cp">#define  LCPLL_PLL_LOCK			(1&lt;&lt;30)</span>
<span class="cp">#define  LCPLL_CD_CLOCK_DISABLE	(1&lt;&lt;25)</span>
<span class="cp">#define  LCPLL_CD2X_CLOCK_DISABLE	(1&lt;&lt;23)</span>

<span class="cm">/* Pipe WM_LINETIME - watermark line time */</span>
<span class="cp">#define PIPE_WM_LINETIME_A		0x45270</span>
<span class="cp">#define PIPE_WM_LINETIME_B		0x45274</span>
<span class="cp">#define PIPE_WM_LINETIME(pipe) _PIPE(pipe, \</span>
<span class="cp">					PIPE_WM_LINETIME_A, \</span>
<span class="cp">					PIPE_WM_LINETIME_A)</span>
<span class="cp">#define   PIPE_WM_LINETIME_MASK		(0x1ff)</span>
<span class="cp">#define   PIPE_WM_LINETIME_TIME(x)			((x))</span>
<span class="cp">#define   PIPE_WM_LINETIME_IPS_LINETIME_MASK	(0x1ff&lt;&lt;16)</span>
<span class="cp">#define   PIPE_WM_LINETIME_IPS_LINETIME(x)		((x)&lt;&lt;16)</span>

<span class="cm">/* SFUSE_STRAP */</span>
<span class="cp">#define SFUSE_STRAP				0xc2014</span>
<span class="cp">#define  SFUSE_STRAP_DDIB_DETECTED	(1&lt;&lt;2)</span>
<span class="cp">#define  SFUSE_STRAP_DDIC_DETECTED	(1&lt;&lt;1)</span>
<span class="cp">#define  SFUSE_STRAP_DDID_DETECTED	(1&lt;&lt;0)</span>

<span class="cp">#endif </span><span class="cm">/* _I915_REG_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
