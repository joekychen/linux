<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › gpu › drm › gma500 › psb_intel_reg.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>psb_intel_reg.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2009, Intel Corporation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify it</span>
<span class="cm"> * under the terms and conditions of the GNU General Public License,</span>
<span class="cm"> * version 2, as published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope it will be useful, but WITHOUT</span>
<span class="cm"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<span class="cm"> * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for</span>
<span class="cm"> * more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License along with</span>
<span class="cm"> * this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="cm"> * 51 Franklin St - Fifth Floor, Boston, MA 02110-1301 USA.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __PSB_INTEL_REG_H__</span>
<span class="cp">#define __PSB_INTEL_REG_H__</span>

<span class="cm">/*</span>
<span class="cm"> * GPIO regs</span>
<span class="cm"> */</span>
<span class="cp">#define GPIOA			0x5010</span>
<span class="cp">#define GPIOB			0x5014</span>
<span class="cp">#define GPIOC			0x5018</span>
<span class="cp">#define GPIOD			0x501c</span>
<span class="cp">#define GPIOE			0x5020</span>
<span class="cp">#define GPIOF			0x5024</span>
<span class="cp">#define GPIOG			0x5028</span>
<span class="cp">#define GPIOH			0x502c</span>
<span class="cp"># define GPIO_CLOCK_DIR_MASK		(1 &lt;&lt; 0)</span>
<span class="cp"># define GPIO_CLOCK_DIR_IN		(0 &lt;&lt; 1)</span>
<span class="cp"># define GPIO_CLOCK_DIR_OUT		(1 &lt;&lt; 1)</span>
<span class="cp"># define GPIO_CLOCK_VAL_MASK		(1 &lt;&lt; 2)</span>
<span class="cp"># define GPIO_CLOCK_VAL_OUT		(1 &lt;&lt; 3)</span>
<span class="cp"># define GPIO_CLOCK_VAL_IN		(1 &lt;&lt; 4)</span>
<span class="cp"># define GPIO_CLOCK_PULLUP_DISABLE	(1 &lt;&lt; 5)</span>
<span class="cp"># define GPIO_DATA_DIR_MASK		(1 &lt;&lt; 8)</span>
<span class="cp"># define GPIO_DATA_DIR_IN		(0 &lt;&lt; 9)</span>
<span class="cp"># define GPIO_DATA_DIR_OUT		(1 &lt;&lt; 9)</span>
<span class="cp"># define GPIO_DATA_VAL_MASK		(1 &lt;&lt; 10)</span>
<span class="cp"># define GPIO_DATA_VAL_OUT		(1 &lt;&lt; 11)</span>
<span class="cp"># define GPIO_DATA_VAL_IN		(1 &lt;&lt; 12)</span>
<span class="cp"># define GPIO_DATA_PULLUP_DISABLE	(1 &lt;&lt; 13)</span>

<span class="cp">#define GMBUS0			0x5100 </span><span class="cm">/* clock/port select */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_RATE_100KHZ	(0&lt;&lt;8)</span>
<span class="cp">#define   GMBUS_RATE_50KHZ	(1&lt;&lt;8)</span>
<span class="cp">#define   GMBUS_RATE_400KHZ	(2&lt;&lt;8) </span><span class="cm">/* reserved on Pineview */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_RATE_1MHZ	(3&lt;&lt;8) </span><span class="cm">/* reserved on Pineview */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_HOLD_EXT	(1&lt;&lt;7) </span><span class="cm">/* 300ns hold time, rsvd on Pineview */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_PORT_DISABLED	0</span>
<span class="cp">#define   GMBUS_PORT_SSC	1</span>
<span class="cp">#define   GMBUS_PORT_VGADDC	2</span>
<span class="cp">#define   GMBUS_PORT_PANEL	3</span>
<span class="cp">#define   GMBUS_PORT_DPC	4 </span><span class="cm">/* HDMIC */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_PORT_DPB	5 </span><span class="cm">/* SDVO, HDMIB */</span><span class="cp"></span>
				  <span class="cm">/* 6 reserved */</span>
<span class="cp">#define   GMBUS_PORT_DPD	7 </span><span class="cm">/* HDMID */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_NUM_PORTS       8</span>
<span class="cp">#define GMBUS1			0x5104 </span><span class="cm">/* command/status */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_SW_CLR_INT	(1&lt;&lt;31)</span>
<span class="cp">#define   GMBUS_SW_RDY		(1&lt;&lt;30)</span>
<span class="cp">#define   GMBUS_ENT		(1&lt;&lt;29) </span><span class="cm">/* enable timeout */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_CYCLE_NONE	(0&lt;&lt;25)</span>
<span class="cp">#define   GMBUS_CYCLE_WAIT	(1&lt;&lt;25)</span>
<span class="cp">#define   GMBUS_CYCLE_INDEX	(2&lt;&lt;25)</span>
<span class="cp">#define   GMBUS_CYCLE_STOP	(4&lt;&lt;25)</span>
<span class="cp">#define   GMBUS_BYTE_COUNT_SHIFT 16</span>
<span class="cp">#define   GMBUS_SLAVE_INDEX_SHIFT 8</span>
<span class="cp">#define   GMBUS_SLAVE_ADDR_SHIFT 1</span>
<span class="cp">#define   GMBUS_SLAVE_READ	(1&lt;&lt;0)</span>
<span class="cp">#define   GMBUS_SLAVE_WRITE	(0&lt;&lt;0)</span>
<span class="cp">#define GMBUS2			0x5108 </span><span class="cm">/* status */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_INUSE		(1&lt;&lt;15)</span>
<span class="cp">#define   GMBUS_HW_WAIT_PHASE	(1&lt;&lt;14)</span>
<span class="cp">#define   GMBUS_STALL_TIMEOUT	(1&lt;&lt;13)</span>
<span class="cp">#define   GMBUS_INT		(1&lt;&lt;12)</span>
<span class="cp">#define   GMBUS_HW_RDY		(1&lt;&lt;11)</span>
<span class="cp">#define   GMBUS_SATOER		(1&lt;&lt;10)</span>
<span class="cp">#define   GMBUS_ACTIVE		(1&lt;&lt;9)</span>
<span class="cp">#define GMBUS3			0x510c </span><span class="cm">/* data buffer bytes 3-0 */</span><span class="cp"></span>
<span class="cp">#define GMBUS4			0x5110 </span><span class="cm">/* interrupt mask (Pineview+) */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_SLAVE_TIMEOUT_EN (1&lt;&lt;4)</span>
<span class="cp">#define   GMBUS_NAK_EN		(1&lt;&lt;3)</span>
<span class="cp">#define   GMBUS_IDLE_EN		(1&lt;&lt;2)</span>
<span class="cp">#define   GMBUS_HW_WAIT_EN	(1&lt;&lt;1)</span>
<span class="cp">#define   GMBUS_HW_RDY_EN	(1&lt;&lt;0)</span>
<span class="cp">#define GMBUS5			0x5120 </span><span class="cm">/* byte index */</span><span class="cp"></span>
<span class="cp">#define   GMBUS_2BYTE_INDEX_EN	(1&lt;&lt;31)</span>

<span class="cp">#define BLC_PWM_CTL		0x61254</span>
<span class="cp">#define BLC_PWM_CTL2		0x61250</span>
<span class="cp">#define  PWM_ENABLE		(1 &lt;&lt; 31)</span>
<span class="cp">#define  PWM_LEGACY_MODE	(1 &lt;&lt; 30)</span>
<span class="cp">#define  PWM_PIPE_B		(1 &lt;&lt; 29)</span>
<span class="cp">#define BLC_PWM_CTL_C		0x62254</span>
<span class="cp">#define BLC_PWM_CTL2_C		0x62250</span>
<span class="cp">#define BACKLIGHT_MODULATION_FREQ_SHIFT		(17)</span>
<span class="cm">/*</span>
<span class="cm"> * This is the most significant 15 bits of the number of backlight cycles in a</span>
<span class="cm"> * complete cycle of the modulated backlight control.</span>
<span class="cm"> *</span>
<span class="cm"> * The actual value is this field multiplied by two.</span>
<span class="cm"> */</span>
<span class="cp">#define BACKLIGHT_MODULATION_FREQ_MASK	(0x7fff &lt;&lt; 17)</span>
<span class="cp">#define BLM_LEGACY_MODE			(1 &lt;&lt; 16)</span>
<span class="cm">/*</span>
<span class="cm"> * This is the number of cycles out of the backlight modulation cycle for which</span>
<span class="cm"> * the backlight is on.</span>
<span class="cm"> *</span>
<span class="cm"> * This field must be no greater than the number of cycles in the complete</span>
<span class="cm"> * backlight modulation cycle.</span>
<span class="cm"> */</span>
<span class="cp">#define BACKLIGHT_DUTY_CYCLE_SHIFT	(0)</span>
<span class="cp">#define BACKLIGHT_DUTY_CYCLE_MASK	(0xffff)</span>

<span class="cp">#define I915_GCFGC			0xf0</span>
<span class="cp">#define I915_LOW_FREQUENCY_ENABLE	(1 &lt;&lt; 7)</span>
<span class="cp">#define I915_DISPLAY_CLOCK_190_200_MHZ	(0 &lt;&lt; 4)</span>
<span class="cp">#define I915_DISPLAY_CLOCK_333_MHZ	(4 &lt;&lt; 4)</span>
<span class="cp">#define I915_DISPLAY_CLOCK_MASK		(7 &lt;&lt; 4)</span>

<span class="cp">#define I855_HPLLCC			0xc0</span>
<span class="cp">#define I855_CLOCK_CONTROL_MASK		(3 &lt;&lt; 0)</span>
<span class="cp">#define I855_CLOCK_133_200		(0 &lt;&lt; 0)</span>
<span class="cp">#define I855_CLOCK_100_200		(1 &lt;&lt; 0)</span>
<span class="cp">#define I855_CLOCK_100_133		(2 &lt;&lt; 0)</span>
<span class="cp">#define I855_CLOCK_166_250		(3 &lt;&lt; 0)</span>

<span class="cm">/* I830 CRTC registers */</span>
<span class="cp">#define HTOTAL_A		0x60000</span>
<span class="cp">#define HBLANK_A		0x60004</span>
<span class="cp">#define HSYNC_A			0x60008</span>
<span class="cp">#define VTOTAL_A		0x6000c</span>
<span class="cp">#define VBLANK_A		0x60010</span>
<span class="cp">#define VSYNC_A			0x60014</span>
<span class="cp">#define PIPEASRC		0x6001c</span>
<span class="cp">#define BCLRPAT_A		0x60020</span>
<span class="cp">#define VSYNCSHIFT_A		0x60028</span>

<span class="cp">#define HTOTAL_B		0x61000</span>
<span class="cp">#define HBLANK_B		0x61004</span>
<span class="cp">#define HSYNC_B			0x61008</span>
<span class="cp">#define VTOTAL_B		0x6100c</span>
<span class="cp">#define VBLANK_B		0x61010</span>
<span class="cp">#define VSYNC_B			0x61014</span>
<span class="cp">#define PIPEBSRC		0x6101c</span>
<span class="cp">#define BCLRPAT_B		0x61020</span>
<span class="cp">#define VSYNCSHIFT_B		0x61028</span>

<span class="cp">#define HTOTAL_C		0x62000</span>
<span class="cp">#define HBLANK_C		0x62004</span>
<span class="cp">#define HSYNC_C			0x62008</span>
<span class="cp">#define VTOTAL_C		0x6200c</span>
<span class="cp">#define VBLANK_C		0x62010</span>
<span class="cp">#define VSYNC_C			0x62014</span>
<span class="cp">#define PIPECSRC		0x6201c</span>
<span class="cp">#define BCLRPAT_C		0x62020</span>
<span class="cp">#define VSYNCSHIFT_C		0x62028</span>

<span class="cp">#define PP_STATUS		0x61200</span>
<span class="cp"># define PP_ON				(1 &lt;&lt; 31)</span>
<span class="cm">/*</span>
<span class="cm"> * Indicates that all dependencies of the panel are on:</span>
<span class="cm"> *</span>
<span class="cm"> * - PLL enabled</span>
<span class="cm"> * - pipe enabled</span>
<span class="cm"> * - LVDS/DVOB/DVOC on</span>
<span class="cm"> */</span>
<span class="cp">#define PP_READY			(1 &lt;&lt; 30)</span>
<span class="cp">#define PP_SEQUENCE_NONE		(0 &lt;&lt; 28)</span>
<span class="cp">#define PP_SEQUENCE_ON			(1 &lt;&lt; 28)</span>
<span class="cp">#define PP_SEQUENCE_OFF			(2 &lt;&lt; 28)</span>
<span class="cp">#define PP_SEQUENCE_MASK		0x30000000</span>
<span class="cp">#define PP_CONTROL		0x61204</span>
<span class="cp">#define POWER_TARGET_ON			(1 &lt;&lt; 0)</span>

<span class="cp">#define LVDSPP_ON		0x61208</span>
<span class="cp">#define LVDSPP_OFF		0x6120c</span>
<span class="cp">#define PP_CYCLE		0x61210</span>

<span class="cp">#define PP_ON_DELAYS		0x61208		</span><span class="cm">/* Cedartrail */</span><span class="cp"></span>
<span class="cp">#define PP_OFF_DELAYS		0x6120c		</span><span class="cm">/* Cedartrail */</span><span class="cp"></span>

<span class="cp">#define PFIT_CONTROL		0x61230</span>
<span class="cp">#define PFIT_ENABLE			(1 &lt;&lt; 31)</span>
<span class="cp">#define PFIT_PIPE_MASK			(3 &lt;&lt; 29)</span>
<span class="cp">#define PFIT_PIPE_SHIFT			29</span>
<span class="cp">#define PFIT_SCALING_MODE_PILLARBOX	(1 &lt;&lt; 27)</span>
<span class="cp">#define PFIT_SCALING_MODE_LETTERBOX	(3 &lt;&lt; 26)</span>
<span class="cp">#define VERT_INTERP_DISABLE		(0 &lt;&lt; 10)</span>
<span class="cp">#define VERT_INTERP_BILINEAR		(1 &lt;&lt; 10)</span>
<span class="cp">#define VERT_INTERP_MASK		(3 &lt;&lt; 10)</span>
<span class="cp">#define VERT_AUTO_SCALE			(1 &lt;&lt; 9)</span>
<span class="cp">#define HORIZ_INTERP_DISABLE		(0 &lt;&lt; 6)</span>
<span class="cp">#define HORIZ_INTERP_BILINEAR		(1 &lt;&lt; 6)</span>
<span class="cp">#define HORIZ_INTERP_MASK		(3 &lt;&lt; 6)</span>
<span class="cp">#define HORIZ_AUTO_SCALE		(1 &lt;&lt; 5)</span>
<span class="cp">#define PANEL_8TO6_DITHER_ENABLE	(1 &lt;&lt; 3)</span>

<span class="cp">#define PFIT_PGM_RATIOS		0x61234</span>
<span class="cp">#define PFIT_VERT_SCALE_MASK			0xfff00000</span>
<span class="cp">#define PFIT_HORIZ_SCALE_MASK			0x0000fff0</span>

<span class="cp">#define PFIT_AUTO_RATIOS	0x61238</span>

<span class="cp">#define DPLL_A			0x06014</span>
<span class="cp">#define DPLL_B			0x06018</span>
<span class="cp">#define DPLL_VCO_ENABLE			(1 &lt;&lt; 31)</span>
<span class="cp">#define DPLL_DVO_HIGH_SPEED		(1 &lt;&lt; 30)</span>
<span class="cp">#define DPLL_SYNCLOCK_ENABLE		(1 &lt;&lt; 29)</span>
<span class="cp">#define DPLL_VGA_MODE_DIS		(1 &lt;&lt; 28)</span>
<span class="cp">#define DPLLB_MODE_DAC_SERIAL		(1 &lt;&lt; 26)	</span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define DPLLB_MODE_LVDS			(2 &lt;&lt; 26)	</span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define DPLL_MODE_MASK			(3 &lt;&lt; 26)</span>
<span class="cp">#define DPLL_DAC_SERIAL_P2_CLOCK_DIV_10	(0 &lt;&lt; 24)	</span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define DPLL_DAC_SERIAL_P2_CLOCK_DIV_5	(1 &lt;&lt; 24)	</span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define DPLLB_LVDS_P2_CLOCK_DIV_14	(0 &lt;&lt; 24)	</span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define DPLLB_LVDS_P2_CLOCK_DIV_7	(1 &lt;&lt; 24)	</span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define DPLL_P2_CLOCK_DIV_MASK		0x03000000	</span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define DPLL_FPA0h1_P1_POST_DIV_MASK	0x00ff0000	</span><span class="cm">/* i915 */</span><span class="cp"></span>
<span class="cp">#define DPLL_LOCK			(1 &lt;&lt; 15)	</span><span class="cm">/* CDV */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> *  The i830 generation, in DAC/serial mode, defines p1 as two plus this</span>
<span class="cm"> * bitfield, or just 2 if PLL_P1_DIVIDE_BY_TWO is set.</span>
<span class="cm"> */</span>
<span class="cp"># define DPLL_FPA01_P1_POST_DIV_MASK_I830	0x001f0000</span>
<span class="cm">/*</span>
<span class="cm"> * The i830 generation, in LVDS mode, defines P1 as the bit number set within</span>
<span class="cm"> * this field (only one bit may be set).</span>
<span class="cm"> */</span>
<span class="cp">#define DPLL_FPA01_P1_POST_DIV_MASK_I830_LVDS	0x003f0000</span>
<span class="cp">#define DPLL_FPA01_P1_POST_DIV_SHIFT	16</span>
<span class="cp">#define PLL_P2_DIVIDE_BY_4		(1 &lt;&lt; 23)	</span><span class="cm">/* i830, required</span>
<span class="cm">							 * in DVO non-gang */</span><span class="cp"></span>
<span class="cp"># define PLL_P1_DIVIDE_BY_TWO		(1 &lt;&lt; 21)	</span><span class="cm">/* i830 */</span><span class="cp"></span>
<span class="cp">#define PLL_REF_INPUT_DREFCLK		(0 &lt;&lt; 13)</span>
<span class="cp">#define PLL_REF_INPUT_TVCLKINA		(1 &lt;&lt; 13)	</span><span class="cm">/* i830 */</span><span class="cp"></span>
<span class="cp">#define PLL_REF_INPUT_TVCLKINBC		(2 &lt;&lt; 13)	</span><span class="cm">/* SDVO</span>
<span class="cm">								 * TVCLKIN */</span><span class="cp"></span>
<span class="cp">#define PLLB_REF_INPUT_SPREADSPECTRUMIN	(3 &lt;&lt; 13)</span>
<span class="cp">#define PLL_REF_INPUT_MASK		(3 &lt;&lt; 13)</span>
<span class="cp">#define PLL_LOAD_PULSE_PHASE_SHIFT	9</span>
<span class="cm">/*</span>
<span class="cm"> * Parallel to Serial Load Pulse phase selection.</span>
<span class="cm"> * Selects the phase for the 10X DPLL clock for the PCIe</span>
<span class="cm"> * digital display port. The range is 4 to 13; 10 or more</span>
<span class="cm"> * is just a flip delay. The default is 6</span>
<span class="cm"> */</span>
<span class="cp">#define PLL_LOAD_PULSE_PHASE_MASK	(0xf &lt;&lt; PLL_LOAD_PULSE_PHASE_SHIFT)</span>
<span class="cp">#define DISPLAY_RATE_SELECT_FPA1	(1 &lt;&lt; 8)</span>

<span class="cm">/*</span>
<span class="cm"> * SDVO multiplier for 945G/GM. Not used on 965.</span>
<span class="cm"> *</span>
<span class="cm"> * DPLL_MD_UDI_MULTIPLIER_MASK</span>
<span class="cm"> */</span>
<span class="cp">#define SDVO_MULTIPLIER_MASK		0x000000ff</span>
<span class="cp">#define SDVO_MULTIPLIER_SHIFT_HIRES	4</span>
<span class="cp">#define SDVO_MULTIPLIER_SHIFT_VGA	0</span>

<span class="cm">/*</span>
<span class="cm"> * PLL_MD</span>
<span class="cm"> */</span>
<span class="cm">/* Pipe A SDVO/UDI clock multiplier/divider register for G965. */</span>
<span class="cp">#define DPLL_A_MD		0x0601c</span>
<span class="cm">/* Pipe B SDVO/UDI clock multiplier/divider register for G965. */</span>
<span class="cp">#define DPLL_B_MD		0x06020</span>
<span class="cm">/*</span>
<span class="cm"> * UDI pixel divider, controlling how many pixels are stuffed into a packet.</span>
<span class="cm"> *</span>
<span class="cm"> * Value is pixels minus 1.  Must be set to 1 pixel for SDVO.</span>
<span class="cm"> */</span>
<span class="cp">#define DPLL_MD_UDI_DIVIDER_MASK	0x3f000000</span>
<span class="cp">#define DPLL_MD_UDI_DIVIDER_SHIFT	24</span>
<span class="cm">/* UDI pixel divider for VGA, same as DPLL_MD_UDI_DIVIDER_MASK. */</span>
<span class="cp">#define DPLL_MD_VGA_UDI_DIVIDER_MASK	0x003f0000</span>
<span class="cp">#define DPLL_MD_VGA_UDI_DIVIDER_SHIFT	16</span>
<span class="cm">/*</span>
<span class="cm"> * SDVO/UDI pixel multiplier.</span>
<span class="cm"> *</span>
<span class="cm"> * SDVO requires that the bus clock rate be between 1 and 2 Ghz, and the bus</span>
<span class="cm"> * clock rate is 10 times the DPLL clock.  At low resolution/refresh rate</span>
<span class="cm"> * modes, the bus rate would be below the limits, so SDVO allows for stuffing</span>
<span class="cm"> * dummy bytes in the datastream at an increased clock rate, with both sides of</span>
<span class="cm"> * the link knowing how many bytes are fill.</span>
<span class="cm"> *</span>
<span class="cm"> * So, for a mode with a dotclock of 65Mhz, we would want to double the clock</span>
<span class="cm"> * rate to 130Mhz to get a bus rate of 1.30Ghz.  The DPLL clock rate would be</span>
<span class="cm"> * set to 130Mhz, and the SDVO multiplier set to 2x in this register and</span>
<span class="cm"> * through an SDVO command.</span>
<span class="cm"> *</span>
<span class="cm"> * This register field has values of multiplication factor minus 1, with</span>
<span class="cm"> * a maximum multiplier of 5 for SDVO.</span>
<span class="cm"> */</span>
<span class="cp">#define DPLL_MD_UDI_MULTIPLIER_MASK	0x00003f00</span>
<span class="cp">#define DPLL_MD_UDI_MULTIPLIER_SHIFT	8</span>
<span class="cm">/*</span>
<span class="cm"> * SDVO/UDI pixel multiplier for VGA, same as DPLL_MD_UDI_MULTIPLIER_MASK.</span>
<span class="cm"> * This best be set to the default value (3) or the CRT won&#39;t work. No,</span>
<span class="cm"> * I don&#39;t entirely understand what this does...</span>
<span class="cm"> */</span>
<span class="cp">#define DPLL_MD_VGA_UDI_MULTIPLIER_MASK	0x0000003f</span>
<span class="cp">#define DPLL_MD_VGA_UDI_MULTIPLIER_SHIFT 0</span>

<span class="cp">#define DPLL_TEST		0x606c</span>
<span class="cp">#define DPLLB_TEST_SDVO_DIV_1		(0 &lt;&lt; 22)</span>
<span class="cp">#define DPLLB_TEST_SDVO_DIV_2		(1 &lt;&lt; 22)</span>
<span class="cp">#define DPLLB_TEST_SDVO_DIV_4		(2 &lt;&lt; 22)</span>
<span class="cp">#define DPLLB_TEST_SDVO_DIV_MASK	(3 &lt;&lt; 22)</span>
<span class="cp">#define DPLLB_TEST_N_BYPASS		(1 &lt;&lt; 19)</span>
<span class="cp">#define DPLLB_TEST_M_BYPASS		(1 &lt;&lt; 18)</span>
<span class="cp">#define DPLLB_INPUT_BUFFER_ENABLE	(1 &lt;&lt; 16)</span>
<span class="cp">#define DPLLA_TEST_N_BYPASS		(1 &lt;&lt; 3)</span>
<span class="cp">#define DPLLA_TEST_M_BYPASS		(1 &lt;&lt; 2)</span>
<span class="cp">#define DPLLA_INPUT_BUFFER_ENABLE	(1 &lt;&lt; 0)</span>

<span class="cp">#define ADPA			0x61100</span>
<span class="cp">#define ADPA_DAC_ENABLE			(1 &lt;&lt; 31)</span>
<span class="cp">#define ADPA_DAC_DISABLE		0</span>
<span class="cp">#define ADPA_PIPE_SELECT_MASK		(1 &lt;&lt; 30)</span>
<span class="cp">#define ADPA_PIPE_A_SELECT		0</span>
<span class="cp">#define ADPA_PIPE_B_SELECT		(1 &lt;&lt; 30)</span>
<span class="cp">#define ADPA_USE_VGA_HVPOLARITY		(1 &lt;&lt; 15)</span>
<span class="cp">#define ADPA_SETS_HVPOLARITY		0</span>
<span class="cp">#define ADPA_VSYNC_CNTL_DISABLE		(1 &lt;&lt; 11)</span>
<span class="cp">#define ADPA_VSYNC_CNTL_ENABLE		0</span>
<span class="cp">#define ADPA_HSYNC_CNTL_DISABLE		(1 &lt;&lt; 10)</span>
<span class="cp">#define ADPA_HSYNC_CNTL_ENABLE		0</span>
<span class="cp">#define ADPA_VSYNC_ACTIVE_HIGH		(1 &lt;&lt; 4)</span>
<span class="cp">#define ADPA_VSYNC_ACTIVE_LOW		0</span>
<span class="cp">#define ADPA_HSYNC_ACTIVE_HIGH		(1 &lt;&lt; 3)</span>
<span class="cp">#define ADPA_HSYNC_ACTIVE_LOW		0</span>

<span class="cp">#define FPA0			0x06040</span>
<span class="cp">#define FPA1			0x06044</span>
<span class="cp">#define FPB0			0x06048</span>
<span class="cp">#define FPB1			0x0604c</span>
<span class="cp">#define FP_N_DIV_MASK			0x003f0000</span>
<span class="cp">#define FP_N_DIV_SHIFT			16</span>
<span class="cp">#define FP_M1_DIV_MASK			0x00003f00</span>
<span class="cp">#define FP_M1_DIV_SHIFT			8</span>
<span class="cp">#define FP_M2_DIV_MASK			0x0000003f</span>
<span class="cp">#define FP_M2_DIV_SHIFT			0</span>

<span class="cp">#define PORT_HOTPLUG_EN		0x61110</span>
<span class="cp">#define HDMIB_HOTPLUG_INT_EN		(1 &lt;&lt; 29)</span>
<span class="cp">#define HDMIC_HOTPLUG_INT_EN		(1 &lt;&lt; 28)</span>
<span class="cp">#define HDMID_HOTPLUG_INT_EN		(1 &lt;&lt; 27)</span>
<span class="cp">#define SDVOB_HOTPLUG_INT_EN		(1 &lt;&lt; 26)</span>
<span class="cp">#define SDVOC_HOTPLUG_INT_EN		(1 &lt;&lt; 25)</span>
<span class="cp">#define TV_HOTPLUG_INT_EN		(1 &lt;&lt; 18)</span>
<span class="cp">#define CRT_HOTPLUG_INT_EN		(1 &lt;&lt; 9)</span>
<span class="cp">#define CRT_HOTPLUG_FORCE_DETECT	(1 &lt;&lt; 3)</span>
<span class="cm">/* CDV.. */</span>
<span class="cp">#define CRT_HOTPLUG_ACTIVATION_PERIOD_64	(1 &lt;&lt; 8)</span>
<span class="cp">#define CRT_HOTPLUG_DAC_ON_TIME_2M		(0 &lt;&lt; 7)</span>
<span class="cp">#define CRT_HOTPLUG_DAC_ON_TIME_4M		(1 &lt;&lt; 7)</span>
<span class="cp">#define CRT_HOTPLUG_VOLTAGE_COMPARE_40		(0 &lt;&lt; 5)</span>
<span class="cp">#define CRT_HOTPLUG_VOLTAGE_COMPARE_50		(1 &lt;&lt; 5)</span>
<span class="cp">#define CRT_HOTPLUG_VOLTAGE_COMPARE_60		(2 &lt;&lt; 5)</span>
<span class="cp">#define CRT_HOTPLUG_VOLTAGE_COMPARE_70		(3 &lt;&lt; 5)</span>
<span class="cp">#define CRT_HOTPLUG_VOLTAGE_COMPARE_MASK	(3 &lt;&lt; 5)</span>
<span class="cp">#define CRT_HOTPLUG_DETECT_DELAY_1G		(0 &lt;&lt; 4)</span>
<span class="cp">#define CRT_HOTPLUG_DETECT_DELAY_2G		(1 &lt;&lt; 4)</span>
<span class="cp">#define CRT_HOTPLUG_DETECT_VOLTAGE_325MV	(0 &lt;&lt; 2)</span>
<span class="cp">#define CRT_HOTPLUG_DETECT_VOLTAGE_475MV	(1 &lt;&lt; 2)</span>
<span class="cp">#define CRT_HOTPLUG_DETECT_MASK			0x000000F8</span>

<span class="cp">#define PORT_HOTPLUG_STAT	0x61114</span>
<span class="cp">#define CRT_HOTPLUG_INT_STATUS		(1 &lt;&lt; 11)</span>
<span class="cp">#define TV_HOTPLUG_INT_STATUS		(1 &lt;&lt; 10)</span>
<span class="cp">#define CRT_HOTPLUG_MONITOR_MASK	(3 &lt;&lt; 8)</span>
<span class="cp">#define CRT_HOTPLUG_MONITOR_COLOR	(3 &lt;&lt; 8)</span>
<span class="cp">#define CRT_HOTPLUG_MONITOR_MONO	(2 &lt;&lt; 8)</span>
<span class="cp">#define CRT_HOTPLUG_MONITOR_NONE	(0 &lt;&lt; 8)</span>
<span class="cp">#define SDVOC_HOTPLUG_INT_STATUS	(1 &lt;&lt; 7)</span>
<span class="cp">#define SDVOB_HOTPLUG_INT_STATUS	(1 &lt;&lt; 6)</span>

<span class="cp">#define SDVOB			0x61140</span>
<span class="cp">#define SDVOC			0x61160</span>
<span class="cp">#define SDVO_ENABLE			(1 &lt;&lt; 31)</span>
<span class="cp">#define SDVO_PIPE_B_SELECT		(1 &lt;&lt; 30)</span>
<span class="cp">#define SDVO_STALL_SELECT		(1 &lt;&lt; 29)</span>
<span class="cp">#define SDVO_INTERRUPT_ENABLE		(1 &lt;&lt; 26)</span>
<span class="cp">#define SDVO_COLOR_RANGE_16_235		(1 &lt;&lt; 8)</span>
<span class="cp">#define SDVO_AUDIO_ENABLE		(1 &lt;&lt; 6)</span>

<span class="cm">/**</span>
<span class="cm"> * 915G/GM SDVO pixel multiplier.</span>
<span class="cm"> *</span>
<span class="cm"> * Programmed value is multiplier - 1, up to 5x.</span>
<span class="cm"> *</span>
<span class="cm"> * DPLL_MD_UDI_MULTIPLIER_MASK</span>
<span class="cm"> */</span>
<span class="cp">#define SDVO_PORT_MULTIPLY_MASK		(7 &lt;&lt; 23)</span>
<span class="cp">#define SDVO_PORT_MULTIPLY_SHIFT	23</span>
<span class="cp">#define SDVO_PHASE_SELECT_MASK		(15 &lt;&lt; 19)</span>
<span class="cp">#define SDVO_PHASE_SELECT_DEFAULT	(6 &lt;&lt; 19)</span>
<span class="cp">#define SDVO_CLOCK_OUTPUT_INVERT	(1 &lt;&lt; 18)</span>
<span class="cp">#define SDVOC_GANG_MODE			(1 &lt;&lt; 16)</span>
<span class="cp">#define SDVO_BORDER_ENABLE		(1 &lt;&lt; 7)</span>
<span class="cp">#define SDVOB_PCIE_CONCURRENCY		(1 &lt;&lt; 3)</span>
<span class="cp">#define SDVO_DETECTED			(1 &lt;&lt; 2)</span>
<span class="cm">/* Bits to be preserved when writing */</span>
<span class="cp">#define SDVOB_PRESERVE_MASK		((1 &lt;&lt; 17) | (1 &lt;&lt; 16) | (1 &lt;&lt; 14))</span>
<span class="cp">#define SDVOC_PRESERVE_MASK		(1 &lt;&lt; 17)</span>

<span class="cm">/*</span>
<span class="cm"> * This register controls the LVDS output enable, pipe selection, and data</span>
<span class="cm"> * format selection.</span>
<span class="cm"> *</span>
<span class="cm"> * All of the clock/data pairs are force powered down by power sequencing.</span>
<span class="cm"> */</span>
<span class="cp">#define LVDS			0x61180</span>
<span class="cm">/*</span>
<span class="cm"> * Enables the LVDS port.  This bit must be set before DPLLs are enabled, as</span>
<span class="cm"> * the DPLL semantics change when the LVDS is assigned to that pipe.</span>
<span class="cm"> */</span>
<span class="cp">#define LVDS_PORT_EN			(1 &lt;&lt; 31)</span>
<span class="cm">/* Selects pipe B for LVDS data.  Must be set on pre-965. */</span>
<span class="cp">#define LVDS_PIPEB_SELECT		(1 &lt;&lt; 30)</span>

<span class="cm">/* Turns on border drawing to allow centered display. */</span>
<span class="cp">#define LVDS_BORDER_EN			(1 &lt;&lt; 15)</span>

<span class="cm">/*</span>
<span class="cm"> * Enables the A0-A2 data pairs and CLKA, containing 18 bits of color data per</span>
<span class="cm"> * pixel.</span>
<span class="cm"> */</span>
<span class="cp">#define LVDS_A0A2_CLKA_POWER_MASK	(3 &lt;&lt; 8)</span>
<span class="cp">#define LVDS_A0A2_CLKA_POWER_DOWN	(0 &lt;&lt; 8)</span>
<span class="cp">#define LVDS_A0A2_CLKA_POWER_UP		(3 &lt;&lt; 8)</span>
<span class="cm">/*</span>
<span class="cm"> * Controls the A3 data pair, which contains the additional LSBs for 24 bit</span>
<span class="cm"> * mode.  Only enabled if LVDS_A0A2_CLKA_POWER_UP also indicates it should be</span>
<span class="cm"> * on.</span>
<span class="cm"> */</span>
<span class="cp">#define LVDS_A3_POWER_MASK		(3 &lt;&lt; 6)</span>
<span class="cp">#define LVDS_A3_POWER_DOWN		(0 &lt;&lt; 6)</span>
<span class="cp">#define LVDS_A3_POWER_UP		(3 &lt;&lt; 6)</span>
<span class="cm">/*</span>
<span class="cm"> * Controls the CLKB pair.  This should only be set when LVDS_B0B3_POWER_UP</span>
<span class="cm"> * is set.</span>
<span class="cm"> */</span>
<span class="cp">#define LVDS_CLKB_POWER_MASK		(3 &lt;&lt; 4)</span>
<span class="cp">#define LVDS_CLKB_POWER_DOWN		(0 &lt;&lt; 4)</span>
<span class="cp">#define LVDS_CLKB_POWER_UP		(3 &lt;&lt; 4)</span>
<span class="cm">/*</span>
<span class="cm"> * Controls the B0-B3 data pairs.  This must be set to match the DPLL p2</span>
<span class="cm"> * setting for whether we are in dual-channel mode.  The B3 pair will</span>
<span class="cm"> * additionally only be powered up when LVDS_A3_POWER_UP is set.</span>
<span class="cm"> */</span>
<span class="cp">#define LVDS_B0B3_POWER_MASK		(3 &lt;&lt; 2)</span>
<span class="cp">#define LVDS_B0B3_POWER_DOWN		(0 &lt;&lt; 2)</span>
<span class="cp">#define LVDS_B0B3_POWER_UP		(3 &lt;&lt; 2)</span>

<span class="cp">#define PIPEACONF		0x70008</span>
<span class="cp">#define PIPEACONF_ENABLE		(1 &lt;&lt; 31)</span>
<span class="cp">#define PIPEACONF_DISABLE		0</span>
<span class="cp">#define PIPEACONF_DOUBLE_WIDE		(1 &lt;&lt; 30)</span>
<span class="cp">#define PIPECONF_ACTIVE			(1 &lt;&lt; 30)</span>
<span class="cp">#define I965_PIPECONF_ACTIVE		(1 &lt;&lt; 30)</span>
<span class="cp">#define PIPECONF_DSIPLL_LOCK		(1 &lt;&lt; 29)</span>
<span class="cp">#define PIPEACONF_SINGLE_WIDE		0</span>
<span class="cp">#define PIPEACONF_PIPE_UNLOCKED		0</span>
<span class="cp">#define PIPEACONF_DSR			(1 &lt;&lt; 26)</span>
<span class="cp">#define PIPEACONF_PIPE_LOCKED		(1 &lt;&lt; 25)</span>
<span class="cp">#define PIPEACONF_PALETTE		0</span>
<span class="cp">#define PIPECONF_FORCE_BORDER		(1 &lt;&lt; 25)</span>
<span class="cp">#define PIPEACONF_GAMMA			(1 &lt;&lt; 24)</span>
<span class="cp">#define PIPECONF_PROGRESSIVE		(0 &lt;&lt; 21)</span>
<span class="cp">#define PIPECONF_INTERLACE_W_FIELD_INDICATION	(6 &lt;&lt; 21)</span>
<span class="cp">#define PIPECONF_INTERLACE_FIELD_0_ONLY		(7 &lt;&lt; 21)</span>
<span class="cp">#define PIPECONF_PLANE_OFF		(1 &lt;&lt; 19)</span>
<span class="cp">#define PIPECONF_CURSOR_OFF		(1 &lt;&lt; 18)</span>

<span class="cp">#define PIPEBCONF		0x71008</span>
<span class="cp">#define PIPEBCONF_ENABLE		(1 &lt;&lt; 31)</span>
<span class="cp">#define PIPEBCONF_DISABLE		0</span>
<span class="cp">#define PIPEBCONF_DOUBLE_WIDE		(1 &lt;&lt; 30)</span>
<span class="cp">#define PIPEBCONF_DISABLE		0</span>
<span class="cp">#define PIPEBCONF_GAMMA			(1 &lt;&lt; 24)</span>
<span class="cp">#define PIPEBCONF_PALETTE		0</span>

<span class="cp">#define PIPECCONF		0x72008</span>

<span class="cp">#define PIPEBGCMAXRED		0x71010</span>
<span class="cp">#define PIPEBGCMAXGREEN		0x71014</span>
<span class="cp">#define PIPEBGCMAXBLUE		0x71018</span>

<span class="cp">#define PIPEASTAT		0x70024</span>
<span class="cp">#define PIPEBSTAT		0x71024</span>
<span class="cp">#define PIPECSTAT		0x72024</span>
<span class="cp">#define PIPE_VBLANK_INTERRUPT_STATUS		(1UL &lt;&lt; 1)</span>
<span class="cp">#define PIPE_START_VBLANK_INTERRUPT_STATUS	(1UL &lt;&lt; 2)</span>
<span class="cp">#define PIPE_VBLANK_CLEAR			(1 &lt;&lt; 1)</span>
<span class="cp">#define PIPE_VBLANK_STATUS			(1 &lt;&lt; 1)</span>
<span class="cp">#define PIPE_TE_STATUS				(1UL &lt;&lt; 6)</span>
<span class="cp">#define PIPE_DPST_EVENT_STATUS			(1UL &lt;&lt; 7)</span>
<span class="cp">#define PIPE_VSYNC_CLEAR			(1UL &lt;&lt; 9)</span>
<span class="cp">#define PIPE_VSYNC_STATUS			(1UL &lt;&lt; 9)</span>
<span class="cp">#define PIPE_HDMI_AUDIO_UNDERRUN_STATUS		(1UL &lt;&lt; 10)</span>
<span class="cp">#define PIPE_HDMI_AUDIO_BUFFER_DONE_STATUS	(1UL &lt;&lt; 11)</span>
<span class="cp">#define PIPE_VBLANK_INTERRUPT_ENABLE		(1UL &lt;&lt; 17)</span>
<span class="cp">#define PIPE_START_VBLANK_INTERRUPT_ENABLE	(1UL &lt;&lt; 18)</span>
<span class="cp">#define PIPE_TE_ENABLE				(1UL &lt;&lt; 22)</span>
<span class="cp">#define PIPE_LEGACY_BLC_EVENT_ENABLE		(1UL &lt;&lt; 22)</span>
<span class="cp">#define PIPE_DPST_EVENT_ENABLE			(1UL &lt;&lt; 23)</span>
<span class="cp">#define PIPE_VSYNC_ENABL			(1UL &lt;&lt; 25)</span>
<span class="cp">#define PIPE_HDMI_AUDIO_UNDERRUN		(1UL &lt;&lt; 26)</span>
<span class="cp">#define PIPE_HDMI_AUDIO_BUFFER_DONE		(1UL &lt;&lt; 27)</span>
<span class="cp">#define PIPE_FIFO_UNDERRUN			(1UL &lt;&lt; 31)</span>
<span class="cp">#define PIPE_HDMI_AUDIO_INT_MASK		(PIPE_HDMI_AUDIO_UNDERRUN | \</span>
<span class="cp">						PIPE_HDMI_AUDIO_BUFFER_DONE)</span>
<span class="cp">#define PIPE_EVENT_MASK ((1 &lt;&lt; 29)|(1 &lt;&lt; 28)|(1 &lt;&lt; 27)|(1 &lt;&lt; 26)|(1 &lt;&lt; 24)|(1 &lt;&lt; 23)|(1 &lt;&lt; 22)|(1 &lt;&lt; 21)|(1 &lt;&lt; 20)|(1 &lt;&lt; 16))</span>
<span class="cp">#define PIPE_VBLANK_MASK ((1 &lt;&lt; 25)|(1 &lt;&lt; 24)|(1 &lt;&lt; 18)|(1 &lt;&lt; 17))</span>
<span class="cp">#define HISTOGRAM_INT_CONTROL		0x61268</span>
<span class="cp">#define HISTOGRAM_BIN_DATA		0X61264</span>
<span class="cp">#define HISTOGRAM_LOGIC_CONTROL		0x61260</span>
<span class="cp">#define PWM_CONTROL_LOGIC		0x61250</span>
<span class="cp">#define PIPE_HOTPLUG_INTERRUPT_STATUS		(1UL &lt;&lt; 10)</span>
<span class="cp">#define HISTOGRAM_INTERRUPT_ENABLE		(1UL &lt;&lt; 31)</span>
<span class="cp">#define HISTOGRAM_LOGIC_ENABLE			(1UL &lt;&lt; 31)</span>
<span class="cp">#define PWM_LOGIC_ENABLE			(1UL &lt;&lt; 31)</span>
<span class="cp">#define PWM_PHASEIN_ENABLE			(1UL &lt;&lt; 25)</span>
<span class="cp">#define PWM_PHASEIN_INT_ENABLE			(1UL &lt;&lt; 24)</span>
<span class="cp">#define PWM_PHASEIN_VB_COUNT			0x00001f00</span>
<span class="cp">#define PWM_PHASEIN_INC				0x0000001f</span>
<span class="cp">#define HISTOGRAM_INT_CTRL_CLEAR		(1UL &lt;&lt; 30)</span>
<span class="cp">#define DPST_YUV_LUMA_MODE			0</span>

<span class="k">struct</span> <span class="n">dpst_ie_histogram_control</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">data</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="kt">uint32_t</span> <span class="n">bin_reg_index</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">reserved</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">bin_reg_func_select</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">sync_to_phase_in</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">alt_enhancement_mode</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">reserved1</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">sync_to_phase_in_count</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">histogram_mode_select</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">reserved2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">ie_pipe_assignment</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">ie_mode_table_enabled</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">ie_histogram_enable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="p">};</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">dpst_guardband</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">data</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="kt">uint32_t</span> <span class="n">guardband</span><span class="o">:</span><span class="mi">22</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">guardband_interrupt_delay</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">interrupt_status</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="kt">uint32_t</span> <span class="n">interrupt_enable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="p">};</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="cp">#define PIPEAFRAMEHIGH		0x70040</span>
<span class="cp">#define PIPEAFRAMEPIXEL		0x70044</span>
<span class="cp">#define PIPEBFRAMEHIGH		0x71040</span>
<span class="cp">#define PIPEBFRAMEPIXEL		0x71044</span>
<span class="cp">#define PIPECFRAMEHIGH		0x72040</span>
<span class="cp">#define PIPECFRAMEPIXEL		0x72044</span>
<span class="cp">#define PIPE_FRAME_HIGH_MASK	0x0000ffff</span>
<span class="cp">#define PIPE_FRAME_HIGH_SHIFT	0</span>
<span class="cp">#define PIPE_FRAME_LOW_MASK	0xff000000</span>
<span class="cp">#define PIPE_FRAME_LOW_SHIFT	24</span>
<span class="cp">#define PIPE_PIXEL_MASK		0x00ffffff</span>
<span class="cp">#define PIPE_PIXEL_SHIFT	0</span>

<span class="cp">#define FW_BLC_SELF		0x20e0 </span>
<span class="cp">#define FW_BLC_SELF_EN          (1&lt;&lt;15)</span>

<span class="cp">#define DSPARB			0x70030</span>
<span class="cp">#define DSPFW1			0x70034</span>
<span class="cp">#define DSP_FIFO_SR_WM_MASK		0xFF800000</span>
<span class="cp">#define DSP_FIFO_SR_WM_SHIFT		23</span>
<span class="cp">#define CURSOR_B_FIFO_WM_MASK		0x003F0000</span>
<span class="cp">#define CURSOR_B_FIFO_WM_SHIFT		16</span>
<span class="cp">#define DSPFW2			0x70038</span>
<span class="cp">#define CURSOR_A_FIFO_WM_MASK		0x3F00</span>
<span class="cp">#define CURSOR_A_FIFO_WM_SHIFT		8</span>
<span class="cp">#define DSP_PLANE_C_FIFO_WM_MASK	0x7F</span>
<span class="cp">#define DSP_PLANE_C_FIFO_WM_SHIFT	0</span>
<span class="cp">#define DSPFW3			0x7003c</span>
<span class="cp">#define DSPFW4			0x70050</span>
<span class="cp">#define DSPFW5			0x70054</span>
<span class="cp">#define DSP_PLANE_B_FIFO_WM1_SHIFT	24</span>
<span class="cp">#define DSP_PLANE_A_FIFO_WM1_SHIFT	16</span>
<span class="cp">#define CURSOR_B_FIFO_WM1_SHIFT		8</span>
<span class="cp">#define CURSOR_FIFO_SR_WM1_SHIFT	0</span>
<span class="cp">#define DSPFW6			0x70058</span>
<span class="cp">#define DSPCHICKENBIT		0x70400</span>
<span class="cp">#define DSPACNTR		0x70180</span>
<span class="cp">#define DSPBCNTR		0x71180</span>
<span class="cp">#define DSPCCNTR		0x72180</span>
<span class="cp">#define DISPLAY_PLANE_ENABLE			(1 &lt;&lt; 31)</span>
<span class="cp">#define DISPLAY_PLANE_DISABLE			0</span>
<span class="cp">#define DISPPLANE_GAMMA_ENABLE			(1 &lt;&lt; 30)</span>
<span class="cp">#define DISPPLANE_GAMMA_DISABLE			0</span>
<span class="cp">#define DISPPLANE_PIXFORMAT_MASK		(0xf &lt;&lt; 26)</span>
<span class="cp">#define DISPPLANE_8BPP				(0x2 &lt;&lt; 26)</span>
<span class="cp">#define DISPPLANE_15_16BPP			(0x4 &lt;&lt; 26)</span>
<span class="cp">#define DISPPLANE_16BPP				(0x5 &lt;&lt; 26)</span>
<span class="cp">#define DISPPLANE_32BPP_NO_ALPHA		(0x6 &lt;&lt; 26)</span>
<span class="cp">#define DISPPLANE_32BPP				(0x7 &lt;&lt; 26)</span>
<span class="cp">#define DISPPLANE_STEREO_ENABLE			(1 &lt;&lt; 25)</span>
<span class="cp">#define DISPPLANE_STEREO_DISABLE		0</span>
<span class="cp">#define DISPPLANE_SEL_PIPE_MASK			(1 &lt;&lt; 24)</span>
<span class="cp">#define DISPPLANE_SEL_PIPE_POS			24</span>
<span class="cp">#define DISPPLANE_SEL_PIPE_A			0</span>
<span class="cp">#define DISPPLANE_SEL_PIPE_B			(1 &lt;&lt; 24)</span>
<span class="cp">#define DISPPLANE_SRC_KEY_ENABLE		(1 &lt;&lt; 22)</span>
<span class="cp">#define DISPPLANE_SRC_KEY_DISABLE		0</span>
<span class="cp">#define DISPPLANE_LINE_DOUBLE			(1 &lt;&lt; 20)</span>
<span class="cp">#define DISPPLANE_NO_LINE_DOUBLE		0</span>
<span class="cp">#define DISPPLANE_STEREO_POLARITY_FIRST		0</span>
<span class="cp">#define DISPPLANE_STEREO_POLARITY_SECOND	(1 &lt;&lt; 18)</span>
<span class="cm">/* plane B only */</span>
<span class="cp">#define DISPPLANE_ALPHA_TRANS_ENABLE		(1 &lt;&lt; 15)</span>
<span class="cp">#define DISPPLANE_ALPHA_TRANS_DISABLE		0</span>
<span class="cp">#define DISPPLANE_SPRITE_ABOVE_DISPLAYA		0</span>
<span class="cp">#define DISPPLANE_SPRITE_ABOVE_OVERLAY		(1)</span>
<span class="cp">#define DISPPLANE_BOTTOM			(4)</span>

<span class="cp">#define DSPABASE		0x70184</span>
<span class="cp">#define DSPALINOFF		0x70184</span>
<span class="cp">#define DSPASTRIDE		0x70188</span>

<span class="cp">#define DSPBBASE		0x71184</span>
<span class="cp">#define DSPBLINOFF		0X71184</span>
<span class="cp">#define DSPBADDR		DSPBBASE</span>
<span class="cp">#define DSPBSTRIDE		0x71188</span>

<span class="cp">#define DSPCBASE		0x72184</span>
<span class="cp">#define DSPCLINOFF		0x72184</span>
<span class="cp">#define DSPCSTRIDE		0x72188</span>

<span class="cp">#define DSPAKEYVAL		0x70194</span>
<span class="cp">#define DSPAKEYMASK		0x70198</span>

<span class="cp">#define DSPAPOS			0x7018C	</span><span class="cm">/* reserved */</span><span class="cp"></span>
<span class="cp">#define DSPASIZE		0x70190</span>
<span class="cp">#define DSPBPOS			0x7118C</span>
<span class="cp">#define DSPBSIZE		0x71190</span>
<span class="cp">#define DSPCPOS			0x7218C</span>
<span class="cp">#define DSPCSIZE		0x72190</span>

<span class="cp">#define DSPASURF		0x7019C</span>
<span class="cp">#define DSPATILEOFF		0x701A4</span>

<span class="cp">#define DSPBSURF		0x7119C</span>
<span class="cp">#define DSPBTILEOFF		0x711A4</span>

<span class="cp">#define DSPCSURF		0x7219C</span>
<span class="cp">#define DSPCTILEOFF		0x721A4</span>
<span class="cp">#define DSPCKEYMAXVAL		0x721A0</span>
<span class="cp">#define DSPCKEYMINVAL		0x72194</span>
<span class="cp">#define DSPCKEYMSK		0x72198</span>

<span class="cp">#define VGACNTRL		0x71400</span>
<span class="cp">#define VGA_DISP_DISABLE		(1 &lt;&lt; 31)</span>
<span class="cp">#define VGA_2X_MODE			(1 &lt;&lt; 30)</span>
<span class="cp">#define VGA_PIPE_B_SELECT		(1 &lt;&lt; 29)</span>

<span class="cm">/*</span>
<span class="cm"> * Overlay registers</span>
<span class="cm"> */</span>
<span class="cp">#define OV_C_OFFSET		0x08000</span>
<span class="cp">#define OV_OVADD		0x30000</span>
<span class="cp">#define OV_DOVASTA		0x30008</span>
<span class="cp"># define OV_PIPE_SELECT			((1 &lt;&lt; 6)|(1 &lt;&lt; 7))</span>
<span class="cp"># define OV_PIPE_SELECT_POS		6</span>
<span class="cp"># define OV_PIPE_A			0</span>
<span class="cp"># define OV_PIPE_C			1</span>
<span class="cp">#define OV_OGAMC5		0x30010</span>
<span class="cp">#define OV_OGAMC4		0x30014</span>
<span class="cp">#define OV_OGAMC3		0x30018</span>
<span class="cp">#define OV_OGAMC2		0x3001C</span>
<span class="cp">#define OV_OGAMC1		0x30020</span>
<span class="cp">#define OV_OGAMC0		0x30024</span>
<span class="cp">#define OVC_OVADD		0x38000</span>
<span class="cp">#define OVC_DOVCSTA		0x38008</span>
<span class="cp">#define OVC_OGAMC5		0x38010</span>
<span class="cp">#define OVC_OGAMC4		0x38014</span>
<span class="cp">#define OVC_OGAMC3		0x38018</span>
<span class="cp">#define OVC_OGAMC2		0x3801C</span>
<span class="cp">#define OVC_OGAMC1		0x38020</span>
<span class="cp">#define OVC_OGAMC0		0x38024</span>

<span class="cm">/*</span>
<span class="cm"> * Some BIOS scratch area registers.  The 845 (and 830?) store the amount</span>
<span class="cm"> * of video memory available to the BIOS in SWF1.</span>
<span class="cm"> */</span>
<span class="cp">#define SWF0			0x71410</span>
<span class="cp">#define SWF1			0x71414</span>
<span class="cp">#define SWF2			0x71418</span>
<span class="cp">#define SWF3			0x7141c</span>
<span class="cp">#define SWF4			0x71420</span>
<span class="cp">#define SWF5			0x71424</span>
<span class="cp">#define SWF6			0x71428</span>

<span class="cm">/*</span>
<span class="cm"> * 855 scratch registers.</span>
<span class="cm"> */</span>
<span class="cp">#define SWF00			0x70410</span>
<span class="cp">#define SWF01			0x70414</span>
<span class="cp">#define SWF02			0x70418</span>
<span class="cp">#define SWF03			0x7041c</span>
<span class="cp">#define SWF04			0x70420</span>
<span class="cp">#define SWF05			0x70424</span>
<span class="cp">#define SWF06			0x70428</span>

<span class="cp">#define SWF10			SWF0</span>
<span class="cp">#define SWF11			SWF1</span>
<span class="cp">#define SWF12			SWF2</span>
<span class="cp">#define SWF13			SWF3</span>
<span class="cp">#define SWF14			SWF4</span>
<span class="cp">#define SWF15			SWF5</span>
<span class="cp">#define SWF16			SWF6</span>

<span class="cp">#define SWF30			0x72414</span>
<span class="cp">#define SWF31			0x72418</span>
<span class="cp">#define SWF32			0x7241c</span>


<span class="cm">/*</span>
<span class="cm"> * Palette registers</span>
<span class="cm"> */</span>
<span class="cp">#define PALETTE_A		0x0a000</span>
<span class="cp">#define PALETTE_B		0x0a800</span>
<span class="cp">#define PALETTE_C		0x0ac00</span>

<span class="cm">/* Cursor A &amp; B regs */</span>
<span class="cp">#define CURACNTR		0x70080</span>
<span class="cp">#define CURSOR_MODE_DISABLE		0x00</span>
<span class="cp">#define CURSOR_MODE_64_32B_AX		0x07</span>
<span class="cp">#define CURSOR_MODE_64_ARGB_AX		((1 &lt;&lt; 5) | CURSOR_MODE_64_32B_AX)</span>
<span class="cp">#define MCURSOR_GAMMA_ENABLE		(1 &lt;&lt; 26)</span>
<span class="cp">#define CURABASE		0x70084</span>
<span class="cp">#define CURAPOS			0x70088</span>
<span class="cp">#define CURSOR_POS_MASK			0x007FF</span>
<span class="cp">#define CURSOR_POS_SIGN			0x8000</span>
<span class="cp">#define CURSOR_X_SHIFT			0</span>
<span class="cp">#define CURSOR_Y_SHIFT			16</span>
<span class="cp">#define CURBCNTR		0x700c0</span>
<span class="cp">#define CURBBASE		0x700c4</span>
<span class="cp">#define CURBPOS			0x700c8</span>
<span class="cp">#define CURCCNTR		0x700e0</span>
<span class="cp">#define CURCBASE		0x700e4</span>
<span class="cp">#define CURCPOS			0x700e8</span>

<span class="cm">/*</span>
<span class="cm"> * Interrupt Registers</span>
<span class="cm"> */</span>
<span class="cp">#define IER			0x020a0</span>
<span class="cp">#define IIR			0x020a4</span>
<span class="cp">#define IMR			0x020a8</span>
<span class="cp">#define ISR			0x020ac</span>

<span class="cm">/*</span>
<span class="cm"> * MOORESTOWN delta registers</span>
<span class="cm"> */</span>
<span class="cp">#define MRST_DPLL_A		0x0f014</span>
<span class="cp">#define MDFLD_DPLL_B		0x0f018</span>
<span class="cp">#define MDFLD_INPUT_REF_SEL		(1 &lt;&lt; 14)</span>
<span class="cp">#define MDFLD_VCO_SEL			(1 &lt;&lt; 16)</span>
<span class="cp">#define DPLLA_MODE_LVDS			(2 &lt;&lt; 26)	</span><span class="cm">/* mrst */</span><span class="cp"></span>
<span class="cp">#define MDFLD_PLL_LATCHEN		(1 &lt;&lt; 28)</span>
<span class="cp">#define MDFLD_PWR_GATE_EN		(1 &lt;&lt; 30)</span>
<span class="cp">#define MDFLD_P1_MASK			(0x1FF &lt;&lt; 17)</span>
<span class="cp">#define MRST_FPA0		0x0f040</span>
<span class="cp">#define MRST_FPA1		0x0f044</span>
<span class="cp">#define MDFLD_DPLL_DIV0		0x0f048</span>
<span class="cp">#define MDFLD_DPLL_DIV1		0x0f04c</span>
<span class="cp">#define MRST_PERF_MODE		0x020f4</span>

<span class="cm">/*</span>
<span class="cm"> * MEDFIELD HDMI registers</span>
<span class="cm"> */</span>
<span class="cp">#define HDMIPHYMISCCTL		0x61134</span>
<span class="cp">#define HDMI_PHY_POWER_DOWN		0x7f</span>
<span class="cp">#define HDMIB_CONTROL		0x61140</span>
<span class="cp">#define HDMIB_PORT_EN			(1 &lt;&lt; 31)</span>
<span class="cp">#define HDMIB_PIPE_B_SELECT		(1 &lt;&lt; 30)</span>
<span class="cp">#define HDMIB_NULL_PACKET		(1 &lt;&lt; 9)</span>
<span class="cp">#define HDMIB_HDCP_PORT			(1 &lt;&lt; 5)</span>

<span class="cm">/* #define LVDS			0x61180 */</span>
<span class="cp">#define MRST_PANEL_8TO6_DITHER_ENABLE	(1 &lt;&lt; 25)</span>
<span class="cp">#define MRST_PANEL_24_DOT_1_FORMAT	(1 &lt;&lt; 24)</span>
<span class="cp">#define LVDS_A3_POWER_UP_0_OUTPUT	(1 &lt;&lt; 6)</span>

<span class="cp">#define MIPI			0x61190</span>
<span class="cp">#define MIPI_C			0x62190</span>
<span class="cp">#define MIPI_PORT_EN			(1 &lt;&lt; 31)</span>
<span class="cm">/* Turns on border drawing to allow centered display. */</span>
<span class="cp">#define SEL_FLOPPED_HSTX		(1 &lt;&lt; 23)</span>
<span class="cp">#define PASS_FROM_SPHY_TO_AFE		(1 &lt;&lt; 16)</span>
<span class="cp">#define MIPI_BORDER_EN			(1 &lt;&lt; 15)</span>
<span class="cp">#define MIPIA_3LANE_MIPIC_1LANE		0x1</span>
<span class="cp">#define MIPIA_2LANE_MIPIC_2LANE		0x2</span>
<span class="cp">#define TE_TRIGGER_DSI_PROTOCOL		(1 &lt;&lt; 2)</span>
<span class="cp">#define TE_TRIGGER_GPIO_PIN		(1 &lt;&lt; 3)</span>
<span class="cp">#define MIPI_TE_COUNT		0x61194</span>

<span class="cm">/* #define PP_CONTROL	0x61204 */</span>
<span class="cp">#define POWER_DOWN_ON_RESET		(1 &lt;&lt; 1)</span>

<span class="cm">/* #define PFIT_CONTROL	0x61230 */</span>
<span class="cp">#define PFIT_PIPE_SELECT		(3 &lt;&lt; 29)</span>
<span class="cp">#define PFIT_PIPE_SELECT_SHIFT		(29)</span>

<span class="cm">/* #define BLC_PWM_CTL		0x61254 */</span>
<span class="cp">#define MRST_BACKLIGHT_MODULATION_FREQ_SHIFT	(16)</span>
<span class="cp">#define MRST_BACKLIGHT_MODULATION_FREQ_MASK	(0xffff &lt;&lt; 16)</span>

<span class="cm">/* #define PIPEACONF 0x70008 */</span>
<span class="cp">#define PIPEACONF_PIPE_STATE		(1 &lt;&lt; 30)</span>
<span class="cm">/* #define DSPACNTR		0x70180 */</span>

<span class="cp">#define MRST_DSPABASE		0x7019c</span>
<span class="cp">#define MRST_DSPBBASE		0x7119c</span>
<span class="cp">#define MDFLD_DSPCBASE		0x7219c</span>

<span class="cm">/*</span>
<span class="cm"> * Moorestown registers.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> *	MIPI IP registers</span>
<span class="cm"> */</span>
<span class="cp">#define MIPIC_REG_OFFSET		0x800</span>

<span class="cp">#define DEVICE_READY_REG		0xb000</span>
<span class="cp">#define LP_OUTPUT_HOLD				(1 &lt;&lt; 16)</span>
<span class="cp">#define EXIT_ULPS_DEV_READY			0x3</span>
<span class="cp">#define LP_OUTPUT_HOLD_RELEASE			0x810000</span>
<span class="cp"># define ENTERING_ULPS				(2 &lt;&lt; 1)</span>
<span class="cp"># define EXITING_ULPS				(1 &lt;&lt; 1)</span>
<span class="cp"># define ULPS_MASK				(3 &lt;&lt; 1)</span>
<span class="cp"># define BUS_POSSESSION				(1 &lt;&lt; 3)</span>
<span class="cp">#define INTR_STAT_REG			0xb004</span>
<span class="cp">#define RX_SOT_ERROR				(1 &lt;&lt; 0)</span>
<span class="cp">#define RX_SOT_SYNC_ERROR			(1 &lt;&lt; 1)</span>
<span class="cp">#define RX_ESCAPE_MODE_ENTRY_ERROR		(1 &lt;&lt; 3)</span>
<span class="cp">#define RX_LP_TX_SYNC_ERROR			(1 &lt;&lt; 4)</span>
<span class="cp">#define RX_HS_RECEIVE_TIMEOUT_ERROR		(1 &lt;&lt; 5)</span>
<span class="cp">#define RX_FALSE_CONTROL_ERROR			(1 &lt;&lt; 6)</span>
<span class="cp">#define RX_ECC_SINGLE_BIT_ERROR			(1 &lt;&lt; 7)</span>
<span class="cp">#define RX_ECC_MULTI_BIT_ERROR			(1 &lt;&lt; 8)</span>
<span class="cp">#define RX_CHECKSUM_ERROR			(1 &lt;&lt; 9)</span>
<span class="cp">#define RX_DSI_DATA_TYPE_NOT_RECOGNIZED		(1 &lt;&lt; 10)</span>
<span class="cp">#define RX_DSI_VC_ID_INVALID			(1 &lt;&lt; 11)</span>
<span class="cp">#define TX_FALSE_CONTROL_ERROR			(1 &lt;&lt; 12)</span>
<span class="cp">#define TX_ECC_SINGLE_BIT_ERROR			(1 &lt;&lt; 13)</span>
<span class="cp">#define TX_ECC_MULTI_BIT_ERROR			(1 &lt;&lt; 14)</span>
<span class="cp">#define TX_CHECKSUM_ERROR			(1 &lt;&lt; 15)</span>
<span class="cp">#define TX_DSI_DATA_TYPE_NOT_RECOGNIZED		(1 &lt;&lt; 16)</span>
<span class="cp">#define TX_DSI_VC_ID_INVALID			(1 &lt;&lt; 17)</span>
<span class="cp">#define HIGH_CONTENTION				(1 &lt;&lt; 18)</span>
<span class="cp">#define LOW_CONTENTION				(1 &lt;&lt; 19)</span>
<span class="cp">#define DPI_FIFO_UNDER_RUN			(1 &lt;&lt; 20)</span>
<span class="cp">#define HS_TX_TIMEOUT				(1 &lt;&lt; 21)</span>
<span class="cp">#define LP_RX_TIMEOUT				(1 &lt;&lt; 22)</span>
<span class="cp">#define TURN_AROUND_ACK_TIMEOUT			(1 &lt;&lt; 23)</span>
<span class="cp">#define ACK_WITH_NO_ERROR			(1 &lt;&lt; 24)</span>
<span class="cp">#define HS_GENERIC_WR_FIFO_FULL			(1 &lt;&lt; 27)</span>
<span class="cp">#define LP_GENERIC_WR_FIFO_FULL			(1 &lt;&lt; 28)</span>
<span class="cp">#define SPL_PKT_SENT				(1 &lt;&lt; 30)</span>
<span class="cp">#define INTR_EN_REG			0xb008</span>
<span class="cp">#define DSI_FUNC_PRG_REG		0xb00c</span>
<span class="cp">#define DPI_CHANNEL_NUMBER_POS			0x03</span>
<span class="cp">#define DBI_CHANNEL_NUMBER_POS			0x05</span>
<span class="cp">#define FMT_DPI_POS				0x07</span>
<span class="cp">#define FMT_DBI_POS				0x0A</span>
<span class="cp">#define DBI_DATA_WIDTH_POS			0x0D</span>

<span class="cm">/* DPI PIXEL FORMATS */</span>
<span class="cp">#define RGB_565_FMT				0x01	</span><span class="cm">/* RGB 565 FORMAT */</span><span class="cp"></span>
<span class="cp">#define RGB_666_FMT				0x02	</span><span class="cm">/* RGB 666 FORMAT */</span><span class="cp"></span>
<span class="cp">#define LRGB_666_FMT				0x03	</span><span class="cm">/* RGB LOOSELY PACKED</span>
<span class="cm">							 * 666 FORMAT</span>
<span class="cm">							 */</span><span class="cp"></span>
<span class="cp">#define RGB_888_FMT				0x04	</span><span class="cm">/* RGB 888 FORMAT */</span><span class="cp"></span>
<span class="cp">#define VIRTUAL_CHANNEL_NUMBER_0		0x00	</span><span class="cm">/* Virtual channel 0 */</span><span class="cp"></span>
<span class="cp">#define VIRTUAL_CHANNEL_NUMBER_1		0x01	</span><span class="cm">/* Virtual channel 1 */</span><span class="cp"></span>
<span class="cp">#define VIRTUAL_CHANNEL_NUMBER_2		0x02	</span><span class="cm">/* Virtual channel 2 */</span><span class="cp"></span>
<span class="cp">#define VIRTUAL_CHANNEL_NUMBER_3		0x03	</span><span class="cm">/* Virtual channel 3 */</span><span class="cp"></span>

<span class="cp">#define DBI_NOT_SUPPORTED			0x00	</span><span class="cm">/* command mode</span>
<span class="cm">							 * is not supported</span>
<span class="cm">							 */</span><span class="cp"></span>
<span class="cp">#define DBI_DATA_WIDTH_16BIT			0x01	</span><span class="cm">/* 16 bit data */</span><span class="cp"></span>
<span class="cp">#define DBI_DATA_WIDTH_9BIT			0x02	</span><span class="cm">/* 9 bit data */</span><span class="cp"></span>
<span class="cp">#define DBI_DATA_WIDTH_8BIT			0x03	</span><span class="cm">/* 8 bit data */</span><span class="cp"></span>
<span class="cp">#define DBI_DATA_WIDTH_OPT1			0x04	</span><span class="cm">/* option 1 */</span><span class="cp"></span>
<span class="cp">#define DBI_DATA_WIDTH_OPT2			0x05	</span><span class="cm">/* option 2 */</span><span class="cp"></span>

<span class="cp">#define HS_TX_TIMEOUT_REG		0xb010</span>
<span class="cp">#define LP_RX_TIMEOUT_REG		0xb014</span>
<span class="cp">#define TURN_AROUND_TIMEOUT_REG		0xb018</span>
<span class="cp">#define DEVICE_RESET_REG		0xb01C</span>
<span class="cp">#define DPI_RESOLUTION_REG		0xb020</span>
<span class="cp">#define RES_V_POS				0x10</span>
<span class="cp">#define DBI_RESOLUTION_REG		0xb024 </span><span class="cm">/* Reserved for MDFLD */</span><span class="cp"></span>
<span class="cp">#define HORIZ_SYNC_PAD_COUNT_REG	0xb028</span>
<span class="cp">#define HORIZ_BACK_PORCH_COUNT_REG	0xb02C</span>
<span class="cp">#define HORIZ_FRONT_PORCH_COUNT_REG	0xb030</span>
<span class="cp">#define HORIZ_ACTIVE_AREA_COUNT_REG	0xb034</span>
<span class="cp">#define VERT_SYNC_PAD_COUNT_REG		0xb038</span>
<span class="cp">#define VERT_BACK_PORCH_COUNT_REG	0xb03c</span>
<span class="cp">#define VERT_FRONT_PORCH_COUNT_REG	0xb040</span>
<span class="cp">#define HIGH_LOW_SWITCH_COUNT_REG	0xb044</span>
<span class="cp">#define DPI_CONTROL_REG			0xb048</span>
<span class="cp">#define DPI_SHUT_DOWN				(1 &lt;&lt; 0)</span>
<span class="cp">#define DPI_TURN_ON				(1 &lt;&lt; 1)</span>
<span class="cp">#define DPI_COLOR_MODE_ON			(1 &lt;&lt; 2)</span>
<span class="cp">#define DPI_COLOR_MODE_OFF			(1 &lt;&lt; 3)</span>
<span class="cp">#define DPI_BACK_LIGHT_ON			(1 &lt;&lt; 4)</span>
<span class="cp">#define DPI_BACK_LIGHT_OFF			(1 &lt;&lt; 5)</span>
<span class="cp">#define DPI_LP					(1 &lt;&lt; 6)</span>
<span class="cp">#define DPI_DATA_REG			0xb04c</span>
<span class="cp">#define DPI_BACK_LIGHT_ON_DATA			0x07</span>
<span class="cp">#define DPI_BACK_LIGHT_OFF_DATA			0x17</span>
<span class="cp">#define INIT_COUNT_REG			0xb050</span>
<span class="cp">#define MAX_RET_PAK_REG			0xb054</span>
<span class="cp">#define VIDEO_FMT_REG			0xb058</span>
<span class="cp">#define COMPLETE_LAST_PCKT			(1 &lt;&lt; 2)</span>
<span class="cp">#define EOT_DISABLE_REG			0xb05c</span>
<span class="cp">#define ENABLE_CLOCK_STOPPING			(1 &lt;&lt; 1)</span>
<span class="cp">#define LP_BYTECLK_REG			0xb060</span>
<span class="cp">#define LP_GEN_DATA_REG			0xb064</span>
<span class="cp">#define HS_GEN_DATA_REG			0xb068</span>
<span class="cp">#define LP_GEN_CTRL_REG			0xb06C</span>
<span class="cp">#define HS_GEN_CTRL_REG			0xb070</span>
<span class="cp">#define DCS_CHANNEL_NUMBER_POS		0x6</span>
<span class="cp">#define MCS_COMMANDS_POS		0x8</span>
<span class="cp">#define WORD_COUNTS_POS			0x8</span>
<span class="cp">#define MCS_PARAMETER_POS			0x10</span>
<span class="cp">#define GEN_FIFO_STAT_REG		0xb074</span>
<span class="cp">#define HS_DATA_FIFO_FULL			(1 &lt;&lt; 0)</span>
<span class="cp">#define HS_DATA_FIFO_HALF_EMPTY			(1 &lt;&lt; 1)</span>
<span class="cp">#define HS_DATA_FIFO_EMPTY			(1 &lt;&lt; 2)</span>
<span class="cp">#define LP_DATA_FIFO_FULL			(1 &lt;&lt; 8)</span>
<span class="cp">#define LP_DATA_FIFO_HALF_EMPTY			(1 &lt;&lt; 9)</span>
<span class="cp">#define LP_DATA_FIFO_EMPTY			(1 &lt;&lt; 10)</span>
<span class="cp">#define HS_CTRL_FIFO_FULL			(1 &lt;&lt; 16)</span>
<span class="cp">#define HS_CTRL_FIFO_HALF_EMPTY			(1 &lt;&lt; 17)</span>
<span class="cp">#define HS_CTRL_FIFO_EMPTY			(1 &lt;&lt; 18)</span>
<span class="cp">#define LP_CTRL_FIFO_FULL			(1 &lt;&lt; 24)</span>
<span class="cp">#define LP_CTRL_FIFO_HALF_EMPTY			(1 &lt;&lt; 25)</span>
<span class="cp">#define LP_CTRL_FIFO_EMPTY			(1 &lt;&lt; 26)</span>
<span class="cp">#define DBI_FIFO_EMPTY				(1 &lt;&lt; 27)</span>
<span class="cp">#define DPI_FIFO_EMPTY				(1 &lt;&lt; 28)</span>
<span class="cp">#define HS_LS_DBI_ENABLE_REG		0xb078</span>
<span class="cp">#define TXCLKESC_REG			0xb07c</span>
<span class="cp">#define DPHY_PARAM_REG			0xb080</span>
<span class="cp">#define DBI_BW_CTRL_REG			0xb084</span>
<span class="cp">#define CLK_LANE_SWT_REG		0xb088</span>

<span class="cm">/*</span>
<span class="cm"> * MIPI Adapter registers</span>
<span class="cm"> */</span>
<span class="cp">#define MIPI_CONTROL_REG		0xb104</span>
<span class="cp">#define MIPI_2X_CLOCK_BITS			((1 &lt;&lt; 0) | (1 &lt;&lt; 1))</span>
<span class="cp">#define MIPI_DATA_ADDRESS_REG		0xb108</span>
<span class="cp">#define MIPI_DATA_LENGTH_REG		0xb10C</span>
<span class="cp">#define MIPI_COMMAND_ADDRESS_REG	0xb110</span>
<span class="cp">#define MIPI_COMMAND_LENGTH_REG		0xb114</span>
<span class="cp">#define MIPI_READ_DATA_RETURN_REG0	0xb118</span>
<span class="cp">#define MIPI_READ_DATA_RETURN_REG1	0xb11C</span>
<span class="cp">#define MIPI_READ_DATA_RETURN_REG2	0xb120</span>
<span class="cp">#define MIPI_READ_DATA_RETURN_REG3	0xb124</span>
<span class="cp">#define MIPI_READ_DATA_RETURN_REG4	0xb128</span>
<span class="cp">#define MIPI_READ_DATA_RETURN_REG5	0xb12C</span>
<span class="cp">#define MIPI_READ_DATA_RETURN_REG6	0xb130</span>
<span class="cp">#define MIPI_READ_DATA_RETURN_REG7	0xb134</span>
<span class="cp">#define MIPI_READ_DATA_VALID_REG	0xb138</span>

<span class="cm">/* DBI COMMANDS */</span>
<span class="cp">#define soft_reset			0x01</span>
<span class="cm">/*</span>
<span class="cm"> *	The display module performs a software reset.</span>
<span class="cm"> *	Registers are written with their SW Reset default values.</span>
<span class="cm"> */</span>
<span class="cp">#define get_power_mode			0x0a</span>
<span class="cm">/*</span>
<span class="cm"> *	The display module returns the current power mode</span>
<span class="cm"> */</span>
<span class="cp">#define get_address_mode		0x0b</span>
<span class="cm">/*</span>
<span class="cm"> *	The display module returns the current status.</span>
<span class="cm"> */</span>
<span class="cp">#define get_pixel_format		0x0c</span>
<span class="cm">/*</span>
<span class="cm"> *	This command gets the pixel format for the RGB image data</span>
<span class="cm"> *	used by the interface.</span>
<span class="cm"> */</span>
<span class="cp">#define get_display_mode		0x0d</span>
<span class="cm">/*</span>
<span class="cm"> *	The display module returns the Display Image Mode status.</span>
<span class="cm"> */</span>
<span class="cp">#define get_signal_mode			0x0e</span>
<span class="cm">/*</span>
<span class="cm"> *	The display module returns the Display Signal Mode.</span>
<span class="cm"> */</span>
<span class="cp">#define get_diagnostic_result		0x0f</span>
<span class="cm">/*</span>
<span class="cm"> *	The display module returns the self-diagnostic results following</span>
<span class="cm"> *	a Sleep Out command.</span>
<span class="cm"> */</span>
<span class="cp">#define enter_sleep_mode		0x10</span>
<span class="cm">/*</span>
<span class="cm"> *	This command causes the display module to enter the Sleep mode.</span>
<span class="cm"> *	In this mode, all unnecessary blocks inside the display module are</span>
<span class="cm"> *	disabled except interface communication. This is the lowest power</span>
<span class="cm"> *	mode the display module supports.</span>
<span class="cm"> */</span>
<span class="cp">#define exit_sleep_mode			0x11</span>
<span class="cm">/*</span>
<span class="cm"> *	This command causes the display module to exit Sleep mode.</span>
<span class="cm"> *	All blocks inside the display module are enabled.</span>
<span class="cm"> */</span>
<span class="cp">#define enter_partial_mode		0x12</span>
<span class="cm">/*</span>
<span class="cm"> *	This command causes the display module to enter the Partial Display</span>
<span class="cm"> *	Mode. The Partial Display Mode window is described by the</span>
<span class="cm"> *	set_partial_area command.</span>
<span class="cm"> */</span>
<span class="cp">#define enter_normal_mode		0x13</span>
<span class="cm">/*</span>
<span class="cm"> *	This command causes the display module to enter the Normal mode.</span>
<span class="cm"> *	Normal Mode is defined as Partial Display mode and Scroll mode are off</span>
<span class="cm"> */</span>
<span class="cp">#define exit_invert_mode		0x20</span>
<span class="cm">/*</span>
<span class="cm"> *	This command causes the display module to stop inverting the image</span>
<span class="cm"> *	data on the display device. The frame memory contents remain unchanged.</span>
<span class="cm"> *	No status bits are changed.</span>
<span class="cm"> */</span>
<span class="cp">#define enter_invert_mode		0x21</span>
<span class="cm">/*</span>
<span class="cm"> *	This command causes the display module to invert the image data only on</span>
<span class="cm"> *	the display device. The frame memory contents remain unchanged.</span>
<span class="cm"> *	No status bits are changed.</span>
<span class="cm"> */</span>
<span class="cp">#define set_gamma_curve			0x26</span>
<span class="cm">/*</span>
<span class="cm"> *	This command selects the desired gamma curve for the display device.</span>
<span class="cm"> *	Four fixed gamma curves are defined in section DCS spec.</span>
<span class="cm"> */</span>
<span class="cp">#define set_display_off			0x28</span>
<span class="cm">/* ************************************************************************* *\</span>
<span class="cm">This command causes the display module to stop displaying the image data</span>
<span class="cm">on the display device. The frame memory contents remain unchanged.</span>
<span class="cm">No status bits are changed.</span>
<span class="cm">\* ************************************************************************* */</span>
<span class="cp">#define set_display_on			0x29</span>
<span class="cm">/* ************************************************************************* *\</span>
<span class="cm">This command causes the display module to start displaying the image data</span>
<span class="cm">on the display device. The frame memory contents remain unchanged.</span>
<span class="cm">No status bits are changed.</span>
<span class="cm">\* ************************************************************************* */</span>
<span class="cp">#define set_column_address		0x2a</span>
<span class="cm">/*</span>
<span class="cm"> *	This command defines the column extent of the frame memory accessed by</span>
<span class="cm"> *	the hostprocessor with the read_memory_continue and</span>
<span class="cm"> *	write_memory_continue commands.</span>
<span class="cm"> *	No status bits are changed.</span>
<span class="cm"> */</span>
<span class="cp">#define set_page_addr			0x2b</span>
<span class="cm">/*</span>
<span class="cm"> *	This command defines the page extent of the frame memory accessed by</span>
<span class="cm"> *	the host processor with the write_memory_continue and</span>
<span class="cm"> *	read_memory_continue command.</span>
<span class="cm"> *	No status bits are changed.</span>
<span class="cm"> */</span>
<span class="cp">#define write_mem_start			0x2c</span>
<span class="cm">/*</span>
<span class="cm"> *	This command transfers image data from the host processor to the</span>
<span class="cm"> *	display modules frame memory starting at the pixel location specified</span>
<span class="cm"> *	by preceding set_column_address and set_page_address commands.</span>
<span class="cm"> */</span>
<span class="cp">#define set_partial_area		0x30</span>
<span class="cm">/*</span>
<span class="cm"> *	This command defines the Partial Display mode s display area.</span>
<span class="cm"> *	There are two parameters associated with this command, the first</span>
<span class="cm"> *	defines the Start Row (SR) and the second the End Row (ER). SR and ER</span>
<span class="cm"> *	refer to the Frame Memory Line Pointer.</span>
<span class="cm"> */</span>
<span class="cp">#define set_scroll_area			0x33</span>
<span class="cm">/*</span>
<span class="cm"> *	This command defines the display modules Vertical Scrolling Area.</span>
<span class="cm"> */</span>
<span class="cp">#define set_tear_off			0x34</span>
<span class="cm">/*</span>
<span class="cm"> *	This command turns off the display modules Tearing Effect output</span>
<span class="cm"> *	signal on the TE signal line.</span>
<span class="cm"> */</span>
<span class="cp">#define set_tear_on			0x35</span>
<span class="cm">/*</span>
<span class="cm"> *	This command turns on the display modules Tearing Effect output signal</span>
<span class="cm"> *	on the TE signal line.</span>
<span class="cm"> */</span>
<span class="cp">#define set_address_mode		0x36</span>
<span class="cm">/*</span>
<span class="cm"> *	This command sets the data order for transfers from the host processor</span>
<span class="cm"> *	to display modules frame memory,bits B[7:5] and B3, and from the</span>
<span class="cm"> *	display modules frame memory to the display device, bits B[2:0] and B4.</span>
<span class="cm"> */</span>
<span class="cp">#define set_scroll_start		0x37</span>
<span class="cm">/*</span>
<span class="cm"> *	This command sets the start of the vertical scrolling area in the frame</span>
<span class="cm"> *	memory. The vertical scrolling area is fully defined when this command</span>
<span class="cm"> *	is used with the set_scroll_area command The set_scroll_start command</span>
<span class="cm"> *	has one parameter, the Vertical Scroll Pointer. The VSP defines the</span>
<span class="cm"> *	line in the frame memory that is written to the display device as the</span>
<span class="cm"> *	first line of the vertical scroll area.</span>
<span class="cm"> */</span>
<span class="cp">#define exit_idle_mode			0x38</span>
<span class="cm">/*</span>
<span class="cm"> *	This command causes the display module to exit Idle mode.</span>
<span class="cm"> */</span>
<span class="cp">#define enter_idle_mode			0x39</span>
<span class="cm">/*</span>
<span class="cm"> *	This command causes the display module to enter Idle Mode.</span>
<span class="cm"> *	In Idle Mode, color expression is reduced. Colors are shown on the</span>
<span class="cm"> *	display device using the MSB of each of the R, G and B color</span>
<span class="cm"> *	components in the frame memory</span>
<span class="cm"> */</span>
<span class="cp">#define set_pixel_format		0x3a</span>
<span class="cm">/*</span>
<span class="cm"> *	This command sets the pixel format for the RGB image data used by the</span>
<span class="cm"> *	interface.</span>
<span class="cm"> *	Bits D[6:4]  DPI Pixel Format Definition</span>
<span class="cm"> *	Bits D[2:0]  DBI Pixel Format Definition</span>
<span class="cm"> *	Bits D7 and D3 are not used.</span>
<span class="cm"> */</span>
<span class="cp">#define DCS_PIXEL_FORMAT_3bpp		0x1</span>
<span class="cp">#define DCS_PIXEL_FORMAT_8bpp		0x2</span>
<span class="cp">#define DCS_PIXEL_FORMAT_12bpp		0x3</span>
<span class="cp">#define DCS_PIXEL_FORMAT_16bpp		0x5</span>
<span class="cp">#define DCS_PIXEL_FORMAT_18bpp		0x6</span>
<span class="cp">#define DCS_PIXEL_FORMAT_24bpp		0x7</span>

<span class="cp">#define write_mem_cont			0x3c</span>

<span class="cm">/*</span>
<span class="cm"> *	This command transfers image data from the host processor to the</span>
<span class="cm"> *	display module&#39;s frame memory continuing from the pixel location</span>
<span class="cm"> *	following the previous write_memory_continue or write_memory_start</span>
<span class="cm"> *	command.</span>
<span class="cm"> */</span>
<span class="cp">#define set_tear_scanline		0x44</span>
<span class="cm">/*</span>
<span class="cm"> *	This command turns on the display modules Tearing Effect output signal</span>
<span class="cm"> *	on the TE signal line when the display module reaches line N.</span>
<span class="cm"> */</span>
<span class="cp">#define get_scanline			0x45</span>
<span class="cm">/*</span>
<span class="cm"> *	The display module returns the current scanline, N, used to update the</span>
<span class="cm"> *	 display device. The total number of scanlines on a display device is</span>
<span class="cm"> *	defined as VSYNC + VBP + VACT + VFP.The first scanline is defined as</span>
<span class="cm"> *	the first line of V Sync and is denoted as Line 0.</span>
<span class="cm"> *	When in Sleep Mode, the value returned by get_scanline is undefined.</span>
<span class="cm"> */</span>

<span class="cm">/* MCS or Generic COMMANDS */</span>
<span class="cm">/* MCS/generic data type */</span>
<span class="cp">#define GEN_SHORT_WRITE_0	0x03  </span><span class="cm">/* generic short write, no parameters */</span><span class="cp"></span>
<span class="cp">#define GEN_SHORT_WRITE_1	0x13  </span><span class="cm">/* generic short write, 1 parameters */</span><span class="cp"></span>
<span class="cp">#define GEN_SHORT_WRITE_2	0x23  </span><span class="cm">/* generic short write, 2 parameters */</span><span class="cp"></span>
<span class="cp">#define GEN_READ_0		0x04  </span><span class="cm">/* generic read, no parameters */</span><span class="cp"></span>
<span class="cp">#define GEN_READ_1		0x14  </span><span class="cm">/* generic read, 1 parameters */</span><span class="cp"></span>
<span class="cp">#define GEN_READ_2		0x24  </span><span class="cm">/* generic read, 2 parameters */</span><span class="cp"></span>
<span class="cp">#define GEN_LONG_WRITE		0x29  </span><span class="cm">/* generic long write */</span><span class="cp"></span>
<span class="cp">#define MCS_SHORT_WRITE_0	0x05  </span><span class="cm">/* MCS short write, no parameters */</span><span class="cp"></span>
<span class="cp">#define MCS_SHORT_WRITE_1	0x15  </span><span class="cm">/* MCS short write, 1 parameters */</span><span class="cp"></span>
<span class="cp">#define MCS_READ		0x06  </span><span class="cm">/* MCS read, no parameters */</span><span class="cp"></span>
<span class="cp">#define MCS_LONG_WRITE		0x39  </span><span class="cm">/* MCS long write */</span><span class="cp"></span>
<span class="cm">/* MCS/generic commands */</span>
<span class="cm">/* TPO MCS */</span>
<span class="cp">#define write_display_profile		0x50</span>
<span class="cp">#define write_display_brightness	0x51</span>
<span class="cp">#define write_ctrl_display		0x53</span>
<span class="cp">#define write_ctrl_cabc			0x55</span>
  <span class="cp">#define UI_IMAGE		0x01</span>
  <span class="cp">#define STILL_IMAGE		0x02</span>
  <span class="cp">#define MOVING_IMAGE		0x03</span>
<span class="cp">#define write_hysteresis		0x57</span>
<span class="cp">#define write_gamma_setting		0x58</span>
<span class="cp">#define write_cabc_min_bright		0x5e</span>
<span class="cp">#define write_kbbc_profile		0x60</span>
<span class="cm">/* TMD MCS */</span>
<span class="cp">#define tmd_write_display_brightness 0x8c</span>

<span class="cm">/*</span>
<span class="cm"> *	This command is used to control ambient light, panel backlight</span>
<span class="cm"> *	brightness and gamma settings.</span>
<span class="cm"> */</span>
<span class="cp">#define BRIGHT_CNTL_BLOCK_ON	(1 &lt;&lt; 5)</span>
<span class="cp">#define AMBIENT_LIGHT_SENSE_ON	(1 &lt;&lt; 4)</span>
<span class="cp">#define DISPLAY_DIMMING_ON	(1 &lt;&lt; 3)</span>
<span class="cp">#define BACKLIGHT_ON		(1 &lt;&lt; 2)</span>
<span class="cp">#define DISPLAY_BRIGHTNESS_AUTO	(1 &lt;&lt; 1)</span>
<span class="cp">#define GAMMA_AUTO		(1 &lt;&lt; 0)</span>

<span class="cm">/* DCS Interface Pixel Formats */</span>
<span class="cp">#define DCS_PIXEL_FORMAT_3BPP	0x1</span>
<span class="cp">#define DCS_PIXEL_FORMAT_8BPP	0x2</span>
<span class="cp">#define DCS_PIXEL_FORMAT_12BPP	0x3</span>
<span class="cp">#define DCS_PIXEL_FORMAT_16BPP	0x5</span>
<span class="cp">#define DCS_PIXEL_FORMAT_18BPP	0x6</span>
<span class="cp">#define DCS_PIXEL_FORMAT_24BPP	0x7</span>
<span class="cm">/* ONE PARAMETER READ DATA */</span>
<span class="cp">#define addr_mode_data		0xfc</span>
<span class="cp">#define diag_res_data		0x00</span>
<span class="cp">#define disp_mode_data		0x23</span>
<span class="cp">#define pxl_fmt_data		0x77</span>
<span class="cp">#define pwr_mode_data		0x74</span>
<span class="cp">#define sig_mode_data		0x00</span>
<span class="cm">/* TWO PARAMETERS READ DATA */</span>
<span class="cp">#define scanline_data1		0xff</span>
<span class="cp">#define scanline_data2		0xff</span>
<span class="cp">#define NON_BURST_MODE_SYNC_PULSE	0x01	</span><span class="cm">/* Non Burst Mode</span>
<span class="cm">						 * with Sync Pulse</span>
<span class="cm">						 */</span><span class="cp"></span>
<span class="cp">#define NON_BURST_MODE_SYNC_EVENTS	0x02	</span><span class="cm">/* Non Burst Mode</span>
<span class="cm">						 * with Sync events</span>
<span class="cm">						 */</span><span class="cp"></span>
<span class="cp">#define BURST_MODE			0x03	</span><span class="cm">/* Burst Mode */</span><span class="cp"></span>
<span class="cp">#define DBI_COMMAND_BUFFER_SIZE		0x240   </span><span class="cm">/* 0x32 */</span><span class="cp">    </span><span class="cm">/* 0x120 */</span><span class="cp"></span>
						<span class="cm">/* Allocate at least</span>
<span class="cm">						 * 0x100 Byte with 32</span>
<span class="cm">						 * byte alignment</span>
<span class="cm">						 */</span>
<span class="cp">#define DBI_DATA_BUFFER_SIZE		0x120	</span><span class="cm">/* Allocate at least</span>
<span class="cm">						 * 0x100 Byte with 32</span>
<span class="cm">						 * byte alignment</span>
<span class="cm">						 */</span><span class="cp"></span>
<span class="cp">#define DBI_CB_TIME_OUT			0xFFFF</span>

<span class="cp">#define GEN_FB_TIME_OUT			2000</span>

<span class="cp">#define SKU_83				0x01</span>
<span class="cp">#define SKU_100				0x02</span>
<span class="cp">#define SKU_100L			0x04</span>
<span class="cp">#define SKU_BYPASS			0x08</span>

<span class="cm">/* Some handy macros for playing with bitfields. */</span>
<span class="cp">#define PSB_MASK(high, low) (((1&lt;&lt;((high)-(low)+1))-1)&lt;&lt;(low))</span>
<span class="cp">#define SET_FIELD(value, field) (((value) &lt;&lt; field ## _SHIFT) &amp; field ## _MASK)</span>
<span class="cp">#define GET_FIELD(word, field) (((word)  &amp; field ## _MASK) &gt;&gt; field ## _SHIFT)</span>

<span class="cp">#define _PIPE(pipe, a, b) ((a) + (pipe)*((b)-(a)))</span>

<span class="cm">/* PCI config space */</span>

<span class="cp">#define SB_PCKT         0x02100 </span><span class="cm">/* cedarview */</span><span class="cp"></span>
<span class="cp"># define SB_OPCODE_MASK                         PSB_MASK(31, 16)</span>
<span class="cp"># define SB_OPCODE_SHIFT                        16</span>
<span class="cp"># define SB_OPCODE_READ                         0</span>
<span class="cp"># define SB_OPCODE_WRITE                        1</span>
<span class="cp"># define SB_DEST_MASK                           PSB_MASK(15, 8)</span>
<span class="cp"># define SB_DEST_SHIFT                          8</span>
<span class="cp"># define SB_DEST_DPLL                           0x88</span>
<span class="cp"># define SB_BYTE_ENABLE_MASK                    PSB_MASK(7, 4)</span>
<span class="cp"># define SB_BYTE_ENABLE_SHIFT                   4</span>
<span class="cp"># define SB_BUSY                                (1 &lt;&lt; 0)</span>

<span class="cp">#define DSPCLK_GATE_D		0x6200</span>
<span class="cp"># define VRHUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 28) </span><span class="cm">/* Fixed value on CDV */</span><span class="cp"></span>
<span class="cp"># define DPOUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 11)</span>
<span class="cp"># define DPIOUNIT_CLOCK_GATE_DISABLE		(1 &lt;&lt; 6)</span>

<span class="cp">#define RAMCLK_GATE_D		0x6210</span>

<span class="cm">/* 32-bit value read/written from the DPIO reg. */</span>
<span class="cp">#define SB_DATA		0x02104 </span><span class="cm">/* cedarview */</span><span class="cp"></span>
<span class="cm">/* 32-bit address of the DPIO reg to be read/written. */</span>
<span class="cp">#define SB_ADDR		0x02108 </span><span class="cm">/* cedarview */</span><span class="cp"></span>
<span class="cp">#define DPIO_CFG	0x02110 </span><span class="cm">/* cedarview */</span><span class="cp"></span>
<span class="cp"># define DPIO_MODE_SELECT_1			(1 &lt;&lt; 3)</span>
<span class="cp"># define DPIO_MODE_SELECT_0			(1 &lt;&lt; 2)</span>
<span class="cp"># define DPIO_SFR_BYPASS			(1 &lt;&lt; 1)</span>
<span class="cm">/* reset is active low */</span>
<span class="cp"># define DPIO_CMN_RESET_N			(1 &lt;&lt; 0)</span>

<span class="cm">/* Cedarview sideband registers */</span>
<span class="cp">#define _SB_M_A			0x8008</span>
<span class="cp">#define _SB_M_B			0x8028</span>
<span class="cp">#define SB_M(pipe) _PIPE(pipe, _SB_M_A, _SB_M_B)</span>
<span class="cp"># define SB_M_DIVIDER_MASK			(0xFF &lt;&lt; 24)</span>
<span class="cp"># define SB_M_DIVIDER_SHIFT			24</span>

<span class="cp">#define _SB_N_VCO_A		0x8014</span>
<span class="cp">#define _SB_N_VCO_B		0x8034</span>
<span class="cp">#define SB_N_VCO(pipe) _PIPE(pipe, _SB_N_VCO_A, _SB_N_VCO_B)</span>
<span class="cp">#define SB_N_VCO_SEL_MASK			PSB_MASK(31, 30)</span>
<span class="cp">#define SB_N_VCO_SEL_SHIFT			30</span>
<span class="cp">#define SB_N_DIVIDER_MASK			PSB_MASK(29, 26)</span>
<span class="cp">#define SB_N_DIVIDER_SHIFT			26</span>
<span class="cp">#define SB_N_CB_TUNE_MASK			PSB_MASK(25, 24)</span>
<span class="cp">#define SB_N_CB_TUNE_SHIFT			24</span>

<span class="cm">/* the bit 14:13 is used to select between the different reference clock for Pipe A/B */</span>
<span class="cp">#define SB_REF_DPLLA		0x8010</span>
<span class="cp">#define SB_REF_DPLLB		0x8030</span>
<span class="cp">#define	REF_CLK_MASK		(0x3 &lt;&lt; 13)</span>
<span class="cp">#define REF_CLK_CORE		(0 &lt;&lt; 13)</span>
<span class="cp">#define REF_CLK_DPLL		(1 &lt;&lt; 13)</span>
<span class="cp">#define REF_CLK_DPLLA		(2 &lt;&lt; 13)</span>
<span class="cm">/* For the DPLL B, it will use the reference clk from DPLL A when using (2 &lt;&lt; 13) */</span>

<span class="cp">#define _SB_REF_A		0x8018</span>
<span class="cp">#define _SB_REF_B		0x8038</span>
<span class="cp">#define SB_REF_SFR(pipe)	_PIPE(pipe, _SB_REF_A, _SB_REF_B)</span>

<span class="cp">#define _SB_P_A			0x801c</span>
<span class="cp">#define _SB_P_B			0x803c</span>
<span class="cp">#define SB_P(pipe) _PIPE(pipe, _SB_P_A, _SB_P_B)</span>
<span class="cp">#define SB_P2_DIVIDER_MASK			PSB_MASK(31, 30)</span>
<span class="cp">#define SB_P2_DIVIDER_SHIFT			30</span>
<span class="cp">#define SB_P2_10				0 </span><span class="cm">/* HDMI, DP, DAC */</span><span class="cp"></span>
<span class="cp">#define SB_P2_5				1 </span><span class="cm">/* DAC */</span><span class="cp"></span>
<span class="cp">#define SB_P2_14				2 </span><span class="cm">/* LVDS single */</span><span class="cp"></span>
<span class="cp">#define SB_P2_7				3 </span><span class="cm">/* LVDS double */</span><span class="cp"></span>
<span class="cp">#define SB_P1_DIVIDER_MASK			PSB_MASK(15, 12)</span>
<span class="cp">#define SB_P1_DIVIDER_SHIFT			12</span>

<span class="cp">#define PSB_LANE0		0x120</span>
<span class="cp">#define PSB_LANE1		0x220</span>
<span class="cp">#define PSB_LANE2		0x2320</span>
<span class="cp">#define PSB_LANE3		0x2420</span>

<span class="cp">#define LANE_PLL_MASK		(0x7 &lt;&lt; 20)</span>
<span class="cp">#define LANE_PLL_ENABLE		(0x3 &lt;&lt; 20)</span>
<span class="cp">#define LANE_PLL_PIPE(p)	(((p) == 0) ? (1 &lt;&lt; 21) : (0 &lt;&lt; 21))</span>


<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
