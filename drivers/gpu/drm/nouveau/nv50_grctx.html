<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › gpu › drm › nouveau › nv50_grctx.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>nv50_grctx.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright 2009 Marcin Kościelnicki</span>
<span class="cm"> *</span>
<span class="cm"> * Permission is hereby granted, free of charge, to any person obtaining a</span>
<span class="cm"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span>
<span class="cm"> * to deal in the Software without restriction, including without limitation</span>
<span class="cm"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span>
<span class="cm"> * and/or sell copies of the Software, and to permit persons to whom the</span>
<span class="cm"> * Software is furnished to do so, subject to the following conditions:</span>
<span class="cm"> *</span>
<span class="cm"> * The above copyright notice and this permission notice shall be included in</span>
<span class="cm"> * all copies or substantial portions of the Software.</span>
<span class="cm"> *</span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="cm"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="cm"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL</span>
<span class="cm"> * THE COPYRIGHT HOLDER(S) OR AUTHOR(S) BE LIABLE FOR ANY CLAIM, DAMAGES OR</span>
<span class="cm"> * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span>
<span class="cm"> * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span>
<span class="cm"> * OTHER DEALINGS IN THE SOFTWARE.</span>
<span class="cm"> */</span>

<span class="cp">#define CP_FLAG_CLEAR                 0</span>
<span class="cp">#define CP_FLAG_SET                   1</span>
<span class="cp">#define CP_FLAG_SWAP_DIRECTION        ((0 * 32) + 0)</span>
<span class="cp">#define CP_FLAG_SWAP_DIRECTION_LOAD   0</span>
<span class="cp">#define CP_FLAG_SWAP_DIRECTION_SAVE   1</span>
<span class="cp">#define CP_FLAG_UNK01                 ((0 * 32) + 1)</span>
<span class="cp">#define CP_FLAG_UNK01_CLEAR           0</span>
<span class="cp">#define CP_FLAG_UNK01_SET             1</span>
<span class="cp">#define CP_FLAG_UNK03                 ((0 * 32) + 3)</span>
<span class="cp">#define CP_FLAG_UNK03_CLEAR           0</span>
<span class="cp">#define CP_FLAG_UNK03_SET             1</span>
<span class="cp">#define CP_FLAG_USER_SAVE             ((0 * 32) + 5)</span>
<span class="cp">#define CP_FLAG_USER_SAVE_NOT_PENDING 0</span>
<span class="cp">#define CP_FLAG_USER_SAVE_PENDING     1</span>
<span class="cp">#define CP_FLAG_USER_LOAD             ((0 * 32) + 6)</span>
<span class="cp">#define CP_FLAG_USER_LOAD_NOT_PENDING 0</span>
<span class="cp">#define CP_FLAG_USER_LOAD_PENDING     1</span>
<span class="cp">#define CP_FLAG_UNK0B                 ((0 * 32) + 0xb)</span>
<span class="cp">#define CP_FLAG_UNK0B_CLEAR           0</span>
<span class="cp">#define CP_FLAG_UNK0B_SET             1</span>
<span class="cp">#define CP_FLAG_XFER_SWITCH           ((0 * 32) + 0xe)</span>
<span class="cp">#define CP_FLAG_XFER_SWITCH_DISABLE   0</span>
<span class="cp">#define CP_FLAG_XFER_SWITCH_ENABLE    1</span>
<span class="cp">#define CP_FLAG_STATE                 ((0 * 32) + 0x1c)</span>
<span class="cp">#define CP_FLAG_STATE_STOPPED         0</span>
<span class="cp">#define CP_FLAG_STATE_RUNNING         1</span>
<span class="cp">#define CP_FLAG_UNK1D                 ((0 * 32) + 0x1d)</span>
<span class="cp">#define CP_FLAG_UNK1D_CLEAR           0</span>
<span class="cp">#define CP_FLAG_UNK1D_SET             1</span>
<span class="cp">#define CP_FLAG_UNK20                 ((1 * 32) + 0)</span>
<span class="cp">#define CP_FLAG_UNK20_CLEAR           0</span>
<span class="cp">#define CP_FLAG_UNK20_SET             1</span>
<span class="cp">#define CP_FLAG_STATUS                ((2 * 32) + 0)</span>
<span class="cp">#define CP_FLAG_STATUS_BUSY           0</span>
<span class="cp">#define CP_FLAG_STATUS_IDLE           1</span>
<span class="cp">#define CP_FLAG_AUTO_SAVE             ((2 * 32) + 4)</span>
<span class="cp">#define CP_FLAG_AUTO_SAVE_NOT_PENDING 0</span>
<span class="cp">#define CP_FLAG_AUTO_SAVE_PENDING     1</span>
<span class="cp">#define CP_FLAG_AUTO_LOAD             ((2 * 32) + 5)</span>
<span class="cp">#define CP_FLAG_AUTO_LOAD_NOT_PENDING 0</span>
<span class="cp">#define CP_FLAG_AUTO_LOAD_PENDING     1</span>
<span class="cp">#define CP_FLAG_NEWCTX                ((2 * 32) + 10)</span>
<span class="cp">#define CP_FLAG_NEWCTX_BUSY           0</span>
<span class="cp">#define CP_FLAG_NEWCTX_DONE           1</span>
<span class="cp">#define CP_FLAG_XFER                  ((2 * 32) + 11)</span>
<span class="cp">#define CP_FLAG_XFER_IDLE             0</span>
<span class="cp">#define CP_FLAG_XFER_BUSY             1</span>
<span class="cp">#define CP_FLAG_ALWAYS                ((2 * 32) + 13)</span>
<span class="cp">#define CP_FLAG_ALWAYS_FALSE          0</span>
<span class="cp">#define CP_FLAG_ALWAYS_TRUE           1</span>
<span class="cp">#define CP_FLAG_INTR                  ((2 * 32) + 15)</span>
<span class="cp">#define CP_FLAG_INTR_NOT_PENDING      0</span>
<span class="cp">#define CP_FLAG_INTR_PENDING          1</span>

<span class="cp">#define CP_CTX                   0x00100000</span>
<span class="cp">#define CP_CTX_COUNT             0x000f0000</span>
<span class="cp">#define CP_CTX_COUNT_SHIFT               16</span>
<span class="cp">#define CP_CTX_REG               0x00003fff</span>
<span class="cp">#define CP_LOAD_SR               0x00200000</span>
<span class="cp">#define CP_LOAD_SR_VALUE         0x000fffff</span>
<span class="cp">#define CP_BRA                   0x00400000</span>
<span class="cp">#define CP_BRA_IP                0x0001ff00</span>
<span class="cp">#define CP_BRA_IP_SHIFT                   8</span>
<span class="cp">#define CP_BRA_IF_CLEAR          0x00000080</span>
<span class="cp">#define CP_BRA_FLAG              0x0000007f</span>
<span class="cp">#define CP_WAIT                  0x00500000</span>
<span class="cp">#define CP_WAIT_SET              0x00000080</span>
<span class="cp">#define CP_WAIT_FLAG             0x0000007f</span>
<span class="cp">#define CP_SET                   0x00700000</span>
<span class="cp">#define CP_SET_1                 0x00000080</span>
<span class="cp">#define CP_SET_FLAG              0x0000007f</span>
<span class="cp">#define CP_NEWCTX                0x00600004</span>
<span class="cp">#define CP_NEXT_TO_SWAP          0x00600005</span>
<span class="cp">#define CP_SET_CONTEXT_POINTER   0x00600006</span>
<span class="cp">#define CP_SET_XFER_POINTER      0x00600007</span>
<span class="cp">#define CP_ENABLE                0x00600009</span>
<span class="cp">#define CP_END                   0x0060000c</span>
<span class="cp">#define CP_NEXT_TO_CURRENT       0x0060000d</span>
<span class="cp">#define CP_DISABLE1              0x0090ffff</span>
<span class="cp">#define CP_DISABLE2              0x0091ffff</span>
<span class="cp">#define CP_XFER_1      0x008000ff</span>
<span class="cp">#define CP_XFER_2      0x008800ff</span>
<span class="cp">#define CP_SEEK_1      0x00c000ff</span>
<span class="cp">#define CP_SEEK_2      0x00c800ff</span>

<span class="cp">#include &quot;drmP.h&quot;</span>
<span class="cp">#include &quot;nouveau_drv.h&quot;</span>
<span class="cp">#include &quot;nouveau_grctx.h&quot;</span>

<span class="cp">#define IS_NVA3F(x) (((x) &gt; 0xa0 &amp;&amp; (x) &lt; 0xaa) || (x) == 0xaf)</span>
<span class="cp">#define IS_NVAAF(x) ((x) &gt;= 0xaa &amp;&amp; (x) &lt;= 0xac)</span>

<span class="cm">/*</span>
<span class="cm"> * This code deals with PGRAPH contexts on NV50 family cards. Like NV40, it&#39;s</span>
<span class="cm"> * the GPU itself that does context-switching, but it needs a special</span>
<span class="cm"> * microcode to do it. And it&#39;s the driver&#39;s task to supply this microcode,</span>
<span class="cm"> * further known as ctxprog, as well as the initial context values, known</span>
<span class="cm"> * as ctxvals.</span>
<span class="cm"> *</span>
<span class="cm"> * Without ctxprog, you cannot switch contexts. Not even in software, since</span>
<span class="cm"> * the majority of context [xfer strands] isn&#39;t accessible directly. You&#39;re</span>
<span class="cm"> * stuck with a single channel, and you also suffer all the problems resulting</span>
<span class="cm"> * from missing ctxvals, since you cannot load them.</span>
<span class="cm"> *</span>
<span class="cm"> * Without ctxvals, you&#39;re stuck with PGRAPH&#39;s default context. It&#39;s enough to</span>
<span class="cm"> * run 2d operations, but trying to utilise 3d or CUDA will just lock you up,</span>
<span class="cm"> * since you don&#39;t have... some sort of needed setup.</span>
<span class="cm"> *</span>
<span class="cm"> * Nouveau will just disable acceleration if not given ctxprog + ctxvals, since</span>
<span class="cm"> * it&#39;s too much hassle to handle no-ctxprog as a special case.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * How ctxprogs work.</span>
<span class="cm"> *</span>
<span class="cm"> * The ctxprog is written in its own kind of microcode, with very small and</span>
<span class="cm"> * crappy set of available commands. You upload it to a small [512 insns]</span>
<span class="cm"> * area of memory on PGRAPH, and it&#39;ll be run when PFIFO wants PGRAPH to</span>
<span class="cm"> * switch channel. or when the driver explicitely requests it. Stuff visible</span>
<span class="cm"> * to ctxprog consists of: PGRAPH MMIO registers, PGRAPH context strands,</span>
<span class="cm"> * the per-channel context save area in VRAM [known as ctxvals or grctx],</span>
<span class="cm"> * 4 flags registers, a scratch register, two grctx pointers, plus many</span>
<span class="cm"> * random poorly-understood details.</span>
<span class="cm"> *</span>
<span class="cm"> * When ctxprog runs, it&#39;s supposed to check what operations are asked of it,</span>
<span class="cm"> * save old context if requested, optionally reset PGRAPH and switch to the</span>
<span class="cm"> * new channel, and load the new context. Context consists of three major</span>
<span class="cm"> * parts: subset of MMIO registers and two &quot;xfer areas&quot;.</span>
<span class="cm"> */</span>

<span class="cm">/* TODO:</span>
<span class="cm"> *  - document unimplemented bits compared to nvidia</span>
<span class="cm"> *  - NVAx: make a TP subroutine, use it.</span>
<span class="cm"> *  - use 0x4008fc instead of 0x1540?</span>
<span class="cm"> */</span>

<span class="k">enum</span> <span class="n">cp_label</span> <span class="p">{</span>
	<span class="n">cp_check_load</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">cp_setup_auto_load</span><span class="p">,</span>
	<span class="n">cp_setup_load</span><span class="p">,</span>
	<span class="n">cp_setup_save</span><span class="p">,</span>
	<span class="n">cp_swap_state</span><span class="p">,</span>
	<span class="n">cp_prepare_exit</span><span class="p">,</span>
	<span class="n">cp_exit</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_mmio</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_xfer1</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_xfer2</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>

<span class="cm">/* Main function: construct the ctxprog skeleton, call the other functions. */</span>

<span class="k">static</span> <span class="kt">int</span>
<span class="nf">nv50_grctx_generate</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mh">0x50</span>:
	<span class="k">case</span> <span class="mh">0x84</span>:
	<span class="k">case</span> <span class="mh">0x86</span>:
	<span class="k">case</span> <span class="mh">0x92</span>:
	<span class="k">case</span> <span class="mh">0x94</span>:
	<span class="k">case</span> <span class="mh">0x96</span>:
	<span class="k">case</span> <span class="mh">0x98</span>:
	<span class="k">case</span> <span class="mh">0xa0</span>:
	<span class="k">case</span> <span class="mh">0xa3</span>:
	<span class="k">case</span> <span class="mh">0xa5</span>:
	<span class="k">case</span> <span class="mh">0xa8</span>:
	<span class="k">case</span> <span class="mh">0xaa</span>:
	<span class="k">case</span> <span class="mh">0xac</span>:
	<span class="k">case</span> <span class="mh">0xaf</span>:
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">NV_ERROR</span><span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;I don&#39;t know how to make a ctxprog for &quot;</span>
				   <span class="s">&quot;your NV%x card.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">);</span>
		<span class="n">NV_ERROR</span><span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;Disabling acceleration. Please contact &quot;</span>
				   <span class="s">&quot;the devs.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENOSYS</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">STATE</span><span class="p">,</span> <span class="n">RUNNING</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">XFER_SWITCH</span><span class="p">,</span> <span class="n">ENABLE</span><span class="p">);</span>
	<span class="cm">/* decide whether we&#39;re loading/unloading the context */</span>
	<span class="n">cp_bra</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">AUTO_SAVE</span><span class="p">,</span> <span class="n">PENDING</span><span class="p">,</span> <span class="n">cp_setup_save</span><span class="p">);</span>
	<span class="n">cp_bra</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">USER_SAVE</span><span class="p">,</span> <span class="n">PENDING</span><span class="p">,</span> <span class="n">cp_setup_save</span><span class="p">);</span>

	<span class="n">cp_name</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">cp_check_load</span><span class="p">);</span>
	<span class="n">cp_bra</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">AUTO_LOAD</span><span class="p">,</span> <span class="n">PENDING</span><span class="p">,</span> <span class="n">cp_setup_auto_load</span><span class="p">);</span>
	<span class="n">cp_bra</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">USER_LOAD</span><span class="p">,</span> <span class="n">PENDING</span><span class="p">,</span> <span class="n">cp_setup_load</span><span class="p">);</span>
	<span class="n">cp_bra</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">ALWAYS</span><span class="p">,</span> <span class="n">TRUE</span><span class="p">,</span> <span class="n">cp_prepare_exit</span><span class="p">);</span>

	<span class="cm">/* setup for context load */</span>
	<span class="n">cp_name</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">cp_setup_auto_load</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_DISABLE1</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_DISABLE2</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_ENABLE</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_NEXT_TO_SWAP</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">UNK01</span><span class="p">,</span> <span class="n">SET</span><span class="p">);</span>
	<span class="n">cp_name</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">cp_setup_load</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_NEWCTX</span><span class="p">);</span>
	<span class="n">cp_wait</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">NEWCTX</span><span class="p">,</span> <span class="n">BUSY</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">UNK1D</span><span class="p">,</span> <span class="n">CLEAR</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">SWAP_DIRECTION</span><span class="p">,</span> <span class="n">LOAD</span><span class="p">);</span>
	<span class="n">cp_bra</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">UNK0B</span><span class="p">,</span> <span class="n">SET</span><span class="p">,</span> <span class="n">cp_prepare_exit</span><span class="p">);</span>
	<span class="n">cp_bra</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">ALWAYS</span><span class="p">,</span> <span class="n">TRUE</span><span class="p">,</span> <span class="n">cp_swap_state</span><span class="p">);</span>

	<span class="cm">/* setup for context save */</span>
	<span class="n">cp_name</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">cp_setup_save</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">UNK1D</span><span class="p">,</span> <span class="n">SET</span><span class="p">);</span>
	<span class="n">cp_wait</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">STATUS</span><span class="p">,</span> <span class="n">BUSY</span><span class="p">);</span>
	<span class="n">cp_wait</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">INTR</span><span class="p">,</span> <span class="n">PENDING</span><span class="p">);</span>
	<span class="n">cp_bra</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">STATUS</span><span class="p">,</span> <span class="n">BUSY</span><span class="p">,</span> <span class="n">cp_setup_save</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">UNK01</span><span class="p">,</span> <span class="n">SET</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">SWAP_DIRECTION</span><span class="p">,</span> <span class="n">SAVE</span><span class="p">);</span>

	<span class="cm">/* general PGRAPH state */</span>
	<span class="n">cp_name</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">cp_swap_state</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">UNK03</span><span class="p">,</span> <span class="n">SET</span><span class="p">);</span>
	<span class="n">cp_pos</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x00004</span><span class="o">/</span><span class="mi">4</span><span class="p">);</span>
	<span class="n">cp_ctx</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400828</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="cm">/* needed. otherwise, flickering happens. */</span>
	<span class="n">cp_pos</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x00100</span><span class="o">/</span><span class="mi">4</span><span class="p">);</span>
	<span class="n">nv50_graph_construct_mmio</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
	<span class="n">nv50_graph_construct_xfer1</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
	<span class="n">nv50_graph_construct_xfer2</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>

	<span class="n">cp_bra</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">SWAP_DIRECTION</span><span class="p">,</span> <span class="n">SAVE</span><span class="p">,</span> <span class="n">cp_check_load</span><span class="p">);</span>

	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">UNK20</span><span class="p">,</span> <span class="n">SET</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">SWAP_DIRECTION</span><span class="p">,</span> <span class="n">SAVE</span><span class="p">);</span> <span class="cm">/* no idea why this is needed, but fixes at least one lockup. */</span>
	<span class="n">cp_lsr</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_base</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_SET_XFER_POINTER</span><span class="p">);</span>
	<span class="n">cp_lsr</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_SEEK_1</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_XFER_1</span><span class="p">);</span>
	<span class="n">cp_wait</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">XFER</span><span class="p">,</span> <span class="n">BUSY</span><span class="p">);</span>

	<span class="cm">/* pre-exit state updates */</span>
	<span class="n">cp_name</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">cp_prepare_exit</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">UNK01</span><span class="p">,</span> <span class="n">CLEAR</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">UNK03</span><span class="p">,</span> <span class="n">CLEAR</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">UNK1D</span><span class="p">,</span> <span class="n">CLEAR</span><span class="p">);</span>

	<span class="n">cp_bra</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">USER_SAVE</span><span class="p">,</span> <span class="n">PENDING</span><span class="p">,</span> <span class="n">cp_exit</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_NEXT_TO_CURRENT</span><span class="p">);</span>

	<span class="n">cp_name</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">cp_exit</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">USER_SAVE</span><span class="p">,</span> <span class="n">NOT_PENDING</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">USER_LOAD</span><span class="p">,</span> <span class="n">NOT_PENDING</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">XFER_SWITCH</span><span class="p">,</span> <span class="n">DISABLE</span><span class="p">);</span>
	<span class="n">cp_set</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">STATE</span><span class="p">,</span> <span class="n">STOPPED</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_END</span><span class="p">);</span>
	<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">+=</span> <span class="mh">0x400</span><span class="p">;</span> <span class="cm">/* padding... no idea why you need it */</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="nf">nv50_grctx_fill</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">nouveau_gpuobj</span> <span class="o">*</span><span class="n">mem</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">nv50_grctx_generate</span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span><span class="p">)</span> <span class="p">{</span>
			     <span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="n">dev</span><span class="p">,</span>
			     <span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">NOUVEAU_GRCTX_VALS</span><span class="p">,</span>
			     <span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">mem</span><span class="p">,</span>
			   <span class="p">});</span>
<span class="p">}</span>

<span class="kt">int</span>
<span class="nf">nv50_grctx_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">drm_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">u32</span> <span class="n">max</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">len</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">cnt</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="n">ctx</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="n">dev</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">NOUVEAU_GRCTX_PROG</span><span class="p">,</span>
		<span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ctxprog_max</span> <span class="o">=</span> <span class="n">max</span>
	<span class="p">};</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="n">ret</span> <span class="o">=</span> <span class="n">nv50_grctx_generate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">);</span>
	<span class="o">*</span><span class="n">cnt</span> <span class="o">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">ctxvals_pos</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
	<span class="o">*</span><span class="n">len</span> <span class="o">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">ctxprog_len</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Constructs MMIO part of ctxprog and ctxvals. Just a matter of knowing which</span>
<span class="cm"> * registers to save/restore and the default values for them.</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="n">nv50_graph_construct_mmio_ddata</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_mmio</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">offset</span><span class="p">,</span> <span class="n">base</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">units</span> <span class="o">=</span> <span class="n">nv_rd32</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x1540</span><span class="p">);</span>

	<span class="cm">/* 0800: DISPATCH */</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400808</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
	<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400814</span><span class="p">,</span> <span class="mh">0x00000030</span><span class="p">);</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400834</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400834</span><span class="p">,</span> <span class="mh">0xff400040</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400838</span><span class="p">,</span> <span class="mh">0xfff00080</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40083c</span><span class="p">,</span> <span class="mh">0xfff70090</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400840</span><span class="p">,</span> <span class="mh">0xffe806a8</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400844</span><span class="p">,</span> <span class="mh">0x00000002</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400894</span><span class="p">,</span> <span class="mh">0x00001000</span><span class="p">);</span>
	<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x4008e8</span><span class="p">,</span> <span class="mh">0x00000003</span><span class="p">);</span>
	<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x4008ec</span><span class="p">,</span> <span class="mh">0x00001000</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400908</span><span class="p">,</span> <span class="mh">0xb</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400908</span><span class="p">,</span> <span class="mh">0xc</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400908</span><span class="p">,</span> <span class="mh">0xe</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400b00</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400b10</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400b10</span><span class="p">,</span> <span class="mh">0x0001629d</span><span class="p">);</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400b20</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400b20</span><span class="p">,</span> <span class="mh">0x0001629d</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">nv50_graph_construct_mmio_ddata</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>

	<span class="cm">/* 0C00: VFETCH */</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400c08</span><span class="p">,</span> <span class="mh">0x2</span><span class="p">);</span>
	<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400c08</span><span class="p">,</span> <span class="mh">0x0000fe0c</span><span class="p">);</span>

	<span class="cm">/* 1000 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401008</span><span class="p">,</span> <span class="mh">0x4</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401014</span><span class="p">,</span> <span class="mh">0x00001000</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401008</span><span class="p">,</span> <span class="mh">0x5</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401018</span><span class="p">,</span> <span class="mh">0x00001000</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401008</span><span class="p">,</span> <span class="mh">0x5</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401018</span><span class="p">,</span> <span class="mh">0x00004000</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="cm">/* 1400 */</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401400</span><span class="p">,</span> <span class="mh">0x8</span><span class="p">);</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401424</span><span class="p">,</span> <span class="mh">0x3</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40142c</span><span class="p">,</span> <span class="mh">0x0001fd87</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40142c</span><span class="p">,</span> <span class="mh">0x00000187</span><span class="p">);</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401540</span><span class="p">,</span> <span class="mh">0x5</span><span class="p">);</span>
	<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401550</span><span class="p">,</span> <span class="mh">0x00001018</span><span class="p">);</span>

	<span class="cm">/* 1800: STREAMOUT */</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401814</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
	<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401814</span><span class="p">,</span> <span class="mh">0x000000ff</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40181c</span><span class="p">,</span> <span class="mh">0xe</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401850</span><span class="p">,</span> <span class="mh">0x00000004</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40181c</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401854</span><span class="p">,</span> <span class="mh">0x00000004</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40181c</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401864</span><span class="p">,</span> <span class="mh">0x00000004</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="cm">/* 1C00 */</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401c00</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mh">0x50</span>:
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401c00</span><span class="p">,</span> <span class="mh">0x0001005f</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x84</span>:
	<span class="k">case</span> <span class="mh">0x86</span>:
	<span class="k">case</span> <span class="mh">0x94</span>:
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401c00</span><span class="p">,</span> <span class="mh">0x044d00df</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x92</span>:
	<span class="k">case</span> <span class="mh">0x96</span>:
	<span class="k">case</span> <span class="mh">0x98</span>:
	<span class="k">case</span> <span class="mh">0xa0</span>:
	<span class="k">case</span> <span class="mh">0xaa</span>:
	<span class="k">case</span> <span class="mh">0xac</span>:
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401c00</span><span class="p">,</span> <span class="mh">0x042500df</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0xa3</span>:
	<span class="k">case</span> <span class="mh">0xa5</span>:
	<span class="k">case</span> <span class="mh">0xa8</span>:
	<span class="k">case</span> <span class="mh">0xaf</span>:
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x401c00</span><span class="p">,</span> <span class="mh">0x142500df</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* 2000 */</span>

	<span class="cm">/* 2400 */</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402400</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402408</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402408</span><span class="p">,</span> <span class="mh">0x2</span><span class="p">);</span>
	<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402408</span><span class="p">,</span> <span class="mh">0x00000600</span><span class="p">);</span>

	<span class="cm">/* 2800: CSCHED */</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402800</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402800</span><span class="p">,</span> <span class="mh">0x00000006</span><span class="p">);</span>

	<span class="cm">/* 2C00: ZCULL */</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402c08</span><span class="p">,</span> <span class="mh">0x6</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402c14</span><span class="p">,</span> <span class="mh">0x01000000</span><span class="p">);</span>
	<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402c18</span><span class="p">,</span> <span class="mh">0x000000ff</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402ca0</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402ca0</span><span class="p">,</span> <span class="mh">0x2</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402ca0</span><span class="p">,</span> <span class="mh">0x00000400</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402ca0</span><span class="p">,</span> <span class="mh">0x00000800</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402ca0</span><span class="p">,</span> <span class="mh">0x00000400</span><span class="p">);</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x402cac</span><span class="p">,</span> <span class="mh">0x4</span><span class="p">);</span>

	<span class="cm">/* 3000: ENG2D */</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x403004</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
	<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x403004</span><span class="p">,</span> <span class="mh">0x00000001</span><span class="p">);</span>

	<span class="cm">/* 3400 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x403404</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x403404</span><span class="p">,</span> <span class="mh">0x00000001</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="cm">/* 5000: CCACHE */</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x405000</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mh">0x50</span>:
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x405000</span><span class="p">,</span> <span class="mh">0x00300080</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x84</span>:
	<span class="k">case</span> <span class="mh">0xa0</span>:
	<span class="k">case</span> <span class="mh">0xa3</span>:
	<span class="k">case</span> <span class="mh">0xa5</span>:
	<span class="k">case</span> <span class="mh">0xa8</span>:
	<span class="k">case</span> <span class="mh">0xaa</span>:
	<span class="k">case</span> <span class="mh">0xac</span>:
	<span class="k">case</span> <span class="mh">0xaf</span>:
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x405000</span><span class="p">,</span> <span class="mh">0x000e0080</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x86</span>:
	<span class="k">case</span> <span class="mh">0x92</span>:
	<span class="k">case</span> <span class="mh">0x94</span>:
	<span class="k">case</span> <span class="mh">0x96</span>:
	<span class="k">case</span> <span class="mh">0x98</span>:
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x405000</span><span class="p">,</span> <span class="mh">0x00000080</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x405014</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
	<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x405014</span><span class="p">,</span> <span class="mh">0x00000004</span><span class="p">);</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40501c</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x405024</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40502c</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>

	<span class="cm">/* 6000? */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x4063e0</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>

	<span class="cm">/* 6800: M2MF */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0x90</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x406814</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x406818</span><span class="p">,</span> <span class="mh">0x00000f80</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x406860</span><span class="p">,</span> <span class="mh">0x007f0080</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40689c</span><span class="p">,</span> <span class="mh">0x007f0080</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x406814</span><span class="p">,</span> <span class="mh">0x4</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x98</span><span class="p">)</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x406818</span><span class="p">,</span> <span class="mh">0x00000f80</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x406818</span><span class="p">,</span> <span class="mh">0x00001f80</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40681c</span><span class="p">,</span> <span class="mh">0x00000030</span><span class="p">);</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x406830</span><span class="p">,</span> <span class="mh">0x3</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="cm">/* 7000: per-ROP group state */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">16</span><span class="p">)))</span> <span class="p">{</span>
			<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407000</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mi">3</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407000</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mh">0x1b74f820</span><span class="p">);</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0xa5</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407000</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mh">0x3b74f821</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407000</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mh">0x7b74f821</span><span class="p">);</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407004</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mh">0x89058001</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407010</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407010</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407010</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mh">0x00001000</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407014</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mh">0x0000001f</span><span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407010</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mi">3</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407010</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mh">0x00001000</span><span class="p">);</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0xa5</span><span class="p">)</span>
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407014</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mh">0x000000ff</span><span class="p">);</span>
				<span class="k">else</span>
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407014</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mh">0x000001ff</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407080</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mi">4</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0xa5</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407080</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mh">0x027c10fa</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407080</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mh">0x827c10fa</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407084</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mh">0x000000c0</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407084</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mh">0x400000c0</span><span class="p">);</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407088</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mh">0xb7892080</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407094</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407094</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mi">3</span><span class="p">);</span>
			<span class="k">else</span> <span class="p">{</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407094</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mi">4</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x4070a0</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407c00</span><span class="p">,</span> <span class="mh">0x3</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0x90</span><span class="p">)</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407c00</span><span class="p">,</span> <span class="mh">0x00010040</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407c00</span><span class="p">,</span> <span class="mh">0x00390040</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407c00</span><span class="p">,</span> <span class="mh">0x003d0040</span><span class="p">);</span>
	<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407c08</span><span class="p">,</span> <span class="mh">0x00000022</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407c10</span><span class="p">,</span> <span class="mh">0x3</span><span class="p">);</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407c20</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407c2c</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407d00</span><span class="p">,</span> <span class="mh">0x9</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407d00</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x98</span><span class="p">)</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407d08</span><span class="p">,</span> <span class="mh">0x00380040</span><span class="p">);</span>
	<span class="k">else</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0x90</span><span class="p">)</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407d08</span><span class="p">,</span> <span class="mh">0x00010040</span><span class="p">);</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407d08</span><span class="p">,</span> <span class="mh">0x00390040</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407d08</span><span class="p">,</span> <span class="mh">0x003d0040</span><span class="p">);</span>
		<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x407d0c</span><span class="p">,</span> <span class="mh">0x00000022</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="cm">/* 8000+: per-TP state */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">i</span><span class="p">))</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
				<span class="n">base</span> <span class="o">=</span> <span class="mh">0x408000</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">12</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">base</span> <span class="o">=</span> <span class="mh">0x408000</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="mi">11</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
				<span class="n">offset</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0xc00</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="n">offset</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x80</span><span class="p">;</span>
			<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x0000ff0a</span><span class="p">);</span>
			<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

			<span class="cm">/* per-MP state */</span>
			<span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="mi">4</span><span class="p">);</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">24</span><span class="p">))))</span> <span class="k">continue</span><span class="p">;</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
					<span class="n">offset</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x200</span> <span class="o">+</span> <span class="p">(</span><span class="n">j</span><span class="o">&lt;&lt;</span><span class="mi">7</span><span class="p">);</span>
				<span class="k">else</span>
					<span class="n">offset</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x100</span> <span class="o">+</span> <span class="p">(</span><span class="n">j</span><span class="o">&lt;&lt;</span><span class="mi">7</span><span class="p">);</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x01800000</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00160000</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x01800000</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x0003ffff</span><span class="p">);</span>
				<span class="k">switch</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">case</span> <span class="mh">0x50</span>:
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x00080000</span><span class="p">);</span>
					<span class="k">break</span><span class="p">;</span>
				<span class="k">case</span> <span class="mh">0x84</span>:
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x00880000</span><span class="p">);</span>
					<span class="k">break</span><span class="p">;</span>
				<span class="k">case</span> <span class="mh">0x86</span>:
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x018c0000</span><span class="p">);</span>
					<span class="k">break</span><span class="p">;</span>
				<span class="k">case</span> <span class="mh">0x92</span>:
				<span class="k">case</span> <span class="mh">0x96</span>:
				<span class="k">case</span> <span class="mh">0x98</span>:
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x118c0000</span><span class="p">);</span>
					<span class="k">break</span><span class="p">;</span>
				<span class="k">case</span> <span class="mh">0x94</span>:
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x10880000</span><span class="p">);</span>
					<span class="k">break</span><span class="p">;</span>
				<span class="k">case</span> <span class="mh">0xa0</span>:
				<span class="k">case</span> <span class="mh">0xa5</span>:
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x310c0000</span><span class="p">);</span>
					<span class="k">break</span><span class="p">;</span>
				<span class="k">case</span> <span class="mh">0xa3</span>:
				<span class="k">case</span> <span class="mh">0xa8</span>:
				<span class="k">case</span> <span class="mh">0xaa</span>:
				<span class="k">case</span> <span class="mh">0xac</span>:
				<span class="k">case</span> <span class="mh">0xaf</span>:
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x300c0000</span><span class="p">);</span>
					<span class="k">break</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x00010401</span><span class="p">);</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x48</span><span class="p">,</span> <span class="mh">0x00000040</span><span class="p">);</span>
				<span class="k">else</span>
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x48</span><span class="p">,</span> <span class="mh">0x00000078</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x000000bf</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x58</span><span class="p">,</span> <span class="mh">0x00001210</span><span class="p">);</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x00000080</span><span class="p">);</span>
				<span class="k">else</span>
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x08000080</span><span class="p">);</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x68</span><span class="p">,</span> <span class="mh">0x0000003e</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x300</span><span class="p">,</span> <span class="mh">0x4</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x300</span><span class="p">,</span> <span class="mh">0x5</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x304</span><span class="p">,</span> <span class="mh">0x00007070</span><span class="p">);</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x304</span><span class="p">,</span> <span class="mh">0x00027070</span><span class="p">);</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x304</span><span class="p">,</span> <span class="mh">0x01127070</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x304</span><span class="p">,</span> <span class="mh">0x05127070</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x318</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x320</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x318</span><span class="p">,</span> <span class="mh">0x0003ffff</span><span class="p">);</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x318</span><span class="p">,</span> <span class="mh">0x03ffffff</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x320</span><span class="p">,</span> <span class="mh">0x07ffffff</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x324</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x328</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x340</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
				<span class="n">offset</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x340</span><span class="p">;</span>
			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x33c</span><span class="p">,</span> <span class="mh">0xb</span><span class="p">);</span>
				<span class="n">offset</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x344</span><span class="p">;</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x33c</span><span class="p">,</span> <span class="mh">0xd</span><span class="p">);</span>
				<span class="n">offset</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x344</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x00120407</span><span class="p">);</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x4</span><span class="p">,</span> <span class="mh">0x05091507</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x84</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x8</span><span class="p">,</span> <span class="mh">0x05100202</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x8</span><span class="p">,</span> <span class="mh">0x05010202</span><span class="p">);</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0xc</span><span class="p">,</span> <span class="mh">0x00030201</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0xa3</span><span class="p">)</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x36c</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

			<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x400</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x404</span><span class="p">,</span> <span class="mh">0x00000040</span><span class="p">);</span>
			<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x40c</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x40c</span><span class="p">,</span> <span class="mh">0x0d0c0b0a</span><span class="p">);</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x410</span><span class="p">,</span> <span class="mh">0x00141210</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
				<span class="n">offset</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x800</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="n">offset</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x500</span><span class="p">;</span>
			<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x000001f0</span><span class="p">);</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x4</span><span class="p">,</span> <span class="mh">0x00000001</span><span class="p">);</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x8</span><span class="p">,</span> <span class="mh">0x00000003</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span> <span class="o">||</span> <span class="n">IS_NVAAF</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0xc</span><span class="p">,</span> <span class="mh">0x00008000</span><span class="p">);</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x00039e00</span><span class="p">);</span>
			<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x00000040</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mh">0x00000100</span><span class="p">);</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x00003800</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x54c</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x54c</span><span class="p">,</span> <span class="mh">0x003fe006</span><span class="p">);</span>
				<span class="k">else</span>
					<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x54c</span><span class="p">,</span> <span class="mh">0x003fe007</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x550</span><span class="p">,</span> <span class="mh">0x003fe000</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
				<span class="n">offset</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0xa00</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="n">offset</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x680</span><span class="p">;</span>
			<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
			<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="mh">0x00404040</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
				<span class="n">offset</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0xe00</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="n">offset</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="mh">0x700</span><span class="p">;</span>
			<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="mh">0x0077f005</span><span class="p">);</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0xa5</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="mh">0x6cf7f007</span><span class="p">);</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0xa8</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="mh">0x6cfff007</span><span class="p">);</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0xac</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="mh">0x0cfff007</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="mh">0x0cf7f007</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x4</span><span class="p">,</span> <span class="mh">0x00007fff</span><span class="p">);</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x4</span><span class="p">,</span> <span class="mh">0x003f7fff</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x4</span><span class="p">,</span> <span class="mh">0x02bf7fff</span><span class="p">);</span>
			<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x2c</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x54</span><span class="p">,</span> <span class="mh">0x000003ff</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x58</span><span class="p">,</span> <span class="mh">0x00000003</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x00000003</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x000001ff</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0x0000001f</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x68</span><span class="p">,</span> <span class="mh">0x0000000f</span><span class="p">);</span>
				<span class="n">gr_def</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x0000000f</span><span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
				<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">dd_emit</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">val</span><span class="p">)</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">&amp;&amp;</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">mode</span> <span class="o">==</span> <span class="n">NOUVEAU_GRCTX_VALS</span><span class="p">)</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
			<span class="n">nv_wo32</span><span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">+</span> <span class="n">i</span><span class="p">),</span> <span class="n">val</span><span class="p">);</span>
	<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">+=</span> <span class="n">num</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_mmio_ddata</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">base</span><span class="p">,</span> <span class="n">num</span><span class="p">;</span>
	<span class="n">base</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="p">;</span>

	<span class="cm">/* tesla state */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 UNK0F90 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 UNK135C */</span>

	<span class="cm">/* SRC_TIC state */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000007 SRC_TILE_MODE_Z */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>	<span class="cm">/* 00000007 SRC_TILE_MODE_Y */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000001 SRC_LINEAR #1 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 000000ff SRC_ADDRESS_HIGH */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 SRC_SRGB */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0x94</span><span class="p">)</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 eng2d UNK0258 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000fff SRC_DEPTH */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>	<span class="cm">/* 0000ffff SRC_HEIGHT */</span>

	<span class="cm">/* turing state */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f TEXTURES_LOG2 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f SAMPLERS_LOG2 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff CB_DEF_ADDRESS_HIGH */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff CB_DEF_ADDRESS_LOW */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff SHARED_SIZE */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* ffffffff REG_MODE */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000ffff BLOCK_ALLOC_THREADS */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 LANES32 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff UNK370 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff USER_PARAM_UNK */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff USER_PARAM_COUNT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 000000ff UNK384 bits 8-15 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x3fffff</span><span class="p">);</span>	<span class="cm">/* 003fffff TIC_LIMIT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1fff</span><span class="p">);</span>	<span class="cm">/* 000fffff TSC_LIMIT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff CB_ADDR_INDEX */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 000007ff BLOCKDIM_X */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 000007ff BLOCKDIM_XMY */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 BLOCKDIM_XMY_OVERFLOW */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0003ffff BLOCKDIM_XMYMZ */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 000007ff BLOCKDIM_Y */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000007f BLOCKDIM_Z */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff CP_REG_ALLOC_TEMP */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 BLOCKDIM_DIRTY */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 UNK03E8 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000007f BLOCK_ALLOC_HALFWARPS */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000007 LOCAL_WARPS_NO_CLAMP */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>		<span class="cm">/* 00000007 LOCAL_WARPS_LOG_ALLOC */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000007 STACK_WARPS_NO_CLAMP */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>		<span class="cm">/* 00000007 STACK_WARPS_LOG_ALLOC */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00001fff BLOCK_ALLOC_REGSLOTS_PACKED */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00001fff BLOCK_ALLOC_REGSLOTS_STRIDED */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 000007ff BLOCK_ALLOC_THREADS */</span>

	<span class="cm">/* compat 2d state */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff clip X, Y, W, H */</span>

		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* ffffffff chroma COLOR_FORMAT */</span>

		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* ffffffff pattern COLOR_FORMAT */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff pattern SHAPE */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* ffffffff pattern PATTERN_SELECT */</span>

		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xa</span><span class="p">);</span>		<span class="cm">/* ffffffff surf2d SRC_FORMAT */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff surf2d DMA_SRC */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff surf2d SRC_ADDRESS_HIGH */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff surf2d SRC_ADDRESS_LOW */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">);</span>		<span class="cm">/* 0000ffff surf2d SRC_PITCH */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f surf2d SRC_TILE_MODE_Z */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 0000000f surf2d SRC_TILE_MODE_Y */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>		<span class="cm">/* ffffffff surf2d SRC_HEIGHT */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 surf2d SRC_LINEAR */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>		<span class="cm">/* ffffffff surf2d SRC_WIDTH */</span>

		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff gdirect CLIP_B_X */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff gdirect CLIP_B_Y */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff gdirect CLIP_C_X */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff gdirect CLIP_C_Y */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff gdirect CLIP_D_X */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff gdirect CLIP_D_Y */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* ffffffff gdirect COLOR_FORMAT */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff gdirect OPERATION */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff gdirect POINT_X */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff gdirect POINT_Y */</span>

		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff blit SRC_Y */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff blit OPERATION */</span>

		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff ifc OPERATION */</span>

		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff iifc INDEX_FORMAT */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff iifc LUT_OFFSET */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* ffffffff iifc COLOR_FORMAT */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff iifc OPERATION */</span>
	<span class="p">}</span>

	<span class="cm">/* m2mf state */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff m2mf LINE_COUNT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff m2mf LINE_LENGTH_IN */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff m2mf OFFSET_IN, OFFSET_OUT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* ffffffff m2mf TILING_DEPTH_OUT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>		<span class="cm">/* ffffffff m2mf TILING_HEIGHT_OUT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff m2mf TILING_POSITION_OUT_Z */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 m2mf LINEAR_OUT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff m2mf TILING_POSITION_OUT_X, Y */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>		<span class="cm">/* ffffffff m2mf TILING_PITCH_OUT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* ffffffff m2mf TILING_DEPTH_IN */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>		<span class="cm">/* ffffffff m2mf TILING_HEIGHT_IN */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff m2mf TILING_POSITION_IN_Z */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 m2mf LINEAR_IN */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff m2mf TILING_POSITION_IN_X, Y */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>		<span class="cm">/* ffffffff m2mf TILING_PITCH_IN */</span>

	<span class="cm">/* more compat 2d state */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* ffffffff line COLOR_FORMAT */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff line OPERATION */</span>

		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* ffffffff triangle COLOR_FORMAT */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff triangle OPERATION */</span>

		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f sifm TILE_MODE_Z */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 0000000f sifm TILE_MODE_Y */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff sifm FORMAT_FILTER */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 000000ff sifm FORMAT_ORIGIN */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff sifm SRC_PITCH */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 sifm SRC_LINEAR */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff sifm SRC_OFFSET_HIGH */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff sifm SRC_OFFSET */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff sifm SRC_HEIGHT */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff sifm SRC_WIDTH */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>		<span class="cm">/* ffffffff sifm COLOR_FORMAT */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff sifm OPERATION */</span>

		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff sifc OPERATION */</span>
	<span class="p">}</span>

	<span class="cm">/* tesla state */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f GP_TEXTURES_LOG2 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f GP_SAMPLERS_LOG2 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff UNK12B0_0 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">);</span>		<span class="cm">/* 000000ff UNK12B0_1 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>		<span class="cm">/* 000000ff UNK12B0_3 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff UNK12B0_2 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f FP_TEXTURES_LOG2 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f FP_SAMPLERS_LOG2 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 0000007f MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 0000000f MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="p">}</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xc</span><span class="p">);</span>		<span class="cm">/* 000000ff SEMANTIC_COLOR.BFC0_ID */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 SEMANTIC_COLOR.CLMP_EN */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>		<span class="cm">/* 000000ff SEMANTIC_COLOR.COLR_NR */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">);</span>		<span class="cm">/* 000000ff SEMANTIC_COLOR.FFC0_ID */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 000000ff SEMANTIC_LAYER */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 SEMANTIC_PTSZ.ENABLE */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">);</span>	<span class="cm">/* 000000ff SEMANTIC_PTSZ.PTSZ_ID */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">);</span>	<span class="cm">/* 000000ff SEMANTIC_PRIM */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x26</span><span class="p">);</span>	<span class="cm">/* 000000ff SEMANTIC_LAYER */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>	<span class="cm">/* 0000000f SMENATIC_CLIP.CLIP_HIGH */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>	<span class="cm">/* 000000ff SEMANTIC_CLIP.CLIP_LO */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">);</span>	<span class="cm">/* 000000ff UNK0FD4 */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 UNK1900 */</span>
	<span class="p">}</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 RT_CONTROL_MAP0 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000007 RT_CONTROL_MAP1 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 00000007 RT_CONTROL_MAP2 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>		<span class="cm">/* 00000007 RT_CONTROL_MAP3 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 00000007 RT_CONTROL_MAP4 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>		<span class="cm">/* 00000007 RT_CONTROL_MAP5 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>		<span class="cm">/* 00000007 RT_CONTROL_MAP6 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>		<span class="cm">/* 00000007 RT_CONTROL_MAP7 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000000f RT_CONTROL_COUNT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 RT_HORIZ_UNK */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff RT_ADDRESS_LOW */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xcf</span><span class="p">);</span>		<span class="cm">/* 000000ff RT_FORMAT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff RT_FORMAT */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 1, 1, 1 */</span>
	<span class="k">else</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 1, 1 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff GP_ENABLE */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>		<span class="cm">/* 0000ffff GP_VERTEX_OUTPUT_COUNT*/</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_REG_ALLOC_RESULT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_RESULT_MAP_SIZE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>	<span class="cm">/* 00000003 */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 UNK1418. Alone. */</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>	<span class="cm">/* 00000003 UNK15AC */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* ffffffff RASTERIZE_ENABLE */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 FP_CONTROL.EXPORTS_Z */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 FP_CONTROL.MULTIPLE_RESULTS */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">);</span>		<span class="cm">/* 000000ff FP_INTERPOLANT_CTRL.COUNT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">);</span>		<span class="cm">/* 000000ff FP_INTERPOLANT_CTRL.COUNT_NONFLAT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xc</span><span class="p">);</span>		<span class="cm">/* 000000ff FP_INTERPOLANT_CTRL.OFFSET */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 FP_INTERPOLANT_CTRL.UMASK.W */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 FP_INTERPOLANT_CTRL.UMASK.X */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 FP_INTERPOLANT_CTRL.UMASK.Y */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 FP_INTERPOLANT_CTRL.UMASK.Z */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff FP_RESULT_COUNT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* ffffffff REG_MODE */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff FP_REG_ALLOC_TEMP */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_BUILTIN_RESULT_EN.LAYER_IDX */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff STRMOUT_ENABLE */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x3fffff</span><span class="p">);</span>	<span class="cm">/* 003fffff TIC_LIMIT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1fff</span><span class="p">);</span>	<span class="cm">/* 000fffff TSC_LIMIT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 VERTEX_TWO_SIDE_ENABLE*/</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000007 VTX_ATTR_DEFINE.COMP */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000007 VTX_ATTR_DEFINE.SIZE */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>	<span class="cm">/* 00000007 VTX_ATTR_DEFINE.TYPE */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 000000ff VTX_ATTR_DEFINE.ATTR */</span>
	<span class="p">}</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 0000007f VP_RESULT_MAP_SIZE */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">);</span>		<span class="cm">/* 0000001f ZETA_FORMAT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 ZETA_ENABLE */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f VP_TEXTURES_LOG2 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f VP_SAMPLERS_LOG2 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 00000003 POLYGON_MODE_BACK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 VTX_ATTR_DEFINE.SIZE - 1 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff CB_ADDR_INDEX */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 CULL_FACE_ENABLE */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000003 CULL_FACE */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 FRONT_FACE */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 00000003 POLYGON_MODE_FRONT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">);</span>	<span class="cm">/* 00007fff UNK141C */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xe00</span><span class="p">);</span>		<span class="cm">/* 7fff */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">);</span>	<span class="cm">/* 7fff */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1e00</span><span class="p">);</span>	<span class="cm">/* 7fff */</span>
	<span class="p">}</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 BEGIN_END_ACTIVE */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 POLYGON_MODE_??? */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_REG_ALLOC_TEMP / 4 rounded up */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 000000ff FP_REG_ALLOC_TEMP... without /4? */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 000000ff VP_REG_ALLOC_TEMP / 4 rounded up */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 VTX_ATTR_MASK_UNK0 nonempty */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 VTX_ATTR_MASK_UNK1 nonempty */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x200</span><span class="p">);</span>		<span class="cm">/* 0003ffff GP_VERTEX_OUTPUT_COUNT*GP_REG_ALLOC_RESULT */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x200</span><span class="p">);</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
		<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>	<span class="cm">/* 0000003f UNK114C.COMP,SIZE */</span>
	<span class="p">}</span>

	<span class="cm">/* eng2d state */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 eng2d COLOR_KEY_ENABLE */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 eng2d COLOR_KEY_FORMAT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* ffffffff eng2d DST_DEPTH */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xcf</span><span class="p">);</span>		<span class="cm">/* 000000ff eng2d DST_FORMAT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff eng2d DST_LAYER */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 eng2d DST_LINEAR */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 eng2d PATTERN_COLOR_FORMAT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 eng2d OPERATION */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 eng2d PATTERN_SELECT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xcf</span><span class="p">);</span>		<span class="cm">/* 000000ff eng2d SIFC_FORMAT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 eng2d SIFC_BITMAP_ENABLE */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 00000003 eng2d SIFC_BITMAP_UNK808 */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff eng2d BLIT_DU_DX_FRACT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* ffffffff eng2d BLIT_DU_DX_INT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff eng2d BLIT_DV_DY_FRACT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* ffffffff eng2d BLIT_DV_DY_INT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 eng2d BLIT_CONTROL_FILTER */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xcf</span><span class="p">);</span>		<span class="cm">/* 000000ff eng2d DRAW_COLOR_FORMAT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xcf</span><span class="p">);</span>		<span class="cm">/* 000000ff eng2d SRC_FORMAT */</span>
	<span class="n">dd_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 eng2d SRC_LINEAR #2 */</span>

	<span class="n">num</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">-</span> <span class="n">base</span><span class="p">;</span>
	<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">base</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x404800</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">cp_ctx</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x405400</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * xfer areas. These are a pain.</span>
<span class="cm"> *</span>
<span class="cm"> * There are 2 xfer areas: the first one is big and contains all sorts of</span>
<span class="cm"> * stuff, the second is small and contains some per-TP context.</span>
<span class="cm"> *</span>
<span class="cm"> * Each area is split into 8 &quot;strands&quot;. The areas, when saved to grctx,</span>
<span class="cm"> * are made of 8-word blocks. Each block contains a single word from</span>
<span class="cm"> * each strand. The strands are independent of each other, their</span>
<span class="cm"> * addresses are unrelated to each other, and data in them is closely</span>
<span class="cm"> * packed together. The strand layout varies a bit between cards: here</span>
<span class="cm"> * and there, a single word is thrown out in the middle and the whole</span>
<span class="cm"> * strand is offset by a bit from corresponding one on another chipset.</span>
<span class="cm"> * For this reason, addresses of stuff in strands are almost useless.</span>
<span class="cm"> * Knowing sequence of stuff and size of gaps between them is much more</span>
<span class="cm"> * useful, and that&#39;s how we build the strands in our generator.</span>
<span class="cm"> *</span>
<span class="cm"> * NVA0 takes this mess to a whole new level by cutting the old strands</span>
<span class="cm"> * into a few dozen pieces [known as genes], rearranging them randomly,</span>
<span class="cm"> * and putting them back together to make new strands. Hopefully these</span>
<span class="cm"> * genes correspond more or less directly to the same PGRAPH subunits</span>
<span class="cm"> * as in 400040 register.</span>
<span class="cm"> *</span>
<span class="cm"> * The most common value in default context is 0, and when the genes</span>
<span class="cm"> * are separated by 0&#39;s, gene bounduaries are quite speculative...</span>
<span class="cm"> * some of them can be clearly deduced, others can be guessed, and yet</span>
<span class="cm"> * others won&#39;t be resolved without figuring out the real meaning of</span>
<span class="cm"> * given ctxval. For the same reason, ending point of each strand</span>
<span class="cm"> * is unknown. Except for strand 0, which is the longest strand and</span>
<span class="cm"> * its end corresponds to end of the whole xfer.</span>
<span class="cm"> *</span>
<span class="cm"> * An unsolved mystery is the seek instruction: it takes an argument</span>
<span class="cm"> * in bits 8-18, and that argument is clearly the place in strands to</span>
<span class="cm"> * seek to... but the offsets don&#39;t seem to correspond to offsets as</span>
<span class="cm"> * seen in grctx. Perhaps there&#39;s another, real, not randomly-changing</span>
<span class="cm"> * addressing in strands, and the xfer insn just happens to skip over</span>
<span class="cm"> * the unused bits? NV10-NV30 PIPE comes to mind...</span>
<span class="cm"> *</span>
<span class="cm"> * As far as I know, there&#39;s no way to access the xfer areas directly</span>
<span class="cm"> * without the help of ctxprog.</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">xf_emit</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">val</span><span class="p">)</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">&amp;&amp;</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">mode</span> <span class="o">==</span> <span class="n">NOUVEAU_GRCTX_VALS</span><span class="p">)</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
			<span class="n">nv_wo32</span><span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">)),</span> <span class="n">val</span><span class="p">);</span>
	<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">+=</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* Gene declarations... */</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_dispatch</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_m2mf</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_ccache</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_unk10xx</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_unk14xx</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_zcull</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_clipid</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_unk24xx</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_vfetch</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_eng2d</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_csched</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_unk1cxx</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_strmout</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_unk34xx</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_ropm1</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_ropm2</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_gene_ropc</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">nv50_graph_construct_xfer_tp</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_xfer1</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">units</span> <span class="o">=</span> <span class="n">nv_rd32</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x1540</span><span class="p">);</span>

	<span class="n">offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">+</span><span class="mh">0x3f</span><span class="p">)</span><span class="o">&amp;~</span><span class="mh">0x3f</span><span class="p">;</span>
	<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_base</span> <span class="o">=</span> <span class="n">offset</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* Strand 0 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span><span class="p">;</span>
		<span class="n">nv50_graph_construct_gene_dispatch</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_m2mf</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_unk24xx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_clipid</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_zcull</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>

		<span class="cm">/* Strand 1 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x1</span><span class="p">;</span>
		<span class="n">nv50_graph_construct_gene_vfetch</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_eng2d</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_csched</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_ropm1</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_ropm2</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>

		<span class="cm">/* Strand 2 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mh">0x2</span><span class="p">;</span>
		<span class="n">nv50_graph_construct_gene_ccache</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_unk1cxx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_strmout</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_unk14xx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_unk10xx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_unk34xx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>

		<span class="cm">/* Strand 3: per-ROP group state */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">3</span><span class="p">;</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">16</span><span class="p">)))</span>
				<span class="n">nv50_graph_construct_gene_ropc</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>

		<span class="cm">/* Strands 4-7: per-TP state */</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">+</span> <span class="n">i</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">i</span><span class="p">)))</span>
				<span class="n">nv50_graph_construct_xfer_tp</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)))</span>
				<span class="n">nv50_graph_construct_xfer_tp</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
				<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="cm">/* Strand 0 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span><span class="p">;</span>
		<span class="n">nv50_graph_construct_gene_dispatch</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_m2mf</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_unk34xx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_csched</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_unk1cxx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_strmout</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>

		<span class="cm">/* Strand 1 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">nv50_graph_construct_gene_unk10xx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>

		<span class="cm">/* Strand 2 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0xa0</span><span class="p">)</span>
			<span class="n">nv50_graph_construct_gene_unk14xx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_unk24xx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>

		<span class="cm">/* Strand 3 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">3</span><span class="p">;</span>
		<span class="n">nv50_graph_construct_gene_vfetch</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>

		<span class="cm">/* Strand 4 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">4</span><span class="p">;</span>
		<span class="n">nv50_graph_construct_gene_ccache</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>

		<span class="cm">/* Strand 5 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">5</span><span class="p">;</span>
		<span class="n">nv50_graph_construct_gene_ropm2</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_ropm1</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="cm">/* per-ROP context */</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">16</span><span class="p">)))</span>
				<span class="n">nv50_graph_construct_gene_ropc</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>

		<span class="cm">/* Strand 6 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">6</span><span class="p">;</span>
		<span class="n">nv50_graph_construct_gene_zcull</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_clipid</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_gene_eng2d</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">))</span>
			<span class="n">nv50_graph_construct_xfer_tp</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">))</span>
			<span class="n">nv50_graph_construct_xfer_tp</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">))</span>
			<span class="n">nv50_graph_construct_xfer_tp</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">))</span>
			<span class="n">nv50_graph_construct_xfer_tp</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>

		<span class="cm">/* Strand 7 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">7</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">))</span>
				<span class="n">nv50_graph_construct_xfer_tp</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">))</span>
				<span class="n">nv50_graph_construct_xfer_tp</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">))</span>
				<span class="n">nv50_graph_construct_xfer_tp</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">))</span>
				<span class="n">nv50_graph_construct_xfer_tp</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">))</span>
				<span class="n">nv50_graph_construct_xfer_tp</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">9</span><span class="p">))</span>
				<span class="n">nv50_graph_construct_xfer_tp</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">nv50_graph_construct_gene_unk14xx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">size</span> <span class="o">*</span> <span class="mi">8</span><span class="p">;</span>
	<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">+</span><span class="mh">0x3f</span><span class="p">)</span><span class="o">&amp;~</span><span class="mh">0x3f</span><span class="p">;</span>
	<span class="n">cp_lsr</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_SET_XFER_POINTER</span><span class="p">);</span>
	<span class="n">cp_lsr</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">size</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_SEEK_1</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_XFER_1</span><span class="p">);</span>
	<span class="n">cp_wait</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">XFER</span><span class="p">,</span> <span class="n">BUSY</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * non-trivial demagiced parts of ctx init go here</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_dispatch</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* start of strand 0 */</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="cm">/* the PGRAPH&#39;s internal FIFO */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x100</span><span class="o">*</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* and another bonus slot?!? */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* and YET ANOTHER bonus slot? */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="cm">/* CTX_SWITCH: caches of gr objects bound to subchannels. 8 values, last used index */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0x90</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">6</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">6</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x1e</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_m2mf</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Strand 0, right after dispatch */</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">smallm2mf</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0x92</span> <span class="o">||</span> <span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x98</span><span class="p">)</span>
		<span class="n">smallm2mf</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* DMA_NOTIFY instance &gt;&gt; 4 */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* DMA_BUFFER_IN instance &gt;&gt; 4 */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* DMA_BUFFER_OUT instance &gt;&gt; 4 */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* OFFSET_IN */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* OFFSET_OUT */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* PITCH_IN */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* PITCH_OUT */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* LINE_LENGTH */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* LINE_COUNT */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">);</span>		<span class="cm">/* FORMAT: bits 0-4 INPUT_INC, bits 5-9 OUTPUT_INC */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* LINEAR_IN */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x2</span><span class="p">);</span>		<span class="cm">/* TILING_MODE_IN: bits 0-2 y tiling, bits 3-5 z tiling */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>	<span class="cm">/* TILING_PITCH_IN */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>	<span class="cm">/* TILING_HEIGHT_IN */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* TILING_DEPTH_IN */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* TILING_POSITION_IN_Z */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* TILING_POSITION_IN */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* LINEAR_OUT */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x2</span><span class="p">);</span>		<span class="cm">/* TILING_MODE_OUT: bits 0-2 y tiling, bits 3-5 z tiling */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>	<span class="cm">/* TILING_PITCH_OUT */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>	<span class="cm">/* TILING_HEIGHT_OUT */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* TILING_DEPTH_OUT */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* TILING_POSITION_OUT_Z */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* TILING_POSITION_OUT */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* OFFSET_IN_HIGH */</span>
	<span class="n">xf_emit</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* OFFSET_OUT_HIGH */</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">smallm2mf</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 20 * ffffffff, 3ffff */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 80 * ffffffff, 3ffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 1f/7f, 0, 1f/7f, 0 [1f for smallm2mf, 7f otherwise] */</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">smallm2mf</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x800</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ff/1ff, 0, 0, 0 [ff for smallm2mf, 1ff otherwise] */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 20 * bits ffffffff, 3ffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x6</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 1f, 0, 1f, 0, 1f, 0 */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_ccache</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* RO */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x800</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mh">0x50</span>:
	<span class="k">case</span> <span class="mh">0x92</span>:
	<span class="k">case</span> <span class="mh">0xa0</span>:
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x84</span>:
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x94</span>:
	<span class="k">case</span> <span class="mh">0x96</span>:
	<span class="k">case</span> <span class="mh">0xa3</span>:
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x86</span>:
	<span class="k">case</span> <span class="mh">0x98</span>:
	<span class="k">case</span> <span class="mh">0xa5</span>:
	<span class="k">case</span> <span class="mh">0xa8</span>:
	<span class="k">case</span> <span class="mh">0xaa</span>:
	<span class="k">case</span> <span class="mh">0xac</span>:
	<span class="k">case</span> <span class="mh">0xaf</span>:
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="cm">/* CB bindings, 0x80 of them. first word is address &gt;&gt; 8, second is</span>
<span class="cm">	 * size &gt;&gt; 4 | valid &lt;&lt; 24 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff CB_DEF */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000007f CB_ADDR_BUFFER */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ff SET_PROGRAM_CB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 3f last SET_PROGRAM_CB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* RO */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 1f, 0, 0, ... */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_CODE_CB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_TIC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_TSC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 LINKED_TSC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff TIC_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff TIC_ADDRESS_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x3fffff</span><span class="p">);</span>	<span class="cm">/* 003fffff TIC_LIMIT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff TSC_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff TSC_ADDRESS_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1fff</span><span class="p">);</span>	<span class="cm">/* 000fffff TSC_LIMIT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff VP_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff VP_ADDRESS_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00ffffff VP_START_ID */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff CB_DEF_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff CB_DEF_ADDRESS_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff GP_ADDRESS_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00ffffff GP_START_ID */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff FP_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff FP_ADDRESS_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00ffffff FP_START_ID */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_unk10xx</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="cm">/* end of area 2 on pre-NVA0, area 1 on NVAx */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 0000007f VP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>		<span class="cm">/* 0000ffff GP_VERTEX_OUTPUT_COUNT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_REG_ALLOC_RESULT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80c14</span><span class="p">);</span>	<span class="cm">/* 01ffffff SEMANTIC_COLOR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 VERTEX_TWO_SIDE_ENABLE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x3ff</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x7ff</span><span class="p">);</span>	<span class="cm">/* 000007ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 111/113 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="mh">0x50</span>:
		<span class="k">case</span> <span class="mh">0x86</span>:
		<span class="k">case</span> <span class="mh">0x98</span>:
		<span class="k">case</span> <span class="mh">0xaa</span>:
		<span class="k">case</span> <span class="mh">0xac</span>:
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mh">0x84</span>:
		<span class="k">case</span> <span class="mh">0x92</span>:
		<span class="k">case</span> <span class="mh">0x94</span>:
		<span class="k">case</span> <span class="mh">0x96</span>:
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x120</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mh">0xa5</span>:
		<span class="k">case</span> <span class="mh">0xa8</span>:
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mh">0xa0</span>:
		<span class="k">case</span> <span class="mh">0xa3</span>:
		<span class="k">case</span> <span class="mh">0xaf</span>:
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x400</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 3f, 0, 0, 0 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 0000007f VP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>		<span class="cm">/* 0000ffff GP_VERTEX_OUTPUT_COUNT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_REG_ALLOC_TEMP */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 RASTERIZE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1900 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">);</span>		<span class="cm">/* 000000ff UNK0FD4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0001ffff GP_BUILTIN_RESULT_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x26</span><span class="p">);</span>		<span class="cm">/* 000000ff SEMANTIC_LAYER */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_unk34xx</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="cm">/* end of area 2 on pre-NVA0, area 1 on NVAx */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 VIEWPORT_CLIP_RECTS_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 VIEWPORT_CLIP_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x04000000</span><span class="p">);</span>	<span class="cm">/* 07ffffff VIEWPORT_CLIP_HORIZ*8, VIEWPORT_CLIP_VERT*8 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 POLYGON_STIPPLE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff POLYGON_STIPPLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00007fff WINDOW_OFFSET_XY */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff0ff3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x04e3bfdf</span><span class="p">);</span>	<span class="cm">/* ffffffff UNK0D64 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x04e3bfdf</span><span class="p">);</span>	<span class="cm">/* ffffffff UNK0DF4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 WINDOW_ORIGIN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1fe21</span><span class="p">);</span>	<span class="cm">/* 0001ffff tesla UNK0FAC */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x0fac6881</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_unk14xx</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="cm">/* middle of area 2 on pre-NVA0, beginning of area 2 on NVA0, area 7 on &gt;NVA0 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80c14</span><span class="p">);</span>	<span class="cm">/* 01ffffff SEMANTIC_COLOR */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000003ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x804</span><span class="p">);</span>		<span class="cm">/* 00000fff SEMANTIC_CLIP */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 7f, ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x8100c12</span><span class="p">);</span>	<span class="cm">/* 1fffffff FP_INTERPOLANT_CTRL */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>			<span class="cm">/* 0000007f VP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>			<span class="cm">/* 000000ff GP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">);</span>			<span class="cm">/* 7f/ff VIEW_VOLUME_CLIP_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 000000ff VP_CLIP_DISTANCE_ENABLE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 3ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 000000ff tesla UNK1940 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 tesla UNK0D7C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x804</span><span class="p">);</span>			<span class="cm">/* 00000fff SEMANTIC_CLIP */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>			<span class="cm">/* 00000001 VIEWPORT_TRANSFORM_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">);</span>			<span class="cm">/* 0000001f POLYGON_MODE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">);</span>		<span class="cm">/* 000000ff tesla UNK0FFC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>			<span class="cm">/* 00000001 SHADE_MODEL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80c14</span><span class="p">);</span>		<span class="cm">/* 01ffffff SEMANTIC_COLOR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 tesla UNK1900 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x8100c12</span><span class="p">);</span>		<span class="cm">/* 1fffffff FP_INTERPOLANT_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>			<span class="cm">/* 0000007f VP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>			<span class="cm">/* 000000ff GP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">);</span>			<span class="cm">/* 7f/ff VIEW_VOLUME_CLIP_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 tesla UNK0D7C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 tesla UNK0F8C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>			<span class="cm">/* 00000001 VIEWPORT_TRANSFORM_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x8100c12</span><span class="p">);</span>		<span class="cm">/* 1fffffff FP_INTERPOLANT_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff NOPERSPECTIVE_BITMAP */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 tesla UNK1900 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 0000000f */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x3ff</span><span class="p">);</span>		<span class="cm">/* 000003ff tesla UNK0D68 */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x7ff</span><span class="p">);</span>		<span class="cm">/* 000007ff tesla UNK0D68 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80c14</span><span class="p">);</span>		<span class="cm">/* 01ffffff SEMANTIC_COLOR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 VERTEX_TWO_SIDE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff VIEWPORT_SCALE: X0, Y0, Z0, X1, Y1, ... */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* f, 0, 0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff last VIEWPORT_SCALE? */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>			<span class="cm">/* 00000001 VIEWPORT_TRANSFORM_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 tesla UNK1900 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 tesla UNK1924 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">);</span>			<span class="cm">/* 000000ff VIEW_VOLUME_CLIP_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff VIEWPORT_TRANSLATE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* f, 0, 0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mh">0x88</span><span class="p">);</span>			<span class="cm">/* 000001ff tesla UNK19D8 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 tesla UNK1924 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>			<span class="cm">/* 0000000f CULL_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 07ffffff SCREEN_SCISSOR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00007fff WINDOW_OFFSET_XY */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000003 WINDOW_ORIGIN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 SCISSOR_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 0001ffff GP_BUILTIN_RESULT_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x26</span><span class="p">);</span>			<span class="cm">/* 000000ff SEMANTIC_LAYER */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 tesla UNK1900 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 0000000f */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x3f800000</span><span class="p">);</span>		<span class="cm">/* ffffffff LINE_WIDTH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 LINE_STIPPLE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 LINE_SMOOTH_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000007 MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">);</span>			<span class="cm">/* 0000001f POLYGON_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">);</span>			<span class="cm">/* 000000ff VIEW_VOLUME_CLIP_CTRL */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000003ff */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 10xbits ffffffff, 3fffff. SCISSOR_* */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* f */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 0? */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 003fffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">);</span>			<span class="cm">/* 000001ff SEMANTIC_PTSZ */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 0001ffff GP_BUILTIN_RESULT_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x26</span><span class="p">);</span>			<span class="cm">/* 000000ff SEMANTIC_LAYER */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 tesla UNK1900 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>			<span class="cm">/* 0000007f VP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>			<span class="cm">/* 000000ff GP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">);</span>			<span class="cm">/* 0000001f POLYGON_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 LINE_SMOOTH_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 LINE_STIPPLE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x00ffff00</span><span class="p">);</span>		<span class="cm">/* 00ffffff LINE_STIPPLE_PATTERN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 0000000f */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_zcull</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="cm">/* end of strand 0 on pre-NVA0, beginning of strand 6 on NVAx */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">);</span>		<span class="cm">/* 0000003f UNK1590 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 ALPHA_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_BACK_FUNC_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_BACK_FUNC_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_BACK_FUNC_REF */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_BACK_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_BACK_OP_FAIL, ZFAIL, ZPASS */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 00000003 tesla UNK143C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mh">0x04000000</span><span class="p">);</span>	<span class="cm">/* 07ffffff tesla UNK0D6C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff0ff3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 CLIPID_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff DEPTH_BOUNDS */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 DEPTH_TEST_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_WRITE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 0000000f CULL_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK0FB0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 POLYGON_STIPPLE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 00000007 FP_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0001ffff GP_BUILTIN_RESULT_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff CLEAR_STENCIL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_FRONT_FUNC_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_FRONT_FUNC_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_FRONT_FUNC_REF */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_FRONT_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_FRONT_OP_FAIL, ZFAIL, ZPASS */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_FRONT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_BACK_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff CLEAR_DEPTH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 tesla UNK1108 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 SAMPLECNT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f ZETA_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 ZETA_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1001</span><span class="p">);</span>	<span class="cm">/* 00001fff ZETA_ARRAY_MODE */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mh">0xffff</span><span class="p">);</span>	<span class="cm">/* 0000ffff MSAA_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 SCISSOR_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff DEPTH_RANGE_NEAR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x3f800000</span><span class="p">);</span>	<span class="cm">/* ffffffff DEPTH_RANGE_FAR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">);</span>		<span class="cm">/* 7f/ff/3ff VIEW_VOLUME_CLIP_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 VIEWPORT_CLIP_RECTS_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>		<span class="cm">/* 00000003 FP_CTRL_UNK196C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 tesla UNK1968 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 0fffffff tesla UNK1104 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK151C */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_clipid</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* middle of strand 0 on pre-NVA0 [after 24xx], middle of area 6 on NVAx */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 UNK0FB4 */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 07ffffff CLIPID_REGION_HORIZ */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 07ffffff CLIPID_REGION_VERT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 07ffffff SCREEN_SCISSOR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mh">0x04000000</span><span class="p">);</span>	<span class="cm">/* 07ffffff UNK1508 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 CLIPID_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>		<span class="cm">/* 00003fff CLIPID_WIDTH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff CLIPID_ID */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff CLIPID_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff CLIPID_ADDRESS_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>		<span class="cm">/* 00003fff CLIPID_HEIGHT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_CLIPID */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_unk24xx</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="cm">/* middle of strand 0 on pre-NVA0 [after m2mf], end of strand 2 on NVAx */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x33</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 0000007f VP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_RESULT_MAP_SIZE */</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xe10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="cm">/* 190 * 9: 8*ffffffff, 7ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 1ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 0? */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff, 7ff */</span>

		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xe10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="cm">/* 190 * 9: 8*ffffffff, 7ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 1ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 0? */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff, 7ff */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xc</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
		<span class="cm">/* SEEK */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xe10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="cm">/* 190 * 9: 8*ffffffff, 7ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 1ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 0? */</span>

		<span class="cm">/* SEEK */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xc</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
		<span class="cm">/* SEEK */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xe10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="cm">/* 190 * 9: 8*ffffffff, 7ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 1ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 0? */</span>
	<span class="p">}</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 0000007f VP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x8100c12</span><span class="p">);</span>	<span class="cm">/* 1fffffff FP_INTERPOLANT_CTRL */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>	<span class="cm">/* 00000003 tesla UNK1100 */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x8100c12</span><span class="p">);</span>	<span class="cm">/* 1fffffff FP_INTERPOLANT_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f VP_GP_BUILTIN_ATTR_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80c14</span><span class="p">);</span>	<span class="cm">/* 01ffffff SEMANTIC_COLOR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 */</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80c14</span><span class="p">);</span>	<span class="cm">/* 01ffffff SEMANTIC_COLOR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 VERTEX_TWO_SIDE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 POINT_SPRITE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x8100c12</span><span class="p">);</span>	<span class="cm">/* 1fffffff FP_INTERPOLANT_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">);</span>		<span class="cm">/* 000000ff SEMANTIC_PRIM_ID */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* SEEK */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 3, 0, 0.... */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="p">}</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 POINT_SPRITE_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff NOPERSPECTIVE_BITMAP */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00ffffff POINT_COORD_REPLACE_MAP */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 WINDOW_ORIGIN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x8100c12</span><span class="p">);</span>	<span class="cm">/* 1fffffff FP_INTERPOLANT_CTRL */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 000003ff */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_vfetch</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">acnt</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span> <span class="n">rep</span><span class="p">,</span> <span class="n">i</span><span class="p">;</span>
	<span class="cm">/* beginning of strand 1 on pre-NVA0, strand 3 on NVAx */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">acnt</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">;</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff tesla UNK13A4 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000fff tesla UNK1318 */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff VERTEX_BUFFER_FIRST */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 PRIMITIVE_RESTART_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK0DE8 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff PRIMITIVE_RESTART_INDEX */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">);</span>		<span class="cm">/* ffffffff VP_ATTR_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="p">(</span><span class="n">acnt</span><span class="o">/</span><span class="mi">8</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff VP_ATTR_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">acnt</span><span class="o">/</span><span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff VTX_ATR_MASK_UNK0DD0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f VP_GP_BUILTIN_ATTR_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>		<span class="cm">/* 0000ffff tesla UNK129C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff turing UNK370??? */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff turing USER_PARAM_COUNT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xb</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x9</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 EDGE_FLAG */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 PROVOKING_VERTEX_LAST */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">);</span>		<span class="cm">/* 0000001f POLYGON_MODE */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xc</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* RO */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7f/ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 7f/ff VP_REG_ALLOC_RESULT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 7f/ff VP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f VP_GP_BUILTIN_ATTR_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000001ff UNK1A28 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>		<span class="cm">/* 000001ff UNK0DF0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x3ff</span><span class="p">);</span>	<span class="cm">/* 3ff tesla UNK0D68 */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x7ff</span><span class="p">);</span>	<span class="cm">/* 7ff tesla UNK0D68 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0xa8</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1e00</span><span class="p">);</span>	<span class="cm">/* 7fff */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xc</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* RO or close */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">);</span>		<span class="cm">/* ffffffff VP_ATTR_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="p">(</span><span class="n">acnt</span><span class="o">/</span><span class="mi">8</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff VP_ATTR_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f VP_GP_BUILTIN_ATTR_EN */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;</span> <span class="mh">0x50</span> <span class="o">&amp;&amp;</span> <span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 tesla UNK0FD8 */</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 0? */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* weird... */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 0? */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* weird... */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="p">}</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff VB_ELEMENT_BASE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff UNK1438 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">acnt</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 1 tesla UNK1000 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff tesla UNK1118? */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">acnt</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff VERTEX_ARRAY_UNK90C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* f/1f */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">acnt</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff VERTEX_ARRAY_UNK90C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* f/1f */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">acnt</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* RO */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* RO */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK111C? */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* RO */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff UNK15F4_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff UNK15F4_ADDRESS_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff UNK0F84_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff UNK0F84_ADDRESS_LOW */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">acnt</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00003fff VERTEX_ARRAY_ATTRIB_OFFSET */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* f/1f */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">acnt</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000fff VERTEX_ARRAY_STRIDE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* f/1f */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">acnt</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff VERTEX_ARRAY_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* f/1f */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">acnt</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff VERTEX_ARRAY_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* f/1f */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">acnt</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff VERTEX_LIMIT_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* f/1f */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">acnt</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff VERTEX_LIMIT_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* f/1f */</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">acnt</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* f */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* f/1f */</span>
	<span class="p">}</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff DMA_VTXBUF */</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
		<span class="cm">/* SEEK */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x58</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">);</span>		<span class="cm">/* ffffffff VP_ATTR_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="p">(</span><span class="n">acnt</span><span class="o">/</span><span class="mi">8</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff VP_ATTR_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 1 UNK0DEC */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">acnt</span><span class="o">*</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff VTX_ATTR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* f/1f, 0, 0, 0 */</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x1d</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">);</span>		<span class="cm">/* ffffffff VP_ATTR_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="p">(</span><span class="n">acnt</span><span class="o">/</span><span class="mi">8</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff VP_ATTR_EN */</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xc</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xa</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* RO */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">rep</span> <span class="o">=</span> <span class="mh">0xc</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">rep</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">rep</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* SEEK */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x200</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 7f/ff, 0, 0, 0 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
	<span class="p">}</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 113/111 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">);</span>		<span class="cm">/* ffffffff VP_ATTR_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="p">(</span><span class="n">acnt</span><span class="o">/</span><span class="mi">8</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff VP_ATTR_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">acnt</span><span class="o">/</span><span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff VTX_ATTR_MASK_UNK0DD0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f VP_GP_BUILTIN_ATTR_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="cm">/* SEEK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* weird... */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* weird... */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_eng2d</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="cm">/* middle of strand 1 on pre-NVA0 [after vfetch], middle of strand 6 on NVAx */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0001ffff CLIP_X, CLIP_Y */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff CLIP_W, CLIP_H */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 CLIP_ENABLE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* this is useless on everything but the original NV50,</span>
<span class="cm">		 * guess they forgot to nuke it. Or just didn&#39;t bother. */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 0000ffff IFC_CLIP_X, Y */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000ffff IFC_CLIP_W, H */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 IFC_CLIP_ENABLE */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 DST_LINEAR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>		<span class="cm">/* 0001ffff DST_WIDTH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>		<span class="cm">/* 0001ffff DST_HEIGHT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 3f[NV50]/7f[NV84+] DST_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0001ffff DRAW_POINT_X */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>		<span class="cm">/* 0000000f DRAW_UNK58C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000fffff SIFC_DST_X_FRACT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0001ffff SIFC_DST_X_INT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000fffff SIFC_DST_Y_FRACT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0001ffff SIFC_DST_Y_INT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000fffff SIFC_DX_DU_FRACT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0001ffff SIFC_DX_DU_INT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000fffff SIFC_DY_DV_FRACT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0001ffff SIFC_DY_DV_INT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000ffff SIFC_WIDTH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000ffff SIFC_HEIGHT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xcf</span><span class="p">);</span>		<span class="cm">/* 000000ff SIFC_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 00000003 SIFC_BITMAP_UNK808 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 SIFC_BITMAP_LINE_PACK_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 SIFC_BITMAP_LSB_FIRST */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 SIFC_BITMAP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff BLIT_DST_X */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff BLIT_DST_Y */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000fffff BLIT_DU_DX_FRACT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0001ffff BLIT_DU_DX_INT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000fffff BLIT_DV_DY_FRACT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0001ffff BLIT_DV_DY_INT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000ffff BLIT_DST_W */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000ffff BLIT_DST_H */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000fffff BLIT_SRC_X_FRACT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0001ffff BLIT_SRC_X_INT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000fffff BLIT_SRC_Y_FRACT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK888 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 0000003f UNK884 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 UNK880 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000001f tesla UNK0FB8 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">);</span>		<span class="cm">/* 000000ff tesla UNK128C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007, ffff0ff3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK260 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x4444480</span><span class="p">);</span>	<span class="cm">/* 1fffffff UNK870 */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_csched</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="cm">/* middle of strand 1 on pre-NVA0 [after eng2d], middle of strand 0 on NVAx */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00007fff WINDOW_OFFSET_XY... what is it doing here??? */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1924 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 WINDOW_ORIGIN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x8100c12</span><span class="p">);</span>	<span class="cm">/* 1fffffff FP_INTERPOLANT_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000003ff */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff turing UNK364 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f turing UNK36C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff USER_PARAM_COUNT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>		<span class="cm">/* 00ffffff turing UNK384 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f turing UNK2A0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff GRIDID */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10001</span><span class="p">);</span>	<span class="cm">/* ffffffff GRIDDIM_XY */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10001</span><span class="p">);</span>	<span class="cm">/* ffffffff BLOCKDIM_XY */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000ffff BLOCKDIM_Z */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10001</span><span class="p">);</span>	<span class="cm">/* 00ffffff BLOCK_ALLOC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 LANES32 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff FP_REG_ALLOC_TEMP */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 00000003 REG_MODE */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff USER_PARAM */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mh">0x50</span>:
	<span class="k">case</span> <span class="mh">0x92</span>:
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 7, 0, 0, 0, ... */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ff, fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff, 1f */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x84</span>:
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 7, 0, 0, 0, ... */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ff, fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xc</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff, 1f */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x94</span>:
	<span class="k">case</span> <span class="mh">0x96</span>:
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 7, 0, 0, 0, ... */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ff, fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff, 1f */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x86</span>:
	<span class="k">case</span> <span class="mh">0x98</span>:
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* f, 0, 0, 0 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ff, fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff, 1f */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0xa0</span>:
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 7, 0, 0, 0, ... */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ff, fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x1e</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff, 1f */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0xa3</span>:
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 7, 0, 0, 0, ... */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ff, fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xc</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff, 1f */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0xa5</span>:
	<span class="k">case</span> <span class="mh">0xaf</span>:
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 7, 0, 0, 0, ... */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ff, fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">6</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff, 1f */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0xaa</span>:
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0xa8</span>:
	<span class="k">case</span> <span class="mh">0xac</span>:
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* f, 0, 0, 0 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ff, fff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff, 1f */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000000 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000001f */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 turing UNK35C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 turing UNK35C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_unk1cxx</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00007fff WINDOW_OFFSET_XY */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x3f800000</span><span class="p">);</span>	<span class="cm">/* ffffffff LINE_WIDTH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 LINE_SMOOTH_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1658 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 POLYGON_SMOOTH_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 POLYGON_OFFSET_*_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 0000000f CULL_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">);</span>		<span class="cm">/* 0000001f POLYGON_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f ZETA_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 POINT_SPRITE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK165C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 SCISSOR_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 LINE_STIPPLE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x00ffff00</span><span class="p">);</span>	<span class="cm">/* 00ffffff LINE_STIPPLE_PATTERN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff POLYGON_OFFSET_UNITS */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff POLYGON_OFFSET_FACTOR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 tesla UNK1668 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 07ffffff SCREEN_SCISSOR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1900 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">);</span>		<span class="cm">/* 0000000f COLOR_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f COLOR_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x0fac6881</span><span class="p">);</span>	<span class="cm">/* 0fffffff RT_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 0000007f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000007f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 RT_HORIZ_LINEAR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 00000007 FP_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 ALPHA_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 ALPHA_TEST_FUNC */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>	<span class="cm">/* 00000003 UNK16B4 */</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000001 UNK16B4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 MULTISAMPLE_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 tesla UNK0F90 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 00000003 tesla UNK143C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mh">0x04000000</span><span class="p">);</span>	<span class="cm">/* 07ffffff tesla UNK0D6C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_FRONT_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_WRITE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 SAMPLECNT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>		<span class="cm">/* 0000000f UNK1408 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">);</span>		<span class="cm">/* 000001ff SEMANTIC_PTSZ */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff POINT_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 tesla UNK0FB4 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 3ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000001 tesla UNK1110 */</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 tesla UNK1928 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff DEPTH_RANGE_NEAR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x3f800000</span><span class="p">);</span>	<span class="cm">/* ffffffff DEPTH_RANGE_FAR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">);</span>		<span class="cm">/* 000000ff VIEW_VOLUME_CLIP_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 07ffffff VIEWPORT_HORIZ, then VIEWPORT_VERT. (W&amp;0x3fff)&lt;&lt;13 | (X&amp;0x1fff). */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK187C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 WINDOW_ORIGIN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_FRONT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_BACK_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_BACK_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x8100c12</span><span class="p">);</span>	<span class="cm">/* 1fffffff FP_INTERPOLANT_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>		<span class="cm">/* 0000000f tesla UNK1220 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff tesla UNK1A20 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 ZETA_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 VERTEX_TWO_SIDE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mh">0xffff</span><span class="p">);</span>	<span class="cm">/* 0000ffff MSAA_MASK */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>	<span class="cm">/* 00000003 tesla UNK1100 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x1c</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x9</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 LINE_SMOOTH_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 LINE_STIPPLE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x00ffff00</span><span class="p">);</span>	<span class="cm">/* 00ffffff LINE_STIPPLE_PATTERN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">);</span>		<span class="cm">/* 0000001f POLYGON_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 WINDOW_ORIGIN */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>	<span class="cm">/* 00000003 tesla UNK1100 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 3ff */</span>
	<span class="p">}</span>
	<span class="cm">/* XXX: the following block could belong either to unk1cxx, or</span>
<span class="cm">	 * to STRMOUT. Rather hard to tell. */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x3b</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_strmout</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x102</span><span class="p">);</span>		<span class="cm">/* 0000ffff STRMOUT_BUFFER_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff STRMOUT_PRIMITIVE_COUNT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff STRMOUT_NUM_ATTRIBS */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff UNK1A8C */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff UNK1780 */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 0000007f VP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x3ff</span><span class="p">);</span>	<span class="cm">/* 000003ff tesla UNK0D68 */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x7ff</span><span class="p">);</span>	<span class="cm">/* 000007ff tesla UNK0D68 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x102</span><span class="p">);</span>		<span class="cm">/* 0000ffff STRMOUT_BUFFER_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff STRMOUT_PRIMITIVE_COUNT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STRMOUT_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff STRMOUT_ADDRESS_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff STRMOUT_NUM_ATTRIBS */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff UNK1A8C */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff UNK1780 */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_STRMOUT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_QUERY */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff QUERY_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff QUERY_ADDRESS_LOW QUERY_COUNTER */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff STRMOUT_MAP */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000000? */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_ropm1</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x4e3bfdf</span><span class="p">);</span>	<span class="cm">/* ffffffff UNK0D64 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x4e3bfdf</span><span class="p">);</span>	<span class="cm">/* ffffffff UNK0DF4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000003ff */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>	<span class="cm">/* 000000ff tesla UNK1968 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A3C */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_ropm2</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_QUERY */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x0fac6881</span><span class="p">);</span>	<span class="cm">/* 0fffffff RT_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff QUERY_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff QUERY_ADDRESS_LOW, COUNTER */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 SAMPLECNT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7 */</span>
	<span class="cm">/* SEEK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_QUERY */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff QUERY_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff QUERY_ADDRESS_LOW, COUNTER */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x4e3bfdf</span><span class="p">);</span>	<span class="cm">/* ffffffff UNK0D64 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x4e3bfdf</span><span class="p">);</span>	<span class="cm">/* ffffffff UNK0DF4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 eng2d UNK260 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ff/3ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>	<span class="cm">/* 000000ff tesla UNK1968 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A3C */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_gene_ropc</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">magic2</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">magic2</span> <span class="o">=</span> <span class="mh">0x00003e60</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">magic2</span> <span class="o">=</span> <span class="mh">0x001ffe67</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">magic2</span> <span class="o">=</span> <span class="mh">0x00087e67</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* f/7 MUTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_BACK_FUNC_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_BACK_FUNC_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_BACK_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_BACK_OP_FAIL, ZFAIL, ZPASS */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 00000003 tesla UNK143C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff0ff3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">magic2</span><span class="p">);</span>	<span class="cm">/* 001fffff tesla UNK0F78 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_BOUNDS_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 DEPTH_TEST_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_WRITE_ENABLE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f tesla UNK169C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_FRONT_FUNC_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_FRONT_FUNC_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_FRONT_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_FRONT_OP_FAIL, ZFAIL, ZPASS */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_FRONT_ENABLE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">IS_NVAAF</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_BACK_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK15B4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">);</span>		<span class="cm">/* 3ff/ff VIEW_VOLUME_CLIP_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff CLEAR_DEPTH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f ZETA_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 ZETA_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A3C */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x86</span> <span class="o">||</span> <span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x92</span> <span class="o">||</span> <span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x98</span> <span class="o">||</span> <span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ff, ffffffff, ffffffff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>	<span class="cm">/* 7 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x400</span><span class="p">);</span>	<span class="cm">/* fffffff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x300</span><span class="p">);</span>	<span class="cm">/* ffff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1001</span><span class="p">);</span>	<span class="cm">/* 1fff */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
				<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 0000000f UNK15C8 */</span>
			<span class="k">else</span>
				<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">);</span>	<span class="cm">/* ff */</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_BACK_FUNC_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_BACK_FUNC_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff0ff3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 00000003 tesla UNK143C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_BOUNDS_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 DEPTH_TEST_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_WRITE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_FRONT_FUNC_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_FRONT_FUNC_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_FRONT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_BACK_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK15B4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">);</span>		<span class="cm">/* 7f/ff VIEW_VOLUME_CLIP_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f ZETA_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 ZETA_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A3C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1900 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_BACK_FUNC_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_BACK_FUNC_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_BACK_FUNC_REF */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff DEPTH_BOUNDS */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_BOUNDS_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 DEPTH_TEST_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_WRITE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK0FB0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_FRONT_FUNC_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_FRONT_FUNC_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_FRONT_FUNC_REF */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_FRONT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_BACK_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">);</span>		<span class="cm">/* 7f/ff VIEW_VOLUME_CLIP_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff DEPTH_RANGE_NEAR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x3f800000</span><span class="p">);</span>	<span class="cm">/* ffffffff DEPTH_RANGE_FAR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f ZETA_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_BACK_FUNC_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_BACK_FUNC_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_BACK_FUNC_REF */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_BACK_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_BACK_OP_FAIL, ZFAIL, ZPASS */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff DEPTH_BOUNDS */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_BOUNDS_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 DEPTH_TEST_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_WRITE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff CLEAR_STENCIL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_FRONT_FUNC_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_FRONT_FUNC_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_FRONT_FUNC_REF */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_FRONT_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_FRONT_OP_FAIL, ZFAIL, ZPASS */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_FRONT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_BACK_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">);</span>		<span class="cm">/* 7f/ff VIEW_VOLUME_CLIP_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f ZETA_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">);</span>		<span class="cm">/* 0000003f UNK1590 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff0ff3, ffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK0FB0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0001ffff GP_BUILTIN_RESULT_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK15B4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f ZETA_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 ZETA_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff CLEAR_DEPTH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK19CC */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1001</span><span class="p">);</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xb</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000007 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 tesla UNK1534 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000007 MULTISAMPLE_SAMPLES_LOG2 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 BLEND_ENABLE */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffff0ff3 */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 3f/7f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 3f/7f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">);</span>		<span class="cm">/* 0000000f COLOR_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f COLOR_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 3f/7f */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 LOGIC_OP_ENABLE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 0000000f LOGIC_OP */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 000000ff */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 OPERATION */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ff/3ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 UNK0F90 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000007 BLEND_EQUATION_RGB, ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK133C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_SRC_RGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_DST_RGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_SRC_ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_DST_ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">magic2</span><span class="p">);</span>	<span class="cm">/* 001fffff tesla UNK0F78 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A3C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x0fac6881</span><span class="p">);</span>	<span class="cm">/* 0fffffff RT_CONTROL */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 tesla UNK12E4 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000007 IBLEND_EQUATION_RGB */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000007 IBLEND_EQUATION_ALPHA */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000001 IBLEND_UNK00 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>	<span class="cm">/* 0000001f IBLEND_FUNC_SRC_RGB */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f IBLEND_FUNC_DST_RGB */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>	<span class="cm">/* 0000001f IBLEND_FUNC_SRC_ALPHA */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f IBLEND_FUNC_DST_ALPHA */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 tesla UNK1140 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f tesla UNK169C */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 0000000f */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f tesla UNK169C */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 000003ff */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000007 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000007 MULTISAMPLE_SAMPLES_LOG2 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 tesla UNK1430 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff tesla UNK1A3C */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff CLEAR_COLOR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff BLEND_COLOR A R G B */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000fff eng2d UNK2B0 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000003ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 BLEND_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK133C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_SRC_RGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_DST_RGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000007 BLEND_EQUATION_RGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_SRC_ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_DST_ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000007 BLEND_EQUATION_ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK19C0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 LOGIC_OP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f LOGIC_OP */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 UNK12E4? NVA3+ only? */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000001 IBLEND_UNK00 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000007 IBLEND_EQUATION_RGB */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>	<span class="cm">/* 0000001f IBLEND_FUNC_SRC_RGB */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f IBLEND_FUNC_DST_RGB */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000007 IBLEND_EQUATION_ALPHA */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>	<span class="cm">/* 0000001f IBLEND_FUNC_SRC_ALPHA */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f IBLEND_FUNC_DST_ALPHA */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 tesla UNK15C4 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 tesla UNK1140 */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 3f/7f DST_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 DST_LINEAR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 PATTERN_COLOR_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff PATTERN_MONO_COLOR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 PATTERN_MONO_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff PATTERN_MONO_BITMAP */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 PATTERN_SELECT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff ROP */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff BETA1 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff BETA4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 OPERATION */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 10x ffffff, ffffff, ffffff, ffffff, 3 PATTERN */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_xfer_unk84xx</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">magic3</span><span class="p">;</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mh">0x50</span>:
		<span class="n">magic3</span> <span class="o">=</span> <span class="mh">0x1000</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x86</span>:
	<span class="k">case</span> <span class="mh">0x98</span>:
	<span class="k">case</span> <span class="mh">0xa8</span>:
	<span class="k">case</span> <span class="mh">0xaa</span>:
	<span class="k">case</span> <span class="mh">0xac</span>:
	<span class="k">case</span> <span class="mh">0xaf</span>:
		<span class="n">magic3</span> <span class="o">=</span> <span class="mh">0x1e00</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">magic3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 7f/ff[NVA0+] VP_REG_ALLOC_RESULT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 111/113[NVA0+] */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* fffffff VP_RESULT_MAP_1 up */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* f/1f[NVA3], fffffff/ffffffff[NVA0+] */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 7f/ff VP_REG_ALLOC_RESULT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 7f/ff VP_RESULT_MAP_SIZE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x03020100</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x00608080</span><span class="p">);</span>	<span class="cm">/* fffffff VP_RESULT_MAP_0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 111/113, 7f/ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 7f/ff VP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_REG_ALLOC_RESULT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>		<span class="cm">/* 0000ffff GP_VERTEX_OUTPUT_COUNT */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">magic3</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">magic3</span><span class="p">);</span>	<span class="cm">/* 00007fff tesla UNK141C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 7f/ff VP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 111/113 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff GP_RESULT_MAP_1 up */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000001f */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_REG_ALLOC_RESULT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>		<span class="cm">/* 0000ffff GP_VERTEX_OUTPUT_COUNT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x03020100</span><span class="p">);</span>	<span class="cm">/* ffffffff GP_RESULT_MAP_0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>		<span class="cm">/* 00000003 GP_OUTPUT_PRIMITIVE_TYPE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">magic3</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">magic3</span><span class="p">);</span>	<span class="cm">/* 7fff tesla UNK141C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 7f/ff VP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 PROVOKING_VERTEX_LAST */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 111/113 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>		<span class="cm">/* 00000003 GP_OUTPUT_PRIMITIVE_TYPE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 PROVOKING_VERTEX_LAST */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 tesla UNK13A0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 7f/ff VP_REG_ALLOC_RESULT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 111/113 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x94</span> <span class="o">||</span> <span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x96</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x1020</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 4 x (0x400 x 0xffffffff, ff, 0, 0, 0, 4 x ffffffff) */</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xa20</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 4 x (0x280 x 0xffffffff, ff, 0, 0, 0, 4 x ffffffff) */</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x210</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x410</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_RESULT_MAP_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>		<span class="cm">/* 00000003 GP_OUTPUT_PRIMITIVE_TYPE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 PROVOKING_VERTEX_LAST */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_xfer_tprop</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">magic1</span><span class="p">,</span> <span class="n">magic2</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">magic1</span> <span class="o">=</span> <span class="mh">0x3ff</span><span class="p">;</span>
		<span class="n">magic2</span> <span class="o">=</span> <span class="mh">0x00003e60</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">magic1</span> <span class="o">=</span> <span class="mh">0x7ff</span><span class="p">;</span>
		<span class="n">magic2</span> <span class="o">=</span> <span class="mh">0x001ffe67</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">magic1</span> <span class="o">=</span> <span class="mh">0x7ff</span><span class="p">;</span>
		<span class="n">magic2</span> <span class="o">=</span> <span class="mh">0x00087e67</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 ALPHA_TEST_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff ALPHA_TEST_REF */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 ALPHA_TEST_ENABLE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000000f UNK16A0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7/f MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_BACK_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_BACK_OP_FAIL, ZFAIL, ZPASS */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff BLEND_COLOR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK19C0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK0FDC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">);</span>		<span class="cm">/* 0000000f COLOR_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f COLOR_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_WRITE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 LOGIC_OP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ff[NV50]/3ff[NV84+] */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 00000007 FP_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mh">0xffff</span><span class="p">);</span>	<span class="cm">/* 0000ffff MSAA_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_FRONT_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 STENCIL_FRONT_OP_FAIL, ZFAIL, ZPASS */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_FRONT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_BACK_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00007fff WINDOW_OFFSET_XY */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK19CC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 SAMPLECNT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f ZETA_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 ZETA_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff COLOR_KEY */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 COLOR_KEY_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 COLOR_KEY_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff SIFC_BITMAP_COLOR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 SIFC_BITMAP_WRITE_BIT0_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 ALPHA_TEST_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 ALPHA_TEST_ENABLE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>	<span class="cm">/* 00000003 tesla UNK16B4 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 tesla UNK1298 */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000001 tesla UNK16B4 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 MULTISAMPLE_CTRL */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 BLEND_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_DST_ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000007 BLEND_EQUATION_ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_SRC_ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_DST_RGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000007 BLEND_EQUATION_RGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_SRC_RGB */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 UNK12E4 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000007 IBLEND_EQUATION_RGB */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000007 IBLEND_EQUATION_ALPHA */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 00000001 IBLEND_UNK00 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>	<span class="cm">/* 0000001f IBLEND_SRC_RGB */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f IBLEND_DST_RGB */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>	<span class="cm">/* 0000001f IBLEND_SRC_ALPHA */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f IBLEND_DST_ALPHA */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 UNK1140 */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK133C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff0ff3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 3f/7f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 3f/7f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x0fac6881</span><span class="p">);</span>	<span class="cm">/* 0fffffff RT_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 LOGIC_OP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ff/3ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 00000007 FP_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 UNK0F90 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 FRAMEBUFFER_SRGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 3f/7f DST_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 DST_LINEAR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 OPERATION */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xcf</span><span class="p">);</span>		<span class="cm">/* 000000ff SIFC_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xcf</span><span class="p">);</span>		<span class="cm">/* 000000ff DRAW_COLOR_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xcf</span><span class="p">);</span>		<span class="cm">/* 000000ff SRC_FORMAT */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f tesla UNK169C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A3C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7/f[NVA3] MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 BLEND_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_DST_ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000007 BLEND_EQUATION_ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_SRC_ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_DST_RGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000007 BLEND_EQUATION_RGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 0000001f BLEND_FUNC_SRC_RGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK133C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff0ff3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK19E0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 3f/7f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 3f/7f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x0fac6881</span><span class="p">);</span>	<span class="cm">/* 0fffffff RT_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">);</span>		<span class="cm">/* 0000000f COLOR_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f COLOR_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">magic2</span><span class="p">);</span>	<span class="cm">/* 001fffff tesla UNK0F78 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_BOUNDS_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 3f/7f DST_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 DST_LINEAR */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f tesla UNK169C */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ff */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 1, 7, 3ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 00000007 FP_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 UNK0F90 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_FRONT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 SAMPLECNT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f ZETA_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 ZETA_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A3C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7/f MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff0ff3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 3f/7f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 3f/7f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x0fac6881</span><span class="p">);</span>	<span class="cm">/* 0fffffff RT_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_BOUNDS_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_WRITE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 3f/7f DST_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 DST_LINEAR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000fffff BLIT_DU_DX_FRACT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0001ffff BLIT_DU_DX_INT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000fffff BLIT_DV_DY_FRACT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0001ffff BLIT_DV_DY_INT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ff/3ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">magic1</span><span class="p">);</span>	<span class="cm">/* 3ff/7ff tesla UNK0D68 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_FRONT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK15B4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f ZETA_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 ZETA_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A3C */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f tesla UNK169C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_COLOR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_GLOBAL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_LOCAL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_STACK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ff/3ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_DST */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7/f MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff0ff3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff RT_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff RT_LAYER_STRIDE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff RT_ADDRESS_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>		<span class="cm">/* 0000007f RT_TILE_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 3f/7f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 3f/7f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x0fac6881</span><span class="p">);</span>	<span class="cm">/* 0fffffff RT_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mh">0x400</span><span class="p">);</span>		<span class="cm">/* 0fffffff RT_HORIZ */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mh">0x300</span><span class="p">);</span>		<span class="cm">/* 0000ffff RT_VERT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00001fff RT_ARRAY_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">);</span>		<span class="cm">/* 0000000f COLOR_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f COLOR_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">);</span>		<span class="cm">/* 00000fff DST_TILE_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 3f/7f DST_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>		<span class="cm">/* 0001ffff DST_HEIGHT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000007ff DST_LAYER */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 DST_LINEAR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff DST_ADDRESS_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff DST_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">);</span>		<span class="cm">/* 0007ffff DST_PITCH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>		<span class="cm">/* 0001ffff DST_WIDTH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>		<span class="cm">/* 00000003 tesla UNK15AC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ff/3ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0001ffff GP_BUILTIN_RESULT_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 UNK0F90 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f tesla UNK169C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">magic2</span><span class="p">);</span>	<span class="cm">/* 001fffff tesla UNK0F78 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7/f MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff0ff3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 00000003 tesla UNK143C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x0fac6881</span><span class="p">);</span>	<span class="cm">/* 0fffffff RT_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_ZETA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_BOUNDS_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_WRITE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff, ff/3ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0001ffff GP_BUILTIN_RESULT_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_FRONT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff STENCIL_FRONT_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK15B4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff ZETA_LAYER_STRIDE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 000000ff ZETA_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff ZETA_ADDRESS_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 00000007 ZETA_TILE_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f ZETA_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 ZETA_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x400</span><span class="p">);</span>		<span class="cm">/* 0fffffff ZETA_HORIZ */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x300</span><span class="p">);</span>		<span class="cm">/* 0000ffff ZETA_VERT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1001</span><span class="p">);</span>	<span class="cm">/* 00001fff ZETA_ARRAY_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A3C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7/f MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff0ff3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 3f/7f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 3f/7f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x0fac6881</span><span class="p">);</span>	<span class="cm">/* 0fffffff RT_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">);</span>		<span class="cm">/* 0000000f COLOR_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f COLOR_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ff/3ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 BLEND_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 UNK0F90 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 FRAMEBUFFER_SRGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 LOGIC_OP_ENABLE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 UNK1140 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f tesla UNK169C */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7/f MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff0ff3 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x0fac6881</span><span class="p">);</span>	<span class="cm">/* fffffff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">magic2</span><span class="p">);</span>	<span class="cm">/* 001fffff tesla UNK0F78 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_BOUNDS_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_WRITE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 3f/7f DST_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK0FB0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ff/3ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 00000007 FP_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 STENCIL_FRONT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK15B4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK19CC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000007 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 SAMPLECNT_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000000f ZETA_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 ZETA_ENABLE */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f tesla UNK169C */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 0000000f tesla UNK15C8 */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A3C */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7/f, 1, ffff0ff3 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xfac6881</span><span class="p">);</span>	<span class="cm">/* fffffff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 1, 1, 1, 3ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 7 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 1 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 1 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7, f */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 1 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7/f */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x9</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 1 */</span>
		<span class="k">else</span>
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 1 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff0ff3 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 1 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 7f */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7f */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xfac6881</span><span class="p">);</span>	<span class="cm">/* fffffff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">);</span>		<span class="cm">/* f */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* f */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>		<span class="cm">/* 7f */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 1 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 1, 7, 3ff, 3, 7 */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 UNK1140 */</span>
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f tesla UNK169C */</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_xfer_tex</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 1 LINKED_TSC. yes, 2. */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">!=</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 1ffff BLIT_DU_DX_INT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* fffff BLIT_DU_DX_FRACT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 1ffff BLIT_DV_DY_INT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* fffff BLIT_DV_DY_FRACT */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 3 BLIT_CONTROL */</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 3ff, 1 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x2a712488</span><span class="p">);</span>	<span class="cm">/* ffffffff SRC_TIC_0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff SRC_TIC_1 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x4085c000</span><span class="p">);</span>	<span class="cm">/* ffffffff SRC_TIC_2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">);</span>		<span class="cm">/* ffffffff SRC_TIC_3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span>		<span class="cm">/* ffffffff SRC_TIC_4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10100</span><span class="p">);</span>	<span class="cm">/* ffffffff SRC_TIC_5 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x02800000</span><span class="p">);</span>	<span class="cm">/* ffffffff SRC_TIC_6 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff SRC_TIC_7 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 turing UNK358 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff tesla UNK1A34? */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 turing UNK37C tesla UNK1690 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 BLIT_CONTROL */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000001 turing UNK32C tesla UNK0F94 */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IS_NVAAF</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* ffffffff tesla UNK1A34? */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 000003ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 000003ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 tesla UNK1664 / turing UNK03E8 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 00000003 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* 000003ff */</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x6</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A34 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_TEXTURE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 0000ffff DMA_SRC */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_xfer_unk8cxx</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7/f MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7, ffff0ff3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_WRITE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x04e3bfdf</span><span class="p">);</span>	<span class="cm">/* ffffffff UNK0D64 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x04e3bfdf</span><span class="p">);</span>	<span class="cm">/* ffffffff UNK0DF4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK15B4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 LINE_STIPPLE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x00ffff00</span><span class="p">);</span>	<span class="cm">/* 00ffffff LINE_STIPPLE_PATTERN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK0F98 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* 0000001f tesla UNK169C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 tesla UNK1668 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 LINE_STIPPLE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x00ffff00</span><span class="p">);</span>	<span class="cm">/* 00ffffff LINE_STIPPLE_PATTERN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 POLYGON_SMOOTH_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 7/f MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK1658 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 LINE_SMOOTH_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffff0ff3 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 DEPTH_WRITE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK15B4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 POINT_SPRITE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 tesla UNK165C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x30201000</span><span class="p">);</span>	<span class="cm">/* ffffffff tesla UNK1670 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x70605040</span><span class="p">);</span>	<span class="cm">/* ffffffff tesla UNK1670 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xb8a89888</span><span class="p">);</span>	<span class="cm">/* ffffffff tesla UNK1670 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xf8e8d8c8</span><span class="p">);</span>	<span class="cm">/* ffffffff tesla UNK1670 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 VERTEX_TWO_SIDE_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1a</span><span class="p">);</span>		<span class="cm">/* 0000001f POLYGON_MODE */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_xfer_tp</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">nv50_graph_construct_xfer_unk84xx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_xfer_tprop</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_xfer_tex</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_xfer_unk8cxx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">nv50_graph_construct_xfer_tex</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_xfer_tprop</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_xfer_unk8cxx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="n">nv50_graph_construct_xfer_unk84xx</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_xfer_mpc</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">mpcnt</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="mh">0x98</span>:
		<span class="k">case</span> <span class="mh">0xaa</span>:
			<span class="n">mpcnt</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mh">0x50</span>:
		<span class="k">case</span> <span class="mh">0x84</span>:
		<span class="k">case</span> <span class="mh">0x86</span>:
		<span class="k">case</span> <span class="mh">0x92</span>:
		<span class="k">case</span> <span class="mh">0x94</span>:
		<span class="k">case</span> <span class="mh">0x96</span>:
		<span class="k">case</span> <span class="mh">0xa8</span>:
		<span class="k">case</span> <span class="mh">0xac</span>:
			<span class="n">mpcnt</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mh">0xa0</span>:
		<span class="k">case</span> <span class="mh">0xa3</span>:
		<span class="k">case</span> <span class="mh">0xa5</span>:
		<span class="k">case</span> <span class="mh">0xaf</span>:
			<span class="n">mpcnt</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">mpcnt</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1404 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x80007004</span><span class="p">);</span>	<span class="cm">/* ffffffff tesla UNK12B0 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x04000400</span><span class="p">);</span>	<span class="cm">/* ffffffff */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">);</span>	<span class="cm">/* 00007fff tesla UNK152C */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">);</span>	<span class="cm">/* 0000ffff tesla UNK0D60 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ff/3ff */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* ffffffff tesla UNK1A30 */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x86</span> <span class="o">||</span> <span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x98</span> <span class="o">||</span> <span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0xa8</span> <span class="o">||</span> <span class="n">IS_NVAAF</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xe00</span><span class="p">);</span>		<span class="cm">/* 7fff */</span>
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1e00</span><span class="p">);</span>	<span class="cm">/* 7fff */</span>
		<span class="p">}</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 000000ff VP_REG_ALLOC_TEMP */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 LINKED_TSC */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mh">0x1000</span><span class="p">);</span>	<span class="cm">/* 7fff tesla UNK141C */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 000000ff GP_REG_ALLOC_TEMP */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 GP_ENABLE */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>		<span class="cm">/* 000000ff FP_REG_ALLOC_TEMP */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 00000003 REG_MODE */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVAAF</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xb</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span>
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xc</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
		<span class="k">else</span>
			<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0xa</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>	<span class="cm">/* RO */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x08100c12</span><span class="p">);</span>		<span class="cm">/* 1fffffff FP_INTERPOLANT_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ff/3ff */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&gt;=</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1fe21</span><span class="p">);</span>	<span class="cm">/* 0003ffff tesla UNK0FAC */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 7fff, 0, 0 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 tesla UNK1534 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 7/f MULTISAMPLE_SAMPLES_LOG2 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mh">0xffff</span><span class="p">);</span>		<span class="cm">/* 0000ffff MSAA_MASK */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>			<span class="cm">/* 00000001 LANES32 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10001</span><span class="p">);</span>		<span class="cm">/* 00ffffff BLOCK_ALLOC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10001</span><span class="p">);</span>		<span class="cm">/* ffffffff BLOCKDIM_XY */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>			<span class="cm">/* 0000ffff BLOCKDIM_Z */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff SHARED_SIZE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x1fe21</span><span class="p">);</span>		<span class="cm">/* 1ffff/3ffff[NVA0+] tesla UNk0FAC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff tesla UNK1A34 */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000001f tesla UNK169C */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ff/3ff */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 1 LINKED_TSC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ff FP_ADDRESS_HIGH */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* ffffffff FP_ADDRESS_LOW */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x08100c12</span><span class="p">);</span>		<span class="cm">/* 1fffffff FP_INTERPOLANT_CTRL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>			<span class="cm">/* 00000007 FP_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 000000ff FRAG_COLOR_CLAMP_EN */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>			<span class="cm">/* 00000003 REG_MODE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>			<span class="cm">/* 0000007f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 0000007f RT_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000007 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0xfac6881</span><span class="p">);</span>		<span class="cm">/* 0fffffff RT_CONTROL */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000003 MULTISAMPLE_CTRL */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>		<span class="cm">/* 00000003 tesla UNK16B4 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 ALPHA_TEST_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000007 ALPHA_TEST_FUNC */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 FRAMEBUFFER_SRGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>			<span class="cm">/* ffffffff tesla UNK1400 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 BLEND_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000001 LOGIC_OP_ENABLE */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>			<span class="cm">/* 0000001f BLEND_FUNC_SRC_RGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>			<span class="cm">/* 0000001f BLEND_FUNC_DST_RGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>			<span class="cm">/* 00000007 BLEND_EQUATION_RGB */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>			<span class="cm">/* 0000001f BLEND_FUNC_SRC_ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>			<span class="cm">/* 0000001f BLEND_FUNC_DST_ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>			<span class="cm">/* 00000007 BLEND_EQUATION_ALPHA */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>			<span class="cm">/* 00000001 UNK133C */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_NVA3F</span><span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK12E4 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 0000001f IBLEND_FUNC_SRC_RGB */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000001f IBLEND_FUNC_DST_RGB */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000007 IBLEND_EQUATION_RGB */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>		<span class="cm">/* 0000001f IBLEND_FUNC_SRC_ALPHA */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 0000001f IBLEND_FUNC_DST_ALPHA */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000007 IBLEND_EQUATION_ALPHA */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>		<span class="cm">/* 00000001 IBLEND_UNK00 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000003 tesla UNK1928 */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>		<span class="cm">/* 00000001 UNK1140 */</span>
	<span class="p">}</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 00000003 tesla UNK0F90 */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>			<span class="cm">/* 000000ff FP_RESULT_COUNT */</span>
	<span class="cm">/* XXX: demagic this part some day */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x50</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x3a0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0x94</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x3a2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0x98</span> <span class="o">||</span> <span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">==</span> <span class="mh">0xaa</span><span class="p">)</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x39f</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x3a3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">);</span>			<span class="cm">/* 3f/7f DST_FORMAT */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>			<span class="cm">/* 7 OPERATION */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>			<span class="cm">/* 1 DST_LINEAR */</span>
	<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">nv50_graph_construct_xfer2</span><span class="p">(</span><span class="k">struct</span> <span class="n">nouveau_grctx</span> <span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">drm_nouveau_private</span> <span class="o">*</span><span class="n">dev_priv</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">dev_private</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">offset</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">units</span> <span class="o">=</span> <span class="n">nv_rd32</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="mh">0x1540</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="n">offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">+</span><span class="mh">0x3f</span><span class="p">)</span><span class="o">&amp;~</span><span class="mh">0x3f</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev_priv</span><span class="o">-&gt;</span><span class="n">chipset</span> <span class="o">&lt;</span> <span class="mh">0xa0</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">i</span><span class="p">;</span>
			<span class="cm">/* that little bugger belongs to csched. No idea</span>
<span class="cm">			 * what it&#39;s doing here. */</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
				<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x08100c12</span><span class="p">);</span> <span class="cm">/* FP_INTERPOLANT_CTRL */</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">i</span><span class="p">))</span>
				<span class="n">nv50_graph_construct_xfer_mpc</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
				<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="cm">/* Strand 0: TPs 0, 1 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span><span class="p">;</span>
		<span class="cm">/* that little bugger belongs to csched. No idea</span>
<span class="cm">		 * what it&#39;s doing here. */</span>
		<span class="n">xf_emit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x08100c12</span><span class="p">);</span> <span class="cm">/* FP_INTERPOLANT_CTRL */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">))</span>
			<span class="n">nv50_graph_construct_xfer_mpc</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">))</span>
			<span class="n">nv50_graph_construct_xfer_mpc</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>

		<span class="cm">/* Strand 1: TPs 2, 3 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">))</span>
			<span class="n">nv50_graph_construct_xfer_mpc</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">))</span>
			<span class="n">nv50_graph_construct_xfer_mpc</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>

		<span class="cm">/* Strand 2: TPs 4, 5, 6 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">))</span>
			<span class="n">nv50_graph_construct_xfer_mpc</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">))</span>
			<span class="n">nv50_graph_construct_xfer_mpc</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">))</span>
			<span class="n">nv50_graph_construct_xfer_mpc</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>

		<span class="cm">/* Strand 3: TPs 7, 8, 9 */</span>
		<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">3</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">))</span>
			<span class="n">nv50_graph_construct_xfer_mpc</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">))</span>
			<span class="n">nv50_graph_construct_xfer_mpc</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">units</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">9</span><span class="p">))</span>
			<span class="n">nv50_graph_construct_xfer_mpc</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="n">size</span><span class="p">)</span>
			<span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">size</span> <span class="o">*</span> <span class="mi">8</span><span class="p">;</span>
	<span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">ctxvals_pos</span><span class="o">+</span><span class="mh">0x3f</span><span class="p">)</span><span class="o">&amp;~</span><span class="mh">0x3f</span><span class="p">;</span>
	<span class="n">cp_lsr</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">offset</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_SET_XFER_POINTER</span><span class="p">);</span>
	<span class="n">cp_lsr</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">size</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_SEEK_2</span><span class="p">);</span>
	<span class="n">cp_out</span> <span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">CP_XFER_2</span><span class="p">);</span>
	<span class="n">cp_wait</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">XFER</span><span class="p">,</span> <span class="n">BUSY</span><span class="p">);</span>
<span class="p">}</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
