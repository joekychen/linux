f | i2o_scsi.c | s | 20K | 692 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | device.c | s | 14K | 485 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | driver.c | s | 9.4K | 315 | Tejun Heo | tj@kernel.org | 1296556962 |  | i2o: use alloc_workqueue() instead of create_workqueue()  This is an identity conversion.  Signed-off-by: Tejun Heo <tj@kernel.org> Cc: Markus Lidel <Markus.Lidel@shadowconnect.com>
f | Makefile | g | 516B |  | Alan Cox | alan@redhat.com | 1224181298 |  | i2o: Fix 32/64bit DMA locking  The I2O ioctls assume 32bits.  In itself that is fine as they are old cards and nobody uses 64bit.  However on LKML it was noted this assumption is also made for allocated memory and is unsafe on 64bit systems.  Fixing this is a mess.  It turns out there is tons of crap buried in a header file that does racy 32/64bit filtering on the masks.  So we: - Verify all callers of the racy code can sleep (i2o_dma_[re]alloc) - Move the code into a new i2o/memory.c file - Remove the gfp_mask argument so nobody can try and misuse the function - Wrap a mutex around the problem area (a single mutex is easy to do and   none of this is performance relevant) - Switch the remaining problem kmalloc holdout to use i2o_dma_alloc  Cc: Markus Lidel <Markus.Lidel@shadowconnect.com> Cc: Vasily Averin <vvs@sw.ru> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | i2o_block.c | s | 30K | 1039 | Tejun Heo | tj@kernel.org | 1303414385 |  | block: unexport DISK_EVENT_MEDIA_CHANGE for legacy/fringe drivers  In-kernel disk event polling doesn't matter for legacy/fringe drivers and may lead to infinite event loop if ->check_events() implementation generates events on level condition instead of edge.  Now that block layer supports suppressing exporting unlisted events, simply leaving disk->events cleared allows these drivers to keep the internal revalidation behavior intact while avoiding weird interactions with userland event handler.  Signed-off-by: Tejun Heo <tj@kernel.org> Cc: Kay Sievers <kay.sievers@vrfy.org> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | pci.c | s | 12K | 425 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103913 |  | drivers/message: Add module.h to i2o/pci.c  This file really needs the full module.h header file present, but was just getting it implicitly before.  Fix it up in advance so we avoid build failures once the cleanup commit is present.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | iop.c | s | 32K | 1037 | Joe Perches | joe@perches.com | 1307710536 |  | treewide: Convert uses of struct resource to resource_size(ptr)  Several fixes as well where the +1 was missing.  Done via coccinelle scripts like:  @@ struct resource *ptr; @@  - ptr->end - ptr->start + 1 + resource_size(ptr)  and some grep and typing.  Mostly uncompiled, no cross-compilers.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | bus-osm.c | s | 4.0K | 146 | Randy Dunlap | randy.dunlap@oracle.com | 1165509580 |  | [PATCH] kernel-doc: fix fusion and i2o docs  Correct lots of typos, kernel-doc warnings, & kernel-doc usage in fusion and i2o drivers.  Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
f | memory.c | s | 8.1K | 275 | Yang Hongyang | yanghy@cn.fujitsu.com | 1239118271 |  | dma-mapping: replace all DMA_32BIT_MASK macro with DMA_BIT_MASK(32)  Replace all DMA_32BIT_MASK macro with DMA_BIT_MASK(32)  Signed-off-by: Yang Hongyang<yanghy@cn.fujitsu.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | debug.c | s | 10K | 436 | Vasily Averin | vvs@sw.ru | 1184692986 |  | i2o debug output cleanup  Fix output of i2o debug messages, extra KERN_ are removed.  Signed-off-by: Vasily Averin <vvs@sw.ru> Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk> Cc: Markus Lidel <Markus.Lidel@shadowconnect.com> Acked-by: Kirill Korotaev <dev@openvz.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | i2o_block.h | s | 3.3K | 93 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | README.ioctl | g | 13K |  | Justin P. Mattock | justinmattock@gmail.com | 1305015381 |  | treewide: fix a few typos in comments  - kenrel -> kernel - whetehr -> whether - ttt -> tt - sss -> ss  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | i2o_proc.c | s | 51K | 1805 | Paul Gortmaker | paul.gortmaker@windriver.com | 1337295973 |  | MCA: delete all remaining traces of microchannel bus support.  Hardware with MCA bus is limited to 386 and 486 class machines that are now 20+ years old and typically with less than 32MB of memory.  A quick search on the internet, and you see that even the MCA hobbyist/enthusiast community has lost interest in the early 2000 era and never really even moved ahead from the 2.4 kernels to the 2.6 series.  This deletes anything remaining related to CONFIG_MCA from core kernel code and from the x86 architecture.  There is no point in carrying this any further into the future.  One complication to watch for is inadvertently scooping up stuff relating to machine check, since there is overlap in the TLA name space (e.g. arch/x86/boot/mca.c).  Cc: Thomas Gleixner <tglx@linutronix.de> Cc: James Bottomley <JBottomley@Parallels.com> Cc: x86@kernel.org Acked-by: Ingo Molnar <mingo@elte.hu> Acked-by: H. Peter Anvin <hpa@zytor.com> Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | exec-osm.c | s | 16K | 518 | Julia Lawall | julia@diku.dk | 1281542345 |  | drivers/message/i2o/exec-osm.c: add missing mutex_unlock  Add a mutex_unlock missing on the error path.  The semantic match that finds this problem is as follows: (http://coccinelle.lip6.fr/)  // <smpl> @@ expression E1; @@  * mutex_lock(E1,...);   <+... when != E1   if (...) {     ... when != E1 *   return ...;   }   ...+> * mutex_unlock(E1,...); // </smpl>  Signed-off-by: Julia Lawall <julia@diku.dk> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | core.h | s | 1.8K | 54 | Ralf Baechle | ralf@linux-mips.org | 1166029547 |  | [PATCH] i2o_exec_exit and i2o_driver_exit should not be __exit.  i2o_exec_exit and i2o_driver_exit were marked as __exit which is a bug because both are invoked from __init and __exit functions.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org> Cc: Markus Lidel <Markus.Lidel@shadowconnect.com> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
f | config-osm.c | s | 2.1K | 76 | Markus Lidel | Markus.Lidel@shadowconnect.com | 1136565234 |  | [PATCH] I2O: Optimizing  - make i2o_iop_free() static inline (from Adrian Bunk)  - changed kmalloc() + memset(0) into kzalloc()  Signed-off-by: Markus Lidel <Markus.Lidel@shadowconnect.com> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
f | i2o_config.c | s | 26K | 955 | Jesper Juhl | jj@chaosbits.net | 1295447097 |  | drivers/message/, i2o: Remove unnecessary casts of void ptr returning alloc function return values  The [vk][cmz]alloc(_node) family of functions return void pointers which it's completely unnecessary/pointless to cast to other pointer types since that happens implicitly.  This patch removes such casts from drivers/message/  Signed-off-by: Jesper Juhl <jj@chaosbits.net> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | Kconfig | g | 4.0K |  | Stephen Rothwell | sfr@canb.auug.org.au | 1184601942 |  | Introduce CONFIG_VIRT_TO_BUS  Make some offending drivers depend on it and set CONFIG_ARCH_NO_VIRT_TO_BUS for ppc64 so that we don't build those drivers.  This gets PowerPC allmodconfig and allyesconfig much closer to building.  Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au> Cc: Al Viro <viro@ftp.linux.org.uk> Acked-by: David Miller <davem@davemloft.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | README | g | 2.3K |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
