f | mptlan.c | s | 42K | 1239 | Kashyap, Desai | kashyap.desai@lsi.com | 1280326067 |  | [SCSI] mptfusion: Extra debug prints added relavent to Device missing delay error handling  Adding function name in original debug prints and few more debug prints are added.  Signed-off-by: Kashyap Desai <kashyap.desai@lsi.com> Cc: Stable Tree <stable@kernel.org> Signed-off-by: James Bottomley <James.Bottomley@suse.de>
f | mptlan.h | s | 4.6K | 107 | Paul Gortmaker | paul.gortmaker@windriver.com | 1337127796 |  | tokenring: delete all remaining driver support  This represents the mass deletion of the of the tokenring support.  It gets rid of:   - the net/tr.c which the drivers depended on   - the drivers/net component   - the Kbuild infrastructure around it   - any tokenring related CONFIG_ settings in any defconfigs   - the tokenring headers in the include/linux dir   - the firmware associated with the tokenring drivers.   - any associated token ring documentation.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | mptdebug.h | s | 7.0K | 241 | Kashyap, Desai | kashyap.desai@lsi.com | 1244586091 |  | [SCSI] mpt fusion: Fixing 1078 data corruption issue for 36GB memory region  The reason for this change is there is a data corruption when four different physical memory regions in the 36GB to 37GB region are accessed. This is only affecting 1078.  The solution is we need to use different addressing when filling in the scatter gather table for the effected memory regions.  So instead of snooping on all four different memory holes, we treat any physical addresses in the 36GB address with the same algorithm.  The fix is explained below 1) Ensure that the message frames are NOT located in the trouble region. There is no remapping available for message frames, they must be allocated outside the problem region. 2) Ensure that Sense buffers are NOT in the trouble region. There is no remapping available. 3) Walk through the SGE entries and if any are inside the trouble region    then they need to be remapped as discussed below. 	1) Set the Local Address bit in the SGE Flags field.   	MPI_SGE_FLAGS_LOCAL_ADDRESS   	2) Ensure we are using 64-bit SGEs   	3) Set MSb (Bit 63) of the 64-bit address, this will indicate buffer 	location is Host Memory.  Signed-off-by: Kashyap Desai <kadesai@lsi.com> Signed-off-by: James Bottomley <James.Bottomley@HansenPartnership.com>
f | Makefile | g | 466B |  | matt mooney | mfm@muteddisk.com | 1300367134 |  | message: change to new flag variable  Replace EXTRA_CFLAGS with ccflags-y.  Signed-off-by: matt mooney <mfm@muteddisk.com> Acked-by: WANG Cong <xiyou.wangcong@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
d | lsi |  | 14 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1326220568 |  | 
f | mptsas.c | s | 147K | 4776 | Chandrakala Chavva | cchavva@caviumnetworks.com | 1323932250 |  | [SCSI] mptsas: Add device ID for SAS1068_820XELP.  Signed-off-by: Chandrakala Chavva <cchavva@caviumnetworks.com> Signed-off-by: David Daney <david.daney@cavium.com> Acked-by: "Nandigama, Nagalakshmi" <Nagalakshmi.Nandigama@lsi.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | mptscsih.h | s | 6.1K | 121 | kashyap.desai@lsi.com | kashyap.desai@lsi.com | 1314455716 |  | [SCSI] mptfusion: Better handling of DEAD IOC PCI-E Link down error condition  Find Non-Operation IOC and remove it from OS: Detecting dead(non-functional) ioc will be done reading doorbell register value from fault reset thread, which has been called from work thread context after each specific interval. If doorbell value is 0xFFFFFFFF, it will be considered as IOC is non-operational and marked as dead ioc.  Once Dead IOC has been detected, it will be removed at pci layer using "pci_remove_bus_device" API.  Signed-off-by: Kashyap Desai <kashyap.desai@lsi.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | mptctl.h | s | 13K | 417 | Prakash, Sathya | sathya.prakash@lsi.com | 1212676037 |  | [SCSI] mpt fusion : Updated copyright statment with 2008 included  Updating copyright statement to include the year 2008  Signed-off-by: Sathya Prakash <sathya.prakash@lsi.com> Signed-off-by: James Bottomley <James.Bottomley@HansenPartnership.com>
f | mptbase.c | s | 237K | 7499 | Linus Torvalds | torvalds@linux-foundation.org | 1338513018 |  | Merge branch 'akpm' (Andrew's patch-bomb)  Merge misc patches from Andrew Morton:   - the "misc" tree - stuff from all over the map   - checkpatch updates   - fatfs   - kmod changes   - procfs   - cpumask   - UML   - kexec   - mqueue   - rapidio   - pidns   - some checkpoint-restore feature work.  Reluctantly.  Most of it    delayed a release.  I'm still rather worried that we don't have a    clear roadmap to completion for this work.  * emailed from Andrew Morton <akpm@linux-foundation.org>: (78 patches)   kconfig: update compression algorithm info   c/r: prctl: add ability to set new mm_struct::exe_file   c/r: prctl: extend PR_SET_MM to set up more mm_struct entries   c/r: procfs: add arg_start/end, env_start/end and exit_code members to /proc/$pid/stat   syscalls, x86: add __NR_kcmp syscall   fs, proc: introduce /proc/<pid>/task/<tid>/children entry   sysctl: make kernel.ns_last_pid control dependent on CHECKPOINT_RESTORE   aio/vfs: cleanup of rw_copy_check_uvector() and compat_rw_copy_check_uvector()   eventfd: change int to __u64 in eventfd_signal()   fs/nls: add Apple NLS   pidns: make killed children autoreap   pidns: use task_active_pid_ns in do_notify_parent   rapidio/tsi721: add DMA engine support   rapidio: add DMA engine support for RIO data transfers   ipc/mqueue: add rbtree node caching support   tools/selftests: add mq_perf_tests   ipc/mqueue: strengthen checks on mqueue creation   ipc/mqueue: correct mq_attr_ok test   ipc/mqueue: improve performance of send/recv   selftests: add mq_open_tests   ...
f | mptfc.c | s | 41K | 1333 | Jeff Garzik | jeff@garzik.org | 1289943203 |  | SCSI host lock push-down  Move the mid-layer's ->queuecommand() invocation from being locked with the host lock to being unlocked to facilitate speeding up the critical path for drivers who don't need this lock taken anyway.  The patch below presents a simple SCSI host lock push-down as an equivalent transformation.  No locking or other behavior should change with this patch.  All existing bugs and locking orders are preserved.  Additionally, add one parameter to queuecommand, 	struct Scsi_Host * and remove one parameter from queuecommand, 	void (*done)(struct scsi_cmnd *)  Scsi_Host* is a convenient pointer that most host drivers need anyway, and 'done' is redundant to struct scsi_cmnd->scsi_done.  Minimal code disturbance was attempted with this change.  Most drivers needed only two one-line modifications for their host lock push-down.  Signed-off-by: Jeff Garzik <jgarzik@redhat.com> Acked-by: James Bottomley <James.Bottomley@suse.de> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mptspi.c | s | 42K | 1354 | Kashyap, Desai | kashyap.desai@lsi.com | 1304269070 |  | [SCSI] mptfusion: Adding inline data padding support for TAPE drive.  Adding support for inline data padding for TAPE drive when running U320.  [jejb: whitespace fixes] Signed-off-by: Kashyap Desai <kashyap.desai@lsi.com> Signed-off-by: James Bottomley <James.Bottomley@suse.de>
f | Kconfig | g | 3.3K |  | Eric Moore | eric.moore@lsi.com | 1192214933 |  | [SCSI] mpt fusion: Kconfig cleanup  Adding 949X, 949E, and 1078 to Kconfig.  Adding "depends on FUSION" required in the FUSION_LOGGING section, and fixing a spelling error.  Signed-off-by: Eric Moore <Eric.Moore@lsi.com> Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
f | mptscsih.c | s | 92K | 2949 | nagalakshmi.nandigama@lsi.com | nagalakshmi.nandigama@lsi.com | 1316690108 |  | [SCSI] mptfusion: Added check for SILI bit in READ_16 CDB for DATA UNDERRUN ERRATA  When READ_16 command is issued, the setting of SILI Bit in CDB is confirmed and if SILI bit is off, the processing of relavent Errata is executed.  Added code for checking SILI bit for READ_16 as described in "SSC-4".  Signed-off-by: Nagalakshmi Nandigama <nagalakshmi.nandigama@lsi.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | mptbase.h | s | 31K | 889 | Ferenc Wagner | wferi@niif.hu | 1323932249 |  | [SCSI] fusion: ensure NUL-termination of MptCallbacksName elements  Using strlcpy instead of memcpy makes the strlen() calls superfluous and also ensures zero-termination of the copied string. At the same time get rid of the magic constant 50.  Actually, I can't see why copying the callback name is necessary instead of simply storing a pointer to it (just like to the callback function itself), but that goes beyond the scope of this fix.  Signed-off-by: Ferenc Wagner <wferi@niif.hu> Acked-by: "Nandigama, Nagalakshmi" <Nagalakshmi.Nandigama@lsi.com> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | mptctl.c | s | 86K | 2687 | Sergei Shtylyov | sshtylyov@ru.mvista.com | 1338511766 |  | drivers/message/fusion: use pci_dev->revision  This driver uses PCI_CLASS_REVISION instead of PCI_REVISION_ID, so it wasn't converted by 44c10138fd4bbc ("PCI: Change all drivers to use pci_device->revision").  In one case, it even reads PCI revision ID without using it -- that code is now removed...  Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com> Acked-by: "Nandigama, Nagalakshmi" <Nagalakshmi.Nandigama@lsi.com> Cc: Eric Moore <eric.moore@lsi.com> Acked-by: Auke Kok <auke-jan.h.kok@intel.com> Cc: Greg KH <greg@kroah.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mptsas.h | s | 6.6K | 173 | Kashyap, Desai | kashyap.desai@lsi.com | 1280250152 |  | [SCSI] mptfusion: Added sanity to check B_T mapping for device before adding to OS  Added sanity check before treating any device is a valid device. It is possible that firmware can have device page0 in its table, but that devicemay not be available in topology. Device will be available in topology only if there is Bus Target mapping is done in firmware. Driver will always check B_T mapping of firmware before reporting device to upper layer.  Signed-off-by: Kashyap Desai <kashyap.desai@lsi.com> Signed-off-by: James Bottomley <James.Bottomley@suse.de>
