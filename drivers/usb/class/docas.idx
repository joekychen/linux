f | cdc-wdm.c | s | 24K | 911 | Bjørn Mork | bjorn@mork.no | 1339542343 |  | USB: cdc-wdm: Add Vodafone/Huawei K5005 support  Tested-by: Thomas Schäfer <tschaefer@t-online.de> Signed-off-by: Bjørn Mork <bjorn@mork.no> Cc: stable <stable@vger.kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | cdc-acm.c | s | 46K | 1502 | Otto Meta | otto.patches@sister-shadow.de | 1339719213 |  | usb: cdc-acm: fix devices not unthrottled on open  Currently CDC-ACM devices stay throttled when their TTY is closed while throttled, stalling further communication attempts after the next open.  Unthrottling during open/activate got lost starting with kernel 3.0.0 and this patch reintroduces it.  Signed-off-by: Otto Meta <otto.patches@sister-shadow.de> Cc: stable <stable@vger.kernel.org> Acked-by: Johan Hovold <jhovold@gmail.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | usbtmc.c | s | 26K | 918 | Greg Kroah-Hartman | gregkh@suse.de | 1321637642 |  | USB: convert drivers/usb/* to use module_usb_driver()  This converts the drivers in drivers/usb/* to use the module_usb_driver() macro which makes the code smaller and a bit simpler.  Added bonus is that it removes some unneeded kernel log messages about drivers loading and/or unloading.  Cc: Simon Arlott <cxacru@fire.lp0.eu> Cc: Duncan Sands <duncan.sands@free.fr> Cc: Matthieu CASTET <castet.matthieu@free.fr> Cc: Stanislaw Gruszka <stf_xl@wp.pl> Cc: Pete Zaitcev <zaitcev@redhat.com> Cc: Oliver Neukum <oliver@neukum.name> Cc: Juergen Stuber <starblue@users.sourceforge.net> Cc: Cesar Miquel <miquel@df.uba.ar> Cc: Matthew Dharm <mdharm-usb@one-eyed-alien.net> Cc: Matthew Wilcox <willy@linux.intel.com> Cc: Sarah Sharp <sarah.a.sharp@linux.intel.com> Cc: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com> Cc: Felipe Balbi <balbi@ti.com> Cc: Lucas De Marchi <lucas.demarchi@profusion.mobi> Cc: Michael Hund <mhund@ld-didactic.de> Cc: Zack Parsons <k3bacon@gmail.com> Cc: Melchior FRANZ <mfranz@aon.at> Cc: Tomoki Sekiyama <tomoki.sekiyama@gmail.com> Cc: Dan Carpenter <error27@gmail.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | Makefile | g | 221B |  | Greg Kroah-Hartman | gregkh@suse.de | 1224279651 |  | USB: add USB test and measurement class driver  This driver was originaly written by Stefan Kopp, but massively reworked by Greg for submission.  Thanks to Felipe Balbi <me@felipebalbi.com> for lots of work in cleaning up this driver.  Thanks to Oliver Neukum <oliver@neukum.org> for reviewing previous versions and pointing out problems.   Cc: Stefan Kopp <stefan_kopp@agilent.com> Cc: Marcel Janssen <korgull@home.nl> Cc: Felipe Balbi <me@felipebalbi.com> Cc: Oliver Neukum <oliver@neukum.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | usblp.c | s | 39K | 1240 | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1335933211 |  | USB: usblp.c: remove dbg() usage  dbg() was a very old USB-specific macro that should no longer be used. This patch removes it from being used in the driver and uses dev_dbg() instead.  CC: Pete Zaitcev <zaitcev@redhat.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | cdc-acm.h | s | 3.5K | 112 | Havard Skinnemoen | hskinnemoen@google.com | 1323476298 |  | USB: cdc-acm: Fix potential deadlock (lockdep warning)  Rework the locking and lifecycle management in the cdc-acm driver. Instead of using a global mutex to prevent the 'acm' object from being freed, use the tty_port kref to keep the device alive when either the USB side or TTY side is still active.  This allows us to use the global mutex purely for protecting the acm_table, while use acm->mutex to guard against disconnect during TTY port activation and shutdown.  The USB-side kref is taken during port initialization in probe(), and released at the end of disconnect(). The TTY-side kref is taken in install() and released in cleanup(). On disconnect, tty_vhangup() is called instead of tty_hangup() to ensure the TTY hangup processing is completed before the USB device is taken down.  The TTY open and close handlers have been gutted and replaced with tty_port_open() and tty_port_close() respectively. The driver-specific code which used to be there was spread across install(), activate() and shutdown().  Reported-by: Dave Jones <davej@redhat.com> Cc: Alan Cox <alan@linux.intel.com> Cc: Jiri Slaby <jslaby@suse.cz> Signed-off-by: Havard Skinnemoen <hskinnemoen@google.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | Kconfig | g | 1.5K |  | Greg Kroah-Hartman | gregkh@suse.de | 1224279651 |  | USB: add USB test and measurement class driver  This driver was originaly written by Stefan Kopp, but massively reworked by Greg for submission.  Thanks to Felipe Balbi <me@felipebalbi.com> for lots of work in cleaning up this driver.  Thanks to Oliver Neukum <oliver@neukum.org> for reviewing previous versions and pointing out problems.   Cc: Stefan Kopp <stefan_kopp@agilent.com> Cc: Marcel Janssen <korgull@home.nl> Cc: Felipe Balbi <me@felipebalbi.com> Cc: Oliver Neukum <oliver@neukum.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
