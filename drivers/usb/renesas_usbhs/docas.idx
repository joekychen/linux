f | fifo.c | s | 26K | 956 | Linus Torvalds | torvalds@linux-foundation.org | 1333060497 |  | Merge branch 'next' of git://git.infradead.org/users/vkoul/slave-dma  Pull slave-dmaengine update from Vinod Koul:  "This includes the cookie cleanup by Russell, the addition of context   parameter for dmaengine APIs, more arm dmaengine driver cleanup by   moving code to dmaengine, this time for imx by Javier and pl330 by   Boojin along with the usual driver fixes."  Fix up some fairly trivial conflicts with various other cleanups.  * 'next' of git://git.infradead.org/users/vkoul/slave-dma: (67 commits)   dmaengine: imx: fix the build failure on x86_64   dmaengine: i.MX: Fix merge of cookie branch.   dmaengine: i.MX: Add support for interleaved transfers.   dmaengine: imx-dma: use 'dev_dbg' and 'dev_warn' for messages.   dmaengine: imx-dma: remove 'imx_dmav1_baseaddr' and 'dma_clk'.   dmaengine: imx-dma: remove unused arg of imxdma_sg_next.   dmaengine: imx-dma: remove internal structure.   dmaengine: imx-dma: remove 'resbytes' field of 'internal' structure.   dmaengine: imx-dma: remove 'in_use' field of 'internal' structure.   dmaengine: imx-dma: remove sg member from internal structure.   dmaengine: imx-dma: remove 'imxdma_setup_sg_hw' function.   dmaengine: imx-dma: remove 'imxdma_config_channel_hw' function.   dmaengine: imx-dma: remove 'imxdma_setup_mem2mem_hw' function.   dmaengine: imx-dma: remove dma_mode member of internal structure.   dmaengine: imx-dma: remove data member from internal structure.   dmaengine: imx-dma: merge old dma-v1.c with imx-dma.c   dmaengine: at_hdmac: add slave config operation   dmaengine: add context parameter to prep_slave_sg and prep_dma_cyclic   dmaengine/dma_slave: introduce inline wrappers   dma: imx-sdma: Treat firmware messages as warnings instead of erros   ...
f | pipe.c | s | 14K | 600 | Felipe Balbi | balbi@ti.com | 1324466683 |  | usb: renesas: pipe: convert a long if into a XOR operation  This is just a minor optimization for the long if we have on the driver.  When we want to check that one input is true and the other must be false, the bitwise XOR operator will achieve that for us.  Tested-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | common.c | s | 14K | 535 | Shimoda, Yoshihiro | yoshihiro.shimoda.uh@renesas.com | 1327397576 |  | usb: renesas_usbhs: add IRQ resource decoding for IRQF_SHARED  In case of the SH7757, the irq number of USB module and SUDMAC are the same. So, we have to set the IRQF_SHARED in such a case.  Signed-off-by: Yoshihiro Shimoda <yoshihiro.shimoda.uh@renesas.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | Makefile | g | 287B |  | Kuninori Morimoto | kuninori.morimoto.gx@renesas.com | 1318527714 |  | usb: gadget: renesas_usbhs: fixup driver compile style  In current renesas-usbhs, there was inconsistency about the style of kernel module or built-in. This patch solve it.  [ balbi@ti.com : fix compile issue when building modules ]  Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | mod_gadget.c | s | 24K | 843 | Shimoda, Yoshihiro | yoshihiro.shimoda.uh@renesas.com | 1336135985 |  | usb: renesas_usbhs: gadget: add support for set_selfpowered  The previous code always set to USB_DEVICE_SELF_POWERED in GET_STATUS. So, this patch adds set_selfpowered().  Signed-off-by: Yoshihiro Shimoda <yoshihiro.shimoda.uh@renesas.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | Kconfig | g | 465B |  | Felipe Balbi | balbi@ti.com | 1318527714 |  | usb: gadget: renesas_usbhs: drop dependency  that driver can compile cleanly on x86 without any issues.  Signed-off-by: Felipe Balbi <balbi@ti.com>
f | fifo.h | s | 2.8K | 88 | Guennadi Liakhovetski | g.liakhovetski@gmx.de | 1329219893 |  | usb: renesas: fix scheduling in atomic context bug  The current renesas_usbhs driver triggers  BUG: scheduling while atomic: ksoftirqd/0/3/0x00000102  with enabled CONFIG_DEBUG_ATOMIC_SLEEP, by submitting DMA transfers from an atomic (tasklet) context, which is not supported by the shdma dmaengine driver. Fix it by switching to a work.  Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | pipe.h | s | 3.5K | 96 | Kuninori Morimoto | kuninori.morimoto.gx@renesas.com | 1323683115 |  | usb: renesas_usbhs: add usbhs_pipe_is_stall()  This is preparation for chapter 9 test  Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | common.h | s | 9.7K | 284 | Shimoda, Yoshihiro | yoshihiro.shimoda.uh@renesas.com | 1327397576 |  | usb: renesas_usbhs: add IRQ resource decoding for IRQF_SHARED  In case of the SH7757, the irq number of USB module and SUDMAC are the same. So, we have to set the IRQF_SHARED in such a case.  Signed-off-by: Yoshihiro Shimoda <yoshihiro.shimoda.uh@renesas.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | mod.c | s | 7.9K | 301 | Shimoda, Yoshihiro | yoshihiro.shimoda.uh@renesas.com | 1327397576 |  | usb: renesas_usbhs: add IRQ resource decoding for IRQF_SHARED  In case of the SH7757, the irq number of USB module and SUDMAC are the same. So, we have to set the IRQF_SHARED in such a case.  Signed-off-by: Yoshihiro Shimoda <yoshihiro.shimoda.uh@renesas.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | mod.h | s | 4.1K | 146 | Kuninori Morimoto | kuninori.morimoto.gx@renesas.com | 1321300283 |  | usb: gadget: renesas_usbhs: fixup section mismatch warning  Fix up the following section mismatch warnings:  WARNING: drivers/usb/renesas_usbhs/renesas_usbhs.o(.text+0xf5d): Section mismatch in reference from the function usbhs_mod_probe() to the function .devinit.text:usbhs_mod_host_probe() The function usbhs_mod_probe() references the function __devinit usbhs_mod_host_probe().  This is often because usbhs_mod_probe lacks a __devinit annotation or the annotation of usbhs_mod_host_probe is wrong.  WARNING: drivers/usb/renesas_usbhs/renesas_usbhs.o(.text+0xfd7): Section mismatch in reference from the function usbhs_mod_probe() to the function .devexit.text:usbhs_mod_host_remove() The function usbhs_mod_probe() references a function in an exit section.  Often the function usbhs_mod_host_remove() has valid usage outside the exit section and the fix is to remove the __devexit annotation of usbhs_mod_host_remove.  WARNING: drivers/usb/renesas_usbhs/renesas_usbhs.o(.text+0x1005): Section mismatch in reference from the function usbhs_mod_remove() to the function .devexit.text:usbhs_mod_host_remove() The function usbhs_mod_remove() references a function in an exit section.  Often the function usbhs_mod_host_remove() has valid usage outside the exit section and the fix is to remove the __devexit annotation of usbhs_mod_host_remove.  Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com> Signed-off-by: Felipe Balbi <balbi@ti.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | mod_host.c | s | 36K | 1282 | Linus Torvalds | torvalds@linux-foundation.org | 1326139787 |  | Merge branch 'usb-next' of git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/usb  * 'usb-next' of git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/usb: (232 commits)   USB: Add USB-ID for Multiplex RC serial adapter to cp210x.c   xhci: Clean up 32-bit build warnings.   USB: update documentation for usbmon   usb: usb-storage doesn't support dynamic id currently, the patch disables the feature to fix an oops   drivers/usb/class/cdc-acm.c: clear dangling pointer   drivers/usb/dwc3/dwc3-pci.c: introduce missing kfree   drivers/usb/host/isp1760-if.c: introduce missing kfree   usb: option: add ZD Incorporated HSPA modem   usb: ch9: fix up MaxStreams helper   USB: usb-skeleton.c: cleanup open_count   USB: usb-skeleton.c: fix open/disconnect race   xhci: Properly handle COMP_2ND_BW_ERR   USB: remove dead code from suspend/resume path   USB: add quirk for another camera   drivers: usb: wusbcore: Fix dependency for USB_WUSB   xhci: Better debugging for critical host errors.   xhci: Be less verbose during URB cancellation.   xhci: Remove debugging about ring structure allocation.   xhci: Remove debugging about toggling cycle bits.   xhci: Remove debugging for individual transfers.   ...
