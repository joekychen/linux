<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › usb › host › whci › whcd.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>whcd.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Wireless Host Controller (WHC) private header.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2007 Cambridge Silicon Radio Ltd.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Public License version</span>
<span class="cm"> * 2 as published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA</span>
<span class="cm"> * 02110-1301, USA.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __WHCD_H</span>
<span class="cp">#define __WHCD_H</span>

<span class="cp">#include &lt;linux/uwb/whci.h&gt;</span>
<span class="cp">#include &lt;linux/uwb/umc.h&gt;</span>
<span class="cp">#include &lt;linux/workqueue.h&gt;</span>

<span class="cp">#include &quot;whci-hc.h&quot;</span>

<span class="cm">/* Generic command timeout. */</span>
<span class="cp">#define WHC_GENCMD_TIMEOUT_MS 100</span>

<span class="k">struct</span> <span class="n">whc_dbg</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">whc</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">wusbhc</span> <span class="n">wusbhc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">umc_dev</span> <span class="o">*</span><span class="n">umc</span><span class="p">;</span>

	<span class="n">resource_size_t</span> <span class="n">base_phys</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">irq</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">n_devices</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">n_keys</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">n_mmc_ies</span><span class="p">;</span>

	<span class="n">u64</span> <span class="o">*</span><span class="n">pz_list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">dn_buf_entry</span> <span class="o">*</span><span class="n">dn_buf</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">di_buf_entry</span> <span class="o">*</span><span class="n">di_buf</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">pz_list_dma</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">dn_buf_dma</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">di_buf_dma</span><span class="p">;</span>

	<span class="n">spinlock_t</span>   <span class="n">lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span> <span class="n">mutex</span><span class="p">;</span>

	<span class="kt">void</span> <span class="o">*</span>            <span class="n">gen_cmd_buf</span><span class="p">;</span>
	<span class="n">dma_addr_t</span>        <span class="n">gen_cmd_buf_dma</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">cmd_wq</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">workqueue_struct</span> <span class="o">*</span><span class="n">workqueue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span>       <span class="n">dn_work</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">dma_pool</span> <span class="o">*</span><span class="n">qset_pool</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">async_list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">async_removed_list</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">async_list_wq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">async_work</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">periodic_list</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">periodic_removed_list</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">periodic_list_wq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">periodic_work</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">whc_dbg</span> <span class="o">*</span><span class="n">dbg</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define wusbhc_to_whc(w) (container_of((w), struct whc, wusbhc))</span>

<span class="cm">/**</span>
<span class="cm"> * struct whc_std - a software TD.</span>
<span class="cm"> * @urb: the URB this sTD is for.</span>
<span class="cm"> * @offset: start of the URB&#39;s data for this TD.</span>
<span class="cm"> * @len: the length of data in the associated TD.</span>
<span class="cm"> * @ntds_remaining: number of TDs (starting from this one) in this transfer.</span>
<span class="cm"> *</span>
<span class="cm"> * @bounce_buf: a bounce buffer if the std was from an urb with a sg</span>
<span class="cm"> * list that could not be mapped to qTDs directly.</span>
<span class="cm"> * @bounce_sg: the first scatterlist element bounce_buf is for.</span>
<span class="cm"> * @bounce_offset: the offset into bounce_sg for the start of bounce_buf.</span>
<span class="cm"> *</span>
<span class="cm"> * Queued URBs may require more TDs than are available in a qset so we</span>
<span class="cm"> * use a list of these &quot;software TDs&quot; (sTDs) to hold per-TD data.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">whc_std</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">urb</span> <span class="o">*</span><span class="n">urb</span><span class="p">;</span>
	<span class="kt">size_t</span> <span class="n">len</span><span class="p">;</span>
	<span class="kt">int</span>    <span class="n">ntds_remaining</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">whc_qtd</span> <span class="o">*</span><span class="n">qtd</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list_node</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">num_pointers</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">dma_addr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">whc_page_list_entry</span> <span class="o">*</span><span class="n">pl_virt</span><span class="p">;</span>

	<span class="kt">void</span> <span class="o">*</span><span class="n">bounce_buf</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">scatterlist</span> <span class="o">*</span><span class="n">bounce_sg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">bounce_offset</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct whc_urb - per URB host controller structure.</span>
<span class="cm"> * @urb: the URB this struct is for.</span>
<span class="cm"> * @qset: the qset associated to the URB.</span>
<span class="cm"> * @dequeue_work: the work to remove the URB when dequeued.</span>
<span class="cm"> * @is_async: the URB belongs to async sheduler or not.</span>
<span class="cm"> * @status: the status to be returned when calling wusbhc_giveback_urb.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">whc_urb</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">urb</span> <span class="o">*</span><span class="n">urb</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">qset</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">dequeue_work</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">is_async</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * whc_std_last - is this sTD the URB&#39;s last?</span>
<span class="cm"> * @std: the sTD to check.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">bool</span> <span class="nf">whc_std_last</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc_std</span> <span class="o">*</span><span class="n">std</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">std</span><span class="o">-&gt;</span><span class="n">ntds_remaining</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">enum</span> <span class="n">whc_update</span> <span class="p">{</span>
	<span class="n">WHC_UPDATE_ADDED</span>   <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">WHC_UPDATE_REMOVED</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">WHC_UPDATE_UPDATED</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* init.c */</span>
<span class="kt">int</span> <span class="n">whc_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">whc_clean_up</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">);</span>

<span class="cm">/* hw.c */</span>
<span class="kt">void</span> <span class="n">whc_write_wusbcmd</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">,</span> <span class="n">u32</span> <span class="n">val</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">whc_do_gencmd</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="n">u32</span> <span class="n">cmd</span><span class="p">,</span> <span class="n">u32</span> <span class="n">params</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">addr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">whc_hw_error</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">reason</span><span class="p">);</span>

<span class="cm">/* wusb.c */</span>
<span class="kt">int</span> <span class="n">whc_wusbhc_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">wusbhc</span> <span class="o">*</span><span class="n">wusbhc</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">whc_wusbhc_stop</span><span class="p">(</span><span class="k">struct</span> <span class="n">wusbhc</span> <span class="o">*</span><span class="n">wusbhc</span><span class="p">,</span> <span class="kt">int</span> <span class="n">delay</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">whc_mmcie_add</span><span class="p">(</span><span class="k">struct</span> <span class="n">wusbhc</span> <span class="o">*</span><span class="n">wusbhc</span><span class="p">,</span> <span class="n">u8</span> <span class="n">interval</span><span class="p">,</span> <span class="n">u8</span> <span class="n">repeat_cnt</span><span class="p">,</span>
		  <span class="n">u8</span> <span class="n">handle</span><span class="p">,</span> <span class="k">struct</span> <span class="n">wuie_hdr</span> <span class="o">*</span><span class="n">wuie</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">whc_mmcie_rm</span><span class="p">(</span><span class="k">struct</span> <span class="n">wusbhc</span> <span class="o">*</span><span class="n">wusbhc</span><span class="p">,</span> <span class="n">u8</span> <span class="n">handle</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">whc_bwa_set</span><span class="p">(</span><span class="k">struct</span> <span class="n">wusbhc</span> <span class="o">*</span><span class="n">wusbhc</span><span class="p">,</span> <span class="n">s8</span> <span class="n">stream_index</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">uwb_mas_bm</span> <span class="o">*</span><span class="n">mas_bm</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">whc_dev_info_set</span><span class="p">(</span><span class="k">struct</span> <span class="n">wusbhc</span> <span class="o">*</span><span class="n">wusbhc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">wusb_dev</span> <span class="o">*</span><span class="n">wusb_dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">whc_set_num_dnts</span><span class="p">(</span><span class="k">struct</span> <span class="n">wusbhc</span> <span class="o">*</span><span class="n">wusbhc</span><span class="p">,</span> <span class="n">u8</span> <span class="n">interval</span><span class="p">,</span> <span class="n">u8</span> <span class="n">slots</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">whc_set_ptk</span><span class="p">(</span><span class="k">struct</span> <span class="n">wusbhc</span> <span class="o">*</span><span class="n">wusbhc</span><span class="p">,</span> <span class="n">u8</span> <span class="n">port_idx</span><span class="p">,</span> <span class="n">u32</span> <span class="n">tkid</span><span class="p">,</span>
		<span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">ptk</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">key_size</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">whc_set_gtk</span><span class="p">(</span><span class="k">struct</span> <span class="n">wusbhc</span> <span class="o">*</span><span class="n">wusbhc</span><span class="p">,</span> <span class="n">u32</span> <span class="n">tkid</span><span class="p">,</span>
		<span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">gtk</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">key_size</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">whc_set_cluster_id</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="n">u8</span> <span class="n">bcid</span><span class="p">);</span>

<span class="cm">/* int.c */</span>
<span class="n">irqreturn_t</span> <span class="n">whc_int_handler</span><span class="p">(</span><span class="k">struct</span> <span class="n">usb_hcd</span> <span class="o">*</span><span class="n">hcd</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">whc_dn_work</span><span class="p">(</span><span class="k">struct</span> <span class="n">work_struct</span> <span class="o">*</span><span class="n">work</span><span class="p">);</span>

<span class="cm">/* asl.c */</span>
<span class="kt">void</span> <span class="n">asl_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">asl_stop</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">asl_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">asl_clean_up</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">asl_urb_enqueue</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">urb</span> <span class="o">*</span><span class="n">urb</span><span class="p">,</span> <span class="n">gfp_t</span> <span class="n">mem_flags</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">asl_urb_dequeue</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">urb</span> <span class="o">*</span><span class="n">urb</span><span class="p">,</span> <span class="kt">int</span> <span class="n">status</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">asl_qset_delete</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">qset</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">scan_async_work</span><span class="p">(</span><span class="k">struct</span> <span class="n">work_struct</span> <span class="o">*</span><span class="n">work</span><span class="p">);</span>

<span class="cm">/* pzl.c */</span>
<span class="kt">int</span>  <span class="n">pzl_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">pzl_clean_up</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">pzl_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">pzl_stop</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">pzl_urb_enqueue</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">urb</span> <span class="o">*</span><span class="n">urb</span><span class="p">,</span> <span class="n">gfp_t</span> <span class="n">mem_flags</span><span class="p">);</span>
<span class="kt">int</span>  <span class="n">pzl_urb_dequeue</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">urb</span> <span class="o">*</span><span class="n">urb</span><span class="p">,</span> <span class="kt">int</span> <span class="n">status</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">pzl_qset_delete</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">qset</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">scan_periodic_work</span><span class="p">(</span><span class="k">struct</span> <span class="n">work_struct</span> <span class="o">*</span><span class="n">work</span><span class="p">);</span>

<span class="cm">/* qset.c */</span>
<span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">qset_alloc</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="n">gfp_t</span> <span class="n">mem_flags</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qset_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">qset</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">get_qset</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">urb</span> <span class="o">*</span><span class="n">urb</span><span class="p">,</span> <span class="n">gfp_t</span> <span class="n">mem_flags</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qset_delete</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">qset</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qset_clear</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">qset</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qset_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">qset</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qset_add_urb</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">qset</span><span class="p">,</span> <span class="k">struct</span> <span class="n">urb</span> <span class="o">*</span><span class="n">urb</span><span class="p">,</span>
		 <span class="n">gfp_t</span> <span class="n">mem_flags</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qset_free_std</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">whc_std</span> <span class="o">*</span><span class="n">std</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qset_remove_urb</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">qset</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">urb</span> <span class="o">*</span><span class="n">urb</span><span class="p">,</span> <span class="kt">int</span> <span class="n">status</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">process_halted_qtd</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">qset</span><span class="p">,</span>
			       <span class="k">struct</span> <span class="n">whc_qtd</span> <span class="o">*</span><span class="n">qtd</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">process_inactive_qtd</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">qset</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">whc_qtd</span> <span class="o">*</span><span class="n">qtd</span><span class="p">);</span>
<span class="k">enum</span> <span class="n">whc_update</span> <span class="n">qset_add_qtds</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">qset</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qset_remove_complete</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="k">struct</span> <span class="n">whc_qset</span> <span class="o">*</span><span class="n">qset</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">pzl_update</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">wusbcmd</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">asl_update</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">wusbcmd</span><span class="p">);</span>

<span class="cm">/* debug.c */</span>
<span class="kt">void</span> <span class="n">whc_dbg_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">whc_dbg_clean_up</span><span class="p">(</span><span class="k">struct</span> <span class="n">whc</span> <span class="o">*</span><span class="n">whc</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* #ifndef __WHCD_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
