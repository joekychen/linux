f | composite.c | s | 46K | 1491 | Andrzej Pietrasiewicz | andrzej.p@samsung.com | 1336677763 |  | usb: gadget: composite: add iSerialNumber to usb_composite_driver  Add iSerialNumber to usb_composite_driver to allow setting a default value. This is useful when the module is compiled-in. Then the composite_bind is executed at kernel boot and string id for iSerialNumber can be overridden even if there is no iSerialNumber kernel commandline parameter. If the string id is not overridden, then get_string will never attempt to look for the alternative string contents using cdev->serial_override.  Signed-off-by: Andrzej Pietrasiewicz <andrzej.p@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | amd5536udc.h | s | 16K | 504 | Ido Shayevitz | idos@codeaurora.org | 1336135972 |  | usb: gadget: Update amd5536udc to use usb_endpoint_descriptor inside the struct usb_ep  Remove redundant pointer to struct usb_endpoint_descriptor.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | f_uvc.h | s | 768B | 20 | Klaus Schwarzkopf | schwarzkopf@sensortherm.de | 1315609209 |  | usb gadget: clean up FSF boilerplate text  remove the following two paragraphs as they are not needed:  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc.,59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.  Signed-off-by: Klaus Schwarzkopf <schwarzkopf@sensortherm.de> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | g_zero.h | s | 809B | 20 | Paul Zimmerman | Paul.Zimmerman@synopsys.com | 1336135988 |  | usb: gadget: add isochronous support to gadget zero  Add two isochronous endpoints to the gadget zero source/sink function. They are enabled by selecting alternate interface 1, so by default they are not enabled. Module parameters for setting all the isoc endpoint characteristics are also provided.  Signed-off-by: Pratyush Anand <pratyush.anand@st.com> Signed-off-by: Paul Zimmerman <paulz@synopsys.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | Makefile | g | 2.4K |  | Linus Torvalds | torvalds@linux-foundation.org | 1337727046 |  | 
f | uvc.h | s | 4.6K | 156 | Laurent Pinchart | laurent.pinchart@ideasonboard.com | 1335300937 |  | usb gadget: uvc: uvc_request_data::length field must be signed  The field is used to pass the UVC request data length, but can also be used to signal an error when setting it to a negative value. Switch from unsigned int to __s32.  Reported-by: Fernandez Gonzalo <gfernandez@copreci.es> Signed-off-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com> Cc: stable <stable@vger.kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | ncm.c | s | 6.1K | 191 | Klaus Schwarzkopf | schwarzkopf@sensortherm.de | 1315609209 |  | usb gadget: clean up FSF boilerplate text  remove the following two paragraphs as they are not needed:  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc.,59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.  Signed-off-by: Klaus Schwarzkopf <schwarzkopf@sensortherm.de> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | net2280.h | s | 8.1K | 261 | Klaus Schwarzkopf | schwarzkopf@sensortherm.de | 1315609209 |  | usb gadget: clean up FSF boilerplate text  remove the following two paragraphs as they are not needed:  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc.,59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.  Signed-off-by: Klaus Schwarzkopf <schwarzkopf@sensortherm.de> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | f_midi.c | s | 25K | 838 | Jesper Juhl | jj@chaosbits.net | 1330734131 |  | Allocate correct size (portably) in drivers/usb/gadget/f_midi.c::f_midi_bind()  As the coverity checker puts it:  "Passing argument "sizeof (midi_function) /*8*/" to function "kcalloc" and then casting the return value to "struct usb_descriptor_header **" is suspicious. ... In this particular case sizeof(struct usb_descriptor_header **) happens to be equal to sizeof(struct usb_descriptor_header *), but this is not a portable assumption."  I believe we really do intend to use 'sizeof(*midi_function)' here, so this patch makes that change.  Signed-off-by: Jesper Juhl <jj@chaosbits.net> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | at91_udc.h | s | 5.7K | 142 | Ido Shayevitz | idos@codeaurora.org | 1336135973 |  | usb: gadget: Update at91_udc to use usb_endpoint_descriptor inside the struct usb_ep  Remove redundant pointer to struct usb_endpoint_descriptor.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | f_serial.c | s | 9.1K | 267 | Sebastian Andrzej Siewior | bigeasy@linutronix.de | 1328775096 |  | usb: gadget: add usb3.0 descriptors to serial gadgets  This patch adds SS descriptors to the ACM & generic serial gadget. The ACM part was tested with minicom + dummy + send / receive files over ttyACM <=> ttyGS0. The generic serial part (f_serial) was not tested (haven't found a driver on the host side). The nokia & multi gadget use HS at most.  Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | pxa27x_udc.h | s | 18K | 454 | Heikki Krogerus | heikki.krogerus@linux.intel.com | 1329132876 |  | usb: otg: Rename otg_transceiver to usb_phy  This is the first step in separating USB transceivers from USB OTG utilities.  Includes fixes to IMX code from Sascha Hauer.  Signed-off-by: Heikki Krogerus <heikki.krogerus@linux.intel.com> Acked-by: Sascha Hauer <s.hauer@pengutronix.de> Acked-by: Pavankumar Kondeti <pkondeti@codeaurora.org> Acked-by: Li Yang <leoli@freescale.com> Acked-by: Alan Stern <stern@rowland.harvard.edu> Acked-by: Igor Grinberg <grinberg@compulab.co.il> Reviewed-by: Marek Vasut <marek.vasut@gmail.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | mv_udc.h | s | 9.5K | 268 | Ido Shayevitz | idos@codeaurora.org | 1336135977 |  | usb: gadget: Update mv_udc to use usb_endpoint_descriptor inside the struct usb_ep  Remove redundant pointer to struct usb_endpoint_descriptor.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | m66592-udc.c | s | 43K | 1507 | Ido Shayevitz | idos@codeaurora.org | 1336135976 |  | usb: gadget: Update m66592-udc to use usb_endpoint_descriptor inside the struct usb_ep  Remove redundant pointer to struct usb_endpoint_descriptor.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | ndis.h | s | 1.0K | 41 | Linus Walleij | linus.walleij@linaro.org | 1336849342 |  | usb/net: rndis: break out <linux/rndis.h> defines  As a first step to consolidate the RNDIS implementations, break out a common file with all the #defines and move it to <linux/rndis.h>.  This also deletes the immediate duplicated defines in the <linux/rndis.h> file that yields a lot of compilation warnings.  Reviewed-by: Haiyang Zhang <haiyangz@microsoft.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: David S. Miller <davem@davemloft.net>
f | uvc_queue.c | s | 14K | 504 | Bhupesh Sharma | bhupesh.sharma@st.com | 1334083562 |  | [media] usb: gadget/uvc: Remove non-required locking from 'uvc_queue_next_buffer' routine  This patch removes the non-required spinlock acquire/release calls on 'queue_irqlock' from 'uvc_queue_next_buffer' routine.  This routine is called from 'video->encode' function (which translates to either 'uvc_video_encode_bulk' or 'uvc_video_encode_isoc') in 'uvc_video.c'. As, the 'video->encode' routines are called with 'queue_irqlock' already held, so acquiring a 'queue_irqlock' again in 'uvc_queue_next_buffer' routine causes a spin lock recursion.  Signed-off-by: Bhupesh Sharma <bhupesh.sharma@st.com> Acked-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | lpc32xx_udc.c | s | 88K | 2964 | Alexandre Pereira da Silva | aletes.xgr@gmail.com | 1340360140 |  | usb: gadget: lpc32xx_udc: fix build error with debugfs enabled  If CONFIG_USB_GADGET_DEBUG_FILES is enabled, lpc32xx_udc breaks compilation because of a missing include file.  Signed-off-by: Alexandre Pereira da Silva <aletes.xgr@gmail.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | ether.c | s | 11K | 345 | Rusty Russell | rusty@rustcorp.com.au | 1326409340 |  | module_param: make bool parameters really bool (drivers & misc)  module_param(bool) used to counter-intuitively take an int.  In fddd5201 (mid-2009) we allowed bool or int/unsigned int using a messy trick.  It's time to remove the int/unsigned int option.  For this version it'll simply give a warning, but it'll break next kernel version.  Acked-by: Mauro Carvalho Chehab <mchehab@redhat.com> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | imx_udc.c | s | 37K | 1296 | Sebastian Andrzej Siewior | sebastian@breakpoint.cc | 1336135982 |  | usb: gadget: imx_udc: convert to new style start/stop  This patches converts the driver into the new style start/stop interface. As a result the driver no longer uses the static global controller variable in start/stop code. I kept the gloval controller variable because it keeps init simple. Compile tested only.  Signed-off-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | cdc2.c | s | 6.3K | 205 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103885 |  | usb: Add module.h to drivers/usb consumers who really use it.  The situation up to this point meant that module.h was pretty much everywhere, regardless of whether you asked for it or not. We are fixing that, so give the USB folks who want it an actual include of it.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | s3c-hsotg.h | s | 11K | 312 | Lukasz Majewski | l.majewski@samsung.com | 1336135997 |  | usb:hsotg:samsung: Remove the S3C_ prefix from registers definition.  This code removes the S3C_ prefix from s3c-hsotg driver. This change provides more architecture independent code.  Signed-off-by: Lukasz Majewski <l.majewski@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | gadget_chips.h | s | 5.1K | 138 | Roland Stigge | stigge@antcom.de | 1335893695 |  | USB: gadget driver for LPC32xx  This patch adds a USB gadget driver for the LPC32xx ARM SoC.  Signed-off-by: Roland Stigge <stigge@antcom.de> Acked-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | rndis.h | s | 4.8K | 196 | Linus Walleij | linus.walleij@linaro.org | 1336849342 |  | usb/net: rndis: break out <linux/rndis.h> defines  As a first step to consolidate the RNDIS implementations, break out a common file with all the #defines and move it to <linux/rndis.h>.  This also deletes the immediate duplicated defines in the <linux/rndis.h> file that yields a lot of compilation warnings.  Reviewed-by: Haiyang Zhang <haiyangz@microsoft.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: David S. Miller <davem@davemloft.net>
f | u_uac1.c | s | 7.6K | 284 | Jassi Brar | jaswinder.singh@linaro.org | 1329293388 |  | usb: gadget: Rename audio function to uac1  The extant USB-Audio function driver complies to UAC_1 spec. So name the files accordingly, paving way for inclusion of a new UAC_2 specified driver.  Signed-off-by: Yadi Brar <yadi.brar01@gmail.com> Signed-off-by: Jassi Brar <jaswinder.singh@linaro.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | fsl_qe_udc.h | s | 12K | 360 | Ben Collins | bcollins@ubuntu.com | 1339497149 |  | usb: gadget: Complete fsl qe/udc driver conversion  commit ec39e2ae (usb: gadget: Update fsl_qe_udc to use usb_endpoint_descriptor inside the struct usb_ep) did not completely convert the fsl gadget drivers to use the desc in usb_ep as described in commit messages.  Fix the macros that were still referencing the old pointer.  Signed-off-by: Ben Collins <bcollins@ubuntu.com> Cc: Ido Shayevitz <idos@codeaurora.org>  [ balbi@ti.com : brush up commit log a bit ]  Signed-off-by: Felipe Balbi <balbi@ti.com>
f | fsl_qe_udc.c | s | 63K | 2308 | Ido Shayevitz | idos@codeaurora.org | 1338822945 |  | usb: gadget: fsl_qe_udc: Remove unneeded condition  The removed condition is always true, since the endpoint descriptor is set prior to calling the enable endpoint.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | pxa25x_udc.h | s | 6.4K | 202 | Ido Shayevitz | idos@codeaurora.org | 1336135978 |  | usb: gadget: Update pxa25x_udc to use usb_endpoint_descriptor inside the struct usb_ep  Remove redundant pointer to struct usb_endpoint_descriptor.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | f_ncm.c | s | 36K | 1164 | Klaus Schwarzkopf | schwarzkopf@sensortherm.de | 1315609209 |  | usb gadget: clean up FSF boilerplate text  remove the following two paragraphs as they are not needed:  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc.,59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.  Signed-off-by: Klaus Schwarzkopf <schwarzkopf@sensortherm.de> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | f_loopback.c | s | 11K | 353 | Paul Zimmerman | Paul.Zimmerman@synopsys.com | 1336135988 |  | usb: gadget: add isochronous support to gadget zero  Add two isochronous endpoints to the gadget zero source/sink function. They are enabled by selecting alternate interface 1, so by default they are not enabled. Module parameters for setting all the isoc endpoint characteristics are also provided.  Signed-off-by: Pratyush Anand <pratyush.anand@st.com> Signed-off-by: Paul Zimmerman <paulz@synopsys.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | fusb300_udc.h | s | 23K | 612 | Ido Shayevitz | idos@codeaurora.org | 1336135975 |  | usb: gadget: Update fusb300_udc to use usb_endpoint_descriptor inside the struct usb_ep  Remove redundant pointer to struct usb_endpoint_descriptor.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | tcm_usb_gadget.c | s | 59K | 2090 | Sebastian Andrzej Siewior | bigeasy@linutronix.de | 1336602359 |  | usb-gadget: Initial merge of target module for UASP + BOT  This fabric uses the target framework to provide a usb gadget device.  This gadget supports the USB Attached SCSI Protocol (UASP) and Bulk Only Transfers (BOT or BBB). BOT is the primary interface, UAS is the alternative interface.  It has been tested with dummy_hcd on HS and SS. On SS USB3 are supported. I also took my omap device and tried it there against WindowsXP.  UAS implements basic command passing (i.e. read/write requests) and TASK MANAGEMENT functions are missing.  I had to add a little of error recovery to BOT because Windows was issuing some strange commands and it does not complain after the gadget responded with CSW.status=1.  (nab: Move to drivers/usb/gadget as per Sebastian to address legacy       limitations for built-in gadget code)  Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Acked-by: Felipe Balbi <balbi@ti.com> Cc: Alan Stern <stern@rowland.harvard.edu> Cc: Christoph Hellwig <hch@lst.de> Cc: Greg KH <gregkh@linuxfoundation.org> Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
f | f_uac2.c | s | 36K | 1180 | Jassi Brar | jaswinder.singh@linaro.org | 1329293431 |  | usb: gadget: Add Audio Class 2.0 Driver  This is a flexible USB Audio Class 2.0 compliant gadget driver that implements a simple topology with a virtual sound card exposed at the function side.  The driver doesn't expect any real audio codec to be present on the function - the audio streams are simply sinked to and sourced from a virtual ALSA sound card created. The user-space application may choose to do whatever it wants with the data received from the USB Host and choose to provide whatever it wants as audio data to the USB Host.  Capture(USB-Out) and Playback(USB-In) can be run at independent configurations specified via module parameters while loading the driver.  Make this new version as the default selection by a new Kconfig choice.  Signed-off-by: Yadi Brar <yadi.brar01@gmail.com> Signed-off-by: Jassi Brar <jaswinder.singh@linaro.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | mv_udc_core.c | s | 58K | 2051 | Ido Shayevitz | idos@codeaurora.org | 1338822946 |  | usb: gadget: mv_udc_core: Remove unneeded condition  The removed condition is always true, since the endpoint descriptor is set prior to calling the enable endpoint.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Acked-by: Yu Xu <yuxu@marvell.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | f_uac1.c | s | 19K | 642 | Jassi Brar | jaswinder.singh@linaro.org | 1329293425 |  | usb: gadget: audio: Move string IDs to audio.c  Move manufacturer and product string ids into audio.c so as to be reusable by the new uac2 version of gadget driver.  Signed-off-by: Yadi Brar <yadi.brar01@gmail.com> Signed-off-by: Jassi Brar <jaswinder.singh@linaro.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | dbgp.c | s | 8.4K | 363 | Michal Nazarewicz | mina86@mina86.com | 1323683112 |  | usb: gadget: rename usb_gadget_driver::speed to max_speed  This commit renames the “speed” field of the usb_gadget_driver structure to “max_speed”.  This is so that to make it more apparent that the field represents the maximum speed gadget driver can support.  This also make the field look more like fields with the same name in usb_gadget and usb_composite_driver structures.  All of those represent the *maximal* speed given entity supports.  After this commit, there are the following fields in various structures: * usb_gadget::speed - the current connection speed, * usb_gadget::max_speed - maximal speed UDC supports, * usb_gadget_driver::max_speed - maximal speed gadget driver   supports, and * usb_composite_driver::max_speed - maximal speed composite   gadget supports.  Signed-off-by: Michal Nazarewicz <mina86@mina86.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | u_uac1.h | s | 1.1K | 45 | Jassi Brar | jaswinder.singh@linaro.org | 1329293388 |  | usb: gadget: Rename audio function to uac1  The extant USB-Audio function driver complies to UAC_1 spec. So name the files accordingly, paving way for inclusion of a new UAC_2 specified driver.  Signed-off-by: Yadi Brar <yadi.brar01@gmail.com> Signed-off-by: Jassi Brar <jaswinder.singh@linaro.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | omap_udc.h | s | 6.4K | 187 | Ido Shayevitz | idos@codeaurora.org | 1336135977 |  | usb: gadget: Update omap_udc to use usb_endpoint_descriptor inside the struct usb_ep  Remove redundant pointer to struct usb_endpoint_descriptor.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | s3c2410_udc.h | s | 2.3K | 80 | Ido Shayevitz | idos@codeaurora.org | 1336135979 |  | usb: gadget: Update s3c2410_udc to use usb_endpoint_descriptor inside the struct usb_ep  Remove redundant pointer to struct usb_endpoint_descriptor.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | f_subset.c | s | 13K | 379 | Lothar Waßmann | LW@KARO-electronics.de | 1331674173 |  | usb gadget: fix a section mismatch when compiling g_ffs with CONFIG_USB_FUNCTIONFS_ETH   commit 28824b18ac4705e876a282a15ea0de8fc957551f:  ||Author: Michal Nazarewicz <m.nazarewicz@samsung.com>  ||Date:   Wed May 5 12:53:13 2010 +0200  ||  ||    USB: gadget: __init and __exit tags removed  ||  ||    __init, __initdata and __exit tags have have been removed from  ||    various files to make it possible for gadgets that do not use  ||    the __init/__exit tags to use those.  obviously missed (at least) this case leading to a section mismatch in  g_ffs.c when compiling with CONFIG_USB_FUNCTIONFS_ETH enabled.  Signed-off-by: Lothar Waßmann <LW@KARO-electronics.de> Acked-by: Michal Nazarewicz <mina86@mina86.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | uvc_queue.h | s | 1.5K | 53 | Laurent Pinchart | laurent.pinchart@ideasonboard.com | 1278881110 |  | V4L/DVB: uvc: Fix multiple symbols definitions with UVC gadget and host drivers  The UVC gadget driver borrowed code from the UVC host driver without changing the symbol names. This results in a namespace clash with multiple definitions of several symbols when compiling both drivers in the kernel.  Make all generic UVC functions and variables static in the UVC gadget driver, as the symbols are not referenced outside of the gadget driver. Rename the uvc_trace_param global variable to uvc_gadget_trace_param.  Signed-off-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
f | goku_udc.c | s | 46K | 1611 | Ido Shayevitz | idos@codeaurora.org | 1338822946 |  | usb: gadget: goku_udc: Remove unneeded condition  The removed condition is always true, since the endpoint descriptor is set prior to calling the enable endpoint.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | pxa27x_udc.c | s | 67K | 2342 | Heikki Krogerus | heikki.krogerus@linux.intel.com | 1330350112 |  | usb: otg: Convert all users to pass struct usb_otg for OTG functions  This changes the otg functions so that they receive struct otg instead of struct usb_phy as parameter and converts all users of these functions to pass the otg member of their usb_phy.  Includes fixes to IMX code from Sascha Hauer.  [ balbi@ti.com : fixed a compile warning on ehci-mv.c ]  Signed-off-by: Heikki Krogerus <heikki.krogerus@linux.intel.com> Acked-by: Sascha Hauer <s.hauer@pengutronix.de> Acked-by: Igor Grinberg <grinberg@compulab.co.il> Acked-by: Pavankumar Kondeti <pkondeti@codeaurora.org> Acked-by: Li Yang <leoli@freescale.com> Acked-by: Alan Stern <stern@rowland.harvard.edu> Reviewed-by: Marek Vasut <marek.vasut@gmail.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | config.c | s | 4.6K | 140 | Klaus Schwarzkopf | schwarzkopf@sensortherm.de | 1315609209 |  | usb gadget: clean up FSF boilerplate text  remove the following two paragraphs as they are not needed:  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc.,59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.  Signed-off-by: Klaus Schwarzkopf <schwarzkopf@sensortherm.de> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | f_eem.c | s | 14K | 494 | Klaus Schwarzkopf | schwarzkopf@sensortherm.de | 1315609209 |  | usb gadget: clean up FSF boilerplate text  remove the following two paragraphs as they are not needed:  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc.,59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.  Signed-off-by: Klaus Schwarzkopf <schwarzkopf@sensortherm.de> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | pxa25x_udc.c | s | 57K | 2028 | Ido Shayevitz | idos@codeaurora.org | 1338822947 |  | usb: gadget: pxa25x_udc: Remove unneeded condition  The removed condition is always true, since the endpoint descriptor is set prior to calling the enable endpoint.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | amd5536udc.c | s | 83K | 2907 | Ido Shayevitz | idos@codeaurora.org | 1336135972 |  | usb: gadget: Update amd5536udc to use usb_endpoint_descriptor inside the struct usb_ep  Remove redundant pointer to struct usb_endpoint_descriptor.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | f_ecm.c | s | 25K | 765 | Praveena Nadahally | praveen.nadahally@stericsson.com | 1327915046 |  | usb: gadget: Add Interface Association Descriptor to ECM  Add IAD to bind the two interfaces of ECM so that it works properly in composite gadget mode.  Signed-off-by: Thirupathi <thirupathi.chippakurthy@stericsson.com> Signed-off-by: Praveena Nadahally <praveen.nadahally@stericsson.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | hid.c | s | 6.7K | 219 | Orjan Friberg | of@flatfrog.com | 1331241094 |  | USB: gadget: Make g_hid device class conform to spec.  HID devices should specify this in their interface descriptors, not in the device descriptor. This fixes a "missing hardware id" bug under Windows 7 with a VIA VL800 (3.0) controller.  Signed-off-by: Orjan Friberg <of@flatfrog.com> Cc: Felipe Balbi <balbi@ti.com> Cc: stable <stable@vger.kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | at91_udc.c | s | 50K | 1726 | Nicolas Ferre | nicolas.ferre@atmel.com | 1337171360 |  | usb: gadget: at91_udc: fix endpoint descriptor dereference  The patch 5a6506f (Update at91_udc to use usb_endpoint_descriptor inside the struct usb_ep) removes the desc field of struct at91_ep. This convertion had not been completed which leads to a compilation error.  Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com> Acked-by: Felipe Balbi <balbi@ti.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | audio.c | s | 5.6K | 181 | Jassi Brar | jaswinder.singh@linaro.org | 1329293431 |  | usb: gadget: Add Audio Class 2.0 Driver  This is a flexible USB Audio Class 2.0 compliant gadget driver that implements a simple topology with a virtual sound card exposed at the function side.  The driver doesn't expect any real audio codec to be present on the function - the audio streams are simply sinked to and sourced from a virtual ALSA sound card created. The user-space application may choose to do whatever it wants with the data received from the USB Host and choose to provide whatever it wants as audio data to the USB Host.  Capture(USB-Out) and Playback(USB-In) can be run at independent configurations specified via module parameters while loading the driver.  Make this new version as the default selection by a new Kconfig choice.  Signed-off-by: Yadi Brar <yadi.brar01@gmail.com> Signed-off-by: Jassi Brar <jaswinder.singh@linaro.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | net2272.c | s | 68K | 2283 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | uvc_video.c | s | 9.4K | 319 | Klaus Schwarzkopf | schwarzkopf@sensortherm.de | 1315609209 |  | usb gadget: clean up FSF boilerplate text  remove the following two paragraphs as they are not needed:  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc.,59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.  Signed-off-by: Klaus Schwarzkopf <schwarzkopf@sensortherm.de> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | u_ether.h | s | 4.6K | 127 | Benoit Goby | benoit@android.com | 1336678078 |  | usb: gadget: f_rndis: Set rndis vendor parameters  Add a variant of rndis_bind_config to let gadget drivers change rndis vendorID and manufacturer parameters.  Signed-off-by: Benoit Goby <benoit@android.com> 	[make rndis_bind_config a static inline function] Signed-off-by: Andrzej Pietrasiewicz <andrzej.p@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Acked-by: Michal Nazarewicz <mina86@mina86.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | s3c2410_udc.c | s | 49K | 1708 | Ido Shayevitz | idos@codeaurora.org | 1338822948 |  | usb: gadget: s3c2410_udc: Remove unneeded condition  The removed condition is always true, since the endpoint descriptor is set prior to calling the enable endpoint.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | inode.c | s | 51K | 1833 | Michael BRIGHT | mjbrightfr@gmail.com | 1333745641 |  | USB: remove compile warning on gadget/inode.c  Removed unused "restart:" label, which was causing compiler warning.  Signed-off-by: Michael BRIGHT <mjbrightfr+git-kernel@gmail.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | f_uvc.c | s | 17K | 542 | Klaus Schwarzkopf | schwarzkopf@sensortherm.de | 1315609209 |  | usb gadget: clean up FSF boilerplate text  remove the following two paragraphs as they are not needed:  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc.,59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.  Signed-off-by: Klaus Schwarzkopf <schwarzkopf@sensortherm.de> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | rndis.c | s | 29K | 1016 | Linus Walleij | linus.walleij@linaro.org | 1336850019 |  | usb/net: rndis: fixup a few name prefixes  This switches a horde of NDIS_*-prefixed variables to the RNDIS_* prefix. Most of them aren't used much and causes no changes.  Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: David S. Miller <davem@davemloft.net>
f | s3c-hsudc.c | s | 36K | 1194 | Ido Shayevitz | idos@codeaurora.org | 1338822948 |  | usb: gadget: s3c-hsudc.c: Remove unneeded condition  The removed condition is always true, since the endpoint descriptor is set prior to calling the enable endpoint.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Acked-by: Heiko Stuebner <heiko@sntech.de> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | f_acm.c | s | 23K | 682 | Sebastian Andrzej Siewior | bigeasy@linutronix.de | 1328775096 |  | usb: gadget: add usb3.0 descriptors to serial gadgets  This patch adds SS descriptors to the ACM & generic serial gadget. The ACM part was tested with minicom + dummy + send / receive files over ttyACM <=> ttyGS0. The generic serial part (f_serial) was not tested (haven't found a driver on the host side). The nokia & multi gadget use HS at most.  Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | imx_udc.h | s | 11K | 318 | Klaus Schwarzkopf | schwarzkopf@sensortherm.de | 1315609209 |  | usb gadget: clean up FSF boilerplate text  remove the following two paragraphs as they are not needed:  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc.,59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.  Signed-off-by: Klaus Schwarzkopf <schwarzkopf@sensortherm.de> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | fsl_usb2_udc.h | s | 23K | 550 | Christoph Fritz | chf.fritz@googlemail.com | 1338823489 |  | usb: gadget: regression fix - usage of usb_ep  This patch removes redundant pointer to struct usb_endpoint_descriptor which were missed in commit 79149b8:   usb: gadget: Update fsl_udc_core to use usb_endpoint_descriptor inside the  struct usb_ep  Due to clock framework regressions, this patch is only compile tested!  Signed-off-by: Christoph Fritz <chf.fritz@googlemail.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | f_obex.c | s | 12K | 375 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103885 |  | usb: Add module.h to drivers/usb consumers who really use it.  The situation up to this point meant that module.h was pretty much everywhere, regardless of whether you asked for it or not. We are fixing that, so give the USB folks who want it an actual include of it.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | storage_common.c | s | 23K | 730 | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1330622428 |  | 
f | net2272.h | s | 16K | 553 | Seth Levy | seth.levy@plxtech.com | 1307404047 |  | USB: net2272: driver for PLX NET2272 USB device controller  This is based on the last release from PLX: 	http://www.plxtech.com/files/products/net2000/software/selectiontool/RE061204-net2272-linux2.6.18.tgz  I've managed to contact them and they've confirmed that this driver was wholly written by PLX (Seth Levy).  While they have no problem with it being merged (and they've already licensed it as GPL), they don't have any interest in doing so themselves as this is an old part for them.  ADI has long had an add-on card which has this part on it, so we've been keeping it up-to-date out of tree.  But now that PLX has confirmed the source of the driver, we can can take the next step of cleaning it up and getting it merged.  So here we are!  I've done quite a large clean up of the driver and attempted to address all the common issues.  Hopefully in the process, I haven't broken anything.  While it seems to still work with the board that I have access to, it is not a PCI variant.  So I have not tested any of the PCI logic myself (beyond clean compile).  Perhaps someone who actually has a card and cares can do so.  I'll try to address further feedback, but don't expect miracles.  I'm not really familiar with the part itself, just the platform glue.  Signed-off-by: Seth Levy <seth.levy@plxtech.com> Signed-off-by: Ash Aziz <ash.aziz@plxtech.com> Signed-off-by: Roy Huang <roy.huang@analog.com> Signed-off-by: Michael Hennerich <michael.hennerich@analog.com> Signed-off-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | u_serial.c | s | 33K | 1121 | Linus Torvalds | torvalds@linux-foundation.org | 1337739770 |  | Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/trivial  Pull trivial updates from Jiri Kosina:  "As usual, it's mostly typo fixes, redundant code elimination and some   documentation updates."  * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/trivial: (57 commits)   edac, mips: don't change code that has been removed in edac/mips tree   xtensa: Change mail addresses of Hannes Weiner and Oskar Schirmer   lib: Change mail address of Oskar Schirmer   net: Change mail address of Oskar Schirmer   arm/m68k: Change mail address of Sebastian Hess   i2c: Change mail address of Oskar Schirmer   net: Fix tcp_build_and_update_options comment in struct tcp_sock   atomic64_32.h: fix parameter naming mismatch   Kconfig: replace "--- help ---" with "---help---"   c2port: fix bogus Kconfig "default no"   edac: Fix spelling errors.   qla1280: Remove redundant NULL check before release_firmware() call   remoteproc: remove redundant NULL check before release_firmware()   qla2xxx: Remove redundant NULL check before release_firmware() call.   aic94xx: Get rid of redundant NULL check before release_firmware() call   tehuti: delete redundant NULL check before release_firmware()   qlogic: get rid of a redundant test for NULL before call to release_firmware()   bna: remove redundant NULL test before release_firmware()   tg3: remove redundant NULL test before release_firmware() call   typhoon: get rid of redundant conditional before all to release_firmware()   ...
f | dummy_hcd.c | s | 66K | 2333 | Sasha Levin | levinsasha928@gmail.com | 1336774651 |  | usb: gadget: dummy_hcd: fix build when BUG is not set  Use WARN_ON() instead of __WARN, which also means we won't use any internal macros.  Signed-off-by: Sasha Levin <levinsasha928@gmail.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | u_ether.c | s | 24K | 829 | Mike Lockwood | lockwood@android.com | 1336677977 |  | usb: gadget: Add variant of gether_setup to customize the device name  This is needed to avoid name collisions on SoCs that have both usb gadget and usb host, where usb0 may be the rndis interface or a usb ethernet adapter.  Signed-off-by: Mike Lockwood <lockwood@android.com> Signed-off-by: Benoit Goby <benoit@android.com> 	[make gether_setup a static inline function] Signed-off-by: Andrzej Pietrasiewicz <andrzej.p@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Acked-by: Michal Nazarewicz <mina86@mina86.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | usbstring.c | s | 2.0K | 63 | Alan Stern | stern@rowland.harvard.edu | 1321642261 |  | USB: remove homegrown UTF conversion routine for gadgets  This patch (as1502) removes the UTF8-to-UTF16 conversion routine in the USB gadget library and replaces it with a call to the equivalent function in the NLS library.  The only downside worth noting is that the NLS library routine requires the output buffer to be 16-bit aligned.  This is always true in the gadget code, because the output buffer is always a usb_request buffer being used to send a string descriptor.  Signed-off-by: Alan Stern <stern@rowland.harvard.edu> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | file_storage.c | s | 103K | 3098 | Alan Stern | stern@rowland.harvard.edu | 1334236810 |  | USB: gadget: storage gadgets send wrong error code for unknown commands  This patch (as1539) fixes a minor bug in the mass-storage gadget drivers.  When an unknown command is received, the error code sent back is "Invalid Field in CDB" rather than "Invalid Command".  This is because the bitmask of CDB bytes allowed to be nonzero is incorrect.  When handling an unknown command, we don't care which command bytes are nonzero.  All the bits in the mask should be set, not just eight of them.  Signed-off-by: Alan Stern <stern@rowland.harvard.edu> CC: <Michal Nazarewicz <mina86@mina86.com> CC: <stable@vger.kernel.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | omap_udc.c | s | 80K | 2717 | Ido Shayevitz | idos@codeaurora.org | 1338822947 |  | usb: gadget: omap_udc: Remove unneeded condition  The removed condition is always true, since the endpoint descriptor is set prior to calling the enable endpoint.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | serial.c | s | 7.6K | 234 | Sebastian Andrzej Siewior | bigeasy@linutronix.de | 1328775096 |  | usb: gadget: add usb3.0 descriptors to serial gadgets  This patch adds SS descriptors to the ACM & generic serial gadget. The ACM part was tested with minicom + dummy + send / receive files over ttyACM <=> ttyGS0. The generic serial part (f_serial) was not tested (haven't found a driver on the host side). The nokia & multi gadget use HS at most.  Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | f_hid.c | s | 16K | 530 | Masanari Iida | standby24x7@gmail.com | 1334782646 |  | usb: Fix various typo within usb  Correct spelling typo within usb  Signed-off-by: Masanari Iida <standby24x7@gmail.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | r8a66597-udc.h | s | 7.3K | 247 | Shimoda, Yoshihiro | yoshihiro.shimoda.uh@renesas.com | 1336135987 |  | usb: gadget: r8a66597-udc: add support for set_selfpowered  The previous code always set to USB_DEVICE_SELF_POWERED in GET_STATUS. So, this patch adds set_selfpowered().  Signed-off-by: Yoshihiro Shimoda <yoshihiro.shimoda.uh@renesas.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | f_rndis.c | s | 26K | 756 | Linus Torvalds | torvalds@linux-foundation.org | 1337727046 |  | 
f | zero.c | s | 9.6K | 297 | Paul Zimmerman | Paul.Zimmerman@synopsys.com | 1336135988 |  | usb: gadget: add isochronous support to gadget zero  Add two isochronous endpoints to the gadget zero source/sink function. They are enabled by selecting alternate interface 1, so by default they are not enabled. Module parameters for setting all the isoc endpoint characteristics are also provided.  Signed-off-by: Pratyush Anand <pratyush.anand@st.com> Signed-off-by: Paul Zimmerman <paulz@synopsys.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | webcam.c | s | 11K | 349 | Klaus Schwarzkopf | schwarzkopf@sensortherm.de | 1315609209 |  | usb gadget: clean up FSF boilerplate text  remove the following two paragraphs as they are not needed:  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc.,59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.  Signed-off-by: Klaus Schwarzkopf <schwarzkopf@sensortherm.de> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | fsl_udc_core.c | s | 73K | 2358 | Christoph Fritz | chf.fritz@googlemail.com | 1338823489 |  | usb: gadget: regression fix - usage of usb_ep  This patch removes redundant pointer to struct usb_endpoint_descriptor which were missed in commit 79149b8:   usb: gadget: Update fsl_udc_core to use usb_endpoint_descriptor inside the  struct usb_ep  Due to clock framework regressions, this patch is only compile tested!  Signed-off-by: Christoph Fritz <chf.fritz@googlemail.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | Kconfig | g | 33K |  | Linus Torvalds | torvalds@linux-foundation.org | 1337727046 |  | 
f | r8a66597-udc.c | s | 50K | 1742 | Shimoda, Yoshihiro | yoshihiro.shimoda.uh@renesas.com | 1336135987 |  | usb: gadget: r8a66597-udc: add support for set_selfpowered  The previous code always set to USB_DEVICE_SELF_POWERED in GET_STATUS. So, this patch adds set_selfpowered().  Signed-off-by: Yoshihiro Shimoda <yoshihiro.shimoda.uh@renesas.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | tcm_usb_gadget.h | s | 3.2K | 122 | Sebastian Andrzej Siewior | bigeasy@linutronix.de | 1336602359 |  | usb-gadget: Initial merge of target module for UASP + BOT  This fabric uses the target framework to provide a usb gadget device.  This gadget supports the USB Attached SCSI Protocol (UASP) and Bulk Only Transfers (BOT or BBB). BOT is the primary interface, UAS is the alternative interface.  It has been tested with dummy_hcd on HS and SS. On SS USB3 are supported. I also took my omap device and tried it there against WindowsXP.  UAS implements basic command passing (i.e. read/write requests) and TASK MANAGEMENT functions are missing.  I had to add a little of error recovery to BOT because Windows was issuing some strange commands and it does not complain after the gadget responded with CSW.status=1.  (nab: Move to drivers/usb/gadget as per Sebastian to address legacy       limitations for built-in gadget code)  Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Acked-by: Felipe Balbi <balbi@ti.com> Cc: Alan Stern <stern@rowland.harvard.edu> Cc: Christoph Hellwig <hch@lst.de> Cc: Greg KH <gregkh@linuxfoundation.org> Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
f | uvc_v4l2.c | s | 8.0K | 281 | Mauro Carvalho Chehab | mchehab@redhat.com | 1337081965 |  | Merge remote-tracking branch 'linus/master' into staging/for_v3.5  * linus/master: (805 commits)   tty: Fix LED error return   openvswitch: checking wrong variable in queue_userspace_packet()   bonding: Fix LACPDU rx_dropped commit.   Linux 3.4-rc7   ARM: EXYNOS: fix ctrlbit for exynos5_clk_pdma1   ARM: EXYNOS: use s5p-timer for UniversalC210 board   ARM / mach-shmobile: Invalidate caches when booting secondary cores   ARM / mach-shmobile: sh73a0 SMP TWD boot regression fix   ARM / mach-shmobile: r8a7779 SMP TWD boot regression fix   ARM: mach-shmobile: convert ag5evm to use the generic MMC GPIO hotplug helper   ARM: mach-shmobile: convert mackerel to use the generic MMC GPIO hotplug helper   MAINTAINERS: Add myself as the cpufreq maintainer   dm mpath: check if scsi_dh module already loaded before trying to load   dm thin: correct module description   dm thin: fix unprotected use of prepared_discards list   dm thin: reinstate missing mempool_free in cell_release_singleton   gpio/exynos: Fix compiler warnings when non-exynos machines are selected   gpio: pch9: Use proper flow type handlers   powerpc/irq: Fix another case of lazy IRQ state getting out of sync   ks8851: Update link status during link change interrupt   ...  Conflicts: 	drivers/media/common/tuners/xc5000.c 	drivers/media/common/tuners/xc5000.h 	drivers/usb/gadget/uvc_queue.c
f | s3c-hsotg.c | s | 93K | 3010 | Lukasz Majewski | l.majewski@samsung.com | 1336602280 |  | usb:hsotg:samsung:cosmetic Move <linux/platform_data/s3c-hsotg.h> to proper place  This commit adds a cosmetic change to the s3c-hsotg UDC driver. It moves s3c-hsotg.h to other linux/ related inclusions.  Signed-off-by: Lukasz Majewski <l.majewski@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | m66592-udc.h | s | 22K | 534 | Ido Shayevitz | idos@codeaurora.org | 1336135976 |  | usb: gadget: Update m66592-udc to use usb_endpoint_descriptor inside the struct usb_ep  Remove redundant pointer to struct usb_endpoint_descriptor.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | goku_udc.h | s | 7.1K | 249 | Ido Shayevitz | idos@codeaurora.org | 1336135975 |  | usb: gadget: Update goku_udc to use usb_endpoint_descriptor inside the struct usb_ep  Remove redundant pointer to struct usb_endpoint_descriptor.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | pch_udc.c | s | 89K | 3002 | Ido Shayevitz | idos@codeaurora.org | 1336135979 |  | usb: gadget: Update pch_udc to use usb_endpoint_descriptor inside the struct usb_ep  Remove redundant pointer to struct usb_endpoint_descriptor.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | net2280.c | s | 74K | 2480 | David Howells | dhowells@redhat.com | 1332955803 |  | Remove all #inclusions of asm/system.h  Remove all #inclusions of asm/system.h preparatory to splitting and killing it.  Performed with the following command:  perl -p -i -e 's!^#\s*include\s*<asm/system[.]h>.*\n!!' `grep -Irl '^#\s*include\s*<asm/system[.]h>' *`  Signed-off-by: David Howells <dhowells@redhat.com>
f | nokia.c | s | 6.3K | 208 | Tatyana Brokhman | tlinder@codeaurora.org | 1309555625 |  | usb: gadget: add max_speed to usb_composite_driver  This field is used by the Gadget drivers to specify the maximum speed they support, meaning: the maximum speed they can provide descriptors for.  The driver speed will be set in consideration of this value.  [ balbi@ti.com : dropped the ifdeffery ]  Signed-off-by: Tatyana Brokhman <tlinder@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | multi.c | s | 7.6K | 269 | Michal Nazarewicz | mina86@mina86.com | 1327398311 |  | usb: gadget: update Michal Nazarewicz's email address  The m.nazarewicz@samsung.com email address is no longer valid, so this commit replaces it with mina86@mina86.com which is employer-agnostic and thus should be valid for foreseeable feature.  Signed-off-by: Michal Nazarewicz <mina86@mina86.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | f_mass_storage.c | s | 89K | 2776 | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1336409372 |  | 
f | f_fs.c | s | 54K | 1971 | Andrzej Pietrasiewicz | andrzej.p@samsung.com | 1337012744 |  | FunctionFS: enable multiple functions  Signed-off-by: Andrzej Pietrasiewicz <andrzej.p@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Acked-by: Michal Nazarewicz <mina86@mina86.com> Cc: Felipe Balbi <balbi@ti.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | atmel_usba_udc.h | s | 9.8K | 310 | Ido Shayevitz | idos@codeaurora.org | 1336135973 |  | usb: gadget: Update atmel_usba_udc to use usb_endpoint_descriptor inside the struct usb_ep  Remove redundant pointer to struct usb_endpoint_descriptor.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | u_phonet.h | s | 570B | 17 | Rémi Denis-Courmont | remi.denis-courmont@nokia.com | 1229557749 |  | Phonet: USB CDC Phonet function for gadget framework  This implements the Nokia vendor-specific communication device class function to exchange Phonet messages over USB. This function is already found in the "PC suite" USB profile of (non-Linux) Nokia handsets.  Signed-off-by: Rémi Denis-Courmont <remi.denis-courmont@nokia.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | printer.c | s | 33K | 1086 | Sebastian Andrzej Siewior | sebastian@breakpoint.cc | 1336135984 |  | usb: gadget: make g_printer use composite  This patch converts the g_printer to make use of the compoiste framework for descriptor parsing instead of its own implementation of it. This gadget contains now one function which is the printer gadget. Compile tested only.  Signed-off-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | fsl_mxc_udc.c | s | 2.9K | 107 | Fabio Estevam | fabio.estevam@freescale.com | 1322576344 |  | usb: fsl_mxc_udc.c: Remove compile-time dependency of MX35 SoC type  In order to support multiple SoC kernel image, compile-time dependency on a specific SoC type should be avoided.  fsl_udc_clk_finalize is already protected by cpu_is_mx35(), so remove the compile-time check for CONFIG_SOC_IMX35.  Signed-off-by: Fabio Estevam <fabio.estevam@freescale.com> Signed-off-by: Felipe Balbi <balbi@ti.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | epautoconf.c | s | 11K | 354 | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1330622428 |  | 
f | fusb300_udc.c | s | 37K | 1283 | Ido Shayevitz | idos@codeaurora.org | 1336135975 |  | usb: gadget: Update fusb300_udc to use usb_endpoint_descriptor inside the struct usb_ep  Remove redundant pointer to struct usb_endpoint_descriptor.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | atmel_usba_udc.c | s | 49K | 1732 | Ido Shayevitz | idos@codeaurora.org | 1338822944 |  | usb: gadget: atmel_usba_udc: Remove unneeded condition  The removed condition is always true, since the endpoint descriptor is set prior to calling the enable endpoint.  Signed-off-by: Ido Shayevitz <idos@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | g_ffs.c | s | 10K | 385 | Andrzej Pietrasiewicz | andrzej.p@samsung.com | 1337012744 |  | FunctionFS: enable multiple functions  Signed-off-by: Andrzej Pietrasiewicz <andrzej.p@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Acked-by: Michal Nazarewicz <mina86@mina86.com> Cc: Felipe Balbi <balbi@ti.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | f_phonet.c | s | 14K | 515 | Eric Dumazet | eric.dumazet@gmail.com | 1332903054 |  | f_phonet: fix skb truesize underestimation  Now skb_add_rx_frag() has a truesize parameter, we can fix f_phonet to properly account truesize of each fragment : a full page.  Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com> Cc: Felipe Balbi <balbi@ti.com> Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org> Cc: Rémi Denis-Courmont <remi.denis-courmont@nokia.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | mass_storage.c | s | 4.8K | 142 | Michal Nazarewicz | mina86@mina86.com | 1327398311 |  | usb: gadget: update Michal Nazarewicz's email address  The m.nazarewicz@samsung.com email address is no longer valid, so this commit replaces it with mina86@mina86.com which is employer-agnostic and thus should be valid for foreseeable feature.  Signed-off-by: Michal Nazarewicz <mina86@mina86.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | udc-core.c | s | 13K | 454 | Alan Stern | stern@rowland.harvard.edu | 1335513975 |  | usb: gadget: udc-core: fix incompatibility with dummy-hcd  This patch (as1548) fixes a recently-introduced incompatibility between the UDC core and the dummy-hcd driver.  Commit 8ae8090c82eb407267001f75b3d256b3bd4ae691 (usb: gadget: udc-core: fix asymmetric calls in remove_driver) moved the usb_gadget_udc_stop() call in usb_gadget_remove_driver() below the usb_gadget_disconnect() call.  As a result, usb_gadget_disconnect() gets called at a time when the gadget driver believes it has been unbound but dummy-hcd believes it has not.  A nasty error ensues when dummy-hcd calls the gadget driver's disconnect method a second time.  To fix the problem, this patch moves the gadget driver's unbind notification after the usb_gadget_disconnect() call.  Now nothing happens between the two unbind notifications, so nothing goes wrong.  Signed-off-by: Alan Stern <stern@rowland.harvard.edu> Tested-by: Alexander Shishkin <alexander.shishkin@linux.intel.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | f_sourcesink.c | s | 24K | 758 | Paul Zimmerman | Paul.Zimmerman@synopsys.com | 1336135988 |  | usb: gadget: add isochronous support to gadget zero  Add two isochronous endpoints to the gadget zero source/sink function. They are enabled by selecting alternate interface 1, so by default they are not enabled. Module parameters for setting all the isoc endpoint characteristics are also provided.  Signed-off-by: Pratyush Anand <pratyush.anand@st.com> Signed-off-by: Paul Zimmerman <paulz@synopsys.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | gmidi.c | s | 5.4K | 169 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103885 |  | usb: Add module.h to drivers/usb consumers who really use it.  The situation up to this point meant that module.h was pretty much everywhere, regardless of whether you asked for it or not. We are fixing that, so give the USB folks who want it an actual include of it.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | u_serial.h | s | 2.2K | 53 | Tatyana Brokhman | tlinder@codeaurora.org | 1309284876 |  | usb: gadget: add usb_endpoint_descriptor to struct usb_ep  Change usb_ep_enable() prototype to use endpoint descriptor from usb_ep.  This optimization spares the FDs from saving the endpoint chosen descriptor. This optimization is not full though. To fully exploit this change, one needs to update all the UDCs as well since in the current implementation each of them saves the endpoint descriptor in it's internal (and extended) endpoint structure.  Signed-off-by: Tatyana Brokhman <tlinder@codeaurora.org> Signed-off-by: Felipe Balbi <balbi@ti.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | acm_ms.c | s | 6.4K | 204 | Klaus Schwarzkopf | schwarzkopf@sensortherm.de | 1318527987 |  | usb: gadget: add new usb gadget for ACM and mass storage  This driver provides two functions in one configuration: a mass storage, and a ACM (serial port) link. Heavily based on multi.c and cdc2.c  Signed-off-by: Klaus Schwarzkopf <schwarzkopf@sensortherm.de> Signed-off-by: Felipe Balbi <balbi@ti.com>
