f | datafab.c | s | 20K | 624 | Huajun Li | huajun.li.lee@gmail.com | 1327444263 |  | usb: Disable dynamic id of USB storage subdrivers  Storage subdrivers, like alauda, datafab and others, don't support dynamic  id currently, and it needs lots of work but with very little gain to enable the feature, so disable them in the patch.  Signed-off-by: Huajun Li <huajun.li.lee@gmail.com> Acked-by: Alan Stern <stern@rowland.harvard.edu> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | unusual_sddr55.h | s | 1.5K | 38 | Michal Nazarewicz | mina86@mina86.com | 1287768109 |  | USB: storage: Use USB_ prefix instead of US_ prefix  This commit changes prefix for some of the USB mass storage class related macros (ie. USB_SC_ for subclass and USB_PR_ for class).  Signed-off-by: Michal Nazarewicz <mina86@mina86.com> Cc: Alan Stern <stern@rowland.harvard.edu> Cc: Matthew Wilcox <willy@linux.intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | protocol.h | s | 2.3K | 52 | Alan Stern | stern@rowland.harvard.edu | 1231351197 |  | USB: usb-storage: merge ATAPI and QIC-157 protocol routines  This patch (as1174) merges usb-storage's QIC-157 and ATAPI protocol routines.  Since the two functions are identical, there's no reason to keep them separate.  Signed-off-by: Alan Stern <stern@rowland.harvard.edu> Cc: Matthew Dharm <mdharm-usb@one-eyed-alien.net> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | debug.h | s | 2.2K | 57 | Adrian Bunk | bunk@kernel.org | 1216678555 |  | USB: remove CVS keywords  This patch removes CVS keywords that weren't updated for a long time from comments.  Signed-off-by: Adrian Bunk <bunk@kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | unusual_devs.h | s | 60K | 1829 | Alan Stern | stern@rowland.harvard.edu | 1340427932 |  | usb-storage: revert commit afff07e61a52 (Add 090c:1000 to unusal-devs)  This patch (as1560) reverts commit afff07e61a5243e14ee3f0a272a0380cd744a8a3 (usb-storage: Add 090c:1000 to unusal-devs).  It is no longer needed, because usb-storage now tells the sd driver to try READ CAPACITY(10) before READ CAPACITY(16) for every USB mass-storage device.  Signed-off-by: Alan Stern <stern@rowland.harvard.edu> Acked-by: Hans de Goede <hdegoede@redhat.com> CC: Matthew Dharm <mdharm-usb@one-eyed-alien.net> Cc: stable <stable@vger.kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | scsiglue.c | s | 18K | 499 | Alan Stern | stern@rowland.harvard.edu | 1340427931 |  | SCSI & usb-storage: add try_rc_10_first flag  Several bug reports have been received recently for USB mass-storage devices that don't handle READ CAPACITY(16) commands properly.  They report bogus sizes, in some cases becoming unusable as a result.  The bugs were triggered by commit 09b6b51b0b6c1b9bb61815baf205e4d74c89ff04 (SCSI & usb-storage: add flags for VPD pages and REPORT LUNS), which caused usb-storage to stop overriding the SCSI level reported by devices.  By default, the sd driver will try READ CAPACITY(16) first for any device whose level is above SCSI_SPC_2.  It seems likely that any device large enough to require the use of READ CAPACITY(16) (i.e., 2 TB or more) would be able to handle READ CAPACITY(10) commands properly.  Indeed, I don't know of any devices that don't handle READ CAPACITY(10) properly.  Therefore this patch (as1559) adds a new flag telling the sd driver to try READ CAPACITY(10) before READ CAPACITY(16), and sets this flag for every USB mass-storage device.  If a device really is larger than 2 TB, sd will fall back to READ CAPACITY(16) just as it used to.  This fixes Bugzilla #43391.  Signed-off-by: Alan Stern <stern@rowland.harvard.edu> Acked-by: Hans de Goede <hdegoede@redhat.com> CC: "James E.J. Bottomley" <JBottomley@parallels.com> CC: Matthew Dharm <mdharm-usb@one-eyed-alien.net> Cc: stable <stable@vger.kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | Makefile | g | 1.6K |  | Linus Torvalds | torvalds@linux-foundation.org | 1300313975 |  | Merge branch 'staging-next' of git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/staging-2.6  * 'staging-next' of git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/staging-2.6: (961 commits)   staging: hv: fix memory leaks   staging: hv: Remove NULL check before kfree   Staging: hv: Get rid of vmbus_child_dev_add()   Staging: hv: Change the signature for vmbus_child_device_register()   Staging: hv: Get rid of vmbus_cleanup() function   Staging: hv: Get rid of vmbus_dev_rm() function   Staging: hv: Change the signature for vmbus_on_isr()   Staging: hv: Eliminate vmbus_event_dpc()   Staging: hv: Get rid of the function vmbus_msg_dpc()   Staging: hv: Change the signature for vmbus_cleanup()   Staging: hv: Simplify root device management   staging: rtl8192e: Don't copy dev pointer to skb   staging: rtl8192e: Pass priv to cmdpkt functions   staging: rtl8192e: Pass priv to firmware download functions   staging: rtl8192e: Pass priv to rtl8192_interrupt   staging: rtl8192e: Pass rtl8192_priv to dm functions   staging: rtl8192e: Pass ieee80211_device to callbacks   staging: rtl8192e: Pass ieee80211_device to callbacks   staging: rtl8192e: Pass ieee80211_device to callbacks   staging: rtl8192e: Pass ieee80211_device to callbacks   ...
f | unusual_realtek.h | s | 1.4K | 36 | Alan Stern | stern@rowland.harvard.edu | 1305658588 |  | usb-storage: fix up the unusual_realtek device list  This patch (as1461) fixes the unusual_devs entries for the Realtek USB card reader.  They should be ordered by PID, and they should not override the Subclass and Protocol values provided by the device. Otherwise a notification about unnecessary entries gets printed in the kernel log during probing.  Signed-off-by: Alan Stern <stern@rowland.harvard.edu> Tested-By: Tony Vroon <tony@linx.net> CC: <stable@kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | usb.h | s | 7.3K | 176 | Alan Stern | stern@rowland.harvard.edu | 1329870555 |  | usb-storage: fix freezing of the scanning thread  This patch (as1521b) fixes the interaction between usb-storage's scanning thread and the freezer.  The current implementation has a race: If the device is unplugged shortly after being plugged in and just as a system sleep begins, the scanning thread may get frozen before the khubd task.  Khubd won't be able to freeze until the disconnect processing is complete, and the disconnect processing can't proceed until the scanning thread finishes, so the sleep transition will fail.  The implementation in the 3.2 kernel suffers from an additional problem.  There the scanning thread calls set_freezable_with_signal(), and the signals sent by the freezer will mess up the thread's I/O delays, which are all interruptible.  The solution to both problems is the same: Replace the kernel thread used for scanning with a delayed-work routine on the system freezable work queue.  Freezable work queues have the nice property that you can cancel a work item even while the work queue is frozen, and no signals are needed.  The 3.2 version of this patch solves the problem in Bugzilla #42730.  Signed-off-by: Alan Stern <stern@rowland.harvard.edu> Acked-by: Seth Forshee <seth.forshee@canonical.com> CC: stable <stable@vger.kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | option_ms.c | s | 4.4K | 141 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103885 |  | usb: Add module.h to drivers/usb consumers who really use it.  The situation up to this point meant that module.h was pretty much everywhere, regardless of whether you asked for it or not. We are fixing that, so give the USB folks who want it an actual include of it.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | initializers.c | s | 3.5K | 93 | fangxiaozhi | huananhu@huawei.com | 1253713592 |  | USB: usb-storage fails to attach to Huawei Datacard cdrom device  In this patch, we always make the return value of function usb_stor_huawei_e220_init to be zero. Then it will not prevent usb-storage driver from attaching to the CDROM device of Huawei Datacard.  Signed-off-by: fangxiaozhi <huananhu@huawei.com> Cc: stable <stable@kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | debug.c | s | 7.1K | 167 | Adrian Bunk | bunk@kernel.org | 1216678555 |  | USB: remove CVS keywords  This patch removes CVS keywords that weren't updated for a long time from comments.  Signed-off-by: Adrian Bunk <bunk@kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | sddr55.c | s | 24K | 778 | Huajun Li | huajun.li.lee@gmail.com | 1327444263 |  | usb: Disable dynamic id of USB storage subdrivers  Storage subdrivers, like alauda, datafab and others, don't support dynamic  id currently, and it needs lots of work but with very little gain to enable the feature, so disable them in the patch.  Signed-off-by: Huajun Li <huajun.li.lee@gmail.com> Acked-by: Alan Stern <stern@rowland.harvard.edu> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | ene_ub6250.c | s | 66K | 1995 | Jesper Juhl | jj@chaosbits.net | 1334782355 |  | usb/storage/ene_ub6250: Remove redundant NULL check before release_firmware() and pointless assignment  release_firmware() tests for a NULL pointer, so it's redundant to do that checking before calling it.  Additionally, in ene_load_bincode(), 'sd_fw' is a local variable so setting it to NULL just before it goes out of scope is completely pointless, so remove that assignment.  Signed-off-by: Jesper Juhl <jj@chaosbits.net> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | unusual_usbat.h | s | 1.4K | 37 | Michal Nazarewicz | mina86@mina86.com | 1287768109 |  | USB: storage: Use USB_ prefix instead of US_ prefix  This commit changes prefix for some of the USB mass storage class related macros (ie. USB_SC_ for subclass and USB_PR_ for class).  Signed-off-by: Michal Nazarewicz <mina86@mina86.com> Cc: Alan Stern <stern@rowland.harvard.edu> Cc: Matthew Wilcox <willy@linux.intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | unusual_ene_ub6250.h | s | 968B | 23 | huajun li | huajun.li.lee@gmail.com | 1299534059 |  | Staging: Merge ENE UB6250 SD card codes from keucr to drivers/usb/storage  The usb portion of this driver can now go into drivers/usb/storage. This leaves the non-usb portion of the code still in staging.  Signed-off-by: Huajun Li <huajun.li.lee@gmail.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | sddr09.c | s | 44K | 1490 | Huajun Li | huajun.li.lee@gmail.com | 1327444263 |  | usb: Disable dynamic id of USB storage subdrivers  Storage subdrivers, like alauda, datafab and others, don't support dynamic  id currently, and it needs lots of work but with very little gain to enable the feature, so disable them in the patch.  Signed-off-by: Huajun Li <huajun.li.lee@gmail.com> Acked-by: Alan Stern <stern@rowland.harvard.edu> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | onetouch.c | s | 8.1K | 263 | Huajun Li | huajun.li.lee@gmail.com | 1327444263 |  | usb: Disable dynamic id of USB storage subdrivers  Storage subdrivers, like alauda, datafab and others, don't support dynamic  id currently, and it needs lots of work but with very little gain to enable the feature, so disable them in the patch.  Signed-off-by: Huajun Li <huajun.li.lee@gmail.com> Acked-by: Alan Stern <stern@rowland.harvard.edu> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | sierra_ms.c | s | 5.4K | 180 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103885 |  | usb: Add module.h to drivers/usb consumers who really use it.  The situation up to this point meant that module.h was pretty much everywhere, regardless of whether you asked for it or not. We are fixing that, so give the USB folks who want it an actual include of it.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | initializers.h | s | 2.1K | 46 | Adrian Bunk | bunk@kernel.org | 1216678555 |  | USB: remove CVS keywords  This patch removes CVS keywords that weren't updated for a long time from comments.  Signed-off-by: Adrian Bunk <bunk@kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | shuttle_usbat.c | s | 49K | 1545 | Huajun Li | huajun.li.lee@gmail.com | 1327444263 |  | usb: Disable dynamic id of USB storage subdrivers  Storage subdrivers, like alauda, datafab and others, don't support dynamic  id currently, and it needs lots of work but with very little gain to enable the feature, so disable them in the patch.  Signed-off-by: Huajun Li <huajun.li.lee@gmail.com> Acked-by: Alan Stern <stern@rowland.harvard.edu> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | unusual_cypress.h | s | 1.4K | 34 | Richard Schütz | r.schtz@t-online.de | 1295749886 |  | USB: usb-storage: unusual_devs update for Cypress ATACB  New device ID added for unusual Cypress ATACB device.  Signed-off-by: Richard Schütz <r.schtz@t-online.de> Cc: stable <stable@kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | libusual.c | s | 5.7K | 206 | Alan Stern | stern@rowland.harvard.edu | 1237936834 |  | usb-storage: prepare for subdriver separation  This patch (as1206) is the first step in converting usb-storage's subdrivers into separate modules.  It makes the following large-scale changes:  	Remove a bunch of unnecessary #ifdef's from usb_usual.h. 	Not truly necessary, but it does clean things up.  	Move the USB device-ID table (which is duplicated between 	libusual and usb-storage) into its own source file, 	usual-tables.c, and arrange for this to be linked with 	either libusual or usb-storage according to whether 	USB_LIBUSUAL is configured.  	Add to usual-tables.c a new usb_usual_ignore_device() 	function to detect whether a particular device needs to be 	managed by a subdriver and not by the standard handlers 	in usb-storage.  	Export a whole bunch of functions in usb-storage, renaming 	some of them because their names don't already begin with 	"usb_stor_".  These functions will be needed by the new 	subdriver modules.  	Split usb-storage's probe routine into two functions. 	The subdrivers will call the probe1 routine, then fill in 	their transport and protocol settings, and then call the 	probe2 routine.  	Take the default cases and error checking out of 	get_transport() and get_protocol(), which run during 	probe1, and instead put a check for invalid transport 	or protocol values into the probe2 function.  	Add a new probe routine to be used for standard devices, 	i.e., those that don't need a subdriver.  This new routine 	checks whether the device should be ignored (because it 	should be handled by ub or by a subdriver), and if not, 	calls the probe1 and probe2 functions.  Signed-off-by: Alan Stern <stern@rowland.harvard.edu> CC: Matthew Dharm <mdharm-usb@one-eyed-alien.net> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | unusual_alauda.h | s | 1.1K | 27 | Michal Nazarewicz | mina86@mina86.com | 1287768109 |  | USB: storage: Use USB_ prefix instead of US_ prefix  This commit changes prefix for some of the USB mass storage class related macros (ie. USB_SC_ for subclass and USB_PR_ for class).  Signed-off-by: Michal Nazarewicz <mina86@mina86.com> Cc: Alan Stern <stern@rowland.harvard.edu> Cc: Matthew Wilcox <willy@linux.intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | uas.c | s | 22K | 742 | Sebastian Andrzej Siewior | bigeasy@linutronix.de | 1328223090 |  | usb/uas: make sure data urb is gone if we receive status before that  Just run into the following: - new disk arrived in the system - udev couldn't wait to get its hands on to to run ata_id /dev/sda - this sent the cdb 0xa1 to the device. - my UAS-gadget recevied the cdb and had no idea what to do with it. It   decided to send a status URB back with sense set to invalid opcode. - the host side received it status and completed the scsi command. - the host sent another scsi with 4kib data buffer - Now I was confused why the data transfer is only 512 bytes instead of   4kib since the host is always allocating the complete transfer in one   go. - Finally the system crashed while walking through the sg list.  This patch adds three new flags in order to distinguish between DATA URB completed and outstanding. If we receive status before data, we cancel data and let data complete the command. This solves the problem for IN and OUT transfers but does not work for BIDI.  Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Sarah Sharp <sarah.a.sharp@linux.intel.com>
f | unusual_onetouch.h | s | 1.3K | 32 | Michal Nazarewicz | mina86@mina86.com | 1287768109 |  | USB: storage: Use USB_ prefix instead of US_ prefix  This commit changes prefix for some of the USB mass storage class related macros (ie. USB_SC_ for subclass and USB_PR_ for class).  Signed-off-by: Michal Nazarewicz <mina86@mina86.com> Cc: Alan Stern <stern@rowland.harvard.edu> Cc: Matthew Wilcox <willy@linux.intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | unusual_sddr09.h | s | 1.8K | 48 | Michal Nazarewicz | mina86@mina86.com | 1287768109 |  | USB: storage: Use USB_ prefix instead of US_ prefix  This commit changes prefix for some of the USB mass storage class related macros (ie. USB_SC_ for subclass and USB_PR_ for class).  Signed-off-by: Michal Nazarewicz <mina86@mina86.com> Cc: Alan Stern <stern@rowland.harvard.edu> Cc: Matthew Wilcox <willy@linux.intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | sierra_ms.h | s | 98B | 4 | Kevin Lloyd | klloyd@sierrawireless.com | 1218673971 |  | USB Storage Sierra: TRU-Install feature update  This patch upgrades the support for the Sierra Wireless TRU-Install feature (i.e. zeroCD) to allow for future support of Linux enabled TRU-Install devices.  By default all devices that do not have a Linux enabled TRU-Install device (i.e. the device does not have a Linux package on the virtual CD partition) will be switched into "modem mode." Devices that do contain a Linux package in the TRU-Install virtual CD will be allowed to enumerate as a CD-Rom so that either (a) a user can install the packaged software or (b) a user-space application (e.g. udev) can switch it to modem mode.  This patch does allow for manual override by adding a usb-storage module parameter 'swi_tru_install' which can force the modem into either mode regardless of what packages it contains.  Signed-off-by: Kevin Lloyd <klloyd@sierrawireless.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | jumpshot.c | s | 18K | 558 | Huajun Li | huajun.li.lee@gmail.com | 1327444263 |  | usb: Disable dynamic id of USB storage subdrivers  Storage subdrivers, like alauda, datafab and others, don't support dynamic  id currently, and it needs lots of work but with very little gain to enable the feature, so disable them in the patch.  Signed-off-by: Huajun Li <huajun.li.lee@gmail.com> Acked-by: Alan Stern <stern@rowland.harvard.edu> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | karma.c | s | 5.9K | 197 | Huajun Li | huajun.li.lee@gmail.com | 1327444263 |  | usb: Disable dynamic id of USB storage subdrivers  Storage subdrivers, like alauda, datafab and others, don't support dynamic  id currently, and it needs lots of work but with very little gain to enable the feature, so disable them in the patch.  Signed-off-by: Huajun Li <huajun.li.lee@gmail.com> Acked-by: Alan Stern <stern@rowland.harvard.edu> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | usual-tables.c | s | 3.4K | 101 | Linus Torvalds | torvalds@linux-foundation.org | 1300313975 |  | Merge branch 'staging-next' of git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/staging-2.6  * 'staging-next' of git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/staging-2.6: (961 commits)   staging: hv: fix memory leaks   staging: hv: Remove NULL check before kfree   Staging: hv: Get rid of vmbus_child_dev_add()   Staging: hv: Change the signature for vmbus_child_device_register()   Staging: hv: Get rid of vmbus_cleanup() function   Staging: hv: Get rid of vmbus_dev_rm() function   Staging: hv: Change the signature for vmbus_on_isr()   Staging: hv: Eliminate vmbus_event_dpc()   Staging: hv: Get rid of the function vmbus_msg_dpc()   Staging: hv: Change the signature for vmbus_cleanup()   Staging: hv: Simplify root device management   staging: rtl8192e: Don't copy dev pointer to skb   staging: rtl8192e: Pass priv to cmdpkt functions   staging: rtl8192e: Pass priv to firmware download functions   staging: rtl8192e: Pass priv to rtl8192_interrupt   staging: rtl8192e: Pass rtl8192_priv to dm functions   staging: rtl8192e: Pass ieee80211_device to callbacks   staging: rtl8192e: Pass ieee80211_device to callbacks   staging: rtl8192e: Pass ieee80211_device to callbacks   staging: rtl8192e: Pass ieee80211_device to callbacks   ...
f | scsiglue.h | s | 1.9K | 44 | Adrian Bunk | bunk@kernel.org | 1216678555 |  | USB: remove CVS keywords  This patch removes CVS keywords that weren't updated for a long time from comments.  Signed-off-by: Adrian Bunk <bunk@kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | cypress_atacb.c | s | 8.0K | 235 | Huajun Li | huajun.li.lee@gmail.com | 1327444263 |  | usb: Disable dynamic id of USB storage subdrivers  Storage subdrivers, like alauda, datafab and others, don't support dynamic  id currently, and it needs lots of work but with very little gain to enable the feature, so disable them in the patch.  Signed-off-by: Huajun Li <huajun.li.lee@gmail.com> Acked-by: Alan Stern <stern@rowland.harvard.edu> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | protocol.c | s | 6.9K | 191 | Alan Stern | stern@rowland.harvard.edu | 1321319103 |  | usb-storage: Accept 8020i-protocol commands longer than 12 bytes  The 8020i protocol (also 8070i and QIC-157) uses 12-byte commands; shorter commands must be padded.  Simon Detheridge reports that his 3-TB USB disk drive claims to use the 8020i protocol (which is normally meant for ATAPI devices like CD drives), and because of its large size, the disk drive requires the use of 16-byte commands. However the usb_stor_pad12_command() routine in usb-storage always sets the command length to 12, making the drive impossible to use.  Since the SFF-8020i specification allows for 16-byte commands in future extensions, we may as well accept them.  This patch (as1490) changes usb_stor_pad12_command() to leave commands larger than 12 bytes alone rather than truncating them.  Signed-off-by: Alan Stern <stern@rowland.harvard.edu> Tested-by: Simon Detheridge <simon@widgit.com> CC: Matthew Dharm <mdharm-usb@one-eyed-alien.net> Cc: stable <stable@vger.kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | transport.c | s | 42K | 1168 | Sebastian Andrzej Siewior | bigeasy@linutronix.de | 1330456062 |  | usb/storage: redefine US_BULK_FLAG_IN and use it  US_BULK_FLAG_IN is defined as 1 and not used. The USB storage spec says that bit 7 of flags within CBW defines the data direction. 1 is DATA-IN (read from device) and 0 is the DATA-OUT. Bit 6 is obselete and bits 0-5 are reserved. This patch redefines the unsued define US_BULK_FLAG_IN from 1 to 1 << 7 aka 0x80 and replaces the obvious users. In a following patch the storage gadget will use it as well.  Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | unusual_freecom.h | s | 1014B | 23 | Michal Nazarewicz | mina86@mina86.com | 1287768109 |  | USB: storage: Use USB_ prefix instead of US_ prefix  This commit changes prefix for some of the USB mass storage class related macros (ie. USB_SC_ for subclass and USB_PR_ for class).  Signed-off-by: Michal Nazarewicz <mina86@mina86.com> Cc: Alan Stern <stern@rowland.harvard.edu> Cc: Matthew Wilcox <willy@linux.intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | freecom.c | s | 15K | 468 | Huajun Li | huajun.li.lee@gmail.com | 1327444263 |  | usb: Disable dynamic id of USB storage subdrivers  Storage subdrivers, like alauda, datafab and others, don't support dynamic  id currently, and it needs lots of work but with very little gain to enable the feature, so disable them in the patch.  Signed-off-by: Huajun Li <huajun.li.lee@gmail.com> Acked-by: Alan Stern <stern@rowland.harvard.edu> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | Kconfig | g | 7.5K |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1333148595 |  | Documentation: remove references to /etc/modprobe.conf  Usage of /etc/modprobe.conf file was deprecated by module-init-tools and is no longer parsed by new kmod tool. References to this file are replaced in Documentation, comments and Kconfig according to the context.  There are also some references to the old /etc/modules.conf from 2.4 kernels that are being removed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi> Acked-by: Takashi Iwai <tiwai@suse.de> Acked-by: Mauro Carvalho Chehab <mchehab@redhat.com> Signed-off-by: Randy Dunlap <rdunlap@xenotime.net> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | unusual_datafab.h | s | 3.0K | 86 | Michal Nazarewicz | mina86@mina86.com | 1287768109 |  | USB: storage: Use USB_ prefix instead of US_ prefix  This commit changes prefix for some of the USB mass storage class related macros (ie. USB_SC_ for subclass and USB_PR_ for class).  Signed-off-by: Michal Nazarewicz <mina86@mina86.com> Cc: Alan Stern <stern@rowland.harvard.edu> Cc: Matthew Wilcox <willy@linux.intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | unusual_karma.h | s | 993B | 23 | Michal Nazarewicz | mina86@mina86.com | 1287768109 |  | USB: storage: Use USB_ prefix instead of US_ prefix  This commit changes prefix for some of the USB mass storage class related macros (ie. USB_SC_ for subclass and USB_PR_ for class).  Signed-off-by: Michal Nazarewicz <mina86@mina86.com> Cc: Alan Stern <stern@rowland.harvard.edu> Cc: Matthew Wilcox <willy@linux.intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | realtek_cr.c | s | 27K | 915 | Sebastian Andrzej Siewior | bigeasy@linutronix.de | 1330456062 |  | usb/storage: redefine US_BULK_FLAG_IN and use it  US_BULK_FLAG_IN is defined as 1 and not used. The USB storage spec says that bit 7 of flags within CBW defines the data direction. 1 is DATA-IN (read from device) and 0 is the DATA-OUT. Bit 6 is obselete and bits 0-5 are reserved. This patch redefines the unsued define US_BULK_FLAG_IN from 1 to 1 << 7 aka 0x80 and replaces the obvious users. In a following patch the storage gadget will use it as well.  Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | alauda.c | s | 33K | 1068 | Huajun Li | huajun.li.lee@gmail.com | 1327444263 |  | usb: Disable dynamic id of USB storage subdrivers  Storage subdrivers, like alauda, datafab and others, don't support dynamic  id currently, and it needs lots of work but with very little gain to enable the feature, so disable them in the patch.  Signed-off-by: Huajun Li <huajun.li.lee@gmail.com> Acked-by: Alan Stern <stern@rowland.harvard.edu> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | isd200.c | s | 44K | 1347 | Huajun Li | huajun.li.lee@gmail.com | 1327444263 |  | usb: Disable dynamic id of USB storage subdrivers  Storage subdrivers, like alauda, datafab and others, don't support dynamic  id currently, and it needs lots of work but with very little gain to enable the feature, so disable them in the patch.  Signed-off-by: Huajun Li <huajun.li.lee@gmail.com> Acked-by: Alan Stern <stern@rowland.harvard.edu> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | unusual_isd200.h | s | 1.7K | 49 | Michal Nazarewicz | mina86@mina86.com | 1287768109 |  | USB: storage: Use USB_ prefix instead of US_ prefix  This commit changes prefix for some of the USB mass storage class related macros (ie. USB_SC_ for subclass and USB_PR_ for class).  Signed-off-by: Michal Nazarewicz <mina86@mina86.com> Cc: Alan Stern <stern@rowland.harvard.edu> Cc: Matthew Wilcox <willy@linux.intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | usb.c | s | 30K | 952 | Jeffrin Jose | ahiliation@yahoo.co.in | 1337273309 |  | USB: storage: fixed keyword related space issues.  Fixed keyword related space issues found by checkpatch.pl tool in drivers/usb/storage/usb.c  Signed-off-by: Jeffrin Jose <ahiliation@yahoo.co.in> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | transport.h | s | 4.1K | 88 | Sebastian Andrzej Siewior | bigeasy@linutronix.de | 1330455918 |  | usb/storage: a couple defines from drivers/usb/storage/transport.h to include/linux/usb/storage.h  This moves the BOT data structures for CBW and CSW from drivers internal header file to global include able file in include/. The storage gadget is using the same name for CSW but a different for CBW so I fix it up properly. The same goes for the ub driver and keucr driver in staging.  Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | unusual_jumpshot.h | s | 1.0K | 24 | Michal Nazarewicz | mina86@mina86.com | 1287768109 |  | USB: storage: Use USB_ prefix instead of US_ prefix  This commit changes prefix for some of the USB mass storage class related macros (ie. USB_SC_ for subclass and USB_PR_ for class).  Signed-off-by: Michal Nazarewicz <mina86@mina86.com> Cc: Alan Stern <stern@rowland.harvard.edu> Cc: Matthew Wilcox <willy@linux.intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | option_ms.h | s | 98B | 4 | Dan Williams | dcbw@redhat.com | 1231351209 |  | USB: unusual dev for Option N.V. ZeroCD modems  Many newer Option mobile broadband devices initially provide a usb-storage "driver CD" device that's pretty useless on Linux since any software on it most likely wouldn't be compatible with your kernel or distro anyway.  Thus, by default just kill the driver CD device by sending the SCSI 'rezero' command, but allow override of the default behavior via usb-storage module parameter so users can keep the ZeroCD device if they really want to.  Inspired by the Sierra TruInstall patch.  Signed-off-by: Dan Williams <dcbw@redhat.com> Acked-by: Marcel Holtmann <marcel@holtmann.org> Cc: Peter Henn <p.henn@option.com Cc: Denis Joseph Barrow <D.Barow@option.com> Cc: Alan Stern <stern@rowland.harvard.edu> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
